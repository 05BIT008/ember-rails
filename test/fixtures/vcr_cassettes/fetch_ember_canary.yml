---
http_interactions:
- request:
    method: get
    uri: http://builds.emberjs.com/canary/ember.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - ! '*/*'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - FH2A00Y9JxTsQVDIQdl503Wc8Zxk/dnZ9f4ehSguwucymJd0agM0G8L+5vDT1j73
      X-Amz-Request-Id:
      - A36E41400762739F
      Date:
      - Thu, 31 Oct 2013 20:27:45 GMT
      Last-Modified:
      - Mon, 28 Oct 2013 16:16:15 GMT
      Etag:
      - ! '"7dba7e578d9c46423b1cf8c136776ccf"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '1081021'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUHJvamVjdDog
        ICBFbWJlciAtIEphdmFTY3JpcHQgQXBwbGljYXRpb24gRnJhbWV3b3JrCi8v
        IENvcHlyaWdodDogQ29weXJpZ2h0IDIwMTEtMjAxMyBUaWxkZSBJbmMuIGFu
        ZCBjb250cmlidXRvcnMKLy8gICAgICAgICAgICBQb3J0aW9ucyBDb3B5cmln
        aHQgMjAwNi0yMDExIFN0cm9iZSBJbmMuCi8vICAgICAgICAgICAgUG9ydGlv
        bnMgQ29weXJpZ2h0IDIwMDgtMjAxMSBBcHBsZSBJbmMuIEFsbCByaWdodHMg
        cmVzZXJ2ZWQuCi8vIExpY2Vuc2U6ICAgTGljZW5zZWQgdW5kZXIgTUlUIGxp
        Y2Vuc2UKLy8gICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNv
        bS9lbWJlcmpzL2VtYmVyLmpzL21hc3Rlci9MSUNFTlNFCi8vID09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09CgoKIC8vIFZlcnNpb246IDEuMy4wLWJl
        dGEuMStjYW5hcnkuM2Y2MGZhNmUKCihmdW5jdGlvbigpIHsKLypnbG9iYWwg
        X19mYWlsX18qLwoKLyoqCkVtYmVyIERlYnVnCgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItZGVidWcKKi8KCi8qKgpAY2xhc3MgRW1iZXIKKi8K
        CmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVtYmVyKSB7CiAgRW1iZXIg
        PSB7fTsKCiAgaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2Ygd2luZG93KSB7
        CiAgICB3aW5kb3cuRW0gPSB3aW5kb3cuRW1iZXIgPSBFbSA9IEVtYmVyOwog
        IH0KfQoKRW1iZXIuRU5WID0gJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBFTlYg
        PyB7fSA6IEVOVjsKCmlmICghKCdNQU5EQVRPUllfU0VUVEVSJyBpbiBFbWJl
        ci5FTlYpKSB7CiAgRW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIgPSB0cnVl
        OyAvLyBkZWZhdWx0IHRvIHRydWUgZm9yIGRlYnVnIGRpc3QKfQoKLyoqCiAg
        RGVmaW5lIGFuIGFzc2VydGlvbiB0aGF0IHdpbGwgdGhyb3cgYW4gZXhjZXB0
        aW9uIGlmIHRoZSBjb25kaXRpb24gaXMgbm90CiAgbWV0LiBFbWJlciBidWls
        ZCB0b29scyB3aWxsIHJlbW92ZSBhbnkgY2FsbHMgdG8gYEVtYmVyLmFzc2Vy
        dCgpYCB3aGVuCiAgZG9pbmcgYSBwcm9kdWN0aW9uIGJ1aWxkLiBFeGFtcGxl
        OgoKICBgYGBqYXZhc2NyaXB0CiAgLy8gVGVzdCBmb3IgdHJ1dGhpbmVzcwog
        IEVtYmVyLmFzc2VydCgnTXVzdCBwYXNzIGEgdmFsaWQgb2JqZWN0Jywgb2Jq
        KTsKICAvLyBGYWlsIHVuY29uZGl0aW9uYWxseQogIEVtYmVyLmFzc2VydCgn
        VGhpcyBjb2RlIHBhdGggc2hvdWxkIG5ldmVyIGJlIHJ1bicpCiAgYGBgCgog
        IEBtZXRob2QgYXNzZXJ0CiAgQHBhcmFtIHtTdHJpbmd9IGRlc2MgQSBkZXNj
        cmlwdGlvbiBvZiB0aGUgYXNzZXJ0aW9uLiBUaGlzIHdpbGwgYmVjb21lCiAg
        ICB0aGUgdGV4dCBvZiB0aGUgRXJyb3IgdGhyb3duIGlmIHRoZSBhc3NlcnRp
        b24gZmFpbHMuCiAgQHBhcmFtIHtCb29sZWFufSB0ZXN0IE11c3QgYmUgdHJ1
        dGh5IGZvciB0aGUgYXNzZXJ0aW9uIHRvIHBhc3MuIElmCiAgICBmYWxzeSwg
        YW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duLgoqLwpFbWJlci5hc3NlcnQg
        PSBmdW5jdGlvbihkZXNjLCB0ZXN0KSB7CiAgaWYgKCF0ZXN0KSB7CiAgICBF
        bWJlci5Mb2dnZXIuYXNzZXJ0KHRlc3QsIGRlc2MpOwogIH0KCiAgaWYgKEVt
        YmVyLnRlc3RpbmcgJiYgIXRlc3QpIHsKICAgIC8vIHdoZW4gdGVzdGluZywg
        ZW5zdXJlIHRlc3QgZmFpbHVyZXMgd2hlbiBhc3NlcnRpb25zIGZhaWwKICAg
        IHRocm93IG5ldyBFbWJlci5FcnJvcigiQXNzZXJ0aW9uIEZhaWxlZDogIiAr
        IGRlc2MpOwogIH0KfTsKCgovKioKICBEaXNwbGF5IGEgd2FybmluZyB3aXRo
        IHRoZSBwcm92aWRlZCBtZXNzYWdlLiBFbWJlciBidWlsZCB0b29scyB3aWxs
        CiAgcmVtb3ZlIGFueSBjYWxscyB0byBgRW1iZXIud2FybigpYCB3aGVuIGRv
        aW5nIGEgcHJvZHVjdGlvbiBidWlsZC4KCiAgQG1ldGhvZCB3YXJuCiAgQHBh
        cmFtIHtTdHJpbmd9IG1lc3NhZ2UgQSB3YXJuaW5nIHRvIGRpc3BsYXkuCiAg
        QHBhcmFtIHtCb29sZWFufSB0ZXN0IEFuIG9wdGlvbmFsIGJvb2xlYW4uIElm
        IGZhbHN5LCB0aGUgd2FybmluZwogICAgd2lsbCBiZSBkaXNwbGF5ZWQuCiov
        CkVtYmVyLndhcm4gPSBmdW5jdGlvbihtZXNzYWdlLCB0ZXN0KSB7CiAgaWYg
        KCF0ZXN0KSB7CiAgICBFbWJlci5Mb2dnZXIud2FybigiV0FSTklORzogIitt
        ZXNzYWdlKTsKICAgIGlmICgndHJhY2UnIGluIEVtYmVyLkxvZ2dlcikgRW1i
        ZXIuTG9nZ2VyLnRyYWNlKCk7CiAgfQp9OwoKLyoqCiAgRGlzcGxheSBhIGRl
        YnVnIG5vdGljZS4gRW1iZXIgYnVpbGQgdG9vbHMgd2lsbCByZW1vdmUgYW55
        IGNhbGxzIHRvCiAgYEVtYmVyLmRlYnVnKClgIHdoZW4gZG9pbmcgYSBwcm9k
        dWN0aW9uIGJ1aWxkLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuZGVidWco
        IkknbSBhIGRlYnVnIG5vdGljZSEiKTsKICBgYGAKCiAgQG1ldGhvZCBkZWJ1
        ZwogIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIEEgZGVidWcgbWVzc2FnZSB0
        byBkaXNwbGF5LgoqLwpFbWJlci5kZWJ1ZyA9IGZ1bmN0aW9uKG1lc3NhZ2Up
        IHsKICBFbWJlci5Mb2dnZXIuZGVidWcoIkRFQlVHOiAiK21lc3NhZ2UpOwp9
        OwoKLyoqCiAgRGlzcGxheSBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2l0aCB0
        aGUgcHJvdmlkZWQgbWVzc2FnZSBhbmQgYSBzdGFjayB0cmFjZQogIChDaHJv
        bWUgYW5kIEZpcmVmb3ggb25seSkuIEVtYmVyIGJ1aWxkIHRvb2xzIHdpbGwg
        cmVtb3ZlIGFueSBjYWxscyB0bwogIGBFbWJlci5kZXByZWNhdGUoKWAgd2hl
        biBkb2luZyBhIHByb2R1Y3Rpb24gYnVpbGQuCgogIEBtZXRob2QgZGVwcmVj
        YXRlCiAgQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgQSBkZXNjcmlwdGlvbiBv
        ZiB0aGUgZGVwcmVjYXRpb24uCiAgQHBhcmFtIHtCb29sZWFufSB0ZXN0IEFu
        IG9wdGlvbmFsIGJvb2xlYW4uIElmIGZhbHN5LCB0aGUgZGVwcmVjYXRpb24K
        ICAgIHdpbGwgYmUgZGlzcGxheWVkLgoqLwpFbWJlci5kZXByZWNhdGUgPSBm
        dW5jdGlvbihtZXNzYWdlLCB0ZXN0KSB7CiAgaWYgKEVtYmVyLlRFU1RJTkdf
        REVQUkVDQVRJT04pIHsgcmV0dXJuOyB9CgogIGlmIChhcmd1bWVudHMubGVu
        Z3RoID09PSAxKSB7IHRlc3QgPSBmYWxzZTsgfQogIGlmICh0ZXN0KSB7IHJl
        dHVybjsgfQoKICBpZiAoRW1iZXIuRU5WLlJBSVNFX09OX0RFUFJFQ0FUSU9O
        KSB7IHRocm93IG5ldyBFbWJlci5FcnJvcihtZXNzYWdlKTsgfQoKICB2YXIg
        ZXJyb3I7CgogIC8vIFdoZW4gdXNpbmcgbmV3IEVycm9yLCB3ZSBjYW4ndCBk
        byB0aGUgYXJndW1lbnRzIGNoZWNrIGZvciBDaHJvbWUuIEFsdGVybmF0aXZl
        cyBhcmUgd2VsY29tZQogIHRyeSB7IF9fZmFpbF9fLmZhaWwoKTsgfSBjYXRj
        aCAoZSkgeyBlcnJvciA9IGU7IH0KCiAgaWYgKEVtYmVyLkxPR19TVEFDS1RS
        QUNFX09OX0RFUFJFQ0FUSU9OICYmIGVycm9yLnN0YWNrKSB7CiAgICB2YXIg
        c3RhY2ssIHN0YWNrU3RyID0gJyc7CiAgICBpZiAoZXJyb3JbJ2FyZ3VtZW50
        cyddKSB7CiAgICAgIC8vIENocm9tZQogICAgICBzdGFjayA9IGVycm9yLnN0
        YWNrLnJlcGxhY2UoL15ccythdFxzKy9nbSwgJycpLgogICAgICAgICAgICAg
        ICAgICAgICAgICAgIHJlcGxhY2UoL14oW15cKF0rPykoW1xuJF0pL2dtLCAn
        e2Fub255bW91c30oJDEpJDInKS4KICAgICAgICAgICAgICAgICAgICAgICAg
        ICByZXBsYWNlKC9eT2JqZWN0Ljxhbm9ueW1vdXM+XHMqXCgoW15cKV0rKVwp
        L2dtLCAne2Fub255bW91c30oJDEpJykuc3BsaXQoJ1xuJyk7CiAgICAgIHN0
        YWNrLnNoaWZ0KCk7CiAgICB9IGVsc2UgewogICAgICAvLyBGaXJlZm94CiAg
        ICAgIHN0YWNrID0gZXJyb3Iuc3RhY2sucmVwbGFjZSgvKD86XG5AOjApP1xz
        KyQvbSwgJycpLgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2Uo
        L15cKC9nbSwgJ3thbm9ueW1vdXN9KCcpLnNwbGl0KCdcbicpOwogICAgfQoK
        ICAgIHN0YWNrU3RyID0gIlxuICAgICIgKyBzdGFjay5zbGljZSgyKS5qb2lu
        KCJcbiAgICAiKTsKICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgc3RhY2tTdHI7
        CiAgfQoKICBFbWJlci5Mb2dnZXIud2FybigiREVQUkVDQVRJT046ICIrbWVz
        c2FnZSk7Cn07CgoKCi8qKgogIEFsaWFzIGFuIG9sZCwgZGVwcmVjYXRlZCBt
        ZXRob2Qgd2l0aCBpdHMgbmV3IGNvdW50ZXJwYXJ0LgoKICBEaXNwbGF5IGEg
        ZGVwcmVjYXRpb24gd2FybmluZyB3aXRoIHRoZSBwcm92aWRlZCBtZXNzYWdl
        IGFuZCBhIHN0YWNrIHRyYWNlCiAgKENocm9tZSBhbmQgRmlyZWZveCBvbmx5
        KSB3aGVuIHRoZSBhc3NpZ25lZCBtZXRob2QgaXMgY2FsbGVkLgoKICBFbWJl
        ciBidWlsZCB0b29scyB3aWxsIG5vdCByZW1vdmUgY2FsbHMgdG8gYEVtYmVy
        LmRlcHJlY2F0ZUZ1bmMoKWAsIHRob3VnaAogIG5vIHdhcm5pbmdzIHdpbGwg
        YmUgc2hvd24gaW4gcHJvZHVjdGlvbi4KCiAgYGBgamF2YXNjcmlwdAogIEVt
        YmVyLm9sZE1ldGhvZCA9IEVtYmVyLmRlcHJlY2F0ZUZ1bmMoIlBsZWFzZSB1
        c2UgdGhlIG5ldywgdXBkYXRlZCBtZXRob2QiLCBFbWJlci5uZXdNZXRob2Qp
        OwogIGBgYAoKICBAbWV0aG9kIGRlcHJlY2F0ZUZ1bmMKICBAcGFyYW0ge1N0
        cmluZ30gbWVzc2FnZSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBkZXByZWNhdGlv
        bi4KICBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBuZXcgZnVuY3Rpb24g
        Y2FsbGVkIHRvIHJlcGxhY2UgaXRzIGRlcHJlY2F0ZWQgY291bnRlcnBhcnQu
        CiAgQHJldHVybiB7RnVuY3Rpb259IGEgbmV3IGZ1bmN0aW9uIHRoYXQgd3Jh
        cHBlZCB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCBhIGRlcHJlY2F0aW9u
        IHdhcm5pbmcKKi8KRW1iZXIuZGVwcmVjYXRlRnVuYyA9IGZ1bmN0aW9uKG1l
        c3NhZ2UsIGZ1bmMpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICBFbWJl
        ci5kZXByZWNhdGUobWVzc2FnZSk7CiAgICByZXR1cm4gZnVuYy5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpOwogIH07Cn07CgoKLy8gSW5mb3JtIHRoZSBkZXZl
        bG9wZXIgYWJvdXQgdGhlIEVtYmVyIEluc3BlY3RvciBpZiBub3QgaW5zdGFs
        bGVkLgppZiAoIUVtYmVyLnRlc3RpbmcpIHsKICBpZiAodHlwZW9mIHdpbmRv
        dyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZSAmJiB3aW5kb3cu
        YWRkRXZlbnRMaXN0ZW5lcikgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVu
        ZXIoImxvYWQiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LmJv
        ZHkgJiYgZG9jdW1lbnQuYm9keS5kYXRhc2V0ICYmICFkb2N1bWVudC5ib2R5
        LmRhdGFzZXQuZW1iZXJFeHRlbnNpb24pIHsKICAgICAgICBFbWJlci5kZWJ1
        ZygnRm9yIG1vcmUgYWR2YW5jZWQgZGVidWdnaW5nLCBpbnN0YWxsIHRoZSBF
        bWJlciBJbnNwZWN0b3IgZnJvbSBodHRwczovL2Nocm9tZS5nb29nbGUuY29t
        L3dlYnN0b3JlL2RldGFpbC9lbWJlci1pbnNwZWN0b3IvYm1kYmxuY2Vna2Vu
        a2FjaWVpaGZocGpmcHBvY29uaGknKTsKICAgICAgfQogICAgfSwgZmFsc2Up
        OwogIH0KfQoKfSkoKTsKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09Ci8vIFByb2plY3Q6ICAgRW1iZXIgLSBKYXZhU2NyaXB0IEFwcGxpY2F0
        aW9uIEZyYW1ld29yawovLyBDb3B5cmlnaHQ6IENvcHlyaWdodCAyMDExLTIw
        MTMgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3JzCi8vICAgICAgICAgICAg
        UG9ydGlvbnMgQ29weXJpZ2h0IDIwMDYtMjAxMSBTdHJvYmUgSW5jLgovLyAg
        ICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDA4LTIwMTEgQXBwbGUg
        SW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLyBMaWNlbnNlOiAgIExpY2Vu
        c2VkIHVuZGVyIE1JVCBsaWNlbnNlCi8vICAgICAgICAgICAgU2VlIGh0dHBz
        Oi8vcmF3LmdpdGh1Yi5jb20vZW1iZXJqcy9lbWJlci5qcy9tYXN0ZXIvTElD
        RU5TRQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCiAvLyBW
        ZXJzaW9uOiAxLjMuMC1iZXRhLjErY2FuYXJ5LjNmNjBmYTZlCgooZnVuY3Rp
        b24oKSB7CnZhciBkZWZpbmUsIHJlcXVpcmVNb2R1bGU7CgooZnVuY3Rpb24o
        KSB7CiAgdmFyIHJlZ2lzdHJ5ID0ge30sIHNlZW4gPSB7fTsKCiAgZGVmaW5l
        ID0gZnVuY3Rpb24obmFtZSwgZGVwcywgY2FsbGJhY2spIHsKICAgIHJlZ2lz
        dHJ5W25hbWVdID0geyBkZXBzOiBkZXBzLCBjYWxsYmFjazogY2FsbGJhY2sg
        fTsKICB9OwoKICByZXF1aXJlTW9kdWxlID0gZnVuY3Rpb24obmFtZSkgewog
        ICAgaWYgKHNlZW5bbmFtZV0pIHsgcmV0dXJuIHNlZW5bbmFtZV07IH0KICAg
        IHNlZW5bbmFtZV0gPSB7fTsKCiAgICB2YXIgbW9kLCBkZXBzLCBjYWxsYmFj
        aywgcmVpZmllZCwgZXhwb3J0czsKCiAgICBtb2QgPSByZWdpc3RyeVtuYW1l
        XTsKCiAgICBpZiAoIW1vZCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk1v
        ZHVsZSAnIiArIG5hbWUgKyAiJyBub3QgZm91bmQuIik7CiAgICB9CgogICAg
        ZGVwcyA9IG1vZC5kZXBzOwogICAgY2FsbGJhY2sgPSBtb2QuY2FsbGJhY2s7
        CiAgICByZWlmaWVkID0gW107CgogICAgZm9yICh2YXIgaT0wLCBsPWRlcHMu
        bGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBpZiAoZGVwc1tpXSA9PT0gJ2V4
        cG9ydHMnKSB7CiAgICAgICAgcmVpZmllZC5wdXNoKGV4cG9ydHMgPSB7fSk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVpZmllZC5wdXNoKHJlcXVpcmVN
        b2R1bGUoZGVwc1tpXSkpOwogICAgICB9CiAgICB9CgogICAgdmFyIHZhbHVl
        ID0gY2FsbGJhY2suYXBwbHkodGhpcywgcmVpZmllZCk7CiAgICByZXR1cm4g
        c2VlbltuYW1lXSA9IGV4cG9ydHMgfHwgdmFsdWU7CiAgfTsKfSkoKTsKKGZ1
        bmN0aW9uKCkgewovKmdsb2JhbHMgRW06dHJ1ZSBFTlYgKi8KCi8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8qKgogIEFs
        bCBFbWJlciBtZXRob2RzIGFuZCBmdW5jdGlvbnMgYXJlIGRlZmluZWQgaW5z
        aWRlIG9mIHRoaXMgbmFtZXNwYWNlLiBZb3UKICBnZW5lcmFsbHkgc2hvdWxk
        IG5vdCBhZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhpcyBuYW1lc3BhY2UgYXMg
        aXQgbWF5IGJlCiAgb3ZlcndyaXR0ZW4gYnkgZnV0dXJlIHZlcnNpb25zIG9m
        IEVtYmVyLgoKICBZb3UgY2FuIGFsc28gdXNlIHRoZSBzaG9ydGhhbmQgYEVt
        YCBpbnN0ZWFkIG9mIGBFbWJlcmAuCgogIEVtYmVyLVJ1bnRpbWUgaXMgYSBm
        cmFtZXdvcmsgdGhhdCBwcm92aWRlcyBjb3JlIGZ1bmN0aW9ucyBmb3IgRW1i
        ZXIgaW5jbHVkaW5nCiAgY3Jvc3MtcGxhdGZvcm0gZnVuY3Rpb25zLCBzdXBw
        b3J0IGZvciBwcm9wZXJ0eSBvYnNlcnZpbmcgYW5kIG9iamVjdHMuIEl0cwog
        IGZvY3VzIGlzIG9uIHNtYWxsIHNpemUgYW5kIHBlcmZvcm1hbmNlLiBZb3Ug
        Y2FuIHVzZSB0aGlzIGluIHBsYWNlIG9mIG9yCiAgYWxvbmctc2lkZSBvdGhl
        ciBjcm9zcy1wbGF0Zm9ybSBsaWJyYXJpZXMgc3VjaCBhcyBqUXVlcnkuCgog
        IFRoZSBjb3JlIFJ1bnRpbWUgZnJhbWV3b3JrIGlzIGJhc2VkIG9uIHRoZSBq
        UXVlcnkgQVBJIHdpdGggYSBudW1iZXIgb2YKICBwZXJmb3JtYW5jZSBvcHRp
        bWl6YXRpb25zLgoKICBAY2xhc3MgRW1iZXIKICBAc3RhdGljCiAgQHZlcnNp
        b24gMS4zLjAtYmV0YS4xK2NhbmFyeS4zZjYwZmE2ZQoqLwoKaWYgKCd1bmRl
        ZmluZWQnID09PSB0eXBlb2YgRW1iZXIpIHsKICAvLyBDcmVhdGUgY29yZSBv
        YmplY3QuIE1ha2UgaXQgYWN0IGxpa2UgYW4gaW5zdGFuY2Ugb2YgRW1iZXIu
        TmFtZXNwYWNlIHNvIHRoYXQKICAvLyBvYmplY3RzIGFzc2lnbmVkIHRvIGl0
        IGFyZSBnaXZlbiBhIHNhbmUgc3RyaW5nIHJlcHJlc2VudGF0aW9uLgogIEVt
        YmVyID0ge307Cn0KCi8vIERlZmF1bHQgaW1wb3J0cywgZXhwb3J0cyBhbmQg
        bG9va3VwIHRvIHRoZSBnbG9iYWwgb2JqZWN0Owp2YXIgaW1wb3J0cyA9IEVt
        YmVyLmltcG9ydHMgPSBFbWJlci5pbXBvcnRzIHx8IHRoaXM7CnZhciBleHBv
        cnRzID0gRW1iZXIuZXhwb3J0cyA9IEVtYmVyLmV4cG9ydHMgfHwgdGhpczsK
        dmFyIGxvb2t1cCAgPSBFbWJlci5sb29rdXAgID0gRW1iZXIubG9va3VwICB8
        fCB0aGlzOwoKLy8gYWxpYXNlcyBuZWVkZWQgdG8ga2VlcCBtaW5pZmllcnMg
        ZnJvbSByZW1vdmluZyB0aGUgZ2xvYmFsIGNvbnRleHQKZXhwb3J0cy5FbSA9
        IGV4cG9ydHMuRW1iZXIgPSBFbSA9IEVtYmVyOwoKLy8gTWFrZSBzdXJlIHRo
        ZXNlIGFyZSBzZXQgd2hldGhlciBFbWJlciB3YXMgYWxyZWFkeSBkZWZpbmVk
        IG9yIG5vdAoKRW1iZXIuaXNOYW1lc3BhY2UgPSB0cnVlOwoKRW1iZXIudG9T
        dHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuICJFbWJlciI7IH07CgoKLyoq
        CiAgQHByb3BlcnR5IFZFUlNJT04KICBAdHlwZSBTdHJpbmcKICBAZGVmYXVs
        dCAnMS4zLjAtYmV0YS4xK2NhbmFyeS4zZjYwZmE2ZScKICBAZmluYWwKKi8K
        RW1iZXIuVkVSU0lPTiA9ICcxLjMuMC1iZXRhLjErY2FuYXJ5LjNmNjBmYTZl
        JzsKCi8qKgogIFN0YW5kYXJkIGVudmlyb25tZW50YWwgdmFyaWFibGVzLiBZ
        b3UgY2FuIGRlZmluZSB0aGVzZSBpbiBhIGdsb2JhbCBgRU5WYAogIHZhcmlh
        YmxlIGJlZm9yZSBsb2FkaW5nIEVtYmVyIHRvIGNvbnRyb2wgdmFyaW91cyBj
        b25maWd1cmF0aW9uCiAgc2V0dGluZ3MuCgogIEBwcm9wZXJ0eSBFTlYKICBA
        dHlwZSBIYXNoCiovCgppZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBFTlYp
        IHsKICBleHBvcnRzLkVOViA9IHt9Owp9CgovLyBXZSBkaXNhYmxlIHRoZSBS
        QU5HRSBBUEkgYnkgZGVmYXVsdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucwpp
        ZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBFTlYuRElTQUJMRV9SQU5HRV9B
        UEkpIHsKICBFTlYuRElTQUJMRV9SQU5HRV9BUEkgPSB0cnVlOwp9CgoKRW1i
        ZXIuRU5WID0gRW1iZXIuRU5WIHx8IEVOVjsKCkVtYmVyLmNvbmZpZyA9IEVt
        YmVyLmNvbmZpZyB8fCB7fTsKCi8qKgogIEhhc2ggb2YgZW5hYmxlZCBDYW5h
        cnkgZmVhdHVyZXMuIEFkZCB0byBiZWZvcmUgY3JlYXRpbmcgeW91ciBhcHBs
        aWNhdGlvbi4KCiAgWW91IGNhbiBhbHNvIGRlZmluZSBgRU5WLkZFQVRVUkVT
        YCBpZiB5b3UgbmVlZCB0byBlbmFibGUgZmVhdHVyZXMgZmxhZ2dlZCBhdCBy
        dW50aW1lLgoKICBAcHJvcGVydHkgRkVBVFVSRVMKICBAdHlwZSBIYXNoCiov
        CgpFbWJlci5GRUFUVVJFUyA9IEVtYmVyLkVOVi5GRUFUVVJFUyB8fCB7fTsK
        Ci8qKgogIFRlc3QgdGhhdCBhIGZlYXR1cmUgaXMgZW5hYmxlZC4gUGFyc2Vk
        IGJ5IEVtYmVyJ3MgYnVpbGQgdG9vbHMgdG8gbGVhdmUKICBleHBlcmltZW50
        YWwgZmVhdHVyZXMgb3V0IG9mIGJldGEvc3RhYmxlIGJ1aWxkcy4KCiAgWW91
        IGNhbiBkZWZpbmUgdGhlIGZvbGxvd2luZyBjb25maWd1cmF0aW9uIG9wdGlv
        bnM6CgogICogYEVOVi5FTkFCTEVfQUxMX0ZFQVRVUkVTYCAtIGZvcmNlIGFs
        bCBmZWF0dXJlcyB0byBiZSBlbmFibGVkLgogICogYEVOVi5FTkFCTEVfT1BU
        SU9OQUxfRkVBVFVSRVNgIC0gZW5hYmxlIGFueSBmZWF0dXJlcyB0aGF0IGhh
        dmUgbm90IGJlZW4gZXhwbGljaXRseQogICAgZW5hYmxlZC9kaXNhYmxlZC4K
        CiAgQG1ldGhvZCBpc0VuYWJsZWQKICBAcGFyYW0ge3N0cmluZ30gZmVhdHVy
        ZQoqLwoKRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkID0gZnVuY3Rpb24oZmVh
        dHVyZSkgewogIHZhciBmZWF0dXJlVmFsdWUgPSBFbWJlci5GRUFUVVJFU1tm
        ZWF0dXJlXTsKCiAgaWYgKEVtYmVyLkVOVi5FTkFCTEVfQUxMX0ZFQVRVUkVT
        KSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYgKGZlYXR1cmVWYWx1
        ZSA9PT0gdHJ1ZSB8fCBmZWF0dXJlVmFsdWUgPT09IGZhbHNlIHx8IGZlYXR1
        cmVWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gZmVhdHVyZVZh
        bHVlOwogIH0gZWxzZSBpZiAoRW1iZXIuRU5WLkVOQUJMRV9PUFRJT05BTF9G
        RUFUVVJFUykgewogICAgcmV0dXJuIHRydWU7CiAgfSBlbHNlIHsKICAgIHJl
        dHVybiBmYWxzZTsKICB9Cn07CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIEJPT1RT
        VFJBUAovLwoKLyoqCiAgRGV0ZXJtaW5lcyB3aGV0aGVyIEVtYmVyIHNob3Vs
        ZCBlbmhhbmNlcyBzb21lIGJ1aWx0LWluIG9iamVjdCBwcm90b3R5cGVzIHRv
        CiAgcHJvdmlkZSBhIG1vcmUgZnJpZW5kbHkgQVBJLiBJZiBlbmFibGVkLCBh
        IGZldyBtZXRob2RzIHdpbGwgYmUgYWRkZWQgdG8KICBgRnVuY3Rpb25gLCBg
        U3RyaW5nYCwgYW5kIGBBcnJheWAuIGBPYmplY3QucHJvdG90eXBlYCB3aWxs
        IG5vdCBiZSBlbmhhbmNlZCwKICB3aGljaCBpcyB0aGUgb25lIHRoYXQgY2F1
        c2VzIG1vc3QgdHJvdWJsZSBmb3IgcGVvcGxlLgoKICBJbiBnZW5lcmFsIHdl
        IHJlY29tbWVuZCBsZWF2aW5nIHRoaXMgb3B0aW9uIHNldCB0byB0cnVlIHNp
        bmNlIGl0IHJhcmVseQogIGNvbmZsaWN0cyB3aXRoIG90aGVyIGNvZGUuIElm
        IHlvdSBuZWVkIHRvIHR1cm4gaXQgb2ZmIGhvd2V2ZXIsIHlvdSBjYW4KICBk
        ZWZpbmUgYW4gYEVOVi5FWFRFTkRfUFJPVE9UWVBFU2AgY29uZmlnIHRvIGRp
        c2FibGUgaXQuCgogIEBwcm9wZXJ0eSBFWFRFTkRfUFJPVE9UWVBFUwogIEB0
        eXBlIEJvb2xlYW4KICBAZGVmYXVsdCB0cnVlCiovCkVtYmVyLkVYVEVORF9Q
        Uk9UT1RZUEVTID0gRW1iZXIuRU5WLkVYVEVORF9QUk9UT1RZUEVTOwoKaWYg
        KHR5cGVvZiBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9PT0gJ3VuZGVmaW5l
        ZCcpIHsKICBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9IHRydWU7Cn0KCi8q
        KgogIERldGVybWluZXMgd2hldGhlciBFbWJlciBsb2dzIGEgZnVsbCBzdGFj
        ayB0cmFjZSBkdXJpbmcgZGVwcmVjYXRpb24gd2FybmluZ3MKCiAgQHByb3Bl
        cnR5IExPR19TVEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9OCiAgQHR5cGUgQm9v
        bGVhbgogIEBkZWZhdWx0IHRydWUKKi8KRW1iZXIuTE9HX1NUQUNLVFJBQ0Vf
        T05fREVQUkVDQVRJT04gPSAoRW1iZXIuRU5WLkxPR19TVEFDS1RSQUNFX09O
        X0RFUFJFQ0FUSU9OICE9PSBmYWxzZSk7CgovKioKICBEZXRlcm1pbmVzIHdo
        ZXRoZXIgRW1iZXIgc2hvdWxkIGFkZCBFQ01BU2NyaXB0IDUgc2hpbXMgdG8g
        b2xkZXIgYnJvd3NlcnMuCgogIEBwcm9wZXJ0eSBTSElNX0VTNQogIEB0eXBl
        IEJvb2xlYW4KICBAZGVmYXVsdCBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUwoq
        LwpFbWJlci5TSElNX0VTNSA9IChFbWJlci5FTlYuU0hJTV9FUzUgPT09IGZh
        bHNlKSA/IGZhbHNlIDogRW1iZXIuRVhURU5EX1BST1RPVFlQRVM7CgovKioK
        ICBEZXRlcm1pbmVzIHdoZXRoZXIgRW1iZXIgbG9ncyBpbmZvIGFib3V0IHZl
        cnNpb24gb2YgdXNlZCBsaWJyYXJpZXMKCiAgQHByb3BlcnR5IExPR19WRVJT
        SU9OCiAgQHR5cGUgQm9vbGVhbgogIEBkZWZhdWx0IHRydWUKKi8KRW1iZXIu
        TE9HX1ZFUlNJT04gPSAoRW1iZXIuRU5WLkxPR19WRVJTSU9OID09PSBmYWxz
        ZSkgPyBmYWxzZSA6IHRydWU7CgovKioKICBFbXB0eSBmdW5jdGlvbi4gVXNl
        ZnVsIGZvciBzb21lIG9wZXJhdGlvbnMuIEFsd2F5cyByZXR1cm5zIGB0aGlz
        YC4KCiAgQG1ldGhvZCBLCiAgQHByaXZhdGUKICBAcmV0dXJuIHtPYmplY3R9
        CiovCkVtYmVyLksgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH07CgoK
        Ly8gU3R1YiBvdXQgdGhlIG1ldGhvZHMgZGVmaW5lZCBieSB0aGUgZW1iZXIt
        ZGVidWcgcGFja2FnZSBpbiBjYXNlIGl0J3Mgbm90IGxvYWRlZAoKaWYgKCd1
        bmRlZmluZWQnID09PSB0eXBlb2YgRW1iZXIuYXNzZXJ0KSB7IEVtYmVyLmFz
        c2VydCA9IEVtYmVyLks7IH0KaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2Yg
        RW1iZXIud2FybikgeyBFbWJlci53YXJuID0gRW1iZXIuSzsgfQppZiAoJ3Vu
        ZGVmaW5lZCcgPT09IHR5cGVvZiBFbWJlci5kZWJ1ZykgeyBFbWJlci5kZWJ1
        ZyA9IEVtYmVyLks7IH0KaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgRW1i
        ZXIuZGVwcmVjYXRlKSB7IEVtYmVyLmRlcHJlY2F0ZSA9IEVtYmVyLks7IH0K
        aWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgRW1iZXIuZGVwcmVjYXRlRnVu
        YykgewogIEVtYmVyLmRlcHJlY2F0ZUZ1bmMgPSBmdW5jdGlvbihfLCBmdW5j
        KSB7IHJldHVybiBmdW5jOyB9Owp9CgovKioKICBQcmV2aW91c2x5IHdlIHVz
        ZWQgYEVtYmVyLiQudXVpZGAsIGhvd2V2ZXIgYCQudXVpZGAgaGFzIGJlZW4g
        cmVtb3ZlZCBmcm9tCiAgalF1ZXJ5IG1hc3Rlci4gV2UnbGwganVzdCBib290
        c3RyYXAgb3VyIG93biB1dWlkIG5vdy4KCiAgQHByb3BlcnR5IHV1aWQKICBA
        dHlwZSBOdW1iZXIKICBAcHJpdmF0ZQoqLwpFbWJlci51dWlkID0gMDsKCi8q
        KgogIE1lcmdlIHRoZSBjb250ZW50cyBvZiB0d28gb2JqZWN0cyB0b2dldGhl
        ciBpbnRvIHRoZSBmaXJzdCBvYmplY3QuCgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5tZXJnZSh7Zmlyc3Q6ICdUb20nfSwge2xhc3Q6ICdEYWxlJ30pOyAv
        LyB7Zmlyc3Q6ICdUb20nLCBsYXN0OiAnRGFsZSd9CiAgdmFyIGEgPSB7Zmly
        c3Q6ICdZZWh1ZGEnfSwgYiA9IHtsYXN0OiAnS2F0eid9OwogIEVtYmVyLm1l
        cmdlKGEsIGIpOyAvLyBhID09IHtmaXJzdDogJ1llaHVkYScsIGxhc3Q6ICdL
        YXR6J30sIGIgPT0ge2xhc3Q6ICdLYXR6J30KICBgYGAKCiAgQG1ldGhvZCBt
        ZXJnZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb3JpZ2luYWwg
        VGhlIG9iamVjdCB0byBtZXJnZSBpbnRvCiAgQHBhcmFtIHtPYmplY3R9IHVw
        ZGF0ZXMgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbQogIEBy
        ZXR1cm4ge09iamVjdH0KKi8KRW1iZXIubWVyZ2UgPSBmdW5jdGlvbihvcmln
        aW5hbCwgdXBkYXRlcykgewogIGZvciAodmFyIHByb3AgaW4gdXBkYXRlcykg
        ewogICAgaWYgKCF1cGRhdGVzLmhhc093blByb3BlcnR5KHByb3ApKSB7IGNv
        bnRpbnVlOyB9CiAgICBvcmlnaW5hbFtwcm9wXSA9IHVwZGF0ZXNbcHJvcF07
        CiAgfQogIHJldHVybiBvcmlnaW5hbDsKfTsKCi8qKgogIFJldHVybnMgdHJ1
        ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIG51bGwgb3IgdW5kZWZpbmVkLiBU
        aGlzIGF2b2lkcyBlcnJvcnMKICBmcm9tIEpTTGludCBjb21wbGFpbmluZyBh
        Ym91dCB1c2Ugb2YgPT0sIHdoaWNoIGNhbiBiZSB0ZWNobmljYWxseQogIGNv
        bmZ1c2luZy4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmlzTm9uZSgpOyAg
        ICAgICAgICAgICAgLy8gdHJ1ZQogIEVtYmVyLmlzTm9uZShudWxsKTsgICAg
        ICAgICAgLy8gdHJ1ZQogIEVtYmVyLmlzTm9uZSh1bmRlZmluZWQpOyAgICAg
        Ly8gdHJ1ZQogIEVtYmVyLmlzTm9uZSgnJyk7ICAgICAgICAgICAgLy8gZmFs
        c2UKICBFbWJlci5pc05vbmUoW10pOyAgICAgICAgICAgIC8vIGZhbHNlCiAg
        RW1iZXIuaXNOb25lKGZ1bmN0aW9uKCkge30pOyAgLy8gZmFsc2UKICBgYGAK
        CiAgQG1ldGhvZCBpc05vbmUKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmpl
        Y3R9IG9iaiBWYWx1ZSB0byB0ZXN0CiAgQHJldHVybiB7Qm9vbGVhbn0KKi8K
        RW1iZXIuaXNOb25lID0gZnVuY3Rpb24ob2JqKSB7CiAgcmV0dXJuIG9iaiA9
        PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZDsKfTsKRW1iZXIubm9uZSA9
        IEVtYmVyLmRlcHJlY2F0ZUZ1bmMoIkVtYmVyLm5vbmUgaXMgZGVwcmVjYXRl
        ZC4gUGxlYXNlIHVzZSBFbWJlci5pc05vbmUgaW5zdGVhZC4iLCBFbWJlci5p
        c05vbmUpOwoKLyoqCiAgVmVyaWZpZXMgdGhhdCBhIHZhbHVlIGlzIGBudWxs
        YCBvciBhbiBlbXB0eSBzdHJpbmcsIGVtcHR5IGFycmF5LAogIG9yIGVtcHR5
        IGZ1bmN0aW9uLgoKICBDb25zdHJhaW5zIHRoZSBydWxlcyBvbiBgRW1iZXIu
        aXNOb25lYCBieSByZXR1cm5pbmcgZmFsc2UgZm9yIGVtcHR5CiAgc3RyaW5n
        IGFuZCBlbXB0eSBhcnJheXMuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5p
        c0VtcHR5KCk7ICAgICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0Vt
        cHR5KG51bGwpOyAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5
        KHVuZGVmaW5lZCk7ICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5KCcn
        KTsgICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5KFtdKTsg
        ICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5KCdBZGFtIEhh
        d2tpbnMnKTsgIC8vIGZhbHNlCiAgRW1iZXIuaXNFbXB0eShbMCwxLDJdKTsg
        ICAgICAgICAvLyBmYWxzZQogIGBgYAoKICBAbWV0aG9kIGlzRW1wdHkKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBWYWx1ZSB0byB0ZXN0
        CiAgQHJldHVybiB7Qm9vbGVhbn0KKi8KRW1iZXIuaXNFbXB0eSA9IGZ1bmN0
        aW9uKG9iaikgewogIHJldHVybiBFbWJlci5pc05vbmUob2JqKSB8fCAob2Jq
        Lmxlbmd0aCA9PT0gMCAmJiB0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nKSB8
        fCAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgRW1iZXIuZ2V0KG9iaiwg
        J2xlbmd0aCcpID09PSAwKTsKfTsKRW1iZXIuZW1wdHkgPSBFbWJlci5kZXBy
        ZWNhdGVGdW5jKCJFbWJlci5lbXB0eSBpcyBkZXByZWNhdGVkLiBQbGVhc2Ug
        dXNlIEVtYmVyLmlzRW1wdHkgaW5zdGVhZC4iLCBFbWJlci5pc0VtcHR5KSA7
        CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgTm9kZSAqLwov
        KioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKLyoqCiAgUGxhdGZvcm0gc3Bl
        Y2lmaWMgbWV0aG9kcyBhbmQgZmVhdHVyZSBkZXRlY3RvcnMgbmVlZGVkIGJ5
        IHRoZSBmcmFtZXdvcmsuCgogIEBjbGFzcyBwbGF0Zm9ybQogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAc3RhdGljCiovCnZhciBwbGF0Zm9ybSA9IEVtYmVyLnBs
        YXRmb3JtID0ge307CgoKLyoqCiAgSWRlbnRpY2FsIHRvIGBPYmplY3QuY3Jl
        YXRlKClgLiBJbXBsZW1lbnRzIGlmIG5vdCBhdmFpbGFibGUgbmF0aXZlbHku
        CgogIEBtZXRob2QgY3JlYXRlCiAgQGZvciBFbWJlcgoqLwpFbWJlci5jcmVh
        dGUgPSBPYmplY3QuY3JlYXRlOwoKLy8gSUU4IGhhcyBPYmplY3QuY3JlYXRl
        IGJ1dCBpdCBjb3VsZG4ndCB0cmVhdCBwcm9wZXJ0eSBkZXNjcmlwdG9ycy4K
        aWYgKEVtYmVyLmNyZWF0ZSkgewogIGlmIChFbWJlci5jcmVhdGUoe2E6IDF9
        LCB7YToge3ZhbHVlOiAyfX0pLmEgIT09IDIpIHsKICAgIEVtYmVyLmNyZWF0
        ZSA9IG51bGw7CiAgfQp9CgovLyBTVFVCX09CSkVDVF9DUkVBVEUgYWxsb3dz
        IHVzIHRvIG92ZXJyaWRlIG90aGVyIGxpYnJhcmllcyB0aGF0IHN0dWIKLy8g
        T2JqZWN0LmNyZWF0ZSBkaWZmZXJlbnQgdGhhbiB3ZSB3b3VsZCBwcmVmZXIK
        aWYgKCFFbWJlci5jcmVhdGUgfHwgRW1iZXIuRU5WLlNUVUJfT0JKRUNUX0NS
        RUFURSkgewogIHZhciBLID0gZnVuY3Rpb24oKSB7fTsKCiAgRW1iZXIuY3Jl
        YXRlID0gZnVuY3Rpb24ob2JqLCBwcm9wcykgewogICAgSy5wcm90b3R5cGUg
        PSBvYmo7CiAgICBvYmogPSBuZXcgSygpOwogICAgaWYgKHByb3BzKSB7CiAg
        ICAgIEsucHJvdG90eXBlID0gb2JqOwogICAgICBmb3IgKHZhciBwcm9wIGlu
        IHByb3BzKSB7CiAgICAgICAgSy5wcm90b3R5cGVbcHJvcF0gPSBwcm9wc1tw
        cm9wXS52YWx1ZTsKICAgICAgfQogICAgICBvYmogPSBuZXcgSygpOwogICAg
        fQogICAgSy5wcm90b3R5cGUgPSBudWxsOwoKICAgIHJldHVybiBvYmo7CiAg
        fTsKCiAgRW1iZXIuY3JlYXRlLmlzU2ltdWxhdGVkID0gdHJ1ZTsKfQoKdmFy
        IGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5Owp2YXIg
        Y2FuUmVkZWZpbmVQcm9wZXJ0aWVzLCBjYW5EZWZpbmVQcm9wZXJ0eU9uRE9N
        OwoKLy8gQ2F0Y2ggSUU4IHdoZXJlIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBl
        eGlzdHMgYnV0IG9ubHkgd29ya3Mgb24gRE9NIGVsZW1lbnRzCmlmIChkZWZp
        bmVQcm9wZXJ0eSkgewogIHRyeSB7CiAgICBkZWZpbmVQcm9wZXJ0eSh7fSwg
        J2EnLHtnZXQ6ZnVuY3Rpb24oKSB7fX0pOwogIH0gY2F0Y2ggKGUpIHsKICAg
        IGRlZmluZVByb3BlcnR5ID0gbnVsbDsKICB9Cn0KCmlmIChkZWZpbmVQcm9w
        ZXJ0eSkgewogIC8vIERldGVjdHMgYSBidWcgaW4gQW5kcm9pZCA8My4yIHdo
        ZXJlIHlvdSBjYW5ub3QgcmVkZWZpbmUgYSBwcm9wZXJ0eSB1c2luZwogIC8v
        IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBvbmNlIGFjY2Vzc29ycyBoYXZlIGFs
        cmVhZHkgYmVlbiBzZXQuCiAgY2FuUmVkZWZpbmVQcm9wZXJ0aWVzID0gKGZ1
        bmN0aW9uKCkgewogICAgdmFyIG9iaiA9IHt9OwoKICAgIGRlZmluZVByb3Bl
        cnR5KG9iaiwgJ2EnLCB7CiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAg
        ICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsg
        fSwKICAgICAgc2V0OiBmdW5jdGlvbigpIHsgfQogICAgfSk7CgogICAgZGVm
        aW5lUHJvcGVydHkob2JqLCAnYScsIHsKICAgICAgY29uZmlndXJhYmxlOiB0
        cnVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTog
        dHJ1ZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwoKICAgIHJldHVybiBv
        YmouYSA9PT0gdHJ1ZTsKICB9KSgpOwoKICAvLyBUaGlzIGlzIGZvciBTYWZh
        cmkgNS4wLCB3aGljaCBzdXBwb3J0cyBPYmplY3QuZGVmaW5lUHJvcGVydHks
        IGJ1dCBub3QKICAvLyBvbiBET00gbm9kZXMuCiAgY2FuRGVmaW5lUHJvcGVy
        dHlPbkRPTSA9IChmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgIGRlZmlu
        ZVByb3BlcnR5KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCAnZGVm
        aW5lUHJvcGVydHlPbkRPTScsIHt9KTsKICAgICAgcmV0dXJuIHRydWU7CiAg
        ICB9IGNhdGNoKGUpIHsgfQoKICAgIHJldHVybiBmYWxzZTsKICB9KSgpOwoK
        ICBpZiAoIWNhblJlZGVmaW5lUHJvcGVydGllcykgewogICAgZGVmaW5lUHJv
        cGVydHkgPSBudWxsOwogIH0gZWxzZSBpZiAoIWNhbkRlZmluZVByb3BlcnR5
        T25ET00pIHsKICAgIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24ob2JqLCBr
        ZXlOYW1lLCBkZXNjKSB7CiAgICAgIHZhciBpc05vZGU7CgogICAgICBpZiAo
        dHlwZW9mIE5vZGUgPT09ICJvYmplY3QiKSB7CiAgICAgICAgaXNOb2RlID0g
        b2JqIGluc3RhbmNlb2YgTm9kZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBp
        c05vZGUgPSB0eXBlb2Ygb2JqID09PSAib2JqZWN0IiAmJiB0eXBlb2Ygb2Jq
        Lm5vZGVUeXBlID09PSAibnVtYmVyIiAmJiB0eXBlb2Ygb2JqLm5vZGVOYW1l
        ID09PSAic3RyaW5nIjsKICAgICAgfQoKICAgICAgaWYgKGlzTm9kZSkgewog
        ICAgICAgIC8vIFRPRE86IFNob3VsZCB3ZSBoYXZlIGEgd2FybmluZyBoZXJl
        PwogICAgICAgIHJldHVybiAob2JqW2tleU5hbWVdID0gZGVzYy52YWx1ZSk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQ
        cm9wZXJ0eShvYmosIGtleU5hbWUsIGRlc2MpOwogICAgICB9CiAgICB9Owog
        IH0KfQoKLyoqCkBjbGFzcyBwbGF0Zm9ybQpAbmFtZXNwYWNlIEVtYmVyCiov
        CgovKioKICBJZGVudGljYWwgdG8gYE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgp
        YC4gSW1wbGVtZW50cyBhcyBtdWNoIGZ1bmN0aW9uYWxpdHkKICBhcyBwb3Nz
        aWJsZSBpZiBub3QgYXZhaWxhYmxlIG5hdGl2ZWx5LgoKICBAbWV0aG9kIGRl
        ZmluZVByb3BlcnR5CiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0
        IHRvIG1vZGlmeQogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIHByb3BlcnR5
        IG5hbWUgdG8gbW9kaWZ5CiAgQHBhcmFtIHtPYmplY3R9IGRlc2MgZGVzY3Jp
        cHRvciBoYXNoCiAgQHJldHVybiB7dm9pZH0KKi8KcGxhdGZvcm0uZGVmaW5l
        UHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eTsKCi8qKgogIFNldCB0byB0cnVl
        IGlmIHRoZSBwbGF0Zm9ybSBzdXBwb3J0cyBuYXRpdmUgZ2V0dGVycyBhbmQg
        c2V0dGVycy4KCiAgQHByb3BlcnR5IGhhc1Byb3BlcnR5QWNjZXNzb3JzCiAg
        QGZpbmFsCiovCnBsYXRmb3JtLmhhc1Byb3BlcnR5QWNjZXNzb3JzID0gdHJ1
        ZTsKCmlmICghcGxhdGZvcm0uZGVmaW5lUHJvcGVydHkpIHsKICBwbGF0Zm9y
        bS5oYXNQcm9wZXJ0eUFjY2Vzc29ycyA9IGZhbHNlOwoKICBwbGF0Zm9ybS5k
        ZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSwgZGVzYykg
        ewogICAgaWYgKCFkZXNjLmdldCkgeyBvYmpba2V5TmFtZV0gPSBkZXNjLnZh
        bHVlOyB9CiAgfTsKCiAgcGxhdGZvcm0uZGVmaW5lUHJvcGVydHkuaXNTaW11
        bGF0ZWQgPSB0cnVlOwp9CgppZiAoRW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRU
        RVIgJiYgIXBsYXRmb3JtLmhhc1Byb3BlcnR5QWNjZXNzb3JzKSB7CiAgRW1i
        ZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIgPSBmYWxzZTsKfQoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKmpzaGludCBuZXdjYXA6ZmFsc2UqLwovKioKQG1v
        ZHVsZSBlbWJlci1tZXRhbAoqLwoKLy8gTk9URTogVGhlcmUgaXMgYSBidWcg
        aW4ganNoaW50IHRoYXQgZG9lc24ndCByZWNvZ25pemUgYE9iamVjdCgpYCB3
        aXRob3V0IGBuZXdgCi8vIGFzIGJlaW5nIG9rIHVubGVzcyBib3RoIGBuZXdj
        YXA6ZmFsc2VgIGFuZCBub3QgYHVzZSBzdHJpY3RgLgovLyBodHRwczovL2dp
        dGh1Yi5jb20vanNoaW50L2pzaGludC9pc3N1ZXMvMzkyCgovLyBUZXN0aW5n
        IHRoaXMgaXMgbm90IGlkZWFsLCBidXQgd2Ugd2FudCB0byB1c2UgbmF0aXZl
        IGZ1bmN0aW9ucwovLyBpZiBhdmFpbGFibGUsIGJ1dCBub3QgdG8gdXNlIHZl
        cnNpb25zIGNyZWF0ZWQgYnkgbGlicmFyaWVzIGxpa2UgUHJvdG90eXBlCnZh
        ciBpc05hdGl2ZUZ1bmMgPSBmdW5jdGlvbihmdW5jKSB7CiAgLy8gVGhpcyBz
        aG91bGQgcHJvYmFibHkgd29yayBpbiBhbGwgYnJvd3NlcnMgbGlrZWx5IHRv
        IGhhdmUgRVM1IGFycmF5IG1ldGhvZHMKICByZXR1cm4gZnVuYyAmJiBGdW5j
        dGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmdW5jKS5pbmRleE9mKCdb
        bmF0aXZlIGNvZGVdJykgPiAtMTsKfTsKCi8vIEZyb206IGh0dHBzOi8vZGV2
        ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0ds
        b2JhbF9PYmplY3RzL2FycmF5L21hcAp2YXIgYXJyYXlNYXAgPSBpc05hdGl2
        ZUZ1bmMoQXJyYXkucHJvdG90eXBlLm1hcCkgPyBBcnJheS5wcm90b3R5cGUu
        bWFwIDogZnVuY3Rpb24oZnVuIC8qLCB0aGlzcCAqLykgewogIC8vInVzZSBz
        dHJpY3QiOwoKICBpZiAodGhpcyA9PT0gdm9pZCAwIHx8IHRoaXMgPT09IG51
        bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICB9CgogIHZhciB0
        ID0gT2JqZWN0KHRoaXMpOwogIHZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDsK
        ICBpZiAodHlwZW9mIGZ1biAhPT0gImZ1bmN0aW9uIikgewogICAgdGhyb3cg
        bmV3IFR5cGVFcnJvcigpOwogIH0KCiAgdmFyIHJlcyA9IG5ldyBBcnJheShs
        ZW4pOwogIHZhciB0aGlzcCA9IGFyZ3VtZW50c1sxXTsKICBmb3IgKHZhciBp
        ID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZiAoaSBpbiB0KSB7CiAgICAg
        IHJlc1tpXSA9IGZ1bi5jYWxsKHRoaXNwLCB0W2ldLCBpLCB0KTsKICAgIH0K
        ICB9CgogIHJldHVybiByZXM7Cn07CgovLyBGcm9tOiBodHRwczovL2RldmVs
        b3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9i
        YWxfT2JqZWN0cy9hcnJheS9mb3JlYWNoCnZhciBhcnJheUZvckVhY2ggPSBp
        c05hdGl2ZUZ1bmMoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpID8gQXJyYXku
        cHJvdG90eXBlLmZvckVhY2ggOiBmdW5jdGlvbihmdW4gLyosIHRoaXNwICov
        KSB7CiAgLy8idXNlIHN0cmljdCI7CgogIGlmICh0aGlzID09PSB2b2lkIDAg
        fHwgdGhpcyA9PT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigp
        OwogIH0KCiAgdmFyIHQgPSBPYmplY3QodGhpcyk7CiAgdmFyIGxlbiA9IHQu
        bGVuZ3RoID4+PiAwOwogIGlmICh0eXBlb2YgZnVuICE9PSAiZnVuY3Rpb24i
        KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgfQoKICB2YXIgdGhp
        c3AgPSBhcmd1bWVudHNbMV07CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47
        IGkrKykgewogICAgaWYgKGkgaW4gdCkgewogICAgICBmdW4uY2FsbCh0aGlz
        cCwgdFtpXSwgaSwgdCk7CiAgICB9CiAgfQp9OwoKdmFyIGFycmF5SW5kZXhP
        ZiA9IGlzTmF0aXZlRnVuYyhBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgPyBB
        cnJheS5wcm90b3R5cGUuaW5kZXhPZiA6IGZ1bmN0aW9uIChvYmosIGZyb21J
        bmRleCkgewogIGlmIChmcm9tSW5kZXggPT09IG51bGwgfHwgZnJvbUluZGV4
        ID09PSB1bmRlZmluZWQpIHsgZnJvbUluZGV4ID0gMDsgfQogIGVsc2UgaWYg
        KGZyb21JbmRleCA8IDApIHsgZnJvbUluZGV4ID0gTWF0aC5tYXgoMCwgdGhp
        cy5sZW5ndGggKyBmcm9tSW5kZXgpOyB9CiAgZm9yICh2YXIgaSA9IGZyb21J
        bmRleCwgaiA9IHRoaXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7CiAgICBpZiAo
        dGhpc1tpXSA9PT0gb2JqKSB7IHJldHVybiBpOyB9CiAgfQogIHJldHVybiAt
        MTsKfTsKCi8qKgogIEFycmF5IHBvbHlmaWxscyB0byBzdXBwb3J0IEVTNSBm
        ZWF0dXJlcyBpbiBvbGRlciBicm93c2Vycy4KCiAgQG5hbWVzcGFjZSBFbWJl
        cgogIEBwcm9wZXJ0eSBBcnJheVBvbHlmaWxscwoqLwpFbWJlci5BcnJheVBv
        bHlmaWxscyA9IHsKICBtYXA6IGFycmF5TWFwLAogIGZvckVhY2g6IGFycmF5
        Rm9yRWFjaCwKICBpbmRleE9mOiBhcnJheUluZGV4T2YKfTsKCmlmIChFbWJl
        ci5TSElNX0VTNSkgewogIGlmICghQXJyYXkucHJvdG90eXBlLm1hcCkgewog
        ICAgQXJyYXkucHJvdG90eXBlLm1hcCA9IGFycmF5TWFwOwogIH0KCiAgaWYg
        KCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkgewogICAgQXJyYXkucHJvdG90
        eXBlLmZvckVhY2ggPSBhcnJheUZvckVhY2g7CiAgfQoKICBpZiAoIUFycmF5
        LnByb3RvdHlwZS5pbmRleE9mKSB7CiAgICBBcnJheS5wcm90b3R5cGUuaW5k
        ZXhPZiA9IGFycmF5SW5kZXhPZjsKICB9Cn0KCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKdmFyIGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVO
        YW1lJywgJ2xpbmVOdW1iZXInLCAnbWVzc2FnZScsICduYW1lJywgJ251bWJl
        cicsICdzdGFjayddOwoKLyoqCiAgQSBzdWJjbGFzcyBvZiB0aGUgSmF2YVNj
        cmlwdCBFcnJvciBvYmplY3QgZm9yIHVzZSBpbiBFbWJlci4KCiAgQGNsYXNz
        IEVycm9yCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVycm9yCiAg
        QGNvbnN0cnVjdG9yCiovCkVtYmVyLkVycm9yID0gZnVuY3Rpb24oKSB7CiAg
        dmFyIHRtcCA9IEVycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgogIC8v
        IFVuZm9ydHVuYXRlbHkgZXJyb3JzIGFyZSBub3QgZW51bWVyYWJsZSBpbiBD
        aHJvbWUgKGF0IGxlYXN0KSwgc28gYGZvciBwcm9wIGluIHRtcGAgZG9lc24n
        dCB3b3JrLgogIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGVycm9yUHJvcHMu
        bGVuZ3RoOyBpZHgrKykgewogICAgdGhpc1tlcnJvclByb3BzW2lkeF1dID0g
        dG1wW2Vycm9yUHJvcHNbaWR4XV07CiAgfQp9OwoKRW1iZXIuRXJyb3IucHJv
        dG90eXBlID0gRW1iZXIuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7CgovLyAu
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uCi8vIEVSUk9SIEhBTkRMSU5HCi8vCgovKioKICBBIGZ1
        bmN0aW9uIG1heSBiZSBhc3NpZ25lZCB0byBgRW1iZXIub25lcnJvcmAgdG8g
        YmUgY2FsbGVkIHdoZW4gRW1iZXIKICBpbnRlcm5hbHMgZW5jb3VudGVyIGFu
        IGVycm9yLiBUaGlzIGlzIHVzZWZ1bCBmb3Igc3BlY2lhbGl6ZWQgZXJyb3Ig
        aGFuZGxpbmcKICBhbmQgcmVwb3J0aW5nIGNvZGUuCgogIGBgYGphdmFzY3Jp
        cHQKICBFbWJlci5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsKICAgIEVt
        LiQuYWpheCgnL3JlcG9ydC1lcnJvcicsICdQT1NUJywgewogICAgICBzdGFj
        azogZXJyb3Iuc3RhY2ssCiAgICAgIG90aGVySW5mb3JtYXRpb246ICd3aGF0
        ZXZlciBhcHAgc3RhdGUgeW91IHdhbnQgdG8gcHJvdmlkZScKICAgIH0pOwog
        IH07CiAgYGBgCgogIEBldmVudCBvbmVycm9yCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSB7RXhjZXB0aW9ufSBlcnJvciB0aGUgZXJyb3Igb2JqZWN0CiovCkVt
        YmVyLm9uZXJyb3IgPSBudWxsOwoKLyoqCiAgQHByaXZhdGUKCiAgV3JhcCBj
        b2RlIGJsb2NrIGluIGEgdHJ5L2NhdGNoIGlmIGBFbWJlci5vbmVycm9yYCBp
        cyBzZXQuCgogIEBtZXRob2QgaGFuZGxlRXJyb3JzCiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMKICBAcGFyYW0gW2NvbnRleHRdCiov
        CkVtYmVyLmhhbmRsZUVycm9ycyA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQp
        IHsKICAvLyBVbmZvcnR1bmF0ZWx5IGluIHNvbWUgYnJvd3NlcnMgd2UgbG9z
        ZSB0aGUgYmFja3RyYWNlIGlmIHdlIHJldGhyb3cgdGhlIGV4aXN0aW5nIGVy
        cm9yLAogIC8vIHNvIGluIHRoZSBldmVudCB0aGF0IHdlIGRvbid0IGhhdmUg
        YW4gYG9uZXJyb3JgIGhhbmRsZXIgd2UgZG9uJ3Qgd3JhcCBpbiBhIHRyeS9j
        YXRjaAogIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgRW1iZXIub25lcnJv
        cikgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0
        IHx8IHRoaXMpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgRW1iZXIu
        b25lcnJvcihlcnJvcik7CiAgICB9CiAgfSBlbHNlIHsKICAgIHJldHVybiBm
        dW5jLmNhbGwoY29udGV4dCB8fCB0aGlzKTsKICB9Cn07Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgovKioK
        ICBAcHJpdmF0ZQogIAogIFByZWZpeCB1c2VkIGZvciBndWlkcyB0aHJvdWdo
        IG91dCBFbWJlci4KICAKKi8KRW1iZXIuR1VJRF9QUkVGSVggPSAnZW1iZXIn
        OwoKCnZhciBvX2RlZmluZVByb3BlcnR5ID0gRW1iZXIucGxhdGZvcm0uZGVm
        aW5lUHJvcGVydHksCiAgICBvX2NyZWF0ZSA9IEVtYmVyLmNyZWF0ZSwKICAg
        IC8vIFVzZWQgZm9yIGd1aWQgZ2VuZXJhdGlvbi4uLgogICAgR1VJRF9LRVkg
        PSAnX19lbWJlcicrICgrIG5ldyBEYXRlKCkpLAogICAgdXVpZCAgICAgICAg
        ID0gMCwKICAgIG51bWJlckNhY2hlICA9IFtdLAogICAgc3RyaW5nQ2FjaGUg
        ID0ge307Cgp2YXIgTUFOREFUT1JZX1NFVFRFUiA9IEVtYmVyLkVOVi5NQU5E
        QVRPUllfU0VUVEVSOwoKLyoqCiAgQHByaXZhdGUKCiAgQSB1bmlxdWUga2V5
        IHVzZWQgdG8gYXNzaWduIGd1aWRzIGFuZCBvdGhlciBwcml2YXRlIG1ldGFk
        YXRhIHRvIG9iamVjdHMuCiAgSWYgeW91IGluc3BlY3QgYW4gb2JqZWN0IGlu
        IHlvdXIgYnJvd3NlciBkZWJ1Z2dlciB5b3Ugd2lsbCBvZnRlbiBzZWUgdGhl
        c2UuCiAgVGhleSBjYW4gYmUgc2FmZWx5IGlnbm9yZWQuCgogIE9uIGJyb3dz
        ZXJzIHRoYXQgc3VwcG9ydCBpdCwgdGhlc2UgcHJvcGVydGllcyBhcmUgYWRk
        ZWQgd2l0aCBlbnVtZXJhdGlvbgogIGRpc2FibGVkIHNvIHRoZXkgd29uJ3Qg
        c2hvdyB1cCB3aGVuIHlvdSBpdGVyYXRlIG92ZXIgeW91ciBwcm9wZXJ0aWVz
        LgoKICBAcHJvcGVydHkgR1VJRF9LRVkKICBAZm9yIEVtYmVyCiAgQHR5cGUg
        U3RyaW5nCiAgQGZpbmFsCiovCkVtYmVyLkdVSURfS0VZID0gR1VJRF9LRVk7
        Cgp2YXIgR1VJRF9ERVNDID0gewogIHdyaXRhYmxlOiAgICBmYWxzZSwKICBj
        b25maWd1cmFibGU6IGZhbHNlLAogIGVudW1lcmFibGU6ICBmYWxzZSwKICB2
        YWx1ZTogbnVsbAp9OwoKLyoqCiAgQHByaXZhdGUKCiAgR2VuZXJhdGVzIGEg
        bmV3IGd1aWQsIG9wdGlvbmFsbHkgc2F2aW5nIHRoZSBndWlkIHRvIHRoZSBv
        YmplY3QgdGhhdCB5b3UKICBwYXNzIGluLiBZb3Ugd2lsbCByYXJlbHkgbmVl
        ZCB0byB1c2UgdGhpcyBtZXRob2QuIEluc3RlYWQgeW91IHNob3VsZAogIGNh
        bGwgYEVtYmVyLmd1aWRGb3Iob2JqKWAsIHdoaWNoIHJldHVybiBhbiBleGlz
        dGluZyBndWlkIGlmIGF2YWlsYWJsZS4KCiAgQG1ldGhvZCBnZW5lcmF0ZUd1
        aWQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IFtvYmpdIE9iamVj
        dCB0aGUgZ3VpZCB3aWxsIGJlIHVzZWQgZm9yLiBJZiBwYXNzZWQgaW4sIHRo
        ZSBndWlkIHdpbGwKICAgIGJlIHNhdmVkIG9uIHRoZSBvYmplY3QgYW5kIHJl
        dXNlZCB3aGVuZXZlciB5b3UgcGFzcyB0aGUgc2FtZSBvYmplY3QKICAgIGFn
        YWluLgoKICAgIElmIG5vIG9iamVjdCBpcyBwYXNzZWQsIGp1c3QgZ2VuZXJh
        dGUgYSBuZXcgZ3VpZC4KICBAcGFyYW0ge1N0cmluZ30gW3ByZWZpeF0gUHJl
        Zml4IHRvIHBsYWNlIGluIGZyb250IG9mIHRoZSBndWlkLiBVc2VmdWwgd2hl
        biB5b3Ugd2FudCB0bwogICAgc2VwYXJhdGUgdGhlIGd1aWQgaW50byBzZXBh
        cmF0ZSBuYW1lc3BhY2VzLgogIEByZXR1cm4ge1N0cmluZ30gdGhlIGd1aWQK
        Ki8KRW1iZXIuZ2VuZXJhdGVHdWlkID0gZnVuY3Rpb24gZ2VuZXJhdGVHdWlk
        KG9iaiwgcHJlZml4KSB7CiAgaWYgKCFwcmVmaXgpIHByZWZpeCA9IEVtYmVy
        LkdVSURfUFJFRklYOwogIHZhciByZXQgPSAocHJlZml4ICsgKHV1aWQrKykp
        OwogIGlmIChvYmopIHsKICAgIEdVSURfREVTQy52YWx1ZSA9IHJldDsKICAg
        IG9fZGVmaW5lUHJvcGVydHkob2JqLCBHVUlEX0tFWSwgR1VJRF9ERVNDKTsK
        ICB9CiAgcmV0dXJuIHJldDsKfTsKCi8qKgogIEBwcml2YXRlCgogIFJldHVy
        bnMgYSB1bmlxdWUgaWQgZm9yIHRoZSBvYmplY3QuIElmIHRoZSBvYmplY3Qg
        ZG9lcyBub3QgeWV0IGhhdmUgYSBndWlkLAogIG9uZSB3aWxsIGJlIGFzc2ln
        bmVkIHRvIGl0LiBZb3UgY2FuIGNhbGwgdGhpcyBvbiBhbnkgb2JqZWN0LAog
        IGBFbWJlci5PYmplY3RgLWJhc2VkIG9yIG5vdCwgYnV0IGJlIGF3YXJlIHRo
        YXQgaXQgd2lsbCBhZGQgYSBgX2d1aWRgCiAgcHJvcGVydHkuCgogIFlvdSBj
        YW4gYWxzbyB1c2UgdGhpcyBtZXRob2Qgb24gRE9NIEVsZW1lbnQgb2JqZWN0
        cy4KCiAgQG1ldGhvZCBndWlkRm9yCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7
        T2JqZWN0fSBvYmogYW55IG9iamVjdCwgc3RyaW5nLCBudW1iZXIsIEVsZW1l
        bnQsIG9yIHByaW1pdGl2ZQogIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaXF1
        ZSBndWlkIGZvciB0aGlzIGluc3RhbmNlLgoqLwpFbWJlci5ndWlkRm9yID0g
        ZnVuY3Rpb24gZ3VpZEZvcihvYmopIHsKCiAgLy8gc3BlY2lhbCBjYXNlcyB3
        aGVyZSB3ZSBkb24ndCB3YW50IHRvIGFkZCBhIGtleSB0byBvYmplY3QKICBp
        ZiAob2JqID09PSB1bmRlZmluZWQpIHJldHVybiAiKHVuZGVmaW5lZCkiOwog
        IGlmIChvYmogPT09IG51bGwpIHJldHVybiAiKG51bGwpIjsKCiAgdmFyIHJl
        dDsKICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7CgogIC8vIERvbid0IGFsbG93
        IHByb3RvdHlwZSBjaGFuZ2VzIHRvIFN0cmluZyBldGMuIHRvIGNoYW5nZSB0
        aGUgZ3VpZEZvcgogIHN3aXRjaCh0eXBlKSB7CiAgICBjYXNlICdudW1iZXIn
        OgogICAgICByZXQgPSBudW1iZXJDYWNoZVtvYmpdOwogICAgICBpZiAoIXJl
        dCkgcmV0ID0gbnVtYmVyQ2FjaGVbb2JqXSA9ICdudScrb2JqOwogICAgICBy
        ZXR1cm4gcmV0OwoKICAgIGNhc2UgJ3N0cmluZyc6CiAgICAgIHJldCA9IHN0
        cmluZ0NhY2hlW29ial07CiAgICAgIGlmICghcmV0KSByZXQgPSBzdHJpbmdD
        YWNoZVtvYmpdID0gJ3N0JysodXVpZCsrKTsKICAgICAgcmV0dXJuIHJldDsK
        CiAgICBjYXNlICdib29sZWFuJzoKICAgICAgcmV0dXJuIG9iaiA/ICcodHJ1
        ZSknIDogJyhmYWxzZSknOwoKICAgIGRlZmF1bHQ6CiAgICAgIGlmIChvYmpb
        R1VJRF9LRVldKSByZXR1cm4gb2JqW0dVSURfS0VZXTsKICAgICAgaWYgKG9i
        aiA9PT0gT2JqZWN0KSByZXR1cm4gJyhPYmplY3QpJzsKICAgICAgaWYgKG9i
        aiA9PT0gQXJyYXkpICByZXR1cm4gJyhBcnJheSknOwogICAgICByZXQgPSAn
        ZW1iZXInKyh1dWlkKyspOwogICAgICBHVUlEX0RFU0MudmFsdWUgPSByZXQ7
        CiAgICAgIG9fZGVmaW5lUHJvcGVydHkob2JqLCBHVUlEX0tFWSwgR1VJRF9E
        RVNDKTsKICAgICAgcmV0dXJuIHJldDsKICB9Cn07CgovLyAuLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uCi8vIE1FVEEKLy8KCnZhciBNRVRBX0RFU0MgPSB7CiAgd3JpdGFibGU6
        ICAgIHRydWUsCiAgY29uZmlndXJhYmxlOiBmYWxzZSwKICBlbnVtZXJhYmxl
        OiAgZmFsc2UsCiAgdmFsdWU6IG51bGwKfTsKCnZhciBNRVRBX0tFWSA9IEVt
        YmVyLkdVSURfS0VZKydfbWV0YSc7CgovKioKICBUaGUga2V5IHVzZWQgdG8g
        c3RvcmUgbWV0YSBpbmZvcm1hdGlvbiBvbiBvYmplY3QgZm9yIHByb3BlcnR5
        IG9ic2VydmluZy4KCiAgQHByb3BlcnR5IE1FVEFfS0VZCiAgQGZvciBFbWJl
        cgogIEBwcml2YXRlCiAgQGZpbmFsCiAgQHR5cGUgU3RyaW5nCiovCkVtYmVy
        Lk1FVEFfS0VZID0gTUVUQV9LRVk7CgovLyBQbGFjZWhvbGRlciBmb3Igbm9u
        LXdyaXRhYmxlIG1ldGFzLgp2YXIgRU1QVFlfTUVUQSA9IHsKICBkZXNjczog
        e30sCiAgd2F0Y2hpbmc6IHt9Cn07CgppZiAoTUFOREFUT1JZX1NFVFRFUikg
        eyBFTVBUWV9NRVRBLnZhbHVlcyA9IHt9OyB9CgpFbWJlci5FTVBUWV9NRVRB
        ID0gRU1QVFlfTUVUQTsKCmlmIChPYmplY3QuZnJlZXplKSBPYmplY3QuZnJl
        ZXplKEVNUFRZX01FVEEpOwoKdmFyIGlzRGVmaW5lUHJvcGVydHlTaW11bGF0
        ZWQgPSBFbWJlci5wbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eS5pc1NpbXVsYXRl
        ZDsKCmZ1bmN0aW9uIE1ldGEob2JqKSB7CiAgdGhpcy5kZXNjcyA9IHt9Owog
        IHRoaXMud2F0Y2hpbmcgPSB7fTsKICB0aGlzLmNhY2hlID0ge307CiAgdGhp
        cy5zb3VyY2UgPSBvYmo7Cn0KCmlmIChpc0RlZmluZVByb3BlcnR5U2ltdWxh
        dGVkKSB7CiAgLy8gb24gcGxhdGZvcm1zIHRoYXQgZG9uJ3Qgc3VwcG9ydCBl
        bnVtZXJhYmxlIGZhbHNlCiAgLy8gbWFrZSBtZXRhIGZhaWwgalF1ZXJ5Lmlz
        UGxhaW5PYmplY3QoKSB0byBoaWRlIGZyb20KICAvLyBqUXVlcnkuZXh0ZW5k
        KCkgYnkgaGF2aW5nIGEgcHJvcGVydHkgdGhhdCBmYWlscwogIC8vIGhhc093
        blByb3BlcnR5IGNoZWNrLgogIE1ldGEucHJvdG90eXBlLl9fcHJldmVudFBs
        YWluT2JqZWN0X18gPSB0cnVlOwoKICAvLyBXaXRob3V0IG5vbi1lbnVtZXJh
        YmxlIHByb3BlcnRpZXMsIG1ldGEgb2JqZWN0cyB3aWxsIGJlIG91dHB1dCBp
        biBKU09OCiAgLy8gdW5sZXNzIGV4cGxpY2l0bHkgc3VwcHJlc3NlZAogIE1l
        dGEucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgfTsKfQoKLyoq
        CiAgUmV0cmlldmVzIHRoZSBtZXRhIGhhc2ggZm9yIGFuIG9iamVjdC4gSWYg
        YHdyaXRhYmxlYCBpcyB0cnVlIGVuc3VyZXMgdGhlCiAgaGFzaCBpcyB3cml0
        YWJsZSBmb3IgdGhpcyBvYmplY3QgYXMgd2VsbC4KCiAgVGhlIG1ldGEgb2Jq
        ZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IGNvbXB1dGVkIHByb3Bl
        cnR5IGRlc2NyaXB0b3JzIGFzCiAgd2VsbCBhcyBhbnkgd2F0Y2hlZCBwcm9w
        ZXJ0aWVzIGFuZCBvdGhlciBpbmZvcm1hdGlvbi4gWW91IGdlbmVyYWxseSB3
        aWxsCiAgbm90IGFjY2VzcyB0aGlzIGluZm9ybWF0aW9uIGRpcmVjdGx5IGJ1
        dCBpbnN0ZWFkIHdvcmsgd2l0aCBoaWdoZXIgbGV2ZWwKICBtZXRob2RzIHRo
        YXQgbWFuaXB1bGF0ZSB0aGlzIGhhc2ggaW5kaXJlY3RseS4KCiAgQG1ldGhv
        ZCBtZXRhCiAgQGZvciBFbWJlcgogIEBwcml2YXRlCgogIEBwYXJhbSB7T2Jq
        ZWN0fSBvYmogVGhlIG9iamVjdCB0byByZXRyaWV2ZSBtZXRhIGZvcgogIEBw
        YXJhbSB7Qm9vbGVhbn0gW3dyaXRhYmxlPXRydWVdIFBhc3MgYGZhbHNlYCBp
        ZiB5b3UgZG8gbm90IGludGVuZCB0byBtb2RpZnkKICAgIHRoZSBtZXRhIGhh
        c2gsIGFsbG93aW5nIHRoZSBtZXRob2QgdG8gYXZvaWQgbWFraW5nIGFuIHVu
        bmVjZXNzYXJ5IGNvcHkuCiAgQHJldHVybiB7T2JqZWN0fSB0aGUgbWV0YSBo
        YXNoIGZvciBhbiBvYmplY3QKKi8KRW1iZXIubWV0YSA9IGZ1bmN0aW9uIG1l
        dGEob2JqLCB3cml0YWJsZSkgewoKICB2YXIgcmV0ID0gb2JqW01FVEFfS0VZ
        XTsKICBpZiAod3JpdGFibGU9PT1mYWxzZSkgcmV0dXJuIHJldCB8fCBFTVBU
        WV9NRVRBOwoKICBpZiAoIXJldCkgewogICAgaWYgKCFpc0RlZmluZVByb3Bl
        cnR5U2ltdWxhdGVkKSBvX2RlZmluZVByb3BlcnR5KG9iaiwgTUVUQV9LRVks
        IE1FVEFfREVTQyk7CgogICAgcmV0ID0gbmV3IE1ldGEob2JqKTsKCiAgICBp
        ZiAoTUFOREFUT1JZX1NFVFRFUikgeyByZXQudmFsdWVzID0ge307IH0KCiAg
        ICBvYmpbTUVUQV9LRVldID0gcmV0OwoKICAgIC8vIG1ha2Ugc3VyZSB3ZSBk
        b24ndCBhY2NpZGVudGFsbHkgdHJ5IHRvIGNyZWF0ZSBjb25zdHJ1Y3RvciBs
        aWtlIGRlc2MKICAgIHJldC5kZXNjcy5jb25zdHJ1Y3RvciA9IG51bGw7Cgog
        IH0gZWxzZSBpZiAocmV0LnNvdXJjZSAhPT0gb2JqKSB7CiAgICBpZiAoIWlz
        RGVmaW5lUHJvcGVydHlTaW11bGF0ZWQpIG9fZGVmaW5lUHJvcGVydHkob2Jq
        LCBNRVRBX0tFWSwgTUVUQV9ERVNDKTsKCiAgICByZXQgPSBvX2NyZWF0ZShy
        ZXQpOwogICAgcmV0LmRlc2NzICAgID0gb19jcmVhdGUocmV0LmRlc2NzKTsK
        ICAgIHJldC53YXRjaGluZyA9IG9fY3JlYXRlKHJldC53YXRjaGluZyk7CiAg
        ICByZXQuY2FjaGUgICAgPSB7fTsKICAgIHJldC5zb3VyY2UgICA9IG9iajsK
        CiAgICBpZiAoTUFOREFUT1JZX1NFVFRFUikgeyByZXQudmFsdWVzID0gb19j
        cmVhdGUocmV0LnZhbHVlcyk7IH0KCiAgICBvYmpbTUVUQV9LRVldID0gcmV0
        OwogIH0KICByZXR1cm4gcmV0Owp9OwoKRW1iZXIuZ2V0TWV0YSA9IGZ1bmN0
        aW9uIGdldE1ldGEob2JqLCBwcm9wZXJ0eSkgewogIHZhciBtZXRhID0gRW1i
        ZXIubWV0YShvYmosIGZhbHNlKTsKICByZXR1cm4gbWV0YVtwcm9wZXJ0eV07
        Cn07CgpFbWJlci5zZXRNZXRhID0gZnVuY3Rpb24gc2V0TWV0YShvYmosIHBy
        b3BlcnR5LCB2YWx1ZSkgewogIHZhciBtZXRhID0gRW1iZXIubWV0YShvYmos
        IHRydWUpOwogIG1ldGFbcHJvcGVydHldID0gdmFsdWU7CiAgcmV0dXJuIHZh
        bHVlOwp9OwoKLyoqCiAgQGRlcHJlY2F0ZWQKICBAcHJpdmF0ZQoKICBJbiBv
        cmRlciB0byBzdG9yZSBkZWZhdWx0cyBmb3IgYSBjbGFzcywgYSBwcm90b3R5
        cGUgbWF5IG5lZWQgdG8gY3JlYXRlCiAgYSBkZWZhdWx0IG1ldGEgb2JqZWN0
        LCB3aGljaCB3aWxsIGJlIGluaGVyaXRlZCBieSBhbnkgb2JqZWN0cyBpbnN0
        YW50aWF0ZWQKICBmcm9tIHRoZSBjbGFzcydzIGNvbnN0cnVjdG9yLgoKICBI
        b3dldmVyLCB0aGUgcHJvcGVydGllcyBvZiB0aGF0IG1ldGEgb2JqZWN0IGFy
        ZSBvbmx5IHNoYWxsb3ctY2xvbmVkLAogIHNvIGlmIGEgcHJvcGVydHkgaXMg
        YSBoYXNoIChsaWtlIHRoZSBldmVudCBzeXN0ZW0ncyBgbGlzdGVuZXJzYCBo
        YXNoKSwKICBpdCB3aWxsIGJ5IGRlZmF1bHQgYmUgc2hhcmVkIGFjcm9zcyBh
        bGwgaW5zdGFuY2VzIG9mIHRoYXQgY2xhc3MuCgogIFRoaXMgbWV0aG9kIGFs
        bG93cyBleHRlbnNpb25zIHRvIGRlZXBseSBjbG9uZSBhIHNlcmllcyBvZiBu
        ZXN0ZWQgaGFzaGVzIG9yCiAgb3RoZXIgY29tcGxleCBvYmplY3RzLiBGb3Ig
        aW5zdGFuY2UsIHRoZSBldmVudCBzeXN0ZW0gbWlnaHQgcGFzcwogIGBbJ2xp
        c3RlbmVycycsICdmb286Y2hhbmdlJywgJ2VtYmVyMTU3J11gIHRvIGBwcmVw
        YXJlTWV0YVBhdGhgLCB3aGljaCB3aWxsCiAgd2FsayBkb3duIHRoZSBrZXlz
        IHByb3ZpZGVkLgoKICBGb3IgZWFjaCBrZXksIGlmIHRoZSBrZXkgZG9lcyBu
        b3QgZXhpc3QsIGl0IGlzIGNyZWF0ZWQuIElmIGl0IGFscmVhZHkKICBleGlz
        dHMgYW5kIGl0IHdhcyBpbmhlcml0ZWQgZnJvbSBpdHMgY29uc3RydWN0b3Is
        IHRoZSBjb25zdHJ1Y3RvcidzCiAga2V5IGlzIGNsb25lZC4KCiAgWW91IGNh
        biBhbHNvIHBhc3MgZmFsc2UgZm9yIGB3cml0YWJsZWAsIHdoaWNoIHdpbGwg
        c2ltcGx5IHJldHVybgogIHVuZGVmaW5lZCBpZiBgcHJlcGFyZU1ldGFQYXRo
        YCBkaXNjb3ZlcnMgYW55IHBhcnQgb2YgdGhlIHBhdGggdGhhdAogIHNoYXJl
        ZCBvciB1bmRlZmluZWQuCgogIEBtZXRob2QgbWV0YVBhdGgKICBAZm9yIEVt
        YmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHdob3NlIG1l
        dGEgd2UgYXJlIGV4YW1pbmluZwogIEBwYXJhbSB7QXJyYXl9IHBhdGggQW4g
        YXJyYXkgb2Yga2V5cyB0byB3YWxrIGRvd24KICBAcGFyYW0ge0Jvb2xlYW59
        IHdyaXRhYmxlIHdoZXRoZXIgb3Igbm90IHRvIGNyZWF0ZSBhIG5ldyBtZXRh
        CiAgICAob3IgbWV0YSBwcm9wZXJ0eSkgaWYgb25lIGRvZXMgbm90IGFscmVh
        ZHkgZXhpc3Qgb3IgaWYgaXQncwogICAgc2hhcmVkIHdpdGggaXRzIGNvbnN0
        cnVjdG9yCiovCkVtYmVyLm1ldGFQYXRoID0gZnVuY3Rpb24gbWV0YVBhdGgo
        b2JqLCBwYXRoLCB3cml0YWJsZSkgewogIEVtYmVyLmRlcHJlY2F0ZSgiRW1i
        ZXIubWV0YVBhdGggaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVk
        IGZyb20gZnV0dXJlIHJlbGVhc2VzLiIpOwogIHZhciBtZXRhID0gRW1iZXIu
        bWV0YShvYmosIHdyaXRhYmxlKSwga2V5TmFtZSwgdmFsdWU7CgogIGZvciAo
        dmFyIGk9MCwgbD1wYXRoLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgIGtleU5h
        bWUgPSBwYXRoW2ldOwogICAgdmFsdWUgPSBtZXRhW2tleU5hbWVdOwoKICAg
        IGlmICghdmFsdWUpIHsKICAgICAgaWYgKCF3cml0YWJsZSkgeyByZXR1cm4g
        dW5kZWZpbmVkOyB9CiAgICAgIHZhbHVlID0gbWV0YVtrZXlOYW1lXSA9IHsg
        X19lbWJlcl9zb3VyY2VfXzogb2JqIH07CiAgICB9IGVsc2UgaWYgKHZhbHVl
        Ll9fZW1iZXJfc291cmNlX18gIT09IG9iaikgewogICAgICBpZiAoIXdyaXRh
        YmxlKSB7IHJldHVybiB1bmRlZmluZWQ7IH0KICAgICAgdmFsdWUgPSBtZXRh
        W2tleU5hbWVdID0gb19jcmVhdGUodmFsdWUpOwogICAgICB2YWx1ZS5fX2Vt
        YmVyX3NvdXJjZV9fID0gb2JqOwogICAgfQoKICAgIG1ldGEgPSB2YWx1ZTsK
        ICB9CgogIHJldHVybiB2YWx1ZTsKfTsKCi8qKgogIEBwcml2YXRlCgogIFdy
        YXBzIHRoZSBwYXNzZWQgZnVuY3Rpb24gc28gdGhhdCBgdGhpcy5fc3VwZXJg
        IHdpbGwgcG9pbnQgdG8gdGhlIHN1cGVyRnVuYwogIHdoZW4gdGhlIGZ1bmN0
        aW9uIGlzIGludm9rZWQuIFRoaXMgaXMgdGhlIHByaW1pdGl2ZSB3ZSB1c2Ug
        dG8gaW1wbGVtZW50CiAgY2FsbHMgdG8gc3VwZXIuCgogIEBtZXRob2Qgd3Jh
        cAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBm
        dW5jdGlvbiB0byBjYWxsCiAgQHBhcmFtIHtGdW5jdGlvbn0gc3VwZXJGdW5j
        IFRoZSBzdXBlciBmdW5jdGlvbi4KICBAcmV0dXJuIHtGdW5jdGlvbn0gd3Jh
        cHBlZCBmdW5jdGlvbi4KKi8KRW1iZXIud3JhcCA9IGZ1bmN0aW9uKGZ1bmMs
        IHN1cGVyRnVuYykgewogIGZ1bmN0aW9uIEsoKSB7fQoKICBmdW5jdGlvbiBz
        dXBlcldyYXBwZXIoKSB7CiAgICB2YXIgcmV0LCBzdXAgPSB0aGlzLl9zdXBl
        cjsKICAgIHRoaXMuX3N1cGVyID0gc3VwZXJGdW5jIHx8IEs7CiAgICByZXQg
        PSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB0aGlzLl9zdXBl
        ciA9IHN1cDsKICAgIHJldHVybiByZXQ7CiAgfQoKICBzdXBlcldyYXBwZXIu
        d3JhcHBlZEZ1bmN0aW9uID0gZnVuYzsKICBzdXBlcldyYXBwZXIuX19lbWJl
        cl9vYnNlcnZlc19fID0gZnVuYy5fX2VtYmVyX29ic2VydmVzX187CiAgc3Vw
        ZXJXcmFwcGVyLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXyA9IGZ1bmMuX19l
        bWJlcl9vYnNlcnZlc0JlZm9yZV9fOwogIHN1cGVyV3JhcHBlci5fX2VtYmVy
        X2xpc3RlbnNfXyA9IGZ1bmMuX19lbWJlcl9saXN0ZW5zX187CgogIHJldHVy
        biBzdXBlcldyYXBwZXI7Cn07CgovKioKICBSZXR1cm5zIHRydWUgaWYgdGhl
        IHBhc3NlZCBvYmplY3QgaXMgYW4gYXJyYXkgb3IgQXJyYXktbGlrZS4KCiAg
        RW1iZXIgQXJyYXkgUHJvdG9jb2w6CgogICAgLSB0aGUgb2JqZWN0IGhhcyBh
        biBvYmplY3RBdCBwcm9wZXJ0eQogICAgLSB0aGUgb2JqZWN0IGlzIGEgbmF0
        aXZlIEFycmF5CiAgICAtIHRoZSBvYmplY3QgaXMgYW4gT2JqZWN0LCBhbmQg
        aGFzIGEgbGVuZ3RoIHByb3BlcnR5CgogIFVubGlrZSBgRW1iZXIudHlwZU9m
        YCB0aGlzIG1ldGhvZCByZXR1cm5zIHRydWUgZXZlbiBpZiB0aGUgcGFzc2Vk
        IG9iamVjdCBpcwogIG5vdCBmb3JtYWxseSBhcnJheSBidXQgYXBwZWFycyB0
        byBiZSBhcnJheS1saWtlIChpLmUuIGltcGxlbWVudHMgYEVtYmVyLkFycmF5
        YCkKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmlzQXJyYXkoKTsgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhbHNl
        CiAgRW1iZXIuaXNBcnJheShbXSk7ICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgLy8gdHJ1ZQogIEVtYmVyLmlzQXJyYXkoIEVt
        YmVyLkFycmF5UHJveHkuY3JlYXRlKHsgY29udGVudDogW10gfSkgKTsgIC8v
        IHRydWUKICBgYGAKCiAgQG1ldGhvZCBpc0FycmF5CiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byB0ZXN0CiAgQHJl
        dHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgcGFzc2VkIG9iamVjdCBpcyBh
        biBhcnJheSBvciBBcnJheS1saWtlCiovCkVtYmVyLmlzQXJyYXkgPSBmdW5j
        dGlvbihvYmopIHsKICBpZiAoIW9iaiB8fCBvYmouc2V0SW50ZXJ2YWwpIHsg
        cmV0dXJuIGZhbHNlOyB9CiAgaWYgKEFycmF5LmlzQXJyYXkgJiYgQXJyYXku
        aXNBcnJheShvYmopKSB7IHJldHVybiB0cnVlOyB9CiAgaWYgKEVtYmVyLkFy
        cmF5ICYmIEVtYmVyLkFycmF5LmRldGVjdChvYmopKSB7IHJldHVybiB0cnVl
        OyB9CiAgaWYgKChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpICYmICdvYmpl
        Y3QnPT09dHlwZW9mIG9iaikgeyByZXR1cm4gdHJ1ZTsgfQogIHJldHVybiBm
        YWxzZTsKfTsKCi8qKgogIEZvcmNlcyB0aGUgcGFzc2VkIG9iamVjdCB0byBi
        ZSBwYXJ0IG9mIGFuIGFycmF5LiBJZiB0aGUgb2JqZWN0IGlzIGFscmVhZHkK
        ICBhbiBhcnJheSBvciBhcnJheS1saWtlLCByZXR1cm5zIHRoZSBvYmplY3Qu
        IE90aGVyd2lzZSBhZGRzIHRoZSBvYmplY3QgdG8KICBhbiBhcnJheS4gSWYg
        b2JqIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBhbiBlbXB0
        eSBhcnJheS4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLm1ha2VBcnJheSgp
        OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtdCiAgRW1iZXIubWFr
        ZUFycmF5KG51bGwpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gW10KICBF
        bWJlci5tYWtlQXJyYXkodW5kZWZpbmVkKTsgICAgICAgICAgICAgICAgICAv
        LyBbXQogIEVtYmVyLm1ha2VBcnJheSgnbGluZHNheScpOyAgICAgICAgICAg
        ICAgICAgIC8vIFsnbGluZHNheSddCiAgRW1iZXIubWFrZUFycmF5KFsxLDIs
        NDJdKTsgICAgICAgICAgICAgICAgICAgLy8gWzEsMiw0Ml0KCiAgdmFyIGNv
        bnRyb2xsZXIgPSBFbWJlci5BcnJheVByb3h5LmNyZWF0ZSh7IGNvbnRlbnQ6
        IFtdIH0pOwogIEVtYmVyLm1ha2VBcnJheShjb250cm9sbGVyKSA9PT0gY29u
        dHJvbGxlcjsgIC8vIHRydWUKICBgYGAKCiAgQG1ldGhvZCBtYWtlQXJyYXkK
        ICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiB0aGUgb2JqZWN0
        CiAgQHJldHVybiB7QXJyYXl9CiovCkVtYmVyLm1ha2VBcnJheSA9IGZ1bmN0
        aW9uKG9iaikgewogIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRl
        ZmluZWQpIHsgcmV0dXJuIFtdOyB9CiAgcmV0dXJuIEVtYmVyLmlzQXJyYXko
        b2JqKSA/IG9iaiA6IFtvYmpdOwp9OwoKZnVuY3Rpb24gY2FuSW52b2tlKG9i
        aiwgbWV0aG9kTmFtZSkgewogIHJldHVybiAhIShvYmogJiYgdHlwZW9mIG9i
        alttZXRob2ROYW1lXSA9PT0gJ2Z1bmN0aW9uJyk7Cn0KCi8qKgogIENoZWNr
        cyB0byBzZWUgaWYgdGhlIGBtZXRob2ROYW1lYCBleGlzdHMgb24gdGhlIGBv
        YmpgLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGZvbyA9IHtiYXI6IEVtYmVy
        LkssIGJhejogbnVsbH07CiAgRW1iZXIuY2FuSW52b2tlKGZvbywgJ2Jhcicp
        OyAvLyB0cnVlCiAgRW1iZXIuY2FuSW52b2tlKGZvbywgJ2JheicpOyAvLyBm
        YWxzZQogIEVtYmVyLmNhbkludm9rZShmb28sICdiYXQnKTsgLy8gZmFsc2UK
        ICBgYGAKCiAgQG1ldGhvZCBjYW5JbnZva2UKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNoZWNrIGZvciB0aGUg
        bWV0aG9kCiAgQHBhcmFtIHtTdHJpbmd9IG1ldGhvZE5hbWUgVGhlIG1ldGhv
        ZCBuYW1lIHRvIGNoZWNrIGZvcgogIEByZXR1cm4ge0Jvb2xlYW59CiovCkVt
        YmVyLmNhbkludm9rZSA9IGNhbkludm9rZTsKCi8qKgogIENoZWNrcyB0byBz
        ZWUgaWYgdGhlIGBtZXRob2ROYW1lYCBleGlzdHMgb24gdGhlIGBvYmpgLAog
        IGFuZCBpZiBpdCBkb2VzLCBpbnZva2VzIGl0IHdpdGggdGhlIGFyZ3VtZW50
        cyBwYXNzZWQuCgogIGBgYGphdmFzY3JpcHQKICB2YXIgZCA9IG5ldyBEYXRl
        KCcwMy8xNS8yMDEzJyk7CiAgRW1iZXIudHJ5SW52b2tlKGQsICdnZXRUaW1l
        Jyk7IC8vIDEzNjMzMjAwMDAwMDAKICBFbWJlci50cnlJbnZva2UoZCwgJ3Nl
        dEZ1bGxZZWFyJywgWzIwMTRdKTsgLy8gMTM5NDg1NjAwMDAwMAogIEVtYmVy
        LnRyeUludm9rZShkLCAnbm9TdWNoTWV0aG9kJywgWzIwMTRdKTsgLy8gdW5k
        ZWZpbmVkCiAgYGBgCgogIEBtZXRob2QgdHJ5SW52b2tlCiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjaGVjayBm
        b3IgdGhlIG1ldGhvZAogIEBwYXJhbSB7U3RyaW5nfSBtZXRob2ROYW1lIFRo
        ZSBtZXRob2QgbmFtZSB0byBjaGVjayBmb3IKICBAcGFyYW0ge0FycmF5fSBb
        YXJnc10gVGhlIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2QKICBA
        cmV0dXJuIHsqfSB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBpbnZva2VkIG1l
        dGhvZCBvciB1bmRlZmluZWQgaWYgaXQgY2Fubm90IGJlIGludm9rZWQKKi8K
        RW1iZXIudHJ5SW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2ROYW1lLCBh
        cmdzKSB7CiAgaWYgKGNhbkludm9rZShvYmosIG1ldGhvZE5hbWUpKSB7CiAg
        ICByZXR1cm4gb2JqW21ldGhvZE5hbWVdLmFwcGx5KG9iaiwgYXJncyB8fCBb
        XSk7CiAgfQp9OwoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2VtYmVyanMvZW1i
        ZXIuanMvcHVsbC8xNjE3CnZhciBuZWVkc0ZpbmFsbHlGaXggPSAoZnVuY3Rp
        b24oKSB7CiAgdmFyIGNvdW50ID0gMDsKICB0cnl7CiAgICB0cnkgeyB9CiAg
        ICBmaW5hbGx5IHsKICAgICAgY291bnQrKzsKICAgICAgdGhyb3cgbmV3IEVy
        cm9yKCduZWVkc0ZpbmFsbHlGaXhUZXN0Jyk7CiAgICB9CiAgfSBjYXRjaCAo
        ZSkge30KCiAgcmV0dXJuIGNvdW50ICE9PSAxOwp9KSgpOwoKLyoqCiAgUHJv
        dmlkZXMgdHJ5IHsgfSBmaW5hbGx5IHsgfSBmdW5jdGlvbmFsaXR5LCB3aGls
        ZSB3b3JraW5nCiAgYXJvdW5kIFNhZmFyaSdzIGRvdWJsZSBmaW5hbGx5IGJ1
        Zy4KCiAgYGBgamF2YXNjcmlwdAogIHZhciB0cnlhYmxlID0gZnVuY3Rpb24o
        KSB7CiAgICBzb21lUmVzb3VyY2UubG9jaygpOwogICAgcnVuQ2FsbGJhY2so
        KTsgLy8gTWF5IHRocm93IGVycm9yLgogIH07CiAgdmFyIGZpbmFsaXplciA9
        IGZ1bmN0aW9uKCkgewogICAgc29tZVJlc291cmNlLnVubG9jaygpOwogIH07
        CiAgRW1iZXIudHJ5RmluYWxseSh0cnlhYmxlLCBmaW5hbGl6ZXIpOwogIGBg
        YAoKICBAbWV0aG9kIHRyeUZpbmFsbHkKICBAZm9yIEVtYmVyCiAgQHBhcmFt
        IHtGdW5jdGlvbn0gdHJ5YWJsZSBUaGUgZnVuY3Rpb24gdG8gcnVuIHRoZSB0
        cnkgY2FsbGJhY2sKICBAcGFyYW0ge0Z1bmN0aW9ufSBmaW5hbGl6ZXIgVGhl
        IGZ1bmN0aW9uIHRvIHJ1biB0aGUgZmluYWxseSBjYWxsYmFjawogIEBwYXJh
        bSB7T2JqZWN0fSBbYmluZGluZ10gVGhlIG9wdGlvbmFsIGNhbGxpbmcgb2Jq
        ZWN0LiBEZWZhdWx0cyB0byAndGhpcycKICBAcmV0dXJuIHsqfSBUaGUgcmV0
        dXJuIHZhbHVlIGlzIHRoZSB0aGF0IG9mIHRoZSBmaW5hbGl6ZXIsCiAgdW5s
        ZXNzIHRoYXQgdmFsdWUgaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0
        IGlzIHRoZSByZXR1cm4gdmFsdWUKICBvZiB0aGUgdHJ5YWJsZQoqLwoKaWYg
        KG5lZWRzRmluYWxseUZpeCkgewogIEVtYmVyLnRyeUZpbmFsbHkgPSBmdW5j
        dGlvbih0cnlhYmxlLCBmaW5hbGl6ZXIsIGJpbmRpbmcpIHsKICAgIHZhciBy
        ZXN1bHQsIGZpbmFsUmVzdWx0LCBmaW5hbEVycm9yOwoKICAgIGJpbmRpbmcg
        PSBiaW5kaW5nIHx8IHRoaXM7CgogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0g
        dHJ5YWJsZS5jYWxsKGJpbmRpbmcpOwogICAgfSBmaW5hbGx5IHsKICAgICAg
        dHJ5IHsKICAgICAgICBmaW5hbFJlc3VsdCA9IGZpbmFsaXplci5jYWxsKGJp
        bmRpbmcpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgZmluYWxFcnJv
        ciA9IGU7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZmluYWxFcnJvcikgeyB0
        aHJvdyBmaW5hbEVycm9yOyB9CgogICAgcmV0dXJuIChmaW5hbFJlc3VsdCA9
        PT0gdW5kZWZpbmVkKSA/IHJlc3VsdCA6IGZpbmFsUmVzdWx0OwogIH07Cn0g
        ZWxzZSB7CiAgRW1iZXIudHJ5RmluYWxseSA9IGZ1bmN0aW9uKHRyeWFibGUs
        IGZpbmFsaXplciwgYmluZGluZykgewogICAgdmFyIHJlc3VsdCwgZmluYWxS
        ZXN1bHQ7CgogICAgYmluZGluZyA9IGJpbmRpbmcgfHwgdGhpczsKCiAgICB0
        cnkgewogICAgICByZXN1bHQgPSB0cnlhYmxlLmNhbGwoYmluZGluZyk7CiAg
        ICB9IGZpbmFsbHkgewogICAgICBmaW5hbFJlc3VsdCA9IGZpbmFsaXplci5j
        YWxsKGJpbmRpbmcpOwogICAgfQoKICAgIHJldHVybiAoZmluYWxSZXN1bHQg
        PT09IHVuZGVmaW5lZCkgPyByZXN1bHQgOiBmaW5hbFJlc3VsdDsKICB9Owp9
        CgovKioKICBQcm92aWRlcyB0cnkgeyB9IGNhdGNoIGZpbmFsbHkgeyB9IGZ1
        bmN0aW9uYWxpdHksIHdoaWxlIHdvcmtpbmcKICBhcm91bmQgU2FmYXJpJ3Mg
        ZG91YmxlIGZpbmFsbHkgYnVnLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIHRy
        eWFibGUgPSBmdW5jdGlvbigpIHsKICAgIGZvciAoaT0wLCBsPWxpc3RlbmVy
        cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIGxpc3RlbmVyID0gbGlzdGVu
        ZXJzW2ldOwogICAgICBiZWZvcmVWYWx1ZXNbaV0gPSBsaXN0ZW5lci5iZWZv
        cmUobmFtZSwgdGltZSgpLCBwYXlsb2FkKTsKICAgIH0KCiAgICByZXR1cm4g
        Y2FsbGJhY2suY2FsbChiaW5kaW5nKTsKICB9OwoKICB2YXIgY2F0Y2hhYmxl
        ID0gZnVuY3Rpb24oZSkgewogICAgcGF5bG9hZCA9IHBheWxvYWQgfHwge307
        CiAgICBwYXlsb2FkLmV4Y2VwdGlvbiA9IGU7CiAgfTsKCiAgdmFyIGZpbmFs
        aXplciA9IGZ1bmN0aW9uKCkgewogICAgZm9yIChpPTAsIGw9bGlzdGVuZXJz
        Lmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5l
        cnNbaV07CiAgICAgIGxpc3RlbmVyLmFmdGVyKG5hbWUsIHRpbWUoKSwgcGF5
        bG9hZCwgYmVmb3JlVmFsdWVzW2ldKTsKICAgIH0KICB9OwogIEVtYmVyLnRy
        eUNhdGNoRmluYWxseSh0cnlhYmxlLCBjYXRjaGFibGUsIGZpbmFsaXplcik7
        CiAgYGBgCgogIEBtZXRob2QgdHJ5Q2F0Y2hGaW5hbGx5CiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7RnVuY3Rpb259IHRyeWFibGUgVGhlIGZ1bmN0aW9uIHRv
        IHJ1biB0aGUgdHJ5IGNhbGxiYWNrCiAgQHBhcmFtIHtGdW5jdGlvbn0gY2F0
        Y2hhYmxlIFRoZSBmdW5jdGlvbiB0byBydW4gdGhlIGNhdGNoYWJsZSBjYWxs
        YmFjawogIEBwYXJhbSB7RnVuY3Rpb259IGZpbmFsaXplciBUaGUgZnVuY3Rp
        b24gdG8gcnVuIHRoZSBmaW5hbGx5IGNhbGxiYWNrCiAgQHBhcmFtIHtPYmpl
        Y3R9IFtiaW5kaW5nXSBUaGUgb3B0aW9uYWwgY2FsbGluZyBvYmplY3QuIERl
        ZmF1bHRzIHRvICd0aGlzJwogIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFs
        dWUgaXMgdGhlIHRoYXQgb2YgdGhlIGZpbmFsaXplciwKICB1bmxlc3MgdGhh
        dCB2YWx1ZSBpcyB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2UgaXQgaXMgdGhl
        IHJldHVybiB2YWx1ZQogIG9mIHRoZSB0cnlhYmxlLgoqLwppZiAobmVlZHNG
        aW5hbGx5Rml4KSB7CiAgRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5ID0gZnVuY3Rp
        b24odHJ5YWJsZSwgY2F0Y2hhYmxlLCBmaW5hbGl6ZXIsIGJpbmRpbmcpIHsK
        ICAgIHZhciByZXN1bHQsIGZpbmFsUmVzdWx0LCBmaW5hbEVycm9yOwoKICAg
        IGJpbmRpbmcgPSBiaW5kaW5nIHx8IHRoaXM7CgogICAgdHJ5IHsKICAgICAg
        cmVzdWx0ID0gdHJ5YWJsZS5jYWxsKGJpbmRpbmcpOwogICAgfSBjYXRjaChl
        cnJvcikgewogICAgICByZXN1bHQgPSBjYXRjaGFibGUuY2FsbChiaW5kaW5n
        LCBlcnJvcik7CiAgICB9IGZpbmFsbHkgewogICAgICB0cnkgewogICAgICAg
        IGZpbmFsUmVzdWx0ID0gZmluYWxpemVyLmNhbGwoYmluZGluZyk7CiAgICAg
        IH0gY2F0Y2ggKGUpIHsKICAgICAgICBmaW5hbEVycm9yID0gZTsKICAgICAg
        fQogICAgfQoKICAgIGlmIChmaW5hbEVycm9yKSB7IHRocm93IGZpbmFsRXJy
        b3I7IH0KCiAgICByZXR1cm4gKGZpbmFsUmVzdWx0ID09PSB1bmRlZmluZWQp
        ID8gcmVzdWx0IDogZmluYWxSZXN1bHQ7CiAgfTsKfSBlbHNlIHsKICBFbWJl
        ci50cnlDYXRjaEZpbmFsbHkgPSBmdW5jdGlvbih0cnlhYmxlLCBjYXRjaGFi
        bGUsIGZpbmFsaXplciwgYmluZGluZykgewogICAgdmFyIHJlc3VsdCwgZmlu
        YWxSZXN1bHQ7CgogICAgYmluZGluZyA9IGJpbmRpbmcgfHwgdGhpczsKCiAg
        ICB0cnkgewogICAgICByZXN1bHQgPSB0cnlhYmxlLmNhbGwoYmluZGluZyk7
        CiAgICB9IGNhdGNoKGVycm9yKSB7CiAgICAgIHJlc3VsdCA9IGNhdGNoYWJs
        ZS5jYWxsKGJpbmRpbmcsIGVycm9yKTsKICAgIH0gZmluYWxseSB7CiAgICAg
        IGZpbmFsUmVzdWx0ID0gZmluYWxpemVyLmNhbGwoYmluZGluZyk7CiAgICB9
        CgogICAgcmV0dXJuIChmaW5hbFJlc3VsdCA9PT0gdW5kZWZpbmVkKSA/IHJl
        c3VsdCA6IGZpbmFsUmVzdWx0OwogIH07Cn0KCi8vIC4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gVFlQSU5HICYgQVJSQVkg
        TUVTU0FHSU5HCi8vCgp2YXIgVFlQRV9NQVAgPSB7fTsKdmFyIHQgPSAiQm9v
        bGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhw
        IE9iamVjdCIuc3BsaXQoIiAiKTsKRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9y
        RWFjaC5jYWxsKHQsIGZ1bmN0aW9uKG5hbWUpIHsKICBUWVBFX01BUFsgIltv
        YmplY3QgIiArIG5hbWUgKyAiXSIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTsK
        fSk7Cgp2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5n
        OwoKLyoqCiAgUmV0dXJucyBhIGNvbnNpc3RlbnQgdHlwZSBmb3IgdGhlIHBh
        c3NlZCBpdGVtLgoKICBVc2UgdGhpcyBpbnN0ZWFkIG9mIHRoZSBidWlsdC1p
        biBgdHlwZW9mYCB0byBnZXQgdGhlIHR5cGUgb2YgYW4gaXRlbS4KICBJdCB3
        aWxsIHJldHVybiB0aGUgc2FtZSByZXN1bHQgYWNyb3NzIGFsbCBicm93c2Vy
        cyBhbmQgaW5jbHVkZXMgYSBiaXQKICBtb3JlIGRldGFpbC4gSGVyZSBpcyB3
        aGF0IHdpbGwgYmUgcmV0dXJuZWQ6CgogICAgICB8IFJldHVybiBWYWx1ZSAg
        fCBNZWFuaW5nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgIHwKICAgICAgfC0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0t
        LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18
        CiAgICAgIHwgJ3N0cmluZycgICAgICB8IFN0cmluZyBwcmltaXRpdmUgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdu
        dW1iZXInICAgICAgfCBOdW1iZXIgcHJpbWl0aXZlICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgfCAnYm9vbGVhbicgICAg
        IHwgQm9vbGVhbiBwcmltaXRpdmUgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICB8CiAgICAgIHwgJ251bGwnICAgICAgICB8IE51bGwgdmFs
        dWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        fAogICAgICB8ICd1bmRlZmluZWQnICAgfCBVbmRlZmluZWQgdmFsdWUgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgfCAn
        ZnVuY3Rpb24nICAgIHwgQSBmdW5jdGlvbiAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwgJ2FycmF5JyAgICAg
        ICB8IEFuIGluc3RhbmNlIG9mIEFycmF5ICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgfAogICAgICB8ICdjbGFzcycgICAgICAgfCBBbiBFbWJl
        ciBjbGFzcyAoY3JlYXRlZCB1c2luZyBFbWJlci5PYmplY3QuZXh0ZW5kKCkp
        IHwKICAgICAgfCAnaW5zdGFuY2UnICAgIHwgQW4gRW1iZXIgb2JqZWN0IGlu
        c3RhbmNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwg
        J2Vycm9yJyAgICAgICB8IEFuIGluc3RhbmNlIG9mIHRoZSBFcnJvciBvYmpl
        Y3QgICAgICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdvYmplY3QnICAg
        ICAgfCBBIEphdmFTY3JpcHQgb2JqZWN0IG5vdCBpbmhlcml0aW5nIGZyb20g
        RW1iZXIuT2JqZWN0IHwKCiAgRXhhbXBsZXM6CgogIGBgYGphdmFzY3JpcHQK
        ICBFbWJlci50eXBlT2YoKTsgICAgICAgICAgICAgICAgICAgICAgIC8vICd1
        bmRlZmluZWQnCiAgRW1iZXIudHlwZU9mKG51bGwpOyAgICAgICAgICAgICAg
        ICAgICAvLyAnbnVsbCcKICBFbWJlci50eXBlT2YodW5kZWZpbmVkKTsgICAg
        ICAgICAgICAgIC8vICd1bmRlZmluZWQnCiAgRW1iZXIudHlwZU9mKCdtaWNo
        YWVsJyk7ICAgICAgICAgICAgICAvLyAnc3RyaW5nJwogIEVtYmVyLnR5cGVP
        ZigxMDEpOyAgICAgICAgICAgICAgICAgICAgLy8gJ251bWJlcicKICBFbWJl
        ci50eXBlT2YodHJ1ZSk7ICAgICAgICAgICAgICAgICAgIC8vICdib29sZWFu
        JwogIEVtYmVyLnR5cGVPZihFbWJlci5tYWtlQXJyYXkpOyAgICAgICAgLy8g
        J2Z1bmN0aW9uJwogIEVtYmVyLnR5cGVPZihbMSwyLDkwXSk7ICAgICAgICAg
        ICAgICAgLy8gJ2FycmF5JwogIEVtYmVyLnR5cGVPZihFbWJlci5PYmplY3Qu
        ZXh0ZW5kKCkpOyAgLy8gJ2NsYXNzJwogIEVtYmVyLnR5cGVPZihFbWJlci5P
        YmplY3QuY3JlYXRlKCkpOyAgLy8gJ2luc3RhbmNlJwogIEVtYmVyLnR5cGVP
        ZihuZXcgRXJyb3IoJ3RlYW1vY2lsJykpOyAgLy8gJ2Vycm9yJwoKICAvLyAi
        bm9ybWFsIiBKYXZhU2NyaXB0IG9iamVjdAogIEVtYmVyLnR5cGVPZih7YTog
        J2InfSk7ICAgICAgICAgICAgICAvLyAnb2JqZWN0JwogIGBgYAoKICBAbWV0
        aG9kIHR5cGVPZgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gaXRl
        bSB0aGUgaXRlbSB0byBjaGVjawogIEByZXR1cm4ge1N0cmluZ30gdGhlIHR5
        cGUKKi8KRW1iZXIudHlwZU9mID0gZnVuY3Rpb24oaXRlbSkgewogIHZhciBy
        ZXQ7CgogIHJldCA9IChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHVuZGVm
        aW5lZCkgPyBTdHJpbmcoaXRlbSkgOiBUWVBFX01BUFt0b1N0cmluZy5jYWxs
        KGl0ZW0pXSB8fCAnb2JqZWN0JzsKCiAgaWYgKHJldCA9PT0gJ2Z1bmN0aW9u
        JykgewogICAgaWYgKEVtYmVyLk9iamVjdCAmJiBFbWJlci5PYmplY3QuZGV0
        ZWN0KGl0ZW0pKSByZXQgPSAnY2xhc3MnOwogIH0gZWxzZSBpZiAocmV0ID09
        PSAnb2JqZWN0JykgewogICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBFcnJvcikg
        cmV0ID0gJ2Vycm9yJzsKICAgIGVsc2UgaWYgKEVtYmVyLk9iamVjdCAmJiBp
        dGVtIGluc3RhbmNlb2YgRW1iZXIuT2JqZWN0KSByZXQgPSAnaW5zdGFuY2Un
        OwogICAgZWxzZSByZXQgPSAnb2JqZWN0JzsKICB9CgogIHJldHVybiByZXQ7
        Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8vIEVtYmVyLnRyeUNhdGNo
        RmluYWxseQoKLyoqCiAgVGhlIHB1cnBvc2Ugb2YgdGhlIEVtYmVyIEluc3Ry
        dW1lbnRhdGlvbiBtb2R1bGUgaXMKICB0byBwcm92aWRlIGVmZmljaWVudCwg
        Z2VuZXJhbC1wdXJwb3NlIGluc3RydW1lbnRhdGlvbgogIGZvciBFbWJlci4K
        CiAgU3Vic2NyaWJlIHRvIGEgbGlzdGVuZXIgYnkgdXNpbmcgYEVtYmVyLnN1
        YnNjcmliZWA6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5zdWJzY3JpYmUo
        InJlbmRlciIsIHsKICAgIGJlZm9yZTogZnVuY3Rpb24obmFtZSwgdGltZXN0
        YW1wLCBwYXlsb2FkKSB7CgogICAgfSwKCiAgICBhZnRlcjogZnVuY3Rpb24o
        bmFtZSwgdGltZXN0YW1wLCBwYXlsb2FkKSB7CgogICAgfQogIH0pOwogIGBg
        YAoKICBJZiB5b3UgcmV0dXJuIGEgdmFsdWUgZnJvbSB0aGUgYGJlZm9yZWAg
        Y2FsbGJhY2ssIHRoYXQgc2FtZQogIHZhbHVlIHdpbGwgYmUgcGFzc2VkIGFz
        IGEgZm91cnRoIHBhcmFtZXRlciB0byB0aGUgYGFmdGVyYAogIGNhbGxiYWNr
        LgoKICBJbnN0cnVtZW50IGEgYmxvY2sgb2YgY29kZSBieSB1c2luZyBgRW1i
        ZXIuaW5zdHJ1bWVudGA6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5pbnN0
        cnVtZW50KCJyZW5kZXIuaGFuZGxlYmFycyIsIHBheWxvYWQsIGZ1bmN0aW9u
        KCkgewogICAgLy8gcmVuZGVyaW5nIGxvZ2ljCiAgfSwgYmluZGluZyk7CiAg
        YGBgCgogIEV2ZW50IG5hbWVzIHBhc3NlZCB0byBgRW1iZXIuaW5zdHJ1bWVu
        dGAgYXJlIG5hbWVzcGFjZWQKICBieSBwZXJpb2RzLCBmcm9tIG1vcmUgZ2Vu
        ZXJhbCB0byBtb3JlIHNwZWNpZmljLiBTdWJzY3JpYmVycwogIGNhbiBsaXN0
        ZW4gZm9yIGV2ZW50cyBieSB3aGF0ZXZlciBsZXZlbCBvZiBncmFudWxhcml0
        eSB0aGV5CiAgYXJlIGludGVyZXN0ZWQgaW4uCgogIEluIHRoZSBhYm92ZSBl
        eGFtcGxlLCB0aGUgZXZlbnQgaXMgYHJlbmRlci5oYW5kbGViYXJzYCwKICBh
        bmQgdGhlIHN1YnNjcmliZXIgbGlzdGVuZWQgZm9yIGFsbCBldmVudHMgYmVn
        aW5uaW5nIHdpdGgKICBgcmVuZGVyYC4gSXQgd291bGQgcmVjZWl2ZSBjYWxs
        YmFja3MgZm9yIGV2ZW50cyBuYW1lZAogIGByZW5kZXJgLCBgcmVuZGVyLmhh
        bmRsZWJhcnNgLCBgcmVuZGVyLmNvbnRhaW5lcmAsIG9yCiAgZXZlbiBgcmVu
        ZGVyLmhhbmRsZWJhcnMubGF5b3V0YC4KCiAgQGNsYXNzIEluc3RydW1lbnRh
        dGlvbgogIEBuYW1lc3BhY2UgRW1iZXIKICBAc3RhdGljCiovCkVtYmVyLklu
        c3RydW1lbnRhdGlvbiA9IHt9OwoKdmFyIHN1YnNjcmliZXJzID0gW10sIGNh
        Y2hlID0ge307Cgp2YXIgcG9wdWxhdGVMaXN0ZW5lcnMgPSBmdW5jdGlvbihu
        YW1lKSB7CiAgdmFyIGxpc3RlbmVycyA9IFtdLCBzdWJzY3JpYmVyOwoKICBm
        b3IgKHZhciBpPTAsIGw9c3Vic2NyaWJlcnMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgc3Vic2NyaWJlciA9IHN1YnNjcmliZXJzW2ldOwogICAgaWYgKHN1
        YnNjcmliZXIucmVnZXgudGVzdChuYW1lKSkgewogICAgICBsaXN0ZW5lcnMu
        cHVzaChzdWJzY3JpYmVyLm9iamVjdCk7CiAgICB9CiAgfQoKICBjYWNoZVtu
        YW1lXSA9IGxpc3RlbmVyczsKICByZXR1cm4gbGlzdGVuZXJzOwp9OwoKdmFy
        IHRpbWUgPSAoZnVuY3Rpb24oKSB7CiAgdmFyIHBlcmYgPSAndW5kZWZpbmVk
        JyAhPT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdy5wZXJmb3JtYW5jZSB8fCB7
        fSA6IHt9OwogIHZhciBmbiA9IHBlcmYubm93IHx8IHBlcmYubW96Tm93IHx8
        IHBlcmYud2Via2l0Tm93IHx8IHBlcmYubXNOb3cgfHwgcGVyZi5vTm93Owog
        IC8vIGZuLmJpbmQgd2lsbCBiZSBhdmFpbGFibGUgaW4gYWxsIHRoZSBicm93
        c2VycyB0aGF0IHN1cHBvcnQgdGhlIGFkdmFuY2VkIHdpbmRvdy5wZXJmb3Jt
        YW5jZS4uLiA7LSkKICByZXR1cm4gZm4gPyBmbi5iaW5kKHBlcmYpIDogZnVu
        Y3Rpb24oKSB7IHJldHVybiArbmV3IERhdGUoKTsgfTsKfSkoKTsKCi8qKgog
        IE5vdGlmaWVzIGV2ZW50J3Mgc3Vic2NyaWJlcnMsIGNhbGxzIGBiZWZvcmVg
        IGFuZCBgYWZ0ZXJgIGhvb2tzLgoKICBAbWV0aG9kIGluc3RydW1lbnQKICBA
        bmFtZXNwYWNlIEVtYmVyLkluc3RydW1lbnRhdGlvbgoKICBAcGFyYW0ge1N0
        cmluZ30gW25hbWVdIE5hbWVzcGFjZWQgZXZlbnQgbmFtZS4KICBAcGFyYW0g
        e09iamVjdH0gcGF5bG9hZAogIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNr
        IEZ1bmN0aW9uIHRoYXQgeW91J3JlIGluc3RydW1lbnRpbmcuCiAgQHBhcmFt
        IHtPYmplY3R9IGJpbmRpbmcgQ29udGV4dCB0aGF0IGluc3RydW1lbnQgZnVu
        Y3Rpb24gaXMgY2FsbGVkIHdpdGguCiovCkVtYmVyLkluc3RydW1lbnRhdGlv
        bi5pbnN0cnVtZW50ID0gZnVuY3Rpb24obmFtZSwgcGF5bG9hZCwgY2FsbGJh
        Y2ssIGJpbmRpbmcpIHsKICB2YXIgbGlzdGVuZXJzID0gY2FjaGVbbmFtZV0s
        IHRpbWVOYW1lLCByZXQ7CgogIGlmIChFbWJlci5TVFJVQ1RVUkVEX1BST0ZJ
        TEUpIHsKICAgIHRpbWVOYW1lID0gbmFtZSArICI6ICIgKyBwYXlsb2FkLm9i
        amVjdDsKICAgIGNvbnNvbGUudGltZSh0aW1lTmFtZSk7CiAgfQoKICBpZiAo
        IWxpc3RlbmVycykgewogICAgbGlzdGVuZXJzID0gcG9wdWxhdGVMaXN0ZW5l
        cnMobmFtZSk7CiAgfQoKICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkg
        ewogICAgcmV0ID0gY2FsbGJhY2suY2FsbChiaW5kaW5nKTsKICAgIGlmIChF
        bWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUpIHsgY29uc29sZS50aW1lRW5kKHRp
        bWVOYW1lKTsgfQogICAgcmV0dXJuIHJldDsKICB9CgogIHZhciBiZWZvcmVW
        YWx1ZXMgPSBbXSwgbGlzdGVuZXIsIGksIGw7CgogIGZ1bmN0aW9uIHRyeWFi
        bGUoKSB7CiAgICBmb3IgKGk9MCwgbD1saXN0ZW5lcnMubGVuZ3RoOyBpPGw7
        IGkrKykgewogICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAgICAg
        YmVmb3JlVmFsdWVzW2ldID0gbGlzdGVuZXIuYmVmb3JlKG5hbWUsIHRpbWUo
        KSwgcGF5bG9hZCk7CiAgICB9CgogICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwo
        YmluZGluZyk7CiAgfQoKICBmdW5jdGlvbiBjYXRjaGFibGUoZSkgewogICAg
        cGF5bG9hZCA9IHBheWxvYWQgfHwge307CiAgICBwYXlsb2FkLmV4Y2VwdGlv
        biA9IGU7CiAgfQoKICBmdW5jdGlvbiBmaW5hbGl6ZXIoKSB7CiAgICBmb3Ig
        KGk9MCwgbD1saXN0ZW5lcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBs
        aXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAgICAgbGlzdGVuZXIuYWZ0ZXIo
        bmFtZSwgdGltZSgpLCBwYXlsb2FkLCBiZWZvcmVWYWx1ZXNbaV0pOwogICAg
        fQoKICAgIGlmIChFbWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUpIHsKICAgICAg
        Y29uc29sZS50aW1lRW5kKHRpbWVOYW1lKTsKICAgIH0KICB9CgogIHJldHVy
        biBFbWJlci50cnlDYXRjaEZpbmFsbHkodHJ5YWJsZSwgY2F0Y2hhYmxlLCBm
        aW5hbGl6ZXIpOwp9OwoKLyoqCiAgU3Vic2NyaWJlcyB0byBhIHBhcnRpY3Vs
        YXIgZXZlbnQgb3IgaW5zdHJ1bWVudGVkIGJsb2NrIG9mIGNvZGUuCgogIEBt
        ZXRob2Qgc3Vic2NyaWJlCiAgQG5hbWVzcGFjZSBFbWJlci5JbnN0cnVtZW50
        YXRpb24KCiAgQHBhcmFtIHtTdHJpbmd9IFtwYXR0ZXJuXSBOYW1lc3BhY2Vk
        IGV2ZW50IG5hbWUuCiAgQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIEJlZm9y
        ZSBhbmQgQWZ0ZXIgaG9va3MuCiovCkVtYmVyLkluc3RydW1lbnRhdGlvbi5z
        dWJzY3JpYmUgPSBmdW5jdGlvbihwYXR0ZXJuLCBvYmplY3QpIHsKICB2YXIg
        cGF0aHMgPSBwYXR0ZXJuLnNwbGl0KCIuIiksIHBhdGgsIHJlZ2V4ID0gW107
        CgogIGZvciAodmFyIGk9MCwgbD1wYXRocy5sZW5ndGg7IGk8bDsgaSsrKSB7
        CiAgICBwYXRoID0gcGF0aHNbaV07CiAgICBpZiAocGF0aCA9PT0gIioiKSB7
        CiAgICAgIHJlZ2V4LnB1c2goIlteXFwuXSoiKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIHJlZ2V4LnB1c2gocGF0aCk7CiAgICB9CiAgfQoKICByZWdleCA9IHJl
        Z2V4LmpvaW4oIlxcLiIpOwogIHJlZ2V4ID0gcmVnZXggKyAiKFxcLi4qKT8i
        OwoKICB2YXIgc3Vic2NyaWJlciA9IHsKICAgIHBhdHRlcm46IHBhdHRlcm4s
        CiAgICByZWdleDogbmV3IFJlZ0V4cCgiXiIgKyByZWdleCArICIkIiksCiAg
        ICBvYmplY3Q6IG9iamVjdAogIH07CgogIHN1YnNjcmliZXJzLnB1c2goc3Vi
        c2NyaWJlcik7CiAgY2FjaGUgPSB7fTsKCiAgcmV0dXJuIHN1YnNjcmliZXI7
        Cn07CgovKioKICBVbnN1YnNjcmliZXMgZnJvbSBhIHBhcnRpY3VsYXIgZXZl
        bnQgb3IgaW5zdHJ1bWVudGVkIGJsb2NrIG9mIGNvZGUuCgogIEBtZXRob2Qg
        dW5zdWJzY3JpYmUKICBAbmFtZXNwYWNlIEVtYmVyLkluc3RydW1lbnRhdGlv
        bgoKICBAcGFyYW0ge09iamVjdH0gW3N1YnNjcmliZXJdCiovCkVtYmVyLklu
        c3RydW1lbnRhdGlvbi51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKHN1YnNjcmli
        ZXIpIHsKICB2YXIgaW5kZXg7CgogIGZvciAodmFyIGk9MCwgbD1zdWJzY3Jp
        YmVycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICBpZiAoc3Vic2NyaWJlcnNb
        aV0gPT09IHN1YnNjcmliZXIpIHsKICAgICAgaW5kZXggPSBpOwogICAgfQog
        IH0KCiAgc3Vic2NyaWJlcnMuc3BsaWNlKGluZGV4LCAxKTsKICBjYWNoZSA9
        IHt9Owp9OwoKLyoqCiAgUmVzZXRzIGBFbWJlci5JbnN0cnVtZW50YXRpb25g
        IGJ5IGZsdXNoaW5nIGxpc3Qgb2Ygc3Vic2NyaWJlcnMuCgogIEBtZXRob2Qg
        cmVzZXQKICBAbmFtZXNwYWNlIEVtYmVyLkluc3RydW1lbnRhdGlvbgoqLwpF
        bWJlci5JbnN0cnVtZW50YXRpb24ucmVzZXQgPSBmdW5jdGlvbigpIHsKICBz
        dWJzY3JpYmVycyA9IFtdOwogIGNhY2hlID0ge307Cn07CgpFbWJlci5pbnN0
        cnVtZW50ID0gRW1iZXIuSW5zdHJ1bWVudGF0aW9uLmluc3RydW1lbnQ7CkVt
        YmVyLnN1YnNjcmliZSA9IEVtYmVyLkluc3RydW1lbnRhdGlvbi5zdWJzY3Jp
        YmU7Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIG1hcCwgZm9yRWFjaCwg
        aW5kZXhPZiwgc3BsaWNlOwptYXAgICAgID0gQXJyYXkucHJvdG90eXBlLm1h
        cCAgICAgfHwgRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwOwpmb3JFYWNoID0g
        QXJyYXkucHJvdG90eXBlLmZvckVhY2ggfHwgRW1iZXIuQXJyYXlQb2x5Zmls
        bHMuZm9yRWFjaDsKaW5kZXhPZiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9m
        IHx8IEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Y7CnNwbGljZSA9IEFy
        cmF5LnByb3RvdHlwZS5zcGxpY2U7Cgp2YXIgdXRpbHMgPSBFbWJlci5FbnVt
        ZXJhYmxlVXRpbHMgPSB7CiAgbWFwOiBmdW5jdGlvbihvYmosIGNhbGxiYWNr
        LCB0aGlzQXJnKSB7CiAgICByZXR1cm4gb2JqLm1hcCA/IG9iai5tYXAuY2Fs
        bChvYmosIGNhbGxiYWNrLCB0aGlzQXJnKSA6IG1hcC5jYWxsKG9iaiwgY2Fs
        bGJhY2ssIHRoaXNBcmcpOwogIH0sCgogIGZvckVhY2g6IGZ1bmN0aW9uKG9i
        aiwgY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIHJldHVybiBvYmouZm9yRWFj
        aCA/IG9iai5mb3JFYWNoLmNhbGwob2JqLCBjYWxsYmFjaywgdGhpc0FyZykg
        OiBmb3JFYWNoLmNhbGwob2JqLCBjYWxsYmFjaywgdGhpc0FyZyk7CiAgfSwK
        CiAgaW5kZXhPZjogZnVuY3Rpb24ob2JqLCBlbGVtZW50LCBpbmRleCkgewog
        ICAgcmV0dXJuIG9iai5pbmRleE9mID8gb2JqLmluZGV4T2YuY2FsbChvYmos
        IGVsZW1lbnQsIGluZGV4KSA6IGluZGV4T2YuY2FsbChvYmosIGVsZW1lbnQs
        IGluZGV4KTsKICB9LAoKICBpbmRleGVzT2Y6IGZ1bmN0aW9uKG9iaiwgZWxl
        bWVudHMpIHsKICAgIHJldHVybiBlbGVtZW50cyA9PT0gdW5kZWZpbmVkID8g
        W10gOiB1dGlscy5tYXAoZWxlbWVudHMsIGZ1bmN0aW9uKGl0ZW0pIHsKICAg
        ICAgcmV0dXJuIHV0aWxzLmluZGV4T2Yob2JqLCBpdGVtKTsKICAgIH0pOwog
        IH0sCgogIGFkZE9iamVjdDogZnVuY3Rpb24oYXJyYXksIGl0ZW0pIHsKICAg
        IHZhciBpbmRleCA9IHV0aWxzLmluZGV4T2YoYXJyYXksIGl0ZW0pOwogICAg
        aWYgKGluZGV4ID09PSAtMSkgeyBhcnJheS5wdXNoKGl0ZW0pOyB9CiAgfSwK
        CiAgcmVtb3ZlT2JqZWN0OiBmdW5jdGlvbihhcnJheSwgaXRlbSkgewogICAg
        dmFyIGluZGV4ID0gdXRpbHMuaW5kZXhPZihhcnJheSwgaXRlbSk7CiAgICBp
        ZiAoaW5kZXggIT09IC0xKSB7IGFycmF5LnNwbGljZShpbmRleCwgMSk7IH0K
        ICB9LAoKICBfcmVwbGFjZTogZnVuY3Rpb24oYXJyYXksIGlkeCwgYW10LCBv
        YmplY3RzKSB7CiAgICB2YXIgYXJncyA9IFtdLmNvbmNhdChvYmplY3RzKSwg
        Y2h1bmssIHJldCA9IFtdLAogICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29n
        bGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NjU4OAogICAg
        ICAgIHNpemUgPSA2MDAwMCwgc3RhcnQgPSBpZHgsIGVuZHMgPSBhbXQsIGNv
        dW50OwoKICAgIHdoaWxlIChhcmdzLmxlbmd0aCkgewogICAgICBjb3VudCA9
        IGVuZHMgPiBzaXplID8gc2l6ZSA6IGVuZHM7CiAgICAgIGlmIChjb3VudCA8
        PSAwKSB7IGNvdW50ID0gMDsgfQoKICAgICAgY2h1bmsgPSBhcmdzLnNwbGlj
        ZSgwLCBzaXplKTsKICAgICAgY2h1bmsgPSBbc3RhcnQsIGNvdW50XS5jb25j
        YXQoY2h1bmspOwoKICAgICAgc3RhcnQgKz0gc2l6ZTsKICAgICAgZW5kcyAt
        PSBjb3VudDsKCiAgICAgIHJldCA9IHJldC5jb25jYXQoc3BsaWNlLmFwcGx5
        KGFycmF5LCBjaHVuaykpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9LAoK
        ICByZXBsYWNlOiBmdW5jdGlvbihhcnJheSwgaWR4LCBhbXQsIG9iamVjdHMp
        IHsKICAgIGlmIChhcnJheS5yZXBsYWNlKSB7CiAgICAgIHJldHVybiBhcnJh
        eS5yZXBsYWNlKGlkeCwgYW10LCBvYmplY3RzKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIHJldHVybiB1dGlscy5fcmVwbGFjZShhcnJheSwgaWR4LCBhbXQsIG9i
        amVjdHMpOwogICAgfQogIH0sCgogIGludGVyc2VjdGlvbjogZnVuY3Rpb24o
        YXJyYXkxLCBhcnJheTIpIHsKICAgIHZhciBpbnRlcnNlY3Rpb24gPSBbXTsK
        CiAgICB1dGlscy5mb3JFYWNoKGFycmF5MSwgZnVuY3Rpb24oZWxlbWVudCkg
        ewogICAgICBpZiAodXRpbHMuaW5kZXhPZihhcnJheTIsIGVsZW1lbnQpID49
        IDApIHsKICAgICAgICBpbnRlcnNlY3Rpb24ucHVzaChlbGVtZW50KTsKICAg
        ICAgfQogICAgfSk7CgogICAgcmV0dXJuIGludGVyc2VjdGlvbjsKICB9Cn07
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1l
        dGFsCiovCgp2YXIgTUVUQV9LRVkgPSBFbWJlci5NRVRBX0tFWSwgZ2V0OwoK
        dmFyIE1BTkRBVE9SWV9TRVRURVIgPSBFbWJlci5FTlYuTUFOREFUT1JZX1NF
        VFRFUjsKCnZhciBJU19HTE9CQUxfUEFUSCA9IC9eKFtBLVokXXwoWzAtOV1b
        QS1aJF0pKS4qW1wuXCpdLzsKdmFyIEhBU19USElTICA9IC9edGhpc1tcLlwq
        XS87CnZhciBGSVJTVF9LRVkgPSAvXihbXlwuXCpdKykvOwoKLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLgovLyBHRVQgQU5EIFNFVAovLwovLyBJZiB3ZSBhcmUgb24gYSBw
        bGF0Zm9ybSB0aGF0IHN1cHBvcnRzIGFjY2Vzc29ycyB3ZSBjYW4gdXNlIHRo
        b3NlLgovLyBPdGhlcndpc2Ugc2ltdWxhdGUgYWNjZXNzb3JzIGJ5IGxvb2tp
        bmcgdXAgdGhlIHByb3BlcnR5IGRpcmVjdGx5IG9uIHRoZQovLyBvYmplY3Qu
        CgovKioKICBHZXRzIHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IG9uIGFuIG9i
        amVjdC4gSWYgdGhlIHByb3BlcnR5IGlzIGNvbXB1dGVkLAogIHRoZSBmdW5j
        dGlvbiB3aWxsIGJlIGludm9rZWQuIElmIHRoZSBwcm9wZXJ0eSBpcyBub3Qg
        ZGVmaW5lZCBidXQgdGhlCiAgb2JqZWN0IGltcGxlbWVudHMgdGhlIGB1bmtu
        b3duUHJvcGVydHlgIG1ldGhvZCB0aGVuIHRoYXQgd2lsbCBiZSBpbnZva2Vk
        LgoKICBJZiB5b3UgcGxhbiB0byBydW4gb24gSUU4IGFuZCBvbGRlciBicm93
        c2VycyB0aGVuIHlvdSBzaG91bGQgdXNlIHRoaXMKICBtZXRob2QgYW55dGlt
        ZSB5b3Ugd2FudCB0byByZXRyaWV2ZSBhIHByb3BlcnR5IG9uIGFuIG9iamVj
        dCB0aGF0IHlvdSBkb24ndAogIGtub3cgZm9yIHN1cmUgaXMgcHJpdmF0ZS4g
        KFByb3BlcnRpZXMgYmVnaW5uaW5nIHdpdGggYW4gdW5kZXJzY29yZSAnXycK
        ICBhcmUgY29uc2lkZXJlZCBwcml2YXRlLikKCiAgT24gYWxsIG5ld2VyIGJy
        b3dzZXJzLCB5b3Ugb25seSBuZWVkIHRvIHVzZSB0aGlzIG1ldGhvZCB0byBy
        ZXRyaWV2ZQogIHByb3BlcnRpZXMgaWYgdGhlIHByb3BlcnR5IG1pZ2h0IG5v
        dCBiZSBkZWZpbmVkIG9uIHRoZSBvYmplY3QgYW5kIHlvdSB3YW50CiAgdG8g
        cmVzcGVjdCB0aGUgYHVua25vd25Qcm9wZXJ0eWAgaGFuZGxlci4gT3RoZXJ3
        aXNlIHlvdSBjYW4gaWdub3JlIHRoaXMKICBtZXRob2QuCgogIE5vdGUgdGhh
        dCBpZiB0aGUgb2JqZWN0IGl0c2VsZiBpcyBgdW5kZWZpbmVkYCwgdGhpcyBt
        ZXRob2Qgd2lsbCB0aHJvdwogIGFuIGVycm9yLgoKICBAbWV0aG9kIGdldAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        dG8gcmV0cmlldmUgZnJvbS4KICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBU
        aGUgcHJvcGVydHkga2V5IHRvIHJldHJpZXZlCiAgQHJldHVybiB7T2JqZWN0
        fSB0aGUgcHJvcGVydHkgdmFsdWUgb3IgYG51bGxgLgoqLwpnZXQgPSBmdW5j
        dGlvbiBnZXQob2JqLCBrZXlOYW1lKSB7CiAgLy8gSGVscGVycyB0aGF0IG9w
        ZXJhdGUgd2l0aCAndGhpcycgd2l0aGluIGFuICNlYWNoCiAgaWYgKGtleU5h
        bWUgPT09ICcnKSB7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgaWYgKCFrZXlO
        YW1lICYmICdzdHJpbmcnPT09dHlwZW9mIG9iaikgewogICAga2V5TmFtZSA9
        IG9iajsKICAgIG9iaiA9IG51bGw7CiAgfQoKICBFbWJlci5hc3NlcnQoIkNh
        bm5vdCBjYWxsIGdldCB3aXRoICIrIGtleU5hbWUgKyIga2V5LiIsICEha2V5
        TmFtZSk7CiAgRW1iZXIuYXNzZXJ0KCJDYW5ub3QgY2FsbCBnZXQgd2l0aCAn
        Iisga2V5TmFtZSArIicgb24gYW4gdW5kZWZpbmVkIG9iamVjdC4iLCBvYmog
        IT09IHVuZGVmaW5lZCk7CgogIGlmIChvYmogPT09IG51bGwgfHwga2V5TmFt
        ZS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICByZXR1cm4gZ2V0UGF0aChv
        YmosIGtleU5hbWUpOwogIH0KCiAgdmFyIG1ldGEgPSBvYmpbTUVUQV9LRVld
        LCBkZXNjID0gbWV0YSAmJiBtZXRhLmRlc2NzW2tleU5hbWVdLCByZXQ7CiAg
        aWYgKGRlc2MpIHsKICAgIHJldHVybiBkZXNjLmdldChvYmosIGtleU5hbWUp
        OwogIH0gZWxzZSB7CiAgICBpZiAoTUFOREFUT1JZX1NFVFRFUiAmJiBtZXRh
        ICYmIG1ldGEud2F0Y2hpbmdba2V5TmFtZV0gPiAwKSB7CiAgICAgIHJldCA9
        IG1ldGEudmFsdWVzW2tleU5hbWVdOwogICAgfSBlbHNlIHsKICAgICAgcmV0
        ID0gb2JqW2tleU5hbWVdOwogICAgfQoKICAgIGlmIChyZXQgPT09IHVuZGVm
        aW5lZCAmJgogICAgICAgICdvYmplY3QnID09PSB0eXBlb2Ygb2JqICYmICEo
        a2V5TmFtZSBpbiBvYmopICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmou
        dW5rbm93blByb3BlcnR5KSB7CiAgICAgIHJldHVybiBvYmoudW5rbm93blBy
        b3BlcnR5KGtleU5hbWUpOwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfQp9
        OwoKLy8gQ3VycmVudGx5IHVzZWQgb25seSBieSBFbWJlciBEYXRhIHRlc3Rz
        CmlmIChFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMpIHsKICBFbWJl
        ci5nZXQgPSBnZXQ7CiAgRW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3Jz
        KCk7CiAgZ2V0ID0gRW1iZXIuZ2V0Owp9CgovKioKICBAcHJpdmF0ZQoKICBO
        b3JtYWxpemVzIGEgdGFyZ2V0L3BhdGggcGFpciB0byByZWZsZWN0IHRoYXQg
        YWN0dWFsIHRhcmdldC9wYXRoIHRoYXQgc2hvdWxkCiAgYmUgb2JzZXJ2ZWQs
        IGV0Yy4gVGhpcyB0YWtlcyBpbnRvIGFjY291bnQgcGFzc2luZyBpbiBnbG9i
        YWwgcHJvcGVydHkKICBwYXRocyAoaS5lLiBhIHBhdGggYmVnaW5uaW5nIHdp
        dGggYSBjYXB0aWFsIGxldHRlciBub3QgZGVmaW5lZCBvbiB0aGUKICB0YXJn
        ZXQpIGFuZCAqIHNlcGFyYXRvcnMuCgogIEBtZXRob2Qgbm9ybWFsaXplVHVw
        bGUKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUaGUg
        Y3VycmVudCB0YXJnZXQuIE1heSBiZSBgbnVsbGAuCiAgQHBhcmFtIHtTdHJp
        bmd9IHBhdGggQSBwYXRoIG9uIHRoZSB0YXJnZXQgb3IgYSBnbG9iYWwgcHJv
        cGVydHkgcGF0aC4KICBAcmV0dXJuIHtBcnJheX0gYSB0ZW1wb3JhcnkgYXJy
        YXkgd2l0aCB0aGUgbm9ybWFsaXplZCB0YXJnZXQvcGF0aCBwYWlyLgoqLwp2
        YXIgbm9ybWFsaXplVHVwbGUgPSBFbWJlci5ub3JtYWxpemVUdXBsZSA9IGZ1
        bmN0aW9uKHRhcmdldCwgcGF0aCkgewogIHZhciBoYXNUaGlzICA9IEhBU19U
        SElTLnRlc3QocGF0aCksCiAgICAgIGlzR2xvYmFsID0gIWhhc1RoaXMgJiYg
        SVNfR0xPQkFMX1BBVEgudGVzdChwYXRoKSwKICAgICAga2V5OwoKICBpZiAo
        IXRhcmdldCB8fCBpc0dsb2JhbCkgdGFyZ2V0ID0gRW1iZXIubG9va3VwOwog
        IGlmIChoYXNUaGlzKSBwYXRoID0gcGF0aC5zbGljZSg1KTsKCiAgaWYgKHRh
        cmdldCA9PT0gRW1iZXIubG9va3VwKSB7CiAgICBrZXkgPSBwYXRoLm1hdGNo
        KEZJUlNUX0tFWSlbMF07CiAgICB0YXJnZXQgPSBnZXQodGFyZ2V0LCBrZXkp
        OwogICAgcGF0aCAgID0gcGF0aC5zbGljZShrZXkubGVuZ3RoKzEpOwogIH0K
        CiAgLy8gbXVzdCByZXR1cm4gc29tZSBraW5kIG9mIHBhdGggdG8gYmUgdmFs
        aWQgZWxzZSBvdGhlciB0aGluZ3Mgd2lsbCBicmVhay4KICBpZiAoIXBhdGgg
        fHwgcGF0aC5sZW5ndGg9PT0wKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ0lu
        dmFsaWQgUGF0aCcpOwoKICByZXR1cm4gWyB0YXJnZXQsIHBhdGggXTsKfTsK
        CnZhciBnZXRQYXRoID0gRW1iZXIuX2dldFBhdGggPSBmdW5jdGlvbihyb290
        LCBwYXRoKSB7CiAgdmFyIGhhc1RoaXMsIHBhcnRzLCB0dXBsZSwgaWR4LCBs
        ZW47CgogIC8vIElmIHRoZXJlIGlzIG5vIHJvb3QgYW5kIHBhdGggaXMgYSBr
        ZXkgbmFtZSwgcmV0dXJuIHRoYXQKICAvLyBwcm9wZXJ0eSBmcm9tIHRoZSBn
        bG9iYWwgb2JqZWN0LgogIC8vIEUuZy4gZ2V0KCdFbWJlcicpIC0+IEVtYmVy
        CiAgaWYgKHJvb3QgPT09IG51bGwgJiYgcGF0aC5pbmRleE9mKCcuJykgPT09
        IC0xKSB7IHJldHVybiBnZXQoRW1iZXIubG9va3VwLCBwYXRoKTsgfQoKICAv
        LyBkZXRlY3QgY29tcGxpY2F0ZWQgcGF0aHMgYW5kIG5vcm1hbGl6ZSB0aGVt
        CiAgaGFzVGhpcyAgPSBIQVNfVEhJUy50ZXN0KHBhdGgpOwoKICBpZiAoIXJv
        b3QgfHwgaGFzVGhpcykgewogICAgdHVwbGUgPSBub3JtYWxpemVUdXBsZShy
        b290LCBwYXRoKTsKICAgIHJvb3QgPSB0dXBsZVswXTsKICAgIHBhdGggPSB0
        dXBsZVsxXTsKICAgIHR1cGxlLmxlbmd0aCA9IDA7CiAgfQoKICBwYXJ0cyA9
        IHBhdGguc3BsaXQoIi4iKTsKICBsZW4gPSBwYXJ0cy5sZW5ndGg7CiAgZm9y
        IChpZHggPSAwOyByb290ICE9IG51bGwgJiYgaWR4IDwgbGVuOyBpZHgrKykg
        ewogICAgcm9vdCA9IGdldChyb290LCBwYXJ0c1tpZHhdLCB0cnVlKTsKICAg
        IGlmIChyb290ICYmIHJvb3QuaXNEZXN0cm95ZWQpIHsgcmV0dXJuIHVuZGVm
        aW5lZDsgfQogIH0KICByZXR1cm4gcm9vdDsKfTsKCkVtYmVyLmdldFdpdGhE
        ZWZhdWx0ID0gZnVuY3Rpb24ocm9vdCwga2V5LCBkZWZhdWx0VmFsdWUpIHsK
        ICB2YXIgdmFsdWUgPSBnZXQocm9vdCwga2V5KTsKCiAgaWYgKHZhbHVlID09
        PSB1bmRlZmluZWQpIHsgcmV0dXJuIGRlZmF1bHRWYWx1ZTsgfQogIHJldHVy
        biB2YWx1ZTsKfTsKCgpFbWJlci5nZXQgPSBnZXQ7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgb19j
        cmVhdGUgPSBFbWJlci5jcmVhdGUsCiAgICBtZXRhRm9yID0gRW1iZXIubWV0
        YSwKICAgIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVksCiAgICBhX3NsaWNl
        ID0gW10uc2xpY2UsCiAgICAvKiBsaXN0ZW5lciBmbGFncyAqLwogICAgT05D
        RSA9IDEsIFNVU1BFTkRFRCA9IDI7CgovKgogIFRoZSBldmVudCBzeXN0ZW0g
        dXNlcyBhIHNlcmllcyBvZiBuZXN0ZWQgaGFzaGVzIHRvIHN0b3JlIGxpc3Rl
        bmVycyBvbiBhbgogIG9iamVjdC4gV2hlbiBhIGxpc3RlbmVyIGlzIHJlZ2lz
        dGVyZWQsIG9yIHdoZW4gYW4gZXZlbnQgYXJyaXZlcywgdGhlc2UKICBoYXNo
        ZXMgYXJlIGNvbnN1bHRlZCB0byBkZXRlcm1pbmUgd2hpY2ggdGFyZ2V0IGFu
        ZCBhY3Rpb24gcGFpciB0byBpbnZva2UuCgogIFRoZSBoYXNoZXMgYXJlIHN0
        b3JlZCBpbiB0aGUgb2JqZWN0J3MgbWV0YSBoYXNoLCBhbmQgbG9vayBsaWtl
        IHRoaXM6CgogICAgICAvLyBPYmplY3QncyBtZXRhIGhhc2gKICAgICAgewog
        ICAgICAgIGxpc3RlbmVyczogeyAgICAgICAvLyB2YXJpYWJsZSBuYW1lOiBg
        bGlzdGVuZXJTZXRgCiAgICAgICAgICAiZm9vOmNoYW5nZWQiOiBbIC8vIHZh
        cmlhYmxlIG5hbWU6IGBhY3Rpb25zYAogICAgICAgICAgICB0YXJnZXQsIG1l
        dGhvZCwgZmxhZ3MKICAgICAgICAgIF0KICAgICAgICB9CiAgICAgIH0KCiov
        CgpmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB0YXJnZXQsIG1ldGhvZCkgewog
        IHZhciBpbmRleCA9IC0xOwogIGZvciAodmFyIGkgPSAwLCBsID0gYXJyYXku
        bGVuZ3RoOyBpIDwgbDsgaSArPSAzKSB7CiAgICBpZiAodGFyZ2V0ID09PSBh
        cnJheVtpXSAmJiBtZXRob2QgPT09IGFycmF5W2krMV0pIHsgaW5kZXggPSBp
        OyBicmVhazsgfQogIH0KICByZXR1cm4gaW5kZXg7Cn0KCmZ1bmN0aW9uIGFj
        dGlvbnNGb3Iob2JqLCBldmVudE5hbWUpIHsKICB2YXIgbWV0YSA9IG1ldGFG
        b3Iob2JqLCB0cnVlKSwKICAgICAgYWN0aW9uczsKCiAgaWYgKCFtZXRhLmxp
        c3RlbmVycykgeyBtZXRhLmxpc3RlbmVycyA9IHt9OyB9CgogIGlmICghbWV0
        YS5oYXNPd25Qcm9wZXJ0eSgnbGlzdGVuZXJzJykpIHsKICAgIC8vIHNldHVw
        IGluaGVyaXRlZCBjb3B5IG9mIHRoZSBsaXN0ZW5lcnMgb2JqZWN0CiAgICBt
        ZXRhLmxpc3RlbmVycyA9IG9fY3JlYXRlKG1ldGEubGlzdGVuZXJzKTsKICB9
        CgogIGFjdGlvbnMgPSBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdOwoKICAv
        LyBpZiB0aGVyZSBhcmUgYWN0aW9ucywgYnV0IHRoZSBldmVudE5hbWUgZG9l
        c24ndCBleGlzdCBpbiBvdXIgbGlzdGVuZXJzLCB0aGVuIGNvcHkgdGhlbSBm
        cm9tIHRoZSBwcm90b3R5cGUKICBpZiAoYWN0aW9ucyAmJiAhbWV0YS5saXN0
        ZW5lcnMuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkgewogICAgYWN0aW9u
        cyA9IG1ldGEubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBtZXRhLmxpc3RlbmVy
        c1tldmVudE5hbWVdLnNsaWNlKCk7CiAgfSBlbHNlIGlmICghYWN0aW9ucykg
        ewogICAgYWN0aW9ucyA9IG1ldGEubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBb
        XTsKICB9CgogIHJldHVybiBhY3Rpb25zOwp9CgpmdW5jdGlvbiBhY3Rpb25z
        VW5pb24ob2JqLCBldmVudE5hbWUsIG90aGVyQWN0aW9ucykgewogIHZhciBt
        ZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgYWN0aW9ucyA9IG1ldGEgJiYg
        bWV0YS5saXN0ZW5lcnMgJiYgbWV0YS5saXN0ZW5lcnNbZXZlbnROYW1lXTsK
        CiAgaWYgKCFhY3Rpb25zKSB7IHJldHVybjsgfQogIGZvciAodmFyIGkgPSBh
        Y3Rpb25zLmxlbmd0aCAtIDM7IGkgPj0gMDsgaSAtPSAzKSB7CiAgICB2YXIg
        dGFyZ2V0ID0gYWN0aW9uc1tpXSwKICAgICAgICBtZXRob2QgPSBhY3Rpb25z
        W2krMV0sCiAgICAgICAgZmxhZ3MgPSBhY3Rpb25zW2krMl0sCiAgICAgICAg
        YWN0aW9uSW5kZXggPSBpbmRleE9mKG90aGVyQWN0aW9ucywgdGFyZ2V0LCBt
        ZXRob2QpOwoKICAgIGlmIChhY3Rpb25JbmRleCA9PT0gLTEpIHsKICAgICAg
        b3RoZXJBY3Rpb25zLnB1c2godGFyZ2V0LCBtZXRob2QsIGZsYWdzKTsKICAg
        IH0KICB9Cn0KCmZ1bmN0aW9uIGFjdGlvbnNEaWZmKG9iaiwgZXZlbnROYW1l
        LCBvdGhlckFjdGlvbnMpIHsKICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0s
        CiAgICAgIGFjdGlvbnMgPSBtZXRhICYmIG1ldGEubGlzdGVuZXJzICYmIG1l
        dGEubGlzdGVuZXJzW2V2ZW50TmFtZV0sCiAgICAgIGRpZmZBY3Rpb25zID0g
        W107CgogIGlmICghYWN0aW9ucykgeyByZXR1cm47IH0KICBmb3IgKHZhciBp
        ID0gYWN0aW9ucy5sZW5ndGggLSAzOyBpID49IDA7IGkgLT0gMykgewogICAg
        dmFyIHRhcmdldCA9IGFjdGlvbnNbaV0sCiAgICAgICAgbWV0aG9kID0gYWN0
        aW9uc1tpKzFdLAogICAgICAgIGZsYWdzID0gYWN0aW9uc1tpKzJdLAogICAg
        ICAgIGFjdGlvbkluZGV4ID0gaW5kZXhPZihvdGhlckFjdGlvbnMsIHRhcmdl
        dCwgbWV0aG9kKTsKCiAgICBpZiAoYWN0aW9uSW5kZXggIT09IC0xKSB7IGNv
        bnRpbnVlOyB9CgogICAgb3RoZXJBY3Rpb25zLnB1c2godGFyZ2V0LCBtZXRo
        b2QsIGZsYWdzKTsKICAgIGRpZmZBY3Rpb25zLnB1c2godGFyZ2V0LCBtZXRo
        b2QsIGZsYWdzKTsKICB9CgogIHJldHVybiBkaWZmQWN0aW9uczsKfQoKLyoq
        CiAgQWRkIGFuIGV2ZW50IGxpc3RlbmVyCgogIEBtZXRob2QgYWRkTGlzdGVu
        ZXIKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5n
        fSBldmVudE5hbWUKICBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0
        T3JNZXRob2QgQSB0YXJnZXQgb2JqZWN0IG9yIGEgZnVuY3Rpb24KICBAcGFy
        YW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIEEgZnVuY3Rpb24gb3IgdGhl
        IG5hbWUgb2YgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYHRhcmdldGAK
        ICBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgQSBmbGFnIHdoZXRoZXIgYSBmdW5j
        dGlvbiBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZQoqLwpmdW5jdGlvbiBh
        ZGRMaXN0ZW5lcihvYmosIGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRob2QsIG9u
        Y2UpIHsKICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3MgYXQgbGVhc3Qg
        YW4gb2JqZWN0IGFuZCBldmVudCBuYW1lIHRvIEVtYmVyLmFkZExpc3RlbmVy
        IiwgISFvYmogJiYgISFldmVudE5hbWUpOwoKICBpZiAoIW1ldGhvZCAmJiAn
        ZnVuY3Rpb24nID09PSB0eXBlb2YgdGFyZ2V0KSB7CiAgICBtZXRob2QgPSB0
        YXJnZXQ7CiAgICB0YXJnZXQgPSBudWxsOwogIH0KCiAgdmFyIGFjdGlvbnMg
        PSBhY3Rpb25zRm9yKG9iaiwgZXZlbnROYW1lKSwKICAgICAgYWN0aW9uSW5k
        ZXggPSBpbmRleE9mKGFjdGlvbnMsIHRhcmdldCwgbWV0aG9kKSwKICAgICAg
        ZmxhZ3MgPSAwOwoKICBpZiAob25jZSkgZmxhZ3MgfD0gT05DRTsKCiAgaWYg
        KGFjdGlvbkluZGV4ICE9PSAtMSkgeyByZXR1cm47IH0KCiAgYWN0aW9ucy5w
        dXNoKHRhcmdldCwgbWV0aG9kLCBmbGFncyk7CgogIGlmICgnZnVuY3Rpb24n
        ID09PSB0eXBlb2Ygb2JqLmRpZEFkZExpc3RlbmVyKSB7CiAgICBvYmouZGlk
        QWRkTGlzdGVuZXIoZXZlbnROYW1lLCB0YXJnZXQsIG1ldGhvZCk7CiAgfQp9
        CgovKioKICBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXIKCiAgQXJndW1lbnRz
        IHNob3VsZCBtYXRjaCB0aG9zZSBwYXNzZWQgdG8gYEVtYmVyLmFkZExpc3Rl
        bmVyYC4KCiAgQG1ldGhvZCByZW1vdmVMaXN0ZW5lcgogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0gb2JqCiAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZQogIEBw
        YXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZCBBIHRhcmdl
        dCBvYmplY3Qgb3IgYSBmdW5jdGlvbgogIEBwYXJhbSB7RnVuY3Rpb258U3Ry
        aW5nfSBtZXRob2QgQSBmdW5jdGlvbiBvciB0aGUgbmFtZSBvZiBhIGZ1bmN0
        aW9uIHRvIGJlIGNhbGxlZCBvbiBgdGFyZ2V0YAoqLwpmdW5jdGlvbiByZW1v
        dmVMaXN0ZW5lcihvYmosIGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRob2QpIHsK
        ICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3MgYXQgbGVhc3QgYW4gb2Jq
        ZWN0IGFuZCBldmVudCBuYW1lIHRvIEVtYmVyLnJlbW92ZUxpc3RlbmVyIiwg
        ISFvYmogJiYgISFldmVudE5hbWUpOwoKICBpZiAoIW1ldGhvZCAmJiAnZnVu
        Y3Rpb24nID09PSB0eXBlb2YgdGFyZ2V0KSB7CiAgICBtZXRob2QgPSB0YXJn
        ZXQ7CiAgICB0YXJnZXQgPSBudWxsOwogIH0KCiAgZnVuY3Rpb24gX3JlbW92
        ZUxpc3RlbmVyKHRhcmdldCwgbWV0aG9kKSB7CiAgICB2YXIgYWN0aW9ucyA9
        IGFjdGlvbnNGb3Iob2JqLCBldmVudE5hbWUpLAogICAgICAgIGFjdGlvbklu
        ZGV4ID0gaW5kZXhPZihhY3Rpb25zLCB0YXJnZXQsIG1ldGhvZCk7CgogICAg
        Ly8gYWN0aW9uIGRvZXNuJ3QgZXhpc3QsIGdpdmUgdXAgc2lsZW50bHkKICAg
        IGlmIChhY3Rpb25JbmRleCA9PT0gLTEpIHsgcmV0dXJuOyB9CgogICAgYWN0
        aW9ucy5zcGxpY2UoYWN0aW9uSW5kZXgsIDMpOwoKICAgIGlmICgnZnVuY3Rp
        b24nID09PSB0eXBlb2Ygb2JqLmRpZFJlbW92ZUxpc3RlbmVyKSB7CiAgICAg
        IG9iai5kaWRSZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIHRhcmdldCwgbWV0
        aG9kKTsKICAgIH0KICB9CgogIGlmIChtZXRob2QpIHsKICAgIF9yZW1vdmVM
        aXN0ZW5lcih0YXJnZXQsIG1ldGhvZCk7CiAgfSBlbHNlIHsKICAgIHZhciBt
        ZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgICBhY3Rpb25zID0gbWV0YSAm
        JiBtZXRhLmxpc3RlbmVycyAmJiBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVd
        OwoKICAgIGlmICghYWN0aW9ucykgeyByZXR1cm47IH0KICAgIGZvciAodmFy
        IGkgPSBhY3Rpb25zLmxlbmd0aCAtIDM7IGkgPj0gMDsgaSAtPSAzKSB7CiAg
        ICAgIF9yZW1vdmVMaXN0ZW5lcihhY3Rpb25zW2ldLCBhY3Rpb25zW2krMV0p
        OwogICAgfQogIH0KfQoKLyoqCiAgQHByaXZhdGUKCiAgU3VzcGVuZCBsaXN0
        ZW5lciBkdXJpbmcgY2FsbGJhY2suCgogIFRoaXMgc2hvdWxkIG9ubHkgYmUg
        dXNlZCBieSB0aGUgdGFyZ2V0IG9mIHRoZSBldmVudCBsaXN0ZW5lcgogIHdo
        ZW4gaXQgaXMgdGFraW5nIGFuIGFjdGlvbiB0aGF0IHdvdWxkIGNhdXNlIHRo
        ZSBldmVudCwgZS5nLgogIGFuIG9iamVjdCBtaWdodCBzdXNwZW5kIGl0cyBw
        cm9wZXJ0eSBjaGFuZ2UgbGlzdGVuZXIgd2hpbGUgaXQgaXMKICBzZXR0aW5n
        IHRoYXQgcHJvcGVydHkuCgogIEBtZXRob2Qgc3VzcGVuZExpc3RlbmVyCiAg
        QGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmluZ30gZXZl
        bnROYW1lCiAgQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IHRhcmdldE9yTWV0
        aG9kIEEgdGFyZ2V0IG9iamVjdCBvciBhIGZ1bmN0aW9uCiAgQHBhcmFtIHtG
        dW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBBIGZ1bmN0aW9uIG9yIHRoZSBuYW1l
        IG9mIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGB0YXJnZXRgCiAgQHBh
        cmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKKi8KZnVuY3Rpb24gc3VzcGVuZExp
        c3RlbmVyKG9iaiwgZXZlbnROYW1lLCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJh
        Y2spIHsKICBpZiAoIW1ldGhvZCAmJiAnZnVuY3Rpb24nID09PSB0eXBlb2Yg
        dGFyZ2V0KSB7CiAgICBtZXRob2QgPSB0YXJnZXQ7CiAgICB0YXJnZXQgPSBu
        dWxsOwogIH0KCiAgdmFyIGFjdGlvbnMgPSBhY3Rpb25zRm9yKG9iaiwgZXZl
        bnROYW1lKSwKICAgICAgYWN0aW9uSW5kZXggPSBpbmRleE9mKGFjdGlvbnMs
        IHRhcmdldCwgbWV0aG9kKTsKCiAgaWYgKGFjdGlvbkluZGV4ICE9PSAtMSkg
        ewogICAgYWN0aW9uc1thY3Rpb25JbmRleCsyXSB8PSBTVVNQRU5ERUQ7IC8v
        IG1hcmsgdGhlIGFjdGlvbiBhcyBzdXNwZW5kZWQKICB9CgogIGZ1bmN0aW9u
        IHRyeWFibGUoKSAgIHsgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGFyZ2V0KTsg
        fQogIGZ1bmN0aW9uIGZpbmFsaXplcigpIHsgaWYgKGFjdGlvbkluZGV4ICE9
        PSAtMSkgeyBhY3Rpb25zW2FjdGlvbkluZGV4KzJdICY9IH5TVVNQRU5ERUQ7
        IH0gfQoKICByZXR1cm4gRW1iZXIudHJ5RmluYWxseSh0cnlhYmxlLCBmaW5h
        bGl6ZXIpOwp9CgovKioKICBAcHJpdmF0ZQoKICBTdXNwZW5kcyBtdWx0aXBs
        ZSBsaXN0ZW5lcnMgZHVyaW5nIGEgY2FsbGJhY2suCgogIAogIEBtZXRob2Qg
        c3VzcGVuZExpc3RlbmVycwogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiAg
        QHBhcmFtIHtBcnJheX0gZXZlbnROYW1lIEFycmF5IG9mIGV2ZW50IG5hbWVz
        CiAgQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IHRhcmdldE9yTWV0aG9kIEEg
        dGFyZ2V0IG9iamVjdCBvciBhIGZ1bmN0aW9uCiAgQHBhcmFtIHtGdW5jdGlv
        bnxTdHJpbmd9IG1ldGhvZCBBIGZ1bmN0aW9uIG9yIHRoZSBuYW1lIG9mIGEg
        ZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGB0YXJnZXRgCiAgQHBhcmFtIHtG
        dW5jdGlvbn0gY2FsbGJhY2sKKi8KZnVuY3Rpb24gc3VzcGVuZExpc3RlbmVy
        cyhvYmosIGV2ZW50TmFtZXMsIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjaykg
        ewogIGlmICghbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiB0YXJn
        ZXQpIHsKICAgIG1ldGhvZCA9IHRhcmdldDsKICAgIHRhcmdldCA9IG51bGw7
        CiAgfQoKICB2YXIgc3VzcGVuZGVkQWN0aW9ucyA9IFtdLAogICAgICBhY3Rp
        b25zTGlzdCA9IFtdLAogICAgICBldmVudE5hbWUsIGFjdGlvbnMsIGksIGw7
        CgogIGZvciAoaT0wLCBsPWV2ZW50TmFtZXMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgZXZlbnROYW1lID0gZXZlbnROYW1lc1tpXTsKICAgIGFjdGlvbnMg
        PSBhY3Rpb25zRm9yKG9iaiwgZXZlbnROYW1lKTsKICAgIHZhciBhY3Rpb25J
        bmRleCA9IGluZGV4T2YoYWN0aW9ucywgdGFyZ2V0LCBtZXRob2QpOwoKICAg
        IGlmIChhY3Rpb25JbmRleCAhPT0gLTEpIHsKICAgICAgYWN0aW9uc1thY3Rp
        b25JbmRleCsyXSB8PSBTVVNQRU5ERUQ7CiAgICAgIHN1c3BlbmRlZEFjdGlv
        bnMucHVzaChhY3Rpb25JbmRleCk7CiAgICAgIGFjdGlvbnNMaXN0LnB1c2go
        YWN0aW9ucyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0cnlhYmxlKCkgeyBy
        ZXR1cm4gY2FsbGJhY2suY2FsbCh0YXJnZXQpOyB9CgogIGZ1bmN0aW9uIGZp
        bmFsaXplcigpIHsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3VzcGVuZGVk
        QWN0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIGFjdGlv
        bkluZGV4ID0gc3VzcGVuZGVkQWN0aW9uc1tpXTsKICAgICAgYWN0aW9uc0xp
        c3RbaV1bYWN0aW9uSW5kZXgrMl0gJj0gflNVU1BFTkRFRDsKICAgIH0KICB9
        CgogIHJldHVybiBFbWJlci50cnlGaW5hbGx5KHRyeWFibGUsIGZpbmFsaXpl
        cik7Cn0KCi8qKgogIEBwcml2YXRlCgogIFJldHVybiBhIGxpc3Qgb2YgY3Vy
        cmVudGx5IHdhdGNoZWQgZXZlbnRzCgogIEBtZXRob2Qgd2F0Y2hlZEV2ZW50
        cwogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiovCmZ1bmN0aW9uIHdhdGNo
        ZWRFdmVudHMob2JqKSB7CiAgdmFyIGxpc3RlbmVycyA9IG9ialtNRVRBX0tF
        WV0ubGlzdGVuZXJzLCByZXQgPSBbXTsKCiAgaWYgKGxpc3RlbmVycykgewog
        ICAgZm9yKHZhciBldmVudE5hbWUgaW4gbGlzdGVuZXJzKSB7CiAgICAgIGlm
        IChsaXN0ZW5lcnNbZXZlbnROYW1lXSkgeyByZXQucHVzaChldmVudE5hbWUp
        OyB9CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCi8qKgogIFNlbmQgYW4g
        ZXZlbnQuIFRoZSBleGVjdXRpb24gb2Ygc3VzcGVuZGVkIGxpc3RlbmVycwog
        IGlzIHNraXBwZWQsIGFuZCBvbmNlIGxpc3RlbmVycyBhcmUgcmVtb3ZlZC4g
        QSBsaXN0ZW5lciB3aXRob3V0CiAgYSB0YXJnZXQgaXMgZXhlY3V0ZWQgb24g
        dGhlIHBhc3NlZCBvYmplY3QuIElmIGFuIGFycmF5IG9mIGFjdGlvbnMKICBp
        cyBub3QgcGFzc2VkLCB0aGUgYWN0aW9ucyBzdG9yZWQgb24gdGhlIHBhc3Nl
        ZCBvYmplY3QgYXJlIGludm9rZWQuCiAgCiAgQG1ldGhvZCBzZW5kRXZlbnQK
        ICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBl
        dmVudE5hbWUKICBAcGFyYW0ge0FycmF5fSBwYXJhbXMgT3B0aW9uYWwgcGFy
        YW1ldGVycyBmb3IgZWFjaCBsaXN0ZW5lci4KICBAcGFyYW0ge0FycmF5fSBh
        Y3Rpb25zIE9wdGlvbmFsIGFycmF5IG9mIGFjdGlvbnMgKGxpc3RlbmVycyku
        CiAgQHJldHVybiB0cnVlCiovCmZ1bmN0aW9uIHNlbmRFdmVudChvYmosIGV2
        ZW50TmFtZSwgcGFyYW1zLCBhY3Rpb25zKSB7CiAgLy8gZmlyc3QgZ2l2ZSBv
        YmplY3QgYSBjaGFuY2UgdG8gaGFuZGxlIGl0CiAgaWYgKG9iaiAhPT0gRW1i
        ZXIgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5zZW5kRXZlbnQpIHsK
        ICAgIG9iai5zZW5kRXZlbnQoZXZlbnROYW1lLCBwYXJhbXMpOwogIH0KCiAg
        aWYgKCFhY3Rpb25zKSB7CiAgICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV07
        CiAgICBhY3Rpb25zID0gbWV0YSAmJiBtZXRhLmxpc3RlbmVycyAmJiBtZXRh
        Lmxpc3RlbmVyc1tldmVudE5hbWVdOwogIH0KCiAgaWYgKCFhY3Rpb25zKSB7
        IHJldHVybjsgfQoKICBmb3IgKHZhciBpID0gYWN0aW9ucy5sZW5ndGggLSAz
        OyBpID49IDA7IGkgLT0gMykgeyAvLyBsb29waW5nIGluIHJldmVyc2UgZm9y
        IG9uY2UgbGlzdGVuZXJzCiAgICB2YXIgdGFyZ2V0ID0gYWN0aW9uc1tpXSwg
        bWV0aG9kID0gYWN0aW9uc1tpKzFdLCBmbGFncyA9IGFjdGlvbnNbaSsyXTsK
        ICAgIGlmICghbWV0aG9kKSB7IGNvbnRpbnVlOyB9CiAgICBpZiAoZmxhZ3Mg
        JiBTVVNQRU5ERUQpIHsgY29udGludWU7IH0KICAgIGlmIChmbGFncyAmIE9O
        Q0UpIHsgcmVtb3ZlTGlzdGVuZXIob2JqLCBldmVudE5hbWUsIHRhcmdldCwg
        bWV0aG9kKTsgfQogICAgaWYgKCF0YXJnZXQpIHsgdGFyZ2V0ID0gb2JqOyB9
        CiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBtZXRob2QpIHsgbWV0aG9k
        ID0gdGFyZ2V0W21ldGhvZF07IH0KICAgIGlmIChwYXJhbXMpIHsKICAgICAg
        bWV0aG9kLmFwcGx5KHRhcmdldCwgcGFyYW1zKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIG1ldGhvZC5jYWxsKHRhcmdldCk7CiAgICB9CiAgfQogIHJldHVybiB0
        cnVlOwp9CgovKioKICBAcHJpdmF0ZQogIEBtZXRob2QgaGFzTGlzdGVuZXJz
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmluZ30g
        ZXZlbnROYW1lCiovCmZ1bmN0aW9uIGhhc0xpc3RlbmVycyhvYmosIGV2ZW50
        TmFtZSkgewogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgYWN0
        aW9ucyA9IG1ldGEgJiYgbWV0YS5saXN0ZW5lcnMgJiYgbWV0YS5saXN0ZW5l
        cnNbZXZlbnROYW1lXTsKCiAgcmV0dXJuICEhKGFjdGlvbnMgJiYgYWN0aW9u
        cy5sZW5ndGgpOwp9CgovKioKICBAcHJpdmF0ZQogIEBtZXRob2QgbGlzdGVu
        ZXJzRm9yCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0
        cmluZ30gZXZlbnROYW1lCiovCmZ1bmN0aW9uIGxpc3RlbmVyc0ZvcihvYmos
        IGV2ZW50TmFtZSkgewogIHZhciByZXQgPSBbXTsKICB2YXIgbWV0YSA9IG9i
        altNRVRBX0tFWV0sCiAgICAgIGFjdGlvbnMgPSBtZXRhICYmIG1ldGEubGlz
        dGVuZXJzICYmIG1ldGEubGlzdGVuZXJzW2V2ZW50TmFtZV07CgogIGlmICgh
        YWN0aW9ucykgeyByZXR1cm4gcmV0OyB9CgogIGZvciAodmFyIGkgPSAwLCBs
        ID0gYWN0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDMpIHsKICAgIHZhciB0
        YXJnZXQgPSBhY3Rpb25zW2ldLAogICAgICAgIG1ldGhvZCA9IGFjdGlvbnNb
        aSsxXTsKICAgIHJldC5wdXNoKFt0YXJnZXQsIG1ldGhvZF0pOwogIH0KCiAg
        cmV0dXJuIHJldDsKfQoKLyoqCiAgRGVmaW5lIGEgcHJvcGVydHkgYXMgYSBm
        dW5jdGlvbiB0aGF0IHNob3VsZCBiZSBleGVjdXRlZCB3aGVuCiAgYSBzcGVj
        aWZpZWQgZXZlbnQgb3IgZXZlbnRzIGFyZSB0cmlnZ2VyZWQuCgogICAgICB2
        YXIgSm9iID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICAgICAgbG9nQ29t
        cGxldGVkOiBFbWJlci5vbignY29tcGxldGVkJywgZnVuY3Rpb24oKXsKICAg
        ICAgICAgIGNvbnNvbGUubG9nKCdKb2IgY29tcGxldGVkIScpOwogICAgICAg
        IH0pCiAgICAgIH0pOwogICAgICB2YXIgam9iID0gSm9iLmNyZWF0ZSgpOwog
        ICAgICBFbWJlci5zZW5kRXZlbnQoam9iLCAnY29tcGxldGVkJyk7IC8vIExv
        Z3MgIkpvYiBjb21wbGV0ZWQhIgoKICBAbWV0aG9kIG9uCiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVzKgogIEBwYXJhbSB7RnVu
        Y3Rpb259IGZ1bmMKICBAcmV0dXJuIGZ1bmMKKi8KRW1iZXIub24gPSBmdW5j
        dGlvbigpewogIHZhciBmdW5jID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywg
        LTEpWzBdLAogICAgICBldmVudHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRz
        LCAwLCAtMSk7CiAgZnVuYy5fX2VtYmVyX2xpc3RlbnNfXyA9IGV2ZW50czsK
        ICByZXR1cm4gZnVuYzsKfTsKCkVtYmVyLmFkZExpc3RlbmVyID0gYWRkTGlz
        dGVuZXI7CkVtYmVyLnJlbW92ZUxpc3RlbmVyID0gcmVtb3ZlTGlzdGVuZXI7
        CkVtYmVyLl9zdXNwZW5kTGlzdGVuZXIgPSBzdXNwZW5kTGlzdGVuZXI7CkVt
        YmVyLl9zdXNwZW5kTGlzdGVuZXJzID0gc3VzcGVuZExpc3RlbmVyczsKRW1i
        ZXIuc2VuZEV2ZW50ID0gc2VuZEV2ZW50OwpFbWJlci5oYXNMaXN0ZW5lcnMg
        PSBoYXNMaXN0ZW5lcnM7CkVtYmVyLndhdGNoZWRFdmVudHMgPSB3YXRjaGVk
        RXZlbnRzOwpFbWJlci5saXN0ZW5lcnNGb3IgPSBsaXN0ZW5lcnNGb3I7CkVt
        YmVyLmxpc3RlbmVyc0RpZmYgPSBhY3Rpb25zRGlmZjsKRW1iZXIubGlzdGVu
        ZXJzVW5pb24gPSBhY3Rpb25zVW5pb247Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7CnZhciBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIHNlbmRFdmVu
        dCA9IEVtYmVyLnNlbmRFdmVudDsKCi8qCiAgdGhpcy5vYnNlcnZlclNldCA9
        IHsKICAgIFtzZW5kZXJHdWlkXTogeyAvLyB2YXJpYWJsZSBuYW1lOiBga2V5
        U2V0YAogICAgICBba2V5TmFtZV06IGxpc3RJbmRleAogICAgfQogIH0sCiAg
        dGhpcy5vYnNlcnZlcnMgPSBbCiAgICB7CiAgICAgIHNlbmRlcjogb2JqLAog
        ICAgICBrZXlOYW1lOiBrZXlOYW1lLAogICAgICBldmVudE5hbWU6IGV2ZW50
        TmFtZSwKICAgICAgbGlzdGVuZXJzOiBbCiAgICAgICAgW3RhcmdldCwgbWV0
        aG9kLCBmbGFnc10KICAgICAgXQogICAgfSwKICAgIC4uLgogIF0KKi8KdmFy
        IE9ic2VydmVyU2V0ID0gRW1iZXIuX09ic2VydmVyU2V0ID0gZnVuY3Rpb24o
        KSB7CiAgdGhpcy5jbGVhcigpOwp9OwoKT2JzZXJ2ZXJTZXQucHJvdG90eXBl
        LmFkZCA9IGZ1bmN0aW9uKHNlbmRlciwga2V5TmFtZSwgZXZlbnROYW1lKSB7
        CiAgdmFyIG9ic2VydmVyU2V0ID0gdGhpcy5vYnNlcnZlclNldCwKICAgICAg
        b2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnMsCiAgICAgIHNlbmRlckd1aWQg
        PSBndWlkRm9yKHNlbmRlciksCiAgICAgIGtleVNldCA9IG9ic2VydmVyU2V0
        W3NlbmRlckd1aWRdLAogICAgICBpbmRleDsKCiAgaWYgKCFrZXlTZXQpIHsK
        ICAgIG9ic2VydmVyU2V0W3NlbmRlckd1aWRdID0ga2V5U2V0ID0ge307CiAg
        fQogIGluZGV4ID0ga2V5U2V0W2tleU5hbWVdOwogIGlmIChpbmRleCA9PT0g
        dW5kZWZpbmVkKSB7CiAgICBpbmRleCA9IG9ic2VydmVycy5wdXNoKHsKICAg
        ICAgc2VuZGVyOiBzZW5kZXIsCiAgICAgIGtleU5hbWU6IGtleU5hbWUsCiAg
        ICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLAogICAgICBsaXN0ZW5lcnM6IFtd
        CiAgICB9KSAtIDE7CiAgICBrZXlTZXRba2V5TmFtZV0gPSBpbmRleDsKICB9
        CiAgcmV0dXJuIG9ic2VydmVyc1tpbmRleF0ubGlzdGVuZXJzOwp9OwoKT2Jz
        ZXJ2ZXJTZXQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24oKSB7CiAgdmFy
        IG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLCBpLCBsZW4sIG9ic2VydmVy
        LCBzZW5kZXI7CiAgdGhpcy5jbGVhcigpOwogIGZvciAoaT0wLCBsZW49b2Jz
        ZXJ2ZXJzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICBvYnNlcnZlciA9
        IG9ic2VydmVyc1tpXTsKICAgIHNlbmRlciA9IG9ic2VydmVyLnNlbmRlcjsK
        ICAgIGlmIChzZW5kZXIuaXNEZXN0cm95aW5nIHx8IHNlbmRlci5pc0Rlc3Ry
        b3llZCkgeyBjb250aW51ZTsgfQogICAgc2VuZEV2ZW50KHNlbmRlciwgb2Jz
        ZXJ2ZXIuZXZlbnROYW1lLCBbc2VuZGVyLCBvYnNlcnZlci5rZXlOYW1lXSwg
        b2JzZXJ2ZXIubGlzdGVuZXJzKTsKICB9Cn07CgpPYnNlcnZlclNldC5wcm90
        b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHsKICB0aGlzLm9ic2VydmVyU2V0
        ID0ge307CiAgdGhpcy5vYnNlcnZlcnMgPSBbXTsKfTsKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1ldGEsCiAgICBndWlk
        Rm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIHRyeUZpbmFsbHkgPSBFbWJlci50
        cnlGaW5hbGx5LAogICAgc2VuZEV2ZW50ID0gRW1iZXIuc2VuZEV2ZW50LAog
        ICAgbGlzdGVuZXJzVW5pb24gPSBFbWJlci5saXN0ZW5lcnNVbmlvbiwKICAg
        IGxpc3RlbmVyc0RpZmYgPSBFbWJlci5saXN0ZW5lcnNEaWZmLAogICAgT2Jz
        ZXJ2ZXJTZXQgPSBFbWJlci5fT2JzZXJ2ZXJTZXQsCiAgICBiZWZvcmVPYnNl
        cnZlclNldCA9IG5ldyBPYnNlcnZlclNldCgpLAogICAgb2JzZXJ2ZXJTZXQg
        PSBuZXcgT2JzZXJ2ZXJTZXQoKSwKICAgIGRlZmVycmVkID0gMDsKCi8vIC4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4KLy8gUFJPUEVSVFkgQ0hBTkdFUwovLwoKLyoqCiAgVGhp
        cyBmdW5jdGlvbiBpcyBjYWxsZWQganVzdCBiZWZvcmUgYW4gb2JqZWN0IHBy
        b3BlcnR5IGlzIGFib3V0IHRvIGNoYW5nZS4KICBJdCB3aWxsIG5vdGlmeSBh
        bnkgYmVmb3JlIG9ic2VydmVycyBhbmQgcHJlcGFyZSBjYWNoZXMgYW1vbmcg
        b3RoZXIgdGhpbmdzLgoKICBOb3JtYWxseSB5b3Ugd2lsbCBub3QgbmVlZCB0
        byBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IGJ1dCBpZiBmb3Igc29tZQog
        IHJlYXNvbiB5b3UgY2FuJ3QgZGlyZWN0bHkgd2F0Y2ggYSBwcm9wZXJ0eSB5
        b3UgY2FuIGludm9rZSB0aGlzIG1ldGhvZAogIG1hbnVhbGx5IGFsb25nIHdp
        dGggYEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKClgIHdoaWNoIHlvdSBzaG91
        bGQgY2FsbCBqdXN0CiAgYWZ0ZXIgdGhlIHByb3BlcnR5IHZhbHVlIGNoYW5n
        ZXMuCgogIEBtZXRob2QgcHJvcGVydHlXaWxsQ2hhbmdlCiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB3aXRoIHRoZSBw
        cm9wZXJ0eSB0aGF0IHdpbGwgY2hhbmdlCiAgQHBhcmFtIHtTdHJpbmd9IGtl
        eU5hbWUgVGhlIHByb3BlcnR5IGtleSAob3IgcGF0aCkgdGhhdCB3aWxsIGNo
        YW5nZS4KICBAcmV0dXJuIHt2b2lkfQoqLwpmdW5jdGlvbiBwcm9wZXJ0eVdp
        bGxDaGFuZ2Uob2JqLCBrZXlOYW1lKSB7CiAgdmFyIG0gPSBtZXRhRm9yKG9i
        aiwgZmFsc2UpLAogICAgICB3YXRjaGluZyA9IG0ud2F0Y2hpbmdba2V5TmFt
        ZV0gPiAwIHx8IGtleU5hbWUgPT09ICdsZW5ndGgnLAogICAgICBwcm90byA9
        IG0ucHJvdG8sCiAgICAgIGRlc2MgPSBtLmRlc2NzW2tleU5hbWVdOwoKICBp
        ZiAoIXdhdGNoaW5nKSB7IHJldHVybjsgfQogIGlmIChwcm90byA9PT0gb2Jq
        KSB7IHJldHVybjsgfQogIGlmIChkZXNjICYmIGRlc2Mud2lsbENoYW5nZSkg
        eyBkZXNjLndpbGxDaGFuZ2Uob2JqLCBrZXlOYW1lKTsgfQogIGRlcGVuZGVu
        dEtleXNXaWxsQ2hhbmdlKG9iaiwga2V5TmFtZSwgbSk7CiAgY2hhaW5zV2ls
        bENoYW5nZShvYmosIGtleU5hbWUsIG0pOwogIG5vdGlmeUJlZm9yZU9ic2Vy
        dmVycyhvYmosIGtleU5hbWUpOwp9CkVtYmVyLnByb3BlcnR5V2lsbENoYW5n
        ZSA9IHByb3BlcnR5V2lsbENoYW5nZTsKCi8qKgogIFRoaXMgZnVuY3Rpb24g
        aXMgY2FsbGVkIGp1c3QgYWZ0ZXIgYW4gb2JqZWN0IHByb3BlcnR5IGhhcyBj
        aGFuZ2VkLgogIEl0IHdpbGwgbm90aWZ5IGFueSBvYnNlcnZlcnMgYW5kIGNs
        ZWFyIGNhY2hlcyBhbW9uZyBvdGhlciB0aGluZ3MuCgogIE5vcm1hbGx5IHlv
        dSB3aWxsIG5vdCBuZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkg
        YnV0IGlmIGZvciBzb21lCiAgcmVhc29uIHlvdSBjYW4ndCBkaXJlY3RseSB3
        YXRjaCBhIHByb3BlcnR5IHlvdSBjYW4gaW52b2tlIHRoaXMgbWV0aG9kCiAg
        bWFudWFsbHkgYWxvbmcgd2l0aCBgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdl
        KClgIHdoaWNoIHlvdSBzaG91bGQgY2FsbCBqdXN0CiAgYmVmb3JlIHRoZSBw
        cm9wZXJ0eSB2YWx1ZSBjaGFuZ2VzLgoKICBAbWV0aG9kIHByb3BlcnR5RGlk
        Q2hhbmdlCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhl
        IG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0eSB0aGF0IHdpbGwgY2hhbmdlCiAg
        QHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHByb3BlcnR5IGtleSAob3Ig
        cGF0aCkgdGhhdCB3aWxsIGNoYW5nZS4KICBAcmV0dXJuIHt2b2lkfQoqLwpm
        dW5jdGlvbiBwcm9wZXJ0eURpZENoYW5nZShvYmosIGtleU5hbWUpIHsKICB2
        YXIgbSA9IG1ldGFGb3Iob2JqLCBmYWxzZSksCiAgICAgIHdhdGNoaW5nID0g
        bS53YXRjaGluZ1trZXlOYW1lXSA+IDAgfHwga2V5TmFtZSA9PT0gJ2xlbmd0
        aCcsCiAgICAgIHByb3RvID0gbS5wcm90bywKICAgICAgZGVzYyA9IG0uZGVz
        Y3Nba2V5TmFtZV07CgogIGlmIChwcm90byA9PT0gb2JqKSB7IHJldHVybjsg
        fQoKICAvLyBzaG91bGRuJ3QgdGhpcyBtZWFuIHRoYXQgd2UncmUgd2F0Y2hp
        bmcgdGhpcyBrZXk/CiAgaWYgKGRlc2MgJiYgZGVzYy5kaWRDaGFuZ2UpIHsg
        ZGVzYy5kaWRDaGFuZ2Uob2JqLCBrZXlOYW1lKTsgfQogIGlmICghd2F0Y2hp
        bmcgJiYga2V5TmFtZSAhPT0gJ2xlbmd0aCcpIHsgcmV0dXJuOyB9CgogIGRl
        cGVuZGVudEtleXNEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtKTsKICBjaGFp
        bnNEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtLCBmYWxzZSk7CiAgbm90aWZ5
        T2JzZXJ2ZXJzKG9iaiwga2V5TmFtZSk7Cn0KRW1iZXIucHJvcGVydHlEaWRD
        aGFuZ2UgPSBwcm9wZXJ0eURpZENoYW5nZTsKCnZhciBXSUxMX1NFRU4sIERJ
        RF9TRUVOOwoKLy8gY2FsbGVkIHdoZW5ldmVyIGEgcHJvcGVydHkgaXMgYWJv
        dXQgdG8gY2hhbmdlIHRvIGNsZWFyIHRoZSBjYWNoZSBvZiBhbnkgZGVwZW5k
        ZW50IGtleXMgKGFuZCBub3RpZnkgdGhvc2UgcHJvcGVydGllcyBvZiBjaGFu
        Z2VzLCBldGMuLi4pCmZ1bmN0aW9uIGRlcGVuZGVudEtleXNXaWxsQ2hhbmdl
        KG9iaiwgZGVwS2V5LCBtZXRhKSB7CiAgaWYgKG9iai5pc0Rlc3Ryb3lpbmcp
        IHsgcmV0dXJuOyB9CgogIHZhciBzZWVuID0gV0lMTF9TRUVOLCB0b3AgPSAh
        c2VlbjsKICBpZiAodG9wKSB7IHNlZW4gPSBXSUxMX1NFRU4gPSB7fTsgfQog
        IGl0ZXJEZXBzKHByb3BlcnR5V2lsbENoYW5nZSwgb2JqLCBkZXBLZXksIHNl
        ZW4sIG1ldGEpOwogIGlmICh0b3ApIHsgV0lMTF9TRUVOID0gbnVsbDsgfQp9
        CgovLyBjYWxsZWQgd2hlbmV2ZXIgYSBwcm9wZXJ0eSBoYXMganVzdCBjaGFu
        Z2VkIHRvIHVwZGF0ZSBkZXBlbmRlbnQga2V5cwpmdW5jdGlvbiBkZXBlbmRl
        bnRLZXlzRGlkQ2hhbmdlKG9iaiwgZGVwS2V5LCBtZXRhKSB7CiAgaWYgKG9i
        ai5pc0Rlc3Ryb3lpbmcpIHsgcmV0dXJuOyB9CgogIHZhciBzZWVuID0gRElE
        X1NFRU4sIHRvcCA9ICFzZWVuOwogIGlmICh0b3ApIHsgc2VlbiA9IERJRF9T
        RUVOID0ge307IH0KICBpdGVyRGVwcyhwcm9wZXJ0eURpZENoYW5nZSwgb2Jq
        LCBkZXBLZXksIHNlZW4sIG1ldGEpOwogIGlmICh0b3ApIHsgRElEX1NFRU4g
        PSBudWxsOyB9Cn0KCmZ1bmN0aW9uIGl0ZXJEZXBzKG1ldGhvZCwgb2JqLCBk
        ZXBLZXksIHNlZW4sIG1ldGEpIHsKICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2Jq
        KTsKICBpZiAoIXNlZW5bZ3VpZF0pIHNlZW5bZ3VpZF0gPSB7fTsKICBpZiAo
        c2VlbltndWlkXVtkZXBLZXldKSByZXR1cm47CiAgc2VlbltndWlkXVtkZXBL
        ZXldID0gdHJ1ZTsKCiAgdmFyIGRlcHMgPSBtZXRhLmRlcHM7CiAgZGVwcyA9
        IGRlcHMgJiYgZGVwc1tkZXBLZXldOwogIGlmIChkZXBzKSB7CiAgICBmb3Io
        dmFyIGtleSBpbiBkZXBzKSB7CiAgICAgIHZhciBkZXNjID0gbWV0YS5kZXNj
        c1trZXldOwogICAgICBpZiAoZGVzYyAmJiBkZXNjLl9zdXNwZW5kZWQgPT09
        IG9iaikgY29udGludWU7CiAgICAgIG1ldGhvZChvYmosIGtleSk7CiAgICB9
        CiAgfQp9CgpmdW5jdGlvbiBjaGFpbnNXaWxsQ2hhbmdlKG9iaiwga2V5TmFt
        ZSwgbSkgewogIGlmICghKG0uaGFzT3duUHJvcGVydHkoJ2NoYWluV2F0Y2hl
        cnMnKSAmJgogICAgICAgIG0uY2hhaW5XYXRjaGVyc1trZXlOYW1lXSkpIHsK
        ICAgIHJldHVybjsKICB9CgogIHZhciBub2RlcyA9IG0uY2hhaW5XYXRjaGVy
        c1trZXlOYW1lXSwKICAgICAgZXZlbnRzID0gW10sCiAgICAgIGksIGw7Cgog
        IGZvcihpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewog
        ICAgbm9kZXNbaV0ud2lsbENoYW5nZShldmVudHMpOwogIH0KCiAgZm9yIChp
        ID0gMCwgbCA9IGV2ZW50cy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAg
        IHByb3BlcnR5V2lsbENoYW5nZShldmVudHNbaV0sIGV2ZW50c1tpKzFdKTsK
        ICB9Cn0KCmZ1bmN0aW9uIGNoYWluc0RpZENoYW5nZShvYmosIGtleU5hbWUs
        IG0sIHN1cHByZXNzRXZlbnRzKSB7CiAgaWYgKCEobS5oYXNPd25Qcm9wZXJ0
        eSgnY2hhaW5XYXRjaGVycycpICYmCiAgICAgICAgbS5jaGFpbldhdGNoZXJz
        W2tleU5hbWVdKSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIG5vZGVzID0g
        bS5jaGFpbldhdGNoZXJzW2tleU5hbWVdLAogICAgICBldmVudHMgPSBzdXBw
        cmVzc0V2ZW50cyA/IG51bGwgOiBbXSwKICAgICAgaSwgbDsKCiAgZm9yKGkg
        PSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBub2Rl
        c1tpXS5kaWRDaGFuZ2UoZXZlbnRzKTsKICB9CgogIGlmIChzdXBwcmVzc0V2
        ZW50cykgewogICAgcmV0dXJuOwogIH0KCiAgZm9yIChpID0gMCwgbCA9IGV2
        ZW50cy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgIHByb3BlcnR5RGlk
        Q2hhbmdlKGV2ZW50c1tpXSwgZXZlbnRzW2krMV0pOwogIH0KfQoKRW1iZXIu
        b3ZlcnJpZGVDaGFpbnMgPSBmdW5jdGlvbihvYmosIGtleU5hbWUsIG0pIHsK
        ICBjaGFpbnNEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtLCB0cnVlKTsKfTsK
        Ci8qKgogIEBtZXRob2QgYmVnaW5Qcm9wZXJ0eUNoYW5nZXMKICBAY2hhaW5h
        YmxlCiovCmZ1bmN0aW9uIGJlZ2luUHJvcGVydHlDaGFuZ2VzKCkgewogIGRl
        ZmVycmVkKys7Cn0KCkVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzID0gYmVn
        aW5Qcm9wZXJ0eUNoYW5nZXM7CgovKioKICBAbWV0aG9kIGVuZFByb3BlcnR5
        Q2hhbmdlcwoqLwpmdW5jdGlvbiBlbmRQcm9wZXJ0eUNoYW5nZXMoKSB7CiAg
        ZGVmZXJyZWQtLTsKICBpZiAoZGVmZXJyZWQ8PTApIHsKICAgIGJlZm9yZU9i
        c2VydmVyU2V0LmNsZWFyKCk7CiAgICBvYnNlcnZlclNldC5mbHVzaCgpOwog
        IH0KfQoKRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzID0gZW5kUHJvcGVydHlD
        aGFuZ2VzOwoKLyoqCiAgTWFrZSBhIHNlcmllcyBvZiBwcm9wZXJ0eSBjaGFu
        Z2VzIHRvZ2V0aGVyIGluIGFuCiAgZXhjZXB0aW9uLXNhZmUgd2F5LgoKICBg
        YGBqYXZhc2NyaXB0CiAgRW1iZXIuY2hhbmdlUHJvcGVydGllcyhmdW5jdGlv
        bigpIHsKICAgIG9iajEuc2V0KCdmb28nLCBtYXlCbG93VXBXaGVuU2V0KTsK
        ICAgIG9iajIuc2V0KCdiYXInLCBiYXopOwogIH0pOwogIGBgYAoKICBAbWV0
        aG9kIGNoYW5nZVByb3BlcnRpZXMKICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxs
        YmFjawogIEBwYXJhbSBbYmluZGluZ10KKi8KRW1iZXIuY2hhbmdlUHJvcGVy
        dGllcyA9IGZ1bmN0aW9uKGNiLCBiaW5kaW5nKSB7CiAgYmVnaW5Qcm9wZXJ0
        eUNoYW5nZXMoKTsKICB0cnlGaW5hbGx5KGNiLCBlbmRQcm9wZXJ0eUNoYW5n
        ZXMsIGJpbmRpbmcpOwp9OwoKZnVuY3Rpb24gbm90aWZ5QmVmb3JlT2JzZXJ2
        ZXJzKG9iaiwga2V5TmFtZSkgewogIGlmIChvYmouaXNEZXN0cm95aW5nKSB7
        IHJldHVybjsgfQoKICB2YXIgZXZlbnROYW1lID0ga2V5TmFtZSArICc6YmVm
        b3JlJywgbGlzdGVuZXJzLCBkaWZmOwogIGlmIChkZWZlcnJlZCkgewogICAg
        bGlzdGVuZXJzID0gYmVmb3JlT2JzZXJ2ZXJTZXQuYWRkKG9iaiwga2V5TmFt
        ZSwgZXZlbnROYW1lKTsKICAgIGRpZmYgPSBsaXN0ZW5lcnNEaWZmKG9iaiwg
        ZXZlbnROYW1lLCBsaXN0ZW5lcnMpOwogICAgc2VuZEV2ZW50KG9iaiwgZXZl
        bnROYW1lLCBbb2JqLCBrZXlOYW1lXSwgZGlmZik7CiAgfSBlbHNlIHsKICAg
        IHNlbmRFdmVudChvYmosIGV2ZW50TmFtZSwgW29iaiwga2V5TmFtZV0pOwog
        IH0KfQoKZnVuY3Rpb24gbm90aWZ5T2JzZXJ2ZXJzKG9iaiwga2V5TmFtZSkg
        ewogIGlmIChvYmouaXNEZXN0cm95aW5nKSB7IHJldHVybjsgfQoKICB2YXIg
        ZXZlbnROYW1lID0ga2V5TmFtZSArICc6Y2hhbmdlJywgbGlzdGVuZXJzOwog
        IGlmIChkZWZlcnJlZCkgewogICAgbGlzdGVuZXJzID0gb2JzZXJ2ZXJTZXQu
        YWRkKG9iaiwga2V5TmFtZSwgZXZlbnROYW1lKTsKICAgIGxpc3RlbmVyc1Vu
        aW9uKG9iaiwgZXZlbnROYW1lLCBsaXN0ZW5lcnMpOwogIH0gZWxzZSB7CiAg
        ICBzZW5kRXZlbnQob2JqLCBldmVudE5hbWUsIFtvYmosIGtleU5hbWVdKTsK
        ICB9Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLy8gTUVUQV9LRVkKLy8g
        X2dldFBhdGgKLy8gcHJvcGVydHlXaWxsQ2hhbmdlLCBwcm9wZXJ0eURpZENo
        YW5nZQoKdmFyIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVksCiAgICBNQU5E
        QVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIsCiAg
        ICBJU19HTE9CQUwgPSAvXihbQS1aJF18KFswLTldW0EtWiRdKSkvLAogICAg
        Z2V0UGF0aCA9IEVtYmVyLl9nZXRQYXRoOwoKLyoqCiAgU2V0cyB0aGUgdmFs
        dWUgb2YgYSBwcm9wZXJ0eSBvbiBhbiBvYmplY3QsIHJlc3BlY3RpbmcgY29t
        cHV0ZWQgcHJvcGVydGllcwogIGFuZCBub3RpZnlpbmcgb2JzZXJ2ZXJzIGFu
        ZCBvdGhlciBsaXN0ZW5lcnMgb2YgdGhlIGNoYW5nZS4gSWYgdGhlCiAgcHJv
        cGVydHkgaXMgbm90IGRlZmluZWQgYnV0IHRoZSBvYmplY3QgaW1wbGVtZW50
        cyB0aGUgYHNldFVua25vd25Qcm9wZXJ0eWAKICBtZXRob2QgdGhlbiB0aGF0
        IHdpbGwgYmUgaW52b2tlZCBhcyB3ZWxsLgoKICBJZiB5b3UgcGxhbiB0byBy
        dW4gb24gSUU4IGFuZCBvbGRlciBicm93c2VycyB0aGVuIHlvdSBzaG91bGQg
        dXNlIHRoaXMKICBtZXRob2QgYW55dGltZSB5b3Ugd2FudCB0byBzZXQgYSBw
        cm9wZXJ0eSBvbiBhbiBvYmplY3QgdGhhdCB5b3UgZG9uJ3QKICBrbm93IGZv
        ciBzdXJlIGlzIHByaXZhdGUuIChQcm9wZXJ0aWVzIGJlZ2lubmluZyB3aXRo
        IGFuIHVuZGVyc2NvcmUgJ18nCiAgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4p
        CgogIE9uIGFsbCBuZXdlciBicm93c2VycywgeW91IG9ubHkgbmVlZCB0byB1
        c2UgdGhpcyBtZXRob2QgdG8gc2V0CiAgcHJvcGVydGllcyBpZiB0aGUgcHJv
        cGVydHkgbWlnaHQgbm90IGJlIGRlZmluZWQgb24gdGhlIG9iamVjdCBhbmQg
        eW91IHdhbnQKICB0byByZXNwZWN0IHRoZSBgc2V0VW5rbm93blByb3BlcnR5
        YCBoYW5kbGVyLiBPdGhlcndpc2UgeW91IGNhbiBpZ25vcmUgdGhpcwogIG1l
        dGhvZC4KCiAgQG1ldGhvZCBzZXQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtP
        YmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIG1vZGlmeS4KICBAcGFyYW0ge1N0
        cmluZ30ga2V5TmFtZSBUaGUgcHJvcGVydHkga2V5IHRvIHNldAogIEBwYXJh
        bSB7T2JqZWN0fSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0CiAgQHJldHVybiB7
        T2JqZWN0fSB0aGUgcGFzc2VkIHZhbHVlLgoqLwp2YXIgc2V0ID0gZnVuY3Rp
        b24gc2V0KG9iaiwga2V5TmFtZSwgdmFsdWUsIHRvbGVyYW50KSB7CiAgaWYg
        KHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7CiAgICBFbWJlci5hc3NlcnQo
        IlBhdGggJyIgKyBvYmogKyAiJyBtdXN0IGJlIGdsb2JhbCBpZiBubyBvYmog
        aXMgZ2l2ZW4uIiwgSVNfR0xPQkFMLnRlc3Qob2JqKSk7CiAgICB2YWx1ZSA9
        IGtleU5hbWU7CiAgICBrZXlOYW1lID0gb2JqOwogICAgb2JqID0gbnVsbDsK
        ICB9CgogIEVtYmVyLmFzc2VydCgiQ2Fubm90IGNhbGwgc2V0IHdpdGggIisg
        a2V5TmFtZSArIiBrZXkuIiwgISFrZXlOYW1lKTsKCiAgaWYgKCFvYmogfHwg
        a2V5TmFtZS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICByZXR1cm4gc2V0
        UGF0aChvYmosIGtleU5hbWUsIHZhbHVlLCB0b2xlcmFudCk7CiAgfQoKICBF
        bWJlci5hc3NlcnQoIllvdSBuZWVkIHRvIHByb3ZpZGUgYW4gb2JqZWN0IGFu
        ZCBrZXkgdG8gYHNldGAuIiwgISFvYmogJiYga2V5TmFtZSAhPT0gdW5kZWZp
        bmVkKTsKICBFbWJlci5hc3NlcnQoJ2NhbGxpbmcgc2V0IG9uIGRlc3Ryb3ll
        ZCBvYmplY3QnLCAhb2JqLmlzRGVzdHJveWVkKTsKCiAgdmFyIG1ldGEgPSBv
        YmpbTUVUQV9LRVldLCBkZXNjID0gbWV0YSAmJiBtZXRhLmRlc2NzW2tleU5h
        bWVdLAogICAgICBpc1Vua25vd24sIGN1cnJlbnRWYWx1ZTsKICBpZiAoZGVz
        YykgewogICAgZGVzYy5zZXQob2JqLCBrZXlOYW1lLCB2YWx1ZSk7CiAgfSBl
        bHNlIHsKICAgIGlzVW5rbm93biA9ICdvYmplY3QnID09PSB0eXBlb2Ygb2Jq
        ICYmICEoa2V5TmFtZSBpbiBvYmopOwoKICAgIC8vIHNldFVua25vd25Qcm9w
        ZXJ0eSBpcyBjYWxsZWQgaWYgYG9iamAgaXMgYW4gb2JqZWN0LAogICAgLy8g
        dGhlIHByb3BlcnR5IGRvZXMgbm90IGFscmVhZHkgZXhpc3QsIGFuZCB0aGUK
        ICAgIC8vIGBzZXRVbmtub3duUHJvcGVydHlgIG1ldGhvZCBleGlzdHMgb24g
        dGhlIG9iamVjdAogICAgaWYgKGlzVW5rbm93biAmJiAnZnVuY3Rpb24nID09
        PSB0eXBlb2Ygb2JqLnNldFVua25vd25Qcm9wZXJ0eSkgewogICAgICBvYmou
        c2V0VW5rbm93blByb3BlcnR5KGtleU5hbWUsIHZhbHVlKTsKICAgIH0gZWxz
        ZSBpZiAobWV0YSAmJiBtZXRhLndhdGNoaW5nW2tleU5hbWVdID4gMCkgewog
        ICAgICBpZiAoTUFOREFUT1JZX1NFVFRFUikgewogICAgICAgIGN1cnJlbnRW
        YWx1ZSA9IG1ldGEudmFsdWVzW2tleU5hbWVdOwogICAgICB9IGVsc2Ugewog
        ICAgICAgIGN1cnJlbnRWYWx1ZSA9IG9ialtrZXlOYW1lXTsKICAgICAgfQog
        ICAgICAvLyBvbmx5IHRyaWdnZXIgYSBjaGFuZ2UgaWYgdGhlIHZhbHVlIGhh
        cyBjaGFuZ2VkCiAgICAgIGlmICh2YWx1ZSAhPT0gY3VycmVudFZhbHVlKSB7
        CiAgICAgICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKG9iaiwga2V5TmFt
        ZSk7CiAgICAgICAgaWYgKE1BTkRBVE9SWV9TRVRURVIpIHsKICAgICAgICAg
        IGlmIChjdXJyZW50VmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleU5hbWUg
        aW4gb2JqKSkgewogICAgICAgICAgICBFbWJlci5kZWZpbmVQcm9wZXJ0eShv
        YmosIGtleU5hbWUsIG51bGwsIHZhbHVlKTsgLy8gc2V0dXAgbWFuZGF0b3J5
        IHNldHRlcgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWV0YS52
        YWx1ZXNba2V5TmFtZV0gPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9
        IGVsc2UgewogICAgICAgICAgb2JqW2tleU5hbWVdID0gdmFsdWU7CiAgICAg
        ICAgfQogICAgICAgIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKG9iaiwga2V5
        TmFtZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIG9ialtrZXlOYW1l
        XSA9IHZhbHVlOwogICAgfQogIH0KICByZXR1cm4gdmFsdWU7Cn07CgovLyBD
        dXJyZW50bHkgdXNlZCBvbmx5IGJ5IEVtYmVyIERhdGEgdGVzdHMKaWYgKEVt
        YmVyLmNvbmZpZy5vdmVycmlkZUFjY2Vzc29ycykgewogIEVtYmVyLnNldCA9
        IHNldDsKICBFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMoKTsKICBz
        ZXQgPSBFbWJlci5zZXQ7Cn0KCmZ1bmN0aW9uIHNldFBhdGgocm9vdCwgcGF0
        aCwgdmFsdWUsIHRvbGVyYW50KSB7CiAgdmFyIGtleU5hbWU7CgogIC8vIGdl
        dCB0aGUgbGFzdCBwYXJ0IG9mIHRoZSBwYXRoCiAga2V5TmFtZSA9IHBhdGgu
        c2xpY2UocGF0aC5sYXN0SW5kZXhPZignLicpICsgMSk7CgogIC8vIGdldCB0
        aGUgZmlyc3QgcGFydCBvZiB0aGUgcGFydAogIHBhdGggICAgPSBwYXRoLnNs
        aWNlKDAsIHBhdGgubGVuZ3RoLShrZXlOYW1lLmxlbmd0aCsxKSk7CgogIC8v
        IHVubGVzcyB0aGUgcGF0aCBpcyB0aGlzLCBsb29rIHVwIHRoZSBmaXJzdCBw
        YXJ0IHRvCiAgLy8gZ2V0IHRoZSByb290CiAgaWYgKHBhdGggIT09ICd0aGlz
        JykgewogICAgcm9vdCA9IGdldFBhdGgocm9vdCwgcGF0aCk7CiAgfQoKICBp
        ZiAoIWtleU5hbWUgfHwga2V5TmFtZS5sZW5ndGggPT09IDApIHsKICAgIHRo
        cm93IG5ldyBFbWJlci5FcnJvcignWW91IHBhc3NlZCBhbiBlbXB0eSBwYXRo
        Jyk7CiAgfQoKICBpZiAoIXJvb3QpIHsKICAgIGlmICh0b2xlcmFudCkgeyBy
        ZXR1cm47IH0KICAgIGVsc2UgeyB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ09i
        amVjdCBpbiBwYXRoICcrcGF0aCsnIGNvdWxkIG5vdCBiZSBmb3VuZCBvciB3
        YXMgZGVzdHJveWVkLicpOyB9CiAgfQoKICByZXR1cm4gc2V0KHJvb3QsIGtl
        eU5hbWUsIHZhbHVlKTsKfQoKRW1iZXIuc2V0ID0gc2V0OwoKLyoqCiAgRXJy
        b3ItdG9sZXJhbnQgZm9ybSBvZiBgRW1iZXIuc2V0YC4gV2lsbCBub3QgYmxv
        dyB1cCBpZiBhbnkgcGFydCBvZiB0aGUKICBjaGFpbiBpcyBgdW5kZWZpbmVk
        YCwgYG51bGxgLCBvciBkZXN0cm95ZWQuCgogIFRoaXMgaXMgcHJpbWFyaWx5
        IHVzZWQgd2hlbiBzeW5jaW5nIGJpbmRpbmdzLCB3aGljaCBtYXkgdHJ5IHRv
        IHVwZGF0ZSBhZnRlcgogIGFuIG9iamVjdCBoYXMgYmVlbiBkZXN0cm95ZWQu
        CgogIEBtZXRob2QgdHJ5U2V0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2Jq
        ZWN0fSBvYmogVGhlIG9iamVjdCB0byBtb2RpZnkuCiAgQHBhcmFtIHtTdHJp
        bmd9IHBhdGggVGhlIHByb3BlcnR5IHBhdGggdG8gc2V0CiAgQHBhcmFtIHtP
        YmplY3R9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQKKi8KRW1iZXIudHJ5U2V0
        ID0gZnVuY3Rpb24ocm9vdCwgcGF0aCwgdmFsdWUpIHsKICByZXR1cm4gc2V0
        KHJvb3QsIHBhdGgsIHZhbHVlLCB0cnVlKTsKfTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8qCiAgSmF2
        YVNjcmlwdCAoYmVmb3JlIEVTNikgZG9lcyBub3QgaGF2ZSBhIE1hcCBpbXBs
        ZW1lbnRhdGlvbi4gT2JqZWN0cywKICB3aGljaCBhcmUgb2Z0ZW4gdXNlZCBh
        cyBkaWN0aW9uYXJpZXMsIG1heSBvbmx5IGhhdmUgU3RyaW5ncyBhcyBrZXlz
        LgoKICBCZWNhdXNlIEVtYmVyIGhhcyBhIHdheSB0byBnZXQgYSB1bmlxdWUg
        aWRlbnRpZmllciBmb3IgZXZlcnkgb2JqZWN0CiAgdmlhIGBFbWJlci5ndWlk
        Rm9yYCwgd2UgY2FuIGltcGxlbWVudCBhIHBlcmZvcm1hbnQgTWFwIHdpdGgg
        YXJiaXRyYXJ5CiAga2V5cy4gQmVjYXVzZSBpdCBpcyBjb21tb25seSB1c2Vk
        IGluIGxvdy1sZXZlbCBib29ra2VlcGluZywgTWFwIGlzCiAgaW1wbGVtZW50
        ZWQgYXMgYSBwdXJlIEphdmFTY3JpcHQgb2JqZWN0IGZvciBwZXJmb3JtYW5j
        ZS4KCiAgVGhpcyBpbXBsZW1lbnRhdGlvbiBmb2xsb3dzIHRoZSBjdXJyZW50
        IGl0ZXJhdGlvbiBvZiB0aGUgRVM2IHByb3Bvc2FsIGZvcgogIG1hcHMgKGh0
        dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6
        c2ltcGxlX21hcHNfYW5kX3NldHMpLAogIHdpdGggdHdvIGV4Y2VwdGlvbnMu
        IEZpcnN0LCBiZWNhdXNlIHdlIG5lZWQgb3VyIGltcGxlbWVudGF0aW9uIHRv
        IGJlIHBsZWFzYW50CiAgb24gb2xkZXIgYnJvd3NlcnMsIHdlIGRvIG5vdCB1
        c2UgdGhlIGBkZWxldGVgIG5hbWUgKHVzaW5nIGByZW1vdmVgIGluc3RlYWQp
        LgogIFNlY29uZCwgYXMgd2UgZG8gbm90IGhhdmUgdGhlIGx1eHVyeSBvZiBp
        bi1WTSBpdGVyYXRpb24sIHdlIGltcGxlbWVudCBhCiAgZm9yRWFjaCBtZXRo
        b2QgZm9yIGl0ZXJhdGlvbi4KCiAgTWFwIGlzIG1vY2tlZCBvdXQgdG8gbG9v
        ayBsaWtlIGFuIEVtYmVyIG9iamVjdCwgc28geW91IGNhbiBkbwogIGBFbWJl
        ci5NYXAuY3JlYXRlKClgIGZvciBzeW1tZXRyeSB3aXRoIG90aGVyIEVtYmVy
        IGNsYXNzZXMuCiovCnZhciBzZXQgPSBFbWJlci5zZXQsCiAgICBndWlkRm9y
        ID0gRW1iZXIuZ3VpZEZvciwKICAgIGluZGV4T2YgPSBFbWJlci5BcnJheVBv
        bHlmaWxscy5pbmRleE9mOwoKdmFyIGNvcHkgPSBmdW5jdGlvbihvYmopIHsK
        ICB2YXIgb3V0cHV0ID0ge307CgogIGZvciAodmFyIHByb3AgaW4gb2JqKSB7
        CiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7IG91dHB1dFtw
        cm9wXSA9IG9ialtwcm9wXTsgfQogIH0KCiAgcmV0dXJuIG91dHB1dDsKfTsK
        CnZhciBjb3B5TWFwID0gZnVuY3Rpb24ob3JpZ2luYWwsIG5ld09iamVjdCkg
        ewogIHZhciBrZXlzID0gb3JpZ2luYWwua2V5cy5jb3B5KCksCiAgICAgIHZh
        bHVlcyA9IGNvcHkob3JpZ2luYWwudmFsdWVzKTsKCiAgbmV3T2JqZWN0Lmtl
        eXMgPSBrZXlzOwogIG5ld09iamVjdC52YWx1ZXMgPSB2YWx1ZXM7CiAgbmV3
        T2JqZWN0Lmxlbmd0aCA9IG9yaWdpbmFsLmxlbmd0aDsKCiAgcmV0dXJuIG5l
        d09iamVjdDsKfTsKCi8qKgogIFRoaXMgY2xhc3MgaXMgdXNlZCBpbnRlcm5h
        bGx5IGJ5IEVtYmVyIGFuZCBFbWJlciBEYXRhLgogIFBsZWFzZSBkbyBub3Qg
        dXNlIGl0IGF0IHRoaXMgdGltZS4gV2UgcGxhbiB0byBjbGVhbiBpdCB1cAog
        IGFuZCBhZGQgbWFueSB0ZXN0cyBzb29uLgoKICBAY2xhc3MgT3JkZXJlZFNl
        dAogIEBuYW1lc3BhY2UgRW1iZXIKICBAY29uc3RydWN0b3IKICBAcHJpdmF0
        ZQoqLwp2YXIgT3JkZXJlZFNldCA9IEVtYmVyLk9yZGVyZWRTZXQgPSBmdW5j
        dGlvbigpIHsKICB0aGlzLmNsZWFyKCk7Cn07CgovKioKICBAbWV0aG9kIGNy
        ZWF0ZQogIEBzdGF0aWMKICBAcmV0dXJuIHtFbWJlci5PcmRlcmVkU2V0fQoq
        LwpPcmRlcmVkU2V0LmNyZWF0ZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBu
        ZXcgT3JkZXJlZFNldCgpOwp9OwoKCk9yZGVyZWRTZXQucHJvdG90eXBlID0g
        ewogIC8qKgogICAgQG1ldGhvZCBjbGVhcgogICovCiAgY2xlYXI6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5wcmVzZW5jZVNldCA9IHt9OwogICAgdGhpcy5s
        aXN0ID0gW107CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGFkZAogICAgQHBh
        cmFtIG9iagogICovCiAgYWRkOiBmdW5jdGlvbihvYmopIHsKICAgIHZhciBn
        dWlkID0gZ3VpZEZvcihvYmopLAogICAgICAgIHByZXNlbmNlU2V0ID0gdGhp
        cy5wcmVzZW5jZVNldCwKICAgICAgICBsaXN0ID0gdGhpcy5saXN0OwoKICAg
        IGlmIChndWlkIGluIHByZXNlbmNlU2V0KSB7IHJldHVybjsgfQoKICAgIHBy
        ZXNlbmNlU2V0W2d1aWRdID0gdHJ1ZTsKICAgIGxpc3QucHVzaChvYmopOwog
        IH0sCgogIC8qKgogICAgQG1ldGhvZCByZW1vdmUKICAgIEBwYXJhbSBvYmoK
        ICAqLwogIHJlbW92ZTogZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgZ3VpZCA9
        IGd1aWRGb3Iob2JqKSwKICAgICAgICBwcmVzZW5jZVNldCA9IHRoaXMucHJl
        c2VuY2VTZXQsCiAgICAgICAgbGlzdCA9IHRoaXMubGlzdDsKCiAgICBkZWxl
        dGUgcHJlc2VuY2VTZXRbZ3VpZF07CgogICAgdmFyIGluZGV4ID0gaW5kZXhP
        Zi5jYWxsKGxpc3QsIG9iaik7CiAgICBpZiAoaW5kZXggPiAtMSkgewogICAg
        ICBsaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfSwKCiAgLyoqCiAg
        ICBAbWV0aG9kIGlzRW1wdHkKICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgKi8K
        ICBpc0VtcHR5OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxpc3Qu
        bGVuZ3RoID09PSAwOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBoYXMKICAg
        IEBwYXJhbSBvYmoKICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgKi8KICBoYXM6
        IGZ1bmN0aW9uKG9iaikgewogICAgdmFyIGd1aWQgPSBndWlkRm9yKG9iaiks
        CiAgICAgICAgcHJlc2VuY2VTZXQgPSB0aGlzLnByZXNlbmNlU2V0OwoKICAg
        IHJldHVybiBndWlkIGluIHByZXNlbmNlU2V0OwogIH0sCgogIC8qKgogICAg
        QG1ldGhvZCBmb3JFYWNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogICAg
        QHBhcmFtIHNlbGYKICAqLwogIGZvckVhY2g6IGZ1bmN0aW9uKGZuLCBzZWxm
        KSB7CiAgICAvLyBhbGxvdyBtdXRhdGlvbiBkdXJpbmcgaXRlcmF0aW9uCiAg
        ICB2YXIgbGlzdCA9IHRoaXMudG9BcnJheSgpOwoKICAgIGZvciAodmFyIGkg
        PSAwLCBqID0gbGlzdC5sZW5ndGg7IGkgPCBqOyBpKyspIHsKICAgICAgZm4u
        Y2FsbChzZWxmLCBsaXN0W2ldKTsKICAgIH0KICB9LAoKICAvKioKICAgIEBt
        ZXRob2QgdG9BcnJheQogICAgQHJldHVybiB7QXJyYXl9CiAgKi8KICB0b0Fy
        cmF5OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxpc3Quc2xpY2Uo
        KTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgY29weQogICAgQHJldHVybiB7
        RW1iZXIuT3JkZXJlZFNldH0KICAqLwogIGNvcHk6IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIHNldCA9IG5ldyBPcmRlcmVkU2V0KCk7CgogICAgc2V0LnByZXNl
        bmNlU2V0ID0gY29weSh0aGlzLnByZXNlbmNlU2V0KTsKICAgIHNldC5saXN0
        ID0gdGhpcy50b0FycmF5KCk7CgogICAgcmV0dXJuIHNldDsKICB9Cn07Cgov
        KioKICBBIE1hcCBzdG9yZXMgdmFsdWVzIGluZGV4ZWQgYnkga2V5cy4gVW5s
        aWtlIEphdmFTY3JpcHQncwogIGRlZmF1bHQgT2JqZWN0cywgdGhlIGtleXMg
        b2YgYSBNYXAgY2FuIGJlIGFueSBKYXZhU2NyaXB0CiAgb2JqZWN0LgoKICBJ
        bnRlcm5hbGx5LCBhIE1hcCBoYXMgdHdvIGRhdGEgc3RydWN0dXJlczoKCiAg
        MS4gYGtleXNgOiBhbiBPcmRlcmVkU2V0IG9mIGFsbCBvZiB0aGUgZXhpc3Rp
        bmcga2V5cwogIDIuIGB2YWx1ZXNgOiBhIEphdmFTY3JpcHQgT2JqZWN0IGlu
        ZGV4ZWQgYnkgdGhlIGBFbWJlci5ndWlkRm9yKGtleSlgCgogIFdoZW4gYSBr
        ZXkvdmFsdWUgcGFpciBpcyBhZGRlZCBmb3IgdGhlIGZpcnN0IHRpbWUsIHdl
        CiAgYWRkIHRoZSBrZXkgdG8gdGhlIGBrZXlzYCBPcmRlcmVkU2V0LCBhbmQg
        Y3JlYXRlIG9yCiAgcmVwbGFjZSBhbiBlbnRyeSBpbiBgdmFsdWVzYC4gV2hl
        biBhbiBlbnRyeSBpcyBkZWxldGVkLAogIHdlIGRlbGV0ZSBpdHMgZW50cnkg
        aW4gYGtleXNgIGFuZCBgdmFsdWVzYC4KCiAgQGNsYXNzIE1hcAogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3RvcgoqLwp2YXIg
        TWFwID0gRW1iZXIuTWFwID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5rZXlzID0g
        RW1iZXIuT3JkZXJlZFNldC5jcmVhdGUoKTsKICB0aGlzLnZhbHVlcyA9IHt9
        Owp9OwoKLyoqCiAgQG1ldGhvZCBjcmVhdGUKICBAc3RhdGljCiovCk1hcC5j
        cmVhdGUgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1hcCgpOwp9OwoK
        TWFwLnByb3RvdHlwZSA9IHsKICAvKioKICAgIFRoaXMgcHJvcGVydHkgd2ls
        bCBjaGFuZ2UgYXMgdGhlIG51bWJlciBvZiBvYmplY3RzIGluIHRoZSBtYXAg
        Y2hhbmdlcy4KICAgCiAgICBAcHJvcGVydHkgbGVuZ3RoCiAgICBAdHlwZSBu
        dW1iZXIKICAgIEBkZWZhdWx0IDAKICAqLwogIGxlbmd0aDogMCwKICAgIAog
        ICAgCiAgLyoqCiAgICBSZXRyaWV2ZSB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3
        aXRoIGEgZ2l2ZW4ga2V5LgoKICAgIEBtZXRob2QgZ2V0CiAgICBAcGFyYW0g
        eyp9IGtleQogICAgQHJldHVybiB7Kn0gdGhlIHZhbHVlIGFzc29jaWF0ZWQg
        d2l0aCB0aGUga2V5LCBvciBgdW5kZWZpbmVkYAogICovCiAgZ2V0OiBmdW5j
        dGlvbihrZXkpIHsKICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcywKICAg
        ICAgICBndWlkID0gZ3VpZEZvcihrZXkpOwoKICAgIHJldHVybiB2YWx1ZXNb
        Z3VpZF07CiAgfSwKCiAgLyoqCiAgICBBZGRzIGEgdmFsdWUgdG8gdGhlIG1h
        cC4gSWYgYSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGtleSBoYXMgYWxyZWFkeSBi
        ZWVuCiAgICBwcm92aWRlZCwgdGhlIG5ldyB2YWx1ZSB3aWxsIHJlcGxhY2Ug
        dGhlIG9sZCB2YWx1ZS4KCiAgICBAbWV0aG9kIHNldAogICAgQHBhcmFtIHsq
        fSBrZXkKICAgIEBwYXJhbSB7Kn0gdmFsdWUKICAqLwogIHNldDogZnVuY3Rp
        b24oa2V5LCB2YWx1ZSkgewogICAgdmFyIGtleXMgPSB0aGlzLmtleXMsCiAg
        ICAgICAgdmFsdWVzID0gdGhpcy52YWx1ZXMsCiAgICAgICAgZ3VpZCA9IGd1
        aWRGb3Ioa2V5KTsKCiAgICBrZXlzLmFkZChrZXkpOwogICAgdmFsdWVzW2d1
        aWRdID0gdmFsdWU7CiAgICBzZXQodGhpcywgJ2xlbmd0aCcsIGtleXMubGlz
        dC5sZW5ndGgpOwogIH0sCgogIC8qKgogICAgUmVtb3ZlcyBhIHZhbHVlIGZy
        b20gdGhlIG1hcCBmb3IgYW4gYXNzb2NpYXRlZCBrZXkuCgogICAgQG1ldGhv
        ZCByZW1vdmUKICAgIEBwYXJhbSB7Kn0ga2V5CiAgICBAcmV0dXJuIHtCb29s
        ZWFufSB0cnVlIGlmIGFuIGl0ZW0gd2FzIHJlbW92ZWQsIGZhbHNlIG90aGVy
        d2lzZQogICovCiAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHsKICAgIC8vIGRv
        bid0IHVzZSBFUzYgImRlbGV0ZSIgYmVjYXVzZSBpdCB3aWxsIGJlIGFubm95
        aW5nCiAgICAvLyB0byB1c2UgaW4gYnJvd3NlcnMgdGhhdCBhcmUgbm90IEVT
        NiBmcmllbmRseTsKICAgIHZhciBrZXlzID0gdGhpcy5rZXlzLAogICAgICAg
        IHZhbHVlcyA9IHRoaXMudmFsdWVzLAogICAgICAgIGd1aWQgPSBndWlkRm9y
        KGtleSk7CgogICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShndWlkKSkg
        ewogICAgICBrZXlzLnJlbW92ZShrZXkpOwogICAgICBkZWxldGUgdmFsdWVz
        W2d1aWRdOwogICAgICBzZXQodGhpcywgJ2xlbmd0aCcsIGtleXMubGlzdC5s
        ZW5ndGgpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAg
        IHJldHVybiBmYWxzZTsKICAgIH0KICB9LAoKICAvKioKICAgIENoZWNrIHdo
        ZXRoZXIgYSBrZXkgaXMgcHJlc2VudC4KCiAgICBAbWV0aG9kIGhhcwogICAg
        QHBhcmFtIHsqfSBrZXkKICAgIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYg
        dGhlIGl0ZW0gd2FzIHByZXNlbnQsIGZhbHNlIG90aGVyd2lzZQogICovCiAg
        aGFzOiBmdW5jdGlvbihrZXkpIHsKICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZh
        bHVlcywKICAgICAgICBndWlkID0gZ3VpZEZvcihrZXkpOwoKICAgIHJldHVy
        biB2YWx1ZXMuaGFzT3duUHJvcGVydHkoZ3VpZCk7CiAgfSwKCiAgLyoqCiAg
        ICBJdGVyYXRlIG92ZXIgYWxsIHRoZSBrZXlzIGFuZCB2YWx1ZXMuIENhbGxz
        IHRoZSBmdW5jdGlvbiBvbmNlCiAgICBmb3IgZWFjaCBrZXksIHBhc3Npbmcg
        aW4gdGhlIGtleSBhbmQgdmFsdWUsIGluIHRoYXQgb3JkZXIuCgogICAgVGhl
        IGtleXMgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaXRlcmF0ZWQgb3ZlciBpbiBp
        bnNlcnRpb24gb3JkZXIuCgogICAgQG1ldGhvZCBmb3JFYWNoCiAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgQHBhcmFtIHsqfSBzZWxmIGlm
        IHBhc3NlZCwgdGhlIGB0aGlzYCB2YWx1ZSBpbnNpZGUgdGhlCiAgICAgIGNh
        bGxiYWNrLiBCeSBkZWZhdWx0LCBgdGhpc2AgaXMgdGhlIG1hcC4KICAqLwog
        IGZvckVhY2g6IGZ1bmN0aW9uKGNhbGxiYWNrLCBzZWxmKSB7CiAgICB2YXIg
        a2V5cyA9IHRoaXMua2V5cywKICAgICAgICB2YWx1ZXMgPSB0aGlzLnZhbHVl
        czsKCiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZh
        ciBndWlkID0gZ3VpZEZvcihrZXkpOwogICAgICBjYWxsYmFjay5jYWxsKHNl
        bGYsIGtleSwgdmFsdWVzW2d1aWRdKTsKICAgIH0pOwogIH0sCgogIC8qKgog
        ICAgQG1ldGhvZCBjb3B5CiAgICBAcmV0dXJuIHtFbWJlci5NYXB9CiAgKi8K
        ICBjb3B5OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBjb3B5TWFwKHRoaXMs
        IG5ldyBNYXAoKSk7CiAgfQp9OwoKLyoqCiAgQGNsYXNzIE1hcFdpdGhEZWZh
        dWx0CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk1hcAog
        IEBwcml2YXRlCiAgQGNvbnN0cnVjdG9yCiAgQHBhcmFtIFtvcHRpb25zXQog
        ICAgQHBhcmFtIHsqfSBbb3B0aW9ucy5kZWZhdWx0VmFsdWVdCiovCnZhciBN
        YXBXaXRoRGVmYXVsdCA9IEVtYmVyLk1hcFdpdGhEZWZhdWx0ID0gZnVuY3Rp
        b24ob3B0aW9ucykgewogIE1hcC5jYWxsKHRoaXMpOwogIHRoaXMuZGVmYXVs
        dFZhbHVlID0gb3B0aW9ucy5kZWZhdWx0VmFsdWU7Cn07CgovKioKICBAbWV0
        aG9kIGNyZWF0ZQogIEBzdGF0aWMKICBAcGFyYW0gW29wdGlvbnNdCiAgICBA
        cGFyYW0geyp9IFtvcHRpb25zLmRlZmF1bHRWYWx1ZV0KICBAcmV0dXJuIHtF
        bWJlci5NYXBXaXRoRGVmYXVsdHxFbWJlci5NYXB9IElmIG9wdGlvbnMgYXJl
        IHBhc3NlZCwgcmV0dXJucwogICAgYEVtYmVyLk1hcFdpdGhEZWZhdWx0YCBv
        dGhlcndpc2UgcmV0dXJucyBgRW1iZXIuTWFwYAoqLwpNYXBXaXRoRGVmYXVs
        dC5jcmVhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMp
        IHsKICAgIHJldHVybiBuZXcgTWFwV2l0aERlZmF1bHQob3B0aW9ucyk7CiAg
        fSBlbHNlIHsKICAgIHJldHVybiBuZXcgTWFwKCk7CiAgfQp9OwoKTWFwV2l0
        aERlZmF1bHQucHJvdG90eXBlID0gRW1iZXIuY3JlYXRlKE1hcC5wcm90b3R5
        cGUpOwoKLyoqCiAgUmV0cmlldmUgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0
        aCBhIGdpdmVuIGtleS4KCiAgQG1ldGhvZCBnZXQKICBAcGFyYW0geyp9IGtl
        eQogIEByZXR1cm4geyp9IHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhl
        IGtleSwgb3IgdGhlIGRlZmF1bHQgdmFsdWUKKi8KTWFwV2l0aERlZmF1bHQu
        cHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkgewogIHZhciBoYXNWYWx1
        ZSA9IHRoaXMuaGFzKGtleSk7CgogIGlmIChoYXNWYWx1ZSkgewogICAgcmV0
        dXJuIE1hcC5wcm90b3R5cGUuZ2V0LmNhbGwodGhpcywga2V5KTsKICB9IGVs
        c2UgewogICAgdmFyIGRlZmF1bHRWYWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVl
        KGtleSk7CiAgICB0aGlzLnNldChrZXksIGRlZmF1bHRWYWx1ZSk7CiAgICBy
        ZXR1cm4gZGVmYXVsdFZhbHVlOwogIH0KfTsKCi8qKgogIEBtZXRob2QgY29w
        eQogIEByZXR1cm4ge0VtYmVyLk1hcFdpdGhEZWZhdWx0fQoqLwpNYXBXaXRo
        RGVmYXVsdC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uKCkgewogIHJldHVy
        biBjb3B5TWFwKHRoaXMsIG5ldyBNYXBXaXRoRGVmYXVsdCh7CiAgICBkZWZh
        dWx0VmFsdWU6IHRoaXMuZGVmYXVsdFZhbHVlCiAgfSkpOwp9OwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewpmdW5jdGlvbiBjb25zb2xlTWV0aG9kKG5hbWUp
        IHsKICB2YXIgY29uc29sZU9iajsKICBpZiAoRW1iZXIuaW1wb3J0cy5jb25z
        b2xlKSB7CiAgICBjb25zb2xlT2JqID0gRW1iZXIuaW1wb3J0cy5jb25zb2xl
        OwogIH0gZWxzZSBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQn
        KSB7CiAgICBjb25zb2xlT2JqID0gY29uc29sZTsKICB9CgogIHZhciBtZXRo
        b2QgPSB0eXBlb2YgY29uc29sZU9iaiA9PT0gJ29iamVjdCcgPyBjb25zb2xl
        T2JqW25hbWVdIDogbnVsbDsKCiAgaWYgKG1ldGhvZCkgewogICAgLy8gT2xk
        ZXIgSUUgZG9lc24ndCBzdXBwb3J0IGFwcGx5LCBidXQgQ2hyb21lIG5lZWRz
        IGl0CiAgICBpZiAobWV0aG9kLmFwcGx5KSB7CiAgICAgIHJldHVybiBmdW5j
        dGlvbigpIHsKICAgICAgICBtZXRob2QuYXBwbHkoY29uc29sZU9iaiwgYXJn
        dW1lbnRzKTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBm
        dW5jdGlvbigpIHsKICAgICAgICB2YXIgbWVzc2FnZSA9IEFycmF5LnByb3Rv
        dHlwZS5qb2luLmNhbGwoYXJndW1lbnRzLCAnLCAnKTsKICAgICAgICBtZXRo
        b2QobWVzc2FnZSk7CiAgICAgIH07CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBh
        c3NlcnRQb2x5ZmlsbCh0ZXN0LCBtZXNzYWdlKSB7CiAgaWYgKCF0ZXN0KSB7
        CiAgICB0cnkgewogICAgICAvLyBhdHRlbXB0IHRvIHByZXNlcnZlIHRoZSBz
        dGFjawogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImFzc2VydGlvbiBm
        YWlsZWQ6ICIgKyBtZXNzYWdlKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAg
        ICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB0aHJvdyBlcnJv
        cjsKICAgICAgfSwgMCk7CiAgICB9CiAgfQp9CgovKioKICBJbnNpZGUgRW1i
        ZXItTWV0YWwsIHNpbXBseSB1c2VzIHRoZSBtZXRob2RzIGZyb20gYGltcG9y
        dHMuY29uc29sZWAuCiAgT3ZlcnJpZGUgdGhpcyB0byBwcm92aWRlIG1vcmUg
        cm9idXN0IGxvZ2dpbmcgZnVuY3Rpb25hbGl0eS4KCiAgQGNsYXNzIExvZ2dl
        cgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuTG9nZ2VyID0gewogIC8q
        KgogICBMb2dzIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnNvbGUuCiAgIFlv
        dSBjYW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50cyBhcyB5b3Ugd2FudCBhbmQg
        dGhleSB3aWxsIGJlIGpvaW5lZCB0b2dldGhlciB3aXRoIGEgc3BhY2UuCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGZvbyA9IDE7CiAgICBFbWJlci5M
        b2dnZXIubG9nKCdsb2cgdmFsdWUgb2YgZm9vOicsIGZvbyk7IC8vICJsb2cg
        dmFsdWUgb2YgZm9vOiAxIiB3aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNvbnNv
        bGUKICAgIGBgYAoKICAgQG1ldGhvZCBsb2cKICAgQGZvciBFbWJlci5Mb2dn
        ZXIKICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAqLwogIGxvZzogICBjb25z
        b2xlTWV0aG9kKCdsb2cnKSAgIHx8IEVtYmVyLkssCiAgLyoqCiAgIFByaW50
        cyB0aGUgYXJndW1lbnRzIHRvIHRoZSBjb25zb2xlIHdpdGggYSB3YXJuaW5n
        IGljb24uCiAgIFlvdSBjYW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50cyBhcyB5
        b3Ugd2FudCBhbmQgdGhleSB3aWxsIGJlIGpvaW5lZCB0b2dldGhlciB3aXRo
        IGEgc3BhY2UuCgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuTG9nZ2Vy
        Lndhcm4oJ1NvbWV0aGluZyBoYXBwZW5lZCEnKTsgLy8gIlNvbWV0aGluZyBo
        YXBwZW5lZCEiIHdpbGwgYmUgcHJpbnRlZCB0byB0aGUgY29uc29sZSB3aXRo
        IGEgd2FybmluZyBpY29uLgogICAgYGBgCgogICBAbWV0aG9kIHdhcm4KICAg
        QGZvciBFbWJlci5Mb2dnZXIKICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAq
        LwogIHdhcm46ICBjb25zb2xlTWV0aG9kKCd3YXJuJykgIHx8IEVtYmVyLkss
        CiAgLyoqCiAgIFByaW50cyB0aGUgYXJndW1lbnRzIHRvIHRoZSBjb25zb2xl
        IHdpdGggYW4gZXJyb3IgaWNvbiwgcmVkIHRleHQgYW5kIGEgc3RhY2sgcmFj
        ZS4KICAgWW91IGNhbiBwYXNzIGFzIG1hbnkgYXJndW1lbnRzIGFzIHlvdSB3
        YW50IGFuZCB0aGV5IHdpbGwgYmUgam9pbmVkIHRvZ2V0aGVyIHdpdGggYSBz
        cGFjZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5Mb2dnZXIuZXJy
        b3IoJ0RhbmdlciEgRGFuZ2VyIScpOyAvLyAiRGFuZ2VyISBEYW5nZXIhIiB3
        aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUgaW4gcmVkIHRleHQuCiAg
        ICBgYGAKCiAgIEBtZXRob2QgZXJyb3IKICAgQGZvciBFbWJlci5Mb2dnZXIK
        ICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAqLwogIGVycm9yOiBjb25zb2xl
        TWV0aG9kKCdlcnJvcicpIHx8IEVtYmVyLkssCiAgLyoqCiAgIExvZ3MgdGhl
        IGFyZ3VtZW50cyB0byB0aGUgY29uc29sZS4KICAgWW91IGNhbiBwYXNzIGFz
        IG1hbnkgYXJndW1lbnRzIGFzIHlvdSB3YW50IGFuZCB0aGV5IHdpbGwgYmUg
        am9pbmVkIHRvZ2V0aGVyIHdpdGggYSBzcGFjZS4KCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICB2YXIgZm9vID0gMTsKICAgIEVtYmVyLkxvZ2dlci5pbmZvKCds
        b2cgdmFsdWUgb2YgZm9vOicsIGZvbyk7IC8vICJsb2cgdmFsdWUgb2YgZm9v
        OiAxIiB3aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUKICAgIGBgYAoK
        ICAgQG1ldGhvZCBpbmZvCiAgIEBmb3IgRW1iZXIuTG9nZ2VyCiAgIEBwYXJh
        bSB7Kn0gYXJndW1lbnRzCiAgKi8KICBpbmZvOiAgY29uc29sZU1ldGhvZCgn
        aW5mbycpICB8fCBFbWJlci5LLAogIC8qKgogICBMb2dzIHRoZSBhcmd1bWVu
        dHMgdG8gdGhlIGNvbnNvbGUgaW4gYmx1ZSB0ZXh0LgogICBZb3UgY2FuIHBh
        c3MgYXMgbWFueSBhcmd1bWVudHMgYXMgeW91IHdhbnQgYW5kIHRoZXkgd2ls
        bCBiZSBqb2luZWQgdG9nZXRoZXIgd2l0aCBhIHNwYWNlLgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIHZhciBmb28gPSAxOwogICAgRW1iZXIuTG9nZ2VyLmRl
        YnVnKCdsb2cgdmFsdWUgb2YgZm9vOicsIGZvbyk7IC8vICJsb2cgdmFsdWUg
        b2YgZm9vOiAxIiB3aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUKICAg
        IGBgYAoKICAgQG1ldGhvZCBkZWJ1ZwogICBAZm9yIEVtYmVyLkxvZ2dlcgog
        ICBAcGFyYW0geyp9IGFyZ3VtZW50cwogICovCiAgZGVidWc6IGNvbnNvbGVN
        ZXRob2QoJ2RlYnVnJykgfHwgY29uc29sZU1ldGhvZCgnaW5mbycpIHx8IEVt
        YmVyLkssCiAgLyoqCgogICBJZiB0aGUgdmFsdWUgcGFzc2VkIGludG8gRW1i
        ZXIuTG9nZ2VyLmFzc2VydCBpcyBub3QgdHJ1dGh5IGl0IHdpbGwgdGhyb3cg
        YW4gZXJyb3Igd2l0aCBhIHN0YWNrIHRyYWNlLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEVtYmVyLkxvZ2dlci5hc3NlcnQodHJ1ZSk7IC8vIHVuZGVmaW5l
        ZAogICAgRW1iZXIuTG9nZ2VyLmFzc2VydCh0cnVlID09PSBmYWxzZSk7IC8v
        IFRocm93cyBhbiBBc3NlcnRpb24gZmFpbGVkIGVycm9yLgogICAgYGBgCgog
        ICBAbWV0aG9kIGFzc2VydAogICBAZm9yIEVtYmVyLkxvZ2dlcgogICBAcGFy
        YW0ge0Jvb2xlYW59IGJvb2wgVmFsdWUgdG8gdGVzdAogICovCiAgYXNzZXJ0
        OiBjb25zb2xlTWV0aG9kKCdhc3NlcnQnKSB8fCBhc3NlcnRQb2x5ZmlsbAp9
        OwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIt
        bWV0YWwKKi8KCnZhciBNRVRBX0tFWSA9IEVtYmVyLk1FVEFfS0VZLAogICAg
        bWV0YUZvciA9IEVtYmVyLm1ldGEsCiAgICBvYmplY3REZWZpbmVQcm9wZXJ0
        eSA9IEVtYmVyLnBsYXRmb3JtLmRlZmluZVByb3BlcnR5OwoKdmFyIE1BTkRB
        VE9SWV9TRVRURVIgPSBFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUjsKCi8v
        IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4KLy8gREVTQ1JJUFRPUgovLwoKLyoqCiAgT2JqZWN0
        cyBvZiB0aGlzIHR5cGUgY2FuIGltcGxlbWVudCBhbiBpbnRlcmZhY2UgdG8g
        cmVzcG9uZCB0byByZXF1ZXN0cyB0bwogIGdldCBhbmQgc2V0LiBUaGUgZGVm
        YXVsdCBpbXBsZW1lbnRhdGlvbiBoYW5kbGVzIHNpbXBsZSBwcm9wZXJ0aWVz
        LgoKICBZb3UgZ2VuZXJhbGx5IHdvbid0IG5lZWQgdG8gY3JlYXRlIG9yIHN1
        YmNsYXNzIHRoaXMgZGlyZWN0bHkuCgogIEBjbGFzcyBEZXNjcmlwdG9yCiAg
        QG5hbWVzcGFjZSBFbWJlcgogIEBwcml2YXRlCiAgQGNvbnN0cnVjdG9yCiov
        CkVtYmVyLkRlc2NyaXB0b3IgPSBmdW5jdGlvbigpIHt9OwoKLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLgovLyBERUZJTklORyBQUk9QRVJUSUVTIEFQSQovLwoKdmFyIE1B
        TkRBVE9SWV9TRVRURVJfRlVOQ1RJT04gPSBFbWJlci5NQU5EQVRPUllfU0VU
        VEVSX0ZVTkNUSU9OID0gZnVuY3Rpb24odmFsdWUpIHsKICBFbWJlci5hc3Nl
        cnQoIllvdSBtdXN0IHVzZSBFbWJlci5zZXQoKSB0byBhY2Nlc3MgdGhpcyBw
        cm9wZXJ0eSAob2YgIiArIHRoaXMgKyAiKSIsIGZhbHNlKTsKfTsKCnZhciBE
        RUZBVUxUX0dFVFRFUl9GVU5DVElPTiA9IEVtYmVyLkRFRkFVTFRfR0VUVEVS
        X0ZVTkNUSU9OID0gZnVuY3Rpb24obmFtZSkgewogIHJldHVybiBmdW5jdGlv
        bigpIHsKICAgIHZhciBtZXRhID0gdGhpc1tNRVRBX0tFWV07CiAgICByZXR1
        cm4gbWV0YSAmJiBtZXRhLnZhbHVlc1tuYW1lXTsKICB9Owp9OwoKLyoqCiAg
        QHByaXZhdGUKCiAgTk9URTogVGhpcyBpcyBhIGxvdy1sZXZlbCBtZXRob2Qg
        dXNlZCBieSBvdGhlciBwYXJ0cyBvZiB0aGUgQVBJLiBZb3UgYWxtb3N0CiAg
        bmV2ZXIgd2FudCB0byBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBJbnN0
        ZWFkIHlvdSBzaG91bGQgdXNlCiAgYEVtYmVyLm1peGluKClgIHRvIGRlZmlu
        ZSBuZXcgcHJvcGVydGllcy4KCiAgRGVmaW5lcyBhIHByb3BlcnR5IG9uIGFu
        IG9iamVjdC4gVGhpcyBtZXRob2Qgd29ya3MgbXVjaCBsaWtlIHRoZSBFUzUK
        ICBgT2JqZWN0LmRlZmluZVByb3BlcnR5KClgIG1ldGhvZCBleGNlcHQgdGhh
        dCBpdCBjYW4gYWxzbyBhY2NlcHQgY29tcHV0ZWQKICBwcm9wZXJ0aWVzIGFu
        ZCBvdGhlciBzcGVjaWFsIGRlc2NyaXB0b3JzLgoKICBOb3JtYWxseSB0aGlz
        IG1ldGhvZCB0YWtlcyBvbmx5IHRocmVlIHBhcmFtZXRlcnMuIEhvd2V2ZXIg
        aWYgeW91IHBhc3MgYW4KICBpbnN0YW5jZSBvZiBgRW1iZXIuRGVzY3JpcHRv
        cmAgYXMgdGhlIHRoaXJkIHBhcmFtIHRoZW4geW91IGNhbiBwYXNzIGFuCiAg
        b3B0aW9uYWwgdmFsdWUgYXMgdGhlIGZvdXJ0aCBwYXJhbWV0ZXIuIFRoaXMg
        aXMgb2Z0ZW4gbW9yZSBlZmZpY2llbnQgdGhhbgogIGNyZWF0aW5nIG5ldyBk
        ZXNjcmlwdG9yIGhhc2hlcyBmb3IgZWFjaCBwcm9wZXJ0eS4KCiAgIyMgRXhh
        bXBsZXMKCiAgYGBgamF2YXNjcmlwdAogIC8vIEVTNSBjb21wYXRpYmxlIG1v
        ZGUKICBFbWJlci5kZWZpbmVQcm9wZXJ0eShjb250YWN0LCAnZmlyc3ROYW1l
        JywgewogICAgd3JpdGFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IGZh
        bHNlLAogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiAnQ2hhcmxl
        cycKICB9KTsKCiAgLy8gZGVmaW5lIGEgc2ltcGxlIHByb3BlcnR5CiAgRW1i
        ZXIuZGVmaW5lUHJvcGVydHkoY29udGFjdCwgJ2xhc3ROYW1lJywgdW5kZWZp
        bmVkLCAnSm9sbGV5Jyk7CgogIC8vIGRlZmluZSBhIGNvbXB1dGVkIHByb3Bl
        cnR5CiAgRW1iZXIuZGVmaW5lUHJvcGVydHkoY29udGFjdCwgJ2Z1bGxOYW1l
        JywgRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhp
        cy5maXJzdE5hbWUrJyAnK3RoaXMubGFzdE5hbWU7CiAgfSkucHJvcGVydHko
        J2ZpcnN0TmFtZScsICdsYXN0TmFtZScpKTsKICBgYGAKCiAgQG1ldGhvZCBk
        ZWZpbmVQcm9wZXJ0eQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0g
        b2JqIHRoZSBvYmplY3QgdG8gZGVmaW5lIHRoaXMgcHJvcGVydHkgb24uIFRo
        aXMgbWF5IGJlIGEgcHJvdG90eXBlLgogIEBwYXJhbSB7U3RyaW5nfSBrZXlO
        YW1lIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eQogIEBwYXJhbSB7RW1iZXIu
        RGVzY3JpcHRvcn0gW2Rlc2NdIGFuIGluc3RhbmNlIG9mIGBFbWJlci5EZXNj
        cmlwdG9yYCAodHlwaWNhbGx5IGEKICAgIGNvbXB1dGVkIHByb3BlcnR5KSBv
        ciBhbiBFUzUgZGVzY3JpcHRvci4KICAgIFlvdSBtdXN0IHByb3ZpZGUgdGhp
        cyBvciBgZGF0YWAgYnV0IG5vdCBib3RoLgogIEBwYXJhbSB7Kn0gW2RhdGFd
        IHNvbWV0aGluZyBvdGhlciB0aGFuIGEgZGVzY3JpcHRvciwgdGhhdCB3aWxs
        CiAgICBiZWNvbWUgdGhlIGV4cGxpY2l0IHZhbHVlIG9mIHRoaXMgcHJvcGVy
        dHkuCiovCkVtYmVyLmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24ob2JqLCBr
        ZXlOYW1lLCBkZXNjLCBkYXRhLCBtZXRhKSB7CiAgdmFyIGRlc2NzLCBleGlz
        dGluZ0Rlc2MsIHdhdGNoaW5nLCB2YWx1ZTsKCiAgaWYgKCFtZXRhKSBtZXRh
        ID0gbWV0YUZvcihvYmopOwogIGRlc2NzID0gbWV0YS5kZXNjczsKICBleGlz
        dGluZ0Rlc2MgPSBtZXRhLmRlc2NzW2tleU5hbWVdOwogIHdhdGNoaW5nID0g
        bWV0YS53YXRjaGluZ1trZXlOYW1lXSA+IDA7CgogIGlmIChleGlzdGluZ0Rl
        c2MgaW5zdGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yKSB7CiAgICBleGlzdGlu
        Z0Rlc2MudGVhcmRvd24ob2JqLCBrZXlOYW1lKTsKICB9CgogIGlmIChkZXNj
        IGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRvcikgewogICAgdmFsdWUgPSBk
        ZXNjOwoKICAgIGRlc2NzW2tleU5hbWVdID0gZGVzYzsKICAgIGlmIChNQU5E
        QVRPUllfU0VUVEVSICYmIHdhdGNoaW5nKSB7CiAgICAgIG9iamVjdERlZmlu
        ZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgewogICAgICAgIGNvbmZpZ3VyYWJs
        ZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIHdy
        aXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiB1bmRlZmluZWQgLy8gbWFr
        ZSBlbnVtZXJhYmxlCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2Jq
        W2tleU5hbWVdID0gdW5kZWZpbmVkOyAvLyBtYWtlIGVudW1lcmFibGUKICAg
        IH0KICB9IGVsc2UgewogICAgZGVzY3Nba2V5TmFtZV0gPSB1bmRlZmluZWQ7
        IC8vIHNoYWRvdyBkZXNjcmlwdG9yIGluIHByb3RvCiAgICBpZiAoZGVzYyA9
        PSBudWxsKSB7CiAgICAgIHZhbHVlID0gZGF0YTsKCiAgICAgIGlmIChNQU5E
        QVRPUllfU0VUVEVSICYmIHdhdGNoaW5nKSB7CiAgICAgICAgbWV0YS52YWx1
        ZXNba2V5TmFtZV0gPSBkYXRhOwogICAgICAgIG9iamVjdERlZmluZVByb3Bl
        cnR5KG9iaiwga2V5TmFtZSwgewogICAgICAgICAgY29uZmlndXJhYmxlOiB0
        cnVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIHNl
        dDogTUFOREFUT1JZX1NFVFRFUl9GVU5DVElPTiwKICAgICAgICAgIGdldDog
        REVGQVVMVF9HRVRURVJfRlVOQ1RJT04oa2V5TmFtZSkKICAgICAgICB9KTsK
        ICAgICAgfSBlbHNlIHsKICAgICAgICBvYmpba2V5TmFtZV0gPSBkYXRhOwog
        ICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YWx1ZSA9IGRlc2M7CgogICAg
        ICAvLyBjb21wYXRpYmlsaXR5IHdpdGggRVM1CiAgICAgIG9iamVjdERlZmlu
        ZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgZGVzYyk7CiAgICB9CiAgfQoKICAv
        LyBpZiBrZXkgaXMgYmVpbmcgd2F0Y2hlZCwgb3ZlcnJpZGUgY2hhaW5zIHRo
        YXQKICAvLyB3ZXJlIGluaXRpYWxpemVkIHdpdGggdGhlIHByb3RvdHlwZQog
        IGlmICh3YXRjaGluZykgeyBFbWJlci5vdmVycmlkZUNoYWlucyhvYmosIGtl
        eU5hbWUsIG1ldGEpOyB9CgogIC8vIFRoZSBgdmFsdWVgIHBhc3NlZCB0byB0
        aGUgYGRpZERlZmluZVByb3BlcnR5YCBob29rIGlzCiAgLy8gZWl0aGVyIHRo
        ZSBkZXNjcmlwdG9yIG9yIGRhdGEsIHdoaWNoZXZlciB3YXMgcGFzc2VkLgog
        IGlmIChvYmouZGlkRGVmaW5lUHJvcGVydHkpIHsgb2JqLmRpZERlZmluZVBy
        b3BlcnR5KG9iaiwga2V5TmFtZSwgdmFsdWUpOyB9CgogIHJldHVybiB0aGlz
        Owp9OwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVy
        LmdldDsKCi8qKgogIFRvIGdldCBtdWx0aXBsZSBwcm9wZXJ0aWVzIGF0IG9u
        Y2UsIGNhbGwgYEVtYmVyLmdldFByb3BlcnRpZXNgCiAgd2l0aCBhbiBvYmpl
        Y3QgZm9sbG93ZWQgYnkgYSBsaXN0IG9mIHN0cmluZ3Mgb3IgYW4gYXJyYXk6
        CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5nZXRQcm9wZXJ0aWVzKHJlY29y
        ZCwgJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScsICd6aXBDb2RlJyk7ICAvLyB7
        IGZpcnN0TmFtZTogJ0pvaG4nLCBsYXN0TmFtZTogJ0RvZScsIHppcENvZGU6
        ICcxMDAxMScgfQogIGBgYAoKICBpcyBlcXVpdmFsZW50IHRvOgoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIuZ2V0UHJvcGVydGllcyhyZWNvcmQsIFsnZmly
        c3ROYW1lJywgJ2xhc3ROYW1lJywgJ3ppcENvZGUnXSk7ICAvLyB7IGZpcnN0
        TmFtZTogJ0pvaG4nLCBsYXN0TmFtZTogJ0RvZScsIHppcENvZGU6ICcxMDAx
        MScgfQogIGBgYAoKICBAbWV0aG9kIGdldFByb3BlcnRpZXMKICBAcGFyYW0g
        b2JqCiAgQHBhcmFtIHtTdHJpbmcuLi58QXJyYXl9IGxpc3Qgb2Yga2V5cyB0
        byBnZXQKICBAcmV0dXJuIHtIYXNofQoqLwpFbWJlci5nZXRQcm9wZXJ0aWVz
        ID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIHJldCA9IHt9LAogICAgICBwcm9w
        ZXJ0eU5hbWVzID0gYXJndW1lbnRzLAogICAgICBpID0gMTsKCiAgaWYgKGFy
        Z3VtZW50cy5sZW5ndGggPT09IDIgJiYgRW1iZXIudHlwZU9mKGFyZ3VtZW50
        c1sxXSkgPT09ICdhcnJheScpIHsKICAgIGkgPSAwOwogICAgcHJvcGVydHlO
        YW1lcyA9IGFyZ3VtZW50c1sxXTsKICB9CiAgZm9yKHZhciBsZW4gPSBwcm9w
        ZXJ0eU5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICByZXRbcHJv
        cGVydHlOYW1lc1tpXV0gPSBnZXQob2JqLCBwcm9wZXJ0eU5hbWVzW2ldKTsK
        ICB9CiAgcmV0dXJuIHJldDsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        dmFyIGNoYW5nZVByb3BlcnRpZXMgPSBFbWJlci5jaGFuZ2VQcm9wZXJ0aWVz
        LAogICAgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgU2V0IGEgbGlzdCBvZiBw
        cm9wZXJ0aWVzIG9uIGFuIG9iamVjdC4gVGhlc2UgcHJvcGVydGllcyBhcmUg
        c2V0IGluc2lkZQogIGEgc2luZ2xlIGBiZWdpblByb3BlcnR5Q2hhbmdlc2Ag
        YW5kIGBlbmRQcm9wZXJ0eUNoYW5nZXNgIGJhdGNoLCBzbwogIG9ic2VydmVy
        cyB3aWxsIGJlIGJ1ZmZlcmVkLgoKICBgYGBqYXZhc2NyaXB0CiAgYW5PYmpl
        Y3Quc2V0UHJvcGVydGllcyh7CiAgICBmaXJzdE5hbWU6ICJTdGFubGV5IiwK
        ICAgIGxhc3ROYW1lOiAiU3R1YXJ0IiwKICAgIGFnZTogIjIxIgogIH0pCiAg
        YGBgCgogIEBtZXRob2Qgc2V0UHJvcGVydGllcwogIEBwYXJhbSBzZWxmCiAg
        QHBhcmFtIHtPYmplY3R9IGhhc2gKICBAcmV0dXJuIHNlbGYKKi8KRW1iZXIu
        c2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uKHNlbGYsIGhhc2gpIHsKICBjaGFu
        Z2VQcm9wZXJ0aWVzKGZ1bmN0aW9uKCkgewogICAgZm9yKHZhciBwcm9wIGlu
        IGhhc2gpIHsKICAgICAgaWYgKGhhc2guaGFzT3duUHJvcGVydHkocHJvcCkp
        IHsgc2V0KHNlbGYsIHByb3AsIGhhc2hbcHJvcF0pOyB9CiAgICB9CiAgfSk7
        CiAgcmV0dXJuIHNlbGY7Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZh
        ciBtZXRhRm9yID0gRW1iZXIubWV0YSwgLy8gdXRpbHMuanMKICAgIHR5cGVP
        ZiA9IEVtYmVyLnR5cGVPZiwgLy8gdXRpbHMuanMKICAgIE1BTkRBVE9SWV9T
        RVRURVIgPSBFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUiwKICAgIG9fZGVm
        aW5lUHJvcGVydHkgPSBFbWJlci5wbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eTsK
        CkVtYmVyLndhdGNoS2V5ID0gZnVuY3Rpb24ob2JqLCBrZXlOYW1lKSB7CiAg
        Ly8gY2FuJ3Qgd2F0Y2ggbGVuZ3RoIG9uIEFycmF5IC0gaXQgaXMgc3BlY2lh
        bC4uLgogIGlmIChrZXlOYW1lID09PSAnbGVuZ3RoJyAmJiB0eXBlT2Yob2Jq
        KSA9PT0gJ2FycmF5JykgeyByZXR1cm47IH0KCiAgdmFyIG0gPSBtZXRhRm9y
        KG9iaiksIHdhdGNoaW5nID0gbS53YXRjaGluZzsKCiAgLy8gYWN0aXZhdGUg
        d2F0Y2hpbmcgZmlyc3QgdGltZQogIGlmICghd2F0Y2hpbmdba2V5TmFtZV0p
        IHsKICAgIHdhdGNoaW5nW2tleU5hbWVdID0gMTsKCiAgICBpZiAoJ2Z1bmN0
        aW9uJyA9PT0gdHlwZW9mIG9iai53aWxsV2F0Y2hQcm9wZXJ0eSkgewogICAg
        ICBvYmoud2lsbFdhdGNoUHJvcGVydHkoa2V5TmFtZSk7CiAgICB9CgogICAg
        aWYgKE1BTkRBVE9SWV9TRVRURVIgJiYga2V5TmFtZSBpbiBvYmopIHsKICAg
        ICAgbS52YWx1ZXNba2V5TmFtZV0gPSBvYmpba2V5TmFtZV07CiAgICAgIG9f
        ZGVmaW5lUHJvcGVydHkob2JqLCBrZXlOYW1lLCB7CiAgICAgICAgY29uZmln
        dXJhYmxlOiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAg
        ICAgc2V0OiBFbWJlci5NQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9OLAogICAg
        ICAgIGdldDogRW1iZXIuREVGQVVMVF9HRVRURVJfRlVOQ1RJT04oa2V5TmFt
        ZSkKICAgICAgfSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHdhdGNoaW5nW2tl
        eU5hbWVdID0gKHdhdGNoaW5nW2tleU5hbWVdIHx8IDApICsgMTsKICB9Cn07
        CgoKRW1iZXIudW53YXRjaEtleSA9IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSkg
        ewogIHZhciBtID0gbWV0YUZvcihvYmopLCB3YXRjaGluZyA9IG0ud2F0Y2hp
        bmc7CgogIGlmICh3YXRjaGluZ1trZXlOYW1lXSA9PT0gMSkgewogICAgd2F0
        Y2hpbmdba2V5TmFtZV0gPSAwOwoKICAgIGlmICgnZnVuY3Rpb24nID09PSB0
        eXBlb2Ygb2JqLmRpZFVud2F0Y2hQcm9wZXJ0eSkgewogICAgICBvYmouZGlk
        VW53YXRjaFByb3BlcnR5KGtleU5hbWUpOwogICAgfQoKICAgIGlmIChNQU5E
        QVRPUllfU0VUVEVSICYmIGtleU5hbWUgaW4gb2JqKSB7CiAgICAgIG9fZGVm
        aW5lUHJvcGVydHkob2JqLCBrZXlOYW1lLCB7CiAgICAgICAgY29uZmlndXJh
        YmxlOiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAg
        d3JpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6IG0udmFsdWVzW2tleU5h
        bWVdCiAgICAgIH0pOwogICAgICBkZWxldGUgbS52YWx1ZXNba2V5TmFtZV07
        CiAgICB9CiAgfSBlbHNlIGlmICh3YXRjaGluZ1trZXlOYW1lXSA+IDEpIHsK
        ICAgIHdhdGNoaW5nW2tleU5hbWVdLS07CiAgfQp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1ldGEsIC8vIHV0aWxz
        LmpzCiAgICBnZXQgPSBFbWJlci5nZXQsIC8vIHByb3BlcnR5X2dldC5qcwog
        ICAgbm9ybWFsaXplVHVwbGUgPSBFbWJlci5ub3JtYWxpemVUdXBsZSwgLy8g
        cHJvcGVydHlfZ2V0LmpzCiAgICBmb3JFYWNoID0gRW1iZXIuQXJyYXlQb2x5
        ZmlsbHMuZm9yRWFjaCwgLy8gYXJyYXkuanMKICAgIHdhcm4gPSBFbWJlci53
        YXJuLAogICAgd2F0Y2hLZXkgPSBFbWJlci53YXRjaEtleSwKICAgIHVud2F0
        Y2hLZXkgPSBFbWJlci51bndhdGNoS2V5LAogICAgRklSU1RfS0VZID0gL14o
        W15cLlwqXSspLzsKCmZ1bmN0aW9uIGZpcnN0S2V5KHBhdGgpIHsKICByZXR1
        cm4gcGF0aC5tYXRjaChGSVJTVF9LRVkpWzBdOwp9Cgp2YXIgcGVuZGluZ1F1
        ZXVlID0gW107CgovLyBhdHRlbXB0cyB0byBhZGQgdGhlIHBlbmRpbmdRdWV1
        ZSBjaGFpbnMgYWdhaW4uIElmIHNvbWUgb2YgdGhlbSBlbmQgdXAKLy8gYmFj
        ayBpbiB0aGUgcXVldWUgYW5kIHJlc2NoZWR1bGUgaXMgdHJ1ZSwgc2NoZWR1
        bGVzIGEgdGltZW91dCB0byB0cnkKLy8gYWdhaW4uCkVtYmVyLmZsdXNoUGVu
        ZGluZ0NoYWlucyA9IGZ1bmN0aW9uKCkgewogIGlmIChwZW5kaW5nUXVldWUu
        bGVuZ3RoID09PSAwKSB7IHJldHVybjsgfSAvLyBub3RoaW5nIHRvIGRvCgog
        IHZhciBxdWV1ZSA9IHBlbmRpbmdRdWV1ZTsKICBwZW5kaW5nUXVldWUgPSBb
        XTsKCiAgZm9yRWFjaC5jYWxsKHF1ZXVlLCBmdW5jdGlvbihxKSB7IHFbMF0u
        YWRkKHFbMV0pOyB9KTsKCiAgd2FybignV2F0Y2hpbmcgYW4gdW5kZWZpbmVk
        IGdsb2JhbCwgRW1iZXIgZXhwZWN0cyB3YXRjaGVkIGdsb2JhbHMgdG8gYmUg
        c2V0dXAgYnkgdGhlIHRpbWUgdGhlIHJ1biBsb29wIGlzIGZsdXNoZWQsIGNo
        ZWNrIGZvciB0eXBvcycsIHBlbmRpbmdRdWV1ZS5sZW5ndGggPT09IDApOwp9
        OwoKCmZ1bmN0aW9uIGFkZENoYWluV2F0Y2hlcihvYmosIGtleU5hbWUsIG5v
        ZGUpIHsKICBpZiAoIW9iaiB8fCAoJ29iamVjdCcgIT09IHR5cGVvZiBvYmop
        KSB7IHJldHVybjsgfSAvLyBub3RoaW5nIHRvIGRvCgogIHZhciBtID0gbWV0
        YUZvcihvYmopLCBub2RlcyA9IG0uY2hhaW5XYXRjaGVyczsKCiAgaWYgKCFt
        Lmhhc093blByb3BlcnR5KCdjaGFpbldhdGNoZXJzJykpIHsKICAgIG5vZGVz
        ID0gbS5jaGFpbldhdGNoZXJzID0ge307CiAgfQoKICBpZiAoIW5vZGVzW2tl
        eU5hbWVdKSB7IG5vZGVzW2tleU5hbWVdID0gW107IH0KICBub2Rlc1trZXlO
        YW1lXS5wdXNoKG5vZGUpOwogIHdhdGNoS2V5KG9iaiwga2V5TmFtZSk7Cn0K
        CnZhciByZW1vdmVDaGFpbldhdGNoZXIgPSBFbWJlci5yZW1vdmVDaGFpbldh
        dGNoZXIgPSBmdW5jdGlvbihvYmosIGtleU5hbWUsIG5vZGUpIHsKICBpZiAo
        IW9iaiB8fCAnb2JqZWN0JyAhPT0gdHlwZW9mIG9iaikgeyByZXR1cm47IH0g
        Ly8gbm90aGluZyB0byBkbwoKICB2YXIgbSA9IG1ldGFGb3Iob2JqLCBmYWxz
        ZSk7CiAgaWYgKCFtLmhhc093blByb3BlcnR5KCdjaGFpbldhdGNoZXJzJykp
        IHsgcmV0dXJuOyB9IC8vIG5vdGhpbmcgdG8gZG8KCiAgdmFyIG5vZGVzID0g
        bS5jaGFpbldhdGNoZXJzOwoKICBpZiAobm9kZXNba2V5TmFtZV0pIHsKICAg
        IG5vZGVzID0gbm9kZXNba2V5TmFtZV07CiAgICBmb3IgKHZhciBpID0gMCwg
        bCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBpZiAobm9k
        ZXNbaV0gPT09IG5vZGUpIHsgbm9kZXMuc3BsaWNlKGksIDEpOyB9CiAgICB9
        CiAgfQogIHVud2F0Y2hLZXkob2JqLCBrZXlOYW1lKTsKfTsKCi8vIEEgQ2hh
        aW5Ob2RlIHdhdGNoZXMgYSBzaW5nbGUga2V5IG9uIGFuIG9iamVjdC4gSWYg
        eW91IHByb3ZpZGUgYSBzdGFydGluZwovLyB2YWx1ZSBmb3IgdGhlIGtleSB0
        aGVuIHRoZSBub2RlIHdvbid0IGFjdHVhbGx5IHdhdGNoIGl0LiBGb3IgYSBy
        b290IG5vZGUKLy8gcGFzcyBudWxsIGZvciBwYXJlbnQgYW5kIGtleSBhbmQg
        b2JqZWN0IGZvciB2YWx1ZS4KdmFyIENoYWluTm9kZSA9IEVtYmVyLl9DaGFp
        bk5vZGUgPSBmdW5jdGlvbihwYXJlbnQsIGtleSwgdmFsdWUpIHsKICB0aGlz
        Ll9wYXJlbnQgPSBwYXJlbnQ7CiAgdGhpcy5fa2V5ICAgID0ga2V5OwoKICAv
        LyBfd2F0Y2hpbmcgaXMgdHJ1ZSB3aGVuIGNhbGxpbmcgZ2V0KHRoaXMuX3Bh
        cmVudCwgdGhpcy5fa2V5KSB3aWxsCiAgLy8gcmV0dXJuIHRoZSB2YWx1ZSBv
        ZiB0aGlzIG5vZGUuCiAgLy8KICAvLyBJdCBpcyBmYWxzZSBmb3IgdGhlIHJv
        b3Qgb2YgYSBjaGFpbiAoYmVjYXVzZSB3ZSBoYXZlIG5vIHBhcmVudCkKICAv
        LyBhbmQgZm9yIGdsb2JhbCBwYXRocyAoYmVjYXVzZSB0aGUgcGFyZW50IG5v
        ZGUgaXMgdGhlIG9iamVjdCB3aXRoCiAgLy8gdGhlIG9ic2VydmVyIG9uIGl0
        KQogIHRoaXMuX3dhdGNoaW5nID0gdmFsdWU9PT11bmRlZmluZWQ7CgogIHRo
        aXMuX3ZhbHVlICA9IHZhbHVlOwogIHRoaXMuX3BhdGhzID0ge307CiAgaWYg
        KHRoaXMuX3dhdGNoaW5nKSB7CiAgICB0aGlzLl9vYmplY3QgPSBwYXJlbnQu
        dmFsdWUoKTsKICAgIGlmICh0aGlzLl9vYmplY3QpIHsgYWRkQ2hhaW5XYXRj
        aGVyKHRoaXMuX29iamVjdCwgdGhpcy5fa2V5LCB0aGlzKTsgfQogIH0KCiAg
        Ly8gU3BlY2lhbC1jYXNlOiB0aGUgRWFjaFByb3h5IHJlbGllcyBvbiBpbW1l
        ZGlhdGUgZXZhbHVhdGlvbiB0bwogIC8vIGVzdGFibGlzaCBpdHMgb2JzZXJ2
        ZXJzLgogIC8vCiAgLy8gVE9ETzogUmVwbGFjZSB0aGlzIHdpdGggYW4gZWZm
        aWNpZW50IGNhbGxiYWNrIHRoYXQgdGhlIEVhY2hQcm94eQogIC8vIGNhbiBp
        bXBsZW1lbnQuCiAgaWYgKHRoaXMuX3BhcmVudCAmJiB0aGlzLl9wYXJlbnQu
        X2tleSA9PT0gJ0BlYWNoJykgewogICAgdGhpcy52YWx1ZSgpOwogIH0KfTsK
        CnZhciBDaGFpbk5vZGVQcm90b3R5cGUgPSBDaGFpbk5vZGUucHJvdG90eXBl
        OwoKZnVuY3Rpb24gbGF6eUdldChvYmosIGtleSkgewogIGlmICghb2JqKSBy
        ZXR1cm4gdW5kZWZpbmVkOwoKICB2YXIgbWV0YSA9IG1ldGFGb3Iob2JqLCBm
        YWxzZSk7CiAgLy8gY2hlY2sgaWYgb2JqZWN0IG1lYW50IG9ubHkgdG8gYmUg
        YSBwcm90b3R5cGUKICBpZiAobWV0YS5wcm90byA9PT0gb2JqKSByZXR1cm4g
        dW5kZWZpbmVkOwoKICBpZiAoa2V5ID09PSAiQGVhY2giKSByZXR1cm4gZ2V0
        KG9iaiwga2V5KTsKCiAgLy8gaWYgYSBDUCBvbmx5IHJldHVybiBjYWNoZWQg
        dmFsdWUKICB2YXIgZGVzYyA9IG1ldGEuZGVzY3Nba2V5XTsKICBpZiAoZGVz
        YyAmJiBkZXNjLl9jYWNoZWFibGUpIHsKICAgIGlmIChrZXkgaW4gbWV0YS5j
        YWNoZSkgewogICAgICByZXR1cm4gbWV0YS5jYWNoZVtrZXldOwogICAgfSBl
        bHNlIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KICB9CgogIHJl
        dHVybiBnZXQob2JqLCBrZXkpOwp9CgpDaGFpbk5vZGVQcm90b3R5cGUudmFs
        dWUgPSBmdW5jdGlvbigpIHsKICBpZiAodGhpcy5fdmFsdWUgPT09IHVuZGVm
        aW5lZCAmJiB0aGlzLl93YXRjaGluZykgewogICAgdmFyIG9iaiA9IHRoaXMu
        X3BhcmVudC52YWx1ZSgpOwogICAgdGhpcy5fdmFsdWUgPSBsYXp5R2V0KG9i
        aiwgdGhpcy5fa2V5KTsKICB9CiAgcmV0dXJuIHRoaXMuX3ZhbHVlOwp9OwoK
        Q2hhaW5Ob2RlUHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHsKICBp
        ZiAodGhpcy5fd2F0Y2hpbmcpIHsKICAgIHZhciBvYmogPSB0aGlzLl9vYmpl
        Y3Q7CiAgICBpZiAob2JqKSB7IHJlbW92ZUNoYWluV2F0Y2hlcihvYmosIHRo
        aXMuX2tleSwgdGhpcyk7IH0KICAgIHRoaXMuX3dhdGNoaW5nID0gZmFsc2U7
        IC8vIHNvIGZ1dHVyZSBjYWxscyBkbyBub3RoaW5nCiAgfQp9OwoKLy8gY29w
        aWVzIGEgdG9wIGxldmVsIG9iamVjdCBvbmx5CkNoYWluTm9kZVByb3RvdHlw
        ZS5jb3B5ID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIHJldCA9IG5ldyBDaGFp
        bk5vZGUobnVsbCwgbnVsbCwgb2JqKSwKICAgICAgcGF0aHMgPSB0aGlzLl9w
        YXRocywgcGF0aDsKICBmb3IgKHBhdGggaW4gcGF0aHMpIHsKICAgIGlmIChw
        YXRoc1twYXRoXSA8PSAwKSB7IGNvbnRpbnVlOyB9IC8vIHRoaXMgY2hlY2sg
        d2lsbCBhbHNvIGNhdGNoIG5vbi1udW1iZXIgdmFscy4KICAgIHJldC5hZGQo
        cGF0aCk7CiAgfQogIHJldHVybiByZXQ7Cn07CgovLyBjYWxsZWQgb24gdGhl
        IHJvb3Qgbm9kZSBvZiBhIGNoYWluIHRvIHNldHVwIHdhdGNoZXJzIG9uIHRo
        ZSBzcGVjaWZpZWQKLy8gcGF0aC4KQ2hhaW5Ob2RlUHJvdG90eXBlLmFkZCA9
        IGZ1bmN0aW9uKHBhdGgpIHsKICB2YXIgb2JqLCB0dXBsZSwga2V5LCBzcmMs
        IHBhdGhzOwoKICBwYXRocyA9IHRoaXMuX3BhdGhzOwogIHBhdGhzW3BhdGhd
        ID0gKHBhdGhzW3BhdGhdIHx8IDApICsgMTsKCiAgb2JqID0gdGhpcy52YWx1
        ZSgpOwogIHR1cGxlID0gbm9ybWFsaXplVHVwbGUob2JqLCBwYXRoKTsKCiAg
        Ly8gdGhlIHBhdGggd2FzIGEgbG9jYWwgcGF0aAogIGlmICh0dXBsZVswXSAm
        JiB0dXBsZVswXSA9PT0gb2JqKSB7CiAgICBwYXRoID0gdHVwbGVbMV07CiAg
        ICBrZXkgID0gZmlyc3RLZXkocGF0aCk7CiAgICBwYXRoID0gcGF0aC5zbGlj
        ZShrZXkubGVuZ3RoKzEpOwoKICAvLyBnbG9iYWwgcGF0aCwgYnV0IG9iamVj
        dCBkb2VzIG5vdCBleGlzdCB5ZXQuCiAgLy8gcHV0IGludG8gYSBxdWV1ZSBh
        bmQgdHJ5IHRvIGNvbm5lY3QgbGF0ZXIuCiAgfSBlbHNlIGlmICghdHVwbGVb
        MF0pIHsKICAgIHBlbmRpbmdRdWV1ZS5wdXNoKFt0aGlzLCBwYXRoXSk7CiAg
        ICB0dXBsZS5sZW5ndGggPSAwOwogICAgcmV0dXJuOwoKICAvLyBnbG9iYWwg
        cGF0aCwgYW5kIG9iamVjdCBhbHJlYWR5IGV4aXN0cwogIH0gZWxzZSB7CiAg
        ICBzcmMgID0gdHVwbGVbMF07CiAgICBrZXkgID0gcGF0aC5zbGljZSgwLCAw
        LSh0dXBsZVsxXS5sZW5ndGgrMSkpOwogICAgcGF0aCA9IHR1cGxlWzFdOwog
        IH0KCiAgdHVwbGUubGVuZ3RoID0gMDsKICB0aGlzLmNoYWluKGtleSwgcGF0
        aCwgc3JjKTsKfTsKCi8vIGNhbGxlZCBvbiB0aGUgcm9vdCBub2RlIG9mIGEg
        Y2hhaW4gdG8gdGVhcmRvd24gd2F0Y2hlciBvbiB0aGUgc3BlY2lmaWVkCi8v
        IHBhdGgKQ2hhaW5Ob2RlUHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHBh
        dGgpIHsKICB2YXIgb2JqLCB0dXBsZSwga2V5LCBzcmMsIHBhdGhzOwoKICBw
        YXRocyA9IHRoaXMuX3BhdGhzOwogIGlmIChwYXRoc1twYXRoXSA+IDApIHsg
        cGF0aHNbcGF0aF0tLTsgfQoKICBvYmogPSB0aGlzLnZhbHVlKCk7CiAgdHVw
        bGUgPSBub3JtYWxpemVUdXBsZShvYmosIHBhdGgpOwogIGlmICh0dXBsZVsw
        XSA9PT0gb2JqKSB7CiAgICBwYXRoID0gdHVwbGVbMV07CiAgICBrZXkgID0g
        Zmlyc3RLZXkocGF0aCk7CiAgICBwYXRoID0gcGF0aC5zbGljZShrZXkubGVu
        Z3RoKzEpOwogIH0gZWxzZSB7CiAgICBzcmMgID0gdHVwbGVbMF07CiAgICBr
        ZXkgID0gcGF0aC5zbGljZSgwLCAwLSh0dXBsZVsxXS5sZW5ndGgrMSkpOwog
        ICAgcGF0aCA9IHR1cGxlWzFdOwogIH0KCiAgdHVwbGUubGVuZ3RoID0gMDsK
        ICB0aGlzLnVuY2hhaW4oa2V5LCBwYXRoKTsKfTsKCkNoYWluTm9kZVByb3Rv
        dHlwZS5jb3VudCA9IDA7CgpDaGFpbk5vZGVQcm90b3R5cGUuY2hhaW4gPSBm
        dW5jdGlvbihrZXksIHBhdGgsIHNyYykgewogIHZhciBjaGFpbnMgPSB0aGlz
        Ll9jaGFpbnMsIG5vZGU7CiAgaWYgKCFjaGFpbnMpIHsgY2hhaW5zID0gdGhp
        cy5fY2hhaW5zID0ge307IH0KCiAgbm9kZSA9IGNoYWluc1trZXldOwogIGlm
        ICghbm9kZSkgeyBub2RlID0gY2hhaW5zW2tleV0gPSBuZXcgQ2hhaW5Ob2Rl
        KHRoaXMsIGtleSwgc3JjKTsgfQogIG5vZGUuY291bnQrKzsgLy8gY291bnQg
        Y2hhaW5zLi4uCgogIC8vIGNoYWluIHJlc3Qgb2YgcGF0aCBpZiB0aGVyZSBp
        cyBvbmUKICBpZiAocGF0aCAmJiBwYXRoLmxlbmd0aD4wKSB7CiAgICBrZXkg
        PSBmaXJzdEtleShwYXRoKTsKICAgIHBhdGggPSBwYXRoLnNsaWNlKGtleS5s
        ZW5ndGgrMSk7CiAgICBub2RlLmNoYWluKGtleSwgcGF0aCk7IC8vIE5PVEU6
        IG5vIHNyYyBtZWFucyBpdCB3aWxsIG9ic2VydmUgY2hhbmdlcy4uLgogIH0K
        fTsKCkNoYWluTm9kZVByb3RvdHlwZS51bmNoYWluID0gZnVuY3Rpb24oa2V5
        LCBwYXRoKSB7CiAgdmFyIGNoYWlucyA9IHRoaXMuX2NoYWlucywgbm9kZSA9
        IGNoYWluc1trZXldOwoKICAvLyB1bmNoYWluIHJlc3Qgb2YgcGF0aCBmaXJz
        dC4uLgogIGlmIChwYXRoICYmIHBhdGgubGVuZ3RoPjEpIHsKICAgIGtleSAg
        PSBmaXJzdEtleShwYXRoKTsKICAgIHBhdGggPSBwYXRoLnNsaWNlKGtleS5s
        ZW5ndGgrMSk7CiAgICBub2RlLnVuY2hhaW4oa2V5LCBwYXRoKTsKICB9Cgog
        IC8vIGRlbGV0ZSBub2RlIGlmIG5lZWRlZC4KICBub2RlLmNvdW50LS07CiAg
        aWYgKG5vZGUuY291bnQ8PTApIHsKICAgIGRlbGV0ZSBjaGFpbnNbbm9kZS5f
        a2V5XTsKICAgIG5vZGUuZGVzdHJveSgpOwogIH0KCn07CgpDaGFpbk5vZGVQ
        cm90b3R5cGUud2lsbENoYW5nZSA9IGZ1bmN0aW9uKGV2ZW50cykgewogIHZh
        ciBjaGFpbnMgPSB0aGlzLl9jaGFpbnM7CiAgaWYgKGNoYWlucykgewogICAg
        Zm9yKHZhciBrZXkgaW4gY2hhaW5zKSB7CiAgICAgIGlmICghY2hhaW5zLmhh
        c093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KICAgICAgY2hhaW5z
        W2tleV0ud2lsbENoYW5nZShldmVudHMpOwogICAgfQogIH0KCiAgaWYgKHRo
        aXMuX3BhcmVudCkgeyB0aGlzLl9wYXJlbnQuY2hhaW5XaWxsQ2hhbmdlKHRo
        aXMsIHRoaXMuX2tleSwgMSwgZXZlbnRzKTsgfQp9OwoKQ2hhaW5Ob2RlUHJv
        dG90eXBlLmNoYWluV2lsbENoYW5nZSA9IGZ1bmN0aW9uKGNoYWluLCBwYXRo
        LCBkZXB0aCwgZXZlbnRzKSB7CiAgaWYgKHRoaXMuX2tleSkgeyBwYXRoID0g
        dGhpcy5fa2V5ICsgJy4nICsgcGF0aDsgfQoKICBpZiAodGhpcy5fcGFyZW50
        KSB7CiAgICB0aGlzLl9wYXJlbnQuY2hhaW5XaWxsQ2hhbmdlKHRoaXMsIHBh
        dGgsIGRlcHRoKzEsIGV2ZW50cyk7CiAgfSBlbHNlIHsKICAgIGlmIChkZXB0
        aCA+IDEpIHsKICAgICAgZXZlbnRzLnB1c2godGhpcy52YWx1ZSgpLCBwYXRo
        KTsKICAgIH0KICAgIHBhdGggPSAndGhpcy4nICsgcGF0aDsKICAgIGlmICh0
        aGlzLl9wYXRoc1twYXRoXSA+IDApIHsKICAgICAgZXZlbnRzLnB1c2godGhp
        cy52YWx1ZSgpLCBwYXRoKTsKICAgIH0KICB9Cn07CgpDaGFpbk5vZGVQcm90
        b3R5cGUuY2hhaW5EaWRDaGFuZ2UgPSBmdW5jdGlvbihjaGFpbiwgcGF0aCwg
        ZGVwdGgsIGV2ZW50cykgewogIGlmICh0aGlzLl9rZXkpIHsgcGF0aCA9IHRo
        aXMuX2tleSArICcuJyArIHBhdGg7IH0KICBpZiAodGhpcy5fcGFyZW50KSB7
        CiAgICB0aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFuZ2UodGhpcywgcGF0aCwg
        ZGVwdGgrMSwgZXZlbnRzKTsKICB9IGVsc2UgewogICAgaWYgKGRlcHRoID4g
        MSkgewogICAgICBldmVudHMucHVzaCh0aGlzLnZhbHVlKCksIHBhdGgpOwog
        ICAgfQogICAgcGF0aCA9ICd0aGlzLicgKyBwYXRoOwogICAgaWYgKHRoaXMu
        X3BhdGhzW3BhdGhdID4gMCkgewogICAgICBldmVudHMucHVzaCh0aGlzLnZh
        bHVlKCksIHBhdGgpOwogICAgfQogIH0KfTsKCkNoYWluTm9kZVByb3RvdHlw
        ZS5kaWRDaGFuZ2UgPSBmdW5jdGlvbihldmVudHMpIHsKICAvLyBpbnZhbGlk
        YXRlIG15IG93biB2YWx1ZSBmaXJzdC4KICBpZiAodGhpcy5fd2F0Y2hpbmcp
        IHsKICAgIHZhciBvYmogPSB0aGlzLl9wYXJlbnQudmFsdWUoKTsKICAgIGlm
        IChvYmogIT09IHRoaXMuX29iamVjdCkgewogICAgICByZW1vdmVDaGFpbldh
        dGNoZXIodGhpcy5fb2JqZWN0LCB0aGlzLl9rZXksIHRoaXMpOwogICAgICB0
        aGlzLl9vYmplY3QgPSBvYmo7CiAgICAgIGFkZENoYWluV2F0Y2hlcihvYmos
        IHRoaXMuX2tleSwgdGhpcyk7CiAgICB9CiAgICB0aGlzLl92YWx1ZSAgPSB1
        bmRlZmluZWQ7CgogICAgLy8gU3BlY2lhbC1jYXNlOiB0aGUgRWFjaFByb3h5
        IHJlbGllcyBvbiBpbW1lZGlhdGUgZXZhbHVhdGlvbiB0bwogICAgLy8gZXN0
        YWJsaXNoIGl0cyBvYnNlcnZlcnMuCiAgICBpZiAodGhpcy5fcGFyZW50ICYm
        IHRoaXMuX3BhcmVudC5fa2V5ID09PSAnQGVhY2gnKQogICAgICB0aGlzLnZh
        bHVlKCk7CiAgfQoKICAvLyB0aGVuIG5vdGlmeSBjaGFpbnMuLi4KICB2YXIg
        Y2hhaW5zID0gdGhpcy5fY2hhaW5zOwogIGlmIChjaGFpbnMpIHsKICAgIGZv
        cih2YXIga2V5IGluIGNoYWlucykgewogICAgICBpZiAoIWNoYWlucy5oYXNP
        d25Qcm9wZXJ0eShrZXkpKSB7IGNvbnRpbnVlOyB9CiAgICAgIGNoYWluc1tr
        ZXldLmRpZENoYW5nZShldmVudHMpOwogICAgfQogIH0KCiAgLy8gaWYgbm8g
        ZXZlbnRzIGFyZSBwYXNzZWQgaW4gdGhlbiB3ZSBvbmx5IGNhcmUgYWJvdXQg
        dGhlIGFib3ZlIHdpcmluZyB1cGRhdGUKICBpZiAoZXZlbnRzID09PSBudWxs
        KSB7IHJldHVybjsgfQoKICAvLyBhbmQgZmluYWxseSB0ZWxsIHBhcmVudCBh
        Ym91dCBteSBwYXRoIGNoYW5naW5nLi4uCiAgaWYgKHRoaXMuX3BhcmVudCkg
        eyB0aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFuZ2UodGhpcywgdGhpcy5fa2V5
        LCAxLCBldmVudHMpOyB9Cn07CgpFbWJlci5maW5pc2hDaGFpbnMgPSBmdW5j
        dGlvbihvYmopIHsKICB2YXIgbSA9IG1ldGFGb3Iob2JqLCBmYWxzZSksIGNo
        YWlucyA9IG0uY2hhaW5zOwogIGlmIChjaGFpbnMpIHsKICAgIGlmIChjaGFp
        bnMudmFsdWUoKSAhPT0gb2JqKSB7CiAgICAgIG0uY2hhaW5zID0gY2hhaW5z
        ID0gY2hhaW5zLmNvcHkob2JqKTsKICAgIH0KICAgIGNoYWlucy5kaWRDaGFu
        Z2UobnVsbCk7CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        ICBAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgppZiAoRW1iZXIuRkVBVFVSRVMu
        aXNFbmFibGVkKCdwcm9wZXJ0eUJyYWNlRXhwYW5zaW9uJykpIHsKICB2YXIg
        Zm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAg
        ICBJU19CUkFDRV9FWFBBTlNJT04gPSAvXlx7KFteLl0qKVx9JC87CgogIC8q
        KgogICAgRXhwYW5kcyBgcGF0dGVybmAsIGludm9raW5nIGBjYWxsYmFja2Ag
        Zm9yIGVhY2ggZXhwYW5zaW9uLgoKICAgIFRoZSBvbmx5IHBhdHRlcm4gc3Vw
        cG9ydGVkIGlzIGJyYWNlLWV4cGFuc2lvbiwgYW55dGhpbmcgZWxzZSB3aWxs
        IGJlIHBhc3NlZAogICAgb25jZSB0byBgY2FsbGJhY2tgIGRpcmVjdGx5LiAg
        RnVydGhlcm1vcmUsIGJyYWNlLWV4cGFuc2lvbiBpcyBvbmx5IGFwcGxpZWQg
        dG8KICAgIHRoZSBlbnRpcmUgcGF0dGVybiwgbm90IHRvIHN1YnN0cmluZ3Mu
        CgogICAgRXhhbXBsZQogICAgYGBganMKICAgIGZ1bmN0aW9uIGVjaG8oYXJn
        KXsgY29uc29sZS5sb2coYXJnKTsgfQoKICAgIEVtYmVyLmV4cGFuZFByb3Bl
        cnRpZXMoJ2Zvby5iYXInLCBlY2hvKTsgICAgICAgIC8vPT4gJ2Zvby5iYXIn
        CiAgICBFbWJlci5leHBhbmRQcm9wZXJ0aWVzKCd7Zm9vLGJhcn0nLCBlY2hv
        KTsgICAgICAvLz0+ICdmb28nLCAnYmFyJwogICAgRW1iZXIuZXhwYW5kUHJv
        cGVydGllcygnZm9vLntiYXIsYmF6fScsIGVjaG8pOyAgLy89PiAnZm9vLnti
        YXIsYmF6fScKICAgIGBgYAoKICAgIEBtZXRob2QKICAgIEBwcml2YXRlCiAg
        ICBAcGFyYW0ge3N0cmluZ30gcGF0dGVybiBUaGUgcHJvcGVydHkgcGF0dGVy
        biB0byBleHBhbmQuCiAgICBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBU
        aGUgY2FsbGJhY2sgdG8gaW52b2tlLiAgSXQgaXMgaW52b2tlZCBvbmNlIHBl
        cgogICAgZXhwYW5zaW9uLCBhbmQgaXMgcGFzc2VkIHRoZSBleHBhbnNpb24u
        CiAgKi8KICBFbWJlci5leHBhbmRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHBh
        dHRlcm4sIGNhbGxiYWNrKSB7CiAgICBpZiAoSVNfQlJBQ0VfRVhQQU5TSU9O
        LnRlc3QocGF0dGVybikpIHsKICAgICAgZm9yRWFjaChwYXR0ZXJuLnN1YnN0
        cmluZygxLCBwYXR0ZXJuLmxlbmd0aC0xKS5zcGxpdCgnLCcpLCBjYWxsYmFj
        ayk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjYWxsYmFjayhwYXR0ZXJu
        KTsKICB9Owp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBtZXRhRm9y
        ID0gRW1iZXIubWV0YSwgLy8gdXRpbHMuanMKICAgIHR5cGVPZiA9IEVtYmVy
        LnR5cGVPZiwgLy8gdXRpbHMuanMKICAgIENoYWluTm9kZSA9IEVtYmVyLl9D
        aGFpbk5vZGU7IC8vIGNoYWlucy5qcwoKLy8gZ2V0IHRoZSBjaGFpbnMgZm9y
        IHRoZSBjdXJyZW50IG9iamVjdC4gSWYgdGhlIGN1cnJlbnQgb2JqZWN0IGhh
        cwovLyBjaGFpbnMgaW5oZXJpdGVkIGZyb20gdGhlIHByb3RvIHRoZXkgd2ls
        bCBiZSBjbG9uZWQgYW5kIHJlY29uZmlndXJlZCBmb3IKLy8gdGhlIGN1cnJl
        bnQgb2JqZWN0LgpmdW5jdGlvbiBjaGFpbnNGb3Iob2JqKSB7CiAgdmFyIG0g
        PSBtZXRhRm9yKG9iaiksIHJldCA9IG0uY2hhaW5zOwogIGlmICghcmV0KSB7
        CiAgICByZXQgPSBtLmNoYWlucyA9IG5ldyBDaGFpbk5vZGUobnVsbCwgbnVs
        bCwgb2JqKTsKICB9IGVsc2UgaWYgKHJldC52YWx1ZSgpICE9PSBvYmopIHsK
        ICAgIHJldCA9IG0uY2hhaW5zID0gcmV0LmNvcHkob2JqKTsKICB9CiAgcmV0
        dXJuIHJldDsKfQoKRW1iZXIud2F0Y2hQYXRoID0gZnVuY3Rpb24ob2JqLCBr
        ZXlQYXRoKSB7CiAgLy8gY2FuJ3Qgd2F0Y2ggbGVuZ3RoIG9uIEFycmF5IC0g
        aXQgaXMgc3BlY2lhbC4uLgogIGlmIChrZXlQYXRoID09PSAnbGVuZ3RoJyAm
        JiB0eXBlT2Yob2JqKSA9PT0gJ2FycmF5JykgeyByZXR1cm47IH0KCiAgdmFy
        IG0gPSBtZXRhRm9yKG9iaiksIHdhdGNoaW5nID0gbS53YXRjaGluZzsKCiAg
        aWYgKCF3YXRjaGluZ1trZXlQYXRoXSkgeyAvLyBhY3RpdmF0ZSB3YXRjaGlu
        ZyBmaXJzdCB0aW1lCiAgICB3YXRjaGluZ1trZXlQYXRoXSA9IDE7CiAgICBj
        aGFpbnNGb3Iob2JqKS5hZGQoa2V5UGF0aCk7CiAgfSBlbHNlIHsKICAgIHdh
        dGNoaW5nW2tleVBhdGhdID0gKHdhdGNoaW5nW2tleVBhdGhdIHx8IDApICsg
        MTsKICB9Cn07CgpFbWJlci51bndhdGNoUGF0aCA9IGZ1bmN0aW9uKG9iaiwg
        a2V5UGF0aCkgewogIHZhciBtID0gbWV0YUZvcihvYmopLCB3YXRjaGluZyA9
        IG0ud2F0Y2hpbmc7CgogIGlmICh3YXRjaGluZ1trZXlQYXRoXSA9PT0gMSkg
        ewogICAgd2F0Y2hpbmdba2V5UGF0aF0gPSAwOwogICAgY2hhaW5zRm9yKG9i
        aikucmVtb3ZlKGtleVBhdGgpOwogIH0gZWxzZSBpZiAod2F0Y2hpbmdba2V5
        UGF0aF0gPiAxKSB7CiAgICB3YXRjaGluZ1trZXlQYXRoXS0tOwogIH0KfTsK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlci1tZXRh
        bAoqLwoKdmFyIG1ldGFGb3IgPSBFbWJlci5tZXRhLCAvLyB1dGlscy5qcwog
        ICAgR1VJRF9LRVkgPSBFbWJlci5HVUlEX0tFWSwgLy8gdXRpbHMuanMKICAg
        IE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVksIC8vIHV0aWxzLmpzCiAgICBy
        ZW1vdmVDaGFpbldhdGNoZXIgPSBFbWJlci5yZW1vdmVDaGFpbldhdGNoZXIs
        CiAgICB3YXRjaEtleSA9IEVtYmVyLndhdGNoS2V5LCAvLyB3YXRjaF9rZXku
        anMKICAgIHVud2F0Y2hLZXkgPSBFbWJlci51bndhdGNoS2V5LAogICAgd2F0
        Y2hQYXRoID0gRW1iZXIud2F0Y2hQYXRoLCAvLyB3YXRjaF9wYXRoLmpzCiAg
        ICB1bndhdGNoUGF0aCA9IEVtYmVyLnVud2F0Y2hQYXRoLAogICAgdHlwZU9m
        ID0gRW1iZXIudHlwZU9mLCAvLyB1dGlscy5qcwogICAgZ2VuZXJhdGVHdWlk
        ID0gRW1iZXIuZ2VuZXJhdGVHdWlkLAogICAgSVNfUEFUSCA9IC9bXC5cKl0v
        OwoKaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgncHJvcGVydHlCcmFj
        ZUV4cGFuc2lvbicpKSB7CiAgdmFyIGV4cGFuZFByb3BlcnRpZXMgPSBFbWJl
        ci5leHBhbmRQcm9wZXJ0aWVzOwp9CgovLyByZXR1cm5zIHRydWUgaWYgdGhl
        IHBhc3NlZCBwYXRoIGlzIGp1c3QgYSBrZXlOYW1lCmZ1bmN0aW9uIGlzS2V5
        TmFtZShwYXRoKSB7CiAgcmV0dXJuIHBhdGg9PT0nKicgfHwgIUlTX1BBVEgu
        dGVzdChwYXRoKTsKfQoKLyoqCiAgQHByaXZhdGUKCiAgU3RhcnRzIHdhdGNo
        aW5nIGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBXaGVuZXZlciB0aGUgcHJv
        cGVydHkgY2hhbmdlcywKICBpbnZva2VzIGBFbWJlci5wcm9wZXJ0eVdpbGxD
        aGFuZ2VgIGFuZCBgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2VgLiBUaGlzIGlz
        IHRoZQogIHByaW1pdGl2ZSB1c2VkIGJ5IG9ic2VydmVycyBhbmQgZGVwZW5k
        ZW50IGtleXM7IHVzdWFsbHkgeW91IHdpbGwgbmV2ZXIgY2FsbAogIHRoaXMg
        bWV0aG9kIGRpcmVjdGx5IGJ1dCBpbnN0ZWFkIHVzZSBoaWdoZXIgbGV2ZWwg
        bWV0aG9kcyBsaWtlCiAgYEVtYmVyLmFkZE9ic2VydmVyKClgCgogIEBtZXRo
        b2Qgd2F0Y2gKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7
        U3RyaW5nfSBrZXlOYW1lCiovCkVtYmVyLndhdGNoID0gZnVuY3Rpb24ob2Jq
        LCBfa2V5UGF0aCkgewogIC8vIGNhbid0IHdhdGNoIGxlbmd0aCBvbiBBcnJh
        eSAtIGl0IGlzIHNwZWNpYWwuLi4KICBpZiAoX2tleVBhdGggPT09ICdsZW5n
        dGgnICYmIHR5cGVPZihvYmopID09PSAnYXJyYXknKSB7IHJldHVybjsgfQoK
        ICBpZiAoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCdwcm9wZXJ0eUJyYWNl
        RXhwYW5zaW9uJykpIHsKICAgIGV4cGFuZFByb3BlcnRpZXMoX2tleVBhdGgs
        IGZ1bmN0aW9uIChrZXlQYXRoKSB7CiAgICAgIGlmIChpc0tleU5hbWUoa2V5
        UGF0aCkpIHsKICAgICAgICB3YXRjaEtleShvYmosIGtleVBhdGgpOwogICAg
        ICB9IGVsc2UgewogICAgICAgIHdhdGNoUGF0aChvYmosIGtleVBhdGgpOwog
        ICAgICB9CiAgICB9KTsKICB9IGVsc2UgewogICAgaWYgKGlzS2V5TmFtZShf
        a2V5UGF0aCkpIHsKICAgICAgd2F0Y2hLZXkob2JqLCBfa2V5UGF0aCk7CiAg
        ICB9IGVsc2UgewogICAgICB3YXRjaFBhdGgob2JqLCBfa2V5UGF0aCk7CiAg
        ICB9CiAgfQp9OwoKRW1iZXIuaXNXYXRjaGluZyA9IGZ1bmN0aW9uIGlzV2F0
        Y2hpbmcob2JqLCBrZXkpIHsKICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV07
        CiAgcmV0dXJuIChtZXRhICYmIG1ldGEud2F0Y2hpbmdba2V5XSkgPiAwOwp9
        OwoKRW1iZXIud2F0Y2guZmx1c2hQZW5kaW5nID0gRW1iZXIuZmx1c2hQZW5k
        aW5nQ2hhaW5zOwoKRW1iZXIudW53YXRjaCA9IGZ1bmN0aW9uKG9iaiwgX2tl
        eVBhdGgpIHsKICAvLyBjYW4ndCB3YXRjaCBsZW5ndGggb24gQXJyYXkgLSBp
        dCBpcyBzcGVjaWFsLi4uCiAgaWYgKF9rZXlQYXRoID09PSAnbGVuZ3RoJyAm
        JiB0eXBlT2Yob2JqKSA9PT0gJ2FycmF5JykgeyByZXR1cm47IH0KCiAgaWYg
        KEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgncHJvcGVydHlCcmFjZUV4cGFu
        c2lvbicpKSB7CiAgICBleHBhbmRQcm9wZXJ0aWVzKF9rZXlQYXRoLCBmdW5j
        dGlvbiAoa2V5UGF0aCkgewogICAgICBpZiAoaXNLZXlOYW1lKGtleVBhdGgp
        KSB7CiAgICAgICAgdW53YXRjaEtleShvYmosIGtleVBhdGgpOwogICAgICB9
        IGVsc2UgewogICAgICAgIHVud2F0Y2hQYXRoKG9iaiwga2V5UGF0aCk7CiAg
        ICAgIH0KICAgIH0pOwogIH0gZWxzZSB7CiAgICBpZiAoaXNLZXlOYW1lKF9r
        ZXlQYXRoKSkgewogICAgICB1bndhdGNoS2V5KG9iaiwgX2tleVBhdGgpOwog
        ICAgfSBlbHNlIHsKICAgICAgdW53YXRjaFBhdGgob2JqLCBfa2V5UGF0aCk7
        CiAgICB9CiAgfQp9OwoKLyoqCiAgQHByaXZhdGUKCiAgQ2FsbCBvbiBhbiBv
        YmplY3Qgd2hlbiB5b3UgZmlyc3QgYmVnZXQgaXQgZnJvbSBhbm90aGVyIG9i
        amVjdC4gVGhpcyB3aWxsCiAgc2V0dXAgYW55IGNoYWluZWQgd2F0Y2hlcnMg
        b24gdGhlIG9iamVjdCBpbnN0YW5jZSBhcyBuZWVkZWQuIFRoaXMgbWV0aG9k
        IGlzCiAgc2FmZSB0byBjYWxsIG11bHRpcGxlIHRpbWVzLgoKICBAbWV0aG9k
        IHJld2F0Y2gKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagoqLwpFbWJlci5y
        ZXdhdGNoID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIG0gPSBtZXRhRm9yKG9i
        aiwgZmFsc2UpLCBjaGFpbnMgPSBtLmNoYWluczsKCiAgLy8gbWFrZSBzdXJl
        IHRoZSBvYmplY3QgaGFzIGl0cyBvd24gZ3VpZC4KICBpZiAoR1VJRF9LRVkg
        aW4gb2JqICYmICFvYmouaGFzT3duUHJvcGVydHkoR1VJRF9LRVkpKSB7CiAg
        ICBnZW5lcmF0ZUd1aWQob2JqKTsKICB9CgogIC8vIG1ha2Ugc3VyZSBhbnkg
        Y2hhaW5lZCB3YXRjaGVycyB1cGRhdGUuCiAgaWYgKGNoYWlucyAmJiBjaGFp
        bnMudmFsdWUoKSAhPT0gb2JqKSB7CiAgICBtLmNoYWlucyA9IGNoYWlucy5j
        b3B5KG9iaik7CiAgfQp9OwoKdmFyIE5PREVfU1RBQ0sgPSBbXTsKCi8qKgog
        IFRlYXJzIGRvd24gdGhlIG1ldGEgb24gYW4gb2JqZWN0IHNvIHRoYXQgaXQg
        Y2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkLgogIE11bHRpcGxlIGNhbGxzIHdp
        bGwgaGF2ZSBubyBlZmZlY3QuCgogIEBtZXRob2QgZGVzdHJveQogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqICB0aGUgb2JqZWN0IHRvIGRl
        c3Ryb3kKICBAcmV0dXJuIHt2b2lkfQoqLwpFbWJlci5kZXN0cm95ID0gZnVu
        Y3Rpb24gKG9iaikgewogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwgbm9k
        ZSwgbm9kZXMsIGtleSwgbm9kZU9iamVjdDsKICBpZiAobWV0YSkgewogICAg
        b2JqW01FVEFfS0VZXSA9IG51bGw7CiAgICAvLyByZW1vdmUgY2hhaW5XYXRj
        aGVycyB0byByZW1vdmUgY2lyY3VsYXIgcmVmZXJlbmNlcyB0aGF0IHdvdWxk
        IHByZXZlbnQgR0MKICAgIG5vZGUgPSBtZXRhLmNoYWluczsKICAgIGlmIChu
        b2RlKSB7CiAgICAgIE5PREVfU1RBQ0sucHVzaChub2RlKTsKICAgICAgLy8g
        cHJvY2VzcyB0cmVlCiAgICAgIHdoaWxlIChOT0RFX1NUQUNLLmxlbmd0aCA+
        IDApIHsKICAgICAgICBub2RlID0gTk9ERV9TVEFDSy5wb3AoKTsKICAgICAg
        ICAvLyBwdXNoIGNoaWxkcmVuCiAgICAgICAgbm9kZXMgPSBub2RlLl9jaGFp
        bnM7CiAgICAgICAgaWYgKG5vZGVzKSB7CiAgICAgICAgICBmb3IgKGtleSBp
        biBub2RlcykgewogICAgICAgICAgICBpZiAobm9kZXMuaGFzT3duUHJvcGVy
        dHkoa2V5KSkgewogICAgICAgICAgICAgIE5PREVfU1RBQ0sucHVzaChub2Rl
        c1trZXldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0K
        ICAgICAgICAvLyByZW1vdmUgY2hhaW5XYXRjaGVyIGluIG5vZGUgb2JqZWN0
        CiAgICAgICAgaWYgKG5vZGUuX3dhdGNoaW5nKSB7CiAgICAgICAgICBub2Rl
        T2JqZWN0ID0gbm9kZS5fb2JqZWN0OwogICAgICAgICAgaWYgKG5vZGVPYmpl
        Y3QpIHsKICAgICAgICAgICAgcmVtb3ZlQ2hhaW5XYXRjaGVyKG5vZGVPYmpl
        Y3QsIG5vZGUuX2tleSwgbm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQog
        ICAgICB9CiAgICB9CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKRW1iZXIud2FybigiVGhlIENQ
        X0RFRkFVTFRfQ0FDSEVBQkxFIGZsYWcgaGFzIGJlZW4gcmVtb3ZlZCBhbmQg
        Y29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWx3YXlzIGNhY2hlZCBieSBkZWZh
        dWx0LiBVc2UgYHZvbGF0aWxlYCBpZiB5b3UgZG9uJ3Qgd2FudCBjYWNoaW5n
        LiIsIEVtYmVyLkVOVi5DUF9ERUZBVUxUX0NBQ0hFQUJMRSAhPT0gZmFsc2Up
        OwoKCnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQs
        CiAgICBtZXRhRm9yID0gRW1iZXIubWV0YSwKICAgIGFfc2xpY2UgPSBbXS5z
        bGljZSwKICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgTUVUQV9L
        RVkgPSBFbWJlci5NRVRBX0tFWSwKICAgIHdhdGNoID0gRW1iZXIud2F0Y2gs
        CiAgICB1bndhdGNoID0gRW1iZXIudW53YXRjaDsKCmlmIChFbWJlci5GRUFU
        VVJFUy5pc0VuYWJsZWQoJ3Byb3BlcnR5QnJhY2VFeHBhbnNpb24nKSkgewog
        IHZhciBleHBhbmRQcm9wZXJ0aWVzID0gRW1iZXIuZXhwYW5kUHJvcGVydGll
        czsKfQoKLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBERVBFTkRFTlQgS0VZUwovLwoK
        Ly8gZGF0YSBzdHJ1Y3R1cmU6Ci8vICBtZXRhLmRlcHMgPSB7Ci8vICAgJ2Rl
        cEtleSc6IHsKLy8gICAgICdrZXlOYW1lJzogY291bnQsCi8vICAgfQovLyAg
        fQoKLyoKICBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYSBtYXAgb2YgdW5pcXVl
        IGRlcGVuZGVuY2llcyBmb3IgYQogIGdpdmVuIG9iamVjdCBhbmQga2V5Lgoq
        LwpmdW5jdGlvbiBrZXlzRm9yRGVwKGRlcHNNZXRhLCBkZXBLZXkpIHsKICB2
        YXIga2V5cyA9IGRlcHNNZXRhW2RlcEtleV07CiAgaWYgKCFrZXlzKSB7CiAg
        ICAvLyBpZiB0aGVyZSBhcmUgbm8gZGVwZW5kZW5jaWVzIHlldCBmb3IgYSB0
        aGUgZ2l2ZW4ga2V5CiAgICAvLyBjcmVhdGUgYSBuZXcgZW1wdHkgbGlzdCBv
        ZiBkZXBlbmRlbmNpZXMgZm9yIHRoZSBrZXkKICAgIGtleXMgPSBkZXBzTWV0
        YVtkZXBLZXldID0ge307CiAgfSBlbHNlIGlmICghZGVwc01ldGEuaGFzT3du
        UHJvcGVydHkoZGVwS2V5KSkgewogICAgLy8gb3RoZXJ3aXNlIGlmIHRoZSBk
        ZXBlbmRlbmN5IGxpc3QgaXMgaW5oZXJpdGVkIGZyb20KICAgIC8vIGEgc3Vw
        ZXJjbGFzcywgY2xvbmUgdGhlIGhhc2gKICAgIGtleXMgPSBkZXBzTWV0YVtk
        ZXBLZXldID0gb19jcmVhdGUoa2V5cyk7CiAgfQogIHJldHVybiBrZXlzOwp9
        CgpmdW5jdGlvbiBtZXRhRm9yRGVwcyhtZXRhKSB7CiAgcmV0dXJuIGtleXNG
        b3JEZXAobWV0YSwgJ2RlcHMnKTsKfQoKZnVuY3Rpb24gYWRkRGVwZW5kZW50
        S2V5cyhkZXNjLCBvYmosIGtleU5hbWUsIG1ldGEpIHsKICAvLyB0aGUgZGVz
        Y3JpcHRvciBoYXMgYSBsaXN0IG9mIGRlcGVuZGVudCBrZXlzLCBzbwogIC8v
        IGFkZCBhbGwgb2YgaXRzIGRlcGVuZGVudCBrZXlzLgogIHZhciBkZXBLZXlz
        ID0gZGVzYy5fZGVwZW5kZW50S2V5cywgZGVwc01ldGEsIGlkeCwgbGVuLCBk
        ZXBLZXksIGtleXM7CiAgaWYgKCFkZXBLZXlzKSByZXR1cm47CgogIGRlcHNN
        ZXRhID0gbWV0YUZvckRlcHMobWV0YSk7CgogIGZvcihpZHggPSAwLCBsZW4g
        PSBkZXBLZXlzLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykgewogICAgZGVw
        S2V5ID0gZGVwS2V5c1tpZHhdOwogICAgLy8gTG9va3VwIGtleXMgbWV0YSBm
        b3IgZGVwS2V5CiAgICBrZXlzID0ga2V5c0ZvckRlcChkZXBzTWV0YSwgZGVw
        S2V5KTsKICAgIC8vIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIHRpbWVzIGRl
        cEtleSBkZXBlbmRzIG9uIGtleU5hbWUuCiAgICBrZXlzW2tleU5hbWVdID0g
        KGtleXNba2V5TmFtZV0gfHwgMCkgKyAxOwogICAgLy8gV2F0Y2ggdGhlIGRl
        cEtleQogICAgd2F0Y2gob2JqLCBkZXBLZXkpOwogIH0KfQoKZnVuY3Rpb24g
        cmVtb3ZlRGVwZW5kZW50S2V5cyhkZXNjLCBvYmosIGtleU5hbWUsIG1ldGEp
        IHsKICAvLyB0aGUgZGVzY3JpcHRvciBoYXMgYSBsaXN0IG9mIGRlcGVuZGVu
        dCBrZXlzLCBzbwogIC8vIGFkZCBhbGwgb2YgaXRzIGRlcGVuZGVudCBrZXlz
        LgogIHZhciBkZXBLZXlzID0gZGVzYy5fZGVwZW5kZW50S2V5cywgZGVwc01l
        dGEsIGlkeCwgbGVuLCBkZXBLZXksIGtleXM7CiAgaWYgKCFkZXBLZXlzKSBy
        ZXR1cm47CgogIGRlcHNNZXRhID0gbWV0YUZvckRlcHMobWV0YSk7CgogIGZv
        cihpZHggPSAwLCBsZW4gPSBkZXBLZXlzLmxlbmd0aDsgaWR4IDwgbGVuOyBp
        ZHgrKykgewogICAgZGVwS2V5ID0gZGVwS2V5c1tpZHhdOwogICAgLy8gTG9v
        a3VwIGtleXMgbWV0YSBmb3IgZGVwS2V5CiAgICBrZXlzID0ga2V5c0ZvckRl
        cChkZXBzTWV0YSwgZGVwS2V5KTsKICAgIC8vIEluY3JlbWVudCB0aGUgbnVt
        YmVyIG9mIHRpbWVzIGRlcEtleSBkZXBlbmRzIG9uIGtleU5hbWUuCiAgICBr
        ZXlzW2tleU5hbWVdID0gKGtleXNba2V5TmFtZV0gfHwgMCkgLSAxOwogICAg
        Ly8gV2F0Y2ggdGhlIGRlcEtleQogICAgdW53YXRjaChvYmosIGRlcEtleSk7
        CiAgfQp9CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIENPTVBVVEVEIFBST1BFUlRZ
        Ci8vCgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRyYW5zZm9ybXMgYW4g
        b2JqZWN0cyBmdW5jdGlvbiBpbnRvIGEgcHJvcGVydHkuCgogIEJ5IGRlZmF1
        bHQgdGhlIGZ1bmN0aW9uIGJhY2tpbmcgdGhlIGNvbXB1dGVkIHByb3BlcnR5
        IHdpbGwgb25seSBiZSBjYWxsZWQKICBvbmNlIGFuZCB0aGUgcmVzdWx0IHdp
        bGwgYmUgY2FjaGVkLiBZb3UgY2FuIHNwZWNpZnkgdmFyaW91cyBwcm9wZXJ0
        aWVzCiAgdGhhdCB5b3VyIGNvbXB1dGVkIHByb3BlcnR5IGlzIGRlcGVuZGVu
        dCBvbi4gVGhpcyB3aWxsIGZvcmNlIHRoZSBjYWNoZWQKICByZXN1bHQgdG8g
        YmUgcmVjb21wdXRlZCBpZiB0aGUgZGVwZW5kZW5jaWVzIGFyZSBtb2RpZmll
        ZC4KCiAgSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlIHdlIGRlY2xhcmUgYSBj
        b21wdXRlZCBwcm9wZXJ0eSAoYnkgY2FsbGluZwogIGAucHJvcGVydHkoKWAg
        b24gdGhlIGZ1bGxOYW1lIGZ1bmN0aW9uKSBhbmQgc2V0dXAgdGhlIHByb3Bl
        cnRpZXMKICBkZXBlbmRlbmNpZXMgKGRlcGVuZGluZyBvbiBmaXJzdE5hbWUg
        YW5kIGxhc3ROYW1lKS4gVGhlIGZ1bGxOYW1lIGZ1bmN0aW9uCiAgd2lsbCBi
        ZSBjYWxsZWQgb25jZSAocmVnYXJkbGVzcyBvZiBob3cgbWFueSB0aW1lcyBp
        dCBpcyBhY2Nlc3NlZCkgYXMgbG9uZwogIGFzIGl0J3MgZGVwZW5kZW5jaWVz
        IGhhdmUgbm90IGJlZW4gY2hhbmdlZC4gT25jZSBmaXJzdE5hbWUgb3IgbGFz
        dE5hbWUgYXJlIHVwZGF0ZWQKICBhbnkgZnV0dXJlIGNhbGxzIChvciBhbnl0
        aGluZyBib3VuZCkgdG8gZnVsbE5hbWUgd2lsbCBpbmNvcnBvcmF0ZSB0aGUg
        bmV3CiAgdmFsdWVzLgoKICBgYGBqYXZhc2NyaXB0CiAgUGVyc29uID0gRW1i
        ZXIuT2JqZWN0LmV4dGVuZCh7CiAgICAvLyB0aGVzZSB3aWxsIGJlIHN1cHBs
        aWVkIGJ5IGBjcmVhdGVgCiAgICBmaXJzdE5hbWU6IG51bGwsCiAgICBsYXN0
        TmFtZTogbnVsbCwKCiAgICBmdWxsTmFtZTogZnVuY3Rpb24oKSB7CiAgICAg
        IHZhciBmaXJzdE5hbWUgPSB0aGlzLmdldCgnZmlyc3ROYW1lJyk7CiAgICAg
        IHZhciBsYXN0TmFtZSA9IHRoaXMuZ2V0KCdsYXN0TmFtZScpOwoKICAgICBy
        ZXR1cm4gZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWU7CiAgICB9LnByb3Bl
        cnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnKQogIH0pOwoKICB2YXIgdG9t
        ID0gUGVyc29uLmNyZWF0ZSh7CiAgICBmaXJzdE5hbWU6ICJUb20iLAogICAg
        bGFzdE5hbWU6ICJEYWxlIgogIH0pOwoKICB0b20uZ2V0KCdmdWxsTmFtZScp
        IC8vICJUb20gRGFsZSIKICBgYGAKCiAgWW91IGNhbiBhbHNvIGRlZmluZSB3
        aGF0IEVtYmVyIHNob3VsZCBkbyB3aGVuIHNldHRpbmcgYSBjb21wdXRlZCBw
        cm9wZXJ0eS4KICBJZiB5b3UgdHJ5IHRvIHNldCBhIGNvbXB1dGVkIHByb3Bl
        cnR5LCBpdCB3aWxsIGJlIGludm9rZWQgd2l0aCB0aGUga2V5IGFuZAogIHZh
        bHVlIHlvdSB3YW50IHRvIHNldCBpdCB0by4gWW91IGNhbiBhbHNvIGFjY2Vw
        dCB0aGUgcHJldmlvdXMgdmFsdWUgYXMgdGhlCiAgdGhpcmQgcGFyYW1ldGVy
        LgoKICBgYGBqYXZhc2NyaXB0CgogUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICAvLyB0aGVzZSB3aWxsIGJlIHN1cHBsaWVkIGJ5IGBjcmVh
        dGVgCiAgICBmaXJzdE5hbWU6IG51bGwsCiAgICBsYXN0TmFtZTogbnVsbCwK
        CiAgICBmdWxsTmFtZTogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb2xkVmFsdWUp
        IHsKICAgICAgLy8gZ2V0dGVyCiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3Ro
        ID09PSAxKSB7CiAgICAgICAgdmFyIGZpcnN0TmFtZSA9IHRoaXMuZ2V0KCdm
        aXJzdE5hbWUnKTsKICAgICAgICB2YXIgbGFzdE5hbWUgPSB0aGlzLmdldCgn
        bGFzdE5hbWUnKTsKCiAgICAgICAgcmV0dXJuIGZpcnN0TmFtZSArICcgJyAr
        IGxhc3ROYW1lOwoKICAgICAgLy8gc2V0dGVyCiAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5zcGxpdCgiICIpOwoKICAgICAgICB0
        aGlzLnNldCgnZmlyc3ROYW1lJywgbmFtZVswXSk7CiAgICAgICAgdGhpcy5z
        ZXQoJ2xhc3ROYW1lJywgbmFtZVsxXSk7CgogICAgICAgIHJldHVybiB2YWx1
        ZTsKICAgICAgfQogICAgfS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3RO
        YW1lJykKICB9KTsKCiAgdmFyIHBlcnNvbiA9IFBlcnNvbi5jcmVhdGUoKTsK
        ICBwZXJzb24uc2V0KCdmdWxsTmFtZScsICJQZXRlciBXYWdlbmV0Iik7CiAg
        cGVyc29uLmdldCgnZmlyc3ROYW1lJykgLy8gUGV0ZXIKICBwZXJzb24uZ2V0
        KCdsYXN0TmFtZScpIC8vIFdhZ2VuZXQKICBgYGAKCiAgQGNsYXNzIENvbXB1
        dGVkUHJvcGVydHkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1i
        ZXIuRGVzY3JpcHRvcgogIEBjb25zdHJ1Y3RvcgoqLwpmdW5jdGlvbiBDb21w
        dXRlZFByb3BlcnR5KGZ1bmMsIG9wdHMpIHsKICB0aGlzLmZ1bmMgPSBmdW5j
        OwoKICB0aGlzLl9jYWNoZWFibGUgPSAob3B0cyAmJiBvcHRzLmNhY2hlYWJs
        ZSAhPT0gdW5kZWZpbmVkKSA/IG9wdHMuY2FjaGVhYmxlIDogdHJ1ZTsKICB0
        aGlzLl9kZXBlbmRlbnRLZXlzID0gb3B0cyAmJiBvcHRzLmRlcGVuZGVudEtl
        eXM7CiAgdGhpcy5fcmVhZE9ubHkgPSBvcHRzICYmIChvcHRzLnJlYWRPbmx5
        ICE9PSB1bmRlZmluZWQgfHwgISFvcHRzLnJlYWRPbmx5KTsKfQoKRW1iZXIu
        Q29tcHV0ZWRQcm9wZXJ0eSA9IENvbXB1dGVkUHJvcGVydHk7CkNvbXB1dGVk
        UHJvcGVydHkucHJvdG90eXBlID0gbmV3IEVtYmVyLkRlc2NyaXB0b3IoKTsK
        CnZhciBDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlID0gQ29tcHV0ZWRQcm9w
        ZXJ0eS5wcm90b3R5cGU7CgovKioKICBQcm9wZXJ0aWVzIGFyZSBjYWNoZWFi
        bGUgYnkgZGVmYXVsdC4gQ29tcHV0ZWQgcHJvcGVydHkgd2lsbCBhdXRvbWF0
        aWNhbGx5CiAgY2FjaGUgdGhlIHJldHVybiB2YWx1ZSBvZiB5b3VyIGZ1bmN0
        aW9uIHVudGlsIG9uZSBvZiB0aGUgZGVwZW5kZW50IGtleXMgY2hhbmdlcy4K
        CiAgQ2FsbCBgdm9sYXRpbGUoKWAgdG8gc2V0IGl0IGludG8gbm9uLWNhY2hl
        ZCBtb2RlLiBXaGVuIGluIHRoaXMgbW9kZQogIHRoZSBjb21wdXRlZCBwcm9w
        ZXJ0eSB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IGNhY2hlIHRoZSByZXR1cm4g
        dmFsdWUuCgogIEhvd2V2ZXIsIGlmIGEgcHJvcGVydHkgaXMgcHJvcGVybHkg
        b2JzZXJ2YWJsZSwgdGhlcmUgaXMgbm8gcmVhc29uIHRvIGRpc2FibGUKICBj
        YWNoaW5nLgoKICBAbWV0aG9kIGNhY2hlYWJsZQogIEBwYXJhbSB7Qm9vbGVh
        bn0gYUZsYWcgb3B0aW9uYWwgc2V0IHRvIGBmYWxzZWAgdG8gZGlzYWJsZSBj
        YWNoaW5nCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gdGhp
        cwogIEBjaGFpbmFibGUKKi8KQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS5j
        YWNoZWFibGUgPSBmdW5jdGlvbihhRmxhZykgewogIHRoaXMuX2NhY2hlYWJs
        ZSA9IGFGbGFnICE9PSBmYWxzZTsKICByZXR1cm4gdGhpczsKfTsKCi8qKgog
        IENhbGwgb24gYSBjb21wdXRlZCBwcm9wZXJ0eSB0byBzZXQgaXQgaW50byBu
        b24tY2FjaGVkIG1vZGUuIFdoZW4gaW4gdGhpcwogIG1vZGUgdGhlIGNvbXB1
        dGVkIHByb3BlcnR5IHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgY2FjaGUgdGhl
        IHJldHVybiB2YWx1ZS4KCiAgYGBgamF2YXNjcmlwdAogIE15QXBwLm91dHNp
        ZGVTZXJ2aWNlID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICB2YWx1ZTog
        ZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBPdXRzaWRlU2VydmljZS5nZXRW
        YWx1ZSgpOwogICAgfS5wcm9wZXJ0eSgpLnZvbGF0aWxlKCkKICB9KTsKICBg
        YGAKCiAgQG1ldGhvZCB2b2xhdGlsZQogIEByZXR1cm4ge0VtYmVyLkNvbXB1
        dGVkUHJvcGVydHl9IHRoaXMKICBAY2hhaW5hYmxlCiovCkNvbXB1dGVkUHJv
        cGVydHlQcm90b3R5cGUudm9sYXRpbGUgPSBmdW5jdGlvbigpIHsKICByZXR1
        cm4gdGhpcy5jYWNoZWFibGUoZmFsc2UpOwp9OwoKLyoqCiAgQ2FsbCBvbiBh
        IGNvbXB1dGVkIHByb3BlcnR5IHRvIHNldCBpdCBpbnRvIHJlYWQtb25seSBt
        b2RlLiBXaGVuIGluIHRoaXMKICBtb2RlIHRoZSBjb21wdXRlZCBwcm9wZXJ0
        eSB3aWxsIHRocm93IGFuIGVycm9yIHdoZW4gc2V0LgoKICBgYGBqYXZhc2Ny
        aXB0CiAgTXlBcHAucGVyc29uID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAg
        ICBndWlkOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICdndWlkLWd1aWQt
        Z3VpZCc7CiAgICB9LnByb3BlcnR5KCkucmVhZE9ubHkoKQogIH0pOwoKICBN
        eUFwcC5wZXJzb24uc2V0KCdndWlkJywgJ25ldy1ndWlkJyk7IC8vIHdpbGwg
        dGhyb3cgYW4gZXhjZXB0aW9uCiAgYGBgCgogIEBtZXRob2QgcmVhZE9ubHkK
        ICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSB0aGlzCiAgQGNo
        YWluYWJsZQoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLnJlYWRPbmx5
        ID0gZnVuY3Rpb24ocmVhZE9ubHkpIHsKICB0aGlzLl9yZWFkT25seSA9IHJl
        YWRPbmx5ID09PSB1bmRlZmluZWQgfHwgISFyZWFkT25seTsKICByZXR1cm4g
        dGhpczsKfTsKCi8qKgogIFNldHMgdGhlIGRlcGVuZGVudCBrZXlzIG9uIHRo
        aXMgY29tcHV0ZWQgcHJvcGVydHkuIFBhc3MgYW55IG51bWJlciBvZgogIGFy
        Z3VtZW50cyBjb250YWluaW5nIGtleSBwYXRocyB0aGF0IHRoaXMgY29tcHV0
        ZWQgcHJvcGVydHkgZGVwZW5kcyBvbi4KCiAgYGBgamF2YXNjcmlwdAogIE15
        QXBwLnByZXNpZGVudCA9IEVtYmVyLk9iamVjdC5jcmVhdGUoewogICAgZnVs
        bE5hbWU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICByZXR1
        cm4gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhpcy5nZXQoJ2xh
        c3ROYW1lJyk7CgogICAgICAvLyBUZWxsIEVtYmVyIHRoYXQgdGhpcyBjb21w
        dXRlZCBwcm9wZXJ0eSBkZXBlbmRzIG9uIGZpcnN0TmFtZQogICAgICAvLyBh
        bmQgbGFzdE5hbWUKICAgIH0pLnByb3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFz
        dE5hbWUnKQogIH0pOwogIGBgYAoKICBAbWV0aG9kIHByb3BlcnR5CiAgQHBh
        cmFtIHtTdHJpbmd9IHBhdGgqIHplcm8gb3IgbW9yZSBwcm9wZXJ0eSBwYXRo
        cwogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IHRoaXMKICBA
        Y2hhaW5hYmxlCiovCkNvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUucHJvcGVy
        dHkgPSBmdW5jdGlvbigpIHsKICB2YXIgYWRkQXJnOwoKICBpZiAoRW1iZXIu
        RkVBVFVSRVMuaXNFbmFibGVkKCdwcm9wZXJ0eUJyYWNlRXhwYW5zaW9uJykp
        IHsKICAgIC8vIFNsaWdodGx5IG9kZCBzZXR1cCB0byBrZWVwIEpTSGludCBo
        YXBweQogICAgYWRkQXJnID0gZnVuY3Rpb24oYXJnKSB7IGFyZ3MucHVzaChh
        cmcpOyB9OwogIH0KCiAgdmFyIGFyZ3MgPSBbXTsKICBmb3IgKHZhciBpID0g
        MCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGlm
        IChFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQoJ3Byb3BlcnR5QnJhY2VFeHBh
        bnNpb24nKSkgewogICAgICBleHBhbmRQcm9wZXJ0aWVzKGFyZ3VtZW50c1tp
        XSwgYWRkQXJnKTsKICAgIH0gZWxzZSB7CiAgICAgIGFyZ3MucHVzaChhcmd1
        bWVudHNbaV0pOwogICAgfQogIH0KICB0aGlzLl9kZXBlbmRlbnRLZXlzID0g
        YXJnczsKICByZXR1cm4gdGhpczsKfTsKCi8qKgogIEluIHNvbWUgY2FzZXMs
        IHlvdSBtYXkgd2FudCB0byBhbm5vdGF0ZSBjb21wdXRlZCBwcm9wZXJ0aWVz
        IHdpdGggYWRkaXRpb25hbAogIG1ldGFkYXRhIGFib3V0IGhvdyB0aGV5IGZ1
        bmN0aW9uIG9yIHdoYXQgdmFsdWVzIHRoZXkgb3BlcmF0ZSBvbi4gRm9yIGV4
        YW1wbGUsCiAgY29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rpb25zIG1heSBjbG9z
        ZSBvdmVyIHZhcmlhYmxlcyB0aGF0IGFyZSB0aGVuIG5vIGxvbmdlcgogIGF2
        YWlsYWJsZSBmb3IgaW50cm9zcGVjdGlvbi4KCiAgWW91IGNhbiBwYXNzIGEg
        aGFzaCBvZiB0aGVzZSB2YWx1ZXMgdG8gYSBjb21wdXRlZCBwcm9wZXJ0eSBs
        aWtlIHRoaXM6CgogIGBgYAogIHBlcnNvbjogZnVuY3Rpb24oKSB7CiAgICB2
        YXIgcGVyc29uSWQgPSB0aGlzLmdldCgncGVyc29uSWQnKTsKICAgIHJldHVy
        biBBcHAuUGVyc29uLmNyZWF0ZSh7IGlkOiBwZXJzb25JZCB9KTsKICB9LnBy
        b3BlcnR5KCkubWV0YSh7IHR5cGU6IEFwcC5QZXJzb24gfSkKICBgYGAKCiAg
        VGhlIGhhc2ggdGhhdCB5b3UgcGFzcyB0byB0aGUgYG1ldGEoKWAgZnVuY3Rp
        b24gd2lsbCBiZSBzYXZlZCBvbiB0aGUKICBjb21wdXRlZCBwcm9wZXJ0eSBk
        ZXNjcmlwdG9yIHVuZGVyIHRoZSBgX21ldGFgIGtleS4gRW1iZXIgcnVudGlt
        ZQogIGV4cG9zZXMgYSBwdWJsaWMgQVBJIGZvciByZXRyaWV2aW5nIHRoZXNl
        IHZhbHVlcyBmcm9tIGNsYXNzZXMsCiAgdmlhIHRoZSBgbWV0YUZvclByb3Bl
        cnR5KClgIGZ1bmN0aW9uLgoKICBAbWV0aG9kIG1ldGEKICBAcGFyYW0ge0hh
        c2h9IG1ldGEKICBAY2hhaW5hYmxlCiovCgpDb21wdXRlZFByb3BlcnR5UHJv
        dG90eXBlLm1ldGEgPSBmdW5jdGlvbihtZXRhKSB7CiAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB0aGlzLl9tZXRhIHx8IHt9
        OwogIH0gZWxzZSB7CiAgICB0aGlzLl9tZXRhID0gbWV0YTsKICAgIHJldHVy
        biB0aGlzOwogIH0KfTsKCi8qIGltcGwgZGVzY3JpcHRvciBBUEkgKi8KQ29t
        cHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS5kaWRDaGFuZ2UgPSBmdW5jdGlvbihv
        YmosIGtleU5hbWUpIHsKICAvLyBfc3VzcGVuZGVkIGlzIHNldCB2aWEgYSBD
        UC5zZXQgdG8gZW5zdXJlIHdlIGRvbid0IGNsZWFyCiAgLy8gdGhlIGNhY2hl
        ZCB2YWx1ZSBzZXQgYnkgdGhlIHNldHRlcgogIGlmICh0aGlzLl9jYWNoZWFi
        bGUgJiYgdGhpcy5fc3VzcGVuZGVkICE9PSBvYmopIHsKICAgIHZhciBtZXRh
        ID0gbWV0YUZvcihvYmopOwogICAgaWYgKGtleU5hbWUgaW4gbWV0YS5jYWNo
        ZSkgewogICAgICBkZWxldGUgbWV0YS5jYWNoZVtrZXlOYW1lXTsKICAgICAg
        cmVtb3ZlRGVwZW5kZW50S2V5cyh0aGlzLCBvYmosIGtleU5hbWUsIG1ldGEp
        OwogICAgfQogIH0KfTsKCmZ1bmN0aW9uIGZpbmlzaENoYWlucyhjaGFpbk5v
        ZGVzKQp7CiAgZm9yICh2YXIgaT0wLCBsPWNoYWluTm9kZXMubGVuZ3RoOyBp
        PGw7IGkrKykgewogICAgY2hhaW5Ob2Rlc1tpXS5kaWRDaGFuZ2UobnVsbCk7
        CiAgfQp9CgovKioKICBBY2Nlc3MgdGhlIHZhbHVlIG9mIHRoZSBmdW5jdGlv
        biBiYWNraW5nIHRoZSBjb21wdXRlZCBwcm9wZXJ0eS4KICBJZiB0aGlzIHBy
        b3BlcnR5IGhhcyBhbHJlYWR5IGJlZW4gY2FjaGVkLCByZXR1cm4gdGhlIGNh
        Y2hlZCByZXN1bHQuCiAgT3RoZXJ3aXNlLCBjYWxsIHRoZSBmdW5jdGlvbiBw
        YXNzaW5nIHRoZSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LgoKICBg
        YGBqYXZhc2NyaXB0CiAgUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7
        CiAgICBmdWxsTmFtZTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgICAvLyB0
        aGUga2V5TmFtZSBwYXJhbWV0ZXIgaXMgJ2Z1bGxOYW1lJyBpbiB0aGlzIGNh
        c2UuCgogICAgICByZXR1cm4gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAn
        ICsgdGhpcy5nZXQoJ2xhc3ROYW1lJyk7CiAgICB9LnByb3BlcnR5KCdmaXJz
        dE5hbWUnLCAnbGFzdE5hbWUnKQogIH0pOwoKCiAgdmFyIHRvbSA9IFBlcnNv
        bi5jcmVhdGUoewogICAgZmlyc3ROYW1lOiAiVG9tIiwKICAgIGxhc3ROYW1l
        OiAiRGFsZSIKICB9KTsKCiAgdG9tLmdldCgnZnVsbE5hbWUnKSAvLyAiVG9t
        IERhbGUiCiAgYGBgCgogIEBtZXRob2QgZ2V0CiAgQHBhcmFtIHtTdHJpbmd9
        IGtleU5hbWUgVGhlIGtleSBiZWluZyBhY2Nlc3NlZC4KICBAcmV0dXJuIHtP
        YmplY3R9IFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIGJhY2tp
        bmcgdGhlIENQLgoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLmdldCA9
        IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSkgewogIHZhciByZXQsIGNhY2hlLCBt
        ZXRhLCBjaGFpbk5vZGVzOwogIGlmICh0aGlzLl9jYWNoZWFibGUpIHsKICAg
        IG1ldGEgPSBtZXRhRm9yKG9iaik7CiAgICBjYWNoZSA9IG1ldGEuY2FjaGU7
        CiAgICBpZiAoa2V5TmFtZSBpbiBjYWNoZSkgeyByZXR1cm4gY2FjaGVba2V5
        TmFtZV07IH0KICAgIHJldCA9IGNhY2hlW2tleU5hbWVdID0gdGhpcy5mdW5j
        LmNhbGwob2JqLCBrZXlOYW1lKTsKICAgIGNoYWluTm9kZXMgPSBtZXRhLmNo
        YWluV2F0Y2hlcnMgJiYgbWV0YS5jaGFpbldhdGNoZXJzW2tleU5hbWVdOwog
        ICAgaWYgKGNoYWluTm9kZXMpIHsgZmluaXNoQ2hhaW5zKGNoYWluTm9kZXMp
        OyB9CiAgICBhZGREZXBlbmRlbnRLZXlzKHRoaXMsIG9iaiwga2V5TmFtZSwg
        bWV0YSk7CiAgfSBlbHNlIHsKICAgIHJldCA9IHRoaXMuZnVuYy5jYWxsKG9i
        aiwga2V5TmFtZSk7CiAgfQogIHJldHVybiByZXQ7Cn07CgovKioKICBTZXQg
        dGhlIHZhbHVlIG9mIGEgY29tcHV0ZWQgcHJvcGVydHkuIElmIHRoZSBmdW5j
        dGlvbiB0aGF0IGJhY2tzIHlvdXIKICBjb21wdXRlZCBwcm9wZXJ0eSBkb2Vz
        IG5vdCBhY2NlcHQgYXJndW1lbnRzIHRoZW4gdGhlIGRlZmF1bHQgYWN0aW9u
        IGZvcgogIHNldHRpbmcgd291bGQgYmUgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0
        eSBvbiB0aGUgY3VycmVudCBvYmplY3QsIGFuZCBzZXQKICB0aGUgdmFsdWUg
        b2YgdGhlIHByb3BlcnR5IHRvIHRoZSB2YWx1ZSBiZWluZyBzZXQuCgogIEdl
        bmVyYWxseSBzcGVha2luZyBpZiB5b3UgaW50ZW5kIGZvciB5b3VyIGNvbXB1
        dGVkIHByb3BlcnR5IHRvIGJlIHNldAogIHlvdXIgYmFja2luZyBmdW5jdGlv
        biBzaG91bGQgYWNjZXB0IGVpdGhlciB0d28gb3IgdGhyZWUgYXJndW1lbnRz
        LgoKICBAbWV0aG9kIHNldAogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRo
        ZSBrZXkgYmVpbmcgYWNjZXNzZWQuCiAgQHBhcmFtIHtPYmplY3R9IG5ld1Zh
        bHVlIFRoZSBuZXcgdmFsdWUgYmVpbmcgYXNzaWduZWQuCiAgQHBhcmFtIHtT
        dHJpbmd9IG9sZFZhbHVlIFRoZSBvbGQgdmFsdWUgYmVpbmcgcmVwbGFjZWQu
        CiAgQHJldHVybiB7T2JqZWN0fSBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBm
        dW5jdGlvbiBiYWNraW5nIHRoZSBDUC4KKi8KQ29tcHV0ZWRQcm9wZXJ0eVBy
        b3RvdHlwZS5zZXQgPSBmdW5jdGlvbihvYmosIGtleU5hbWUsIHZhbHVlKSB7
        CiAgdmFyIGNhY2hlYWJsZSA9IHRoaXMuX2NhY2hlYWJsZSwKICAgICAgZnVu
        YyA9IHRoaXMuZnVuYywKICAgICAgbWV0YSA9IG1ldGFGb3Iob2JqLCBjYWNo
        ZWFibGUpLAogICAgICB3YXRjaGVkID0gbWV0YS53YXRjaGluZ1trZXlOYW1l
        XSwKICAgICAgb2xkU3VzcGVuZGVkID0gdGhpcy5fc3VzcGVuZGVkLAogICAg
        ICBoYWRDYWNoZWRWYWx1ZSA9IGZhbHNlLAogICAgICBjYWNoZSA9IG1ldGEu
        Y2FjaGUsCiAgICAgIGZ1bmNBcmdMZW5ndGgsIGNhY2hlZFZhbHVlLCByZXQ7
        CgogIGlmICh0aGlzLl9yZWFkT25seSkgewogICAgdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCdDYW5ub3QgU2V0OiAnICsga2V5TmFtZSArICcgb246ICcgKyBv
        YmoudG9TdHJpbmcoKSApOwogIH0KCiAgdGhpcy5fc3VzcGVuZGVkID0gb2Jq
        OwoKICB0cnkgewoKICAgIGlmIChjYWNoZWFibGUgJiYgY2FjaGUuaGFzT3du
        UHJvcGVydHkoa2V5TmFtZSkpIHsKICAgICAgY2FjaGVkVmFsdWUgPSBjYWNo
        ZVtrZXlOYW1lXTsKICAgICAgaGFkQ2FjaGVkVmFsdWUgPSB0cnVlOwogICAg
        fQoKICAgIC8vIENoZWNrIGlmIHRoZSBDUCBoYXMgYmVlbiB3cmFwcGVkLiBJ
        ZiBpZiBoYXMsIHVzZSB0aGUKICAgIC8vIGxlbmd0aCBmcm9tIHRoZSB3cmFw
        cGVkIGZ1bmN0aW9uLgogICAgZnVuY0FyZ0xlbmd0aCA9IChmdW5jLndyYXBw
        ZWRGdW5jdGlvbiA/IGZ1bmMud3JhcHBlZEZ1bmN0aW9uLmxlbmd0aCA6IGZ1
        bmMubGVuZ3RoKTsKCiAgICAvLyBGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxp
        dHkgd2l0aCBjb21wdXRlZCBwcm9wZXJ0aWVzCiAgICAvLyB0aGF0IGNoZWNr
        IGZvciBhcmd1bWVudHMubGVuZ3RoID09PSAyIHRvIGRldGVybWluZSBpZgog
        ICAgLy8gdGhleSBhcmUgYmVpbmcgZ2V0IG9yIHNldCwgb25seSBwYXNzIHRo
        ZSBvbGQgY2FjaGVkCiAgICAvLyB2YWx1ZSBpZiB0aGUgY29tcHV0ZWQgcHJv
        cGVydHkgb3B0cyBpbnRvIGEgdGhpcmQKICAgIC8vIGFyZ3VtZW50LgogICAg
        aWYgKGZ1bmNBcmdMZW5ndGggPT09IDMpIHsKICAgICAgcmV0ID0gZnVuYy5j
        YWxsKG9iaiwga2V5TmFtZSwgdmFsdWUsIGNhY2hlZFZhbHVlKTsKICAgIH0g
        ZWxzZSBpZiAoZnVuY0FyZ0xlbmd0aCA9PT0gMikgewogICAgICByZXQgPSBm
        dW5jLmNhbGwob2JqLCBrZXlOYW1lLCB2YWx1ZSk7CiAgICB9IGVsc2Ugewog
        ICAgICBFbWJlci5kZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIG51bGws
        IGNhY2hlZFZhbHVlKTsKICAgICAgRW1iZXIuc2V0KG9iaiwga2V5TmFtZSwg
        dmFsdWUpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGhhZENhY2hl
        ZFZhbHVlICYmIGNhY2hlZFZhbHVlID09PSByZXQpIHsgcmV0dXJuOyB9Cgog
        ICAgaWYgKHdhdGNoZWQpIHsgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKG9i
        aiwga2V5TmFtZSk7IH0KCiAgICBpZiAoaGFkQ2FjaGVkVmFsdWUpIHsKICAg
        ICAgZGVsZXRlIGNhY2hlW2tleU5hbWVdOwogICAgfQoKICAgIGlmIChjYWNo
        ZWFibGUpIHsKICAgICAgaWYgKCFoYWRDYWNoZWRWYWx1ZSkgewogICAgICAg
        IGFkZERlcGVuZGVudEtleXModGhpcywgb2JqLCBrZXlOYW1lLCBtZXRhKTsK
        ICAgICAgfQogICAgICBjYWNoZVtrZXlOYW1lXSA9IHJldDsKICAgIH0KCiAg
        ICBpZiAod2F0Y2hlZCkgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZShvYmos
        IGtleU5hbWUpOyB9CiAgfSBmaW5hbGx5IHsKICAgIHRoaXMuX3N1c3BlbmRl
        ZCA9IG9sZFN1c3BlbmRlZDsKICB9CiAgcmV0dXJuIHJldDsKfTsKCi8qIGNh
        bGxlZCBiZWZvcmUgcHJvcGVydHkgaXMgb3ZlcnJpZGRlbiAqLwpDb21wdXRl
        ZFByb3BlcnR5UHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24ob2JqLCBr
        ZXlOYW1lKSB7CiAgdmFyIG1ldGEgPSBtZXRhRm9yKG9iaik7CgogIGlmIChr
        ZXlOYW1lIGluIG1ldGEuY2FjaGUpIHsKICAgIHJlbW92ZURlcGVuZGVudEtl
        eXModGhpcywgb2JqLCBrZXlOYW1lLCBtZXRhKTsKICB9CgogIGlmICh0aGlz
        Ll9jYWNoZWFibGUpIHsgZGVsZXRlIG1ldGEuY2FjaGVba2V5TmFtZV07IH0K
        CiAgcmV0dXJuIG51bGw7IC8vIG5vIHZhbHVlIHRvIHJlc3RvcmUKfTsKCgov
        KioKICBUaGlzIGhlbHBlciByZXR1cm5zIGEgbmV3IHByb3BlcnR5IGRlc2Ny
        aXB0b3IgdGhhdCB3cmFwcyB0aGUgcGFzc2VkCiAgY29tcHV0ZWQgcHJvcGVy
        dHkgZnVuY3Rpb24uIFlvdSBjYW4gdXNlIHRoaXMgaGVscGVyIHRvIGRlZmlu
        ZSBwcm9wZXJ0aWVzCiAgd2l0aCBtaXhpbnMgb3IgdmlhIGBFbWJlci5kZWZp
        bmVQcm9wZXJ0eSgpYC4KCiAgVGhlIGZ1bmN0aW9uIHlvdSBwYXNzIHdpbGwg
        YmUgdXNlZCB0byBib3RoIGdldCBhbmQgc2V0IHByb3BlcnR5IHZhbHVlcy4K
        ICBUaGUgZnVuY3Rpb24gc2hvdWxkIGFjY2VwdCB0d28gcGFyYW1ldGVycywg
        a2V5IGFuZCB2YWx1ZS4gSWYgdmFsdWUgaXMgbm90CiAgdW5kZWZpbmVkIHlv
        dSBzaG91bGQgc2V0IHRoZSB2YWx1ZSBmaXJzdC4gSW4gZWl0aGVyIGNhc2Ug
        cmV0dXJuIHRoZQogIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHByb3BlcnR5Lgog
        IEBtZXRob2QgY29tcHV0ZWQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtGdW5j
        dGlvbn0gZnVuYyBUaGUgY29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rpb24uCiAg
        QHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gcHJvcGVydHkgZGVz
        Y3JpcHRvciBpbnN0YW5jZQoqLwpFbWJlci5jb21wdXRlZCA9IGZ1bmN0aW9u
        KGZ1bmMpIHsKICB2YXIgYXJnczsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGgg
        PiAxKSB7CiAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwg
        LTEpOwogICAgZnVuYyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVsw
        XTsKICB9CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewog
        ICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDb21wdXRlZCBQcm9wZXJ0eSBk
        ZWNsYXJlZCB3aXRob3V0IGEgcHJvcGVydHkgZnVuY3Rpb24iKTsKICB9Cgog
        IHZhciBjcCA9IG5ldyBDb21wdXRlZFByb3BlcnR5KGZ1bmMpOwoKICBpZiAo
        YXJncykgewogICAgY3AucHJvcGVydHkuYXBwbHkoY3AsIGFyZ3MpOwogIH0K
        CiAgcmV0dXJuIGNwOwp9OwoKLyoqCiAgUmV0dXJucyB0aGUgY2FjaGVkIHZh
        bHVlIGZvciBhIHByb3BlcnR5LCBpZiBvbmUgZXhpc3RzLgogIFRoaXMgY2Fu
        IGJlIHVzZWZ1bCBmb3IgcGVla2luZyBhdCB0aGUgdmFsdWUgb2YgYSBjb21w
        dXRlZAogIHByb3BlcnR5IHRoYXQgaXMgZ2VuZXJhdGVkIGxhemlseSwgd2l0
        aG91dCBhY2NpZGVudGFsbHkgY2F1c2luZwogIGl0IHRvIGJlIGNyZWF0ZWQu
        CgogIEBtZXRob2QgY2FjaGVGb3IKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtP
        YmplY3R9IG9iaiB0aGUgb2JqZWN0IHdob3NlIHByb3BlcnR5IHlvdSB3YW50
        IHRvIGNoZWNrCiAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgbmFtZSBvZiB0
        aGUgcHJvcGVydHkgd2hvc2UgY2FjaGVkIHZhbHVlIHlvdSB3YW50CiAgICB0
        byByZXR1cm4KICBAcmV0dXJuIHsqfSB0aGUgY2FjaGVkIHZhbHVlCiovCkVt
        YmVyLmNhY2hlRm9yID0gZnVuY3Rpb24gY2FjaGVGb3Iob2JqLCBrZXkpIHsK
        ICB2YXIgY2FjaGUgPSBtZXRhRm9yKG9iaiwgZmFsc2UpLmNhY2hlOwoKICBp
        ZiAoY2FjaGUgJiYga2V5IGluIGNhY2hlKSB7CiAgICByZXR1cm4gY2FjaGVb
        a2V5XTsKICB9Cn07CgpmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzKHNlbGYsIHBy
        b3BlcnR5TmFtZXMpIHsKICB2YXIgcmV0ID0ge307CiAgZm9yKHZhciBpID0g
        MDsgaSA8IHByb3BlcnR5TmFtZXMubGVuZ3RoOyBpKyspIHsKICAgIHJldFtw
        cm9wZXJ0eU5hbWVzW2ldXSA9IGdldChzZWxmLCBwcm9wZXJ0eU5hbWVzW2ld
        KTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gcmVnaXN0ZXJDb21w
        dXRlZChuYW1lLCBtYWNybykgewogIEVtYmVyLmNvbXB1dGVkW25hbWVdID0g
        ZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7CiAgICB2YXIgYXJncyA9IGFfc2xp
        Y2UuY2FsbChhcmd1bWVudHMpOwogICAgcmV0dXJuIEVtYmVyLmNvbXB1dGVk
        KGRlcGVuZGVudEtleSwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBtYWNy
        by5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9u
        IHJlZ2lzdGVyQ29tcHV0ZWRXaXRoUHJvcGVydGllcyhuYW1lLCBtYWNybykg
        ewogIEVtYmVyLmNvbXB1dGVkW25hbWVdID0gZnVuY3Rpb24oKSB7CiAgICB2
        YXIgcHJvcGVydGllcyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMpOwoKICAg
        IHZhciBjb21wdXRlZCA9IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewog
        ICAgICByZXR1cm4gbWFjcm8uYXBwbHkodGhpcywgW2dldFByb3BlcnRpZXMo
        dGhpcywgcHJvcGVydGllcyldKTsKICAgIH0pOwoKICAgIHJldHVybiBjb21w
        dXRlZC5wcm9wZXJ0eS5hcHBseShjb21wdXRlZCwgcHJvcGVydGllcyk7CiAg
        fTsKfQoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMg
        dHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhlIGRlcGVuZGVudAogIHByb3BlcnR5
        IGlzIG51bGwsIGFuIGVtcHR5IHN0cmluZywgZW1wdHkgYXJyYXksIG9yIGVt
        cHR5IGZ1bmN0aW9uLgoKICBOb3RlOiBXaGVuIHVzaW5nIGBFbWJlci5jb21w
        dXRlZC5lbXB0eWAgdG8gd2F0Y2ggYW4gYXJyYXkgbWFrZSBzdXJlIHRvCiAg
        dXNlIHRoZSBgYXJyYXkuW11gIHN5bnRheCBzbyB0aGUgY29tcHV0ZWQgY2Fu
        IHN1YnNjcmliZSB0byB0cmFuc2l0aW9ucwogIGZyb20gZW1wdHkgdG8gbm9u
        LWVtcHR5IHN0YXRlcy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAg
        dmFyIFRvRG9MaXN0ID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBkb25l
        OiBFbWJlci5jb21wdXRlZC5lbXB0eSgndG9kb3MuW10nKSAvLyBkZXRlY3Qg
        YXJyYXkgY2hhbmdlcwogIH0pOwogIHZhciB0b2RvTGlzdCA9IFRvRG9MaXN0
        LmNyZWF0ZSh7dG9kb3M6IFsnVW5pdCBUZXN0JywgJ0RvY3VtZW50YXRpb24n
        LCAnUmVsZWFzZSddfSk7CiAgdG9kb0xpc3QuZ2V0KCdkb25lJyk7IC8vIGZh
        bHNlCiAgdG9kb0xpc3QuZ2V0KCd0b2RvcycpLmNsZWFyKCk7IC8vIFtdCiAg
        dG9kb0xpc3QuZ2V0KCdkb25lJyk7IC8vIHRydWUKICBgYGAKCiAgQG1ldGhv
        ZCBjb21wdXRlZC5lbXB0eQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmlu
        Z30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9w
        ZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggbmVnYXRlCiAgdGhlIG9y
        aWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eQoqLwpyZWdpc3RlckNvbXB1dGVk
        KCdlbXB0eScsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewogIHJldHVybiBF
        bWJlci5pc0VtcHR5KGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpKTsKfSk7Cgov
        KioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0cnVlIGlm
        IHRoZSB2YWx1ZSBvZiB0aGUgZGVwZW5kZW50CiAgcHJvcGVydHkgaXMgTk9U
        IG51bGwsIGFuIGVtcHR5IHN0cmluZywgZW1wdHkgYXJyYXksIG9yIGVtcHR5
        IGZ1bmN0aW9uLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        SGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGhhc1N0dWZm
        OiBFbWJlci5jb21wdXRlZC5ub3RFbXB0eSgnYmFja3BhY2snKQogIH0pOwog
        IHZhciBoYW1wc3RlciA9IEhhbXBzdGVyLmNyZWF0ZSh7YmFja3BhY2s6IFsn
        Rm9vZCcsICdTbGVlcGluZyBCYWcnLCAnVGVudCddfSk7CiAgaGFtcHN0ZXIu
        Z2V0KCdoYXNTdHVmZicpOyAvLyB0cnVlCiAgaGFtcHN0ZXIuZ2V0KCdiYWNr
        cGFjaycpLmNsZWFyKCk7IC8vIFtdCiAgaGFtcHN0ZXIuZ2V0KCdoYXNTdHVm
        ZicpOyAvLyBmYWxzZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm5vdEVt
        cHR5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRL
        ZXkKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRl
        ZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIHRydWUgaWYKICBvcmlnaW5hbCB2
        YWx1ZSBmb3IgcHJvcGVydHkgaXMgbm90IGVtcHR5LgoqLwpyZWdpc3RlckNv
        bXB1dGVkKCdub3RFbXB0eScsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewog
        IHJldHVybiAhRW1iZXIuaXNFbXB0eShnZXQodGhpcywgZGVwZW5kZW50S2V5
        KSk7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVy
        bnMgdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhlIGRlcGVuZGVudAogIHByb3Bl
        cnR5IGlzIG51bGwgb3IgdW5kZWZpbmVkLiBUaGlzIGF2b2lkcyBlcnJvcnMg
        ZnJvbSBKU0xpbnQgY29tcGxhaW5pbmcKICBhYm91dCB1c2Ugb2YgPT0sIHdo
        aWNoIGNhbiBiZSB0ZWNobmljYWxseSBjb25mdXNpbmcuCgogIEV4YW1wbGUK
        CiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9iamVj
        dC5leHRlbmQoewogICAgaXNIdW5ncnk6IEVtYmVyLmNvbXB1dGVkLm5vbmUo
        J2Zvb2QnKQogIH0pOwogIHZhciBoYW1wc3RlciA9IEhhbXBzdGVyLmNyZWF0
        ZSgpOwogIGhhbXBzdGVyLmdldCgnaXNIdW5ncnknKTsgLy8gdHJ1ZQogIGhh
        bXBzdGVyLnNldCgnZm9vZCcsICdCYW5hbmEnKTsKICBoYW1wc3Rlci5nZXQo
        J2lzSHVuZ3J5Jyk7IC8vIGZhbHNlCiAgaGFtcHN0ZXIuc2V0KCdmb29kJywg
        bnVsbCk7CiAgaGFtcHN0ZXIuZ2V0KCdpc0h1bmdyeScpOyAvLyB0cnVlCiAg
        YGBgCgogIEBtZXRob2QgY29tcHV0ZWQubm9uZQogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIu
        Q29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2gKICBy
        ZXR1cm5zIHRydWUgaWYgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5IGlz
        IG51bGwgb3IgdW5kZWZpbmVkLgoqLwpyZWdpc3RlckNvbXB1dGVkKCdub25l
        JywgZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7CiAgcmV0dXJuIEVtYmVyLmlz
        Tm9uZShnZXQodGhpcywgZGVwZW5kZW50S2V5KSk7Cn0pOwoKLyoqCiAgQSBj
        b21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdGhlIGludmVyc2UgYm9v
        bGVhbiB2YWx1ZQogIG9mIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgdGhlIGRl
        cGVuZGVudCBwcm9wZXJ0eS4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0
        CiAgdmFyIFVzZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGlzQW5v
        bnltb3VzOiBFbWJlci5jb21wdXRlZC5ub3QoJ2xvZ2dlZEluJykKICB9KTsK
        ICB2YXIgdXNlciA9IFVzZXIuY3JlYXRlKHtsb2dnZWRJbjogZmFsc2V9KTsK
        ICB1c2VyLmdldCgnaXNBbm9ueW1vdXMnKTsgLy8gdHJ1ZQogIHVzZXIuc2V0
        KCdsb2dnZWRJbicsIHRydWUpOwogIHVzZXIuZ2V0KCdpc0Fub255bW91cycp
        OyAvLyBmYWxzZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm5vdAogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHJl
        dHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVy
        dHkgd2hpY2ggcmV0dXJucwogIGludmVyc2Ugb2YgdGhlIG9yaWdpbmFsIHZh
        bHVlIGZvciBwcm9wZXJ0eQoqLwpyZWdpc3RlckNvbXB1dGVkKCdub3QnLCBm
        dW5jdGlvbihkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gIWdldCh0aGlzLCBk
        ZXBlbmRlbnRLZXkpOwp9KTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkg
        dGhhdCBjb252ZXJ0cyB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnR5
        CiAgaW50byBhIGJvb2xlYW4gdmFsdWUuCgogIGBgYGphdmFzY3JpcHQKICB2
        YXIgSGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGhhc0Jh
        bmFuYXM6IEVtYmVyLmNvbXB1dGVkLmJvb2woJ251bUJhbmFuYXMnKQogIH0p
        OwogIHZhciBoYW1wc3RlciA9IEhhbXBzdGVyLmNyZWF0ZSgpOwogIGhhbXBz
        dGVyLmdldCgnaGFzQmFuYW5hcycpOyAvLyBmYWxzZQogIGhhbXBzdGVyLnNl
        dCgnbnVtQmFuYW5hcycsIDApOwogIGhhbXBzdGVyLmdldCgnaGFzQmFuYW5h
        cycpOyAvLyBmYWxzZQogIGhhbXBzdGVyLnNldCgnbnVtQmFuYW5hcycsIDEp
        OwogIGhhbXBzdGVyLmdldCgnaGFzQmFuYW5hcycpOyAvLyB0cnVlCiAgaGFt
        cHN0ZXIuc2V0KCdudW1CYW5hbmFzJywgbnVsbCk7CiAgaGFtcHN0ZXIuZ2V0
        KCdoYXNCYW5hbmFzJyk7IC8vIGZhbHNlCiAgYGBgCgogIEBtZXRob2QgY29t
        cHV0ZWQuYm9vbAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVw
        ZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0g
        Y29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggY29udmVydHMKICB0byBib29sZWFu
        IHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkKKi8KcmVnaXN0ZXJD
        b21wdXRlZCgnYm9vbCcsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewogIHJl
        dHVybiAhIWdldCh0aGlzLCBkZXBlbmRlbnRLZXkpOwp9KTsKCi8qKgogIEEg
        Y29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggbWF0Y2hlcyB0aGUgb3JpZ2luYWwg
        dmFsdWUgZm9yIHRoZQogIGRlcGVuZGVudCBwcm9wZXJ0eSBhZ2FpbnN0IGEg
        Z2l2ZW4gUmVnRXhwLCByZXR1cm5pbmcgYHRydWVgCiAgaWYgdGhleSB2YWx1
        ZXMgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZCBgZmFsc2VgIGlmIGl0IGRvZXMg
        bm90LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgVXNlciA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgaGFzVmFsaWRFbWFpbDogRW1i
        ZXIuY29tcHV0ZWQubWF0Y2goJ2VtYWlsJywgL14uK0AuK1wuLiskLykKICB9
        KTsKICB2YXIgdXNlciA9IFVzZXIuY3JlYXRlKHtsb2dnZWRJbjogZmFsc2V9
        KTsKICB1c2VyLmdldCgnaGFzVmFsaWRFbWFpbCcpOyAvLyBmYWxzZQogIHVz
        ZXIuc2V0KCdlbWFpbCcsICcnKTsKICB1c2VyLmdldCgnaGFzVmFsaWRFbWFp
        bCcpOyAvLyBmYWxzZQogIHVzZXIuc2V0KCdlbWFpbCcsICdlbWJlcl9oYW1w
        c3RlckBleGFtcGxlLmNvbScpOwogIHVzZXIuZ2V0KCdoYXNWYWxpZEVtYWls
        Jyk7IC8vIHRydWUKICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5tYXRjaAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAg
        QHBhcmFtIHtSZWdFeHB9IHJlZ2V4cAogIEByZXR1cm4ge0VtYmVyLkNvbXB1
        dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIG1hdGNoCiAg
        dGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eSBhZ2FpbnN0IGEgZ2l2
        ZW4gUmVnRXhwCiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ21hdGNoJywgZnVuY3Rp
        b24oZGVwZW5kZW50S2V5LCByZWdleHApIHsKICB2YXIgdmFsdWUgPSBnZXQo
        dGhpcywgZGVwZW5kZW50S2V5KTsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09
        PSAnc3RyaW5nJyA/ICEhdmFsdWUubWF0Y2gocmVnZXhwKSA6IGZhbHNlOwp9
        KTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRy
        dWUgaWYgdGhlIHByb3ZpZGVkIGRlcGVuZGVudCBwcm9wZXJ0eQogIGlzIGVx
        dWFsIHRvIHRoZSBnaXZlbiB2YWx1ZS4KCiAgRXhhbXBsZQoKICBgYGBqYXZh
        c2NyaXB0CiAgdmFyIEhhbXBzdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7
        CiAgICBuYXBUaW1lOiBFbWJlci5jb21wdXRlZC5lcXVhbCgnc3RhdGUnLCAn
        c2xlZXB5JykKICB9KTsKICB2YXIgaGFtcHN0ZXIgPSBIYW1wc3Rlci5jcmVh
        dGUoKTsKICBoYW1wc3Rlci5nZXQoJ25hcFRpbWUnKTsgLy8gZmFsc2UKICBo
        YW1wc3Rlci5zZXQoJ3N0YXRlJywgJ3NsZWVweScpOwogIGhhbXBzdGVyLmdl
        dCgnbmFwVGltZScpOyAvLyB0cnVlCiAgaGFtcHN0ZXIuc2V0KCdzdGF0ZScs
        ICdodW5ncnknKTsKICBoYW1wc3Rlci5nZXQoJ25hcFRpbWUnKTsgLy8gZmFs
        c2UKICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5lcXVhbAogIEBmb3IgRW1i
        ZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtT
        dHJpbmd8TnVtYmVyfE9iamVjdH0gdmFsdWUKICBAcmV0dXJuIHtFbWJlci5D
        b21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1
        cm5zIHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5
        IGlzIGVxdWFsIHRvIHRoZSBnaXZlbiB2YWx1ZS4KKi8KcmVnaXN0ZXJDb21w
        dXRlZCgnZXF1YWwnLCBmdW5jdGlvbihkZXBlbmRlbnRLZXksIHZhbHVlKSB7
        CiAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpID09PSB2YWx1ZTsK
        fSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0
        cnVlIGlmIHRoZSBwcm92aWVkIGRlcGVuZGVudCBwcm9wZXJ0eQogIGlzIGdy
        ZWF0ZXIgdGhhbiB0aGUgcHJvdmlkZWQgdmFsdWUuCgogIEV4YW1wbGUKCiAg
        YGBgamF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoewogICAgaGFzVG9vTWFueUJhbmFuYXM6IEVtYmVyLmNvbXB1dGVk
        Lmd0KCdudW1CYW5hbmFzJywgMTApCiAgfSk7CiAgdmFyIGhhbXBzdGVyID0g
        SGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0ZXIuZ2V0KCdoYXNUb29NYW55
        QmFuYW5hcycpOyAvLyBmYWxzZQogIGhhbXBzdGVyLnNldCgnbnVtQmFuYW5h
        cycsIDMpOwogIGhhbXBzdGVyLmdldCgnaGFzVG9vTWFueUJhbmFuYXMnKTsg
        Ly8gZmFsc2UKICBoYW1wc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAxMSk7CiAg
        aGFtcHN0ZXIuZ2V0KCdoYXNUb29NYW55QmFuYW5hcycpOyAvLyB0cnVlCiAg
        YGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZ3QKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEBwYXJhbSB7TnVtYmVyfSB2
        YWx1ZQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1
        dGVkIHByb3BlcnR5IHdoaWNoIHJldHVybnMgdHJ1ZSBpZgogIHRoZSBvcmln
        aW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkgaXMgZ3JlYXRlciB0aGVuIGdpdmVu
        IHZhbHVlLgoqLwpyZWdpc3RlckNvbXB1dGVkKCdndCcsIGZ1bmN0aW9uKGRl
        cGVuZGVudEtleSwgdmFsdWUpIHsKICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVu
        ZGVudEtleSkgPiB2YWx1ZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3Bl
        cnR5IHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBkZXBlbmRl
        bnQgcHJvcGVydHkKICBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhl
        IHByb3ZpZGVkIHZhbHVlLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQK
        ICB2YXIgSGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGhh
        c1Rvb01hbnlCYW5hbmFzOiBFbWJlci5jb21wdXRlZC5ndGUoJ251bUJhbmFu
        YXMnLCAxMCkKICB9KTsKICB2YXIgaGFtcHN0ZXIgPSBIYW1wc3Rlci5jcmVh
        dGUoKTsKICBoYW1wc3Rlci5nZXQoJ2hhc1Rvb01hbnlCYW5hbmFzJyk7IC8v
        IGZhbHNlCiAgaGFtcHN0ZXIuc2V0KCdudW1CYW5hbmFzJywgMyk7CiAgaGFt
        cHN0ZXIuZ2V0KCdoYXNUb29NYW55QmFuYW5hcycpOyAvLyBmYWxzZQogIGhh
        bXBzdGVyLnNldCgnbnVtQmFuYW5hcycsIDEwKTsKICBoYW1wc3Rlci5nZXQo
        J2hhc1Rvb01hbnlCYW5hbmFzJyk7IC8vIHRydWUKICBgYGAKCiAgQG1ldGhv
        ZCBjb21wdXRlZC5ndGUKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9
        IGRlcGVuZGVudEtleQogIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZQogIEByZXR1
        cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5
        IHdoaWNoIHJldHVybnMgdHJ1ZSBpZgogIHRoZSBvcmlnaW5hbCB2YWx1ZSBm
        b3IgcHJvcGVydHkgaXMgZ3JlYXRlciBvciBlcXVhbCB0aGVuIGdpdmVuIHZh
        bHVlLgoqLwpyZWdpc3RlckNvbXB1dGVkKCdndGUnLCBmdW5jdGlvbihkZXBl
        bmRlbnRLZXksIHZhbHVlKSB7CiAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRl
        bnRLZXkpID49IHZhbHVlOwp9KTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVy
        dHkgdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIGRlcGVuZGVu
        dCBwcm9wZXJ0eQogIGlzIGxlc3MgdGhhbiB0aGUgcHJvdmlkZWQgdmFsdWUu
        CgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgbmVlZHNNb3JlQmFuYW5hczog
        RW1iZXIuY29tcHV0ZWQubHQoJ251bUJhbmFuYXMnLCAzKQogIH0pOwogIHZh
        ciBoYW1wc3RlciA9IEhhbXBzdGVyLmNyZWF0ZSgpOwogIGhhbXBzdGVyLmdl
        dCgnbmVlZHNNb3JlQmFuYW5hcycpOyAvLyB0cnVlCiAgaGFtcHN0ZXIuc2V0
        KCdudW1CYW5hbmFzJywgMyk7CiAgaGFtcHN0ZXIuZ2V0KCduZWVkc01vcmVC
        YW5hbmFzJyk7IC8vIGZhbHNlCiAgaGFtcHN0ZXIuc2V0KCdudW1CYW5hbmFz
        JywgMik7CiAgaGFtcHN0ZXIuZ2V0KCduZWVkc01vcmVCYW5hbmFzJyk7IC8v
        IHRydWUKICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5sdAogIEBmb3IgRW1i
        ZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtO
        dW1iZXJ9IHZhbHVlCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0
        eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucyB0cnVlIGlmCiAg
        dGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eSBpcyBsZXNzIHRoZW4g
        Z2l2ZW4gdmFsdWUuCiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ2x0JywgZnVuY3Rp
        b24oZGVwZW5kZW50S2V5LCB2YWx1ZSkgewogIHJldHVybiBnZXQodGhpcywg
        ZGVwZW5kZW50S2V5KSA8IHZhbHVlOwp9KTsKCi8qKgogIEEgY29tcHV0ZWQg
        cHJvcGVydHkgdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIGRl
        cGVuZGVudCBwcm9wZXJ0eQogIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0
        aGUgcHJvdmlkZWQgdmFsdWUuCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlw
        dAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAg
        bmVlZHNNb3JlQmFuYW5hczogRW1iZXIuY29tcHV0ZWQubHRlKCdudW1CYW5h
        bmFzJywgMykKICB9KTsKICB2YXIgaGFtcHN0ZXIgPSBIYW1wc3Rlci5jcmVh
        dGUoKTsKICBoYW1wc3Rlci5nZXQoJ25lZWRzTW9yZUJhbmFuYXMnKTsgLy8g
        dHJ1ZQogIGhhbXBzdGVyLnNldCgnbnVtQmFuYW5hcycsIDUpOwogIGhhbXBz
        dGVyLmdldCgnbmVlZHNNb3JlQmFuYW5hcycpOyAvLyBmYWxzZQogIGhhbXBz
        dGVyLnNldCgnbnVtQmFuYW5hcycsIDMpOwogIGhhbXBzdGVyLmdldCgnbmVl
        ZHNNb3JlQmFuYW5hcycpOyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29t
        cHV0ZWQubHRlCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBl
        bmRlbnRLZXkKICBAcGFyYW0ge051bWJlcn0gdmFsdWUKICBAcmV0dXJuIHtF
        bWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGlj
        aCByZXR1cm5zIHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHBy
        b3BlcnR5IGlzIGxlc3Mgb3IgZXF1YWwgdGhlbiBnaXZlbiB2YWx1ZS4KKi8K
        cmVnaXN0ZXJDb21wdXRlZCgnbHRlJywgZnVuY3Rpb24oZGVwZW5kZW50S2V5
        LCB2YWx1ZSkgewogIHJldHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5KSA8
        PSB2YWx1ZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQg
        cGVyZm9ybXMgYSBsb2dpY2FsIGBhbmRgIG9uIHRoZQogIG9yaWdpbmFsIHZh
        bHVlcyBmb3IgdGhlIHByb3ZpZGVkIGRlcGVuZGVudCBwcm9wZXJ0aWVzLgoK
        CiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXBzdGVyID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICByZWFkeUZvckNhbXA6IEVtYmVy
        LmNvbXB1dGVkLmFuZCgnaGFzVGVudCcsICdoYXNCYWNrcGFjaycpCiAgfSk7
        CiAgdmFyIGhhbXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0
        ZXIuZ2V0KCdyZWFkeUZvckNhbXAnKTsgLy8gZmFsc2UKICBoYW1wc3Rlci5z
        ZXQoJ2hhc1RlbnQnLCB0cnVlKTsKICBoYW1wc3Rlci5nZXQoJ3JlYWR5Rm9y
        Q2FtcCcpOyAvLyBmYWxzZQogIGhhbXBzdGVyLnNldCgnaGFzQmFja3BhY2sn
        LCB0cnVlKTsKICBoYW1wc3Rlci5nZXQoJ3JlYWR5Rm9yQ2FtcCcpOyAvLyB0
        cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuYW5kCiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXksIFtkZXBlbmRlbnRL
        ZXkuLi5dCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29t
        cHV0ZWQgcHJvcGVydHkgd2hpY2ggcGVyZm9ybXMKICBhIGxvZ2ljYWwgYGFu
        ZGAgb24gdGhlIHZhbHVlcyBvZiBhbGwgdGhlIG9yaWdpbmFsIHZhbHVlcyBm
        b3IgcHJvcGVydGllcy4KKi8KcmVnaXN0ZXJDb21wdXRlZFdpdGhQcm9wZXJ0
        aWVzKCdhbmQnLCBmdW5jdGlvbihwcm9wZXJ0aWVzKSB7CiAgZm9yICh2YXIg
        a2V5IGluIHByb3BlcnRpZXMpIHsKICAgIGlmIChwcm9wZXJ0aWVzLmhhc093
        blByb3BlcnR5KGtleSkgJiYgIXByb3BlcnRpZXNba2V5XSkgewogICAgICBy
        ZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIHJldHVybiB0cnVlOwp9KTsKCi8q
        KgogIEEgY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcGVyZm9ybXMgYSBsb2dp
        Y2FsIGBvcmAgb24gdGhlCiAgb3JpZ2luYWwgdmFsdWVzIGZvciB0aGUgcHJv
        dmlkZWQgZGVwZW5kZW50IHByb3BlcnRpZXMuCgogIEV4YW1wbGUKCiAgYGBg
        amF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9iamVjdC5leHRl
        bmQoewogICAgcmVhZHlGb3JSYWluOiBFbWJlci5jb21wdXRlZC5vcignaGFz
        SmFja2V0JywgJ2hhc1VtYnJlbGxhJykKICB9KTsKICB2YXIgaGFtcHN0ZXIg
        PSBIYW1wc3Rlci5jcmVhdGUoKTsKICBoYW1wc3Rlci5nZXQoJ3JlYWR5Rm9y
        UmFpbicpOyAvLyBmYWxzZQogIGhhbXBzdGVyLnNldCgnaGFzSmFja2V0Jywg
        dHJ1ZSk7CiAgaGFtcHN0ZXIuZ2V0KCdyZWFkeUZvclJhaW4nKTsgLy8gdHJ1
        ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm9yCiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXksIFtkZXBlbmRlbnRLZXku
        Li5dCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0
        ZWQgcHJvcGVydHkgd2hpY2ggcGVyZm9ybXMKICBhIGxvZ2ljYWwgYG9yYCBv
        biB0aGUgdmFsdWVzIG9mIGFsbCB0aGUgb3JpZ2luYWwgdmFsdWVzIGZvciBw
        cm9wZXJ0aWVzLgoqLwpyZWdpc3RlckNvbXB1dGVkV2l0aFByb3BlcnRpZXMo
        J29yJywgZnVuY3Rpb24ocHJvcGVydGllcykgewogIGZvciAodmFyIGtleSBp
        biBwcm9wZXJ0aWVzKSB7CiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9w
        ZXJ0eShrZXkpICYmIHByb3BlcnRpZXNba2V5XSkgewogICAgICByZXR1cm4g
        dHJ1ZTsKICAgIH0KICB9CiAgcmV0dXJuIGZhbHNlOwp9KTsKCi8qKgogIEEg
        Y29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRoZSBmaXJzdCB0cnV0
        aHkgdmFsdWUKICBmcm9tIGEgbGlzdCBvZiBkZXBlbmRlbnQgcHJvcGVydGll
        cy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXBzdGVy
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBoYXNDbG90aGVzOiBFbWJl
        ci5jb21wdXRlZC5hbnkoJ2hhdCcsICdzaGlydCcpCiAgfSk7CiAgdmFyIGhh
        bXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0ZXIuZ2V0KCdo
        YXNDbG90aGVzJyk7IC8vIG51bGwKICBoYW1wc3Rlci5zZXQoJ3NoaXJ0Jywg
        J0hhd2FpaWFuIFNoaXJ0Jyk7CiAgaGFtcHN0ZXIuZ2V0KCdoYXNDbG90aGVz
        Jyk7IC8vICdIYXdhaWlhbiBTaGlydCcKICBgYGAKCiAgQG1ldGhvZCBjb21w
        dXRlZC5hbnkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVu
        ZGVudEtleSwgW2RlcGVuZGVudEtleS4uLl0KICBAcmV0dXJuIHtFbWJlci5D
        b21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1
        cm5zCiAgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSBvZiBnaXZlbiBsaXN0IG9m
        IHByb3BlcnRpZXMuCiovCnJlZ2lzdGVyQ29tcHV0ZWRXaXRoUHJvcGVydGll
        cygnYW55JywgZnVuY3Rpb24ocHJvcGVydGllcykgewogIGZvciAodmFyIGtl
        eSBpbiBwcm9wZXJ0aWVzKSB7CiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Q
        cm9wZXJ0eShrZXkpICYmIHByb3BlcnRpZXNba2V5XSkgewogICAgICByZXR1
        cm4gcHJvcGVydGllc1trZXldOwogICAgfQogIH0KICByZXR1cm4gbnVsbDsK
        fSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0
        aGUgYXJyYXkgb2YgdmFsdWVzCiAgZm9yIHRoZSBwcm92aWRlZCBkZXBlbmRl
        bnQgcHJvcGVydGllcy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAg
        dmFyIEhhbXBzdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBjbG90
        aGVzOiBFbWJlci5jb21wdXRlZC5tYXAoJ2hhdCcsICdzaGlydCcpCiAgfSk7
        CiAgdmFyIGhhbXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0
        ZXIuZ2V0KCdjbG90aGVzJyk7IC8vIFtudWxsLCBudWxsXQogIGhhbXBzdGVy
        LnNldCgnaGF0JywgJ0NhbXAgSGF0Jyk7CiAgaGFtcHN0ZXIuc2V0KCdzaGly
        dCcsICdDYW1wIFNoaXJ0Jyk7CiAgaGFtcHN0ZXIuZ2V0KCdjbG90aGVzJyk7
        IC8vIFsnQ2FtcCBIYXQnLCAnQ2FtcCBTaGlydCddCiAgYGBgCgogIEBtZXRo
        b2QgY29tcHV0ZWQubWFwCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5n
        fSBkZXBlbmRlbnRLZXksIFtkZXBlbmRlbnRLZXkuLi5dCiAgQHJldHVybiB7
        RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hp
        Y2ggbWFwcwogIHZhbHVlcyBvZiBhbGwgcGFzc2VkIHByb3BlcnRpZXMgaW4g
        dG8gYW4gYXJyYXkuCiovCnJlZ2lzdGVyQ29tcHV0ZWRXaXRoUHJvcGVydGll
        cygnY29sbGVjdCcsIGZ1bmN0aW9uKHByb3BlcnRpZXMpIHsKICB2YXIgcmVz
        ID0gW107CiAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHsKICAgIGlm
        IChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgaWYg
        KEVtYmVyLmlzTm9uZShwcm9wZXJ0aWVzW2tleV0pKSB7CiAgICAgICAgcmVz
        LnB1c2gobnVsbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzLnB1c2go
        cHJvcGVydGllc1trZXldKTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4g
        cmVzOwp9KTsKCi8qKgogIENyZWF0ZXMgYSBuZXcgcHJvcGVydHkgdGhhdCBp
        cyBhbiBhbGlhcyBmb3IgYW5vdGhlciBwcm9wZXJ0eQogIG9uIGFuIG9iamVj
        dC4gQ2FsbHMgdG8gYGdldGAgb3IgYHNldGAgdGhpcyBwcm9wZXJ0eSBiZWhh
        dmUgYXMKICB0aG91Z2ggdGhleSB3ZXJlIGNhbGxlZCBvbiB0aGUgb3JpZ2lu
        YWwgcHJvcGVydHkuCgogIGBgYGphdmFzY3JpcHQKICBQZXJzb24gPSBFbWJl
        ci5PYmplY3QuZXh0ZW5kKHsKICAgIG5hbWU6ICdBbGV4IE1hdGNobmVlcics
        CiAgICBub21lbjogRW1iZXIuY29tcHV0ZWQuYWxpYXMoJ25hbWUnKQogIH0p
        OwoKICBhbGV4ID0gUGVyc29uLmNyZWF0ZSgpOwogIGFsZXguZ2V0KCdub21l
        bicpOyAvLyAnQWxleCBNYXRjaG5lZXInCiAgYWxleC5nZXQoJ25hbWUnKTsg
        IC8vICdBbGV4IE1hdGNobmVlcicKCiAgYWxleC5zZXQoJ25vbWVuJywgJ0Bt
        YWNodHknKTsKICBhbGV4LmdldCgnbmFtZScpOyAgLy8gJ0BtYWNodHknCiAg
        YGBgCiAgQG1ldGhvZCBjb21wdXRlZC5hbGlhcwogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIu
        Q29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggY3Jl
        YXRlcyBhbgogIGFsaWFzIHRvIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJv
        cGVydHkuCiovCkVtYmVyLmNvbXB1dGVkLmFsaWFzID0gZnVuY3Rpb24oZGVw
        ZW5kZW50S2V5KSB7CiAgcmV0dXJuIEVtYmVyLmNvbXB1dGVkKGRlcGVuZGVu
        dEtleSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPiAxKSB7CiAgICAgIHNldCh0aGlzLCBkZXBlbmRlbnRLZXks
        IHZhbHVlKTsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAg
        ICAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpOwogICAgfQogIH0p
        Owp9OwoKLyoqCiAgV2hlcmUgYGNvbXB1dGVkLmFsaWFzYCBhbGlhc2VzIGBn
        ZXRgIGFuZCBgc2V0YCwgYW5kIGFsbG93cyBmb3IgYmlkaXJlY3Rpb25hbAog
        IGRhdGEgZmxvdywgYGNvbXB1dGVkLm9uZVdheWAgb25seSBwcm92aWRlcyBh
        biBhbGlhc2VkIGBnZXRgLiBUaGUgYHNldGAgd2lsbAogIG5vdCBtdXRhdGUg
        dGhlIHVwc3RyZWFtIHByb3BlcnR5LCByYXRoZXIgY2F1c2VzIHRoZSBjdXJy
        ZW50IHByb3BlcnR5IHRvCiAgYmVjb21lIHRoZSB2YWx1ZSBzZXQuIFRoaXMg
        Y2F1c2VzIHRoZSBkb3duc3RyZWFtIHByb3BlcnR5IHRvIHBlcm1lbnRhbnRs
        eQogIGRpdmVyZ2UgZnJvbSB0aGUgdXBzdHJlYW0gcHJvcGVydHkuCgogIEV4
        YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIFVzZXIgPSBFbWJlci5PYmplY3Qu
        ZXh0ZW5kKHsKICAgIGZpcnN0TmFtZTogbnVsbCwKICAgIGxhc3ROYW1lOiBu
        dWxsLAogICAgbmlja05hbWU6IEVtYmVyLmNvbXB1dGVkLm9uZVdheSgnZmly
        c3ROYW1lJykKICB9KTsKCiAgdXNlciA9IFVzZXIuY3JlYXRlKHsKICAgIGZp
        cnN0TmFtZTogJ1RlZGR5JywKICAgIGxhc3ROYW1lOiAgJ1plZW5ueScKICB9
        KTsKCiAgdXNlci5nZXQoJ25pY2tOYW1lJyk7CiAgIyAnVGVkZHknCgogIHVz
        ZXIuc2V0KCduaWNrTmFtZScsICdUZWRkeUJlYXInKTsKICAjICdUZWRkeUJl
        YXInCgogIHVzZXIuZ2V0KCdmaXJzdE5hbWUnKTsKICAjICdUZWRkeScKICBg
        YGAKCiAgQG1ldGhvZCBjb21wdXRlZC5vbmVXYXkKICBAZm9yIEVtYmVyCiAg
        QHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEByZXR1cm4ge0VtYmVy
        LkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIGNy
        ZWF0ZXMgYQogIG9uZSB3YXkgY29tcHV0ZWQgcHJvcGVydHkgdG8gdGhlIG9y
        aWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eS4KKi8KRW1iZXIuY29tcHV0ZWQu
        b25lV2F5ID0gZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7CiAgcmV0dXJuIEVt
        YmVyLmNvbXB1dGVkKGRlcGVuZGVudEtleSwgZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7CiAgfSk7Cn07CgoKLyoq
        CiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IGFjdHMgbGlrZSBhIHN0YW5k
        YXJkIGdldHRlciBhbmQgc2V0dGVyLAogIGJ1dCByZXR1cm5zIHRoZSB2YWx1
        ZSBhdCB0aGUgcHJvdmlkZWQgYGRlZmF1bHRQYXRoYCBpZiB0aGUKICBwcm9w
        ZXJ0eSBpdHNlbGYgaGFzIG5vdCBiZWVuIHNldCB0byBhIHZhbHVlCgogIEV4
        YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogICAgd2lzaExpc3Q6IEVtYmVyLmNvbXB1dGVk
        LmRlZmF1bHRUbygnZmF2b3JpdGVGb29kJykKICB9KTsKICB2YXIgaGFtcHN0
        ZXIgPSBIYW1wc3Rlci5jcmVhdGUoe2Zhdm9yaXRlRm9vZDogJ0JhbmFuYSd9
        KTsKICBoYW1wc3Rlci5nZXQoJ3dpc2hMaXN0Jyk7IC8vICdCYW5hbmEnCiAg
        aGFtcHN0ZXIuc2V0KCd3aXNoTGlzdCcsICdNb3JlIFVuaXQgVGVzdHMnKTsK
        ICBoYW1wc3Rlci5nZXQoJ3dpc2hMaXN0Jyk7IC8vICdNb3JlIFVuaXQgVGVz
        dHMnCiAgaGFtcHN0ZXIuZ2V0KCdmYXZvcml0ZUZvb2QnKTsgLy8gJ0JhbmFu
        YScKICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5kZWZhdWx0VG8KICBAZm9y
        IEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlZmF1bHRQYXRoCiAgQHJldHVy
        biB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkg
        d2hpY2ggYWN0cyBsaWtlCiAgYSBzdGFuZGFyZCBnZXR0ZXIgYW5kIHNldHRl
        ciwgYnV0IGRlZmF1bHRzIHRvIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0UGF0
        aGAuCiovCkVtYmVyLmNvbXB1dGVkLmRlZmF1bHRUbyA9IGZ1bmN0aW9uKGRl
        ZmF1bHRQYXRoKSB7CiAgcmV0dXJuIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KGtleSwgbmV3VmFsdWUsIGNhY2hlZFZhbHVlKSB7CiAgICBpZiAoYXJndW1l
        bnRzLmxlbmd0aCA9PT0gMSkgewogICAgICByZXR1cm4gY2FjaGVkVmFsdWUg
        IT0gbnVsbCA/IGNhY2hlZFZhbHVlIDogZ2V0KHRoaXMsIGRlZmF1bHRQYXRo
        KTsKICAgIH0KICAgIHJldHVybiBuZXdWYWx1ZSAhPSBudWxsID8gbmV3VmFs
        dWUgOiBnZXQodGhpcywgZGVmYXVsdFBhdGgpOwogIH0pOwp9OwoKCgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8vIEVtYmVyLnRyeUZpbmFsbHkKLyoqCkBt
        b2R1bGUgZW1iZXItbWV0YWwKKi8KCnZhciBBRlRFUl9PQlNFUlZFUlMgPSAn
        OmNoYW5nZScsCiAgICBCRUZPUkVfT0JTRVJWRVJTID0gJzpiZWZvcmUnOwoK
        aWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgncHJvcGVydHlCcmFjZUV4
        cGFuc2lvbicpKSB7CiAgdmFyIGV4cGFuZFByb3BlcnRpZXMgPSBFbWJlci5l
        eHBhbmRQcm9wZXJ0aWVzOwp9CgpmdW5jdGlvbiBjaGFuZ2VFdmVudChrZXlO
        YW1lKSB7CiAgcmV0dXJuIGtleU5hbWUrQUZURVJfT0JTRVJWRVJTOwp9Cgpm
        dW5jdGlvbiBiZWZvcmVFdmVudChrZXlOYW1lKSB7CiAgcmV0dXJuIGtleU5h
        bWUrQkVGT1JFX09CU0VSVkVSUzsKfQoKLyoqCiAgQG1ldGhvZCBhZGRPYnNl
        cnZlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmluZ30gcGF0aAogIEBw
        YXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZAogIEBwYXJh
        bSB7RnVuY3Rpb258U3RyaW5nfSBbbWV0aG9kXQoqLwpFbWJlci5hZGRPYnNl
        cnZlciA9IGZ1bmN0aW9uKG9iaiwgX3BhdGgsIHRhcmdldCwgbWV0aG9kKSB7
        CiAgaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgncHJvcGVydHlCcmFj
        ZUV4cGFuc2lvbicpKSB7CiAgICBleHBhbmRQcm9wZXJ0aWVzKF9wYXRoLCBm
        dW5jdGlvbiAocGF0aCkgewogICAgICBFbWJlci5hZGRMaXN0ZW5lcihvYmos
        IGNoYW5nZUV2ZW50KHBhdGgpLCB0YXJnZXQsIG1ldGhvZCk7CiAgICAgIEVt
        YmVyLndhdGNoKG9iaiwgcGF0aCk7CiAgICB9KTsKICB9IGVsc2UgewogICAg
        RW1iZXIuYWRkTGlzdGVuZXIob2JqLCBjaGFuZ2VFdmVudChfcGF0aCksIHRh
        cmdldCwgbWV0aG9kKTsKICAgIEVtYmVyLndhdGNoKG9iaiwgX3BhdGgpOwog
        IH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpFbWJlci5vYnNlcnZlcnNGb3IgPSBm
        dW5jdGlvbihvYmosIHBhdGgpIHsKICByZXR1cm4gRW1iZXIubGlzdGVuZXJz
        Rm9yKG9iaiwgY2hhbmdlRXZlbnQocGF0aCkpOwp9OwoKLyoqCiAgQG1ldGhv
        ZCByZW1vdmVPYnNlcnZlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmlu
        Z30gcGF0aAogIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1l
        dGhvZAogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBbbWV0aG9kXQoqLwpF
        bWJlci5yZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgX3BhdGgsIHRh
        cmdldCwgbWV0aG9kKSB7CiAgaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxl
        ZCgncHJvcGVydHlCcmFjZUV4cGFuc2lvbicpKSB7CiAgICBleHBhbmRQcm9w
        ZXJ0aWVzKF9wYXRoLCBmdW5jdGlvbiAocGF0aCkgewogICAgICBFbWJlci51
        bndhdGNoKG9iaiwgcGF0aCk7CiAgICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVy
        KG9iaiwgY2hhbmdlRXZlbnQocGF0aCksIHRhcmdldCwgbWV0aG9kKTsKICAg
        IH0pOwogIH0gZWxzZSB7CiAgICBFbWJlci51bndhdGNoKG9iaiwgX3BhdGgp
        OwogICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIob2JqLCBjaGFuZ2VFdmVudChf
        cGF0aCksIHRhcmdldCwgbWV0aG9kKTsKICB9CiAgcmV0dXJuIHRoaXM7Cn07
        CgovKioKICBAbWV0aG9kIGFkZEJlZm9yZU9ic2VydmVyCiAgQHBhcmFtIG9i
        agogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtPYmplY3R8RnVu
        Y3Rpb259IHRhcmdldE9yTWV0aG9kCiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJp
        bmd9IFttZXRob2RdCiovCkVtYmVyLmFkZEJlZm9yZU9ic2VydmVyID0gZnVu
        Y3Rpb24ob2JqLCBfcGF0aCwgdGFyZ2V0LCBtZXRob2QpIHsKICBpZiAoRW1i
        ZXIuRkVBVFVSRVMuaXNFbmFibGVkKCdwcm9wZXJ0eUJyYWNlRXhwYW5zaW9u
        JykpIHsKICAgIGV4cGFuZFByb3BlcnRpZXMoX3BhdGgsIGZ1bmN0aW9uIChw
        YXRoKSB7CiAgICAgIEVtYmVyLmFkZExpc3RlbmVyKG9iaiwgYmVmb3JlRXZl
        bnQocGF0aCksIHRhcmdldCwgbWV0aG9kKTsKICAgICAgRW1iZXIud2F0Y2go
        b2JqLCBwYXRoKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBFbWJlci5hZGRM
        aXN0ZW5lcihvYmosIGJlZm9yZUV2ZW50KF9wYXRoKSwgdGFyZ2V0LCBtZXRo
        b2QpOwogICAgRW1iZXIud2F0Y2gob2JqLCBfcGF0aCk7CiAgfQogIHJldHVy
        biB0aGlzOwp9OwoKLy8gU3VzcGVuZCBvYnNlcnZlciBkdXJpbmcgY2FsbGJh
        Y2suCi8vCi8vIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSB0aGUgdGFy
        Z2V0IG9mIHRoZSBvYnNlcnZlcgovLyB3aGlsZSBpdCBpcyBzZXR0aW5nIHRo
        ZSBvYnNlcnZlZCBwYXRoLgpFbWJlci5fc3VzcGVuZEJlZm9yZU9ic2VydmVy
        ID0gZnVuY3Rpb24ob2JqLCBwYXRoLCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJh
        Y2spIHsKICByZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcihvYmosIGJl
        Zm9yZUV2ZW50KHBhdGgpLCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJhY2spOwp9
        OwoKRW1iZXIuX3N1c3BlbmRPYnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgcGF0
        aCwgdGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKSB7CiAgcmV0dXJuIEVtYmVy
        Ll9zdXNwZW5kTGlzdGVuZXIob2JqLCBjaGFuZ2VFdmVudChwYXRoKSwgdGFy
        Z2V0LCBtZXRob2QsIGNhbGxiYWNrKTsKfTsKCnZhciBtYXAgPSBFbWJlci5B
        cnJheVBvbHlmaWxscy5tYXA7CgpFbWJlci5fc3VzcGVuZEJlZm9yZU9ic2Vy
        dmVycyA9IGZ1bmN0aW9uKG9iaiwgcGF0aHMsIHRhcmdldCwgbWV0aG9kLCBj
        YWxsYmFjaykgewogIHZhciBldmVudHMgPSBtYXAuY2FsbChwYXRocywgYmVm
        b3JlRXZlbnQpOwogIHJldHVybiBFbWJlci5fc3VzcGVuZExpc3RlbmVycyhv
        YmosIGV2ZW50cywgdGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKTsKfTsKCkVt
        YmVyLl9zdXNwZW5kT2JzZXJ2ZXJzID0gZnVuY3Rpb24ob2JqLCBwYXRocywg
        dGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKSB7CiAgdmFyIGV2ZW50cyA9IG1h
        cC5jYWxsKHBhdGhzLCBjaGFuZ2VFdmVudCk7CiAgcmV0dXJuIEVtYmVyLl9z
        dXNwZW5kTGlzdGVuZXJzKG9iaiwgZXZlbnRzLCB0YXJnZXQsIG1ldGhvZCwg
        Y2FsbGJhY2spOwp9OwoKRW1iZXIuYmVmb3JlT2JzZXJ2ZXJzRm9yID0gZnVu
        Y3Rpb24ob2JqLCBwYXRoKSB7CiAgcmV0dXJuIEVtYmVyLmxpc3RlbmVyc0Zv
        cihvYmosIGJlZm9yZUV2ZW50KHBhdGgpKTsKfTsKCi8qKgogIEBtZXRob2Qg
        cmVtb3ZlQmVmb3JlT2JzZXJ2ZXIKICBAcGFyYW0gb2JqCiAgQHBhcmFtIHtT
        dHJpbmd9IHBhdGgKICBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0
        T3JNZXRob2QKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gW21ldGhvZF0K
        Ki8KRW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIgPSBmdW5jdGlvbihvYmos
        IF9wYXRoLCB0YXJnZXQsIG1ldGhvZCkgewogIGlmIChFbWJlci5GRUFUVVJF
        Uy5pc0VuYWJsZWQoJ3Byb3BlcnR5QnJhY2VFeHBhbnNpb24nKSkgewogICAg
        ZXhwYW5kUHJvcGVydGllcyhfcGF0aCwgZnVuY3Rpb24gKHBhdGgpIHsKICAg
        ICAgRW1iZXIudW53YXRjaChvYmosIHBhdGgpOwogICAgICBFbWJlci5yZW1v
        dmVMaXN0ZW5lcihvYmosIGJlZm9yZUV2ZW50KHBhdGgpLCB0YXJnZXQsIG1l
        dGhvZCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgRW1iZXIudW53YXRjaChv
        YmosIF9wYXRoKTsKICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVyKG9iaiwgYmVm
        b3JlRXZlbnQoX3BhdGgpLCB0YXJnZXQsIG1ldGhvZCk7CiAgfQogIHJldHVy
        biB0aGlzOwp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpkZWZpbmUoImJh
        Y2tidXJuZXIvcXVldWUiLAogIFsiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9f
        ZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiBR
        dWV1ZShkYXEsIG5hbWUsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5kYXEgPSBk
        YXE7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMub3B0aW9u
        cyA9IG9wdGlvbnM7CiAgICAgIHRoaXMuX3F1ZXVlID0gW107CiAgICB9Cgog
        ICAgUXVldWUucHJvdG90eXBlID0gewogICAgICBkYXE6IG51bGwsCiAgICAg
        IG5hbWU6IG51bGwsCiAgICAgIG9wdGlvbnM6IG51bGwsCiAgICAgIF9xdWV1
        ZTogbnVsbCwKCiAgICAgIHB1c2g6IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9k
        LCBhcmdzLCBzdGFjaykgewogICAgICAgIHZhciBxdWV1ZSA9IHRoaXMuX3F1
        ZXVlOwogICAgICAgIHF1ZXVlLnB1c2godGFyZ2V0LCBtZXRob2QsIGFyZ3Ms
        IHN0YWNrKTsKICAgICAgICByZXR1cm4ge3F1ZXVlOiB0aGlzLCB0YXJnZXQ6
        IHRhcmdldCwgbWV0aG9kOiBtZXRob2R9OwogICAgICB9LAoKICAgICAgcHVz
        aFVuaXF1ZTogZnVuY3Rpb24odGFyZ2V0LCBtZXRob2QsIGFyZ3MsIHN0YWNr
        KSB7CiAgICAgICAgdmFyIHF1ZXVlID0gdGhpcy5fcXVldWUsIGN1cnJlbnRU
        YXJnZXQsIGN1cnJlbnRNZXRob2QsIGksIGw7CgogICAgICAgIGZvciAoaSA9
        IDAsIGwgPSBxdWV1ZS5sZW5ndGg7IGkgPCBsOyBpICs9IDQpIHsKICAgICAg
        ICAgIGN1cnJlbnRUYXJnZXQgPSBxdWV1ZVtpXTsKICAgICAgICAgIGN1cnJl
        bnRNZXRob2QgPSBxdWV1ZVtpKzFdOwoKICAgICAgICAgIGlmIChjdXJyZW50
        VGFyZ2V0ID09PSB0YXJnZXQgJiYgY3VycmVudE1ldGhvZCA9PT0gbWV0aG9k
        KSB7CiAgICAgICAgICAgIHF1ZXVlW2krMl0gPSBhcmdzOyAvLyByZXBsYWNl
        IGFyZ3MKICAgICAgICAgICAgcXVldWVbaSszXSA9IHN0YWNrOyAvLyByZXBs
        YWNlIHN0YWNrCiAgICAgICAgICAgIHJldHVybiB7cXVldWU6IHRoaXMsIHRh
        cmdldDogdGFyZ2V0LCBtZXRob2Q6IG1ldGhvZH07IC8vIFRPRE86IHRlc3Qg
        dGhpcyBjb2RlIHBhdGgKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg
        IHRoaXMuX3F1ZXVlLnB1c2godGFyZ2V0LCBtZXRob2QsIGFyZ3MsIHN0YWNr
        KTsKICAgICAgICByZXR1cm4ge3F1ZXVlOiB0aGlzLCB0YXJnZXQ6IHRhcmdl
        dCwgbWV0aG9kOiBtZXRob2R9OwogICAgICB9LAoKICAgICAgLy8gVE9ETzog
        cmVtb3ZlIG1lLCBvbmx5IGJlaW5nIHVzZWQgZm9yIEVtYmVyLnJ1bi5zeW5j
        CiAgICAgIGZsdXNoOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgcXVldWUg
        PSB0aGlzLl9xdWV1ZSwKICAgICAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0
        aW9ucywKICAgICAgICAgICAgYmVmb3JlID0gb3B0aW9ucyAmJiBvcHRpb25z
        LmJlZm9yZSwKICAgICAgICAgICAgYWZ0ZXIgPSBvcHRpb25zICYmIG9wdGlv
        bnMuYWZ0ZXIsCiAgICAgICAgICAgIHRhcmdldCwgbWV0aG9kLCBhcmdzLCBz
        dGFjaywgaSwgbCA9IHF1ZXVlLmxlbmd0aDsKCiAgICAgICAgaWYgKGwgJiYg
        YmVmb3JlKSB7IGJlZm9yZSgpOyB9CiAgICAgICAgZm9yIChpID0gMDsgaSA8
        IGw7IGkgKz0gNCkgewogICAgICAgICAgdGFyZ2V0ID0gcXVldWVbaV07CiAg
        ICAgICAgICBtZXRob2QgPSBxdWV1ZVtpKzFdOwogICAgICAgICAgYXJncyAg
        ID0gcXVldWVbaSsyXTsKICAgICAgICAgIHN0YWNrICA9IHF1ZXVlW2krM107
        IC8vIERlYnVnZ2luZyBhc3Npc3RhbmNlCgogICAgICAgICAgLy8gVE9ETzog
        ZXJyb3IgaGFuZGxpbmcKICAgICAgICAgIGlmIChhcmdzICYmIGFyZ3MubGVu
        Z3RoID4gMCkgewogICAgICAgICAgICBtZXRob2QuYXBwbHkodGFyZ2V0LCBh
        cmdzKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1ldGhvZC5j
        YWxsKHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlm
        IChsICYmIGFmdGVyKSB7IGFmdGVyKCk7IH0KCiAgICAgICAgLy8gY2hlY2sg
        aWYgbmV3IGl0ZW1zIGhhdmUgYmVlbiBhZGRlZAogICAgICAgIGlmIChxdWV1
        ZS5sZW5ndGggPiBsKSB7CiAgICAgICAgICB0aGlzLl9xdWV1ZSA9IHF1ZXVl
        LnNsaWNlKGwpOwogICAgICAgICAgdGhpcy5mbHVzaCgpOwogICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICB0aGlzLl9xdWV1ZS5sZW5ndGggPSAwOwogICAg
        ICAgIH0KICAgICAgfSwKCiAgICAgIGNhbmNlbDogZnVuY3Rpb24oYWN0aW9u
        VG9DYW5jZWwpIHsKICAgICAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZSwg
        Y3VycmVudFRhcmdldCwgY3VycmVudE1ldGhvZCwgaSwgbDsKCiAgICAgICAg
        Zm9yIChpID0gMCwgbCA9IHF1ZXVlLmxlbmd0aDsgaSA8IGw7IGkgKz0gNCkg
        ewogICAgICAgICAgY3VycmVudFRhcmdldCA9IHF1ZXVlW2ldOwogICAgICAg
        ICAgY3VycmVudE1ldGhvZCA9IHF1ZXVlW2krMV07CgogICAgICAgICAgaWYg
        KGN1cnJlbnRUYXJnZXQgPT09IGFjdGlvblRvQ2FuY2VsLnRhcmdldCAmJiBj
        dXJyZW50TWV0aG9kID09PSBhY3Rpb25Ub0NhbmNlbC5tZXRob2QpIHsKICAg
        ICAgICAgICAgcXVldWUuc3BsaWNlKGksIDQpOwogICAgICAgICAgICByZXR1
        cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGlm
        IG5vdCBmb3VuZCBpbiBjdXJyZW50IHF1ZXVlCiAgICAgICAgLy8gY291bGQg
        YmUgaW4gdGhlIHF1ZXVlIHRoYXQgaXMgYmVpbmcgZmx1c2hlZAogICAgICAg
        IHF1ZXVlID0gdGhpcy5fcXVldWVCZWluZ0ZsdXNoZWQ7CiAgICAgICAgaWYg
        KCFxdWV1ZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAg
        ICBmb3IgKGkgPSAwLCBsID0gcXVldWUubGVuZ3RoOyBpIDwgbDsgaSArPSA0
        KSB7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0ID0gcXVldWVbaV07CiAgICAg
        ICAgICBjdXJyZW50TWV0aG9kID0gcXVldWVbaSsxXTsKCiAgICAgICAgICBp
        ZiAoY3VycmVudFRhcmdldCA9PT0gYWN0aW9uVG9DYW5jZWwudGFyZ2V0ICYm
        IGN1cnJlbnRNZXRob2QgPT09IGFjdGlvblRvQ2FuY2VsLm1ldGhvZCkgewog
        ICAgICAgICAgICAvLyBkb24ndCBtZXNzIHdpdGggYXJyYXkgZHVyaW5nIGZs
        dXNoCiAgICAgICAgICAgIC8vIGp1c3QgbnVsbGlmeSB0aGUgbWV0aG9kCiAg
        ICAgICAgICAgIHF1ZXVlW2krMV0gPSBudWxsOwogICAgICAgICAgICByZXR1
        cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07
        CgoKICAgIF9fZXhwb3J0c19fLlF1ZXVlID0gUXVldWU7CiAgfSk7CgpkZWZp
        bmUoImJhY2tidXJuZXIvZGVmZXJyZWRfYWN0aW9uX3F1ZXVlcyIsCiAgWyJi
        YWNrYnVybmVyL3F1ZXVlIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVw
        ZW5kZW5jeTFfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsK
        ICAgIHZhciBRdWV1ZSA9IF9fZGVwZW5kZW5jeTFfXy5RdWV1ZTsKCiAgICBm
        dW5jdGlvbiBEZWZlcnJlZEFjdGlvblF1ZXVlcyhxdWV1ZU5hbWVzLCBvcHRp
        b25zKSB7CiAgICAgIHZhciBxdWV1ZXMgPSB0aGlzLnF1ZXVlcyA9IHt9Owog
        ICAgICB0aGlzLnF1ZXVlTmFtZXMgPSBxdWV1ZU5hbWVzID0gcXVldWVOYW1l
        cyB8fCBbXTsKCiAgICAgIHZhciBxdWV1ZU5hbWU7CiAgICAgIGZvciAodmFy
        IGkgPSAwLCBsID0gcXVldWVOYW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsK
        ICAgICAgICBxdWV1ZU5hbWUgPSBxdWV1ZU5hbWVzW2ldOwogICAgICAgIHF1
        ZXVlc1txdWV1ZU5hbWVdID0gbmV3IFF1ZXVlKHRoaXMsIHF1ZXVlTmFtZSwg
        b3B0aW9uc1txdWV1ZU5hbWVdKTsKICAgICAgfQogICAgfQoKICAgIERlZmVy
        cmVkQWN0aW9uUXVldWVzLnByb3RvdHlwZSA9IHsKICAgICAgcXVldWVOYW1l
        czogbnVsbCwKICAgICAgcXVldWVzOiBudWxsLAoKICAgICAgc2NoZWR1bGU6
        IGZ1bmN0aW9uKHF1ZXVlTmFtZSwgdGFyZ2V0LCBtZXRob2QsIGFyZ3MsIG9u
        Y2VGbGFnLCBzdGFjaykgewogICAgICAgIHZhciBxdWV1ZXMgPSB0aGlzLnF1
        ZXVlcywKICAgICAgICAgICAgcXVldWUgPSBxdWV1ZXNbcXVldWVOYW1lXTsK
        CiAgICAgICAgaWYgKCFxdWV1ZSkgeyB0aHJvdyBuZXcgRXJyb3IoIllvdSBh
        dHRlbXB0ZWQgdG8gc2NoZWR1bGUgYW4gYWN0aW9uIGluIGEgcXVldWUgKCIg
        KyBxdWV1ZU5hbWUgKyAiKSB0aGF0IGRvZXNuJ3QgZXhpc3QiKTsgfQoKICAg
        ICAgICBpZiAob25jZUZsYWcpIHsKICAgICAgICAgIHJldHVybiBxdWV1ZS5w
        dXNoVW5pcXVlKHRhcmdldCwgbWV0aG9kLCBhcmdzLCBzdGFjayk7CiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBxdWV1ZS5wdXNoKHRhcmdl
        dCwgbWV0aG9kLCBhcmdzLCBzdGFjayk7CiAgICAgICAgfQogICAgICB9LAoK
        ICAgICAgZmx1c2g6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBxdWV1ZXMg
        PSB0aGlzLnF1ZXVlcywKICAgICAgICAgICAgcXVldWVOYW1lcyA9IHRoaXMu
        cXVldWVOYW1lcywKICAgICAgICAgICAgcXVldWVOYW1lLCBxdWV1ZSwgcXVl
        dWVJdGVtcywgcHJpb3JRdWV1ZU5hbWVJbmRleCwKICAgICAgICAgICAgcXVl
        dWVOYW1lSW5kZXggPSAwLCBudW1iZXJPZlF1ZXVlcyA9IHF1ZXVlTmFtZXMu
        bGVuZ3RoOwoKICAgICAgICBvdXRlcmxvb3A6CiAgICAgICAgd2hpbGUgKHF1
        ZXVlTmFtZUluZGV4IDwgbnVtYmVyT2ZRdWV1ZXMpIHsKICAgICAgICAgIHF1
        ZXVlTmFtZSA9IHF1ZXVlTmFtZXNbcXVldWVOYW1lSW5kZXhdOwogICAgICAg
        ICAgcXVldWUgPSBxdWV1ZXNbcXVldWVOYW1lXTsKICAgICAgICAgIHF1ZXVl
        SXRlbXMgPSBxdWV1ZS5fcXVldWVCZWluZ0ZsdXNoZWQgPSBxdWV1ZS5fcXVl
        dWUuc2xpY2UoKTsKICAgICAgICAgIHF1ZXVlLl9xdWV1ZSA9IFtdOwoKICAg
        ICAgICAgIHZhciBvcHRpb25zID0gcXVldWUub3B0aW9ucywKICAgICAgICAg
        ICAgICBiZWZvcmUgPSBvcHRpb25zICYmIG9wdGlvbnMuYmVmb3JlLAogICAg
        ICAgICAgICAgIGFmdGVyID0gb3B0aW9ucyAmJiBvcHRpb25zLmFmdGVyLAog
        ICAgICAgICAgICAgIHRhcmdldCwgbWV0aG9kLCBhcmdzLCBzdGFjaywKICAg
        ICAgICAgICAgICBxdWV1ZUluZGV4ID0gMCwgbnVtYmVyT2ZRdWV1ZUl0ZW1z
        ID0gcXVldWVJdGVtcy5sZW5ndGg7CgogICAgICAgICAgaWYgKG51bWJlck9m
        UXVldWVJdGVtcyAmJiBiZWZvcmUpIHsgYmVmb3JlKCk7IH0KICAgICAgICAg
        IHdoaWxlIChxdWV1ZUluZGV4IDwgbnVtYmVyT2ZRdWV1ZUl0ZW1zKSB7CiAg
        ICAgICAgICAgIHRhcmdldCA9IHF1ZXVlSXRlbXNbcXVldWVJbmRleF07CiAg
        ICAgICAgICAgIG1ldGhvZCA9IHF1ZXVlSXRlbXNbcXVldWVJbmRleCsxXTsK
        ICAgICAgICAgICAgYXJncyAgID0gcXVldWVJdGVtc1txdWV1ZUluZGV4KzJd
        OwogICAgICAgICAgICBzdGFjayAgPSBxdWV1ZUl0ZW1zW3F1ZXVlSW5kZXgr
        M107IC8vIERlYnVnZ2luZyBhc3Npc3RhbmNlCgogICAgICAgICAgICBpZiAo
        dHlwZW9mIG1ldGhvZCA9PT0gJ3N0cmluZycpIHsgbWV0aG9kID0gdGFyZ2V0
        W21ldGhvZF07IH0KCiAgICAgICAgICAgIC8vIG1ldGhvZCBjb3VsZCBoYXZl
        IGJlZW4gbnVsbGlmaWVkIC8gY2FuY2VsZWQgZHVyaW5nIGZsdXNoCiAgICAg
        ICAgICAgIGlmIChtZXRob2QpIHsKICAgICAgICAgICAgICAvLyBUT0RPOiBl
        cnJvciBoYW5kbGluZwogICAgICAgICAgICAgIGlmIChhcmdzICYmIGFyZ3Mu
        bGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbWV0aG9kLmFwcGx5KHRh
        cmdldCwgYXJncyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
        ICAgICAgIG1ldGhvZC5jYWxsKHRhcmdldCk7CiAgICAgICAgICAgICAgfQog
        ICAgICAgICAgICB9CgogICAgICAgICAgICBxdWV1ZUluZGV4ICs9IDQ7CiAg
        ICAgICAgICB9CiAgICAgICAgICBxdWV1ZS5fcXVldWVCZWluZ0ZsdXNoZWQg
        PSBudWxsOwogICAgICAgICAgaWYgKG51bWJlck9mUXVldWVJdGVtcyAmJiBh
        ZnRlcikgeyBhZnRlcigpOyB9CgogICAgICAgICAgaWYgKChwcmlvclF1ZXVl
        TmFtZUluZGV4ID0gaW5kZXhPZlByaW9yUXVldWVXaXRoQWN0aW9ucyh0aGlz
        LCBxdWV1ZU5hbWVJbmRleCkpICE9PSAtMSkgewogICAgICAgICAgICBxdWV1
        ZU5hbWVJbmRleCA9IHByaW9yUXVldWVOYW1lSW5kZXg7CiAgICAgICAgICAg
        IGNvbnRpbnVlIG91dGVybG9vcDsKICAgICAgICAgIH0KCiAgICAgICAgICBx
        dWV1ZU5hbWVJbmRleCsrOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAg
        ICBmdW5jdGlvbiBpbmRleE9mUHJpb3JRdWV1ZVdpdGhBY3Rpb25zKGRhcSwg
        Y3VycmVudFF1ZXVlSW5kZXgpIHsKICAgICAgdmFyIHF1ZXVlTmFtZSwgcXVl
        dWU7CgogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGN1cnJlbnRRdWV1ZUlu
        ZGV4OyBpIDw9IGw7IGkrKykgewogICAgICAgIHF1ZXVlTmFtZSA9IGRhcS5x
        dWV1ZU5hbWVzW2ldOwogICAgICAgIHF1ZXVlID0gZGFxLnF1ZXVlc1txdWV1
        ZU5hbWVdOwogICAgICAgIGlmIChxdWV1ZS5fcXVldWUubGVuZ3RoKSB7IHJl
        dHVybiBpOyB9CiAgICAgIH0KCiAgICAgIHJldHVybiAtMTsKICAgIH0KCgog
        ICAgX19leHBvcnRzX18uRGVmZXJyZWRBY3Rpb25RdWV1ZXMgPSBEZWZlcnJl
        ZEFjdGlvblF1ZXVlczsKICB9KTsKCmRlZmluZSgiYmFja2J1cm5lciIsCiAg
        WyJiYWNrYnVybmVyL2RlZmVycmVkX2FjdGlvbl9xdWV1ZXMiLCJleHBvcnRz
        Il0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykg
        ewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIERlZmVycmVkQWN0aW9uUXVl
        dWVzID0gX19kZXBlbmRlbmN5MV9fLkRlZmVycmVkQWN0aW9uUXVldWVzOwoK
        ICAgIHZhciBzbGljZSA9IFtdLnNsaWNlLAogICAgICAgIHBvcCA9IFtdLnBv
        cCwKICAgICAgICB0aHJvdHRsZXJzID0gW10sCiAgICAgICAgZGVib3VuY2Vl
        cyA9IFtdLAogICAgICAgIHRpbWVycyA9IFtdLAogICAgICAgIGF1dG9ydW4s
        IGxhdGVyVGltZXIsIGxhdGVyVGltZXJFeHBpcmVzQXQsCiAgICAgICAgZ2xv
        YmFsID0gdGhpcywKICAgICAgICBOVU1CRVIgPSAvXGQrLzsKCiAgICBmdW5j
        dGlvbiBpc0NvZXJjYWJsZU51bWJlcihudW1iZXIpIHsKICAgICAgcmV0dXJu
        IHR5cGVvZiBudW1iZXIgPT09ICdudW1iZXInIHx8IE5VTUJFUi50ZXN0KG51
        bWJlcik7CiAgICB9CgogICAgZnVuY3Rpb24gQmFja2J1cm5lcihxdWV1ZU5h
        bWVzLCBvcHRpb25zKSB7CiAgICAgIHRoaXMucXVldWVOYW1lcyA9IHF1ZXVl
        TmFtZXM7CiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAg
        ICAgIGlmICghdGhpcy5vcHRpb25zLmRlZmF1bHRRdWV1ZSkgewogICAgICAg
        IHRoaXMub3B0aW9ucy5kZWZhdWx0UXVldWUgPSBxdWV1ZU5hbWVzWzBdOwog
        ICAgICB9CiAgICAgIHRoaXMuaW5zdGFuY2VTdGFjayA9IFtdOwogICAgfQoK
        ICAgIEJhY2tidXJuZXIucHJvdG90eXBlID0gewogICAgICBxdWV1ZU5hbWVz
        OiBudWxsLAogICAgICBvcHRpb25zOiBudWxsLAogICAgICBjdXJyZW50SW5z
        dGFuY2U6IG51bGwsCiAgICAgIGluc3RhbmNlU3RhY2s6IG51bGwsCgogICAg
        ICBiZWdpbjogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG9uQmVnaW4gPSB0
        aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLm9uQmVnaW4sCiAgICAgICAg
        ICAgIHByZXZpb3VzSW5zdGFuY2UgPSB0aGlzLmN1cnJlbnRJbnN0YW5jZTsK
        CiAgICAgICAgaWYgKHByZXZpb3VzSW5zdGFuY2UpIHsKICAgICAgICAgIHRo
        aXMuaW5zdGFuY2VTdGFjay5wdXNoKHByZXZpb3VzSW5zdGFuY2UpOwogICAg
        ICAgIH0KCiAgICAgICAgdGhpcy5jdXJyZW50SW5zdGFuY2UgPSBuZXcgRGVm
        ZXJyZWRBY3Rpb25RdWV1ZXModGhpcy5xdWV1ZU5hbWVzLCB0aGlzLm9wdGlv
        bnMpOwogICAgICAgIGlmIChvbkJlZ2luKSB7CiAgICAgICAgICBvbkJlZ2lu
        KHRoaXMuY3VycmVudEluc3RhbmNlLCBwcmV2aW91c0luc3RhbmNlKTsKICAg
        ICAgICB9CiAgICAgIH0sCgogICAgICBlbmQ6IGZ1bmN0aW9uKCkgewogICAg
        ICAgIHZhciBvbkVuZCA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMu
        b25FbmQsCiAgICAgICAgICAgIGN1cnJlbnRJbnN0YW5jZSA9IHRoaXMuY3Vy
        cmVudEluc3RhbmNlLAogICAgICAgICAgICBuZXh0SW5zdGFuY2UgPSBudWxs
        OwoKICAgICAgICB0cnkgewogICAgICAgICAgY3VycmVudEluc3RhbmNlLmZs
        dXNoKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHRoaXMuY3Vy
        cmVudEluc3RhbmNlID0gbnVsbDsKCiAgICAgICAgICBpZiAodGhpcy5pbnN0
        YW5jZVN0YWNrLmxlbmd0aCkgewogICAgICAgICAgICBuZXh0SW5zdGFuY2Ug
        PSB0aGlzLmluc3RhbmNlU3RhY2sucG9wKCk7CiAgICAgICAgICAgIHRoaXMu
        Y3VycmVudEluc3RhbmNlID0gbmV4dEluc3RhbmNlOwogICAgICAgICAgfQoK
        ICAgICAgICAgIGlmIChvbkVuZCkgewogICAgICAgICAgICBvbkVuZChjdXJy
        ZW50SW5zdGFuY2UsIG5leHRJbnN0YW5jZSk7CiAgICAgICAgICB9CiAgICAg
        ICAgfQogICAgICB9LAoKICAgICAgcnVuOiBmdW5jdGlvbih0YXJnZXQsIG1l
        dGhvZCAvKiwgYXJncyAqLykgewogICAgICAgIHZhciByZXQ7CiAgICAgICAg
        dGhpcy5iZWdpbigpOwoKICAgICAgICBpZiAoIW1ldGhvZCkgewogICAgICAg
        ICAgbWV0aG9kID0gdGFyZ2V0OwogICAgICAgICAgdGFyZ2V0ID0gbnVsbDsK
        ICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSAnc3Ry
        aW5nJykgewogICAgICAgICAgbWV0aG9kID0gdGFyZ2V0W21ldGhvZF07CiAg
        ICAgICAgfQoKICAgICAgICAvLyBQcmV2ZW50IFNhZmFyaSBkb3VibGUtZmlu
        YWxseS4KICAgICAgICB2YXIgZmluYWxseUFscmVhZHlDYWxsZWQgPSBmYWxz
        ZTsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5n
        dGggPiAyKSB7CiAgICAgICAgICAgIHJldCA9IG1ldGhvZC5hcHBseSh0YXJn
        ZXQsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSk7CiAgICAgICAgICB9IGVs
        c2UgewogICAgICAgICAgICByZXQgPSBtZXRob2QuY2FsbCh0YXJnZXQpOwog
        ICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAo
        IWZpbmFsbHlBbHJlYWR5Q2FsbGVkKSB7CiAgICAgICAgICAgIGZpbmFsbHlB
        bHJlYWR5Q2FsbGVkID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5lbmQoKTsK
        ICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAg
        ICAgfSwKCiAgICAgIGRlZmVyOiBmdW5jdGlvbihxdWV1ZU5hbWUsIHRhcmdl
        dCwgbWV0aG9kIC8qICwgYXJncyAqLykgewogICAgICAgIGlmICghbWV0aG9k
        KSB7CiAgICAgICAgICBtZXRob2QgPSB0YXJnZXQ7CiAgICAgICAgICB0YXJn
        ZXQgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBtZXRo
        b2QgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBtZXRob2QgPSB0YXJnZXRb
        bWV0aG9kXTsKICAgICAgICB9CgogICAgICAgIHZhciBzdGFjayA9IHRoaXMu
        REVCVUcgPyBuZXcgRXJyb3IoKS5zdGFjayA6IHVuZGVmaW5lZCwKICAgICAg
        ICAgICAgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gc2xpY2UuY2Fs
        bChhcmd1bWVudHMsIDMpIDogdW5kZWZpbmVkOwogICAgICAgIGlmICghdGhp
        cy5jdXJyZW50SW5zdGFuY2UpIHsgY3JlYXRlQXV0b3J1bih0aGlzKTsgfQog
        ICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJbnN0YW5jZS5zY2hlZHVsZShx
        dWV1ZU5hbWUsIHRhcmdldCwgbWV0aG9kLCBhcmdzLCBmYWxzZSwgc3RhY2sp
        OwogICAgICB9LAoKICAgICAgZGVmZXJPbmNlOiBmdW5jdGlvbihxdWV1ZU5h
        bWUsIHRhcmdldCwgbWV0aG9kIC8qICwgYXJncyAqLykgewogICAgICAgIGlm
        ICghbWV0aG9kKSB7CiAgICAgICAgICBtZXRob2QgPSB0YXJnZXQ7CiAgICAg
        ICAgICB0YXJnZXQgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5
        cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBtZXRob2Qg
        PSB0YXJnZXRbbWV0aG9kXTsKICAgICAgICB9CgogICAgICAgIHZhciBzdGFj
        ayA9IHRoaXMuREVCVUcgPyBuZXcgRXJyb3IoKS5zdGFjayA6IHVuZGVmaW5l
        ZCwKICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8g
        c2xpY2UuY2FsbChhcmd1bWVudHMsIDMpIDogdW5kZWZpbmVkOwogICAgICAg
        IGlmICghdGhpcy5jdXJyZW50SW5zdGFuY2UpIHsgY3JlYXRlQXV0b3J1bih0
        aGlzKTsgfQogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJbnN0YW5jZS5z
        Y2hlZHVsZShxdWV1ZU5hbWUsIHRhcmdldCwgbWV0aG9kLCBhcmdzLCB0cnVl
        LCBzdGFjayk7CiAgICAgIH0sCgogICAgICBzZXRUaW1lb3V0OiBmdW5jdGlv
        bigpIHsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRz
        KTsKICAgICAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7CiAgICAgICAg
        dmFyIG1ldGhvZCwgd2FpdCwgdGFyZ2V0OwogICAgICAgIHZhciBzZWxmID0g
        dGhpczsKICAgICAgICB2YXIgbWV0aG9kT3JUYXJnZXQsIG1ldGhvZE9yV2Fp
        dCwgbWV0aG9kT3JBcmdzOwoKICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7
        CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGgg
        PT09IDEpIHsKICAgICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTsKICAg
        ICAgICAgIHdhaXQgPSAwOwogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09
        PSAyKSB7CiAgICAgICAgICBtZXRob2RPclRhcmdldCA9IGFyZ3NbMF07CiAg
        ICAgICAgICBtZXRob2RPcldhaXQgPSBhcmdzWzFdOwoKICAgICAgICAgIGlm
        ICh0eXBlb2YgbWV0aG9kT3JXYWl0ID09PSAnZnVuY3Rpb24nIHx8IHR5cGVv
        ZiAgbWV0aG9kT3JUYXJnZXRbbWV0aG9kT3JXYWl0XSA9PT0gJ2Z1bmN0aW9u
        JykgewogICAgICAgICAgICB0YXJnZXQgPSBhcmdzLnNoaWZ0KCk7CiAgICAg
        ICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTsKICAgICAgICAgICAgd2Fp
        dCA9IDA7CiAgICAgICAgICB9IGVsc2UgaWYgKGlzQ29lcmNhYmxlTnVtYmVy
        KG1ldGhvZE9yV2FpdCkpIHsKICAgICAgICAgICAgbWV0aG9kID0gYXJncy5z
        aGlmdCgpOwogICAgICAgICAgICB3YWl0ID0gYXJncy5zaGlmdCgpOwogICAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWV0aG9kID0gYXJncy5zaGlm
        dCgpOwogICAgICAgICAgICB3YWl0ID0gIDA7CiAgICAgICAgICB9CiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBsYXN0ID0gYXJnc1thcmdzLmxl
        bmd0aCAtIDFdOwoKICAgICAgICAgIGlmIChpc0NvZXJjYWJsZU51bWJlcihs
        YXN0KSkgewogICAgICAgICAgICB3YWl0ID0gYXJncy5wb3AoKTsKICAgICAg
        ICAgIH0KCiAgICAgICAgICBtZXRob2RPclRhcmdldCA9IGFyZ3NbMF07CiAg
        ICAgICAgICBtZXRob2RPckFyZ3MgPSBhcmdzWzFdOwoKICAgICAgICAgIGlm
        ICh0eXBlb2YgbWV0aG9kT3JBcmdzID09PSAnZnVuY3Rpb24nIHx8ICh0eXBl
        b2YgbWV0aG9kT3JBcmdzID09PSAnc3RyaW5nJyAmJgogICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhv
        ZE9yVGFyZ2V0ICE9PSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kT3JBcmdzIGlu
        IG1ldGhvZE9yVGFyZ2V0KSkgewogICAgICAgICAgICB0YXJnZXQgPSBhcmdz
        LnNoaWZ0KCk7CiAgICAgICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTsK
        ICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1ldGhvZCA9IGFyZ3Mu
        c2hpZnQoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBl
        eGVjdXRlQXQgPSAoK25ldyBEYXRlKCkpICsgcGFyc2VJbnQod2FpdCwgMTAp
        OwoKICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ3N0cmluZycpIHsK
        ICAgICAgICAgIG1ldGhvZCA9IHRhcmdldFttZXRob2RdOwogICAgICAgIH0K
        CiAgICAgICAgZnVuY3Rpb24gZm4oKSB7CiAgICAgICAgICBtZXRob2QuYXBw
        bHkodGFyZ2V0LCBhcmdzKTsKICAgICAgICB9CgogICAgICAgIC8vIGZpbmQg
        cG9zaXRpb24gdG8gaW5zZXJ0IC0gVE9ETzogYmluYXJ5IHNlYXJjaAogICAg
        ICAgIHZhciBpLCBsOwogICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aW1lcnMu
        bGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBpZiAoZXhlY3V0
        ZUF0IDwgdGltZXJzW2ldKSB7IGJyZWFrOyB9CiAgICAgICAgfQoKICAgICAg
        ICB0aW1lcnMuc3BsaWNlKGksIDAsIGV4ZWN1dGVBdCwgZm4pOwoKICAgICAg
        ICBpZiAobGF0ZXJUaW1lciAmJiBsYXRlclRpbWVyRXhwaXJlc0F0IDwgZXhl
        Y3V0ZUF0KSB7IHJldHVybiBmbjsgfQoKICAgICAgICBpZiAobGF0ZXJUaW1l
        cikgewogICAgICAgICAgY2xlYXJUaW1lb3V0KGxhdGVyVGltZXIpOwogICAg
        ICAgICAgbGF0ZXJUaW1lciA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGxh
        dGVyVGltZXIgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAg
        ICAgICAgIGV4ZWN1dGVUaW1lcnMoc2VsZik7CiAgICAgICAgICBsYXRlclRp
        bWVyID0gbnVsbDsKICAgICAgICAgIGxhdGVyVGltZXJFeHBpcmVzQXQgPSBu
        dWxsOwogICAgICAgIH0sIHdhaXQpOwogICAgICAgIGxhdGVyVGltZXJFeHBp
        cmVzQXQgPSBleGVjdXRlQXQ7CgogICAgICAgIHJldHVybiBmbjsKICAgICAg
        fSwKCiAgICAgIHRocm90dGxlOiBmdW5jdGlvbih0YXJnZXQsIG1ldGhvZCAv
        KiAsIGFyZ3MsIHdhaXQgKi8pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXMs
        CiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMsCiAgICAgICAgICAgIHdh
        aXQgPSBwYXJzZUludChwb3AuY2FsbChhcmdzKSwgMTApLAogICAgICAgICAg
        ICB0aHJvdHRsZXI7CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhy
        b3R0bGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIHRocm90
        dGxlciA9IHRocm90dGxlcnNbaV07CiAgICAgICAgICBpZiAodGhyb3R0bGVy
        WzBdID09PSB0YXJnZXQgJiYgdGhyb3R0bGVyWzFdID09PSBtZXRob2QpIHsg
        cmV0dXJuOyB9IC8vIGRvIG5vdGhpbmcKICAgICAgICB9CgogICAgICAgIHZh
        ciB0aW1lciA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAg
        ICAgICAgc2VsZi5ydW4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICAgICAg
        Ly8gcmVtb3ZlIHRocm90dGxlcgogICAgICAgICAgdmFyIGluZGV4ID0gLTE7
        CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRocm90dGxlcnMubGVu
        Z3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgIHRocm90dGxlciA9IHRo
        cm90dGxlcnNbaV07CiAgICAgICAgICAgIGlmICh0aHJvdHRsZXJbMF0gPT09
        IHRhcmdldCAmJiB0aHJvdHRsZXJbMV0gPT09IG1ldGhvZCkgewogICAgICAg
        ICAgICAgIGluZGV4ID0gaTsKICAgICAgICAgICAgICBicmVhazsKICAgICAg
        ICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpbmRleCA+IC0x
        KSB7IHRocm90dGxlcnMuc3BsaWNlKGluZGV4LCAxKTsgfQogICAgICAgIH0s
        IHdhaXQpOwoKICAgICAgICB0aHJvdHRsZXJzLnB1c2goW3RhcmdldCwgbWV0
        aG9kLCB0aW1lcl0pOwogICAgICB9LAoKICAgICAgZGVib3VuY2U6IGZ1bmN0
        aW9uKHRhcmdldCwgbWV0aG9kIC8qICwgYXJncywgd2FpdCwgW2ltbWVkaWF0
        ZV0gKi8pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgICAg
        IGFyZ3MgPSBhcmd1bWVudHMsCiAgICAgICAgICAgIGltbWVkaWF0ZSA9IHBv
        cC5jYWxsKGFyZ3MpLAogICAgICAgICAgICB3YWl0LAogICAgICAgICAgICBp
        bmRleCwKICAgICAgICAgICAgZGVib3VuY2VlOwoKICAgICAgICBpZiAodHlw
        ZW9mIGltbWVkaWF0ZSA9PT0gIm51bWJlciIgfHwgdHlwZW9mIGltbWVkaWF0
        ZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHdhaXQgPSBpbW1lZGlhdGU7
        CiAgICAgICAgICBpbW1lZGlhdGUgPSBmYWxzZTsKICAgICAgICB9IGVsc2Ug
        ewogICAgICAgICAgd2FpdCA9IHBvcC5jYWxsKGFyZ3MpOwogICAgICAgIH0K
        CiAgICAgICAgd2FpdCA9IHBhcnNlSW50KHdhaXQsIDEwKTsKICAgICAgICAv
        LyBSZW1vdmUgZGVib3VuY2VlCiAgICAgICAgaW5kZXggPSBmaW5kRGVib3Vu
        Y2VlKHRhcmdldCwgbWV0aG9kKTsKCiAgICAgICAgaWYgKGluZGV4ICE9PSAt
        MSkgewogICAgICAgICAgZGVib3VuY2VlID0gZGVib3VuY2Vlc1tpbmRleF07
        CiAgICAgICAgICBkZWJvdW5jZWVzLnNwbGljZShpbmRleCwgMSk7CiAgICAg
        ICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VlWzJdKTsKICAgICAgICB9Cgog
        ICAgICAgIHZhciB0aW1lciA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9u
        KCkgewogICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHsKICAgICAgICAgICAg
        c2VsZi5ydW4uYXBwbHkoc2VsZiwgYXJncyk7CiAgICAgICAgICB9CiAgICAg
        ICAgICBpbmRleCA9IGZpbmREZWJvdW5jZWUodGFyZ2V0LCBtZXRob2QpOwog
        ICAgICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgICAgIGRlYm91bmNlZXMu
        c3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIH0KICAgICAgICB9LCB3YWl0
        KTsKCiAgICAgICAgaWYgKGltbWVkaWF0ZSAmJiBpbmRleCA9PT0gLTEpIHsK
        ICAgICAgICAgIHNlbGYucnVuLmFwcGx5KHNlbGYsIGFyZ3MpOwogICAgICAg
        IH0KCiAgICAgICAgZGVib3VuY2Vlcy5wdXNoKFt0YXJnZXQsIG1ldGhvZCwg
        dGltZXJdKTsKICAgICAgfSwKCiAgICAgIGNhbmNlbFRpbWVyczogZnVuY3Rp
        b24oKSB7CiAgICAgICAgdmFyIGksIGxlbjsKCiAgICAgICAgZm9yIChpID0g
        MCwgbGVuID0gdGhyb3R0bGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewog
        ICAgICAgICAgY2xlYXJUaW1lb3V0KHRocm90dGxlcnNbaV1bMl0pOwogICAg
        ICAgIH0KICAgICAgICB0aHJvdHRsZXJzID0gW107CgogICAgICAgIGZvciAo
        aSA9IDAsIGxlbiA9IGRlYm91bmNlZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysp
        IHsKICAgICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZWVzW2ldWzJdKTsK
        ICAgICAgICB9CiAgICAgICAgZGVib3VuY2VlcyA9IFtdOwoKICAgICAgICBp
        ZiAobGF0ZXJUaW1lcikgewogICAgICAgICAgY2xlYXJUaW1lb3V0KGxhdGVy
        VGltZXIpOwogICAgICAgICAgbGF0ZXJUaW1lciA9IG51bGw7CiAgICAgICAg
        fQogICAgICAgIHRpbWVycyA9IFtdOwoKICAgICAgICBpZiAoYXV0b3J1bikg
        ewogICAgICAgICAgY2xlYXJUaW1lb3V0KGF1dG9ydW4pOwogICAgICAgICAg
        YXV0b3J1biA9IG51bGw7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgaGFz
        VGltZXJzOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gISF0aW1lcnMu
        bGVuZ3RoIHx8IGF1dG9ydW47CiAgICAgIH0sCgogICAgICBjYW5jZWw6IGZ1
        bmN0aW9uKHRpbWVyKSB7CiAgICAgICAgaWYgKHRpbWVyICYmIHR5cGVvZiB0
        aW1lciA9PT0gJ29iamVjdCcgJiYgdGltZXIucXVldWUgJiYgdGltZXIubWV0
        aG9kKSB7IC8vIHdlJ3JlIGNhbmNlbGxpbmcgYSBkZWZlck9uY2UKICAgICAg
        ICAgIHJldHVybiB0aW1lci5xdWV1ZS5jYW5jZWwodGltZXIpOwogICAgICAg
        IH0gZWxzZSBpZiAodHlwZW9mIHRpbWVyID09PSAnZnVuY3Rpb24nKSB7IC8v
        IHdlJ3JlIGNhbmNlbGxpbmcgYSBzZXRUaW1lb3V0CiAgICAgICAgICBmb3Ig
        KHZhciBpID0gMCwgbCA9IHRpbWVycy5sZW5ndGg7IGkgPCBsOyBpICs9IDIp
        IHsKICAgICAgICAgICAgaWYgKHRpbWVyc1tpICsgMV0gPT09IHRpbWVyKSB7
        CiAgICAgICAgICAgICAgdGltZXJzLnNwbGljZShpLCAyKTsgLy8gcmVtb3Zl
        IHRoZSB0d28gZWxlbWVudHMKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsK
        ICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgICByZXR1cm47IC8vIHRpbWVyIHdhcyBudWxsIG9yIG5vdCBhIHRp
        bWVyCiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIEJhY2tidXJuZXIu
        cHJvdG90eXBlLnNjaGVkdWxlID0gQmFja2J1cm5lci5wcm90b3R5cGUuZGVm
        ZXI7CiAgICBCYWNrYnVybmVyLnByb3RvdHlwZS5zY2hlZHVsZU9uY2UgPSBC
        YWNrYnVybmVyLnByb3RvdHlwZS5kZWZlck9uY2U7CiAgICBCYWNrYnVybmVy
        LnByb3RvdHlwZS5sYXRlciA9IEJhY2tidXJuZXIucHJvdG90eXBlLnNldFRp
        bWVvdXQ7CgogICAgZnVuY3Rpb24gY3JlYXRlQXV0b3J1bihiYWNrYnVybmVy
        KSB7CiAgICAgIGJhY2tidXJuZXIuYmVnaW4oKTsKICAgICAgYXV0b3J1biA9
        IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGF1dG9y
        dW4gPSBudWxsOwogICAgICAgIGJhY2tidXJuZXIuZW5kKCk7CiAgICAgIH0p
        OwogICAgfQoKICAgIGZ1bmN0aW9uIGV4ZWN1dGVUaW1lcnMoc2VsZikgewog
        ICAgICB2YXIgbm93ID0gK25ldyBEYXRlKCksCiAgICAgICAgICB0aW1lLCBm
        bnMsIGksIGw7CgogICAgICBzZWxmLnJ1bihmdW5jdGlvbigpIHsKICAgICAg
        ICAvLyBUT0RPOiBiaW5hcnkgc2VhcmNoCiAgICAgICAgZm9yIChpID0gMCwg
        bCA9IHRpbWVycy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAg
        IHRpbWUgPSB0aW1lcnNbaV07CiAgICAgICAgICBpZiAodGltZSA+IG5vdykg
        eyBicmVhazsgfQogICAgICAgIH0KCiAgICAgICAgZm5zID0gdGltZXJzLnNw
        bGljZSgwLCBpKTsKCiAgICAgICAgZm9yIChpID0gMSwgbCA9IGZucy5sZW5n
        dGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIHNlbGYuc2NoZWR1bGUo
        c2VsZi5vcHRpb25zLmRlZmF1bHRRdWV1ZSwgbnVsbCwgZm5zW2ldKTsKICAg
        ICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKHRpbWVycy5sZW5ndGgpIHsK
        ICAgICAgICBsYXRlclRpbWVyID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rp
        b24oKSB7CiAgICAgICAgICBleGVjdXRlVGltZXJzKHNlbGYpOwogICAgICAg
        ICAgbGF0ZXJUaW1lciA9IG51bGw7CiAgICAgICAgICBsYXRlclRpbWVyRXhw
        aXJlc0F0ID0gbnVsbDsKICAgICAgICB9LCB0aW1lcnNbMF0gLSBub3cpOwog
        ICAgICAgIGxhdGVyVGltZXJFeHBpcmVzQXQgPSB0aW1lcnNbMF07CiAgICAg
        IH0KICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kRGVib3VuY2VlKHRhcmdldCwg
        bWV0aG9kKSB7CiAgICAgIHZhciBkZWJvdW5jZWUsCiAgICAgICAgICBpbmRl
        eCA9IC0xOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkZWJvdW5jZWVz
        Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGRlYm91bmNlZSA9IGRl
        Ym91bmNlZXNbaV07CiAgICAgICAgaWYgKGRlYm91bmNlZVswXSA9PT0gdGFy
        Z2V0ICYmIGRlYm91bmNlZVsxXSA9PT0gbWV0aG9kKSB7CiAgICAgICAgICBp
        bmRleCA9IGk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0K
        CiAgICAgIHJldHVybiBpbmRleDsKICAgIH0KCgogICAgX19leHBvcnRzX18u
        QmFja2J1cm5lciA9IEJhY2tidXJuZXI7CiAgfSk7Cn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKdmFyIG9uQmVnaW4gPSBmdW5jdGlvbihjdXJyZW50KSB7CiAg
        RW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wID0gY3VycmVudDsKfTsKCnZhciBv
        bkVuZCA9IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQpIHsKICBFbWJlci5ydW4u
        Y3VycmVudFJ1bkxvb3AgPSBuZXh0Owp9OwoKdmFyIEJhY2tidXJuZXIgPSBy
        ZXF1aXJlTW9kdWxlKCdiYWNrYnVybmVyJykuQmFja2J1cm5lciwKICAgIGJh
        Y2tidXJuZXIgPSBuZXcgQmFja2J1cm5lcihbJ3N5bmMnLCAnYWN0aW9ucycs
        ICdkZXN0cm95J10sIHsKICAgICAgc3luYzogewogICAgICAgIGJlZm9yZTog
        RW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXMsCiAgICAgICAgYWZ0ZXI6IEVt
        YmVyLmVuZFByb3BlcnR5Q2hhbmdlcwogICAgICB9LAogICAgICBkZWZhdWx0
        UXVldWU6ICdhY3Rpb25zJywKICAgICAgb25CZWdpbjogb25CZWdpbiwKICAg
        ICAgb25FbmQ6IG9uRW5kCiAgICB9KSwKICAgIHNsaWNlID0gW10uc2xpY2U7
        CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uCi8vIEVtYmVyLnJ1biAtIHRoaXMgaXMgaWRl
        YWxseSB0aGUgb25seSBwdWJsaWMgQVBJIHRoZSBkZXYgc2VlcwovLwoKLyoq
        CiAgUnVucyB0aGUgcGFzc2VkIHRhcmdldCBhbmQgbWV0aG9kIGluc2lkZSBv
        ZiBhIFJ1bkxvb3AsIGVuc3VyaW5nIGFueQogIGRlZmVycmVkIGFjdGlvbnMg
        aW5jbHVkaW5nIGJpbmRpbmdzIGFuZCB2aWV3cyB1cGRhdGVzIGFyZSBmbHVz
        aGVkIGF0IHRoZQogIGVuZC4KCiAgTm9ybWFsbHkgeW91IHNob3VsZCBub3Qg
        bmVlZCB0byBpbnZva2UgdGhpcyBtZXRob2QgeW91cnNlbGYuIEhvd2V2ZXIg
        aWYKICB5b3UgYXJlIGltcGxlbWVudGluZyByYXcgZXZlbnQgaGFuZGxlcnMg
        d2hlbiBpbnRlcmZhY2luZyB3aXRoIG90aGVyCiAgbGlicmFyaWVzIG9yIHBs
        dWdpbnMsIHlvdSBzaG91bGQgcHJvYmFibHkgd3JhcCBhbGwgb2YgeW91ciBj
        b2RlIGluc2lkZSB0aGlzCiAgY2FsbC4KCiAgYGBgamF2YXNjcmlwdAogIEVt
        YmVyLnJ1bihmdW5jdGlvbigpIHsKICAgIC8vIGNvZGUgdG8gYmUgZXhlY3V0
        ZSB3aXRoaW4gYSBSdW5Mb29wCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBydW4K
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQHN0YXRpYwogIEBjb25zdHJ1Y3Rvcgog
        IEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSB0YXJnZXQgb2YgbWV0aG9kIHRv
        IGNhbGwKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIE1ldGhv
        ZCB0byBpbnZva2UuCiAgICBNYXkgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmlu
        Zy4gSWYgeW91IHBhc3MgYSBzdHJpbmcKICAgIHRoZW4gaXQgd2lsbCBiZSBs
        b29rZWQgdXAgb24gdGhlIHBhc3NlZCB0YXJnZXQuCiAgQHBhcmFtIHtPYmpl
        Y3R9IFthcmdzKl0gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIHlvdSB3aXNo
        IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC4KICBAcmV0dXJuIHtPYmplY3R9IHJl
        dHVybiB2YWx1ZSBmcm9tIGludm9raW5nIHRoZSBwYXNzZWQgZnVuY3Rpb24u
        CiovCkVtYmVyLnJ1biA9IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kKSB7CiAg
        dmFyIHJldDsKCiAgaWYgKEVtYmVyLm9uZXJyb3IpIHsKICAgIHRyeSB7CiAg
        ICAgIHJldCA9IGJhY2tidXJuZXIucnVuLmFwcGx5KGJhY2tidXJuZXIsIGFy
        Z3VtZW50cyk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIEVtYmVyLm9uZXJy
        b3IoZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHJldCA9IGJhY2tidXJuZXIu
        cnVuLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1
        cm4gcmV0Owp9OwoKLyoqCgogIElmIG5vIHJ1bi1sb29wIGlzIHByZXNlbnQs
        IGl0IGNyZWF0ZXMgYSBuZXcgb25lLiBJZiBhIHJ1biBsb29wIGlzCiAgcHJl
        c2VudCBpdCB3aWxsIHF1ZXVlIGl0c2VsZiB0byBydW4gb24gdGhlIGV4aXN0
        aW5nIHJ1bi1sb29wcyBhY3Rpb24KICBxdWV1ZS4KCiAgUGxlYXNlIG5vdGU6
        IFRoaXMgaXMgbm90IGZvciBub3JtYWwgdXNhZ2UsIGFuZCBzaG91bGQgYmUg
        dXNlZCBzcGFyaW5nbHkuCgogIElmIGludm9rZWQgd2hlbiBub3Qgd2l0aGlu
        IGEgcnVuIGxvb3A6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4uam9p
        bihmdW5jdGlvbigpIHsKICAgIC8vIGNyZWF0ZXMgYSBuZXcgcnVuLWxvb3AK
        ICB9KTsKICBgYGAKCiAgQWx0ZXJuYXRpdmVseSwgaWYgY2FsbGVkIHdpdGhp
        biBhbiBleGlzdGluZyBydW4gbG9vcDoKCiAgYGBgamF2YXNjcmlwdAogIEVt
        YmVyLnJ1bihmdW5jdGlvbigpIHsKICAgIC8vIGNyZWF0ZXMgYSBuZXcgcnVu
        LWxvb3AKICAgIEVtYmVyLnJ1bi5qb2luKGZ1bmN0aW9uKCkgewogICAgICAv
        LyBqb2lucyB3aXRoIHRoZSBleGlzdGluZyBydW4tbG9vcCwgYW5kIHF1ZXVl
        cyBmb3IgaW52b2NhdGlvbiBvbgogICAgICAvLyB0aGUgZXhpc3RpbmcgcnVu
        LWxvb3BzIGFjdGlvbiBxdWV1ZS4KICAgIH0pOwogIH0pOwogIGBgYAoKICBA
        bWV0aG9kIGpvaW4KICBAbmFtZXNwYWNlIEVtYmVyCiAgQHBhcmFtIHtPYmpl
        Y3R9IFt0YXJnZXRdIHRhcmdldCBvZiBtZXRob2QgdG8gY2FsbAogIEBwYXJh
        bSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgTWV0aG9kIHRvIGludm9rZS4K
        ICAgIE1heSBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nLiBJZiB5b3UgcGFz
        cyBhIHN0cmluZwogICAgdGhlbiBpdCB3aWxsIGJlIGxvb2tlZCB1cCBvbiB0
        aGUgcGFzc2VkIHRhcmdldC4KICBAcGFyYW0ge09iamVjdH0gW2FyZ3MqXSBB
        bnkgYWRkaXRpb25hbCBhcmd1bWVudHMgeW91IHdpc2ggdG8gcGFzcyB0byB0
        aGUgbWV0aG9kLgogIEByZXR1cm4ge09iamVjdH0gcmV0dXJuIHZhbHVlIGZy
        b20gaW52b2tpbmcgdGhlIHBhc3NlZCBmdW5jdGlvbi4gUGxlYXNlIG5vdGUs
        CiAgd2hlbiBjYWxsZWQgd2l0aGluIGFuIGV4aXN0aW5nIGxvb3AsIG5vIHJl
        dHVybiB2YWx1ZSBpcyBwb3NzaWJsZS4KKi8KRW1iZXIucnVuLmpvaW4gPSBm
        dW5jdGlvbih0YXJnZXQsIG1ldGhvZCkgewogIGlmICghRW1iZXIucnVuLmN1
        cnJlbnRSdW5Mb29wKSB7CiAgICByZXR1cm4gRW1iZXIucnVuLmFwcGx5KEVt
        YmVyLnJ1biwgYXJndW1lbnRzKTsKICB9CgogIHZhciBhcmdzID0gc2xpY2Uu
        Y2FsbChhcmd1bWVudHMpOwogIGFyZ3MudW5zaGlmdCgnYWN0aW9ucycpOwog
        IEVtYmVyLnJ1bi5zY2hlZHVsZS5hcHBseShFbWJlci5ydW4sIGFyZ3MpOwp9
        OwoKRW1iZXIucnVuLmJhY2tidXJuZXIgPSBiYWNrYnVybmVyOwoKdmFyIHJ1
        biA9IEVtYmVyLnJ1bjsKCkVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcCA9IG51
        bGw7CgpFbWJlci5ydW4ucXVldWVzID0gYmFja2J1cm5lci5xdWV1ZU5hbWVz
        OwoKLyoqCiAgQmVnaW5zIGEgbmV3IFJ1bkxvb3AuIEFueSBkZWZlcnJlZCBh
        Y3Rpb25zIGludm9rZWQgYWZ0ZXIgdGhlIGJlZ2luIHdpbGwKICBiZSBidWZm
        ZXJlZCB1bnRpbCB5b3UgaW52b2tlIGEgbWF0Y2hpbmcgY2FsbCB0byBgRW1i
        ZXIucnVuLmVuZCgpYC4gVGhpcyBpcwogIGEgbG93ZXItbGV2ZWwgd2F5IHRv
        IHVzZSBhIFJ1bkxvb3AgaW5zdGVhZCBvZiB1c2luZyBgRW1iZXIucnVuKClg
        LgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIucnVuLmJlZ2luKCk7CiAgLy8g
        Y29kZSB0byBiZSBleGVjdXRlIHdpdGhpbiBhIFJ1bkxvb3AKICBFbWJlci5y
        dW4uZW5kKCk7CiAgYGBgCgogIEBtZXRob2QgYmVnaW4KICBAcmV0dXJuIHt2
        b2lkfQoqLwpFbWJlci5ydW4uYmVnaW4gPSBmdW5jdGlvbigpIHsKICBiYWNr
        YnVybmVyLmJlZ2luKCk7Cn07CgovKioKICBFbmRzIGEgUnVuTG9vcC4gVGhp
        cyBtdXN0IGJlIGNhbGxlZCBzb21ldGltZSBhZnRlciB5b3UgY2FsbAogIGBF
        bWJlci5ydW4uYmVnaW4oKWAgdG8gZmx1c2ggYW55IGRlZmVycmVkIGFjdGlv
        bnMuIFRoaXMgaXMgYSBsb3dlci1sZXZlbCB3YXkKICB0byB1c2UgYSBSdW5M
        b29wIGluc3RlYWQgb2YgdXNpbmcgYEVtYmVyLnJ1bigpYC4KCiAgYGBgamF2
        YXNjcmlwdAogIEVtYmVyLnJ1bi5iZWdpbigpOwogIC8vIGNvZGUgdG8gYmUg
        ZXhlY3V0ZSB3aXRoaW4gYSBSdW5Mb29wCiAgRW1iZXIucnVuLmVuZCgpOwog
        IGBgYAoKICBAbWV0aG9kIGVuZAogIEByZXR1cm4ge3ZvaWR9CiovCkVtYmVy
        LnJ1bi5lbmQgPSBmdW5jdGlvbigpIHsKICBiYWNrYnVybmVyLmVuZCgpOwp9
        OwoKLyoqCiAgQXJyYXkgb2YgbmFtZWQgcXVldWVzLiBUaGlzIGFycmF5IGRl
        dGVybWluZXMgdGhlIG9yZGVyIGluIHdoaWNoIHF1ZXVlcwogIGFyZSBmbHVz
        aGVkIGF0IHRoZSBlbmQgb2YgdGhlIFJ1bkxvb3AuIFlvdSBjYW4gZGVmaW5l
        IHlvdXIgb3duIHF1ZXVlcyBieQogIHNpbXBseSBhZGRpbmcgdGhlIHF1ZXVl
        IG5hbWUgdG8gdGhpcyBhcnJheS4gTm9ybWFsbHkgeW91IHNob3VsZCBub3Qg
        bmVlZAogIHRvIGluc3BlY3Qgb3IgbW9kaWZ5IHRoaXMgcHJvcGVydHkuCgog
        IEBwcm9wZXJ0eSBxdWV1ZXMKICBAdHlwZSBBcnJheQogIEBkZWZhdWx0IFsn
        c3luYycsICdhY3Rpb25zJywgJ2Rlc3Ryb3knXQoqLwoKLyoqCiAgQWRkcyB0
        aGUgcGFzc2VkIHRhcmdldC9tZXRob2QgYW5kIGFueSBvcHRpb25hbCBhcmd1
        bWVudHMgdG8gdGhlIG5hbWVkCiAgcXVldWUgdG8gYmUgZXhlY3V0ZWQgYXQg
        dGhlIGVuZCBvZiB0aGUgUnVuTG9vcC4gSWYgeW91IGhhdmUgbm90IGFscmVh
        ZHkKICBzdGFydGVkIGEgUnVuTG9vcCB3aGVuIGNhbGxpbmcgdGhpcyBtZXRo
        b2Qgb25lIHdpbGwgYmUgc3RhcnRlZCBmb3IgeW91CiAgYXV0b21hdGljYWxs
        eS4KCiAgQXQgdGhlIGVuZCBvZiBhIFJ1bkxvb3AsIGFueSBtZXRob2RzIHNj
        aGVkdWxlZCBpbiB0aGlzIHdheSB3aWxsIGJlIGludm9rZWQuCiAgTWV0aG9k
        cyB3aWxsIGJlIGludm9rZWQgaW4gYW4gb3JkZXIgbWF0Y2hpbmcgdGhlIG5h
        bWVkIHF1ZXVlcyBkZWZpbmVkIGluCiAgdGhlIGBFbWJlci5ydW4ucXVldWVz
        YCBwcm9wZXJ0eS4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLnJ1bi5zY2hl
        ZHVsZSgnc3luYycsIHRoaXMsIGZ1bmN0aW9uKCkgewogICAgLy8gdGhpcyB3
        aWxsIGJlIGV4ZWN1dGVkIGluIHRoZSBmaXJzdCBSdW5Mb29wIHF1ZXVlLCB3
        aGVuIGJpbmRpbmdzIGFyZSBzeW5jZWQKICAgIGNvbnNvbGUubG9nKCJzY2hl
        ZHVsZWQgb24gc3luYyBxdWV1ZSIpOwogIH0pOwoKICBFbWJlci5ydW4uc2No
        ZWR1bGUoJ2FjdGlvbnMnLCB0aGlzLCBmdW5jdGlvbigpIHsKICAgIC8vIHRo
        aXMgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgJ2FjdGlvbnMnIHF1ZXVlLCBh
        ZnRlciBiaW5kaW5ncyBoYXZlIHN5bmNlZC4KICAgIGNvbnNvbGUubG9nKCJz
        Y2hlZHVsZWQgb24gYWN0aW9ucyBxdWV1ZSIpOwogIH0pOwoKICAvLyBOb3Rl
        IHRoZSBmdW5jdGlvbnMgd2lsbCBiZSBydW4gaW4gb3JkZXIgYmFzZWQgb24g
        dGhlIHJ1biBxdWV1ZXMgb3JkZXIuIE91dHB1dCB3b3VsZCBiZToKICAvLyAg
        IHNjaGVkdWxlZCBvbiBzeW5jIHF1ZXVlCiAgLy8gICBzY2hlZHVsZWQgb24g
        YWN0aW9ucyBxdWV1ZQogIGBgYAoKICBAbWV0aG9kIHNjaGVkdWxlCiAgQHBh
        cmFtIHtTdHJpbmd9IHF1ZXVlIFRoZSBuYW1lIG9mIHRoZSBxdWV1ZSB0byBz
        Y2hlZHVsZSBhZ2FpbnN0LgogICAgRGVmYXVsdCBxdWV1ZXMgYXJlICdzeW5j
        JyBhbmQgJ2FjdGlvbnMnCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIHRh
        cmdldCBvYmplY3QgdG8gdXNlIGFzIHRoZSBjb250ZXh0IHdoZW4gaW52b2tp
        bmcgYSBtZXRob2QuCiAgQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IG1ldGhv
        ZCBUaGUgbWV0aG9kIHRvIGludm9rZS4gSWYgeW91IHBhc3MgYSBzdHJpbmcg
        aXQKICAgIHdpbGwgYmUgcmVzb2x2ZWQgb24gdGhlIHRhcmdldCBvYmplY3Qg
        YXQgdGhlIHRpbWUgdGhlIHNjaGVkdWxlZCBpdGVtIGlzCiAgICBpbnZva2Vk
        IGFsbG93aW5nIHlvdSB0byBjaGFuZ2UgdGhlIHRhcmdldCBmdW5jdGlvbi4K
        ICBAcGFyYW0ge09iamVjdH0gW2FyZ3VtZW50cypdIE9wdGlvbmFsIGFyZ3Vt
        ZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIHF1ZXVlZCBtZXRob2QuCiAgQHJl
        dHVybiB7dm9pZH0KKi8KRW1iZXIucnVuLnNjaGVkdWxlID0gZnVuY3Rpb24o
        cXVldWUsIHRhcmdldCwgbWV0aG9kKSB7CiAgY2hlY2tBdXRvUnVuKCk7CiAg
        YmFja2J1cm5lci5zY2hlZHVsZS5hcHBseShiYWNrYnVybmVyLCBhcmd1bWVu
        dHMpOwp9OwoKLy8gVXNlZCBieSBnbG9iYWwgdGVzdCB0ZWFyZG93bgpFbWJl
        ci5ydW4uaGFzU2NoZWR1bGVkVGltZXJzID0gZnVuY3Rpb24oKSB7CiAgcmV0
        dXJuIGJhY2tidXJuZXIuaGFzVGltZXJzKCk7Cn07CgovLyBVc2VkIGJ5IGds
        b2JhbCB0ZXN0IHRlYXJkb3duCkVtYmVyLnJ1bi5jYW5jZWxUaW1lcnMgPSBm
        dW5jdGlvbiAoKSB7CiAgYmFja2J1cm5lci5jYW5jZWxUaW1lcnMoKTsKfTsK
        Ci8qKgogIEltbWVkaWF0ZWx5IGZsdXNoZXMgYW55IGV2ZW50cyBzY2hlZHVs
        ZWQgaW4gdGhlICdzeW5jJyBxdWV1ZS4gQmluZGluZ3MKICB1c2UgdGhpcyBx
        dWV1ZSBzbyB0aGlzIG1ldGhvZCBpcyBhIHVzZWZ1bCB3YXkgdG8gaW1tZWRp
        YXRlbHkgZm9yY2UgYWxsCiAgYmluZGluZ3MgaW4gdGhlIGFwcGxpY2F0aW9u
        IHRvIHN5bmMuCgogIFlvdSBzaG91bGQgY2FsbCB0aGlzIG1ldGhvZCBhbnl0
        aW1lIHlvdSBuZWVkIGFueSBjaGFuZ2VkIHN0YXRlIHRvIHByb3BhZ2F0ZQog
        IHRocm91Z2hvdXQgdGhlIGFwcCBpbW1lZGlhdGVseSB3aXRob3V0IHJlcGFp
        bnRpbmcgdGhlIFVJICh3aGljaCBoYXBwZW5zCiAgaW4gdGhlIGxhdGVyICdy
        ZW5kZXInIHF1ZXVlIGFkZGVkIGJ5IHRoZSBgZW1iZXItdmlld3NgIHBhY2th
        Z2UpLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIucnVuLnN5bmMoKTsKICBg
        YGAKCiAgQG1ldGhvZCBzeW5jCiAgQHJldHVybiB7dm9pZH0KKi8KRW1iZXIu
        cnVuLnN5bmMgPSBmdW5jdGlvbigpIHsKICBpZiAoYmFja2J1cm5lci5jdXJy
        ZW50SW5zdGFuY2UpIHsKICAgIGJhY2tidXJuZXIuY3VycmVudEluc3RhbmNl
        LnF1ZXVlcy5zeW5jLmZsdXNoKCk7CiAgfQp9OwoKLyoqCiAgSW52b2tlcyB0
        aGUgcGFzc2VkIHRhcmdldC9tZXRob2QgYW5kIG9wdGlvbmFsIGFyZ3VtZW50
        cyBhZnRlciBhIHNwZWNpZmllZAogIHBlcmlvZCBpZiB0aW1lLiBUaGUgbGFz
        dCBwYXJhbWV0ZXIgb2YgdGhpcyBtZXRob2QgbXVzdCBhbHdheXMgYmUgYSBu
        dW1iZXIKICBvZiBtaWxsaXNlY29uZHMuCgogIFlvdSBzaG91bGQgdXNlIHRo
        aXMgbWV0aG9kIHdoZW5ldmVyIHlvdSBuZWVkIHRvIHJ1biBzb21lIGFjdGlv
        biBhZnRlciBhCiAgcGVyaW9kIG9mIHRpbWUgaW5zdGVhZCBvZiB1c2luZyBg
        c2V0VGltZW91dCgpYC4gVGhpcyBtZXRob2Qgd2lsbCBlbnN1cmUgdGhhdAog
        IGl0ZW1zIHRoYXQgZXhwaXJlIGR1cmluZyB0aGUgc2FtZSBzY3JpcHQgZXhl
        Y3V0aW9uIGN5Y2xlIGFsbCBleGVjdXRlCiAgdG9nZXRoZXIsIHdoaWNoIGlz
        IG9mdGVuIG1vcmUgZWZmaWNpZW50IHRoYW4gdXNpbmcgYSByZWFsIHNldFRp
        bWVvdXQuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4ubGF0ZXIobXlD
        b250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8vIGNvZGUgaGVyZSB3aWxsIGV4
        ZWN1dGUgd2l0aGluIGEgUnVuTG9vcCBpbiBhYm91dCA1MDBtcyB3aXRoIHRo
        aXMgPT0gbXlDb250ZXh0CiAgfSwgNTAwKTsKICBgYGAKCiAgQG1ldGhvZCBs
        YXRlcgogIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSB0YXJnZXQgb2YgbWV0
        aG9kIHRvIGludm9rZQogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBtZXRo
        b2QgVGhlIG1ldGhvZCB0byBpbnZva2UuCiAgICBJZiB5b3UgcGFzcyBhIHN0
        cmluZyBpdCB3aWxsIGJlIHJlc29sdmVkIG9uIHRoZQogICAgdGFyZ2V0IGF0
        IHRoZSB0aW1lIHRoZSBtZXRob2QgaXMgaW52b2tlZC4KICBAcGFyYW0ge09i
        amVjdH0gW2FyZ3MqXSBPcHRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyB0byB0
        aGUgdGltZW91dC4KICBAcGFyYW0ge051bWJlcn0gd2FpdCBOdW1iZXIgb2Yg
        bWlsbGlzZWNvbmRzIHRvIHdhaXQuCiAgQHJldHVybiB7U3RyaW5nfSBhIHN0
        cmluZyB5b3UgY2FuIHVzZSB0byBjYW5jZWwgdGhlIHRpbWVyIGluCiAgICBg
        RW1iZXIucnVuLmNhbmNlbGAgbGF0ZXIuCiovCkVtYmVyLnJ1bi5sYXRlciA9
        IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kKSB7CiAgcmV0dXJuIGJhY2tidXJu
        ZXIubGF0ZXIuYXBwbHkoYmFja2J1cm5lciwgYXJndW1lbnRzKTsKfTsKCi8q
        KgogIFNjaGVkdWxlIGEgZnVuY3Rpb24gdG8gcnVuIG9uZSB0aW1lIGR1cmlu
        ZyB0aGUgY3VycmVudCBSdW5Mb29wLiBUaGlzIGlzIGVxdWl2YWxlbnQKICB0
        byBjYWxsaW5nIGBzY2hlZHVsZU9uY2VgIHdpdGggdGhlICJhY3Rpb25zIiBx
        dWV1ZS4KCiAgQG1ldGhvZCBvbmNlCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJn
        ZXRdIFRoZSB0YXJnZXQgb2YgdGhlIG1ldGhvZCB0byBpbnZva2UuCiAgQHBh
        cmFtIHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGlu
        dm9rZS4KICAgIElmIHlvdSBwYXNzIGEgc3RyaW5nIGl0IHdpbGwgYmUgcmVz
        b2x2ZWQgb24gdGhlCiAgICB0YXJnZXQgYXQgdGhlIHRpbWUgdGhlIG1ldGhv
        ZCBpcyBpbnZva2VkLgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlv
        bmFsIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0LgogIEByZXR1
        cm4ge09iamVjdH0gdGltZXIKKi8KRW1iZXIucnVuLm9uY2UgPSBmdW5jdGlv
        bih0YXJnZXQsIG1ldGhvZCkgewogIGNoZWNrQXV0b1J1bigpOwogIHZhciBh
        cmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogIGFyZ3MudW5zaGlmdCgn
        YWN0aW9ucycpOwogIHJldHVybiBiYWNrYnVybmVyLnNjaGVkdWxlT25jZS5h
        cHBseShiYWNrYnVybmVyLCBhcmdzKTsKfTsKCi8qKgogIFNjaGVkdWxlcyBh
        IGZ1bmN0aW9uIHRvIHJ1biBvbmUgdGltZSBpbiBhIGdpdmVuIHF1ZXVlIG9m
        IHRoZSBjdXJyZW50IFJ1bkxvb3AuCiAgQ2FsbGluZyB0aGlzIG1ldGhvZCB3
        aXRoIHRoZSBzYW1lIHF1ZXVlL3RhcmdldC9tZXRob2QgY29tYmluYXRpb24g
        d2lsbCBoYXZlCiAgbm8gZWZmZWN0IChwYXN0IHRoZSBpbml0aWFsIGNhbGwp
        LgoKICBOb3RlIHRoYXQgYWx0aG91Z2ggeW91IGNhbiBwYXNzIG9wdGlvbmFs
        IGFyZ3VtZW50cyB0aGVzZSB3aWxsIG5vdCBiZQogIGNvbnNpZGVyZWQgd2hl
        biBsb29raW5nIGZvciBkdXBsaWNhdGVzLiBOZXcgYXJndW1lbnRzIHdpbGwg
        cmVwbGFjZSBwcmV2aW91cwogIGNhbGxzLgoKICBgYGBqYXZhc2NyaXB0CiAg
        RW1iZXIucnVuKGZ1bmN0aW9uKCkgewogICAgdmFyIHNheUhpID0gZnVuY3Rp
        b24oKSB7IGNvbnNvbGUubG9nKCdoaScpOyB9CiAgICBFbWJlci5ydW4uc2No
        ZWR1bGVPbmNlKCdhZnRlclJlbmRlcicsIG15Q29udGV4dCwgc2F5SGkpOwog
        ICAgRW1iZXIucnVuLnNjaGVkdWxlT25jZSgnYWZ0ZXJSZW5kZXInLCBteUNv
        bnRleHQsIHNheUhpKTsKICAgIC8vIHNheUhpIHdpbGwgb25seSBiZSBleGVj
        dXRlZCBvbmNlLCBpbiB0aGUgYWZ0ZXJSZW5kZXIgcXVldWUgb2YgdGhlIFJ1
        bkxvb3AKICB9KTsKICBgYGAKCiAgQWxzbyBub3RlIHRoYXQgcGFzc2luZyBh
        biBhbm9ueW1vdXMgZnVuY3Rpb24gdG8gYEVtYmVyLnJ1bi5zY2hlZHVsZU9u
        Y2VgIHdpbGwKICBub3QgcHJldmVudCBhZGRpdGlvbmFsIGNhbGxzIHdpdGgg
        YW4gaWRlbnRpY2FsIGFub255bW91cyBmdW5jdGlvbiBmcm9tCiAgc2NoZWR1
        bGluZyB0aGUgaXRlbXMgbXVsdGlwbGUgdGltZXMsIGUuZy46CgogIGBgYGph
        dmFzY3JpcHQKICBmdW5jdGlvbiBzY2hlZHVsZUl0KCkgewogICAgRW1iZXIu
        cnVuLnNjaGVkdWxlT25jZSgnYWN0aW9ucycsIG15Q29udGV4dCwgZnVuY3Rp
        b24oKSB7IGNvbnNvbGUubG9nKCJDbG9zdXJlIik7IH0pOwogIH0KICBzY2hl
        ZHVsZUl0KCk7CiAgc2NoZWR1bGVJdCgpOwogIC8vICJDbG9zdXJlIiB3aWxs
        IHByaW50IHR3aWNlLCBldmVuIHRob3VnaCB3ZSdyZSB1c2luZyBgRW1iZXIu
        cnVuLnNjaGVkdWxlT25jZWAsCiAgLy8gYmVjYXVzZSB0aGUgZnVuY3Rpb24g
        d2UgcGFzcyB0byBpdCBpcyBhbm9ueW1vdXMgYW5kIHdvbid0IG1hdGNoIHRo
        ZQogIC8vIHByZXZpb3VzbHkgc2NoZWR1bGVkIG9wZXJhdGlvbi4KICBgYGAK
        CiAgQXZhaWxhYmxlIHF1ZXVlcywgYW5kIHRoZWlyIG9yZGVyLCBjYW4gYmUg
        Zm91bmQgYXQgYEVtYmVyLnJ1bi5xdWV1ZXNgCgogIEBtZXRob2Qgc2NoZWR1
        bGVPbmNlCiAgQHBhcmFtIHtTdHJpbmd9IFtxdWV1ZV0gVGhlIG5hbWUgb2Yg
        dGhlIHF1ZXVlIHRvIHNjaGVkdWxlIGFnYWluc3QuIERlZmF1bHQgcXVldWVz
        IGFyZSAnc3luYycgYW5kICdhY3Rpb25zJy4KICBAcGFyYW0ge09iamVjdH0g
        W3RhcmdldF0gVGhlIHRhcmdldCBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS4K
        ICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIFRoZSBtZXRob2Qg
        dG8gaW52b2tlLgogICAgSWYgeW91IHBhc3MgYSBzdHJpbmcgaXQgd2lsbCBi
        ZSByZXNvbHZlZCBvbiB0aGUKICAgIHRhcmdldCBhdCB0aGUgdGltZSB0aGUg
        bWV0aG9kIGlzIGludm9rZWQuCiAgQHBhcmFtIHtPYmplY3R9IFthcmdzKl0g
        T3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHRpbWVvdXQuCiAg
        QHJldHVybiB7T2JqZWN0fSB0aW1lcgoqLwpFbWJlci5ydW4uc2NoZWR1bGVP
        bmNlID0gZnVuY3Rpb24ocXVldWUsIHRhcmdldCwgbWV0aG9kKSB7CiAgY2hl
        Y2tBdXRvUnVuKCk7CiAgcmV0dXJuIGJhY2tidXJuZXIuc2NoZWR1bGVPbmNl
        LmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07CgovKioKICBTY2hl
        ZHVsZXMgYW4gaXRlbSB0byBydW4gZnJvbSB3aXRoaW4gYSBzZXBhcmF0ZSBy
        dW4gbG9vcCwgYWZ0ZXIKICBjb250cm9sIGhhcyBiZWVuIHJldHVybmVkIHRv
        IHRoZSBzeXN0ZW0uIFRoaXMgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nCiAg
        YEVtYmVyLnJ1bi5sYXRlcmAgd2l0aCBhIHdhaXQgdGltZSBvZiAxbXMuCgog
        IGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4ubmV4dChteUNvbnRleHQsIGZ1
        bmN0aW9uKCkgewogICAgLy8gY29kZSB0byBiZSBleGVjdXRlZCBpbiB0aGUg
        bmV4dCBydW4gbG9vcCwgd2hpY2ggd2lsbCBiZSBzY2hlZHVsZWQgYWZ0ZXIg
        dGhlIGN1cnJlbnQgb25lCiAgfSk7CiAgYGBgCgogIE11bHRpcGxlIG9wZXJh
        dGlvbnMgc2NoZWR1bGVkIHdpdGggYEVtYmVyLnJ1bi5uZXh0YCB3aWxsIGNv
        YWxlc2NlCiAgaW50byB0aGUgc2FtZSBsYXRlciBydW4gbG9vcCwgYWxvbmcg
        d2l0aCBhbnkgb3RoZXIgb3BlcmF0aW9ucwogIHNjaGVkdWxlZCBieSBgRW1i
        ZXIucnVuLmxhdGVyYCB0aGF0IGV4cGlyZSByaWdodCBhcm91bmQgdGhlIHNh
        bWUKICB0aW1lIHRoYXQgYEVtYmVyLnJ1bi5uZXh0YCBvcGVyYXRpb25zIHdp
        bGwgZmlyZS4KCiAgTm90ZSB0aGF0IHRoZXJlIGFyZSBvZnRlbiBhbHRlcm5h
        dGl2ZXMgdG8gdXNpbmcgYEVtYmVyLnJ1bi5uZXh0YC4KICBGb3IgaW5zdGFu
        Y2UsIGlmIHlvdSdkIGxpa2UgdG8gc2NoZWR1bGUgYW4gb3BlcmF0aW9uIHRv
        IGhhcHBlbgogIGFmdGVyIGFsbCBET00gZWxlbWVudCBvcGVyYXRpb25zIGhh
        dmUgY29tcGxldGVkIHdpdGhpbiB0aGUgY3VycmVudAogIHJ1biBsb29wLCB5
        b3UgY2FuIG1ha2UgdXNlIG9mIHRoZSBgYWZ0ZXJSZW5kZXJgIHJ1biBsb29w
        IHF1ZXVlIChhZGRlZAogIGJ5IHRoZSBgZW1iZXItdmlld3NgIHBhY2thZ2Us
        IGFsb25nIHdpdGggdGhlIHByZWNlZGluZyBgcmVuZGVyYCBxdWV1ZQogIHdo
        ZXJlIGFsbCB0aGUgRE9NIGVsZW1lbnQgb3BlcmF0aW9ucyBoYXBwZW4pLiBF
        eGFtcGxlOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLk15Q29sbGVjdGlvblZp
        ZXcgPSBFbWJlci5Db2xsZWN0aW9uVmlldy5leHRlbmQoewogICAgZGlkSW5z
        ZXJ0RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZU9uY2UoJ2FmdGVyUmVuZGVyJywgdGhpcywgJ3Byb2Nlc3NDaGlsZEVs
        ZW1lbnRzJyk7CiAgICB9LAogICAgcHJvY2Vzc0NoaWxkRWxlbWVudHM6IGZ1
        bmN0aW9uKCkgewogICAgICAvLyAuLi4gZG8gc29tZXRoaW5nIHdpdGggY29s
        bGVjdGlvblZpZXcncyBjaGlsZCB2aWV3CiAgICAgIC8vIGVsZW1lbnRzIGFm
        dGVyIHRoZXkndmUgZmluaXNoZWQgcmVuZGVyaW5nLCB3aGljaAogICAgICAv
        LyBjYW4ndCBiZSBkb25lIHdpdGhpbiB0aGUgQ29sbGVjdGlvblZpZXcncwog
        ICAgICAvLyBgZGlkSW5zZXJ0RWxlbWVudGAgaG9vayBiZWNhdXNlIHRoYXQg
        Z2V0cyBydW4KICAgICAgLy8gYmVmb3JlIHRoZSBjaGlsZCBlbGVtZW50cyBo
        YXZlIGJlZW4gYWRkZWQgdG8gdGhlIERPTS4KICAgIH0KICB9KTsKICBgYGAK
        CiAgT25lIGJlbmVmaXQgb2YgdGhlIGFib3ZlIGFwcHJvYWNoIGNvbXBhcmVk
        IHRvIHVzaW5nIGBFbWJlci5ydW4ubmV4dGAgaXMKICB0aGF0IHlvdSB3aWxs
        IGJlIGFibGUgdG8gcGVyZm9ybSBET00vQ1NTIG9wZXJhdGlvbnMgYmVmb3Jl
        IHVucHJvY2Vzc2VkCiAgZWxlbWVudHMgYXJlIHJlbmRlcmVkIHRvIHRoZSBz
        Y3JlZW4sIHdoaWNoIG1heSBwcmV2ZW50IGZsaWNrZXJpbmcgb3IKICBvdGhl
        ciBhcnRpZmFjdHMgY2F1c2VkIGJ5IGRlbGF5aW5nIHByb2Nlc3NpbmcgdW50
        aWwgYWZ0ZXIgcmVuZGVyaW5nLgoKICBUaGUgb3RoZXIgbWFqb3IgYmVuZWZp
        dCB0byB0aGUgYWJvdmUgYXBwcm9hY2ggaXMgdGhhdCBgRW1iZXIucnVuLm5l
        eHRgCiAgaW50cm9kdWNlcyBhbiBlbGVtZW50IG9mIG5vbi1kZXRlcm1pbmlz
        bSwgd2hpY2ggY2FuIG1ha2UgdGhpbmdzIG11Y2gKICBoYXJkZXIgdG8gdGVz
        dCwgZHVlIHRvIGl0cyByZWxpYW5jZSBvbiBgc2V0VGltZW91dGA7IGl0J3Mg
        bXVjaCBoYXJkZXIKICB0byBndWFyYW50ZWUgdGhlIG9yZGVyIG9mIHNjaGVk
        dWxlZCBvcGVyYXRpb25zIHdoZW4gdGhleSBhcmUgc2NoZWR1bGVkCiAgb3V0
        c2lkZSBvZiB0aGUgY3VycmVudCBydW4gbG9vcCwgaS5lLiB3aXRoIGBFbWJl
        ci5ydW4ubmV4dGAuCgogIEBtZXRob2QgbmV4dAogIEBwYXJhbSB7T2JqZWN0
        fSBbdGFyZ2V0XSB0YXJnZXQgb2YgbWV0aG9kIHRvIGludm9rZQogIEBwYXJh
        bSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgVGhlIG1ldGhvZCB0byBpbnZv
        a2UuCiAgICBJZiB5b3UgcGFzcyBhIHN0cmluZyBpdCB3aWxsIGJlIHJlc29s
        dmVkIG9uIHRoZQogICAgdGFyZ2V0IGF0IHRoZSB0aW1lIHRoZSBtZXRob2Qg
        aXMgaW52b2tlZC4KICBAcGFyYW0ge09iamVjdH0gW2FyZ3MqXSBPcHRpb25h
        bCBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgdGltZW91dC4KICBAcmV0dXJu
        IHtPYmplY3R9IHRpbWVyCiovCkVtYmVyLnJ1bi5uZXh0ID0gZnVuY3Rpb24o
        KSB7CiAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgYXJn
        cy5wdXNoKDEpOwogIHJldHVybiBiYWNrYnVybmVyLmxhdGVyLmFwcGx5KGJh
        Y2tidXJuZXIsIGFyZ3MpOwp9OwoKLyoqCiAgQ2FuY2VscyBhIHNjaGVkdWxl
        ZCBpdGVtLiBNdXN0IGJlIGEgdmFsdWUgcmV0dXJuZWQgYnkgYEVtYmVyLnJ1
        bi5sYXRlcigpYCwKICBgRW1iZXIucnVuLm9uY2UoKWAsIG9yIGBFbWJlci5y
        dW4ubmV4dCgpYC4KCiAgYGBgamF2YXNjcmlwdAogIHZhciBydW5OZXh0ID0g
        RW1iZXIucnVuLm5leHQobXlDb250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8v
        IHdpbGwgbm90IGJlIGV4ZWN1dGVkCiAgfSk7CiAgRW1iZXIucnVuLmNhbmNl
        bChydW5OZXh0KTsKCiAgdmFyIHJ1bkxhdGVyID0gRW1iZXIucnVuLmxhdGVy
        KG15Q29udGV4dCwgZnVuY3Rpb24oKSB7CiAgICAvLyB3aWxsIG5vdCBiZSBl
        eGVjdXRlZAogIH0sIDUwMCk7CiAgRW1iZXIucnVuLmNhbmNlbChydW5MYXRl
        cik7CgogIHZhciBydW5PbmNlID0gRW1iZXIucnVuLm9uY2UobXlDb250ZXh0
        LCBmdW5jdGlvbigpIHsKICAgIC8vIHdpbGwgbm90IGJlIGV4ZWN1dGVkCiAg
        fSk7CiAgRW1iZXIucnVuLmNhbmNlbChydW5PbmNlKTsKICBgYGAKCiAgQG1l
        dGhvZCBjYW5jZWwKICBAcGFyYW0ge09iamVjdH0gdGltZXIgVGltZXIgb2Jq
        ZWN0IHRvIGNhbmNlbAogIEByZXR1cm4ge3ZvaWR9CiovCkVtYmVyLnJ1bi5j
        YW5jZWwgPSBmdW5jdGlvbih0aW1lcikgewogIHJldHVybiBiYWNrYnVybmVy
        LmNhbmNlbCh0aW1lcik7Cn07CgovKioKICBEZWxheSBjYWxsaW5nIHRoZSB0
        YXJnZXQgbWV0aG9kIHVudGlsIHRoZSBkZWJvdW5jZSBwZXJpb2QgaGFzIGVs
        YXBzZWQKICB3aXRoIG5vIGFkZGl0aW9uYWwgZGVib3VuY2UgY2FsbHMuIElm
        IGBkZWJvdW5jZWAgaXMgY2FsbGVkIGFnYWluIGJlZm9yZQogIHRoZSBzcGVj
        aWZpZWQgdGltZSBoYXMgZWxhcHNlZCwgdGhlIHRpbWVyIGlzIHJlc2V0IGFu
        ZCB0aGUgZW50aXJlIHBlcmlvZAogIG11c3QgcGFzcyBhZ2FpbiBiZWZvcmUg
        dGhlIHRhcmdldCBtZXRob2QgaXMgY2FsbGVkLgoKICBUaGlzIG1ldGhvZCBz
        aG91bGQgYmUgdXNlZCB3aGVuIGFuIGV2ZW50IG1heSBiZSBjYWxsZWQgbXVs
        dGlwbGUgdGltZXMKICBidXQgdGhlIGFjdGlvbiBzaG91bGQgb25seSBiZSBj
        YWxsZWQgb25jZSB3aGVuIHRoZSBldmVudCBpcyBkb25lIGZpcmluZy4KICBB
        IGNvbW1vbiBleGFtcGxlIGlzIGZvciBzY3JvbGwgZXZlbnRzIHdoZXJlIHlv
        dSBvbmx5IHdhbnQgdXBkYXRlcyB0bwogIGhhcHBlbiBvbmNlIHNjcm9sbGlu
        ZyBoYXMgY2Vhc2VkLgoKICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgbXlGdW5j
        ID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKHRoaXMubmFtZSArICcgcmFu
        LicpOyB9OwogICAgdmFyIG15Q29udGV4dCA9IHtuYW1lOiAnZGVib3VuY2Un
        fTsKCiAgICBFbWJlci5ydW4uZGVib3VuY2UobXlDb250ZXh0LCBteUZ1bmMs
        IDE1MCk7CgogICAgLy8gbGVzcyB0aGFuIDE1MG1zIHBhc3NlcwoKICAgIEVt
        YmVyLnJ1bi5kZWJvdW5jZShteUNvbnRleHQsIG15RnVuYywgMTUwKTsKCiAg
        ICAvLyAxNTBtcyBwYXNzZXMKICAgIC8vIG15RnVuYyBpcyBpbnZva2VkIHdp
        dGggY29udGV4dCBteUNvbnRleHQKICAgIC8vIGNvbnNvbGUgbG9ncyAnZGVi
        b3VuY2UgcmFuLicgb25lIHRpbWUuCiAgYGBgCgogIEBtZXRob2QgZGVib3Vu
        Y2UKICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gdGFyZ2V0IG9mIG1ldGhv
        ZCB0byBpbnZva2UKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9k
        IFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgTWF5IGJlIGEgZnVuY3Rpb24g
        b3IgYSBzdHJpbmcuIElmIHlvdSBwYXNzIGEgc3RyaW5nCiAgICB0aGVuIGl0
        IHdpbGwgYmUgbG9va2VkIHVwIG9uIHRoZSBwYXNzZWQgdGFyZ2V0LgogIEBw
        YXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBw
        YXNzIHRvIHRoZSB0aW1lb3V0LgogIEBwYXJhbSB7TnVtYmVyfSB3YWl0IE51
        bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdC4KICBAcGFyYW0ge0Jvb2xl
        YW59IGltbWVkaWF0ZSBUcmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGUgbGVh
        ZGluZyBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB3YWl0
        IGludGVydmFsLgogIEByZXR1cm4ge3ZvaWR9CiovCkVtYmVyLnJ1bi5kZWJv
        dW5jZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBiYWNrYnVybmVyLmRlYm91
        bmNlLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07CgovKioKICBF
        bnN1cmUgdGhhdCB0aGUgdGFyZ2V0IG1ldGhvZCBpcyBuZXZlciBjYWxsZWQg
        bW9yZSBmcmVxdWVudGx5IHRoYW4KICB0aGUgc3BlY2lmaWVkIHNwYWNpbmcg
        cGVyaW9kLgoKICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgbXlGdW5jID0gZnVu
        Y3Rpb24oKSB7IGNvbnNvbGUubG9nKHRoaXMubmFtZSArICcgcmFuLicpOyB9
        OwogICAgdmFyIG15Q29udGV4dCA9IHtuYW1lOiAndGhyb3R0bGUnfTsKCiAg
        ICBFbWJlci5ydW4udGhyb3R0bGUobXlDb250ZXh0LCBteUZ1bmMsIDE1MCk7
        CgogICAgLy8gNTBtcyBwYXNzZXMKICAgIEVtYmVyLnJ1bi50aHJvdHRsZSht
        eUNvbnRleHQsIG15RnVuYywgMTUwKTsKCiAgICAvLyA1MG1zIHBhc3Nlcwog
        ICAgRW1iZXIucnVuLnRocm90dGxlKG15Q29udGV4dCwgbXlGdW5jLCAxNTAp
        OwoKICAgIC8vIDUwbXMgcGFzc2VzCiAgICBFbWJlci5ydW4udGhyb3R0bGUo
        bXlDb250ZXh0LCBteUZ1bmMsIDE1MCk7CgogICAgLy8gMTUwbXMgcGFzc2Vz
        CiAgICAvLyBteUZ1bmMgaXMgaW52b2tlZCB3aXRoIGNvbnRleHQgbXlDb250
        ZXh0CiAgICAvLyBjb25zb2xlIGxvZ3MgJ3Rocm90dGxlIHJhbi4nIHR3aWNl
        LCAxNTBtcyBhcGFydC4KICBgYGAKCiAgQG1ldGhvZCB0aHJvdHRsZQogIEBw
        YXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSB0YXJnZXQgb2YgbWV0aG9kIHRvIGlu
        dm9rZQogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgVGhlIG1l
        dGhvZCB0byBpbnZva2UuCiAgICBNYXkgYmUgYSBmdW5jdGlvbiBvciBhIHN0
        cmluZy4gSWYgeW91IHBhc3MgYSBzdHJpbmcKICAgIHRoZW4gaXQgd2lsbCBi
        ZSBsb29rZWQgdXAgb24gdGhlIHBhc3NlZCB0YXJnZXQuCiAgQHBhcmFtIHtP
        YmplY3R9IFthcmdzKl0gT3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8g
        dGhlIHRpbWVvdXQuCiAgQHBhcmFtIHtOdW1iZXJ9IHNwYWNpbmcgTnVtYmVy
        IG9mIG1pbGxpc2Vjb25kcyB0byBzcGFjZSBvdXQgcmVxdWVzdHMuCiAgQHJl
        dHVybiB7dm9pZH0KKi8KRW1iZXIucnVuLnRocm90dGxlID0gZnVuY3Rpb24o
        KSB7CiAgcmV0dXJuIGJhY2tidXJuZXIudGhyb3R0bGUuYXBwbHkoYmFja2J1
        cm5lciwgYXJndW1lbnRzKTsKfTsKCi8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBh
        biBhdXRvcnVuIGR1cmluZyB0ZXN0aW5nCmZ1bmN0aW9uIGNoZWNrQXV0b1J1
        bigpIHsKICBpZiAoIUVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcCkgewogICAg
        RW1iZXIuYXNzZXJ0KCJZb3UgaGF2ZSB0dXJuZWQgb24gdGVzdGluZyBtb2Rl
        LCB3aGljaCBkaXNhYmxlZCB0aGUgcnVuLWxvb3AncyBhdXRvcnVuLiBZb3Ug
        d2lsbCBuZWVkIHRvIHdyYXAgYW55IGNvZGUgd2l0aCBhc3luY2hyb25vdXMg
        c2lkZS1lZmZlY3RzIGluIGFuIEVtYmVyLnJ1biIsICFFbWJlci50ZXN0aW5n
        KTsKICB9Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLy8gRW1iZXIuTG9n
        Z2VyCi8vIGdldAovLyBzZXQKLy8gZ3VpZEZvciwgbWV0YQovLyBhZGRPYnNl
        cnZlciwgcmVtb3ZlT2JzZXJ2ZXIKLy8gRW1iZXIucnVuLnNjaGVkdWxlCi8q
        KgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgovLyAuLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8v
        IENPTlNUQU5UUwovLwoKLyoqCiAgRGVidWcgcGFyYW1ldGVyIHlvdSBjYW4g
        dHVybiBvbi4gVGhpcyB3aWxsIGxvZyBhbGwgYmluZGluZ3MgdGhhdCBmaXJl
        IHRvCiAgdGhlIGNvbnNvbGUuIFRoaXMgc2hvdWxkIGJlIGRpc2FibGVkIGlu
        IHByb2R1Y3Rpb24gY29kZS4gTm90ZSB0aGF0IHlvdQogIGNhbiBhbHNvIGVu
        YWJsZSB0aGlzIGZyb20gdGhlIGNvbnNvbGUgb3IgdGVtcG9yYXJpbHkuCgog
        IEBwcm9wZXJ0eSBMT0dfQklORElOR1MKICBAZm9yIEVtYmVyCiAgQHR5cGUg
        Qm9vbGVhbgogIEBkZWZhdWx0IGZhbHNlCiovCkVtYmVyLkxPR19CSU5ESU5H
        UyA9IGZhbHNlIHx8ICEhRW1iZXIuRU5WLkxPR19CSU5ESU5HUzsKCnZhciBn
        ZXQgICAgID0gRW1iZXIuZ2V0LAogICAgc2V0ICAgICA9IEVtYmVyLnNldCwK
        ICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yLAogICAgSVNfR0xPQkFMID0g
        L14oW0EtWiRdfChbMC05XVtBLVokXSkpLzsKCi8qKgogIFJldHVybnMgdHJ1
        ZSBpZiB0aGUgcHJvdmlkZWQgcGF0aCBpcyBnbG9iYWwgKGUuZy4sIGBNeUFw
        cC5mb29Db250cm9sbGVyLmJhcmApCiAgaW5zdGVhZCBvZiBsb2NhbCAoYGZv
        by5iYXIuYmF6YCkuCgogIEBtZXRob2QgaXNHbG9iYWxQYXRoCiAgQGZvciBF
        bWJlcgogIEBwcml2YXRlCiAgQHBhcmFtIHtTdHJpbmd9IHBhdGgKICBAcmV0
        dXJuIEJvb2xlYW4KKi8KdmFyIGlzR2xvYmFsUGF0aCA9IEVtYmVyLmlzR2xv
        YmFsUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHsKICByZXR1cm4gSVNfR0xPQkFM
        LnRlc3QocGF0aCk7Cn07CgpmdW5jdGlvbiBnZXRXaXRoR2xvYmFscyhvYmos
        IHBhdGgpIHsKICByZXR1cm4gZ2V0KGlzR2xvYmFsUGF0aChwYXRoKSA/IEVt
        YmVyLmxvb2t1cCA6IG9iaiwgcGF0aCk7Cn0KCi8vIC4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4K
        Ly8gQklORElORwovLwoKdmFyIEJpbmRpbmcgPSBmdW5jdGlvbih0b1BhdGgs
        IGZyb21QYXRoKSB7CiAgdGhpcy5fZGlyZWN0aW9uID0gJ2Z3ZCc7CiAgdGhp
        cy5fZnJvbSA9IGZyb21QYXRoOwogIHRoaXMuX3RvICAgPSB0b1BhdGg7CiAg
        dGhpcy5fZGlyZWN0aW9uTWFwID0gRW1iZXIuTWFwLmNyZWF0ZSgpOwp9OwoK
        LyoqCkBjbGFzcyBCaW5kaW5nCkBuYW1lc3BhY2UgRW1iZXIKKi8KCkJpbmRp
        bmcucHJvdG90eXBlID0gewogIC8qKgogICAgVGhpcyBjb3BpZXMgdGhlIEJp
        bmRpbmcgc28gaXQgY2FuIGJlIGNvbm5lY3RlZCB0byBhbm90aGVyIG9iamVj
        dC4KCiAgICBAbWV0aG9kIGNvcHkKICAgIEByZXR1cm4ge0VtYmVyLkJpbmRp
        bmd9IGB0aGlzYAogICovCiAgY29weTogZnVuY3Rpb24gKCkgewogICAgdmFy
        IGNvcHkgPSBuZXcgQmluZGluZyh0aGlzLl90bywgdGhpcy5fZnJvbSk7CiAg
        ICBpZiAodGhpcy5fb25lV2F5KSB7IGNvcHkuX29uZVdheSA9IHRydWU7IH0K
        ICAgIHJldHVybiBjb3B5OwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAv
        LyBDT05GSUcKICAvLwoKICAvKioKICAgIFRoaXMgd2lsbCBzZXQgYGZyb21g
        IHByb3BlcnR5IHBhdGggdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS4gSXQgd2ls
        bCBub3QKICAgIGF0dGVtcHQgdG8gcmVzb2x2ZSB0aGlzIHByb3BlcnR5IHBh
        dGggdG8gYW4gYWN0dWFsIG9iamVjdCB1bnRpbCB5b3UKICAgIGNvbm5lY3Qg
        dGhlIGJpbmRpbmcuCgogICAgVGhlIGJpbmRpbmcgd2lsbCBzZWFyY2ggZm9y
        IHRoZSBwcm9wZXJ0eSBwYXRoIHN0YXJ0aW5nIGF0IHRoZSByb290IG9iamVj
        dAogICAgeW91IHBhc3Mgd2hlbiB5b3UgYGNvbm5lY3QoKWAgdGhlIGJpbmRp
        bmcuIEl0IGZvbGxvd3MgdGhlIHNhbWUgcnVsZXMgYXMKICAgIGBnZXQoKWAg
        LSBzZWUgdGhhdCBtZXRob2QgZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICAg
        QG1ldGhvZCBmcm9tCiAgICBAcGFyYW0ge1N0cmluZ30gcGF0aCB0aGUgcHJv
        cGVydHkgcGF0aCB0byBjb25uZWN0IHRvCiAgICBAcmV0dXJuIHtFbWJlci5C
        aW5kaW5nfSBgdGhpc2AKICAqLwogIGZyb206IGZ1bmN0aW9uKHBhdGgpIHsK
        ICAgIHRoaXMuX2Zyb20gPSBwYXRoOwogICAgcmV0dXJuIHRoaXM7CiAgfSwK
        CiAgLyoqCiAgICBUaGlzIHdpbGwgc2V0IHRoZSBgdG9gIHByb3BlcnR5IHBh
        dGggdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS4gSXQgd2lsbCBub3QKICAgIGF0
        dGVtcHQgdG8gcmVzb2x2ZSB0aGlzIHByb3BlcnR5IHBhdGggdG8gYW4gYWN0
        dWFsIG9iamVjdCB1bnRpbCB5b3UKICAgIGNvbm5lY3QgdGhlIGJpbmRpbmcu
        CgogICAgVGhlIGJpbmRpbmcgd2lsbCBzZWFyY2ggZm9yIHRoZSBwcm9wZXJ0
        eSBwYXRoIHN0YXJ0aW5nIGF0IHRoZSByb290IG9iamVjdAogICAgeW91IHBh
        c3Mgd2hlbiB5b3UgYGNvbm5lY3QoKWAgdGhlIGJpbmRpbmcuIEl0IGZvbGxv
        d3MgdGhlIHNhbWUgcnVsZXMgYXMKICAgIGBnZXQoKWAgLSBzZWUgdGhhdCBt
        ZXRob2QgZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICAgQG1ldGhvZCB0bwog
        ICAgQHBhcmFtIHtTdHJpbmd8VHVwbGV9IHBhdGggQSBwcm9wZXJ0eSBwYXRo
        IG9yIHR1cGxlCiAgICBAcmV0dXJuIHtFbWJlci5CaW5kaW5nfSBgdGhpc2AK
        ICAqLwogIHRvOiBmdW5jdGlvbihwYXRoKSB7CiAgICB0aGlzLl90byA9IHBh
        dGg7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIENvbmZpZ3Vy
        ZXMgdGhlIGJpbmRpbmcgYXMgb25lIHdheS4gQSBvbmUtd2F5IGJpbmRpbmcg
        d2lsbCByZWxheSBjaGFuZ2VzCiAgICBvbiB0aGUgYGZyb21gIHNpZGUgdG8g
        dGhlIGB0b2Agc2lkZSwgYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC4g
        VGhpcwogICAgbWVhbnMgdGhhdCBpZiB5b3UgY2hhbmdlIHRoZSBgdG9gIHNp
        ZGUgZGlyZWN0bHksIHRoZSBgZnJvbWAgc2lkZSBtYXkgaGF2ZQogICAgYSBk
        aWZmZXJlbnQgdmFsdWUuCgogICAgQG1ldGhvZCBvbmVXYXkKICAgIEByZXR1
        cm4ge0VtYmVyLkJpbmRpbmd9IGB0aGlzYAogICovCiAgb25lV2F5OiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMuX29uZVdheSA9IHRydWU7CiAgICByZXR1cm4g
        dGhpczsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdG9TdHJpbmcKICAgIEBy
        ZXR1cm4ge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGJpbmRp
        bmcKICAqLwogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBvbmVX
        YXkgPSB0aGlzLl9vbmVXYXkgPyAnW29uZVdheV0nIDogJyc7CiAgICByZXR1
        cm4gIkVtYmVyLkJpbmRpbmc8IiArIGd1aWRGb3IodGhpcykgKyAiPigiICsg
        dGhpcy5fZnJvbSArICIgLT4gIiArIHRoaXMuX3RvICsgIikiICsgb25lV2F5
        OwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBDT05ORUNUIEFORCBT
        WU5DCiAgLy8KCiAgLyoqCiAgICBBdHRlbXB0cyB0byBjb25uZWN0IHRoaXMg
        YmluZGluZyBpbnN0YW5jZSBzbyB0aGF0IGl0IGNhbiByZWNlaXZlIGFuZCBy
        ZWxheQogICAgY2hhbmdlcy4gVGhpcyBtZXRob2Qgd2lsbCByYWlzZSBhbiBl
        eGNlcHRpb24gaWYgeW91IGhhdmUgbm90IHNldCB0aGUKICAgIGZyb20vdG8g
        cHJvcGVydGllcyB5ZXQuCgogICAgQG1ldGhvZCBjb25uZWN0CiAgICBAcGFy
        YW0ge09iamVjdH0gb2JqIFRoZSByb290IG9iamVjdCBmb3IgdGhpcyBiaW5k
        aW5nLgogICAgQHJldHVybiB7RW1iZXIuQmluZGluZ30gYHRoaXNgCiAgKi8K
        ICBjb25uZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIEVtYmVyLmFzc2VydCgn
        TXVzdCBwYXNzIGEgdmFsaWQgb2JqZWN0IHRvIEVtYmVyLkJpbmRpbmcuY29u
        bmVjdCgpJywgISFvYmopOwoKICAgIHZhciBmcm9tUGF0aCA9IHRoaXMuX2Zy
        b20sIHRvUGF0aCA9IHRoaXMuX3RvOwogICAgRW1iZXIudHJ5U2V0KG9iaiwg
        dG9QYXRoLCBnZXRXaXRoR2xvYmFscyhvYmosIGZyb21QYXRoKSk7CgogICAg
        Ly8gYWRkIGFuIG9ic2VydmVyIG9uIHRoZSBvYmplY3QgdG8gYmUgbm90aWZp
        ZWQgd2hlbiB0aGUgYmluZGluZyBzaG91bGQgYmUgdXBkYXRlZAogICAgRW1i
        ZXIuYWRkT2JzZXJ2ZXIob2JqLCBmcm9tUGF0aCwgdGhpcywgdGhpcy5mcm9t
        RGlkQ2hhbmdlKTsKCiAgICAvLyBpZiB0aGUgYmluZGluZyBpcyBhIHR3by13
        YXkgYmluZGluZywgYWxzbyBzZXQgdXAgYW4gb2JzZXJ2ZXIgb24gdGhlIHRh
        cmdldAogICAgaWYgKCF0aGlzLl9vbmVXYXkpIHsgRW1iZXIuYWRkT2JzZXJ2
        ZXIob2JqLCB0b1BhdGgsIHRoaXMsIHRoaXMudG9EaWRDaGFuZ2UpOyB9Cgog
        ICAgdGhpcy5fcmVhZHlUb1N5bmMgPSB0cnVlOwoKICAgIHJldHVybiB0aGlz
        OwogIH0sCgogIC8qKgogICAgRGlzY29ubmVjdHMgdGhlIGJpbmRpbmcgaW5z
        dGFuY2UuIENoYW5nZXMgd2lsbCBubyBsb25nZXIgYmUgcmVsYXllZC4gWW91
        CiAgICB3aWxsIG5vdCB1c3VhbGx5IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhv
        ZC4KCiAgICBAbWV0aG9kIGRpc2Nvbm5lY3QKICAgIEBwYXJhbSB7T2JqZWN0
        fSBvYmogVGhlIHJvb3Qgb2JqZWN0IHlvdSBwYXNzZWQgd2hlbiBjb25uZWN0
        aW5nIHRoZSBiaW5kaW5nLgogICAgQHJldHVybiB7RW1iZXIuQmluZGluZ30g
        YHRoaXNgCiAgKi8KICBkaXNjb25uZWN0OiBmdW5jdGlvbihvYmopIHsKICAg
        IEVtYmVyLmFzc2VydCgnTXVzdCBwYXNzIGEgdmFsaWQgb2JqZWN0IHRvIEVt
        YmVyLkJpbmRpbmcuZGlzY29ubmVjdCgpJywgISFvYmopOwoKICAgIHZhciB0
        d29XYXkgPSAhdGhpcy5fb25lV2F5OwoKICAgIC8vIHJlbW92ZSBhbiBvYnNl
        cnZlciBvbiB0aGUgb2JqZWN0IHNvIHdlJ3JlIG5vIGxvbmdlciBub3RpZmll
        ZCBvZgogICAgLy8gY2hhbmdlcyB0aGF0IHNob3VsZCB1cGRhdGUgYmluZGlu
        Z3MuCiAgICBFbWJlci5yZW1vdmVPYnNlcnZlcihvYmosIHRoaXMuX2Zyb20s
        IHRoaXMsIHRoaXMuZnJvbURpZENoYW5nZSk7CgogICAgLy8gaWYgdGhlIGJp
        bmRpbmcgaXMgdHdvLXdheSwgcmVtb3ZlIHRoZSBvYnNlcnZlciBmcm9tIHRo
        ZSB0YXJnZXQgYXMgd2VsbAogICAgaWYgKHR3b1dheSkgeyBFbWJlci5yZW1v
        dmVPYnNlcnZlcihvYmosIHRoaXMuX3RvLCB0aGlzLCB0aGlzLnRvRGlkQ2hh
        bmdlKTsgfQoKICAgIHRoaXMuX3JlYWR5VG9TeW5jID0gZmFsc2U7IC8vIGRp
        c2FibGUgc2NoZWR1bGVkIHN5bmNzLi4uCiAgICByZXR1cm4gdGhpczsKICB9
        LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gUFJJVkFURQogIC8vCgogIC8q
        IGNhbGxlZCB3aGVuIHRoZSBmcm9tIHNpZGUgY2hhbmdlcyAqLwogIGZyb21E
        aWRDaGFuZ2U6IGZ1bmN0aW9uKHRhcmdldCkgewogICAgdGhpcy5fc2NoZWR1
        bGVTeW5jKHRhcmdldCwgJ2Z3ZCcpOwogIH0sCgogIC8qIGNhbGxlZCB3aGVu
        IHRoZSB0byBzaWRlIGNoYW5nZXMgKi8KICB0b0RpZENoYW5nZTogZnVuY3Rp
        b24odGFyZ2V0KSB7CiAgICB0aGlzLl9zY2hlZHVsZVN5bmModGFyZ2V0LCAn
        YmFjaycpOwogIH0sCgogIF9zY2hlZHVsZVN5bmM6IGZ1bmN0aW9uKG9iaiwg
        ZGlyKSB7CiAgICB2YXIgZGlyZWN0aW9uTWFwID0gdGhpcy5fZGlyZWN0aW9u
        TWFwOwogICAgdmFyIGV4aXN0aW5nRGlyID0gZGlyZWN0aW9uTWFwLmdldChv
        YmopOwoKICAgIC8vIGlmIHdlIGhhdmVuJ3Qgc2NoZWR1bGVkIHRoZSBiaW5k
        aW5nIHlldCwgc2NoZWR1bGUgaXQKICAgIGlmICghZXhpc3RpbmdEaXIpIHsK
        ICAgICAgRW1iZXIucnVuLnNjaGVkdWxlKCdzeW5jJywgdGhpcywgdGhpcy5f
        c3luYywgb2JqKTsKICAgICAgZGlyZWN0aW9uTWFwLnNldChvYmosIGRpcik7
        CiAgICB9CgogICAgLy8gSWYgYm90aCBhICdiYWNrJyBhbmQgJ2Z3ZCcgc3lu
        YyBoYXZlIGJlZW4gc2NoZWR1bGVkIG9uIHRoZSBzYW1lIG9iamVjdCwKICAg
        IC8vIGRlZmF1bHQgdG8gYSAnZndkJyBzeW5jIHNvIHRoYXQgaXQgcmVtYWlu
        cyBkZXRlcm1pbmlzdGljLgogICAgaWYgKGV4aXN0aW5nRGlyID09PSAnYmFj
        aycgJiYgZGlyID09PSAnZndkJykgewogICAgICBkaXJlY3Rpb25NYXAuc2V0
        KG9iaiwgJ2Z3ZCcpOwogICAgfQogIH0sCgogIF9zeW5jOiBmdW5jdGlvbihv
        YmopIHsKICAgIHZhciBsb2cgPSBFbWJlci5MT0dfQklORElOR1M7CgogICAg
        Ly8gZG9uJ3Qgc3luY2hyb25pemUgZGVzdHJveWVkIG9iamVjdHMgb3IgZGlz
        Y29ubmVjdGVkIGJpbmRpbmdzCiAgICBpZiAob2JqLmlzRGVzdHJveWVkIHx8
        ICF0aGlzLl9yZWFkeVRvU3luYykgeyByZXR1cm47IH0KCiAgICAvLyBnZXQg
        dGhlIGRpcmVjdGlvbiBvZiB0aGUgYmluZGluZyBmb3IgdGhlIG9iamVjdCB3
        ZSBhcmUKICAgIC8vIHN5bmNocm9uaXppbmcgZnJvbQogICAgdmFyIGRpcmVj
        dGlvbk1hcCA9IHRoaXMuX2RpcmVjdGlvbk1hcDsKICAgIHZhciBkaXJlY3Rp
        b24gPSBkaXJlY3Rpb25NYXAuZ2V0KG9iaik7CgogICAgdmFyIGZyb21QYXRo
        ID0gdGhpcy5fZnJvbSwgdG9QYXRoID0gdGhpcy5fdG87CgogICAgZGlyZWN0
        aW9uTWFwLnJlbW92ZShvYmopOwoKICAgIC8vIGlmIHdlJ3JlIHN5bmNocm9u
        aXppbmcgZnJvbSB0aGUgcmVtb3RlIG9iamVjdC4uLgogICAgaWYgKGRpcmVj
        dGlvbiA9PT0gJ2Z3ZCcpIHsKICAgICAgdmFyIGZyb21WYWx1ZSA9IGdldFdp
        dGhHbG9iYWxzKG9iaiwgdGhpcy5fZnJvbSk7CiAgICAgIGlmIChsb2cpIHsK
        ICAgICAgICBFbWJlci5Mb2dnZXIubG9nKCcgJywgdGhpcy50b1N0cmluZygp
        LCAnLT4nLCBmcm9tVmFsdWUsIG9iaik7CiAgICAgIH0KICAgICAgaWYgKHRo
        aXMuX29uZVdheSkgewogICAgICAgIEVtYmVyLnRyeVNldChvYmosIHRvUGF0
        aCwgZnJvbVZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBFbWJlci5f
        c3VzcGVuZE9ic2VydmVyKG9iaiwgdG9QYXRoLCB0aGlzLCB0aGlzLnRvRGlk
        Q2hhbmdlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBFbWJlci50cnlTZXQo
        b2JqLCB0b1BhdGgsIGZyb21WYWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0K
        ICAgIC8vIGlmIHdlJ3JlIHN5bmNocm9uaXppbmcgKnRvKiB0aGUgcmVtb3Rl
        IG9iamVjdAogICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdiYWNrJykg
        ewogICAgICB2YXIgdG9WYWx1ZSA9IGdldChvYmosIHRoaXMuX3RvKTsKICAg
        ICAgaWYgKGxvZykgewogICAgICAgIEVtYmVyLkxvZ2dlci5sb2coJyAnLCB0
        aGlzLnRvU3RyaW5nKCksICc8LScsIHRvVmFsdWUsIG9iaik7CiAgICAgIH0K
        ICAgICAgRW1iZXIuX3N1c3BlbmRPYnNlcnZlcihvYmosIGZyb21QYXRoLCB0
        aGlzLCB0aGlzLmZyb21EaWRDaGFuZ2UsIGZ1bmN0aW9uICgpIHsKICAgICAg
        ICBFbWJlci50cnlTZXQoRW1iZXIuaXNHbG9iYWxQYXRoKGZyb21QYXRoKSA/
        IEVtYmVyLmxvb2t1cCA6IG9iaiwgZnJvbVBhdGgsIHRvVmFsdWUpOwogICAg
        ICB9KTsKICAgIH0KICB9Cgp9OwoKZnVuY3Rpb24gbWl4aW5Qcm9wZXJ0aWVz
        KHRvLCBmcm9tKSB7CiAgZm9yICh2YXIga2V5IGluIGZyb20pIHsKICAgIGlm
        IChmcm9tLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgdG9ba2V5XSA9
        IGZyb21ba2V5XTsKICAgIH0KICB9Cn0KCm1peGluUHJvcGVydGllcyhCaW5k
        aW5nLCB7CgogIC8qCiAgICBTZWUgYEVtYmVyLkJpbmRpbmcuZnJvbWAuCgog
        ICAgQG1ldGhvZCBmcm9tCiAgICBAc3RhdGljCiAgKi8KICBmcm9tOiBmdW5j
        dGlvbigpIHsKICAgIHZhciBDID0gdGhpcywgYmluZGluZyA9IG5ldyBDKCk7
        CiAgICByZXR1cm4gYmluZGluZy5mcm9tLmFwcGx5KGJpbmRpbmcsIGFyZ3Vt
        ZW50cyk7CiAgfSwKCiAgLyoKICAgIFNlZSBgRW1iZXIuQmluZGluZy50b2Au
        CgogICAgQG1ldGhvZCB0bwogICAgQHN0YXRpYwogICovCiAgdG86IGZ1bmN0
        aW9uKCkgewogICAgdmFyIEMgPSB0aGlzLCBiaW5kaW5nID0gbmV3IEMoKTsK
        ICAgIHJldHVybiBiaW5kaW5nLnRvLmFwcGx5KGJpbmRpbmcsIGFyZ3VtZW50
        cyk7CiAgfSwKCiAgLyoqCiAgICBDcmVhdGVzIGEgbmV3IEJpbmRpbmcgaW5z
        dGFuY2UgYW5kIG1ha2VzIGl0IGFwcGx5IGluIGEgc2luZ2xlIGRpcmVjdGlv
        bi4KICAgIEEgb25lLXdheSBiaW5kaW5nIHdpbGwgcmVsYXkgY2hhbmdlcyBv
        biB0aGUgYGZyb21gIHNpZGUgb2JqZWN0IChzdXBwbGllZAogICAgYXMgdGhl
        IGBmcm9tYCBhcmd1bWVudCkgdGhlIGB0b2Agc2lkZSwgYnV0IG5vdCB0aGUg
        b3RoZXIgd2F5IGFyb3VuZC4KICAgIFRoaXMgbWVhbnMgdGhhdCBpZiB5b3Ug
        Y2hhbmdlIHRoZSAidG8iIHNpZGUgZGlyZWN0bHksIHRoZSAiZnJvbSIgc2lk
        ZSBtYXkgaGF2ZQogICAgYSBkaWZmZXJlbnQgdmFsdWUuCgogICAgU2VlIGBC
        aW5kaW5nLm9uZVdheWAuCgogICAgQG1ldGhvZCBvbmVXYXkKICAgIEBwYXJh
        bSB7U3RyaW5nfSBmcm9tIGZyb20gcGF0aC4KICAgIEBwYXJhbSB7Qm9vbGVh
        bn0gW2ZsYWddIChPcHRpb25hbCkgcGFzc2luZyBub3RoaW5nIGhlcmUgd2ls
        bCBtYWtlIHRoZQogICAgICBiaW5kaW5nIGBvbmVXYXlgLiBZb3UgY2FuIGlu
        c3RlYWQgcGFzcyBgZmFsc2VgIHRvIGRpc2FibGUgYG9uZVdheWAsIG1ha2lu
        ZyB0aGUKICAgICAgYmluZGluZyB0d28gd2F5IGFnYWluLgogICAgQHJldHVy
        biB7RW1iZXIuQmluZGluZ30gYHRoaXNgCiAgKi8KICBvbmVXYXk6IGZ1bmN0
        aW9uKGZyb20sIGZsYWcpIHsKICAgIHZhciBDID0gdGhpcywgYmluZGluZyA9
        IG5ldyBDKG51bGwsIGZyb20pOwogICAgcmV0dXJuIGJpbmRpbmcub25lV2F5
        KGZsYWcpOwogIH0KCn0pOwoKLyoqCiAgQW4gYEVtYmVyLkJpbmRpbmdgIGNv
        bm5lY3RzIHRoZSBwcm9wZXJ0aWVzIG9mIHR3byBvYmplY3RzIHNvIHRoYXQg
        d2hlbmV2ZXIKICB0aGUgdmFsdWUgb2Ygb25lIHByb3BlcnR5IGNoYW5nZXMs
        IHRoZSBvdGhlciBwcm9wZXJ0eSB3aWxsIGJlIGNoYW5nZWQgYWxzby4KCiAg
        IyMgQXV0b21hdGljIENyZWF0aW9uIG9mIEJpbmRpbmdzIHdpdGggYC9eKkJp
        bmRpbmcvYC1uYW1lZCBQcm9wZXJ0aWVzCgogIFlvdSBkbyBub3QgdXN1YWxs
        eSBjcmVhdGUgQmluZGluZyBvYmplY3RzIGRpcmVjdGx5IGJ1dCBpbnN0ZWFk
        IGRlc2NyaWJlCiAgYmluZGluZ3MgaW4geW91ciBjbGFzcyBvciBvYmplY3Qg
        ZGVmaW5pdGlvbiB1c2luZyBhdXRvbWF0aWMgYmluZGluZwogIGRldGVjdGlv
        bi4KCiAgUHJvcGVydGllcyBlbmRpbmcgaW4gYSBgQmluZGluZ2Agc3VmZml4
        IHdpbGwgYmUgY29udmVydGVkIHRvIGBFbWJlci5CaW5kaW5nYAogIGluc3Rh
        bmNlcy4gVGhlIHZhbHVlIG9mIHRoaXMgcHJvcGVydHkgc2hvdWxkIGJlIGEg
        c3RyaW5nIHJlcHJlc2VudGluZyBhIHBhdGgKICB0byBhbm90aGVyIG9iamVj
        dCBvciBhIGN1c3RvbSBiaW5kaW5nIGluc3RhbmNlZCBjcmVhdGVkIHVzaW5n
        IEJpbmRpbmcgaGVscGVycwogIChzZWUgIk9uZSBXYXkgQmluZGluZ3MiKToK
        CiAgYGBgCiAgdmFsdWVCaW5kaW5nOiAiTXlBcHAuc29tZUNvbnRyb2xsZXIu
        dGl0bGUiCiAgYGBgCgogIFRoaXMgd2lsbCBjcmVhdGUgYSBiaW5kaW5nIGZy
        b20gYE15QXBwLnNvbWVDb250cm9sbGVyLnRpdGxlYCB0byB0aGUgYHZhbHVl
        YAogIHByb3BlcnR5IG9mIHlvdXIgb2JqZWN0IGluc3RhbmNlIGF1dG9tYXRp
        Y2FsbHkuIE5vdyB0aGUgdHdvIHZhbHVlcyB3aWxsIGJlCiAga2VwdCBpbiBz
        eW5jLgoKICAjIyBPbmUgV2F5IEJpbmRpbmdzCgogIE9uZSBlc3BlY2lhbGx5
        IHVzZWZ1bCBiaW5kaW5nIGN1c3RvbWl6YXRpb24geW91IGNhbiB1c2UgaXMg
        dGhlIGBvbmVXYXkoKWAKICBoZWxwZXIuIFRoaXMgaGVscGVyIHRlbGxzIEVt
        YmVyIHRoYXQgeW91IGFyZSBvbmx5IGludGVyZXN0ZWQgaW4KICByZWNlaXZp
        bmcgY2hhbmdlcyBvbiB0aGUgb2JqZWN0IHlvdSBhcmUgYmluZGluZyBmcm9t
        LiBGb3IgZXhhbXBsZSwgaWYgeW91CiAgYXJlIGJpbmRpbmcgdG8gYSBwcmVm
        ZXJlbmNlIGFuZCB5b3Ugd2FudCB0byBiZSBub3RpZmllZCBpZiB0aGUgcHJl
        ZmVyZW5jZQogIGhhcyBjaGFuZ2VkLCBidXQgeW91ciBvYmplY3Qgd2lsbCBu
        b3QgYmUgY2hhbmdpbmcgdGhlIHByZWZlcmVuY2UgaXRzZWxmLCB5b3UKICBj
        b3VsZCBkbzoKCiAgYGBgCiAgYmlnVGl0bGVzQmluZGluZzogRW1iZXIuQmlu
        ZGluZy5vbmVXYXkoIk15QXBwLnByZWZlcmVuY2VzQ29udHJvbGxlci5iaWdU
        aXRsZXMiKQogIGBgYAoKICBUaGlzIHdheSBpZiB0aGUgdmFsdWUgb2YgYE15
        QXBwLnByZWZlcmVuY2VzQ29udHJvbGxlci5iaWdUaXRsZXNgIGNoYW5nZXMg
        dGhlCiAgYGJpZ1RpdGxlc2AgcHJvcGVydHkgb2YgeW91ciBvYmplY3Qgd2ls
        bCBjaGFuZ2UgYWxzby4gSG93ZXZlciwgaWYgeW91CiAgY2hhbmdlIHRoZSB2
        YWx1ZSBvZiB5b3VyIGBiaWdUaXRsZXNgIHByb3BlcnR5LCBpdCB3aWxsIG5v
        dCB1cGRhdGUgdGhlCiAgYHByZWZlcmVuY2VzQ29udHJvbGxlcmAuCgogIE9u
        ZSB3YXkgYmluZGluZ3MgYXJlIGFsbW9zdCB0d2ljZSBhcyBmYXN0IHRvIHNl
        dHVwIGFuZCB0d2ljZSBhcyBmYXN0IHRvCiAgZXhlY3V0ZSBiZWNhdXNlIHRo
        ZSBiaW5kaW5nIG9ubHkgaGFzIHRvIHdvcnJ5IGFib3V0IGNoYW5nZXMgdG8g
        b25lIHNpZGUuCgogIFlvdSBzaG91bGQgY29uc2lkZXIgdXNpbmcgb25lIHdh
        eSBiaW5kaW5ncyBhbnl0aW1lIHlvdSBoYXZlIGFuIG9iamVjdCB0aGF0CiAg
        bWF5IGJlIGNyZWF0ZWQgZnJlcXVlbnRseSBhbmQgeW91IGRvIG5vdCBpbnRl
        bmQgdG8gY2hhbmdlIGEgcHJvcGVydHk7IG9ubHkKICB0byBtb25pdG9yIGl0
        IGZvciBjaGFuZ2VzIChzdWNoIGFzIGluIHRoZSBleGFtcGxlIGFib3ZlKS4K
        CiAgIyMgQWRkaW5nIEJpbmRpbmdzIE1hbnVhbGx5CgogIEFsbCBvZiB0aGUg
        ZXhhbXBsZXMgYWJvdmUgc2hvdyB5b3UgaG93IHRvIGNvbmZpZ3VyZSBhIGN1
        c3RvbSBiaW5kaW5nLCBidXQgdGhlCiAgcmVzdWx0IG9mIHRoZXNlIGN1c3Rv
        bWl6YXRpb25zIHdpbGwgYmUgYSBiaW5kaW5nIHRlbXBsYXRlLCBub3QgYSBm
        dWxseSBhY3RpdmUKICBCaW5kaW5nIGluc3RhbmNlLiBUaGUgYmluZGluZyB3
        aWxsIGFjdHVhbGx5IGJlY29tZSBhY3RpdmUgb25seSB3aGVuIHlvdQogIGlu
        c3RhbnRpYXRlIHRoZSBvYmplY3QgdGhlIGJpbmRpbmcgYmVsb25ncyB0by4g
        SXQgaXMgdXNlZnVsIGhvd2V2ZXIsIHRvCiAgdW5kZXJzdGFuZCB3aGF0IGFj
        dHVhbGx5IGhhcHBlbnMgd2hlbiB0aGUgYmluZGluZyBpcyBhY3RpdmF0ZWQu
        CgogIEZvciBhIGJpbmRpbmcgdG8gZnVuY3Rpb24gaXQgbXVzdCBoYXZlIGF0
        IGxlYXN0IGEgYGZyb21gIHByb3BlcnR5IGFuZCBhIGB0b2AKICBwcm9wZXJ0
        eS4gVGhlIGBmcm9tYCBwcm9wZXJ0eSBwYXRoIHBvaW50cyB0byB0aGUgb2Jq
        ZWN0L2tleSB0aGF0IHlvdSB3YW50IHRvCiAgYmluZCBmcm9tIHdoaWxlIHRo
        ZSBgdG9gIHBhdGggcG9pbnRzIHRvIHRoZSBvYmplY3Qva2V5IHlvdSB3YW50
        IHRvIGJpbmQgdG8uCgogIFdoZW4geW91IGRlZmluZSBhIGN1c3RvbSBiaW5k
        aW5nLCB5b3UgYXJlIHVzdWFsbHkgZGVzY3JpYmluZyB0aGUgcHJvcGVydHkK
        ICB5b3Ugd2FudCB0byBiaW5kIGZyb20gKHN1Y2ggYXMgYE15QXBwLnNvbWVD
        b250cm9sbGVyLnZhbHVlYCBpbiB0aGUgZXhhbXBsZXMKICBhYm92ZSkuIFdo
        ZW4geW91ciBvYmplY3QgaXMgY3JlYXRlZCwgaXQgd2lsbCBhdXRvbWF0aWNh
        bGx5IGFzc2lnbiB0aGUgdmFsdWUKICB5b3Ugd2FudCB0byBiaW5kIGB0b2Ag
        YmFzZWQgb24gdGhlIG5hbWUgb2YgeW91ciBiaW5kaW5nIGtleS4gSW4gdGhl
        CiAgZXhhbXBsZXMgYWJvdmUsIGR1cmluZyBpbml0LCBFbWJlciBvYmplY3Rz
        IHdpbGwgZWZmZWN0aXZlbHkgY2FsbAogIHNvbWV0aGluZyBsaWtlIHRoaXMg
        b24geW91ciBiaW5kaW5nOgoKICBgYGBqYXZhc2NyaXB0CiAgYmluZGluZyA9
        IEVtYmVyLkJpbmRpbmcuZnJvbSh0aGlzLnZhbHVlQmluZGluZykudG8oInZh
        bHVlIik7CiAgYGBgCgogIFRoaXMgY3JlYXRlcyBhIG5ldyBiaW5kaW5nIGlu
        c3RhbmNlIGJhc2VkIG9uIHRoZSB0ZW1wbGF0ZSB5b3UgcHJvdmlkZSwgYW5k
        CiAgc2V0cyB0aGUgdG8gcGF0aCB0byB0aGUgYHZhbHVlYCBwcm9wZXJ0eSBv
        ZiB0aGUgbmV3IG9iamVjdC4gTm93IHRoYXQgdGhlCiAgYmluZGluZyBpcyBm
        dWxseSBjb25maWd1cmVkIHdpdGggYSBgZnJvbWAgYW5kIGEgYHRvYCwgaXQg
        c2ltcGx5IG5lZWRzIHRvIGJlCiAgY29ubmVjdGVkIHRvIGJlY29tZSBhY3Rp
        dmUuIFRoaXMgaXMgZG9uZSB0aHJvdWdoIHRoZSBgY29ubmVjdCgpYCBtZXRo
        b2Q6CgogIGBgYGphdmFzY3JpcHQKICBiaW5kaW5nLmNvbm5lY3QodGhpcyk7
        CiAgYGBgCgogIE5vdGUgdGhhdCB3aGVuIHlvdSBjb25uZWN0IGEgYmluZGlu
        ZyB5b3UgcGFzcyB0aGUgb2JqZWN0IHlvdSB3YW50IGl0IHRvIGJlCiAgY29u
        bmVjdGVkIHRvLiBUaGlzIG9iamVjdCB3aWxsIGJlIHVzZWQgYXMgdGhlIHJv
        b3QgZm9yIGJvdGggdGhlIGZyb20gYW5kCiAgdG8gc2lkZSBvZiB0aGUgYmlu
        ZGluZyB3aGVuIGluc3BlY3RpbmcgcmVsYXRpdmUgcGF0aHMuIFRoaXMgYWxs
        b3dzIHRoZQogIGJpbmRpbmcgdG8gYmUgYXV0b21hdGljYWxseSBpbmhlcml0
        ZWQgYnkgc3ViY2xhc3NlZCBvYmplY3RzIGFzIHdlbGwuCgogIE5vdyB0aGF0
        IHRoZSBiaW5kaW5nIGlzIGNvbm5lY3RlZCwgaXQgd2lsbCBvYnNlcnZlIGJv
        dGggdGhlIGZyb20gYW5kIHRvIHNpZGUKICBhbmQgcmVsYXkgY2hhbmdlcy4K
        CiAgSWYgeW91IGV2ZXIgbmVlZGVkIHRvIGRvIHNvICh5b3UgYWxtb3N0IG5l
        dmVyIHdpbGwsIGJ1dCBpdCBpcyB1c2VmdWwgdG8KICB1bmRlcnN0YW5kIHRo
        aXMgYW55d2F5KSwgeW91IGNvdWxkIG1hbnVhbGx5IGNyZWF0ZSBhbiBhY3Rp
        dmUgYmluZGluZyBieQogIHVzaW5nIHRoZSBgRW1iZXIuYmluZCgpYCBoZWxw
        ZXIgbWV0aG9kLiAoVGhpcyBpcyB0aGUgc2FtZSBtZXRob2QgdXNlZCBieQog
        IHRvIHNldHVwIHlvdXIgYmluZGluZ3Mgb24gb2JqZWN0cyk6CgogIGBgYGph
        dmFzY3JpcHQKICBFbWJlci5iaW5kKE15QXBwLmFub3RoZXJPYmplY3QsICJ2
        YWx1ZSIsICJNeUFwcC5zb21lQ29udHJvbGxlci52YWx1ZSIpOwogIGBgYAoK
        ICBCb3RoIG9mIHRoZXNlIGNvZGUgZnJhZ21lbnRzIGhhdmUgdGhlIHNhbWUg
        ZWZmZWN0IGFzIGRvaW5nIHRoZSBtb3N0IGZyaWVuZGx5CiAgZm9ybSBvZiBi
        aW5kaW5nIGNyZWF0aW9uIGxpa2Ugc286CgogIGBgYGphdmFzY3JpcHQKICBN
        eUFwcC5hbm90aGVyT2JqZWN0ID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAg
        ICB2YWx1ZUJpbmRpbmc6ICJNeUFwcC5zb21lQ29udHJvbGxlci52YWx1ZSIs
        CgogICAgLy8gT1RIRVIgQ09ERSBGT1IgVEhJUyBPQkpFQ1QuLi4KICB9KTsK
        ICBgYGAKCiAgRW1iZXIncyBidWlsdCBpbiBiaW5kaW5nIGNyZWF0aW9uIG1l
        dGhvZCBtYWtlcyBpdCBlYXN5IHRvIGF1dG9tYXRpY2FsbHkKICBjcmVhdGUg
        YmluZGluZ3MgZm9yIHlvdS4gWW91IHNob3VsZCBhbHdheXMgdXNlIHRoZSBo
        aWdoZXN0LWxldmVsIEFQSXMKICBhdmFpbGFibGUsIGV2ZW4gaWYgeW91IHVu
        ZGVyc3RhbmQgaG93IGl0IHdvcmtzIHVuZGVybmVhdGguCgogIEBjbGFzcyBC
        aW5kaW5nCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBzaW5jZSBFbWJlciAwLjkK
        Ki8KRW1iZXIuQmluZGluZyA9IEJpbmRpbmc7CgoKLyoqCiAgR2xvYmFsIGhl
        bHBlciBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IGJpbmRpbmcuIEp1c3QgcGFz
        cyB0aGUgcm9vdCBvYmplY3QKICBhbG9uZyB3aXRoIGEgYHRvYCBhbmQgYGZy
        b21gIHBhdGggdG8gY3JlYXRlIGFuZCBjb25uZWN0IHRoZSBiaW5kaW5nLgoK
        ICBAbWV0aG9kIGJpbmQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9
        IG9iaiBUaGUgcm9vdCBvYmplY3Qgb2YgdGhlIHRyYW5zZm9ybS4KICBAcGFy
        YW0ge1N0cmluZ30gdG8gVGhlIHBhdGggdG8gdGhlICd0bycgc2lkZSBvZiB0
        aGUgYmluZGluZy4KICAgIE11c3QgYmUgcmVsYXRpdmUgdG8gb2JqLgogIEBw
        YXJhbSB7U3RyaW5nfSBmcm9tIFRoZSBwYXRoIHRvIHRoZSAnZnJvbScgc2lk
        ZSBvZiB0aGUgYmluZGluZy4KICAgIE11c3QgYmUgcmVsYXRpdmUgdG8gb2Jq
        IG9yIGEgZ2xvYmFsIHBhdGguCiAgQHJldHVybiB7RW1iZXIuQmluZGluZ30g
        YmluZGluZyBpbnN0YW5jZQoqLwpFbWJlci5iaW5kID0gZnVuY3Rpb24ob2Jq
        LCB0bywgZnJvbSkgewogIHJldHVybiBuZXcgRW1iZXIuQmluZGluZyh0bywg
        ZnJvbSkuY29ubmVjdChvYmopOwp9OwoKLyoqCiAgQG1ldGhvZCBvbmVXYXkK
        ICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgcm9vdCBv
        YmplY3Qgb2YgdGhlIHRyYW5zZm9ybS4KICBAcGFyYW0ge1N0cmluZ30gdG8g
        VGhlIHBhdGggdG8gdGhlICd0bycgc2lkZSBvZiB0aGUgYmluZGluZy4KICAg
        IE11c3QgYmUgcmVsYXRpdmUgdG8gb2JqLgogIEBwYXJhbSB7U3RyaW5nfSBm
        cm9tIFRoZSBwYXRoIHRvIHRoZSAnZnJvbScgc2lkZSBvZiB0aGUgYmluZGlu
        Zy4KICAgIE11c3QgYmUgcmVsYXRpdmUgdG8gb2JqIG9yIGEgZ2xvYmFsIHBh
        dGguCiAgQHJldHVybiB7RW1iZXIuQmluZGluZ30gYmluZGluZyBpbnN0YW5j
        ZQoqLwpFbWJlci5vbmVXYXkgPSBmdW5jdGlvbihvYmosIHRvLCBmcm9tKSB7
        CiAgcmV0dXJuIG5ldyBFbWJlci5CaW5kaW5nKHRvLCBmcm9tKS5vbmVXYXko
        KS5jb25uZWN0KG9iaik7Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8q
        KgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItbWV0YWwKKi8KCnZh
        ciBNaXhpbiwgUkVRVUlSRUQsIEFsaWFzLAogICAgYV9tYXAgPSBFbWJlci5B
        cnJheVBvbHlmaWxscy5tYXAsCiAgICBhX2luZGV4T2YgPSBFbWJlci5BcnJh
        eVBvbHlmaWxscy5pbmRleE9mLAogICAgYV9mb3JFYWNoID0gRW1iZXIuQXJy
        YXlQb2x5ZmlsbHMuZm9yRWFjaCwKICAgIGFfc2xpY2UgPSBbXS5zbGljZSwK
        ICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgZGVmaW5lUHJvcGVy
        dHkgPSBFbWJlci5kZWZpbmVQcm9wZXJ0eSwKICAgIGd1aWRGb3IgPSBFbWJl
        ci5ndWlkRm9yOwoKZnVuY3Rpb24gbWl4aW5zTWV0YShvYmopIHsKICB2YXIg
        bSA9IEVtYmVyLm1ldGEob2JqLCB0cnVlKSwgcmV0ID0gbS5taXhpbnM7CiAg
        aWYgKCFyZXQpIHsKICAgIHJldCA9IG0ubWl4aW5zID0ge307CiAgfSBlbHNl
        IGlmICghbS5oYXNPd25Qcm9wZXJ0eSgnbWl4aW5zJykpIHsKICAgIHJldCA9
        IG0ubWl4aW5zID0gb19jcmVhdGUocmV0KTsKICB9CiAgcmV0dXJuIHJldDsK
        fQoKZnVuY3Rpb24gaW5pdE1peGluKG1peGluLCBhcmdzKSB7CiAgaWYgKGFy
        Z3MgJiYgYXJncy5sZW5ndGggPiAwKSB7CiAgICBtaXhpbi5taXhpbnMgPSBh
        X21hcC5jYWxsKGFyZ3MsIGZ1bmN0aW9uKHgpIHsKICAgICAgaWYgKHggaW5z
        dGFuY2VvZiBNaXhpbikgeyByZXR1cm4geDsgfQoKICAgICAgLy8gTm90ZTog
        TWFudWFsbHkgc2V0dXAgYSBwcmltaXRpdmUgbWl4aW4gaGVyZS4gVGhpcyBp
        cyB0aGUgb25seQogICAgICAvLyB3YXkgdG8gYWN0dWFsbHkgZ2V0IGEgcHJp
        bWl0aXZlIG1peGluLiBUaGlzIHdheSBub3JtYWwgY3JlYXRpb24KICAgICAg
        Ly8gb2YgbWl4aW5zIHdpbGwgZ2l2ZSB5b3UgY29tYmluZWQgbWl4aW5zLi4u
        CiAgICAgIHZhciBtaXhpbiA9IG5ldyBNaXhpbigpOwogICAgICBtaXhpbi5w
        cm9wZXJ0aWVzID0geDsKICAgICAgcmV0dXJuIG1peGluOwogICAgfSk7CiAg
        fQogIHJldHVybiBtaXhpbjsKfQoKZnVuY3Rpb24gaXNNZXRob2Qob2JqKSB7
        CiAgcmV0dXJuICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmogJiYKICAgICAg
        ICAgb2JqLmlzTWV0aG9kICE9PSBmYWxzZSAmJgogICAgICAgICBvYmogIT09
        IEJvb2xlYW4gJiYgb2JqICE9PSBPYmplY3QgJiYgb2JqICE9PSBOdW1iZXIg
        JiYgb2JqICE9PSBBcnJheSAmJiBvYmogIT09IERhdGUgJiYgb2JqICE9PSBT
        dHJpbmc7Cn0KCnZhciBDT05USU5VRSA9IHt9OwoKZnVuY3Rpb24gbWl4aW5Q
        cm9wZXJ0aWVzKG1peGluc01ldGEsIG1peGluKSB7CiAgdmFyIGd1aWQ7Cgog
        IGlmIChtaXhpbiBpbnN0YW5jZW9mIE1peGluKSB7CiAgICBndWlkID0gZ3Vp
        ZEZvcihtaXhpbik7CiAgICBpZiAobWl4aW5zTWV0YVtndWlkXSkgeyByZXR1
        cm4gQ09OVElOVUU7IH0KICAgIG1peGluc01ldGFbZ3VpZF0gPSBtaXhpbjsK
        ICAgIHJldHVybiBtaXhpbi5wcm9wZXJ0aWVzOwogIH0gZWxzZSB7CiAgICBy
        ZXR1cm4gbWl4aW47IC8vIGFwcGx5IGFub255bW91cyBtaXhpbiBwcm9wZXJ0
        aWVzCiAgfQp9CgpmdW5jdGlvbiBjb25jYXRlbmF0ZWRNaXhpblByb3BlcnRp
        ZXMoY29uY2F0UHJvcCwgcHJvcHMsIHZhbHVlcywgYmFzZSkgewogIHZhciBj
        b25jYXRzOwoKICAvLyByZXNldCBiZWZvcmUgYWRkaW5nIGVhY2ggbmV3IG1p
        eGluIHRvIHBpY2t1cCBjb25jYXRzIGZyb20gcHJldmlvdXMKICBjb25jYXRz
        ID0gdmFsdWVzW2NvbmNhdFByb3BdIHx8IGJhc2VbY29uY2F0UHJvcF07CiAg
        aWYgKHByb3BzW2NvbmNhdFByb3BdKSB7CiAgICBjb25jYXRzID0gY29uY2F0
        cyA/IGNvbmNhdHMuY29uY2F0KHByb3BzW2NvbmNhdFByb3BdKSA6IHByb3Bz
        W2NvbmNhdFByb3BdOwogIH0KCiAgcmV0dXJuIGNvbmNhdHM7Cn0KCmZ1bmN0
        aW9uIGdpdmVEZXNjcmlwdG9yU3VwZXIobWV0YSwga2V5LCBwcm9wZXJ0eSwg
        dmFsdWVzLCBkZXNjcykgewogIHZhciBzdXBlclByb3BlcnR5OwoKICAvLyBD
        b21wdXRlZCBwcm9wZXJ0aWVzIG92ZXJyaWRlIG1ldGhvZHMsIGFuZCBkbyBu
        b3QgY2FsbCBzdXBlciB0byB0aGVtCiAgaWYgKHZhbHVlc1trZXldID09PSB1
        bmRlZmluZWQpIHsKICAgIC8vIEZpbmQgdGhlIG9yaWdpbmFsIGRlc2NyaXB0
        b3IgaW4gYSBwYXJlbnQgbWl4aW4KICAgIHN1cGVyUHJvcGVydHkgPSBkZXNj
        c1trZXldOwogIH0KCiAgLy8gSWYgd2UgZGlkbid0IGZpbmQgdGhlIG9yaWdp
        bmFsIGRlc2NyaXB0b3IgaW4gYSBwYXJlbnQgbWl4aW4sIGZpbmQKICAvLyBp
        dCBvbiB0aGUgb3JpZ2luYWwgb2JqZWN0LgogIHN1cGVyUHJvcGVydHkgPSBz
        dXBlclByb3BlcnR5IHx8IG1ldGEuZGVzY3Nba2V5XTsKCiAgaWYgKCFzdXBl
        clByb3BlcnR5IHx8ICEoc3VwZXJQcm9wZXJ0eSBpbnN0YW5jZW9mIEVtYmVy
        LkNvbXB1dGVkUHJvcGVydHkpKSB7CiAgICByZXR1cm4gcHJvcGVydHk7CiAg
        fQoKICAvLyBTaW5jZSBtdWx0aXBsZSBtaXhpbnMgbWF5IGluaGVyaXQgZnJv
        bSB0aGUgc2FtZSBwYXJlbnQsIHdlIG5lZWQKICAvLyB0byBjbG9uZSB0aGUg
        Y29tcHV0ZWQgcHJvcGVydHkgc28gdGhhdCBvdGhlciBtaXhpbnMgZG8gbm90
        IHJlY2VpdmUKICAvLyB0aGUgd3JhcHBlZCB2ZXJzaW9uLgogIHByb3BlcnR5
        ID0gb19jcmVhdGUocHJvcGVydHkpOwogIHByb3BlcnR5LmZ1bmMgPSBFbWJl
        ci53cmFwKHByb3BlcnR5LmZ1bmMsIHN1cGVyUHJvcGVydHkuZnVuYyk7Cgog
        IHJldHVybiBwcm9wZXJ0eTsKfQoKZnVuY3Rpb24gZ2l2ZU1ldGhvZFN1cGVy
        KG9iaiwga2V5LCBtZXRob2QsIHZhbHVlcywgZGVzY3MpIHsKICB2YXIgc3Vw
        ZXJNZXRob2Q7CgogIC8vIE1ldGhvZHMgb3ZlcndyaXRlIGNvbXB1dGVkIHBy
        b3BlcnRpZXMsIGFuZCBkbyBub3QgY2FsbCBzdXBlciB0byB0aGVtLgogIGlm
        IChkZXNjc1trZXldID09PSB1bmRlZmluZWQpIHsKICAgIC8vIEZpbmQgdGhl
        IG9yaWdpbmFsIG1ldGhvZCBpbiBhIHBhcmVudCBtaXhpbgogICAgc3VwZXJN
        ZXRob2QgPSB2YWx1ZXNba2V5XTsKICB9CgogIC8vIElmIHdlIGRpZG4ndCBm
        aW5kIHRoZSBvcmlnaW5hbCB2YWx1ZSBpbiBhIHBhcmVudCBtaXhpbiwgZmlu
        ZCBpdCBpbgogIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QKICBzdXBlck1ldGhv
        ZCA9IHN1cGVyTWV0aG9kIHx8IG9ialtrZXldOwoKICAvLyBPbmx5IHdyYXAg
        dGhlIG5ldyBtZXRob2QgaWYgdGhlIG9yaWdpbmFsIG1ldGhvZCB3YXMgYSBm
        dW5jdGlvbgogIGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2Ygc3VwZXJNZXRo
        b2QpIHsKICAgIHJldHVybiBtZXRob2Q7CiAgfQoKICByZXR1cm4gRW1iZXIu
        d3JhcChtZXRob2QsIHN1cGVyTWV0aG9kKTsKfQoKZnVuY3Rpb24gYXBwbHlD
        b25jYXRlbmF0ZWRQcm9wZXJ0aWVzKG9iaiwga2V5LCB2YWx1ZSwgdmFsdWVz
        KSB7CiAgdmFyIGJhc2VWYWx1ZSA9IHZhbHVlc1trZXldIHx8IG9ialtrZXld
        OwoKICBpZiAoYmFzZVZhbHVlKSB7CiAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0g
        dHlwZW9mIGJhc2VWYWx1ZS5jb25jYXQpIHsKICAgICAgcmV0dXJuIGJhc2VW
        YWx1ZS5jb25jYXQodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJu
        IEVtYmVyLm1ha2VBcnJheShiYXNlVmFsdWUpLmNvbmNhdCh2YWx1ZSk7CiAg
        ICB9CiAgfSBlbHNlIHsKICAgIHJldHVybiBFbWJlci5tYWtlQXJyYXkodmFs
        dWUpOwogIH0KfQoKZnVuY3Rpb24gYXBwbHlNZXJnZWRQcm9wZXJ0aWVzKG9i
        aiwga2V5LCB2YWx1ZSwgdmFsdWVzKSB7CiAgdmFyIGJhc2VWYWx1ZSA9IHZh
        bHVlc1trZXldIHx8IG9ialtrZXldOwoKICBpZiAoIWJhc2VWYWx1ZSkgeyBy
        ZXR1cm4gdmFsdWU7IH0KCiAgdmFyIG5ld0Jhc2UgPSBFbWJlci5tZXJnZSh7
        fSwgYmFzZVZhbHVlKTsKICBmb3IgKHZhciBwcm9wIGluIHZhbHVlKSB7CiAg
        ICBpZiAoIXZhbHVlLmhhc093blByb3BlcnR5KHByb3ApKSB7IGNvbnRpbnVl
        OyB9CgogICAgdmFyIHByb3BWYWx1ZSA9IHZhbHVlW3Byb3BdOwogICAgaWYg
        KGlzTWV0aG9kKHByb3BWYWx1ZSkpIHsKICAgICAgLy8gVE9ETzogc3VwcG9y
        dCBmb3IgQ29tcHV0ZWQgUHJvcGVydGllcywgZXRjPwogICAgICBuZXdCYXNl
        W3Byb3BdID0gZ2l2ZU1ldGhvZFN1cGVyKG9iaiwgcHJvcCwgcHJvcFZhbHVl
        LCBiYXNlVmFsdWUsIHt9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld0Jhc2Vb
        cHJvcF0gPSBwcm9wVmFsdWU7CiAgICB9CiAgfQoKICByZXR1cm4gbmV3QmFz
        ZTsKfQoKZnVuY3Rpb24gYWRkTm9ybWFsaXplZFByb3BlcnR5KGJhc2UsIGtl
        eSwgdmFsdWUsIG1ldGEsIGRlc2NzLCB2YWx1ZXMsIGNvbmNhdHMsIG1lcmdp
        bmdzKSB7CiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRv
        cikgewogICAgaWYgKHZhbHVlID09PSBSRVFVSVJFRCAmJiBkZXNjc1trZXld
        KSB7IHJldHVybiBDT05USU5VRTsgfQoKICAgIC8vIFdyYXAgZGVzY3JpcHRv
        ciBmdW5jdGlvbiB0byBpbXBsZW1lbnQKICAgIC8vIF9zdXBlcigpIGlmIG5l
        ZWRlZAogICAgaWYgKHZhbHVlLmZ1bmMpIHsKICAgICAgdmFsdWUgPSBnaXZl
        RGVzY3JpcHRvclN1cGVyKG1ldGEsIGtleSwgdmFsdWUsIHZhbHVlcywgZGVz
        Y3MpOwogICAgfQoKICAgIGRlc2NzW2tleV0gID0gdmFsdWU7CiAgICB2YWx1
        ZXNba2V5XSA9IHVuZGVmaW5lZDsKICB9IGVsc2UgewogICAgaWYgKChjb25j
        YXRzICYmIGFfaW5kZXhPZi5jYWxsKGNvbmNhdHMsIGtleSkgPj0gMCkgfHwK
        ICAgICAgICAgICAgICAgIGtleSA9PT0gJ2NvbmNhdGVuYXRlZFByb3BlcnRp
        ZXMnIHx8CiAgICAgICAgICAgICAgICBrZXkgPT09ICdtZXJnZWRQcm9wZXJ0
        aWVzJykgewogICAgICB2YWx1ZSA9IGFwcGx5Q29uY2F0ZW5hdGVkUHJvcGVy
        dGllcyhiYXNlLCBrZXksIHZhbHVlLCB2YWx1ZXMpOwogICAgfSBlbHNlIGlm
        ICgobWVyZ2luZ3MgJiYgYV9pbmRleE9mLmNhbGwobWVyZ2luZ3MsIGtleSkg
        Pj0gMCkpIHsKICAgICAgdmFsdWUgPSBhcHBseU1lcmdlZFByb3BlcnRpZXMo
        YmFzZSwga2V5LCB2YWx1ZSwgdmFsdWVzKTsKICAgIH0gZWxzZSBpZiAoaXNN
        ZXRob2QodmFsdWUpKSB7CiAgICAgIHZhbHVlID0gZ2l2ZU1ldGhvZFN1cGVy
        KGJhc2UsIGtleSwgdmFsdWUsIHZhbHVlcywgZGVzY3MpOwogICAgfQoKICAg
        IGRlc2NzW2tleV0gPSB1bmRlZmluZWQ7CiAgICB2YWx1ZXNba2V5XSA9IHZh
        bHVlOwogIH0KfQoKZnVuY3Rpb24gbWVyZ2VNaXhpbnMobWl4aW5zLCBtLCBk
        ZXNjcywgdmFsdWVzLCBiYXNlLCBrZXlzKSB7CiAgdmFyIG1peGluLCBwcm9w
        cywga2V5LCBjb25jYXRzLCBtZXJnaW5ncywgbWV0YTsKCiAgZnVuY3Rpb24g
        cmVtb3ZlS2V5cyhrZXlOYW1lKSB7CiAgICBkZWxldGUgZGVzY3Nba2V5TmFt
        ZV07CiAgICBkZWxldGUgdmFsdWVzW2tleU5hbWVdOwogIH0KCiAgZm9yKHZh
        ciBpPTAsIGw9bWl4aW5zLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgIG1peGlu
        ID0gbWl4aW5zW2ldOwogICAgRW1iZXIuYXNzZXJ0KCdFeHBlY3RlZCBoYXNo
        IG9yIE1peGluIGluc3RhbmNlLCBnb3QgJyArIE9iamVjdC5wcm90b3R5cGUu
        dG9TdHJpbmcuY2FsbChtaXhpbiksIHR5cGVvZiBtaXhpbiA9PT0gJ29iamVj
        dCcgJiYgbWl4aW4gIT09IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0
        cmluZy5jYWxsKG1peGluKSAhPT0gJ1tvYmplY3QgQXJyYXldJyk7CgogICAg
        cHJvcHMgPSBtaXhpblByb3BlcnRpZXMobSwgbWl4aW4pOwogICAgaWYgKHBy
        b3BzID09PSBDT05USU5VRSkgeyBjb250aW51ZTsgfQoKICAgIGlmIChwcm9w
        cykgewogICAgICBtZXRhID0gRW1iZXIubWV0YShiYXNlKTsKICAgICAgaWYg
        KGJhc2Uud2lsbE1lcmdlTWl4aW4pIHsgYmFzZS53aWxsTWVyZ2VNaXhpbihw
        cm9wcyk7IH0KICAgICAgY29uY2F0cyA9IGNvbmNhdGVuYXRlZE1peGluUHJv
        cGVydGllcygnY29uY2F0ZW5hdGVkUHJvcGVydGllcycsIHByb3BzLCB2YWx1
        ZXMsIGJhc2UpOwogICAgICBtZXJnaW5ncyA9IGNvbmNhdGVuYXRlZE1peGlu
        UHJvcGVydGllcygnbWVyZ2VkUHJvcGVydGllcycsIHByb3BzLCB2YWx1ZXMs
        IGJhc2UpOwoKICAgICAgZm9yIChrZXkgaW4gcHJvcHMpIHsKICAgICAgICBp
        ZiAoIXByb3BzLmhhc093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7IH0K
        ICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAgICBhZGROb3JtYWxpemVk
        UHJvcGVydHkoYmFzZSwga2V5LCBwcm9wc1trZXldLCBtZXRhLCBkZXNjcywg
        dmFsdWVzLCBjb25jYXRzLCBtZXJnaW5ncyk7CiAgICAgIH0KCiAgICAgIC8v
        IG1hbnVhbGx5IGNvcHkgdG9TdHJpbmcoKSBiZWNhdXNlIHNvbWUgSlMgZW5n
        aW5lcyBkbyBub3QgZW51bWVyYXRlIGl0CiAgICAgIGlmIChwcm9wcy5oYXNP
        d25Qcm9wZXJ0eSgndG9TdHJpbmcnKSkgeyBiYXNlLnRvU3RyaW5nID0gcHJv
        cHMudG9TdHJpbmc7IH0KICAgIH0gZWxzZSBpZiAobWl4aW4ubWl4aW5zKSB7
        CiAgICAgIG1lcmdlTWl4aW5zKG1peGluLm1peGlucywgbSwgZGVzY3MsIHZh
        bHVlcywgYmFzZSwga2V5cyk7CiAgICAgIGlmIChtaXhpbi5fd2l0aG91dCkg
        eyBhX2ZvckVhY2guY2FsbChtaXhpbi5fd2l0aG91dCwgcmVtb3ZlS2V5cyk7
        IH0KICAgIH0KICB9Cn0KCnZhciBJU19CSU5ESU5HID0gRW1iZXIuSVNfQklO
        RElORyA9IC9eLitCaW5kaW5nJC87CgpmdW5jdGlvbiBkZXRlY3RCaW5kaW5n
        KG9iaiwga2V5LCB2YWx1ZSwgbSkgewogIGlmIChJU19CSU5ESU5HLnRlc3Qo
        a2V5KSkgewogICAgdmFyIGJpbmRpbmdzID0gbS5iaW5kaW5nczsKICAgIGlm
        ICghYmluZGluZ3MpIHsKICAgICAgYmluZGluZ3MgPSBtLmJpbmRpbmdzID0g
        e307CiAgICB9IGVsc2UgaWYgKCFtLmhhc093blByb3BlcnR5KCdiaW5kaW5n
        cycpKSB7CiAgICAgIGJpbmRpbmdzID0gbS5iaW5kaW5ncyA9IG9fY3JlYXRl
        KG0uYmluZGluZ3MpOwogICAgfQogICAgYmluZGluZ3Nba2V5XSA9IHZhbHVl
        OwogIH0KfQoKZnVuY3Rpb24gY29ubmVjdEJpbmRpbmdzKG9iaiwgbSkgewog
        IC8vIFRPRE8gTWl4aW4uYXBwbHkoaW5zdGFuY2UpIHNob3VsZCBkaXNjb25u
        ZWN0IGJpbmRpbmcgaWYgZXhpc3RzCiAgdmFyIGJpbmRpbmdzID0gbS5iaW5k
        aW5ncywga2V5LCBiaW5kaW5nLCB0bzsKICBpZiAoYmluZGluZ3MpIHsKICAg
        IGZvciAoa2V5IGluIGJpbmRpbmdzKSB7CiAgICAgIGJpbmRpbmcgPSBiaW5k
        aW5nc1trZXldOwogICAgICBpZiAoYmluZGluZykgewogICAgICAgIHRvID0g
        a2V5LnNsaWNlKDAsIC03KTsgLy8gc3RyaXAgQmluZGluZyBvZmYgZW5kCiAg
        ICAgICAgaWYgKGJpbmRpbmcgaW5zdGFuY2VvZiBFbWJlci5CaW5kaW5nKSB7
        CiAgICAgICAgICBiaW5kaW5nID0gYmluZGluZy5jb3B5KCk7IC8vIGNvcHkg
        cHJvdG90eXBlcycgaW5zdGFuY2UKICAgICAgICAgIGJpbmRpbmcudG8odG8p
        OwogICAgICAgIH0gZWxzZSB7IC8vIGJpbmRpbmcgaXMgc3RyaW5nIHBhdGgK
        ICAgICAgICAgIGJpbmRpbmcgPSBuZXcgRW1iZXIuQmluZGluZyh0bywgYmlu
        ZGluZyk7CiAgICAgICAgfQogICAgICAgIGJpbmRpbmcuY29ubmVjdChvYmop
        OwogICAgICAgIG9ialtrZXldID0gYmluZGluZzsKICAgICAgfQogICAgfQog
        ICAgLy8gbWFyayBhcyBhcHBsaWVkCiAgICBtLmJpbmRpbmdzID0ge307CiAg
        fQp9CgpmdW5jdGlvbiBmaW5pc2hQYXJ0aWFsKG9iaiwgbSkgewogIGNvbm5l
        Y3RCaW5kaW5ncyhvYmosIG0gfHwgRW1iZXIubWV0YShvYmopKTsKICByZXR1
        cm4gb2JqOwp9CgpmdW5jdGlvbiBmb2xsb3dBbGlhcyhvYmosIGRlc2MsIG0s
        IGRlc2NzLCB2YWx1ZXMpIHsKICB2YXIgYWx0S2V5ID0gZGVzYy5tZXRob2RO
        YW1lLCB2YWx1ZTsKICBpZiAoZGVzY3NbYWx0S2V5XSB8fCB2YWx1ZXNbYWx0
        S2V5XSkgewogICAgdmFsdWUgPSB2YWx1ZXNbYWx0S2V5XTsKICAgIGRlc2Mg
        ID0gZGVzY3NbYWx0S2V5XTsKICB9IGVsc2UgaWYgKG0uZGVzY3NbYWx0S2V5
        XSkgewogICAgZGVzYyAgPSBtLmRlc2NzW2FsdEtleV07CiAgICB2YWx1ZSA9
        IHVuZGVmaW5lZDsKICB9IGVsc2UgewogICAgZGVzYyA9IHVuZGVmaW5lZDsK
        ICAgIHZhbHVlID0gb2JqW2FsdEtleV07CiAgfQoKICByZXR1cm4geyBkZXNj
        OiBkZXNjLCB2YWx1ZTogdmFsdWUgfTsKfQoKZnVuY3Rpb24gdXBkYXRlT2Jz
        ZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwga2V5LCBvYnNlcnZlck9yTGlzdGVu
        ZXIsIHBhdGhzS2V5LCB1cGRhdGVNZXRob2QpIHsKICB2YXIgcGF0aHMgPSBv
        YnNlcnZlck9yTGlzdGVuZXJbcGF0aHNLZXldOwoKICBpZiAocGF0aHMpIHsK
        ICAgIGZvciAodmFyIGk9MCwgbD1wYXRocy5sZW5ndGg7IGk8bDsgaSsrKSB7
        CiAgICAgIEVtYmVyW3VwZGF0ZU1ldGhvZF0ob2JqLCBwYXRoc1tpXSwgbnVs
        bCwga2V5KTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHJlcGxhY2VPYnNlcnZl
        cnNBbmRMaXN0ZW5lcnMob2JqLCBrZXksIG9ic2VydmVyT3JMaXN0ZW5lcikg
        ewogIHZhciBwcmV2ID0gb2JqW2tleV07CgogIGlmICgnZnVuY3Rpb24nID09
        PSB0eXBlb2YgcHJldikgewogICAgdXBkYXRlT2JzZXJ2ZXJzQW5kTGlzdGVu
        ZXJzKG9iaiwga2V5LCBwcmV2LCAnX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9f
        JywgJ3JlbW92ZUJlZm9yZU9ic2VydmVyJyk7CiAgICB1cGRhdGVPYnNlcnZl
        cnNBbmRMaXN0ZW5lcnMob2JqLCBrZXksIHByZXYsICdfX2VtYmVyX29ic2Vy
        dmVzX18nLCAncmVtb3ZlT2JzZXJ2ZXInKTsKICAgIHVwZGF0ZU9ic2VydmVy
        c0FuZExpc3RlbmVycyhvYmosIGtleSwgcHJldiwgJ19fZW1iZXJfbGlzdGVu
        c19fJywgJ3JlbW92ZUxpc3RlbmVyJyk7CiAgfQoKICBpZiAoJ2Z1bmN0aW9u
        JyA9PT0gdHlwZW9mIG9ic2VydmVyT3JMaXN0ZW5lcikgewogICAgdXBkYXRl
        T2JzZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwga2V5LCBvYnNlcnZlck9yTGlz
        dGVuZXIsICdfX2VtYmVyX29ic2VydmVzQmVmb3JlX18nLCAnYWRkQmVmb3Jl
        T2JzZXJ2ZXInKTsKICAgIHVwZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVycyhv
        YmosIGtleSwgb2JzZXJ2ZXJPckxpc3RlbmVyLCAnX19lbWJlcl9vYnNlcnZl
        c19fJywgJ2FkZE9ic2VydmVyJyk7CiAgICB1cGRhdGVPYnNlcnZlcnNBbmRM
        aXN0ZW5lcnMob2JqLCBrZXksIG9ic2VydmVyT3JMaXN0ZW5lciwgJ19fZW1i
        ZXJfbGlzdGVuc19fJywgJ2FkZExpc3RlbmVyJyk7CiAgfQp9CgpmdW5jdGlv
        biBhcHBseU1peGluKG9iaiwgbWl4aW5zLCBwYXJ0aWFsKSB7CiAgdmFyIGRl
        c2NzID0ge30sIHZhbHVlcyA9IHt9LCBtID0gRW1iZXIubWV0YShvYmopLAog
        ICAgICBrZXksIHZhbHVlLCBkZXNjLCBrZXlzID0gW107CgogIC8vIEdvIHRo
        cm91Z2ggYWxsIG1peGlucyBhbmQgaGFzaGVzIHBhc3NlZCBpbiwgYW5kOgog
        IC8vCiAgLy8gKiBIYW5kbGUgY29uY2F0ZW5hdGVkIHByb3BlcnRpZXMKICAv
        LyAqIEhhbmRsZSBtZXJnZWQgcHJvcGVydGllcwogIC8vICogU2V0IHVwIF9z
        dXBlciB3cmFwcGluZyBpZiBuZWNlc3NhcnkKICAvLyAqIFNldCB1cCBjb21w
        dXRlZCBwcm9wZXJ0eSBkZXNjcmlwdG9ycwogIC8vICogQ29weWluZyBgdG9T
        dHJpbmdgIGluIGJyb2tlbiBicm93c2VycwogIG1lcmdlTWl4aW5zKG1peGlu
        cywgbWl4aW5zTWV0YShvYmopLCBkZXNjcywgdmFsdWVzLCBvYmosIGtleXMp
        OwoKICBmb3IodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBp
        KyspIHsKICAgIGtleSA9IGtleXNbaV07CiAgICBpZiAoa2V5ID09PSAnY29u
        c3RydWN0b3InIHx8ICF2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBj
        b250aW51ZTsgfQoKICAgIGRlc2MgPSBkZXNjc1trZXldOwogICAgdmFsdWUg
        PSB2YWx1ZXNba2V5XTsKCiAgICBpZiAoZGVzYyA9PT0gUkVRVUlSRUQpIHsg
        Y29udGludWU7IH0KCiAgICB3aGlsZSAoZGVzYyAmJiBkZXNjIGluc3RhbmNl
        b2YgQWxpYXMpIHsKICAgICAgdmFyIGZvbGxvd2VkID0gZm9sbG93QWxpYXMo
        b2JqLCBkZXNjLCBtLCBkZXNjcywgdmFsdWVzKTsKICAgICAgZGVzYyA9IGZv
        bGxvd2VkLmRlc2M7CiAgICAgIHZhbHVlID0gZm9sbG93ZWQudmFsdWU7CiAg
        ICB9CgogICAgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA9PT0g
        dW5kZWZpbmVkKSB7IGNvbnRpbnVlOyB9CgogICAgcmVwbGFjZU9ic2VydmVy
        c0FuZExpc3RlbmVycyhvYmosIGtleSwgdmFsdWUpOwogICAgZGV0ZWN0Qmlu
        ZGluZyhvYmosIGtleSwgdmFsdWUsIG0pOwogICAgZGVmaW5lUHJvcGVydHko
        b2JqLCBrZXksIGRlc2MsIHZhbHVlLCBtKTsKICB9CgogIGlmICghcGFydGlh
        bCkgeyAvLyBkb24ndCBhcHBseSB0byBwcm90b3R5cGUKICAgIGZpbmlzaFBh
        cnRpYWwob2JqLCBtKTsKICB9CgogIHJldHVybiBvYmo7Cn0KCi8qKgogIEBt
        ZXRob2QgbWl4aW4KICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJh
        bSBtaXhpbnMqCiAgQHJldHVybiBvYmoKKi8KRW1iZXIubWl4aW4gPSBmdW5j
        dGlvbihvYmopIHsKICB2YXIgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVu
        dHMsIDEpOwogIGFwcGx5TWl4aW4ob2JqLCBhcmdzLCBmYWxzZSk7CiAgcmV0
        dXJuIG9iajsKfTsKCi8qKgogIFRoZSBgRW1iZXIuTWl4aW5gIGNsYXNzIGFs
        bG93cyB5b3UgdG8gY3JlYXRlIG1peGlucywgd2hvc2UgcHJvcGVydGllcyBj
        YW4gYmUKICBhZGRlZCB0byBvdGhlciBjbGFzc2VzLiBGb3IgaW5zdGFuY2Us
        CgogIGBgYGphdmFzY3JpcHQKICBBcHAuRWRpdGFibGUgPSBFbWJlci5NaXhp
        bi5jcmVhdGUoewogICAgZWRpdDogZnVuY3Rpb24oKSB7CiAgICAgIGNvbnNv
        bGUubG9nKCdzdGFydGluZyB0byBlZGl0Jyk7CiAgICAgIHRoaXMuc2V0KCdp
        c0VkaXRpbmcnLCB0cnVlKTsKICAgIH0sCiAgICBpc0VkaXRpbmc6IGZhbHNl
        CiAgfSk7CgogIC8vIE1peCBtaXhpbnMgaW50byBjbGFzc2VzIGJ5IHBhc3Np
        bmcgdGhlbSBhcyB0aGUgZmlyc3QgYXJndW1lbnRzIHRvCiAgLy8gLmV4dGVu
        ZC4KICBBcHAuQ29tbWVudFZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChBcHAu
        RWRpdGFibGUsIHsKICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNv
        bXBpbGUoJ3t7I2lmIHZpZXcuaXNFZGl0aW5nfX0uLi57e2Vsc2V9fS4uLnt7
        L2lmfX0nKQogIH0pOwoKICBjb21tZW50VmlldyA9IEFwcC5Db21tZW50Vmll
        dy5jcmVhdGUoKTsKICBjb21tZW50Vmlldy5lZGl0KCk7IC8vIG91dHB1dHMg
        J3N0YXJ0aW5nIHRvIGVkaXQnCiAgYGBgCgogIE5vdGUgdGhhdCBNaXhpbnMg
        YXJlIGNyZWF0ZWQgd2l0aCBgRW1iZXIuTWl4aW4uY3JlYXRlYCwgbm90CiAg
        YEVtYmVyLk1peGluLmV4dGVuZGAuCgogIE5vdGUgdGhhdCBtaXhpbnMgZXh0
        ZW5kIGEgY29uc3RydWN0b3IncyBwcm90b3R5cGUgc28gYXJyYXlzIGFuZCBv
        YmplY3QgbGl0ZXJhbHMKICBkZWZpbmVkIGFzIHByb3BlcnRpZXMgd2lsbCBi
        ZSBzaGFyZWQgYW1vbmdzdCBvYmplY3RzIHRoYXQgaW1wbGVtZW50IHRoZSBt
        aXhpbi4KICBJZiB5b3Ugd2FudCB0byBkZWZpbmUgYW4gcHJvcGVydHkgaW4g
        YSBtaXhpbiB0aGF0IGlzIG5vdCBzaGFyZWQsIHlvdSBjYW4gZGVmaW5lCiAg
        aXQgZWl0aGVyIGFzIGEgY29tcHV0ZWQgcHJvcGVydHkgb3IgaGF2ZSBpdCBi
        ZSBjcmVhdGVkIG9uIGluaXRpYWxpemF0aW9uIG9mIHRoZSBvYmplY3QuCgog
        IGBgYGphdmFzY3JpcHQKICAvL2ZpbHRlcnMgYXJyYXkgd2lsbCBiZSBzaGFy
        ZWQgYW1vbmdzdCBhbnkgb2JqZWN0IGltcGxlbWVudGluZyBtaXhpbgogIEFw
        cC5GaWx0ZXJhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgIGZpbHRl
        cnM6IEVtYmVyLkEoKQogIH0pOwoKICAvL2ZpbHRlcnMgd2lsbCBiZSBhIHNl
        cGFyYXRlICBhcnJheSBmb3IgZXZlcnkgb2JqZWN0IGltcGxlbWVudGluZyB0
        aGUgbWl4aW4KICBBcHAuRmlsdGVyYWJsZSA9IEVtYmVyLk1peGluLmNyZWF0
        ZSh7CiAgICBmaWx0ZXJzOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3Jl
        dHVybiBFbWJlci5BKCk7fSkKICB9KTsKCiAgLy9maWx0ZXJzIHdpbGwgYmUg
        Y3JlYXRlZCBhcyBhIHNlcGFyYXRlIGFycmF5IGR1cmluZyB0aGUgb2JqZWN0
        J3MgaW5pdGlhbGl6YXRpb24KICBBcHAuRmlsdGVyYWJsZSA9IEVtYmVyLk1p
        eGluLmNyZWF0ZSh7CiAgICBpbml0OiBmdW5jdGlvbigpIHsKICAgICAgdGhp
        cy5fc3VwZXIoKTsKICAgICAgdGhpcy5zZXQoImZpbHRlcnMiLCBFbWJlci5B
        KCkpOwogICAgfQogIH0pOwogIGBgYAoKICBAY2xhc3MgTWl4aW4KICBAbmFt
        ZXNwYWNlIEVtYmVyCiovCkVtYmVyLk1peGluID0gZnVuY3Rpb24oKSB7IHJl
        dHVybiBpbml0TWl4aW4odGhpcywgYXJndW1lbnRzKTsgfTsKCk1peGluID0g
        RW1iZXIuTWl4aW47CgpNaXhpbi5wcm90b3R5cGUgPSB7CiAgcHJvcGVydGll
        czogbnVsbCwKICBtaXhpbnM6IG51bGwsCiAgb3duZXJDb25zdHJ1Y3Rvcjog
        bnVsbAp9OwoKTWl4aW4uX2FwcGx5ID0gYXBwbHlNaXhpbjsKCk1peGluLmFw
        cGx5UGFydGlhbCA9IGZ1bmN0aW9uKG9iaikgewogIHZhciBhcmdzID0gYV9z
        bGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgcmV0dXJuIGFwcGx5TWl4aW4o
        b2JqLCBhcmdzLCB0cnVlKTsKfTsKCk1peGluLmZpbmlzaFBhcnRpYWwgPSBm
        aW5pc2hQYXJ0aWFsOwoKRW1iZXIuYW55VW5wcm9jZXNzZWRNaXhpbnMgPSBm
        YWxzZTsKCi8qKgogIEBtZXRob2QgY3JlYXRlCiAgQHN0YXRpYwogIEBwYXJh
        bSBhcmd1bWVudHMqCiovCk1peGluLmNyZWF0ZSA9IGZ1bmN0aW9uKCkgewog
        IEVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zID0gdHJ1ZTsKICB2YXIgTSA9
        IHRoaXM7CiAgcmV0dXJuIGluaXRNaXhpbihuZXcgTSgpLCBhcmd1bWVudHMp
        Owp9OwoKdmFyIE1peGluUHJvdG90eXBlID0gTWl4aW4ucHJvdG90eXBlOwoK
        LyoqCiAgQG1ldGhvZCByZW9wZW4KICBAcGFyYW0gYXJndW1lbnRzKgoqLwpN
        aXhpblByb3RvdHlwZS5yZW9wZW4gPSBmdW5jdGlvbigpIHsKICB2YXIgbWl4
        aW4sIHRtcDsKCiAgaWYgKHRoaXMucHJvcGVydGllcykgewogICAgbWl4aW4g
        PSBNaXhpbi5jcmVhdGUoKTsKICAgIG1peGluLnByb3BlcnRpZXMgPSB0aGlz
        LnByb3BlcnRpZXM7CiAgICBkZWxldGUgdGhpcy5wcm9wZXJ0aWVzOwogICAg
        dGhpcy5taXhpbnMgPSBbbWl4aW5dOwogIH0gZWxzZSBpZiAoIXRoaXMubWl4
        aW5zKSB7CiAgICB0aGlzLm1peGlucyA9IFtdOwogIH0KCiAgdmFyIGxlbiA9
        IGFyZ3VtZW50cy5sZW5ndGgsIG1peGlucyA9IHRoaXMubWl4aW5zLCBpZHg7
        CgogIGZvcihpZHg9MDsgaWR4IDwgbGVuOyBpZHgrKykgewogICAgbWl4aW4g
        PSBhcmd1bWVudHNbaWR4XTsKICAgIEVtYmVyLmFzc2VydCgnRXhwZWN0ZWQg
        aGFzaCBvciBNaXhpbiBpbnN0YW5jZSwgZ290ICcgKyBPYmplY3QucHJvdG90
        eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4pLCB0eXBlb2YgbWl4aW4gPT09ICdv
        YmplY3QnICYmIG1peGluICE9PSBudWxsICYmIE9iamVjdC5wcm90b3R5cGUu
        dG9TdHJpbmcuY2FsbChtaXhpbikgIT09ICdbb2JqZWN0IEFycmF5XScpOwoK
        ICAgIGlmIChtaXhpbiBpbnN0YW5jZW9mIE1peGluKSB7CiAgICAgIG1peGlu
        cy5wdXNoKG1peGluKTsKICAgIH0gZWxzZSB7CiAgICAgIHRtcCA9IE1peGlu
        LmNyZWF0ZSgpOwogICAgICB0bXAucHJvcGVydGllcyA9IG1peGluOwogICAg
        ICBtaXhpbnMucHVzaCh0bXApOwogICAgfQogIH0KCiAgcmV0dXJuIHRoaXM7
        Cn07CgovKioKICBAbWV0aG9kIGFwcGx5CiAgQHBhcmFtIG9iagogIEByZXR1
        cm4gYXBwbGllZCBvYmplY3QKKi8KTWl4aW5Qcm90b3R5cGUuYXBwbHkgPSBm
        dW5jdGlvbihvYmopIHsKICByZXR1cm4gYXBwbHlNaXhpbihvYmosIFt0aGlz
        XSwgZmFsc2UpOwp9OwoKTWl4aW5Qcm90b3R5cGUuYXBwbHlQYXJ0aWFsID0g
        ZnVuY3Rpb24ob2JqKSB7CiAgcmV0dXJuIGFwcGx5TWl4aW4ob2JqLCBbdGhp
        c10sIHRydWUpOwp9OwoKZnVuY3Rpb24gX2RldGVjdChjdXJNaXhpbiwgdGFy
        Z2V0TWl4aW4sIHNlZW4pIHsKICB2YXIgZ3VpZCA9IGd1aWRGb3IoY3VyTWl4
        aW4pOwoKICBpZiAoc2VlbltndWlkXSkgeyByZXR1cm4gZmFsc2U7IH0KICBz
        ZWVuW2d1aWRdID0gdHJ1ZTsKCiAgaWYgKGN1ck1peGluID09PSB0YXJnZXRN
        aXhpbikgeyByZXR1cm4gdHJ1ZTsgfQogIHZhciBtaXhpbnMgPSBjdXJNaXhp
        bi5taXhpbnMsIGxvYyA9IG1peGlucyA/IG1peGlucy5sZW5ndGggOiAwOwog
        IHdoaWxlICgtLWxvYyA+PSAwKSB7CiAgICBpZiAoX2RldGVjdChtaXhpbnNb
        bG9jXSwgdGFyZ2V0TWl4aW4sIHNlZW4pKSB7IHJldHVybiB0cnVlOyB9CiAg
        fQogIHJldHVybiBmYWxzZTsKfQoKLyoqCiAgQG1ldGhvZCBkZXRlY3QKICBA
        cGFyYW0gb2JqCiAgQHJldHVybiB7Qm9vbGVhbn0KKi8KTWl4aW5Qcm90b3R5
        cGUuZGV0ZWN0ID0gZnVuY3Rpb24ob2JqKSB7CiAgaWYgKCFvYmopIHsgcmV0
        dXJuIGZhbHNlOyB9CiAgaWYgKG9iaiBpbnN0YW5jZW9mIE1peGluKSB7IHJl
        dHVybiBfZGV0ZWN0KG9iaiwgdGhpcywge30pOyB9CiAgdmFyIG1peGlucyA9
        IEVtYmVyLm1ldGEob2JqLCBmYWxzZSkubWl4aW5zOwogIGlmIChtaXhpbnMp
        IHsKICAgIHJldHVybiAhIW1peGluc1tndWlkRm9yKHRoaXMpXTsKICB9CiAg
        cmV0dXJuIGZhbHNlOwp9OwoKTWl4aW5Qcm90b3R5cGUud2l0aG91dCA9IGZ1
        bmN0aW9uKCkgewogIHZhciByZXQgPSBuZXcgTWl4aW4odGhpcyk7CiAgcmV0
        Ll93aXRob3V0ID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgcmV0dXJu
        IHJldDsKfTsKCmZ1bmN0aW9uIF9rZXlzKHJldCwgbWl4aW4sIHNlZW4pIHsK
        ICBpZiAoc2VlbltndWlkRm9yKG1peGluKV0pIHsgcmV0dXJuOyB9CiAgc2Vl
        bltndWlkRm9yKG1peGluKV0gPSB0cnVlOwoKICBpZiAobWl4aW4ucHJvcGVy
        dGllcykgewogICAgdmFyIHByb3BzID0gbWl4aW4ucHJvcGVydGllczsKICAg
        IGZvciAodmFyIGtleSBpbiBwcm9wcykgewogICAgICBpZiAocHJvcHMuaGFz
        T3duUHJvcGVydHkoa2V5KSkgeyByZXRba2V5XSA9IHRydWU7IH0KICAgIH0K
        ICB9IGVsc2UgaWYgKG1peGluLm1peGlucykgewogICAgYV9mb3JFYWNoLmNh
        bGwobWl4aW4ubWl4aW5zLCBmdW5jdGlvbih4KSB7IF9rZXlzKHJldCwgeCwg
        c2Vlbik7IH0pOwogIH0KfQoKTWl4aW5Qcm90b3R5cGUua2V5cyA9IGZ1bmN0
        aW9uKCkgewogIHZhciBrZXlzID0ge30sIHNlZW4gPSB7fSwgcmV0ID0gW107
        CiAgX2tleXMoa2V5cywgdGhpcywgc2Vlbik7CiAgZm9yKHZhciBrZXkgaW4g
        a2V5cykgewogICAgaWYgKGtleXMuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBy
        ZXQucHVzaChrZXkpOyB9CiAgfQogIHJldHVybiByZXQ7Cn07CgovLyByZXR1
        cm5zIHRoZSBtaXhpbnMgY3VycmVudGx5IGFwcGxpZWQgdG8gdGhlIHNwZWNp
        ZmllZCBvYmplY3QKLy8gVE9ETzogTWFrZSBFbWJlci5taXhpbgpNaXhpbi5t
        aXhpbnMgPSBmdW5jdGlvbihvYmopIHsKICB2YXIgbWl4aW5zID0gRW1iZXIu
        bWV0YShvYmosIGZhbHNlKS5taXhpbnMsIHJldCA9IFtdOwoKICBpZiAoIW1p
        eGlucykgeyByZXR1cm4gcmV0OyB9CgogIGZvciAodmFyIGtleSBpbiBtaXhp
        bnMpIHsKICAgIHZhciBtaXhpbiA9IG1peGluc1trZXldOwoKICAgIC8vIHNr
        aXAgcHJpbWl0aXZlIG1peGlucyBzaW5jZSB0aGVzZSBhcmUgYWx3YXlzIGFu
        b255bW91cwogICAgaWYgKCFtaXhpbi5wcm9wZXJ0aWVzKSB7IHJldC5wdXNo
        KG1peGluKTsgfQogIH0KCiAgcmV0dXJuIHJldDsKfTsKClJFUVVJUkVEID0g
        bmV3IEVtYmVyLkRlc2NyaXB0b3IoKTsKUkVRVUlSRUQudG9TdHJpbmcgPSBm
        dW5jdGlvbigpIHsgcmV0dXJuICcoUmVxdWlyZWQgUHJvcGVydHkpJzsgfTsK
        Ci8qKgogIERlbm90ZXMgYSByZXF1aXJlZCBwcm9wZXJ0eSBmb3IgYSBtaXhp
        bgoKICBAbWV0aG9kIHJlcXVpcmVkCiAgQGZvciBFbWJlcgoqLwpFbWJlci5y
        ZXF1aXJlZCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBSRVFVSVJFRDsKfTsK
        CkFsaWFzID0gZnVuY3Rpb24obWV0aG9kTmFtZSkgewogIHRoaXMubWV0aG9k
        TmFtZSA9IG1ldGhvZE5hbWU7Cn07CkFsaWFzLnByb3RvdHlwZSA9IG5ldyBF
        bWJlci5EZXNjcmlwdG9yKCk7CgovKioKICBNYWtlcyBhIHByb3BlcnR5IG9y
        IG1ldGhvZCBhdmFpbGFibGUgdmlhIGFuIGFkZGl0aW9uYWwgbmFtZS4KCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5QYWludFNhbXBsZSA9IEVtYmVyLk9iamVj
        dC5leHRlbmQoewogICAgY29sb3I6ICdyZWQnLAogICAgY29sb3VyOiBFbWJl
        ci5hbGlhcygnY29sb3InKSwKICAgIG5hbWU6IGZ1bmN0aW9uKCkgewogICAg
        ICByZXR1cm4gIlplZCI7CiAgICB9LAogICAgbW9uaWtlcjogRW1iZXIuYWxp
        YXMoIm5hbWUiKQogIH0pOwoKICB2YXIgcGFpbnRTYW1wbGUgPSBBcHAuUGFp
        bnRTYW1wbGUuY3JlYXRlKCkKICBwYWludFNhbXBsZS5nZXQoJ2NvbG91cicp
        OyAgLy8gJ3JlZCcKICBwYWludFNhbXBsZS5tb25pa2VyKCk7ICAgICAgLy8g
        J1plZCcKICBgYGAKCiAgQG1ldGhvZCBhbGlhcwogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge1N0cmluZ30gbWV0aG9kTmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qg
        b3IgcHJvcGVydHkgdG8gYWxpYXMKICBAcmV0dXJuIHtFbWJlci5EZXNjcmlw
        dG9yfQogIEBkZXByZWNhdGVkIFVzZSBgRW1iZXIuYWxpYXNNZXRob2RgIG9y
        IGBFbWJlci5jb21wdXRlZC5hbGlhc2AgaW5zdGVhZAoqLwpFbWJlci5hbGlh
        cyA9IGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHsKICBFbWJlci5kZXByZWNhdGUo
        IkVtYmVyLmFsaWFzIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRW1iZXIu
        YWxpYXNNZXRob2Qgb3IgRW1iZXIuY29tcHV0ZWQuYWxpYXMgaW5zdGVhZC4i
        KTsKICByZXR1cm4gbmV3IEFsaWFzKG1ldGhvZE5hbWUpOwp9OwoKLyoqCiAg
        TWFrZXMgYSBtZXRob2QgYXZhaWxhYmxlIHZpYSBhbiBhZGRpdGlvbmFsIG5h
        bWUuCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29uID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgICBuYW1lOiBmdW5jdGlvbigpIHsKICAgICAgcmV0
        dXJuICdUb21odWRhIEthdHpkYWxlJzsKICAgIH0sCiAgICBtb25pa2VyOiBF
        bWJlci5hbGlhc01ldGhvZCgnbmFtZScpCiAgfSk7CgogIHZhciBnb29kR3V5
        ID0gQXBwLlBlcnNvbi5jcmVhdGUoKQogIGBgYAoKICBAbWV0aG9kIGFsaWFz
        TWV0aG9kCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RO
        YW1lIG5hbWUgb2YgdGhlIG1ldGhvZCB0byBhbGlhcwogIEByZXR1cm4ge0Vt
        YmVyLkRlc2NyaXB0b3J9CiovCkVtYmVyLmFsaWFzTWV0aG9kID0gZnVuY3Rp
        b24obWV0aG9kTmFtZSkgewogIHJldHVybiBuZXcgQWxpYXMobWV0aG9kTmFt
        ZSk7Cn07CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIE9CU0VSVkVSIEhFTFBFUgov
        LwoKLyoqCiAgU3BlY2lmeSBhIG1ldGhvZCB0aGF0IG9ic2VydmVzIHByb3Bl
        cnR5IGNoYW5nZXMuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5PYmplY3Qu
        ZXh0ZW5kKHsKICAgIHZhbHVlT2JzZXJ2ZXI6IEVtYmVyLm9ic2VydmVyKCd2
        YWx1ZScsIGZ1bmN0aW9uKCkgewogICAgICAvLyBFeGVjdXRlcyB3aGVuZXZl
        ciB0aGUgInZhbHVlIiBwcm9wZXJ0eSBjaGFuZ2VzCiAgICB9KQogIH0pOwog
        IGBgYAoKICBJbiB0aGUgZnV0dXJlIHRoaXMgbWV0aG9kIG1heSBiZWNvbWUg
        YXN5bmNocm9ub3VzLiBJZiB5b3Ugd2FudCB0byBlbnN1cmUKICBzeW5jaHJv
        bm91cyBiZWhhdmlvciwgdXNlIGBpbW1lZGlhdGVPYnNlcnZlcmAuCgogIEFs
        c28gYXZhaWxhYmxlIGFzIGBGdW5jdGlvbi5wcm90b3R5cGUub2JzZXJ2ZXNg
        IGlmIHByb3RvdHlwZSBleHRlbnNpb25zIGFyZQogIGVuYWJsZWQuCgogIEBt
        ZXRob2Qgb2JzZXJ2ZXIKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9
        IHByb3BlcnR5TmFtZXMqCiAgQHBhcmFtIHtGdW5jdGlvbn0gZnVuYwogIEBy
        ZXR1cm4gZnVuYwoqLwpFbWJlci5vYnNlcnZlciA9IGZ1bmN0aW9uKCkgewog
        IHZhciBmdW5jICA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVswXTsK
        ICB2YXIgcGF0aHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwLCAtMSk7
        CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewogICAgLy8g
        cmV2ZXJ0IHRvIG9sZCwgc29mdC1kZXByZWNhdGVkIGFyZ3VtZW50IG9yZGVy
        aW5nCgogICAgZnVuYyAgPSBhcmd1bWVudHNbMF07CiAgICBwYXRocyA9IGFf
        c2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogIH0KCiAgaWYgKHR5cGVvZiBm
        dW5jICE9PSAiZnVuY3Rpb24iKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoIkVtYmVyLm9ic2VydmVyIGNhbGxlZCB3aXRob3V0IGEgZnVuY3Rpb24i
        KTsKICB9CgogIGZ1bmMuX19lbWJlcl9vYnNlcnZlc19fID0gcGF0aHM7CiAg
        cmV0dXJuIGZ1bmM7Cn07CgovKioKICBTcGVjaWZ5IGEgbWV0aG9kIHRoYXQg
        b2JzZXJ2ZXMgcHJvcGVydHkgY2hhbmdlcy4KCiAgYGBgamF2YXNjcmlwdAog
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgdmFsdWVPYnNlcnZlcjogRW1i
        ZXIuaW1tZWRpYXRlT2JzZXJ2ZXIoJ3ZhbHVlJywgZnVuY3Rpb24oKSB7CiAg
        ICAgIC8vIEV4ZWN1dGVzIHdoZW5ldmVyIHRoZSAidmFsdWUiIHByb3BlcnR5
        IGNoYW5nZXMKICAgIH0pCiAgfSk7CiAgYGBgCgogIEluIHRoZSBmdXR1cmUs
        IGBFbWJlci5vYnNlcnZlcmAgbWF5IGJlY29tZSBhc3luY2hyb25vdXMuIElu
        IHRoaXMgZXZlbnQsCiAgYEVtYmVyLmltbWVkaWF0ZU9ic2VydmVyYCB3aWxs
        IG1haW50YWluIHRoZSBzeW5jaHJvbm91cyBiZWhhdmlvci4KCiAgQWxzbyBh
        dmFpbGFibGUgYXMgYEZ1bmN0aW9uLnByb3RvdHlwZS5vYnNlcnZlc0ltbWVk
        aWF0ZWx5YCBpZiBwcm90b3R5cGUgZXh0ZW5zaW9ucyBhcmUKICBlbmFibGVk
        LgoKICBAbWV0aG9kIGltbWVkaWF0ZU9ic2VydmVyCiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eU5hbWVzKgogIEBwYXJhbSB7RnVu
        Y3Rpb259IGZ1bmMKICBAcmV0dXJuIGZ1bmMKKi8KRW1iZXIuaW1tZWRpYXRl
        T2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICBmb3IgKHZhciBpPTAsIGw9YXJn
        dW1lbnRzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgIHZhciBhcmcgPSBhcmd1
        bWVudHNbaV07CiAgICBFbWJlci5hc3NlcnQoIkltbWVkaWF0ZSBvYnNlcnZl
        cnMgbXVzdCBvYnNlcnZlIGludGVybmFsIHByb3BlcnRpZXMgb25seSwgbm90
        IHByb3BlcnRpZXMgb24gb3RoZXIgb2JqZWN0cy4iLCB0eXBlb2YgYXJnICE9
        PSAic3RyaW5nIiB8fCBhcmcuaW5kZXhPZignLicpID09PSAtMSk7CiAgfQoK
        ICByZXR1cm4gRW1iZXIub2JzZXJ2ZXIuYXBwbHkodGhpcywgYXJndW1lbnRz
        KTsKfTsKCi8qKgogIFdoZW4gb2JzZXJ2ZXJzIGZpcmUsIHRoZXkgYXJlIGNh
        bGxlZCB3aXRoIHRoZSBhcmd1bWVudHMgYG9iamAsIGBrZXlOYW1lYC4KCiAg
        Tm90ZSwgYEBlYWNoLnByb3BlcnR5YCBvYnNlcnZlciBpcyBjYWxsZWQgcGVy
        IGVhY2ggYWRkIG9yIHJlcGxhY2Ugb2YgYW4gZWxlbWVudAogIGFuZCBpdCdz
        IG5vdCBjYWxsZWQgd2l0aCBhIHNwZWNpZmljIGVudW1lcmF0aW9uIGl0ZW0u
        CgogIEEgYGJlZm9yZU9ic2VydmVyYCBmaXJlcyBiZWZvcmUgYSBwcm9wZXJ0
        eSBjaGFuZ2VzLgoKICBBIGBiZWZvcmVPYnNlcnZlcmAgaXMgYW4gYWx0ZXJu
        YXRpdmUgZm9ybSBvZiBgLm9ic2VydmVzQmVmb3JlKClgLgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLlBlcnNvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CgogICAgZnJpZW5kczogW3sgbmFtZTogJ1RvbScgfSwgeyBuYW1lOiAnU3Rl
        ZmFuJyB9LCB7IG5hbWU6ICdLcmlzJyB9XSwKCiAgICB2YWx1ZVdpbGxDaGFu
        Z2U6IEVtYmVyLmJlZm9yZU9ic2VydmVyKCdjb250ZW50LnZhbHVlJywgZnVu
        Y3Rpb24ob2JqLCBrZXlOYW1lKSB7CiAgICAgIHRoaXMuY2hhbmdpbmdGcm9t
        ID0gb2JqLmdldChrZXlOYW1lKTsKICAgIH0pLAoKICAgIHZhbHVlRGlkQ2hh
        bmdlOiBFbWJlci5vYnNlcnZlcignY29udGVudC52YWx1ZScsIGZ1bmN0aW9u
        KG9iaiwga2V5TmFtZSkgewogICAgICAgIC8vIG9ubHkgcnVuIGlmIHVwZGF0
        aW5nIGEgdmFsdWUgYWxyZWFkeSBpbiB0aGUgRE9NCiAgICAgICAgaWYgKHRo
        aXMuZ2V0KCdzdGF0ZScpID09PSAnaW5ET00nKSB7CiAgICAgICAgICB2YXIg
        Y29sb3IgPSBvYmouZ2V0KGtleU5hbWUpID4gdGhpcy5jaGFuZ2luZ0Zyb20g
        PyAnZ3JlZW4nIDogJ3JlZCc7CiAgICAgICAgICAvLyBsb2dpYwogICAgICAg
        IH0KICAgIH0pLAoKICAgIGZyaWVuZHNEaWRDaGFuZ2U6IEVtYmVyLm9ic2Vy
        dmVyKCdmcmllbmRzLkBlYWNoLm5hbWUnLCBmdW5jdGlvbihvYmosIGtleU5h
        bWUpIHsKICAgICAgLy8gc29tZSBsb2dpYwogICAgICAvLyBvYmouZ2V0KGtl
        eU5hbWUpIHJldHVybnMgZnJpZW5kcyBhcnJheQogICAgfSkKICB9KTsKICBg
        YGAKCiAgQWxzbyBhdmFpbGFibGUgYXMgYEZ1bmN0aW9uLnByb3RvdHlwZS5v
        YnNlcnZlc0JlZm9yZWAgaWYgcHJvdG90eXBlIGV4dGVuc2lvbnMgYXJlCiAg
        ZW5hYmxlZC4KCiAgQG1ldGhvZCBiZWZvcmVPYnNlcnZlcgogIEBmb3IgRW1i
        ZXIKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlOYW1lcyoKICBAcGFyYW0g
        e0Z1bmN0aW9ufSBmdW5jCiAgQHJldHVybiBmdW5jCiovCkVtYmVyLmJlZm9y
        ZU9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgdmFyIGZ1bmMgID0gYV9zbGlj
        ZS5jYWxsKGFyZ3VtZW50cywgLTEpWzBdOwogIHZhciBwYXRocyA9IGFfc2xp
        Y2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKTsKCiAgaWYgKHR5cGVvZiBmdW5j
        ICE9PSAiZnVuY3Rpb24iKSB7CiAgICAvLyByZXZlcnQgdG8gb2xkLCBzb2Z0
        LWRlcHJlY2F0ZWQgYXJndW1lbnQgb3JkZXJpbmcKCiAgICBmdW5jICA9IGFy
        Z3VtZW50c1swXTsKICAgIHBhdGhzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50
        cywgMSk7CiAgfQoKICBpZiAodHlwZW9mIGZ1bmMgIT09ICJmdW5jdGlvbiIp
        IHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiRW1iZXIuYmVmb3JlT2Jz
        ZXJ2ZXIgY2FsbGVkIHdpdGhvdXQgYSBmdW5jdGlvbiIpOwogIH0KCiAgZnVu
        Yy5fX2VtYmVyX29ic2VydmVzQmVmb3JlX18gPSBwYXRoczsKICByZXR1cm4g
        ZnVuYzsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLy8gUHJvdmlkZXMg
        YSB3YXkgdG8gcmVnaXN0ZXIgbGlicmFyeSB2ZXJzaW9ucyB3aXRoIGVtYmVy
        Lgp2YXIgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNo
        LAogICAgaW5kZXhPZiA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9m
        OwoKRW1iZXIubGlicmFyaWVzID0gZnVuY3Rpb24oKSB7CiAgdmFyIGxpYnJh
        cmllcyAgICA9IFtdOwogIHZhciBjb3JlTGliSW5kZXggPSAwOwoKICB2YXIg
        Z2V0TGlicmFyeSA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGZvciAodmFyIGkg
        PSAwOyBpIDwgbGlicmFyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChs
        aWJyYXJpZXNbaV0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgIHJldHVybiBs
        aWJyYXJpZXNbaV07CiAgICAgIH0KICAgIH0KICB9OwoKICBsaWJyYXJpZXMu
        cmVnaXN0ZXIgPSBmdW5jdGlvbihuYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAo
        IWdldExpYnJhcnkobmFtZSkpIHsKICAgICAgbGlicmFyaWVzLnB1c2goe25h
        bWU6IG5hbWUsIHZlcnNpb246IHZlcnNpb259KTsKICAgIH0KICB9OwoKICBs
        aWJyYXJpZXMucmVnaXN0ZXJDb3JlTGlicmFyeSA9IGZ1bmN0aW9uKG5hbWUs
        IHZlcnNpb24pIHsKICAgIGlmICghZ2V0TGlicmFyeShuYW1lKSkgewogICAg
        ICBsaWJyYXJpZXMuc3BsaWNlKGNvcmVMaWJJbmRleCsrLCAwLCB7bmFtZTog
        bmFtZSwgdmVyc2lvbjogdmVyc2lvbn0pOwogICAgfQogIH07CgogIGxpYnJh
        cmllcy5kZVJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSkgewogICAgdmFyIGxp
        YiA9IGdldExpYnJhcnkobmFtZSk7CiAgICBpZiAobGliKSBsaWJyYXJpZXMu
        c3BsaWNlKGluZGV4T2YobGlicmFyaWVzLCBsaWIpLCAxKTsKICB9OwoKICBs
        aWJyYXJpZXMuZWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgZm9y
        RWFjaChsaWJyYXJpZXMsIGZ1bmN0aW9uKGxpYikgewogICAgICBjYWxsYmFj
        ayhsaWIubmFtZSwgbGliLnZlcnNpb24pOwogICAgfSk7CiAgfTsKCiAgcmV0
        dXJuIGxpYnJhcmllczsKfSgpOwoKRW1iZXIubGlicmFyaWVzLnJlZ2lzdGVy
        Q29yZUxpYnJhcnkoJ0VtYmVyJywgRW1iZXIuVkVSU0lPTik7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJlciBNZXRhbAoKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLW1ldGFsCiovCgp9KSgpOwoKKGZ1bmN0aW9u
        KCkgewpkZWZpbmUoInJzdnAvYWxsIiwKICBbInJzdnAvcHJvbWlzZSIsImV4
        cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0
        c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9f
        ZGVwZW5kZW5jeTFfXy5Qcm9taXNlOwogICAgLyogZ2xvYmFsIHRvU3RyaW5n
        ICovCgoKICAgIGZ1bmN0aW9uIGFsbChwcm9taXNlcykgewogICAgICBpZiAo
        T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb21pc2VzKSAhPT0g
        IltvYmplY3QgQXJyYXldIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJy
        b3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gYWxsLicpOwogICAgICB9
        CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwg
        cmVqZWN0KSB7CiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXSwgcmVtYWluaW5n
        ID0gcHJvbWlzZXMubGVuZ3RoLAogICAgICAgIHByb21pc2U7CgogICAgICAg
        IGlmIChyZW1haW5pbmcgPT09IDApIHsKICAgICAgICAgIHJlc29sdmUoW10p
        OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZXIoaW5kZXgp
        IHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAg
        ICAgICByZXNvbHZlQWxsKGluZGV4LCB2YWx1ZSk7CiAgICAgICAgICB9Owog
        ICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUFsbChpbmRleCwg
        dmFsdWUpIHsKICAgICAgICAgIHJlc3VsdHNbaW5kZXhdID0gdmFsdWU7CiAg
        ICAgICAgICBpZiAoLS1yZW1haW5pbmcgPT09IDApIHsKICAgICAgICAgICAg
        cmVzb2x2ZShyZXN1bHRzKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAg
        ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKysp
        IHsKICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlc1tpXTsKCiAgICAgICAg
        ICBpZiAocHJvbWlzZSAmJiB0eXBlb2YgcHJvbWlzZS50aGVuID09PSAnZnVu
        Y3Rpb24nKSB7CiAgICAgICAgICAgIHByb21pc2UudGhlbihyZXNvbHZlcihp
        KSwgcmVqZWN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJl
        c29sdmVBbGwoaSwgcHJvbWlzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQog
        ICAgICB9KTsKICAgIH0KCgogICAgX19leHBvcnRzX18uYWxsID0gYWxsOwog
        IH0pOwpkZWZpbmUoInJzdnAvYXN5bmMiLAogIFsiZXhwb3J0cyJdLAogIGZ1
        bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2
        YXIgYnJvd3Nlckdsb2JhbCA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZp
        bmVkJykgPyB3aW5kb3cgOiB7fTsKICAgIHZhciBCcm93c2VyTXV0YXRpb25P
        YnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBi
        cm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgICB2YXIg
        YXN5bmM7CiAgICB2YXIgbG9jYWwgPSAodHlwZW9mIGdsb2JhbCAhPT0gJ3Vu
        ZGVmaW5lZCcpID8gZ2xvYmFsIDogdGhpczsKCiAgICAvLyBvbGQgbm9kZQog
        ICAgZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7CiAgICAgIHJldHVybiBmdW5j
        dGlvbihjYWxsYmFjaywgYXJnKSB7CiAgICAgICAgcHJvY2Vzcy5uZXh0VGlj
        ayhmdW5jdGlvbigpIHsKICAgICAgICAgIGNhbGxiYWNrKGFyZyk7CiAgICAg
        ICAgfSk7CiAgICAgIH07CiAgICB9CgogICAgLy8gbm9kZSA+PSAwLjEwLngK
        ICAgIGZ1bmN0aW9uIHVzZVNldEltbWVkaWF0ZSgpIHsKICAgICAgcmV0dXJu
        IGZ1bmN0aW9uKGNhbGxiYWNrLCBhcmcpIHsKICAgICAgICAvKiBnbG9iYWwg
        IHNldEltbWVkaWF0ZSAqLwogICAgICAgIHNldEltbWVkaWF0ZShmdW5jdGlv
        bigpewogICAgICAgICAgY2FsbGJhY2soYXJnKTsKICAgICAgICB9KTsKICAg
        ICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVy
        KCkgewogICAgICB2YXIgcXVldWUgPSBbXTsKCiAgICAgIHZhciBvYnNlcnZl
        ciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpIHsK
        ICAgICAgICB2YXIgdG9Qcm9jZXNzID0gcXVldWUuc2xpY2UoKTsKICAgICAg
        ICBxdWV1ZSA9IFtdOwoKICAgICAgICB0b1Byb2Nlc3MuZm9yRWFjaChmdW5j
        dGlvbih0dXBsZSkgewogICAgICAgICAgdmFyIGNhbGxiYWNrID0gdHVwbGVb
        MF0sIGFyZz0gdHVwbGVbMV07CiAgICAgICAgICBjYWxsYmFjayhhcmcpOwog
        ICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIHZhciBlbGVtZW50ID0gZG9j
        dW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIG9ic2VydmVyLm9i
        c2VydmUoZWxlbWVudCwgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pOwoKICAgICAg
        Ly8gQ2hyb21lIE1lbW9yeSBMZWFrOiBodHRwczovL2J1Z3Mud2Via2l0Lm9y
        Zy9zaG93X2J1Zy5jZ2k/aWQ9OTM2NjEKICAgICAgd2luZG93LmFkZEV2ZW50
        TGlzdGVuZXIoJ3VubG9hZCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgb2JzZXJ2
        ZXIuZGlzY29ubmVjdCgpOwogICAgICAgIG9ic2VydmVyID0gbnVsbDsKICAg
        ICAgfSwgZmFsc2UpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNr
        LCBhcmcpIHsKICAgICAgICBxdWV1ZS5wdXNoKFtjYWxsYmFjaywgYXJnXSk7
        CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RyYWluUXVldWUnLCAn
        ZHJhaW5RdWV1ZScpOwogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIHVz
        ZVNldFRpbWVvdXQoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFj
        aywgYXJnKSB7CiAgICAgICAgbG9jYWwuc2V0VGltZW91dChmdW5jdGlvbigp
        IHsKICAgICAgICAgIGNhbGxiYWNrKGFyZyk7CiAgICAgICAgfSwgMSk7CiAg
        ICAgIH07CiAgICB9CgogICAgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09
        ICdmdW5jdGlvbicpIHsKICAgICAgYXN5bmMgPSB1c2VTZXRJbW1lZGlhdGUo
        KTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmlu
        ZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0
        IHByb2Nlc3NdJykgewogICAgICBhc3luYyA9IHVzZU5leHRUaWNrKCk7CiAg
        ICB9IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7CiAgICAg
        IGFzeW5jID0gdXNlTXV0YXRpb25PYnNlcnZlcigpOwogICAgfSBlbHNlIHsK
        ICAgICAgYXN5bmMgPSB1c2VTZXRUaW1lb3V0KCk7CiAgICB9CgoKICAgIF9f
        ZXhwb3J0c19fLmFzeW5jID0gYXN5bmM7CiAgfSk7CmRlZmluZSgicnN2cC9j
        b25maWciLAogIFsicnN2cC9hc3luYyIsImV4cG9ydHMiXSwKICBmdW5jdGlv
        bihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0
        cmljdCI7CiAgICB2YXIgYXN5bmMgPSBfX2RlcGVuZGVuY3kxX18uYXN5bmM7
        CgogICAgdmFyIGNvbmZpZyA9IHt9OwogICAgY29uZmlnLmFzeW5jID0gYXN5
        bmM7CgoKICAgIF9fZXhwb3J0c19fLmNvbmZpZyA9IGNvbmZpZzsKICB9KTsK
        ZGVmaW5lKCJyc3ZwL2RlZmVyIiwKICBbInJzdnAvcHJvbWlzZSIsImV4cG9y
        dHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19f
        KSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVw
        ZW5kZW5jeTFfXy5Qcm9taXNlOwoKICAgIGZ1bmN0aW9uIGRlZmVyKCkgewog
        ICAgICB2YXIgZGVmZXJyZWQgPSB7CiAgICAgICAgLy8gcHJlLWFsbG9jYXRl
        IHNoYXBlCiAgICAgICAgcmVzb2x2ZTogdW5kZWZpbmVkLAogICAgICAgIHJl
        amVjdDogIHVuZGVmaW5lZCwKICAgICAgICBwcm9taXNlOiB1bmRlZmluZWQK
        ICAgICAgfTsKCiAgICAgIGRlZmVycmVkLnByb21pc2UgPSBuZXcgUHJvbWlz
        ZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBkZWZlcnJl
        ZC5yZXNvbHZlID0gcmVzb2x2ZTsKICAgICAgICBkZWZlcnJlZC5yZWplY3Qg
        PSByZWplY3Q7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGRlZmVycmVkOwog
        ICAgfQoKCiAgICBfX2V4cG9ydHNfXy5kZWZlciA9IGRlZmVyOwogIH0pOwpk
        ZWZpbmUoInJzdnAvZXZlbnRzIiwKICBbImV4cG9ydHMiXSwKICBmdW5jdGlv
        bihfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIEV2
        ZW50ID0gZnVuY3Rpb24odHlwZSwgb3B0aW9ucykgewogICAgICB0aGlzLnR5
        cGUgPSB0eXBlOwoKICAgICAgZm9yICh2YXIgb3B0aW9uIGluIG9wdGlvbnMp
        IHsKICAgICAgICBpZiAoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9u
        KSkgeyBjb250aW51ZTsgfQoKICAgICAgICB0aGlzW29wdGlvbl0gPSBvcHRp
        b25zW29wdGlvbl07CiAgICAgIH0KICAgIH07CgogICAgdmFyIGluZGV4T2Yg
        PSBmdW5jdGlvbihjYWxsYmFja3MsIGNhbGxiYWNrKSB7CiAgICAgIGZvciAo
        dmFyIGk9MCwgbD1jYWxsYmFja3MubGVuZ3RoOyBpPGw7IGkrKykgewogICAg
        ICAgIGlmIChjYWxsYmFja3NbaV1bMF0gPT09IGNhbGxiYWNrKSB7IHJldHVy
        biBpOyB9CiAgICAgIH0KCiAgICAgIHJldHVybiAtMTsKICAgIH07CgogICAg
        dmFyIGNhbGxiYWNrc0ZvciA9IGZ1bmN0aW9uKG9iamVjdCkgewogICAgICB2
        YXIgY2FsbGJhY2tzID0gb2JqZWN0Ll9wcm9taXNlQ2FsbGJhY2tzOwoKICAg
        ICAgaWYgKCFjYWxsYmFja3MpIHsKICAgICAgICBjYWxsYmFja3MgPSBvYmpl
        Y3QuX3Byb21pc2VDYWxsYmFja3MgPSB7fTsKICAgICAgfQoKICAgICAgcmV0
        dXJuIGNhbGxiYWNrczsKICAgIH07CgogICAgdmFyIEV2ZW50VGFyZ2V0ID0g
        ewogICAgICBtaXhpbjogZnVuY3Rpb24ob2JqZWN0KSB7CiAgICAgICAgb2Jq
        ZWN0Lm9uID0gdGhpcy5vbjsKICAgICAgICBvYmplY3Qub2ZmID0gdGhpcy5v
        ZmY7CiAgICAgICAgb2JqZWN0LnRyaWdnZXIgPSB0aGlzLnRyaWdnZXI7CiAg
        ICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgfSwKCiAgICAgIG9uOiBmdW5j
        dGlvbihldmVudE5hbWVzLCBjYWxsYmFjaywgYmluZGluZykgewogICAgICAg
        IHZhciBhbGxDYWxsYmFja3MgPSBjYWxsYmFja3NGb3IodGhpcyksIGNhbGxi
        YWNrcywgZXZlbnROYW1lOwogICAgICAgIGV2ZW50TmFtZXMgPSBldmVudE5h
        bWVzLnNwbGl0KC9ccysvKTsKICAgICAgICBiaW5kaW5nID0gYmluZGluZyB8
        fCB0aGlzOwoKICAgICAgICB3aGlsZSAoZXZlbnROYW1lID0gZXZlbnROYW1l
        cy5zaGlmdCgpKSB7CiAgICAgICAgICBjYWxsYmFja3MgPSBhbGxDYWxsYmFj
        a3NbZXZlbnROYW1lXTsKCiAgICAgICAgICBpZiAoIWNhbGxiYWNrcykgewog
        ICAgICAgICAgICBjYWxsYmFja3MgPSBhbGxDYWxsYmFja3NbZXZlbnROYW1l
        XSA9IFtdOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpbmRleE9mKGNh
        bGxiYWNrcywgY2FsbGJhY2spID09PSAtMSkgewogICAgICAgICAgICBjYWxs
        YmFja3MucHVzaChbY2FsbGJhY2ssIGJpbmRpbmddKTsKICAgICAgICAgIH0K
        ICAgICAgICB9CiAgICAgIH0sCgogICAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50
        TmFtZXMsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGFsbENhbGxiYWNrcyA9
        IGNhbGxiYWNrc0Zvcih0aGlzKSwgY2FsbGJhY2tzLCBldmVudE5hbWUsIGlu
        ZGV4OwogICAgICAgIGV2ZW50TmFtZXMgPSBldmVudE5hbWVzLnNwbGl0KC9c
        cysvKTsKCiAgICAgICAgd2hpbGUgKGV2ZW50TmFtZSA9IGV2ZW50TmFtZXMu
        c2hpZnQoKSkgewogICAgICAgICAgaWYgKCFjYWxsYmFjaykgewogICAgICAg
        ICAgICBhbGxDYWxsYmFja3NbZXZlbnROYW1lXSA9IFtdOwogICAgICAgICAg
        ICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjYWxsYmFja3Mg
        PSBhbGxDYWxsYmFja3NbZXZlbnROYW1lXTsKCiAgICAgICAgICBpbmRleCA9
        IGluZGV4T2YoY2FsbGJhY2tzLCBjYWxsYmFjayk7CgogICAgICAgICAgaWYg
        KGluZGV4ICE9PSAtMSkgeyBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTsg
        fQogICAgICAgIH0KICAgICAgfSwKCiAgICAgIHRyaWdnZXI6IGZ1bmN0aW9u
        KGV2ZW50TmFtZSwgb3B0aW9ucykgewogICAgICAgIHZhciBhbGxDYWxsYmFj
        a3MgPSBjYWxsYmFja3NGb3IodGhpcyksCiAgICAgICAgICAgIGNhbGxiYWNr
        cywgY2FsbGJhY2tUdXBsZSwgY2FsbGJhY2ssIGJpbmRpbmcsIGV2ZW50OwoK
        ICAgICAgICBpZiAoY2FsbGJhY2tzID0gYWxsQ2FsbGJhY2tzW2V2ZW50TmFt
        ZV0pIHsKICAgICAgICAgIC8vIERvbid0IGNhY2hlIHRoZSBjYWxsYmFja3Mu
        bGVuZ3RoIHNpbmNlIGl0IG1heSBncm93CiAgICAgICAgICBmb3IgKHZhciBp
        PTA7IGk8Y2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNh
        bGxiYWNrVHVwbGUgPSBjYWxsYmFja3NbaV07CiAgICAgICAgICAgIGNhbGxi
        YWNrID0gY2FsbGJhY2tUdXBsZVswXTsKICAgICAgICAgICAgYmluZGluZyA9
        IGNhbGxiYWNrVHVwbGVbMV07CgogICAgICAgICAgICBpZiAodHlwZW9mIG9w
        dGlvbnMgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgb3B0aW9ucyA9
        IHsgZGV0YWlsOiBvcHRpb25zIH07CiAgICAgICAgICAgIH0KCiAgICAgICAg
        ICAgIGV2ZW50ID0gbmV3IEV2ZW50KGV2ZW50TmFtZSwgb3B0aW9ucyk7CiAg
        ICAgICAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywgZXZlbnQpOwogICAg
        ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCgogICAgX19leHBv
        cnRzX18uRXZlbnRUYXJnZXQgPSBFdmVudFRhcmdldDsKICB9KTsKZGVmaW5l
        KCJyc3ZwL2hhc2giLAogIFsicnN2cC9kZWZlciIsImV4cG9ydHMiXSwKICBm
        dW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAi
        dXNlIHN0cmljdCI7CiAgICB2YXIgZGVmZXIgPSBfX2RlcGVuZGVuY3kxX18u
        ZGVmZXI7CgogICAgZnVuY3Rpb24gc2l6ZShvYmplY3QpIHsKICAgICAgdmFy
        IHMgPSAwOwoKICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmplY3QpIHsKICAg
        ICAgICBzKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBzOwogICAgfQoKICAg
        IGZ1bmN0aW9uIGhhc2gocHJvbWlzZXMpIHsKICAgICAgdmFyIHJlc3VsdHMg
        PSB7fSwgZGVmZXJyZWQgPSBkZWZlcigpLCByZW1haW5pbmcgPSBzaXplKHBy
        b21pc2VzKTsKCiAgICAgIGlmIChyZW1haW5pbmcgPT09IDApIHsKICAgICAg
        ICBkZWZlcnJlZC5yZXNvbHZlKHt9KTsKICAgICAgfQoKICAgICAgdmFyIHJl
        c29sdmVyID0gZnVuY3Rpb24ocHJvcCkgewogICAgICAgIHJldHVybiBmdW5j
        dGlvbih2YWx1ZSkgewogICAgICAgICAgcmVzb2x2ZUFsbChwcm9wLCB2YWx1
        ZSk7CiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIHZhciByZXNvbHZlQWxs
        ID0gZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHsKICAgICAgICByZXN1bHRzW3By
        b3BdID0gdmFsdWU7CiAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7
        CiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpOwogICAgICAg
        IH0KICAgICAgfTsKCiAgICAgIHZhciByZWplY3RBbGwgPSBmdW5jdGlvbihl
        cnJvcikgewogICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7CiAgICAg
        IH07CgogICAgICBmb3IgKHZhciBwcm9wIGluIHByb21pc2VzKSB7CiAgICAg
        ICAgaWYgKHByb21pc2VzW3Byb3BdICYmIHR5cGVvZiBwcm9taXNlc1twcm9w
        XS50aGVuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBwcm9taXNlc1tw
        cm9wXS50aGVuKHJlc29sdmVyKHByb3ApLCByZWplY3RBbGwpOwogICAgICAg
        IH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlQWxsKHByb3AsIHByb21pc2Vz
        W3Byb3BdKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBkZWZl
        cnJlZC5wcm9taXNlOwogICAgfQoKCiAgICBfX2V4cG9ydHNfXy5oYXNoID0g
        aGFzaDsKICB9KTsKZGVmaW5lKCJyc3ZwL25vZGUiLAogIFsicnN2cC9wcm9t
        aXNlIiwicnN2cC9hbGwiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBl
        bmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9fZXhwb3J0c19fKSB7CiAg
        ICAidXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5j
        eTFfXy5Qcm9taXNlOwogICAgdmFyIGFsbCA9IF9fZGVwZW5kZW5jeTJfXy5h
        bGw7CgogICAgZnVuY3Rpb24gbWFrZU5vZGVDYWxsYmFja0ZvcihyZXNvbHZl
        LCByZWplY3QpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgdmFs
        dWUpIHsKICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChl
        cnJvcik7CiAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4g
        MikgewogICAgICAgICAgcmVzb2x2ZShBcnJheS5wcm90b3R5cGUuc2xpY2Uu
        Y2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9OwogICAgfQoK
        ICAgIGZ1bmN0aW9uIGRlbm9kZWlmeShub2RlRnVuYykgewogICAgICByZXR1
        cm4gZnVuY3Rpb24oKSAgewogICAgICAgIHZhciBub2RlQXJncyA9IEFycmF5
        LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksIHJlc29sdmUsIHJl
        amVjdDsKICAgICAgICB2YXIgdGhpc0FyZyA9IHRoaXM7CgogICAgICAgIHZh
        ciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24obm9kZVJlc29sdmUs
        IG5vZGVSZWplY3QpIHsKICAgICAgICAgIHJlc29sdmUgPSBub2RlUmVzb2x2
        ZTsKICAgICAgICAgIHJlamVjdCA9IG5vZGVSZWplY3Q7CiAgICAgICAgfSk7
        CgogICAgICAgIGFsbChub2RlQXJncykudGhlbihmdW5jdGlvbihub2RlQXJn
        cykgewogICAgICAgICAgbm9kZUFyZ3MucHVzaChtYWtlTm9kZUNhbGxiYWNr
        Rm9yKHJlc29sdmUsIHJlamVjdCkpOwoKICAgICAgICAgIHRyeSB7CiAgICAg
        ICAgICAgIG5vZGVGdW5jLmFwcGx5KHRoaXNBcmcsIG5vZGVBcmdzKTsKICAg
        ICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICByZWplY3QoZSk7CiAg
        ICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBwcm9taXNl
        OwogICAgICB9OwogICAgfQoKCiAgICBfX2V4cG9ydHNfXy5kZW5vZGVpZnkg
        PSBkZW5vZGVpZnk7CiAgfSk7CmRlZmluZSgicnN2cC9wcm9taXNlIiwKICBb
        InJzdnAvY29uZmlnIiwicnN2cC9ldmVudHMiLCJleHBvcnRzIl0sCiAgZnVu
        Y3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9fZXhw
        b3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgY29uZmlnID0g
        X19kZXBlbmRlbmN5MV9fLmNvbmZpZzsKICAgIHZhciBFdmVudFRhcmdldCA9
        IF9fZGVwZW5kZW5jeTJfXy5FdmVudFRhcmdldDsKCiAgICBmdW5jdGlvbiBv
        YmplY3RPckZ1bmN0aW9uKHgpIHsKICAgICAgcmV0dXJuIGlzRnVuY3Rpb24o
        eCkgfHwgKHR5cGVvZiB4ID09PSAib2JqZWN0IiAmJiB4ICE9PSBudWxsKTsK
        ICAgIH0KCiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpewogICAgICByZXR1
        cm4gdHlwZW9mIHggPT09ICJmdW5jdGlvbiI7CiAgICB9CgogICAgdmFyIFBy
        b21pc2UgPSBmdW5jdGlvbihyZXNvbHZlcikgewogICAgICB2YXIgcHJvbWlz
        ZSA9IHRoaXMsCiAgICAgIHJlc29sdmVkID0gZmFsc2U7CgogICAgICBpZiAo
        dHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhy
        b3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1
        bmN0aW9uIGFzIHRoZSBzb2xlIGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNv
        bnN0cnVjdG9yJyk7CiAgICAgIH0KCiAgICAgIGlmICghKHByb21pc2UgaW5z
        dGFuY2VvZiBQcm9taXNlKSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlz
        ZShyZXNvbHZlcik7CiAgICAgIH0KCiAgICAgIHZhciByZXNvbHZlUHJvbWlz
        ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgaWYgKHJlc29sdmVkKSB7
        IHJldHVybjsgfQogICAgICAgIHJlc29sdmVkID0gdHJ1ZTsKICAgICAgICBy
        ZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgICAgfTsKCiAgICAgIHZhciBy
        ZWplY3RQcm9taXNlID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBpZiAo
        cmVzb2x2ZWQpIHsgcmV0dXJuOyB9CiAgICAgICAgcmVzb2x2ZWQgPSB0cnVl
        OwogICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH07Cgog
        ICAgICB0aGlzLm9uKCdwcm9taXNlOnJlc29sdmVkJywgZnVuY3Rpb24oZXZl
        bnQpIHsKICAgICAgICB0aGlzLnRyaWdnZXIoJ3N1Y2Nlc3MnLCB7IGRldGFp
        bDogZXZlbnQuZGV0YWlsIH0pOwogICAgICB9LCB0aGlzKTsKCiAgICAgIHRo
        aXMub24oJ3Byb21pc2U6ZmFpbGVkJywgZnVuY3Rpb24oZXZlbnQpIHsKICAg
        ICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJywgeyBkZXRhaWw6IGV2ZW50LmRl
        dGFpbCB9KTsKICAgICAgfSwgdGhpcyk7CgogICAgICB0aGlzLm9uKCdlcnJv
        cicsIG9uZXJyb3IpOwoKICAgICAgdHJ5IHsKICAgICAgICByZXNvbHZlcihy
        ZXNvbHZlUHJvbWlzZSwgcmVqZWN0UHJvbWlzZSk7CiAgICAgIH0gY2F0Y2go
        ZSkgewogICAgICAgIHJlamVjdFByb21pc2UoZSk7CiAgICAgIH0KICAgIH07
        CgogICAgZnVuY3Rpb24gb25lcnJvcihldmVudCkgewogICAgICBpZiAoY29u
        ZmlnLm9uZXJyb3IpIHsKICAgICAgICBjb25maWcub25lcnJvcihldmVudC5k
        ZXRhaWwpOwogICAgICB9CiAgICB9CgogICAgdmFyIGludm9rZUNhbGxiYWNr
        ID0gZnVuY3Rpb24odHlwZSwgcHJvbWlzZSwgY2FsbGJhY2ssIGV2ZW50KSB7
        CiAgICAgIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2sp
        LAogICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDsK
        CiAgICAgIGlmIChoYXNDYWxsYmFjaykgewogICAgICAgIHRyeSB7CiAgICAg
        ICAgICB2YWx1ZSA9IGNhbGxiYWNrKGV2ZW50LmRldGFpbCk7CiAgICAgICAg
        ICBzdWNjZWVkZWQgPSB0cnVlOwogICAgICAgIH0gY2F0Y2goZSkgewogICAg
        ICAgICAgZmFpbGVkID0gdHJ1ZTsKICAgICAgICAgIGVycm9yID0gZTsKICAg
        ICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUgPSBldmVudC5k
        ZXRhaWw7CiAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTsKICAgICAgfQoKICAg
        ICAgaWYgKGhhbmRsZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlKSkgewogICAg
        ICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBz
        dWNjZWVkZWQpIHsKICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTsK
        ICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHsKICAgICAgICByZWplY3QocHJv
        bWlzZSwgZXJyb3IpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZXNv
        bHZlJykgewogICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAg
        ICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZWplY3QnKSB7CiAgICAgICAgcmVq
        ZWN0KHByb21pc2UsIHZhbHVlKTsKICAgICAgfQogICAgfTsKCiAgICBQcm9t
        aXNlLnByb3RvdHlwZSA9IHsKICAgICAgY29uc3RydWN0b3I6IFByb21pc2Us
        CgogICAgICBpc1JlamVjdGVkOiB1bmRlZmluZWQsCiAgICAgIGlzRnVsZmls
        bGVkOiB1bmRlZmluZWQsCiAgICAgIHJlamVjdGVkUmVhc29uOiB1bmRlZmlu
        ZWQsCiAgICAgIGZ1bGZpbGxtZW50VmFsdWU6IHVuZGVmaW5lZCwKCiAgICAg
        IHRoZW46IGZ1bmN0aW9uKGRvbmUsIGZhaWwpIHsKICAgICAgICB0aGlzLm9m
        ZignZXJyb3InLCBvbmVycm9yKTsKCiAgICAgICAgdmFyIHRoZW5Qcm9taXNl
        ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZnVuY3Rpb24oKSB7fSk7CgogICAg
        ICAgIGlmICh0aGlzLmlzRnVsZmlsbGVkKSB7CiAgICAgICAgICBjb25maWcu
        YXN5bmMoZnVuY3Rpb24ocHJvbWlzZSkgewogICAgICAgICAgICBpbnZva2VD
        YWxsYmFjaygncmVzb2x2ZScsIHRoZW5Qcm9taXNlLCBkb25lLCB7IGRldGFp
        bDogcHJvbWlzZS5mdWxmaWxsbWVudFZhbHVlIH0pOwogICAgICAgICAgfSwg
        dGhpcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5pc1JlamVjdGVk
        KSB7CiAgICAgICAgICBjb25maWcuYXN5bmMoZnVuY3Rpb24ocHJvbWlzZSkg
        ewogICAgICAgICAgICBpbnZva2VDYWxsYmFjaygncmVqZWN0JywgdGhlblBy
        b21pc2UsIGZhaWwsIHsgZGV0YWlsOiBwcm9taXNlLnJlamVjdGVkUmVhc29u
        IH0pOwogICAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgfQoKICAgICAgICB0
        aGlzLm9uKCdwcm9taXNlOnJlc29sdmVkJywgZnVuY3Rpb24oZXZlbnQpIHsK
        ICAgICAgICAgIGludm9rZUNhbGxiYWNrKCdyZXNvbHZlJywgdGhlblByb21p
        c2UsIGRvbmUsIGV2ZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5v
        bigncHJvbWlzZTpmYWlsZWQnLCBmdW5jdGlvbihldmVudCkgewogICAgICAg
        ICAgaW52b2tlQ2FsbGJhY2soJ3JlamVjdCcsIHRoZW5Qcm9taXNlLCBmYWls
        LCBldmVudCk7CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiB0aGVuUHJv
        bWlzZTsKICAgICAgfSwKCiAgICAgIGZhaWw6IGZ1bmN0aW9uKGZhaWwpIHsK
        ICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIGZhaWwpOwogICAgICB9
        CiAgICB9OwoKICAgIEV2ZW50VGFyZ2V0Lm1peGluKFByb21pc2UucHJvdG90
        eXBlKTsKCiAgICBmdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7
        CiAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkgewogICAgICAgIGZ1bGZp
        bGwocHJvbWlzZSwgdmFsdWUpOwogICAgICB9IGVsc2UgaWYgKCFoYW5kbGVU
        aGVuYWJsZShwcm9taXNlLCB2YWx1ZSkpIHsKICAgICAgICBmdWxmaWxsKHBy
        b21pc2UsIHZhbHVlKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGhh
        bmRsZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlKSB7CiAgICAgIHZhciB0aGVu
        ID0gbnVsbCwKICAgICAgcmVzb2x2ZWQ7CgogICAgICB0cnkgewogICAgICAg
        IGlmIChwcm9taXNlID09PSB2YWx1ZSkgewogICAgICAgICAgdGhyb3cgbmV3
        IFR5cGVFcnJvcigiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJu
        IHRoYXQgc2FtZSBwcm9taXNlLiIpOwogICAgICAgIH0KCiAgICAgICAgaWYg
        KG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7CiAgICAgICAgICB0aGVuID0g
        dmFsdWUudGhlbjsKCiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGVuKSkg
        ewogICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uKHZhbCkg
        ewogICAgICAgICAgICAgIGlmIChyZXNvbHZlZCkgeyByZXR1cm4gdHJ1ZTsg
        fQogICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTsKCiAgICAgICAgICAg
        ICAgaWYgKHZhbHVlICE9PSB2YWwpIHsKICAgICAgICAgICAgICAgIHJlc29s
        dmUocHJvbWlzZSwgdmFsKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAg
        ICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWwpOwogICAgICAgICAg
        ICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24odmFsKSB7CiAgICAgICAg
        ICAgICAgaWYgKHJlc29sdmVkKSB7IHJldHVybiB0cnVlOyB9CiAgICAgICAg
        ICAgICAgcmVzb2x2ZWQgPSB0cnVlOwoKICAgICAgICAgICAgICByZWplY3Qo
        cHJvbWlzZSwgdmFsKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBy
        ZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0
        Y2ggKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTsK
        ICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZh
        bHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFs
        dWUpIHsKICAgICAgY29uZmlnLmFzeW5jKGZ1bmN0aW9uKCkgewogICAgICAg
        IHByb21pc2UudHJpZ2dlcigncHJvbWlzZTpyZXNvbHZlZCcsIHsgZGV0YWls
        OiB2YWx1ZSB9KTsKICAgICAgICBwcm9taXNlLmlzRnVsZmlsbGVkID0gdHJ1
        ZTsKICAgICAgICBwcm9taXNlLmZ1bGZpbGxtZW50VmFsdWUgPSB2YWx1ZTsK
        ICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVqZWN0KHByb21pc2Us
        IHZhbHVlKSB7CiAgICAgIGNvbmZpZy5hc3luYyhmdW5jdGlvbigpIHsKICAg
        ICAgICBwcm9taXNlLnRyaWdnZXIoJ3Byb21pc2U6ZmFpbGVkJywgeyBkZXRh
        aWw6IHZhbHVlIH0pOwogICAgICAgIHByb21pc2UuaXNSZWplY3RlZCA9IHRy
        dWU7CiAgICAgICAgcHJvbWlzZS5yZWplY3RlZFJlYXNvbiA9IHZhbHVlOwog
        ICAgICB9KTsKICAgIH0KCgogICAgX19leHBvcnRzX18uUHJvbWlzZSA9IFBy
        b21pc2U7CiAgfSk7CmRlZmluZSgicnN2cC9yZWplY3QiLAogIFsicnN2cC9w
        cm9taXNlIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFf
        XywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQ
        cm9taXNlID0gX19kZXBlbmRlbmN5MV9fLlByb21pc2U7CgogICAgZnVuY3Rp
        b24gcmVqZWN0KHJlYXNvbikgewogICAgICByZXR1cm4gbmV3IFByb21pc2Uo
        ZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHJlamVjdChy
        ZWFzb24pOwogICAgICB9KTsKICAgIH0KCgogICAgX19leHBvcnRzX18ucmVq
        ZWN0ID0gcmVqZWN0OwogIH0pOwpkZWZpbmUoInJzdnAvcmVzb2x2ZSIsCiAg
        WyJyc3ZwL3Byb21pc2UiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBl
        bmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwog
        ICAgdmFyIFByb21pc2UgPSBfX2RlcGVuZGVuY3kxX18uUHJvbWlzZTsKCiAg
        ICBmdW5jdGlvbiByZXNvbHZlKHRoZW5hYmxlKSB7CiAgICAgIHJldHVybiBu
        ZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAg
        ICByZXNvbHZlKHRoZW5hYmxlKTsKICAgICAgfSk7CiAgICB9CgoKICAgIF9f
        ZXhwb3J0c19fLnJlc29sdmUgPSByZXNvbHZlOwogIH0pOwpkZWZpbmUoInJz
        dnAvcmV0aHJvdyIsCiAgWyJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19leHBv
        cnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBsb2NhbCA9ICh0
        eXBlb2YgZ2xvYmFsID09PSAidW5kZWZpbmVkIikgPyB0aGlzIDogZ2xvYmFs
        OwoKICAgIGZ1bmN0aW9uIHJldGhyb3cocmVhc29uKSB7CiAgICAgIGxvY2Fs
        LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdGhyb3cgcmVhc29u
        OwogICAgICB9KTsKICAgICAgdGhyb3cgcmVhc29uOwogICAgfQoKCiAgICBf
        X2V4cG9ydHNfXy5yZXRocm93ID0gcmV0aHJvdzsKICB9KTsKZGVmaW5lKCJy
        c3ZwIiwKICBbInJzdnAvZXZlbnRzIiwicnN2cC9wcm9taXNlIiwicnN2cC9u
        b2RlIiwicnN2cC9hbGwiLCJyc3ZwL2hhc2giLCJyc3ZwL3JldGhyb3ciLCJy
        c3ZwL2RlZmVyIiwicnN2cC9jb25maWciLCJyc3ZwL3Jlc29sdmUiLCJyc3Zw
        L3JlamVjdCIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kx
        X18sIF9fZGVwZW5kZW5jeTJfXywgX19kZXBlbmRlbmN5M19fLCBfX2RlcGVu
        ZGVuY3k0X18sIF9fZGVwZW5kZW5jeTVfXywgX19kZXBlbmRlbmN5Nl9fLCBf
        X2RlcGVuZGVuY3k3X18sIF9fZGVwZW5kZW5jeThfXywgX19kZXBlbmRlbmN5
        OV9fLCBfX2RlcGVuZGVuY3kxMF9fLCBfX2V4cG9ydHNfXykgewogICAgInVz
        ZSBzdHJpY3QiOwogICAgdmFyIEV2ZW50VGFyZ2V0ID0gX19kZXBlbmRlbmN5
        MV9fLkV2ZW50VGFyZ2V0OwogICAgdmFyIFByb21pc2UgPSBfX2RlcGVuZGVu
        Y3kyX18uUHJvbWlzZTsKICAgIHZhciBkZW5vZGVpZnkgPSBfX2RlcGVuZGVu
        Y3kzX18uZGVub2RlaWZ5OwogICAgdmFyIGFsbCA9IF9fZGVwZW5kZW5jeTRf
        Xy5hbGw7CiAgICB2YXIgaGFzaCA9IF9fZGVwZW5kZW5jeTVfXy5oYXNoOwog
        ICAgdmFyIHJldGhyb3cgPSBfX2RlcGVuZGVuY3k2X18ucmV0aHJvdzsKICAg
        IHZhciBkZWZlciA9IF9fZGVwZW5kZW5jeTdfXy5kZWZlcjsKICAgIHZhciBj
        b25maWcgPSBfX2RlcGVuZGVuY3k4X18uY29uZmlnOwogICAgdmFyIHJlc29s
        dmUgPSBfX2RlcGVuZGVuY3k5X18ucmVzb2x2ZTsKICAgIHZhciByZWplY3Qg
        PSBfX2RlcGVuZGVuY3kxMF9fLnJlamVjdDsKCiAgICBmdW5jdGlvbiBjb25m
        aWd1cmUobmFtZSwgdmFsdWUpIHsKICAgICAgY29uZmlnW25hbWVdID0gdmFs
        dWU7CiAgICB9CgoKICAgIF9fZXhwb3J0c19fLlByb21pc2UgPSBQcm9taXNl
        OwogICAgX19leHBvcnRzX18uRXZlbnRUYXJnZXQgPSBFdmVudFRhcmdldDsK
        ICAgIF9fZXhwb3J0c19fLmFsbCA9IGFsbDsKICAgIF9fZXhwb3J0c19fLmhh
        c2ggPSBoYXNoOwogICAgX19leHBvcnRzX18ucmV0aHJvdyA9IHJldGhyb3c7
        CiAgICBfX2V4cG9ydHNfXy5kZWZlciA9IGRlZmVyOwogICAgX19leHBvcnRz
        X18uZGVub2RlaWZ5ID0gZGVub2RlaWZ5OwogICAgX19leHBvcnRzX18uY29u
        ZmlndXJlID0gY29uZmlndXJlOwogICAgX19leHBvcnRzX18ucmVzb2x2ZSA9
        IHJlc29sdmU7CiAgICBfX2V4cG9ydHNfXy5yZWplY3QgPSByZWplY3Q7CiAg
        fSk7Cn0pKCk7CgooZnVuY3Rpb24oKSB7Ci8qKgpAcHJpdmF0ZQpQdWJsaWMg
        YXBpIGZvciB0aGUgY29udGFpbmVyIGlzIHN0aWxsIGluIGZsdXguClRoZSBw
        dWJsaWMgYXBpLCBzcGVjaWZpZWQgb24gdGhlIGFwcGxpY2F0aW9uIG5hbWVz
        cGFjZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0aGUgc3RhYmxlIGFwaS4KLy8g
        QG1vZHVsZSBjb250YWluZXIKKi8KCi8qCiBGbGFnIHRvIGVuYWJsZS9kaXNh
        YmxlIG1vZGVsIGZhY3RvcnkgaW5qZWN0aW9ucyAoZGlzYWJsZWQgYnkgZGVm
        YXVsdCkKIElmIG1vZGVsIGZhY3RvcnkgaW5qZWN0aW9ucyBhcmUgZW5hYmxl
        ZCwgbW9kZWxzIHNob3VsZCBub3QgYmUKIGFjY2Vzc2VkIGdsb2JhbGx5IChv
        bmx5IHRocm91Z2ggYGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdtb2RlbDpt
        b2RlbE5hbWUnKSlgKTsKKi8KRW1iZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJ
        T05TID0gZmFsc2UgfHwgISFFbWJlci5FTlYuTU9ERUxfRkFDVE9SWV9JTkpF
        Q1RJT05TOwoKZGVmaW5lKCJjb250YWluZXIiLAogIFtdLAogIGZ1bmN0aW9u
        KCkgewoKICAgIC8vIEEgc2FmZSBhbmQgc2ltcGxlIGluaGVyaXRpbmcgb2Jq
        ZWN0LgogICAgZnVuY3Rpb24gSW5oZXJpdGluZ0RpY3QocGFyZW50KSB7CiAg
        ICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgICB0aGlzLmRpY3QgPSB7
        fTsKICAgIH0KCiAgICBJbmhlcml0aW5nRGljdC5wcm90b3R5cGUgPSB7Cgog
        ICAgICAvKioKICAgICAgICBAcHJvcGVydHkgcGFyZW50CiAgICAgICAgQHR5
        cGUgSW5oZXJpdGluZ0RpY3QKICAgICAgICBAZGVmYXVsdCBudWxsCiAgICAg
        ICovCgogICAgICBwYXJlbnQ6IG51bGwsCgogICAgICAvKioKICAgICAgICBP
        YmplY3QgdXNlZCB0byBzdG9yZSB0aGUgY3VycmVudCBub2RlcyBkYXRhLgoK
        ICAgICAgICBAcHJvcGVydHkgZGljdAogICAgICAgIEB0eXBlIE9iamVjdAog
        ICAgICAgIEBkZWZhdWx0IE9iamVjdAogICAgICAqLwogICAgICBkaWN0OiBu
        dWxsLAoKICAgICAgLyoqCiAgICAgICAgUmV0cmlldmUgdGhlIHZhbHVlIGdp
        dmVuIGEga2V5LCBpZiB0aGUgdmFsdWUgaXMgcHJlc2VudCBhdCB0aGUgY3Vy
        cmVudAogICAgICAgIGxldmVsIHVzZSBpdCwgb3RoZXJ3aXNlIHdhbGsgdXAg
        dGhlIHBhcmVudCBoaWVyYXJjaHkgYW5kIHRyeSBhZ2Fpbi4gSWYKICAgICAg
        ICBubyBtYXRjaGluZyBrZXkgaXMgZm91bmQsIHJldHVybiB1bmRlZmluZWQu
        CgogICAgICAgIEBtZXRob2QgZ2V0CiAgICAgICAgQHJldHVybiB7YW55fQog
        ICAgICAqLwogICAgICBnZXQ6IGZ1bmN0aW9uKGtleSkgewogICAgICAgIHZh
        ciBkaWN0ID0gdGhpcy5kaWN0OwoKICAgICAgICBpZiAoZGljdC5oYXNPd25Q
        cm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICByZXR1cm4gZGljdFtrZXldOwog
        ICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgICAg
        ICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0KGtleSk7CiAgICAgICAgfQogICAg
        ICB9LAoKICAgICAgLyoqCiAgICAgICAgU2V0IHRoZSBnaXZlbiB2YWx1ZSBm
        b3IgdGhlIGdpdmVuIGtleSwgYXQgdGhlIGN1cnJlbnQgbGV2ZWwuCgogICAg
        ICAgIEBtZXRob2Qgc2V0CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGtleQog
        ICAgICAgIEBwYXJhbSB7QW55fSB2YWx1ZQogICAgICAqLwogICAgICBzZXQ6
        IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAgICB0aGlzLmRpY3Rba2V5
        XSA9IHZhbHVlOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgRGVsZXRl
        IHRoZSBnaXZlbiBrZXkKCiAgICAgICAgQG1ldGhvZCByZW1vdmUKICAgICAg
        ICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgICAgICovCiAgICAgIHJlbW92ZTog
        ZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgZGVsZXRlIHRoaXMuZGljdFtrZXld
        OwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQ2hlY2sgZm9yIHRoZSBl
        eGlzdGVuY2Ugb2YgZ2l2ZW4gYSBrZXksIGlmIHRoZSBrZXkgaXMgcHJlc2Vu
        dCBhdCB0aGUgY3VycmVudAogICAgICAgIGxldmVsIHJldHVybiB0cnVlLCBv
        dGhlcndpc2Ugd2FsayB1cCB0aGUgcGFyZW50IGhpZXJhcmNoeSBhbmQgdHJ5
        IGFnYWluLiBJZgogICAgICAgIG5vIG1hdGNoaW5nIGtleSBpcyBmb3VuZCwg
        cmV0dXJuIGZhbHNlLgoKICAgICAgICBAbWV0aG9kIGhhcwogICAgICAgIEBw
        YXJhbSB7U3RyaW5nfSBrZXkKICAgICAgICBAcmV0dXJuIHtCb29sZWFufQog
        ICAgICAqLwogICAgICBoYXM6IGZ1bmN0aW9uKGtleSkgewogICAgICAgIHZh
        ciBkaWN0ID0gdGhpcy5kaWN0OwoKICAgICAgICBpZiAoZGljdC5oYXNPd25Q
        cm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg
        ICB9CgogICAgICAgIGlmICh0aGlzLnBhcmVudCkgewogICAgICAgICAgcmV0
        dXJuIHRoaXMucGFyZW50LmhhcyhrZXkpOwogICAgICAgIH0KCiAgICAgICAg
        cmV0dXJuIGZhbHNlOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgSXRl
        cmF0ZSBhbmQgaW52b2tlIGEgY2FsbGJhY2sgZm9yIGVhY2ggbG9jYWwga2V5
        LXZhbHVlIHBhaXIuCgogICAgICAgIEBtZXRob2QgZWFjaExvY2FsCiAgICAg
        ICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgICAgICBAcGFyYW0g
        e09iamVjdH0gYmluZGluZwogICAgICAqLwogICAgICBlYWNoTG9jYWw6IGZ1
        bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICAgICAgdmFyIGRpY3Qg
        PSB0aGlzLmRpY3Q7CgogICAgICAgIGZvciAodmFyIHByb3AgaW4gZGljdCkg
        ewogICAgICAgICAgaWYgKGRpY3QuaGFzT3duUHJvcGVydHkocHJvcCkpIHsK
        ICAgICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCBwcm9wLCBkaWN0
        W3Byb3BdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07
        CgoKICAgIC8vIEEgbGlnaHR3ZWlnaHQgY29udGFpbmVyIHRoYXQgaGVscHMg
        dG8gYXNzZW1ibGUgYW5kIGRlY291cGxlIGNvbXBvbmVudHMuCiAgICAvLyBQ
        dWJsaWMgYXBpIGZvciB0aGUgY29udGFpbmVyIGlzIHN0aWxsIGluIGZsdXgu
        CiAgICAvLyBUaGUgcHVibGljIGFwaSwgc3BlY2lmaWVkIG9uIHRoZSBhcHBs
        aWNhdGlvbiBuYW1lc3BhY2Ugc2hvdWxkIGJlIGNvbnNpZGVyZWQgdGhlIHN0
        YWJsZSBhcGkuCiAgICBmdW5jdGlvbiBDb250YWluZXIocGFyZW50KSB7CiAg
        ICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgICB0aGlzLmNoaWxkcmVu
        ID0gW107CgogICAgICB0aGlzLnJlc29sdmVyID0gcGFyZW50ICYmIHBhcmVu
        dC5yZXNvbHZlciB8fCBmdW5jdGlvbigpIHt9OwoKICAgICAgdGhpcy5yZWdp
        c3RyeSA9IG5ldyBJbmhlcml0aW5nRGljdChwYXJlbnQgJiYgcGFyZW50LnJl
        Z2lzdHJ5KTsKICAgICAgdGhpcy5jYWNoZSA9IG5ldyBJbmhlcml0aW5nRGlj
        dChwYXJlbnQgJiYgcGFyZW50LmNhY2hlKTsKICAgICAgdGhpcy5mYWN0b3J5
        Q2FjaGUgPSBuZXcgSW5oZXJpdGluZ0RpY3QocGFyZW50ICYmIHBhcmVudC5j
        YWNoZSk7CiAgICAgIHRoaXMudHlwZUluamVjdGlvbnMgPSBuZXcgSW5oZXJp
        dGluZ0RpY3QocGFyZW50ICYmIHBhcmVudC50eXBlSW5qZWN0aW9ucyk7CiAg
        ICAgIHRoaXMuaW5qZWN0aW9ucyA9IHt9OwoKICAgICAgdGhpcy5mYWN0b3J5
        VHlwZUluamVjdGlvbnMgPSBuZXcgSW5oZXJpdGluZ0RpY3QocGFyZW50ICYm
        IHBhcmVudC5mYWN0b3J5VHlwZUluamVjdGlvbnMpOwogICAgICB0aGlzLmZh
        Y3RvcnlJbmplY3Rpb25zID0ge307CgogICAgICB0aGlzLl9vcHRpb25zID0g
        bmV3IEluaGVyaXRpbmdEaWN0KHBhcmVudCAmJiBwYXJlbnQuX29wdGlvbnMp
        OwogICAgICB0aGlzLl90eXBlT3B0aW9ucyA9IG5ldyBJbmhlcml0aW5nRGlj
        dChwYXJlbnQgJiYgcGFyZW50Ll90eXBlT3B0aW9ucyk7CiAgICB9CgogICAg
        Q29udGFpbmVyLnByb3RvdHlwZSA9IHsKCiAgICAgIC8qKgogICAgICAgIEBw
        cm9wZXJ0eSBwYXJlbnQKICAgICAgICBAdHlwZSBDb250YWluZXIKICAgICAg
        ICBAZGVmYXVsdCBudWxsCiAgICAgICovCiAgICAgIHBhcmVudDogbnVsbCwK
        CiAgICAgIC8qKgogICAgICAgIEBwcm9wZXJ0eSBjaGlsZHJlbgogICAgICAg
        IEB0eXBlIEFycmF5CiAgICAgICAgQGRlZmF1bHQgW10KICAgICAgKi8KICAg
        ICAgY2hpbGRyZW46IG51bGwsCgogICAgICAvKioKICAgICAgICBAcHJvcGVy
        dHkgcmVzb2x2ZXIKICAgICAgICBAdHlwZSBmdW5jdGlvbgogICAgICAqLwog
        ICAgICByZXNvbHZlcjogbnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwcm9w
        ZXJ0eSByZWdpc3RyeQogICAgICAgIEB0eXBlIEluaGVyaXRpbmdEaWN0CiAg
        ICAgICovCiAgICAgIHJlZ2lzdHJ5OiBudWxsLAoKICAgICAgLyoqCiAgICAg
        ICAgQHByb3BlcnR5IGNhY2hlCiAgICAgICAgQHR5cGUgSW5oZXJpdGluZ0Rp
        Y3QKICAgICAgKi8KICAgICAgY2FjaGU6IG51bGwsCgogICAgICAvKioKICAg
        ICAgICBAcHJvcGVydHkgdHlwZUluamVjdGlvbnMKICAgICAgICBAdHlwZSBJ
        bmhlcml0aW5nRGljdAogICAgICAqLwogICAgICB0eXBlSW5qZWN0aW9uczog
        bnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwcm9wZXJ0eSBpbmplY3Rpb25z
        CiAgICAgICAgQHR5cGUgT2JqZWN0CiAgICAgICAgQGRlZmF1bHQge30KICAg
        ICAgKi8KICAgICAgaW5qZWN0aW9uczogbnVsbCwKCiAgICAgIC8qKgogICAg
        ICAgIEBwcml2YXRlCgogICAgICAgIEBwcm9wZXJ0eSBfb3B0aW9ucwogICAg
        ICAgIEB0eXBlIEluaGVyaXRpbmdEaWN0CiAgICAgICAgQGRlZmF1bHQgbnVs
        bAogICAgICAqLwogICAgICBfb3B0aW9uczogbnVsbCwKCiAgICAgIC8qKgog
        ICAgICAgIEBwcml2YXRlCgogICAgICAgIEBwcm9wZXJ0eSBfdHlwZU9wdGlv
        bnMKICAgICAgICBAdHlwZSBJbmhlcml0aW5nRGljdAogICAgICAqLwogICAg
        ICBfdHlwZU9wdGlvbnM6IG51bGwsCgogICAgICAvKioKICAgICAgICBSZXR1
        cm5zIGEgbmV3IGNoaWxkIG9mIHRoZSBjdXJyZW50IGNvbnRhaW5lci4gVGhl
        c2UgY2hpbGRyZW4gYXJlIGNvbmZpZ3VyZWQKICAgICAgICB0byBjb3JyZWN0
        bHkgaW5oZXJpdCBmcm9tIHRoZSBjdXJyZW50IGNvbnRhaW5lci4KCiAgICAg
        ICAgQG1ldGhvZCBjaGlsZAogICAgICAgIEByZXR1cm4ge0NvbnRhaW5lcn0K
        ICAgICAgKi8KICAgICAgY2hpbGQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHZh
        ciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKHRoaXMpOwogICAgICAgIHRo
        aXMuY2hpbGRyZW4ucHVzaChjb250YWluZXIpOwogICAgICAgIHJldHVybiBj
        b250YWluZXI7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBTZXRzIGEg
        a2V5LXZhbHVlIHBhaXIgb24gdGhlIGN1cnJlbnQgY29udGFpbmVyLiBJZiBh
        IHBhcmVudCBjb250YWluZXIsCiAgICAgICAgaGFzIHRoZSBzYW1lIGtleSwg
        b25jZSBzZXQgb24gYSBjaGlsZCwgdGhlIHBhcmVudCBhbmQgY2hpbGQgd2ls
        bCBkaXZlcmdlCiAgICAgICAgYXMgZXhwZWN0ZWQuCgogICAgICAgIEBtZXRo
        b2Qgc2V0CiAgICAgICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdAogICAgICAg
        IEBwYXJhbSB7U3RyaW5nfSBrZXkKICAgICAgICBAcGFyYW0ge2FueX0gdmFs
        dWUKICAgICAgKi8KICAgICAgc2V0OiBmdW5jdGlvbihvYmplY3QsIGtleSwg
        dmFsdWUpIHsKICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlOwogICAgICB9
        LAoKICAgICAgLyoqCiAgICAgICAgUmVnaXN0ZXJzIGEgZmFjdG9yeSBmb3Ig
        bGF0ZXIgaW5qZWN0aW9uLgoKICAgICAgICBFeGFtcGxlOgoKICAgICAgICBg
        YGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBDb250
        YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdtb2RlbDp1
        c2VyJywgUGVyc29uLCB7c2luZ2xldG9uOiBmYWxzZSB9KTsKICAgICAgICBj
        b250YWluZXIucmVnaXN0ZXIoJ2ZydWl0OmZhdm9yaXRlJywgT3JhbmdlKTsK
        ICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NvbW11bmljYXRpb246bWFp
        bicsIEVtYWlsLCB7c2luZ2xldG9uOiBmYWxzZX0pOwogICAgICAgIGBgYAoK
        ICAgICAgICBAbWV0aG9kIHJlZ2lzdGVyCiAgICAgICAgQHBhcmFtIHtTdHJp
        bmd9IGZ1bGxOYW1lCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9y
        eQogICAgICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAgICAgICovCiAg
        ICAgIHJlZ2lzdGVyOiBmdW5jdGlvbihmdWxsTmFtZSwgZmFjdG9yeSwgb3B0
        aW9ucykgewogICAgICAgIGlmIChmdWxsTmFtZS5pbmRleE9mKCc6JykgPT09
        IC0xKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJtYWxmb3Jt
        ZWQgZnVsbE5hbWUsIGV4cGVjdGVkOiBgdHlwZTpuYW1lYCBnb3Q6ICIgKyBm
        dWxsTmFtZSArICIiKTsKICAgICAgICB9CgogICAgICAgIGlmIChmYWN0b3J5
        ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJy
        b3IoJ0F0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYW4gdW5rbm93biBmYWN0b3J5
        OiBgJyArIGZ1bGxOYW1lICsgJ2AnKTsKICAgICAgICB9CgogICAgICAgIHZh
        ciBub3JtYWxpemVkTmFtZSA9IHRoaXMubm9ybWFsaXplKGZ1bGxOYW1lKTsK
        CiAgICAgICAgaWYgKHRoaXMuY2FjaGUuaGFzKG5vcm1hbGl6ZWROYW1lKSkg
        ewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcmUtcmVnaXN0
        ZXI6IGAnICsgZnVsbE5hbWUgKydgLCBhcyBpdCBoYXMgYWxyZWFkeSBiZWVu
        IGxvb2tlZCB1cC4nKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucmVnaXN0
        cnkuc2V0KG5vcm1hbGl6ZWROYW1lLCBmYWN0b3J5KTsKICAgICAgICB0aGlz
        Ll9vcHRpb25zLnNldChub3JtYWxpemVkTmFtZSwgb3B0aW9ucyB8fCB7fSk7
        CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBVbnJlZ2lzdGVyIGEgZnVs
        bE5hbWUKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBjb250
        YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CiAgICAgICAgY29udGFpbmVyLnJl
        Z2lzdGVyKCdtb2RlbDp1c2VyJywgVXNlcik7CgogICAgICAgIGNvbnRhaW5l
        ci5sb29rdXAoJ21vZGVsOnVzZXInKSBpbnN0YW5jZW9mIFVzZXIgLy89PiB0
        cnVlCgogICAgICAgIGNvbnRhaW5lci51bnJlZ2lzdGVyKCdtb2RlbDp1c2Vy
        JykKICAgICAgICBjb250YWluZXIubG9va3VwKCdtb2RlbDp1c2VyJykgPT09
        IHVuZGVmaW5lZCAvLz0+IHRydWUKICAgICAgICBgYGAKCiAgICAgICAgQG1l
        dGhvZCB1bnJlZ2lzdGVyCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxO
        YW1lCiAgICAgICAqLwogICAgICB1bnJlZ2lzdGVyOiBmdW5jdGlvbihmdWxs
        TmFtZSkgewogICAgICAgIHZhciBub3JtYWxpemVkTmFtZSA9IHRoaXMubm9y
        bWFsaXplKGZ1bGxOYW1lKTsKCiAgICAgICAgdGhpcy5yZWdpc3RyeS5yZW1v
        dmUobm9ybWFsaXplZE5hbWUpOwogICAgICAgIHRoaXMuY2FjaGUucmVtb3Zl
        KG5vcm1hbGl6ZWROYW1lKTsKICAgICAgICB0aGlzLmZhY3RvcnlDYWNoZS5y
        ZW1vdmUobm9ybWFsaXplZE5hbWUpOwogICAgICAgIHRoaXMuX29wdGlvbnMu
        cmVtb3ZlKG5vcm1hbGl6ZWROYW1lKTsKICAgICAgfSwKCiAgICAgIC8qKgog
        ICAgICAgIEdpdmVuIGEgZnVsbE5hbWUgcmV0dXJuIHRoZSBjb3JyZXNwb25k
        aW5nIGZhY3RvcnkuCgogICAgICAgIEJ5IGRlZmF1bHQgYHJlc29sdmVgIHdp
        bGwgcmV0cmlldmUgdGhlIGZhY3RvcnkgZnJvbQogICAgICAgIGl0cyBjb250
        YWluZXIncyByZWdpc3RyeS4KCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAg
        ICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CiAgICAgICAg
        Y29udGFpbmVyLnJlZ2lzdGVyKCdhcGk6dHdpdHRlcicsIFR3aXR0ZXIpOwoK
        ICAgICAgICBjb250YWluZXIucmVzb2x2ZSgnYXBpOnR3aXR0ZXInKSAvLyA9
        PiBUd2l0dGVyCiAgICAgICAgYGBgCgogICAgICAgIE9wdGlvbmFsbHkgdGhl
        IGNvbnRhaW5lciBjYW4gYmUgcHJvdmlkZWQgd2l0aCBhIGN1c3RvbSByZXNv
        bHZlci4KICAgICAgICBJZiBwcm92aWRlZCwgYHJlc29sdmVgIHdpbGwgZmly
        c3QgcHJvdmlkZSB0aGUgY3VzdG9tIHJlc29sdmVyCiAgICAgICAgdGhlIG9w
        cGVydHVuaXR5IHRvIHJlc29sdmUgdGhlIGZ1bGxOYW1lLCBvdGhlcndpc2Ug
        aXQgd2lsbCBmYWxsYmFjawogICAgICAgIHRvIHRoZSByZWdpc3RyeS4KCiAg
        ICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBjb250YWluZXIgPSBu
        ZXcgQ29udGFpbmVyKCk7CiAgICAgICAgY29udGFpbmVyLnJlc29sdmVyID0g
        ZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICAgIC8vIGxvb2t1cCB2aWEg
        dGhlIG1vZHVsZSBzeXN0ZW0gb2YgY2hvaWNlCiAgICAgICAgfTsKCiAgICAg
        ICAgLy8gdGhlIHR3aXR0ZXIgZmFjdG9yeSBpcyBhZGRlZCB0byB0aGUgbW9k
        dWxlIHN5c3RlbQogICAgICAgIGNvbnRhaW5lci5yZXNvbHZlKCdhcGk6dHdp
        dHRlcicpIC8vID0+IFR3aXR0ZXIKICAgICAgICBgYGAKCiAgICAgICAgQG1l
        dGhvZCByZXNvbHZlCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1l
        CiAgICAgICAgQHJldHVybiB7RnVuY3Rpb259IGZ1bGxOYW1lJ3MgZmFjdG9y
        eQogICAgICAqLwogICAgICByZXNvbHZlOiBmdW5jdGlvbihmdWxsTmFtZSkg
        ewogICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVyKGZ1bGxOYW1lKSB8fCB0
        aGlzLnJlZ2lzdHJ5LmdldChmdWxsTmFtZSk7CiAgICAgIH0sCgogICAgICAv
        KioKICAgICAgICBBIGhvb2sgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXNjcmli
        ZSBob3cgdGhlIHJlc29sdmVyIHdpbGwKICAgICAgICBhdHRlbXB0IHRvIGZp
        bmQgdGhlIGZhY3RvcnkuCgogICAgICAgIEZvciBleGFtcGxlLCB0aGUgZGVm
        YXVsdCBFbWJlciBgLmRlc2NyaWJlYCByZXR1cm5zIHRoZSBmdWxsCiAgICAg
        ICAgY2xhc3MgbmFtZSAoaW5jbHVkaW5nIG5hbWVzcGFjZSkgd2hlcmUgRW1i
        ZXIncyByZXNvbHZlciBleHBlY3RzCiAgICAgICAgdG8gZmluZCB0aGUgYGZ1
        bGxOYW1lYC4KCiAgICAgICAgQG1ldGhvZCBkZXNjcmliZQogICAgICAqLwog
        ICAgICBkZXNjcmliZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICBy
        ZXR1cm4gZnVsbE5hbWU7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBB
        IGhvb2sgdG8gZW5hYmxlIGN1c3RvbSBmdWxsTmFtZSBub3JtYWxpemF0aW9u
        IGJlaGF2aW91cgoKICAgICAgICBAbWV0aG9kIG5vcm1hbGl6ZQogICAgICAg
        IEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEByZXR1cm4ge3N0
        cmluZ30gbm9ybWFsaXplZCBmdWxsTmFtZQogICAgICAqLwogICAgICBub3Jt
        YWxpemU6IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICAgICAgcmV0dXJuIGZ1
        bGxOYW1lOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQG1ldGhvZCBt
        YWtlVG9TdHJpbmcKCiAgICAgICAgQHBhcmFtIHthbnl9IGZhY3RvcnkKICAg
        ICAgICBAcGFyYW0ge3N0cmluZ30gZnVsbE5hbWUKICAgICAgICBAcmV0dXJu
        IHtmdW5jdGlvbn0gdG9TdHJpbmcgZnVuY3Rpb24KICAgICAgKi8KICAgICAg
        bWFrZVRvU3RyaW5nOiBmdW5jdGlvbihmYWN0b3J5LCBmdWxsTmFtZSkgewog
        ICAgICAgIHJldHVybiBmYWN0b3J5LnRvU3RyaW5nKCk7CiAgICAgIH0sCgog
        ICAgICAvKioKICAgICAgICBHaXZlbiBhIGZ1bGxOYW1lIHJldHVybiBhIGNv
        cnJlc3BvbmRpbmcgaW5zdGFuY2UuCgogICAgICAgIFRoZSBkZWZhdWx0IGJl
        aGF2aW91ciBpcyBmb3IgbG9va3VwIHRvIHJldHVybiBhIHNpbmdsZXRvbiBp
        bnN0YW5jZS4KICAgICAgICBUaGUgc2luZ2xldG9uIGlzIHNjb3BlZCB0byB0
        aGUgY29udGFpbmVyLCBhbGxvd2luZyBtdWx0aXBsZSBjb250YWluZXJzCiAg
        ICAgICAgdG8gYWxsIGhhdmUgdGhlaXIgb3duIGxvY2FsbHkgc2NvcGVkIHNp
        bmdsZXRvbnMuCgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIg
        Y29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwogICAgICAgIGNvbnRhaW5l
        ci5yZWdpc3RlcignYXBpOnR3aXR0ZXInLCBUd2l0dGVyKTsKCiAgICAgICAg
        dmFyIHR3aXR0ZXIgPSBjb250YWluZXIubG9va3VwKCdhcGk6dHdpdHRlcicp
        OwoKICAgICAgICB0d2l0dGVyIGluc3RhbmNlb2YgVHdpdHRlcjsgLy8gPT4g
        dHJ1ZQoKICAgICAgICAvLyBieSBkZWZhdWx0IHRoZSBjb250YWluZXIgd2ls
        bCByZXR1cm4gc2luZ2xldG9ucwogICAgICAgIHR3aXR0ZXIyID0gY29udGFp
        bmVyLmxvb2t1cCgnYXBpOnR3aXR0ZXInKTsKICAgICAgICB0d2l0dGVyIGlu
        c3RhbmNlb2YgVHdpdHRlcjsgLy8gPT4gdHJ1ZQoKICAgICAgICB0d2l0dGVy
        ID09PSB0d2l0dGVyMjsgLy89PiB0cnVlCiAgICAgICAgYGBgCgogICAgICAg
        IElmIHNpbmdsZXRvbnMgYXJlIG5vdCB3YW50ZWQgYW4gb3B0aW9uYWwgZmxh
        ZyBjYW4gYmUgcHJvdmlkZWQgYXQgbG9va3VwLgoKICAgICAgICBgYGBqYXZh
        c2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBDb250YWluZXIo
        KTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2FwaTp0d2l0dGVyJywg
        VHdpdHRlcik7CgogICAgICAgIHZhciB0d2l0dGVyID0gY29udGFpbmVyLmxv
        b2t1cCgnYXBpOnR3aXR0ZXInLCB7IHNpbmdsZXRvbjogZmFsc2UgfSk7CiAg
        ICAgICAgdmFyIHR3aXR0ZXIyID0gY29udGFpbmVyLmxvb2t1cCgnYXBpOnR3
        aXR0ZXInLCB7IHNpbmdsZXRvbjogZmFsc2UgfSk7CgogICAgICAgIHR3aXR0
        ZXIgPT09IHR3aXR0ZXIyOyAvLz0+IGZhbHNlCiAgICAgICAgYGBgCgogICAg
        ICAgIEBtZXRob2QgbG9va3VwCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1
        bGxOYW1lCiAgICAgICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgICAg
        ICBAcmV0dXJuIHthbnl9CiAgICAgICovCiAgICAgIGxvb2t1cDogZnVuY3Rp
        b24oZnVsbE5hbWUsIG9wdGlvbnMpIHsKICAgICAgICBmdWxsTmFtZSA9IHRo
        aXMubm9ybWFsaXplKGZ1bGxOYW1lKTsKCiAgICAgICAgb3B0aW9ucyA9IG9w
        dGlvbnMgfHwge307CgogICAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhmdWxs
        TmFtZSkgJiYgb3B0aW9ucy5zaW5nbGV0b24gIT09IGZhbHNlKSB7CiAgICAg
        ICAgICByZXR1cm4gdGhpcy5jYWNoZS5nZXQoZnVsbE5hbWUpOwogICAgICAg
        IH0KCiAgICAgICAgdmFyIHZhbHVlID0gaW5zdGFudGlhdGUodGhpcywgZnVs
        bE5hbWUpOwoKICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgeyBy
        ZXR1cm47IH0KCiAgICAgICAgaWYgKGlzU2luZ2xldG9uKHRoaXMsIGZ1bGxO
        YW1lKSAmJiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gZmFsc2UpIHsKICAgICAg
        ICAgIHRoaXMuY2FjaGUuc2V0KGZ1bGxOYW1lLCB2YWx1ZSk7CiAgICAgICAg
        fQoKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0sCgogICAgICAvKioK
        ICAgICAgICBHaXZlbiBhIGZ1bGxOYW1lIHJldHVybiB0aGUgY29ycmVzcG9u
        ZGluZyBmYWN0b3J5LgoKICAgICAgICBAbWV0aG9kIGxvb2t1cEZhY3RvcnkK
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgICBAcmV0
        dXJuIHthbnl9CiAgICAgICovCiAgICAgIGxvb2t1cEZhY3Rvcnk6IGZ1bmN0
        aW9uKGZ1bGxOYW1lKSB7CiAgICAgICAgcmV0dXJuIGZhY3RvcnlGb3IodGhp
        cywgZnVsbE5hbWUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgR2l2
        ZW4gYSBmdWxsTmFtZSBjaGVjayBpZiB0aGUgY29udGFpbmVyIGlzIGF3YXJl
        IG9mIGl0cyBmYWN0b3J5CiAgICAgICAgb3Igc2luZ2xldG9uIGluc3RhbmNl
        LgoKICAgICAgICBAbWV0aG9kIGhhcwogICAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBmdWxsTmFtZQogICAgICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgICAgICov
        CiAgICAgIGhhczogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICBpZiAo
        dGhpcy5jYWNoZS5oYXMoZnVsbE5hbWUpKSB7CiAgICAgICAgICByZXR1cm4g
        dHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhIWZhY3RvcnlGb3Io
        dGhpcywgZnVsbE5hbWUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAg
        QWxsb3cgcmVnaXN0ZXJpbmcgb3B0aW9ucyBmb3IgYWxsIGZhY3RvcmllcyBv
        ZiBhIHR5cGUuCgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIg
        Y29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAgICAgICAvLyBpZiBh
        bGwgb2YgdHlwZSBgY29ubmVjdGlvbmAgbXVzdCBub3QgYmUgc2luZ2xldG9u
        cwogICAgICAgIGNvbnRhaW5lci5vcHRpb25zRm9yVHlwZSgnY29ubmVjdGlv
        bicsIHsgc2luZ2xldG9uOiBmYWxzZSB9KTsKCiAgICAgICAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdjb25uZWN0aW9uOnR3aXR0ZXInLCBUd2l0dGVyQ29ubmVj
        dGlvbik7CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb25uZWN0aW9u
        OmZhY2Vib29rJywgRmFjZWJvb2tDb25uZWN0aW9uKTsKCiAgICAgICAgdmFy
        IHR3aXR0ZXIgPSBjb250YWluZXIubG9va3VwKCdjb25uZWN0aW9uOnR3aXR0
        ZXInKTsKICAgICAgICB2YXIgdHdpdHRlcjIgPSBjb250YWluZXIubG9va3Vw
        KCdjb25uZWN0aW9uOnR3aXR0ZXInKTsKCiAgICAgICAgdHdpdHRlciA9PT0g
        dHdpdHRlcjI7IC8vID0+IGZhbHNlCgogICAgICAgIHZhciBmYWNlYm9vayA9
        IGNvbnRhaW5lci5sb29rdXAoJ2Nvbm5lY3Rpb246ZmFjZWJvb2snKTsKICAg
        ICAgICB2YXIgZmFjZWJvb2syID0gY29udGFpbmVyLmxvb2t1cCgnY29ubmVj
        dGlvbjpmYWNlYm9vaycpOwoKICAgICAgICBmYWNlYm9vayA9PT0gZmFjZWJv
        b2syOyAvLyA9PiBmYWxzZQogICAgICAgIGBgYAoKICAgICAgICBAbWV0aG9k
        IG9wdGlvbnNGb3JUeXBlCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUK
        ICAgICAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgICAqLwogICAg
        ICBvcHRpb25zRm9yVHlwZTogZnVuY3Rpb24odHlwZSwgb3B0aW9ucykgewog
        ICAgICAgIGlmICh0aGlzLnBhcmVudCkgeyBpbGxlZ2FsQ2hpbGRPcGVyYXRp
        b24oJ29wdGlvbnNGb3JUeXBlJyk7IH0KCiAgICAgICAgdGhpcy5fdHlwZU9w
        dGlvbnMuc2V0KHR5cGUsIG9wdGlvbnMpOwogICAgICB9LAoKICAgICAgLyoq
        CiAgICAgICAgQG1ldGhvZCBvcHRpb25zCiAgICAgICAgQHBhcmFtIHtTdHJp
        bmd9IHR5cGUKICAgICAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAg
        ICAqLwogICAgICBvcHRpb25zOiBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7
        CiAgICAgICAgdGhpcy5vcHRpb25zRm9yVHlwZSh0eXBlLCBvcHRpb25zKTsK
        ICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEBwcml2YXRlCgogICAgICAg
        IFVzZWQgb25seSB2aWEgYGluamVjdGlvbmAuCgogICAgICAgIFByb3ZpZGVz
        IGEgc3BlY2lhbGl6ZWQgZm9ybSBvZiBpbmplY3Rpb24sIHNwZWNpZmljYWxs
        eSBlbmFibGluZwogICAgICAgIGFsbCBvYmplY3RzIG9mIG9uZSB0eXBlIHRv
        IGJlIGluamVjdGVkIHdpdGggYSByZWZlcmVuY2UgdG8gYW5vdGhlcgogICAg
        ICAgIG9iamVjdC4KCiAgICAgICAgRm9yIGV4YW1wbGUsIHByb3ZpZGVkIGVh
        Y2ggb2JqZWN0IG9mIHR5cGUgYGNvbnRyb2xsZXJgIG5lZWRlZCBhIGByb3V0
        ZXJgLgogICAgICAgIG9uZSB3b3VsZCBkbyB0aGUgZm9sbG93aW5nOgoKICAg
        ICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5l
        dyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdy
        b3V0ZXI6bWFpbicsIFJvdXRlcik7CiAgICAgICAgY29udGFpbmVyLnJlZ2lz
        dGVyKCdjb250cm9sbGVyOnVzZXInLCBVc2VyQ29udHJvbGxlcik7CiAgICAg
        ICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb250cm9sbGVyOnBvc3QnLCBQb3N0
        Q29udHJvbGxlcik7CgogICAgICAgIGNvbnRhaW5lci50eXBlSW5qZWN0aW9u
        KCdjb250cm9sbGVyJywgJ3JvdXRlcicsICdyb3V0ZXI6bWFpbicpOwoKICAg
        ICAgICB2YXIgdXNlciA9IGNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6
        dXNlcicpOwogICAgICAgIHZhciBwb3N0ID0gY29udGFpbmVyLmxvb2t1cCgn
        Y29udHJvbGxlcjpwb3N0Jyk7CgogICAgICAgIHVzZXIucm91dGVyIGluc3Rh
        bmNlb2YgUm91dGVyOyAvLz0+IHRydWUKICAgICAgICBwb3N0LnJvdXRlciBp
        bnN0YW5jZW9mIFJvdXRlcjsgLy89PiB0cnVlCgogICAgICAgIC8vIGJvdGgg
        Y29udHJvbGxlcnMgc2hhcmUgdGhlIHNhbWUgcm91dGVyCiAgICAgICAgdXNl
        ci5yb3V0ZXIgPT09IHBvc3Qucm91dGVyOyAvLz0+IHRydWUKICAgICAgICBg
        YGAKCiAgICAgICAgQG1ldGhvZCB0eXBlSW5qZWN0aW9uCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IHR5cGUKICAgICAgICBAcGFyYW0ge1N0cmluZ30gcHJv
        cGVydHkKICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAg
        Ki8KICAgICAgdHlwZUluamVjdGlvbjogZnVuY3Rpb24odHlwZSwgcHJvcGVy
        dHksIGZ1bGxOYW1lKSB7CiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7IGls
        bGVnYWxDaGlsZE9wZXJhdGlvbigndHlwZUluamVjdGlvbicpOyB9CgogICAg
        ICAgIGFkZFR5cGVJbmplY3Rpb24odGhpcy50eXBlSW5qZWN0aW9ucywgdHlw
        ZSwgcHJvcGVydHksIGZ1bGxOYW1lKTsKICAgICAgfSwKCiAgICAgIC8qKgog
        ICAgICAgIERlZmluZXMgaW5qZWN0aW9uIHJ1bGVzLgoKICAgICAgICBUaGVz
        ZSBydWxlcyBhcmUgdXNlZCB0byBpbmplY3QgZGVwZW5kZW5jaWVzIG9udG8g
        b2JqZWN0cyB3aGVuIHRoZXkKICAgICAgICBhcmUgaW5zdGFudGlhdGVkLgoK
        ICAgICAgICBUd28gZm9ybXMgb2YgaW5qZWN0aW9ucyBhcmUgcG9zc2libGU6
        CgogICAgICAqIEluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciBm
        dWxsTmFtZQogICAgICAqIEluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYSB0
        eXBlCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgIGBgYGphdmFzY3JpcHQK
        ICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAg
        ICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3NvdXJjZTptYWluJywgU291cmNl
        KTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ21vZGVsOnVzZXInLCBV
        c2VyKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ21vZGVsOnBvc3Qn
        LCBQb3N0KTsKCiAgICAgICAgLy8gaW5qZWN0aW5nIG9uZSBmdWxsTmFtZSBv
        biBhbm90aGVyIGZ1bGxOYW1lCiAgICAgICAgLy8gZWcuIGVhY2ggdXNlciBt
        b2RlbCBnZXRzIGEgcG9zdCBtb2RlbAogICAgICAgIGNvbnRhaW5lci5pbmpl
        Y3Rpb24oJ21vZGVsOnVzZXInLCAncG9zdCcsICdtb2RlbDpwb3N0Jyk7Cgog
        ICAgICAgIC8vIGluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciB0
        eXBlCiAgICAgICAgY29udGFpbmVyLmluamVjdGlvbignbW9kZWwnLCAnc291
        cmNlJywgJ3NvdXJjZTptYWluJyk7CgogICAgICAgIHZhciB1c2VyID0gY29u
        dGFpbmVyLmxvb2t1cCgnbW9kZWw6dXNlcicpOwogICAgICAgIHZhciBwb3N0
        ID0gY29udGFpbmVyLmxvb2t1cCgnbW9kZWw6cG9zdCcpOwoKICAgICAgICB1
        c2VyLnNvdXJjZSBpbnN0YW5jZW9mIFNvdXJjZTsgLy89PiB0cnVlCiAgICAg
        ICAgcG9zdC5zb3VyY2UgaW5zdGFuY2VvZiBTb3VyY2U7IC8vPT4gdHJ1ZQoK
        ICAgICAgICB1c2VyLnBvc3QgaW5zdGFuY2VvZiBQb3N0OyAvLz0+IHRydWUK
        CiAgICAgICAgLy8gYW5kIGJvdGggbW9kZWxzIHNoYXJlIHRoZSBzYW1lIHNv
        dXJjZQogICAgICAgIHVzZXIuc291cmNlID09PSBwb3N0LnNvdXJjZTsgLy89
        PiB0cnVlCiAgICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgaW5qZWN0aW9u
        CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZhY3RvcnlOYW1lCiAgICAgICAg
        QHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5CiAgICAgICAgQHBhcmFtIHtTdHJp
        bmd9IGluamVjdGlvbk5hbWUKICAgICAgKi8KICAgICAgaW5qZWN0aW9uOiBm
        dW5jdGlvbihmYWN0b3J5TmFtZSwgcHJvcGVydHksIGluamVjdGlvbk5hbWUp
        IHsKICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHsgaWxsZWdhbENoaWxkT3Bl
        cmF0aW9uKCdpbmplY3Rpb24nKTsgfQoKICAgICAgICBpZiAoZmFjdG9yeU5h
        bWUuaW5kZXhPZignOicpID09PSAtMSkgewogICAgICAgICAgcmV0dXJuIHRo
        aXMudHlwZUluamVjdGlvbihmYWN0b3J5TmFtZSwgcHJvcGVydHksIGluamVj
        dGlvbk5hbWUpOwogICAgICAgIH0KCiAgICAgICAgYWRkSW5qZWN0aW9uKHRo
        aXMuaW5qZWN0aW9ucywgZmFjdG9yeU5hbWUsIHByb3BlcnR5LCBpbmplY3Rp
        b25OYW1lKTsKICAgICAgfSwKCgogICAgICAvKioKICAgICAgICBAcHJpdmF0
        ZQoKICAgICAgICBVc2VkIG9ubHkgdmlhIGBmYWN0b3J5SW5qZWN0aW9uYC4K
        CiAgICAgICAgUHJvdmlkZXMgYSBzcGVjaWFsaXplZCBmb3JtIG9mIGluamVj
        dGlvbiwgc3BlY2lmaWNhbGx5IGVuYWJsaW5nCiAgICAgICAgYWxsIGZhY3Rv
        cnkgb2Ygb25lIHR5cGUgdG8gYmUgaW5qZWN0ZWQgd2l0aCBhIHJlZmVyZW5j
        ZSB0byBhbm90aGVyCiAgICAgICAgb2JqZWN0LgoKICAgICAgICBGb3IgZXhh
        bXBsZSwgcHJvdmlkZWQgZWFjaCBmYWN0b3J5IG9mIHR5cGUgYG1vZGVsYCBu
        ZWVkZWQgYSBgc3RvcmVgLgogICAgICAgIG9uZSB3b3VsZCBkbyB0aGUgZm9s
        bG93aW5nOgoKICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNv
        bnRhaW5lciA9IG5ldyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVy
        LnJlZ2lzdGVyRmFjdG9yeSgnbW9kZWw6dXNlcicsIFVzZXIpOwogICAgICAg
        IGNvbnRhaW5lci5yZWdpc3Rlcignc3RvcmU6bWFpbicsIFNvbWVTdG9yZSk7
        CgogICAgICAgIGNvbnRhaW5lci5mYWN0b3J5VHlwZUluamVjdGlvbignbW9k
        ZWwnLCAnc3RvcmUnLCAnc3RvcmU6bWFpbicpOwoKICAgICAgICB2YXIgc3Rv
        cmUgPSBjb250YWluZXIubG9va3VwKCdzdG9yZTptYWluJyk7CiAgICAgICAg
        dmFyIFVzZXJGYWN0b3J5ID0gY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ21v
        ZGVsOnVzZXInKTsKCiAgICAgICAgVXNlckZhY3Rvcnkuc3RvcmUgaW5zdGFu
        Y2VvZiBTb21lU3RvcmU7IC8vPT4gdHJ1ZQogICAgICAgIGBgYAoKICAgICAg
        ICBAbWV0aG9kIGZhY3RvcnlUeXBlSW5qZWN0aW9uCiAgICAgICAgQHBhcmFt
        IHtTdHJpbmd9IHR5cGUKICAgICAgICBAcGFyYW0ge1N0cmluZ30gcHJvcGVy
        dHkKICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgKi8K
        ICAgICAgZmFjdG9yeVR5cGVJbmplY3Rpb246IGZ1bmN0aW9uKHR5cGUsIHBy
        b3BlcnR5LCBmdWxsTmFtZSkgewogICAgICAgIGlmICh0aGlzLnBhcmVudCkg
        eyBpbGxlZ2FsQ2hpbGRPcGVyYXRpb24oJ2ZhY3RvcnlUeXBlSW5qZWN0aW9u
        Jyk7IH0KCiAgICAgICAgYWRkVHlwZUluamVjdGlvbih0aGlzLmZhY3RvcnlU
        eXBlSW5qZWN0aW9ucywgdHlwZSwgcHJvcGVydHksIGZ1bGxOYW1lKTsKICAg
        ICAgfSwKCiAgICAgIC8qKgogICAgICAgIERlZmluZXMgZmFjdG9yeSBpbmpl
        Y3Rpb24gcnVsZXMuCgogICAgICAgIFNpbWlsYXIgdG8gcmVndWxhciBpbmpl
        Y3Rpb24gcnVsZXMsIGJ1dCBhcmUgcnVuIGFnYWluc3QgZmFjdG9yaWVzLCB2
        aWEKICAgICAgICBgQ29udGFpbmVyI2xvb2t1cEZhY3RvcnlgLgoKICAgICAg
        ICBUaGVzZSBydWxlcyBhcmUgdXNlZCB0byBpbmplY3Qgb2JqZWN0cyBvbnRv
        IGZhY3RvcmllcyB3aGVuIHRoZXkKICAgICAgICBhcmUgbG9va2VkIHVwLgoK
        ICAgICAgICBUd28gZm9ybXMgb2YgaW5qZWN0aW9ucyBhcmUgcG9zc2libGU6
        CgogICAgICAqIEluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciBm
        dWxsTmFtZQogICAgICAqIEluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYSB0
        eXBlCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgIGBgYGphdmFzY3JpcHQK
        ICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAg
        ICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3N0b3JlOm1haW4nLCBTdG9yZSk7
        CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdzdG9yZTpzZWNvbmRhcnkn
        LCBPdGhlclN0b3JlKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ21v
        ZGVsOnVzZXInLCBVc2VyKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIo
        J21vZGVsOnBvc3QnLCBQb3N0KTsKCiAgICAgICAgLy8gaW5qZWN0aW5nIG9u
        ZSBmdWxsTmFtZSBvbiBhbm90aGVyIHR5cGUKICAgICAgICBjb250YWluZXIu
        ZmFjdG9yeUluamVjdGlvbignbW9kZWwnLCAnc3RvcmUnLCAnc3RvcmU6bWFp
        bicpOwoKICAgICAgICAvLyBpbmplY3Rpbmcgb25lIGZ1bGxOYW1lIG9uIGFu
        b3RoZXIgZnVsbE5hbWUKICAgICAgICBjb250YWluZXIuZmFjdG9yeUluamVj
        dGlvbignbW9kZWw6cG9zdCcsICdzZWNvbmRhcnlTdG9yZScsICdzdG9yZTpz
        ZWNvbmRhcnknKTsKCiAgICAgICAgdmFyIFVzZXJGYWN0b3J5ID0gY29udGFp
        bmVyLmxvb2t1cEZhY3RvcnkoJ21vZGVsOnVzZXInKTsKICAgICAgICB2YXIg
        UG9zdEZhY3RvcnkgPSBjb250YWluZXIubG9va3VwRmFjdG9yeSgnbW9kZWw6
        cG9zdCcpOwogICAgICAgIHZhciBzdG9yZSA9IGNvbnRhaW5lci5sb29rdXAo
        J3N0b3JlOm1haW4nKTsKCiAgICAgICAgVXNlckZhY3Rvcnkuc3RvcmUgaW5z
        dGFuY2VvZiBTdG9yZTsgLy89PiB0cnVlCiAgICAgICAgVXNlckZhY3Rvcnku
        c2Vjb25kYXJ5U3RvcmUgaW5zdGFuY2VvZiBPdGhlclN0b3JlOyAvLz0+IGZh
        bHNlCgogICAgICAgIFBvc3RGYWN0b3J5LnN0b3JlIGluc3RhbmNlb2YgU3Rv
        cmU7IC8vPT4gdHJ1ZQogICAgICAgIFBvc3RGYWN0b3J5LnNlY29uZGFyeVN0
        b3JlIGluc3RhbmNlb2YgT3RoZXJTdG9yZTsgLy89PiB0cnVlCgogICAgICAg
        IC8vIGFuZCBib3RoIG1vZGVscyBzaGFyZSB0aGUgc2FtZSBzb3VyY2UgaW5z
        dGFuY2UKICAgICAgICBVc2VyRmFjdG9yeS5zdG9yZSA9PT0gUG9zdEZhY3Rv
        cnkuc3RvcmU7IC8vPT4gdHJ1ZQogICAgICAgIGBgYAoKICAgICAgICBAbWV0
        aG9kIGZhY3RvcnlJbmplY3Rpb24KICAgICAgICBAcGFyYW0ge1N0cmluZ30g
        ZmFjdG9yeU5hbWUKICAgICAgICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkK
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gaW5qZWN0aW9uTmFtZQogICAgICAq
        LwogICAgICBmYWN0b3J5SW5qZWN0aW9uOiBmdW5jdGlvbihmYWN0b3J5TmFt
        ZSwgcHJvcGVydHksIGluamVjdGlvbk5hbWUpIHsKICAgICAgICBpZiAodGhp
        cy5wYXJlbnQpIHsgaWxsZWdhbENoaWxkT3BlcmF0aW9uKCdpbmplY3Rpb24n
        KTsgfQoKICAgICAgICBpZiAoZmFjdG9yeU5hbWUuaW5kZXhPZignOicpID09
        PSAtMSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZmFjdG9yeVR5cGVJbmpl
        Y3Rpb24oZmFjdG9yeU5hbWUsIHByb3BlcnR5LCBpbmplY3Rpb25OYW1lKTsK
        ICAgICAgICB9CgogICAgICAgIGFkZEluamVjdGlvbih0aGlzLmZhY3RvcnlJ
        bmplY3Rpb25zLCBmYWN0b3J5TmFtZSwgcHJvcGVydHksIGluamVjdGlvbk5h
        bWUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQSBkZXB0aCBmaXJz
        dCB0cmF2ZXJzYWwsIGRlc3Ryb3lpbmcgdGhlIGNvbnRhaW5lciwgaXRzIGRl
        c2NlbmRhbnQgY29udGFpbmVycyBhbmQgYWxsCiAgICAgICAgdGhlaXIgbWFu
        YWdlZCBvYmplY3RzLgoKICAgICAgICBAbWV0aG9kIGRlc3Ryb3kKICAgICAg
        Ki8KICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5p
        c0Rlc3Ryb3llZCA9IHRydWU7CgogICAgICAgIGZvciAodmFyIGk9MCwgbD10
        aGlzLmNoaWxkcmVuLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHRo
        aXMuY2hpbGRyZW5baV0uZGVzdHJveSgpOwogICAgICAgIH0KCiAgICAgICAg
        dGhpcy5jaGlsZHJlbiA9IFtdOwoKICAgICAgICBlYWNoRGVzdHJveWFibGUo
        dGhpcywgZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgaXRlbS5kZXN0cm95
        KCk7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMucGFyZW50ID0gdW5kZWZp
        bmVkOwogICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlOwogICAgICB9
        LAoKICAgICAgLyoqCiAgICAgICAgQG1ldGhvZCByZXNldAogICAgICAqLwog
        ICAgICByZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgZm9yICh2YXIgaT0w
        LCBsPXRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAg
        ICAgcmVzZXRDYWNoZSh0aGlzLmNoaWxkcmVuW2ldKTsKICAgICAgICB9CiAg
        ICAgICAgcmVzZXRDYWNoZSh0aGlzKTsKICAgICAgfQogICAgfTsKCiAgICBm
        dW5jdGlvbiBpbGxlZ2FsQ2hpbGRPcGVyYXRpb24ob3BlcmF0aW9uKSB7CiAg
        ICAgIHRocm93IG5ldyBFcnJvcihvcGVyYXRpb24gKyAiIGlzIG5vdCBjdXJy
        ZW50bHkgc3VwcG9ydGVkIG9uIGNoaWxkIGNvbnRhaW5lcnMiKTsKICAgIH0K
        CiAgICBmdW5jdGlvbiBpc1NpbmdsZXRvbihjb250YWluZXIsIGZ1bGxOYW1l
        KSB7CiAgICAgIHZhciBzaW5nbGV0b24gPSBvcHRpb24oY29udGFpbmVyLCBm
        dWxsTmFtZSwgJ3NpbmdsZXRvbicpOwoKICAgICAgcmV0dXJuIHNpbmdsZXRv
        biAhPT0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gYnVpbGRJbmplY3Rp
        b25zKGNvbnRhaW5lciwgaW5qZWN0aW9ucykgewogICAgICB2YXIgaGFzaCA9
        IHt9OwoKICAgICAgaWYgKCFpbmplY3Rpb25zKSB7IHJldHVybiBoYXNoOyB9
        CgogICAgICB2YXIgaW5qZWN0aW9uLCBsb29rdXA7CgogICAgICBmb3IgKHZh
        ciBpPTAsIGw9aW5qZWN0aW9ucy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAg
        ICAgaW5qZWN0aW9uID0gaW5qZWN0aW9uc1tpXTsKICAgICAgICBsb29rdXAg
        PSBjb250YWluZXIubG9va3VwKGluamVjdGlvbi5mdWxsTmFtZSk7CgogICAg
        ICAgIGlmIChsb29rdXAgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaGFz
        aFtpbmplY3Rpb24ucHJvcGVydHldID0gbG9va3VwOwogICAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRpbmcgdG8g
        aW5qZWN0IGFuIHVua25vd24gaW5qZWN0aW9uOiBgJyArIGluamVjdGlvbi5m
        dWxsTmFtZSArICdgJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1
        cm4gaGFzaDsKICAgIH0KCiAgICBmdW5jdGlvbiBvcHRpb24oY29udGFpbmVy
        LCBmdWxsTmFtZSwgb3B0aW9uTmFtZSkgewogICAgICB2YXIgb3B0aW9ucyA9
        IGNvbnRhaW5lci5fb3B0aW9ucy5nZXQoZnVsbE5hbWUpOwoKICAgICAgaWYg
        KG9wdGlvbnMgJiYgb3B0aW9uc1tvcHRpb25OYW1lXSAhPT0gdW5kZWZpbmVk
        KSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnNbb3B0aW9uTmFtZV07CiAgICAg
        IH0KCiAgICAgIHZhciB0eXBlID0gZnVsbE5hbWUuc3BsaXQoIjoiKVswXTsK
        ICAgICAgb3B0aW9ucyA9IGNvbnRhaW5lci5fdHlwZU9wdGlvbnMuZ2V0KHR5
        cGUpOwoKICAgICAgaWYgKG9wdGlvbnMpIHsKICAgICAgICByZXR1cm4gb3B0
        aW9uc1tvcHRpb25OYW1lXTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9u
        IGZhY3RvcnlGb3IoY29udGFpbmVyLCBmdWxsTmFtZSkgewogICAgICB2YXIg
        bmFtZSA9IGNvbnRhaW5lci5ub3JtYWxpemUoZnVsbE5hbWUpOwogICAgICB2
        YXIgZmFjdG9yeSA9IGNvbnRhaW5lci5yZXNvbHZlKG5hbWUpOwogICAgICB2
        YXIgaW5qZWN0ZWRGYWN0b3J5OwogICAgICB2YXIgY2FjaGUgPSBjb250YWlu
        ZXIuZmFjdG9yeUNhY2hlOwogICAgICB2YXIgdHlwZSA9IGZ1bGxOYW1lLnNw
        bGl0KCI6IilbMF07CgogICAgICBpZiAoZmFjdG9yeSA9PT0gdW5kZWZpbmVk
        KSB7IHJldHVybjsgfQoKICAgICAgaWYgKGNhY2hlLmhhcyhmdWxsTmFtZSkp
        IHsKICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KGZ1bGxOYW1lKTsKICAgICAg
        fQoKICAgICAgaWYgKCFmYWN0b3J5IHx8IHR5cGVvZiBmYWN0b3J5LmV4dGVu
        ZCAhPT0gJ2Z1bmN0aW9uJyB8fCAoIUVtYmVyLk1PREVMX0ZBQ1RPUllfSU5K
        RUNUSU9OUyAmJiB0eXBlID09PSAnbW9kZWwnKSkgewogICAgICAgIC8vIFRP
        RE86IHRoaW5rIGFib3V0IGEgJ3NhZmUnIG1lcmdlIHN0eWxlIGV4dGVuc2lv
        bgogICAgICAgIC8vIGZvciBub3cganVzdCBmYWxsYmFjayB0byBjcmVhdGUg
        dGltZSBpbmplY3Rpb24KICAgICAgICByZXR1cm4gZmFjdG9yeTsKICAgICAg
        fSBlbHNlIHsKCiAgICAgICAgdmFyIGluamVjdGlvbnMgICAgICAgID0gaW5q
        ZWN0aW9uc0Zvcihjb250YWluZXIsIGZ1bGxOYW1lKTsKICAgICAgICB2YXIg
        ZmFjdG9yeUluamVjdGlvbnMgPSBmYWN0b3J5SW5qZWN0aW9uc0Zvcihjb250
        YWluZXIsIGZ1bGxOYW1lKTsKCiAgICAgICAgZmFjdG9yeUluamVjdGlvbnMu
        X3RvU3RyaW5nID0gY29udGFpbmVyLm1ha2VUb1N0cmluZyhmYWN0b3J5LCBm
        dWxsTmFtZSk7CgogICAgICAgIGluamVjdGVkRmFjdG9yeSA9IGZhY3Rvcnku
        ZXh0ZW5kKGluamVjdGlvbnMpOwogICAgICAgIGluamVjdGVkRmFjdG9yeS5y
        ZW9wZW5DbGFzcyhmYWN0b3J5SW5qZWN0aW9ucyk7CgogICAgICAgIGNhY2hl
        LnNldChmdWxsTmFtZSwgaW5qZWN0ZWRGYWN0b3J5KTsKCiAgICAgICAgcmV0
        dXJuIGluamVjdGVkRmFjdG9yeTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0
        aW9uIGluamVjdGlvbnNGb3IoY29udGFpbmVyICxmdWxsTmFtZSkgewogICAg
        ICB2YXIgc3BsaXROYW1lID0gZnVsbE5hbWUuc3BsaXQoIjoiKSwKICAgICAg
        ICB0eXBlID0gc3BsaXROYW1lWzBdLAogICAgICAgIGluamVjdGlvbnMgPSBb
        XTsKCiAgICAgIGluamVjdGlvbnMgPSBpbmplY3Rpb25zLmNvbmNhdChjb250
        YWluZXIudHlwZUluamVjdGlvbnMuZ2V0KHR5cGUpIHx8IFtdKTsKICAgICAg
        aW5qZWN0aW9ucyA9IGluamVjdGlvbnMuY29uY2F0KGNvbnRhaW5lci5pbmpl
        Y3Rpb25zW2Z1bGxOYW1lXSB8fCBbXSk7CgogICAgICBpbmplY3Rpb25zID0g
        YnVpbGRJbmplY3Rpb25zKGNvbnRhaW5lciwgaW5qZWN0aW9ucyk7CiAgICAg
        IGluamVjdGlvbnMuX2RlYnVnQ29udGFpbmVyS2V5ID0gZnVsbE5hbWU7CiAg
        ICAgIGluamVjdGlvbnMuY29udGFpbmVyID0gY29udGFpbmVyOwoKICAgICAg
        cmV0dXJuIGluamVjdGlvbnM7CiAgICB9CgogICAgZnVuY3Rpb24gZmFjdG9y
        eUluamVjdGlvbnNGb3IoY29udGFpbmVyLCBmdWxsTmFtZSkgewogICAgICB2
        YXIgc3BsaXROYW1lID0gZnVsbE5hbWUuc3BsaXQoIjoiKSwKICAgICAgICB0
        eXBlID0gc3BsaXROYW1lWzBdLAogICAgICAgIGZhY3RvcnlJbmplY3Rpb25z
        ID0gW107CgogICAgICBmYWN0b3J5SW5qZWN0aW9ucyA9IGZhY3RvcnlJbmpl
        Y3Rpb25zLmNvbmNhdChjb250YWluZXIuZmFjdG9yeVR5cGVJbmplY3Rpb25z
        LmdldCh0eXBlKSB8fCBbXSk7CiAgICAgIGZhY3RvcnlJbmplY3Rpb25zID0g
        ZmFjdG9yeUluamVjdGlvbnMuY29uY2F0KGNvbnRhaW5lci5mYWN0b3J5SW5q
        ZWN0aW9uc1tmdWxsTmFtZV0gfHwgW10pOwoKICAgICAgZmFjdG9yeUluamVj
        dGlvbnMgPSBidWlsZEluamVjdGlvbnMoY29udGFpbmVyLCBmYWN0b3J5SW5q
        ZWN0aW9ucyk7CiAgICAgIGZhY3RvcnlJbmplY3Rpb25zLl9kZWJ1Z0NvbnRh
        aW5lcktleSA9IGZ1bGxOYW1lOwoKICAgICAgcmV0dXJuIGZhY3RvcnlJbmpl
        Y3Rpb25zOwogICAgfQoKICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlKGNvbnRh
        aW5lciwgZnVsbE5hbWUpIHsKICAgICAgdmFyIGZhY3RvcnkgPSBmYWN0b3J5
        Rm9yKGNvbnRhaW5lciwgZnVsbE5hbWUpOwoKICAgICAgaWYgKG9wdGlvbihj
        b250YWluZXIsIGZ1bGxOYW1lLCAnaW5zdGFudGlhdGUnKSA9PT0gZmFsc2Up
        IHsKICAgICAgICByZXR1cm4gZmFjdG9yeTsKICAgICAgfQoKICAgICAgaWYg
        KGZhY3RvcnkpIHsKICAgICAgICBpZiAodHlwZW9mIGZhY3RvcnkuZXh0ZW5k
        ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAvLyBhc3N1bWUgdGhlIGZh
        Y3Rvcnkgd2FzIGV4dGVuZGFibGUgYW5kIGlzIGFscmVhZHkgaW5qZWN0ZWQK
        ICAgICAgICAgIHJldHVybiBmYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICAvLyBhc3N1bWUgdGhlIGZhY3Rvcnkgd2FzIGV4
        dGVuZGFibGUKICAgICAgICAgIC8vIHRvIGNyZWF0ZSB0aW1lIGluamVjdGlv
        bnMKICAgICAgICAgIC8vIFRPRE86IHN1cHBvcnQgbmV3J2luZyBmb3IgaW5z
        dGFudGlhdGlvbiBhbmQgbWVyZ2UgaW5qZWN0aW9ucyBmb3IgcHVyZSBKUyBG
        dW5jdGlvbnMKICAgICAgICAgIHJldHVybiBmYWN0b3J5LmNyZWF0ZShpbmpl
        Y3Rpb25zRm9yKGNvbnRhaW5lciwgZnVsbE5hbWUpKTsKICAgICAgICB9CiAg
        ICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBlYWNoRGVzdHJveWFibGUoY29u
        dGFpbmVyLCBjYWxsYmFjaykgewogICAgICBjb250YWluZXIuY2FjaGUuZWFj
        aExvY2FsKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAgICBpZiAob3B0
        aW9uKGNvbnRhaW5lciwga2V5LCAnaW5zdGFudGlhdGUnKSA9PT0gZmFsc2Up
        IHsgcmV0dXJuOyB9CiAgICAgICAgY2FsbGJhY2sodmFsdWUpOwogICAgICB9
        KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXNldENhY2hlKGNvbnRhaW5lcikg
        ewogICAgICBjb250YWluZXIuY2FjaGUuZWFjaExvY2FsKGZ1bmN0aW9uKGtl
        eSwgdmFsdWUpIHsKICAgICAgICBpZiAob3B0aW9uKGNvbnRhaW5lciwga2V5
        LCAnaW5zdGFudGlhdGUnKSA9PT0gZmFsc2UpIHsgcmV0dXJuOyB9CiAgICAg
        ICAgdmFsdWUuZGVzdHJveSgpOwogICAgICB9KTsKICAgICAgY29udGFpbmVy
        LmNhY2hlLmRpY3QgPSB7fTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRUeXBl
        SW5qZWN0aW9uKHJ1bGVzLCB0eXBlLCBwcm9wZXJ0eSwgZnVsbE5hbWUpIHsK
        ICAgICAgdmFyIGluamVjdGlvbnMgPSBydWxlcy5nZXQodHlwZSk7CgogICAg
        ICBpZiAoIWluamVjdGlvbnMpIHsKICAgICAgICBpbmplY3Rpb25zID0gW107
        CiAgICAgICAgcnVsZXMuc2V0KHR5cGUsIGluamVjdGlvbnMpOwogICAgICB9
        CgogICAgICBpbmplY3Rpb25zLnB1c2goewogICAgICAgIHByb3BlcnR5OiBw
        cm9wZXJ0eSwKICAgICAgICBmdWxsTmFtZTogZnVsbE5hbWUKICAgICAgfSk7
        CiAgICB9CgogICAgZnVuY3Rpb24gYWRkSW5qZWN0aW9uKHJ1bGVzLCBmYWN0
        b3J5TmFtZSwgcHJvcGVydHksIGluamVjdGlvbk5hbWUpIHsKICAgICAgdmFy
        IGluamVjdGlvbnMgPSBydWxlc1tmYWN0b3J5TmFtZV0gPSBydWxlc1tmYWN0
        b3J5TmFtZV0gfHwgW107CiAgICAgIGluamVjdGlvbnMucHVzaCh7IHByb3Bl
        cnR5OiBwcm9wZXJ0eSwgZnVsbE5hbWU6IGluamVjdGlvbk5hbWUgfSk7CiAg
        ICB9CgogICAgcmV0dXJuIENvbnRhaW5lcjsKfSk7Cgp9KSgpOwoKKGZ1bmN0
        aW9uKCkgewovKmdsb2JhbHMgRU5WICovCi8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGluZGV4T2YgPSBFbWJl
        ci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKCi8qKgogVGhpcyB3aWxsIGNv
        bXBhcmUgdHdvIGphdmFzY3JpcHQgdmFsdWVzIG9mIHBvc3NpYmx5IGRpZmZl
        cmVudCB0eXBlcy4KIEl0IHdpbGwgdGVsbCB5b3Ugd2hpY2ggb25lIGlzIGdy
        ZWF0ZXIgdGhhbiB0aGUgb3RoZXIgYnkgcmV0dXJuaW5nOgoKICAtIC0xIGlm
        IHRoZSBmaXJzdCBpcyBzbWFsbGVyIHRoYW4gdGhlIHNlY29uZCwKICAtIDAg
        aWYgYm90aCBhcmUgZXF1YWwsCiAgLSAxIGlmIHRoZSBmaXJzdCBpcyBncmVh
        dGVyIHRoYW4gdGhlIHNlY29uZC4KCiBUaGUgb3JkZXIgaXMgY2FsY3VsYXRl
        ZCBiYXNlZCBvbiBgRW1iZXIuT1JERVJfREVGSU5JVElPTmAsIGlmIHR5cGVz
        IGFyZSBkaWZmZXJlbnQuCiBJbiBjYXNlIHRoZXkgaGF2ZSB0aGUgc2FtZSB0
        eXBlIGFuIGFwcHJvcHJpYXRlIGNvbXBhcmlzb24gZm9yIHRoaXMgdHlwZSBp
        cyBtYWRlLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuY29tcGFyZSgnaGVs
        bG8nLCAnaGVsbG8nKTsgIC8vIDAKICBFbWJlci5jb21wYXJlKCdhYmMnLCAn
        ZGZnJyk7ICAgICAgLy8gLTEKICBFbWJlci5jb21wYXJlKDIsIDEpOyAgICAg
        ICAgICAgICAgLy8gMQogIGBgYAoKIEBtZXRob2QgY29tcGFyZQogQGZvciBF
        bWJlcgogQHBhcmFtIHtPYmplY3R9IHYgRmlyc3QgdmFsdWUgdG8gY29tcGFy
        ZQogQHBhcmFtIHtPYmplY3R9IHcgU2Vjb25kIHZhbHVlIHRvIGNvbXBhcmUK
        IEByZXR1cm4ge051bWJlcn0gLTEgaWYgdiA8IHcsIDAgaWYgdiA9IHcgYW5k
        IDEgaWYgdiA+IHcuCiovCkVtYmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21w
        YXJlKHYsIHcpIHsKICBpZiAodiA9PT0gdykgeyByZXR1cm4gMDsgfQoKICB2
        YXIgdHlwZTEgPSBFbWJlci50eXBlT2Yodik7CiAgdmFyIHR5cGUyID0gRW1i
        ZXIudHlwZU9mKHcpOwoKICB2YXIgQ29tcGFyYWJsZSA9IEVtYmVyLkNvbXBh
        cmFibGU7CiAgaWYgKENvbXBhcmFibGUpIHsKICAgIGlmICh0eXBlMT09PSdp
        bnN0YW5jZScgJiYgQ29tcGFyYWJsZS5kZXRlY3Qodi5jb25zdHJ1Y3Rvcikp
        IHsKICAgICAgcmV0dXJuIHYuY29uc3RydWN0b3IuY29tcGFyZSh2LCB3KTsK
        ICAgIH0KCiAgICBpZiAodHlwZTIgPT09ICdpbnN0YW5jZScgJiYgQ29tcGFy
        YWJsZS5kZXRlY3Qody5jb25zdHJ1Y3RvcikpIHsKICAgICAgcmV0dXJuIDEt
        dy5jb25zdHJ1Y3Rvci5jb21wYXJlKHcsIHYpOwogICAgfQogIH0KCiAgLy8g
        SWYgd2UgaGF2ZW4ndCB5ZXQgZ2VuZXJhdGVkIGEgcmV2ZXJzZS1tYXBwaW5n
        IG9mIEVtYmVyLk9SREVSX0RFRklOSVRJT04sCiAgLy8gZG8gc28gbm93Lgog
        IHZhciBtYXBwaW5nID0gRW1iZXIuT1JERVJfREVGSU5JVElPTl9NQVBQSU5H
        OwogIGlmICghbWFwcGluZykgewogICAgdmFyIG9yZGVyID0gRW1iZXIuT1JE
        RVJfREVGSU5JVElPTjsKICAgIG1hcHBpbmcgPSBFbWJlci5PUkRFUl9ERUZJ
        TklUSU9OX01BUFBJTkcgPSB7fTsKICAgIHZhciBpZHgsIGxlbjsKICAgIGZv
        ciAoaWR4ID0gMCwgbGVuID0gb3JkZXIubGVuZ3RoOyBpZHggPCBsZW47ICAr
        K2lkeCkgewogICAgICBtYXBwaW5nW29yZGVyW2lkeF1dID0gaWR4OwogICAg
        fQoKICAgIC8vIFdlIG5vIGxvbmdlciBuZWVkIEVtYmVyLk9SREVSX0RFRklO
        SVRJT04uCiAgICBkZWxldGUgRW1iZXIuT1JERVJfREVGSU5JVElPTjsKICB9
        CgogIHZhciB0eXBlMUluZGV4ID0gbWFwcGluZ1t0eXBlMV07CiAgdmFyIHR5
        cGUySW5kZXggPSBtYXBwaW5nW3R5cGUyXTsKCiAgaWYgKHR5cGUxSW5kZXgg
        PCB0eXBlMkluZGV4KSB7IHJldHVybiAtMTsgfQogIGlmICh0eXBlMUluZGV4
        ID4gdHlwZTJJbmRleCkgeyByZXR1cm4gMTsgfQoKICAvLyB0eXBlcyBhcmUg
        ZXF1YWwgLSBzbyB3ZSBoYXZlIHRvIGNoZWNrIHZhbHVlcyBub3cKICBzd2l0
        Y2ggKHR5cGUxKSB7CiAgICBjYXNlICdib29sZWFuJzoKICAgIGNhc2UgJ251
        bWJlcic6CiAgICAgIGlmICh2IDwgdykgeyByZXR1cm4gLTE7IH0KICAgICAg
        aWYgKHYgPiB3KSB7IHJldHVybiAxOyB9CiAgICAgIHJldHVybiAwOwoKICAg
        IGNhc2UgJ3N0cmluZyc6CiAgICAgIHZhciBjb21wID0gdi5sb2NhbGVDb21w
        YXJlKHcpOwogICAgICBpZiAoY29tcCA8IDApIHsgcmV0dXJuIC0xOyB9CiAg
        ICAgIGlmIChjb21wID4gMCkgeyByZXR1cm4gMTsgfQogICAgICByZXR1cm4g
        MDsKCiAgICBjYXNlICdhcnJheSc6CiAgICAgIHZhciB2TGVuID0gdi5sZW5n
        dGg7CiAgICAgIHZhciB3TGVuID0gdy5sZW5ndGg7CiAgICAgIHZhciBsID0g
        TWF0aC5taW4odkxlbiwgd0xlbik7CiAgICAgIHZhciByID0gMDsKICAgICAg
        dmFyIGkgPSAwOwogICAgICB3aGlsZSAociA9PT0gMCAmJiBpIDwgbCkgewog
        ICAgICAgIHIgPSBjb21wYXJlKHZbaV0sd1tpXSk7CiAgICAgICAgaSsrOwog
        ICAgICB9CiAgICAgIGlmIChyICE9PSAwKSB7IHJldHVybiByOyB9CgogICAg
        ICAvLyBhbGwgZWxlbWVudHMgYXJlIGVxdWFsIG5vdwogICAgICAvLyBzaG9y
        dGVyIGFycmF5IHNob3VsZCBiZSBvcmRlcmVkIGZpcnN0CiAgICAgIGlmICh2
        TGVuIDwgd0xlbikgeyByZXR1cm4gLTE7IH0KICAgICAgaWYgKHZMZW4gPiB3
        TGVuKSB7IHJldHVybiAxOyB9CiAgICAgIC8vIGFycmF5cyBhcmUgZXF1YWwg
        bm93CiAgICAgIHJldHVybiAwOwoKICAgIGNhc2UgJ2luc3RhbmNlJzoKICAg
        ICAgaWYgKEVtYmVyLkNvbXBhcmFibGUgJiYgRW1iZXIuQ29tcGFyYWJsZS5k
        ZXRlY3QodikpIHsKICAgICAgICByZXR1cm4gdi5jb21wYXJlKHYsIHcpOwog
        ICAgICB9CiAgICAgIHJldHVybiAwOwoKICAgIGNhc2UgJ2RhdGUnOgogICAg
        ICB2YXIgdk51bSA9IHYuZ2V0VGltZSgpOwogICAgICB2YXIgd051bSA9IHcu
        Z2V0VGltZSgpOwogICAgICBpZiAodk51bSA8IHdOdW0pIHsgcmV0dXJuIC0x
        OyB9CiAgICAgIGlmICh2TnVtID4gd051bSkgeyByZXR1cm4gMTsgfQogICAg
        ICByZXR1cm4gMDsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gMDsKICB9
        Cn07CgpmdW5jdGlvbiBfY29weShvYmosIGRlZXAsIHNlZW4sIGNvcGllcykg
        ewogIHZhciByZXQsIGxvYywga2V5OwoKICAvLyBwcmltaXRpdmUgZGF0YSB0
        eXBlcyBhcmUgaW1tdXRhYmxlLCBqdXN0IHJldHVybiB0aGVtLgogIGlmICgn
        b2JqZWN0JyAhPT0gdHlwZW9mIG9iaiB8fCBvYmo9PT1udWxsKSByZXR1cm4g
        b2JqOwoKICAvLyBhdm9pZCBjeWNsaWNhbCBsb29wcwogIGlmIChkZWVwICYm
        IChsb2M9aW5kZXhPZihzZWVuLCBvYmopKT49MCkgcmV0dXJuIGNvcGllc1ts
        b2NdOwoKICBFbWJlci5hc3NlcnQoJ0Nhbm5vdCBjbG9uZSBhbiBFbWJlci5P
        YmplY3QgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgRW1iZXIuQ29weWFibGUn
        LCAhKG9iaiBpbnN0YW5jZW9mIEVtYmVyLk9iamVjdCkgfHwgKEVtYmVyLkNv
        cHlhYmxlICYmIEVtYmVyLkNvcHlhYmxlLmRldGVjdChvYmopKSk7CgogIC8v
        IElNUE9SVEFOVDogdGhpcyBzcGVjaWZpYyB0ZXN0IHdpbGwgZGV0ZWN0IGEg
        bmF0aXZlIGFycmF5IG9ubHkuIEFueSBvdGhlcgogIC8vIG9iamVjdCB3aWxs
        IG5lZWQgdG8gaW1wbGVtZW50IENvcHlhYmxlLgogIGlmIChFbWJlci50eXBl
        T2Yob2JqKSA9PT0gJ2FycmF5JykgewogICAgcmV0ID0gb2JqLnNsaWNlKCk7
        CiAgICBpZiAoZGVlcCkgewogICAgICBsb2MgPSByZXQubGVuZ3RoOwogICAg
        ICB3aGlsZSgtLWxvYz49MCkgcmV0W2xvY10gPSBfY29weShyZXRbbG9jXSwg
        ZGVlcCwgc2VlbiwgY29waWVzKTsKICAgIH0KICB9IGVsc2UgaWYgKEVtYmVy
        LkNvcHlhYmxlICYmIEVtYmVyLkNvcHlhYmxlLmRldGVjdChvYmopKSB7CiAg
        ICByZXQgPSBvYmouY29weShkZWVwLCBzZWVuLCBjb3BpZXMpOwogIH0gZWxz
        ZSB7CiAgICByZXQgPSB7fTsKICAgIGZvcihrZXkgaW4gb2JqKSB7CiAgICAg
        IGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlOwoKICAg
        ICAgLy8gUHJldmVudHMgYnJvd3NlcnMgdGhhdCBkb24ndCByZXNwZWN0IG5v
        bi1lbnVtZXJhYmlsaXR5IGZyb20KICAgICAgLy8gY29weWluZyBpbnRlcm5h
        bCBFbWJlciBwcm9wZXJ0aWVzCiAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAs
        MikgPT09ICdfXycpIGNvbnRpbnVlOwoKICAgICAgcmV0W2tleV0gPSBkZWVw
        ID8gX2NvcHkob2JqW2tleV0sIGRlZXAsIHNlZW4sIGNvcGllcykgOiBvYmpb
        a2V5XTsKICAgIH0KICB9CgogIGlmIChkZWVwKSB7CiAgICBzZWVuLnB1c2go
        b2JqKTsKICAgIGNvcGllcy5wdXNoKHJldCk7CiAgfQoKICByZXR1cm4gcmV0
        Owp9CgovKioKICBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIHBhc3NlZCBvYmpl
        Y3QuIFRoaXMgZnVuY3Rpb24gY2FuIHRha2UganVzdCBhYm91dAogIGFueSB0
        eXBlIG9mIG9iamVjdCBhbmQgY3JlYXRlIGEgY2xvbmUgb2YgaXQsIGluY2x1
        ZGluZyBwcmltaXRpdmUgdmFsdWVzCiAgKHdoaWNoIGFyZSBub3QgYWN0dWFs
        bHkgY2xvbmVkIGJlY2F1c2UgdGhleSBhcmUgaW1tdXRhYmxlKS4KCiAgSWYg
        dGhlIHBhc3NlZCBvYmplY3QgaW1wbGVtZW50cyB0aGUgYGNsb25lKClgIG1l
        dGhvZCwgdGhlbiB0aGlzIGZ1bmN0aW9uCiAgd2lsbCBzaW1wbHkgY2FsbCB0
        aGF0IG1ldGhvZCBhbmQgcmV0dXJuIHRoZSByZXN1bHQuCgogIEBtZXRob2Qg
        Y29weQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBv
        YmplY3QgdG8gY2xvbmUKICBAcGFyYW0ge0Jvb2xlYW59IGRlZXAgSWYgdHJ1
        ZSwgYSBkZWVwIGNvcHkgb2YgdGhlIG9iamVjdCBpcyBtYWRlCiAgQHJldHVy
        biB7T2JqZWN0fSBUaGUgY2xvbmVkIG9iamVjdAoqLwpFbWJlci5jb3B5ID0g
        ZnVuY3Rpb24ob2JqLCBkZWVwKSB7CiAgLy8gZmFzdCBwYXRocwogIGlmICgn
        b2JqZWN0JyAhPT0gdHlwZW9mIG9iaiB8fCBvYmo9PT1udWxsKSByZXR1cm4g
        b2JqOyAvLyBjYW4ndCBjb3B5IHByaW1pdGl2ZXMKICBpZiAoRW1iZXIuQ29w
        eWFibGUgJiYgRW1iZXIuQ29weWFibGUuZGV0ZWN0KG9iaikpIHJldHVybiBv
        YmouY29weShkZWVwKTsKICByZXR1cm4gX2NvcHkob2JqLCBkZWVwLCBkZWVw
        ID8gW10gOiBudWxsLCBkZWVwID8gW10gOiBudWxsKTsKfTsKCi8qKgogIENv
        bnZlbmllbmNlIG1ldGhvZCB0byBpbnNwZWN0IGFuIG9iamVjdC4gVGhpcyBt
        ZXRob2Qgd2lsbCBhdHRlbXB0IHRvCiAgY29udmVydCB0aGUgb2JqZWN0IGlu
        dG8gYSB1c2VmdWwgc3RyaW5nIGRlc2NyaXB0aW9uLgoKICBJdCBpcyBhIHBy
        ZXR0eSBzaW1wbGUgaW1wbGVtZW50YXRpb24uIElmIHlvdSB3YW50IHNvbWV0
        aGluZyBtb3JlIHJvYnVzdCwKICB1c2Ugc29tZXRoaW5nIGxpa2UgSlNEdW1w
        OiBodHRwczovL2dpdGh1Yi5jb20vTlYvanNEdW1wCgogIEBtZXRob2QgaW5z
        cGVjdAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBv
        YmplY3QgeW91IHdhbnQgdG8gaW5zcGVjdC4KICBAcmV0dXJuIHtTdHJpbmd9
        IEEgZGVzY3JpcHRpb24gb2YgdGhlIG9iamVjdAoqLwpFbWJlci5pbnNwZWN0
        ID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIHR5cGUgPSBFbWJlci50eXBlT2Yo
        b2JqKTsKICBpZiAodHlwZSA9PT0gJ2FycmF5JykgewogICAgcmV0dXJuICdb
        JyArIG9iaiArICddJzsKICB9CiAgaWYgKHR5cGUgIT09ICdvYmplY3QnKSB7
        CiAgICByZXR1cm4gb2JqICsgJyc7CiAgfQoKICB2YXIgdiwgcmV0ID0gW107
        CiAgZm9yKHZhciBrZXkgaW4gb2JqKSB7CiAgICBpZiAob2JqLmhhc093blBy
        b3BlcnR5KGtleSkpIHsKICAgICAgdiA9IG9ialtrZXldOwogICAgICBpZiAo
        diA9PT0gJ3RvU3RyaW5nJykgeyBjb250aW51ZTsgfSAvLyBpZ25vcmUgdXNl
        bGVzcyBpdGVtcwogICAgICBpZiAoRW1iZXIudHlwZU9mKHYpID09PSAnZnVu
        Y3Rpb24nKSB7IHYgPSAiZnVuY3Rpb24oKSB7IC4uLiB9IjsgfQogICAgICBy
        ZXQucHVzaChrZXkgKyAiOiAiICsgdik7CiAgICB9CiAgfQogIHJldHVybiAi
        eyIgKyByZXQuam9pbigiLCAiKSArICJ9IjsKfTsKCi8qKgogIENvbXBhcmVz
        IHR3byBvYmplY3RzLCByZXR1cm5pbmcgdHJ1ZSBpZiB0aGV5IGFyZSBsb2dp
        Y2FsbHkgZXF1YWwuIFRoaXMgaXMKICBhIGRlZXBlciBjb21wYXJpc29uIHRo
        YW4gYSBzaW1wbGUgdHJpcGxlIGVxdWFsLiBGb3Igc2V0cyBpdCB3aWxsIGNv
        bXBhcmUgdGhlCiAgaW50ZXJuYWwgb2JqZWN0cy4gRm9yIGFueSBvdGhlciBv
        YmplY3QgdGhhdCBpbXBsZW1lbnRzIGBpc0VxdWFsKClgIGl0IHdpbGwKICBy
        ZXNwZWN0IHRoYXQgbWV0aG9kLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        aXNFcXVhbCgnaGVsbG8nLCAnaGVsbG8nKTsgIC8vIHRydWUKICBFbWJlci5p
        c0VxdWFsKDEsIDIpOyAgICAgICAgICAgICAgLy8gZmFsc2UKICBFbWJlci5p
        c0VxdWFsKFs0LDJdLCBbNCwyXSk7ICAgICAgLy8gZmFsc2UKICBgYGAKCiAg
        QG1ldGhvZCBpc0VxdWFsCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0
        fSBhIGZpcnN0IG9iamVjdCB0byBjb21wYXJlCiAgQHBhcmFtIHtPYmplY3R9
        IGIgc2Vjb25kIG9iamVjdCB0byBjb21wYXJlCiAgQHJldHVybiB7Qm9vbGVh
        bn0KKi8KRW1iZXIuaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHsKICBpZiAo
        YSAmJiAnZnVuY3Rpb24nPT09dHlwZW9mIGEuaXNFcXVhbCkgcmV0dXJuIGEu
        aXNFcXVhbChiKTsKICByZXR1cm4gYSA9PT0gYjsKfTsKCi8vIFVzZWQgYnkg
        RW1iZXIuY29tcGFyZQpFbWJlci5PUkRFUl9ERUZJTklUSU9OID0gRW1iZXIu
        RU5WLk9SREVSX0RFRklOSVRJT04gfHwgWwogICd1bmRlZmluZWQnLAogICdu
        dWxsJywKICAnYm9vbGVhbicsCiAgJ251bWJlcicsCiAgJ3N0cmluZycsCiAg
        J2FycmF5JywKICAnb2JqZWN0JywKICAnaW5zdGFuY2UnLAogICdmdW5jdGlv
        bicsCiAgJ2NsYXNzJywKICAnZGF0ZScKXTsKCi8qKgogIFJldHVybnMgYWxs
        IG9mIHRoZSBrZXlzIGRlZmluZWQgb24gYW4gb2JqZWN0IG9yIGhhc2guIFRo
        aXMgaXMgdXNlZnVsCiAgd2hlbiBpbnNwZWN0aW5nIG9iamVjdHMgZm9yIGRl
        YnVnZ2luZy4gT24gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGl0LCB0aGlzCiAg
        dXNlcyB0aGUgbmF0aXZlIGBPYmplY3Qua2V5c2AgaW1wbGVtZW50YXRpb24u
        CgogIEBtZXRob2Qga2V5cwogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVj
        dH0gb2JqCiAgQHJldHVybiB7QXJyYXl9IEFycmF5IGNvbnRhaW5pbmcga2V5
        cyBvZiBvYmoKKi8KRW1iZXIua2V5cyA9IE9iamVjdC5rZXlzOwoKaWYgKCFF
        bWJlci5rZXlzIHx8IEVtYmVyLmNyZWF0ZS5pc1NpbXVsYXRlZCkgewogIHZh
        ciBwcm90b3R5cGVQcm9wZXJ0aWVzID0gWwogICAgJ2NvbnN0cnVjdG9yJywK
        ICAgICdoYXNPd25Qcm9wZXJ0eScsCiAgICAnaXNQcm90b3R5cGVPZicsCiAg
        ICAncHJvcGVydHlJc0VudW1lcmFibGUnLAogICAgJ3ZhbHVlT2YnLAogICAg
        J3RvTG9jYWxlU3RyaW5nJywKICAgICd0b1N0cmluZycKICBdLAogIHB1c2hQ
        cm9wZXJ0eU5hbWUgPSBmdW5jdGlvbihvYmosIGFycmF5LCBrZXkpIHsKICAg
        IC8vIFByZXZlbnRzIGJyb3dzZXJzIHRoYXQgZG9uJ3QgcmVzcGVjdCBub24t
        ZW51bWVyYWJpbGl0eSBmcm9tCiAgICAvLyBjb3B5aW5nIGludGVybmFsIEVt
        YmVyIHByb3BlcnRpZXMKICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsMikgPT09
        ICdfXycpIHJldHVybjsKICAgIGlmIChrZXkgPT09ICdfc3VwZXInKSByZXR1
        cm47CiAgICBpZiAoaW5kZXhPZihhcnJheSwga2V5KSA+PSAwKSByZXR1cm47
        CiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSByZXR1cm47Cgog
        ICAgYXJyYXkucHVzaChrZXkpOwogIH07CgogIEVtYmVyLmtleXMgPSBmdW5j
        dGlvbihvYmopIHsKICAgIHZhciByZXQgPSBbXSwga2V5OwogICAgZm9yIChr
        ZXkgaW4gb2JqKSB7CiAgICAgIHB1c2hQcm9wZXJ0eU5hbWUob2JqLCByZXQs
        IGtleSk7CiAgICB9CgogICAgLy8gSUU4IGRvZXNuJ3QgZW51bWVyYXRlIHBy
        b3BlcnR5IHRoYXQgbmFtZWQgdGhlIHNhbWUgYXMgcHJvdG90eXBlIHByb3Bl
        cnRpZXMuCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHByb3RvdHlwZVByb3Bl
        cnRpZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGtleSA9IHByb3Rv
        dHlwZVByb3BlcnRpZXNbaV07CgogICAgICBwdXNoUHJvcGVydHlOYW1lKG9i
        aiwgcmV0LCBrZXkpOwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfTsKfQoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3Vi
        bW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8vIC4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8g
        SEVMUEVSUwovLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIu
        c2V0Owp2YXIgYV9zbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKdmFy
        IGFfaW5kZXhPZiA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9mOwoK
        dmFyIGNvbnRleHRzID0gW107CgpmdW5jdGlvbiBwb3BDdHgoKSB7CiAgcmV0
        dXJuIGNvbnRleHRzLmxlbmd0aD09PTAgPyB7fSA6IGNvbnRleHRzLnBvcCgp
        Owp9CgpmdW5jdGlvbiBwdXNoQ3R4KGN0eCkgewogIGNvbnRleHRzLnB1c2go
        Y3R4KTsKICByZXR1cm4gbnVsbDsKfQoKZnVuY3Rpb24gaXRlcihrZXksIHZh
        bHVlKSB7CiAgdmFyIHZhbHVlUHJvdmlkZWQgPSBhcmd1bWVudHMubGVuZ3Ro
        ID09PSAyOwoKICBmdW5jdGlvbiBpKGl0ZW0pIHsKICAgIHZhciBjdXIgPSBn
        ZXQoaXRlbSwga2V5KTsKICAgIHJldHVybiB2YWx1ZVByb3ZpZGVkID8gdmFs
        dWU9PT1jdXIgOiAhIWN1cjsKICB9CiAgcmV0dXJuIGkgOwp9CgovKioKICBU
        aGlzIG1peGluIGRlZmluZXMgdGhlIGNvbW1vbiBpbnRlcmZhY2UgaW1wbGVt
        ZW50ZWQgYnkgZW51bWVyYWJsZSBvYmplY3RzCiAgaW4gRW1iZXIuIE1vc3Qg
        b2YgdGhlc2UgbWV0aG9kcyBmb2xsb3cgdGhlIHN0YW5kYXJkIEFycmF5IGl0
        ZXJhdGlvbgogIEFQSSBkZWZpbmVkIHVwIHRvIEphdmFTY3JpcHQgMS44IChl
        eGNsdWRpbmcgbGFuZ3VhZ2Utc3BlY2lmaWMgZmVhdHVyZXMgdGhhdAogIGNh
        bm5vdCBiZSBlbXVsYXRlZCBpbiBvbGRlciB2ZXJzaW9ucyBvZiBKYXZhU2Ny
        aXB0KS4KCiAgVGhpcyBtaXhpbiBpcyBhcHBsaWVkIGF1dG9tYXRpY2FsbHkg
        dG8gdGhlIEFycmF5IGNsYXNzIG9uIHBhZ2UgbG9hZCwgc28geW91CiAgY2Fu
        IHVzZSBhbnkgb2YgdGhlc2UgbWV0aG9kcyBvbiBzaW1wbGUgYXJyYXlzLiBJ
        ZiBBcnJheSBhbHJlYWR5IGltcGxlbWVudHMKICBvbmUgb2YgdGhlc2UgbWV0
        aG9kcywgdGhlIG1peGluIHdpbGwgbm90IG92ZXJyaWRlIHRoZW0uCgogICMj
        IFdyaXRpbmcgWW91ciBPd24gRW51bWVyYWJsZQoKICBUbyBtYWtlIHlvdXIg
        b3duIGN1c3RvbSBjbGFzcyBlbnVtZXJhYmxlLCB5b3UgbmVlZCB0d28gaXRl
        bXM6CgogIDEuIFlvdSBtdXN0IGhhdmUgYSBsZW5ndGggcHJvcGVydHkuIFRo
        aXMgcHJvcGVydHkgc2hvdWxkIGNoYW5nZSB3aGVuZXZlcgogICAgIHRoZSBu
        dW1iZXIgb2YgaXRlbXMgaW4geW91ciBlbnVtZXJhYmxlIG9iamVjdCBjaGFu
        Z2VzLiBJZiB5b3UgdXNpbmcgdGhpcwogICAgIHdpdGggYW4gYEVtYmVyLk9i
        amVjdGAgc3ViY2xhc3MsIHlvdSBzaG91bGQgYmUgc3VyZSB0byBjaGFuZ2Ug
        dGhlIGxlbmd0aAogICAgIHByb3BlcnR5IHVzaW5nIGBzZXQoKS5gCgogIDIu
        IElmIHlvdSBtdXN0IGltcGxlbWVudCBgbmV4dE9iamVjdCgpLmAgU2VlIGRv
        Y3VtZW50YXRpb24uCgogIE9uY2UgeW91IGhhdmUgdGhlc2UgdHdvIG1ldGhv
        ZHMgaW1wbGVtZW50LCBhcHBseSB0aGUgYEVtYmVyLkVudW1lcmFibGVgIG1p
        eGluCiAgdG8geW91ciBjbGFzcyBhbmQgeW91IHdpbGwgYmUgYWJsZSB0byBl
        bnVtZXJhdGUgdGhlIGNvbnRlbnRzIG9mIHlvdXIgb2JqZWN0CiAgbGlrZSBh
        bnkgb3RoZXIgY29sbGVjdGlvbi4KCiAgIyMgVXNpbmcgRW1iZXIgRW51bWVy
        YXRpb24gd2l0aCBPdGhlciBMaWJyYXJpZXMKCiAgTWFueSBvdGhlciBsaWJy
        YXJpZXMgcHJvdmlkZSBzb21lIGtpbmQgb2YgaXRlcmF0b3Igb3IgZW51bWVy
        YXRpb24gbGlrZQogIGZhY2lsaXR5LiBUaGlzIGlzIG9mdGVuIHdoZXJlIHRo
        ZSBtb3N0IGNvbW1vbiBBUEkgY29uZmxpY3RzIG9jY3VyLgogIEVtYmVyJ3Mg
        QVBJIGlzIGRlc2lnbmVkIHRvIGJlIGFzIGZyaWVuZGx5IGFzIHBvc3NpYmxl
        IHdpdGggb3RoZXIKICBsaWJyYXJpZXMgYnkgaW1wbGVtZW50aW5nIG9ubHkg
        bWV0aG9kcyB0aGF0IG1vc3RseSBjb3JyZXNwb25kIHRvIHRoZQogIEphdmFT
        Y3JpcHQgMS44IEFQSS4KCiAgQGNsYXNzIEVudW1lcmFibGUKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpFbWJlci5FbnVtZXJh
        YmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBJbXBsZW1l
        bnQgdGhpcyBtZXRob2QgdG8gbWFrZSB5b3VyIGNsYXNzIGVudW1lcmFibGUu
        CgogICAgVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsIHJlcGVhdGVkbHkgZHVy
        aW5nIGVudW1lcmF0aW9uLiBUaGUgaW5kZXggdmFsdWUKICAgIHdpbGwgYWx3
        YXlzIGJlZ2luIHdpdGggMCBhbmQgaW5jcmVtZW50IG1vbm90b25pY2FsbHku
        IFlvdSBkb24ndCBoYXZlIHRvCiAgICByZWx5IG9uIHRoZSBpbmRleCB2YWx1
        ZSB0byBkZXRlcm1pbmUgd2hhdCBvYmplY3QgdG8gcmV0dXJuLCBidXQgeW91
        IHNob3VsZAogICAgYWx3YXlzIGNoZWNrIHRoZSB2YWx1ZSBhbmQgc3RhcnQg
        ZnJvbSB0aGUgYmVnaW5uaW5nIHdoZW4geW91IHNlZSB0aGUKICAgIHJlcXVl
        c3RlZCBpbmRleCBpcyAwLgoKICAgIFRoZSBgcHJldmlvdXNPYmplY3RgIGlz
        IHRoZSBvYmplY3QgdGhhdCB3YXMgcmV0dXJuZWQgZnJvbSB0aGUgbGFzdCBj
        YWxsCiAgICB0byBgbmV4dE9iamVjdGAgZm9yIHRoZSBjdXJyZW50IGl0ZXJh
        dGlvbi4gVGhpcyBpcyBhIHVzZWZ1bCB3YXkgdG8KICAgIG1hbmFnZSBpdGVy
        YXRpb24gaWYgeW91IGFyZSB0cmFjaW5nIGEgbGlua2VkIGxpc3QsIGZvciBl
        eGFtcGxlLgoKICAgIEZpbmFsbHkgdGhlIGNvbnRleHQgcGFyYW1ldGVyIHdp
        bGwgYWx3YXlzIGNvbnRhaW4gYSBoYXNoIHlvdSBjYW4gdXNlIGFzCiAgICBh
        ICJzY3JhdGNocGFkIiB0byBtYWludGFpbiBhbnkgb3RoZXIgc3RhdGUgeW91
        IG5lZWQgaW4gb3JkZXIgdG8gaXRlcmF0ZQogICAgcHJvcGVybHkuIFRoZSBj
        b250ZXh0IG9iamVjdCBpcyByZXVzZWQgYW5kIGlzIG5vdCByZXNldCBiZXR3
        ZWVuCiAgICBpdGVyYXRpb25zIHNvIG1ha2Ugc3VyZSB5b3Ugc2V0dXAgdGhl
        IGNvbnRleHQgd2l0aCBhIGZyZXNoIHN0YXRlIHdoZW5ldmVyCiAgICB0aGUg
        aW5kZXggcGFyYW1ldGVyIGlzIDAuCgogICAgR2VuZXJhbGx5IGl0ZXJhdG9y
        cyB3aWxsIGNvbnRpbnVlIHRvIGNhbGwgYG5leHRPYmplY3RgIHVudGlsIHRo
        ZSBpbmRleAogICAgcmVhY2hlcyB0aGUgeW91ciBjdXJyZW50IGxlbmd0aC0x
        LiBJZiB5b3UgcnVuIG91dCBvZiBkYXRhIGJlZm9yZSB0aGlzCiAgICB0aW1l
        IGZvciBzb21lIHJlYXNvbiwgeW91IHNob3VsZCBzaW1wbHkgcmV0dXJuIHVu
        ZGVmaW5lZC4KCiAgICBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0
        aGlzIG1ldGhvZCBzaW1wbHkgbG9va3MgdXAgdGhlIGluZGV4LgogICAgVGhp
        cyB3b3JrcyBncmVhdCBvbiBhbnkgQXJyYXktbGlrZSBvYmplY3RzLgoKICAg
        IEBtZXRob2QgbmV4dE9iamVjdAogICAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4
        IHRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBpdGVyYXRpb24KICAgIEBwYXJh
        bSB7T2JqZWN0fSBwcmV2aW91c09iamVjdCB0aGUgdmFsdWUgcmV0dXJuZWQg
        YnkgdGhlIGxhc3QgY2FsbCB0bwogICAgICBgbmV4dE9iamVjdGAuCiAgICBA
        cGFyYW0ge09iamVjdH0gY29udGV4dCBhIGNvbnRleHQgb2JqZWN0IHlvdSBj
        YW4gdXNlIHRvIG1haW50YWluIHN0YXRlLgogICAgQHJldHVybiB7T2JqZWN0
        fSB0aGUgbmV4dCBvYmplY3QgaW4gdGhlIGl0ZXJhdGlvbiBvciB1bmRlZmlu
        ZWQKICAqLwogIG5leHRPYmplY3Q6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9u
        KSwKCiAgLyoqCiAgICBIZWxwZXIgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0
        IG9iamVjdCBmcm9tIGEgY29sbGVjdGlvbi4gVGhpcyBpcyB1c3VhbGx5CiAg
        ICB1c2VkIGJ5IGJpbmRpbmdzIGFuZCBvdGhlciBwYXJ0cyBvZiB0aGUgZnJh
        bWV3b3JrIHRvIGV4dHJhY3QgYSBzaW5nbGUKICAgIG9iamVjdCBpZiB0aGUg
        ZW51bWVyYWJsZSBjb250YWlucyBvbmx5IG9uZSBpdGVtLgoKICAgIElmIHlv
        dSBvdmVycmlkZSB0aGlzIG1ldGhvZCwgeW91IHNob3VsZCBpbXBsZW1lbnQg
        aXQgc28gdGhhdCBpdCB3aWxsCiAgICBhbHdheXMgcmV0dXJuIHRoZSBzYW1l
        IHZhbHVlIGVhY2ggdGltZSBpdCBpcyBjYWxsZWQuIElmIHlvdXIgZW51bWVy
        YWJsZQogICAgY29udGFpbnMgb25seSBvbmUgb2JqZWN0LCB0aGlzIG1ldGhv
        ZCBzaG91bGQgYWx3YXlzIHJldHVybiB0aGF0IG9iamVjdC4KICAgIElmIHlv
        dXIgZW51bWVyYWJsZSBpcyBlbXB0eSwgdGhpcyBtZXRob2Qgc2hvdWxkIHJl
        dHVybiBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIg
        YXJyID0gWyJhIiwgImIiLCAiYyJdOwogICAgYXJyLmdldCgnZmlyc3RPYmpl
        Y3QnKTsgIC8vICJhIgoKICAgIHZhciBhcnIgPSBbXTsKICAgIGFyci5nZXQo
        J2ZpcnN0T2JqZWN0Jyk7ICAvLyB1bmRlZmluZWQKICAgIGBgYAoKICAgIEBw
        cm9wZXJ0eSBmaXJzdE9iamVjdAogICAgQHJldHVybiB7T2JqZWN0fSB0aGUg
        b2JqZWN0IG9yIHVuZGVmaW5lZAogICovCiAgZmlyc3RPYmplY3Q6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnbGVu
        Z3RoJyk9PT0wKSByZXR1cm4gdW5kZWZpbmVkIDsKCiAgICAvLyBoYW5kbGUg
        Z2VuZXJpYyBlbnVtZXJhYmxlcwogICAgdmFyIGNvbnRleHQgPSBwb3BDdHgo
        KSwgcmV0OwogICAgcmV0ID0gdGhpcy5uZXh0T2JqZWN0KDAsIG51bGwsIGNv
        bnRleHQpOwogICAgcHVzaEN0eChjb250ZXh0KTsKICAgIHJldHVybiByZXQg
        OwogIH0pLnByb3BlcnR5KCdbXScpLAoKICAvKioKICAgIEhlbHBlciBtZXRo
        b2QgcmV0dXJucyB0aGUgbGFzdCBvYmplY3QgZnJvbSBhIGNvbGxlY3Rpb24u
        IElmIHlvdXIgZW51bWVyYWJsZQogICAgY29udGFpbnMgb25seSBvbmUgb2Jq
        ZWN0LCB0aGlzIG1ldGhvZCBzaG91bGQgYWx3YXlzIHJldHVybiB0aGF0IG9i
        amVjdC4KICAgIElmIHlvdXIgZW51bWVyYWJsZSBpcyBlbXB0eSwgdGhpcyBt
        ZXRob2Qgc2hvdWxkIHJldHVybiBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICB2YXIgYXJyID0gWyJhIiwgImIiLCAiYyJdOwogICAgYXJy
        LmdldCgnbGFzdE9iamVjdCcpOyAgLy8gImMiCgogICAgdmFyIGFyciA9IFtd
        OwogICAgYXJyLmdldCgnbGFzdE9iamVjdCcpOyAgLy8gdW5kZWZpbmVkCiAg
        ICBgYGAKCiAgICBAcHJvcGVydHkgbGFzdE9iamVjdAogICAgQHJldHVybiB7
        T2JqZWN0fSB0aGUgbGFzdCBvYmplY3Qgb3IgdW5kZWZpbmVkCiAgKi8KICBs
        YXN0T2JqZWN0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZh
        ciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAgaWYgKGxlbj09PTAp
        IHJldHVybiB1bmRlZmluZWQgOwogICAgdmFyIGNvbnRleHQgPSBwb3BDdHgo
        KSwgaWR4PTAsIGN1ciwgbGFzdCA9IG51bGw7CiAgICBkbyB7CiAgICAgIGxh
        c3QgPSBjdXI7CiAgICAgIGN1ciA9IHRoaXMubmV4dE9iamVjdChpZHgrKywg
        bGFzdCwgY29udGV4dCk7CiAgICB9IHdoaWxlIChjdXIgIT09IHVuZGVmaW5l
        ZCk7CiAgICBwdXNoQ3R4KGNvbnRleHQpOwogICAgcmV0dXJuIGxhc3Q7CiAg
        fSkucHJvcGVydHkoJ1tdJyksCgogIC8qKgogICAgUmV0dXJucyBgdHJ1ZWAg
        aWYgdGhlIHBhc3NlZCBvYmplY3QgY2FuIGJlIGZvdW5kIGluIHRoZSByZWNl
        aXZlci4gVGhlCiAgICBkZWZhdWx0IHZlcnNpb24gd2lsbCBpdGVyYXRlIHRo
        cm91Z2ggdGhlIGVudW1lcmFibGUgdW50aWwgdGhlIG9iamVjdAogICAgaXMg
        Zm91bmQuIFlvdSBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzIHdpdGggYSBt
        b3JlIGVmZmljaWVudCB2ZXJzaW9uLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHZhciBhcnIgPSBbImEiLCAiYiIsICJjIl07CiAgICBhcnIuY29udGFpbnMo
        ImEiKTsgLy8gdHJ1ZQogICAgYXJyLmNvbnRhaW5zKCJ6Iik7IC8vIGZhbHNl
        CiAgICBgYGAKCiAgICBAbWV0aG9kIGNvbnRhaW5zCiAgICBAcGFyYW0ge09i
        amVjdH0gb2JqIFRoZSBvYmplY3QgdG8gc2VhcmNoIGZvci4KICAgIEByZXR1
        cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBvYmplY3QgaXMgZm91bmQgaW4gZW51
        bWVyYWJsZS4KICAqLwogIGNvbnRhaW5zOiBmdW5jdGlvbihvYmopIHsKICAg
        IHJldHVybiB0aGlzLmZpbmQoZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRl
        bT09PW9iajsgfSkgIT09IHVuZGVmaW5lZDsKICB9LAoKICAvKioKICAgIEl0
        ZXJhdGVzIHRocm91Z2ggdGhlIGVudW1lcmFibGUsIGNhbGxpbmcgdGhlIHBh
        c3NlZCBmdW5jdGlvbiBvbiBlYWNoCiAgICBpdGVtLiBUaGlzIG1ldGhvZCBj
        b3JyZXNwb25kcyB0byB0aGUgYGZvckVhY2goKWAgbWV0aG9kIGRlZmluZWQg
        aW4KICAgIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBtZXRo
        b2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBlbnVt
        ZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJyZW50
        IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0aGUg
        Y3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51bWVy
        YWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAgICBO
        b3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91IGNhbiBh
        bHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3
        aWxsIGJlIHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRoaXMgaXMg
        YSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9u
        IGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgQG1ldGhvZCBm
        b3JFYWNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2Fs
        bGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRd
        IFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJldHVybiB7T2JqZWN0
        fSByZWNlaXZlcgogICovCiAgZm9yRWFjaDogZnVuY3Rpb24oY2FsbGJhY2ss
        IHRhcmdldCkgewogICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gImZ1bmN0
        aW9uIikgdGhyb3cgbmV3IFR5cGVFcnJvcigpIDsKICAgIHZhciBsZW4gPSBn
        ZXQodGhpcywgJ2xlbmd0aCcpLCBsYXN0ID0gbnVsbCwgY29udGV4dCA9IHBv
        cEN0eCgpOwoKICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkgdGFyZ2V0
        ID0gbnVsbDsKCiAgICBmb3IodmFyIGlkeD0wO2lkeDxsZW47aWR4KyspIHsK
        ICAgICAgdmFyIG5leHQgPSB0aGlzLm5leHRPYmplY3QoaWR4LCBsYXN0LCBj
        b250ZXh0KSA7CiAgICAgIGNhbGxiYWNrLmNhbGwodGFyZ2V0LCBuZXh0LCBp
        ZHgsIHRoaXMpOwogICAgICBsYXN0ID0gbmV4dCA7CiAgICB9CiAgICBsYXN0
        ID0gbnVsbCA7CiAgICBjb250ZXh0ID0gcHVzaEN0eChjb250ZXh0KTsKICAg
        IHJldHVybiB0aGlzIDsKICB9LAoKICAvKioKICAgIEFsaWFzIGZvciBgbWFw
        QnlgCgogICAgQG1ldGhvZCBnZXRFYWNoCiAgICBAcGFyYW0ge1N0cmluZ30g
        a2V5IG5hbWUgb2YgdGhlIHByb3BlcnR5CiAgICBAcmV0dXJuIHtBcnJheX0g
        VGhlIG1hcHBlZCBhcnJheS4KICAqLwogIGdldEVhY2g6IGZ1bmN0aW9uKGtl
        eSkgewogICAgcmV0dXJuIHRoaXMubWFwQnkoa2V5KTsKICB9LAoKICAvKioK
        ICAgIFNldHMgdGhlIHZhbHVlIG9uIHRoZSBuYW1lZCBwcm9wZXJ0eSBmb3Ig
        ZWFjaCBtZW1iZXIuIFRoaXMgaXMgbW9yZQogICAgZWZmaWNpZW50IHRoYW4g
        dXNpbmcgb3RoZXIgbWV0aG9kcyBkZWZpbmVkIG9uIHRoaXMgaGVscGVyLiBJ
        ZiB0aGUgb2JqZWN0CiAgICBpbXBsZW1lbnRzIEVtYmVyLk9ic2VydmFibGUs
        IHRoZSB2YWx1ZSB3aWxsIGJlIGNoYW5nZWQgdG8gYHNldCgpLGAgb3RoZXJ3
        aXNlCiAgICBpdCB3aWxsIGJlIHNldCBkaXJlY3RseS4gYG51bGxgIG9iamVj
        dHMgYXJlIHNraXBwZWQuCgogICAgQG1ldGhvZCBzZXRFYWNoCiAgICBAcGFy
        YW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgdG8gc2V0CiAgICBAcGFyYW0ge09i
        amVjdH0gdmFsdWUgVGhlIG9iamVjdCB0byBzZXQKICAgIEByZXR1cm4ge09i
        amVjdH0gcmVjZWl2ZXIKICAqLwogIHNldEVhY2g6IGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oaXRl
        bSkgewogICAgICBzZXQoaXRlbSwga2V5LCB2YWx1ZSk7CiAgICB9KTsKICB9
        LAoKICAvKioKICAgIE1hcHMgYWxsIG9mIHRoZSBpdGVtcyBpbiB0aGUgZW51
        bWVyYXRpb24gdG8gYW5vdGhlciB2YWx1ZSwgcmV0dXJuaW5nCiAgICBhIG5l
        dyBhcnJheS4gVGhpcyBtZXRob2QgY29ycmVzcG9uZHMgdG8gYG1hcCgpYCBk
        ZWZpbmVkIGluIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBt
        ZXRob2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBz
        aWduYXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBl
        bnVtZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJy
        ZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0
        aGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51
        bWVyYWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAg
        ICBJdCBzaG91bGQgcmV0dXJuIHRoZSBtYXBwZWQgdmFsdWUuCgogICAgTm90
        ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ssIHlvdSBjYW4gYWxz
        byBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAgb2JqZWN0IHRoYXQgd2ls
        bCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250ZXh0LiBUaGlzIGlzIGEg
        Z29vZCB3YXkKICAgIHRvIGdpdmUgeW91ciBpdGVyYXRvciBmdW5jdGlvbiBh
        Y2Nlc3MgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LgoKICAgIEBtZXRob2QgbWFw
        CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sg
        dG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0
        YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJldHVybiB7QXJyYXl9IFRoZSBt
        YXBwZWQgYXJyYXkuCiAgKi8KICBtYXA6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0
        YXJnZXQpIHsKICAgIHZhciByZXQgPSBFbWJlci5BKCk7CiAgICB0aGlzLmZv
        ckVhY2goZnVuY3Rpb24oeCwgaWR4LCBpKSB7CiAgICAgIHJldFtpZHhdID0g
        Y2FsbGJhY2suY2FsbCh0YXJnZXQsIHgsIGlkeCxpKTsKICAgIH0pOwogICAg
        cmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBTaW1pbGFyIHRvIG1hcCwg
        dGhpcyBzcGVjaWFsaXplZCBmdW5jdGlvbiByZXR1cm5zIHRoZSB2YWx1ZSBv
        ZiB0aGUgbmFtZWQKICAgIHByb3BlcnR5IG9uIGFsbCBpdGVtcyBpbiB0aGUg
        ZW51bWVyYXRpb24uCgogICAgQG1ldGhvZCBtYXBCeQogICAgQHBhcmFtIHtT
        dHJpbmd9IGtleSBuYW1lIG9mIHRoZSBwcm9wZXJ0eQogICAgQHJldHVybiB7
        QXJyYXl9IFRoZSBtYXBwZWQgYXJyYXkuCiAgKi8KICBtYXBCeTogZnVuY3Rp
        b24oa2V5KSB7CiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obmV4dCkg
        ewogICAgICByZXR1cm4gZ2V0KG5leHQsIGtleSk7CiAgICB9KTsKICB9LAoK
        ICAvKioKICAgIFNpbWlsYXIgdG8gbWFwLCB0aGlzIHNwZWNpYWxpemVkIGZ1
        bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZAogICAgcHJv
        cGVydHkgb24gYWxsIGl0ZW1zIGluIHRoZSBlbnVtZXJhdGlvbi4KCiAgICBA
        bWV0aG9kIG1hcFByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IG5h
        bWUgb2YgdGhlIHByb3BlcnR5CiAgICBAcmV0dXJuIHtBcnJheX0gVGhlIG1h
        cHBlZCBhcnJheS4KICAgIEBkZXByZWNhdGVkIFVzZSBgbWFwQnlgIGluc3Rl
        YWQKICAqLwoKICBtYXBQcm9wZXJ0eTogRW1iZXIuYWxpYXNNZXRob2QoJ21h
        cEJ5JyksCgogIC8qKgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIGFsbCBv
        ZiB0aGUgaXRlbXMgaW4gdGhlIGVudW1lcmF0aW9uIHRoYXQgdGhlIHBhc3Nl
        ZAogICAgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGZvci4gVGhpcyBtZXRob2Qg
        Y29ycmVzcG9uZHMgdG8gYGZpbHRlcigpYCBkZWZpbmVkIGluCiAgICBKYXZh
        U2NyaXB0IDEuNi4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92
        aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwK
        ICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBmdW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAg
        ICBgYGAKCiAgICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRo
        ZSBpdGVyYXRpb24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5k
        ZXggaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRo
        ZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJl
        dHVybiB0aGUgYHRydWVgIHRvIGluY2x1ZGUgdGhlIGl0ZW0gaW4gdGhlIHJl
        c3VsdHMsIGBmYWxzZWAKICAgIG90aGVyd2lzZS4KCiAgICBOb3RlIHRoYXQg
        aW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91IGNhbiBhbHNvIHBhc3Mg
        YW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3aWxsIGJlIHNl
        dCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRoaXMgaXMgYSBnb29kIHdh
        eQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9uIGFjY2VzcyB0
        byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgQG1ldGhvZCBmaWx0ZXIKICAg
        IEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBl
        eGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhlIHRhcmdl
        dCBvYmplY3QgdG8gdXNlCiAgICBAcmV0dXJuIHtBcnJheX0gQSBmaWx0ZXJl
        ZCBhcnJheS4KICAqLwogIGZpbHRlcjogZnVuY3Rpb24oY2FsbGJhY2ssIHRh
        cmdldCkgewogICAgdmFyIHJldCA9IEVtYmVyLkEoKTsKICAgIHRoaXMuZm9y
        RWFjaChmdW5jdGlvbih4LCBpZHgsIGkpIHsKICAgICAgaWYgKGNhbGxiYWNr
        LmNhbGwodGFyZ2V0LCB4LCBpZHgsIGkpKSByZXQucHVzaCh4KTsKICAgIH0p
        OwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGFu
        IGFycmF5IHdpdGggYWxsIG9mIHRoZSBpdGVtcyBpbiB0aGUgZW51bWVyYXRp
        b24gd2hlcmUgdGhlIHBhc3NlZAogICAgZnVuY3Rpb24gcmV0dXJucyBmYWxz
        ZSBmb3IuIFRoaXMgbWV0aG9kIGlzIHRoZSBpbnZlcnNlIG9mIGZpbHRlcigp
        LgoKICAgIFRoZSBjYWxsYmFjayBtZXRob2QgeW91IHByb3ZpZGUgc2hvdWxk
        IGhhdmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmUgKGFsbAogICAgcGFyYW1l
        dGVycyBhcmUgb3B0aW9uYWwpOgoKICAgICAgICAgIGZ1bmN0aW9uKGl0ZW0s
        IGluZGV4LCBlbnVtZXJhYmxlKTsKCiAgICAtICppdGVtKiBpcyB0aGUgY3Vy
        cmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCiAgICAtICppbmRleCogaXMg
        dGhlIGN1cnJlbnQgaW5kZXggaW4gdGhlIGl0ZXJhdGlvbgogICAgLSAqZW51
        bWVyYWJsZSogaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAg
        ICBJdCBzaG91bGQgcmV0dXJuIHRoZSBhIGZhbHNleSB2YWx1ZSB0byBpbmNs
        dWRlIHRoZSBpdGVtIGluIHRoZSByZXN1bHRzLgoKICAgIE5vdGUgdGhhdCBp
        biBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3UgY2FuIGFsc28gcGFzcyBh
        biBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0aGF0IHdpbGwgYmUgc2V0
        IGFzICJ0aGlzIiBvbiB0aGUgY29udGV4dC4gVGhpcyBpcyBhIGdvb2Qgd2F5
        CiAgICB0byBnaXZlIHlvdXIgaXRlcmF0b3IgZnVuY3Rpb24gYWNjZXNzIHRv
        IHRoZSBjdXJyZW50IG9iamVjdC4KCiAgICBAbWV0aG9kIHJlamVjdAogICAg
        QHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4
        ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0
        IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4ge0FycmF5fSBBIHJlamVjdGVk
        IGFycmF5LgogICAqLwogIHJlamVjdDogZnVuY3Rpb24oY2FsbGJhY2ssIHRh
        cmdldCkgewogICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCkgewog
        ICAgICByZXR1cm4gIShjYWxsYmFjay5hcHBseSh0YXJnZXQsIGFyZ3VtZW50
        cykpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGFuIGFycmF5
        IHdpdGgganVzdCB0aGUgaXRlbXMgd2l0aCB0aGUgbWF0Y2hlZCBwcm9wZXJ0
        eS4gWW91CiAgICBjYW4gcGFzcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1l
        bnQgd2l0aCB0aGUgdGFyZ2V0IHZhbHVlLiBPdGhlcndpc2UKICAgIHRoaXMg
        d2lsbCBtYXRjaCBhbnkgcHJvcGVydHkgdGhhdCBldmFsdWF0ZXMgdG8gYHRy
        dWVgLgoKICAgIEBtZXRob2QgZmlsdGVyQnkKICAgIEBwYXJhbSB7U3RyaW5n
        fSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5n
        fSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAg
        IEByZXR1cm4ge0FycmF5fSBmaWx0ZXJlZCBhcnJheQogICovCiAgZmlsdGVy
        Qnk6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHJldHVybiB0aGlzLmZp
        bHRlcihpdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIGp1c3QgdGhlIGl0ZW1zIHdp
        dGggdGhlIG1hdGNoZWQgcHJvcGVydHkuIFlvdQogICAgY2FuIHBhc3MgYW4g
        b3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhlIHRhcmdldCB2YWx1
        ZS4gT3RoZXJ3aXNlCiAgICB0aGlzIHdpbGwgbWF0Y2ggYW55IHByb3BlcnR5
        IHRoYXQgZXZhbHVhdGVzIHRvIGB0cnVlYC4KCiAgICBAbWV0aG9kIGZpbHRl
        clByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9wZXJ0
        eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRpb25h
        bCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtBcnJheX0g
        ZmlsdGVyZWQgYXJyYXkKICAgIEBkZXByZWNhdGVkIFVzZSBgZmlsdGVyQnlg
        IGluc3RlYWQKICAqLwogIGZpbHRlclByb3BlcnR5OiBFbWJlci5hbGlhc01l
        dGhvZCgnZmlsdGVyQnknKSwKCiAgLyoqCiAgICBSZXR1cm5zIGFuIGFycmF5
        IHdpdGggdGhlIGl0ZW1zIHRoYXQgZG8gbm90IGhhdmUgdHJ1dGh5IHZhbHVl
        cyBmb3IKICAgIGtleS4gIFlvdSBjYW4gcGFzcyBhbiBvcHRpb25hbCBzZWNv
        bmQgYXJndW1lbnQgd2l0aCB0aGUgdGFyZ2V0IHZhbHVlLiAgT3RoZXJ3aXNl
        CiAgICB0aGlzIHdpbGwgbWF0Y2ggYW55IHByb3BlcnR5IHRoYXQgZXZhbHVh
        dGVzIHRvIGZhbHNlLgoKICAgIEBtZXRob2QgcmVqZWN0QnkKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJh
        bSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdh
        aW5zdC4KICAgIEByZXR1cm4ge0FycmF5fSByZWplY3RlZCBhcnJheQogICov
        CiAgcmVqZWN0Qnk6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBl
        eGFjdFZhbHVlID0gZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gZ2V0KGl0ZW0s
        IGtleSkgPT09IHZhbHVlOyB9LAogICAgICAgIGhhc1ZhbHVlID0gZnVuY3Rp
        b24oaXRlbSkgeyByZXR1cm4gISFnZXQoaXRlbSwga2V5KTsgfSwKICAgICAg
        ICB1c2UgPSAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/IGV4YWN0VmFsdWUg
        OiBoYXNWYWx1ZSk7CgogICAgcmV0dXJuIHRoaXMucmVqZWN0KHVzZSk7CiAg
        fSwKCiAgLyoqCiAgICBSZXR1cm5zIGFuIGFycmF5IHdpdGggdGhlIGl0ZW1z
        IHRoYXQgZG8gbm90IGhhdmUgdHJ1dGh5IHZhbHVlcyBmb3IKICAgIGtleS4g
        IFlvdSBjYW4gcGFzcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgd2l0
        aCB0aGUgdGFyZ2V0IHZhbHVlLiAgT3RoZXJ3aXNlCiAgICB0aGlzIHdpbGwg
        bWF0Y2ggYW55IHByb3BlcnR5IHRoYXQgZXZhbHVhdGVzIHRvIGZhbHNlLgoK
        ICAgIEBtZXRob2QgcmVqZWN0UHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5n
        fSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5n
        fSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAg
        IEByZXR1cm4ge0FycmF5fSByZWplY3RlZCBhcnJheQogICAgQGRlcHJlY2F0
        ZWQgVXNlIGByZWplY3RCeWAgaW5zdGVhZAogICovCiAgcmVqZWN0UHJvcGVy
        dHk6IEVtYmVyLmFsaWFzTWV0aG9kKCdyZWplY3RCeScpLAoKICAvKioKICAg
        IFJldHVybnMgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIGFycmF5IGZvciB3aGlj
        aCB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVlLgogICAgVGhpcyBtZXRob2Qg
        d29ya3Mgc2ltaWxhciB0byB0aGUgYGZpbHRlcigpYCBtZXRob2QgZGVmaW5l
        ZCBpbiBKYXZhU2NyaXB0IDEuNgogICAgZXhjZXB0IHRoYXQgaXQgd2lsbCBz
        dG9wIHdvcmtpbmcgb24gdGhlIGFycmF5IG9uY2UgYSBtYXRjaCBpcyBmb3Vu
        ZC4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3Vs
        ZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFt
        ZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBm
        dW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAgICBgYGAKCiAg
        ICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRp
        b24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhl
        IGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJh
        YmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJldHVybiB0aGUg
        YHRydWVgIHRvIGluY2x1ZGUgdGhlIGl0ZW0gaW4gdGhlIHJlc3VsdHMsIGBm
        YWxzZWAKICAgIG90aGVyd2lzZS4KCiAgICBOb3RlIHRoYXQgaW4gYWRkaXRp
        b24gdG8gYSBjYWxsYmFjaywgeW91IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9u
        YWwgdGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3aWxsIGJlIHNldCBhcyBgdGhp
        c2Agb24gdGhlIGNvbnRleHQuIFRoaXMgaXMgYSBnb29kIHdheQogICAgdG8g
        Z2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgY3Vy
        cmVudCBvYmplY3QuCgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0ge0Z1
        bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAg
        QHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRv
        IHVzZQogICAgQHJldHVybiB7T2JqZWN0fSBGb3VuZCBpdGVtIG9yIGB1bmRl
        ZmluZWRgLgogICovCiAgZmluZDogZnVuY3Rpb24oY2FsbGJhY2ssIHRhcmdl
        dCkgewogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJykgOwogICAg
        aWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB0YXJnZXQgPSBudWxsOwoKICAg
        IHZhciBsYXN0ID0gbnVsbCwgbmV4dCwgZm91bmQgPSBmYWxzZSwgcmV0IDsK
        ICAgIHZhciBjb250ZXh0ID0gcG9wQ3R4KCk7CiAgICBmb3IodmFyIGlkeD0w
        O2lkeDxsZW4gJiYgIWZvdW5kO2lkeCsrKSB7CiAgICAgIG5leHQgPSB0aGlz
        Lm5leHRPYmplY3QoaWR4LCBsYXN0LCBjb250ZXh0KSA7CiAgICAgIGlmIChm
        b3VuZCA9IGNhbGxiYWNrLmNhbGwodGFyZ2V0LCBuZXh0LCBpZHgsIHRoaXMp
        KSByZXQgPSBuZXh0IDsKICAgICAgbGFzdCA9IG5leHQgOwogICAgfQogICAg
        bmV4dCA9IGxhc3QgPSBudWxsIDsKICAgIGNvbnRleHQgPSBwdXNoQ3R4KGNv
        bnRleHQpOwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1
        cm5zIHRoZSBmaXJzdCBpdGVtIHdpdGggYSBwcm9wZXJ0eSBtYXRjaGluZyB0
        aGUgcGFzc2VkIHZhbHVlLiBZb3UKICAgIGNhbiBwYXNzIGFuIG9wdGlvbmFs
        IHNlY29uZCBhcmd1bWVudCB3aXRoIHRoZSB0YXJnZXQgdmFsdWUuIE90aGVy
        d2lzZQogICAgdGhpcyB3aWxsIG1hdGNoIGFueSBwcm9wZXJ0eSB0aGF0IGV2
        YWx1YXRlcyB0byBgdHJ1ZWAuCgogICAgVGhpcyBtZXRob2Qgd29ya3MgbXVj
        aCBsaWtlIHRoZSBtb3JlIGdlbmVyaWMgYGZpbmQoKWAgbWV0aG9kLgoKICAg
        IEBtZXRob2QgZmluZEJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBw
        cm9wZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBv
        cHRpb25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtP
        YmplY3R9IGZvdW5kIGl0ZW0gb3IgYHVuZGVmaW5lZGAKICAqLwogIGZpbmRC
        eTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgcmV0dXJuIHRoaXMuZmlu
        ZChpdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogIH0sCgogIC8qKgog
        ICAgUmV0dXJucyB0aGUgZmlyc3QgaXRlbSB3aXRoIGEgcHJvcGVydHkgbWF0
        Y2hpbmcgdGhlIHBhc3NlZCB2YWx1ZS4gWW91CiAgICBjYW4gcGFzcyBhbiBv
        cHRpb25hbCBzZWNvbmQgYXJndW1lbnQgd2l0aCB0aGUgdGFyZ2V0IHZhbHVl
        LiBPdGhlcndpc2UKICAgIHRoaXMgd2lsbCBtYXRjaCBhbnkgcHJvcGVydHkg
        dGhhdCBldmFsdWF0ZXMgdG8gYHRydWVgLgoKICAgIFRoaXMgbWV0aG9kIHdv
        cmtzIG11Y2ggbGlrZSB0aGUgbW9yZSBnZW5lcmljIGBmaW5kKClgIG1ldGhv
        ZC4KCiAgICBAbWV0aG9kIGZpbmRQcm9wZXJ0eQogICAgQHBhcmFtIHtTdHJp
        bmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVzdAogICAgQHBhcmFtIHtTdHJp
        bmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUgdG8gdGVzdCBhZ2FpbnN0Lgog
        ICAgQHJldHVybiB7T2JqZWN0fSBmb3VuZCBpdGVtIG9yIGB1bmRlZmluZWRg
        CiAgICBAZGVwcmVjYXRlZCBVc2UgYGZpbmRCeWAgaW5zdGVhZAogICovCiAg
        ZmluZFByb3BlcnR5OiBFbWJlci5hbGlhc01ldGhvZCgnZmluZEJ5JyksCgog
        IC8qKgogICAgUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBmdW5jdGlv
        biByZXR1cm5zIHRydWUgZm9yIGV2ZXJ5IGl0ZW0gaW4gdGhlCiAgICBlbnVt
        ZXJhdGlvbi4gVGhpcyBjb3JyZXNwb25kcyB3aXRoIHRoZSBgZXZlcnkoKWAg
        bWV0aG9kIGluIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBt
        ZXRob2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBz
        aWduYXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBl
        bnVtZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJy
        ZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0
        aGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51
        bWVyYWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAg
        ICBJdCBzaG91bGQgcmV0dXJuIHRoZSBgdHJ1ZWAgb3IgYGZhbHNlYC4KCiAg
        ICBOb3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91IGNh
        biBhbHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3QgdGhh
        dCB3aWxsIGJlIHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRoaXMg
        aXMgYSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0
        aW9uIGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgRXhhbXBs
        ZSBVc2FnZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBpZiAocGVvcGxlLmV2
        ZXJ5KGlzRW5naW5lZXIpKSB7IFBheWNoZWNrcy5hZGRCaWdCb251cygpOyB9
        CiAgICBgYGAKCiAgICBAbWV0aG9kIGV2ZXJ5CiAgICBAcGFyYW0ge0Z1bmN0
        aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBh
        cmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVz
        ZQogICAgQHJldHVybiB7Qm9vbGVhbn0KICAqLwogIGV2ZXJ5OiBmdW5jdGlv
        bihjYWxsYmFjaywgdGFyZ2V0KSB7CiAgICByZXR1cm4gIXRoaXMuZmluZChm
        dW5jdGlvbih4LCBpZHgsIGkpIHsKICAgICAgcmV0dXJuICFjYWxsYmFjay5j
        YWxsKHRhcmdldCwgeCwgaWR4LCBpKTsKICAgIH0pOwogIH0sCgogIC8qKgog
        ICAgUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBwcm9wZXJ0eSByZXNv
        bHZlcyB0byBgdHJ1ZWAgZm9yIGFsbCBpdGVtcyBpbgogICAgdGhlIGVudW1l
        cmFibGUuIFRoaXMgbWV0aG9kIGlzIG9mdGVuIHNpbXBsZXIvZmFzdGVyIHRo
        YW4gdXNpbmcgYSBjYWxsYmFjay4KCiAgICBAbWV0aG9kIGV2ZXJ5QnkKICAg
        IEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAg
        IEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRl
        c3QgYWdhaW5zdC4KICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgKi8KICBldmVy
        eUJ5OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy5l
        dmVyeShpdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBwcm9wZXJ0eSBy
        ZXNvbHZlcyB0byBgdHJ1ZWAgZm9yIGFsbCBpdGVtcyBpbgogICAgdGhlIGVu
        dW1lcmFibGUuIFRoaXMgbWV0aG9kIGlzIG9mdGVuIHNpbXBsZXIvZmFzdGVy
        IHRoYW4gdXNpbmcgYSBjYWxsYmFjay4KCiAgICBAbWV0aG9kIGV2ZXJ5UHJv
        cGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRv
        IHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZh
        bHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEByZXR1cm4ge0Jvb2xlYW59CiAg
        ICBAZGVwcmVjYXRlZCBVc2UgYGV2ZXJ5QnlgIGluc3RlYWQKICAqLwogIGV2
        ZXJ5UHJvcGVydHk6IEVtYmVyLmFsaWFzTWV0aG9kKCdldmVyeUJ5JyksCgog
        IC8qKgogICAgUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBmdW5jdGlv
        biByZXR1cm5zIHRydWUgZm9yIGFueSBpdGVtIGluIHRoZQogICAgZW51bWVy
        YXRpb24uIFRoaXMgY29ycmVzcG9uZHMgd2l0aCB0aGUgYHNvbWUoKWAgbWV0
        aG9kIGluIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBtZXRo
        b2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBlbnVt
        ZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJyZW50
        IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0aGUg
        Y3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51bWVy
        YWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAgICBJ
        dCBzaG91bGQgcmV0dXJuIHRoZSBgdHJ1ZWAgdG8gaW5jbHVkZSB0aGUgaXRl
        bSBpbiB0aGUgcmVzdWx0cywgYGZhbHNlYAogICAgb3RoZXJ3aXNlLgoKICAg
        IE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3UgY2Fu
        IGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0aGF0
        IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4dC4gVGhpcyBp
        cyBhIGdvb2Qgd2F5CiAgICB0byBnaXZlIHlvdXIgaXRlcmF0b3IgZnVuY3Rp
        b24gYWNjZXNzIHRvIHRoZSBjdXJyZW50IG9iamVjdC4KCiAgICBVc2FnZSBF
        eGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGlmIChwZW9wbGUuYW55
        KGlzTWFuYWdlcikpIHsgUGF5Y2hlY2tzLmFkZEJpZ2dlckJvbnVzKCk7IH0K
        ICAgIGBgYAoKICAgIEBtZXRob2QgYW55CiAgICBAcGFyYW0ge0Z1bmN0aW9u
        fSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFt
        IHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQog
        ICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwYXNzZWQgZnVu
        Y3Rpb24gcmV0dXJucyBgdHJ1ZWAgZm9yIGFueSBpdGVtCiAgKi8KICBhbnk6
        IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIHJldHVybiAhIXRo
        aXMuZmluZChmdW5jdGlvbih4LCBpZHgsIGkpIHsKICAgICAgcmV0dXJuICEh
        Y2FsbGJhY2suY2FsbCh0YXJnZXQsIHgsIGlkeCwgaSk7CiAgICB9KTsKICB9
        LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBwYXNzZWQgZnVu
        Y3Rpb24gcmV0dXJucyB0cnVlIGZvciBhbnkgaXRlbSBpbiB0aGUKICAgIGVu
        dW1lcmF0aW9uLiBUaGlzIGNvcnJlc3BvbmRzIHdpdGggdGhlIGBzb21lKClg
        IG1ldGhvZCBpbiBKYXZhU2NyaXB0IDEuNi4KCiAgICBUaGUgY2FsbGJhY2sg
        bWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcg
        c2lnbmF0dXJlIChhbGwKICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToK
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICBmdW5jdGlvbihpdGVtLCBpbmRleCwg
        ZW51bWVyYWJsZSk7CiAgICBgYGAKCiAgICAtIGBpdGVtYCBpcyB0aGUgY3Vy
        cmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCiAgICAtIGBpbmRleGAgaXMg
        dGhlIGN1cnJlbnQgaW5kZXggaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGVu
        dW1lcmFibGVgIGlzIHRoZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNlbGYuCgog
        ICAgSXQgc2hvdWxkIHJldHVybiB0aGUgYHRydWVgIHRvIGluY2x1ZGUgdGhl
        IGl0ZW0gaW4gdGhlIHJlc3VsdHMsIGBmYWxzZWAKICAgIG90aGVyd2lzZS4K
        CiAgICBOb3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91
        IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3Qg
        dGhhdCB3aWxsIGJlIHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRo
        aXMgaXMgYSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1
        bmN0aW9uIGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgVXNh
        Z2UgRXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBpZiAocGVvcGxl
        LnNvbWUoaXNNYW5hZ2VyKSkgeyBQYXljaGVja3MuYWRkQmlnZ2VyQm9udXMo
        KTsgfQogICAgYGBgCgogICAgQG1ldGhvZCBzb21lCiAgICBAcGFyYW0ge0Z1
        bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAg
        QHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRv
        IHVzZQogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwYXNz
        ZWQgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgZm9yIGFueSBpdGVtCiAgICBA
        ZGVwcmVjYXRlZCBVc2UgYGFueWAgaW5zdGVhZAogICovCiAgc29tZTogRW1i
        ZXIuYWxpYXNNZXRob2QoJ2FueScpLAoKICAvKioKICAgIFJldHVybnMgYHRy
        dWVgIGlmIHRoZSBwYXNzZWQgcHJvcGVydHkgcmVzb2x2ZXMgdG8gYHRydWVg
        IGZvciBhbnkgaXRlbSBpbgogICAgdGhlIGVudW1lcmFibGUuIFRoaXMgbWV0
        aG9kIGlzIG9mdGVuIHNpbXBsZXIvZmFzdGVyIHRoYW4gdXNpbmcgYSBjYWxs
        YmFjay4KCiAgICBAbWV0aG9kIGFueUJ5CiAgICBAcGFyYW0ge1N0cmluZ30g
        a2V5IHRoZSBwcm9wZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30g
        W3ZhbHVlXSBvcHRpb25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBA
        cmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBmdW5jdGlv
        biByZXR1cm5zIGB0cnVlYCBmb3IgYW55IGl0ZW0KICAqLwogIGFueUJ5OiBm
        dW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy5hbnkoaXRl
        ci5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICB9LAoKICAvKioKICAgIFJl
        dHVybnMgYHRydWVgIGlmIHRoZSBwYXNzZWQgcHJvcGVydHkgcmVzb2x2ZXMg
        dG8gYHRydWVgIGZvciBhbnkgaXRlbSBpbgogICAgdGhlIGVudW1lcmFibGUu
        IFRoaXMgbWV0aG9kIGlzIG9mdGVuIHNpbXBsZXIvZmFzdGVyIHRoYW4gdXNp
        bmcgYSBjYWxsYmFjay4KCiAgICBAbWV0aG9kIHNvbWVQcm9wZXJ0eQogICAg
        QHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVzdAogICAg
        QHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUgdG8gdGVz
        dCBhZ2FpbnN0LgogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRo
        ZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgZm9yIGFueSBpdGVt
        CiAgICBAZGVwcmVjYXRlZCBVc2UgYGFueUJ5YCBpbnN0ZWFkCiAgKi8KICBz
        b21lUHJvcGVydHk6IEVtYmVyLmFsaWFzTWV0aG9kKCdhbnlCeScpLAoKICAv
        KioKICAgIFRoaXMgd2lsbCBjb21iaW5lIHRoZSB2YWx1ZXMgb2YgdGhlIGVu
        dW1lcmF0b3IgaW50byBhIHNpbmdsZSB2YWx1ZS4gSXQKICAgIGlzIGEgdXNl
        ZnVsIHdheSB0byBjb2xsZWN0IGEgc3VtbWFyeSB2YWx1ZSBmcm9tIGFuIGVu
        dW1lcmF0aW9uLiBUaGlzCiAgICBjb3JyZXNwb25kcyB0byB0aGUgYHJlZHVj
        ZSgpYCBtZXRob2QgZGVmaW5lZCBpbiBKYXZhU2NyaXB0IDEuOC4KCiAgICBU
        aGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRo
        ZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFtZXRlcnMgYXJl
        IG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmdW5jdGlvbihw
        cmV2aW91c1ZhbHVlLCBpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAgICBg
        YGAKCiAgICAtIGBwcmV2aW91c1ZhbHVlYCBpcyB0aGUgdmFsdWUgcmV0dXJu
        ZWQgYnkgdGhlIGxhc3QgY2FsbCB0byB0aGUgaXRlcmF0b3IuCiAgICAtIGBp
        dGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCiAg
        ICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhlIGl0ZXJh
        dGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJhYmxlIG9i
        amVjdCBpdHNlbGYuCgogICAgUmV0dXJuIHRoZSBuZXcgY3VtdWxhdGl2ZSB2
        YWx1ZS4KCiAgICBJbiBhZGRpdGlvbiB0byB0aGUgY2FsbGJhY2sgeW91IGNh
        biBhbHNvIHBhc3MgYW4gYGluaXRpYWxWYWx1ZWAuIEFuIGVycm9yCiAgICB3
        aWxsIGJlIHJhaXNlZCBpZiB5b3UgZG8gbm90IHBhc3MgYW4gaW5pdGlhbCB2
        YWx1ZSBhbmQgdGhlIGVudW1lcmF0b3IgaXMKICAgIGVtcHR5LgoKICAgIE5v
        dGUgdGhhdCB1bmxpa2UgdGhlIG90aGVyIG1ldGhvZHMsIHRoaXMgbWV0aG9k
        IGRvZXMgbm90IGFsbG93IHlvdSB0bwogICAgcGFzcyBhIHRhcmdldCBvYmpl
        Y3QgdG8gc2V0IGFzIHRoaXMgZm9yIHRoZSBjYWxsYmFjay4gSXQncyBwYXJ0
        IG9mIHRoZQogICAgc3BlYy4gU29ycnkuCgogICAgQG1ldGhvZCByZWR1Y2UK
        ICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0
        byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gaW5pdGlhbFZhbHVlIElu
        aXRpYWwgdmFsdWUgZm9yIHRoZSByZWR1Y2UKICAgIEBwYXJhbSB7U3RyaW5n
        fSByZWR1Y2VyUHJvcGVydHkgaW50ZXJuYWwgdXNlIG9ubHkuCiAgICBAcmV0
        dXJuIHtPYmplY3R9IFRoZSByZWR1Y2VkIHZhbHVlLgogICovCiAgcmVkdWNl
        OiBmdW5jdGlvbihjYWxsYmFjaywgaW5pdGlhbFZhbHVlLCByZWR1Y2VyUHJv
        cGVydHkpIHsKICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICJmdW5jdGlv
        biIpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyB9CgogICAgdmFyIHJldCA9
        IGluaXRpYWxWYWx1ZTsKCiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24oaXRl
        bSwgaSkgewogICAgICByZXQgPSBjYWxsYmFjay5jYWxsKG51bGwsIHJldCwg
        aXRlbSwgaSwgdGhpcywgcmVkdWNlclByb3BlcnR5KTsKICAgIH0sIHRoaXMp
        OwoKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLyoqCiAgICBJbnZva2VzIHRo
        ZSBuYW1lZCBtZXRob2Qgb24gZXZlcnkgb2JqZWN0IGluIHRoZSByZWNlaXZl
        ciB0aGF0CiAgICBpbXBsZW1lbnRzIGl0LiBUaGlzIG1ldGhvZCBjb3JyZXNw
        b25kcyB0byB0aGUgaW1wbGVtZW50YXRpb24gaW4KICAgIFByb3RvdHlwZSAx
        LjYuCgogICAgQG1ldGhvZCBpbnZva2UKICAgIEBwYXJhbSB7U3RyaW5nfSBt
        ZXRob2ROYW1lIHRoZSBuYW1lIG9mIHRoZSBtZXRob2QKICAgIEBwYXJhbSB7
        T2JqZWN0Li4ufSBhcmdzIG9wdGlvbmFsIGFyZ3VtZW50cyB0byBwYXNzIGFz
        IHdlbGwuCiAgICBAcmV0dXJuIHtBcnJheX0gcmV0dXJuIHZhbHVlcyBmcm9t
        IGNhbGxpbmcgaW52b2tlLgogICovCiAgaW52b2tlOiBmdW5jdGlvbihtZXRo
        b2ROYW1lKSB7CiAgICB2YXIgYXJncywgcmV0ID0gRW1iZXIuQSgpOwogICAg
        aWYgKGFyZ3VtZW50cy5sZW5ndGg+MSkgYXJncyA9IGFfc2xpY2UuY2FsbChh
        cmd1bWVudHMsIDEpOwoKICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih4LCBp
        ZHgpIHsKICAgICAgdmFyIG1ldGhvZCA9IHggJiYgeFttZXRob2ROYW1lXTsK
        ICAgICAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBtZXRob2QpIHsKICAg
        ICAgICByZXRbaWR4XSA9IGFyZ3MgPyBtZXRob2QuYXBwbHkoeCwgYXJncykg
        OiBtZXRob2QuY2FsbCh4KTsKICAgICAgfQogICAgfSwgdGhpcyk7CgogICAg
        cmV0dXJuIHJldDsKICB9LAoKICAvKioKICAgIFNpbXBseSBjb252ZXJ0cyB0
        aGUgZW51bWVyYWJsZSBpbnRvIGEgZ2VudWluZSBhcnJheS4gVGhlIG9yZGVy
        IGlzIG5vdAogICAgZ3VhcmFudGVlZC4gQ29ycmVzcG9uZHMgdG8gdGhlIG1l
        dGhvZCBpbXBsZW1lbnRlZCBieSBQcm90b3R5cGUuCgogICAgQG1ldGhvZCB0
        b0FycmF5CiAgICBAcmV0dXJuIHtBcnJheX0gdGhlIGVudW1lcmFibGUgYXMg
        YW4gYXJyYXkuCiAgKi8KICB0b0FycmF5OiBmdW5jdGlvbigpIHsKICAgIHZh
        ciByZXQgPSBFbWJlci5BKCk7CiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24o
        bywgaWR4KSB7IHJldFtpZHhdID0gbzsgfSk7CiAgICByZXR1cm4gcmV0IDsK
        ICB9LAoKICAvKioKICAgIFJldHVybnMgYSBjb3B5IG9mIHRoZSBhcnJheSB3
        aXRoIGFsbCBudWxsIGFuZCB1bmRlZmluZWQgZWxlbWVudHMgcmVtb3ZlZC4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgYXJyID0gWyJhIiwgbnVsbCwg
        ImMiLCB1bmRlZmluZWRdOwogICAgYXJyLmNvbXBhY3QoKTsgIC8vIFsiYSIs
        ICJjIl0KICAgIGBgYAoKICAgIEBtZXRob2QgY29tcGFjdAogICAgQHJldHVy
        biB7QXJyYXl9IHRoZSBhcnJheSB3aXRob3V0IG51bGwgYW5kIHVuZGVmaW5l
        ZCBlbGVtZW50cy4KICAqLwogIGNvbXBhY3Q6IGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2
        YWx1ZSAhPSBudWxsOyB9KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYSBu
        ZXcgZW51bWVyYWJsZSB0aGF0IGV4Y2x1ZGVzIHRoZSBwYXNzZWQgdmFsdWUu
        IFRoZSBkZWZhdWx0CiAgICBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIGFuIGFy
        cmF5IHJlZ2FyZGxlc3Mgb2YgdGhlIHJlY2VpdmVyIHR5cGUgdW5sZXNzCiAg
        ICB0aGUgcmVjZWl2ZXIgZG9lcyBub3QgY29udGFpbiB0aGUgdmFsdWUuCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsiYSIsICJiIiwgImEi
        LCAiYyJdOwogICAgYXJyLndpdGhvdXQoImEiKTsgIC8vIFsiYiIsICJjIl0K
        ICAgIGBgYAoKICAgIEBtZXRob2Qgd2l0aG91dAogICAgQHBhcmFtIHtPYmpl
        Y3R9IHZhbHVlCiAgICBAcmV0dXJuIHtFbWJlci5FbnVtZXJhYmxlfQogICov
        CiAgd2l0aG91dDogZnVuY3Rpb24odmFsdWUpIHsKICAgIGlmICghdGhpcy5j
        b250YWlucyh2YWx1ZSkpIHJldHVybiB0aGlzOyAvLyBub3RoaW5nIHRvIGRv
        CiAgICB2YXIgcmV0ID0gRW1iZXIuQSgpOwogICAgdGhpcy5mb3JFYWNoKGZ1
        bmN0aW9uKGspIHsKICAgICAgaWYgKGsgIT09IHZhbHVlKSByZXRbcmV0Lmxl
        bmd0aF0gPSBrOwogICAgfSkgOwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAg
        LyoqCiAgICBSZXR1cm5zIGEgbmV3IGVudW1lcmFibGUgdGhhdCBjb250YWlu
        cyBvbmx5IHVuaXF1ZSB2YWx1ZXMuIFRoZSBkZWZhdWx0CiAgICBpbXBsZW1l
        bnRhdGlvbiByZXR1cm5zIGFuIGFycmF5IHJlZ2FyZGxlc3Mgb2YgdGhlIHJl
        Y2VpdmVyIHR5cGUuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9
        IFsiYSIsICJhIiwgImIiLCAiYiJdOwogICAgYXJyLnVuaXEoKTsgIC8vIFsi
        YSIsICJiIl0KICAgIGBgYAoKICAgIEBtZXRob2QgdW5pcQogICAgQHJldHVy
        biB7RW1iZXIuRW51bWVyYWJsZX0KICAqLwogIHVuaXE6IGZ1bmN0aW9uKCkg
        ewogICAgdmFyIHJldCA9IEVtYmVyLkEoKTsKICAgIHRoaXMuZm9yRWFjaChm
        dW5jdGlvbihrKSB7CiAgICAgIGlmIChhX2luZGV4T2YocmV0LCBrKTwwKSBy
        ZXQucHVzaChrKTsKICAgIH0pOwogICAgcmV0dXJuIHJldDsKICB9LAoKICAv
        KioKICAgIFRoaXMgcHJvcGVydHkgd2lsbCB0cmlnZ2VyIGFueXRpbWUgdGhl
        IGVudW1lcmFibGUncyBjb250ZW50IGNoYW5nZXMuCiAgICBZb3UgY2FuIG9i
        c2VydmUgdGhpcyBwcm9wZXJ0eSB0byBiZSBub3RpZmllZCBvZiBjaGFuZ2Vz
        IHRvIHRoZSBlbnVtZXJhYmxlcwogICAgY29udGVudC4KCiAgICBGb3IgcGxh
        aW4gZW51bWVyYWJsZXMsIHRoaXMgcHJvcGVydHkgaXMgcmVhZCBvbmx5LiBg
        RW1iZXIuQXJyYXlgIG92ZXJyaWRlcwogICAgdGhpcyBtZXRob2QuCgogICAg
        QHByb3BlcnR5IFtdCiAgICBAdHlwZSBFbWJlci5BcnJheQogICAgQHJldHVy
        biB0aGlzCiAgKi8KICAnW10nOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihr
        ZXksIHZhbHVlKSB7CiAgICByZXR1cm4gdGhpczsKICB9KSwKCiAgLy8gLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLgogIC8vIEVOVU1FUkFCTEUgT0JTRVJWRVJTCiAgLy8KCiAg
        LyoqCiAgICBSZWdpc3RlcnMgYW4gZW51bWVyYWJsZSBvYnNlcnZlci4gTXVz
        dCBpbXBsZW1lbnQgYEVtYmVyLkVudW1lcmFibGVPYnNlcnZlcmAKICAgIG1p
        eGluLgoKICAgIEBtZXRob2QgYWRkRW51bWVyYWJsZU9ic2VydmVyCiAgICBA
        cGFyYW0ge09iamVjdH0gdGFyZ2V0CiAgICBAcGFyYW0ge0hhc2h9IFtvcHRz
        XQogICAgQHJldHVybiB0aGlzCiAgKi8KICBhZGRFbnVtZXJhYmxlT2JzZXJ2
        ZXI6IGZ1bmN0aW9uKHRhcmdldCwgb3B0cykgewogICAgdmFyIHdpbGxDaGFu
        Z2UgPSAob3B0cyAmJiBvcHRzLndpbGxDaGFuZ2UpIHx8ICdlbnVtZXJhYmxl
        V2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlICA9IChvcHRzICYmIG9w
        dHMuZGlkQ2hhbmdlKSB8fCAnZW51bWVyYWJsZURpZENoYW5nZSc7CgogICAg
        dmFyIGhhc09ic2VydmVycyA9IGdldCh0aGlzLCAnaGFzRW51bWVyYWJsZU9i
        c2VydmVycycpOwogICAgaWYgKCFoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3Bl
        cnR5V2lsbENoYW5nZSh0aGlzLCAnaGFzRW51bWVyYWJsZU9ic2VydmVycycp
        OwogICAgRW1iZXIuYWRkTGlzdGVuZXIodGhpcywgJ0BlbnVtZXJhYmxlOmJl
        Zm9yZScsIHRhcmdldCwgd2lsbENoYW5nZSk7CiAgICBFbWJlci5hZGRMaXN0
        ZW5lcih0aGlzLCAnQGVudW1lcmFibGU6Y2hhbmdlJywgdGFyZ2V0LCBkaWRD
        aGFuZ2UpOwogICAgaWYgKCFoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKHRoaXMsICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJyk7CiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFJlbW92ZXMgYSByZWdp
        c3RlcmVkIGVudW1lcmFibGUgb2JzZXJ2ZXIuCgogICAgQG1ldGhvZCByZW1v
        dmVFbnVtZXJhYmxlT2JzZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJn
        ZXQKICAgIEBwYXJhbSB7SGFzaH0gW29wdHNdCiAgICBAcmV0dXJuIHRoaXMK
        ICAqLwogIHJlbW92ZUVudW1lcmFibGVPYnNlcnZlcjogZnVuY3Rpb24odGFy
        Z2V0LCBvcHRzKSB7CiAgICB2YXIgd2lsbENoYW5nZSA9IChvcHRzICYmIG9w
        dHMud2lsbENoYW5nZSkgfHwgJ2VudW1lcmFibGVXaWxsQ2hhbmdlJywKICAg
        ICAgICBkaWRDaGFuZ2UgID0gKG9wdHMgJiYgb3B0cy5kaWRDaGFuZ2UpIHx8
        ICdlbnVtZXJhYmxlRGlkQ2hhbmdlJzsKCiAgICB2YXIgaGFzT2JzZXJ2ZXJz
        ID0gZ2V0KHRoaXMsICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJyk7CiAgICBp
        ZiAoaGFzT2JzZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhp
        cywgJ2hhc0VudW1lcmFibGVPYnNlcnZlcnMnKTsKICAgIEVtYmVyLnJlbW92
        ZUxpc3RlbmVyKHRoaXMsICdAZW51bWVyYWJsZTpiZWZvcmUnLCB0YXJnZXQs
        IHdpbGxDaGFuZ2UpOwogICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIodGhpcywg
        J0BlbnVtZXJhYmxlOmNoYW5nZScsIHRhcmdldCwgZGlkQ2hhbmdlKTsKICAg
        IGlmIChoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRo
        aXMsICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJyk7CiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICAvKioKICAgIEJlY29tZXMgdHJ1ZSB3aGVuZXZlciB0aGUg
        YXJyYXkgY3VycmVudGx5IGhhcyBvYnNlcnZlcnMgd2F0Y2hpbmcgY2hhbmdl
        cwogICAgb24gdGhlIGFycmF5LgoKICAgIEBwcm9wZXJ0eSBoYXNFbnVtZXJh
        YmxlT2JzZXJ2ZXJzCiAgICBAdHlwZSBCb29sZWFuCiAgKi8KICBoYXNFbnVt
        ZXJhYmxlT2JzZXJ2ZXJzOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiBFbWJlci5oYXNMaXN0ZW5lcnModGhpcywgJ0BlbnVtZXJh
        YmxlOmNoYW5nZScpIHx8IEVtYmVyLmhhc0xpc3RlbmVycyh0aGlzLCAnQGVu
        dW1lcmFibGU6YmVmb3JlJyk7CiAgfSksCgoKICAvKioKICAgIEludm9rZSB0
        aGlzIG1ldGhvZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgb2YgeW91ciBl
        bnVtZXJhYmxlIHdpbGwKICAgIGNoYW5nZS4gWW91IGNhbiBlaXRoZXIgb21p
        dCB0aGUgcGFyYW1ldGVycyBjb21wbGV0ZWx5IG9yIHBhc3MgdGhlIG9iamVj
        dHMKICAgIHRvIGJlIHJlbW92ZWQgb3IgYWRkZWQgaWYgYXZhaWxhYmxlIG9y
        IGp1c3QgYSBjb3VudC4KCiAgICBAbWV0aG9kIGVudW1lcmFibGVDb250ZW50
        V2lsbENoYW5nZQogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfE51bWJl
        cn0gcmVtb3ZpbmcgQW4gZW51bWVyYWJsZSBvZiB0aGUgb2JqZWN0cyB0bwog
        ICAgICBiZSByZW1vdmVkIG9yIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUg
        cmVtb3ZlZC4KICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZXxOdW1iZXJ9
        IGFkZGluZyBBbiBlbnVtZXJhYmxlIG9mIHRoZSBvYmplY3RzIHRvIGJlCiAg
        ICAgIGFkZGVkIG9yIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgYWRkZWQu
        CiAgICBAY2hhaW5hYmxlCiAgKi8KICBlbnVtZXJhYmxlQ29udGVudFdpbGxD
        aGFuZ2U6IGZ1bmN0aW9uKHJlbW92aW5nLCBhZGRpbmcpIHsKCiAgICB2YXIg
        cmVtb3ZlQ250LCBhZGRDbnQsIGhhc0RlbHRhOwoKICAgIGlmICgnbnVtYmVy
        JyA9PT0gdHlwZW9mIHJlbW92aW5nKSByZW1vdmVDbnQgPSByZW1vdmluZzsK
        ICAgIGVsc2UgaWYgKHJlbW92aW5nKSByZW1vdmVDbnQgPSBnZXQocmVtb3Zp
        bmcsICdsZW5ndGgnKTsKICAgIGVsc2UgcmVtb3ZlQ250ID0gcmVtb3Zpbmcg
        PSAtMTsKCiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBhZGRpbmcpIGFk
        ZENudCA9IGFkZGluZzsKICAgIGVsc2UgaWYgKGFkZGluZykgYWRkQ250ID0g
        Z2V0KGFkZGluZywnbGVuZ3RoJyk7CiAgICBlbHNlIGFkZENudCA9IGFkZGlu
        ZyA9IC0xOwoKICAgIGhhc0RlbHRhID0gYWRkQ250PDAgfHwgcmVtb3ZlQ250
        PDAgfHwgYWRkQ250LXJlbW92ZUNudCE9PTA7CgogICAgaWYgKHJlbW92aW5n
        ID09PSAtMSkgcmVtb3ZpbmcgPSBudWxsOwogICAgaWYgKGFkZGluZyAgID09
        PSAtMSkgYWRkaW5nICAgPSBudWxsOwoKICAgIEVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZSh0aGlzLCAnW10nKTsKICAgIGlmIChoYXNEZWx0YSkgRW1iZXIu
        cHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsICdsZW5ndGgnKTsKICAgIEVtYmVy
        LnNlbmRFdmVudCh0aGlzLCAnQGVudW1lcmFibGU6YmVmb3JlJywgW3RoaXMs
        IHJlbW92aW5nLCBhZGRpbmddKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoK
        ICAvKioKICAgIEludm9rZSB0aGlzIG1ldGhvZCB3aGVuIHRoZSBjb250ZW50
        cyBvZiB5b3VyIGVudW1lcmFibGUgaGFzIGNoYW5nZWQuCiAgICBUaGlzIHdp
        bGwgbm90aWZ5IGFueSBvYnNlcnZlcnMgd2F0Y2hpbmcgZm9yIGNvbnRlbnQg
        Y2hhbmdlcy4gSWYgeW91ciBhcmUKICAgIGltcGxlbWVudGluZyBhbiBvcmRl
        cmVkIGVudW1lcmFibGUgKHN1Y2ggYXMgYW4gYXJyYXkpLCBhbHNvIHBhc3Mg
        dGhlCiAgICBzdGFydCBhbmQgZW5kIHZhbHVlcyB3aGVyZSB0aGUgY29udGVu
        dCBjaGFuZ2VkIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgdG8KICAgIG5vdGlm
        eSByYW5nZSBvYnNlcnZlcnMuCgogICAgQG1ldGhvZCBlbnVtZXJhYmxlQ29u
        dGVudERpZENoYW5nZQogICAgQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gb3B0
        aW9uYWwgc3RhcnQgb2Zmc2V0IGZvciB0aGUgY29udGVudCBjaGFuZ2UuCiAg
        ICAgIEZvciB1bm9yZGVyZWQgZW51bWVyYWJsZXMsIHlvdSBzaG91bGQgYWx3
        YXlzIHBhc3MgLTEuCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV8TnVt
        YmVyfSByZW1vdmluZyBBbiBlbnVtZXJhYmxlIG9mIHRoZSBvYmplY3RzIHRv
        CiAgICAgIGJlIHJlbW92ZWQgb3IgdGhlIG51bWJlciBvZiBpdGVtcyB0byBi
        ZSByZW1vdmVkLgogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfE51bWJl
        cn0gYWRkaW5nICBBbiBlbnVtZXJhYmxlIG9mIHRoZSBvYmplY3RzIHRvCiAg
        ICAgIGJlIGFkZGVkIG9yIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgYWRk
        ZWQuCiAgICBAY2hhaW5hYmxlCiAgKi8KICBlbnVtZXJhYmxlQ29udGVudERp
        ZENoYW5nZTogZnVuY3Rpb24ocmVtb3ZpbmcsIGFkZGluZykgewogICAgdmFy
        IHJlbW92ZUNudCwgYWRkQ250LCBoYXNEZWx0YTsKCiAgICBpZiAoJ251bWJl
        cicgPT09IHR5cGVvZiByZW1vdmluZykgcmVtb3ZlQ250ID0gcmVtb3Zpbmc7
        CiAgICBlbHNlIGlmIChyZW1vdmluZykgcmVtb3ZlQ250ID0gZ2V0KHJlbW92
        aW5nLCAnbGVuZ3RoJyk7CiAgICBlbHNlIHJlbW92ZUNudCA9IHJlbW92aW5n
        ID0gLTE7CgogICAgaWYgKCdudW1iZXInID09PSB0eXBlb2YgYWRkaW5nKSBh
        ZGRDbnQgPSBhZGRpbmc7CiAgICBlbHNlIGlmIChhZGRpbmcpIGFkZENudCA9
        IGdldChhZGRpbmcsICdsZW5ndGgnKTsKICAgIGVsc2UgYWRkQ250ID0gYWRk
        aW5nID0gLTE7CgogICAgaGFzRGVsdGEgPSBhZGRDbnQ8MCB8fCByZW1vdmVD
        bnQ8MCB8fCBhZGRDbnQtcmVtb3ZlQ250IT09MDsKCiAgICBpZiAocmVtb3Zp
        bmcgPT09IC0xKSByZW1vdmluZyA9IG51bGw7CiAgICBpZiAoYWRkaW5nICAg
        PT09IC0xKSBhZGRpbmcgICA9IG51bGw7CgogICAgRW1iZXIuc2VuZEV2ZW50
        KHRoaXMsICdAZW51bWVyYWJsZTpjaGFuZ2UnLCBbdGhpcywgcmVtb3Zpbmcs
        IGFkZGluZ10pOwogICAgaWYgKGhhc0RlbHRhKSBFbWJlci5wcm9wZXJ0eURp
        ZENoYW5nZSh0aGlzLCAnbGVuZ3RoJyk7CiAgICBFbWJlci5wcm9wZXJ0eURp
        ZENoYW5nZSh0aGlzLCAnW10nKTsKCiAgICByZXR1cm4gdGhpcyA7CiAgfQoK
        fSk7CgoKICBFbWJlci5FbnVtZXJhYmxlLnJlb3Blbih7CiAgICAvKioKICAg
        ICAgQ29udmVydHMgdGhlIGVudW1lcmFibGUgaW50byBhbiBhcnJheSBhbmQg
        c29ydHMgYnkgdGhlIGtleXMKICAgICAgc3BlY2lmaWVkIGluIHRoZSBhcmd1
        bWVudC4KCiAgICAgIFlvdSBtYXkgcHJvdmlkZSBtdWx0aXBsZSBhcmd1bWVu
        dHMgdG8gc29ydCBieSBtdWx0aXBsZSBwcm9wZXJ0aWVzLgoKICAgICAgQG1l
        dGhvZCBzb3J0QnkKICAgICAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5h
        bWUocykgdG8gc29ydCBvbgogICAgICBAcmV0dXJuIHtBcnJheX0gVGhlIHNv
        cnRlZCBhcnJheS4KICAgICovCiAgICBzb3J0Qnk6IGZ1bmN0aW9uKCkgewog
        ICAgICB2YXIgc29ydEtleXMgPSBhcmd1bWVudHM7CiAgICAgIHJldHVybiB0
        aGlzLnRvQXJyYXkoKS5zb3J0KGZ1bmN0aW9uKGEsIGIpewogICAgICAgIGZv
        cih2YXIgaSA9IDA7IGkgPCBzb3J0S2V5cy5sZW5ndGg7IGkrKykgewogICAg
        ICAgICAgdmFyIGtleSA9IHNvcnRLZXlzW2ldLAogICAgICAgICAgICAgIHBy
        b3BBID0gZ2V0KGEsIGtleSksCiAgICAgICAgICAgICAgcHJvcEIgPSBnZXQo
        Yiwga2V5KTsKICAgICAgICAgIC8vIHJldHVybiAxIG9yIC0xIGVsc2UgY29u
        dGludWUgdG8gdGhlIG5leHQgc29ydEtleQogICAgICAgICAgdmFyIGNvbXBh
        cmVWYWx1ZSA9IEVtYmVyLmNvbXBhcmUocHJvcEEsIHByb3BCKTsKICAgICAg
        ICAgIGlmIChjb21wYXJlVmFsdWUpIHsgcmV0dXJuIGNvbXBhcmVWYWx1ZTsg
        fQogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgICAgfSk7CiAgICB9
        CiAgfSk7CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8vIC4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4KLy8gSEVMUEVSUwovLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0
        ID0gRW1iZXIuc2V0LCBpc05vbmUgPSBFbWJlci5pc05vbmUsIG1hcCA9IEVt
        YmVyLkVudW1lcmFibGVVdGlscy5tYXAsIGNhY2hlRm9yID0gRW1iZXIuY2Fj
        aGVGb3I7CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIEFSUkFZCi8vCi8qKgogIFRo
        aXMgbW9kdWxlIGltcGxlbWVudHMgT2JzZXJ2ZXItZnJpZW5kbHkgQXJyYXkt
        bGlrZSBiZWhhdmlvci4gVGhpcyBtaXhpbiBpcwogIHBpY2tlZCB1cCBieSB0
        aGUgQXJyYXkgY2xhc3MgYXMgd2VsbCBhcyBvdGhlciBjb250cm9sbGVycywg
        ZXRjLiB0aGF0IHdhbnQgdG8KICBhcHBlYXIgdG8gYmUgYXJyYXlzLgoKICBV
        bmxpa2UgYEVtYmVyLkVudW1lcmFibGUsYCB0aGlzIG1peGluIGRlZmluZXMg
        bWV0aG9kcyBzcGVjaWZpY2FsbHkgZm9yCiAgY29sbGVjdGlvbnMgdGhhdCBw
        cm92aWRlIGluZGV4LW9yZGVyZWQgYWNjZXNzIHRvIHRoZWlyIGNvbnRlbnRz
        LiBXaGVuIHlvdQogIGFyZSBkZXNpZ25pbmcgY29kZSB0aGF0IG5lZWRzIHRv
        IGFjY2VwdCBhbnkga2luZCBvZiBBcnJheS1saWtlIG9iamVjdCwgeW91CiAg
        c2hvdWxkIHVzZSB0aGVzZSBtZXRob2RzIGluc3RlYWQgb2YgQXJyYXkgcHJp
        bWl0aXZlcyBiZWNhdXNlIHRoZXNlIHdpbGwKICBwcm9wZXJseSBub3RpZnkg
        b2JzZXJ2ZXJzIG9mIGNoYW5nZXMgdG8gdGhlIGFycmF5LgoKICBBbHRob3Vn
        aCB0aGVzZSBtZXRob2RzIGFyZSBlZmZpY2llbnQsIHRoZXkgZG8gYWRkIGEg
        bGF5ZXIgb2YgaW5kaXJlY3Rpb24gdG8KICB5b3VyIGFwcGxpY2F0aW9uIHNv
        IGl0IGlzIGEgZ29vZCBpZGVhIHRvIHVzZSB0aGVtIG9ubHkgd2hlbiB5b3Ug
        bmVlZCB0aGUKICBmbGV4aWJpbGl0eSBvZiB1c2luZyBib3RoIHRydWUgSmF2
        YVNjcmlwdCBhcnJheXMgYW5kICJ2aXJ0dWFsIiBhcnJheXMgc3VjaAogIGFz
        IGNvbnRyb2xsZXJzIGFuZCBjb2xsZWN0aW9ucy4KCiAgWW91IGNhbiB1c2Ug
        dGhlIG1ldGhvZHMgZGVmaW5lZCBpbiB0aGlzIG1vZHVsZSB0byBhY2Nlc3Mg
        YW5kIG1vZGlmeSBhcnJheQogIGNvbnRlbnRzIGluIGEgS1ZPLWZyaWVuZGx5
        IHdheS4gWW91IGNhbiBhbHNvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIHRoZQog
        IG1lbWJlcnNoaXAgb2YgYW4gYXJyYXkgY2hhbmdlcyBieSBjaGFuZ2luZyB0
        aGUgc3ludGF4IG9mIHRoZSBwcm9wZXJ0eSB0bwogIGAub2JzZXJ2ZXMoJypt
        eVByb3BlcnR5LltdJylgLgoKICBUbyBzdXBwb3J0IGBFbWJlci5BcnJheWAg
        aW4geW91ciBvd24gY2xhc3MsIHlvdSBtdXN0IG92ZXJyaWRlIHR3bwogIHBy
        aW1pdGl2ZXMgdG8gdXNlIGl0OiBgcmVwbGFjZSgpYCBhbmQgYG9iamVjdEF0
        KClgLgoKICBOb3RlIHRoYXQgdGhlIEVtYmVyLkFycmF5IG1peGluIGFsc28g
        aW5jb3Jwb3JhdGVzIHRoZSBgRW1iZXIuRW51bWVyYWJsZWAKICBtaXhpbi4g
        QWxsIGBFbWJlci5BcnJheWAtbGlrZSBvYmplY3RzIGFyZSBhbHNvIGVudW1l
        cmFibGUuCgogIEBjbGFzcyBBcnJheQogIEBuYW1lc3BhY2UgRW1iZXIKICBA
        dXNlcyBFbWJlci5FbnVtZXJhYmxlCiAgQHNpbmNlIEVtYmVyIDAuOS4wCiov
        CkVtYmVyLkFycmF5ID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkVudW1l
        cmFibGUsIC8qKiBAc2NvcGUgRW1iZXIuQXJyYXkucHJvdG90eXBlICovIHsK
        CiAgLyoqCiAgICBZb3VyIGFycmF5IG11c3Qgc3VwcG9ydCB0aGUgYGxlbmd0
        aGAgcHJvcGVydHkuIFlvdXIgcmVwbGFjZSBtZXRob2RzIHNob3VsZAogICAg
        c2V0IHRoaXMgcHJvcGVydHkgd2hlbmV2ZXIgaXQgY2hhbmdlcy4KCiAgICBA
        cHJvcGVydHkge051bWJlcn0gbGVuZ3RoCiAgKi8KICBsZW5ndGg6IEVtYmVy
        LnJlcXVpcmVkKCksCgogIC8qKgogICAgUmV0dXJucyB0aGUgb2JqZWN0IGF0
        IHRoZSBnaXZlbiBgaW5kZXhgLiBJZiB0aGUgZ2l2ZW4gYGluZGV4YCBpcyBu
        ZWdhdGl2ZQogICAgb3IgaXMgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHRoZSBh
        cnJheSBsZW5ndGgsIHJldHVybnMgYHVuZGVmaW5lZGAuCgogICAgVGhpcyBp
        cyBvbmUgb2YgdGhlIHByaW1pdGl2ZXMgeW91IG11c3QgaW1wbGVtZW50IHRv
        IHN1cHBvcnQgYEVtYmVyLkFycmF5YC4KICAgIElmIHlvdXIgb2JqZWN0IHN1
        cHBvcnRzIHJldHJpZXZpbmcgdGhlIHZhbHVlIG9mIGFuIGFycmF5IGl0ZW0g
        dXNpbmcgYGdldCgpYAogICAgKGkuZS4gYG15QXJyYXkuZ2V0KDApYCksIHRo
        ZW4geW91IGRvIG5vdCBuZWVkIHRvIGltcGxlbWVudCB0aGlzIG1ldGhvZAog
        ICAgeW91cnNlbGYuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9
        IFsnYScsICdiJywgJ2MnLCAnZCddOwogICAgYXJyLm9iamVjdEF0KDApOyAg
        IC8vICJhIgogICAgYXJyLm9iamVjdEF0KDMpOyAgIC8vICJkIgogICAgYXJy
        Lm9iamVjdEF0KC0xKTsgIC8vIHVuZGVmaW5lZAogICAgYXJyLm9iamVjdEF0
        KDQpOyAgIC8vIHVuZGVmaW5lZAogICAgYXJyLm9iamVjdEF0KDUpOyAgIC8v
        IHVuZGVmaW5lZAogICAgYGBgCgogICAgQG1ldGhvZCBvYmplY3RBdAogICAg
        QHBhcmFtIHtOdW1iZXJ9IGlkeCBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gdG8g
        cmV0dXJuLgogICAgQHJldHVybiB7Kn0gaXRlbSBhdCBpbmRleCBvciB1bmRl
        ZmluZWQKICAqLwogIG9iamVjdEF0OiBmdW5jdGlvbihpZHgpIHsKICAgIGlm
        ICgoaWR4IDwgMCkgfHwgKGlkeD49Z2V0KHRoaXMsICdsZW5ndGgnKSkpIHJl
        dHVybiB1bmRlZmluZWQgOwogICAgcmV0dXJuIGdldCh0aGlzLCBpZHgpOwog
        IH0sCgogIC8qKgogICAgVGhpcyByZXR1cm5zIHRoZSBvYmplY3RzIGF0IHRo
        ZSBzcGVjaWZpZWQgaW5kZXhlcywgdXNpbmcgYG9iamVjdEF0YC4KCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICB2YXIgYXJyID3CoFsnYScsICdiJywgJ2MnLCAn
        ZCddOwogICAgYXJyLm9iamVjdHNBdChbMCwgMSwgMl0pOyAgLy8gWyJhIiwg
        ImIiLCAiYyJdCiAgICBhcnIub2JqZWN0c0F0KFsyLCAzLCA0XSk7ICAvLyBb
        ImMiLCAiZCIsIHVuZGVmaW5lZF0KICAgIGBgYAoKICAgIEBtZXRob2Qgb2Jq
        ZWN0c0F0CiAgICBAcGFyYW0ge0FycmF5fSBpbmRleGVzIEFuIGFycmF5IG9m
        IGluZGV4ZXMgb2YgaXRlbXMgdG8gcmV0dXJuLgogICAgQHJldHVybiB7QXJy
        YXl9CiAgICovCiAgb2JqZWN0c0F0OiBmdW5jdGlvbihpbmRleGVzKSB7CiAg
        ICB2YXIgc2VsZiA9IHRoaXM7CiAgICByZXR1cm4gbWFwKGluZGV4ZXMsIGZ1
        bmN0aW9uKGlkeCkgeyByZXR1cm4gc2VsZi5vYmplY3RBdChpZHgpOyB9KTsK
        ICB9LAoKICAvLyBvdmVycmlkZXMgRW1iZXIuRW51bWVyYWJsZSB2ZXJzaW9u
        CiAgbmV4dE9iamVjdDogZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gdGhp
        cy5vYmplY3RBdChpZHgpOwogIH0sCgogIC8qKgogICAgVGhpcyBpcyB0aGUg
        aGFuZGxlciBmb3IgdGhlIHNwZWNpYWwgYXJyYXkgY29udGVudCBwcm9wZXJ0
        eS4gSWYgeW91IGdldAogICAgdGhpcyBwcm9wZXJ0eSwgaXQgd2lsbCByZXR1
        cm4gdGhpcy4gSWYgeW91IHNldCB0aGlzIHByb3BlcnR5IGl0IGEgbmV3CiAg
        ICBhcnJheSwgaXQgd2lsbCByZXBsYWNlIHRoZSBjdXJyZW50IGNvbnRlbnQu
        CgogICAgVGhpcyBwcm9wZXJ0eSBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcHJv
        cGVydHkgZGVmaW5lZCBpbiBgRW1iZXIuRW51bWVyYWJsZWAuCgogICAgQHBy
        b3BlcnR5IFtdCiAgICBAcmV0dXJuIHRoaXMKICAqLwogICdbXSc6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmICh2YWx1
        ZSAhPT0gdW5kZWZpbmVkKSB0aGlzLnJlcGxhY2UoMCwgZ2V0KHRoaXMsICds
        ZW5ndGgnKSwgdmFsdWUpIDsKICAgIHJldHVybiB0aGlzIDsKICB9KSwKCiAg
        Zmlyc3RPYmplY3Q6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMub2JqZWN0QXQoMCk7CiAgfSksCgogIGxhc3RPYmplY3Q6
        IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMu
        b2JqZWN0QXQoZ2V0KHRoaXMsICdsZW5ndGgnKS0xKTsKICB9KSwKCiAgLy8g
        b3B0aW1pemVkIHZlcnNpb24gZnJvbSBFbnVtZXJhYmxlCiAgY29udGFpbnM6
        IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIHRoaXMuaW5kZXhPZihvYmop
        ID49IDA7CiAgfSwKCiAgLy8gQWRkIGFueSBleHRyYSBtZXRob2RzIHRvIEVt
        YmVyLkFycmF5IHRoYXQgYXJlIG5hdGl2ZSB0byB0aGUgYnVpbHQtaW4gQXJy
        YXkuCiAgLyoqCiAgICBSZXR1cm5zIGEgbmV3IGFycmF5IHRoYXQgaXMgYSBz
        bGljZSBvZiB0aGUgcmVjZWl2ZXIuIFRoaXMgaW1wbGVtZW50YXRpb24KICAg
        IHVzZXMgdGhlIG9ic2VydmFibGUgYXJyYXkgbWV0aG9kcyB0byByZXRyaWV2
        ZSB0aGUgb2JqZWN0cyBmb3IgdGhlIG5ldwogICAgc2xpY2UuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsncmVkJywgJ2dyZWVuJywgJ2Js
        dWUnXTsKICAgIGFyci5zbGljZSgwKTsgICAgICAgLy8gWydyZWQnLCAnZ3Jl
        ZW4nLCAnYmx1ZSddCiAgICBhcnIuc2xpY2UoMCwgMik7ICAgIC8vIFsncmVk
        JywgJ2dyZWVuJ10KICAgIGFyci5zbGljZSgxLCAxMDApOyAgLy8gWydncmVl
        bicsICdibHVlJ10KICAgIGBgYAoKICAgIEBtZXRob2Qgc2xpY2UKICAgIEBw
        YXJhbSB7SW50ZWdlcn0gYmVnaW5JbmRleCAoT3B0aW9uYWwpIGluZGV4IHRv
        IGJlZ2luIHNsaWNpbmcgZnJvbS4KICAgIEBwYXJhbSB7SW50ZWdlcn0gZW5k
        SW5kZXggKE9wdGlvbmFsKSBpbmRleCB0byBlbmQgdGhlIHNsaWNlIGF0Lgog
        ICAgQHJldHVybiB7QXJyYXl9IE5ldyBhcnJheSB3aXRoIHNwZWNpZmllZCBz
        bGljZQogICovCiAgc2xpY2U6IGZ1bmN0aW9uKGJlZ2luSW5kZXgsIGVuZElu
        ZGV4KSB7CiAgICB2YXIgcmV0ID0gRW1iZXIuQSgpOwogICAgdmFyIGxlbmd0
        aCA9IGdldCh0aGlzLCAnbGVuZ3RoJykgOwogICAgaWYgKGlzTm9uZShiZWdp
        bkluZGV4KSkgYmVnaW5JbmRleCA9IDAgOwogICAgaWYgKGlzTm9uZShlbmRJ
        bmRleCkgfHwgKGVuZEluZGV4ID4gbGVuZ3RoKSkgZW5kSW5kZXggPSBsZW5n
        dGggOwoKICAgIGlmIChiZWdpbkluZGV4IDwgMCkgYmVnaW5JbmRleCA9IGxl
        bmd0aCArIGJlZ2luSW5kZXg7CiAgICBpZiAoZW5kSW5kZXggPCAwKSBlbmRJ
        bmRleCA9IGxlbmd0aCArIGVuZEluZGV4OwoKICAgIHdoaWxlKGJlZ2luSW5k
        ZXggPCBlbmRJbmRleCkgewogICAgICByZXRbcmV0Lmxlbmd0aF0gPSB0aGlz
        Lm9iamVjdEF0KGJlZ2luSW5kZXgrKykgOwogICAgfQogICAgcmV0dXJuIHJl
        dCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUg
        Z2l2ZW4gb2JqZWN0J3MgZmlyc3Qgb2NjdXJyZW5jZS4KICAgIElmIG5vIGBz
        dGFydEF0YCBhcmd1bWVudCBpcyBnaXZlbiwgdGhlIHN0YXJ0aW5nIGxvY2F0
        aW9uIHRvCiAgICBzZWFyY2ggaXMgMC4gSWYgaXQncyBuZWdhdGl2ZSwgd2ls
        bCBjb3VudCBiYWNrd2FyZCBmcm9tCiAgICB0aGUgZW5kIG9mIHRoZSBhcnJh
        eS4gUmV0dXJucyAtMSBpZiBubyBtYXRjaCBpcyBmb3VuZC4KCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgYXJyID0gWyJhIiwgImIiLCAiYyIsICJkIiwg
        ImEiXTsKICAgIGFyci5pbmRleE9mKCJhIik7ICAgICAgIC8vICAwCiAgICBh
        cnIuaW5kZXhPZigieiIpOyAgICAgICAvLyAtMQogICAgYXJyLmluZGV4T2Yo
        ImEiLCAyKTsgICAgLy8gIDQKICAgIGFyci5pbmRleE9mKCJhIiwgLTEpOyAg
        IC8vICA0CiAgICBhcnIuaW5kZXhPZigiYiIsIDMpOyAgICAvLyAtMQogICAg
        YXJyLmluZGV4T2YoImEiLCAxMDApOyAgLy8gLTEKICAgIGBgYAoKICAgIEBt
        ZXRob2QgaW5kZXhPZgogICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCB0aGUg
        aXRlbSB0byBzZWFyY2ggZm9yCiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnRB
        dCBvcHRpb25hbCBzdGFydGluZyBsb2NhdGlvbiB0byBzZWFyY2gsIGRlZmF1
        bHQgMAogICAgQHJldHVybiB7TnVtYmVyfSBpbmRleCBvciAtMSBpZiBub3Qg
        Zm91bmQKICAqLwogIGluZGV4T2Y6IGZ1bmN0aW9uKG9iamVjdCwgc3RhcnRB
        dCkgewogICAgdmFyIGlkeCwgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsK
        CiAgICBpZiAoc3RhcnRBdCA9PT0gdW5kZWZpbmVkKSBzdGFydEF0ID0gMDsK
        ICAgIGlmIChzdGFydEF0IDwgMCkgc3RhcnRBdCArPSBsZW47CgogICAgZm9y
        KGlkeD1zdGFydEF0O2lkeDxsZW47aWR4KyspIHsKICAgICAgaWYgKHRoaXMu
        b2JqZWN0QXQoaWR4KSA9PT0gb2JqZWN0KSByZXR1cm4gaWR4IDsKICAgIH0K
        ICAgIHJldHVybiAtMTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIGlu
        ZGV4IG9mIHRoZSBnaXZlbiBvYmplY3QncyBsYXN0IG9jY3VycmVuY2UuCiAg
        ICBJZiBubyBgc3RhcnRBdGAgYXJndW1lbnQgaXMgZ2l2ZW4sIHRoZSBzZWFy
        Y2ggc3RhcnRzIGZyb20KICAgIHRoZSBsYXN0IHBvc2l0aW9uLiBJZiBpdCdz
        IG5lZ2F0aXZlLCB3aWxsIGNvdW50IGJhY2t3YXJkCiAgICBmcm9tIHRoZSBl
        bmQgb2YgdGhlIGFycmF5LiBSZXR1cm5zIC0xIGlmIG5vIG1hdGNoIGlzIGZv
        dW5kLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBhcnIgPSBbImEiLCAi
        YiIsICJjIiwgImQiLCAiYSJdOwogICAgYXJyLmxhc3RJbmRleE9mKCJhIik7
        ICAgICAgIC8vICA0CiAgICBhcnIubGFzdEluZGV4T2YoInoiKTsgICAgICAg
        Ly8gLTEKICAgIGFyci5sYXN0SW5kZXhPZigiYSIsIDIpOyAgICAvLyAgMAog
        ICAgYXJyLmxhc3RJbmRleE9mKCJhIiwgLTEpOyAgIC8vICA0CiAgICBhcnIu
        bGFzdEluZGV4T2YoImIiLCAzKTsgICAgLy8gIDEKICAgIGFyci5sYXN0SW5k
        ZXhPZigiYSIsIDEwMCk7ICAvLyAgNAogICAgYGBgCgogICAgQG1ldGhvZCBs
        YXN0SW5kZXhPZgogICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCB0aGUgaXRl
        bSB0byBzZWFyY2ggZm9yCiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnRBdCBv
        cHRpb25hbCBzdGFydGluZyBsb2NhdGlvbiB0byBzZWFyY2gsIGRlZmF1bHQg
        MAogICAgQHJldHVybiB7TnVtYmVyfSBpbmRleCBvciAtMSBpZiBub3QgZm91
        bmQKICAqLwogIGxhc3RJbmRleE9mOiBmdW5jdGlvbihvYmplY3QsIHN0YXJ0
        QXQpIHsKICAgIHZhciBpZHgsIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7
        CgogICAgaWYgKHN0YXJ0QXQgPT09IHVuZGVmaW5lZCB8fCBzdGFydEF0ID49
        IGxlbikgc3RhcnRBdCA9IGxlbi0xOwogICAgaWYgKHN0YXJ0QXQgPCAwKSBz
        dGFydEF0ICs9IGxlbjsKCiAgICBmb3IoaWR4PXN0YXJ0QXQ7aWR4Pj0wO2lk
        eC0tKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdEF0KGlkeCkgPT09IG9iamVj
        dCkgcmV0dXJuIGlkeCA7CiAgICB9CiAgICByZXR1cm4gLTE7CiAgfSwKCiAg
        Ly8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLgogIC8vIEFSUkFZIE9CU0VSVkVSUwogIC8vCgog
        IC8qKgogICAgQWRkcyBhbiBhcnJheSBvYnNlcnZlciB0byB0aGUgcmVjZWl2
        aW5nIGFycmF5LiBUaGUgYXJyYXkgb2JzZXJ2ZXIgb2JqZWN0CiAgICBub3Jt
        YWxseSBtdXN0IGltcGxlbWVudCB0d28gbWV0aG9kczoKCiAgICAqIGBhcnJh
        eVdpbGxDaGFuZ2Uob2JzZXJ2ZWRPYmosIHN0YXJ0LCByZW1vdmVDb3VudCwg
        YWRkQ291bnQpYCAtIFRoaXMgbWV0aG9kIHdpbGwgYmUKICAgICAgY2FsbGVk
        IGp1c3QgYmVmb3JlIHRoZSBhcnJheSBpcyBtb2RpZmllZC4KICAgICogYGFy
        cmF5RGlkQ2hhbmdlKG9ic2VydmVkT2JqLCBzdGFydCwgcmVtb3ZlQ291bnQs
        IGFkZENvdW50KWAgLSBUaGlzIG1ldGhvZCB3aWxsIGJlCiAgICAgIGNhbGxl
        ZCBqdXN0IGFmdGVyIHRoZSBhcnJheSBpcyBtb2RpZmllZC4KCiAgICBCb3Ro
        IGNhbGxiYWNrcyB3aWxsIGJlIHBhc3NlZCB0aGUgb2JzZXJ2ZWQgb2JqZWN0
        LCBzdGFydGluZyBpbmRleCBvZiB0aGUKICAgIGNoYW5nZSBhcyB3ZWxsIGEg
        YSBjb3VudCBvZiB0aGUgaXRlbXMgdG8gYmUgcmVtb3ZlZCBhbmQgYWRkZWQu
        IFlvdSBjYW4gdXNlCiAgICB0aGVzZSBjYWxsYmFja3MgdG8gb3B0aW9uYWxs
        eSBpbnNwZWN0IHRoZSBhcnJheSBkdXJpbmcgdGhlIGNoYW5nZSwgY2xlYXIK
        ICAgIGNhY2hlcywgb3IgZG8gYW55IG90aGVyIGJvb2trZWVwaW5nIG5lY2Vz
        c2FyeS4KCiAgICBJbiBhZGRpdGlvbiB0byBwYXNzaW5nIGEgdGFyZ2V0LCB5
        b3UgY2FuIGFsc28gaW5jbHVkZSBhbiBvcHRpb25zIGhhc2gKICAgIHdoaWNo
        IHlvdSBjYW4gdXNlIHRvIG92ZXJyaWRlIHRoZSBtZXRob2QgbmFtZXMgdGhh
        dCB3aWxsIGJlIGludm9rZWQgb24gdGhlCiAgICB0YXJnZXQuCgogICAgQG1l
        dGhvZCBhZGRBcnJheU9ic2VydmVyCiAgICBAcGFyYW0ge09iamVjdH0gdGFy
        Z2V0IFRoZSBvYnNlcnZlciBvYmplY3QuCiAgICBAcGFyYW0ge0hhc2h9IG9w
        dHMgT3B0aW9uYWwgaGFzaCBvZiBjb25maWd1cmF0aW9uIG9wdGlvbnMgaW5j
        bHVkaW5nCiAgICAgIGB3aWxsQ2hhbmdlYCBhbmQgYGRpZENoYW5nZWAgb3B0
        aW9uLgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IHJlY2VpdmVyCiAgKi8K
        ICBhZGRBcnJheU9ic2VydmVyOiBmdW5jdGlvbih0YXJnZXQsIG9wdHMpIHsK
        ICAgIHZhciB3aWxsQ2hhbmdlID0gKG9wdHMgJiYgb3B0cy53aWxsQ2hhbmdl
        KSB8fCAnYXJyYXlXaWxsQ2hhbmdlJywKICAgICAgICBkaWRDaGFuZ2UgID0g
        KG9wdHMgJiYgb3B0cy5kaWRDaGFuZ2UpIHx8ICdhcnJheURpZENoYW5nZSc7
        CgogICAgdmFyIGhhc09ic2VydmVycyA9IGdldCh0aGlzLCAnaGFzQXJyYXlP
        YnNlcnZlcnMnKTsKICAgIGlmICghaGFzT2JzZXJ2ZXJzKSBFbWJlci5wcm9w
        ZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2hhc0FycmF5T2JzZXJ2ZXJzJyk7CiAg
        ICBFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCAnQGFycmF5OmJlZm9yZScsIHRh
        cmdldCwgd2lsbENoYW5nZSk7CiAgICBFbWJlci5hZGRMaXN0ZW5lcih0aGlz
        LCAnQGFycmF5OmNoYW5nZScsIHRhcmdldCwgZGlkQ2hhbmdlKTsKICAgIGlm
        ICghaGFzT2JzZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAgIHJldHVybiB0aGlzOwogIH0s
        CgogIC8qKgogICAgUmVtb3ZlcyBhbiBhcnJheSBvYnNlcnZlciBmcm9tIHRo
        ZSBvYmplY3QgaWYgdGhlIG9ic2VydmVyIGlzIGN1cnJlbnQKICAgIHJlZ2lz
        dGVyZWQuIENhbGxpbmcgdGhpcyBtZXRob2QgbXVsdGlwbGUgdGltZXMgd2l0
        aCB0aGUgc2FtZSBvYmplY3Qgd2lsbAogICAgaGF2ZSBubyBlZmZlY3QuCgog
        ICAgQG1ldGhvZCByZW1vdmVBcnJheU9ic2VydmVyCiAgICBAcGFyYW0ge09i
        amVjdH0gdGFyZ2V0IFRoZSBvYmplY3Qgb2JzZXJ2aW5nIHRoZSBhcnJheS4K
        ICAgIEBwYXJhbSB7SGFzaH0gb3B0cyBPcHRpb25hbCBoYXNoIG9mIGNvbmZp
        Z3VyYXRpb24gb3B0aW9ucyBpbmNsdWRpbmcKICAgICAgYHdpbGxDaGFuZ2Vg
        IGFuZCBgZGlkQ2hhbmdlYCBvcHRpb24uCiAgICBAcmV0dXJuIHtFbWJlci5B
        cnJheX0gcmVjZWl2ZXIKICAqLwogIHJlbW92ZUFycmF5T2JzZXJ2ZXI6IGZ1
        bmN0aW9uKHRhcmdldCwgb3B0cykgewogICAgdmFyIHdpbGxDaGFuZ2UgPSAo
        b3B0cyAmJiBvcHRzLndpbGxDaGFuZ2UpIHx8ICdhcnJheVdpbGxDaGFuZ2Un
        LAogICAgICAgIGRpZENoYW5nZSAgPSAob3B0cyAmJiBvcHRzLmRpZENoYW5n
        ZSkgfHwgJ2FycmF5RGlkQ2hhbmdlJzsKCiAgICB2YXIgaGFzT2JzZXJ2ZXJz
        ID0gZ2V0KHRoaXMsICdoYXNBcnJheU9ic2VydmVycycpOwogICAgaWYgKGhh
        c09ic2VydmVycykgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsICdo
        YXNBcnJheU9ic2VydmVycycpOwogICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIo
        dGhpcywgJ0BhcnJheTpiZWZvcmUnLCB0YXJnZXQsIHdpbGxDaGFuZ2UpOwog
        ICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIodGhpcywgJ0BhcnJheTpjaGFuZ2Un
        LCB0YXJnZXQsIGRpZENoYW5nZSk7CiAgICBpZiAoaGFzT2JzZXJ2ZXJzKSBF
        bWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnaGFzQXJyYXlPYnNlcnZl
        cnMnKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQmVjb21l
        cyB0cnVlIHdoZW5ldmVyIHRoZSBhcnJheSBjdXJyZW50bHkgaGFzIG9ic2Vy
        dmVycyB3YXRjaGluZyBjaGFuZ2VzCiAgICBvbiB0aGUgYXJyYXkuCgogICAg
        QHByb3BlcnR5IEJvb2xlYW4KICAqLwogIGhhc0FycmF5T2JzZXJ2ZXJzOiBF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHJldHVybiBFbWJlci5o
        YXNMaXN0ZW5lcnModGhpcywgJ0BhcnJheTpjaGFuZ2UnKSB8fCBFbWJlci5o
        YXNMaXN0ZW5lcnModGhpcywgJ0BhcnJheTpiZWZvcmUnKTsKICB9KSwKCiAg
        LyoqCiAgICBJZiB5b3UgYXJlIGltcGxlbWVudGluZyBhbiBvYmplY3QgdGhh
        dCBzdXBwb3J0cyBgRW1iZXIuQXJyYXlgLCBjYWxsIHRoaXMKICAgIG1ldGhv
        ZCBqdXN0IGJlZm9yZSB0aGUgYXJyYXkgY29udGVudCBjaGFuZ2VzIHRvIG5v
        dGlmeSBhbnkgb2JzZXJ2ZXJzIGFuZAogICAgaW52YWxpZGF0ZSBhbnkgcmVs
        YXRlZCBwcm9wZXJ0aWVzLiBQYXNzIHRoZSBzdGFydGluZyBpbmRleCBvZiB0
        aGUgY2hhbmdlCiAgICBhcyB3ZWxsIGFzIGEgZGVsdGEgb2YgdGhlIGFtb3Vu
        dHMgdG8gY2hhbmdlLgoKICAgIEBtZXRob2QgYXJyYXlDb250ZW50V2lsbENo
        YW5nZQogICAgQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0SWR4IFRoZSBzdGFydGlu
        ZyBpbmRleCBpbiB0aGUgYXJyYXkgdGhhdCB3aWxsIGNoYW5nZS4KICAgIEBw
        YXJhbSB7TnVtYmVyfSByZW1vdmVBbXQgVGhlIG51bWJlciBvZiBpdGVtcyB0
        aGF0IHdpbGwgYmUgcmVtb3ZlZC4gSWYgeW91CiAgICAgIHBhc3MgYG51bGxg
        IGFzc3VtZXMgMAogICAgQHBhcmFtIHtOdW1iZXJ9IGFkZEFtdCBUaGUgbnVt
        YmVyIG9mIGl0ZW1zIHRoYXQgd2lsbCBiZSBhZGRlZC4gSWYgeW91CiAgICAg
        IHBhc3MgYG51bGxgIGFzc3VtZXMgMC4KICAgIEByZXR1cm4ge0VtYmVyLkFy
        cmF5fSByZWNlaXZlcgogICovCiAgYXJyYXlDb250ZW50V2lsbENoYW5nZTog
        ZnVuY3Rpb24oc3RhcnRJZHgsIHJlbW92ZUFtdCwgYWRkQW10KSB7CgogICAg
        Ly8gaWYgbm8gYXJncyBhcmUgcGFzc2VkIGFzc3VtZSBldmVyeXRoaW5nIGNo
        YW5nZXMKICAgIGlmIChzdGFydElkeD09PXVuZGVmaW5lZCkgewogICAgICBz
        dGFydElkeCA9IDA7CiAgICAgIHJlbW92ZUFtdCA9IGFkZEFtdCA9IC0xOwog
        ICAgfSBlbHNlIHsKICAgICAgaWYgKHJlbW92ZUFtdCA9PT0gdW5kZWZpbmVk
        KSByZW1vdmVBbXQ9LTE7CiAgICAgIGlmIChhZGRBbXQgICAgPT09IHVuZGVm
        aW5lZCkgYWRkQW10PS0xOwogICAgfQoKICAgIC8vIE1ha2Ugc3VyZSB0aGUg
        QGVhY2ggcHJveHkgaXMgc2V0IHVwIGlmIGFueW9uZSBpcyBvYnNlcnZpbmcg
        QGVhY2gKICAgIGlmIChFbWJlci5pc1dhdGNoaW5nKHRoaXMsICdAZWFjaCcp
        KSB7IGdldCh0aGlzLCAnQGVhY2gnKTsgfQoKICAgIEVtYmVyLnNlbmRFdmVu
        dCh0aGlzLCAnQGFycmF5OmJlZm9yZScsIFt0aGlzLCBzdGFydElkeCwgcmVt
        b3ZlQW10LCBhZGRBbXRdKTsKCiAgICB2YXIgcmVtb3ZpbmcsIGxpbTsKICAg
        IGlmIChzdGFydElkeD49MCAmJiByZW1vdmVBbXQ+PTAgJiYgZ2V0KHRoaXMs
        ICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJykpIHsKICAgICAgcmVtb3Zpbmcg
        PSBbXTsKICAgICAgbGltID0gc3RhcnRJZHgrcmVtb3ZlQW10OwogICAgICBm
        b3IodmFyIGlkeD1zdGFydElkeDtpZHg8bGltO2lkeCsrKSByZW1vdmluZy5w
        dXNoKHRoaXMub2JqZWN0QXQoaWR4KSk7CiAgICB9IGVsc2UgewogICAgICBy
        ZW1vdmluZyA9IHJlbW92ZUFtdDsKICAgIH0KCiAgICB0aGlzLmVudW1lcmFi
        bGVDb250ZW50V2lsbENoYW5nZShyZW1vdmluZywgYWRkQW10KTsKCiAgICBy
        ZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIElmIHlvdSBhcmUgaW1wbGVt
        ZW50aW5nIGFuIG9iamVjdCB0aGF0IHN1cHBvcnRzIGBFbWJlci5BcnJheWAs
        IGNhbGwgdGhpcwogICAgbWV0aG9kIGp1c3QgYWZ0ZXIgdGhlIGFycmF5IGNv
        bnRlbnQgY2hhbmdlcyB0byBub3RpZnkgYW55IG9ic2VydmVycyBhbmQKICAg
        IGludmFsaWRhdGUgYW55IHJlbGF0ZWQgcHJvcGVydGllcy4gUGFzcyB0aGUg
        c3RhcnRpbmcgaW5kZXggb2YgdGhlIGNoYW5nZQogICAgYXMgd2VsbCBhcyBh
        IGRlbHRhIG9mIHRoZSBhbW91bnRzIHRvIGNoYW5nZS4KCiAgICBAbWV0aG9k
        IGFycmF5Q29udGVudERpZENoYW5nZQogICAgQHBhcmFtIHtOdW1iZXJ9IHN0
        YXJ0SWR4IFRoZSBzdGFydGluZyBpbmRleCBpbiB0aGUgYXJyYXkgdGhhdCBk
        aWQgY2hhbmdlLgogICAgQHBhcmFtIHtOdW1iZXJ9IHJlbW92ZUFtdCBUaGUg
        bnVtYmVyIG9mIGl0ZW1zIHRoYXQgd2VyZSByZW1vdmVkLiBJZiB5b3UKICAg
        ICAgcGFzcyBgbnVsbGAgYXNzdW1lcyAwCiAgICBAcGFyYW0ge051bWJlcn0g
        YWRkQW10IFRoZSBudW1iZXIgb2YgaXRlbXMgdGhhdCB3ZXJlIGFkZGVkLiBJ
        ZiB5b3UKICAgICAgcGFzcyBgbnVsbGAgYXNzdW1lcyAwLgogICAgQHJldHVy
        biB7RW1iZXIuQXJyYXl9IHJlY2VpdmVyCiAgKi8KICBhcnJheUNvbnRlbnRE
        aWRDaGFuZ2U6IGZ1bmN0aW9uKHN0YXJ0SWR4LCByZW1vdmVBbXQsIGFkZEFt
        dCkgewoKICAgIC8vIGlmIG5vIGFyZ3MgYXJlIHBhc3NlZCBhc3N1bWUgZXZl
        cnl0aGluZyBjaGFuZ2VzCiAgICBpZiAoc3RhcnRJZHg9PT11bmRlZmluZWQp
        IHsKICAgICAgc3RhcnRJZHggPSAwOwogICAgICByZW1vdmVBbXQgPSBhZGRB
        bXQgPSAtMTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChyZW1vdmVBbXQgPT09
        IHVuZGVmaW5lZCkgcmVtb3ZlQW10PS0xOwogICAgICBpZiAoYWRkQW10ICAg
        ID09PSB1bmRlZmluZWQpIGFkZEFtdD0tMTsKICAgIH0KCiAgICB2YXIgYWRk
        aW5nLCBsaW07CiAgICBpZiAoc3RhcnRJZHg+PTAgJiYgYWRkQW10Pj0wICYm
        IGdldCh0aGlzLCAnaGFzRW51bWVyYWJsZU9ic2VydmVycycpKSB7CiAgICAg
        IGFkZGluZyA9IFtdOwogICAgICBsaW0gPSBzdGFydElkeCthZGRBbXQ7CiAg
        ICAgIGZvcih2YXIgaWR4PXN0YXJ0SWR4O2lkeDxsaW07aWR4KyspIGFkZGlu
        Zy5wdXNoKHRoaXMub2JqZWN0QXQoaWR4KSk7CiAgICB9IGVsc2UgewogICAg
        ICBhZGRpbmcgPSBhZGRBbXQ7CiAgICB9CgogICAgdGhpcy5lbnVtZXJhYmxl
        Q29udGVudERpZENoYW5nZShyZW1vdmVBbXQsIGFkZGluZyk7CiAgICBFbWJl
        ci5zZW5kRXZlbnQodGhpcywgJ0BhcnJheTpjaGFuZ2UnLCBbdGhpcywgc3Rh
        cnRJZHgsIHJlbW92ZUFtdCwgYWRkQW10XSk7CgogICAgdmFyIGxlbmd0aCAg
        ICAgID0gZ2V0KHRoaXMsICdsZW5ndGgnKSwKICAgICAgICBjYWNoZWRGaXJz
        dCA9IGNhY2hlRm9yKHRoaXMsICdmaXJzdE9iamVjdCcpLAogICAgICAgIGNh
        Y2hlZExhc3QgID0gY2FjaGVGb3IodGhpcywgJ2xhc3RPYmplY3QnKTsKICAg
        IGlmICh0aGlzLm9iamVjdEF0KDApICE9PSBjYWNoZWRGaXJzdCkgewogICAg
        ICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2ZpcnN0T2JqZWN0
        Jyk7CiAgICAgIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdmaXJz
        dE9iamVjdCcpOwogICAgfQogICAgaWYgKHRoaXMub2JqZWN0QXQobGVuZ3Ro
        LTEpICE9PSBjYWNoZWRMYXN0KSB7CiAgICAgIEVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcpOwogICAgICBFbWJlci5wcm9w
        ZXJ0eURpZENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcpOwogICAgfQoKICAg
        IHJldHVybiB0aGlzOwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBF
        TlVNRVJBVEVEIFBST1BFUlRJRVMKICAvLwoKICAvKioKICAgIFJldHVybnMg
        YSBzcGVjaWFsIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIG9ic2VydmUg
        aW5kaXZpZHVhbCBwcm9wZXJ0aWVzCiAgICBvbiB0aGUgYXJyYXkuIEp1c3Qg
        Z2V0IGFuIGVxdWl2YWxlbnQgcHJvcGVydHkgb24gdGhpcyBvYmplY3QgYW5k
        IGl0IHdpbGwKICAgIHJldHVybiBhbiBlbnVtZXJhYmxlIHRoYXQgbWFwcyBh
        dXRvbWF0aWNhbGx5IHRvIHRoZSBuYW1lZCBrZXkgb24gdGhlCiAgICBtZW1i
        ZXIgb2JqZWN0cy4KCiAgICBJZiB5b3UgbWVyZWx5IHdhbnQgdG8gd2F0Y2gg
        Zm9yIGFueSBpdGVtcyBiZWluZyBhZGRlZCBvciByZW1vdmVkIHRvIHRoZSBh
        cnJheSwKICAgIHVzZSB0aGUgYFtdYCBwcm9wZXJ0eSBpbnN0ZWFkIG9mIGBA
        ZWFjaGAuCgogICAgQHByb3BlcnR5IEBlYWNoCiAgKi8KICAnQGVhY2gnOiBF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5fX2Vh
        Y2gpIHRoaXMuX19lYWNoID0gbmV3IEVtYmVyLkVhY2hQcm94eSh0aGlzKTsK
        ICAgIHJldHVybiB0aGlzLl9fZWFjaDsKICB9KQoKfSkgOwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewp2YXIgZV9nZXQgPSBFbWJlci5nZXQsCiAgICBzZXQg
        PSBFbWJlci5zZXQsCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAg
        IG1ldGFGb3IgPSBFbWJlci5tZXRhLAogICAgcHJvcGVydHlXaWxsQ2hhbmdl
        ID0gRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlLAogICAgcHJvcGVydHlEaWRD
        aGFuZ2UgPSBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSwKICAgIGFkZEJlZm9y
        ZU9ic2VydmVyID0gRW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIsCiAgICByZW1v
        dmVCZWZvcmVPYnNlcnZlciA9IEVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVy
        LAogICAgYWRkT2JzZXJ2ZXIgPSBFbWJlci5hZGRPYnNlcnZlciwKICAgIHJl
        bW92ZU9ic2VydmVyID0gRW1iZXIucmVtb3ZlT2JzZXJ2ZXIsCiAgICBDb21w
        dXRlZFByb3BlcnR5ID0gRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eSwKICAgIGFf
        c2xpY2UgPSBbXS5zbGljZSwKICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRl
        LAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNo
        LAogICAgLy8gSGVyZSB3ZSBleHBsaWNpdGx5IGRvbid0IGFsbG93IGBAZWFj
        aC5mb29gOyBpdCB3b3VsZCByZXF1aXJlIHNvbWUgc3BlY2lhbAogICAgLy8g
        dGVzdGluZywgYnV0IHRoZXJlJ3Mgbm8gcGFydGljdWxhciByZWFzb24gd2h5
        IGl0IHNob3VsZCBiZSBkaXNhbGxvd2VkLgogICAgZWFjaFByb3BlcnR5UGF0
        dGVybiA9IC9eKC4qKVwuQGVhY2hcLiguKikvLAogICAgZG91YmxlRWFjaFBy
        b3BlcnR5UGF0dGVybiA9IC8oLipcLkBlYWNoKXsyLH0vLAogICAgYXJyYXlC
        cmFja2V0UGF0dGVybiA9IC9cLlxbXF0kLzsKCmZ1bmN0aW9uIGdldChvYmos
        IGtleSkgewogIAogICAgaWYgKGtleSA9PT0gJ0B0aGlzJykgewogICAgICBy
        ZXR1cm4gb2JqOwogICAgfQogIAoKICByZXR1cm4gZV9nZXQob2JqLCBrZXkp
        Owp9CgovKgogIFRyYWNrcyBjaGFuZ2VzIHRvIGRlcGVuZGVudCBhcnJheXMs
        IGFzIHdlbGwgYXMgdG8gcHJvcGVydGllcyBvZiBpdGVtcyBpbgogIGRlcGVu
        ZGVudCBhcnJheXMuCgogIEBjbGFzcyBEZXBlbmRlbnRBcnJheXNPYnNlcnZl
        cgoqLwpmdW5jdGlvbiBEZXBlbmRlbnRBcnJheXNPYnNlcnZlcihjYWxsYmFj
        a3MsIGNwLCBpbnN0YW5jZU1ldGEsIGNvbnRleHQsIHByb3BlcnR5TmFtZSwg
        c3VnYXJNZXRhKSB7CiAgLy8gdXNlciBzcGVjaWZpZWQgY2FsbGJhY2tzIGZv
        ciBgYWRkZWRJdGVtYCBhbmQgYHJlbW92ZWRJdGVtYAogIHRoaXMuY2FsbGJh
        Y2tzID0gY2FsbGJhY2tzOwoKICAvLyB0aGUgY29tcHV0ZWQgcHJvcGVydHk6
        IHJlbWVtYmVyIHRoZXNlIGFyZSBzaGFyZWQgYWNyb3NzIGluc3RhbmNlcwog
        IHRoaXMuY3AgPSBjcDsKCiAgLy8gdGhlIFJlZHVjZUNvbXB1dGVkUHJvcGVy
        dHlJbnN0YW5jZU1ldGEgdGhpcyBEZXBlbmRlbnRBcnJheXNPYnNlcnZlciBp
        cwogIC8vIGFzc29jaWF0ZWQgd2l0aAogIHRoaXMuaW5zdGFuY2VNZXRhID0g
        aW5zdGFuY2VNZXRhOwoKICAvLyBBIG1hcCBvZiBhcnJheSBndWlkcyB0byBk
        ZXBlbmRlbnRLZXlzLCBmb3IgdGhlIGdpdmVuIGNvbnRleHQuICBXZSB0cmFj
        awogIC8vIHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHNldCB1cCB0aGUgY29t
        cHV0ZWQgcHJvcGVydHkgcG90ZW50aWFsbHkgYmVmb3JlIHRoZQogIC8vIGRl
        cGVuZGVudCBhcnJheSBldmVuIGV4aXN0cywgYnV0IHdoZW4gdGhlIGFycmF5
        IG9ic2VydmVyIGZpcmVzLCB3ZSBsYWNrCiAgLy8gZW5vdWdoIGNvbnRleHQg
        dG8ga25vdyB3aGF0IHRvIHVwZGF0ZTogd2UgY2FuIHJlY292ZXIgdGhhdCBj
        b250ZXh0IGJ5CiAgLy8gZ2V0dGluZyB0aGUgZGVwZW5kZW50S2V5LgogIHRo
        aXMuZGVwZW5kZW50S2V5c0J5R3VpZCA9IHt9OwoKICAvLyBhIG1hcCBvZiBk
        ZXBlbmRlbnQgYXJyYXkgZ3VpZHMgLT4gRW1iZXIuVHJhY2tlZEFycmF5IGlu
        c3RhbmNlcy4gIFdlIHVzZQogIC8vIHRoaXMgdG8gbGF6aWx5IHJlY29tcHV0
        ZSBpbmRleGVzIGZvciBpdGVtIHByb3BlcnR5IG9ic2VydmVycy4KICB0aGlz
        LnRyYWNrZWRBcnJheXNCeUd1aWQgPSB7fTsKCiAgLy8gV2Ugc3VzcGVuZCBv
        YnNlcnZlcnMgdG8gaWdub3JlIHJlcGxhY2VtZW50cyBmcm9tIGByZXNldGAg
        d2hlbiB0b3RhbGx5CiAgLy8gcmVjb21wdXRpbmcuICBVbmZvcnR1bmF0ZWx5
        IHdlIGNhbm5vdCBwcm9wZXJseSBzdXNwZW5kIHRoZSBvYnNlcnZlcnMKICAv
        LyBiZWNhdXNlIHdlIG9ubHkgaGF2ZSB0aGUga2V5OyBpbnN0ZWFkIHdlIG1h
        a2UgdGhlIG9ic2VydmVycyBuby1vcHMKICB0aGlzLnN1c3BlbmRlZCA9IGZh
        bHNlOwoKICAvLyBUaGlzIGlzIHVzZWQgdG8gY29hbGVzY2UgaXRlbSBjaGFu
        Z2VzIGZyb20gcHJvcGVydHkgb2JzZXJ2ZXJzLgogIHRoaXMuY2hhbmdlZEl0
        ZW1zID0ge307Cn0KCmZ1bmN0aW9uIEl0ZW1Qcm9wZXJ0eU9ic2VydmVyQ29u
        dGV4dCAoZGVwZW5kZW50QXJyYXksIGluZGV4LCB0cmFja2VkQXJyYXkpIHsK
        ICBFbWJlci5hc3NlcnQoIkludGVybmFsIGVycm9yOiB0cmFja2VkQXJyYXkg
        aXMgbnVsbCBvciB1bmRlZmluZWQiLCB0cmFja2VkQXJyYXkpOwoKICB0aGlz
        LmRlcGVuZGVudEFycmF5ID0gZGVwZW5kZW50QXJyYXk7CiAgdGhpcy5pbmRl
        eCA9IGluZGV4OwogIHRoaXMuaXRlbSA9IGRlcGVuZGVudEFycmF5Lm9iamVj
        dEF0KGluZGV4KTsKICB0aGlzLnRyYWNrZWRBcnJheSA9IHRyYWNrZWRBcnJh
        eTsKICB0aGlzLmJlZm9yZU9ic2VydmVyID0gbnVsbDsKICB0aGlzLm9ic2Vy
        dmVyID0gbnVsbDsKCiAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTsKfQoKRGVw
        ZW5kZW50QXJyYXlzT2JzZXJ2ZXIucHJvdG90eXBlID0gewogIHNldFZhbHVl
        OiBmdW5jdGlvbiAobmV3VmFsdWUpIHsKICAgIHRoaXMuaW5zdGFuY2VNZXRh
        LnNldFZhbHVlKG5ld1ZhbHVlLCB0cnVlKTsKICB9LAogIGdldFZhbHVlOiBm
        dW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZU1ldGEuZ2V0
        VmFsdWUoKTsKICB9LAoKICBzZXR1cE9ic2VydmVyczogZnVuY3Rpb24gKGRl
        cGVuZGVudEFycmF5LCBkZXBlbmRlbnRLZXkpIHsKICAgIEVtYmVyLmFzc2Vy
        dCgiZGVwZW5kZW50IGFycmF5IG11c3QgYmUgYW4gYEVtYmVyLkFycmF5YCIs
        IEVtYmVyLkFycmF5LmRldGVjdChkZXBlbmRlbnRBcnJheSkpOwoKICAgIHRo
        aXMuZGVwZW5kZW50S2V5c0J5R3VpZFtndWlkRm9yKGRlcGVuZGVudEFycmF5
        KV0gPSBkZXBlbmRlbnRLZXk7CgogICAgZGVwZW5kZW50QXJyYXkuYWRkQXJy
        YXlPYnNlcnZlcih0aGlzLCB7CiAgICAgIHdpbGxDaGFuZ2U6ICdkZXBlbmRl
        bnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICBkaWRDaGFuZ2U6ICdkZXBlbmRl
        bnRBcnJheURpZENoYW5nZScKICAgIH0pOwoKICAgIGlmICh0aGlzLmNwLl9p
        dGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEtleV0pIHsKICAgICAgdGhpcy5z
        ZXR1cFByb3BlcnR5T2JzZXJ2ZXJzKGRlcGVuZGVudEtleSwgdGhpcy5jcC5f
        aXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRLZXldKTsKICAgIH0KICB9LAoK
        ICB0ZWFyZG93bk9ic2VydmVyczogZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5
        LCBkZXBlbmRlbnRLZXkpIHsKICAgIHZhciBpdGVtUHJvcGVydHlLZXlzID0g
        dGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRLZXldIHx8IFtd
        OwoKICAgIGRlbGV0ZSB0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbZ3VpZEZv
        cihkZXBlbmRlbnRBcnJheSldOwoKICAgIHRoaXMudGVhcmRvd25Qcm9wZXJ0
        eU9ic2VydmVycyhkZXBlbmRlbnRLZXksIGl0ZW1Qcm9wZXJ0eUtleXMpOwoK
        ICAgIGRlcGVuZGVudEFycmF5LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcywg
        ewogICAgICB3aWxsQ2hhbmdlOiAnZGVwZW5kZW50QXJyYXlXaWxsQ2hhbmdl
        JywKICAgICAgZGlkQ2hhbmdlOiAnZGVwZW5kZW50QXJyYXlEaWRDaGFuZ2Un
        CiAgICB9KTsKICB9LAoKICBzdXNwZW5kQXJyYXlPYnNlcnZlcnM6IGZ1bmN0
        aW9uIChjYWxsYmFjaywgYmluZGluZykgewogICAgdmFyIG9sZFN1c3BlbmRl
        ZCA9IHRoaXMuc3VzcGVuZGVkOwogICAgdGhpcy5zdXNwZW5kZWQgPSB0cnVl
        OwogICAgY2FsbGJhY2suY2FsbChiaW5kaW5nKTsKICAgIHRoaXMuc3VzcGVu
        ZGVkID0gb2xkU3VzcGVuZGVkOwogIH0sCgogIHNldHVwUHJvcGVydHlPYnNl
        cnZlcnM6IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXksIGl0ZW1Qcm9wZXJ0eUtl
        eXMpIHsKICAgIHZhciBkZXBlbmRlbnRBcnJheSA9IGdldCh0aGlzLmluc3Rh
        bmNlTWV0YS5jb250ZXh0LCBkZXBlbmRlbnRLZXkpLAogICAgICAgIGxlbmd0
        aCA9IGdldChkZXBlbmRlbnRBcnJheSwgJ2xlbmd0aCcpLAogICAgICAgIG9i
        c2VydmVyQ29udGV4dHMgPSBuZXcgQXJyYXkobGVuZ3RoKTsKCiAgICB0aGlz
        LnJlc2V0VHJhbnNmb3JtYXRpb25zKGRlcGVuZGVudEtleSwgb2JzZXJ2ZXJD
        b250ZXh0cyk7CgogICAgZm9yRWFjaChkZXBlbmRlbnRBcnJheSwgZnVuY3Rp
        b24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBvYnNlcnZlckNvbnRleHQg
        PSB0aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0KGRlcGVuZGVu
        dEFycmF5LCBpbmRleCwgdGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2RlcGVu
        ZGVudEtleV0pOwogICAgICBvYnNlcnZlckNvbnRleHRzW2luZGV4XSA9IG9i
        c2VydmVyQ29udGV4dDsKCiAgICAgIGZvckVhY2goaXRlbVByb3BlcnR5S2V5
        cywgZnVuY3Rpb24gKHByb3BlcnR5S2V5KSB7CiAgICAgICAgYWRkQmVmb3Jl
        T2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29u
        dGV4dC5iZWZvcmVPYnNlcnZlcik7CiAgICAgICAgYWRkT2JzZXJ2ZXIoaXRl
        bSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29udGV4dC5vYnNlcnZl
        cik7CiAgICAgIH0sIHRoaXMpOwogICAgfSwgdGhpcyk7CiAgfSwKCiAgdGVh
        cmRvd25Qcm9wZXJ0eU9ic2VydmVyczogZnVuY3Rpb24gKGRlcGVuZGVudEtl
        eSwgaXRlbVByb3BlcnR5S2V5cykgewogICAgdmFyIGRlcGVuZGVudEFycmF5
        T2JzZXJ2ZXIgPSB0aGlzLAogICAgICAgIHRyYWNrZWRBcnJheSA9IHRoaXMu
        dHJhY2tlZEFycmF5c0J5R3VpZFtkZXBlbmRlbnRLZXldLAogICAgICAgIGJl
        Zm9yZU9ic2VydmVyLAogICAgICAgIG9ic2VydmVyLAogICAgICAgIGl0ZW07
        CgogICAgaWYgKCF0cmFja2VkQXJyYXkpIHsgcmV0dXJuOyB9CgogICAgdHJh
        Y2tlZEFycmF5LmFwcGx5KGZ1bmN0aW9uIChvYnNlcnZlckNvbnRleHRzLCBv
        ZmZzZXQsIG9wZXJhdGlvbikgewogICAgICBpZiAob3BlcmF0aW9uID09PSBF
        bWJlci5UcmFja2VkQXJyYXkuREVMRVRFKSB7IHJldHVybjsgfQoKICAgICAg
        Zm9yRWFjaChvYnNlcnZlckNvbnRleHRzLCBmdW5jdGlvbiAob2JzZXJ2ZXJD
        b250ZXh0KSB7CiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0LmRlc3Ryb3llZCA9
        IHRydWU7CiAgICAgICAgYmVmb3JlT2JzZXJ2ZXIgPSBvYnNlcnZlckNvbnRl
        eHQuYmVmb3JlT2JzZXJ2ZXI7CiAgICAgICAgb2JzZXJ2ZXIgPSBvYnNlcnZl
        ckNvbnRleHQub2JzZXJ2ZXI7CiAgICAgICAgaXRlbSA9IG9ic2VydmVyQ29u
        dGV4dC5pdGVtOwoKICAgICAgICBmb3JFYWNoKGl0ZW1Qcm9wZXJ0eUtleXMs
        IGZ1bmN0aW9uIChwcm9wZXJ0eUtleSkgewogICAgICAgICAgcmVtb3ZlQmVm
        b3JlT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXksIGRlcGVuZGVudEFycmF5
        T2JzZXJ2ZXIsIGJlZm9yZU9ic2VydmVyKTsKICAgICAgICAgIHJlbW92ZU9i
        c2VydmVyKGl0ZW0sIHByb3BlcnR5S2V5LCBkZXBlbmRlbnRBcnJheU9ic2Vy
        dmVyLCBvYnNlcnZlcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7
        CiAgfSwKCiAgY3JlYXRlUHJvcGVydHlPYnNlcnZlckNvbnRleHQ6IGZ1bmN0
        aW9uIChkZXBlbmRlbnRBcnJheSwgaW5kZXgsIHRyYWNrZWRBcnJheSkgewog
        ICAgdmFyIG9ic2VydmVyQ29udGV4dCA9IG5ldyBJdGVtUHJvcGVydHlPYnNl
        cnZlckNvbnRleHQoZGVwZW5kZW50QXJyYXksIGluZGV4LCB0cmFja2VkQXJy
        YXkpOwoKICAgIHRoaXMuY3JlYXRlUHJvcGVydHlPYnNlcnZlcihvYnNlcnZl
        ckNvbnRleHQpOwoKICAgIHJldHVybiBvYnNlcnZlckNvbnRleHQ7CiAgfSwK
        CiAgY3JlYXRlUHJvcGVydHlPYnNlcnZlcjogZnVuY3Rpb24gKG9ic2VydmVy
        Q29udGV4dCkgewogICAgdmFyIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIgPSB0
        aGlzOwoKICAgIG9ic2VydmVyQ29udGV4dC5iZWZvcmVPYnNlcnZlciA9IGZ1
        bmN0aW9uIChvYmosIGtleU5hbWUpIHsKICAgICAgcmV0dXJuIGRlcGVuZGVu
        dEFycmF5T2JzZXJ2ZXIuaXRlbVByb3BlcnR5V2lsbENoYW5nZShvYmosIGtl
        eU5hbWUsIG9ic2VydmVyQ29udGV4dC5kZXBlbmRlbnRBcnJheSwgb2JzZXJ2
        ZXJDb250ZXh0KTsKICAgIH07CiAgICBvYnNlcnZlckNvbnRleHQub2JzZXJ2
        ZXIgPSBmdW5jdGlvbiAob2JqLCBrZXlOYW1lKSB7CiAgICAgIHJldHVybiBk
        ZXBlbmRlbnRBcnJheU9ic2VydmVyLml0ZW1Qcm9wZXJ0eURpZENoYW5nZShv
        YmosIGtleU5hbWUsIG9ic2VydmVyQ29udGV4dC5kZXBlbmRlbnRBcnJheSwg
        b2JzZXJ2ZXJDb250ZXh0KTsKICAgIH07CiAgfSwKCiAgcmVzZXRUcmFuc2Zv
        cm1hdGlvbnM6IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXksIG9ic2VydmVyQ29u
        dGV4dHMpIHsKICAgIHRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFtkZXBlbmRl
        bnRLZXldID0gbmV3IEVtYmVyLlRyYWNrZWRBcnJheShvYnNlcnZlckNvbnRl
        eHRzKTsKICB9LAoKICB0cmFja0FkZDogZnVuY3Rpb24gKGRlcGVuZGVudEtl
        eSwgaW5kZXgsIG5ld0l0ZW1zKSB7CiAgICB2YXIgdHJhY2tlZEFycmF5ID0g
        dGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2RlcGVuZGVudEtleV07CiAgICBp
        ZiAodHJhY2tlZEFycmF5KSB7CiAgICAgIHRyYWNrZWRBcnJheS5hZGRJdGVt
        cyhpbmRleCwgbmV3SXRlbXMpOwogICAgfQogIH0sCgogIHRyYWNrUmVtb3Zl
        OiBmdW5jdGlvbiAoZGVwZW5kZW50S2V5LCBpbmRleCwgcmVtb3ZlZENvdW50
        KSB7CiAgICB2YXIgdHJhY2tlZEFycmF5ID0gdGhpcy50cmFja2VkQXJyYXlz
        QnlHdWlkW2RlcGVuZGVudEtleV07CgogICAgaWYgKHRyYWNrZWRBcnJheSkg
        ewogICAgICByZXR1cm4gdHJhY2tlZEFycmF5LnJlbW92ZUl0ZW1zKGluZGV4
        LCByZW1vdmVkQ291bnQpOwogICAgfQoKICAgIHJldHVybiBbXTsKICB9LAoK
        ICB1cGRhdGVJbmRleGVzOiBmdW5jdGlvbiAodHJhY2tlZEFycmF5LCBhcnJh
        eSkgewogICAgdmFyIGxlbmd0aCA9IGdldChhcnJheSwgJ2xlbmd0aCcpOwog
        ICAgLy8gT1BUSU1JWkU6IHdlIGNvdWxkIHN0b3AgdXBkYXRpbmcgb25jZSB3
        ZSBoaXQgdGhlIG9iamVjdCB3aG9zZSBvYnNlcnZlcgogICAgLy8gZmlyZWQ7
        IGllIHBhcnRpYWxseSBhcHBseSB0aGUgdHJhbnNmb3JtYXRpb25zCiAgICB0
        cmFja2VkQXJyYXkuYXBwbHkoZnVuY3Rpb24gKG9ic2VydmVyQ29udGV4dHMs
        IG9mZnNldCwgb3BlcmF0aW9uKSB7CiAgICAgIC8vIHdlIGRvbid0IGV2ZW4g
        aGF2ZSBvYnNlcnZlciBjb250ZXh0cyBmb3IgcmVtb3ZlZCBpdGVtcywgZXZl
        biBpZiB3ZSBkaWQsCiAgICAgIC8vIHRoZXkgbm8gbG9uZ2VyIGhhdmUgYW55
        IGluZGV4IGluIHRoZSBhcnJheQogICAgICBpZiAob3BlcmF0aW9uID09PSBF
        bWJlci5UcmFja2VkQXJyYXkuREVMRVRFKSB7IHJldHVybjsgfQogICAgICBp
        ZiAob3BlcmF0aW9uID09PSBFbWJlci5UcmFja2VkQXJyYXkuUkVUQUlOICYm
        IG9ic2VydmVyQ29udGV4dHMubGVuZ3RoID09PSBsZW5ndGggJiYgb2Zmc2V0
        ID09PSAwKSB7CiAgICAgICAgLy8gSWYgd2UgdXBkYXRlIG1hbnkgaXRlbXMg
        d2UgZG9uJ3Qgd2FudCB0byB3YWxrIHRoZSBhcnJheSBlYWNoIHRpbWU6IHdl
        CiAgICAgICAgLy8gb25seSBuZWVkIHRvIHVwZGF0ZSB0aGUgaW5kZXhlcyBh
        dCBtb3N0IG9uY2UgcGVyIHJ1biBsb29wLgogICAgICAgIHJldHVybjsKICAg
        ICAgfQoKICAgICAgZm9yRWFjaChvYnNlcnZlckNvbnRleHRzLCBmdW5jdGlv
        biAoY29udGV4dCwgaW5kZXgpIHsKICAgICAgICBjb250ZXh0LmluZGV4ID0g
        aW5kZXggKyBvZmZzZXQ7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgZGVw
        ZW5kZW50QXJyYXlXaWxsQ2hhbmdlOiBmdW5jdGlvbiAoZGVwZW5kZW50QXJy
        YXksIGluZGV4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpIHsKICAgIGlm
        ICh0aGlzLnN1c3BlbmRlZCkgeyByZXR1cm47IH0KCiAgICB2YXIgcmVtb3Zl
        ZEl0ZW0gPSB0aGlzLmNhbGxiYWNrcy5yZW1vdmVkSXRlbSwKICAgICAgICBj
        aGFuZ2VNZXRhLAogICAgICAgIGd1aWQgPSBndWlkRm9yKGRlcGVuZGVudEFy
        cmF5KSwKICAgICAgICBkZXBlbmRlbnRLZXkgPSB0aGlzLmRlcGVuZGVudEtl
        eXNCeUd1aWRbZ3VpZF0sCiAgICAgICAgaXRlbVByb3BlcnR5S2V5cyA9IHRo
        aXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50S2V5XSB8fCBbXSwK
        ICAgICAgICBsZW5ndGggPSBnZXQoZGVwZW5kZW50QXJyYXksICdsZW5ndGgn
        KSwKICAgICAgICBub3JtYWxpemVkSW5kZXggPSBub3JtYWxpemVJbmRleChp
        bmRleCwgbGVuZ3RoLCAwKSwKICAgICAgICBub3JtYWxpemVkUmVtb3ZlQ291
        bnQgPSBub3JtYWxpemVSZW1vdmVDb3VudChub3JtYWxpemVkSW5kZXgsIGxl
        bmd0aCwgcmVtb3ZlZENvdW50KSwKICAgICAgICBpdGVtLAogICAgICAgIGl0
        ZW1JbmRleCwKICAgICAgICBzbGljZUluZGV4LAogICAgICAgIG9ic2VydmVy
        Q29udGV4dHM7CgogICAgb2JzZXJ2ZXJDb250ZXh0cyA9IHRoaXMudHJhY2tS
        ZW1vdmUoZGVwZW5kZW50S2V5LCBub3JtYWxpemVkSW5kZXgsIG5vcm1hbGl6
        ZWRSZW1vdmVDb3VudCk7CgogICAgZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJz
        KHByb3BlcnR5S2V5KSB7CiAgICAgIG9ic2VydmVyQ29udGV4dHNbc2xpY2VJ
        bmRleF0uZGVzdHJveWVkID0gdHJ1ZTsKICAgICAgcmVtb3ZlQmVmb3JlT2Jz
        ZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29udGV4
        dHNbc2xpY2VJbmRleF0uYmVmb3JlT2JzZXJ2ZXIpOwogICAgICByZW1vdmVP
        YnNlcnZlcihpdGVtLCBwcm9wZXJ0eUtleSwgdGhpcywgb2JzZXJ2ZXJDb250
        ZXh0c1tzbGljZUluZGV4XS5vYnNlcnZlcik7CiAgICB9CgogICAgZm9yIChz
        bGljZUluZGV4ID0gbm9ybWFsaXplZFJlbW92ZUNvdW50IC0gMTsgc2xpY2VJ
        bmRleCA+PSAwOyAtLXNsaWNlSW5kZXgpIHsKICAgICAgaXRlbUluZGV4ID0g
        bm9ybWFsaXplZEluZGV4ICsgc2xpY2VJbmRleDsKICAgICAgaWYgKGl0ZW1J
        bmRleCA+PSBsZW5ndGgpIHsgYnJlYWs7IH0KCiAgICAgIGl0ZW0gPSBkZXBl
        bmRlbnRBcnJheS5vYmplY3RBdChpdGVtSW5kZXgpOwoKICAgICAgZm9yRWFj
        aChpdGVtUHJvcGVydHlLZXlzLCByZW1vdmVPYnNlcnZlcnMsIHRoaXMpOwoK
        ICAgICAgY2hhbmdlTWV0YSA9IGNyZWF0ZUNoYW5nZU1ldGEoZGVwZW5kZW50
        QXJyYXksIGl0ZW0sIGl0ZW1JbmRleCwgdGhpcy5pbnN0YW5jZU1ldGEucHJv
        cGVydHlOYW1lLCB0aGlzLmNwKTsKICAgICAgdGhpcy5zZXRWYWx1ZSggcmVt
        b3ZlZEl0ZW0uY2FsbCgKICAgICAgICB0aGlzLmluc3RhbmNlTWV0YS5jb250
        ZXh0LCB0aGlzLmdldFZhbHVlKCksIGl0ZW0sIGNoYW5nZU1ldGEsIHRoaXMu
        aW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpOwogICAgfQogIH0sCgogIGRlcGVu
        ZGVudEFycmF5RGlkQ2hhbmdlOiBmdW5jdGlvbiAoZGVwZW5kZW50QXJyYXks
        IGluZGV4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpIHsKICAgIGlmICh0
        aGlzLnN1c3BlbmRlZCkgeyByZXR1cm47IH0KCiAgICB2YXIgYWRkZWRJdGVt
        ID0gdGhpcy5jYWxsYmFja3MuYWRkZWRJdGVtLAogICAgICAgIGd1aWQgPSBn
        dWlkRm9yKGRlcGVuZGVudEFycmF5KSwKICAgICAgICBkZXBlbmRlbnRLZXkg
        PSB0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbZ3VpZF0sCiAgICAgICAgb2Jz
        ZXJ2ZXJDb250ZXh0cyA9IG5ldyBBcnJheShhZGRlZENvdW50KSwKICAgICAg
        ICBpdGVtUHJvcGVydHlLZXlzID0gdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5
        c1tkZXBlbmRlbnRLZXldLAogICAgICAgIGxlbmd0aCA9IGdldChkZXBlbmRl
        bnRBcnJheSwgJ2xlbmd0aCcpLAogICAgICAgIG5vcm1hbGl6ZWRJbmRleCA9
        IG5vcm1hbGl6ZUluZGV4KGluZGV4LCBsZW5ndGgsIGFkZGVkQ291bnQpLAog
        ICAgICAgIGNoYW5nZU1ldGEsCiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0OwoK
        ICAgIGZvckVhY2goZGVwZW5kZW50QXJyYXkuc2xpY2Uobm9ybWFsaXplZElu
        ZGV4LCBub3JtYWxpemVkSW5kZXggKyBhZGRlZENvdW50KSwgZnVuY3Rpb24g
        KGl0ZW0sIHNsaWNlSW5kZXgpIHsKICAgICAgaWYgKGl0ZW1Qcm9wZXJ0eUtl
        eXMpIHsKICAgICAgICBvYnNlcnZlckNvbnRleHQgPQogICAgICAgICAgb2Jz
        ZXJ2ZXJDb250ZXh0c1tzbGljZUluZGV4XSA9CiAgICAgICAgICB0aGlzLmNy
        ZWF0ZVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0KGRlcGVuZGVudEFycmF5LCBu
        b3JtYWxpemVkSW5kZXggKyBzbGljZUluZGV4LCB0aGlzLnRyYWNrZWRBcnJh
        eXNCeUd1aWRbZGVwZW5kZW50S2V5XSk7CiAgICAgICAgZm9yRWFjaChpdGVt
        UHJvcGVydHlLZXlzLCBmdW5jdGlvbiAocHJvcGVydHlLZXkpIHsKICAgICAg
        ICAgIGFkZEJlZm9yZU9ic2VydmVyKGl0ZW0sIHByb3BlcnR5S2V5LCB0aGlz
        LCBvYnNlcnZlckNvbnRleHQuYmVmb3JlT2JzZXJ2ZXIpOwogICAgICAgICAg
        YWRkT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVy
        Q29udGV4dC5vYnNlcnZlcik7CiAgICAgICAgfSwgdGhpcyk7CiAgICAgIH0K
        CiAgICAgIGNoYW5nZU1ldGEgPSBjcmVhdGVDaGFuZ2VNZXRhKGRlcGVuZGVu
        dEFycmF5LCBpdGVtLCBub3JtYWxpemVkSW5kZXggKyBzbGljZUluZGV4LCB0
        aGlzLmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5hbWUsIHRoaXMuY3ApOwogICAg
        ICB0aGlzLnNldFZhbHVlKCBhZGRlZEl0ZW0uY2FsbCgKICAgICAgICB0aGlz
        Lmluc3RhbmNlTWV0YS5jb250ZXh0LCB0aGlzLmdldFZhbHVlKCksIGl0ZW0s
        IGNoYW5nZU1ldGEsIHRoaXMuaW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpOwog
        ICAgfSwgdGhpcyk7CgogICAgdGhpcy50cmFja0FkZChkZXBlbmRlbnRLZXks
        IG5vcm1hbGl6ZWRJbmRleCwgb2JzZXJ2ZXJDb250ZXh0cyk7CiAgfSwKCiAg
        aXRlbVByb3BlcnR5V2lsbENoYW5nZTogZnVuY3Rpb24gKG9iaiwga2V5TmFt
        ZSwgYXJyYXksIG9ic2VydmVyQ29udGV4dCkgewogICAgdmFyIGd1aWQgPSBn
        dWlkRm9yKG9iaik7CgogICAgaWYgKCF0aGlzLmNoYW5nZWRJdGVtc1tndWlk
        XSkgewogICAgICB0aGlzLmNoYW5nZWRJdGVtc1tndWlkXSA9IHsKICAgICAg
        ICBhcnJheTogICAgICAgICAgICBhcnJheSwKICAgICAgICBvYnNlcnZlckNv
        bnRleHQ6ICBvYnNlcnZlckNvbnRleHQsCiAgICAgICAgb2JqOiAgICAgICAg
        ICAgICAgb2JqLAogICAgICAgIHByZXZpb3VzVmFsdWVzOiAgIHt9CiAgICAg
        IH07CiAgICB9CgogICAgdGhpcy5jaGFuZ2VkSXRlbXNbZ3VpZF0ucHJldmlv
        dXNWYWx1ZXNba2V5TmFtZV0gPSBnZXQob2JqLCBrZXlOYW1lKTsKICB9LAoK
        ICBpdGVtUHJvcGVydHlEaWRDaGFuZ2U6IGZ1bmN0aW9uKG9iaiwga2V5TmFt
        ZSwgYXJyYXksIG9ic2VydmVyQ29udGV4dCkgewogICAgdGhpcy5mbHVzaENo
        YW5nZXMoKTsKICB9LAoKICBmbHVzaENoYW5nZXM6IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIGNoYW5nZWRJdGVtcyA9IHRoaXMuY2hhbmdlZEl0ZW1zLCBrZXks
        IGMsIGNoYW5nZU1ldGE7CgogICAgZm9yIChrZXkgaW4gY2hhbmdlZEl0ZW1z
        KSB7CiAgICAgIGMgPSBjaGFuZ2VkSXRlbXNba2V5XTsKICAgICAgaWYgKGMu
        b2JzZXJ2ZXJDb250ZXh0LmRlc3Ryb3llZCkgeyBjb250aW51ZTsgfQoKICAg
        ICAgdGhpcy51cGRhdGVJbmRleGVzKGMub2JzZXJ2ZXJDb250ZXh0LnRyYWNr
        ZWRBcnJheSwgYy5vYnNlcnZlckNvbnRleHQuZGVwZW5kZW50QXJyYXkpOwoK
        ICAgICAgY2hhbmdlTWV0YSA9IGNyZWF0ZUNoYW5nZU1ldGEoYy5hcnJheSwg
        Yy5vYmosIGMub2JzZXJ2ZXJDb250ZXh0LmluZGV4LCB0aGlzLmluc3RhbmNl
        TWV0YS5wcm9wZXJ0eU5hbWUsIHRoaXMuY3AsIGMucHJldmlvdXNWYWx1ZXMp
        OwogICAgICB0aGlzLnNldFZhbHVlKAogICAgICAgIHRoaXMuY2FsbGJhY2tz
        LnJlbW92ZWRJdGVtLmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCwg
        dGhpcy5nZXRWYWx1ZSgpLCBjLm9iaiwgY2hhbmdlTWV0YSwgdGhpcy5pbnN0
        YW5jZU1ldGEuc3VnYXJNZXRhKSk7CiAgICAgIHRoaXMuc2V0VmFsdWUoCiAg
        ICAgICAgdGhpcy5jYWxsYmFja3MuYWRkZWRJdGVtLmNhbGwodGhpcy5pbnN0
        YW5jZU1ldGEuY29udGV4dCwgdGhpcy5nZXRWYWx1ZSgpLCBjLm9iaiwgY2hh
        bmdlTWV0YSwgdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRhKSk7CiAgICB9
        CiAgICB0aGlzLmNoYW5nZWRJdGVtcyA9IHt9OwogIH0KfTsKCmZ1bmN0aW9u
        IG5vcm1hbGl6ZUluZGV4KGluZGV4LCBsZW5ndGgsIG5ld0l0ZW1zT2Zmc2V0
        KSB7CiAgaWYgKGluZGV4IDwgMCkgewogICAgcmV0dXJuIE1hdGgubWF4KDAs
        IGxlbmd0aCArIGluZGV4KTsKICB9IGVsc2UgaWYgKGluZGV4IDwgbGVuZ3Ro
        KSB7CiAgICByZXR1cm4gaW5kZXg7CiAgfSBlbHNlIC8qIGluZGV4ID4gbGVu
        Z3RoICovIHsKICAgIHJldHVybiBNYXRoLm1pbihsZW5ndGggLSBuZXdJdGVt
        c09mZnNldCwgaW5kZXgpOwogIH0KfQoKZnVuY3Rpb24gbm9ybWFsaXplUmVt
        b3ZlQ291bnQoaW5kZXgsIGxlbmd0aCwgcmVtb3ZlZENvdW50KSB7CiAgcmV0
        dXJuIE1hdGgubWluKHJlbW92ZWRDb3VudCwgbGVuZ3RoIC0gaW5kZXgpOwp9
        CgpmdW5jdGlvbiBjcmVhdGVDaGFuZ2VNZXRhKGRlcGVuZGVudEFycmF5LCBp
        dGVtLCBpbmRleCwgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eSwgcHJldmlvdXNW
        YWx1ZXMpIHsKICB2YXIgbWV0YSA9IHsKICAgIGFycmF5Q2hhbmdlZDogZGVw
        ZW5kZW50QXJyYXksCiAgICBpbmRleDogaW5kZXgsCiAgICBpdGVtOiBpdGVt
        LAogICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsCiAgICBwcm9wZXJ0
        eTogcHJvcGVydHkKICB9OwoKICBpZiAocHJldmlvdXNWYWx1ZXMpIHsKICAg
        IC8vIHByZXZpb3VzIHZhbHVlcyBvbmx5IGF2YWlsYWJsZSBmb3IgaXRlbSBw
        cm9wZXJ0eSBjaGFuZ2VzCiAgICBtZXRhLnByZXZpb3VzVmFsdWVzID0gcHJl
        dmlvdXNWYWx1ZXM7CiAgfQoKICByZXR1cm4gbWV0YTsKfQoKZnVuY3Rpb24g
        YWRkSXRlbXMgKGRlcGVuZGVudEFycmF5LCBjYWxsYmFja3MsIGNwLCBwcm9w
        ZXJ0eU5hbWUsIG1ldGEpIHsKICBmb3JFYWNoKGRlcGVuZGVudEFycmF5LCBm
        dW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgIG1ldGEuc2V0VmFsdWUoIGNh
        bGxiYWNrcy5hZGRlZEl0ZW0uY2FsbCgKICAgICAgdGhpcywgbWV0YS5nZXRW
        YWx1ZSgpLCBpdGVtLCBjcmVhdGVDaGFuZ2VNZXRhKGRlcGVuZGVudEFycmF5
        LCBpdGVtLCBpbmRleCwgcHJvcGVydHlOYW1lLCBjcCksIG1ldGEuc3VnYXJN
        ZXRhKSk7CiAgfSwgdGhpcyk7Cn0KCmZ1bmN0aW9uIHJlc2V0KGNwLCBwcm9w
        ZXJ0eU5hbWUpIHsKICB2YXIgY2FsbGJhY2tzID0gY3AuX2NhbGxiYWNrcygp
        LAogICAgICBtZXRhOwoKICBpZiAoY3AuX2hhc0luc3RhbmNlTWV0YSh0aGlz
        LCBwcm9wZXJ0eU5hbWUpKSB7CiAgICBtZXRhID0gY3AuX2luc3RhbmNlTWV0
        YSh0aGlzLCBwcm9wZXJ0eU5hbWUpOwogICAgbWV0YS5zZXRWYWx1ZShjcC5y
        ZXNldFZhbHVlKG1ldGEuZ2V0VmFsdWUoKSkpOwogIH0gZWxzZSB7CiAgICBt
        ZXRhID0gY3AuX2luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpOwog
        IH0KCiAgaWYgKGNwLm9wdGlvbnMuaW5pdGlhbGl6ZSkgewogICAgY3Aub3B0
        aW9ucy5pbml0aWFsaXplLmNhbGwodGhpcywgbWV0YS5nZXRWYWx1ZSgpLCB7
        IHByb3BlcnR5OiBjcCwgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUgfSwg
        bWV0YS5zdWdhck1ldGEpOwogIH0KfQoKZnVuY3Rpb24gcGFydGlhbGx5UmVj
        b21wdXRlRm9yKG9iaiwgZGVwZW5kZW50S2V5KSB7CiAgaWYgKGFycmF5QnJh
        Y2tldFBhdHRlcm4udGVzdChkZXBlbmRlbnRLZXkpKSB7CiAgICByZXR1cm4g
        ZmFsc2U7CiAgfQoKICB2YXIgdmFsdWUgPSBnZXQob2JqLCBkZXBlbmRlbnRL
        ZXkpOwogIHJldHVybiBFbWJlci5BcnJheS5kZXRlY3QodmFsdWUpOwp9Cgpm
        dW5jdGlvbiBSZWR1Y2VDb21wdXRlZFByb3BlcnR5SW5zdGFuY2VNZXRhKGNv
        bnRleHQsIHByb3BlcnR5TmFtZSwgaW5pdGlhbFZhbHVlKSB7CiAgdGhpcy5j
        b250ZXh0ID0gY29udGV4dDsKICB0aGlzLnByb3BlcnR5TmFtZSA9IHByb3Bl
        cnR5TmFtZTsKICB0aGlzLmNhY2hlID0gbWV0YUZvcihjb250ZXh0KS5jYWNo
        ZTsKCiAgdGhpcy5kZXBlbmRlbnRBcnJheXMgPSB7fTsKICB0aGlzLnN1Z2Fy
        TWV0YSA9IHt9OwoKICB0aGlzLmluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1
        ZTsKfQoKUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eUluc3RhbmNlTWV0YS5wcm90
        b3R5cGUgPSB7CiAgZ2V0VmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0
        aGlzLnByb3BlcnR5TmFtZSBpbiB0aGlzLmNhY2hlKSB7CiAgICAgIHJldHVy
        biB0aGlzLmNhY2hlW3RoaXMucHJvcGVydHlOYW1lXTsKICAgIH0gZWxzZSB7
        CiAgICAgIHJldHVybiB0aGlzLmluaXRpYWxWYWx1ZTsKICAgIH0KICB9LAoK
        ICBzZXRWYWx1ZTogZnVuY3Rpb24obmV3VmFsdWUsIHRyaWdnZXJPYnNlcnZl
        cnMpIHsKICAgIC8vIFRoaXMgbGV0cyBzdWdhcnMgZm9yY2UgYSByZWNvbXB1
        dGF0aW9uLCBoYW5keSBmb3IgdmVyeSBzaW1wbGUKICAgIC8vIGltcGxlbWVu
        dGF0aW9ucyBvZiBlZyBtYXguCiAgICBpZiAobmV3VmFsdWUgIT09IHVuZGVm
        aW5lZCkgewogICAgICB2YXIgZmlyZU9ic2VydmVycyA9IHRyaWdnZXJPYnNl
        cnZlcnMgJiYgKG5ld1ZhbHVlICE9PSB0aGlzLmNhY2hlW3RoaXMucHJvcGVy
        dHlOYW1lXSk7CgogICAgICBpZiAoZmlyZU9ic2VydmVycykgewogICAgICAg
        IHByb3BlcnR5V2lsbENoYW5nZSh0aGlzLmNvbnRleHQsIHRoaXMucHJvcGVy
        dHlOYW1lKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWNoZVt0aGlzLnByb3Bl
        cnR5TmFtZV0gPSBuZXdWYWx1ZTsKCiAgICAgIGlmIChmaXJlT2JzZXJ2ZXJz
        KSB7CiAgICAgICAgcHJvcGVydHlEaWRDaGFuZ2UodGhpcy5jb250ZXh0LCB0
        aGlzLnByb3BlcnR5TmFtZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAg
        IGRlbGV0ZSB0aGlzLmNhY2hlW3RoaXMucHJvcGVydHlOYW1lXTsKICAgIH0K
        ICB9Cn07CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHdob3NlIGRlcGVu
        ZGVudCBrZXlzIGFyZSBhcnJheXMgYW5kIHdoaWNoIGlzIHVwZGF0ZWQgd2l0
        aAogICJvbmUgYXQgYSB0aW1lIiBzZW1hbnRpY3MuCgogIEBjbGFzcyBSZWR1
        Y2VDb21wdXRlZFByb3BlcnR5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRl
        bmRzIEVtYmVyLkNvbXB1dGVkUHJvcGVydHkKICBAY29uc3RydWN0b3IKKi8K
        ZnVuY3Rpb24gUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eShvcHRpb25zKSB7CiAg
        dmFyIGNwID0gdGhpczsKCiAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICB0
        aGlzLl9pbnN0YW5jZU1ldGFzID0ge307CgogIHRoaXMuX2RlcGVuZGVudEtl
        eXMgPSBudWxsOwogIC8vIEEgbWFwIG9mIGRlcGVuZGVudEtleSAtPiBbaXRl
        bVByb3BlcnR5LCAuLi5dIHRoYXQgdHJhY2tzIHdoYXQgcHJvcGVydGllcyBv
        ZgogIC8vIGl0ZW1zIGluIHRoZSBhcnJheSB3ZSBtdXN0IHRyYWNrIHRvIHVw
        ZGF0ZSB0aGlzIHByb3BlcnR5LgogIHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXMg
        PSB7fTsKICB0aGlzLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXMgPSB7fTsK
        CiAgdGhpcy5yZWFkT25seSgpOwogIHRoaXMuY2FjaGVhYmxlKCk7CgogIHRo
        aXMucmVjb21wdXRlT25jZSA9IGZ1bmN0aW9uKHByb3BlcnR5TmFtZSkgewog
        ICAgLy8gV2hhdCB3ZSByZWFsbHkgd2FudCB0byBkbyBpcyBjb2FsZXNjZSBi
        eSA8Y3AsIHByb3BlcnR5TmFtZT4uCiAgICAvLyBXZSBuZWVkIGEgZm9ybSBv
        ZiBgc2NoZWR1bGVPbmNlYCB0aGF0IGFjY2VwdHMgYW4gYXJiaXRyYXJ5IHRv
        a2VuIHRvCiAgICAvLyBjb2FsZXNjZSBieSwgaW4gYWRkaXRpb24gdG8gdGhl
        IHRhcmdldCBhbmQgbWV0aG9kLgogICAgRW1iZXIucnVuLm9uY2UodGhpcywg
        cmVjb21wdXRlLCBwcm9wZXJ0eU5hbWUpOwogIH07CiAgdmFyIHJlY29tcHV0
        ZSA9IGZ1bmN0aW9uKHByb3BlcnR5TmFtZSkgewogICAgdmFyIGRlcGVuZGVu
        dEtleXMgPSBjcC5fZGVwZW5kZW50S2V5cywKICAgICAgICBtZXRhID0gY3Au
        X2luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpLAogICAgICAgIGNh
        bGxiYWNrcyA9IGNwLl9jYWxsYmFja3MoKTsKCiAgICByZXNldC5jYWxsKHRo
        aXMsIGNwLCBwcm9wZXJ0eU5hbWUpOwoKICAgIG1ldGEuZGVwZW5kZW50QXJy
        YXlzT2JzZXJ2ZXIuc3VzcGVuZEFycmF5T2JzZXJ2ZXJzKGZ1bmN0aW9uICgp
        IHsKICAgICAgZm9yRWFjaChjcC5fZGVwZW5kZW50S2V5cywgZnVuY3Rpb24g
        KGRlcGVuZGVudEtleSkgewogICAgICAgIAogICAgICAgIHZhciBkZXBlbmRl
        bnRBcnJheSA9IGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpLAogICAgICAgICAg
        ICBwcmV2aW91c0RlcGVuZGVudEFycmF5ID0gbWV0YS5kZXBlbmRlbnRBcnJh
        eXNbZGVwZW5kZW50S2V5XTsKCiAgICAgICAgaWYgKGRlcGVuZGVudEFycmF5
        ID09PSBwcmV2aW91c0RlcGVuZGVudEFycmF5KSB7CiAgICAgICAgICAvLyBU
        aGUgYXJyYXkgbWF5IGJlIHRoZSBzYW1lLCBidXQgb3VyIGl0ZW0gcHJvcGVy
        dHkga2V5cyBtYXkgaGF2ZQogICAgICAgICAgLy8gY2hhbmdlZCwgc28gd2Ug
        c2V0IHRoZW0gdXAgYWdhaW4uICBXZSBjYW4ndCBlYXNpbHkgdGVsbCBpZiB0
        aGV5J3ZlCiAgICAgICAgICAvLyBjaGFuZ2VkOiB0aGUgYXJyYXkgbWF5IGJl
        IHRoZSBzYW1lIG9iamVjdCwgYnV0IHdpdGggZGlmZmVyZW50CiAgICAgICAg
        ICAvLyBjb250ZW50cy4KICAgICAgICAgIGlmIChjcC5fcHJldmlvdXNJdGVt
        UHJvcGVydHlLZXlzW2RlcGVuZGVudEtleV0pIHsKICAgICAgICAgICAgZGVs
        ZXRlIGNwLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50S2V5
        XTsKICAgICAgICAgICAgbWV0YS5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci5z
        ZXR1cFByb3BlcnR5T2JzZXJ2ZXJzKGRlcGVuZGVudEtleSwgY3AuX2l0ZW1Q
        cm9wZXJ0eUtleXNbZGVwZW5kZW50S2V5XSk7CiAgICAgICAgICB9CiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIG1ldGEuZGVwZW5kZW50QXJyYXlzW2Rl
        cGVuZGVudEtleV0gPSBkZXBlbmRlbnRBcnJheTsKCiAgICAgICAgICBpZiAo
        cHJldmlvdXNEZXBlbmRlbnRBcnJheSkgewogICAgICAgICAgICBtZXRhLmRl
        cGVuZGVudEFycmF5c09ic2VydmVyLnRlYXJkb3duT2JzZXJ2ZXJzKHByZXZp
        b3VzRGVwZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSk7CiAgICAgICAgICB9
        CgogICAgICAgICAgaWYgKGRlcGVuZGVudEFycmF5KSB7CiAgICAgICAgICAg
        IG1ldGEuZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIuc2V0dXBPYnNlcnZlcnMo
        ZGVwZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSk7CiAgICAgICAgICB9CiAg
        ICAgICAgfQogICAgICB9LCB0aGlzKTsKICAgIH0sIHRoaXMpOwoKICAgIGZv
        ckVhY2goY3AuX2RlcGVuZGVudEtleXMsIGZ1bmN0aW9uKGRlcGVuZGVudEtl
        eSkgewogICAgICAKICAgICAgdmFyIGRlcGVuZGVudEFycmF5ID0gZ2V0KHRo
        aXMsIGRlcGVuZGVudEtleSk7CiAgICAgIGlmIChkZXBlbmRlbnRBcnJheSkg
        ewogICAgICAgIGFkZEl0ZW1zLmNhbGwodGhpcywgZGVwZW5kZW50QXJyYXks
        IGNhbGxiYWNrcywgY3AsIHByb3BlcnR5TmFtZSwgbWV0YSk7CiAgICAgIH0K
        ICAgIH0sIHRoaXMpOwogIH07CgogIHRoaXMuZnVuYyA9IGZ1bmN0aW9uIChw
        cm9wZXJ0eU5hbWUpIHsKICAgIEVtYmVyLmFzc2VydCgiQ29tcHV0ZWQgcmVk
        dWNlIHZhbHVlcyByZXF1aXJlIGF0IGxlYXN0IG9uZSBkZXBlbmRlbnQga2V5
        IiwgY3AuX2RlcGVuZGVudEtleXMpOwoKICAgIHJlY29tcHV0ZS5jYWxsKHRo
        aXMsIHByb3BlcnR5TmFtZSk7CgogICAgcmV0dXJuIGNwLl9pbnN0YW5jZU1l
        dGEodGhpcywgcHJvcGVydHlOYW1lKS5nZXRWYWx1ZSgpOwogIH07Cn0KCkVt
        YmVyLlJlZHVjZUNvbXB1dGVkUHJvcGVydHkgPSBSZWR1Y2VDb21wdXRlZFBy
        b3BlcnR5OwpSZWR1Y2VDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZSA9IG9f
        Y3JlYXRlKENvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlKTsKCmZ1bmN0aW9u
        IGRlZmF1bHRDYWxsYmFjayhjb21wdXRlZFZhbHVlKSB7CiAgcmV0dXJuIGNv
        bXB1dGVkVmFsdWU7Cn0KClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90
        eXBlLl9jYWxsYmFja3MgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCF0aGlzLmNh
        bGxiYWNrcykgewogICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CiAg
        ICB0aGlzLmNhbGxiYWNrcyA9IHsKICAgICAgcmVtb3ZlZEl0ZW06IG9wdGlv
        bnMucmVtb3ZlZEl0ZW0gfHwgZGVmYXVsdENhbGxiYWNrLAogICAgICBhZGRl
        ZEl0ZW06IG9wdGlvbnMuYWRkZWRJdGVtIHx8IGRlZmF1bHRDYWxsYmFjawog
        ICAgfTsKICB9CiAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzOwp9OwoKUmVkdWNl
        Q29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUuX2hhc0luc3RhbmNlTWV0YSA9
        IGZ1bmN0aW9uIChjb250ZXh0LCBwcm9wZXJ0eU5hbWUpIHsKICB2YXIgZ3Vp
        ZCA9IGd1aWRGb3IoY29udGV4dCksCiAgICAgIGtleSA9IGd1aWQgKyAnOicg
        KyBwcm9wZXJ0eU5hbWU7CgogIHJldHVybiAhIXRoaXMuX2luc3RhbmNlTWV0
        YXNba2V5XTsKfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBl
        Ll9pbnN0YW5jZU1ldGEgPSBmdW5jdGlvbiAoY29udGV4dCwgcHJvcGVydHlO
        YW1lKSB7CiAgdmFyIGd1aWQgPSBndWlkRm9yKGNvbnRleHQpLAogICAgICBr
        ZXkgPSBndWlkICsgJzonICsgcHJvcGVydHlOYW1lLAogICAgICBtZXRhID0g
        dGhpcy5faW5zdGFuY2VNZXRhc1trZXldOwoKICBpZiAoIW1ldGEpIHsKICAg
        IG1ldGEgPSB0aGlzLl9pbnN0YW5jZU1ldGFzW2tleV0gPSBuZXcgUmVkdWNl
        Q29tcHV0ZWRQcm9wZXJ0eUluc3RhbmNlTWV0YShjb250ZXh0LCBwcm9wZXJ0
        eU5hbWUsIHRoaXMuaW5pdGlhbFZhbHVlKCkpOwogICAgbWV0YS5kZXBlbmRl
        bnRBcnJheXNPYnNlcnZlciA9IG5ldyBEZXBlbmRlbnRBcnJheXNPYnNlcnZl
        cih0aGlzLl9jYWxsYmFja3MoKSwgdGhpcywgbWV0YSwgY29udGV4dCwgcHJv
        cGVydHlOYW1lLCBtZXRhLnN1Z2FyTWV0YSk7CiAgfQoKICByZXR1cm4gbWV0
        YTsKfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLmluaXRp
        YWxWYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICBpZiAodHlwZW9mIHRoaXMub3B0
        aW9ucy5pbml0aWFsVmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgIHJldHVy
        biB0aGlzLm9wdGlvbnMuaW5pdGlhbFZhbHVlKCk7CiAgfQogIGVsc2Ugewog
        ICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbml0aWFsVmFsdWU7CiAgfQp9OwoK
        UmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUucmVzZXRWYWx1ZSA9
        IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiB0aGlzLmluaXRpYWxWYWx1
        ZSgpOwp9OwoKUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUuaXRl
        bVByb3BlcnR5S2V5ID0gZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5S2V5LCBp
        dGVtUHJvcGVydHlLZXkpIHsKICB0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2Rl
        cGVuZGVudEFycmF5S2V5XSA9IHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVw
        ZW5kZW50QXJyYXlLZXldIHx8IFtdOwogIHRoaXMuX2l0ZW1Qcm9wZXJ0eUtl
        eXNbZGVwZW5kZW50QXJyYXlLZXldLnB1c2goaXRlbVByb3BlcnR5S2V5KTsK
        fTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLmNsZWFySXRl
        bVByb3BlcnR5S2V5cyA9IGZ1bmN0aW9uIChkZXBlbmRlbnRBcnJheUtleSkg
        ewogIGlmICh0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEFycmF5
        S2V5XSkgewogICAgdGhpcy5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzW2Rl
        cGVuZGVudEFycmF5S2V5XSA9IHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVw
        ZW5kZW50QXJyYXlLZXldOwogICAgdGhpcy5faXRlbVByb3BlcnR5S2V5c1tk
        ZXBlbmRlbnRBcnJheUtleV0gPSBbXTsKICB9Cn07CgpSZWR1Y2VDb21wdXRl
        ZFByb3BlcnR5LnByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9uICgpIHsK
        ICB2YXIgY3AgPSB0aGlzLAogICAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFy
        Z3VtZW50cyksCiAgICAgIHByb3BlcnR5QXJncyA9IG5ldyBFbWJlci5TZXQo
        KSwKICAgICAgbWF0Y2gsCiAgICAgIGRlcGVuZGVudEFycmF5S2V5LAogICAg
        ICBpdGVtUHJvcGVydHlLZXk7CgogIGZvckVhY2goYV9zbGljZS5jYWxsKGFy
        Z3VtZW50cyksIGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICAgIGlmIChk
        b3VibGVFYWNoUHJvcGVydHlQYXR0ZXJuLnRlc3QoZGVwZW5kZW50S2V5KSkg
        ewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIk5lc3RlZCBAZWFjaCBw
        cm9wZXJ0aWVzIG5vdCBzdXBwb3J0ZWQ6ICIgKyBkZXBlbmRlbnRLZXkpOwog
        ICAgfSBlbHNlIGlmIChtYXRjaCA9IGVhY2hQcm9wZXJ0eVBhdHRlcm4uZXhl
        YyhkZXBlbmRlbnRLZXkpKSB7CiAgICAgIGRlcGVuZGVudEFycmF5S2V5ID0g
        bWF0Y2hbMV07CiAgICAgIGl0ZW1Qcm9wZXJ0eUtleSA9IG1hdGNoWzJdOwog
        ICAgICBjcC5pdGVtUHJvcGVydHlLZXkoZGVwZW5kZW50QXJyYXlLZXksIGl0
        ZW1Qcm9wZXJ0eUtleSk7CiAgICAgIHByb3BlcnR5QXJncy5hZGQoZGVwZW5k
        ZW50QXJyYXlLZXkpOwogICAgfSBlbHNlIHsKICAgICAgcHJvcGVydHlBcmdz
        LmFkZChkZXBlbmRlbnRLZXkpOwogICAgfQogIH0pOwoKICByZXR1cm4gQ29t
        cHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUucHJvcGVydHkuYXBwbHkodGhpcywg
        cHJvcGVydHlBcmdzLnRvQXJyYXkoKSk7Cn07CgovKioKICBDcmVhdGVzIGEg
        Y29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggb3BlcmF0ZXMgb24gZGVwZW5kZW50
        IGFycmF5cyBhbmQKICBpcyB1cGRhdGVkIHdpdGggIm9uZSBhdCBhIHRpbWUi
        IHNlbWFudGljcy4gV2hlbiBpdGVtcyBhcmUgYWRkZWQgb3IKICByZW1vdmVk
        IGZyb20gdGhlIGRlcGVuZGVudCBhcnJheShzKSBhIHJlZHVjZSBjb21wdXRl
        ZCBvbmx5IG9wZXJhdGVzCiAgb24gdGhlIGNoYW5nZSBpbnN0ZWFkIG9mIHJl
        LWV2YWx1YXRpbmcgdGhlIGVudGlyZSBhcnJheS4KCiAgSWYgdGhlcmUgYXJl
        IG1vcmUgdGhhbiBvbmUgYXJndW1lbnRzIHRoZSBmaXJzdCBhcmd1bWVudHMg
        YXJlCiAgY29uc2lkZXJlZCB0byBiZSBkZXBlbmRlbnQgcHJvcGVydHkga2V5
        cy4gVGhlIGxhc3QgYXJndW1lbnQgaXMKICByZXF1aXJlZCB0byBiZSBhbiBv
        cHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBoYXZlIHRo
        ZQogIGZvbGxvd2luZyBmb3VyIHByb3BlcnRpZXM6CgogIGBpbml0aWFsVmFs
        dWVgIC0gQSB2YWx1ZSBvciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgdXNlZCBh
        cyB0aGUgaW5pdGlhbAogIHZhbHVlIGZvciB0aGUgY29tcHV0ZWQuIElmIHRo
        aXMgcHJvcGVydHkgaXMgYSBmdW5jdGlvbiB0aGUgcmVzdWx0IG9mIGNhbGxp
        bmcKICB0aGUgZnVuY3Rpb24gd2lsbCBiZSB1c2VkIGFzIHRoZSBpbml0aWFs
        IHZhbHVlLiBUaGlzIHByb3BlcnR5IGlzIHJlcXVpcmVkLgoKICBgaW5pdGlh
        bGl6ZWAgLSBBbiBvcHRpb25hbCBpbml0aWFsaXplIGZ1bmN0aW9uLiBUeXBp
        Y2FsbHkgdGhpcyB3aWxsIGJlIHVzZWQKICB0byBzZXQgdXAgc3RhdGUgb24g
        dGhlIGluc3RhbmNlTWV0YSBvYmplY3QuCgogIGByZW1vdmVkSXRlbWAgLSBB
        IGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGVhY2ggdGltZSBhbiBlbGVtZW50
        IGlzIHJlbW92ZWQKICBmcm9tIHRoZSBhcnJheS4KCiAgYGFkZGVkSXRlbWAg
        LSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGVhY2ggdGltZSBhbiBlbGVt
        ZW50IGlzIGFkZGVkIHRvCiAgdGhlIGFycmF5LgoKCiAgVGhlIGBpbml0aWFs
        aXplYCBmdW5jdGlvbiBoYXMgdGhlIGZvbGxvd2luZyBzaWduYXR1cmU6Cgog
        IGBgYGphdmFzY3JpcHQKICAgZnVuY3Rpb24gKGluaXRpYWxWYWx1ZSwgY2hh
        bmdlTWV0YSwgaW5zdGFuY2VNZXRhKQogIGBgYAoKICBgaW5pdGlhbFZhbHVl
        YCAtIFRoZSB2YWx1ZSBvZiB0aGUgYGluaXRpYWxWYWx1ZWAgcHJvcGVydHkg
        ZnJvbSB0aGUKICBvcHRpb25zIG9iamVjdC4KCiAgYGNoYW5nZU1ldGFgIC0g
        QW4gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIG1ldGEgaW5mb3JtYXRpb24gYWJv
        dXQgdGhlCiAgY29tcHV0ZWQuIEl0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcg
        cHJvcGVydGllczoKCiAgICAgLSBgcHJvcGVydHlgIHRoZSBjb21wdXRlZCBw
        cm9wZXJ0eQogICAgIC0gYHByb3BlcnR5TmFtZWAgdGhlIG5hbWUgb2YgdGhl
        IHByb3BlcnR5IG9uIHRoZSBvYmplY3QKCiAgYGluc3RhbmNlTWV0YWAgLSBB
        biBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBtZXRhCiAgaW5m
        b3JtYXRpb24gbmVlZGVkIGZvciBjYWxjdWxhdGluZyB5b3VyIGNvbXB1dGVk
        LiBGb3IgZXhhbXBsZSBhCiAgdW5pcXVlIGNvbXB1dGVkIG1pZ2h0IHVzZSB0
        aGlzIHRvIHN0b3JlIHRoZSBudW1iZXIgb2YgdGltZXMgYSBnaXZlbgogIGVs
        ZW1lbnQgaXMgZm91bmQgaW4gdGhlIGRlcGVuZGVudCBhcnJheS4KCgogIFRo
        ZSBgcmVtb3ZlZEl0ZW1gIGFuZCBgYWRkZWRJdGVtYCBmdW5jdGlvbnMgYm90
        aCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOgoKICBgYGBqYXZhc2Ny
        aXB0CiAgZnVuY3Rpb24gKGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5n
        ZU1ldGEsIGluc3RhbmNlTWV0YSkKICBgYGAKCiAgYGFjY3VtdWxhdGVkVmFs
        dWVgIC0gVGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGxhc3QgdGltZQog
        IGByZW1vdmVkSXRlbWAgb3IgYGFkZGVkSXRlbWAgd2FzIGNhbGxlZCBvciBg
        aW5pdGlhbFZhbHVlYC4KCiAgYGl0ZW1gIC0gdGhlIGVsZW1lbnQgYWRkZWQg
        b3IgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheQoKICBgY2hhbmdlTWV0YWAgLSBB
        biBvYmplY3Qgd2hpY2ggY29udGFpbnMgbWV0YSBpbmZvcm1hdGlvbiBhYm91
        dCB0aGUKICBjaGFuZ2UuIEl0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJv
        cGVydGllczoKCiAgICAtIGBwcm9wZXJ0eWAgdGhlIGNvbXB1dGVkIHByb3Bl
        cnR5CiAgICAtIGBwcm9wZXJ0eU5hbWVgIHRoZSBuYW1lIG9mIHRoZSBwcm9w
        ZXJ0eSBvbiB0aGUgb2JqZWN0CiAgICAtIGBpbmRleGAgdGhlIGluZGV4IG9m
        IHRoZSBhZGRlZCBvciByZW1vdmVkIGl0ZW0KICAgIC0gYGl0ZW1gIHRoZSBh
        ZGRlZCBvciByZW1vdmVkIGl0ZW06IHRoaXMgaXMgZXhhY3RseSB0aGUgc2Ft
        ZSBhcwogICAgICB0aGUgc2Vjb25kIGFyZwogICAgLSBgYXJyYXlDaGFuZ2Vk
        YCB0aGUgYXJyYXkgdGhhdCB0cmlnZ2VyZWQgdGhlIGNoYW5nZS4gQ2FuIGJl
        CiAgICAgIHVzZWZ1bCB3aGVuIGRlcGVuZGluZyBvbiBtdWx0aXBsZSBhcnJh
        eXMuCgogIEZvciBwcm9wZXJ0eSBjaGFuZ2VzIHRyaWdnZXJlZCBvbiBhbiBp
        dGVtIHByb3BlcnR5IGNoYW5nZSAod2hlbgogIGRlcEtleSBpcyBzb21ldGhp
        bmcgbGlrZSBgc29tZUFycmF5LkBlYWNoLnNvbWVQcm9wZXJ0eWApLAogIGBj
        aGFuZ2VNZXRhYCB3aWxsIGFsc28gY29udGFpbiB0aGUgZm9sbG93aW5nIHBy
        b3BlcnR5OgoKICAgIC0gYHByZXZpb3VzVmFsdWVzYCBhbiBvYmplY3Qgd2hv
        c2Uga2V5cyBhcmUgdGhlIHByb3BlcnRpZXMgdGhhdCBjaGFuZ2VkIG9uCiAg
        ICB0aGUgaXRlbSwgYW5kIHdob3NlIHZhbHVlcyBhcmUgdGhlIGl0ZW0ncyBw
        cmV2aW91cyB2YWx1ZXMuCgogIGBwcmV2aW91c1ZhbHVlc2AgaXMgaW1wb3J0
        YW50IEVtYmVyIGNvYWxlc2NlcyBpdGVtIHByb3BlcnR5IGNoYW5nZXMgdmlh
        CiAgRW1iZXIucnVuLm9uY2UuIFRoaXMgbWVhbnMgdGhhdCBieSB0aGUgdGlt
        ZSByZW1vdmVkSXRlbSBnZXRzIGNhbGxlZCwgaXRlbSBoYXMKICB0aGUgbmV3
        IHZhbHVlcywgYnV0IHlvdSBtYXkgbmVlZCB0aGUgcHJldmlvdXMgdmFsdWUg
        KGVnIGZvciBzb3J0aW5nICYKICBmaWx0ZXJpbmcpLgoKICBgaW5zdGFuY2VN
        ZXRhYCAtIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIG1l
        dGEKICBpbmZvcm1hdGlvbiBuZWVkZWQgZm9yIGNhbGN1bGF0aW5nIHlvdXIg
        Y29tcHV0ZWQuIEZvciBleGFtcGxlIGEKICB1bmlxdWUgY29tcHV0ZWQgbWln
        aHQgdXNlIHRoaXMgdG8gc3RvcmUgdGhlIG51bWJlciBvZiB0aW1lcyBhIGdp
        dmVuCiAgZWxlbWVudCBpcyBmb3VuZCBpbiB0aGUgZGVwZW5kZW50IGFycmF5
        LgoKICBUaGUgYHJlbW92ZWRJdGVtYCBhbmQgYGFkZGVkSXRlbWAgZnVuY3Rp
        b25zIHNob3VsZCByZXR1cm4gdGhlIGFjY3VtdWxhdGVkCiAgdmFsdWUuIEl0
        IGlzIGFjY2VwdGFibGUgdG8gbm90IHJldHVybiBhbnl0aGluZyAoaWUgcmV0
        dXJuIHVuZGVmaW5lZCkKICB0byBpbnZhbGlkYXRlIHRoZSBjb21wdXRhdGlv
        bi4gVGhpcyBpcyBnZW5lcmFsbHkgbm90IGEgZ29vZCBpZGVhIGZvcgogIGFy
        cmF5Q29tcHV0ZWQgYnV0IGl0J3MgdXNlZCBpbiBlZyBtYXggYW5kIG1pbi4K
        CiAgTm90ZSB0aGF0IG9ic2VydmVycyB3aWxsIGJlIGZpcmVkIGlmIGVpdGhl
        ciBvZiB0aGVzZSBmdW5jdGlvbnMgcmV0dXJuIGEgdmFsdWUKICB0aGF0IGRp
        ZmZlcnMgZnJvbSB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuICBXaGVuIHJldHVy
        bmluZyBhbiBvYmplY3QgdGhhdAogIG11dGF0ZXMgaW4gcmVzcG9uc2UgdG8g
        YXJyYXkgY2hhbmdlcywgZm9yIGV4YW1wbGUgYW4gYXJyYXkgdGhhdCBtYXBz
        CiAgZXZlcnl0aGluZyBmcm9tIHNvbWUgb3RoZXIgYXJyYXkgKHNlZSBgRW1i
        ZXIuY29tcHV0ZWQubWFwYCksIGl0IGlzIHVzdWFsbHkKICBpbXBvcnRhbnQg
        dGhhdCB0aGUgKnNhbWUqIGFycmF5IGJlIHJldHVybmVkIHRvIGF2b2lkIGFj
        Y2lkZW50YWxseSB0cmlnZ2VyaW5nIG9ic2VydmVycy4KCiAgRXhhbXBsZQoK
        ICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuY29tcHV0ZWQubWF4ID0gZnVuY3Rp
        b24gKGRlcGVuZGVudEtleSkgewogICAgcmV0dXJuIEVtYmVyLnJlZHVjZUNv
        bXB1dGVkLmNhbGwobnVsbCwgZGVwZW5kZW50S2V5LCB7CiAgICAgIGluaXRp
        YWxWYWx1ZTogLUluZmluaXR5LAoKICAgICAgYWRkZWRJdGVtOiBmdW5jdGlv
        biAoYWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFu
        Y2VNZXRhKSB7CiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGFjY3VtdWxhdGVk
        VmFsdWUsIGl0ZW0pOwogICAgICB9LAoKICAgICAgcmVtb3ZlZEl0ZW06IGZ1
        bmN0aW9uIChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBp
        bnN0YW5jZU1ldGEpIHsKICAgICAgICBpZiAoaXRlbSA8IGFjY3VtdWxhdGVk
        VmFsdWUpIHsKICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRlZFZhbHVlOwog
        ICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfTsKICBgYGAKCiAgRGVwZW5k
        ZW50IGtleXMgbWF5IHJlZmVyIHRvIGBAdGhpc2AgdG8gb2JzZXJ2ZSBjaGFu
        Z2VzIHRvIHRoZSBvYmplY3QgaXRzZWxmLAogIHdoaWNoIG11c3QgYmUgYXJy
        YXktbGlrZSwgcmF0aGVyIHRoYW4gYSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0
        LiAgVGhpcyBpcwogIG1vc3RseSB1c2VmdWwgZm9yIGFycmF5IHByb3hpZXMs
        IHRvIGVuc3VyZSBvYmplY3RzIGFyZSByZXRyaWV2ZWQgdmlhCiAgYG9iamVj
        dEF0Q29udGVudGAuICBUaGlzIGlzIGhvdyB5b3UgY291bGQgc29ydCBpdGVt
        cyBieSBwcm9wZXJ0aWVzIGRlZmluZWQgb24gYW4gaXRlbSBjb250cm9sbGVy
        LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVvcGxlQ29u
        dHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQoewogICAg
        aXRlbUNvbnRyb2xsZXI6ICdwZXJzb24nLAoKICAgIHNvcnRlZFBlb3BsZTog
        RW1iZXIuY29tcHV0ZWQuc29ydCgnQHRoaXMuQGVhY2gucmV2ZXJzZWROYW1l
        JywgZnVuY3Rpb24ocGVyc29uQSwgcGVyc29uQikgewogICAgICAvLyBgcmV2
        ZXJzZWROYW1lYCBpc24ndCBkZWZpbmVkIG9uIFBlcnNvbiwgYnV0IHdlIGhh
        dmUgYWNjZXNzIHRvIGl0IHZpYQogICAgICAvLyB0aGUgaXRlbSBjb250cm9s
        bGVyIEFwcC5QZXJzb25Db250cm9sbGVyLiAgSWYgd2UnZCB1c2VkCiAgICAg
        IC8vIGBjb250ZW50LkBlYWNoLnJldmVyc2VkTmFtZWAgYWJvdmUsIHdlIHdv
        dWxkIGJlIGdldHRpbmcgdGhlIG9iamVjdHMKICAgICAgLy8gZGlyZWN0bHkg
        YW5kIG5vdCBoYXZlIGFjY2VzcyB0byBgcmV2ZXJzZWROYW1lYC4KICAgICAg
        Ly8KICAgICAgdmFyIHJldmVyc2VkTmFtZUEgPSBnZXQocGVyc29uQSwgJ3Jl
        dmVyc2VkTmFtZScpLAogICAgICAgICAgcmV2ZXJzZWROYW1lQiA9IGdldChw
        ZXJzb25CLCAncmV2ZXJzZWROYW1lJyk7CgogICAgICByZXR1cm4gRW1iZXIu
        Y29tcGFyZShyZXZlcnNlZE5hbWVBLCByZXZlcnNlZE5hbWVCKTsKICAgIH0p
        CiAgfSk7CgogIEFwcC5QZXJzb25Db250cm9sbGVyID0gRW1iZXIuT2JqZWN0
        Q29udHJvbGxlci5leHRlbmQoewogICAgcmV2ZXJzZWROYW1lOiBmdW5jdGlv
        biAoKSB7CiAgICAgIHJldHVybiByZXZlcnNlKGdldCh0aGlzLCAnbmFtZScp
        KTsKICAgIH0ucHJvcGVydHkoJ25hbWUnKQogIH0pCiAgYGBgCgogIERlcGVu
        ZGVudCBrZXlzIHdob3NlIHZhbHVlcyBhcmUgbm90IGFycmF5cyBhcmUgdHJl
        YXRlZCBhcyByZWd1bGFyCiAgZGVwZW5kZW5jaWVzOiB3aGVuIHRoZXkgY2hh
        bmdlLCB0aGUgY29tcHV0ZWQgcHJvcGVydHkgaXMgY29tcGxldGVseQogIHJl
        Y2FsY3VsYXRlZC4gIEl0IGlzIHNvbWV0aW1lcyB1c2VmdWwgdG8gaGF2ZSBk
        ZXBlbmRlbnQgYXJyYXlzIHdpdGggc2ltaWxhcgogIHNlbWFudGljcy4gIERl
        cGVuZGVudCBrZXlzIHdoaWNoIGVuZCBpbiBgLltdYCBkbyBub3QgdXNlICJv
        bmUgYXQgYSB0aW1lIgogIHNlbWFudGljcy4gIFdoZW4gYW4gaXRlbSBpcyBh
        ZGRlZCBvciByZW1vdmVkIGZyb20gc3VjaCBhIGRlcGVuZGVuY3ksIHRoZQog
        IGNvbXB1dGVkIHByb3BlcnR5IGlzIGNvbXBsZXRlbHkgcmVjb21wdXRlZC4K
        CiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICAvLyBXaGVuIGBzdHJpbmdgIGlzIGNoYW5nZWQsIGBjb21w
        dXRlZGAgaXMgY29tcGxldGVseSByZWNvbXB1dGVkLgogICAgc3RyaW5nOiAn
        YSBzdHJpbmcnLAoKICAgIC8vIFdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byBg
        YXJyYXlgLCBgYWRkZWRJdGVtYCBpcyBjYWxsZWQuCiAgICBhcnJheTogW10s
        CgogICAgLy8gV2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIGBhbm90aGVyQXJy
        YXlgLCBgY29tcHV0ZWRgIGlzIGNvbXBsZXRlbHkKICAgIC8vIHJlY29tcHV0
        ZWQuCiAgICBhbm90aGVyQXJyYXk6IFtdLAoKICAgIGNvbXB1dGVkOiBFbWJl
        ci5yZWR1Y2VDb21wdXRlZCgnc3RyaW5nJywgJ2FycmF5JywgJ2Fub3RoZXJB
        cnJheS5bXScsIHsKICAgICAgYWRkZWRJdGVtOiBhZGRlZEl0ZW1DYWxsYmFj
        aywKICAgICAgcmVtb3ZlZEl0ZW06IHJlbW92ZWRJdGVtQ2FsbGJhY2sKICAg
        IH0pCiAgfSk7CiAgYGBgCgogIEBtZXRob2QgcmVkdWNlQ29tcHV0ZWQKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IFtkZXBlbmRlbnRLZXlzKl0K
        ICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogIEByZXR1cm4ge0VtYmVyLkNv
        bXB1dGVkUHJvcGVydHl9CiovCkVtYmVyLnJlZHVjZUNvbXB1dGVkID0gZnVu
        Y3Rpb24gKG9wdGlvbnMpIHsKICB2YXIgYXJnczsKCiAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPiAxKSB7CiAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3Vt
        ZW50cywgMCwgLTEpOwogICAgb3B0aW9ucyA9IGFfc2xpY2UuY2FsbChhcmd1
        bWVudHMsIC0xKVswXTsKICB9CgogIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0g
        Im9iamVjdCIpIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiUmVkdWNl
        IENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdpdGhvdXQgYW4gb3B0aW9u
        cyBoYXNoIik7CiAgfQoKICBpZiAoISgnaW5pdGlhbFZhbHVlJyBpbiBvcHRp
        b25zKSkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJSZWR1Y2UgQ29t
        cHV0ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91dCBhbiBpbml0aWFsIHZh
        bHVlIik7CiAgfQoKICB2YXIgY3AgPSBuZXcgUmVkdWNlQ29tcHV0ZWRQcm9w
        ZXJ0eShvcHRpb25zKTsKCiAgaWYgKGFyZ3MpIHsKICAgIGNwLnByb3BlcnR5
        LmFwcGx5KGNwLCBhcmdzKTsKICB9CgogIHJldHVybiBjcDsKfTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKdmFyIFJlZHVjZUNvbXB1dGVkUHJvcGVydHkg
        PSBFbWJlci5SZWR1Y2VDb21wdXRlZFByb3BlcnR5LAogICAgYV9zbGljZSA9
        IFtdLnNsaWNlLAogICAgb19jcmVhdGUgPSBFbWJlci5jcmVhdGUsCiAgICBm
        b3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2g7CgpmdW5j
        dGlvbiBBcnJheUNvbXB1dGVkUHJvcGVydHkoKSB7CiAgdmFyIGNwID0gdGhp
        czsKCiAgUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5hcHBseSh0aGlzLCBhcmd1
        bWVudHMpOwoKICB0aGlzLmZ1bmMgPSAoZnVuY3Rpb24ocmVkdWNlRnVuYykg
        ewogICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHsKICAgICAg
        aWYgKCFjcC5faGFzSW5zdGFuY2VNZXRhKHRoaXMsIHByb3BlcnR5TmFtZSkp
        IHsKICAgICAgICAvLyBXaGVuIHdlIHJlY29tcHV0ZSBhbiBhcnJheSBjb21w
        dXRlZCBwcm9wZXJ0eSwgd2UgbmVlZCBhbHJlYWR5CiAgICAgICAgLy8gcmV0
        cmlldmVkIGFycmF5cyB0byBiZSB1cGRhdGVkOyB3ZSBjYW4ndCBzaW1wbHkg
        ZW1wdHkgdGhlIGNhY2hlIGFuZAogICAgICAgIC8vIGhvcGUgdGhlIGFycmF5
        IGlzIHJlLXJldHJpZXZlZC4KICAgICAgICBmb3JFYWNoKGNwLl9kZXBlbmRl
        bnRLZXlzLCBmdW5jdGlvbihkZXBlbmRlbnRLZXkpIHsKICAgICAgICAgIEVt
        YmVyLmFkZE9ic2VydmVyKHRoaXMsIGRlcGVuZGVudEtleSwgZnVuY3Rpb24o
        KSB7CiAgICAgICAgICAgIGNwLnJlY29tcHV0ZU9uY2UuY2FsbCh0aGlzLCBw
        cm9wZXJ0eU5hbWUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgdGhpcyk7
        CiAgICAgIH0KCiAgICAgIHJldHVybiByZWR1Y2VGdW5jLmFwcGx5KHRoaXMs
        IGFyZ3VtZW50cyk7CiAgICB9OwogIH0pKHRoaXMuZnVuYyk7CgogIHJldHVy
        biB0aGlzOwp9CkVtYmVyLkFycmF5Q29tcHV0ZWRQcm9wZXJ0eSA9IEFycmF5
        Q29tcHV0ZWRQcm9wZXJ0eTsKQXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3Rv
        dHlwZSA9IG9fY3JlYXRlKFJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90
        eXBlKTsKQXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5pbml0aWFs
        VmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIEVtYmVyLkEoKTsKfTsK
        QXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5yZXNldFZhbHVlID0g
        ZnVuY3Rpb24gKGFycmF5KSB7CiAgYXJyYXkuY2xlYXIoKTsKICByZXR1cm4g
        YXJyYXk7Cn07CgovKioKICBDcmVhdGVzIGEgY29tcHV0ZWQgcHJvcGVydHkg
        d2hpY2ggb3BlcmF0ZXMgb24gZGVwZW5kZW50IGFycmF5cyBhbmQKICBpcyB1
        cGRhdGVkIHdpdGggIm9uZSBhdCBhIHRpbWUiIHNlbWFudGljcy4gV2hlbiBp
        dGVtcyBhcmUgYWRkZWQgb3IKICByZW1vdmVkIGZyb20gdGhlIGRlcGVuZGVu
        dCBhcnJheShzKSBhbiBhcnJheSBjb21wdXRlZCBvbmx5IG9wZXJhdGVzCiAg
        b24gdGhlIGNoYW5nZSBpbnN0ZWFkIG9mIHJlLWV2YWx1YXRpbmcgdGhlIGVu
        dGlyZSBhcnJheS4gVGhpcyBzaG91bGQKICByZXR1cm4gYW4gYXJyYXksIGlm
        IHlvdSdkIGxpa2UgdG8gdXNlICJvbmUgYXQgYSB0aW1lIiBzZW1hbnRpY3Mg
        YW5kCiAgY29tcHV0ZSBzb21lIHZhbHVlIG90aGVyIHRoZW4gYW4gYXJyYXkg
        bG9vayBhdAogIGBFbWJlci5yZWR1Y2VDb21wdXRlZGAuCgogIElmIHRoZXJl
        IGFyZSBtb3JlIHRoYW4gb25lIGFyZ3VtZW50cyB0aGUgZmlyc3QgYXJndW1l
        bnRzIGFyZQogIGNvbnNpZGVyZWQgdG8gYmUgZGVwZW5kZW50IHByb3BlcnR5
        IGtleXMuIFRoZSBsYXN0IGFyZ3VtZW50IGlzCiAgcmVxdWlyZWQgdG8gYmUg
        YW4gb3B0aW9ucyBvYmplY3QuIFRoZSBvcHRpb25zIG9iamVjdCBjYW4gaGF2
        ZSB0aGUKICBmb2xsb3dpbmcgdGhyZWUgcHJvcGVydGllcy4KCiAgYGluaXRp
        YWxpemVgIC0gQW4gb3B0aW9uYWwgaW5pdGlhbGl6ZSBmdW5jdGlvbi4gVHlw
        aWNhbGx5IHRoaXMgd2lsbCBiZSB1c2VkCiAgdG8gc2V0IHVwIHN0YXRlIG9u
        IHRoZSBpbnN0YW5jZU1ldGEgb2JqZWN0LgoKICBgcmVtb3ZlZEl0ZW1gIC0g
        QSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBlYWNoIHRpbWUgYW4gZWxlbWVu
        dCBpcwogIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkuCgogIGBhZGRlZEl0ZW1g
        IC0gQSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBlYWNoIHRpbWUgYW4gZWxl
        bWVudCBpcwogIGFkZGVkIHRvIHRoZSBhcnJheS4KCgogIFRoZSBgaW5pdGlh
        bGl6ZWAgZnVuY3Rpb24gaGFzIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgIGZ1bmN0aW9uIChhcnJheSwgY2hhbmdlTWV0
        YSwgaW5zdGFuY2VNZXRhKQogIGBgYAoKICBgYXJyYXlgIC0gVGhlIGluaXRp
        YWwgdmFsdWUgb2YgdGhlIGFycmF5Q29tcHV0ZWQsIGFuIGVtcHR5IGFycmF5
        LgoKICBgY2hhbmdlTWV0YWAgLSBBbiBvYmplY3Qgd2hpY2ggY29udGFpbnMg
        bWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUKICBjb21wdXRlZC4gSXQgY29u
        dGFpbnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgoKICAgICAtIGBwcm9w
        ZXJ0eWAgdGhlIGNvbXB1dGVkIHByb3BlcnR5CiAgICAgLSBgcHJvcGVydHlO
        YW1lYCB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24gdGhlIG9iamVjdAoK
        ICBgaW5zdGFuY2VNZXRhYCAtIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2Vk
        IHRvIHN0b3JlIG1ldGEKICBpbmZvcm1hdGlvbiBuZWVkZWQgZm9yIGNhbGN1
        bGF0aW5nIHlvdXIgY29tcHV0ZWQuIEZvciBleGFtcGxlIGEKICB1bmlxdWUg
        Y29tcHV0ZWQgbWlnaHQgdXNlIHRoaXMgdG8gc3RvcmUgdGhlIG51bWJlciBv
        ZiB0aW1lcyBhIGdpdmVuCiAgZWxlbWVudCBpcyBmb3VuZCBpbiB0aGUgZGVw
        ZW5kZW50IGFycmF5LgoKCiAgVGhlIGByZW1vdmVkSXRlbWAgYW5kIGBhZGRl
        ZEl0ZW1gIGZ1bmN0aW9ucyBib3RoIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmU6CgogIGBgYGphdmFzY3JpcHQKICBmdW5jdGlvbiAoYWNjdW11bGF0
        ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKQogIGBg
        YAoKICBgYWNjdW11bGF0ZWRWYWx1ZWAgLSBUaGUgdmFsdWUgcmV0dXJuZWQg
        ZnJvbSB0aGUgbGFzdCB0aW1lCiAgYHJlbW92ZWRJdGVtYCBvciBgYWRkZWRJ
        dGVtYCB3YXMgY2FsbGVkIG9yIGFuIGVtcHR5IGFycmF5LgoKICBgaXRlbWAg
        LSB0aGUgZWxlbWVudCBhZGRlZCBvciByZW1vdmVkIGZyb20gdGhlIGFycmF5
        CgogIGBjaGFuZ2VNZXRhYCAtIEFuIG9iamVjdCB3aGljaCBjb250YWlucyBt
        ZXRhIGluZm9ybWF0aW9uIGFib3V0IHRoZQogIGNoYW5nZS4gSXQgY29udGFp
        bnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgoKICAgIC0gYHByb3BlcnR5
        YCB0aGUgY29tcHV0ZWQgcHJvcGVydHkKICAgIC0gYHByb3BlcnR5TmFtZWAg
        dGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IG9uIHRoZSBvYmplY3QKICAgIC0g
        YGluZGV4YCB0aGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgaXRl
        bQogICAgLSBgaXRlbWAgdGhlIGFkZGVkIG9yIHJlbW92ZWQgaXRlbTogdGhp
        cyBpcyBleGFjdGx5IHRoZSBzYW1lIGFzCiAgICAgIHRoZSBzZWNvbmQgYXJn
        CiAgICAtIGBhcnJheUNoYW5nZWRgIHRoZSBhcnJheSB0aGF0IHRyaWdnZXJl
        ZCB0aGUgY2hhbmdlLiBDYW4gYmUKICAgICAgdXNlZnVsIHdoZW4gZGVwZW5k
        aW5nIG9uIG11bHRpcGxlIGFycmF5cy4KCiAgRm9yIHByb3BlcnR5IGNoYW5n
        ZXMgdHJpZ2dlcmVkIG9uIGFuIGl0ZW0gcHJvcGVydHkgY2hhbmdlICh3aGVu
        CiAgZGVwS2V5IGlzIHNvbWV0aGluZyBsaWtlIGBzb21lQXJyYXkuQGVhY2gu
        c29tZVByb3BlcnR5YCksCiAgYGNoYW5nZU1ldGFgIHdpbGwgYWxzbyBjb250
        YWluIHRoZSBmb2xsb3dpbmcgcHJvcGVydHk6CgogICAgLSBgcHJldmlvdXNW
        YWx1ZXNgIGFuIG9iamVjdCB3aG9zZSBrZXlzIGFyZSB0aGUgcHJvcGVydGll
        cyB0aGF0IGNoYW5nZWQgb24KICAgIHRoZSBpdGVtLCBhbmQgd2hvc2UgdmFs
        dWVzIGFyZSB0aGUgaXRlbSdzIHByZXZpb3VzIHZhbHVlcy4KCiAgYHByZXZp
        b3VzVmFsdWVzYCBpcyBpbXBvcnRhbnQgRW1iZXIgY29hbGVzY2VzIGl0ZW0g
        cHJvcGVydHkgY2hhbmdlcyB2aWEKICBFbWJlci5ydW4ub25jZS4gVGhpcyBt
        ZWFucyB0aGF0IGJ5IHRoZSB0aW1lIHJlbW92ZWRJdGVtIGdldHMgY2FsbGVk
        LCBpdGVtIGhhcwogIHRoZSBuZXcgdmFsdWVzLCBidXQgeW91IG1heSBuZWVk
        IHRoZSBwcmV2aW91cyB2YWx1ZSAoZWcgZm9yIHNvcnRpbmcgJgogIGZpbHRl
        cmluZykuCgogIGBpbnN0YW5jZU1ldGFgIC0gQW4gb2JqZWN0IHRoYXQgY2Fu
        IGJlIHVzZWQgdG8gc3RvcmUgbWV0YQogIGluZm9ybWF0aW9uIG5lZWRlZCBm
        b3IgY2FsY3VsYXRpbmcgeW91ciBjb21wdXRlZC4gRm9yIGV4YW1wbGUgYQog
        IHVuaXF1ZSBjb21wdXRlZCBtaWdodCB1c2UgdGhpcyB0byBzdG9yZSB0aGUg
        bnVtYmVyIG9mIHRpbWVzIGEgZ2l2ZW4KICBlbGVtZW50IGlzIGZvdW5kIGlu
        IHRoZSBkZXBlbmRlbnQgYXJyYXkuCgogIFRoZSBgcmVtb3ZlZEl0ZW1gIGFu
        ZCBgYWRkZWRJdGVtYCBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiB0aGUgYWNj
        dW11bGF0ZWQKICB2YWx1ZS4gSXQgaXMgYWNjZXB0YWJsZSB0byBub3QgcmV0
        dXJuIGFueXRoaW5nIChpZSByZXR1cm4gdW5kZWZpbmVkKQogIHRvIGludmFs
        aWRhdGUgdGhlIGNvbXB1dGF0aW9uLiBUaGlzIGlzIGdlbmVyYWxseSBub3Qg
        YSBnb29kIGlkZWEgZm9yCiAgYXJyYXlDb21wdXRlZCBidXQgaXQncyB1c2Vk
        IGluIGVnIG1heCBhbmQgbWluLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3Jp
        cHQKICBFbWJlci5jb21wdXRlZC5tYXAgPSBmdW5jdGlvbihkZXBlbmRlbnRL
        ZXksIGNhbGxiYWNrKSB7CiAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgYWRk
        ZWRJdGVtOiBmdW5jdGlvbihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5z
        dGFuY2VNZXRhKSB7CiAgICAgICAgdmFyIG1hcHBlZCA9IGNhbGxiYWNrKGl0
        ZW0pOwogICAgICAgIGFycmF5Lmluc2VydEF0KGNoYW5nZU1ldGEuaW5kZXgs
        IG1hcHBlZCk7CiAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICB9LAogICAg
        ICByZW1vdmVkSXRlbTogZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGNoYW5nZU1l
        dGEsIGluc3RhbmNlTWV0YSkgewogICAgICAgIGFycmF5LnJlbW92ZUF0KGNo
        YW5nZU1ldGEuaW5kZXgsIDEpOwogICAgICAgIHJldHVybiBhcnJheTsKICAg
        ICAgfQogICAgfTsKCiAgICByZXR1cm4gRW1iZXIuYXJyYXlDb21wdXRlZChk
        ZXBlbmRlbnRLZXksIG9wdGlvbnMpOwogIH07CiAgYGBgCgogIEBtZXRob2Qg
        YXJyYXlDb21wdXRlZAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30g
        W2RlcGVuZGVudEtleXMqXQogIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAg
        QHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0KKi8KRW1iZXIuYXJy
        YXlDb21wdXRlZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgdmFyIGFyZ3M7
        CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgYXJncyA9IGFf
        c2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKTsKICAgIG9wdGlvbnMgPSBh
        X3NsaWNlLmNhbGwoYXJndW1lbnRzLCAtMSlbMF07CiAgfQoKICBpZiAodHlw
        ZW9mIG9wdGlvbnMgIT09ICJvYmplY3QiKSB7CiAgICB0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoIkFycmF5IENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdp
        dGhvdXQgYW4gb3B0aW9ucyBoYXNoIik7CiAgfQoKICB2YXIgY3AgPSBuZXcg
        QXJyYXlDb21wdXRlZFByb3BlcnR5KG9wdGlvbnMpOwoKICBpZiAoYXJncykg
        ewogICAgY3AucHJvcGVydHkuYXBwbHkoY3AsIGFyZ3MpOwogIH0KCiAgcmV0
        dXJuIGNwOwp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBnZXQg
        PSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQsCiAgICBndWlkRm9y
        ID0gRW1iZXIuZ3VpZEZvciwKICAgIG1lcmdlID0gRW1iZXIubWVyZ2UsCiAg
        ICBhX3NsaWNlID0gW10uc2xpY2UsCiAgICBmb3JFYWNoID0gRW1iZXIuRW51
        bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICBtYXAgPSBFbWJlci5FbnVtZXJh
        YmxlVXRpbHMubWFwOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0
        IGNhbGN1bGF0ZXMgdGhlIG1heGltdW0gdmFsdWUgaW4gdGhlCiAgZGVwZW5k
        ZW50IGFycmF5LiBUaGlzIHdpbGwgcmV0dXJuIGAtSW5maW5pdHlgIHdoZW4g
        dGhlIGRlcGVuZGVudAogIGFycmF5IGlzIGVtcHR5LgoKICBFeGFtcGxlCgog
        IGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICBjaGlsZEFnZXM6IEVtYmVyLmNvbXB1dGVkLm1hcEJ5KCdj
        aGlsZHJlbicsICdhZ2UnKSwKICAgIG1heENoaWxkQWdlOiBFbWJlci5jb21w
        dXRlZC5tYXgoJ2NoaWxkQWdlcycpCiAgfSk7CgogIHZhciBsb3JkQnlyb24g
        PSBBcHAuUGVyc29uLmNyZWF0ZSh7Y2hpbGRyZW46IFtdfSk7CiAgbG9yZEJ5
        cm9uLmdldCgnbWF4Q2hpbGRBZ2UnKTsgLy8gLUluZmluaXR5CiAgbG9yZEJ5
        cm9uLmdldCgnY2hpbGRyZW4nKS5wdXNoT2JqZWN0KHtuYW1lOiAnQXVndXN0
        YSBBZGEgQnlyb24nLCBhZ2U6IDd9KTsKICBsb3JkQnlyb24uZ2V0KCdtYXhD
        aGlsZEFnZScpOyAvLyA3CiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRyZW4nKS5w
        dXNoT2JqZWN0cyhbe25hbWU6ICdBbGxlZ3JhIEJ5cm9uJywgYWdlOiA1fSwg
        e25hbWU6ICdFbGl6YWJldGggTWVkb3JhIExlaWdoJywgYWdlOiA4fV0pOwog
        IGxvcmRCeXJvbi5nZXQoJ21heENoaWxkQWdlJyk7IC8vIDgKICBgYGAKCiAg
        QG1ldGhvZCBjb21wdXRlZC5tYXgKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtT
        dHJpbmd9IGRlcGVuZGVudEtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVk
        UHJvcGVydHl9IGNvbXB1dGVzIHRoZSBsYXJnZXN0IHZhbHVlIGluIHRoZSBk
        ZXBlbmRlbnRLZXkncyBhcnJheQoqLwpFbWJlci5jb21wdXRlZC5tYXggPSBm
        dW5jdGlvbiAoZGVwZW5kZW50S2V5KSB7CiAgcmV0dXJuIEVtYmVyLnJlZHVj
        ZUNvbXB1dGVkLmNhbGwobnVsbCwgZGVwZW5kZW50S2V5LCB7CiAgICBpbml0
        aWFsVmFsdWU6IC1JbmZpbml0eSwKCiAgICBhZGRlZEl0ZW06IGZ1bmN0aW9u
        IChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5j
        ZU1ldGEpIHsKICAgICAgcmV0dXJuIE1hdGgubWF4KGFjY3VtdWxhdGVkVmFs
        dWUsIGl0ZW0pOwogICAgfSwKCiAgICByZW1vdmVkSXRlbTogZnVuY3Rpb24g
        KGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNl
        TWV0YSkgewogICAgICBpZiAoaXRlbSA8IGFjY3VtdWxhdGVkVmFsdWUpIHsK
        ICAgICAgICByZXR1cm4gYWNjdW11bGF0ZWRWYWx1ZTsKICAgICAgfQogICAg
        fQogIH0pOwp9OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IGNh
        bGN1bGF0ZXMgdGhlIG1pbmltdW0gdmFsdWUgaW4gdGhlCiAgZGVwZW5kZW50
        IGFycmF5LiBUaGlzIHdpbGwgcmV0dXJuIGBJbmZpbml0eWAgd2hlbiB0aGUg
        ZGVwZW5kZW50CiAgYXJyYXkgaXMgZW1wdHkuCgogIEV4YW1wbGUKCiAgYGBg
        amF2YXNjcmlwdAogIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5k
        KHsKICAgIGNoaWxkQWdlczogRW1iZXIuY29tcHV0ZWQubWFwQnkoJ2NoaWxk
        cmVuJywgJ2FnZScpLAogICAgbWluQ2hpbGRBZ2U6IEVtYmVyLmNvbXB1dGVk
        Lm1pbignY2hpbGRBZ2VzJykKICB9KTsKCiAgdmFyIGxvcmRCeXJvbiA9IEFw
        cC5QZXJzb24uY3JlYXRlKHtjaGlsZHJlbjogW119KTsKICBsb3JkQnlyb24u
        Z2V0KCdtaW5DaGlsZEFnZScpOyAvLyBJbmZpbml0eQogIGxvcmRCeXJvbi5n
        ZXQoJ2NoaWxkcmVuJykucHVzaE9iamVjdCh7bmFtZTogJ0F1Z3VzdGEgQWRh
        IEJ5cm9uJywgYWdlOiA3fSk7CiAgbG9yZEJ5cm9uLmdldCgnbWluQ2hpbGRB
        Z2UnKTsgLy8gNwogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkcmVuJykucHVzaE9i
        amVjdHMoW3tuYW1lOiAnQWxsZWdyYSBCeXJvbicsIGFnZTogNX0sIHtuYW1l
        OiAnRWxpemFiZXRoIE1lZG9yYSBMZWlnaCcsIGFnZTogOH1dKTsKICBsb3Jk
        Qnlyb24uZ2V0KCdtaW5DaGlsZEFnZScpOyAvLyA1CiAgYGBgCgogIEBtZXRo
        b2QgY29tcHV0ZWQubWluCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5n
        fSBkZXBlbmRlbnRLZXkKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3Bl
        cnR5fSBjb21wdXRlcyB0aGUgc21hbGxlc3QgdmFsdWUgaW4gdGhlIGRlcGVu
        ZGVudEtleSdzIGFycmF5CiovCkVtYmVyLmNvbXB1dGVkLm1pbiA9IGZ1bmN0
        aW9uIChkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gRW1iZXIucmVkdWNlQ29t
        cHV0ZWQuY2FsbChudWxsLCBkZXBlbmRlbnRLZXksIHsKICAgIGluaXRpYWxW
        YWx1ZTogSW5maW5pdHksCgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbiAoYWNj
        dW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRh
        KSB7CiAgICAgIHJldHVybiBNYXRoLm1pbihhY2N1bXVsYXRlZFZhbHVlLCBp
        dGVtKTsKICAgIH0sCgogICAgcmVtb3ZlZEl0ZW06IGZ1bmN0aW9uIChhY2N1
        bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEp
        IHsKICAgICAgaWYgKGl0ZW0gPiBhY2N1bXVsYXRlZFZhbHVlKSB7CiAgICAg
        ICAgcmV0dXJuIGFjY3VtdWxhdGVkVmFsdWU7CiAgICAgIH0KICAgIH0KICB9
        KTsKfTsKCi8qKgogIFJldHVybnMgYW4gYXJyYXkgbWFwcGVkIHZpYSB0aGUg
        Y2FsbGJhY2sKCiAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBz
        aG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2
        YXNjcmlwdAogIGZ1bmN0aW9uKGl0ZW0pOwogIGBgYAoKICAtIGBpdGVtYCBp
        cyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCgogIEV4YW1w
        bGUKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5IYW1wc3RlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgZXhjaXRpbmdDaG9yZXM6IEVtYmVyLmNvbXB1
        dGVkLm1hcCgnY2hvcmVzJywgZnVuY3Rpb24oY2hvcmUpIHsKICAgICAgcmV0
        dXJuIGNob3JlLnRvVXBwZXJDYXNlKCkgKyAnISc7CiAgICB9KQogIH0pOwoK
        ICB2YXIgaGFtcHN0ZXIgPSBBcHAuSGFtcHN0ZXIuY3JlYXRlKHtjaG9yZXM6
        IFsnY29vaycsICdjbGVhbicsICd3cml0ZSBtb3JlIHVuaXQgdGVzdHMnXX0p
        OwogIGhhbXBzdGVyLmdldCgnZXhjaXRpbmdDaG9yZXMnKTsgLy8gWydDT09L
        IScsICdDTEVBTiEnLCAnV1JJVEUgTU9SRSBVTklUIFRFU1RTISddCiAgYGBg
        CgogIEBtZXRob2QgY29tcHV0ZWQubWFwCiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjawogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGFu
        IGFycmF5IG1hcHBlZCB2aWEgdGhlIGNhbGxiYWNrCiovCkVtYmVyLmNvbXB1
        dGVkLm1hcCA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgY2FsbGJhY2spIHsK
        ICB2YXIgb3B0aW9ucyA9IHsKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24oYXJy
        YXksIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2
        YXIgbWFwcGVkID0gY2FsbGJhY2suY2FsbCh0aGlzLCBpdGVtKTsKICAgICAg
        YXJyYXkuaW5zZXJ0QXQoY2hhbmdlTWV0YS5pbmRleCwgbWFwcGVkKTsKICAg
        ICAgcmV0dXJuIGFycmF5OwogICAgfSwKICAgIHJlbW92ZWRJdGVtOiBmdW5j
        dGlvbihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7
        CiAgICAgIGFycmF5LnJlbW92ZUF0KGNoYW5nZU1ldGEuaW5kZXgsIDEpOwog
        ICAgICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIEVtYmVy
        LmFycmF5Q29tcHV0ZWQoZGVwZW5kZW50S2V5LCBvcHRpb25zKTsKfTsKCi8q
        KgogIFJldHVybnMgYW4gYXJyYXkgbWFwcGVkIHRvIHRoZSBzcGVjaWZpZWQg
        a2V5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29u
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBjaGlsZEFnZXM6IEVtYmVy
        LmNvbXB1dGVkLm1hcEJ5KCdjaGlsZHJlbicsICdhZ2UnKQogIH0pOwoKICB2
        YXIgbG9yZEJ5cm9uID0gQXBwLlBlcnNvbi5jcmVhdGUoe2NoaWxkcmVuOiBb
        XX0pOwogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkQWdlcycpOyAvLyBbXQogIGxv
        cmRCeXJvbi5nZXQoJ2NoaWxkcmVuJykucHVzaE9iamVjdCh7bmFtZTogJ0F1
        Z3VzdGEgQWRhIEJ5cm9uJywgYWdlOiA3fSk7CiAgbG9yZEJ5cm9uLmdldCgn
        Y2hpbGRBZ2VzJyk7IC8vIFs3XQogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkcmVu
        JykucHVzaE9iamVjdHMoW3tuYW1lOiAnQWxsZWdyYSBCeXJvbicsIGFnZTog
        NX0sIHtuYW1lOiAnRWxpemFiZXRoIE1lZG9yYSBMZWlnaCcsIGFnZTogOH1d
        KTsKICBsb3JkQnlyb24uZ2V0KCdjaGlsZEFnZXMnKTsgLy8gWzcsIDUsIDhd
        CiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQubWFwQnkKICBAZm9yIEVtYmVy
        CiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEBwYXJhbSB7U3Ry
        aW5nfSBwcm9wZXJ0eUtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJv
        cGVydHl9IGFuIGFycmF5IG1hcHBlZCB0byB0aGUgc3BlY2lmaWVkIGtleQoq
        LwpFbWJlci5jb21wdXRlZC5tYXBCeSA9IGZ1bmN0aW9uKGRlcGVuZGVudEtl
        eSwgcHJvcGVydHlLZXkpIHsKICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbihp
        dGVtKSB7IHJldHVybiBnZXQoaXRlbSwgcHJvcGVydHlLZXkpOyB9OwogIHJl
        dHVybiBFbWJlci5jb21wdXRlZC5tYXAoZGVwZW5kZW50S2V5ICsgJy5AZWFj
        aC4nICsgcHJvcGVydHlLZXksIGNhbGxiYWNrKTsKfTsKCi8qKgogIEBtZXRo
        b2QgY29tcHV0ZWQubWFwUHJvcGVydHkKICBAZm9yIEVtYmVyCiAgQGRlcHJl
        Y2F0ZWQgVXNlIGBFbWJlci5jb21wdXRlZC5tYXBCeWAgaW5zdGVhZAogIEBw
        YXJhbSBkZXBlbmRlbnRLZXkKICBAcGFyYW0gcHJvcGVydHlLZXkKKi8KRW1i
        ZXIuY29tcHV0ZWQubWFwUHJvcGVydHkgPSBFbWJlci5jb21wdXRlZC5tYXBC
        eTsKCi8qKgogIEZpbHRlcnMgdGhlIGFycmF5IGJ5IHRoZSBjYWxsYmFjay4K
        CiAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2
        ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlwdAog
        IGZ1bmN0aW9uKGl0ZW0pOwogIGBgYAoKICAtIGBpdGVtYCBpcyB0aGUgY3Vy
        cmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCgogIEV4YW1wbGUKCiAgYGBg
        amF2YXNjcmlwdAogIEFwcC5IYW1wc3RlciA9IEVtYmVyLk9iamVjdC5leHRl
        bmQoewogICAgcmVtYWluaW5nQ2hvcmVzOiBFbWJlci5jb21wdXRlZC5maWx0
        ZXIoJ2Nob3JlcycsIGZ1bmN0aW9uKGNob3JlKSB7CiAgICAgIHJldHVybiAh
        Y2hvcmUuZG9uZTsKICAgIH0pCiAgfSk7CgogIHZhciBoYW1wc3RlciA9IEFw
        cC5IYW1wc3Rlci5jcmVhdGUoe2Nob3JlczogWwogICAge25hbWU6ICdjb29r
        JywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ2NsZWFuJywgZG9uZTogdHJ1
        ZX0sCiAgICB7bmFtZTogJ3dyaXRlIG1vcmUgdW5pdCB0ZXN0cycsIGRvbmU6
        IGZhbHNlfQogIF19KTsKICBoYW1wc3Rlci5nZXQoJ3JlbWFpbmluZ0Nob3Jl
        cycpOyAvLyBbe25hbWU6ICd3cml0ZSBtb3JlIHVuaXQgdGVzdHMnLCBkb25l
        OiBmYWxzZX1dCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZmlsdGVyCiAg
        QGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBA
        cGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogIEByZXR1cm4ge0VtYmVyLkNv
        bXB1dGVkUHJvcGVydHl9IHRoZSBmaWx0ZXJlZCBhcnJheQoqLwpFbWJlci5j
        b21wdXRlZC5maWx0ZXIgPSBmdW5jdGlvbihkZXBlbmRlbnRLZXksIGNhbGxi
        YWNrKSB7CiAgdmFyIG9wdGlvbnMgPSB7CiAgICBpbml0aWFsaXplOiBmdW5j
        dGlvbiAoYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAg
        ICBpbnN0YW5jZU1ldGEuZmlsdGVyZWRBcnJheUluZGV4ZXMgPSBuZXcgRW1i
        ZXIuU3ViQXJyYXkoKTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlv
        bihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAg
        ICAgIHZhciBtYXRjaCA9ICEhY2FsbGJhY2suY2FsbCh0aGlzLCBpdGVtKSwK
        ICAgICAgICAgIGZpbHRlckluZGV4ID0gaW5zdGFuY2VNZXRhLmZpbHRlcmVk
        QXJyYXlJbmRleGVzLmFkZEl0ZW0oY2hhbmdlTWV0YS5pbmRleCwgbWF0Y2gp
        OwoKICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgYXJyYXkuaW5zZXJ0QXQo
        ZmlsdGVySW5kZXgsIGl0ZW0pOwogICAgICB9CgogICAgICByZXR1cm4gYXJy
        YXk7CiAgICB9LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihhcnJheSwg
        aXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZhciBm
        aWx0ZXJJbmRleCA9IGluc3RhbmNlTWV0YS5maWx0ZXJlZEFycmF5SW5kZXhl
        cy5yZW1vdmVJdGVtKGNoYW5nZU1ldGEuaW5kZXgpOwoKICAgICAgaWYgKGZp
        bHRlckluZGV4ID4gLTEpIHsKICAgICAgICBhcnJheS5yZW1vdmVBdChmaWx0
        ZXJJbmRleCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhcnJheTsKICAgIH0K
        ICB9OwoKICByZXR1cm4gRW1iZXIuYXJyYXlDb21wdXRlZChkZXBlbmRlbnRL
        ZXksIG9wdGlvbnMpOwp9OwoKLyoqCiAgRmlsdGVycyB0aGUgYXJyYXkgYnkg
        dGhlIHByb3BlcnR5IGFuZCB2YWx1ZQoKICBFeGFtcGxlCgogIGBgYGphdmFz
        Y3JpcHQKICBBcHAuSGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIHJlbWFpbmluZ0Nob3JlczogRW1iZXIuY29tcHV0ZWQuZmlsdGVyQnko
        J2Nob3JlcycsICdkb25lJywgZmFsc2UpCiAgfSk7CgogIHZhciBoYW1wc3Rl
        ciA9IEFwcC5IYW1wc3Rlci5jcmVhdGUoe2Nob3JlczogWwogICAge25hbWU6
        ICdjb29rJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ2NsZWFuJywgZG9u
        ZTogdHJ1ZX0sCiAgICB7bmFtZTogJ3dyaXRlIG1vcmUgdW5pdCB0ZXN0cycs
        IGRvbmU6IGZhbHNlfQogIF19KTsKICBoYW1wc3Rlci5nZXQoJ3JlbWFpbmlu
        Z0Nob3JlcycpOyAvLyBbe25hbWU6ICd3cml0ZSBtb3JlIHVuaXQgdGVzdHMn
        LCBkb25lOiBmYWxzZX1dCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZmls
        dGVyQnkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVu
        dEtleQogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUtleQogIEBwYXJhbSB7
        U3RyaW5nfSB2YWx1ZQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVy
        dHl9IHRoZSBmaWx0ZXJlZCBhcnJheQoqLwpFbWJlci5jb21wdXRlZC5maWx0
        ZXJCeSA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgcHJvcGVydHlLZXksIHZh
        bHVlKSB7CiAgdmFyIGNhbGxiYWNrOwoKICBpZiAoYXJndW1lbnRzLmxlbmd0
        aCA9PT0gMikgewogICAgY2FsbGJhY2sgPSBmdW5jdGlvbihpdGVtKSB7CiAg
        ICAgIHJldHVybiBnZXQoaXRlbSwgcHJvcGVydHlLZXkpOwogICAgfTsKICB9
        IGVsc2UgewogICAgY2FsbGJhY2sgPSBmdW5jdGlvbihpdGVtKSB7CiAgICAg
        IHJldHVybiBnZXQoaXRlbSwgcHJvcGVydHlLZXkpID09PSB2YWx1ZTsKICAg
        IH07CiAgfQoKICByZXR1cm4gRW1iZXIuY29tcHV0ZWQuZmlsdGVyKGRlcGVu
        ZGVudEtleSArICcuQGVhY2guJyArIHByb3BlcnR5S2V5LCBjYWxsYmFjayk7
        Cn07CgovKioKICBAbWV0aG9kIGNvbXB1dGVkLmZpbHRlclByb3BlcnR5CiAg
        QGZvciBFbWJlcgogIEBwYXJhbSBkZXBlbmRlbnRLZXkKICBAcGFyYW0gcHJv
        cGVydHlLZXkKICBAcGFyYW0gdmFsdWUKICBAZGVwcmVjYXRlZCBVc2UgYEVt
        YmVyLmNvbXB1dGVkLmZpbHRlckJ5YCBpbnN0ZWFkCiovCkVtYmVyLmNvbXB1
        dGVkLmZpbHRlclByb3BlcnR5ID0gRW1iZXIuY29tcHV0ZWQuZmlsdGVyQnk7
        CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHJldHVybnMgYSBu
        ZXcgYXJyYXkgd2l0aCBhbGwgdGhlIHVuaXF1ZQogIGVsZW1lbnRzIGZyb20g
        b25lIG9yIG1vcmUgZGVwZW5kZW50IGFycmF5cy4KCiAgRXhhbXBsZQoKICBg
        YGBqYXZhc2NyaXB0CiAgQXBwLkhhbXBzdGVyID0gRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICB1bmlxdWVGcnVpdHM6IEVtYmVyLmNvbXB1dGVkLnVuaXEo
        J2ZydWl0cycpCiAgfSk7CgogIHZhciBoYW1wc3RlciA9IEFwcC5IYW1wc3Rl
        ci5jcmVhdGUoe2ZydWl0czogWwogICAgJ2JhbmFuYScsCiAgICAnZ3JhcGUn
        LAogICAgJ2thbGUnLAogICAgJ2JhbmFuYScKICBdfSk7CiAgaGFtcHN0ZXIu
        Z2V0KCd1bmlxdWVGcnVpdHMnKTsgLy8gWydiYW5hbmEnLCAnZ3JhcGUnLCAn
        a2FsZSddCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQudW5pcQogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlLZXkqCiAgQHJldHVy
        biB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZXMgYSBuZXcgYXJy
        YXkgd2l0aCBhbGwgdGhlCiAgdW5pcXVlIGVsZW1lbnRzIGZyb20gdGhlIGRl
        cGVuZGVudCBhcnJheQoqLwpFbWJlci5jb21wdXRlZC51bmlxID0gZnVuY3Rp
        b24oKSB7CiAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsK
        ICBhcmdzLnB1c2goewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJyYXks
        IGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICBpbnN0YW5jZU1l
        dGEuaXRlbUNvdW50cyA9IHt9OwogICAgfSwKCiAgICBhZGRlZEl0ZW06IGZ1
        bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEp
        IHsKICAgICAgdmFyIGd1aWQgPSBndWlkRm9yKGl0ZW0pOwoKICAgICAgaWYg
        KCFpbnN0YW5jZU1ldGEuaXRlbUNvdW50c1tndWlkXSkgewogICAgICAgIGlu
        c3RhbmNlTWV0YS5pdGVtQ291bnRzW2d1aWRdID0gMTsKICAgICAgfSBlbHNl
        IHsKICAgICAgICArK2luc3RhbmNlTWV0YS5pdGVtQ291bnRzW2d1aWRdOwog
        ICAgICB9CiAgICAgIGFycmF5LmFkZE9iamVjdChpdGVtKTsKICAgICAgcmV0
        dXJuIGFycmF5OwogICAgfSwKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihh
        cnJheSwgaXRlbSwgXywgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZhciBndWlk
        ID0gZ3VpZEZvcihpdGVtKSwKICAgICAgICAgIGl0ZW1Db3VudHMgPSBpbnN0
        YW5jZU1ldGEuaXRlbUNvdW50czsKCiAgICAgIGlmICgtLWl0ZW1Db3VudHNb
        Z3VpZF0gPT09IDApIHsKICAgICAgICBhcnJheS5yZW1vdmVPYmplY3QoaXRl
        bSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5OwogICAgfQogIH0pOwog
        IHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkLmFwcGx5KG51bGwsIGFyZ3Mp
        Owp9OwoKLyoqCiAgQWxpYXMgZm9yIFtFbWJlci5jb21wdXRlZC51bmlxXSgv
        YXBpLyNtZXRob2RfY29tcHV0ZWRfdW5pcSkuCgogIEBtZXRob2QgY29tcHV0
        ZWQudW5pb24KICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IHByb3Bl
        cnR5S2V5KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNv
        bXB1dGVzIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZQogIHVuaXF1ZSBlbGVt
        ZW50cyBmcm9tIHRoZSBkZXBlbmRlbnQgYXJyYXkKKi8KRW1iZXIuY29tcHV0
        ZWQudW5pb24gPSBFbWJlci5jb21wdXRlZC51bmlxOwoKLyoqCiAgQSBjb21w
        dXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3IGFycmF5IHdpdGgg
        YWxsIHRoZSBkdXBsaWNhdGVkCiAgZWxlbWVudHMgZnJvbSB0d28gb3IgbW9y
        ZSBkZXBlbmRlbnkgYXJyYXlzLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3Jp
        cHQKICB2YXIgb2JqID0gRW1iZXIuT2JqZWN0LmNyZWF0ZVdpdGhNaXhpbnMo
        ewogICAgYWRhRnJpZW5kczogWydDaGFybGVzIEJhYmJhZ2UnLCAnSm9obiBI
        b2Job3VzZScsICdXaWxsaWFtIEtpbmcnLCAnTWFyeSBTb21lcnZpbGxlJ10s
        CiAgICBjaGFybGVzRnJpZW5kczogWydXaWxsaWFtIEtpbmcnLCAnTWFyeSBT
        b21lcnZpbGxlJywgJ0FkYSBMb3ZlbGFjZScsICdHZW9yZ2UgUGVhY29jaydd
        LAogICAgZnJpZW5kc0luQ29tbW9uOiBFbWJlci5jb21wdXRlZC5pbnRlcnNl
        Y3QoJ2FkYUZyaWVuZHMnLCAnY2hhcmxlc0ZyaWVuZHMnKQogIH0pOwoKICBv
        YmouZ2V0KCdmcmllbmRzSW5Db21tb24nKTsgLy8gWydXaWxsaWFtIEtpbmcn
        LCAnTWFyeSBTb21lcnZpbGxlJ10KICBgYGAKCiAgQG1ldGhvZCBjb21wdXRl
        ZC5pbnRlcnNlY3QKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IHBy
        b3BlcnR5S2V5KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9
        IGNvbXB1dGVzIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZQogIGR1cGxpY2F0
        ZWQgZWxlbWVudHMgZnJvbSB0aGUgZGVwZW5kZW50IGFycmF5cwoqLwpFbWJl
        ci5jb21wdXRlZC5pbnRlcnNlY3QgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGdl
        dERlcGVuZGVudEtleUd1aWRzID0gZnVuY3Rpb24gKGNoYW5nZU1ldGEpIHsK
        ICAgIHJldHVybiBtYXAoY2hhbmdlTWV0YS5wcm9wZXJ0eS5fZGVwZW5kZW50
        S2V5cywgZnVuY3Rpb24gKGRlcGVuZGVudEtleSkgewogICAgICByZXR1cm4g
        Z3VpZEZvcihkZXBlbmRlbnRLZXkpOwogICAgfSk7CiAgfTsKCiAgdmFyIGFy
        Z3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsKICBhcmdzLnB1c2goewog
        ICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKGFycmF5LCBjaGFuZ2VNZXRhLCBp
        bnN0YW5jZU1ldGEpIHsKICAgICAgaW5zdGFuY2VNZXRhLml0ZW1Db3VudHMg
        PSB7fTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbihhcnJheSwg
        aXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZhciBp
        dGVtR3VpZCA9IGd1aWRGb3IoaXRlbSksCiAgICAgICAgICBkZXBlbmRlbnRH
        dWlkcyA9IGdldERlcGVuZGVudEtleUd1aWRzKGNoYW5nZU1ldGEpLAogICAg
        ICAgICAgZGVwZW5kZW50R3VpZCA9IGd1aWRGb3IoY2hhbmdlTWV0YS5hcnJh
        eUNoYW5nZWQpLAogICAgICAgICAgbnVtYmVyT2ZEZXBlbmRlbnRBcnJheXMg
        PSBjaGFuZ2VNZXRhLnByb3BlcnR5Ll9kZXBlbmRlbnRLZXlzLmxlbmd0aCwK
        ICAgICAgICAgIGl0ZW1Db3VudHMgPSBpbnN0YW5jZU1ldGEuaXRlbUNvdW50
        czsKCiAgICAgIGlmICghaXRlbUNvdW50c1tpdGVtR3VpZF0pIHsgaXRlbUNv
        dW50c1tpdGVtR3VpZF0gPSB7fTsgfQogICAgICBpZiAoaXRlbUNvdW50c1tp
        dGVtR3VpZF1bZGVwZW5kZW50R3VpZF0gPT09IHVuZGVmaW5lZCkgeyBpdGVt
        Q291bnRzW2l0ZW1HdWlkXVtkZXBlbmRlbnRHdWlkXSA9IDA7IH0KCiAgICAg
        IGlmICgrK2l0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVudEd1aWRdID09
        PSAxICYmCiAgICAgICAgICBudW1iZXJPZkRlcGVuZGVudEFycmF5cyA9PT0g
        RW1iZXIua2V5cyhpdGVtQ291bnRzW2l0ZW1HdWlkXSkubGVuZ3RoKSB7Cgog
        ICAgICAgIGFycmF5LmFkZE9iamVjdChpdGVtKTsKICAgICAgfQogICAgICBy
        ZXR1cm4gYXJyYXk7CiAgICB9LAogICAgcmVtb3ZlZEl0ZW06IGZ1bmN0aW9u
        KGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAg
        ICAgdmFyIGl0ZW1HdWlkID0gZ3VpZEZvcihpdGVtKSwKICAgICAgICAgIGRl
        cGVuZGVudEd1aWRzID0gZ2V0RGVwZW5kZW50S2V5R3VpZHMoY2hhbmdlTWV0
        YSksCiAgICAgICAgICBkZXBlbmRlbnRHdWlkID0gZ3VpZEZvcihjaGFuZ2VN
        ZXRhLmFycmF5Q2hhbmdlZCksCiAgICAgICAgICBudW1iZXJPZkRlcGVuZGVu
        dEFycmF5cyA9IGNoYW5nZU1ldGEucHJvcGVydHkuX2RlcGVuZGVudEtleXMu
        bGVuZ3RoLAogICAgICAgICAgbnVtYmVyT2ZBcnJheXNJdGVtQXBwZWFyc0lu
        LAogICAgICAgICAgaXRlbUNvdW50cyA9IGluc3RhbmNlTWV0YS5pdGVtQ291
        bnRzOwoKICAgICAgaWYgKGl0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVu
        dEd1aWRdID09PSB1bmRlZmluZWQpIHsgaXRlbUNvdW50c1tpdGVtR3VpZF1b
        ZGVwZW5kZW50R3VpZF0gPSAwOyB9CiAgICAgIGlmICgtLWl0ZW1Db3VudHNb
        aXRlbUd1aWRdW2RlcGVuZGVudEd1aWRdID09PSAwKSB7CiAgICAgICAgZGVs
        ZXRlIGl0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVudEd1aWRdOwogICAg
        ICAgIG51bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJbiA9IEVtYmVyLmtleXMo
        aXRlbUNvdW50c1tpdGVtR3VpZF0pLmxlbmd0aDsKCiAgICAgICAgaWYgKG51
        bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJbiA9PT0gMCkgewogICAgICAgICAg
        ZGVsZXRlIGl0ZW1Db3VudHNbaXRlbUd1aWRdOwogICAgICAgIH0KICAgICAg
        ICBhcnJheS5yZW1vdmVPYmplY3QoaXRlbSk7CiAgICAgIH0KICAgICAgcmV0
        dXJuIGFycmF5OwogICAgfQogIH0pOwogIHJldHVybiBFbWJlci5hcnJheUNv
        bXB1dGVkLmFwcGx5KG51bGwsIGFyZ3MpOwp9OwoKLyoqCiAgQSBjb21wdXRl
        ZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3IGFycmF5IHdpdGggYWxs
        IHRoZQogIHByb3BlcnRpZXMgZnJvbSB0aGUgZmlyc3QgZGVwZW5kZW50IGFy
        cmF5IHRoYXQgYXJlIG5vdCBpbiB0aGUgc2Vjb25kCiAgZGVwZW5kZW50IGFy
        cmF5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuSGFtcHN0
        ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGxpa2VzOiBbJ2JhbmFu
        YScsICdncmFwZScsICdrYWxlJ10sCiAgICB3YW50czogRW1iZXIuY29tcHV0
        ZWQuc2V0RGlmZignbGlrZXMnLCAnZnJ1aXRzJykKICB9KTsKCiAgdmFyIGhh
        bXBzdGVyID0gQXBwLkhhbXBzdGVyLmNyZWF0ZSh7ZnJ1aXRzOiBbCiAgICAn
        Z3JhcGUnLAogICAgJ2thbGUnLAogIF19KTsKICBoYW1wc3Rlci5nZXQoJ3dh
        bnRzJyk7IC8vIFsnYmFuYW5hJ10KICBgYGAKCiAgQG1ldGhvZCBjb21wdXRl
        ZC5zZXREaWZmCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBzZXRB
        UHJvcGVydHkKICBAcGFyYW0ge1N0cmluZ30gc2V0QlByb3BlcnR5CiAgQHJl
        dHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZXMgYSBuZXcg
        YXJyYXkgd2l0aCBhbGwgdGhlCiAgaXRlbXMgZnJvbSB0aGUgZmlyc3QgZGVw
        ZW5kZW50IGFycmF5IHRoYXQgYXJlIG5vdCBpbiB0aGUgc2Vjb25kCiAgZGVw
        ZW5kZW50IGFycmF5CiovCkVtYmVyLmNvbXB1dGVkLnNldERpZmYgPSBmdW5j
        dGlvbiAoc2V0QVByb3BlcnR5LCBzZXRCUHJvcGVydHkpIHsKICBpZiAoYXJn
        dW1lbnRzLmxlbmd0aCAhPT0gMikgewogICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJzZXREaWZmIHJlcXVpcmVzIGV4YWN0bHkgdHdvIGRlcGVuZGVudCBh
        cnJheXMuIik7CiAgfQogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkLmNh
        bGwobnVsbCwgc2V0QVByb3BlcnR5LCBzZXRCUHJvcGVydHksIHsKICAgIGFk
        ZGVkSXRlbTogZnVuY3Rpb24gKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBp
        bnN0YW5jZU1ldGEpIHsKICAgICAgdmFyIHNldEEgPSBnZXQodGhpcywgc2V0
        QVByb3BlcnR5KSwKICAgICAgICAgIHNldEIgPSBnZXQodGhpcywgc2V0QlBy
        b3BlcnR5KTsKCiAgICAgIGlmIChjaGFuZ2VNZXRhLmFycmF5Q2hhbmdlZCA9
        PT0gc2V0QSkgewogICAgICAgIGlmICghc2V0Qi5jb250YWlucyhpdGVtKSkg
        ewogICAgICAgICAgYXJyYXkuYWRkT2JqZWN0KGl0ZW0pOwogICAgICAgIH0K
        ICAgICAgfSBlbHNlIHsKICAgICAgICBhcnJheS5yZW1vdmVPYmplY3QoaXRl
        bSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKCiAgICBy
        ZW1vdmVkSXRlbTogZnVuY3Rpb24gKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRh
        LCBpbnN0YW5jZU1ldGEpIHsKICAgICAgdmFyIHNldEEgPSBnZXQodGhpcywg
        c2V0QVByb3BlcnR5KSwKICAgICAgICAgIHNldEIgPSBnZXQodGhpcywgc2V0
        QlByb3BlcnR5KTsKCiAgICAgIGlmIChjaGFuZ2VNZXRhLmFycmF5Q2hhbmdl
        ZCA9PT0gc2V0QikgewogICAgICAgIGlmIChzZXRBLmNvbnRhaW5zKGl0ZW0p
        KSB7CiAgICAgICAgICBhcnJheS5hZGRPYmplY3QoaXRlbSk7CiAgICAgICAg
        fQogICAgICB9IGVsc2UgewogICAgICAgIGFycmF5LnJlbW92ZU9iamVjdChp
        dGVtKTsKICAgICAgfQogICAgICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfSk7
        Cn07CgpmdW5jdGlvbiBiaW5hcnlTZWFyY2goYXJyYXksIGl0ZW0sIGxvdywg
        aGlnaCkgewogIHZhciBtaWQsIG1pZEl0ZW0sIHJlcywgZ3VpZE1pZCwgZ3Vp
        ZEl0ZW07CgogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgNCkgeyBoaWdoID0g
        Z2V0KGFycmF5LCAnbGVuZ3RoJyk7IH0KICBpZiAoYXJndW1lbnRzLmxlbmd0
        aCA8IDMpIHsgbG93ID0gMDsgfQoKICBpZiAobG93ID09PSBoaWdoKSB7CiAg
        ICByZXR1cm4gbG93OwogIH0KCiAgbWlkID0gbG93ICsgTWF0aC5mbG9vcigo
        aGlnaCAtIGxvdykgLyAyKTsKICBtaWRJdGVtID0gYXJyYXkub2JqZWN0QXQo
        bWlkKTsKCiAgZ3VpZE1pZCA9IF9ndWlkRm9yKG1pZEl0ZW0pOwogIGd1aWRJ
        dGVtID0gX2d1aWRGb3IoaXRlbSk7CgogIGlmIChndWlkTWlkID09PSBndWlk
        SXRlbSkgewogICAgcmV0dXJuIG1pZDsKICB9CgogIHJlcyA9IHRoaXMub3Jk
        ZXIobWlkSXRlbSwgaXRlbSk7CiAgaWYgKHJlcyA9PT0gMCkgewogICAgcmVz
        ID0gZ3VpZE1pZCA8IGd1aWRJdGVtID8gLTEgOiAxOwogIH0KCgogIGlmIChy
        ZXMgPCAwKSB7CiAgICByZXR1cm4gdGhpcy5iaW5hcnlTZWFyY2goYXJyYXks
        IGl0ZW0sIG1pZCsxLCBoaWdoKTsKICB9IGVsc2UgaWYgKHJlcyA+IDApIHsK
        ICAgIHJldHVybiB0aGlzLmJpbmFyeVNlYXJjaChhcnJheSwgaXRlbSwgbG93
        LCBtaWQpOwogIH0KCiAgcmV0dXJuIG1pZDsKCiAgZnVuY3Rpb24gX2d1aWRG
        b3IoaXRlbSkgewogICAgaWYgKEVtYmVyLk9iamVjdFByb3h5LmRldGVjdElu
        c3RhbmNlKGl0ZW0pKSB7CiAgICAgIHJldHVybiBndWlkRm9yKGdldChpdGVt
        LCAnY29udGVudCcpKTsKICAgIH0KICAgIHJldHVybiBndWlkRm9yKGl0ZW0p
        OwogIH0KfQoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1
        cm5zIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZQogIHByb3BlcnRpZXMgZnJv
        bSB0aGUgZmlyc3QgZGVwZW5kZW50IGFycmF5IHNvcnRlZCBiYXNlZCBvbiBh
        IHByb3BlcnR5CiAgb3Igc29ydCBmdW5jdGlvbi4KCiAgVGhlIGNhbGxiYWNr
        IG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5n
        IHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlwdAogIGZ1bmN0aW9uKGl0ZW1B
        LCBpdGVtQik7CiAgYGBgCgogIC0gYGl0ZW1BYCB0aGUgZmlyc3QgaXRlbSB0
        byBjb21wYXJlLgogIC0gYGl0ZW1CYCB0aGUgc2Vjb25kIGl0ZW0gdG8gY29t
        cGFyZS4KCiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGAtMWAgd2hl
        biBgaXRlbUFgIHNob3VsZCBjb21lIGJlZm9yZQogIGBpdGVtQmAuIEl0IHNo
        b3VsZCByZXR1cm4gYDFgIHdoZW4gYGl0ZW1BYCBzaG91bGQgY29tZSBhZnRl
        cgogIGBpdGVtQmAuIElmIHRoZSBgaXRlbUFgIGFuZCBgaXRlbUJgIGFyZSBl
        cXVhbCB0aGlzIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYDBgLgoKICBFeGFt
        cGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgVG9Eb0xpc3QgPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKICAgIHRvZG9zU29ydGluZzogWyduYW1lJ10sCiAg
        ICBzb3J0ZWRUb2RvczogRW1iZXIuY29tcHV0ZWQuc29ydCgndG9kb3MnLCAn
        dG9kb3NTb3J0aW5nJyksCiAgICBwcmlvcml0eVRvZG9zOiBFbWJlci5jb21w
        dXRlZC5zb3J0KCd0b2RvcycsIGZ1bmN0aW9uKGEsIGIpewogICAgICBpZiAo
        YS5wcmlvcml0eSA+IGIucHJpb3JpdHkpIHsKICAgICAgICByZXR1cm4gMTsK
        ICAgICAgfSBlbHNlIGlmIChhLnByaW9yaXR5IDwgYi5wcmlvcml0eSkgewog
        ICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICByZXR1cm4gMDsKICAg
        IH0pLAogIH0pOwogIHZhciB0b2RvTGlzdCA9IFRvRG9MaXN0LmNyZWF0ZSh7
        dG9kb3M6IFsKICAgIHtuYW1lOiAnVW5pdCBUZXN0JywgcHJpb3JpdHk6IDJ9
        LAogICAge25hbWU6ICdEb2N1bWVudGF0aW9uJywgcHJpb3JpdHk6IDN9LAog
        ICAge25hbWU6ICdSZWxlYXNlJywgcHJpb3JpdHk6IDF9CiAgXX0pOwoKICB0
        b2RvTGlzdC5nZXQoJ3NvcnRlZFRvZG9zJyk7IC8vIFt7bmFtZTonRG9jdW1l
        bnRhdGlvbicsIHByaW9yaXR5OjN9LCB7bmFtZTonUmVsZWFzZScsIHByaW9y
        aXR5OjF9LCB7bmFtZTonVW5pdCBUZXN0JywgcHJpb3JpdHk6Mn1dCiAgdG9k
        b0xpc3QuZ2V0KCdwcmlvcml0eVRvZG9zJyk7IC8vIFt7bmFtZTonUmVsZWFz
        ZScsIHByaW9yaXR5OjF9LCB7bmFtZTonVW5pdCBUZXN0JywgcHJpb3JpdHk6
        Mn0sIHtuYW1lOidEb2N1bWVudGF0aW9uJywgcHJpb3JpdHk6M31dCiAgYGBg
        CgogIEBtZXRob2QgY29tcHV0ZWQuc29ydAogIEBmb3IgRW1iZXIKICBAcGFy
        YW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtTdHJpbmcgb3Ig
        RnVuY3Rpb259IHNvcnREZWZpbml0aW9uIGEgZGVwZW5kZW50IGtleSB0byBh
        bgogIGFycmF5IG9mIHNvcnQgcHJvcGVydGllcyBvciBhIGZ1bmN0aW9uIHRv
        IHVzZSB3aGVuIHNvcnRpbmcKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFBy
        b3BlcnR5fSBjb21wdXRlcyBhIG5ldyBzb3J0ZWQgYXJyYXkgYmFzZWQKICBv
        biB0aGUgc29ydCBwcm9wZXJ0eSBhcnJheSBvciBjYWxsYmFjayBmdW5jdGlv
        bgoqLwpFbWJlci5jb21wdXRlZC5zb3J0ID0gZnVuY3Rpb24gKGl0ZW1zS2V5
        LCBzb3J0RGVmaW5pdGlvbikgewogIEVtYmVyLmFzc2VydCgiRW1iZXIuY29t
        cHV0ZWQuc29ydCByZXF1aXJlcyB0d28gYXJndW1lbnRzOiBhbiBhcnJheSBr
        ZXkgdG8gc29ydCBhbmQgZWl0aGVyIGEgc29ydCBwcm9wZXJ0aWVzIGtleSBv
        ciBzb3J0IGZ1bmN0aW9uIiwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMik7Cgog
        IHZhciBpbml0Rm4sIHNvcnRQcm9wZXJ0aWVzS2V5OwoKICBpZiAodHlwZW9m
        IHNvcnREZWZpbml0aW9uID09PSAnZnVuY3Rpb24nKSB7CiAgICBpbml0Rm4g
        PSBmdW5jdGlvbiAoYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkg
        ewogICAgICBpbnN0YW5jZU1ldGEub3JkZXIgPSBzb3J0RGVmaW5pdGlvbjsK
        ICAgICAgaW5zdGFuY2VNZXRhLmJpbmFyeVNlYXJjaCA9IGJpbmFyeVNlYXJj
        aDsKICAgIH07CiAgfSBlbHNlIHsKICAgIHNvcnRQcm9wZXJ0aWVzS2V5ID0g
        c29ydERlZmluaXRpb247CiAgICBpbml0Rm4gPSBmdW5jdGlvbiAoYXJyYXks
        IGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICBmdW5jdGlvbiBz
        ZXR1cFNvcnRQcm9wZXJ0aWVzKCkgewogICAgICAgIHZhciBzb3J0UHJvcGVy
        dHlEZWZpbml0aW9ucyA9IGdldCh0aGlzLCBzb3J0UHJvcGVydGllc0tleSks
        CiAgICAgICAgICAgIHNvcnRQcm9wZXJ0eSwKICAgICAgICAgICAgc29ydFBy
        b3BlcnRpZXMgPSBpbnN0YW5jZU1ldGEuc29ydFByb3BlcnRpZXMgPSBbXSwK
        ICAgICAgICAgICAgc29ydFByb3BlcnR5QXNjZW5kaW5nID0gaW5zdGFuY2VN
        ZXRhLnNvcnRQcm9wZXJ0eUFzY2VuZGluZyA9IHt9LAogICAgICAgICAgICBp
        ZHgsCiAgICAgICAgICAgIGFzYzsKCiAgICAgICAgRW1iZXIuYXNzZXJ0KCJD
        YW5ub3Qgc29ydDogJyIgKyBzb3J0UHJvcGVydGllc0tleSArICInIGlzIG5v
        dCBhbiBhcnJheS4iLCBFbWJlci5pc0FycmF5KHNvcnRQcm9wZXJ0eURlZmlu
        aXRpb25zKSk7CgogICAgICAgIGNoYW5nZU1ldGEucHJvcGVydHkuY2xlYXJJ
        dGVtUHJvcGVydHlLZXlzKGl0ZW1zS2V5KTsKCiAgICAgICAgZm9yRWFjaChz
        b3J0UHJvcGVydHlEZWZpbml0aW9ucywgZnVuY3Rpb24gKHNvcnRQcm9wZXJ0
        eURlZmluaXRpb24pIHsKICAgICAgICAgIGlmICgoaWR4ID0gc29ydFByb3Bl
        cnR5RGVmaW5pdGlvbi5pbmRleE9mKCc6JykpICE9PSAtMSkgewogICAgICAg
        ICAgICBzb3J0UHJvcGVydHkgPSBzb3J0UHJvcGVydHlEZWZpbml0aW9uLnN1
        YnN0cmluZygwLCBpZHgpOwogICAgICAgICAgICBhc2MgPSBzb3J0UHJvcGVy
        dHlEZWZpbml0aW9uLnN1YnN0cmluZyhpZHgrMSkudG9Mb3dlckNhc2UoKSAh
        PT0gJ2Rlc2MnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc29y
        dFByb3BlcnR5ID0gc29ydFByb3BlcnR5RGVmaW5pdGlvbjsKICAgICAgICAg
        ICAgYXNjID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBzb3J0UHJv
        cGVydGllcy5wdXNoKHNvcnRQcm9wZXJ0eSk7CiAgICAgICAgICBzb3J0UHJv
        cGVydHlBc2NlbmRpbmdbc29ydFByb3BlcnR5XSA9IGFzYzsKICAgICAgICAg
        IGNoYW5nZU1ldGEucHJvcGVydHkuaXRlbVByb3BlcnR5S2V5KGl0ZW1zS2V5
        LCBzb3J0UHJvcGVydHkpOwogICAgICAgIH0pOwoKICAgICAgICBzb3J0UHJv
        cGVydHlEZWZpbml0aW9ucy5hZGRPYnNlcnZlcignQGVhY2gnLCB0aGlzLCB1
        cGRhdGVTb3J0UHJvcGVydGllc09uY2UpOwogICAgICB9CgogICAgICBmdW5j
        dGlvbiB1cGRhdGVTb3J0UHJvcGVydGllc09uY2UoKSB7CiAgICAgICAgRW1i
        ZXIucnVuLm9uY2UodGhpcywgdXBkYXRlU29ydFByb3BlcnRpZXMsIGNoYW5n
        ZU1ldGEucHJvcGVydHlOYW1lKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24g
        dXBkYXRlU29ydFByb3BlcnRpZXMocHJvcGVydHlOYW1lKSB7CiAgICAgICAg
        c2V0dXBTb3J0UHJvcGVydGllcy5jYWxsKHRoaXMpOwogICAgICAgIGNoYW5n
        ZU1ldGEucHJvcGVydHkucmVjb21wdXRlT25jZS5jYWxsKHRoaXMsIHByb3Bl
        cnR5TmFtZSk7CiAgICAgIH0KCiAgICAgIEVtYmVyLmFkZE9ic2VydmVyKHRo
        aXMsIHNvcnRQcm9wZXJ0aWVzS2V5LCB1cGRhdGVTb3J0UHJvcGVydGllc09u
        Y2UpOwoKICAgICAgc2V0dXBTb3J0UHJvcGVydGllcy5jYWxsKHRoaXMpOwoK
        CiAgICAgIGluc3RhbmNlTWV0YS5vcmRlciA9IGZ1bmN0aW9uIChpdGVtQSwg
        aXRlbUIpIHsKICAgICAgICB2YXIgc29ydFByb3BlcnR5LCByZXN1bHQsIGFz
        YzsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc29ydFByb3Bl
        cnRpZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIHNvcnRQcm9wZXJ0eSA9
        IHRoaXMuc29ydFByb3BlcnRpZXNbaV07CiAgICAgICAgICByZXN1bHQgPSBF
        bWJlci5jb21wYXJlKGdldChpdGVtQSwgc29ydFByb3BlcnR5KSwgZ2V0KGl0
        ZW1CLCBzb3J0UHJvcGVydHkpKTsKCiAgICAgICAgICBpZiAocmVzdWx0ICE9
        PSAwKSB7CiAgICAgICAgICAgIGFzYyA9IHRoaXMuc29ydFByb3BlcnR5QXNj
        ZW5kaW5nW3NvcnRQcm9wZXJ0eV07CiAgICAgICAgICAgIHJldHVybiBhc2Mg
        PyByZXN1bHQgOiAoLTEgKiByZXN1bHQpOwogICAgICAgICAgfQogICAgICAg
        IH0KCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH07CgogICAgICBpbnN0YW5j
        ZU1ldGEuYmluYXJ5U2VhcmNoID0gYmluYXJ5U2VhcmNoOwogICAgfTsKICB9
        CgogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkLmNhbGwobnVsbCwgaXRl
        bXNLZXksIHsKICAgIGluaXRpYWxpemU6IGluaXRGbiwKCiAgICBhZGRlZEl0
        ZW06IGZ1bmN0aW9uIChhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFu
        Y2VNZXRhKSB7CiAgICAgIHZhciBpbmRleCA9IGluc3RhbmNlTWV0YS5iaW5h
        cnlTZWFyY2goYXJyYXksIGl0ZW0pOwogICAgICBhcnJheS5pbnNlcnRBdChp
        bmRleCwgaXRlbSk7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0sCgogICAg
        cmVtb3ZlZEl0ZW06IGZ1bmN0aW9uIChhcnJheSwgaXRlbSwgY2hhbmdlTWV0
        YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZhciBwcm94eVByb3BlcnRpZXMs
        IGluZGV4LCBzZWFyY2hJdGVtOwoKICAgICAgaWYgKGNoYW5nZU1ldGEucHJl
        dmlvdXNWYWx1ZXMpIHsKICAgICAgICBwcm94eVByb3BlcnRpZXMgPSBtZXJn
        ZSh7IGNvbnRlbnQ6IGl0ZW0gfSwgY2hhbmdlTWV0YS5wcmV2aW91c1ZhbHVl
        cyk7CgogICAgICAgIHNlYXJjaEl0ZW0gPSBFbWJlci5PYmplY3RQcm94eS5j
        cmVhdGUocHJveHlQcm9wZXJ0aWVzKTsKICAgICB9IGVsc2UgewogICAgICAg
        c2VhcmNoSXRlbSA9IGl0ZW07CiAgICAgfQoKICAgICAgaW5kZXggPSBpbnN0
        YW5jZU1ldGEuYmluYXJ5U2VhcmNoKGFycmF5LCBzZWFyY2hJdGVtKTsKICAg
        ICAgYXJyYXkucmVtb3ZlQXQoaW5kZXgpOwogICAgICByZXR1cm4gYXJyYXk7
        CiAgICB9CiAgfSk7Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgog
        IEV4cG9zZSBSU1ZQIGltcGxlbWVudGF0aW9uCiAgCiAgRG9jdW1lbnRhdGlv
        biBjYW4gYmUgZm91bmQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL3RpbGRl
        aW8vcnN2cC5qcy9ibG9iL21hc3Rlci9SRUFETUUubWQKCiAgQGNsYXNzIFJT
        VlAKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGNvbnN0cnVjdG9yCiovCkVtYmVy
        LlJTVlAgPSByZXF1aXJlTW9kdWxlKCdyc3ZwJyk7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXIt
        cnVudGltZQoqLwoKdmFyIFNUUklOR19EQVNIRVJJWkVfUkVHRVhQID0gKC9b
        IF9dL2cpOwp2YXIgU1RSSU5HX0RBU0hFUklaRV9DQUNIRSA9IHt9Owp2YXIg
        U1RSSU5HX0RFQ0FNRUxJWkVfUkVHRVhQID0gKC8oW2EtelxkXSkoW0EtWl0p
        L2cpOwp2YXIgU1RSSU5HX0NBTUVMSVpFX1JFR0VYUCA9ICgvKFwtfF98XC58
        XHMpKyguKT8vZyk7CnZhciBTVFJJTkdfVU5ERVJTQ09SRV9SRUdFWFBfMSA9
        ICgvKFthLXpcZF0pKFtBLVpdKykvZyk7CnZhciBTVFJJTkdfVU5ERVJTQ09S
        RV9SRUdFWFBfMiA9ICgvXC18XHMrL2cpOwoKLyoqCiAgRGVmaW5lcyB0aGUg
        aGFzaCBvZiBsb2NhbGl6ZWQgc3RyaW5ncyBmb3IgdGhlIGN1cnJlbnQgbGFu
        Z3VhZ2UuIFVzZWQgYnkKICB0aGUgYEVtYmVyLlN0cmluZy5sb2MoKWAgaGVs
        cGVyLiBUbyBsb2NhbGl6ZSwgYWRkIHN0cmluZyB2YWx1ZXMgdG8gdGhpcwog
        IGhhc2guCgogIEBwcm9wZXJ0eSBTVFJJTkdTCiAgQGZvciBFbWJlcgogIEB0
        eXBlIEhhc2gKKi8KRW1iZXIuU1RSSU5HUyA9IHt9OwoKLyoqCiAgRGVmaW5l
        cyBzdHJpbmcgaGVscGVyIG1ldGhvZHMgaW5jbHVkaW5nIHN0cmluZyBmb3Jt
        YXR0aW5nIGFuZCBsb2NhbGl6YXRpb24uCiAgVW5sZXNzIGBFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFUy5TdHJpbmdgIGlzIGBmYWxzZWAgdGhlc2UgbWV0aG9k
        cyB3aWxsIGFsc28gYmUKICBhZGRlZCB0byB0aGUgYFN0cmluZy5wcm90b3R5
        cGVgIGFzIHdlbGwuCgogIEBjbGFzcyBTdHJpbmcKICBAbmFtZXNwYWNlIEVt
        YmVyCiAgQHN0YXRpYwoqLwpFbWJlci5TdHJpbmcgPSB7CgogIC8qKgogICAg
        QXBwbHkgZm9ybWF0dGluZyBvcHRpb25zIHRvIHRoZSBzdHJpbmcuIFRoaXMg
        d2lsbCBsb29rIGZvciBvY2N1cnJlbmNlcwogICAgb2YgIiVAIiBpbiB5b3Vy
        IHN0cmluZyBhbmQgc3Vic3RpdHV0ZSB0aGVtIHdpdGggdGhlIGFyZ3VtZW50
        cyB5b3UgcGFzcyBpbnRvCiAgICB0aGlzIG1ldGhvZC4gSWYgeW91IHdhbnQg
        dG8gY29udHJvbCB0aGUgc3BlY2lmaWMgb3JkZXIgb2YgcmVwbGFjZW1lbnQs
        CiAgICB5b3UgY2FuIGFkZCBhIG51bWJlciBhZnRlciB0aGUga2V5IGFzIHdl
        bGwgdG8gaW5kaWNhdGUgd2hpY2ggYXJndW1lbnQKICAgIHlvdSB3YW50IHRv
        IGluc2VydC4KCiAgICBPcmRlcmVkIGluc2VydGlvbnMgYXJlIG1vc3QgdXNl
        ZnVsIHdoZW4gYnVpbGRpbmcgbG9jIHN0cmluZ3Mgd2hlcmUgdmFsdWVzCiAg
        ICB5b3UgbmVlZCB0byBpbnNlcnQgbWF5IGFwcGVhciBpbiBkaWZmZXJlbnQg
        b3JkZXJzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICJIZWxsbyAlQCAlQCIu
        Zm10KCdKb2huJywgJ0RvZScpOyAgICAgLy8gIkhlbGxvIEpvaG4gRG9lIgog
        ICAgIkhlbGxvICVAMiwgJUAxIi5mbXQoJ0pvaG4nLCAnRG9lJyk7ICAvLyAi
        SGVsbG8gRG9lLCBKb2huIgogICAgYGBgCgogICAgQG1ldGhvZCBmbXQKICAg
        IEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBmb3JtYXQKICAg
        IEBwYXJhbSB7QXJyYXl9IGZvcm1hdHMgQW4gYXJyYXkgb2YgcGFyYW1ldGVy
        cyB0byBpbnRlcnBvbGF0ZSBpbnRvIHN0cmluZy4KICAgIEByZXR1cm4ge1N0
        cmluZ30gZm9ybWF0dGVkIHN0cmluZwogICovCiAgZm10OiBmdW5jdGlvbihz
        dHIsIGZvcm1hdHMpIHsKICAgIC8vIGZpcnN0LCByZXBsYWNlIGFueSBPUkRF
        UkVEIHJlcGxhY2VtZW50cy4KICAgIHZhciBpZHggID0gMDsgLy8gdGhlIGN1
        cnJlbnQgaW5kZXggZm9yIG5vbi1udW1lcmljYWwgcmVwbGFjZW1lbnRzCiAg
        ICByZXR1cm4gc3RyLnJlcGxhY2UoLyVAKFswLTldKyk/L2csIGZ1bmN0aW9u
        KHMsIGFyZ0luZGV4KSB7CiAgICAgIGFyZ0luZGV4ID0gKGFyZ0luZGV4KSA/
        IHBhcnNlSW50KGFyZ0luZGV4LCAxMCkgLSAxIDogaWR4Kys7CiAgICAgIHMg
        PSBmb3JtYXRzW2FyZ0luZGV4XTsKICAgICAgcmV0dXJuIChzID09PSBudWxs
        KSA/ICcobnVsbCknIDogKHMgPT09IHVuZGVmaW5lZCkgPyAnJyA6IEVtYmVy
        Lmluc3BlY3Qocyk7CiAgICB9KSA7CiAgfSwKCiAgLyoqCiAgICBGb3JtYXRz
        IHRoZSBwYXNzZWQgc3RyaW5nLCBidXQgZmlyc3QgbG9va3MgdXAgdGhlIHN0
        cmluZyBpbiB0aGUgbG9jYWxpemVkCiAgICBzdHJpbmdzIGhhc2guIFRoaXMg
        aXMgYSBjb252ZW5pZW50IHdheSB0byBsb2NhbGl6ZSB0ZXh0LiBTZWUKICAg
        IGBFbWJlci5TdHJpbmcuZm10KClgIGZvciBtb3JlIGluZm9ybWF0aW9uIG9u
        IGZvcm1hdHRpbmcuCgogICAgTm90ZSB0aGF0IGl0IGlzIHRyYWRpdGlvbmFs
        IGJ1dCBub3QgcmVxdWlyZWQgdG8gcHJlZml4IGxvY2FsaXplZCBzdHJpbmcK
        ICAgIGtleXMgd2l0aCBhbiB1bmRlcnNjb3JlIG9yIG90aGVyIGNoYXJhY3Rl
        ciBzbyB5b3UgY2FuIGVhc2lseSBpZGVudGlmeQogICAgbG9jYWxpemVkIHN0
        cmluZ3MuCgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuU1RSSU5HUyA9
        IHsKICAgICAgJ19IZWxsbyBXb3JsZCc6ICdCb25qb3VyIGxlIG1vbmRlJywK
        ICAgICAgJ19IZWxsbyAlQCAlQCc6ICdCb25qb3VyICVAICVAJwogICAgfTsK
        CiAgICBFbWJlci5TdHJpbmcubG9jKCJfSGVsbG8gV29ybGQiKTsgIC8vICdC
        b25qb3VyIGxlIG1vbmRlJzsKICAgIEVtYmVyLlN0cmluZy5sb2MoIl9IZWxs
        byAlQCAlQCIsIFsiSm9obiIsICJTbWl0aCJdKTsgIC8vICJCb25qb3VyIEpv
        aG4gU21pdGgiOwogICAgYGBgCgogICAgQG1ldGhvZCBsb2MKICAgIEBwYXJh
        bSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBmb3JtYXQKICAgIEBwYXJh
        bSB7QXJyYXl9IGZvcm1hdHMgT3B0aW9uYWwgYXJyYXkgb2YgcGFyYW1ldGVy
        cyB0byBpbnRlcnBvbGF0ZSBpbnRvIHN0cmluZy4KICAgIEByZXR1cm4ge1N0
        cmluZ30gZm9ybWF0dGVkIHN0cmluZwogICovCiAgbG9jOiBmdW5jdGlvbihz
        dHIsIGZvcm1hdHMpIHsKICAgIHN0ciA9IEVtYmVyLlNUUklOR1Nbc3RyXSB8
        fCBzdHI7CiAgICByZXR1cm4gRW1iZXIuU3RyaW5nLmZtdChzdHIsIGZvcm1h
        dHMpIDsKICB9LAoKICAvKioKICAgIFNwbGl0cyBhIHN0cmluZyBpbnRvIHNl
        cGFyYXRlIHVuaXRzIHNlcGFyYXRlZCBieSBzcGFjZXMsIGVsaW1pbmF0aW5n
        IGFueQogICAgZW1wdHkgc3RyaW5ncyBpbiB0aGUgcHJvY2Vzcy4gVGhpcyBp
        cyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3Igc3BsaXQgdGhhdAogICAgaXMg
        bW9zdGx5IHVzZWZ1bCB3aGVuIGFwcGxpZWQgdG8gdGhlIGBTdHJpbmcucHJv
        dG90eXBlYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5TdHJpbmcu
        dygiYWxwaGEgYmV0YSBnYW1tYSIpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7
        CiAgICAgIGNvbnNvbGUubG9nKGtleSk7CiAgICB9KTsKCiAgICAvLyA+IGFs
        cGhhCiAgICAvLyA+IGJldGEKICAgIC8vID4gZ2FtbWEKICAgIGBgYAoKICAg
        IEBtZXRob2QgdwogICAgQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5n
        IHRvIHNwbGl0CiAgICBAcmV0dXJuIHtTdHJpbmd9IHNwbGl0IHN0cmluZwog
        ICovCiAgdzogZnVuY3Rpb24oc3RyKSB7IHJldHVybiBzdHIuc3BsaXQoL1xz
        Ky8pOyB9LAoKICAvKioKICAgIENvbnZlcnRzIGEgY2FtZWxpemVkIHN0cmlu
        ZyBpbnRvIGFsbCBsb3dlciBjYXNlIHNlcGFyYXRlZCBieSB1bmRlcnNjb3Jl
        cy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAnaW5uZXJIVE1MJy5kZWNhbWVs
        aXplKCk7ICAgICAgICAgICAvLyAnaW5uZXJfaHRtbCcKICAgICdhY3Rpb25f
        bmFtZScuZGVjYW1lbGl6ZSgpOyAgICAgICAgLy8gJ2FjdGlvbl9uYW1lJwog
        ICAgJ2Nzcy1jbGFzcy1uYW1lJy5kZWNhbWVsaXplKCk7ICAgICAvLyAnY3Nz
        LWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMnLmRlY2FtZWxp
        emUoKTsgIC8vICdteSBmYXZvcml0ZSBpdGVtcycKICAgIGBgYAoKICAgIEBt
        ZXRob2QgZGVjYW1lbGl6ZQogICAgQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUg
        c3RyaW5nIHRvIGRlY2FtZWxpemUuCiAgICBAcmV0dXJuIHtTdHJpbmd9IHRo
        ZSBkZWNhbWVsaXplZCBzdHJpbmcuCiAgKi8KICBkZWNhbWVsaXplOiBmdW5j
        dGlvbihzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShTVFJJTkdfREVD
        QU1FTElaRV9SRUdFWFAsICckMV8kMicpLnRvTG93ZXJDYXNlKCk7CiAgfSwK
        CiAgLyoqCiAgICBSZXBsYWNlcyB1bmRlcnNjb3Jlcywgc3BhY2VzLCBvciBj
        YW1lbENhc2Ugd2l0aCBkYXNoZXMuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        J2lubmVySFRNTCcuZGFzaGVyaXplKCk7ICAgICAgICAgIC8vICdpbm5lci1o
        dG1sJwogICAgJ2FjdGlvbl9uYW1lJy5kYXNoZXJpemUoKTsgICAgICAgIC8v
        ICdhY3Rpb24tbmFtZScKICAgICdjc3MtY2xhc3MtbmFtZScuZGFzaGVyaXpl
        KCk7ICAgICAvLyAnY3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3JpdGUg
        aXRlbXMnLmRhc2hlcml6ZSgpOyAgLy8gJ215LWZhdm9yaXRlLWl0ZW1zJwog
        ICAgYGBgCgogICAgQG1ldGhvZCBkYXNoZXJpemUKICAgIEBwYXJhbSB7U3Ry
        aW5nfSBzdHIgVGhlIHN0cmluZyB0byBkYXNoZXJpemUuCiAgICBAcmV0dXJu
        IHtTdHJpbmd9IHRoZSBkYXNoZXJpemVkIHN0cmluZy4KICAqLwogIGRhc2hl
        cml6ZTogZnVuY3Rpb24oc3RyKSB7CiAgICB2YXIgY2FjaGUgPSBTVFJJTkdf
        REFTSEVSSVpFX0NBQ0hFLAogICAgICAgIGhpdCAgID0gY2FjaGUuaGFzT3du
        UHJvcGVydHkoc3RyKSwKICAgICAgICByZXQ7CgogICAgaWYgKGhpdCkgewog
        ICAgICByZXR1cm4gY2FjaGVbc3RyXTsKICAgIH0gZWxzZSB7CiAgICAgIHJl
        dCA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHN0cikucmVwbGFjZShTVFJJ
        TkdfREFTSEVSSVpFX1JFR0VYUCwnLScpOwogICAgICBjYWNoZVtzdHJdID0g
        cmV0OwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLyoqCiAgICBS
        ZXR1cm5zIHRoZSBsb3dlckNhbWVsQ2FzZSBmb3JtIG9mIGEgc3RyaW5nLgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgICdpbm5lckhUTUwnLmNhbWVsaXplKCk7
        ICAgICAgICAgIC8vICdpbm5lckhUTUwnCiAgICAnYWN0aW9uX25hbWUnLmNh
        bWVsaXplKCk7ICAgICAgICAvLyAnYWN0aW9uTmFtZScKICAgICdjc3MtY2xh
        c3MtbmFtZScuY2FtZWxpemUoKTsgICAgIC8vICdjc3NDbGFzc05hbWUnCiAg
        ICAnbXkgZmF2b3JpdGUgaXRlbXMnLmNhbWVsaXplKCk7ICAvLyAnbXlGYXZv
        cml0ZUl0ZW1zJwogICAgJ015IEZhdm9yaXRlIEl0ZW1zJy5jYW1lbGl6ZSgp
        OyAgLy8gJ215RmF2b3JpdGVJdGVtcycKICAgIGBgYAoKICAgIEBtZXRob2Qg
        Y2FtZWxpemUKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0
        byBjYW1lbGl6ZS4KICAgIEByZXR1cm4ge1N0cmluZ30gdGhlIGNhbWVsaXpl
        ZCBzdHJpbmcuCiAgKi8KICBjYW1lbGl6ZTogZnVuY3Rpb24oc3RyKSB7CiAg
        ICByZXR1cm4gc3RyLnJlcGxhY2UoU1RSSU5HX0NBTUVMSVpFX1JFR0VYUCwg
        ZnVuY3Rpb24obWF0Y2gsIHNlcGFyYXRvciwgY2hyKSB7CiAgICAgIHJldHVy
        biBjaHIgPyBjaHIudG9VcHBlckNhc2UoKSA6ICcnOwogICAgfSkucmVwbGFj
        ZSgvXihbQS1aXSkvLCBmdW5jdGlvbihtYXRjaCwgc2VwYXJhdG9yLCBjaHIp
        IHsKICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJDYXNlKCk7CiAgICB9KTsK
        ICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIFVwcGVyQ2FtZWxDYXNlIGZv
        cm0gb2YgYSBzdHJpbmcuCgogICAgYGBgamF2YXNjcmlwdAogICAgJ2lubmVy
        SFRNTCcuY2xhc3NpZnkoKTsgICAgICAgICAgLy8gJ0lubmVySFRNTCcKICAg
        ICdhY3Rpb25fbmFtZScuY2xhc3NpZnkoKTsgICAgICAgIC8vICdBY3Rpb25O
        YW1lJwogICAgJ2Nzcy1jbGFzcy1uYW1lJy5jbGFzc2lmeSgpOyAgICAgLy8g
        J0Nzc0NsYXNzTmFtZScKICAgICdteSBmYXZvcml0ZSBpdGVtcycuY2xhc3Np
        ZnkoKTsgIC8vICdNeUZhdm9yaXRlSXRlbXMnCiAgICBgYGAKCiAgICBAbWV0
        aG9kIGNsYXNzaWZ5CiAgICBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzdHJp
        bmcgdG8gY2xhc3NpZnkKICAgIEByZXR1cm4ge1N0cmluZ30gdGhlIGNsYXNz
        aWZpZWQgc3RyaW5nCiAgKi8KICBjbGFzc2lmeTogZnVuY3Rpb24oc3RyKSB7
        CiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoIi4iKSwKICAgICAgICBvdXQg
        PSBbXTsKCiAgICBmb3IgKHZhciBpPTAsIGw9cGFydHMubGVuZ3RoOyBpPGw7
        IGkrKykgewogICAgICB2YXIgY2FtZWxpemVkID0gRW1iZXIuU3RyaW5nLmNh
        bWVsaXplKHBhcnRzW2ldKTsKICAgICAgb3V0LnB1c2goY2FtZWxpemVkLmNo
        YXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkLnN1YnN0cigxKSk7
        CiAgICB9CgogICAgcmV0dXJuIG91dC5qb2luKCIuIik7CiAgfSwKCiAgLyoq
        CiAgICBNb3JlIGdlbmVyYWwgdGhhbiBkZWNhbWVsaXplLiBSZXR1cm5zIHRo
        ZSBsb3dlclxfY2FzZVxfYW5kXF91bmRlcnNjb3JlZAogICAgZm9ybSBvZiBh
        IHN0cmluZy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAnaW5uZXJIVE1MJy51
        bmRlcnNjb3JlKCk7ICAgICAgICAgIC8vICdpbm5lcl9odG1sJwogICAgJ2Fj
        dGlvbl9uYW1lJy51bmRlcnNjb3JlKCk7ICAgICAgICAvLyAnYWN0aW9uX25h
        bWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLnVuZGVyc2NvcmUoKTsgICAgIC8v
        ICdjc3NfY2xhc3NfbmFtZScKICAgICdteSBmYXZvcml0ZSBpdGVtcycudW5k
        ZXJzY29yZSgpOyAgLy8gJ215X2Zhdm9yaXRlX2l0ZW1zJwogICAgYGBgCgog
        ICAgQG1ldGhvZCB1bmRlcnNjb3JlCiAgICBAcGFyYW0ge1N0cmluZ30gc3Ry
        IFRoZSBzdHJpbmcgdG8gdW5kZXJzY29yZS4KICAgIEByZXR1cm4ge1N0cmlu
        Z30gdGhlIHVuZGVyc2NvcmVkIHN0cmluZy4KICAqLwogIHVuZGVyc2NvcmU6
        IGZ1bmN0aW9uKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKFNUUklO
        R19VTkRFUlNDT1JFX1JFR0VYUF8xLCAnJDFfJDInKS4KICAgICAgcmVwbGFj
        ZShTVFJJTkdfVU5ERVJTQ09SRV9SRUdFWFBfMiwgJ18nKS50b0xvd2VyQ2Fz
        ZSgpOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0aGUgQ2FwaXRhbGl6ZWQg
        Zm9ybSBvZiBhIHN0cmluZwoKICAgIGBgYGphdmFzY3JpcHQKICAgICdpbm5l
        ckhUTUwnLmNhcGl0YWxpemUoKSAgICAgICAgIC8vICdJbm5lckhUTUwnCiAg
        ICAnYWN0aW9uX25hbWUnLmNhcGl0YWxpemUoKSAgICAgICAvLyAnQWN0aW9u
        X25hbWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLmNhcGl0YWxpemUoKSAgICAv
        LyAnQ3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMnLmNh
        cGl0YWxpemUoKSAvLyAnTXkgZmF2b3JpdGUgaXRlbXMnCiAgICBgYGAKCiAg
        ICBAbWV0aG9kIGNhcGl0YWxpemUKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIg
        VGhlIHN0cmluZyB0byBjYXBpdGFsaXplLgogICAgQHJldHVybiB7U3RyaW5n
        fSBUaGUgY2FwaXRhbGl6ZWQgc3RyaW5nLgogICovCiAgY2FwaXRhbGl6ZTog
        ZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1Vw
        cGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTsKICB9Cn07CgppZiAoRW1iZXIu
        RkVBVFVSRVMuaXNFbmFibGVkKCJzdHJpbmctaHVtYW5pemUiKSkgewogIC8q
        KgogICAgUmV0dXJucyB0aGUgSHVtYW5pemVkIGZvcm0gb2YgYSBzdHJpbmcK
        CiAgICBSZXBsYWNlcyB1bmRlcnNjb3JlcyB3aXRoIHNwYWNlcywgYW5kIGNh
        cGl0aWFsaXplcyBmaXJzdCBjaGFyYWN0ZXIKICAgIG9mIHN0cmluZy4gQWxz
        byBzdHJpcHMgIl9pZCIgc3VmZml4ZXMuCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgJ2ZpcnN0X25hbWUnLmh1bWFuaXplKCkgICAgICAgLy8gJ0ZpcnN0IG5h
        bWUnCiAgICAndXNlcl9pZCcuaHVtYW5pemUoKSAgICAgICAgICAvLyAnVXNl
        cicKICAgIGBgYAoKICAgIEBtZXRob2QgaHVtYW5pemUKICAgIEBwYXJhbSB7
        U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBodW1hbml6ZS4KICAgIEByZXR1
        cm4ge1N0cmluZ30gVGhlIGh1bWFuaXplZCBzdHJpbmcuCiAgKi8KCiAgRW1i
        ZXIuU3RyaW5nLmh1bWFuaXplID0gZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1
        cm4gc3RyLnJlcGxhY2UoL19pZCQvLCAnJykuCiAgICAgIHJlcGxhY2UoL18v
        ZywgJyAnKS4KICAgICAgcmVwbGFjZSgvXlx3L2csIGZ1bmN0aW9uKHMpewog
        ICAgICAgIHJldHVybiBzLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0pOwogIH07
        Cn0KCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKCgp2YXIgZm10ID0gRW1i
        ZXIuU3RyaW5nLmZtdCwKICAgIHcgICA9IEVtYmVyLlN0cmluZy53LAogICAg
        bG9jID0gRW1iZXIuU3RyaW5nLmxvYywKICAgIGNhbWVsaXplID0gRW1iZXIu
        U3RyaW5nLmNhbWVsaXplLAogICAgZGVjYW1lbGl6ZSA9IEVtYmVyLlN0cmlu
        Zy5kZWNhbWVsaXplLAogICAgZGFzaGVyaXplID0gRW1iZXIuU3RyaW5nLmRh
        c2hlcml6ZSwKICAgIHVuZGVyc2NvcmUgPSBFbWJlci5TdHJpbmcudW5kZXJz
        Y29yZSwKICAgIGNhcGl0YWxpemUgPSBFbWJlci5TdHJpbmcuY2FwaXRhbGl6
        ZSwKICAgIGNsYXNzaWZ5ID0gRW1iZXIuU3RyaW5nLmNsYXNzaWZ5OwoKaWYg
        KEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgic3RyaW5nLWh1bWFuaXplIikp
        IHsKICAgIHZhciBodW1hbml6ZSA9IEVtYmVyLlN0cmluZy5odW1hbml6ZTsK
        fQoKaWYgKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVt
        YmVyLkVYVEVORF9QUk9UT1RZUEVTLlN0cmluZykgewoKICAvKioKICAgIFNl
        ZSBbRW1iZXIuU3RyaW5nLmZtdF0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmlu
        Zy5odG1sI21ldGhvZF9mbXQpLgoKICAgIEBtZXRob2QgZm10CiAgICBAZm9y
        IFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5mbXQgPSBmdW5jdGlv
        bigpIHsKICAgIHJldHVybiBmbXQodGhpcywgYXJndW1lbnRzKTsKICB9OwoK
        ICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLnddKC9hcGkvY2xhc3Nlcy9F
        bWJlci5TdHJpbmcuaHRtbCNtZXRob2RfdykuCgogICAgQG1ldGhvZCB3CiAg
        ICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS53ID0gZnVu
        Y3Rpb24oKSB7CiAgICByZXR1cm4gdyh0aGlzKTsKICB9OwoKICAvKioKICAg
        IFNlZSBbRW1iZXIuU3RyaW5nLmxvY10oL2FwaS9jbGFzc2VzL0VtYmVyLlN0
        cmluZy5odG1sI21ldGhvZF9sb2MpLgoKICAgIEBtZXRob2QgbG9jCiAgICBA
        Zm9yIFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5sb2MgPSBmdW5j
        dGlvbigpIHsKICAgIHJldHVybiBsb2ModGhpcywgYXJndW1lbnRzKTsKICB9
        OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLmNhbWVsaXplXSgvYXBp
        L2NsYXNzZXMvRW1iZXIuU3RyaW5nLmh0bWwjbWV0aG9kX2NhbWVsaXplKS4K
        CiAgICBAbWV0aG9kIGNhbWVsaXplCiAgICBAZm9yIFN0cmluZwogICovCiAg
        U3RyaW5nLnByb3RvdHlwZS5jYW1lbGl6ZSA9IGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIGNhbWVsaXplKHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtF
        bWJlci5TdHJpbmcuZGVjYW1lbGl6ZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0
        cmluZy5odG1sI21ldGhvZF9kZWNhbWVsaXplKS4KCiAgICBAbWV0aG9kIGRl
        Y2FtZWxpemUKICAgIEBmb3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90
        eXBlLmRlY2FtZWxpemUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBkZWNh
        bWVsaXplKHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtFbWJlci5TdHJp
        bmcuZGFzaGVyaXplXSgvYXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5nLmh0bWwj
        bWV0aG9kX2Rhc2hlcml6ZSkuCgogICAgQG1ldGhvZCBkYXNoZXJpemUKICAg
        IEBmb3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmRhc2hlcml6
        ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGRhc2hlcml6ZSh0aGlzKTsK
        ICB9OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLnVuZGVyc2NvcmVd
        KC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRob2RfdW5kZXJz
        Y29yZSkuCgogICAgQG1ldGhvZCB1bmRlcnNjb3JlCiAgICBAZm9yIFN0cmlu
        ZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS51bmRlcnNjb3JlID0gZnVuY3Rp
        b24oKSB7CiAgICByZXR1cm4gdW5kZXJzY29yZSh0aGlzKTsKICB9OwoKICAv
        KioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLmNsYXNzaWZ5XSgvYXBpL2NsYXNz
        ZXMvRW1iZXIuU3RyaW5nLmh0bWwjbWV0aG9kX2NsYXNzaWZ5KS4KCiAgICBA
        bWV0aG9kIGNsYXNzaWZ5CiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5n
        LnByb3RvdHlwZS5jbGFzc2lmeSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJu
        IGNsYXNzaWZ5KHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtFbWJlci5T
        dHJpbmcuY2FwaXRhbGl6ZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5o
        dG1sI21ldGhvZF9jYXBpdGFsaXplKS4KCiAgICBAbWV0aG9kIGNhcGl0YWxp
        emUKICAgIEBmb3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmNh
        cGl0YWxpemUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBjYXBpdGFsaXpl
        KHRoaXMpOwogIH07CgogIGlmIChFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQo
        InN0cmluZy1odW1hbml6ZSIpKSB7CiAgICAvKioKICAgICAgU2VlIFtFbWJl
        ci5TdHJpbmcuaHVtYW5pemVdKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcu
        aHRtbCNtZXRob2RfaHVtYW5pemUpLgoKICAgICAgQG1ldGhvZCBodW1hbml6
        ZQogICAgICBAZm9yIFN0cmluZwogICAgKi8KICAgIFN0cmluZy5wcm90b3R5
        cGUuaHVtYW5pemUgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGh1bWFu
        aXplKHRoaXMpOwogICAgfTsKICB9Cgp9CgoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCnZhciBhX3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoK
        aWYgKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVy
        LkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0aW9uKSB7CgogIC8qKgogICAgVGhl
        IGBwcm9wZXJ0eWAgZXh0ZW5zaW9uIG9mIEphdmFzY3JpcHQncyBGdW5jdGlv
        biBwcm90b3R5cGUgaXMgYXZhaWxhYmxlCiAgICB3aGVuIGBFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFU2Agb3IgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1
        bmN0aW9uYCBpcwogICAgYHRydWVgLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4K
        CiAgICBDb21wdXRlZCBwcm9wZXJ0aWVzIGFsbG93IHlvdSB0byB0cmVhdCBh
        IGZ1bmN0aW9uIGxpa2UgYSBwcm9wZXJ0eToKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBNeUFwcC5QcmVzaWRlbnQgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgICAgZmlyc3ROYW1lOiAnJywKICAgICAgbGFzdE5hbWU6ICAnJywKCiAg
        ICAgIGZ1bGxOYW1lOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhp
        cy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhpcy5nZXQoJ2xhc3ROYW1l
        Jyk7CgogICAgICAgIC8vIENhbGwgdGhpcyBmbGFnIHRvIG1hcmsgdGhlIGZ1
        bmN0aW9uIGFzIGEgcHJvcGVydHkKICAgICAgfS5wcm9wZXJ0eSgpCiAgICB9
        KTsKCiAgICB2YXIgcHJlc2lkZW50ID0gTXlBcHAuUHJlc2lkZW50LmNyZWF0
        ZSh7CiAgICAgIGZpcnN0TmFtZTogIkJhcmFjayIsCiAgICAgIGxhc3ROYW1l
        OiAiT2JhbWEiCiAgICB9KTsKCiAgICBwcmVzaWRlbnQuZ2V0KCdmdWxsTmFt
        ZScpOyAgICAvLyAiQmFyYWNrIE9iYW1hIgogICAgYGBgCgogICAgVHJlYXRp
        bmcgYSBmdW5jdGlvbiBsaWtlIGEgcHJvcGVydHkgaXMgdXNlZnVsIGJlY2F1
        c2UgdGhleSBjYW4gd29yayB3aXRoCiAgICBiaW5kaW5ncywganVzdCBsaWtl
        IGFueSBvdGhlciBwcm9wZXJ0eS4KCiAgICBNYW55IGNvbXB1dGVkIHByb3Bl
        cnRpZXMgaGF2ZSBkZXBlbmRlbmNpZXMgb24gb3RoZXIgcHJvcGVydGllcy4g
        Rm9yCiAgICBleGFtcGxlLCBpbiB0aGUgYWJvdmUgZXhhbXBsZSwgdGhlIGBm
        dWxsTmFtZWAgcHJvcGVydHkgZGVwZW5kcyBvbgogICAgYGZpcnN0TmFtZWAg
        YW5kIGBsYXN0TmFtZWAgdG8gZGV0ZXJtaW5lIGl0cyB2YWx1ZS4gWW91IGNh
        biB0ZWxsIEVtYmVyCiAgICBhYm91dCB0aGVzZSBkZXBlbmRlbmNpZXMgbGlr
        ZSB0aGlzOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIE15QXBwLlByZXNpZGVu
        dCA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICBmaXJzdE5hbWU6ICcn
        LAogICAgICBsYXN0TmFtZTogICcnLAoKICAgICAgZnVsbE5hbWU6IGZ1bmN0
        aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldCgnZmlyc3ROYW1lJykg
        KyAnICcgKyB0aGlzLmdldCgnbGFzdE5hbWUnKTsKCiAgICAgICAgLy8gVGVs
        bCBFbWJlci5qcyB0aGF0IHRoaXMgY29tcHV0ZWQgcHJvcGVydHkgZGVwZW5k
        cyBvbiBmaXJzdE5hbWUKICAgICAgICAvLyBhbmQgbGFzdE5hbWUKICAgICAg
        fS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICAgIH0pOwog
        ICAgYGBgCgogICAgTWFrZSBzdXJlIHlvdSBsaXN0IHRoZXNlIGRlcGVuZGVu
        Y2llcyBzbyBFbWJlciBrbm93cyB3aGVuIHRvIHVwZGF0ZQogICAgYmluZGlu
        Z3MgdGhhdCBjb25uZWN0IHRvIGEgY29tcHV0ZWQgcHJvcGVydHkuIENoYW5n
        aW5nIGEgZGVwZW5kZW5jeQogICAgd2lsbCBub3QgaW1tZWRpYXRlbHkgdHJp
        Z2dlciBhbiB1cGRhdGUgb2YgdGhlIGNvbXB1dGVkIHByb3BlcnR5LCBidXQK
        ICAgIHdpbGwgaW5zdGVhZCBjbGVhciB0aGUgY2FjaGUgc28gdGhhdCBpdCBp
        cyB1cGRhdGVkIHdoZW4gdGhlIG5leHQgYGdldGAKICAgIGlzIGNhbGxlZCBv
        biB0aGUgcHJvcGVydHkuCgogICAgU2VlIFtFbWJlci5Db21wdXRlZFByb3Bl
        cnR5XSgvYXBpL2NsYXNzZXMvRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eS5odG1s
        KSwgW0VtYmVyLmNvbXB1dGVkXSgvYXBpLyNtZXRob2RfY29tcHV0ZWQpLgoK
        ICAgIEBtZXRob2QgcHJvcGVydHkKICAgIEBmb3IgRnVuY3Rpb24KICAqLwog
        IEZ1bmN0aW9uLnByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIHJldCA9IEVtYmVyLmNvbXB1dGVkKHRoaXMpOwogICAgcmV0dXJu
        IHJldC5wcm9wZXJ0eS5hcHBseShyZXQsIGFyZ3VtZW50cyk7CiAgfTsKCiAg
        LyoqCiAgICBUaGUgYG9ic2VydmVzYCBleHRlbnNpb24gb2YgSmF2YXNjcmlw
        dCdzIEZ1bmN0aW9uIHByb3RvdHlwZSBpcyBhdmFpbGFibGUKICAgIHdoZW4g
        YEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYCBvciBgRW1iZXIuRVhURU5EX1BS
        T1RPVFlQRVMuRnVuY3Rpb25gIGlzCiAgICB0cnVlLCB3aGljaCBpcyB0aGUg
        ZGVmYXVsdC4KCiAgICBZb3UgY2FuIG9ic2VydmUgcHJvcGVydHkgY2hhbmdl
        cyBzaW1wbHkgYnkgYWRkaW5nIHRoZSBgb2JzZXJ2ZXNgCiAgICBjYWxsIHRv
        IHRoZSBlbmQgb2YgeW91ciBtZXRob2QgZGVjbGFyYXRpb25zIGluIGNsYXNz
        ZXMgdGhhdCB5b3Ugd3JpdGUuCiAgICBGb3IgZXhhbXBsZToKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgdmFs
        dWVPYnNlcnZlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gRXhlY3V0ZXMg
        d2hlbmV2ZXIgdGhlICJ2YWx1ZSIgcHJvcGVydHkgY2hhbmdlcwogICAgICB9
        Lm9ic2VydmVzKCd2YWx1ZScpCiAgICB9KTsKICAgIGBgYAoKICAgIEluIHRo
        ZSBmdXR1cmUgdGhpcyBtZXRob2QgbWF5IGJlY29tZSBhc3luY2hyb25vdXMu
        IElmIHlvdSB3YW50IHRvIGVuc3VyZQogICAgc3luY2hyb25vdXMgYmVoYXZp
        b3IsIHVzZSBgb2JzZXJ2ZXNJbW1lZGlhdGVseWAuCgogICAgU2VlIGBFbWJl
        ci5vYnNlcnZlcmAuCgogICAgQG1ldGhvZCBvYnNlcnZlcwogICAgQGZvciBG
        dW5jdGlvbgogICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzID0g
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9fZW1iZXJfb2JzZXJ2ZXNfXyA9IGFf
        c2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsK
        CiAgLyoqCiAgICBUaGUgYG9ic2VydmVzSW1tZWRpYXRlbHlgIGV4dGVuc2lv
        biBvZiBKYXZhc2NyaXB0J3MgRnVuY3Rpb24gcHJvdG90eXBlIGlzCiAgICBh
        dmFpbGFibGUgd2hlbiBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVNgIG9yCiAg
        ICBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMuRnVuY3Rpb25gIGlzIHRydWUs
        IHdoaWNoIGlzIHRoZSBkZWZhdWx0LgoKICAgIFlvdSBjYW4gb2JzZXJ2ZSBw
        cm9wZXJ0eSBjaGFuZ2VzIHNpbXBseSBieSBhZGRpbmcgdGhlIGBvYnNlcnZl
        c0ltbWVkaWF0ZWx5YAogICAgY2FsbCB0byB0aGUgZW5kIG9mIHlvdXIgbWV0
        aG9kIGRlY2xhcmF0aW9ucyBpbiBjbGFzc2VzIHRoYXQgeW91IHdyaXRlLgog
        ICAgRm9yIGV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIu
        T2JqZWN0LmV4dGVuZCh7CiAgICAgIHZhbHVlT2JzZXJ2ZXI6IGZ1bmN0aW9u
        KCkgewogICAgICAgIC8vIEV4ZWN1dGVzIGltbWVkaWF0ZWx5IGFmdGVyIHRo
        ZSAidmFsdWUiIHByb3BlcnR5IGNoYW5nZXMKICAgICAgfS5vYnNlcnZlc0lt
        bWVkaWF0ZWx5KCd2YWx1ZScpCiAgICB9KTsKICAgIGBgYAoKICAgIEluIHRo
        ZSBmdXR1cmUsIGBvYnNlcnZlc2AgbWF5IGJlY29tZSBhc3luY2hyb25vdXMu
        IEluIHRoaXMgZXZlbnQsCiAgICBgb2JzZXJ2ZXNJbW1lZGlhdGVseWAgd2ls
        bCBtYWludGFpbiB0aGUgc3luY2hyb25vdXMgYmVoYXZpb3IuCgogICAgU2Vl
        IGBFbWJlci5pbW1lZGlhdGVPYnNlcnZlcmAuCgogICAgQG1ldGhvZCBvYnNl
        cnZlc0ltbWVkaWF0ZWx5CiAgICBAZm9yIEZ1bmN0aW9uCiAgKi8KICBGdW5j
        dGlvbi5wcm90b3R5cGUub2JzZXJ2ZXNJbW1lZGlhdGVseSA9IGZ1bmN0aW9u
        KCkgewogICAgZm9yICh2YXIgaT0wLCBsPWFyZ3VtZW50cy5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgIHZhciBhcmcgPSBhcmd1bWVudHNbaV07CiAgICAg
        IEVtYmVyLmFzc2VydCgiSW1tZWRpYXRlIG9ic2VydmVycyBtdXN0IG9ic2Vy
        dmUgaW50ZXJuYWwgcHJvcGVydGllcyBvbmx5LCBub3QgcHJvcGVydGllcyBv
        biBvdGhlciBvYmplY3RzLiIsIGFyZy5pbmRleE9mKCcuJykgPT09IC0xKTsK
        ICAgIH0KCiAgICByZXR1cm4gdGhpcy5vYnNlcnZlcy5hcHBseSh0aGlzLCBh
        cmd1bWVudHMpOwogIH07CgogIC8qKgogICAgVGhlIGBvYnNlcnZlc0JlZm9y
        ZWAgZXh0ZW5zaW9uIG9mIEphdmFzY3JpcHQncyBGdW5jdGlvbiBwcm90b3R5
        cGUgaXMKICAgIGF2YWlsYWJsZSB3aGVuIGBFbWJlci5FWFRFTkRfUFJPVE9U
        WVBFU2Agb3IKICAgIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5GdW5jdGlv
        bmAgaXMgdHJ1ZSwgd2hpY2ggaXMgdGhlIGRlZmF1bHQuCgogICAgWW91IGNh
        biBnZXQgbm90aWZpZWQgd2hlbiBhIHByb3BlcnR5IGNoYW5nZSBpcyBhYm91
        dCB0byBoYXBwZW4gYnkKICAgIGJ5IGFkZGluZyB0aGUgYG9ic2VydmVzQmVm
        b3JlYCBjYWxsIHRvIHRoZSBlbmQgb2YgeW91ciBtZXRob2QKICAgIGRlY2xh
        cmF0aW9ucyBpbiBjbGFzc2VzIHRoYXQgeW91IHdyaXRlLiBGb3IgZXhhbXBs
        ZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5PYmplY3QuZXh0ZW5k
        KHsKICAgICAgdmFsdWVPYnNlcnZlcjogZnVuY3Rpb24oKSB7CiAgICAgICAg
        Ly8gRXhlY3V0ZXMgd2hlbmV2ZXIgdGhlICJ2YWx1ZSIgcHJvcGVydHkgaXMg
        YWJvdXQgdG8gY2hhbmdlCiAgICAgIH0ub2JzZXJ2ZXNCZWZvcmUoJ3ZhbHVl
        JykKICAgIH0pOwogICAgYGBgCgogICAgU2VlIGBFbWJlci5iZWZvcmVPYnNl
        cnZlcmAuCgogICAgQG1ldGhvZCBvYnNlcnZlc0JlZm9yZQogICAgQGZvciBG
        dW5jdGlvbgogICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzQmVm
        b3JlID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9fZW1iZXJfb2JzZXJ2ZXNC
        ZWZvcmVfXyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgcmV0dXJu
        IHRoaXM7CiAgfTsKCiAgLyoqCiAgICBUaGUgYG9uYCBleHRlbnNpb24gb2Yg
        SmF2YXNjcmlwdCdzIEZ1bmN0aW9uIHByb3RvdHlwZSBpcyBhdmFpbGFibGUK
        ICAgIHdoZW4gYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYCBvciBgRW1iZXIu
        RVhURU5EX1BST1RPVFlQRVMuRnVuY3Rpb25gIGlzCiAgICB0cnVlLCB3aGlj
        aCBpcyB0aGUgZGVmYXVsdC4KCiAgICBZb3UgY2FuIGxpc3RlbiBmb3IgZXZl
        bnRzIHNpbXBseSBieSBhZGRpbmcgdGhlIGBvbmAgY2FsbCB0byB0aGUgZW5k
        IG9mCiAgICB5b3VyIG1ldGhvZCBkZWNsYXJhdGlvbnMgaW4gY2xhc3NlcyBv
        ciBtaXhpbnMgdGhhdCB5b3Ugd3JpdGUuIEZvciBleGFtcGxlOgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgICAgIGRv
        U29tZXRoaW5nV2l0aEVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgIC8v
        IEV4ZWN1dGVzIHdoZW5ldmVyIHRoZSAiZGlkSW5zZXJ0RWxlbWVudCIgZXZl
        bnQgZmlyZXMKICAgICAgfS5vbignZGlkSW5zZXJ0RWxlbWVudCcpCiAgICB9
        KTsKICAgIGBgYAoKICAgIFNlZSBgRW1iZXIub25gLgoKICAgIEBtZXRob2Qg
        b24KICAgIEBmb3IgRnVuY3Rpb24KICAqLwogIEZ1bmN0aW9uLnByb3RvdHlw
        ZS5vbiA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGV2ZW50cyA9IGFfc2xpY2Uu
        Y2FsbChhcmd1bWVudHMpOwogICAgdGhpcy5fX2VtYmVyX2xpc3RlbnNfXyA9
        IGV2ZW50czsKICAgIHJldHVybiB0aGlzOwogIH07Cn0KCgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKCi8qKgog
        IEltcGxlbWVudHMgc29tZSBzdGFuZGFyZCBtZXRob2RzIGZvciBjb21wYXJp
        bmcgb2JqZWN0cy4gQWRkIHRoaXMgbWl4aW4gdG8KICBhbnkgY2xhc3MgeW91
        IGNyZWF0ZSB0aGF0IGNhbiBjb21wYXJlIGl0cyBpbnN0YW5jZXMuCgogIFlv
        dSBzaG91bGQgaW1wbGVtZW50IHRoZSBgY29tcGFyZSgpYCBtZXRob2QuCgog
        IEBjbGFzcyBDb21wYXJhYmxlCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBzaW5j
        ZSBFbWJlciAwLjkKKi8KRW1iZXIuQ29tcGFyYWJsZSA9IEVtYmVyLk1peGlu
        LmNyZWF0ZSggLyoqIEBzY29wZSBFbWJlci5Db21wYXJhYmxlLnByb3RvdHlw
        ZSAqL3sKCiAgLyoqCiAgICBPdmVycmlkZSB0byByZXR1cm4gdGhlIHJlc3Vs
        dCBvZiB0aGUgY29tcGFyaXNvbiBvZiB0aGUgdHdvIHBhcmFtZXRlcnMuIFRo
        ZQogICAgY29tcGFyZSBtZXRob2Qgc2hvdWxkIHJldHVybjoKCiAgICAtIGAt
        MWAgaWYgYGEgPCBiYAogICAgLSBgMGAgaWYgYGEgPT0gYmAKICAgIC0gYDFg
        IGlmIGBhID4gYmAKCiAgICBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHJhaXNl
        cyBhbiBleGNlcHRpb24uCgogICAgQG1ldGhvZCBjb21wYXJlCiAgICBAcGFy
        YW0gYSB7T2JqZWN0fSB0aGUgZmlyc3Qgb2JqZWN0IHRvIGNvbXBhcmUKICAg
        IEBwYXJhbSBiIHtPYmplY3R9IHRoZSBzZWNvbmQgb2JqZWN0IHRvIGNvbXBh
        cmUKICAgIEByZXR1cm4ge0ludGVnZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNv
        bXBhcmlzb24KICAqLwogIGNvbXBhcmU6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0
        aW9uKQoKfSk7CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCgoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgSW1wbGVt
        ZW50cyBzb21lIHN0YW5kYXJkIG1ldGhvZHMgZm9yIGNvcHlpbmcgYW4gb2Jq
        ZWN0LiBBZGQgdGhpcyBtaXhpbiB0bwogIGFueSBvYmplY3QgeW91IGNyZWF0
        ZSB0aGF0IGNhbiBjcmVhdGUgYSBjb3B5IG9mIGl0c2VsZi4gVGhpcyBtaXhp
        biBpcwogIGFkZGVkIGF1dG9tYXRpY2FsbHkgdG8gdGhlIGJ1aWx0LWluIGFy
        cmF5LgoKICBZb3Ugc2hvdWxkIGdlbmVyYWxseSBpbXBsZW1lbnQgdGhlIGBj
        b3B5KClgIG1ldGhvZCB0byByZXR1cm4gYSBjb3B5IG9mIHRoZQogIHJlY2Vp
        dmVyLgoKICBOb3RlIHRoYXQgYGZyb3plbkNvcHkoKWAgd2lsbCBvbmx5IHdv
        cmsgaWYgeW91IGFsc28gaW1wbGVtZW50CiAgYEVtYmVyLkZyZWV6YWJsZWAu
        CgogIEBjbGFzcyBDb3B5YWJsZQogIEBuYW1lc3BhY2UgRW1iZXIKICBAc2lu
        Y2UgRW1iZXIgMC45CiovCkVtYmVyLkNvcHlhYmxlID0gRW1iZXIuTWl4aW4u
        Y3JlYXRlKC8qKiBAc2NvcGUgRW1iZXIuQ29weWFibGUucHJvdG90eXBlICov
        IHsKCiAgLyoqCiAgICBPdmVycmlkZSB0byByZXR1cm4gYSBjb3B5IG9mIHRo
        ZSByZWNlaXZlci4gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByYWlzZXMKICAg
        IGFuIGV4Y2VwdGlvbi4KCiAgICBAbWV0aG9kIGNvcHkKICAgIEBwYXJhbSB7
        Qm9vbGVhbn0gZGVlcCBpZiBgdHJ1ZWAsIGEgZGVlcCBjb3B5IG9mIHRoZSBv
        YmplY3Qgc2hvdWxkIGJlIG1hZGUKICAgIEByZXR1cm4ge09iamVjdH0gY29w
        eSBvZiByZWNlaXZlcgogICovCiAgY29weTogRW1iZXIucmVxdWlyZWQoRnVu
        Y3Rpb24pLAoKICAvKioKICAgIElmIHRoZSBvYmplY3QgaW1wbGVtZW50cyBg
        RW1iZXIuRnJlZXphYmxlYCwgdGhlbiB0aGlzIHdpbGwgcmV0dXJuIGEgbmV3
        CiAgICBjb3B5IGlmIHRoZSBvYmplY3QgaXMgbm90IGZyb3plbiBhbmQgdGhl
        IHJlY2VpdmVyIGlmIHRoZSBvYmplY3QgaXMgZnJvemVuLgoKICAgIFJhaXNl
        cyBhbiBleGNlcHRpb24gaWYgeW91IHRyeSB0byBjYWxsIHRoaXMgbWV0aG9k
        IG9uIGEgb2JqZWN0IHRoYXQgZG9lcwogICAgbm90IHN1cHBvcnQgZnJlZXpp
        bmcuCgogICAgWW91IHNob3VsZCB1c2UgdGhpcyBtZXRob2Qgd2hlbmV2ZXIg
        eW91IHdhbnQgYSBjb3B5IG9mIGEgZnJlZXphYmxlIG9iamVjdAogICAgc2lu
        Y2UgYSBmcmVlemFibGUgb2JqZWN0IGNhbiBzaW1wbHkgcmV0dXJuIGl0c2Vs
        ZiB3aXRob3V0IGFjdHVhbGx5CiAgICBjb25zdW1pbmcgbW9yZSBtZW1vcnku
        CgogICAgQG1ldGhvZCBmcm96ZW5Db3B5CiAgICBAcmV0dXJuIHtPYmplY3R9
        IGNvcHkgb2YgcmVjZWl2ZXIgb3IgcmVjZWl2ZXIKICAqLwogIGZyb3plbkNv
        cHk6IGZ1bmN0aW9uKCkgewogICAgaWYgKEVtYmVyLkZyZWV6YWJsZSAmJiBF
        bWJlci5GcmVlemFibGUuZGV0ZWN0KHRoaXMpKSB7CiAgICAgIHJldHVybiBn
        ZXQodGhpcywgJ2lzRnJvemVuJykgPyB0aGlzIDogdGhpcy5jb3B5KCkuZnJl
        ZXplKCk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoRW1iZXIuU3RyaW5nLmZtdCgiJUAgZG9lcyBub3Qgc3VwcG9ydCBmcmVl
        emluZyIsIFt0aGlzXSkpOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXIt
        cnVudGltZQoqLwoKCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKCi8qKgogIFRoZSBgRW1iZXIuRnJlZXphYmxlYCBtaXhpbiBpbXBs
        ZW1lbnRzIHNvbWUgYmFzaWMgbWV0aG9kcyBmb3IgbWFya2luZyBhbgogIG9i
        amVjdCBhcyBmcm96ZW4uIE9uY2UgYW4gb2JqZWN0IGlzIGZyb3plbiBpdCBz
        aG91bGQgYmUgcmVhZCBvbmx5LiBObyBjaGFuZ2VzCiAgbWF5IGJlIG1hZGUg
        dGhlIGludGVybmFsIHN0YXRlIG9mIHRoZSBvYmplY3QuCgogICMjIEVuZm9y
        Y2VtZW50CgogIFRvIGZ1bGx5IHN1cHBvcnQgZnJlZXppbmcgaW4geW91ciBz
        dWJjbGFzcywgeW91IG11c3QgaW5jbHVkZSB0aGlzIG1peGluIGFuZAogIG92
        ZXJyaWRlIGFueSBtZXRob2QgdGhhdCBtaWdodCBhbHRlciBhbnkgcHJvcGVy
        dHkgb24gdGhlIG9iamVjdCB0byBpbnN0ZWFkCiAgcmFpc2UgYW4gZXhjZXB0
        aW9uLiBZb3UgY2FuIGNoZWNrIHRoZSBzdGF0ZSBvZiBhbiBvYmplY3QgYnkg
        Y2hlY2tpbmcgdGhlCiAgYGlzRnJvemVuYCBwcm9wZXJ0eS4KCiAgQWx0aG91
        Z2ggZnV0dXJlIHZlcnNpb25zIG9mIEphdmFTY3JpcHQgbWF5IHN1cHBvcnQg
        bGFuZ3VhZ2UtbGV2ZWwgZnJlZXppbmcKICBvYmplY3Qgb2JqZWN0cywgdGhh
        dCBpcyBub3QgdGhlIGNhc2UgdG9kYXkuIEV2ZW4gaWYgYW4gb2JqZWN0IGlz
        IGZyZWV6YWJsZSwKICBpdCBpcyBzdGlsbCB0ZWNobmljYWxseSBwb3NzaWJs
        ZSB0byBtb2RpZnkgdGhlIG9iamVjdCwgZXZlbiB0aG91Z2ggaXQgY291bGQK
        ICBicmVhayBvdGhlciBwYXJ0cyBvZiB5b3VyIGFwcGxpY2F0aW9uIHRoYXQg
        ZG8gbm90IGV4cGVjdCBhIGZyb3plbiBvYmplY3QgdG8KICBjaGFuZ2UuIEl0
        IGlzLCB0aGVyZWZvcmUsIHZlcnkgaW1wb3J0YW50IHRoYXQgeW91IGFsd2F5
        cyByZXNwZWN0IHRoZQogIGBpc0Zyb3plbmAgcHJvcGVydHkgb24gYWxsIGZy
        ZWV6YWJsZSBvYmplY3RzLgoKICAjIyBFeGFtcGxlIFVzYWdlCgogIFRoZSBl
        eGFtcGxlIGJlbG93IHNob3dzIGEgc2ltcGxlIG9iamVjdCB0aGF0IGltcGxl
        bWVudCB0aGUgYEVtYmVyLkZyZWV6YWJsZWAKICBwcm90b2NvbC4KCiAgYGBg
        amF2YXNjcmlwdAogIENvbnRhY3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVt
        YmVyLkZyZWV6YWJsZSwgewogICAgZmlyc3ROYW1lOiBudWxsLAogICAgbGFz
        dE5hbWU6IG51bGwsCgogICAgLy8gc3dhcHMgdGhlIG5hbWVzCiAgICBzd2Fw
        TmFtZXM6IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5nZXQoJ2lzRnJv
        emVuJykpIHRocm93IEVtYmVyLkZST1pFTl9FUlJPUjsKICAgICAgdmFyIHRt
        cCA9IHRoaXMuZ2V0KCdmaXJzdE5hbWUnKTsKICAgICAgdGhpcy5zZXQoJ2Zp
        cnN0TmFtZScsIHRoaXMuZ2V0KCdsYXN0TmFtZScpKTsKICAgICAgdGhpcy5z
        ZXQoJ2xhc3ROYW1lJywgdG1wKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9
        CgogIH0pOwoKICBjID0gQ29udGV4dC5jcmVhdGUoeyBmaXJzdE5hbWU6ICJK
        b2huIiwgbGFzdE5hbWU6ICJEb2UiIH0pOwogIGMuc3dhcE5hbWVzKCk7ICAv
        LyByZXR1cm5zIGMKICBjLmZyZWV6ZSgpOwogIGMuc3dhcE5hbWVzKCk7ICAv
        LyBFWENFUFRJT04KICBgYGAKCiAgIyMgQ29weWluZwoKICBVc3VhbGx5IHRo
        ZSBgRW1iZXIuRnJlZXphYmxlYCBwcm90b2NvbCBpcyBpbXBsZW1lbnRlZCBp
        biBjb29wZXJhdGlvbiB3aXRoIHRoZQogIGBFbWJlci5Db3B5YWJsZWAgcHJv
        dG9jb2wsIHdoaWNoIGRlZmluZXMgYSBgZnJvemVuQ29weSgpYCBtZXRob2Qg
        dGhhdCB3aWxsCiAgcmV0dXJuIGEgZnJvemVuIG9iamVjdCwgaWYgdGhlIG9i
        amVjdCBpbXBsZW1lbnRzIHRoaXMgbWV0aG9kIGFzIHdlbGwuCgogIEBjbGFz
        cyBGcmVlemFibGUKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVy
        IDAuOQoqLwpFbWJlci5GcmVlemFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUo
        LyoqIEBzY29wZSBFbWJlci5GcmVlemFibGUucHJvdG90eXBlICovIHsKCiAg
        LyoqCiAgICBTZXQgdG8gYHRydWVgIHdoZW4gdGhlIG9iamVjdCBpcyBmcm96
        ZW4uIFVzZSB0aGlzIHByb3BlcnR5IHRvIGRldGVjdAogICAgd2hldGhlciB5
        b3VyIG9iamVjdCBpcyBmcm96ZW4gb3Igbm90LgoKICAgIEBwcm9wZXJ0eSBp
        c0Zyb3plbgogICAgQHR5cGUgQm9vbGVhbgogICovCiAgaXNGcm96ZW46IGZh
        bHNlLAoKICAvKioKICAgIEZyZWV6ZXMgdGhlIG9iamVjdC4gT25jZSB0aGlz
        IG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQgdGhlIG9iamVjdCBzaG91bGQKICAg
        IG5vIGxvbmdlciBhbGxvdyBhbnkgcHJvcGVydGllcyB0byBiZSBlZGl0ZWQu
        CgogICAgQG1ldGhvZCBmcmVlemUKICAgIEByZXR1cm4ge09iamVjdH0gcmVj
        ZWl2ZXIKICAqLwogIGZyZWV6ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0
        KHRoaXMsICdpc0Zyb3plbicpKSByZXR1cm4gdGhpczsKICAgIHNldCh0aGlz
        LCAnaXNGcm96ZW4nLCB0cnVlKTsKICAgIHJldHVybiB0aGlzOwogIH0KCn0p
        OwoKRW1iZXIuRlJPWkVOX0VSUk9SID0gIkZyb3plbiBvYmplY3QgY2Fubm90
        IGJlIG1vZGlmaWVkLiI7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFy
        IGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaDsKCi8q
        KgogIFRoaXMgbWl4aW4gZGVmaW5lcyB0aGUgQVBJIGZvciBtb2RpZnlpbmcg
        Z2VuZXJpYyBlbnVtZXJhYmxlcy4gVGhlc2UgbWV0aG9kcwogIGNhbiBiZSBh
        cHBsaWVkIHRvIGFuIG9iamVjdCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgaXQg
        aXMgb3JkZXJlZCBvcgogIHVub3JkZXJlZC4KCiAgTm90ZSB0aGF0IGFuIEVu
        dW1lcmFibGUgY2FuIGNoYW5nZSBldmVuIGlmIGl0IGRvZXMgbm90IGltcGxl
        bWVudCB0aGlzIG1peGluLgogIEZvciBleGFtcGxlLCBhIE1hcHBlZEVudW1l
        cmFibGUgY2Fubm90IGJlIGRpcmVjdGx5IG1vZGlmaWVkIGJ1dCBpZiBpdHMK
        ICB1bmRlcmx5aW5nIGVudW1lcmFibGUgY2hhbmdlcywgaXQgd2lsbCBjaGFu
        Z2UgYWxzby4KCiAgIyMgQWRkaW5nIE9iamVjdHMKCiAgVG8gYWRkIGFuIG9i
        amVjdCB0byBhbiBlbnVtZXJhYmxlLCB1c2UgdGhlIGBhZGRPYmplY3QoKWAg
        bWV0aG9kLiBUaGlzCiAgbWV0aG9kIHdpbGwgb25seSBhZGQgdGhlIG9iamVj
        dCB0byB0aGUgZW51bWVyYWJsZSBpZiB0aGUgb2JqZWN0IGlzIG5vdAogIGFs
        cmVhZHkgcHJlc2VudCBhbmQgaXMgb2YgYSB0eXBlIHN1cHBvcnRlZCBieSB0
        aGUgZW51bWVyYWJsZS4KCiAgYGBgamF2YXNjcmlwdAogIHNldC5hZGRPYmpl
        Y3QoY29udGFjdCk7CiAgYGBgCgogICMjIFJlbW92aW5nIE9iamVjdHMKCiAg
        VG8gcmVtb3ZlIGFuIG9iamVjdCBmcm9tIGFuIGVudW1lcmFibGUsIHVzZSB0
        aGUgYHJlbW92ZU9iamVjdCgpYCBtZXRob2QuIFRoaXMKICB3aWxsIG9ubHkg
        cmVtb3ZlIHRoZSBvYmplY3QgaWYgaXQgaXMgcHJlc2VudCBpbiB0aGUgZW51
        bWVyYWJsZSwgb3RoZXJ3aXNlCiAgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVj
        dC4KCiAgYGBgamF2YXNjcmlwdAogIHNldC5yZW1vdmVPYmplY3QoY29udGFj
        dCk7CiAgYGBgCgogICMjIEltcGxlbWVudGluZyBJbiBZb3VyIE93biBDb2Rl
        CgogIElmIHlvdSBhcmUgaW1wbGVtZW50aW5nIGFuIG9iamVjdCBhbmQgd2Fu
        dCB0byBzdXBwb3J0IHRoaXMgQVBJLCBqdXN0IGluY2x1ZGUKICB0aGlzIG1p
        eGluIGluIHlvdXIgY2xhc3MgYW5kIGltcGxlbWVudCB0aGUgcmVxdWlyZWQg
        bWV0aG9kcy4gSW4geW91ciB1bml0CiAgdGVzdHMsIGJlIHN1cmUgdG8gYXBw
        bHkgdGhlIEVtYmVyLk11dGFibGVFbnVtZXJhYmxlVGVzdHMgdG8geW91ciBv
        YmplY3QuCgogIEBjbGFzcyBNdXRhYmxlRW51bWVyYWJsZQogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAdXNlcyBFbWJlci5FbnVtZXJhYmxlCiovCkVtYmVyLk11
        dGFibGVFbnVtZXJhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkVu
        dW1lcmFibGUsIHsKCiAgLyoqCiAgICBfX1JlcXVpcmVkLl9fIFlvdSBtdXN0
        IGltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBhcHBseSB0aGlzIG1peGluLgoK
        ICAgIEF0dGVtcHRzIHRvIGFkZCB0aGUgcGFzc2VkIG9iamVjdCB0byB0aGUg
        cmVjZWl2ZXIgaWYgdGhlIG9iamVjdCBpcyBub3QKICAgIGFscmVhZHkgcHJl
        c2VudCBpbiB0aGUgY29sbGVjdGlvbi4gSWYgdGhlIG9iamVjdCBpcyBwcmVz
        ZW50LCB0aGlzIG1ldGhvZAogICAgaGFzIG5vIGVmZmVjdC4KCiAgICBJZiB0
        aGUgcGFzc2VkIG9iamVjdCBpcyBvZiBhIHR5cGUgbm90IHN1cHBvcnRlZCBi
        eSB0aGUgcmVjZWl2ZXIsCiAgICB0aGVuIHRoaXMgbWV0aG9kIHNob3VsZCBy
        YWlzZSBhbiBleGNlcHRpb24uCgogICAgQG1ldGhvZCBhZGRPYmplY3QKICAg
        IEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBhZGQgdG8g
        dGhlIGVudW1lcmFibGUuCiAgICBAcmV0dXJuIHtPYmplY3R9IHRoZSBwYXNz
        ZWQgb2JqZWN0CiAgKi8KICBhZGRPYmplY3Q6IEVtYmVyLnJlcXVpcmVkKEZ1
        bmN0aW9uKSwKCiAgLyoqCiAgICBBZGRzIGVhY2ggb2JqZWN0IGluIHRoZSBw
        YXNzZWQgZW51bWVyYWJsZSB0byB0aGUgcmVjZWl2ZXIuCgogICAgQG1ldGhv
        ZCBhZGRPYmplY3RzCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9i
        amVjdHMgdGhlIG9iamVjdHMgdG8gYWRkLgogICAgQHJldHVybiB7T2JqZWN0
        fSByZWNlaXZlcgogICovCiAgYWRkT2JqZWN0czogZnVuY3Rpb24ob2JqZWN0
        cykgewogICAgRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXModGhpcyk7CiAg
        ICBmb3JFYWNoKG9iamVjdHMsIGZ1bmN0aW9uKG9iaikgeyB0aGlzLmFkZE9i
        amVjdChvYmopOyB9LCB0aGlzKTsKICAgIEVtYmVyLmVuZFByb3BlcnR5Q2hh
        bmdlcyh0aGlzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAg
        X19SZXF1aXJlZC5fXyBZb3UgbXVzdCBpbXBsZW1lbnQgdGhpcyBtZXRob2Qg
        dG8gYXBwbHkgdGhpcyBtaXhpbi4KCiAgICBBdHRlbXB0cyB0byByZW1vdmUg
        dGhlIHBhc3NlZCBvYmplY3QgZnJvbSB0aGUgcmVjZWl2ZXIgY29sbGVjdGlv
        biBpZiB0aGUKICAgIG9iamVjdCBpcyBwcmVzZW50IGluIHRoZSBjb2xsZWN0
        aW9uLiBJZiB0aGUgb2JqZWN0IGlzIG5vdCBwcmVzZW50LAogICAgdGhpcyBt
        ZXRob2QgaGFzIG5vIGVmZmVjdC4KCiAgICBJZiB0aGUgcGFzc2VkIG9iamVj
        dCBpcyBvZiBhIHR5cGUgbm90IHN1cHBvcnRlZCBieSB0aGUgcmVjZWl2ZXIs
        CiAgICB0aGVuIHRoaXMgbWV0aG9kIHNob3VsZCByYWlzZSBhbiBleGNlcHRp
        b24uCgogICAgQG1ldGhvZCByZW1vdmVPYmplY3QKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byByZW1vdmUgZnJvbSB0aGUgZW51
        bWVyYWJsZS4KICAgIEByZXR1cm4ge09iamVjdH0gdGhlIHBhc3NlZCBvYmpl
        Y3QKICAqLwogIHJlbW92ZU9iamVjdDogRW1iZXIucmVxdWlyZWQoRnVuY3Rp
        b24pLAoKCiAgLyoqCiAgICBSZW1vdmVzIGVhY2ggb2JqZWN0IGluIHRoZSBw
        YXNzZWQgZW51bWVyYWJsZSBmcm9tIHRoZSByZWNlaXZlci4KCiAgICBAbWV0
        aG9kIHJlbW92ZU9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJs
        ZX0gb2JqZWN0cyB0aGUgb2JqZWN0cyB0byByZW1vdmUKICAgIEByZXR1cm4g
        e09iamVjdH0gcmVjZWl2ZXIKICAqLwogIHJlbW92ZU9iamVjdHM6IGZ1bmN0
        aW9uKG9iamVjdHMpIHsKICAgIEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2Vz
        KHRoaXMpOwogICAgZm9yRWFjaChvYmplY3RzLCBmdW5jdGlvbihvYmopIHsg
        dGhpcy5yZW1vdmVPYmplY3Qob2JqKTsgfSwgdGhpcyk7CiAgICBFbWJlci5l
        bmRQcm9wZXJ0eUNoYW5nZXModGhpcyk7CiAgICByZXR1cm4gdGhpczsKICB9
        Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCi8vIC4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4KLy8gQ09OU1RBTlRTCi8vCgp2YXIgT1VUX09GX1JBTkdFX0VYQ0VQVElP
        TiA9ICJJbmRleCBvdXQgb2YgcmFuZ2UiIDsKdmFyIEVNUFRZID0gW107Cgov
        LyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uCi8vIEhFTFBFUlMKLy8KCnZhciBnZXQgPSBFbWJl
        ci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgogIFRoaXMgbWl4aW4gZGVm
        aW5lcyB0aGUgQVBJIGZvciBtb2RpZnlpbmcgYXJyYXktbGlrZSBvYmplY3Rz
        LiBUaGVzZSBtZXRob2RzCiAgY2FuIGJlIGFwcGxpZWQgb25seSB0byBhIGNv
        bGxlY3Rpb24gdGhhdCBrZWVwcyBpdHMgaXRlbXMgaW4gYW4gb3JkZXJlZCBz
        ZXQuCgogIE5vdGUgdGhhdCBhbiBBcnJheSBjYW4gY2hhbmdlIGV2ZW4gaWYg
        aXQgZG9lcyBub3QgaW1wbGVtZW50IHRoaXMgbWl4aW4uCiAgRm9yIGV4YW1w
        bGUsIG9uZSBtaWdodCBpbXBsZW1lbnQgYSBTcGFyc2VBcnJheSB0aGF0IGNh
        bm5vdCBiZSBkaXJlY3RseQogIG1vZGlmaWVkLCBidXQgaWYgaXRzIHVuZGVy
        bHlpbmcgZW51bWVyYWJsZSBjaGFuZ2VzLCBpdCB3aWxsIGNoYW5nZSBhbHNv
        LgoKICBAY2xhc3MgTXV0YWJsZUFycmF5CiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEB1c2VzIEVtYmVyLkFycmF5CiAgQHVzZXMgRW1iZXIuTXV0YWJsZUVudW1l
        cmFibGUKKi8KRW1iZXIuTXV0YWJsZUFycmF5ID0gRW1iZXIuTWl4aW4uY3Jl
        YXRlKEVtYmVyLkFycmF5LCBFbWJlci5NdXRhYmxlRW51bWVyYWJsZSwvKiog
        QHNjb3BlIEVtYmVyLk11dGFibGVBcnJheS5wcm90b3R5cGUgKi8gewoKICAv
        KioKICAgIF9fUmVxdWlyZWQuX18gWW91IG11c3QgaW1wbGVtZW50IHRoaXMg
        bWV0aG9kIHRvIGFwcGx5IHRoaXMgbWl4aW4uCgogICAgVGhpcyBpcyBvbmUg
        b2YgdGhlIHByaW1pdGl2ZXMgeW91IG11c3QgaW1wbGVtZW50IHRvIHN1cHBv
        cnQgYEVtYmVyLkFycmF5YC4KICAgIFlvdSBzaG91bGQgcmVwbGFjZSBhbXQg
        b2JqZWN0cyBzdGFydGVkIGF0IGlkeCB3aXRoIHRoZSBvYmplY3RzIGluIHRo
        ZQogICAgcGFzc2VkIGFycmF5LiBZb3Ugc2hvdWxkIGFsc28gY2FsbCBgdGhp
        cy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5nZSgpYAoKICAgIEBtZXRob2Qg
        cmVwbGFjZQogICAgQHBhcmFtIHtOdW1iZXJ9IGlkeCBTdGFydGluZyBpbmRl
        eCBpbiB0aGUgYXJyYXkgdG8gcmVwbGFjZS4gSWYKICAgICAgaWR4ID49IGxl
        bmd0aCwgdGhlbiBhcHBlbmQgdG8gdGhlIGVuZCBvZiB0aGUgYXJyYXkuCiAg
        ICBAcGFyYW0ge051bWJlcn0gYW10IE51bWJlciBvZiBlbGVtZW50cyB0aGF0
        IHNob3VsZCBiZSByZW1vdmVkIGZyb20KICAgICAgdGhlIGFycmF5LCBzdGFy
        dGluZyBhdCAqaWR4Ki4KICAgIEBwYXJhbSB7QXJyYXl9IG9iamVjdHMgQW4g
        YXJyYXkgb2YgemVybyBvciBtb3JlIG9iamVjdHMgdGhhdCBzaG91bGQgYmUK
        ICAgICAgaW5zZXJ0ZWQgaW50byB0aGUgYXJyYXkgYXQgKmlkeCoKICAqLwog
        IHJlcGxhY2U6IEVtYmVyLnJlcXVpcmVkKCksCgogIC8qKgogICAgUmVtb3Zl
        IGFsbCBlbGVtZW50cyBmcm9tIHNlbGYuIFRoaXMgaXMgdXNlZnVsIGlmIHlv
        dQogICAgd2FudCB0byByZXVzZSBhbiBleGlzdGluZyBhcnJheSB3aXRob3V0
        IGhhdmluZyB0byByZWNyZWF0ZSBpdC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICB2YXIgY29sb3JzID0gWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAg
        Y29sb3IubGVuZ3RoKCk7ICAgLy8gIDMKICAgIGNvbG9ycy5jbGVhcigpOyAg
        IC8vICBbXQogICAgY29sb3JzLmxlbmd0aCgpOyAgLy8gIDAKICAgIGBgYAoK
        ICAgIEBtZXRob2QgY2xlYXIKICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSBB
        biBlbXB0eSBBcnJheS4KICAqLwogIGNsZWFyOiBmdW5jdGlvbiAoKSB7CiAg
        ICB2YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsKICAgIGlmIChsZW4g
        PT09IDApIHJldHVybiB0aGlzOwogICAgdGhpcy5yZXBsYWNlKDAsIGxlbiwg
        RU1QVFkpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBUaGlz
        IHdpbGwgdXNlIHRoZSBwcmltaXRpdmUgYHJlcGxhY2UoKWAgbWV0aG9kIHRv
        IGluc2VydCBhbiBvYmplY3QgYXQgdGhlCiAgICBzcGVjaWZpZWQgaW5kZXgu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwg
        ImdyZWVuIiwgImJsdWUiXTsKICAgIGNvbG9ycy5pbnNlcnRBdCgyLCAieWVs
        bG93Iik7ICAvLyBbInJlZCIsICJncmVlbiIsICJ5ZWxsb3ciLCAiYmx1ZSJd
        CiAgICBjb2xvcnMuaW5zZXJ0QXQoNSwgIm9yYW5nZSIpOyAgLy8gRXJyb3I6
        IEluZGV4IG91dCBvZiByYW5nZQogICAgYGBgCgogICAgQG1ldGhvZCBpbnNl
        cnRBdAogICAgQHBhcmFtIHtOdW1iZXJ9IGlkeCBpbmRleCBvZiBpbnNlcnQg
        dGhlIG9iamVjdCBhdC4KICAgIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Qgb2Jq
        ZWN0IHRvIGluc2VydAogICAgQHJldHVybiB0aGlzCiAgKi8KICBpbnNlcnRB
        dDogZnVuY3Rpb24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChpZHggPiBnZXQo
        dGhpcywgJ2xlbmd0aCcpKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09G
        X1JBTkdFX0VYQ0VQVElPTikgOwogICAgdGhpcy5yZXBsYWNlKGlkeCwgMCwg
        W29iamVjdF0pIDsKICAgIHJldHVybiB0aGlzIDsKICB9LAoKICAvKioKICAg
        IFJlbW92ZSBhbiBvYmplY3QgYXQgdGhlIHNwZWNpZmllZCBpbmRleCB1c2lu
        ZyB0aGUgYHJlcGxhY2UoKWAgcHJpbWl0aXZlCiAgICBtZXRob2QuIFlvdSBj
        YW4gcGFzcyBlaXRoZXIgYSBzaW5nbGUgaW5kZXgsIG9yIGEgc3RhcnQgYW5k
        IGEgbGVuZ3RoLgoKICAgIElmIHlvdSBwYXNzIGEgc3RhcnQgYW5kIGxlbmd0
        aCB0aGF0IGlzIGJleW9uZCB0aGUKICAgIGxlbmd0aCB0aGlzIG1ldGhvZCB3
        aWxsIHRocm93IGFuIGBPVVRfT0ZfUkFOR0VfRVhDRVBUSU9OYAoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIs
        ICJibHVlIiwgInllbGxvdyIsICJvcmFuZ2UiXTsKICAgIGNvbG9ycy5yZW1v
        dmVBdCgwKTsgICAgIC8vIFsiZ3JlZW4iLCAiYmx1ZSIsICJ5ZWxsb3ciLCAi
        b3JhbmdlIl0KICAgIGNvbG9ycy5yZW1vdmVBdCgyLCAyKTsgIC8vIFsiZ3Jl
        ZW4iLCAiYmx1ZSJdCiAgICBjb2xvcnMucmVtb3ZlQXQoNCwgMik7ICAvLyBF
        cnJvcjogSW5kZXggb3V0IG9mIHJhbmdlCiAgICBgYGAKCiAgICBAbWV0aG9k
        IHJlbW92ZUF0CiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgaW5kZXgsIHN0
        YXJ0IG9mIHJhbmdlCiAgICBAcGFyYW0ge051bWJlcn0gbGVuIGxlbmd0aCBv
        ZiBwYXNzaW5nIHJhbmdlCiAgICBAcmV0dXJuIHtPYmplY3R9IHJlY2VpdmVy
        CiAgKi8KICByZW1vdmVBdDogZnVuY3Rpb24oc3RhcnQsIGxlbikgewogICAg
        aWYgKCdudW1iZXInID09PSB0eXBlb2Ygc3RhcnQpIHsKCiAgICAgIGlmICgo
        c3RhcnQgPCAwKSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICdsZW5ndGgnKSkp
        IHsKICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09GX1JBTkdF
        X0VYQ0VQVElPTik7CiAgICAgIH0KCiAgICAgIC8vIGZhc3QgY2FzZQogICAg
        ICBpZiAobGVuID09PSB1bmRlZmluZWQpIGxlbiA9IDE7CiAgICAgIHRoaXMu
        cmVwbGFjZShzdGFydCwgbGVuLCBFTVBUWSk7CiAgICB9CgogICAgcmV0dXJu
        IHRoaXMgOwogIH0sCgogIC8qKgogICAgUHVzaCB0aGUgb2JqZWN0IG9udG8g
        dGhlIGVuZCBvZiB0aGUgYXJyYXkuIFdvcmtzIGp1c3QgbGlrZSBgcHVzaCgp
        YCBidXQgaXQKICAgIGlzIEtWTy1jb21wbGlhbnQuCgogICAgYGBgamF2YXNj
        cmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIiwgImJsdWUi
        XTsKICAgIGNvbG9ycy5wdXNoT2JqZWN0KCJibGFjayIpOyAgICAgICAgICAg
        ICAgIC8vIFsicmVkIiwgImdyZWVuIiwgImJsdWUiLCAiYmxhY2siXQogICAg
        Y29sb3JzLnB1c2hPYmplY3QoWyJ5ZWxsb3ciLCAib3JhbmdlIl0pOyAgLy8g
        WyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSIsICJibGFjayIsIFsieWVsbG93Iiwg
        Im9yYW5nZSJdXQogICAgYGBgCgogICAgQG1ldGhvZCBwdXNoT2JqZWN0CiAg
        ICBAcGFyYW0geyp9IG9iaiBvYmplY3QgdG8gcHVzaAogICAgQHJldHVybiB7
        Kn0gdGhlIHNhbWUgb2JqIHBhc3NlZCBhcyBwYXJhbQogICovCiAgcHVzaE9i
        amVjdDogZnVuY3Rpb24ob2JqKSB7CiAgICB0aGlzLmluc2VydEF0KGdldCh0
        aGlzLCAnbGVuZ3RoJyksIG9iaikgOwogICAgcmV0dXJuIG9iaiA7CiAgfSwK
        CiAgLyoqCiAgICBBZGQgdGhlIG9iamVjdHMgaW4gdGhlIHBhc3NlZCBudW1l
        cmFibGUgdG8gdGhlIGVuZCBvZiB0aGUgYXJyYXkuIERlZmVycwogICAgbm90
        aWZ5aW5nIG9ic2VydmVycyBvZiB0aGUgY2hhbmdlIHVudGlsIGFsbCBvYmpl
        Y3RzIGFyZSBhZGRlZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29s
        b3JzID0gWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAgY29sb3JzLnB1
        c2hPYmplY3RzKFsiYmxhY2siXSk7ICAgICAgICAgICAgICAgLy8gWyJyZWQi
        LCAiZ3JlZW4iLCAiYmx1ZSIsICJibGFjayJdCiAgICBjb2xvcnMucHVzaE9i
        amVjdHMoWyJ5ZWxsb3ciLCAib3JhbmdlIl0pOyAgLy8gWyJyZWQiLCAiZ3Jl
        ZW4iLCAiYmx1ZSIsICJibGFjayIsICJ5ZWxsb3ciLCAib3JhbmdlIl0KICAg
        IGBgYAoKICAgIEBtZXRob2QgcHVzaE9iamVjdHMKICAgIEBwYXJhbSB7RW1i
        ZXIuRW51bWVyYWJsZX0gb2JqZWN0cyB0aGUgb2JqZWN0cyB0byBhZGQKICAg
        IEByZXR1cm4ge0VtYmVyLkFycmF5fSByZWNlaXZlcgogICovCiAgcHVzaE9i
        amVjdHM6IGZ1bmN0aW9uKG9iamVjdHMpIHsKICAgIGlmICghKEVtYmVyLkVu
        dW1lcmFibGUuZGV0ZWN0KG9iamVjdHMpIHx8IEVtYmVyLmlzQXJyYXkob2Jq
        ZWN0cykpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk11c3QgcGFz
        cyBFbWJlci5FbnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVBcnJheSNwdXNo
        T2JqZWN0cyIpOwogICAgfQogICAgdGhpcy5yZXBsYWNlKGdldCh0aGlzLCAn
        bGVuZ3RoJyksIDAsIG9iamVjdHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwK
        CiAgLyoqCiAgICBQb3Agb2JqZWN0IGZyb20gYXJyYXkgb3IgbmlsIGlmIG5v
        bmUgYXJlIGxlZnQuIFdvcmtzIGp1c3QgbGlrZSBgcG9wKClgIGJ1dAogICAg
        aXQgaXMgS1ZPLWNvbXBsaWFudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2
        YXIgY29sb3JzID0gWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAgY29s
        b3JzLnBvcE9iamVjdCgpOyAgIC8vICJibHVlIgogICAgY29uc29sZS5sb2co
        Y29sb3JzKTsgIC8vIFsicmVkIiwgImdyZWVuIl0KICAgIGBgYAoKICAgIEBt
        ZXRob2QgcG9wT2JqZWN0CiAgICBAcmV0dXJuIG9iamVjdAogICovCiAgcG9w
        T2JqZWN0OiBmdW5jdGlvbigpIHsKICAgIHZhciBsZW4gPSBnZXQodGhpcywg
        J2xlbmd0aCcpIDsKICAgIGlmIChsZW4gPT09IDApIHJldHVybiBudWxsIDsK
        CiAgICB2YXIgcmV0ID0gdGhpcy5vYmplY3RBdChsZW4tMSkgOwogICAgdGhp
        cy5yZW1vdmVBdChsZW4tMSwgMSkgOwogICAgcmV0dXJuIHJldCA7CiAgfSwK
        CiAgLyoqCiAgICBTaGlmdCBhbiBvYmplY3QgZnJvbSBzdGFydCBvZiBhcnJh
        eSBvciBuaWwgaWYgbm9uZSBhcmUgbGVmdC4gV29ya3MganVzdAogICAgbGlr
        ZSBgc2hpZnQoKWAgYnV0IGl0IGlzIEtWTy1jb21wbGlhbnQuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIiwg
        ImJsdWUiXTsKICAgIGNvbG9ycy5zaGlmdE9iamVjdCgpOyAgLy8gInJlZCIK
        ICAgIGNvbnNvbGUubG9nKGNvbG9ycyk7ICAgLy8gWyJncmVlbiIsICJibHVl
        Il0KICAgIGBgYAoKICAgIEBtZXRob2Qgc2hpZnRPYmplY3QKICAgIEByZXR1
        cm4gb2JqZWN0CiAgKi8KICBzaGlmdE9iamVjdDogZnVuY3Rpb24oKSB7CiAg
        ICBpZiAoZ2V0KHRoaXMsICdsZW5ndGgnKSA9PT0gMCkgcmV0dXJuIG51bGwg
        OwogICAgdmFyIHJldCA9IHRoaXMub2JqZWN0QXQoMCkgOwogICAgdGhpcy5y
        ZW1vdmVBdCgwKSA7CiAgICByZXR1cm4gcmV0IDsKICB9LAoKICAvKioKICAg
        IFVuc2hpZnQgYW4gb2JqZWN0IHRvIHN0YXJ0IG9mIGFycmF5LiBXb3JrcyBq
        dXN0IGxpa2UgYHVuc2hpZnQoKWAgYnV0IGl0IGlzCiAgICBLVk8tY29tcGxp
        YW50LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJl
        ZCIsICJncmVlbiIsICJibHVlIl07CiAgICBjb2xvcnMudW5zaGlmdE9iamVj
        dCgieWVsbG93Iik7ICAgICAgICAgICAgIC8vIFsieWVsbG93IiwgInJlZCIs
        ICJncmVlbiIsICJibHVlIl0KICAgIGNvbG9ycy51bnNoaWZ0T2JqZWN0KFsi
        YmxhY2siLCAid2hpdGUiXSk7ICAgLy8gW1siYmxhY2siLCAid2hpdGUiXSwg
        InllbGxvdyIsICJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdCiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHVuc2hpZnRPYmplY3QKICAgIEBwYXJhbSB7Kn0gb2JqIG9i
        amVjdCB0byB1bnNoaWZ0CiAgICBAcmV0dXJuIHsqfSB0aGUgc2FtZSBvYmog
        cGFzc2VkIGFzIHBhcmFtCiAgKi8KICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlv
        bihvYmopIHsKICAgIHRoaXMuaW5zZXJ0QXQoMCwgb2JqKSA7CiAgICByZXR1
        cm4gb2JqIDsKICB9LAoKICAvKioKICAgIEFkZHMgdGhlIG5hbWVkIG9iamVj
        dHMgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXkuIERlZmVycyBub3Rp
        ZnlpbmcKICAgIG9ic2VydmVycyB1bnRpbCBhbGwgb2JqZWN0cyBoYXZlIGJl
        ZW4gYWRkZWQuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9
        IFsicmVkIiwgImdyZWVuIiwgImJsdWUiXTsKICAgIGNvbG9ycy51bnNoaWZ0
        T2JqZWN0cyhbImJsYWNrIiwgIndoaXRlIl0pOyAgIC8vIFsiYmxhY2siLCAi
        d2hpdGUiLCAicmVkIiwgImdyZWVuIiwgImJsdWUiXQogICAgY29sb3JzLnVu
        c2hpZnRPYmplY3RzKCJ5ZWxsb3ciKTsgICAgICAgICAgICAgLy8gVHlwZSBF
        cnJvcjogJ3VuZGVmaW5lZCcgaXMgbm90IGEgZnVuY3Rpb24KICAgIGBgYAoK
        ICAgIEBtZXRob2QgdW5zaGlmdE9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIu
        RW51bWVyYWJsZX0gb2JqZWN0cyB0aGUgb2JqZWN0cyB0byBhZGQKICAgIEBy
        ZXR1cm4ge0VtYmVyLkFycmF5fSByZWNlaXZlcgogICovCiAgdW5zaGlmdE9i
        amVjdHM6IGZ1bmN0aW9uKG9iamVjdHMpIHsKICAgIHRoaXMucmVwbGFjZSgw
        LCAwLCBvYmplY3RzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgog
        ICAgUmV2ZXJzZSBvYmplY3RzIGluIHRoZSBhcnJheS4gV29ya3MganVzdCBs
        aWtlIGByZXZlcnNlKClgIGJ1dCBpdCBpcwogICAgS1ZPLWNvbXBsaWFudC4K
        CiAgICBAbWV0aG9kIHJldmVyc2VPYmplY3RzCiAgICBAcmV0dXJuIHtFbWJl
        ci5BcnJheX0gcmVjZWl2ZXIKICAgKi8KICByZXZlcnNlT2JqZWN0czogZnVu
        Y3Rpb24oKSB7CiAgICB2YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsK
        ICAgIGlmIChsZW4gPT09IDApIHJldHVybiB0aGlzOwogICAgdmFyIG9iamVj
        dHMgPSB0aGlzLnRvQXJyYXkoKS5yZXZlcnNlKCk7CiAgICB0aGlzLnJlcGxh
        Y2UoMCwgbGVuLCBvYmplY3RzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgog
        IC8qKgogICAgUmVwbGFjZSBhbGwgdGhlIHRoZSByZWNlaXZlcidzIGNvbnRl
        bnQgd2l0aCBjb250ZW50IG9mIHRoZSBhcmd1bWVudC4KICAgIElmIGFyZ3Vt
        ZW50IGlzIGFuIGVtcHR5IGFycmF5IHJlY2VpdmVyIHdpbGwgYmUgY2xlYXJl
        ZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJyZWQi
        LCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAgY29sb3JzLnNldE9iamVjdHMoWyJi
        bGFjayIsICJ3aGl0ZSJdKTsgIC8vIFsiYmxhY2siLCAid2hpdGUiXQogICAg
        Y29sb3JzLnNldE9iamVjdHMoW10pOyAgICAgICAgICAgICAgICAgIC8vIFtd
        CiAgICBgYGAKCiAgICBAbWV0aG9kIHNldE9iamVjdHMKICAgIEBwYXJhbSB7
        RW1iZXIuQXJyYXl9IG9iamVjdHMgYXJyYXkgd2hvc2UgY29udGVudCB3aWxs
        IGJlIHVzZWQgZm9yIHJlcGxhY2luZwogICAgICAgIHRoZSBjb250ZW50IG9m
        IHRoZSByZWNlaXZlcgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IHJlY2Vp
        dmVyIHdpdGggdGhlIG5ldyBjb250ZW50CiAgICovCiAgc2V0T2JqZWN0czog
        ZnVuY3Rpb24ob2JqZWN0cykgewogICAgaWYgKG9iamVjdHMubGVuZ3RoID09
        PSAwKSByZXR1cm4gdGhpcy5jbGVhcigpOwoKICAgIHZhciBsZW4gPSBnZXQo
        dGhpcywgJ2xlbmd0aCcpOwogICAgdGhpcy5yZXBsYWNlKDAsIGxlbiwgb2Jq
        ZWN0cyk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvLyAuLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uCiAgLy8gSU1QTEVNRU5UIEVtYmVyLk11dGFibGVFbnVtZXJhYmxlCiAg
        Ly8KCiAgcmVtb3ZlT2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIHZhciBs
        b2MgPSBnZXQodGhpcywgJ2xlbmd0aCcpIHx8IDA7CiAgICB3aGlsZSgtLWxv
        YyA+PSAwKSB7CiAgICAgIHZhciBjdXJPYmplY3QgPSB0aGlzLm9iamVjdEF0
        KGxvYykgOwogICAgICBpZiAoY3VyT2JqZWN0ID09PSBvYmopIHRoaXMucmVt
        b3ZlQXQobG9jKSA7CiAgICB9CiAgICByZXR1cm4gdGhpcyA7CiAgfSwKCiAg
        YWRkT2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIGlmICghdGhpcy5jb250
        YWlucyhvYmopKSB0aGlzLnB1c2hPYmplY3Qob2JqKTsKICAgIHJldHVybiB0
        aGlzIDsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIg
        Z2V0ID0gRW1iZXIuZ2V0LAogICAgc2V0ID0gRW1iZXIuc2V0LAogICAgc2xp
        Y2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBnZXRQcm9wZXJ0aWVz
        ID0gRW1iZXIuZ2V0UHJvcGVydGllczsKCi8qKgogICMjIE92ZXJ2aWV3Cgog
        IFRoaXMgbWl4aW4gcHJvdmlkZXMgcHJvcGVydGllcyBhbmQgcHJvcGVydHkg
        b2JzZXJ2aW5nIGZ1bmN0aW9uYWxpdHksIGNvcmUKICBmZWF0dXJlcyBvZiB0
        aGUgRW1iZXIgb2JqZWN0IG1vZGVsLgoKICBQcm9wZXJ0aWVzIGFuZCBvYnNl
        cnZlcnMgYWxsb3cgb25lIG9iamVjdCB0byBvYnNlcnZlIGNoYW5nZXMgdG8g
        YQogIHByb3BlcnR5IG9uIGFub3RoZXIgb2JqZWN0LiBUaGlzIGlzIG9uZSBv
        ZiB0aGUgZnVuZGFtZW50YWwgd2F5cyB0aGF0CiAgbW9kZWxzLCBjb250cm9s
        bGVycyBhbmQgdmlld3MgY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGlu
        IGFuIEVtYmVyCiAgYXBwbGljYXRpb24uCgogIEFueSBvYmplY3QgdGhhdCBo
        YXMgdGhpcyBtaXhpbiBhcHBsaWVkIGNhbiBiZSB1c2VkIGluIG9ic2VydmVy
        CiAgb3BlcmF0aW9ucy4gVGhhdCBpbmNsdWRlcyBgRW1iZXIuT2JqZWN0YCBh
        bmQgbW9zdCBvYmplY3RzIHlvdSB3aWxsCiAgaW50ZXJhY3Qgd2l0aCBhcyB5
        b3Ugd3JpdGUgeW91ciBFbWJlciBhcHBsaWNhdGlvbi4KCiAgTm90ZSB0aGF0
        IHlvdSB3aWxsIG5vdCBnZW5lcmFsbHkgYXBwbHkgdGhpcyBtaXhpbiB0byBj
        bGFzc2VzIHlvdXJzZWxmLAogIGJ1dCB5b3Ugd2lsbCB1c2UgdGhlIGZlYXR1
        cmVzIHByb3ZpZGVkIGJ5IHRoaXMgbW9kdWxlIGZyZXF1ZW50bHksIHNvIGl0
        CiAgaXMgaW1wb3J0YW50IHRvIHVuZGVyc3RhbmQgaG93IHRvIHVzZSBpdC4K
        CiAgIyMgVXNpbmcgYGdldCgpYCBhbmQgYHNldCgpYAoKICBCZWNhdXNlIG9m
        IEVtYmVyJ3Mgc3VwcG9ydCBmb3IgYmluZGluZ3MgYW5kIG9ic2VydmVycywg
        eW91IHdpbGwgYWx3YXlzCiAgYWNjZXNzIHByb3BlcnRpZXMgdXNpbmcgdGhl
        IGdldCBtZXRob2QsIGFuZCBzZXQgcHJvcGVydGllcyB1c2luZyB0aGUKICBz
        ZXQgbWV0aG9kLiBUaGlzIGFsbG93cyB0aGUgb2JzZXJ2aW5nIG9iamVjdHMg
        dG8gYmUgbm90aWZpZWQgYW5kCiAgY29tcHV0ZWQgcHJvcGVydGllcyB0byBi
        ZSBoYW5kbGVkIHByb3Blcmx5LgoKICBNb3JlIGRvY3VtZW50YXRpb24gYWJv
        dXQgYGdldGAgYW5kIGBzZXRgIGFyZSBiZWxvdy4KCiAgIyMgT2JzZXJ2aW5n
        IFByb3BlcnR5IENoYW5nZXMKCiAgWW91IHR5cGljYWxseSBvYnNlcnZlIHBy
        b3BlcnR5IGNoYW5nZXMgc2ltcGx5IGJ5IGFkZGluZyB0aGUgYG9ic2VydmVz
        YAogIGNhbGwgdG8gdGhlIGVuZCBvZiB5b3VyIG1ldGhvZCBkZWNsYXJhdGlv
        bnMgaW4gY2xhc3NlcyB0aGF0IHlvdSB3cml0ZS4KICBGb3IgZXhhbXBsZToK
        CiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLk9iamVjdC5leHRlbmQoewogICAg
        dmFsdWVPYnNlcnZlcjogZnVuY3Rpb24oKSB7CiAgICAgIC8vIEV4ZWN1dGVz
        IHdoZW5ldmVyIHRoZSAidmFsdWUiIHByb3BlcnR5IGNoYW5nZXMKICAgIH0u
        b2JzZXJ2ZXMoJ3ZhbHVlJykKICB9KTsKICBgYGAKCiAgQWx0aG91Z2ggdGhp
        cyBpcyB0aGUgbW9zdCBjb21tb24gd2F5IHRvIGFkZCBhbiBvYnNlcnZlciwg
        dGhpcyBjYXBhYmlsaXR5CiAgaXMgYWN0dWFsbHkgYnVpbHQgaW50byB0aGUg
        YEVtYmVyLk9iamVjdGAgY2xhc3Mgb24gdG9wIG9mIHR3byBtZXRob2RzCiAg
        ZGVmaW5lZCBpbiB0aGlzIG1peGluOiBgYWRkT2JzZXJ2ZXJgIGFuZCBgcmVt
        b3ZlT2JzZXJ2ZXJgLiBZb3UgY2FuIHVzZQogIHRoZXNlIHR3byBtZXRob2Rz
        IHRvIGFkZCBhbmQgcmVtb3ZlIG9ic2VydmVycyB5b3Vyc2VsZiBpZiB5b3Ug
        bmVlZCB0bwogIGRvIHNvIGF0IHJ1bnRpbWUuCgogIFRvIGFkZCBhbiBvYnNl
        cnZlciBmb3IgYSBwcm9wZXJ0eSwgY2FsbDoKCiAgYGBgamF2YXNjcmlwdAog
        IG9iamVjdC5hZGRPYnNlcnZlcigncHJvcGVydHlLZXknLCB0YXJnZXRPYmpl
        Y3QsIHRhcmdldEFjdGlvbikKICBgYGAKCiAgVGhpcyB3aWxsIGNhbGwgdGhl
        IGB0YXJnZXRBY3Rpb25gIG1ldGhvZCBvbiB0aGUgYHRhcmdldE9iamVjdGAg
        d2hlbmV2ZXIKICB0aGUgdmFsdWUgb2YgdGhlIGBwcm9wZXJ0eUtleWAgY2hh
        bmdlcy4KCiAgTm90ZSB0aGF0IGlmIGBwcm9wZXJ0eUtleWAgaXMgYSBjb21w
        dXRlZCBwcm9wZXJ0eSwgdGhlIG9ic2VydmVyIHdpbGwgYmUKICBjYWxsZWQg
        d2hlbiBhbnkgb2YgdGhlIHByb3BlcnR5IGRlcGVuZGVuY2llcyBhcmUgY2hh
        bmdlZCwgZXZlbiBpZiB0aGUKICByZXN1bHRpbmcgdmFsdWUgb2YgdGhlIGNv
        bXB1dGVkIHByb3BlcnR5IGlzIHVuY2hhbmdlZC4gVGhpcyBpcyBuZWNlc3Nh
        cnkKICBiZWNhdXNlIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIG5vdCBjb21w
        dXRlZCB1bnRpbCBgZ2V0YCBpcyBjYWxsZWQuCgogIEBjbGFzcyBPYnNlcnZh
        YmxlCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5PYnNlcnZhYmxlID0g
        RW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBSZXRyaWV2ZXMgdGhl
        IHZhbHVlIG9mIGEgcHJvcGVydHkgZnJvbSB0aGUgb2JqZWN0LgoKICAgIFRo
        aXMgbWV0aG9kIGlzIHVzdWFsbHkgc2ltaWxhciB0byB1c2luZyBgb2JqZWN0
        W2tleU5hbWVdYCBvciBgb2JqZWN0LmtleU5hbWVgLAogICAgaG93ZXZlciBp
        dCBzdXBwb3J0cyBib3RoIGNvbXB1dGVkIHByb3BlcnRpZXMgYW5kIHRoZSB1
        bmtub3duUHJvcGVydHkKICAgIGhhbmRsZXIuCgogICAgQmVjYXVzZSBgZ2V0
        YCB1bmlmaWVzIHRoZSBzeW50YXggZm9yIGFjY2Vzc2luZyBhbGwgdGhlc2Ug
        a2luZHMKICAgIG9mIHByb3BlcnRpZXMsIGl0IGNhbiBtYWtlIG1hbnkgcmVm
        YWN0b3JpbmdzIGVhc2llciwgc3VjaCBhcyByZXBsYWNpbmcgYQogICAgc2lt
        cGxlIHByb3BlcnR5IHdpdGggYSBjb21wdXRlZCBwcm9wZXJ0eSwgb3Igdmlj
        ZSB2ZXJzYS4KCiAgICAjIyMgQ29tcHV0ZWQgUHJvcGVydGllcwoKICAgIENv
        bXB1dGVkIHByb3BlcnRpZXMgYXJlIG1ldGhvZHMgZGVmaW5lZCB3aXRoIHRo
        ZSBgcHJvcGVydHlgIG1vZGlmaWVyCiAgICBkZWNsYXJlZCBhdCB0aGUgZW5k
        LCBzdWNoIGFzOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bGxOYW1lOiBm
        dW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdmaXJzdE5hbWUn
        KSArICcgJyArIHRoaXMuZ2V0KCdsYXN0TmFtZScpOwogICAgfS5wcm9wZXJ0
        eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICAgIGBgYAoKICAgIFdoZW4g
        eW91IGNhbGwgYGdldGAgb24gYSBjb21wdXRlZCBwcm9wZXJ0eSwgdGhlIGZ1
        bmN0aW9uIHdpbGwgYmUKICAgIGNhbGxlZCBhbmQgdGhlIHJldHVybiB2YWx1
        ZSB3aWxsIGJlIHJldHVybmVkIGluc3RlYWQgb2YgdGhlIGZ1bmN0aW9uCiAg
        ICBpdHNlbGYuCgogICAgIyMjIFVua25vd24gUHJvcGVydGllcwoKICAgIExp
        a2V3aXNlLCBpZiB5b3UgdHJ5IHRvIGNhbGwgYGdldGAgb24gYSBwcm9wZXJ0
        eSB3aG9zZSB2YWx1ZSBpcwogICAgYHVuZGVmaW5lZGAsIHRoZSBgdW5rbm93
        blByb3BlcnR5KClgIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBvbiB0aGUgb2Jq
        ZWN0LgogICAgSWYgdGhpcyBtZXRob2QgcmV0dXJucyBhbnkgdmFsdWUgb3Ro
        ZXIgdGhhbiBgdW5kZWZpbmVkYCwgaXQgd2lsbCBiZSByZXR1cm5lZAogICAg
        aW5zdGVhZC4gVGhpcyBhbGxvd3MgeW91IHRvIGltcGxlbWVudCAidmlydHVh
        bCIgcHJvcGVydGllcyB0aGF0IGFyZQogICAgbm90IGRlZmluZWQgdXBmcm9u
        dC4KCiAgICBAbWV0aG9kIGdldAogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5h
        bWUgVGhlIHByb3BlcnR5IHRvIHJldHJpZXZlCiAgICBAcmV0dXJuIHtPYmpl
        Y3R9IFRoZSBwcm9wZXJ0eSB2YWx1ZSBvciB1bmRlZmluZWQuCiAgKi8KICBn
        ZXQ6IGZ1bmN0aW9uKGtleU5hbWUpIHsKICAgIHJldHVybiBnZXQodGhpcywg
        a2V5TmFtZSk7CiAgfSwKCiAgLyoqCiAgICBUbyBnZXQgbXVsdGlwbGUgcHJv
        cGVydGllcyBhdCBvbmNlLCBjYWxsIGBnZXRQcm9wZXJ0aWVzYAogICAgd2l0
        aCBhIGxpc3Qgb2Ygc3RyaW5ncyBvciBhbiBhcnJheToKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICByZWNvcmQuZ2V0UHJvcGVydGllcygnZmlyc3ROYW1lJywg
        J2xhc3ROYW1lJywgJ3ppcENvZGUnKTsgIC8vIHsgZmlyc3ROYW1lOiAnSm9o
        bicsIGxhc3ROYW1lOiAnRG9lJywgemlwQ29kZTogJzEwMDExJyB9CiAgICBg
        YGAKCiAgICBpcyBlcXVpdmFsZW50IHRvOgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIHJlY29yZC5nZXRQcm9wZXJ0aWVzKFsnZmlyc3ROYW1lJywgJ2xhc3RO
        YW1lJywgJ3ppcENvZGUnXSk7ICAvLyB7IGZpcnN0TmFtZTogJ0pvaG4nLCBs
        YXN0TmFtZTogJ0RvZScsIHppcENvZGU6ICcxMDAxMScgfQogICAgYGBgCgog
        ICAgQG1ldGhvZCBnZXRQcm9wZXJ0aWVzCiAgICBAcGFyYW0ge1N0cmluZy4u
        LnxBcnJheX0gbGlzdCBvZiBrZXlzIHRvIGdldAogICAgQHJldHVybiB7SGFz
        aH0KICAqLwogIGdldFByb3BlcnRpZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0
        dXJuIGdldFByb3BlcnRpZXMuYXBwbHkobnVsbCwgW3RoaXNdLmNvbmNhdChz
        bGljZS5jYWxsKGFyZ3VtZW50cykpKTsKICB9LAoKICAvKioKICAgIFNldHMg
        dGhlIHByb3ZpZGVkIGtleSBvciBwYXRoIHRvIHRoZSB2YWx1ZS4KCiAgICBU
        aGlzIG1ldGhvZCBpcyBnZW5lcmFsbHkgdmVyeSBzaW1pbGFyIHRvIGNhbGxp
        bmcgYG9iamVjdFtrZXldID0gdmFsdWVgIG9yCiAgICBgb2JqZWN0LmtleSA9
        IHZhbHVlYCwgZXhjZXB0IHRoYXQgaXQgcHJvdmlkZXMgc3VwcG9ydCBmb3Ig
        Y29tcHV0ZWQKICAgIHByb3BlcnRpZXMsIHRoZSBgc2V0VW5rbm93blByb3Bl
        cnR5KClgIG1ldGhvZCBhbmQgcHJvcGVydHkgb2JzZXJ2ZXJzLgoKICAgICMj
        IyBDb21wdXRlZCBQcm9wZXJ0aWVzCgogICAgSWYgeW91IHRyeSB0byBzZXQg
        YSB2YWx1ZSBvbiBhIGtleSB0aGF0IGhhcyBhIGNvbXB1dGVkIHByb3BlcnR5
        IGhhbmRsZXIKICAgIGRlZmluZWQgKHNlZSB0aGUgYGdldCgpYCBtZXRob2Qg
        Zm9yIGFuIGV4YW1wbGUpLCB0aGVuIGBzZXQoKWAgd2lsbCBjYWxsCiAgICB0
        aGF0IG1ldGhvZCwgcGFzc2luZyBib3RoIHRoZSB2YWx1ZSBhbmQga2V5IGlu
        c3RlYWQgb2Ygc2ltcGx5IGNoYW5naW5nCiAgICB0aGUgdmFsdWUgaXRzZWxm
        LiBUaGlzIGlzIHVzZWZ1bCBmb3IgdGhvc2UgdGltZXMgd2hlbiB5b3UgbmVl
        ZCB0bwogICAgaW1wbGVtZW50IGEgcHJvcGVydHkgdGhhdCBpcyBjb21wb3Nl
        ZCBvZiBvbmUgb3IgbW9yZSBtZW1iZXIKICAgIHByb3BlcnRpZXMuCgogICAg
        IyMjIFVua25vd24gUHJvcGVydGllcwoKICAgIElmIHlvdSB0cnkgdG8gc2V0
        IGEgdmFsdWUgb24gYSBrZXkgdGhhdCBpcyB1bmRlZmluZWQgaW4gdGhlIHRh
        cmdldAogICAgb2JqZWN0LCB0aGVuIHRoZSBgc2V0VW5rbm93blByb3BlcnR5
        KClgIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgaW5zdGVhZC4gVGhpcwogICAg
        Z2l2ZXMgeW91IGFuIG9wcG9ydHVuaXR5IHRvIGltcGxlbWVudCBjb21wbGV4
        ICJ2aXJ0dWFsIiBwcm9wZXJ0aWVzIHRoYXQKICAgIGFyZSBub3QgcHJlZGVm
        aW5lZCBvbiB0aGUgb2JqZWN0LiBJZiBgc2V0VW5rbm93blByb3BlcnR5KClg
        IHJldHVybnMKICAgIHVuZGVmaW5lZCwgdGhlbiBgc2V0KClgIHdpbGwgc2lt
        cGx5IHNldCB0aGUgdmFsdWUgb24gdGhlIG9iamVjdC4KCiAgICAjIyMgUHJv
        cGVydHkgT2JzZXJ2ZXJzCgogICAgSW4gYWRkaXRpb24gdG8gY2hhbmdpbmcg
        dGhlIHByb3BlcnR5LCBgc2V0KClgIHdpbGwgYWxzbyByZWdpc3RlciBhIHBy
        b3BlcnR5CiAgICBjaGFuZ2Ugd2l0aCB0aGUgb2JqZWN0LiBVbmxlc3MgeW91
        IGhhdmUgcGxhY2VkIHRoaXMgY2FsbCBpbnNpZGUgb2YgYQogICAgYGJlZ2lu
        UHJvcGVydHlDaGFuZ2VzKClgIGFuZCBgZW5kUHJvcGVydHlDaGFuZ2VzKCks
        YCBhbnkgImxvY2FsIiBvYnNlcnZlcnMKICAgIChpLmUuIG9ic2VydmVyIG1l
        dGhvZHMgZGVjbGFyZWQgb24gdGhlIHNhbWUgb2JqZWN0KSwgd2lsbCBiZSBj
        YWxsZWQKICAgIGltbWVkaWF0ZWx5LiBBbnkgInJlbW90ZSIgb2JzZXJ2ZXJz
        IChpLmUuIG9ic2VydmVyIG1ldGhvZHMgZGVjbGFyZWQgb24KICAgIGFub3Ro
        ZXIgb2JqZWN0KSB3aWxsIGJlIHBsYWNlZCBpbiBhIHF1ZXVlIGFuZCBjYWxs
        ZWQgYXQgYSBsYXRlciB0aW1lIGluIGEKICAgIGNvYWxlc2NlZCBtYW5uZXIu
        CgogICAgIyMjIENoYWluaW5nCgogICAgSW4gYWRkaXRpb24gdG8gcHJvcGVy
        dHkgY2hhbmdlcywgYHNldCgpYCByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUg
        b2JqZWN0CiAgICBpdHNlbGYgc28geW91IGNhbiBkbyBjaGFpbmluZyBsaWtl
        IHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAogICAgcmVjb3JkLnNldCgnZmly
        c3ROYW1lJywgJ0NoYXJsZXMnKS5zZXQoJ2xhc3ROYW1lJywgJ0pvbGxleScp
        OwogICAgYGBgCgogICAgQG1ldGhvZCBzZXQKICAgIEBwYXJhbSB7U3RyaW5n
        fSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSB0byBzZXQKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0IG9yIGBudWxsYC4KICAgIEBy
        ZXR1cm4ge0VtYmVyLk9ic2VydmFibGV9CiAgKi8KICBzZXQ6IGZ1bmN0aW9u
        KGtleU5hbWUsIHZhbHVlKSB7CiAgICBzZXQodGhpcywga2V5TmFtZSwgdmFs
        dWUpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBUbyBzZXQg
        bXVsdGlwbGUgcHJvcGVydGllcyBhdCBvbmNlLCBjYWxsIGBzZXRQcm9wZXJ0
        aWVzYAogICAgd2l0aCBhIEhhc2g6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        cmVjb3JkLnNldFByb3BlcnRpZXMoeyBmaXJzdE5hbWU6ICdDaGFybGVzJywg
        bGFzdE5hbWU6ICdKb2xsZXknIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBz
        ZXRQcm9wZXJ0aWVzCiAgICBAcGFyYW0ge0hhc2h9IGhhc2ggdGhlIGhhc2gg
        b2Yga2V5cyBhbmQgdmFsdWVzIHRvIHNldAogICAgQHJldHVybiB7RW1iZXIu
        T2JzZXJ2YWJsZX0KICAqLwogIHNldFByb3BlcnRpZXM6IGZ1bmN0aW9uKGhh
        c2gpIHsKICAgIHJldHVybiBFbWJlci5zZXRQcm9wZXJ0aWVzKHRoaXMsIGhh
        c2gpOwogIH0sCgogIC8qKgogICAgQmVnaW5zIGEgZ3JvdXBpbmcgb2YgcHJv
        cGVydHkgY2hhbmdlcy4KCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0
        byBncm91cCBwcm9wZXJ0eSBjaGFuZ2VzIHNvIHRoYXQgbm90aWZpY2F0aW9u
        cwogICAgd2lsbCBub3QgYmUgc2VudCB1bnRpbCB0aGUgY2hhbmdlcyBhcmUg
        ZmluaXNoZWQuIElmIHlvdSBwbGFuIHRvIG1ha2UgYQogICAgbGFyZ2UgbnVt
        YmVyIG9mIGNoYW5nZXMgdG8gYW4gb2JqZWN0IGF0IG9uZSB0aW1lLCB5b3Ug
        c2hvdWxkIGNhbGwgdGhpcwogICAgbWV0aG9kIGF0IHRoZSBiZWdpbm5pbmcg
        b2YgdGhlIGNoYW5nZXMgdG8gYmVnaW4gZGVmZXJyaW5nIGNoYW5nZQogICAg
        bm90aWZpY2F0aW9ucy4gV2hlbiB5b3UgYXJlIGRvbmUgbWFraW5nIGNoYW5n
        ZXMsIGNhbGwKICAgIGBlbmRQcm9wZXJ0eUNoYW5nZXMoKWAgdG8gZGVsaXZl
        ciB0aGUgZGVmZXJyZWQgY2hhbmdlIG5vdGlmaWNhdGlvbnMgYW5kIGVuZAog
        ICAgZGVmZXJyaW5nLgoKICAgIEBtZXRob2QgYmVnaW5Qcm9wZXJ0eUNoYW5n
        ZXMKICAgIEByZXR1cm4ge0VtYmVyLk9ic2VydmFibGV9CiAgKi8KICBiZWdp
        blByb3BlcnR5Q2hhbmdlczogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5iZWdp
        blByb3BlcnR5Q2hhbmdlcygpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAg
        LyoqCiAgICBFbmRzIGEgZ3JvdXBpbmcgb2YgcHJvcGVydHkgY2hhbmdlcy4K
        CiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0byBncm91cCBwcm9wZXJ0
        eSBjaGFuZ2VzIHNvIHRoYXQgbm90aWZpY2F0aW9ucwogICAgd2lsbCBub3Qg
        YmUgc2VudCB1bnRpbCB0aGUgY2hhbmdlcyBhcmUgZmluaXNoZWQuIElmIHlv
        dSBwbGFuIHRvIG1ha2UgYQogICAgbGFyZ2UgbnVtYmVyIG9mIGNoYW5nZXMg
        dG8gYW4gb2JqZWN0IGF0IG9uZSB0aW1lLCB5b3Ugc2hvdWxkIGNhbGwKICAg
        IGBiZWdpblByb3BlcnR5Q2hhbmdlcygpYCBhdCB0aGUgYmVnaW5uaW5nIG9m
        IHRoZSBjaGFuZ2VzIHRvIGRlZmVyIGNoYW5nZQogICAgbm90aWZpY2F0aW9u
        cy4gV2hlbiB5b3UgYXJlIGRvbmUgbWFraW5nIGNoYW5nZXMsIGNhbGwgdGhp
        cyBtZXRob2QgdG8KICAgIGRlbGl2ZXIgdGhlIGRlZmVycmVkIGNoYW5nZSBu
        b3RpZmljYXRpb25zIGFuZCBlbmQgZGVmZXJyaW5nLgoKICAgIEBtZXRob2Qg
        ZW5kUHJvcGVydHlDaGFuZ2VzCiAgICBAcmV0dXJuIHtFbWJlci5PYnNlcnZh
        YmxlfQogICovCiAgZW5kUHJvcGVydHlDaGFuZ2VzOiBmdW5jdGlvbigpIHsK
        ICAgIEVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcygpOwogICAgcmV0dXJuIHRo
        aXM7CiAgfSwKCiAgLyoqCiAgICBOb3RpZnkgdGhlIG9ic2VydmVyIHN5c3Rl
        bSB0aGF0IGEgcHJvcGVydHkgaXMgYWJvdXQgdG8gY2hhbmdlLgoKICAgIFNv
        bWV0aW1lcyB5b3UgbmVlZCB0byBjaGFuZ2UgYSB2YWx1ZSBkaXJlY3RseSBv
        ciBpbmRpcmVjdGx5IHdpdGhvdXQKICAgIGFjdHVhbGx5IGNhbGxpbmcgYGdl
        dCgpYCBvciBgc2V0KClgIG9uIGl0LiBJbiB0aGlzIGNhc2UsIHlvdSBjYW4g
        dXNlIHRoaXMKICAgIG1ldGhvZCBhbmQgYHByb3BlcnR5RGlkQ2hhbmdlKClg
        IGluc3RlYWQuIENhbGxpbmcgdGhlc2UgdHdvIG1ldGhvZHMKICAgIHRvZ2V0
        aGVyIHdpbGwgbm90aWZ5IGFsbCBvYnNlcnZlcnMgdGhhdCB0aGUgcHJvcGVy
        dHkgaGFzIHBvdGVudGlhbGx5CiAgICBjaGFuZ2VkIHZhbHVlLgoKICAgIE5v
        dGUgdGhhdCB5b3UgbXVzdCBhbHdheXMgY2FsbCBgcHJvcGVydHlXaWxsQ2hh
        bmdlYCBhbmQgYHByb3BlcnR5RGlkQ2hhbmdlYAogICAgYXMgYSBwYWlyLiBJ
        ZiB5b3UgZG8gbm90LCBpdCBtYXkgZ2V0IHRoZSBwcm9wZXJ0eSBjaGFuZ2Ug
        Z3JvdXBzIG91dCBvZgogICAgb3JkZXIgYW5kIGNhdXNlIG5vdGlmaWNhdGlv
        bnMgdG8gYmUgZGVsaXZlcmVkIG1vcmUgb2Z0ZW4gdGhhbiB5b3Ugd291bGQK
        ICAgIGxpa2UuCgogICAgQG1ldGhvZCBwcm9wZXJ0eVdpbGxDaGFuZ2UKICAg
        IEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBrZXkgdGhh
        dCBpcyBhYm91dCB0byBjaGFuZ2UuCiAgICBAcmV0dXJuIHtFbWJlci5PYnNl
        cnZhYmxlfQogICovCiAgcHJvcGVydHlXaWxsQ2hhbmdlOiBmdW5jdGlvbihr
        ZXlOYW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywg
        a2V5TmFtZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIE5v
        dGlmeSB0aGUgb2JzZXJ2ZXIgc3lzdGVtIHRoYXQgYSBwcm9wZXJ0eSBoYXMg
        anVzdCBjaGFuZ2VkLgoKICAgIFNvbWV0aW1lcyB5b3UgbmVlZCB0byBjaGFu
        Z2UgYSB2YWx1ZSBkaXJlY3RseSBvciBpbmRpcmVjdGx5IHdpdGhvdXQKICAg
        IGFjdHVhbGx5IGNhbGxpbmcgYGdldCgpYCBvciBgc2V0KClgIG9uIGl0LiBJ
        biB0aGlzIGNhc2UsIHlvdSBjYW4gdXNlIHRoaXMKICAgIG1ldGhvZCBhbmQg
        YHByb3BlcnR5V2lsbENoYW5nZSgpYCBpbnN0ZWFkLiBDYWxsaW5nIHRoZXNl
        IHR3byBtZXRob2RzCiAgICB0b2dldGhlciB3aWxsIG5vdGlmeSBhbGwgb2Jz
        ZXJ2ZXJzIHRoYXQgdGhlIHByb3BlcnR5IGhhcyBwb3RlbnRpYWxseQogICAg
        Y2hhbmdlZCB2YWx1ZS4KCiAgICBOb3RlIHRoYXQgeW91IG11c3QgYWx3YXlz
        IGNhbGwgYHByb3BlcnR5V2lsbENoYW5nZWAgYW5kIGBwcm9wZXJ0eURpZENo
        YW5nZWAKICAgIGFzIGEgcGFpci4gSWYgeW91IGRvIG5vdCwgaXQgbWF5IGdl
        dCB0aGUgcHJvcGVydHkgY2hhbmdlIGdyb3VwcyBvdXQgb2YKICAgIG9yZGVy
        IGFuZCBjYXVzZSBub3RpZmljYXRpb25zIHRvIGJlIGRlbGl2ZXJlZCBtb3Jl
        IG9mdGVuIHRoYW4geW91IHdvdWxkCiAgICBsaWtlLgoKICAgIEBtZXRob2Qg
        cHJvcGVydHlEaWRDaGFuZ2UKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1l
        IFRoZSBwcm9wZXJ0eSBrZXkgdGhhdCBoYXMganVzdCBjaGFuZ2VkLgogICAg
        QHJldHVybiB7RW1iZXIuT2JzZXJ2YWJsZX0KICAqLwogIHByb3BlcnR5RGlk
        Q2hhbmdlOiBmdW5jdGlvbihrZXlOYW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0
        eURpZENoYW5nZSh0aGlzLCBrZXlOYW1lKTsKICAgIHJldHVybiB0aGlzOwog
        IH0sCgogIC8qKgogICAgQ29udmVuaWVuY2UgbWV0aG9kIHRvIGNhbGwgYHBy
        b3BlcnR5V2lsbENoYW5nZWAgYW5kIGBwcm9wZXJ0eURpZENoYW5nZWAgaW4K
        ICAgIHN1Y2Nlc3Npb24uCgogICAgQG1ldGhvZCBub3RpZnlQcm9wZXJ0eUNo
        YW5nZQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHByb3BlcnR5
        IGtleSB0byBiZSBub3RpZmllZCBhYm91dC4KICAgIEByZXR1cm4ge0VtYmVy
        Lk9ic2VydmFibGV9CiAgKi8KICBub3RpZnlQcm9wZXJ0eUNoYW5nZTogZnVu
        Y3Rpb24oa2V5TmFtZSkgewogICAgdGhpcy5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        a2V5TmFtZSk7CiAgICB0aGlzLnByb3BlcnR5RGlkQ2hhbmdlKGtleU5hbWUp
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYWRkQmVmb3JlT2JzZXJ2ZXI6
        IGZ1bmN0aW9uKGtleSwgdGFyZ2V0LCBtZXRob2QpIHsKICAgIEVtYmVyLmFk
        ZEJlZm9yZU9ic2VydmVyKHRoaXMsIGtleSwgdGFyZ2V0LCBtZXRob2QpOwog
        IH0sCgogIC8qKgogICAgQWRkcyBhbiBvYnNlcnZlciBvbiBhIHByb3BlcnR5
        LgoKICAgIFRoaXMgaXMgdGhlIGNvcmUgbWV0aG9kIHVzZWQgdG8gcmVnaXN0
        ZXIgYW4gb2JzZXJ2ZXIgZm9yIGEgcHJvcGVydHkuCgogICAgT25jZSB5b3Ug
        Y2FsbCB0aGlzIG1ldGhvZCwgYW55IHRpbWUgdGhlIGtleSdzIHZhbHVlIGlz
        IHNldCwgeW91ciBvYnNlcnZlcgogICAgd2lsbCBiZSBub3RpZmllZC4gTm90
        ZSB0aGF0IHRoZSBvYnNlcnZlcnMgYXJlIHRyaWdnZXJlZCBhbnkgdGltZSB0
        aGUKICAgIHZhbHVlIGlzIHNldCwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGl0
        IGhhcyBhY3R1YWxseSBjaGFuZ2VkLiBZb3VyCiAgICBvYnNlcnZlciBzaG91
        bGQgYmUgcHJlcGFyZWQgdG8gaGFuZGxlIHRoYXQuCgogICAgWW91IGNhbiBh
        bHNvIHBhc3MgYW4gb3B0aW9uYWwgY29udGV4dCBwYXJhbWV0ZXIgdG8gdGhp
        cyBtZXRob2QuIFRoZQogICAgY29udGV4dCB3aWxsIGJlIHBhc3NlZCB0byB5
        b3VyIG9ic2VydmVyIG1ldGhvZCB3aGVuZXZlciBpdCBpcyB0cmlnZ2VyZWQu
        CiAgICBOb3RlIHRoYXQgaWYgeW91IGFkZCB0aGUgc2FtZSB0YXJnZXQvbWV0
        aG9kIHBhaXIgb24gYSBrZXkgbXVsdGlwbGUgdGltZXMKICAgIHdpdGggZGlm
        ZmVyZW50IGNvbnRleHQgcGFyYW1ldGVycywgeW91ciBvYnNlcnZlciB3aWxs
        IG9ubHkgYmUgY2FsbGVkIG9uY2UKICAgIHdpdGggdGhlIGxhc3QgY29udGV4
        dCB5b3UgcGFzc2VkLgoKICAgICMjIyBPYnNlcnZlciBNZXRob2RzCgogICAg
        T2JzZXJ2ZXIgbWV0aG9kcyB5b3UgcGFzcyBzaG91bGQgZ2VuZXJhbGx5IGhh
        dmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmUgaWYKICAgIHlvdSBkbyBub3Qg
        cGFzcyBhIGBjb250ZXh0YCBwYXJhbWV0ZXI6CgogICAgYGBgamF2YXNjcmlw
        dAogICAgZm9vRGlkQ2hhbmdlOiBmdW5jdGlvbihzZW5kZXIsIGtleSwgdmFs
        dWUsIHJldikgeyB9OwogICAgYGBgCgogICAgVGhlIHNlbmRlciBpcyB0aGUg
        b2JqZWN0IHRoYXQgY2hhbmdlZC4gVGhlIGtleSBpcyB0aGUgcHJvcGVydHkg
        dGhhdAogICAgY2hhbmdlcy4gVGhlIHZhbHVlIHByb3BlcnR5IGlzIGN1cnJl
        bnRseSByZXNlcnZlZCBhbmQgdW51c2VkLiBUaGUgcmV2CiAgICBpcyB0aGUg
        bGFzdCBwcm9wZXJ0eSByZXZpc2lvbiBvZiB0aGUgb2JqZWN0IHdoZW4gaXQg
        Y2hhbmdlZCwgd2hpY2ggeW91IGNhbgogICAgdXNlIHRvIGRldGVjdCBpZiB0
        aGUga2V5IHZhbHVlIGhhcyByZWFsbHkgY2hhbmdlZCBvciBub3QuCgogICAg
        SWYgeW91IHBhc3MgYSBgY29udGV4dGAgcGFyYW1ldGVyLCB0aGUgY29udGV4
        dCB3aWxsIGJlIHBhc3NlZCBiZWZvcmUgdGhlCiAgICByZXZpc2lvbiBsaWtl
        IHNvOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZvb0RpZENoYW5nZTogZnVu
        Y3Rpb24oc2VuZGVyLCBrZXksIHZhbHVlLCBjb250ZXh0LCByZXYpIHsgfTsK
        ICAgIGBgYAoKICAgIFVzdWFsbHkgeW91IHdpbGwgbm90IG5lZWQgdGhlIHZh
        bHVlLCBjb250ZXh0IG9yIHJldmlzaW9uIHBhcmFtZXRlcnMgYXQKICAgIHRo
        ZSBlbmQuIEluIHRoaXMgY2FzZSwgaXQgaXMgY29tbW9uIHRvIHdyaXRlIG9i
        c2VydmVyIG1ldGhvZHMgdGhhdCB0YWtlCiAgICBvbmx5IGEgc2VuZGVyIGFu
        ZCBrZXkgdmFsdWUgYXMgcGFyYW1ldGVycyBvciwgaWYgeW91IGFyZW4ndCBp
        bnRlcmVzdGVkIGluCiAgICBhbnkgb2YgdGhlc2UgdmFsdWVzLCB0byB3cml0
        ZSBhbiBvYnNlcnZlciB0aGF0IGhhcyBubyBwYXJhbWV0ZXJzIGF0IGFsbC4K
        CiAgICBAbWV0aG9kIGFkZE9ic2VydmVyCiAgICBAcGFyYW0ge1N0cmluZ30g
        a2V5IFRoZSBrZXkgdG8gb2JzZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0
        YXJnZXQgVGhlIHRhcmdldCBvYmplY3QgdG8gaW52b2tlCiAgICBAcGFyYW0g
        e1N0cmluZ3xGdW5jdGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tl
        LgogICAgQHJldHVybiB7RW1iZXIuT2JqZWN0fSBzZWxmCiAgKi8KICBhZGRP
        YnNlcnZlcjogZnVuY3Rpb24oa2V5LCB0YXJnZXQsIG1ldGhvZCkgewogICAg
        RW1iZXIuYWRkT2JzZXJ2ZXIodGhpcywga2V5LCB0YXJnZXQsIG1ldGhvZCk7
        CiAgfSwKCiAgLyoqCiAgICBSZW1vdmUgYW4gb2JzZXJ2ZXIgeW91IGhhdmUg
        cHJldmlvdXNseSByZWdpc3RlcmVkIG9uIHRoaXMgb2JqZWN0LiBQYXNzCiAg
        ICB0aGUgc2FtZSBrZXksIHRhcmdldCwgYW5kIG1ldGhvZCB5b3UgcGFzc2Vk
        IHRvIGBhZGRPYnNlcnZlcigpYCBhbmQgeW91cgogICAgdGFyZ2V0IHdpbGwg
        bm8gbG9uZ2VyIHJlY2VpdmUgbm90aWZpY2F0aW9ucy4KCiAgICBAbWV0aG9k
        IHJlbW92ZU9ic2VydmVyCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBr
        ZXkgdG8gb2JzZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhl
        IHRhcmdldCBvYmplY3QgdG8gaW52b2tlCiAgICBAcGFyYW0ge1N0cmluZ3xG
        dW5jdGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgQHJl
        dHVybiB7RW1iZXIuT2JzZXJ2YWJsZX0gcmVjZWl2ZXIKICAqLwogIHJlbW92
        ZU9ic2VydmVyOiBmdW5jdGlvbihrZXksIHRhcmdldCwgbWV0aG9kKSB7CiAg
        ICBFbWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLCBrZXksIHRhcmdldCwgbWV0
        aG9kKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBv
        YmplY3QgY3VycmVudGx5IGhhcyBvYnNlcnZlcnMgcmVnaXN0ZXJlZCBmb3Ig
        YQogICAgcGFydGljdWxhciBrZXkuIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9k
        IHRvIHBvdGVudGlhbGx5IGRlZmVyIHBlcmZvcm1pbmcKICAgIGFuIGV4cGVu
        c2l2ZSBhY3Rpb24gdW50aWwgc29tZW9uZSBiZWdpbnMgb2JzZXJ2aW5nIGEg
        cGFydGljdWxhciBwcm9wZXJ0eQogICAgb24gdGhlIG9iamVjdC4KCiAgICBA
        bWV0aG9kIGhhc09ic2VydmVyRm9yCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5
        IEtleSB0byBjaGVjawogICAgQHJldHVybiB7Qm9vbGVhbn0KICAqLwogIGhh
        c09ic2VydmVyRm9yOiBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiBFbWJl
        ci5oYXNMaXN0ZW5lcnModGhpcywga2V5Kyc6Y2hhbmdlJyk7CiAgfSwKCiAg
        LyoqCiAgICBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHksIG9y
        IGEgZGVmYXVsdCB2YWx1ZSBpbiB0aGUgY2FzZSB0aGF0IHRoZQogICAgcHJv
        cGVydHkgcmV0dXJucyBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBwZXJzb24uZ2V0V2l0aERlZmF1bHQoJ2xhc3ROYW1lJywgJ0RvZScp
        OwogICAgYGBgCgogICAgQG1ldGhvZCBnZXRXaXRoRGVmYXVsdAogICAgQHBh
        cmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5
        IHRvIHJldHJpZXZlCiAgICBAcGFyYW0ge09iamVjdH0gZGVmYXVsdFZhbHVl
        IFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgdGhlIHByb3BlcnR5IHZhbHVlIGlz
        IHVuZGVmaW5lZAogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgcHJvcGVydHkg
        dmFsdWUgb3IgdGhlIGRlZmF1bHRWYWx1ZS4KICAqLwogIGdldFdpdGhEZWZh
        dWx0OiBmdW5jdGlvbihrZXlOYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgIHJl
        dHVybiBFbWJlci5nZXRXaXRoRGVmYXVsdCh0aGlzLCBrZXlOYW1lLCBkZWZh
        dWx0VmFsdWUpOwogIH0sCgogIC8qKgogICAgU2V0IHRoZSB2YWx1ZSBvZiBh
        IHByb3BlcnR5IHRvIHRoZSBjdXJyZW50IHZhbHVlIHBsdXMgc29tZSBhbW91
        bnQuCgogICAgYGBgamF2YXNjcmlwdAogICAgcGVyc29uLmluY3JlbWVudFBy
        b3BlcnR5KCdhZ2UnKTsKICAgIHRlYW0uaW5jcmVtZW50UHJvcGVydHkoJ3Nj
        b3JlJywgMik7CiAgICBgYGAKCiAgICBAbWV0aG9kIGluY3JlbWVudFByb3Bl
        cnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBUaGUgbmFtZSBvZiB0
        aGUgcHJvcGVydHkgdG8gaW5jcmVtZW50CiAgICBAcGFyYW0ge051bWJlcn0g
        aW5jcmVtZW50IFRoZSBhbW91bnQgdG8gaW5jcmVtZW50IGJ5LiBEZWZhdWx0
        cyB0byAxCiAgICBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBuZXcgcHJvcGVydHkg
        dmFsdWUKICAqLwogIGluY3JlbWVudFByb3BlcnR5OiBmdW5jdGlvbihrZXlO
        YW1lLCBpbmNyZW1lbnQpIHsKICAgIGlmIChFbWJlci5pc05vbmUoaW5jcmVt
        ZW50KSkgeyBpbmNyZW1lbnQgPSAxOyB9CiAgICBFbWJlci5hc3NlcnQoIk11
        c3QgcGFzcyBhIG51bWVyaWMgdmFsdWUgdG8gaW5jcmVtZW50UHJvcGVydHki
        LCAoIWlzTmFOKHBhcnNlRmxvYXQoaW5jcmVtZW50KSkgJiYgaXNGaW5pdGUo
        aW5jcmVtZW50KSkpOwogICAgc2V0KHRoaXMsIGtleU5hbWUsIChnZXQodGhp
        cywga2V5TmFtZSkgfHwgMCkgKyBpbmNyZW1lbnQpOwogICAgcmV0dXJuIGdl
        dCh0aGlzLCBrZXlOYW1lKTsKICB9LAoKICAvKioKICAgIFNldCB0aGUgdmFs
        dWUgb2YgYSBwcm9wZXJ0eSB0byB0aGUgY3VycmVudCB2YWx1ZSBtaW51cyBz
        b21lIGFtb3VudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBwbGF5ZXIuZGVj
        cmVtZW50UHJvcGVydHkoJ2xpdmVzJyk7CiAgICBvcmMuZGVjcmVtZW50UHJv
        cGVydHkoJ2hlYWx0aCcsIDUpOwogICAgYGBgCgogICAgQG1ldGhvZCBkZWNy
        ZW1lbnRQcm9wZXJ0eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhl
        IG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGRlY3JlbWVudAogICAgQHBhcmFt
        IHtOdW1iZXJ9IGRlY3JlbWVudCBUaGUgYW1vdW50IHRvIGRlY3JlbWVudCBi
        eS4gRGVmYXVsdHMgdG8gMQogICAgQHJldHVybiB7TnVtYmVyfSBUaGUgbmV3
        IHByb3BlcnR5IHZhbHVlCiAgKi8KICBkZWNyZW1lbnRQcm9wZXJ0eTogZnVu
        Y3Rpb24oa2V5TmFtZSwgZGVjcmVtZW50KSB7CiAgICBpZiAoRW1iZXIuaXNO
        b25lKGRlY3JlbWVudCkpIHsgZGVjcmVtZW50ID0gMTsgfQogICAgRW1iZXIu
        YXNzZXJ0KCJNdXN0IHBhc3MgYSBudW1lcmljIHZhbHVlIHRvIGRlY3JlbWVu
        dFByb3BlcnR5IiwgKCFpc05hTihwYXJzZUZsb2F0KGRlY3JlbWVudCkpICYm
        IGlzRmluaXRlKGRlY3JlbWVudCkpKTsKICAgIHNldCh0aGlzLCBrZXlOYW1l
        LCAoZ2V0KHRoaXMsIGtleU5hbWUpIHx8IDApIC0gZGVjcmVtZW50KTsKICAg
        IHJldHVybiBnZXQodGhpcywga2V5TmFtZSk7CiAgfSwKCiAgLyoqCiAgICBT
        ZXQgdGhlIHZhbHVlIG9mIGEgYm9vbGVhbiBwcm9wZXJ0eSB0byB0aGUgb3Bw
        b3NpdGUgb2YgaXQncwogICAgY3VycmVudCB2YWx1ZS4KCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICBzdGFyc2hpcC50b2dnbGVQcm9wZXJ0eSgnd2FycERyaXZl
        RW5nYWdlZCcpOwogICAgYGBgCgogICAgQG1ldGhvZCB0b2dnbGVQcm9wZXJ0
        eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhl
        IHByb3BlcnR5IHRvIHRvZ2dsZQogICAgQHJldHVybiB7T2JqZWN0fSBUaGUg
        bmV3IHByb3BlcnR5IHZhbHVlCiAgKi8KICB0b2dnbGVQcm9wZXJ0eTogZnVu
        Y3Rpb24oa2V5TmFtZSkgewogICAgc2V0KHRoaXMsIGtleU5hbWUsICFnZXQo
        dGhpcywga2V5TmFtZSkpOwogICAgcmV0dXJuIGdldCh0aGlzLCBrZXlOYW1l
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIGNhY2hlZCB2YWx1ZSBv
        ZiBhIGNvbXB1dGVkIHByb3BlcnR5LCBpZiBpdCBleGlzdHMuCiAgICBUaGlz
        IGFsbG93cyB5b3UgdG8gaW5zcGVjdCB0aGUgdmFsdWUgb2YgYSBjb21wdXRl
        ZCBwcm9wZXJ0eQogICAgd2l0aG91dCBhY2NpZGVudGFsbHkgaW52b2tpbmcg
        aXQgaWYgaXQgaXMgaW50ZW5kZWQgdG8gYmUKICAgIGdlbmVyYXRlZCBsYXpp
        bHkuCgogICAgQG1ldGhvZCBjYWNoZUZvcgogICAgQHBhcmFtIHtTdHJpbmd9
        IGtleU5hbWUKICAgIEByZXR1cm4ge09iamVjdH0gVGhlIGNhY2hlZCB2YWx1
        ZSBvZiB0aGUgY29tcHV0ZWQgcHJvcGVydHksIGlmIGFueQogICovCiAgY2Fj
        aGVGb3I6IGZ1bmN0aW9uKGtleU5hbWUpIHsKICAgIHJldHVybiBFbWJlci5j
        YWNoZUZvcih0aGlzLCBrZXlOYW1lKTsKICB9LAoKICAvLyBpbnRlbmRlZCBm
        b3IgZGVidWdnaW5nIHB1cnBvc2VzCiAgb2JzZXJ2ZXJzRm9yS2V5OiBmdW5j
        dGlvbihrZXlOYW1lKSB7CiAgICByZXR1cm4gRW1iZXIub2JzZXJ2ZXJzRm9y
        KHRoaXMsIGtleU5hbWUpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGlt
        ZQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoK
        LyoqCmBFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0YCBpcyBhIG1peGluIHRo
        YXQgY2FuIGJlIGluY2x1ZGVkIGluIGEgY2xhc3MKdG8gYWRkIGEgYHRyaWdn
        ZXJBY3Rpb25gIG1ldGhvZCB3aXRoIHNlbWFudGljcyBzaW1pbGFyIHRvIHRo
        ZSBIYW5kbGViYXJzCmB7e2FjdGlvbn19YCBoZWxwZXIuIEluIG5vcm1hbCBF
        bWJlciB1c2FnZSwgdGhlIGB7e2FjdGlvbn19YCBoZWxwZXIgaXMKdXN1YWxs
        eSB0aGUgYmVzdCBjaG9pY2UuIFRoaXMgbWl4aW4gaXMgbW9zdCBvZnRlbiB1
        c2VmdWwgd2hlbiB5b3UgYXJlCmRvaW5nIG1vcmUgY29tcGxleCBldmVudCBo
        YW5kbGluZyBpbiBWaWV3IG9iamVjdHMuCgpTZWUgYWxzbyBgRW1iZXIuVmll
        d1RhcmdldEFjdGlvblN1cHBvcnRgLCB3aGljaCBoYXMKdmlldy1hd2FyZSBk
        ZWZhdWx0cyBmb3IgdGFyZ2V0IGFuZCBhY3Rpb25Db250ZXh0LgoKQGNsYXNz
        IFRhcmdldEFjdGlvblN1cHBvcnQKQG5hbWVzcGFjZSBFbWJlcgpAZXh0ZW5k
        cyBFbWJlci5NaXhpbgoqLwpFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0ID0g
        RW1iZXIuTWl4aW4uY3JlYXRlKHsKICB0YXJnZXQ6IG51bGwsCiAgYWN0aW9u
        OiBudWxsLAogIGFjdGlvbkNvbnRleHQ6IG51bGwsCgogIHRhcmdldE9iamVj
        dDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgdGFyZ2V0
        ID0gZ2V0KHRoaXMsICd0YXJnZXQnKTsKCiAgICBpZiAoRW1iZXIudHlwZU9m
        KHRhcmdldCkgPT09ICJzdHJpbmciKSB7CiAgICAgIHZhciB2YWx1ZSA9IGdl
        dCh0aGlzLCB0YXJnZXQpOwogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5l
        ZCkgeyB2YWx1ZSA9IGdldChFbWJlci5sb29rdXAsIHRhcmdldCk7IH0KICAg
        ICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRh
        cmdldDsKICAgIH0KICB9KS5wcm9wZXJ0eSgndGFyZ2V0JyksCgogIGFjdGlv
        bkNvbnRleHRPYmplY3Q6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewog
        ICAgdmFyIGFjdGlvbkNvbnRleHQgPSBnZXQodGhpcywgJ2FjdGlvbkNvbnRl
        eHQnKTsKCiAgICBpZiAoRW1iZXIudHlwZU9mKGFjdGlvbkNvbnRleHQpID09
        PSAic3RyaW5nIikgewogICAgICB2YXIgdmFsdWUgPSBnZXQodGhpcywgYWN0
        aW9uQ29udGV4dCk7CiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7
        IHZhbHVlID0gZ2V0KEVtYmVyLmxvb2t1cCwgYWN0aW9uQ29udGV4dCk7IH0K
        ICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJu
        IGFjdGlvbkNvbnRleHQ7CiAgICB9CiAgfSkucHJvcGVydHkoJ2FjdGlvbkNv
        bnRleHQnKSwKCiAgLyoqCiAgU2VuZCBhbiAiYWN0aW9uIiB3aXRoIGFuICJh
        Y3Rpb25Db250ZXh0IiB0byBhICJ0YXJnZXQiLiBUaGUgYWN0aW9uLCBhY3Rp
        b25Db250ZXh0CiAgYW5kIHRhcmdldCB3aWxsIGJlIHJldHJpZXZlZCBmcm9t
        IHByb3BlcnRpZXMgb2YgdGhlIG9iamVjdC4gRm9yIGV4YW1wbGU6CgogIGBg
        YGphdmFzY3JpcHQKICBBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5WaWV3
        LmV4dGVuZChFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LCB7CiAgICB0YXJn
        ZXQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250cm9sbGVyJyksCiAgICBh
        Y3Rpb246ICdzYXZlJywKICAgIGFjdGlvbkNvbnRleHQ6IEVtYmVyLmNvbXB1
        dGVkLmFsaWFzKCdjb250ZXh0JyksCiAgICBjbGljazogZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMudHJpZ2dlckFjdGlvbigpOyAvLyBTZW5kcyB0aGUgYHNh
        dmVgIGFjdGlvbiwgYWxvbmcgd2l0aCB0aGUgY3VycmVudCBjb250ZXh0CiAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byB0aGUgY3VycmVudCBj
        b250cm9sbGVyCiAgICB9CiAgfSk7CiAgYGBgCgogIFRoZSBgdGFyZ2V0YCwg
        YGFjdGlvbmAsIGFuZCBgYWN0aW9uQ29udGV4dGAgY2FuIGJlIHByb3ZpZGVk
        IGFzIHByb3BlcnRpZXMgb2YKICBhbiBvcHRpb25hbCBvYmplY3QgYXJndW1l
        bnQgdG8gYHRyaWdnZXJBY3Rpb25gIGFzIHdlbGwuCgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChF
        bWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LCB7CiAgICBjbGljazogZnVuY3Rp
        b24oKSB7CiAgICAgIHRoaXMudHJpZ2dlckFjdGlvbih7CiAgICAgICAgYWN0
        aW9uOiAnc2F2ZScsCiAgICAgICAgdGFyZ2V0OiB0aGlzLmdldCgnY29udHJv
        bGxlcicpLAogICAgICAgIGFjdGlvbkNvbnRleHQ6IHRoaXMuZ2V0KCdjb250
        ZXh0JyksCiAgICAgIH0pOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFjdGlvbiwg
        YWxvbmcgd2l0aCB0aGUgY3VycmVudCBjb250ZXh0CiAgICAgICAgICAvLyB0
        byB0aGUgY3VycmVudCBjb250cm9sbGVyCiAgICB9CiAgfSk7CiAgYGBgCgog
        IFRoZSBgYWN0aW9uQ29udGV4dGAgZGVmYXVsdHMgdG8gdGhlIG9iamVjdCB5
        b3UgbWl4aW5nIGBUYXJnZXRBY3Rpb25TdXBwb3J0YCBpbnRvLgogIEJ1dCBg
        dGFyZ2V0YCBhbmQgYGFjdGlvbmAgbXVzdCBiZSBzcGVjaWZpZWQgZWl0aGVy
        IGFzIHByb3BlcnRpZXMgb3Igd2l0aCB0aGUgYXJndW1lbnQKICB0byBgdHJp
        Z2dlckFjdGlvbmAsIG9yIGEgY29tYmluYXRpb246CgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChF
        bWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LCB7CiAgICB0YXJnZXQ6IEVtYmVy
        LmNvbXB1dGVkLmFsaWFzKCdjb250cm9sbGVyJyksCiAgICBjbGljazogZnVu
        Y3Rpb24oKSB7CiAgICAgIHRoaXMudHJpZ2dlckFjdGlvbih7CiAgICAgICAg
        YWN0aW9uOiAnc2F2ZScKICAgICAgfSk7IC8vIFNlbmRzIHRoZSBgc2F2ZWAg
        YWN0aW9uLCBhbG9uZyB3aXRoIGEgcmVmZXJlbmNlIHRvIGB0aGlzYCwKICAg
        ICAgICAgIC8vIHRvIHRoZSBjdXJyZW50IGNvbnRyb2xsZXIKICAgIH0KICB9
        KTsKICBgYGAKCiAgQG1ldGhvZCB0cmlnZ2VyQWN0aW9uCiAgQHBhcmFtIG9w
        dHMge0hhc2h9IChvcHRpb25hbCwgd2l0aCB0aGUgb3B0aW9uYWwga2V5cyBh
        Y3Rpb24sIHRhcmdldCBhbmQvb3IgYWN0aW9uQ29udGV4dCkKICBAcmV0dXJu
        IHtCb29sZWFufSB0cnVlIGlmIHRoZSBhY3Rpb24gd2FzIHNlbnQgc3VjY2Vz
        c2Z1bGx5IGFuZCBkaWQgbm90IHJldHVybiBmYWxzZQogICovCiAgdHJpZ2dl
        ckFjdGlvbjogZnVuY3Rpb24ob3B0cykgewogICAgb3B0cyA9IG9wdHMgfHwg
        e307CiAgICB2YXIgYWN0aW9uID0gb3B0cy5hY3Rpb24gfHwgZ2V0KHRoaXMs
        ICdhY3Rpb24nKSwKICAgICAgICB0YXJnZXQgPSBvcHRzLnRhcmdldCB8fCBn
        ZXQodGhpcywgJ3RhcmdldE9iamVjdCcpLAogICAgICAgIGFjdGlvbkNvbnRl
        eHQgPSBvcHRzLmFjdGlvbkNvbnRleHQ7CgogICAgZnVuY3Rpb24gYXJncyhv
        cHRpb25zLCBhY3Rpb25OYW1lKSB7CiAgICAgIHZhciByZXQgPSBbXTsKICAg
        ICAgaWYgKGFjdGlvbk5hbWUpIHsgcmV0LnB1c2goYWN0aW9uTmFtZSk7IH0K
        CiAgICAgIHJldHVybiByZXQuY29uY2F0KG9wdGlvbnMpOwogICAgfQoKICAg
        IGlmICh0eXBlb2YgYWN0aW9uQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHsK
        ICAgICAgYWN0aW9uQ29udGV4dCA9IGdldCh0aGlzLCAnYWN0aW9uQ29udGV4
        dE9iamVjdCcpIHx8IHRoaXM7CiAgICB9CgogICAgaWYgKHRhcmdldCAmJiBh
        Y3Rpb24pIHsKICAgICAgdmFyIHJldDsKCiAgICAgIGlmICh0YXJnZXQuc2Vu
        ZCkgewogICAgICAgIHJldCA9IHRhcmdldC5zZW5kLmFwcGx5KHRhcmdldCwg
        YXJncyhhY3Rpb25Db250ZXh0LCBhY3Rpb24pKTsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICBFbWJlci5hc3NlcnQoIlRoZSBhY3Rpb24gJyIgKyBhY3Rpb24g
        KyAiJyBkaWQgbm90IGV4aXN0IG9uICIgKyB0YXJnZXQsIHR5cGVvZiB0YXJn
        ZXRbYWN0aW9uXSA9PT0gJ2Z1bmN0aW9uJyk7CiAgICAgICAgcmV0ID0gdGFy
        Z2V0W2FjdGlvbl0uYXBwbHkodGFyZ2V0LCBhcmdzKGFjdGlvbkNvbnRleHQp
        KTsKICAgICAgfQoKICAgICAgaWYgKHJldCAhPT0gZmFsc2UpIHJldCA9IHRy
        dWU7CgogICAgICByZXR1cm4gcmV0OwogICAgfSBlbHNlIHsKICAgICAgcmV0
        dXJuIGZhbHNlOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGlt
        ZQoqLwoKLyoqCiAgVGhpcyBtaXhpbiBhbGxvd3MgZm9yIEVtYmVyIG9iamVj
        dHMgdG8gc3Vic2NyaWJlIHRvIGFuZCBlbWl0IGV2ZW50cy4KCiAgYGBgamF2
        YXNjcmlwdAogIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVt
        YmVyLkV2ZW50ZWQsIHsKICAgIGdyZWV0OiBmdW5jdGlvbigpIHsKICAgICAg
        Ly8gLi4uCiAgICAgIHRoaXMudHJpZ2dlcignZ3JlZXQnKTsKICAgIH0KICB9
        KTsKCiAgdmFyIHBlcnNvbiA9IEFwcC5QZXJzb24uY3JlYXRlKCk7CgogIHBl
        cnNvbi5vbignZ3JlZXQnLCBmdW5jdGlvbigpIHsKICAgIGNvbnNvbGUubG9n
        KCdPdXIgcGVyc29uIGhhcyBncmVldGVkJyk7CiAgfSk7CgogIHBlcnNvbi5n
        cmVldCgpOwoKICAvLyBvdXRwdXRzOiAnT3VyIHBlcnNvbiBoYXMgZ3JlZXRl
        ZCcKICBgYGAKCiAgWW91IGNhbiBhbHNvIGNoYWluIG11bHRpcGxlIGV2ZW50
        IHN1YnNjcmlwdGlvbnM6CgogIGBgYGphdmFzY3JpcHQKICBwZXJzb24ub24o
        J2dyZWV0JywgZnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnT3VyIHBl
        cnNvbiBoYXMgZ3JlZXRlZCcpOwogIH0pLm9uZSgnZ3JlZXQnLCBmdW5jdGlv
        bigpIHsKICAgIGNvbnNvbGUubG9nKCdPZmZlciBvbmUtdGltZSBzcGVjaWFs
        Jyk7CiAgfSkub2ZmKCdldmVudCcsIHRoaXMsIGZvcmdldFRoaXMpOwogIGBg
        YAoKICBAY2xhc3MgRXZlbnRlZAogIEBuYW1lc3BhY2UgRW1iZXIKICovCkVt
        YmVyLkV2ZW50ZWQgPSBFbWJlci5NaXhpbi5jcmVhdGUoewoKICAvKioKICAg
        U3Vic2NyaWJlcyB0byBhIG5hbWVkIGV2ZW50IHdpdGggZ2l2ZW4gZnVuY3Rp
        b24uCgogICBgYGBqYXZhc2NyaXB0CiAgIHBlcnNvbi5vbignZGlkTG9hZCcs
        IGZ1bmN0aW9uKCkgewogICAgIC8vIGZpcmVkIG9uY2UgdGhlIHBlcnNvbiBo
        YXMgbG9hZGVkCiAgIH0pOwogICBgYGAKCiAgIEFuIG9wdGlvbmFsIHRhcmdl
        dCBjYW4gYmUgcGFzc2VkIGluIGFzIHRoZSAybmQgYXJndW1lbnQgdGhhdCB3
        aWxsCiAgIGJlIHNldCBhcyB0aGUgInRoaXMiIGZvciB0aGUgY2FsbGJhY2su
        IFRoaXMgaXMgYSBnb29kIHdheSB0byBnaXZlIHlvdXIKICAgZnVuY3Rpb24g
        YWNjZXNzIHRvIHRoZSBvYmplY3QgdHJpZ2dlcmluZyB0aGUgZXZlbnQuIFdo
        ZW4gdGhlIHRhcmdldAogICBwYXJhbWV0ZXIgaXMgdXNlZCB0aGUgY2FsbGJh
        Y2sgYmVjb21lcyB0aGUgdGhpcmQgYXJndW1lbnQuCgogICBAbWV0aG9kIG9u
        CiAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVu
        dAogICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhlICJ0aGlzIiBiaW5k
        aW5nIGZvciB0aGUgY2FsbGJhY2sKICAgQHBhcmFtIHtGdW5jdGlvbn0gbWV0
        aG9kIFRoZSBjYWxsYmFjayB0byBleGVjdXRlCiAgIEByZXR1cm4gdGhpcwog
        ICovCiAgb246IGZ1bmN0aW9uKG5hbWUsIHRhcmdldCwgbWV0aG9kKSB7CiAg
        ICBFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCBuYW1lLCB0YXJnZXQsIG1ldGhv
        ZCk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFN1YnNjcmli
        ZXMgYSBmdW5jdGlvbiB0byBhIG5hbWVkIGV2ZW50IGFuZCB0aGVuIGNhbmNl
        bHMgdGhlIHN1YnNjcmlwdGlvbgogICAgYWZ0ZXIgdGhlIGZpcnN0IHRpbWUg
        dGhlIGV2ZW50IGlzIHRyaWdnZXJlZC4gSXQgaXMgZ29vZCB0byB1c2UgYGBv
        bmVgYCB3aGVuCiAgICB5b3Ugb25seSBjYXJlIGFib3V0IHRoZSBmaXJzdCB0
        aW1lIGFuIGV2ZW50IGhhcyB0YWtlbiBwbGFjZS4KCiAgICBUaGlzIGZ1bmN0
        aW9uIHRha2VzIGFuIG9wdGlvbmFsIDJuZCBhcmd1bWVudCB0aGF0IHdpbGwg
        YmVjb21lIHRoZSAidGhpcyIKICAgIHZhbHVlIGZvciB0aGUgY2FsbGJhY2su
        IElmIHRoaXMgYXJndW1lbnQgaXMgcGFzc2VkIHRoZW4gdGhlIDNyZCBhcmd1
        bWVudAogICAgYmVjb21lcyB0aGUgZnVuY3Rpb24uCgogICAgQG1ldGhvZCBv
        bmUKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBl
        dmVudAogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSAidGhpcyIg
        YmluZGluZyBmb3IgdGhlIGNhbGxiYWNrCiAgICBAcGFyYW0ge0Z1bmN0aW9u
        fSBtZXRob2QgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEByZXR1cm4g
        dGhpcwogICovCiAgb25lOiBmdW5jdGlvbihuYW1lLCB0YXJnZXQsIG1ldGhv
        ZCkgewogICAgaWYgKCFtZXRob2QpIHsKICAgICAgbWV0aG9kID0gdGFyZ2V0
        OwogICAgICB0YXJnZXQgPSBudWxsOwogICAgfQoKICAgIEVtYmVyLmFkZExp
        c3RlbmVyKHRoaXMsIG5hbWUsIHRhcmdldCwgbWV0aG9kLCB0cnVlKTsKICAg
        IHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgVHJpZ2dlcnMgYSBuYW1l
        ZCBldmVudCBmb3IgdGhlIG9iamVjdC4gQW55IGFkZGl0aW9uYWwgYXJndW1l
        bnRzCiAgICB3aWxsIGJlIHBhc3NlZCBhcyBwYXJhbWV0ZXJzIHRvIHRoZSBm
        dW5jdGlvbnMgdGhhdCBhcmUgc3Vic2NyaWJlZCB0byB0aGUKICAgIGV2ZW50
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHBlcnNvbi5vbignZGlkRWF0Jywg
        ZnVuY3Rpb24oZm9vZCkgewogICAgICBjb25zb2xlLmxvZygncGVyc29uIGF0
        ZSBzb21lICcgKyBmb29kKTsKICAgIH0pOwoKICAgIHBlcnNvbi50cmlnZ2Vy
        KCdkaWRFYXQnLCAnYnJvY2NvbGknKTsKCiAgICAvLyBvdXRwdXRzOiBwZXJz
        b24gYXRlIHNvbWUgYnJvY2NvbGkKICAgIGBgYAogICAgQG1ldGhvZCB0cmln
        Z2VyCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUg
        ZXZlbnQKICAgIEBwYXJhbSB7T2JqZWN0Li4ufSBhcmdzIE9wdGlvbmFsIGFy
        Z3VtZW50cyB0byBwYXNzIG9uCiAgKi8KICB0cmlnZ2VyOiBmdW5jdGlvbihu
        YW1lKSB7CiAgICB2YXIgYXJncyA9IFtdLCBpLCBsOwogICAgZm9yIChpID0g
        MSwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAg
        YXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7CiAgICB9CiAgICBFbWJlci5zZW5k
        RXZlbnQodGhpcywgbmFtZSwgYXJncyk7CiAgfSwKCiAgLyoqCiAgICBDYW5j
        ZWxzIHN1YnNjcmlwdGlvbiBmb3IgZ2l2ZW4gbmFtZSwgdGFyZ2V0LCBhbmQg
        bWV0aG9kLgoKICAgIEBtZXRob2Qgb2ZmCiAgICBAcGFyYW0ge1N0cmluZ30g
        bmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQKICAgIEBwYXJhbSB7T2JqZWN0
        fSB0YXJnZXQgVGhlIHRhcmdldCBvZiB0aGUgc3Vic2NyaXB0aW9uCiAgICBA
        cGFyYW0ge0Z1bmN0aW9ufSBtZXRob2QgVGhlIGZ1bmN0aW9uIG9mIHRoZSBz
        dWJzY3JpcHRpb24KICAgIEByZXR1cm4gdGhpcwogICovCiAgb2ZmOiBmdW5j
        dGlvbihuYW1lLCB0YXJnZXQsIG1ldGhvZCkgewogICAgRW1iZXIucmVtb3Zl
        TGlzdGVuZXIodGhpcywgbmFtZSwgdGFyZ2V0LCBtZXRob2QpOwogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBDaGVja3MgdG8gc2VlIGlmIG9i
        amVjdCBoYXMgYW55IHN1YnNjcmlwdGlvbnMgZm9yIG5hbWVkIGV2ZW50LgoK
        ICAgIEBtZXRob2QgaGFzCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUg
        bmFtZSBvZiB0aGUgZXZlbnQKICAgIEByZXR1cm4ge0Jvb2xlYW59IGRvZXMg
        dGhlIG9iamVjdCBoYXZlIGEgc3Vic2NyaXB0aW9uIGZvciBldmVudAogICAq
        LwogIGhhczogZnVuY3Rpb24obmFtZSkgewogICAgcmV0dXJuIEVtYmVyLmhh
        c0xpc3RlbmVycyh0aGlzLCBuYW1lKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewp2YXIgUlNWUCA9IHJlcXVpcmVNb2R1bGUoInJzdnAiKTsK
        ClJTVlAuY29uZmlndXJlKCdhc3luYycsIGZ1bmN0aW9uKGNhbGxiYWNrLCBw
        cm9taXNlKSB7CiAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25zJywgcHJv
        bWlzZSwgY2FsbGJhY2ssIHByb21pc2UpOwp9KTsKCi8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGdldCA9IEVt
        YmVyLmdldDsKCi8qKgogIEBjbGFzcyBEZWZlcnJlZAogIEBuYW1lc3BhY2Ug
        RW1iZXIKICovCkVtYmVyLkRlZmVycmVkTWl4aW4gPSBFbWJlci5NaXhpbi5j
        cmVhdGUoewogIC8qKgogICAgQWRkIGhhbmRsZXJzIHRvIGJlIGNhbGxlZCB3
        aGVuIHRoZSBEZWZlcnJlZCBvYmplY3QgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0
        ZWQuCgogICAgQG1ldGhvZCB0aGVuCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBy
        ZXNvbHZlIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4g
        ZG9uZQogICAgQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ICBhIGNhbGxiYWNr
        IGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGZhaWxlZAogICovCiAgdGhl
        bjogZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgZGVmZXJy
        ZWQsIHByb21pc2UsIGVudGl0eTsKCiAgICBlbnRpdHkgPSB0aGlzOwogICAg
        ZGVmZXJyZWQgPSBnZXQodGhpcywgJ19kZWZlcnJlZCcpOwogICAgcHJvbWlz
        ZSA9IGRlZmVycmVkLnByb21pc2U7CgogICAgZnVuY3Rpb24gZnVsZmlsbG1l
        bnRIYW5kbGVyKGZ1bGZpbGxtZW50KSB7CiAgICAgIGlmIChmdWxmaWxsbWVu
        dCA9PT0gcHJvbWlzZSkgewogICAgICAgIHJldHVybiByZXNvbHZlKGVudGl0
        eSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmUoZnVs
        ZmlsbG1lbnQpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHByb21pc2Uu
        dGhlbihyZXNvbHZlICYmIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0KTsK
        ICB9LAoKICAvKioKICAgIFJlc29sdmUgYSBEZWZlcnJlZCBvYmplY3QgYW5k
        IGNhbGwgYW55IGBkb25lQ2FsbGJhY2tzYCB3aXRoIHRoZSBnaXZlbiBhcmdz
        LgoKICAgIEBtZXRob2QgcmVzb2x2ZQogICovCiAgcmVzb2x2ZTogZnVuY3Rp
        b24odmFsdWUpIHsKICAgIHZhciBkZWZlcnJlZCwgcHJvbWlzZTsKCiAgICBk
        ZWZlcnJlZCA9IGdldCh0aGlzLCAnX2RlZmVycmVkJyk7CiAgICBwcm9taXNl
        ID0gZGVmZXJyZWQucHJvbWlzZTsKCiAgICBpZiAodmFsdWUgPT09IHRoaXMp
        IHsKICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlKTsKICAgIH0gZWxz
        ZSB7CiAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpOwogICAgfQogIH0s
        CgogIC8qKgogICAgUmVqZWN0IGEgRGVmZXJyZWQgb2JqZWN0IGFuZCBjYWxs
        IGFueSBgZmFpbENhbGxiYWNrc2Agd2l0aCB0aGUgZ2l2ZW4gYXJncy4KCiAg
        ICBAbWV0aG9kIHJlamVjdAogICovCiAgcmVqZWN0OiBmdW5jdGlvbih2YWx1
        ZSkgewogICAgZ2V0KHRoaXMsICdfZGVmZXJyZWQnKS5yZWplY3QodmFsdWUp
        OwogIH0sCgogIF9kZWZlcnJlZDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        KSB7CiAgICByZXR1cm4gUlNWUC5kZWZlcigpOwogIH0pCn0pOwoKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCB0eXBl
        T2YgPSBFbWJlci50eXBlT2Y7CgovKioKICBUaGUgYEVtYmVyLkFjdGlvbkhh
        bmRsZXJgIG1peGluIGltcGxlbWVudHMgc3VwcG9ydCBmb3IgbW92aW5nIGFu
        IGBhY3Rpb25zYAogIHByb3BlcnR5IHRvIGFuIGBfYWN0aW9uc2AgcHJvcGVy
        dHkgYXQgZXh0ZW5kIHRpbWUsIGFuZCBhZGRpbmcgYF9hY3Rpb25zYAogIHRv
        IHRoZSBvYmplY3QncyBtZXJnZWRQcm9wZXJ0aWVzIGxpc3QuCgogIGBFbWJl
        ci5BY3Rpb25IYW5kbGVyYCBpcyB1c2VkIGludGVybmFsbHkgYnkgRW1iZXIg
        aW4gIGBFbWJlci5WaWV3YCwKICBgRW1iZXIuQ29udHJvbGxlcmAsIGFuZCBg
        RW1iZXIuUm91dGVgLgoKICBAY2xhc3MgQWN0aW9uSGFuZGxlcgogIEBuYW1l
        c3BhY2UgRW1iZXIKKi8KRW1iZXIuQWN0aW9uSGFuZGxlciA9IEVtYmVyLk1p
        eGluLmNyZWF0ZSh7CiAgbWVyZ2VkUHJvcGVydGllczogWydfYWN0aW9ucydd
        LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgTW92ZXMgYGFjdGlvbnNgIHRv
        IGBfYWN0aW9uc2AgYXQgZXh0ZW5kIHRpbWUuIE5vdGUgdGhhdCB0aGlzIGN1
        cnJlbnRseQogICAgbW9kaWZpZXMgdGhlIG1peGluIHRoZW1zZWx2ZXMsIHdo
        aWNoIGlzIHRlY2huaWNhbGx5IGR1YmlvdXMgYnV0CiAgICBpcyBwcmFjdGlj
        YWxseSBvZiBsaXR0bGUgY29uc2VxdWVuY2UuIFRoaXMgbWF5IGNoYW5nZSBp
        biB0aGUgZnV0dXJlLgoKICAgIEBtZXRob2Qgd2lsbE1lcmdlTWl4aW4KICAq
        LwogIHdpbGxNZXJnZU1peGluOiBmdW5jdGlvbihwcm9wcykgewogICAgdmFy
        IGhhc2hOYW1lOwoKICAgIGlmICghcHJvcHMuX2FjdGlvbnMpIHsKICAgICAg
        aWYgKHR5cGVPZihwcm9wcy5hY3Rpb25zKSA9PT0gJ29iamVjdCcpIHsKICAg
        ICAgICBoYXNoTmFtZSA9ICdhY3Rpb25zJzsKICAgICAgfSBlbHNlIGlmICh0
        eXBlT2YocHJvcHMuZXZlbnRzKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBF
        bWJlci5kZXByZWNhdGUoJ0FjdGlvbiBoYW5kbGVycyBjb250YWluZWQgaW4g
        YW4gYGV2ZW50c2Agb2JqZWN0IGFyZSBkZXByZWNhdGVkIGluIGZhdm9yIG9m
        IHB1dHRpbmcgdGhlbSBpbiBhbiBgYWN0aW9uc2Agb2JqZWN0JywgZmFsc2Up
        OwogICAgICAgIGhhc2hOYW1lID0gJ2V2ZW50cyc7CiAgICAgIH0KCiAgICAg
        IGlmIChoYXNoTmFtZSkgewogICAgICAgIHByb3BzLl9hY3Rpb25zID0gRW1i
        ZXIubWVyZ2UocHJvcHMuX2FjdGlvbnMgfHwge30sIHByb3BzW2hhc2hOYW1l
        XSk7CiAgICAgIH0KCiAgICAgIGRlbGV0ZSBwcm9wc1toYXNoTmFtZV07CiAg
        ICB9CiAgfSwKCiAgc2VuZDogZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAg
        dmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRhcmdl
        dDsKCiAgICBpZiAodGhpcy5fYWN0aW9ucyAmJiB0aGlzLl9hY3Rpb25zW2Fj
        dGlvbk5hbWVdKSB7CiAgICAgIGlmICh0aGlzLl9hY3Rpb25zW2FjdGlvbk5h
        bWVdLmFwcGx5KHRoaXMsIGFyZ3MpID09PSB0cnVlKSB7CiAgICAgICAgLy8g
        aGFuZGxlciByZXR1cm5lZCB0cnVlLCBzbyB0aGlzIGFjdGlvbiB3aWxsIGJ1
        YmJsZQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQog
        ICAgfSBlbHNlIGlmICh0aGlzLmRlcHJlY2F0ZWRTZW5kICYmIHRoaXMuZGVw
        cmVjYXRlZFNlbmRIYW5kbGVzICYmIHRoaXMuZGVwcmVjYXRlZFNlbmRIYW5k
        bGVzKGFjdGlvbk5hbWUpKSB7CiAgICAgIGlmICh0aGlzLmRlcHJlY2F0ZWRT
        ZW5kLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkgPT09
        IHRydWUpIHsKICAgICAgICAvLyBoYW5kbGVyIHJldHVybiB0cnVlLCBzbyB0
        aGlzIGFjdGlvbiB3aWxsIGJ1YmJsZQogICAgICB9IGVsc2UgewogICAgICAg
        IHJldHVybjsKICAgICAgfQogICAgfQoKICAgIGlmICh0YXJnZXQgPSBnZXQo
        dGhpcywgJ3RhcmdldCcpKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGB0
        YXJnZXRgIGZvciAiICsgdGhpcyArICIgKCIgKyB0YXJnZXQgKyAiKSBkb2Vz
        IG5vdCBoYXZlIGEgYHNlbmRgIG1ldGhvZCIsIHR5cGVvZiB0YXJnZXQuc2Vu
        ZCA9PT0gJ2Z1bmN0aW9uJyk7CiAgICAgIHRhcmdldC5zZW5kLmFwcGx5KHRh
        cmdldCwgYXJndW1lbnRzKTsKICAgIH0KICB9Cgp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKdmFyIHNldCA9IEVtYmVyLnNldCwgZ2V0ID0gRW1iZXIu
        Z2V0LAogICAgcmVzb2x2ZSA9IEVtYmVyLlJTVlAucmVzb2x2ZSwKICAgIHJl
        dGhyb3cgPSBFbWJlci5SU1ZQLnJldGhyb3csCiAgICBub3QgPSBFbWJlci5j
        b21wdXRlZC5ub3QsCiAgICBvciA9IEVtYmVyLmNvbXB1dGVkLm9yOwoKLyoq
        CiAgQG1vZHVsZSBlbWJlcgogIEBzdWJtb2R1bGUgZW1iZXItcnVudGltZQog
        Ki8KCmZ1bmN0aW9uIGluc3RhbGxQcm9taXNlKHByb3h5LCBwcm9taXNlKSB7
        CiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICBzZXQocHJv
        eHksICdpc0Z1bGZpbGxlZCcsIHRydWUpOwogICAgc2V0KHByb3h5LCAnY29u
        dGVudCcsIHZhbHVlKTsKCiAgICByZXR1cm4gdmFsdWU7CiAgfSwgZnVuY3Rp
        b24ocmVhc29uKSB7CiAgICBzZXQocHJveHksICdpc1JlamVjdGVkJywgdHJ1
        ZSk7CiAgICBzZXQocHJveHksICdyZWFzb24nLCByZWFzb24pOwogIH0pLmZh
        aWwocmV0aHJvdyk7Cn0KCi8qKgogIEEgbG93IGxldmVsIG1peGluIG1ha2lu
        ZyBPYmplY3RQcm94eSwgT2JqZWN0Q29udHJvbGxlciBvciBBcnJheUNvbnRy
        b2xsZXIncyBwcm9taXNlIGF3YXJlLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFy
        IE9iamVjdFByb21pc2VDb250cm9sbGVyID0gRW1iZXIuT2JqZWN0Q29udHJv
        bGxlci5leHRlbmQoRW1iZXIuUHJvbWlzZVByb3h5TWl4aW4pOwoKICB2YXIg
        Y29udHJvbGxlciA9IE9iamVjdFByb21pc2VDb250cm9sbGVyLmNyZWF0ZSh7
        CiAgICBwcm9taXNlOiAkLmdldEpTT04oJy9zb21lL3JlbW90ZS9kYXRhLmpz
        b24nKQogIH0pOwoKICBjb250cm9sbGVyLnRoZW4oZnVuY3Rpb24oanNvbil7
        CiAgICAgLy8gdGhlIGpzb24KICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAg
        ICAvLyB0aGUgcmVhc29uIHdoeSB5b3UgaGF2ZSBubyBqc29uCiAgfSk7CiAg
        YGBgCgogIHRoZSBjb250cm9sbGVyIGhhcyBiaW5kYWJsZSBhdHRyaWJ1dGVz
        IHdoaWNoCiAgdHJhY2sgdGhlIHByb21pc2VzIGxpZmUgY3ljbGUKCiAgYGBg
        amF2YXNjcmlwdAogIGNvbnRyb2xsZXIuZ2V0KCdpc1BlbmRpbmcnKSAgIC8v
        PT4gdHJ1ZQogIGNvbnRyb2xsZXIuZ2V0KCdpc1NldHRsZWQnKSAgLy89PiBm
        YWxzZQogIGNvbnRyb2xsZXIuZ2V0KCdpc1JlamVjdGVkJykgIC8vPT4gZmFs
        c2UKICBjb250cm9sbGVyLmdldCgnaXNGdWxmaWxsZWQnKSAvLz0+IGZhbHNl
        CiAgYGBgCgogIFdoZW4gdGhlIHRoZSAkLmdldEpTT04gY29tcGxldGVzLCBh
        bmQgdGhlIHByb21pc2UgaXMgZnVsZmlsbGVkCiAgd2l0aCBqc29uLCB0aGUg
        bGlmZSBjeWNsZSBhdHRyaWJ1dGVzIHdpbGwgdXBkYXRlIGFjY29yZGluZ2x5
        LgoKICBgYGBqYXZhc2NyaXB0CiAgY29udHJvbGxlci5nZXQoJ2lzUGVuZGlu
        ZycpICAgLy89PiBmYWxzZQogIGNvbnRyb2xsZXIuZ2V0KCdpc1NldHRsZWQn
        KSAgIC8vPT4gdHJ1ZQogIGNvbnRyb2xsZXIuZ2V0KCdpc1JlamVjdGVkJykg
        IC8vPT4gZmFsc2UKICBjb250cm9sbGVyLmdldCgnaXNGdWxmaWxsZWQnKSAv
        Lz0+IHRydWUKICBgYGAKCiAgQXMgdGhlIGNvbnRyb2xsZXIgaXMgYW4gT2Jq
        ZWN0Q29udHJvbGxlciwgYW5kIHRoZSBqc29uIG5vdyBpdHMgY29udGVudCwK
        ICBhbGwgdGhlIGpzb24gcHJvcGVydGllcyB3aWxsIGJlIGF2YWlsYWJsZSBk
        aXJlY3RseSBmcm9tIHRoZSBjb250cm9sbGVyLgoKICBgYGBqYXZhc2NyaXB0
        CiAgLy8gQXNzdW1pbmcgdGhlIGZvbGxvd2luZyBqc29uOgogIHsKICAgIGZp
        cnN0TmFtZTogJ1N0ZWZhbicsCiAgICBsYXN0TmFtZTogJ1Blbm5lcicKICB9
        CgogIC8vIGJvdGggcHJvcGVydGllcyB3aWxsIGFjY2Vzc2libGUgb24gdGhl
        IGNvbnRyb2xsZXIKICBjb250cm9sbGVyLmdldCgnZmlyc3ROYW1lJykgLy89
        PiAnU3RlZmFuJwogIGNvbnRyb2xsZXIuZ2V0KCdsYXN0TmFtZScpICAvLz0+
        ICdQZW5uZXInCiAgYGBgCgogIElmIHRoZSBjb250cm9sbGVyIGlzIGJhY2tp
        bmcgYSB0ZW1wbGF0ZSwgdGhlIGF0dHJpYnV0ZXMgYXJlIAogIGJpbmRhYmxl
        IGZyb20gd2l0aGluIHRoYXQgdGVtcGxhdGUKCiAgYGBgaGFuZGxlYmFycwog
        IHt7I2lmIGlzUGVuZGluZ319CiAgICBsb2FkaW5nLi4uCiAge3tlbHNlfX0K
        ICAgIGZpcnN0TmFtZToge3tmaXJzdE5hbWV9fQogICAgbGFzdE5hbWU6IHt7
        bGFzdE5hbWV9fQogIHt7L2lmfX0KICBgYGAKICBAY2xhc3MgRW1iZXIuUHJv
        bWlzZVByb3h5TWl4aW4KKi8KRW1iZXIuUHJvbWlzZVByb3h5TWl4aW4gPSBF
        bWJlci5NaXhpbi5jcmVhdGUoewogIHJlYXNvbjogICAgbnVsbCwKICBpc1Bl
        bmRpbmc6ICBub3QoJ2lzU2V0dGxlZCcpLnJlYWRPbmx5KCksCiAgaXNTZXR0
        bGVkOiAgb3IoJ2lzUmVqZWN0ZWQnLCAnaXNGdWxmaWxsZWQnKS5yZWFkT25s
        eSgpLAogIGlzUmVqZWN0ZWQ6ICBmYWxzZSwKICBpc0Z1bGZpbGxlZDogZmFs
        c2UsCgogIHByb21pc2U6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwg
        cHJvbWlzZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsK
        ICAgICAgcHJvbWlzZSA9IHJlc29sdmUocHJvbWlzZSk7CiAgICAgIGluc3Rh
        bGxQcm9taXNlKHRoaXMsIHByb21pc2UpOwogICAgICByZXR1cm4gcHJvbWlz
        ZTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigi
        UHJvbWlzZVByb3h5J3MgcHJvbWlzZSBtdXN0IGJlIHNldCIpOwogICAgfQog
        IH0pLAoKICB0aGVuOiBmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHsKICAg
        IHJldHVybiBnZXQodGhpcywgJ3Byb21pc2UnKS50aGVuKGZ1bGZpbGwsIHJl
        amVjdCk7CiAgfQp9KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBm
        b3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICBS
        RVRBSU4gPSAncicsCiAgICBJTlNFUlQgPSAnaScsCiAgICBERUxFVEUgPSAn
        ZCc7CgovKioKICBBbiBgRW1iZXIuVHJhY2tlZEFycmF5YCB0cmFja3MgYXJy
        YXkgb3BlcmF0aW9ucy4gIEl0J3MgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8K
        ICBsYXppbHkgY29tcHV0ZSB0aGUgaW5kZXhlcyBvZiBpdGVtcyBpbiBhbiBh
        cnJheSBhZnRlciB0aGV5J3ZlIGJlZW4gc2hpZnRlZCBieQogIHN1YnNlcXVl
        bnQgb3BlcmF0aW9ucy4KCiAgQGNsYXNzIFRyYWNrZWRBcnJheQogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAcGFyYW0ge2FycmF5fSBbaXRlbXM9W11dIFRoZSBh
        cnJheSB0byBiZSB0cmFja2VkLiAgVGhpcyBpcyB1c2VkIGp1c3QgdG8gZ2V0
        CiAgdGhlIGluaXRpYWwgaXRlbXMgZm9yIHRoZSBzdGFydGluZyBzdGF0ZSBv
        ZiByZXRhaW46bi4KKi8KRW1iZXIuVHJhY2tlZEFycmF5ID0gZnVuY3Rpb24g
        KGl0ZW1zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7IGl0ZW1z
        ID0gW107IH0KCiAgdmFyIGxlbmd0aCA9IGdldChpdGVtcywgJ2xlbmd0aCcp
        OwoKICBpZiAobGVuZ3RoKSB7CiAgICB0aGlzLl9vcGVyYXRpb25zID0gW25l
        dyBBcnJheU9wZXJhdGlvbihSRVRBSU4sIGxlbmd0aCwgaXRlbXMpXTsKICB9
        IGVsc2UgewogICAgdGhpcy5fb3BlcmF0aW9ucyA9IFtdOwogIH0KfTsKCkVt
        YmVyLlRyYWNrZWRBcnJheS5SRVRBSU4gPSBSRVRBSU47CkVtYmVyLlRyYWNr
        ZWRBcnJheS5JTlNFUlQgPSBJTlNFUlQ7CkVtYmVyLlRyYWNrZWRBcnJheS5E
        RUxFVEUgPSBERUxFVEU7CgpFbWJlci5UcmFja2VkQXJyYXkucHJvdG90eXBl
        ID0gewoKICAvKioKICAgIFRyYWNrIHRoYXQgYG5ld0l0ZW1zYCB3ZXJlIGFk
        ZGVkIHRvIHRoZSB0cmFja2VkIGFycmF5IGF0IGBpbmRleGAuCgogICAgQG1l
        dGhvZCBhZGRJdGVtcwogICAgQHBhcmFtIGluZGV4CiAgICBAcGFyYW0gbmV3
        SXRlbXMKICAqLwogIGFkZEl0ZW1zOiBmdW5jdGlvbiAoaW5kZXgsIG5ld0l0
        ZW1zKSB7CiAgICB2YXIgY291bnQgPSBnZXQobmV3SXRlbXMsICdsZW5ndGgn
        KTsKICAgIGlmIChjb3VudCA8IDEpIHsgcmV0dXJuOyB9CgogICAgdmFyIG1h
        dGNoID0gdGhpcy5fZmluZEFycmF5T3BlcmF0aW9uKGluZGV4KSwKICAgICAg
        ICBhcnJheU9wZXJhdGlvbiA9IG1hdGNoLm9wZXJhdGlvbiwKICAgICAgICBh
        cnJheU9wZXJhdGlvbkluZGV4ID0gbWF0Y2guaW5kZXgsCiAgICAgICAgYXJy
        YXlPcGVyYXRpb25SYW5nZVN0YXJ0ID0gbWF0Y2gucmFuZ2VTdGFydCwKICAg
        ICAgICBjb21wb3NlSW5kZXgsCiAgICAgICAgc3BsaXRJbmRleCwKICAgICAg
        ICBzcGxpdEl0ZW1zLAogICAgICAgIHNwbGl0QXJyYXlPcGVyYXRpb24sCiAg
        ICAgICAgbmV3QXJyYXlPcGVyYXRpb247CgogICAgbmV3QXJyYXlPcGVyYXRp
        b24gPSBuZXcgQXJyYXlPcGVyYXRpb24oSU5TRVJULCBjb3VudCwgbmV3SXRl
        bXMpOwoKICAgIGlmIChhcnJheU9wZXJhdGlvbikgewogICAgICBpZiAoIW1h
        dGNoLnNwbGl0KSB7CiAgICAgICAgLy8gaW5zZXJ0IGxlZnQgb2YgYXJyYXlP
        cGVyYXRpb24KICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShhcnJh
        eU9wZXJhdGlvbkluZGV4LCAwLCBuZXdBcnJheU9wZXJhdGlvbik7CiAgICAg
        ICAgY29tcG9zZUluZGV4ID0gYXJyYXlPcGVyYXRpb25JbmRleDsKICAgICAg
        fSBlbHNlIHsKICAgICAgICB0aGlzLl9zcGxpdChhcnJheU9wZXJhdGlvbklu
        ZGV4LCBpbmRleCAtIGFycmF5T3BlcmF0aW9uUmFuZ2VTdGFydCwgbmV3QXJy
        YXlPcGVyYXRpb24pOwogICAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5T3Bl
        cmF0aW9uSW5kZXggKyAxOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAv
        LyBpbnNlcnQgYXQgZW5kCiAgICAgIHRoaXMuX29wZXJhdGlvbnMucHVzaChu
        ZXdBcnJheU9wZXJhdGlvbik7CiAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5
        T3BlcmF0aW9uSW5kZXg7CiAgICB9CgogICAgdGhpcy5fY29tcG9zZUluc2Vy
        dChjb21wb3NlSW5kZXgpOwogIH0sCgogIC8qKgogICAgVHJhY2sgdGhhdCBg
        Y291bnRgIGl0ZW1zIHdlcmUgcmVtb3ZlZCBhdCBgaW5kZXhgLgoKICAgIEBt
        ZXRob2QgcmVtb3ZlSXRlbXMKICAgIEBwYXJhbSBpbmRleAogICAgQHBhcmFt
        IGNvdW50CiAgKi8KICByZW1vdmVJdGVtczogZnVuY3Rpb24gKGluZGV4LCBj
        b3VudCkgewogICAgaWYgKGNvdW50IDwgMSkgeyByZXR1cm47IH0KCiAgICB2
        YXIgbWF0Y2ggPSB0aGlzLl9maW5kQXJyYXlPcGVyYXRpb24oaW5kZXgpLAog
        ICAgICAgIGFycmF5T3BlcmF0aW9uID0gbWF0Y2gub3BlcmF0aW9uLAogICAg
        ICAgIGFycmF5T3BlcmF0aW9uSW5kZXggPSBtYXRjaC5pbmRleCwKICAgICAg
        ICBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQgPSBtYXRjaC5yYW5nZVN0YXJ0
        LAogICAgICAgIG5ld0FycmF5T3BlcmF0aW9uLAogICAgICAgIGNvbXBvc2VJ
        bmRleDsKCiAgICBuZXdBcnJheU9wZXJhdGlvbiA9IG5ldyBBcnJheU9wZXJh
        dGlvbihERUxFVEUsIGNvdW50KTsKICAgIGlmICghbWF0Y2guc3BsaXQpIHsK
        ICAgICAgLy8gaW5zZXJ0IGxlZnQgb2YgYXJyYXlPcGVyYXRpb24KICAgICAg
        dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVyYXRpb25JbmRleCwg
        MCwgbmV3QXJyYXlPcGVyYXRpb24pOwogICAgICBjb21wb3NlSW5kZXggPSBh
        cnJheU9wZXJhdGlvbkluZGV4OwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5f
        c3BsaXQoYXJyYXlPcGVyYXRpb25JbmRleCwgaW5kZXggLSBhcnJheU9wZXJh
        dGlvblJhbmdlU3RhcnQsIG5ld0FycmF5T3BlcmF0aW9uKTsKICAgICAgY29t
        cG9zZUluZGV4ID0gYXJyYXlPcGVyYXRpb25JbmRleCArIDE7CiAgICB9Cgog
        ICAgcmV0dXJuIHRoaXMuX2NvbXBvc2VEZWxldGUoY29tcG9zZUluZGV4KTsK
        ICB9LAoKICAvKioKICAgIEFwcGx5IGFsbCBvcGVyYXRpb25zLCByZWR1Y2lu
        ZyB0aGVtIHRvIHJldGFpbjpuLCBmb3IgYG5gLCB0aGUgbnVtYmVyIG9mCiAg
        ICBpdGVtcyBpbiB0aGUgYXJyYXkuCgogICAgYGNhbGxiYWNrYCB3aWxsIGJl
        IGNhbGxlZCBmb3IgZWFjaCBvcGVyYXRpb24gYW5kIHdpbGwgYmUgcGFzc2Vk
        IHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOgogICAgICAqIHthcnJheX0gaXRl
        bXMgVGhlIGl0ZW1zIGZvciB0aGUgZ2l2ZW4gb3BlcmF0aW9uCiAgICAgICog
        e251bWJlcn0gb2Zmc2V0IFRoZSBjb21wdXRlZCBvZmZzZXQgb2YgdGhlIGl0
        ZW1zLCBpZSB0aGUgaW5kZXggaW4gdGhlCiAgICAgIGFycmF5IG9mIHRoZSBm
        aXJzdCBpdGVtIGZvciB0aGlzIG9wZXJhdGlvbi4KICAgICAgKiB7c3RyaW5n
        fSBvcGVyYXRpb24gVGhlIHR5cGUgb2YgdGhlIG9wZXJhdGlvbi4gIE9uZSBv
        ZgogICAgICBgRW1iZXIuVHJhY2tlZEFycmF5LntSRVRBSU4sIERFTEVURSwg
        SU5TRVJUfWAKCiAgICBAbWV0aG9kIGFwcGx5CiAgICBAcGFyYW0ge2Z1bmN0
        aW9ufSBjYWxsYmFjawogICovCiAgYXBwbHk6IGZ1bmN0aW9uIChjYWxsYmFj
        aykgewogICAgdmFyIGl0ZW1zID0gW10sCiAgICAgICAgb2Zmc2V0ID0gMDsK
        CiAgICBmb3JFYWNoKHRoaXMuX29wZXJhdGlvbnMsIGZ1bmN0aW9uIChhcnJh
        eU9wZXJhdGlvbikgewogICAgICBjYWxsYmFjayhhcnJheU9wZXJhdGlvbi5p
        dGVtcywgb2Zmc2V0LCBhcnJheU9wZXJhdGlvbi50eXBlKTsKCiAgICAgIGlm
        IChhcnJheU9wZXJhdGlvbi50eXBlICE9PSBERUxFVEUpIHsKICAgICAgICBv
        ZmZzZXQgKz0gYXJyYXlPcGVyYXRpb24uY291bnQ7CiAgICAgICAgaXRlbXMg
        PSBpdGVtcy5jb25jYXQoYXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICB9
        CiAgICB9KTsKCiAgICB0aGlzLl9vcGVyYXRpb25zID0gW25ldyBBcnJheU9w
        ZXJhdGlvbihSRVRBSU4sIGl0ZW1zLmxlbmd0aCwgaXRlbXMpXTsKICB9LAoK
        ICAvKioKICAgIFJldHVybiBhbiBBcnJheU9wZXJhdGlvbk1hdGNoIGZvciB0
        aGUgb3BlcmF0aW9uIHRoYXQgY29udGFpbnMgdGhlIGl0ZW0gYXQgYGluZGV4
        YC4KCiAgICBAbWV0aG9kIF9maW5kQXJyYXlPcGVyYXRpb24KCiAgICBAcGFy
        YW0ge251bWJlcn0gaW5kZXggdGhlIGluZGV4IG9mIHRoZSBpdGVtIHdob3Nl
        IG9wZXJhdGlvbiBpbmZvcm1hdGlvbgogICAgc2hvdWxkIGJlIHJldHVybmVk
        LgogICAgQHByaXZhdGUKICAqLwogIF9maW5kQXJyYXlPcGVyYXRpb246IGZ1
        bmN0aW9uIChpbmRleCkgewogICAgdmFyIGFycmF5T3BlcmF0aW9uSW5kZXgs
        CiAgICAgICAgbGVuLAogICAgICAgIHNwbGl0ID0gZmFsc2UsCiAgICAgICAg
        YXJyYXlPcGVyYXRpb24sCiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0
        YXJ0LAogICAgICAgIGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQ7CgogICAgLy8g
        T1BUSU1JWkU6IHdlIGNvdWxkIHNlYXJjaCB0aGVzZSBmYXN0ZXIgaWYgd2Ug
        a2VwdCBhIGJhbGFuY2VkIHRyZWUuCiAgICAvLyBmaW5kIGxlZnRtb3N0IGFy
        cmF5T3BlcmF0aW9uIHRvIHRoZSByaWdodCBvZiBgaW5kZXhgCiAgICBmb3Ig
        KGFycmF5T3BlcmF0aW9uSW5kZXggPSBhcnJheU9wZXJhdGlvblJhbmdlU3Rh
        cnQgPSAwLCBsZW4gPSB0aGlzLl9vcGVyYXRpb25zLmxlbmd0aDsgYXJyYXlP
        cGVyYXRpb25JbmRleCA8IGxlbjsgKythcnJheU9wZXJhdGlvbkluZGV4KSB7
        CiAgICAgIGFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1thcnJh
        eU9wZXJhdGlvbkluZGV4XTsKCiAgICAgIGlmIChhcnJheU9wZXJhdGlvbi50
        eXBlID09PSBERUxFVEUpIHsgY29udGludWU7IH0KCiAgICAgIGFycmF5T3Bl
        cmF0aW9uUmFuZ2VFbmQgPSBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQgKyBh
        cnJheU9wZXJhdGlvbi5jb3VudCAtIDE7CgogICAgICBpZiAoaW5kZXggPT09
        IGFycmF5T3BlcmF0aW9uUmFuZ2VTdGFydCkgewogICAgICAgIGJyZWFrOwog
        ICAgICB9IGVsc2UgaWYgKGluZGV4ID4gYXJyYXlPcGVyYXRpb25SYW5nZVN0
        YXJ0ICYmIGluZGV4IDw9IGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQpIHsKICAg
        ICAgICBzcGxpdCA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0ID0gYXJyYXlP
        cGVyYXRpb25SYW5nZUVuZCArIDE7CiAgICAgIH0KICAgIH0KCiAgICByZXR1
        cm4gbmV3IEFycmF5T3BlcmF0aW9uTWF0Y2goYXJyYXlPcGVyYXRpb24sIGFy
        cmF5T3BlcmF0aW9uSW5kZXgsIHNwbGl0LCBhcnJheU9wZXJhdGlvblJhbmdl
        U3RhcnQpOwogIH0sCgogIF9zcGxpdDogZnVuY3Rpb24gKGFycmF5T3BlcmF0
        aW9uSW5kZXgsIHNwbGl0SW5kZXgsIG5ld0FycmF5T3BlcmF0aW9uKSB7CiAg
        ICB2YXIgYXJyYXlPcGVyYXRpb24gPSB0aGlzLl9vcGVyYXRpb25zW2FycmF5
        T3BlcmF0aW9uSW5kZXhdLAogICAgICAgIHNwbGl0SXRlbXMgPSBhcnJheU9w
        ZXJhdGlvbi5pdGVtcy5zbGljZShzcGxpdEluZGV4KSwKICAgICAgICBzcGxp
        dEFycmF5T3BlcmF0aW9uID0gbmV3IEFycmF5T3BlcmF0aW9uKGFycmF5T3Bl
        cmF0aW9uLnR5cGUsIHNwbGl0SXRlbXMubGVuZ3RoLCBzcGxpdEl0ZW1zKTsK
        CiAgICAvLyB0cnVuY2F0ZSBMSFMKICAgIGFycmF5T3BlcmF0aW9uLmNvdW50
        ID0gc3BsaXRJbmRleDsKICAgIGFycmF5T3BlcmF0aW9uLml0ZW1zID0gYXJy
        YXlPcGVyYXRpb24uaXRlbXMuc2xpY2UoMCwgc3BsaXRJbmRleCk7CgogICAg
        dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVyYXRpb25JbmRleCAr
        IDEsIDAsIG5ld0FycmF5T3BlcmF0aW9uLCBzcGxpdEFycmF5T3BlcmF0aW9u
        KTsKICB9LAoKICAvLyBzZWUgU3ViQXJyYXkgZm9yIGEgYmV0dGVyIGltcGxl
        bWVudGF0aW9uLgogIF9jb21wb3NlSW5zZXJ0OiBmdW5jdGlvbiAoaW5kZXgp
        IHsKICAgIHZhciBuZXdBcnJheU9wZXJhdGlvbiA9IHRoaXMuX29wZXJhdGlv
        bnNbaW5kZXhdLAogICAgICAgIGxlZnRBcnJheU9wZXJhdGlvbiA9IHRoaXMu
        X29wZXJhdGlvbnNbaW5kZXgtMV0sIC8vIG1heSBiZSB1bmRlZmluZWQKICAg
        ICAgICByaWdodEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tp
        bmRleCsxXSwgLy8gbWF5IGJlIHVuZGVmaW5lZAogICAgICAgIGxlZnRPcCA9
        IGxlZnRBcnJheU9wZXJhdGlvbiAmJiBsZWZ0QXJyYXlPcGVyYXRpb24udHlw
        ZSwKICAgICAgICByaWdodE9wID0gcmlnaHRBcnJheU9wZXJhdGlvbiAmJiBy
        aWdodEFycmF5T3BlcmF0aW9uLnR5cGU7CgogICAgaWYgKGxlZnRPcCA9PT0g
        SU5TRVJUKSB7CiAgICAgICAgLy8gbWVyZ2UgbGVmdAogICAgICAgIGxlZnRB
        cnJheU9wZXJhdGlvbi5jb3VudCArPSBuZXdBcnJheU9wZXJhdGlvbi5jb3Vu
        dDsKICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJy
        YXlPcGVyYXRpb24uaXRlbXMuY29uY2F0KG5ld0FycmF5T3BlcmF0aW9uLml0
        ZW1zKTsKCiAgICAgIGlmIChyaWdodE9wID09PSBJTlNFUlQpIHsKICAgICAg
        ICAvLyBhbHNvIG1lcmdlIHJpZ2h0ICh3ZSBoYXZlIHNwbGl0IGFuIGluc2Vy
        dCB3aXRoIGFuIGluc2VydCkKICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24u
        Y291bnQgKz0gcmlnaHRBcnJheU9wZXJhdGlvbi5jb3VudDsKICAgICAgICBs
        ZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJyYXlPcGVyYXRpb24u
        aXRlbXMuY29uY2F0KHJpZ2h0QXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAg
        ICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LCAyKTsKICAgICAg
        fSBlbHNlIHsKICAgICAgICAvLyBvbmx5IG1lcmdlIGxlZnQKICAgICAgICB0
        aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAg
        IH0gZWxzZSBpZiAocmlnaHRPcCA9PT0gSU5TRVJUKSB7CiAgICAgIC8vIG1l
        cmdlIHJpZ2h0CiAgICAgIG5ld0FycmF5T3BlcmF0aW9uLmNvdW50ICs9IHJp
        Z2h0QXJyYXlPcGVyYXRpb24uY291bnQ7CiAgICAgIG5ld0FycmF5T3BlcmF0
        aW9uLml0ZW1zID0gbmV3QXJyYXlPcGVyYXRpb24uaXRlbXMuY29uY2F0KHJp
        Z2h0QXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICB0aGlzLl9vcGVyYXRp
        b25zLnNwbGljZShpbmRleCArIDEsIDEpOwogICAgfQogIH0sCgogIF9jb21w
        b3NlRGVsZXRlOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBhcnJheU9w
        ZXJhdGlvbiA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIGRl
        bGV0ZXNUb0dvID0gYXJyYXlPcGVyYXRpb24uY291bnQsCiAgICAgICAgbGVm
        dEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpbmRleC0xXSwg
        Ly8gbWF5IGJlIHVuZGVmaW5lZAogICAgICAgIGxlZnRPcCA9IGxlZnRBcnJh
        eU9wZXJhdGlvbiAmJiBsZWZ0QXJyYXlPcGVyYXRpb24udHlwZSwKICAgICAg
        ICBuZXh0QXJyYXlPcGVyYXRpb24sCiAgICAgICAgbmV4dE9wLAogICAgICAg
        IG5leHRDb3VudCwKICAgICAgICByZW1vdmVOZXdBbmROZXh0T3AgPSBmYWxz
        ZSwKICAgICAgICByZW1vdmVkSXRlbXMgPSBbXTsKCiAgICBpZiAobGVmdE9w
        ID09PSBERUxFVEUpIHsKICAgICAgYXJyYXlPcGVyYXRpb24gPSBsZWZ0QXJy
        YXlPcGVyYXRpb247CiAgICAgIGluZGV4IC09IDE7CiAgICB9CgogICAgZm9y
        ICh2YXIgaSA9IGluZGV4ICsgMTsgZGVsZXRlc1RvR28gPiAwOyArK2kpIHsK
        ICAgICAgbmV4dEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tp
        XTsKICAgICAgbmV4dE9wID0gbmV4dEFycmF5T3BlcmF0aW9uLnR5cGU7CiAg
        ICAgIG5leHRDb3VudCA9IG5leHRBcnJheU9wZXJhdGlvbi5jb3VudDsKCiAg
        ICAgIGlmIChuZXh0T3AgPT09IERFTEVURSkgewogICAgICAgIGFycmF5T3Bl
        cmF0aW9uLmNvdW50ICs9IG5leHRDb3VudDsKICAgICAgICBjb250aW51ZTsK
        ICAgICAgfQoKICAgICAgaWYgKG5leHRDb3VudCA+IGRlbGV0ZXNUb0dvKSB7
        CiAgICAgICAgLy8gZDoyIHtyLGl9OjUgIHdlIHJlZHVjZSB0aGUgcmV0YWlu
        IG9yIGluc2VydCwgYnV0IGl0IHN0YXlzCiAgICAgICAgcmVtb3ZlZEl0ZW1z
        ID0gcmVtb3ZlZEl0ZW1zLmNvbmNhdChuZXh0QXJyYXlPcGVyYXRpb24uaXRl
        bXMuc3BsaWNlKDAsIGRlbGV0ZXNUb0dvKSk7CiAgICAgICAgbmV4dEFycmF5
        T3BlcmF0aW9uLmNvdW50IC09IGRlbGV0ZXNUb0dvOwoKICAgICAgICAvLyBJ
        biB0aGUgY2FzZSB3aGVyZSB3ZSB0cnVuY2F0ZSB0aGUgbGFzdCBhcnJheU9w
        ZXJhdGlvbiwgd2UgZG9uJ3QgbmVlZCB0bwogICAgICAgIC8vIHJlbW92ZSBp
        dDsgYWxzbyB0aGUgZGVsZXRlc1RvR28gcmVkdWN0aW9uIGlzIG5vdCB0aGUg
        ZW50aXJldHkgb2YKICAgICAgICAvLyBuZXh0Q291bnQKICAgICAgICBpIC09
        IDE7CiAgICAgICAgbmV4dENvdW50ID0gZGVsZXRlc1RvR287CgogICAgICAg
        IGRlbGV0ZXNUb0dvID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAo
        bmV4dENvdW50ID09PSBkZWxldGVzVG9HbykgewogICAgICAgICAgLy8gSGFu
        ZGxlIGVkZ2UgY2FzZSBvZiBkOjIgaToyIGluIHdoaWNoIGNhc2UgYm90aCBv
        cGVyYXRpb25zIGdvIGF3YXkKICAgICAgICAgIC8vIGR1cmluZyBjb21wb3Np
        dGlvbi4KICAgICAgICAgIHJlbW92ZU5ld0FuZE5leHRPcCA9IHRydWU7CiAg
        ICAgICAgfQogICAgICAgIHJlbW92ZWRJdGVtcyA9IHJlbW92ZWRJdGVtcy5j
        b25jYXQobmV4dEFycmF5T3BlcmF0aW9uLml0ZW1zKTsKICAgICAgICBkZWxl
        dGVzVG9HbyAtPSBuZXh0Q291bnQ7CiAgICAgIH0KCiAgICAgIGlmIChuZXh0
        T3AgPT09IElOU0VSVCkgewogICAgICAgIC8vIGQ6MiBpOjMgd2lsbCByZXN1
        bHQgaW4gZGVsZXRlIGdvaW5nIGF3YXkKICAgICAgICBhcnJheU9wZXJhdGlv
        bi5jb3VudCAtPSBuZXh0Q291bnQ7CiAgICAgIH0KICAgIH0KCiAgICBpZiAo
        YXJyYXlPcGVyYXRpb24uY291bnQgPiAwKSB7CiAgICAgIC8vIGNvbXBvc2Ug
        b3VyIG5ldyBkZWxldGUgd2l0aCBwb3NzaWJseSBzZXZlcmFsIG9wZXJhdGlv
        bnMgdG8gdGhlIHJpZ2h0IG9mCiAgICAgIC8vIGRpc3BhcmF0ZSB0eXBlcwog
        ICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCsxLCBpLTEtaW5k
        ZXgpOwogICAgfSBlbHNlIHsKICAgICAgLy8gVGhlIGRlbGV0ZSBvcGVyYXRp
        b24gY2FuIGdvIGF3YXk7IGl0IGhhcyBtZXJlbHkgcmVkdWNlZCBzb21lIG90
        aGVyCiAgICAgIC8vIG9wZXJhdGlvbiwgYXMgaW4gZDozIGk6NDsgaXQgbWF5
        IGFsc28gaGF2ZSBlbGltaW5hdGVkIHRoYXQgb3BlcmF0aW9uLAogICAgICAv
        LyBhcyBpbiBkOjMgaTozLgogICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGlj
        ZShpbmRleCwgcmVtb3ZlTmV3QW5kTmV4dE9wID8gMiA6IDEpOwogICAgfQoK
        ICAgIHJldHVybiByZW1vdmVkSXRlbXM7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1
        bmN0aW9uICgpIHsKICAgIHZhciBzdHIgPSAiIjsKICAgIGZvckVhY2godGhp
        cy5fb3BlcmF0aW9ucywgZnVuY3Rpb24gKG9wZXJhdGlvbikgewogICAgICBz
        dHIgKz0gIiAiICsgb3BlcmF0aW9uLnR5cGUgKyAiOiIgKyBvcGVyYXRpb24u
        Y291bnQ7CiAgICB9KTsKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDEpOwog
        IH0KfTsKCi8qKgogIEludGVybmFsIGRhdGEgc3RydWN0dXJlIHRvIHJlcHJl
        c2VudCBhbiBhcnJheSBvcGVyYXRpb24uCgogIEBtZXRob2QgQXJyYXlPcGVy
        YXRpb24KICBAcHJpdmF0ZQogIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRo
        ZSB0eXBlIG9mIHRoZSBvcGVyYXRpb24uICBPbmUgb2YKICBgRW1iZXIuVHJh
        Y2tlZEFycmF5LntSRVRBSU4sIElOU0VSVCwgREVMRVRFfWAKICBAcHJvcGVy
        dHkge251bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGlz
        IG9wZXJhdGlvbi4KICBAcHJvcGVydHkge2FycmF5fSBpdGVtcyBUaGUgaXRl
        bXMgb2YgdGhlIG9wZXJhdGlvbiwgaWYgaW5jbHVkZWQuICBSRVRBSU4gYW5k
        CiAgSU5TRVJUIGluY2x1ZGUgdGhlaXIgaXRlbXMsIERFTEVURSBkb2VzIG5v
        dC4KKi8KZnVuY3Rpb24gQXJyYXlPcGVyYXRpb24gKG9wZXJhdGlvbiwgY291
        bnQsIGl0ZW1zKSB7CiAgdGhpcy50eXBlID0gb3BlcmF0aW9uOyAvLyBSRVRB
        SU4gfCBJTlNFUlQgfCBERUxFVEUKICB0aGlzLmNvdW50ID0gY291bnQ7CiAg
        dGhpcy5pdGVtcyA9IGl0ZW1zOwp9CgovKioKICBJbnRlcm5hbCBkYXRhIHN0
        cnVjdHVyZSB1c2VkIHRvIGluY2x1ZGUgaW5mb3JtYXRpb24gd2hlbiBsb29r
        aW5nIHVwIG9wZXJhdGlvbnMKICBieSBpdGVtIGluZGV4LgoKICBAbWV0aG9k
        IEFycmF5T3BlcmF0aW9uTWF0Y2gKICBAcHJpdmF0ZQogIEBwcm9wZXJ0eSB7
        QXJyYXlPcGVyYXRpb259IG9wZXJhdGlvbgogIEBwcm9wZXJ0eSB7bnVtYmVy
        fSBpbmRleCBUaGUgaW5kZXggb2YgYG9wZXJhdGlvbmAgaW4gdGhlIGFycmF5
        IG9mIG9wZXJhdGlvbnMuCiAgQHByb3BlcnR5IHtib29sZWFufSBzcGxpdCBX
        aGV0aGVyIG9yIG5vdCB0aGUgaXRlbSBpbmRleCBzZWFyY2hlZCBmb3Igd291
        bGQKICByZXF1aXJlIGEgc3BsaXQgZm9yIGEgbmV3IG9wZXJhdGlvbiB0eXBl
        LgogIEBwcm9wZXJ0eSB7bnVtYmVyfSByYW5nZVN0YXJ0IFRoZSBpbmRleCBv
        ZiB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgb3BlcmF0aW9uLAogIHdpdGggcmVz
        cGVjdCB0byB0aGUgdHJhY2tlZCBhcnJheS4gIFRoZSBpbmRleCBvZiB0aGUg
        bGFzdCBpdGVtIGNhbiBiZSBjb21wdXRlZAogIGZyb20gYHJhbmdlU3RhcnRg
        IGFuZCBgb3BlcmF0aW9uLmNvdW50YC4KKi8KZnVuY3Rpb24gQXJyYXlPcGVy
        YXRpb25NYXRjaChvcGVyYXRpb24sIGluZGV4LCBzcGxpdCwgcmFuZ2VTdGFy
        dCkgewogIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uOwogIHRoaXMuaW5k
        ZXggPSBpbmRleDsKICB0aGlzLnNwbGl0ID0gc3BsaXQ7CiAgdGhpcy5yYW5n
        ZVN0YXJ0ID0gcmFuZ2VTdGFydDsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewp2YXIgZ2V0ID0gRW1iZXIuZ2V0LAogICAgZm9yRWFjaCA9IEVtYmVyLkVu
        dW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgUkVUQUlOID0gJ3InLAogICAg
        RklMVEVSID0gJ2YnOwoKZnVuY3Rpb24gT3BlcmF0aW9uICh0eXBlLCBjb3Vu
        dCkgewogIHRoaXMudHlwZSA9IHR5cGU7CiAgdGhpcy5jb3VudCA9IGNvdW50
        Owp9CgovKioKICBBbiBgRW1iZXIuU3ViQXJyYXlgIHRyYWNrcyBhbiBhcnJh
        eSBpbiBhIHdheSBzaW1pbGFyIHRvLCBidXQgbW9yZSBzcGVjaWFsaXplZAog
        IHRoYW4sIGBFbWJlci5UcmFja2VkQXJyYXlgLiAgSXQgaXMgdXNlZnVsIGZv
        ciBrZWVwaW5nIHRyYWNrIG9mIHRoZSBpbmRleGVzIG9mCiAgaXRlbXMgd2l0
        aGluIGEgZmlsdGVyZWQgYXJyYXkuCgogIEBjbGFzcyBTdWJBcnJheQogIEBu
        YW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuU3ViQXJyYXkgPSBmdW5jdGlvbiAo
        bGVuZ3RoKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7IGxlbmd0
        aCA9IDA7IH0KCiAgaWYgKGxlbmd0aCA+IDApIHsKICAgIHRoaXMuX29wZXJh
        dGlvbnMgPSBbbmV3IE9wZXJhdGlvbihSRVRBSU4sIGxlbmd0aCldOwogIH0g
        ZWxzZSB7CiAgICB0aGlzLl9vcGVyYXRpb25zID0gW107CiAgfQp9OwoKRW1i
        ZXIuU3ViQXJyYXkucHJvdG90eXBlID0gewogIC8qKgogICAgVHJhY2sgdGhh
        dCBhbiBpdGVtIHdhcyBhZGRlZCB0byB0aGUgdHJhY2tlZCBhcnJheS4KCiAg
        ICBAbWV0aG9kIGFkZEl0ZW0KCiAgICBAcGFyYW0ge251bWJlcn0gaW5kZXgg
        VGhlIGluZGV4IG9mIHRoZSBpdGVtIGluIHRoZSB0cmFja2VkIGFycmF5Lgog
        ICAgQHBhcmFtIHtib29sZWFufSBtYXRjaCBgdHJ1ZWAgaWZmIHRoZSBpdGVt
        IGlzIGluY2x1ZGVkIGluIHRoZSBzdWJhcnJheS4KCiAgICBAcmV0dXJuIHtu
        dW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgaXRlbSBpbiB0aGUgc3ViYXJyYXku
        CiAgKi8KICBhZGRJdGVtOiBmdW5jdGlvbihpbmRleCwgbWF0Y2gpIHsKICAg
        IHZhciByZXR1cm5WYWx1ZSA9IC0xLAogICAgICAgIGl0ZW1UeXBlID0gbWF0
        Y2ggPyBSRVRBSU4gOiBGSUxURVIsCiAgICAgICAgc2VsZiA9IHRoaXM7Cgog
        ICAgdGhpcy5fZmluZE9wZXJhdGlvbihpbmRleCwgZnVuY3Rpb24ob3BlcmF0
        aW9uLCBvcGVyYXRpb25JbmRleCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHNl
        ZW5JblN1YkFycmF5KSB7CiAgICAgIHZhciBuZXdPcGVyYXRpb24sIHNwbGl0
        T3BlcmF0aW9uOwoKICAgICAgaWYgKGl0ZW1UeXBlID09PSBvcGVyYXRpb24u
        dHlwZSkgewogICAgICAgICsrb3BlcmF0aW9uLmNvdW50OwogICAgICB9IGVs
        c2UgaWYgKGluZGV4ID09PSByYW5nZVN0YXJ0KSB7CiAgICAgICAgLy8gaW5z
        ZXJ0IHRvIHRoZSBsZWZ0IG9mIGBvcGVyYXRpb25gCiAgICAgICAgc2VsZi5f
        b3BlcmF0aW9ucy5zcGxpY2Uob3BlcmF0aW9uSW5kZXgsIDAsIG5ldyBPcGVy
        YXRpb24oaXRlbVR5cGUsIDEpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBu
        ZXdPcGVyYXRpb24gPSBuZXcgT3BlcmF0aW9uKGl0ZW1UeXBlLCAxKTsKICAg
        ICAgICBzcGxpdE9wZXJhdGlvbiA9IG5ldyBPcGVyYXRpb24ob3BlcmF0aW9u
        LnR5cGUsIHJhbmdlRW5kIC0gaW5kZXggKyAxKTsKICAgICAgICBvcGVyYXRp
        b24uY291bnQgPSBpbmRleCAtIHJhbmdlU3RhcnQ7CgogICAgICAgIHNlbGYu
        X29wZXJhdGlvbnMuc3BsaWNlKG9wZXJhdGlvbkluZGV4ICsgMSwgMCwgbmV3
        T3BlcmF0aW9uLCBzcGxpdE9wZXJhdGlvbik7CiAgICAgIH0KCiAgICAgIGlm
        IChtYXRjaCkgewogICAgICAgIGlmIChvcGVyYXRpb24udHlwZSA9PT0gUkVU
        QUlOKSB7CiAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNlZW5JblN1YkFycmF5
        ICsgKGluZGV4IC0gcmFuZ2VTdGFydCk7CiAgICAgICAgfSBlbHNlIHsKICAg
        ICAgICAgIHJldHVyblZhbHVlID0gc2VlbkluU3ViQXJyYXk7CiAgICAgICAg
        fQogICAgICB9CgogICAgICBzZWxmLl9jb21wb3NlQXQob3BlcmF0aW9uSW5k
        ZXgpOwogICAgfSwgZnVuY3Rpb24oc2VlbkluU3ViQXJyYXkpIHsKICAgICAg
        c2VsZi5fb3BlcmF0aW9ucy5wdXNoKG5ldyBPcGVyYXRpb24oaXRlbVR5cGUs
        IDEpKTsKCiAgICAgIGlmIChtYXRjaCkgewogICAgICAgIHJldHVyblZhbHVl
        ID0gc2VlbkluU3ViQXJyYXk7CiAgICAgIH0KCiAgICAgIHNlbGYuX2NvbXBv
        c2VBdChzZWxmLl9vcGVyYXRpb25zLmxlbmd0aC0xKTsKICAgIH0pOwoKICAg
        IHJldHVybiByZXR1cm5WYWx1ZTsKICB9LAoKICAvKioKICAgIFRyYWNrIHRo
        YXQgYW4gaXRlbSB3YXMgcmVtb3ZlZCBmcm9tIHRoZSB0cmFja2VkIGFycmF5
        LgoKICAgIEBtZXRob2QgcmVtb3ZlSXRlbQoKICAgIEBwYXJhbSB7bnVtYmVy
        fSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaW4gdGhlIHRyYWNrZWQg
        YXJyYXkuCgogICAgQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhl
        IGl0ZW0gaW4gdGhlIHN1YmFycmF5LCBvciBgLTFgIGlmIHRoZSBpdGVtCiAg
        ICB3YXMgbm90IGluIHRoZSBzdWJhcnJheS4KICAqLwogIHJlbW92ZUl0ZW06
        IGZ1bmN0aW9uKGluZGV4KSB7CiAgICB2YXIgcmV0dXJuVmFsdWUgPSAtMSwK
        ICAgICAgICBzZWxmID0gdGhpczsKCiAgICB0aGlzLl9maW5kT3BlcmF0aW9u
        KGluZGV4LCBmdW5jdGlvbiAob3BlcmF0aW9uLCBvcGVyYXRpb25JbmRleCwg
        cmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHNlZW5JblN1YkFycmF5KSB7CiAgICAg
        IGlmIChvcGVyYXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgcmV0
        dXJuVmFsdWUgPSBzZWVuSW5TdWJBcnJheSArIChpbmRleCAtIHJhbmdlU3Rh
        cnQpOwogICAgICB9CgogICAgICBpZiAob3BlcmF0aW9uLmNvdW50ID4gMSkg
        ewogICAgICAgIC0tb3BlcmF0aW9uLmNvdW50OwogICAgICB9IGVsc2Ugewog
        ICAgICAgIHNlbGYuX29wZXJhdGlvbnMuc3BsaWNlKG9wZXJhdGlvbkluZGV4
        LCAxKTsKICAgICAgICBzZWxmLl9jb21wb3NlQXQob3BlcmF0aW9uSW5kZXgp
        OwogICAgICB9CiAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgdGhyb3cgbmV3
        IEVtYmVyLkVycm9yKCJDYW4ndCByZW1vdmUgYW4gaXRlbSB0aGF0IGhhcyBu
        ZXZlciBiZWVuIGFkZGVkLiIpOwogICAgfSk7CgogICAgcmV0dXJuIHJldHVy
        blZhbHVlOwogIH0sCgoKICBfZmluZE9wZXJhdGlvbjogZnVuY3Rpb24gKGlu
        ZGV4LCBmb3VuZENhbGxiYWNrLCBub3RGb3VuZENhbGxiYWNrKSB7CiAgICB2
        YXIgb3BlcmF0aW9uSW5kZXgsCiAgICAgICAgbGVuLAogICAgICAgIG9wZXJh
        dGlvbiwKICAgICAgICByYW5nZVN0YXJ0LAogICAgICAgIHJhbmdlRW5kLAog
        ICAgICAgIHNlZW5JblN1YkFycmF5ID0gMDsKCiAgICAvLyBPUFRJTUlaRTog
        Y2hhbmdlIHRvIGJhbGFuY2VkIHRyZWUKICAgIC8vIGZpbmQgbGVmdG1vc3Qg
        b3BlcmF0aW9uIHRvIHRoZSByaWdodCBvZiBgaW5kZXhgCiAgICBmb3IgKG9w
        ZXJhdGlvbkluZGV4ID0gcmFuZ2VTdGFydCA9IDAsIGxlbiA9IHRoaXMuX29w
        ZXJhdGlvbnMubGVuZ3RoOyBvcGVyYXRpb25JbmRleCA8IGxlbjsgcmFuZ2VT
        dGFydCA9IHJhbmdlRW5kICsgMSwgKytvcGVyYXRpb25JbmRleCkgewogICAg
        ICBvcGVyYXRpb24gPSB0aGlzLl9vcGVyYXRpb25zW29wZXJhdGlvbkluZGV4
        XTsKICAgICAgcmFuZ2VFbmQgPSByYW5nZVN0YXJ0ICsgb3BlcmF0aW9uLmNv
        dW50IC0gMTsKCiAgICAgIGlmIChpbmRleCA+PSByYW5nZVN0YXJ0ICYmIGlu
        ZGV4IDw9IHJhbmdlRW5kKSB7CiAgICAgICAgZm91bmRDYWxsYmFjayhvcGVy
        YXRpb24sIG9wZXJhdGlvbkluZGV4LCByYW5nZVN0YXJ0LCByYW5nZUVuZCwg
        c2VlbkluU3ViQXJyYXkpOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNl
        IGlmIChvcGVyYXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgc2Vl
        bkluU3ViQXJyYXkgKz0gb3BlcmF0aW9uLmNvdW50OwogICAgICB9CiAgICB9
        CgogICAgbm90Rm91bmRDYWxsYmFjayhzZWVuSW5TdWJBcnJheSk7CiAgfSwK
        CiAgX2NvbXBvc2VBdDogZnVuY3Rpb24oaW5kZXgpIHsKICAgIHZhciBvcCA9
        IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIG90aGVyT3A7Cgog
        ICAgaWYgKCFvcCkgewogICAgICAvLyBDb21wb3Npbmcgb3V0IG9mIGJvdW5k
        cyBpcyBhIG5vLW9wLCBhcyB3aGVuIHJlbW92aW5nIHRoZSBsYXN0IG9wZXJh
        dGlvbgogICAgICAvLyBpbiB0aGUgbGlzdC4KICAgICAgcmV0dXJuOwogICAg
        fQoKICAgIGlmIChpbmRleCA+IDApIHsKICAgICAgb3RoZXJPcCA9IHRoaXMu
        X29wZXJhdGlvbnNbaW5kZXgtMV07CiAgICAgIGlmIChvdGhlck9wLnR5cGUg
        PT09IG9wLnR5cGUpIHsKICAgICAgICBvcC5jb3VudCArPSBvdGhlck9wLmNv
        dW50OwogICAgICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LTEs
        IDEpOwogICAgICAgIC0taW5kZXg7CiAgICAgIH0KICAgIH0KCiAgICBpZiAo
        aW5kZXggPCB0aGlzLl9vcGVyYXRpb25zLmxlbmd0aC0xKSB7CiAgICAgIG90
        aGVyT3AgPSB0aGlzLl9vcGVyYXRpb25zW2luZGV4KzFdOwogICAgICBpZiAo
        b3RoZXJPcC50eXBlID09PSBvcC50eXBlKSB7CiAgICAgICAgb3AuY291bnQg
        Kz0gb3RoZXJPcC5jb3VudDsKICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnNw
        bGljZShpbmRleCsxLCAxKTsKICAgICAgfQogICAgfQogIH0sCgogIHRvU3Ry
        aW5nOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc3RyID0gIiI7CiAgICBmb3JF
        YWNoKHRoaXMuX29wZXJhdGlvbnMsIGZ1bmN0aW9uIChvcGVyYXRpb24pIHsK
        ICAgICAgc3RyICs9ICIgIiArIG9wZXJhdGlvbi50eXBlICsgIjoiICsgb3Bl
        cmF0aW9uLmNvdW50OwogICAgfSk7CiAgICByZXR1cm4gc3RyLnN1YnN0cmlu
        ZygxKTsKICB9Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkNv
        bnRhaW5lciA9IHJlcXVpcmVNb2R1bGUoJ2NvbnRhaW5lcicpOwpFbWJlci5D
        b250YWluZXIuc2V0ID0gRW1iZXIuc2V0OwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCgovLyBOT1RFOiB0aGlzIG9iamVjdCBzaG91bGQgbmV2ZXIgYmUg
        aW5jbHVkZWQgZGlyZWN0bHkuIEluc3RlYWQgdXNlIGBFbWJlci5PYmplY3Rg
        LgovLyBXZSBvbmx5IGRlZmluZSB0aGlzIHNlcGFyYXRlbHkgc28gdGhhdCBg
        RW1iZXIuU2V0YCBjYW4gZGVwZW5kIG9uIGl0LgoKCnZhciBzZXQgPSBFbWJl
        ci5zZXQsIGdldCA9IEVtYmVyLmdldCwKICAgIG9fY3JlYXRlID0gRW1iZXIu
        Y3JlYXRlLAogICAgb19kZWZpbmVQcm9wZXJ0eSA9IEVtYmVyLnBsYXRmb3Jt
        LmRlZmluZVByb3BlcnR5LAogICAgR1VJRF9LRVkgPSBFbWJlci5HVUlEX0tF
        WSwKICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yLAogICAgZ2VuZXJhdGVH
        dWlkID0gRW1iZXIuZ2VuZXJhdGVHdWlkLAogICAgbWV0YSA9IEVtYmVyLm1l
        dGEsCiAgICByZXdhdGNoID0gRW1iZXIucmV3YXRjaCwKICAgIGZpbmlzaENo
        YWlucyA9IEVtYmVyLmZpbmlzaENoYWlucywKICAgIHNlbmRFdmVudCA9IEVt
        YmVyLnNlbmRFdmVudCwKICAgIGRlc3Ryb3kgPSBFbWJlci5kZXN0cm95LAog
        ICAgc2NoZWR1bGUgPSBFbWJlci5ydW4uc2NoZWR1bGUsCiAgICBNaXhpbiA9
        IEVtYmVyLk1peGluLAogICAgYXBwbHlNaXhpbiA9IE1peGluLl9hcHBseSwK
        ICAgIGZpbmlzaFBhcnRpYWwgPSBNaXhpbi5maW5pc2hQYXJ0aWFsLAogICAg
        cmVvcGVuID0gTWl4aW4ucHJvdG90eXBlLnJlb3BlbiwKICAgIE1BTkRBVE9S
        WV9TRVRURVIgPSBFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUiwKICAgIGlu
        ZGV4T2YgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKCnZhciB1
        bmRlZmluZWREZXNjcmlwdG9yID0gewogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwK
        ICB3cml0YWJsZTogdHJ1ZSwKICBlbnVtZXJhYmxlOiBmYWxzZSwKICB2YWx1
        ZTogdW5kZWZpbmVkCn07CgpmdW5jdGlvbiBtYWtlQ3RvcigpIHsKCiAgLy8g
        Tm90ZTogYXZvaWQgYWNjZXNzaW5nIGFueSBwcm9wZXJ0aWVzIG9uIHRoZSBv
        YmplY3Qgc2luY2UgaXQgbWFrZXMgdGhlCiAgLy8gbWV0aG9kIGEgbG90IGZh
        c3Rlci4gVGhpcyBpcyBnbHVlIGNvZGUgc28gd2Ugd2FudCBpdCB0byBiZSBh
        cyBmYXN0IGFzCiAgLy8gcG9zc2libGUuCgogIHZhciB3YXNBcHBsaWVkID0g
        ZmFsc2UsIGluaXRNaXhpbnMsIGluaXRQcm9wZXJ0aWVzOwoKICB2YXIgQ2xh
        c3MgPSBmdW5jdGlvbigpIHsKICAgIGlmICghd2FzQXBwbGllZCkgewogICAg
        ICBDbGFzcy5wcm90bygpOyAvLyBwcmVwYXJlIHByb3RvdHlwZS4uLgogICAg
        fQogICAgb19kZWZpbmVQcm9wZXJ0eSh0aGlzLCBHVUlEX0tFWSwgdW5kZWZp
        bmVkRGVzY3JpcHRvcik7CiAgICBvX2RlZmluZVByb3BlcnR5KHRoaXMsICdf
        c3VwZXInLCB1bmRlZmluZWREZXNjcmlwdG9yKTsKICAgIHZhciBtID0gbWV0
        YSh0aGlzKSwgcHJvdG8gPSBtLnByb3RvOwogICAgbS5wcm90byA9IHRoaXM7
        CiAgICBpZiAoaW5pdE1peGlucykgewogICAgICAvLyBjYXB0dXJlIGxvY2Fs
        bHkgc28gd2UgY2FuIGNsZWFyIHRoZSBjbG9zZWQgb3ZlciB2YXJpYWJsZQog
        ICAgICB2YXIgbWl4aW5zID0gaW5pdE1peGluczsKICAgICAgaW5pdE1peGlu
        cyA9IG51bGw7CiAgICAgIHRoaXMucmVvcGVuLmFwcGx5KHRoaXMsIG1peGlu
        cyk7CiAgICB9CiAgICBpZiAoaW5pdFByb3BlcnRpZXMpIHsKICAgICAgLy8g
        Y2FwdHVyZSBsb2NhbGx5IHNvIHdlIGNhbiBjbGVhciB0aGUgY2xvc2VkIG92
        ZXIgdmFyaWFibGUKICAgICAgdmFyIHByb3BzID0gaW5pdFByb3BlcnRpZXM7
        CiAgICAgIGluaXRQcm9wZXJ0aWVzID0gbnVsbDsKCiAgICAgIHZhciBjb25j
        YXRlbmF0ZWRQcm9wZXJ0aWVzID0gdGhpcy5jb25jYXRlbmF0ZWRQcm9wZXJ0
        aWVzOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwcm9wcy5sZW5ndGg7
        IGkgPCBsOyBpKyspIHsKICAgICAgICB2YXIgcHJvcGVydGllcyA9IHByb3Bz
        W2ldOwoKICAgICAgICBFbWJlci5hc3NlcnQoIkVtYmVyLk9iamVjdC5jcmVh
        dGUgbm8gbG9uZ2VyIHN1cHBvcnRzIG1peGluZyBpbiBvdGhlciBkZWZpbml0
        aW9ucywgdXNlIGNyZWF0ZVdpdGhNaXhpbnMgaW5zdGVhZC4iLCAhKHByb3Bl
        cnRpZXMgaW5zdGFuY2VvZiBFbWJlci5NaXhpbikpOwoKICAgICAgICBpZiAo
        cHJvcGVydGllcyA9PT0gbnVsbCB8fCB0eXBlb2YgcHJvcGVydGllcyAhPT0g
        J29iamVjdCcpIHsKICAgICAgICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuT2Jq
        ZWN0LmNyZWF0ZSBvbmx5IGFjY2VwdHMgb2JqZWN0cy4iKTsKICAgICAgICAg
        IGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgdmFyIGtleU5hbWVzID0g
        RW1iZXIua2V5cyhwcm9wZXJ0aWVzKTsKICAgICAgICBmb3IgKHZhciBqID0g
        MCwgbGwgPSBrZXlOYW1lcy5sZW5ndGg7IGogPCBsbDsgaisrKSB7CiAgICAg
        ICAgICB2YXIga2V5TmFtZSA9IGtleU5hbWVzW2pdOwogICAgICAgICAgaWYg
        KCFwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleU5hbWUpKSB7IGNvbnRp
        bnVlOyB9CgogICAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1trZXlO
        YW1lXSwKICAgICAgICAgICAgICBJU19CSU5ESU5HID0gRW1iZXIuSVNfQklO
        RElORzsKCiAgICAgICAgICBpZiAoSVNfQklORElORy50ZXN0KGtleU5hbWUp
        KSB7CiAgICAgICAgICAgIHZhciBiaW5kaW5ncyA9IG0uYmluZGluZ3M7CiAg
        ICAgICAgICAgIGlmICghYmluZGluZ3MpIHsKICAgICAgICAgICAgICBiaW5k
        aW5ncyA9IG0uYmluZGluZ3MgPSB7fTsKICAgICAgICAgICAgfSBlbHNlIGlm
        ICghbS5oYXNPd25Qcm9wZXJ0eSgnYmluZGluZ3MnKSkgewogICAgICAgICAg
        ICAgIGJpbmRpbmdzID0gbS5iaW5kaW5ncyA9IG9fY3JlYXRlKG0uYmluZGlu
        Z3MpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJpbmRpbmdzW2tleU5h
        bWVdID0gdmFsdWU7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGRlc2Mg
        PSBtLmRlc2NzW2tleU5hbWVdOwoKICAgICAgICAgIEVtYmVyLmFzc2VydCgi
        RW1iZXIuT2JqZWN0LmNyZWF0ZSBubyBsb25nZXIgc3VwcG9ydHMgZGVmaW5p
        bmcgY29tcHV0ZWQgcHJvcGVydGllcy4iLCAhKHZhbHVlIGluc3RhbmNlb2Yg
        RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eSkpOwogICAgICAgICAgRW1iZXIuYXNz
        ZXJ0KCJFbWJlci5PYmplY3QuY3JlYXRlIG5vIGxvbmdlciBzdXBwb3J0cyBk
        ZWZpbmluZyBtZXRob2RzIHRoYXQgY2FsbCBfc3VwZXIuIiwgISh0eXBlb2Yg
        dmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdmFsdWUudG9TdHJpbmcoKS5pbmRl
        eE9mKCcuX3N1cGVyJykgIT09IC0xKSk7CiAgICAgICAgICBFbWJlci5hc3Nl
        cnQoImBhY3Rpb25zYCBtdXN0IGJlIHByb3ZpZGVkIGF0IGV4dGVuZCB0aW1l
        LCBub3QgYXQgY3JlYXRlIHRpbWUsIHdoZW4gRW1iZXIuQWN0aW9uSGFuZGxl
        ciBpcyB1c2VkIChpLmUuIHZpZXdzLCBjb250cm9sbGVycyAmIHJvdXRlcyku
        IiwgISgoa2V5TmFtZSA9PT0gJ2FjdGlvbnMnKSAmJiBFbWJlci5BY3Rpb25I
        YW5kbGVyLmRldGVjdCh0aGlzKSkpOwoKICAgICAgICAgIGlmIChjb25jYXRl
        bmF0ZWRQcm9wZXJ0aWVzICYmIGluZGV4T2YoY29uY2F0ZW5hdGVkUHJvcGVy
        dGllcywga2V5TmFtZSkgPj0gMCkgewogICAgICAgICAgICB2YXIgYmFzZVZh
        bHVlID0gdGhpc1trZXlOYW1lXTsKCiAgICAgICAgICAgIGlmIChiYXNlVmFs
        dWUpIHsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9m
        IGJhc2VWYWx1ZS5jb25jYXQpIHsKICAgICAgICAgICAgICAgIHZhbHVlID0g
        YmFzZVZhbHVlLmNvbmNhdCh2YWx1ZSk7CiAgICAgICAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgICAgICAgIHZhbHVlID0gRW1iZXIubWFrZUFycmF5KGJh
        c2VWYWx1ZSkuY29uY2F0KHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAg
        ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBFbWJlci5t
        YWtlQXJyYXkodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9Cgog
        ICAgICAgICAgaWYgKGRlc2MpIHsKICAgICAgICAgICAgZGVzYy5zZXQodGhp
        cywga2V5TmFtZSwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAg
        ICAgICAgaWYgKHR5cGVvZiB0aGlzLnNldFVua25vd25Qcm9wZXJ0eSA9PT0g
        J2Z1bmN0aW9uJyAmJiAhKGtleU5hbWUgaW4gdGhpcykpIHsKICAgICAgICAg
        ICAgICB0aGlzLnNldFVua25vd25Qcm9wZXJ0eShrZXlOYW1lLCB2YWx1ZSk7
        CiAgICAgICAgICAgIH0gZWxzZSBpZiAoTUFOREFUT1JZX1NFVFRFUikgewog
        ICAgICAgICAgICAgIEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsIGtleU5h
        bWUsIG51bGwsIHZhbHVlKTsgLy8gc2V0dXAgbWFuZGF0b3J5IHNldHRlcgog
        ICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXNba2V5TmFt
        ZV0gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg
        IH0KICAgICAgfQogICAgfQogICAgZmluaXNoUGFydGlhbCh0aGlzLCBtKTsK
        ICAgIHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgbS5w
        cm90byA9IHByb3RvOwogICAgZmluaXNoQ2hhaW5zKHRoaXMpOwogICAgc2Vu
        ZEV2ZW50KHRoaXMsICJpbml0Iik7CiAgfTsKCiAgQ2xhc3MudG9TdHJpbmcg
        PSBNaXhpbi5wcm90b3R5cGUudG9TdHJpbmc7CiAgQ2xhc3Mud2lsbFJlb3Bl
        biA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHdhc0FwcGxpZWQpIHsKICAgICAg
        Q2xhc3MuUHJvdG90eXBlTWl4aW4gPSBNaXhpbi5jcmVhdGUoQ2xhc3MuUHJv
        dG90eXBlTWl4aW4pOwogICAgfQoKICAgIHdhc0FwcGxpZWQgPSBmYWxzZTsK
        ICB9OwogIENsYXNzLl9pbml0TWl4aW5zID0gZnVuY3Rpb24oYXJncykgeyBp
        bml0TWl4aW5zID0gYXJnczsgfTsKICBDbGFzcy5faW5pdFByb3BlcnRpZXMg
        PSBmdW5jdGlvbihhcmdzKSB7IGluaXRQcm9wZXJ0aWVzID0gYXJnczsgfTsK
        CiAgQ2xhc3MucHJvdG8gPSBmdW5jdGlvbigpIHsKICAgIHZhciBzdXBlcmNs
        YXNzID0gQ2xhc3Muc3VwZXJjbGFzczsKICAgIGlmIChzdXBlcmNsYXNzKSB7
        IHN1cGVyY2xhc3MucHJvdG8oKTsgfQoKICAgIGlmICghd2FzQXBwbGllZCkg
        ewogICAgICB3YXNBcHBsaWVkID0gdHJ1ZTsKICAgICAgQ2xhc3MuUHJvdG90
        eXBlTWl4aW4uYXBwbHlQYXJ0aWFsKENsYXNzLnByb3RvdHlwZSk7CiAgICAg
        IHJld2F0Y2goQ2xhc3MucHJvdG90eXBlKTsKICAgIH0KCiAgICByZXR1cm4g
        dGhpcy5wcm90b3R5cGU7CiAgfTsKCiAgcmV0dXJuIENsYXNzOwoKfQoKLyoq
        CiAgQGNsYXNzIENvcmVPYmplY3QKICBAbmFtZXNwYWNlIEVtYmVyCiovCnZh
        ciBDb3JlT2JqZWN0ID0gbWFrZUN0b3IoKTsKQ29yZU9iamVjdC50b1N0cmlu
        ZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gIkVtYmVyLkNvcmVPYmplY3QiOyB9
        OwoKQ29yZU9iamVjdC5Qcm90b3R5cGVNaXhpbiA9IE1peGluLmNyZWF0ZSh7
        CiAgcmVvcGVuOiBmdW5jdGlvbigpIHsKICAgIGFwcGx5TWl4aW4odGhpcywg
        YXJndW1lbnRzLCB0cnVlKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8q
        KgogICAgQW4gb3ZlcnJpZGFibGUgbWV0aG9kIGNhbGxlZCB3aGVuIG9iamVj
        dHMgYXJlIGluc3RhbnRpYXRlZC4gQnkgZGVmYXVsdCwKICAgIGRvZXMgbm90
        aGluZyB1bmxlc3MgaXQgaXMgb3ZlcnJpZGRlbiBkdXJpbmcgY2xhc3MgZGVm
        aW5pdGlvbi4KCiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5fc3VwZXIoKTsKICAgICAg
        ICBhbGVydCgnTmFtZSBpcyAnICsgdGhpcy5nZXQoJ25hbWUnKSk7CiAgICAg
        IH0KICAgIH0pOwoKICAgIHZhciBzdGV2ZSA9IEFwcC5QZXJzb24uY3JlYXRl
        KHsKICAgICAgbmFtZTogIlN0ZXZlIgogICAgfSk7CgogICAgLy8gYWxlcnRz
        ICdOYW1lIGlzIFN0ZXZlJy4KICAgIGBgYAoKICAgIE5PVEU6IElmIHlvdSBk
        byBvdmVycmlkZSBgaW5pdGAgZm9yIGEgZnJhbWV3b3JrIGNsYXNzIGxpa2Ug
        YEVtYmVyLlZpZXdgIG9yCiAgICBgRW1iZXIuQXJyYXlDb250cm9sbGVyYCwg
        YmUgc3VyZSB0byBjYWxsIGB0aGlzLl9zdXBlcigpYCBpbiB5b3VyCiAgICBg
        aW5pdGAgZGVjbGFyYXRpb24hIElmIHlvdSBkb24ndCwgRW1iZXIgbWF5IG5v
        dCBoYXZlIGFuIG9wcG9ydHVuaXR5IHRvCiAgICBkbyBpbXBvcnRhbnQgc2V0
        dXAgd29yaywgYW5kIHlvdSdsbCBzZWUgc3RyYW5nZSBiZWhhdmlvciBpbiB5
        b3VyCiAgICBhcHBsaWNhdGlvbi4KCiAgICBAbWV0aG9kIGluaXQKICAqLwog
        IGluaXQ6IGZ1bmN0aW9uKCkge30sCgogIC8qKgogICAgRGVmaW5lcyB0aGUg
        cHJvcGVydGllcyB0aGF0IHdpbGwgYmUgY29uY2F0ZW5hdGVkIGZyb20gdGhl
        IHN1cGVyY2xhc3MKICAgIChpbnN0ZWFkIG9mIG92ZXJyaWRkZW4pLgoKICAg
        IEJ5IGRlZmF1bHQsIHdoZW4geW91IGV4dGVuZCBhbiBFbWJlciBjbGFzcyBh
        IHByb3BlcnR5IGRlZmluZWQgaW4KICAgIHRoZSBzdWJjbGFzcyBvdmVycmlk
        ZXMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBzYW1lIG5hbWUgdGhhdCBpcyBkZWZp
        bmVkCiAgICBpbiB0aGUgc3VwZXJjbGFzcy4gSG93ZXZlciwgdGhlcmUgYXJl
        IHNvbWUgY2FzZXMgd2hlcmUgaXQgaXMgcHJlZmVyYWJsZQogICAgdG8gYnVp
        bGQgdXAgYSBwcm9wZXJ0eSdzIHZhbHVlIGJ5IGNvbWJpbmluZyB0aGUgc3Vw
        ZXJjbGFzcycgcHJvcGVydHkKICAgIHZhbHVlIHdpdGggdGhlIHN1YmNsYXNz
        JyB2YWx1ZS4gQW4gZXhhbXBsZSBvZiB0aGlzIGluIHVzZSB3aXRoaW4gRW1i
        ZXIKICAgIGlzIHRoZSBgY2xhc3NOYW1lc2AgcHJvcGVydHkgb2YgYEVtYmVy
        LlZpZXdgLgoKICAgIEhlcmUgaXMgc29tZSBzYW1wbGUgY29kZSBzaG93aW5n
        IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYSBjb25jYXRlbmF0ZWQKICAgIHBy
        b3BlcnR5IGFuZCBhIG5vcm1hbCBvbmU6CgogICAgYGBgamF2YXNjcmlwdAog
        ICAgQXBwLkJhclZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIHNv
        bWVOb25Db25jYXRlbmF0ZWRQcm9wZXJ0eTogWydiYXInXSwKICAgICAgY2xh
        c3NOYW1lczogWydiYXInXQogICAgfSk7CgogICAgQXBwLkZvb0JhclZpZXcg
        PSBBcHAuQmFyVmlldy5leHRlbmQoewogICAgICBzb21lTm9uQ29uY2F0ZW5h
        dGVkUHJvcGVydHk6IFsnZm9vJ10sCiAgICAgIGNsYXNzTmFtZXM6IFsnZm9v
        J10sCiAgICB9KTsKCiAgICB2YXIgZm9vQmFyVmlldyA9IEFwcC5Gb29CYXJW
        aWV3LmNyZWF0ZSgpOwogICAgZm9vQmFyVmlldy5nZXQoJ3NvbWVOb25Db25j
        YXRlbmF0ZWRQcm9wZXJ0eScpOyAvLyBbJ2ZvbyddCiAgICBmb29CYXJWaWV3
        LmdldCgnY2xhc3NOYW1lcycpOyAvLyBbJ2VtYmVyLXZpZXcnLCAnYmFyJywg
        J2ZvbyddCiAgICBgYGAKCiAgICBUaGlzIGJlaGF2aW9yIGV4dGVuZHMgdG8g
        b2JqZWN0IGNyZWF0aW9uIGFzIHdlbGwuIENvbnRpbnVpbmcgdGhlCiAgICBh
        Ym92ZSBleGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciB2aWV3
        ID0gQXBwLkZvb0JhclZpZXcuY3JlYXRlKHsKICAgICAgc29tZU5vbkNvbmNh
        dGVuYXRlZFByb3BlcnR5OiBbJ2JheiddLAogICAgICBjbGFzc05hbWVzOiBb
        J2JheiddCiAgICB9KQogICAgdmlldy5nZXQoJ3NvbWVOb25Db25jYXRlbmF0
        ZWRQcm9wZXJ0eScpOyAvLyBbJ2JheiddCiAgICB2aWV3LmdldCgnY2xhc3NO
        YW1lcycpOyAvLyBbJ2VtYmVyLXZpZXcnLCAnYmFyJywgJ2ZvbycsICdiYXon
        XQogICAgYGBgCiAgICBBZGRpbmcgYSBzaW5nbGUgcHJvcGVydHkgdGhhdCBp
        cyBub3QgYW4gYXJyYXkgd2lsbCBqdXN0IGFkZCBpdCBpbiB0aGUgYXJyYXk6
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHZpZXcgPSBBcHAuRm9vQmFy
        Vmlldy5jcmVhdGUoewogICAgICBjbGFzc05hbWVzOiAnYmF6JwogICAgfSkK
        ICAgIHZpZXcuZ2V0KCdjbGFzc05hbWVzJyk7IC8vIFsnZW1iZXItdmlldycs
        ICdiYXInLCAnZm9vJywgJ2JheiddCiAgICBgYGAKCiAgICBVc2luZyB0aGUg
        YGNvbmNhdGVuYXRlZFByb3BlcnRpZXNgIHByb3BlcnR5LCB3ZSBjYW4gdGVs
        bCB0byBFbWJlciB0aGF0IG1peAogICAgdGhlIGNvbnRlbnQgb2YgdGhlIHBy
        b3BlcnRpZXMuCgogICAgSW4gYEVtYmVyLlZpZXdgIHRoZSBgY2xhc3NOYW1l
        QmluZGluZ3NgIGFuZCBgYXR0cmlidXRlQmluZGluZ3NgIHByb3BlcnRpZXMK
        ICAgIGFyZSBhbHNvIGNvbmNhdGVuYXRlZCwgaW4gYWRkaXRpb24gdG8gYGNs
        YXNzTmFtZXNgLgoKICAgIFRoaXMgZmVhdHVyZSBpcyBhdmFpbGFibGUgZm9y
        IHlvdSB0byB1c2UgdGhyb3VnaG91dCB0aGUgRW1iZXIgb2JqZWN0IG1vZGVs
        LAogICAgYWx0aG91Z2ggdHlwaWNhbCBhcHAgZGV2ZWxvcGVycyBhcmUgbGlr
        ZWx5IHRvIHVzZSBpdCBpbmZyZXF1ZW50bHkuIFNpbmNlCiAgICBpdCBjaGFu
        Z2VzIGV4cGVjdGF0aW9ucyBhYm91dCBiZWhhdmlvciBvZiBwcm9wZXJ0aWVz
        LCB5b3Ugc2hvdWxkIHByb3Blcmx5CiAgICBkb2N1bWVudCBpdHMgdXNhZ2Ug
        aW4gZWFjaCBpbmRpdmlkdWFsIGNvbmNhdGVuYXRlZCBwcm9wZXJ0eSAodG8g
        bm90CiAgICBtaXNsZWFkIHlvdXIgdXNlcnMgdG8gdGhpbmsgdGhleSBjYW4g
        b3ZlcnJpZGUgdGhlIHByb3BlcnR5IGluIGEgc3ViY2xhc3MpLgoKICAgIEBw
        cm9wZXJ0eSBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzCiAgICBAdHlwZSBBcnJh
        eQogICAgQGRlZmF1bHQgbnVsbAogICovCiAgY29uY2F0ZW5hdGVkUHJvcGVy
        dGllczogbnVsbCwKCiAgLyoqCiAgICBEZXN0cm95ZWQgb2JqZWN0IHByb3Bl
        cnR5IGZsYWcuCgogICAgaWYgdGhpcyBwcm9wZXJ0eSBpcyBgdHJ1ZWAgdGhl
        IG9ic2VydmVycyBhbmQgYmluZGluZ3Mgd2VyZSBhbHJlYWR5CiAgICByZW1v
        dmVkIGJ5IHRoZSBlZmZlY3Qgb2YgY2FsbGluZyB0aGUgYGRlc3Ryb3koKWAg
        bWV0aG9kLgoKICAgIEBwcm9wZXJ0eSBpc0Rlc3Ryb3llZAogICAgQGRlZmF1
        bHQgZmFsc2UKICAqLwogIGlzRGVzdHJveWVkOiBmYWxzZSwKCiAgLyoqCiAg
        ICBEZXN0cnVjdGlvbiBzY2hlZHVsZWQgZmxhZy4gVGhlIGBkZXN0cm95KClg
        IG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQuCgogICAgVGhlIG9iamVjdCBzdGF5
        cyBpbnRhY3QgdW50aWwgdGhlIGVuZCBvZiB0aGUgcnVuIGxvb3AgYXQgd2hp
        Y2ggcG9pbnQKICAgIHRoZSBgaXNEZXN0cm95ZWRgIGZsYWcgaXMgc2V0LgoK
        ICAgIEBwcm9wZXJ0eSBpc0Rlc3Ryb3lpbmcKICAgIEBkZWZhdWx0IGZhbHNl
        CiAgKi8KICBpc0Rlc3Ryb3lpbmc6IGZhbHNlLAoKICAvKioKICAgIERlc3Ry
        b3lzIGFuIG9iamVjdCBieSBzZXR0aW5nIHRoZSBgaXNEZXN0cm95ZWRgIGZs
        YWcgYW5kIHJlbW92aW5nIGl0cwogICAgbWV0YWRhdGEsIHdoaWNoIGVmZmVj
        dGl2ZWx5IGRlc3Ryb3lzIG9ic2VydmVycyBhbmQgYmluZGluZ3MuCgogICAg
        SWYgeW91IHRyeSB0byBzZXQgYSBwcm9wZXJ0eSBvbiBhIGRlc3Ryb3llZCBv
        YmplY3QsIGFuIGV4Y2VwdGlvbiB3aWxsIGJlCiAgICByYWlzZWQuCgogICAg
        Tm90ZSB0aGF0IGRlc3RydWN0aW9uIGlzIHNjaGVkdWxlZCBmb3IgdGhlIGVu
        ZCBvZiB0aGUgcnVuIGxvb3AgYW5kIGRvZXMgbm90CiAgICBoYXBwZW4gaW1t
        ZWRpYXRlbHkuICBJdCB3aWxsIHNldCBhbiBpc0Rlc3Ryb3lpbmcgZmxhZyBp
        bW1lZGlhdGVseS4KCiAgICBAbWV0aG9kIGRlc3Ryb3kKICAgIEByZXR1cm4g
        e0VtYmVyLk9iamVjdH0gcmVjZWl2ZXIKICAqLwogIGRlc3Ryb3k6IGZ1bmN0
        aW9uKCkgewogICAgaWYgKHRoaXMuaXNEZXN0cm95aW5nKSB7IHJldHVybjsg
        fQogICAgdGhpcy5pc0Rlc3Ryb3lpbmcgPSB0cnVlOwoKICAgIHNjaGVkdWxl
        KCdhY3Rpb25zJywgdGhpcywgdGhpcy53aWxsRGVzdHJveSk7CiAgICBzY2hl
        ZHVsZSgnZGVzdHJveScsIHRoaXMsIHRoaXMuX3NjaGVkdWxlZERlc3Ryb3kp
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBPdmVycmlkZSB0
        byBpbXBsZW1lbnQgdGVhcmRvd24uCgogICAgQG1ldGhvZCB3aWxsRGVzdHJv
        eQogICAqLwogIHdpbGxEZXN0cm95OiBFbWJlci5LLAoKICAvKioKICAgIEBw
        cml2YXRlCgogICAgSW52b2tlZCBieSB0aGUgcnVuIGxvb3AgdG8gYWN0dWFs
        bHkgZGVzdHJveSB0aGUgb2JqZWN0LiBUaGlzIGlzCiAgICBzY2hlZHVsZWQg
        Zm9yIGV4ZWN1dGlvbiBieSB0aGUgYGRlc3Ryb3lgIG1ldGhvZC4KCiAgICBA
        bWV0aG9kIF9zY2hlZHVsZWREZXN0cm95CiAgKi8KICBfc2NoZWR1bGVkRGVz
        dHJveTogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkg
        eyByZXR1cm47IH0KICAgIGRlc3Ryb3kodGhpcyk7CiAgICB0aGlzLmlzRGVz
        dHJveWVkID0gdHJ1ZTsKICB9LAoKICBiaW5kOiBmdW5jdGlvbih0bywgZnJv
        bSkgewogICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEVtYmVyLkJpbmRpbmcp
        KSB7IGZyb20gPSBFbWJlci5CaW5kaW5nLmZyb20oZnJvbSk7IH0KICAgIGZy
        b20udG8odG8pLmNvbm5lY3QodGhpcyk7CiAgICByZXR1cm4gZnJvbTsKICB9
        LAoKICAvKioKICAgIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24g
        d2hpY2ggYXR0ZW1wdHMgdG8gcHJvdmlkZSBtb3JlIGluZm9ybWF0aW9uCiAg
        ICB0aGFuIEphdmFzY3JpcHQncyBgdG9TdHJpbmdgIHR5cGljYWxseSBkb2Vz
        LCBpbiBhIGdlbmVyaWMgd2F5IGZvciBhbGwgRW1iZXIKICAgIG9iamVjdHMu
        CgogICAgICAgIEFwcC5QZXJzb24gPSBFbS5PYmplY3QuZXh0ZW5kKCkKICAg
        ICAgICBwZXJzb24gPSBBcHAuUGVyc29uLmNyZWF0ZSgpCiAgICAgICAgcGVy
        c29uLnRvU3RyaW5nKCkgLy89PiAiPEFwcC5QZXJzb246ZW1iZXIxMDI0PiIK
        CiAgICBJZiB0aGUgb2JqZWN0J3MgY2xhc3MgaXMgbm90IGRlZmluZWQgb24g
        YW4gRW1iZXIgbmFtZXNwYWNlLCBpdCB3aWxsCiAgICBpbmRpY2F0ZSBpdCBp
        cyBhIHN1YmNsYXNzIG9mIHRoZSByZWdpc3RlcmVkIHN1cGVyY2xhc3M6Cgog
        ICAgICAgIFN0dWRlbnQgPSBBcHAuUGVyc29uLmV4dGVuZCgpCiAgICAgICAg
        c3R1ZGVudCA9IFN0dWRlbnQuY3JlYXRlKCkKICAgICAgICBzdHVkZW50LnRv
        U3RyaW5nKCkgLy89PiAiPChzdWJjbGFzcyBvZiBBcHAuUGVyc29uKTplbWJl
        cjEwMjU+IgoKICAgIElmIHRoZSBtZXRob2QgYHRvU3RyaW5nRXh0ZW5zaW9u
        YCBpcyBkZWZpbmVkLCBpdHMgcmV0dXJuIHZhbHVlIHdpbGwgYmUKICAgIGlu
        Y2x1ZGVkIGluIHRoZSBvdXRwdXQuCgogICAgICAgIEFwcC5UZWFjaGVyID0g
        QXBwLlBlcnNvbi5leHRlbmQoewogICAgICAgICAgdG9TdHJpbmdFeHRlbnNp
        b246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQo
        J2Z1bGxOYW1lJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAg
        dGVhY2hlciA9IEFwcC5UZWFjaGVyLmNyZWF0ZSgpCiAgICAgICAgdGVhY2hl
        ci50b1N0cmluZygpOyAvLz0+ICI8QXBwLlRlYWNoZXI6ZW1iZXIxMDI2OlRv
        bSBEYWxlPiIKCiAgICBAbWV0aG9kIHRvU3RyaW5nCiAgICBAcmV0dXJuIHtT
        dHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbgogICovCiAgdG9TdHJpbmc6
        IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgdmFyIGhhc1RvU3RyaW5nRXh0
        ZW5zaW9uID0gdHlwZW9mIHRoaXMudG9TdHJpbmdFeHRlbnNpb24gPT09ICdm
        dW5jdGlvbicsCiAgICAgICAgZXh0ZW5zaW9uID0gaGFzVG9TdHJpbmdFeHRl
        bnNpb24gPyAiOiIgKyB0aGlzLnRvU3RyaW5nRXh0ZW5zaW9uKCkgOiAnJzsK
        ICAgIHZhciByZXQgPSAnPCcrdGhpcy5jb25zdHJ1Y3Rvci50b1N0cmluZygp
        Kyc6JytndWlkRm9yKHRoaXMpK2V4dGVuc2lvbisnPic7CiAgICB0aGlzLnRv
        U3RyaW5nID0gbWFrZVRvU3RyaW5nKHJldCk7CiAgICByZXR1cm4gcmV0Owog
        IH0KfSk7CgpDb3JlT2JqZWN0LlByb3RvdHlwZU1peGluLm93bmVyQ29uc3Ry
        dWN0b3IgPSBDb3JlT2JqZWN0OwoKZnVuY3Rpb24gbWFrZVRvU3RyaW5nKHJl
        dCkgewogIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIHJldDsgfTsKfQoK
        aWYgKEVtYmVyLmNvbmZpZy5vdmVycmlkZVByb3RvdHlwZU1peGluKSB7CiAg
        RW1iZXIuY29uZmlnLm92ZXJyaWRlUHJvdG90eXBlTWl4aW4oQ29yZU9iamVj
        dC5Qcm90b3R5cGVNaXhpbik7Cn0KCkNvcmVPYmplY3QuX19zdXBlcl9fID0g
        bnVsbDsKCnZhciBDbGFzc01peGluID0gTWl4aW4uY3JlYXRlKHsKCiAgQ2xh
        c3NNaXhpbjogRW1iZXIucmVxdWlyZWQoKSwKCiAgUHJvdG90eXBlTWl4aW46
        IEVtYmVyLnJlcXVpcmVkKCksCgogIGlzQ2xhc3M6IHRydWUsCgogIGlzTWV0
        aG9kOiBmYWxzZSwKCiAgLyoqCiAgICBDcmVhdGVzIGEgbmV3IHN1YmNsYXNz
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKICAgICAgc2F5OiBmdW5jdGlvbih0aGluZykgewog
        ICAgICAgIGFsZXJ0KHRoaW5nKTsKICAgICAgIH0KICAgIH0pOwogICAgYGBg
        CgogICAgVGhpcyBkZWZpbmVzIGEgbmV3IHN1YmNsYXNzIG9mIEVtYmVyLk9i
        amVjdDogYEFwcC5QZXJzb25gLiBJdCBjb250YWlucyBvbmUgbWV0aG9kOiBg
        c2F5KClgLgoKICAgIFlvdSBjYW4gYWxzbyBjcmVhdGUgYSBzdWJjbGFzcyBm
        cm9tIGFueSBleGlzdGluZyBjbGFzcyBieSBjYWxsaW5nIGl0cyBgZXh0ZW5k
        KClgICBtZXRob2QuIEZvciBleGFtcGxlLCB5b3UgbWlnaHQgd2FudCB0byBj
        cmVhdGUgYSBzdWJjbGFzcyBvZiBFbWJlcidzIGJ1aWx0LWluIGBFbWJlci5W
        aWV3YCBjbGFzczoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUGVyc29u
        VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgdGFnTmFtZTogJ2xp
        JywKICAgICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnaXNBZG1pbmlzdHJhdG9y
        J10KICAgIH0pOwogICAgYGBgCgogICAgV2hlbiBkZWZpbmluZyBhIHN1YmNs
        YXNzLCB5b3UgY2FuIG92ZXJyaWRlIG1ldGhvZHMgYnV0IHN0aWxsIGFjY2Vz
        cyB0aGUgaW1wbGVtZW50YXRpb24gb2YgeW91ciBwYXJlbnQgY2xhc3MgYnkg
        Y2FsbGluZyB0aGUgc3BlY2lhbCBgX3N1cGVyKClgIG1ldGhvZDoKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBBcHAuUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICAgIHNheTogZnVuY3Rpb24odGhpbmcpIHsKICAgICAgICB2
        YXIgbmFtZSA9IHRoaXMuZ2V0KCduYW1lJyk7CiAgICAgICAgYWxlcnQobmFt
        ZSArICcgc2F5czogJyArIHRoaW5nKTsKICAgICAgfQogICAgfSk7CgogICAg
        QXBwLlNvbGRpZXIgPSBBcHAuUGVyc29uLmV4dGVuZCh7CiAgICAgIHNheTog
        ZnVuY3Rpb24odGhpbmcpIHsKICAgICAgICB0aGlzLl9zdXBlcih0aGluZyAr
        ICIsIHNpciEiKTsKICAgICAgfSwKICAgICAgbWFyY2g6IGZ1bmN0aW9uKG51
        bWJlck9mSG91cnMpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgnbmFtZScp
        ICsgJyBtYXJjaGVzIGZvciAnICsgbnVtYmVyT2ZIb3VycyArICcgaG91cnMu
        JykKICAgICAgfQogICAgfSk7CgogICAgdmFyIHllaHVkYSA9IEFwcC5Tb2xk
        aWVyLmNyZWF0ZSh7CiAgICAgIG5hbWU6ICJZZWh1ZGEgS2F0eiIKICAgIH0p
        OwoKICAgIHllaHVkYS5zYXkoIlllcyIpOyAgLy8gYWxlcnRzICJZZWh1ZGEg
        S2F0eiBzYXlzOiBZZXMsIHNpciEiCiAgICBgYGAKCiAgICBUaGUgYGNyZWF0
        ZSgpYCBvbiBsaW5lICMxNyBjcmVhdGVzIGFuICppbnN0YW5jZSogb2YgdGhl
        IGBBcHAuU29sZGllcmAgY2xhc3MuIFRoZSBgZXh0ZW5kKClgIG9uIGxpbmUg
        IzggY3JlYXRlcyBhICpzdWJjbGFzcyogb2YgYEFwcC5QZXJzb25gLiBBbnkg
        aW5zdGFuY2Ugb2YgdGhlIGBBcHAuUGVyc29uYCBjbGFzcyB3aWxsICpub3Qq
        IGhhdmUgdGhlIGBtYXJjaCgpYCBtZXRob2QuCgogICAgWW91IGNhbiBhbHNv
        IHBhc3MgYEVtYmVyLk1peGluYCBjbGFzc2VzIHRvIGFkZCBhZGRpdGlvbmFs
        IHByb3BlcnRpZXMgdG8gdGhlIHN1YmNsYXNzLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        ICAgc2F5OiBmdW5jdGlvbih0aGluZykgewogICAgICAgIGFsZXJ0KHRoaXMu
        Z2V0KCduYW1lJykgKyAnIHNheXM6ICcgKyB0aGluZyk7CiAgICAgIH0KICAg
        IH0pOwoKICAgIEFwcC5TaW5naW5nTWl4aW4gPSBFbWJlci5NaXhpbi5jcmVh
        dGUoewogICAgICBzaW5nOiBmdW5jdGlvbih0aGluZyl7CiAgICAgICAgYWxl
        cnQodGhpcy5nZXQoJ25hbWUnKSArICcgc2luZ3M6IGxhIGxhIGxhICcgKyB0
        aGluZyk7CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5Ccm9hZHdheVN0YXIg
        PSBBcHAuUGVyc29uLmV4dGVuZChBcHAuU2luZ2luZ01peGluLCB7CiAgICAg
        IGRhbmNlOiBmdW5jdGlvbigpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgn
        bmFtZScpICsgJyBkYW5jZXM6IHRhcCB0YXAgdGFwIHRhcCAnKTsKICAgICAg
        fQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgYEFwcC5Ccm9hZHdheVN0YXJg
        IGNsYXNzIGNvbnRhaW5zIHRocmVlIG1ldGhvZHM6IGBzYXkoKWAsIGBzaW5n
        KClgLCBhbmQgYGRhbmNlKClgLgoKICAgIEBtZXRob2QgZXh0ZW5kCiAgICBA
        c3RhdGljCgogICAgQHBhcmFtIHtFbWJlci5NaXhpbn0gW21peGluc10qIE9u
        ZSBvciBtb3JlIEVtYmVyLk1peGluIGNsYXNzZXMKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBbYXJndW1lbnRzXSogT2JqZWN0IGNvbnRhaW5pbmcgdmFsdWVzIHRv
        IHVzZSB3aXRoaW4gdGhlIG5ldyBjbGFzcwogICovCiAgZXh0ZW5kOiBmdW5j
        dGlvbigpIHsKICAgIHZhciBDbGFzcyA9IG1ha2VDdG9yKCksIHByb3RvOwog
        ICAgQ2xhc3MuQ2xhc3NNaXhpbiA9IE1peGluLmNyZWF0ZSh0aGlzLkNsYXNz
        TWl4aW4pOwogICAgQ2xhc3MuUHJvdG90eXBlTWl4aW4gPSBNaXhpbi5jcmVh
        dGUodGhpcy5Qcm90b3R5cGVNaXhpbik7CgogICAgQ2xhc3MuQ2xhc3NNaXhp
        bi5vd25lckNvbnN0cnVjdG9yID0gQ2xhc3M7CiAgICBDbGFzcy5Qcm90b3R5
        cGVNaXhpbi5vd25lckNvbnN0cnVjdG9yID0gQ2xhc3M7CgogICAgcmVvcGVu
        LmFwcGx5KENsYXNzLlByb3RvdHlwZU1peGluLCBhcmd1bWVudHMpOwoKICAg
        IENsYXNzLnN1cGVyY2xhc3MgPSB0aGlzOwogICAgQ2xhc3MuX19zdXBlcl9f
        ICA9IHRoaXMucHJvdG90eXBlOwoKICAgIHByb3RvID0gQ2xhc3MucHJvdG90
        eXBlID0gb19jcmVhdGUodGhpcy5wcm90b3R5cGUpOwogICAgcHJvdG8uY29u
        c3RydWN0b3IgPSBDbGFzczsKICAgIGdlbmVyYXRlR3VpZChwcm90byk7CiAg
        ICBtZXRhKHByb3RvKS5wcm90byA9IHByb3RvOyAvLyB0aGlzIHdpbGwgZGlz
        YWJsZSBvYnNlcnZlcnMgb24gcHJvdG90eXBlCgogICAgQ2xhc3MuQ2xhc3NN
        aXhpbi5hcHBseShDbGFzcyk7CiAgICByZXR1cm4gQ2xhc3M7CiAgfSwKCiAg
        LyoqCiAgICBFcXVpdmFsZW50IHRvIGRvaW5nIGBleHRlbmQoYXJndW1lbnRz
        KS5jcmVhdGUoKWAuCiAgICBJZiBwb3NzaWJsZSB1c2UgdGhlIG5vcm1hbCBg
        Y3JlYXRlYCBtZXRob2QgaW5zdGVhZC4KCiAgICBAbWV0aG9kIGNyZWF0ZVdp
        dGhNaXhpbnMKICAgIEBzdGF0aWMKICAgIEBwYXJhbSBbYXJndW1lbnRzXSoK
        ICAqLwogIGNyZWF0ZVdpdGhNaXhpbnM6IGZ1bmN0aW9uKCkgewogICAgdmFy
        IEMgPSB0aGlzOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGg+MCkgeyB0aGlz
        Ll9pbml0TWl4aW5zKGFyZ3VtZW50cyk7IH0KICAgIHJldHVybiBuZXcgQygp
        OwogIH0sCgogIC8qKgogICAgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIGNs
        YXNzLiBBY2NlcHRzIGVpdGhlciBubyBhcmd1bWVudHMsIG9yIGFuIG9iamVj
        dAogICAgY29udGFpbmluZyB2YWx1ZXMgdG8gaW5pdGlhbGl6ZSB0aGUgbmV3
        bHkgaW5zdGFudGlhdGVkIG9iamVjdCB3aXRoLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        ICAgaGVsbG9Xb3JsZDogZnVuY3Rpb24oKSB7CiAgICAgICAgYWxlcnQoIkhp
        LCBteSBuYW1lIGlzICIgKyB0aGlzLmdldCgnbmFtZScpKTsKICAgICAgfQog
        ICAgfSk7CgogICAgdmFyIHRvbSA9IEFwcC5QZXJzb24uY3JlYXRlKHsKICAg
        ICAgbmFtZTogJ1RvbSBEYWxlJwogICAgfSk7CgogICAgdG9tLmhlbGxvV29y
        bGQoKTsgLy8gYWxlcnRzICJIaSwgbXkgbmFtZSBpcyBUb20gRGFsZSIuCiAg
        ICBgYGAKCiAgICBgY3JlYXRlYCB3aWxsIGNhbGwgdGhlIGBpbml0YCBmdW5j
        dGlvbiBpZiBkZWZpbmVkIGR1cmluZwogICAgYEVtYmVyLkFueU9iamVjdC5l
        eHRlbmRgCgogICAgSWYgbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gYGNy
        ZWF0ZWAsIGl0IHdpbGwgbm90IHNldCB2YWx1ZXMgdG8gdGhlIG5ldwogICAg
        aW5zdGFuY2UgZHVyaW5nIGluaXRpYWxpemF0aW9uOgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHZhciBub05hbWUgPSBBcHAuUGVyc29uLmNyZWF0ZSgpOwog
        ICAgbm9OYW1lLmhlbGxvV29ybGQoKTsgLy8gYWxlcnRzIHVuZGVmaW5lZAog
        ICAgYGBgCgogICAgTk9URTogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHlv
        dSBjYW5ub3QgZGVjbGFyZSBtZXRob2RzIG9yIGNvbXB1dGVkCiAgICBwcm9w
        ZXJ0aWVzIGR1cmluZyBgY3JlYXRlYC4gWW91IHNob3VsZCBpbnN0ZWFkIGRl
        Y2xhcmUgbWV0aG9kcyBhbmQgY29tcHV0ZWQKICAgIHByb3BlcnRpZXMgd2hl
        biB1c2luZyBgZXh0ZW5kYCBvciB1c2UgdGhlIGBjcmVhdGVXaXRoTWl4aW5z
        YCBzaG9ydGhhbmQuCgogICAgQG1ldGhvZCBjcmVhdGUKICAgIEBzdGF0aWMK
        ICAgIEBwYXJhbSBbYXJndW1lbnRzXSoKICAqLwogIGNyZWF0ZTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgQyA9IHRoaXM7CiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aD4wKSB7IHRoaXMuX2luaXRQcm9wZXJ0aWVzKGFyZ3VtZW50cyk7IH0K
        ICAgIHJldHVybiBuZXcgQygpOwogIH0sCgogIC8qKgoKICAgIEF1Z21lbnRz
        IGEgY29uc3RydWN0b3IncyBwcm90b3R5cGUgd2l0aCBhZGRpdGlvbmFsCiAg
        ICBwcm9wZXJ0aWVzIGFuZCBmdW5jdGlvbnM6CgogICAgYGBgamF2YXNjcmlw
        dAogICAgTXlPYmplY3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAg
        bmFtZTogJ2FuIG9iamVjdCcKICAgIH0pOwoKICAgIG8gPSBNeU9iamVjdC5j
        cmVhdGUoKTsKICAgIG8uZ2V0KCduYW1lJyk7IC8vICdhbiBvYmplY3QnCgog
        ICAgTXlPYmplY3QucmVvcGVuKHsKICAgICAgc2F5OiBmdW5jdGlvbihtc2cp
        ewogICAgICAgIGNvbnNvbGUubG9nKG1zZyk7CiAgICAgIH0KICAgIH0pCgog
        ICAgbzIgPSBNeU9iamVjdC5jcmVhdGUoKTsKICAgIG8yLnNheSgiaGVsbG8i
        KTsgLy8gbG9ncyAiaGVsbG8iCgogICAgby5zYXkoImdvb2RieWUiKTsgLy8g
        bG9ncyAiZ29vZGJ5ZSIKICAgIGBgYAoKICAgIFRvIGFkZCBmdW5jdGlvbnMg
        YW5kIHByb3BlcnRpZXMgdG8gdGhlIGNvbnN0cnVjdG9yIGl0c2VsZiwKICAg
        IHNlZSBgcmVvcGVuQ2xhc3NgCgogICAgQG1ldGhvZCByZW9wZW4KICAqLwog
        IHJlb3BlbjogZnVuY3Rpb24oKSB7CiAgICB0aGlzLndpbGxSZW9wZW4oKTsK
        ICAgIHJlb3Blbi5hcHBseSh0aGlzLlByb3RvdHlwZU1peGluLCBhcmd1bWVu
        dHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBBdWdtZW50
        cyBhIGNvbnN0cnVjdG9yJ3Mgb3duIHByb3BlcnRpZXMgYW5kIGZ1bmN0aW9u
        czoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBNeU9iamVjdCA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgICBuYW1lOiAnYW4gb2JqZWN0JwogICAgfSk7
        CgoKICAgIE15T2JqZWN0LnJlb3BlbkNsYXNzKHsKICAgICAgY2FuQnVpbGQ6
        IGZhbHNlCiAgICB9KTsKCiAgICBNeU9iamVjdC5jYW5CdWlsZDsgLy8gZmFs
        c2UKICAgIG8gPSBNeU9iamVjdC5jcmVhdGUoKTsKICAgIGBgYAoKICAgIElu
        IG90aGVyIHdvcmRzLCB0aGlzIGNyZWF0ZXMgc3RhdGljIHByb3BlcnRpZXMg
        YW5kIGZ1bmN0aW9ucyBmb3IgdGhlIGNsYXNzLiBUaGVzZSBhcmUgb25seSBh
        dmFpbGFibGUgb24gdGhlIGNsYXNzCiAgICBhbmQgbm90IG9uIGFueSBpbnN0
        YW5jZSBvZiB0aGF0IGNsYXNzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFw
        cC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgbmFtZSA6
        ICIiLAogICAgICBzYXlIZWxsbyA6IGZ1bmN0aW9uKCl7CiAgICAgICAgYWxl
        cnQoIkhlbGxvLiBNeSBuYW1lIGlzICIgKyB0aGlzLmdldCgnbmFtZScpKTsK
        ICAgICAgfQogICAgfSk7CgogICAgQXBwLlBlcnNvbi5yZW9wZW5DbGFzcyh7
        CiAgICAgIHNwZWNpZXMgOiAiSG9tbyBzYXBpZW5zIiwKICAgICAgY3JlYXRl
        UGVyc29uOiBmdW5jdGlvbihuZXdQZXJzb25zTmFtZSl7CiAgICAgICAgcmV0
        dXJuIEFwcC5QZXJzb24uY3JlYXRlKHsKICAgICAgICAgIG5hbWU6bmV3UGVy
        c29uc05hbWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgdmFy
        IHRvbSA9IEFwcC5QZXJzb24uY3JlYXRlKHsKICAgICAgbmFtZSA6ICJUb20g
        RGFsZSIKICAgIH0pOwogICAgdmFyIHllaHVkYSA9IEFwcC5QZXJzb24uY3Jl
        YXRlUGVyc29uKCJZZWh1ZGEgS2F0eiIpOwoKICAgIHRvbS5zYXlIZWxsbygp
        OyAvLyAiSGVsbG8uIE15IG5hbWUgaXMgVG9tIERhbGUiCiAgICB5ZWh1ZGEu
        c2F5SGVsbG8oKTsgLy8gIkhlbGxvLiBNeSBuYW1lIGlzIFllaHVkYSBLYXR6
        IgogICAgYWxlcnQoQXBwLlBlcnNvbi5zcGVjaWVzKTsgLy8gIkhvbW8gc2Fw
        aWVucyIKICAgIGBgYAoKICAgIE5vdGUgdGhhdCBgc3BlY2llc2AgYW5kIGBj
        cmVhdGVQZXJzb25gIGFyZSAqbm90KiB2YWxpZCBvbiB0aGUgYHRvbWAgYW5k
        IGB5ZWh1ZGFgCiAgICB2YXJpYWJsZXMuIFRoZXkgYXJlIG9ubHkgdmFsaWQg
        b24gYEFwcC5QZXJzb25gLgoKICAgIFRvIGFkZCBmdW5jdGlvbnMgYW5kIHBy
        b3BlcnRpZXMgdG8gaW5zdGFuY2VzIG9mCiAgICBhIGNvbnN0cnVjdG9yIGJ5
        IGV4dGVuZGluZyB0aGUgY29uc3RydWN0b3IncyBwcm90b3R5cGUKICAgIHNl
        ZSBgcmVvcGVuYAoKICAgIEBtZXRob2QgcmVvcGVuQ2xhc3MKICAqLwogIHJl
        b3BlbkNsYXNzOiBmdW5jdGlvbigpIHsKICAgIHJlb3Blbi5hcHBseSh0aGlz
        LkNsYXNzTWl4aW4sIGFyZ3VtZW50cyk7CiAgICBhcHBseU1peGluKHRoaXMs
        IGFyZ3VtZW50cywgZmFsc2UpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAg
        ZGV0ZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIGlmICgnZnVuY3Rpb24nICE9
        PSB0eXBlb2Ygb2JqKSB7IHJldHVybiBmYWxzZTsgfQogICAgd2hpbGUob2Jq
        KSB7CiAgICAgIGlmIChvYmo9PT10aGlzKSB7IHJldHVybiB0cnVlOyB9CiAg
        ICAgIG9iaiA9IG9iai5zdXBlcmNsYXNzOwogICAgfQogICAgcmV0dXJuIGZh
        bHNlOwogIH0sCgogIGRldGVjdEluc3RhbmNlOiBmdW5jdGlvbihvYmopIHsK
        ICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiB0aGlzOwogIH0sCgogIC8qKgog
        ICAgSW4gc29tZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGFubm90YXRlIGNv
        bXB1dGVkIHByb3BlcnRpZXMgd2l0aCBhZGRpdGlvbmFsCiAgICBtZXRhZGF0
        YSBhYm91dCBob3cgdGhleSBmdW5jdGlvbiBvciB3aGF0IHZhbHVlcyB0aGV5
        IG9wZXJhdGUgb24uIEZvcgogICAgZXhhbXBsZSwgY29tcHV0ZWQgcHJvcGVy
        dHkgZnVuY3Rpb25zIG1heSBjbG9zZSBvdmVyIHZhcmlhYmxlcyB0aGF0IGFy
        ZSB0aGVuCiAgICBubyBsb25nZXIgYXZhaWxhYmxlIGZvciBpbnRyb3NwZWN0
        aW9uLgoKICAgIFlvdSBjYW4gcGFzcyBhIGhhc2ggb2YgdGhlc2UgdmFsdWVz
        IHRvIGEgY29tcHV0ZWQgcHJvcGVydHkgbGlrZSB0aGlzOgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIHBlcnNvbjogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBw
        ZXJzb25JZCA9IHRoaXMuZ2V0KCdwZXJzb25JZCcpOwogICAgICByZXR1cm4g
        QXBwLlBlcnNvbi5jcmVhdGUoeyBpZDogcGVyc29uSWQgfSk7CiAgICB9LnBy
        b3BlcnR5KCkubWV0YSh7IHR5cGU6IEFwcC5QZXJzb24gfSkKICAgIGBgYAoK
        ICAgIE9uY2UgeW91J3ZlIGRvbmUgdGhpcywgeW91IGNhbiByZXRyaWV2ZSB0
        aGUgdmFsdWVzIHNhdmVkIHRvIHRoZSBjb21wdXRlZAogICAgcHJvcGVydHkg
        ZnJvbSB5b3VyIGNsYXNzIGxpa2UgdGhpczoKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBNeUNsYXNzLm1ldGFGb3JQcm9wZXJ0eSgncGVyc29uJyk7CiAgICBg
        YGAKCiAgICBUaGlzIHdpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCBoYXNoIHRo
        YXQgd2FzIHBhc3NlZCB0byBgbWV0YSgpYC4KCiAgICBAbWV0aG9kIG1ldGFG
        b3JQcm9wZXJ0eQogICAgQHBhcmFtIGtleSB7U3RyaW5nfSBwcm9wZXJ0eSBu
        YW1lCiAgKi8KICBtZXRhRm9yUHJvcGVydHk6IGZ1bmN0aW9uKGtleSkgewog
        ICAgdmFyIGRlc2MgPSBtZXRhKHRoaXMucHJvdG8oKSwgZmFsc2UpLmRlc2Nz
        W2tleV07CgogICAgRW1iZXIuYXNzZXJ0KCJtZXRhRm9yUHJvcGVydHkoKSBj
        b3VsZCBub3QgZmluZCBhIGNvbXB1dGVkIHByb3BlcnR5IHdpdGgga2V5ICci
        K2tleSsiJy4iLCAhIWRlc2MgJiYgZGVzYyBpbnN0YW5jZW9mIEVtYmVyLkNv
        bXB1dGVkUHJvcGVydHkpOwogICAgcmV0dXJuIGRlc2MuX21ldGEgfHwge307
        CiAgfSwKCiAgLyoqCiAgICBJdGVyYXRlIG92ZXIgZWFjaCBjb21wdXRlZCBw
        cm9wZXJ0eSBmb3IgdGhlIGNsYXNzLCBwYXNzaW5nIGl0cyBuYW1lCiAgICBh
        bmQgYW55IGFzc29jaWF0ZWQgbWV0YWRhdGEgKHNlZSBgbWV0YUZvclByb3Bl
        cnR5YCkgdG8gdGhlIGNhbGxiYWNrLgoKICAgIEBtZXRob2QgZWFjaENvbXB1
        dGVkUHJvcGVydHkKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAg
        ICBAcGFyYW0ge09iamVjdH0gYmluZGluZwogICovCiAgZWFjaENvbXB1dGVk
        UHJvcGVydHk6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICB2
        YXIgcHJvdG8gPSB0aGlzLnByb3RvKCksCiAgICAgICAgZGVzY3MgPSBtZXRh
        KHByb3RvKS5kZXNjcywKICAgICAgICBlbXB0eSA9IHt9LAogICAgICAgIHBy
        b3BlcnR5OwoKICAgIGZvciAodmFyIG5hbWUgaW4gZGVzY3MpIHsKICAgICAg
        cHJvcGVydHkgPSBkZXNjc1tuYW1lXTsKCiAgICAgIGlmIChwcm9wZXJ0eSBp
        bnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVkUHJvcGVydHkpIHsKICAgICAgICBj
        YWxsYmFjay5jYWxsKGJpbmRpbmcgfHwgdGhpcywgbmFtZSwgcHJvcGVydHku
        X21ldGEgfHwgZW1wdHkpOwogICAgICB9CiAgICB9CiAgfQoKfSk7CgpDbGFz
        c01peGluLm93bmVyQ29uc3RydWN0b3IgPSBDb3JlT2JqZWN0OwoKaWYgKEVt
        YmVyLmNvbmZpZy5vdmVycmlkZUNsYXNzTWl4aW4pIHsKICBFbWJlci5jb25m
        aWcub3ZlcnJpZGVDbGFzc01peGluKENsYXNzTWl4aW4pOwp9CgpDb3JlT2Jq
        ZWN0LkNsYXNzTWl4aW4gPSBDbGFzc01peGluOwpDbGFzc01peGluLmFwcGx5
        KENvcmVPYmplY3QpOwoKRW1iZXIuQ29yZU9iamVjdCA9IENvcmVPYmplY3Q7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKLyoqCiAgYEVtYmVyLk9iamVj
        dGAgaXMgdGhlIG1haW4gYmFzZSBjbGFzcyBmb3IgYWxsIEVtYmVyIG9iamVj
        dHMuIEl0IGlzIGEgc3ViY2xhc3MKICBvZiBgRW1iZXIuQ29yZU9iamVjdGAg
        d2l0aCB0aGUgYEVtYmVyLk9ic2VydmFibGVgIG1peGluIGFwcGxpZWQuIEZv
        ciBkZXRhaWxzLAogIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBv
        ZiB0aGVzZS4KCiAgQGNsYXNzIE9iamVjdAogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAZXh0ZW5kcyBFbWJlci5Db3JlT2JqZWN0CiAgQHVzZXMgRW1iZXIuT2Jz
        ZXJ2YWJsZQoqLwpFbWJlci5PYmplY3QgPSBFbWJlci5Db3JlT2JqZWN0LmV4
        dGVuZChFbWJlci5PYnNlcnZhYmxlKTsKRW1iZXIuT2JqZWN0LnRvU3RyaW5n
        ID0gZnVuY3Rpb24oKSB7IHJldHVybiAiRW1iZXIuT2JqZWN0IjsgfTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBp
        bmRleE9mID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZjsKCi8qKgog
        IEEgTmFtZXNwYWNlIGlzIGFuIG9iamVjdCB1c3VhbGx5IHVzZWQgdG8gY29u
        dGFpbiBvdGhlciBvYmplY3RzIG9yIG1ldGhvZHMKICBzdWNoIGFzIGFuIGFw
        cGxpY2F0aW9uIG9yIGZyYW1ld29yay4gQ3JlYXRlIGEgbmFtZXNwYWNlIGFu
        eXRpbWUgeW91IHdhbnQKICB0byBkZWZpbmUgb25lIG9mIHRoZXNlIG5ldyBj
        b250YWluZXJzLgoKICAjIEV4YW1wbGUgVXNhZ2UKCiAgYGBgamF2YXNjcmlw
        dAogIE15RnJhbWV3b3JrID0gRW1iZXIuTmFtZXNwYWNlLmNyZWF0ZSh7CiAg
        ICBWRVJTSU9OOiAnMS4wLjAnCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBOYW1l
        c3BhY2UKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2Jq
        ZWN0CiovCnZhciBOYW1lc3BhY2UgPSBFbWJlci5OYW1lc3BhY2UgPSBFbWJl
        ci5PYmplY3QuZXh0ZW5kKHsKICBpc05hbWVzcGFjZTogdHJ1ZSwKCiAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNF
        Uy5wdXNoKHRoaXMpOwogICAgRW1iZXIuTmFtZXNwYWNlLlBST0NFU1NFRCA9
        IGZhbHNlOwogIH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHZh
        ciBuYW1lID0gZ2V0KHRoaXMsICduYW1lJyk7CiAgICBpZiAobmFtZSkgeyBy
        ZXR1cm4gbmFtZTsgfQoKICAgIGZpbmROYW1lc3BhY2VzKCk7CiAgICByZXR1
        cm4gdGhpc1tFbWJlci5HVUlEX0tFWSsnX25hbWUnXTsKICB9LAoKICBuYW1l
        Q2xhc3NlczogZnVuY3Rpb24oKSB7CiAgICBwcm9jZXNzTmFtZXNwYWNlKFt0
        aGlzLnRvU3RyaW5nKCldLCB0aGlzLCB7fSk7CiAgfSwKCiAgZGVzdHJveTog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgbmFtZXNwYWNlcyA9IEVtYmVyLk5hbWVz
        cGFjZS5OQU1FU1BBQ0VTOwogICAgRW1iZXIubG9va3VwW3RoaXMudG9TdHJp
        bmcoKV0gPSB1bmRlZmluZWQ7CiAgICBuYW1lc3BhY2VzLnNwbGljZShpbmRl
        eE9mLmNhbGwobmFtZXNwYWNlcywgdGhpcyksIDEpOwogICAgdGhpcy5fc3Vw
        ZXIoKTsKICB9Cn0pOwoKTmFtZXNwYWNlLnJlb3BlbkNsYXNzKHsKICBOQU1F
        U1BBQ0VTOiBbRW1iZXJdLAogIE5BTUVTUEFDRVNfQllfSUQ6IHt9LAogIFBS
        T0NFU1NFRDogZmFsc2UsCiAgcHJvY2Vzc0FsbDogcHJvY2Vzc0FsbE5hbWVz
        cGFjZXMsCiAgYnlOYW1lOiBmdW5jdGlvbihuYW1lKSB7CiAgICBpZiAoIUVt
        YmVyLkJPT1RFRCkgewogICAgICBwcm9jZXNzQWxsTmFtZXNwYWNlcygpOwog
        ICAgfQoKICAgIHJldHVybiBOQU1FU1BBQ0VTX0JZX0lEW25hbWVdOwogIH0K
        fSk7Cgp2YXIgTkFNRVNQQUNFU19CWV9JRCA9IE5hbWVzcGFjZS5OQU1FU1BB
        Q0VTX0JZX0lEOwoKdmFyIGhhc093blByb3AgPSAoe30pLmhhc093blByb3Bl
        cnR5LAogICAgZ3VpZEZvciA9IEVtYmVyLmd1aWRGb3I7CgpmdW5jdGlvbiBw
        cm9jZXNzTmFtZXNwYWNlKHBhdGhzLCByb290LCBzZWVuKSB7CiAgdmFyIGlk
        eCA9IHBhdGhzLmxlbmd0aDsKCiAgTkFNRVNQQUNFU19CWV9JRFtwYXRocy5q
        b2luKCcuJyldID0gcm9vdDsKCiAgLy8gTG9vcCBvdmVyIGFsbCBvZiB0aGUg
        a2V5cyBpbiB0aGUgbmFtZXNwYWNlLCBsb29raW5nIGZvciBjbGFzc2VzCiAg
        Zm9yKHZhciBrZXkgaW4gcm9vdCkgewogICAgaWYgKCFoYXNPd25Qcm9wLmNh
        bGwocm9vdCwga2V5KSkgeyBjb250aW51ZTsgfQogICAgdmFyIG9iaiA9IHJv
        b3Rba2V5XTsKCiAgICAvLyBJZiB3ZSBhcmUgcHJvY2Vzc2luZyB0aGUgYEVt
        YmVyYCBuYW1lc3BhY2UsIGZvciBleGFtcGxlLCB0aGUKICAgIC8vIGBwYXRo
        c2Agd2lsbCBzdGFydCB3aXRoIGBbIkVtYmVyIl1gLiBFdmVyeSBpdGVyYXRp
        b24gdGhyb3VnaAogICAgLy8gdGhlIGxvb3Agd2lsbCB1cGRhdGUgdGhlICoq
        c2Vjb25kKiogZWxlbWVudCBvZiB0aGlzIGxpc3Qgd2l0aAogICAgLy8gdGhl
        IGtleSwgc28gcHJvY2Vzc2luZyBgRW1iZXIuVmlld2Agd2lsbCBtYWtlIHRo
        ZSBBcnJheQogICAgLy8gYFsnRW1iZXInLCAnVmlldyddYC4KICAgIHBhdGhz
        W2lkeF0gPSBrZXk7CgogICAgLy8gSWYgd2UgaGF2ZSBmb3VuZCBhbiB1bnBy
        b2Nlc3NlZCBjbGFzcwogICAgaWYgKG9iaiAmJiBvYmoudG9TdHJpbmcgPT09
        IGNsYXNzVG9TdHJpbmcpIHsKICAgICAgLy8gUmVwbGFjZSB0aGUgY2xhc3Mn
        IGB0b1N0cmluZ2Agd2l0aCB0aGUgZG90LXNlcGFyYXRlZCBwYXRoCiAgICAg
        IC8vIGFuZCBzZXQgaXRzIGBOQU1FX0tFWWAKICAgICAgb2JqLnRvU3RyaW5n
        ID0gbWFrZVRvU3RyaW5nKHBhdGhzLmpvaW4oJy4nKSk7CiAgICAgIG9ialtO
        QU1FX0tFWV0gPSBwYXRocy5qb2luKCcuJyk7CgogICAgLy8gU3VwcG9ydCBu
        ZXN0ZWQgbmFtZXNwYWNlcwogICAgfSBlbHNlIGlmIChvYmogJiYgb2JqLmlz
        TmFtZXNwYWNlKSB7CiAgICAgIC8vIFNraXAgYWxpYXNlZCBuYW1lc3BhY2Vz
        CiAgICAgIGlmIChzZWVuW2d1aWRGb3Iob2JqKV0pIHsgY29udGludWU7IH0K
        ICAgICAgc2VlbltndWlkRm9yKG9iaildID0gdHJ1ZTsKCiAgICAgIC8vIFBy
        b2Nlc3MgdGhlIGNoaWxkIG5hbWVzcGFjZQogICAgICBwcm9jZXNzTmFtZXNw
        YWNlKHBhdGhzLCBvYmosIHNlZW4pOwogICAgfQogIH0KCiAgcGF0aHMubGVu
        Z3RoID0gaWR4OyAvLyBjdXQgb3V0IGxhc3QgaXRlbQp9CgpmdW5jdGlvbiBm
        aW5kTmFtZXNwYWNlcygpIHsKICB2YXIgTmFtZXNwYWNlID0gRW1iZXIuTmFt
        ZXNwYWNlLCBsb29rdXAgPSBFbWJlci5sb29rdXAsIG9iaiwgaXNOYW1lc3Bh
        Y2U7CgogIGlmIChOYW1lc3BhY2UuUFJPQ0VTU0VEKSB7IHJldHVybjsgfQoK
        ICBmb3IgKHZhciBwcm9wIGluIGxvb2t1cCkgewogICAgLy8gVGhlc2UgZG9u
        J3QgcmFpc2UgZXhjZXB0aW9ucyBidXQgY2FuIGNhdXNlIHdhcm5pbmdzCiAg
        ICBpZiAocHJvcCA9PT0gInBhcmVudCIgfHwgcHJvcCA9PT0gInRvcCIgfHwg
        cHJvcCA9PT0gImZyYW1lRWxlbWVudCIgfHwgcHJvcCA9PT0gIndlYmtpdFN0
        b3JhZ2VJbmZvIikgeyBjb250aW51ZTsgfQoKICAgIC8vICBnZXQod2luZG93
        Lmdsb2JhbFN0b3JhZ2UsICdpc05hbWVzcGFjZScpIHdvdWxkIHRyeSB0byBy
        ZWFkIHRoZSBzdG9yYWdlIGZvciBkb21haW4gaXNOYW1lc3BhY2UgYW5kIGNh
        dXNlIGV4Y2VwdGlvbiBpbiBGaXJlZm94LgogICAgLy8gZ2xvYmFsU3RvcmFn
        ZSBpcyBhIHN0b3JhZ2Ugb2Jzb2xldGVkIGJ5IHRoZSBXaGF0V0cgc3RvcmFn
        ZSBzcGVjaWZpY2F0aW9uLiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxs
        YS5vcmcvZW4vRE9NL1N0b3JhZ2UjZ2xvYmFsU3RvcmFnZQogICAgaWYgKHBy
        b3AgPT09ICJnbG9iYWxTdG9yYWdlIiAmJiBsb29rdXAuU3RvcmFnZUxpc3Qg
        JiYgbG9va3VwLmdsb2JhbFN0b3JhZ2UgaW5zdGFuY2VvZiBsb29rdXAuU3Rv
        cmFnZUxpc3QpIHsgY29udGludWU7IH0KICAgIC8vIFVuZm9ydHVuYXRlbHks
        IHNvbWUgdmVyc2lvbnMgb2YgSUUgZG9uJ3Qgc3VwcG9ydCB3aW5kb3cuaGFz
        T3duUHJvcGVydHkKICAgIGlmIChsb29rdXAuaGFzT3duUHJvcGVydHkgJiYg
        IWxvb2t1cC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQoK
        ICAgIC8vIEF0IHRpbWVzIHdlIGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3Mg
        Y2VydGFpbiBwcm9wZXJ0aWVzIGZvciBzZWN1cml0eSByZWFzb25zLgogICAg
        Ly8gVGhlcmUgYXJlIGFsc28gdGltZXMgd2hlcmUgZXZlbiBpZiB3ZSBjYW4g
        YWNjZXNzIHRoZW0sIHdlIGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MgdGhl
        aXIgcHJvcGVydGllcy4KICAgIHRyeSB7CiAgICAgIG9iaiA9IEVtYmVyLmxv
        b2t1cFtwcm9wXTsKICAgICAgaXNOYW1lc3BhY2UgPSBvYmogJiYgb2JqLmlz
        TmFtZXNwYWNlOwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb250aW51ZTsK
        ICAgIH0KCiAgICBpZiAoaXNOYW1lc3BhY2UpIHsKICAgICAgRW1iZXIuZGVw
        cmVjYXRlKCJOYW1lc3BhY2VzIHNob3VsZCBub3QgYmVnaW4gd2l0aCBsb3dl
        cmNhc2UuIiwgL15bQS1aXS8udGVzdChwcm9wKSk7CiAgICAgIG9ialtOQU1F
        X0tFWV0gPSBwcm9wOwogICAgfQogIH0KfQoKdmFyIE5BTUVfS0VZID0gRW1i
        ZXIuTkFNRV9LRVkgPSBFbWJlci5HVUlEX0tFWSArICdfbmFtZSc7CgpmdW5j
        dGlvbiBzdXBlckNsYXNzU3RyaW5nKG1peGluKSB7CiAgdmFyIHN1cGVyY2xh
        c3MgPSBtaXhpbi5zdXBlcmNsYXNzOwogIGlmIChzdXBlcmNsYXNzKSB7CiAg
        ICBpZiAoc3VwZXJjbGFzc1tOQU1FX0tFWV0pIHsgcmV0dXJuIHN1cGVyY2xh
        c3NbTkFNRV9LRVldOyB9CiAgICBlbHNlIHsgcmV0dXJuIHN1cGVyQ2xhc3NT
        dHJpbmcoc3VwZXJjbGFzcyk7IH0KICB9IGVsc2UgewogICAgcmV0dXJuOwog
        IH0KfQoKZnVuY3Rpb24gY2xhc3NUb1N0cmluZygpIHsKICBpZiAoIUVtYmVy
        LkJPT1RFRCAmJiAhdGhpc1tOQU1FX0tFWV0pIHsKICAgIHByb2Nlc3NBbGxO
        YW1lc3BhY2VzKCk7CiAgfQoKICB2YXIgcmV0OwoKICBpZiAodGhpc1tOQU1F
        X0tFWV0pIHsKICAgIHJldCA9IHRoaXNbTkFNRV9LRVldOwogIH0gZWxzZSBp
        ZiAodGhpcy5fdG9TdHJpbmcpIHsKICAgIHJldCA9IHRoaXMuX3RvU3RyaW5n
        OyAKICB9IGVsc2UgewogICAgdmFyIHN0ciA9IHN1cGVyQ2xhc3NTdHJpbmco
        dGhpcyk7CiAgICBpZiAoc3RyKSB7CiAgICAgIHJldCA9ICIoc3ViY2xhc3Mg
        b2YgIiArIHN0ciArICIpIjsKICAgIH0gZWxzZSB7CiAgICAgIHJldCA9ICIo
        dW5rbm93biBtaXhpbikiOwogICAgfQogICAgdGhpcy50b1N0cmluZyA9IG1h
        a2VUb1N0cmluZyhyZXQpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rp
        b24gcHJvY2Vzc0FsbE5hbWVzcGFjZXMoKSB7CiAgdmFyIHVucHJvY2Vzc2Vk
        TmFtZXNwYWNlcyA9ICFOYW1lc3BhY2UuUFJPQ0VTU0VELAogICAgICB1bnBy
        b2Nlc3NlZE1peGlucyA9IEVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zOwoK
        ICBpZiAodW5wcm9jZXNzZWROYW1lc3BhY2VzKSB7CiAgICBmaW5kTmFtZXNw
        YWNlcygpOwogICAgTmFtZXNwYWNlLlBST0NFU1NFRCA9IHRydWU7CiAgfQoK
        ICBpZiAodW5wcm9jZXNzZWROYW1lc3BhY2VzIHx8IHVucHJvY2Vzc2VkTWl4
        aW5zKSB7CiAgICB2YXIgbmFtZXNwYWNlcyA9IE5hbWVzcGFjZS5OQU1FU1BB
        Q0VTLCBuYW1lc3BhY2U7CiAgICBmb3IgKHZhciBpPTAsIGw9bmFtZXNwYWNl
        cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIG5hbWVzcGFjZSA9IG5hbWVz
        cGFjZXNbaV07CiAgICAgIHByb2Nlc3NOYW1lc3BhY2UoW25hbWVzcGFjZS50
        b1N0cmluZygpXSwgbmFtZXNwYWNlLCB7fSk7CiAgICB9CgogICAgRW1iZXIu
        YW55VW5wcm9jZXNzZWRNaXhpbnMgPSBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9u
        IG1ha2VUb1N0cmluZyhyZXQpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7IHJl
        dHVybiByZXQ7IH07Cn0KCkVtYmVyLk1peGluLnByb3RvdHlwZS50b1N0cmlu
        ZyA9IGNsYXNzVG9TdHJpbmc7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVt
        YmVyLkFwcGxpY2F0aW9uID0gRW1iZXIuTmFtZXNwYWNlLmV4dGVuZCgpOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3Vi
        bW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBPVVRfT0ZfUkFOR0VfRVhD
        RVBUSU9OID0gIkluZGV4IG91dCBvZiByYW5nZSI7CnZhciBFTVBUWSA9IFtd
        OwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoq
        CiAgQW4gQXJyYXlQcm94eSB3cmFwcyBhbnkgb3RoZXIgb2JqZWN0IHRoYXQg
        aW1wbGVtZW50cyBgRW1iZXIuQXJyYXlgIGFuZC9vcgogIGBFbWJlci5NdXRh
        YmxlQXJyYXksYCBmb3J3YXJkaW5nIGFsbCByZXF1ZXN0cy4gVGhpcyBtYWtl
        cyBpdCB2ZXJ5IHVzZWZ1bCBmb3IKICBhIG51bWJlciBvZiBiaW5kaW5nIHVz
        ZSBjYXNlcyBvciBvdGhlciBjYXNlcyB3aGVyZSBiZWluZyBhYmxlIHRvIHN3
        YXAKICBvdXQgdGhlIHVuZGVybHlpbmcgYXJyYXkgaXMgdXNlZnVsLgoKICBB
        IHNpbXBsZSBleGFtcGxlIG9mIHVzYWdlOgoKICBgYGBqYXZhc2NyaXB0CiAg
        dmFyIHBldHMgPSBbJ2RvZycsICdjYXQnLCAnZmlzaCddOwogIHZhciBhcCA9
        IEVtYmVyLkFycmF5UHJveHkuY3JlYXRlKHsgY29udGVudDogRW1iZXIuQShw
        ZXRzKSB9KTsKCiAgYXAuZ2V0KCdmaXJzdE9iamVjdCcpOyAgICAgICAgICAg
        ICAgICAgICAgICAgIC8vICdkb2cnCiAgYXAuc2V0KCdjb250ZW50JywgWydh
        bW9lYmEnLCAncGFyYW1lY2l1bSddKTsKICBhcC5nZXQoJ2ZpcnN0T2JqZWN0
        Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ2Ftb2ViYScKICBgYGAK
        CiAgVGhpcyBjbGFzcyBjYW4gYWxzbyBiZSB1c2VmdWwgYXMgYSBsYXllciB0
        byB0cmFuc2Zvcm0gdGhlIGNvbnRlbnRzIG9mCiAgYW4gYXJyYXksIGFzIHRo
        ZXkgYXJlIGFjY2Vzc2VkLiBUaGlzIGNhbiBiZSBkb25lIGJ5IG92ZXJyaWRp
        bmcKICBgb2JqZWN0QXRDb250ZW50YDoKCiAgYGBgamF2YXNjcmlwdAogIHZh
        ciBwZXRzID0gWydkb2cnLCAnY2F0JywgJ2Zpc2gnXTsKICB2YXIgYXAgPSBF
        bWJlci5BcnJheVByb3h5LmNyZWF0ZSh7CiAgICAgIGNvbnRlbnQ6IEVtYmVy
        LkEocGV0cyksCiAgICAgIG9iamVjdEF0Q29udGVudDogZnVuY3Rpb24oaWR4
        KSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbnRlbnQnKS5vYmpl
        Y3RBdChpZHgpLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0KICB9KTsKCiAgYXAu
        Z2V0KCdmaXJzdE9iamVjdCcpOyAvLyAuICdET0cnCiAgYGBgCgogIEBjbGFz
        cyBBcnJheVByb3h5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVt
        YmVyLk9iamVjdAogIEB1c2VzIEVtYmVyLk11dGFibGVBcnJheQoqLwpFbWJl
        ci5BcnJheVByb3h5ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5NdXRh
        YmxlQXJyYXksLyoqIEBzY29wZSBFbWJlci5BcnJheVByb3h5LnByb3RvdHlw
        ZSAqLyB7CgogIC8qKgogICAgVGhlIGNvbnRlbnQgYXJyYXkuIE11c3QgYmUg
        YW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBgRW1iZXIuQXJyYXlgIGFuZC9v
        cgogICAgYEVtYmVyLk11dGFibGVBcnJheS5gCgogICAgQHByb3BlcnR5IGNv
        bnRlbnQKICAgIEB0eXBlIEVtYmVyLkFycmF5CiAgKi8KICBjb250ZW50OiBu
        dWxsLAoKICAvKioKICAgVGhlIGFycmF5IHRoYXQgdGhlIHByb3h5IHByZXRl
        bmRzIHRvIGJlLiBJbiB0aGUgZGVmYXVsdCBgQXJyYXlQcm94eWAKICAgaW1w
        bGVtZW50YXRpb24sIHRoaXMgYW5kIGBjb250ZW50YCBhcmUgdGhlIHNhbWUu
        IFN1YmNsYXNzZXMgb2YgYEFycmF5UHJveHlgCiAgIGNhbiBvdmVycmlkZSB0
        aGlzIHByb3BlcnR5IHRvIHByb3ZpZGUgdGhpbmdzIGxpa2Ugc29ydGluZyBh
        bmQgZmlsdGVyaW5nLgoKICAgQHByb3BlcnR5IGFycmFuZ2VkQ29udGVudAog
        ICovCiAgYXJyYW5nZWRDb250ZW50OiBFbWJlci5jb21wdXRlZC5hbGlhcygn
        Y29udGVudCcpLAoKICAvKioKICAgIFNob3VsZCBhY3R1YWxseSByZXRyaWV2
        ZSB0aGUgb2JqZWN0IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXggZnJvbSB0aGUK
        ICAgIGNvbnRlbnQuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgaW4g
        c3ViY2xhc3NlcyB0byB0cmFuc2Zvcm0gdGhlCiAgICBjb250ZW50IGl0ZW0g
        dG8gc29tZXRoaW5nIG5ldy4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIG9ubHkg
        YmUgY2FsbGVkIGlmIGNvbnRlbnQgaXMgbm9uLWBudWxsYC4KCiAgICBAbWV0
        aG9kIG9iamVjdEF0Q29udGVudAogICAgQHBhcmFtIHtOdW1iZXJ9IGlkeCBU
        aGUgaW5kZXggdG8gcmV0cmlldmUuCiAgICBAcmV0dXJuIHtPYmplY3R9IHRo
        ZSB2YWx1ZSBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZAogICovCiAgb2Jq
        ZWN0QXRDb250ZW50OiBmdW5jdGlvbihpZHgpIHsKICAgIHJldHVybiBnZXQo
        dGhpcywgJ2FycmFuZ2VkQ29udGVudCcpLm9iamVjdEF0KGlkeCk7CiAgfSwK
        CiAgLyoqCiAgICBTaG91bGQgYWN0dWFsbHkgcmVwbGFjZSB0aGUgc3BlY2lm
        aWVkIG9iamVjdHMgb24gdGhlIGNvbnRlbnQgYXJyYXkuCiAgICBZb3UgY2Fu
        IG92ZXJyaWRlIHRoaXMgbWV0aG9kIGluIHN1YmNsYXNzZXMgdG8gdHJhbnNm
        b3JtIHRoZSBjb250ZW50IGl0ZW0KICAgIGludG8gc29tZXRoaW5nIG5ldy4K
        CiAgICBUaGlzIG1ldGhvZCB3aWxsIG9ubHkgYmUgY2FsbGVkIGlmIGNvbnRl
        bnQgaXMgbm9uLWBudWxsYC4KCiAgICBAbWV0aG9kIHJlcGxhY2VDb250ZW50
        CiAgICBAcGFyYW0ge051bWJlcn0gaWR4IFRoZSBzdGFydGluZyBpbmRleAog
        ICAgQHBhcmFtIHtOdW1iZXJ9IGFtdCBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRv
        IHJlbW92ZSBmcm9tIHRoZSBjb250ZW50LgogICAgQHBhcmFtIHtBcnJheX0g
        b2JqZWN0cyBPcHRpb25hbCBhcnJheSBvZiBvYmplY3RzIHRvIGluc2VydCBv
        ciBudWxsIGlmIG5vCiAgICAgIG9iamVjdHMuCiAgICBAcmV0dXJuIHt2b2lk
        fQogICovCiAgcmVwbGFjZUNvbnRlbnQ6IGZ1bmN0aW9uKGlkeCwgYW10LCBv
        YmplY3RzKSB7CiAgICBnZXQodGhpcywgJ2NvbnRlbnQnKS5yZXBsYWNlKGlk
        eCwgYW10LCBvYmplY3RzKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgog
        ICAgSW52b2tlZCB3aGVuIHRoZSBjb250ZW50IHByb3BlcnR5IGlzIGFib3V0
        IHRvIGNoYW5nZS4gTm90aWZpZXMgb2JzZXJ2ZXJzIHRoYXQgdGhlCiAgICBl
        bnRpcmUgYXJyYXkgY29udGVudCB3aWxsIGNoYW5nZS4KCiAgICBAbWV0aG9k
        IF9jb250ZW50V2lsbENoYW5nZQogICovCiAgX2NvbnRlbnRXaWxsQ2hhbmdl
        OiBFbWJlci5iZWZvcmVPYnNlcnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkg
        ewogICAgdGhpcy5fdGVhcmRvd25Db250ZW50KCk7CiAgfSksCgogIF90ZWFy
        ZG93bkNvbnRlbnQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQgPSBn
        ZXQodGhpcywgJ2NvbnRlbnQnKTsKCiAgICBpZiAoY29udGVudCkgewogICAg
        ICBjb250ZW50LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcywgewogICAgICAg
        IHdpbGxDaGFuZ2U6ICdjb250ZW50QXJyYXlXaWxsQ2hhbmdlJywKICAgICAg
        ICBkaWRDaGFuZ2U6ICdjb250ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICAgIH0p
        OwogICAgfQogIH0sCgogIGNvbnRlbnRBcnJheVdpbGxDaGFuZ2U6IEVtYmVy
        LkssCiAgY29udGVudEFycmF5RGlkQ2hhbmdlOiBFbWJlci5LLAoKICAvKioK
        ICAgIEBwcml2YXRlCgogICAgSW52b2tlZCB3aGVuIHRoZSBjb250ZW50IHBy
        b3BlcnR5IGNoYW5nZXMuIE5vdGlmaWVzIG9ic2VydmVycyB0aGF0IHRoZQog
        ICAgZW50aXJlIGFycmF5IGNvbnRlbnQgaGFzIGNoYW5nZWQuCgogICAgQG1l
        dGhvZCBfY29udGVudERpZENoYW5nZQogICovCiAgX2NvbnRlbnREaWRDaGFu
        Z2U6IEVtYmVyLm9ic2VydmVyKCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwoKICAgIEVt
        YmVyLmFzc2VydCgiQ2FuJ3Qgc2V0IEFycmF5UHJveHkncyBjb250ZW50IHRv
        IGl0c2VsZiIsIGNvbnRlbnQgIT09IHRoaXMpOwoKICAgIHRoaXMuX3NldHVw
        Q29udGVudCgpOwogIH0pLAoKICBfc2V0dXBDb250ZW50OiBmdW5jdGlvbigp
        IHsKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50Jyk7Cgog
        ICAgaWYgKGNvbnRlbnQpIHsKICAgICAgY29udGVudC5hZGRBcnJheU9ic2Vy
        dmVyKHRoaXMsIHsKICAgICAgICB3aWxsQ2hhbmdlOiAnY29udGVudEFycmF5
        V2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlOiAnY29udGVudEFycmF5
        RGlkQ2hhbmdlJwogICAgICB9KTsKICAgIH0KICB9LAoKICBfYXJyYW5nZWRD
        b250ZW50V2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIoJ2FycmFu
        Z2VkQ29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29u
        dGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50JyksCiAgICAgICAg
        bGVuID0gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29udGVudCwg
        J2xlbmd0aCcpIDogMDsKCiAgICB0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5
        V2lsbENoYW5nZSh0aGlzLCAwLCBsZW4sIHVuZGVmaW5lZCk7CiAgICB0aGlz
        LmFycmFuZ2VkQ29udGVudFdpbGxDaGFuZ2UodGhpcyk7CgogICAgdGhpcy5f
        dGVhcmRvd25BcnJhbmdlZENvbnRlbnQoYXJyYW5nZWRDb250ZW50KTsKICB9
        KSwKCiAgX2FycmFuZ2VkQ29udGVudERpZENoYW5nZTogRW1iZXIub2JzZXJ2
        ZXIoJ2FycmFuZ2VkQ29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFy
        cmFuZ2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyks
        CiAgICAgICAgbGVuID0gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2Vk
        Q29udGVudCwgJ2xlbmd0aCcpIDogMDsKCiAgICBFbWJlci5hc3NlcnQoIkNh
        bid0IHNldCBBcnJheVByb3h5J3MgY29udGVudCB0byBpdHNlbGYiLCBhcnJh
        bmdlZENvbnRlbnQgIT09IHRoaXMpOwoKICAgIHRoaXMuX3NldHVwQXJyYW5n
        ZWRDb250ZW50KCk7CgogICAgdGhpcy5hcnJhbmdlZENvbnRlbnREaWRDaGFu
        Z2UodGhpcyk7CiAgICB0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hh
        bmdlKHRoaXMsIDAsIHVuZGVmaW5lZCwgbGVuKTsKICB9KSwKCiAgX3NldHVw
        QXJyYW5nZWRDb250ZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciBhcnJhbmdl
        ZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwoKICAg
        IGlmIChhcnJhbmdlZENvbnRlbnQpIHsKICAgICAgYXJyYW5nZWRDb250ZW50
        LmFkZEFycmF5T2JzZXJ2ZXIodGhpcywgewogICAgICAgIHdpbGxDaGFuZ2U6
        ICdhcnJhbmdlZENvbnRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICAgIGRp
        ZENoYW5nZTogJ2FycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdlJwogICAg
        ICB9KTsKICAgIH0KICB9LAoKICBfdGVhcmRvd25BcnJhbmdlZENvbnRlbnQ6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29udGVudCA9IGdldCh0
        aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7CgogICAgaWYgKGFycmFuZ2VkQ29u
        dGVudCkgewogICAgICBhcnJhbmdlZENvbnRlbnQucmVtb3ZlQXJyYXlPYnNl
        cnZlcih0aGlzLCB7CiAgICAgICAgd2lsbENoYW5nZTogJ2FycmFuZ2VkQ29u
        dGVudEFycmF5V2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlOiAnYXJy
        YW5nZWRDb250ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICAgIH0pOwogICAgfQog
        IH0sCgogIGFycmFuZ2VkQ29udGVudFdpbGxDaGFuZ2U6IEVtYmVyLkssCiAg
        YXJyYW5nZWRDb250ZW50RGlkQ2hhbmdlOiBFbWJlci5LLAoKICBvYmplY3RB
        dDogZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gZ2V0KHRoaXMsICdjb250
        ZW50JykgJiYgdGhpcy5vYmplY3RBdENvbnRlbnQoaWR4KTsKICB9LAoKICBs
        ZW5ndGg6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIGFy
        cmFuZ2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7
        CiAgICByZXR1cm4gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29u
        dGVudCwgJ2xlbmd0aCcpIDogMDsKICAgIC8vIE5vIGRlcGVuZGVuY2llcyBz
        aW5jZSBFbnVtZXJhYmxlIG5vdGlmaWVzIGxlbmd0aCBvZiBjaGFuZ2UKICB9
        KSwKCiAgX3JlcGxhY2U6IGZ1bmN0aW9uKGlkeCwgYW10LCBvYmplY3RzKSB7
        CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwogICAg
        RW1iZXIuYXNzZXJ0KCdUaGUgY29udGVudCBwcm9wZXJ0eSBvZiAnKyB0aGlz
        LmNvbnN0cnVjdG9yICsgJyBzaG91bGQgYmUgc2V0IGJlZm9yZSBtb2RpZnlp
        bmcgaXQnLCBjb250ZW50KTsKICAgIGlmIChjb250ZW50KSB0aGlzLnJlcGxh
        Y2VDb250ZW50KGlkeCwgYW10LCBvYmplY3RzKTsKICAgIHJldHVybiB0aGlz
        OwogIH0sCgogIHJlcGxhY2U6IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0
        aGlzLCAnYXJyYW5nZWRDb250ZW50JykgPT09IGdldCh0aGlzLCAnY29udGVu
        dCcpKSB7CiAgICAgIHRoaXMuX3JlcGxhY2UuYXBwbHkodGhpcywgYXJndW1l
        bnRzKTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJv
        cigiVXNpbmcgcmVwbGFjZSBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlz
        IG5vdCBhbGxvd2VkLiIpOwogICAgfQogIH0sCgogIF9pbnNlcnRBdDogZnVu
        Y3Rpb24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChpZHggPiBnZXQodGhpcywg
        J2NvbnRlbnQubGVuZ3RoJykpIHRocm93IG5ldyBFbWJlci5FcnJvcihPVVRf
        T0ZfUkFOR0VfRVhDRVBUSU9OKTsKICAgIHRoaXMuX3JlcGxhY2UoaWR4LCAw
        LCBbb2JqZWN0XSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBpbnNlcnRB
        dDogZnVuY3Rpb24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChnZXQodGhpcywg
        J2FycmFuZ2VkQ29udGVudCcpID09PSBnZXQodGhpcywgJ2NvbnRlbnQnKSkg
        ewogICAgICByZXR1cm4gdGhpcy5faW5zZXJ0QXQoaWR4LCBvYmplY3QpOwog
        ICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJVc2lu
        ZyBpbnNlcnRBdCBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBh
        bGxvd2VkLiIpOwogICAgfQogIH0sCgogIHJlbW92ZUF0OiBmdW5jdGlvbihz
        dGFydCwgbGVuKSB7CiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBzdGFy
        dCkgewogICAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcp
        LAogICAgICAgICAgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJh
        bmdlZENvbnRlbnQnKSwKICAgICAgICAgIGluZGljZXMgPSBbXSwgaTsKCiAg
        ICAgIGlmICgoc3RhcnQgPCAwKSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICds
        ZW5ndGgnKSkpIHsKICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VU
        X09GX1JBTkdFX0VYQ0VQVElPTik7CiAgICAgIH0KCiAgICAgIGlmIChsZW4g
        PT09IHVuZGVmaW5lZCkgbGVuID0gMTsKCiAgICAgIC8vIEdldCBhIGxpc3Qg
        b2YgaW5kaWNlcyBpbiBvcmlnaW5hbCBjb250ZW50IHRvIHJlbW92ZQogICAg
        ICBmb3IgKGk9c3RhcnQ7IGk8c3RhcnQrbGVuOyBpKyspIHsKICAgICAgICAv
        LyBVc2UgYXJyYW5nZWRDb250ZW50IGhlcmUgc28gd2UgYXZvaWQgY29uZnVz
        aW9uIHdpdGggb2JqZWN0cyB0cmFuc2Zvcm1lZCBieSBvYmplY3RBdENvbnRl
        bnQKICAgICAgICBpbmRpY2VzLnB1c2goY29udGVudC5pbmRleE9mKGFycmFu
        Z2VkQ29udGVudC5vYmplY3RBdChpKSkpOwogICAgICB9CgogICAgICAvLyBS
        ZXBsYWNlIGluIHJldmVyc2Ugb3JkZXIgc2luY2UgaW5kaWNlcyB3aWxsIGNo
        YW5nZQogICAgICBpbmRpY2VzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVy
        biBiIC0gYTsgfSk7CgogICAgICBFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdl
        cygpOwogICAgICBmb3IgKGk9MDsgaTxpbmRpY2VzLmxlbmd0aDsgaSsrKSB7
        CiAgICAgICAgdGhpcy5fcmVwbGFjZShpbmRpY2VzW2ldLCAxLCBFTVBUWSk7
        CiAgICAgIH0KICAgICAgRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCk7CiAg
        ICB9CgogICAgcmV0dXJuIHRoaXMgOwogIH0sCgogIHB1c2hPYmplY3Q6IGZ1
        bmN0aW9uKG9iaikgewogICAgdGhpcy5faW5zZXJ0QXQoZ2V0KHRoaXMsICdj
        b250ZW50Lmxlbmd0aCcpLCBvYmopIDsKICAgIHJldHVybiBvYmogOwogIH0s
        CgogIHB1c2hPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7CiAgICBpZiAo
        IShFbWJlci5FbnVtZXJhYmxlLmRldGVjdChvYmplY3RzKSB8fCBFbWJlci5p
        c0FycmF5KG9iamVjdHMpKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9y
        KCJNdXN0IHBhc3MgRW1iZXIuRW51bWVyYWJsZSB0byBFbWJlci5NdXRhYmxl
        QXJyYXkjcHVzaE9iamVjdHMiKTsKICAgIH0KICAgIHRoaXMuX3JlcGxhY2Uo
        Z2V0KHRoaXMsICdsZW5ndGgnKSwgMCwgb2JqZWN0cyk7CiAgICByZXR1cm4g
        dGhpczsKICB9LAoKICBzZXRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7
        CiAgICBpZiAob2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybiB0aGlzLmNs
        ZWFyKCk7CgogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAg
        ICB0aGlzLl9yZXBsYWNlKDAsIGxlbiwgb2JqZWN0cyk7CiAgICByZXR1cm4g
        dGhpczsKICB9LAoKICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlvbihvYmopIHsK
        ICAgIHRoaXMuX2luc2VydEF0KDAsIG9iaikgOwogICAgcmV0dXJuIG9iaiA7
        CiAgfSwKCiAgdW5zaGlmdE9iamVjdHM6IGZ1bmN0aW9uKG9iamVjdHMpIHsK
        ICAgIHRoaXMuX3JlcGxhY2UoMCwgMCwgb2JqZWN0cyk7CiAgICByZXR1cm4g
        dGhpczsKICB9LAoKICBzbGljZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgYXJy
        ID0gdGhpcy50b0FycmF5KCk7CiAgICByZXR1cm4gYXJyLnNsaWNlLmFwcGx5
        KGFyciwgYXJndW1lbnRzKTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnRBcnJh
        eVdpbGxDaGFuZ2U6IGZ1bmN0aW9uKGl0ZW0sIGlkeCwgcmVtb3ZlZENudCwg
        YWRkZWRDbnQpIHsKICAgIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShp
        ZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KTsKICB9LAoKICBhcnJhbmdlZENv
        bnRlbnRBcnJheURpZENoYW5nZTogZnVuY3Rpb24oaXRlbSwgaWR4LCByZW1v
        dmVkQ250LCBhZGRlZENudCkgewogICAgdGhpcy5hcnJheUNvbnRlbnREaWRD
        aGFuZ2UoaWR4LCByZW1vdmVkQ250LCBhZGRlZENudCk7CiAgfSwKCiAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5f
        c2V0dXBDb250ZW50KCk7CiAgICB0aGlzLl9zZXR1cEFycmFuZ2VkQ29udGVu
        dCgpOwogIH0sCgogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHRo
        aXMuX3RlYXJkb3duQXJyYW5nZWRDb250ZW50KCk7CiAgICB0aGlzLl90ZWFy
        ZG93bkNvbnRlbnQoKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQs
        CiAgICBmbXQgPSBFbWJlci5TdHJpbmcuZm10LAogICAgYWRkQmVmb3JlT2Jz
        ZXJ2ZXIgPSBFbWJlci5hZGRCZWZvcmVPYnNlcnZlciwKICAgIGFkZE9ic2Vy
        dmVyID0gRW1iZXIuYWRkT2JzZXJ2ZXIsCiAgICByZW1vdmVCZWZvcmVPYnNl
        cnZlciA9IEVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyLAogICAgcmVtb3Zl
        T2JzZXJ2ZXIgPSBFbWJlci5yZW1vdmVPYnNlcnZlciwKICAgIHByb3BlcnR5
        V2lsbENoYW5nZSA9IEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSwKICAgIHBy
        b3BlcnR5RGlkQ2hhbmdlID0gRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UsCiAg
        ICBtZXRhID0gRW1iZXIubWV0YSwKICAgIGRlZmluZVByb3BlcnR5ID0gRW1i
        ZXIuZGVmaW5lUHJvcGVydHk7CgpmdW5jdGlvbiBjb250ZW50UHJvcGVydHlX
        aWxsQ2hhbmdlKGNvbnRlbnQsIGNvbnRlbnRLZXkpIHsKICB2YXIga2V5ID0g
        Y29udGVudEtleS5zbGljZSg4KTsgLy8gcmVtb3ZlICJjb250ZW50LiIKICBp
        ZiAoa2V5IGluIHRoaXMpIHsgcmV0dXJuOyB9ICAvLyBpZiBzaGFkb3dlZCBp
        biBwcm94eQogIHByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCBrZXkpOwp9Cgpm
        dW5jdGlvbiBjb250ZW50UHJvcGVydHlEaWRDaGFuZ2UoY29udGVudCwgY29u
        dGVudEtleSkgewogIHZhciBrZXkgPSBjb250ZW50S2V5LnNsaWNlKDgpOyAv
        LyByZW1vdmUgImNvbnRlbnQuIgogIGlmIChrZXkgaW4gdGhpcykgeyByZXR1
        cm47IH0gLy8gaWYgc2hhZG93ZWQgaW4gcHJveHkKICBwcm9wZXJ0eURpZENo
        YW5nZSh0aGlzLCBrZXkpOwp9CgovKioKICBgRW1iZXIuT2JqZWN0UHJveHlg
        IGZvcndhcmRzIGFsbCBwcm9wZXJ0aWVzIG5vdCBkZWZpbmVkIGJ5IHRoZSBw
        cm94eSBpdHNlbGYKICB0byBhIHByb3hpZWQgYGNvbnRlbnRgIG9iamVjdC4K
        CiAgYGBgamF2YXNjcmlwdAogIG9iamVjdCA9IEVtYmVyLk9iamVjdC5jcmVh
        dGUoewogICAgbmFtZTogJ0ZvbycKICB9KTsKCiAgcHJveHkgPSBFbWJlci5P
        YmplY3RQcm94eS5jcmVhdGUoewogICAgY29udGVudDogb2JqZWN0CiAgfSk7
        CgogIC8vIEFjY2VzcyBhbmQgY2hhbmdlIGV4aXN0aW5nIHByb3BlcnRpZXMK
        ICBwcm94eS5nZXQoJ25hbWUnKSAgICAgICAgICAvLyAnRm9vJwogIHByb3h5
        LnNldCgnbmFtZScsICdCYXInKTsKICBvYmplY3QuZ2V0KCduYW1lJykgICAg
        ICAgICAvLyAnQmFyJwoKICAvLyBDcmVhdGUgbmV3ICdkZXNjcmlwdGlvbicg
        cHJvcGVydHkgb24gYG9iamVjdGAKICBwcm94eS5zZXQoJ2Rlc2NyaXB0aW9u
        JywgJ0ZvbyBpcyBhIHdoaXpib28gYmF6Jyk7CiAgb2JqZWN0LmdldCgnZGVz
        Y3JpcHRpb24nKSAgLy8gJ0ZvbyBpcyBhIHdoaXpib28gYmF6JwogIGBgYAoK
        ICBXaGlsZSBgY29udGVudGAgaXMgdW5zZXQsIHNldHRpbmcgYSBwcm9wZXJ0
        eSB0byBiZSBkZWxlZ2F0ZWQgd2lsbCB0aHJvdyBhbgogIEVycm9yLgoKICBg
        YGBqYXZhc2NyaXB0CiAgcHJveHkgPSBFbWJlci5PYmplY3RQcm94eS5jcmVh
        dGUoewogICAgY29udGVudDogbnVsbCwKICAgIGZsYWc6IG51bGwKICB9KTsK
        ICBwcm94eS5zZXQoJ2ZsYWcnLCB0cnVlKTsKICBwcm94eS5nZXQoJ2ZsYWcn
        KTsgICAgICAgICAvLyB0cnVlCiAgcHJveHkuZ2V0KCdmb28nKTsgICAgICAg
        ICAgLy8gdW5kZWZpbmVkCiAgcHJveHkuc2V0KCdmb28nLCAnZGF0YScpOyAg
        Ly8gdGhyb3dzIEVycm9yCiAgYGBgCgogIERlbGVnYXRlZCBwcm9wZXJ0aWVz
        IGNhbiBiZSBib3VuZCB0byBhbmQgd2lsbCBjaGFuZ2Ugd2hlbiBjb250ZW50
        IGlzIHVwZGF0ZWQuCgogIENvbXB1dGVkIHByb3BlcnRpZXMgb24gdGhlIHBy
        b3h5IGl0c2VsZiBjYW4gZGVwZW5kIG9uIGRlbGVnYXRlZCBwcm9wZXJ0aWVz
        LgoKICBgYGBqYXZhc2NyaXB0CiAgUHJveHlXaXRoQ29tcHV0ZWRQcm9wZXJ0
        eSA9IEVtYmVyLk9iamVjdFByb3h5LmV4dGVuZCh7CiAgICBmdWxsTmFtZTog
        ZnVuY3Rpb24gKCkgewogICAgICB2YXIgZmlyc3ROYW1lID0gdGhpcy5nZXQo
        J2ZpcnN0TmFtZScpLAogICAgICAgICAgbGFzdE5hbWUgPSB0aGlzLmdldCgn
        bGFzdE5hbWUnKTsKICAgICAgaWYgKGZpcnN0TmFtZSAmJiBsYXN0TmFtZSkg
        ewogICAgICAgIHJldHVybiBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZTsK
        ICAgICAgfQogICAgICByZXR1cm4gZmlyc3ROYW1lIHx8IGxhc3ROYW1lOwog
        ICAgfS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICB9KTsK
        CiAgcHJveHkgPSBQcm94eVdpdGhDb21wdXRlZFByb3BlcnR5LmNyZWF0ZSgp
        OwoKICBwcm94eS5nZXQoJ2Z1bGxOYW1lJyk7ICAvLyB1bmRlZmluZWQKICBw
        cm94eS5zZXQoJ2NvbnRlbnQnLCB7CiAgICBmaXJzdE5hbWU6ICdUb20nLCBs
        YXN0TmFtZTogJ0RhbGUnCiAgfSk7IC8vIHRyaWdnZXJzIHByb3BlcnR5IGNo
        YW5nZSBmb3IgZnVsbE5hbWUgb24gcHJveHkKCiAgcHJveHkuZ2V0KCdmdWxs
        TmFtZScpOyAgLy8gJ1RvbSBEYWxlJwogIGBgYAoKICBAY2xhc3MgT2JqZWN0
        UHJveHkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2Jq
        ZWN0CiovCkVtYmVyLk9iamVjdFByb3h5ID0gRW1iZXIuT2JqZWN0LmV4dGVu
        ZCgvKiogQHNjb3BlIEVtYmVyLk9iamVjdFByb3h5LnByb3RvdHlwZSAqLyB7
        CiAgLyoqCiAgICBUaGUgb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgd2lsbCBi
        ZSBmb3J3YXJkZWQuCgogICAgQHByb3BlcnR5IGNvbnRlbnQKICAgIEB0eXBl
        IEVtYmVyLk9iamVjdAogICAgQGRlZmF1bHQgbnVsbAogICovCiAgY29udGVu
        dDogbnVsbCwKICBfY29udGVudERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIo
        J2NvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIEVtYmVyLmFzc2VydCgiQ2Fu
        J3Qgc2V0IE9iamVjdFByb3h5J3MgY29udGVudCB0byBpdHNlbGYiLCB0aGlz
        LmdldCgnY29udGVudCcpICE9PSB0aGlzKTsKICB9KSwKCiAgaXNUcnV0aHk6
        IEVtYmVyLmNvbXB1dGVkLmJvb2woJ2NvbnRlbnQnKSwKCiAgX2RlYnVnQ29u
        dGFpbmVyS2V5OiBudWxsLAoKICB3aWxsV2F0Y2hQcm9wZXJ0eTogZnVuY3Rp
        b24gKGtleSkgewogICAgdmFyIGNvbnRlbnRLZXkgPSAnY29udGVudC4nICsg
        a2V5OwogICAgYWRkQmVmb3JlT2JzZXJ2ZXIodGhpcywgY29udGVudEtleSwg
        bnVsbCwgY29udGVudFByb3BlcnR5V2lsbENoYW5nZSk7CiAgICBhZGRPYnNl
        cnZlcih0aGlzLCBjb250ZW50S2V5LCBudWxsLCBjb250ZW50UHJvcGVydHlE
        aWRDaGFuZ2UpOwogIH0sCgogIGRpZFVud2F0Y2hQcm9wZXJ0eTogZnVuY3Rp
        b24gKGtleSkgewogICAgdmFyIGNvbnRlbnRLZXkgPSAnY29udGVudC4nICsg
        a2V5OwogICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIodGhpcywgY29udGVudEtl
        eSwgbnVsbCwgY29udGVudFByb3BlcnR5V2lsbENoYW5nZSk7CiAgICByZW1v
        dmVPYnNlcnZlcih0aGlzLCBjb250ZW50S2V5LCBudWxsLCBjb250ZW50UHJv
        cGVydHlEaWRDaGFuZ2UpOwogIH0sCgogIHVua25vd25Qcm9wZXJ0eTogZnVu
        Y3Rpb24gKGtleSkgewogICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2Nv
        bnRlbnQnKTsKICAgIGlmIChjb250ZW50KSB7CiAgICAgIHJldHVybiBnZXQo
        Y29udGVudCwga2V5KTsKICAgIH0KICB9LAoKICBzZXRVbmtub3duUHJvcGVy
        dHk6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAgICB2YXIgbSA9IG1ldGEo
        dGhpcyk7CiAgICBpZiAobS5wcm90byA9PT0gdGhpcykgewogICAgICAvLyBp
        ZiBtYXJrZWQgYXMgcHJvdG90eXBlIHRoZW4ganVzdCBkZWZpbmVQcm9wZXJ0
        eQogICAgICAvLyByYXRoZXIgdGhhbiBkZWxlZ2F0ZQogICAgICBkZWZpbmVQ
        cm9wZXJ0eSh0aGlzLCBrZXksIG51bGwsIHZhbHVlKTsKICAgICAgcmV0dXJu
        IHZhbHVlOwogICAgfQoKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdj
        b250ZW50Jyk7CiAgICBFbWJlci5hc3NlcnQoZm10KCJDYW5ub3QgZGVsZWdh
        dGUgc2V0KCclQCcsICVAKSB0byB0aGUgJ2NvbnRlbnQnIHByb3BlcnR5IG9m
        IG9iamVjdCBwcm94eSAlQDogaXRzICdjb250ZW50JyBpcyB1bmRlZmluZWQu
        IiwgW2tleSwgdmFsdWUsIHRoaXNdKSwgY29udGVudCk7CiAgICByZXR1cm4g
        c2V0KGNvbnRlbnQsIGtleSwgdmFsdWUpOwogIH0KCn0pOwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXJ1bnRpbWUKKi8KCgp2YXIgc2V0ID0gRW1iZXIuc2V0LCBnZXQgPSBF
        bWJlci5nZXQsIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yOwp2YXIgZm9yRWFj
        aCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgaW5kZXhP
        ZiA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Y7Cgp2YXIgRWFjaEFy
        cmF5ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5BcnJheSwgewoKICBp
        bml0OiBmdW5jdGlvbihjb250ZW50LCBrZXlOYW1lLCBvd25lcikgewogICAg
        dGhpcy5fc3VwZXIoKTsKICAgIHRoaXMuX2tleU5hbWUgPSBrZXlOYW1lOwog
        ICAgdGhpcy5fb3duZXIgICA9IG93bmVyOwogICAgdGhpcy5fY29udGVudCA9
        IGNvbnRlbnQ7CiAgfSwKCiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewog
        ICAgdmFyIGl0ZW0gPSB0aGlzLl9jb250ZW50Lm9iamVjdEF0KGlkeCk7CiAg
        ICByZXR1cm4gaXRlbSAmJiBnZXQoaXRlbSwgdGhpcy5fa2V5TmFtZSk7CiAg
        fSwKCiAgbGVuZ3RoOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAg
        IHZhciBjb250ZW50ID0gdGhpcy5fY29udGVudDsKICAgIHJldHVybiBjb250
        ZW50ID8gZ2V0KGNvbnRlbnQsICdsZW5ndGgnKSA6IDA7CiAgfSkKCn0pOwoK
        dmFyIElTX09CU0VSVkVSID0gL14uKzooYmVmb3JlfGNoYW5nZSkkLzsKCmZ1
        bmN0aW9uIGFkZE9ic2VydmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXlO
        YW1lLCBwcm94eSwgaWR4LCBsb2MpIHsKICB2YXIgb2JqZWN0cyA9IHByb3h5
        Ll9vYmplY3RzLCBndWlkOwogIGlmICghb2JqZWN0cykgb2JqZWN0cyA9IHBy
        b3h5Ll9vYmplY3RzID0ge307CgogIHdoaWxlKC0tbG9jPj1pZHgpIHsKICAg
        IHZhciBpdGVtID0gY29udGVudC5vYmplY3RBdChsb2MpOwogICAgaWYgKGl0
        ZW0pIHsKICAgICAgRW1iZXIuYXNzZXJ0KCdXaGVuIHVzaW5nIEBlYWNoIHRv
        IG9ic2VydmUgdGhlIGFycmF5ICcgKyBjb250ZW50ICsgJywgdGhlIGFycmF5
        IG11c3QgcmV0dXJuIGFuIG9iamVjdCcsIEVtYmVyLnR5cGVPZihpdGVtKSA9
        PT0gJ2luc3RhbmNlJyB8fCBFbWJlci50eXBlT2YoaXRlbSkgPT09ICdvYmpl
        Y3QnKTsKICAgICAgRW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIoaXRlbSwga2V5
        TmFtZSwgcHJveHksICdjb250ZW50S2V5V2lsbENoYW5nZScpOwogICAgICBF
        bWJlci5hZGRPYnNlcnZlcihpdGVtLCBrZXlOYW1lLCBwcm94eSwgJ2NvbnRl
        bnRLZXlEaWRDaGFuZ2UnKTsKCiAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhl
        IGluZGV4IGVhY2ggaXRlbSB3YXMgZm91bmQgYXQgc28gd2UgY2FuIG1hcAog
        ICAgICAvLyBpdCBiYWNrIHdoZW4gdGhlIG9iaiBjaGFuZ2VzLgogICAgICBn
        dWlkID0gZ3VpZEZvcihpdGVtKTsKICAgICAgaWYgKCFvYmplY3RzW2d1aWRd
        KSBvYmplY3RzW2d1aWRdID0gW107CiAgICAgIG9iamVjdHNbZ3VpZF0ucHVz
        aChsb2MpOwogICAgfQogIH0KfQoKZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJG
        b3JDb250ZW50S2V5KGNvbnRlbnQsIGtleU5hbWUsIHByb3h5LCBpZHgsIGxv
        YykgewogIHZhciBvYmplY3RzID0gcHJveHkuX29iamVjdHM7CiAgaWYgKCFv
        YmplY3RzKSBvYmplY3RzID0gcHJveHkuX29iamVjdHMgPSB7fTsKICB2YXIg
        aW5kaWNpZXMsIGd1aWQ7CgogIHdoaWxlKC0tbG9jPj1pZHgpIHsKICAgIHZh
        ciBpdGVtID0gY29udGVudC5vYmplY3RBdChsb2MpOwogICAgaWYgKGl0ZW0p
        IHsKICAgICAgRW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRlbSwga2V5
        TmFtZSwgcHJveHksICdjb250ZW50S2V5V2lsbENoYW5nZScpOwogICAgICBF
        bWJlci5yZW1vdmVPYnNlcnZlcihpdGVtLCBrZXlOYW1lLCBwcm94eSwgJ2Nv
        bnRlbnRLZXlEaWRDaGFuZ2UnKTsKCiAgICAgIGd1aWQgPSBndWlkRm9yKGl0
        ZW0pOwogICAgICBpbmRpY2llcyA9IG9iamVjdHNbZ3VpZF07CiAgICAgIGlu
        ZGljaWVzW2luZGV4T2YuY2FsbChpbmRpY2llcywgbG9jKV0gPSBudWxsOwog
        ICAgfQogIH0KfQoKLyoqCiAgVGhpcyBpcyB0aGUgb2JqZWN0IGluc3RhbmNl
        IHJldHVybmVkIHdoZW4geW91IGdldCB0aGUgYEBlYWNoYCBwcm9wZXJ0eSBv
        biBhbgogIGFycmF5LiBJdCB1c2VzIHRoZSB1bmtub3duUHJvcGVydHkgaGFu
        ZGxlciB0byBhdXRvbWF0aWNhbGx5IGNyZWF0ZQogIEVhY2hBcnJheSBpbnN0
        YW5jZXMgZm9yIHByb3BlcnR5IG5hbWVzLgoKICBAcHJpdmF0ZQogIEBjbGFz
        cyBFYWNoUHJveHkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1i
        ZXIuT2JqZWN0CiovCkVtYmVyLkVhY2hQcm94eSA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoewoKICBpbml0OiBmdW5jdGlvbihjb250ZW50KSB7CiAgICB0aGlz
        Ll9zdXBlcigpOwogICAgdGhpcy5fY29udGVudCA9IGNvbnRlbnQ7CiAgICBj
        b250ZW50LmFkZEFycmF5T2JzZXJ2ZXIodGhpcyk7CgogICAgLy8gaW4gY2Fz
        ZSBzb21lb25lIGlzIGFscmVhZHkgb2JzZXJ2aW5nIHNvbWUga2V5cyBtYWtl
        IHN1cmUgdGhleSBhcmUKICAgIC8vIGFkZGVkCiAgICBmb3JFYWNoKEVtYmVy
        LndhdGNoZWRFdmVudHModGhpcyksIGZ1bmN0aW9uKGV2ZW50TmFtZSkgewog
        ICAgICB0aGlzLmRpZEFkZExpc3RlbmVyKGV2ZW50TmFtZSk7CiAgICB9LCB0
        aGlzKTsKICB9LAoKICAvKioKICAgIFlvdSBjYW4gZGlyZWN0bHkgYWNjZXNz
        IG1hcHBlZCBwcm9wZXJ0aWVzIGJ5IHNpbXBseSByZXF1ZXN0aW5nIHRoZW0u
        CiAgICBUaGUgYHVua25vd25Qcm9wZXJ0eWAgaGFuZGxlciB3aWxsIGdlbmVy
        YXRlIGFuIEVhY2hBcnJheSBvZiBlYWNoIGl0ZW0uCgogICAgQG1ldGhvZCB1
        bmtub3duUHJvcGVydHkKICAgIEBwYXJhbSBrZXlOYW1lIHtTdHJpbmd9CiAg
        ICBAcGFyYW0gdmFsdWUgeyp9CiAgKi8KICB1bmtub3duUHJvcGVydHk6IGZ1
        bmN0aW9uKGtleU5hbWUsIHZhbHVlKSB7CiAgICB2YXIgcmV0OwogICAgcmV0
        ID0gbmV3IEVhY2hBcnJheSh0aGlzLl9jb250ZW50LCBrZXlOYW1lLCB0aGlz
        KTsKICAgIEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsIGtleU5hbWUsIG51
        bGwsIHJldCk7CiAgICB0aGlzLmJlZ2luT2JzZXJ2aW5nQ29udGVudEtleShr
        ZXlOYW1lKTsKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLy8gLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLgogIC8vIEFSUkFZIENIQU5HRVMKICAvLyBJbnZva2VzIHdoZW5ldmVy
        IHRoZSBjb250ZW50IGFycmF5IGl0c2VsZiBjaGFuZ2VzLgoKICBhcnJheVdp
        bGxDaGFuZ2U6IGZ1bmN0aW9uKGNvbnRlbnQsIGlkeCwgcmVtb3ZlZENudCwg
        YWRkZWRDbnQpIHsKICAgIHZhciBrZXlzID0gdGhpcy5fa2V5cywga2V5LCBs
        aW07CgogICAgbGltID0gcmVtb3ZlZENudD4wID8gaWR4K3JlbW92ZWRDbnQg
        OiAtMTsKICAgIEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRoaXMpOwoK
        ICAgIGZvcihrZXkgaW4ga2V5cykgewogICAgICBpZiAoIWtleXMuaGFzT3du
        UHJvcGVydHkoa2V5KSkgeyBjb250aW51ZTsgfQoKICAgICAgaWYgKGxpbT4w
        KSB7IHJlbW92ZU9ic2VydmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXks
        IHRoaXMsIGlkeCwgbGltKTsgfQoKICAgICAgRW1iZXIucHJvcGVydHlXaWxs
        Q2hhbmdlKHRoaXMsIGtleSk7CiAgICB9CgogICAgRW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMuX2NvbnRlbnQsICdAZWFjaCcpOwogICAgRW1iZXIu
        ZW5kUHJvcGVydHlDaGFuZ2VzKHRoaXMpOwogIH0sCgogIGFycmF5RGlkQ2hh
        bmdlOiBmdW5jdGlvbihjb250ZW50LCBpZHgsIHJlbW92ZWRDbnQsIGFkZGVk
        Q250KSB7CiAgICB2YXIga2V5cyA9IHRoaXMuX2tleXMsIGxpbTsKCiAgICBs
        aW0gPSBhZGRlZENudD4wID8gaWR4K2FkZGVkQ250IDogLTE7CiAgICBFbWJl
        ci5jaGFuZ2VQcm9wZXJ0aWVzKGZ1bmN0aW9uKCkgewogICAgICBmb3IodmFy
        IGtleSBpbiBrZXlzKSB7CiAgICAgICAgaWYgKCFrZXlzLmhhc093blByb3Bl
        cnR5KGtleSkpIHsgY29udGludWU7IH0KCiAgICAgICAgaWYgKGxpbT4wKSB7
        IGFkZE9ic2VydmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXksIHRoaXMs
        IGlkeCwgbGltKTsgfQoKICAgICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZSh0aGlzLCBrZXkpOwogICAgICB9CgogICAgICBFbWJlci5wcm9wZXJ0eURp
        ZENoYW5nZSh0aGlzLl9jb250ZW50LCAnQGVhY2gnKTsKICAgIH0sIHRoaXMp
        OwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBMSVNURU4gRk9SIE5F
        VyBPQlNFUlZFUlMgQU5EIE9USEVSIEVWRU5UIExJU1RFTkVSUwogIC8vIFN0
        YXJ0IG1vbml0b3Jpbmcga2V5cyBiYXNlZCBvbiB3aG8gaXMgbGlzdGVuaW5n
        Li4uCgogIGRpZEFkZExpc3RlbmVyOiBmdW5jdGlvbihldmVudE5hbWUpIHsK
        ICAgIGlmIChJU19PQlNFUlZFUi50ZXN0KGV2ZW50TmFtZSkpIHsKICAgICAg
        dGhpcy5iZWdpbk9ic2VydmluZ0NvbnRlbnRLZXkoZXZlbnROYW1lLnNsaWNl
        KDAsIC03KSk7CiAgICB9CiAgfSwKCiAgZGlkUmVtb3ZlTGlzdGVuZXI6IGZ1
        bmN0aW9uKGV2ZW50TmFtZSkgewogICAgaWYgKElTX09CU0VSVkVSLnRlc3Qo
        ZXZlbnROYW1lKSkgewogICAgICB0aGlzLnN0b3BPYnNlcnZpbmdDb250ZW50
        S2V5KGV2ZW50TmFtZS5zbGljZSgwLCAtNykpOwogICAgfQogIH0sCgogIC8v
        IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4KICAvLyBDT05URU5UIEtFWSBPQlNFUlZJTkcKICAv
        LyBBY3R1YWwgd2F0Y2gga2V5cyBvbiB0aGUgc291cmNlIGNvbnRlbnQuCgog
        IGJlZ2luT2JzZXJ2aW5nQ29udGVudEtleTogZnVuY3Rpb24oa2V5TmFtZSkg
        ewogICAgdmFyIGtleXMgPSB0aGlzLl9rZXlzOwogICAgaWYgKCFrZXlzKSBr
        ZXlzID0gdGhpcy5fa2V5cyA9IHt9OwogICAgaWYgKCFrZXlzW2tleU5hbWVd
        KSB7CiAgICAgIGtleXNba2V5TmFtZV0gPSAxOwogICAgICB2YXIgY29udGVu
        dCA9IHRoaXMuX2NvbnRlbnQsCiAgICAgICAgICBsZW4gPSBnZXQoY29udGVu
        dCwgJ2xlbmd0aCcpOwogICAgICBhZGRPYnNlcnZlckZvckNvbnRlbnRLZXko
        Y29udGVudCwga2V5TmFtZSwgdGhpcywgMCwgbGVuKTsKICAgIH0gZWxzZSB7
        CiAgICAgIGtleXNba2V5TmFtZV0rKzsKICAgIH0KICB9LAoKICBzdG9wT2Jz
        ZXJ2aW5nQ29udGVudEtleTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgdmFy
        IGtleXMgPSB0aGlzLl9rZXlzOwogICAgaWYgKGtleXMgJiYgKGtleXNba2V5
        TmFtZV0+MCkgJiYgKC0ta2V5c1trZXlOYW1lXTw9MCkpIHsKICAgICAgdmFy
        IGNvbnRlbnQgPSB0aGlzLl9jb250ZW50LAogICAgICAgICAgbGVuICAgICA9
        IGdldChjb250ZW50LCAnbGVuZ3RoJyk7CiAgICAgIHJlbW92ZU9ic2VydmVy
        Rm9yQ29udGVudEtleShjb250ZW50LCBrZXlOYW1lLCB0aGlzLCAwLCBsZW4p
        OwogICAgfQogIH0sCgogIGNvbnRlbnRLZXlXaWxsQ2hhbmdlOiBmdW5jdGlv
        bihvYmosIGtleU5hbWUpIHsKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5n
        ZSh0aGlzLCBrZXlOYW1lKTsKICB9LAoKICBjb250ZW50S2V5RGlkQ2hhbmdl
        OiBmdW5jdGlvbihvYmosIGtleU5hbWUpIHsKICAgIEVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKHRoaXMsIGtleU5hbWUpOwogIH0KCn0pOwoKCgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItcnVudGltZQoqLwoKCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9
        IEVtYmVyLnNldCwgcmVwbGFjZSA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5f
        cmVwbGFjZTsKCi8vIEFkZCBFbWJlci5BcnJheSB0byBBcnJheS5wcm90b3R5
        cGUuIFJlbW92ZSBtZXRob2RzIHdpdGggbmF0aXZlCi8vIGltcGxlbWVudGF0
        aW9ucyBhbmQgc3VwcGx5IHNvbWUgbW9yZSBvcHRpbWl6ZWQgdmVyc2lvbnMg
        b2YgZ2VuZXJpYyBtZXRob2RzCi8vIGJlY2F1c2UgdGhleSBhcmUgc28gY29t
        bW9uLgp2YXIgTmF0aXZlQXJyYXkgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1i
        ZXIuTXV0YWJsZUFycmF5LCBFbWJlci5PYnNlcnZhYmxlLCBFbWJlci5Db3B5
        YWJsZSwgewoKICAvLyBiZWNhdXNlIGxlbmd0aCBpcyBhIGJ1aWx0LWluIHBy
        b3BlcnR5IHdlIG5lZWQgdG8ga25vdyB0byBqdXN0IGdldCB0aGUKICAvLyBv
        cmlnaW5hbCBwcm9wZXJ0eS4KICBnZXQ6IGZ1bmN0aW9uKGtleSkgewogICAg
        aWYgKGtleT09PSdsZW5ndGgnKSByZXR1cm4gdGhpcy5sZW5ndGg7CiAgICBl
        bHNlIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIGtleSkgcmV0dXJuIHRoaXNb
        a2V5XTsKICAgIGVsc2UgcmV0dXJuIHRoaXMuX3N1cGVyKGtleSk7CiAgfSwK
        CiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgcmV0dXJuIHRoaXNb
        aWR4XTsKICB9LAoKICAvLyBwcmltaXRpdmUgZm9yIGFycmF5IHN1cHBvcnQu
        CiAgcmVwbGFjZTogZnVuY3Rpb24oaWR4LCBhbXQsIG9iamVjdHMpIHsKCiAg
        ICBpZiAodGhpcy5pc0Zyb3plbikgdGhyb3cgRW1iZXIuRlJPWkVOX0VSUk9S
        OwoKICAgIC8vIGlmIHdlIHJlcGxhY2VkIGV4YWN0bHkgdGhlIHNhbWUgbnVt
        YmVyIG9mIGl0ZW1zLCB0aGVuIHBhc3Mgb25seSB0aGUKICAgIC8vIHJlcGxh
        Y2VkIHJhbmdlLiBPdGhlcndpc2UsIHBhc3MgdGhlIGZ1bGwgcmVtYWluaW5n
        IGFycmF5IGxlbmd0aAogICAgLy8gc2luY2UgZXZlcnl0aGluZyBoYXMgc2hp
        ZnRlZAogICAgdmFyIGxlbiA9IG9iamVjdHMgPyBnZXQob2JqZWN0cywgJ2xl
        bmd0aCcpIDogMDsKICAgIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShp
        ZHgsIGFtdCwgbGVuKTsKCiAgICBpZiAobGVuID09PSAwKSB7CiAgICAgIHRo
        aXMuc3BsaWNlKGlkeCwgYW10KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcGxh
        Y2UodGhpcywgaWR4LCBhbXQsIG9iamVjdHMpOwogICAgfQoKICAgIHRoaXMu
        YXJyYXlDb250ZW50RGlkQ2hhbmdlKGlkeCwgYW10LCBsZW4pOwogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgLy8gSWYgeW91IGFzayBmb3IgYW4gdW5rbm93
        biBwcm9wZXJ0eSwgdGhlbiB0cnkgdG8gY29sbGVjdCB0aGUgdmFsdWUKICAv
        LyBmcm9tIG1lbWJlciBpdGVtcy4KICB1bmtub3duUHJvcGVydHk6IGZ1bmN0
        aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciByZXQ7Ly8gPSB0aGlzLnJlZHVj
        ZWRQcm9wZXJ0eShrZXksIHZhbHVlKSA7CiAgICBpZiAoKHZhbHVlICE9PSB1
        bmRlZmluZWQpICYmIHJldCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldCA9
        IHRoaXNba2V5XSA9IHZhbHVlOwogICAgfQogICAgcmV0dXJuIHJldCA7CiAg
        fSwKCiAgLy8gSWYgYnJvd3NlciBkaWQgbm90IGltcGxlbWVudCBpbmRleE9m
        IG5hdGl2ZWx5LCB0aGVuIG92ZXJyaWRlIHdpdGgKICAvLyBzcGVjaWFsaXpl
        ZCB2ZXJzaW9uCiAgaW5kZXhPZjogZnVuY3Rpb24ob2JqZWN0LCBzdGFydEF0
        KSB7CiAgICB2YXIgaWR4LCBsZW4gPSB0aGlzLmxlbmd0aDsKCiAgICBpZiAo
        c3RhcnRBdCA9PT0gdW5kZWZpbmVkKSBzdGFydEF0ID0gMDsKICAgIGVsc2Ug
        c3RhcnRBdCA9IChzdGFydEF0IDwgMCkgPyBNYXRoLmNlaWwoc3RhcnRBdCkg
        OiBNYXRoLmZsb29yKHN0YXJ0QXQpOwogICAgaWYgKHN0YXJ0QXQgPCAwKSBz
        dGFydEF0ICs9IGxlbjsKCiAgICBmb3IoaWR4PXN0YXJ0QXQ7aWR4PGxlbjtp
        ZHgrKykgewogICAgICBpZiAodGhpc1tpZHhdID09PSBvYmplY3QpIHJldHVy
        biBpZHggOwogICAgfQogICAgcmV0dXJuIC0xOwogIH0sCgogIGxhc3RJbmRl
        eE9mOiBmdW5jdGlvbihvYmplY3QsIHN0YXJ0QXQpIHsKICAgIHZhciBpZHgs
        IGxlbiA9IHRoaXMubGVuZ3RoOwoKICAgIGlmIChzdGFydEF0ID09PSB1bmRl
        ZmluZWQpIHN0YXJ0QXQgPSBsZW4tMTsKICAgIGVsc2Ugc3RhcnRBdCA9IChz
        dGFydEF0IDwgMCkgPyBNYXRoLmNlaWwoc3RhcnRBdCkgOiBNYXRoLmZsb29y
        KHN0YXJ0QXQpOwogICAgaWYgKHN0YXJ0QXQgPCAwKSBzdGFydEF0ICs9IGxl
        bjsKCiAgICBmb3IoaWR4PXN0YXJ0QXQ7aWR4Pj0wO2lkeC0tKSB7CiAgICAg
        IGlmICh0aGlzW2lkeF0gPT09IG9iamVjdCkgcmV0dXJuIGlkeCA7CiAgICB9
        CiAgICByZXR1cm4gLTE7CiAgfSwKCiAgY29weTogZnVuY3Rpb24oZGVlcCkg
        ewogICAgaWYgKGRlZXApIHsKICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0
        aW9uKGl0ZW0pIHsgcmV0dXJuIEVtYmVyLmNvcHkoaXRlbSwgdHJ1ZSk7IH0p
        OwogICAgfQoKICAgIHJldHVybiB0aGlzLnNsaWNlKCk7CiAgfQp9KTsKCi8v
        IFJlbW92ZSBhbnkgbWV0aG9kcyBpbXBsZW1lbnRlZCBuYXRpdmVseSBzbyB3
        ZSBkb24ndCBvdmVycmlkZSB0aGVtCnZhciBpZ25vcmUgPSBbJ2xlbmd0aCdd
        OwpFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaChOYXRpdmVBcnJheS5r
        ZXlzKCksIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHsKICBpZiAoQXJyYXkucHJv
        dG90eXBlW21ldGhvZE5hbWVdKSBpZ25vcmUucHVzaChtZXRob2ROYW1lKTsK
        fSk7CgppZiAoaWdub3JlLmxlbmd0aD4wKSB7CiAgTmF0aXZlQXJyYXkgPSBO
        YXRpdmVBcnJheS53aXRob3V0LmFwcGx5KE5hdGl2ZUFycmF5LCBpZ25vcmUp
        Owp9CgovKioKICBUaGUgTmF0aXZlQXJyYXkgbWl4aW4gY29udGFpbnMgdGhl
        IHByb3BlcnRpZXMgbmVlZGVkIHRvIHRvIG1ha2UgdGhlIG5hdGl2ZQogIEFy
        cmF5IHN1cHBvcnQgRW1iZXIuTXV0YWJsZUFycmF5IGFuZCBhbGwgb2YgaXRz
        IGRlcGVuZGVudCBBUElzLiBVbmxlc3MgeW91CiAgaGF2ZSBgRW1iZXIuRVhU
        RU5EX1BST1RPVFlQRVNgIG9yIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5B
        cnJheWAgc2V0IHRvCiAgZmFsc2UsIHRoaXMgd2lsbCBiZSBhcHBsaWVkIGF1
        dG9tYXRpY2FsbHkuIE90aGVyd2lzZSB5b3UgY2FuIGFwcGx5IHRoZSBtaXhp
        bgogIGF0IGFueXRpbWUgYnkgY2FsbGluZyBgRW1iZXIuTmF0aXZlQXJyYXku
        YWN0aXZhdGVgLgoKICBAY2xhc3MgTmF0aXZlQXJyYXkKICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQHVzZXMgRW1iZXIuTXV0YWJsZUFycmF5CiAgQHVzZXMgRW1i
        ZXIuT2JzZXJ2YWJsZQogIEB1c2VzIEVtYmVyLkNvcHlhYmxlCiovCkVtYmVy
        Lk5hdGl2ZUFycmF5ID0gTmF0aXZlQXJyYXk7CgovKioKICBDcmVhdGVzIGFu
        IGBFbWJlci5OYXRpdmVBcnJheWAgZnJvbSBhbiBBcnJheSBsaWtlIG9iamVj
        dC4KICBEb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIG9iamVjdC4gRW1i
        ZXIuQSBpcyBub3QgbmVlZGVkIGlmCiAgYEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTYCBpcyBgdHJ1ZWAgKHRoZSBkZWZhdWx0IHZhbHVlKS4gSG93ZXZlciwK
        ICBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSB1c2UgRW1iZXIuQSB3aGVu
        IGNyZWF0aW5nIGFkZG9ucyBmb3IKICBlbWJlciBvciB3aGVuIHlvdSBjYW4g
        bm90IGd1YXJhbnRlZSB0aGF0IGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2AK
        ICB3aWxsIGJlIGB0cnVlYC4KCiAgRXhhbXBsZQoKICBgYGBqcwogIHZhciBQ
        YWdpbmF0aW9uID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuZXh0ZW5kKHsKICAg
        IHRhZ05hbWU6ICd1bCcsCiAgICBjbGFzc05hbWVzOiBbJ3BhZ2luYXRpb24n
        XSwKICAgIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLl9zdXBlcigp
        OwogICAgICBpZiAoIXRoaXMuZ2V0KCdjb250ZW50JykpIHsKICAgICAgICB0
        aGlzLnNldCgnY29udGVudCcsIEVtYmVyLkEoW10pKTsKICAgICAgfQogICAg
        fQogIH0pOwogIGBgYAoKICBAbWV0aG9kIEEKICBAZm9yIEVtYmVyCiAgQHJl
        dHVybiB7RW1iZXIuTmF0aXZlQXJyYXl9CiovCkVtYmVyLkEgPSBmdW5jdGlv
        bihhcnIpIHsKICBpZiAoYXJyID09PSB1bmRlZmluZWQpIHsgYXJyID0gW107
        IH0KICByZXR1cm4gRW1iZXIuQXJyYXkuZGV0ZWN0KGFycikgPyBhcnIgOiBF
        bWJlci5OYXRpdmVBcnJheS5hcHBseShhcnIpOwp9OwoKLyoqCiAgQWN0aXZh
        dGVzIHRoZSBtaXhpbiBvbiB0aGUgQXJyYXkucHJvdG90eXBlIGlmIG5vdCBh
        bHJlYWR5IGFwcGxpZWQuIENhbGxpbmcKICB0aGlzIG1ldGhvZCBtb3JlIHRo
        YW4gb25jZSBpcyBzYWZlLiBUaGlzIHdpbGwgYmUgY2FsbGVkIHdoZW4gZW1i
        ZXIgaXMgbG9hZGVkCiAgdW5sZXNzIHlvdSBoYXZlIGBFbWJlci5FWFRFTkRf
        UFJPVE9UWVBFU2Agb3IgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkFycmF5
        YAogIHNldCB0byBgZmFsc2VgLgoKICBFeGFtcGxlCgogIGBgYGpzCiAgaWYg
        KEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTLkFycmF5KSB7CiAgICBFbWJlci5OYXRpdmVBcnJh
        eS5hY3RpdmF0ZSgpOwogIH0KICBgYGAKCiAgQG1ldGhvZCBhY3RpdmF0ZQog
        IEBmb3IgRW1iZXIuTmF0aXZlQXJyYXkKICBAc3RhdGljCiAgQHJldHVybiB7
        dm9pZH0KKi8KRW1iZXIuTmF0aXZlQXJyYXkuYWN0aXZhdGUgPSBmdW5jdGlv
        bigpIHsKICBOYXRpdmVBcnJheS5hcHBseShBcnJheS5wcm90b3R5cGUpOwoK
        ICBFbWJlci5BID0gZnVuY3Rpb24oYXJyKSB7IHJldHVybiBhcnIgfHwgW107
        IH07Cn07CgppZiAoRW1iZXIuRVhURU5EX1BST1RPVFlQRVMgPT09IHRydWUg
        fHwgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMuQXJyYXkpIHsKICBFbWJlci5O
        YXRpdmVBcnJheS5hY3RpdmF0ZSgpOwp9CgoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwg
        Z3VpZEZvciA9IEVtYmVyLmd1aWRGb3IsIGlzTm9uZSA9IEVtYmVyLmlzTm9u
        ZSwgZm10ID0gRW1iZXIuU3RyaW5nLmZtdDsKCi8qKgogIEFuIHVub3JkZXJl
        ZCBjb2xsZWN0aW9uIG9mIG9iamVjdHMuCgogIEEgU2V0IHdvcmtzIGEgYml0
        IGxpa2UgYW4gYXJyYXkgZXhjZXB0IHRoYXQgaXRzIGl0ZW1zIGFyZSBub3Qg
        b3JkZXJlZC4gWW91CiAgY2FuIGNyZWF0ZSBhIHNldCB0byBlZmZpY2llbnRs
        eSB0ZXN0IGZvciBtZW1iZXJzaGlwIGZvciBhbiBvYmplY3QuIFlvdSBjYW4K
        ICBhbHNvIGl0ZXJhdGUgdGhyb3VnaCBhIHNldCBqdXN0IGxpa2UgYW4gYXJy
        YXksIGV2ZW4gYWNjZXNzaW5nIG9iamVjdHMgYnkKICBpbmRleCwgaG93ZXZl
        ciB0aGVyZSBpcyBubyBndWFyYW50ZWUgYXMgdG8gdGhlaXIgb3JkZXIuCgog
        IEFsbCBTZXRzIGFyZSBvYnNlcnZhYmxlIHZpYSB0aGUgRW51bWVyYWJsZSBP
        YnNlcnZlciBBUEkgLSB3aGljaCB3b3JrcwogIG9uIGFueSBlbnVtZXJhYmxl
        IG9iamVjdCBpbmNsdWRpbmcgYm90aCBTZXRzIGFuZCBBcnJheXMuCgogICMj
        IENyZWF0aW5nIGEgU2V0CgogIFlvdSBjYW4gY3JlYXRlIGEgc2V0IGxpa2Ug
        eW91IHdvdWxkIG1vc3Qgb2JqZWN0cyB1c2luZwogIGBuZXcgRW1iZXIuU2V0
        KClgLiBNb3N0IG5ldyBzZXRzIHlvdSBjcmVhdGUgd2lsbCBiZSBlbXB0eSwg
        YnV0IHlvdSBjYW4KICBhbHNvIGluaXRpYWxpemUgdGhlIHNldCB3aXRoIHNv
        bWUgY29udGVudCBieSBwYXNzaW5nIGFuIGFycmF5IG9yIG90aGVyCiAgZW51
        bWVyYWJsZSBvZiBvYmplY3RzIHRvIHRoZSBjb25zdHJ1Y3Rvci4KCiAgRmlu
        YWxseSwgeW91IGNhbiBwYXNzIGluIGFuIGV4aXN0aW5nIHNldCBhbmQgdGhl
        IHNldCB3aWxsIGJlIGNvcGllZC4gWW91CiAgY2FuIGFsc28gY3JlYXRlIGEg
        Y29weSBvZiBhIHNldCBieSBjYWxsaW5nIGBFbWJlci5TZXQjY29weSgpYC4K
        CiAgYGBgamF2YXNjcmlwdAogIC8vIGNyZWF0ZXMgYSBuZXcgZW1wdHkgc2V0
        CiAgdmFyIGZvdW5kTmFtZXMgPSBuZXcgRW1iZXIuU2V0KCk7CgogIC8vIGNy
        ZWF0ZXMgYSBzZXQgd2l0aCBmb3VyIG5hbWVzIGluIGl0LgogIHZhciBuYW1l
        cyA9IG5ldyBFbWJlci5TZXQoWyJDaGFybGVzIiwgIlRvbSIsICJKdWFuIiwg
        IkFsZXgiXSk7IC8vIDpQCgogIC8vIGNyZWF0ZXMgYSBjb3B5IG9mIHRoZSBu
        YW1lcyBzZXQuCiAgdmFyIG5hbWVzQ29weSA9IG5ldyBFbWJlci5TZXQobmFt
        ZXMpOwoKICAvLyBzYW1lIGFzIGFib3ZlLgogIHZhciBhbm90aGVyTmFtZXND
        b3B5ID0gbmFtZXMuY29weSgpOwogIGBgYAoKICAjIyBBZGRpbmcvUmVtb3Zp
        bmcgT2JqZWN0cwoKICBZb3UgZ2VuZXJhbGx5IGFkZCBvciByZW1vdmUgb2Jq
        ZWN0cyBmcm9tIGEgc2V0IHVzaW5nIGBhZGQoKWAgb3IKICBgcmVtb3ZlKClg
        LiBZb3UgY2FuIGFkZCBhbnkgdHlwZSBvZiBvYmplY3QgaW5jbHVkaW5nIHBy
        aW1pdGl2ZXMgc3VjaCBhcwogIG51bWJlcnMsIHN0cmluZ3MsIGFuZCBib29s
        ZWFucy4KCiAgVW5saWtlIGFycmF5cywgb2JqZWN0cyBjYW4gb25seSBleGlz
        dCBvbmUgdGltZSBpbiBhIHNldC4gSWYgeW91IGNhbGwgYGFkZCgpYAogIG9u
        IGEgc2V0IHdpdGggdGhlIHNhbWUgb2JqZWN0IG11bHRpcGxlIHRpbWVzLCB0
        aGUgb2JqZWN0IHdpbGwgb25seSBiZSBhZGRlZAogIG9uY2UuIExpa2V3aXNl
        LCBjYWxsaW5nIGByZW1vdmUoKWAgd2l0aCB0aGUgc2FtZSBvYmplY3QgbXVs
        dGlwbGUgdGltZXMgd2lsbAogIHJlbW92ZSB0aGUgb2JqZWN0IHRoZSBmaXJz
        dCB0aW1lIGFuZCBoYXZlIG5vIGVmZmVjdCBvbiBmdXR1cmUgY2FsbHMgdW50
        aWwKICB5b3UgYWRkIHRoZSBvYmplY3QgdG8gdGhlIHNldCBhZ2Fpbi4KCiAg
        Tk9URTogWW91IGNhbm5vdCBhZGQvcmVtb3ZlIGBudWxsYCBvciBgdW5kZWZp
        bmVkYCB0byBhIHNldC4gQW55IGF0dGVtcHQgdG8gZG8KICBzbyB3aWxsIGJl
        IGlnbm9yZWQuCgogIEluIGFkZGl0aW9uIHRvIGFkZC9yZW1vdmUgeW91IGNh
        biBhbHNvIGNhbGwgYHB1c2goKWAvYHBvcCgpYC4gUHVzaCBiZWhhdmVzCiAg
        anVzdCBsaWtlIGBhZGQoKWAgYnV0IGBwb3AoKWAsIHVubGlrZSBgcmVtb3Zl
        KClgIHdpbGwgcGljayBhbiBhcmJpdHJhcnkKICBvYmplY3QsIHJlbW92ZSBp
        dCBhbmQgcmV0dXJuIGl0LiBUaGlzIGlzIGEgZ29vZCB3YXkgdG8gdXNlIGEg
        c2V0IGFzIGEgam9iCiAgcXVldWUgd2hlbiB5b3UgZG9uJ3QgY2FyZSB3aGlj
        aCBvcmRlciB0aGUgam9icyBhcmUgZXhlY3V0ZWQgaW4uCgogICMjIFRlc3Rp
        bmcgZm9yIGFuIE9iamVjdAoKICBUbyB0ZXN0IGZvciBhbiBvYmplY3QncyBw
        cmVzZW5jZSBpbiBhIHNldCB5b3Ugc2ltcGx5IGNhbGwKICBgRW1iZXIuU2V0
        I2NvbnRhaW5zKClgLgoKICAjIyBPYnNlcnZpbmcgY2hhbmdlcwoKICBXaGVu
        IHVzaW5nIGBFbWJlci5TZXRgLCB5b3UgY2FuIG9ic2VydmUgdGhlIGAiW10i
        YCBwcm9wZXJ0eSB0byBiZQogIGFsZXJ0ZWQgd2hlbmV2ZXIgdGhlIGNvbnRl
        bnQgY2hhbmdlcy4gWW91IGNhbiBhbHNvIGFkZCBhbiBlbnVtZXJhYmxlCiAg
        b2JzZXJ2ZXIgdG8gdGhlIHNldCB0byBiZSBub3RpZmllZCBvZiBzcGVjaWZp
        YyBvYmplY3RzIHRoYXQgYXJlIGFkZGVkIGFuZAogIHJlbW92ZWQgZnJvbSB0
        aGUgc2V0LiBTZWUgW0VtYmVyLkVudW1lcmFibGVdKC9hcGkvY2xhc3Nlcy9F
        bWJlci5FbnVtZXJhYmxlLmh0bWwpCiAgZm9yIG1vcmUgaW5mb3JtYXRpb24g
        b24gZW51bWVyYWJsZXMuCgogIFRoaXMgaXMgb2Z0ZW4gdW5oZWxwZnVsLiBJ
        ZiB5b3UgYXJlIGZpbHRlcmluZyBzZXRzIG9mIG9iamVjdHMsIGZvciBpbnN0
        YW5jZSwKICBpdCBpcyB2ZXJ5IGluZWZmaWNpZW50IHRvIHJlLWZpbHRlciBh
        bGwgb2YgdGhlIGl0ZW1zIGVhY2ggdGltZSB0aGUgc2V0CiAgY2hhbmdlcy4g
        SXQgd291bGQgYmUgYmV0dGVyIGlmIHlvdSBjb3VsZCBqdXN0IGFkanVzdCB0
        aGUgZmlsdGVyZWQgc2V0IGJhc2VkCiAgb24gd2hhdCB3YXMgY2hhbmdlZCBv
        biB0aGUgb3JpZ2luYWwgc2V0LiBUaGUgc2FtZSBpc3N1ZSBhcHBsaWVzIHRv
        IG1lcmdpbmcKICBzZXRzLCBhcyB3ZWxsLgoKICAjIyBPdGhlciBNZXRob2Rz
        CgogIGBFbWJlci5TZXRgIHByaW1hcnkgaW1wbGVtZW50cyBvdGhlciBtaXhp
        biBBUElzLiBGb3IgYSBjb21wbGV0ZSByZWZlcmVuY2UKICBvbiB0aGUgbWV0
        aG9kcyB5b3Ugd2lsbCB1c2Ugd2l0aCBgRW1iZXIuU2V0YCwgcGxlYXNlIGNv
        bnN1bHQgdGhlc2UgbWl4aW5zLgogIFRoZSBtb3N0IHVzZWZ1bCBvbmVzIHdp
        bGwgYmUgYEVtYmVyLkVudW1lcmFibGVgIGFuZAogIGBFbWJlci5NdXRhYmxl
        RW51bWVyYWJsZWAgd2hpY2ggaW1wbGVtZW50IG1vc3Qgb2YgdGhlIGNvbW1v
        biBpdGVyYXRvcgogIG1ldGhvZHMgeW91IGFyZSB1c2VkIHRvIG9uIEFycmF5
        LgoKICBOb3RlIHRoYXQgeW91IGNhbiBhbHNvIHVzZSB0aGUgYEVtYmVyLkNv
        cHlhYmxlYCBhbmQgYEVtYmVyLkZyZWV6YWJsZWAKICBBUElzIG9uIGBFbWJl
        ci5TZXRgIGFzIHdlbGwuIE9uY2UgYSBzZXQgaXMgZnJvemVuIGl0IGNhbiBu
        byBsb25nZXIgYmUKICBtb2RpZmllZC4gVGhlIGJlbmVmaXQgb2YgdGhpcyBp
        cyB0aGF0IHdoZW4geW91IGNhbGwgYGZyb3plbkNvcHkoKWAgb24gaXQsCiAg
        RW1iZXIgd2lsbCBhdm9pZCBtYWtpbmcgY29waWVzIG9mIHRoZSBzZXQuIFRo
        aXMgYWxsb3dzIHlvdSB0byB3cml0ZQogIGNvZGUgdGhhdCBjYW4ga25vdyB3
        aXRoIGNlcnRhaW50eSB3aGVuIHRoZSB1bmRlcmx5aW5nIHNldCBkYXRhIHdp
        bGwgb3IKICB3aWxsIG5vdCBiZSBtb2RpZmllZC4KCiAgQGNsYXNzIFNldAog
        IEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5Db3JlT2JqZWN0
        CiAgQHVzZXMgRW1iZXIuTXV0YWJsZUVudW1lcmFibGUKICBAdXNlcyBFbWJl
        ci5Db3B5YWJsZQogIEB1c2VzIEVtYmVyLkZyZWV6YWJsZQogIEBzaW5jZSBF
        bWJlciAwLjkKKi8KRW1iZXIuU2V0ID0gRW1iZXIuQ29yZU9iamVjdC5leHRl
        bmQoRW1iZXIuTXV0YWJsZUVudW1lcmFibGUsIEVtYmVyLkNvcHlhYmxlLCBF
        bWJlci5GcmVlemFibGUsCiAgLyoqIEBzY29wZSBFbWJlci5TZXQucHJvdG90
        eXBlICovIHsKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIElNUExFTUVOVCBF
        TlVNRVJBQkxFIEFQSVMKICAvLwoKICAvKioKICAgIFRoaXMgcHJvcGVydHkg
        d2lsbCBjaGFuZ2UgYXMgdGhlIG51bWJlciBvZiBvYmplY3RzIGluIHRoZSBz
        ZXQgY2hhbmdlcy4KCiAgICBAcHJvcGVydHkgbGVuZ3RoCiAgICBAdHlwZSBu
        dW1iZXIKICAgIEBkZWZhdWx0IDAKICAqLwogIGxlbmd0aDogMCwKCiAgLyoq
        CiAgICBDbGVhcnMgdGhlIHNldC4gVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdh
        bnQgdG8gcmV1c2UgYW4gZXhpc3Rpbmcgc2V0CiAgICB3aXRob3V0IGhhdmlu
        ZyB0byByZWNyZWF0ZSBpdC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIg
        Y29sb3JzID0gbmV3IEVtYmVyLlNldChbInJlZCIsICJncmVlbiIsICJibHVl
        Il0pOwogICAgY29sb3JzLmxlbmd0aDsgIC8vIDMKICAgIGNvbG9ycy5jbGVh
        cigpOwogICAgY29sb3JzLmxlbmd0aDsgIC8vIDAKICAgIGBgYAoKICAgIEBt
        ZXRob2QgY2xlYXIKICAgIEByZXR1cm4ge0VtYmVyLlNldH0gQW4gZW1wdHkg
        U2V0CiAgKi8KICBjbGVhcjogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5p
        c0Zyb3plbikgeyB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVO
        X0VSUk9SKTsgfQoKICAgIHZhciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcp
        OwogICAgaWYgKGxlbiA9PT0gMCkgeyByZXR1cm4gdGhpczsgfQoKICAgIHZh
        ciBndWlkOwoKICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdl
        KGxlbiwgMCk7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywg
        J2ZpcnN0T2JqZWN0Jyk7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        dGhpcywgJ2xhc3RPYmplY3QnKTsKCiAgICBmb3IgKHZhciBpPTA7IGkgPCBs
        ZW47IGkrKykgewogICAgICBndWlkID0gZ3VpZEZvcih0aGlzW2ldKTsKICAg
        ICAgZGVsZXRlIHRoaXNbZ3VpZF07CiAgICAgIGRlbGV0ZSB0aGlzW2ldOwog
        ICAgfQoKICAgIHNldCh0aGlzLCAnbGVuZ3RoJywgMCk7CgogICAgRW1iZXIu
        cHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2ZpcnN0T2JqZWN0Jyk7CiAgICBF
        bWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcpOwog
        ICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5nZShsZW4sIDApOwoK
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0cnVl
        IGlmIHRoZSBwYXNzZWQgb2JqZWN0IGlzIGFsc28gYW4gZW51bWVyYWJsZSB0
        aGF0IGNvbnRhaW5zIHRoZQogICAgc2FtZSBvYmplY3RzIGFzIHRoZSByZWNl
        aXZlci4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJy
        ZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdLAogICAgICAgIHNhbWVfY29sb3JzID0g
        bmV3IEVtYmVyLlNldChjb2xvcnMpOwoKICAgIHNhbWVfY29sb3JzLmlzRXF1
        YWwoY29sb3JzKTsgICAgICAgICAgICAgICAvLyB0cnVlCiAgICBzYW1lX2Nv
        bG9ycy5pc0VxdWFsKFsicHVycGxlIiwgImJyb3duIl0pOyAgLy8gZmFsc2UK
        ICAgIGBgYAoKICAgIEBtZXRob2QgaXNFcXVhbAogICAgQHBhcmFtIHtFbWJl
        ci5TZXR9IG9iaiB0aGUgb3RoZXIgb2JqZWN0LgogICAgQHJldHVybiB7Qm9v
        bGVhbn0KICAqLwogIGlzRXF1YWw6IGZ1bmN0aW9uKG9iaikgewogICAgLy8g
        ZmFpbCBmYXN0CiAgICBpZiAoIUVtYmVyLkVudW1lcmFibGUuZGV0ZWN0KG9i
        aikpIHJldHVybiBmYWxzZTsKCiAgICB2YXIgbG9jID0gZ2V0KHRoaXMsICds
        ZW5ndGgnKTsKICAgIGlmIChnZXQob2JqLCAnbGVuZ3RoJykgIT09IGxvYykg
        cmV0dXJuIGZhbHNlOwoKICAgIHdoaWxlKC0tbG9jID49IDApIHsKICAgICAg
        aWYgKCFvYmouY29udGFpbnModGhpc1tsb2NdKSkgcmV0dXJuIGZhbHNlOwog
        ICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0sCgogIC8qKgogICAgQWRkcyBh
        biBvYmplY3QgdG8gdGhlIHNldC4gT25seSBub24tYG51bGxgIG9iamVjdHMg
        Y2FuIGJlIGFkZGVkIHRvIGEgc2V0CiAgICBhbmQgdGhvc2UgY2FuIG9ubHkg
        YmUgYWRkZWQgb25jZS4gSWYgdGhlIG9iamVjdCBpcyBhbHJlYWR5IGluIHRo
        ZSBzZXQgb3IKICAgIHRoZSBwYXNzZWQgdmFsdWUgaXMgbnVsbCB0aGlzIG1l
        dGhvZCB3aWxsIGhhdmUgbm8gZWZmZWN0LgoKICAgIFRoaXMgaXMgYW4gYWxp
        YXMgZm9yIGBFbWJlci5NdXRhYmxlRW51bWVyYWJsZS5hZGRPYmplY3QoKWAu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJl
        ci5TZXQoKTsKICAgIGNvbG9ycy5hZGQoImJsdWUiKTsgICAgIC8vIFsiYmx1
        ZSJdCiAgICBjb2xvcnMuYWRkKCJibHVlIik7ICAgICAvLyBbImJsdWUiXQog
        ICAgY29sb3JzLmFkZCgicmVkIik7ICAgICAgLy8gWyJibHVlIiwgInJlZCJd
        CiAgICBjb2xvcnMuYWRkKG51bGwpOyAgICAgICAvLyBbImJsdWUiLCAicmVk
        Il0KICAgIGNvbG9ycy5hZGQodW5kZWZpbmVkKTsgIC8vIFsiYmx1ZSIsICJy
        ZWQiXQogICAgYGBgCgogICAgQG1ldGhvZCBhZGQKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBvYmogVGhlIG9iamVjdCB0byBhZGQuCiAgICBAcmV0dXJuIHtFbWJl
        ci5TZXR9IFRoZSBzZXQgaXRzZWxmLgogICovCiAgYWRkOiBFbWJlci5hbGlh
        c01ldGhvZCgnYWRkT2JqZWN0JyksCgogIC8qKgogICAgUmVtb3ZlcyB0aGUg
        b2JqZWN0IGZyb20gdGhlIHNldCBpZiBpdCBpcyBmb3VuZC4gSWYgeW91IHBh
        c3MgYSBgbnVsbGAgdmFsdWUKICAgIG9yIGFuIG9iamVjdCB0aGF0IGlzIGFs
        cmVhZHkgbm90IGluIHRoZSBzZXQsIHRoaXMgbWV0aG9kIHdpbGwgaGF2ZSBu
        bwogICAgZWZmZWN0LiBUaGlzIGlzIGFuIGFsaWFzIGZvciBgRW1iZXIuTXV0
        YWJsZUVudW1lcmFibGUucmVtb3ZlT2JqZWN0KClgLgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsicmVkIiwg
        ImdyZWVuIiwgImJsdWUiXSk7CiAgICBjb2xvcnMucmVtb3ZlKCJyZWQiKTsg
        ICAgIC8vIFsiYmx1ZSIsICJncmVlbiJdCiAgICBjb2xvcnMucmVtb3ZlKCJw
        dXJwbGUiKTsgIC8vIFsiYmx1ZSIsICJncmVlbiJdCiAgICBjb2xvcnMucmVt
        b3ZlKG51bGwpOyAgICAgIC8vIFsiYmx1ZSIsICJncmVlbiJdCiAgICBgYGAK
        CiAgICBAbWV0aG9kIHJlbW92ZQogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBU
        aGUgb2JqZWN0IHRvIHJlbW92ZQogICAgQHJldHVybiB7RW1iZXIuU2V0fSBU
        aGUgc2V0IGl0c2VsZi4KICAqLwogIHJlbW92ZTogRW1iZXIuYWxpYXNNZXRo
        b2QoJ3JlbW92ZU9iamVjdCcpLAoKICAvKioKICAgIFJlbW92ZXMgdGhlIGxh
        c3QgZWxlbWVudCBmcm9tIHRoZSBzZXQgYW5kIHJldHVybnMgaXQsIG9yIGBu
        dWxsYCBpZiBpdCdzIGVtcHR5LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsiZ3JlZW4iLCAiYmx1ZSJdKTsK
        ICAgIGNvbG9ycy5wb3AoKTsgIC8vICJibHVlIgogICAgY29sb3JzLnBvcCgp
        OyAgLy8gImdyZWVuIgogICAgY29sb3JzLnBvcCgpOyAgLy8gbnVsbAogICAg
        YGBgCgogICAgQG1ldGhvZCBwb3AKICAgIEByZXR1cm4ge09iamVjdH0gVGhl
        IHJlbW92ZWQgb2JqZWN0IGZyb20gdGhlIHNldCBvciBudWxsLgogICovCiAg
        cG9wOiBmdW5jdGlvbigpIHsKICAgIGlmIChnZXQodGhpcywgJ2lzRnJvemVu
        JykpIHRocm93IG5ldyBFbWJlci5FcnJvcihFbWJlci5GUk9aRU5fRVJST1Ip
        OwogICAgdmFyIG9iaiA9IHRoaXMubGVuZ3RoID4gMCA/IHRoaXNbdGhpcy5s
        ZW5ndGgtMV0gOiBudWxsOwogICAgdGhpcy5yZW1vdmUob2JqKTsKICAgIHJl
        dHVybiBvYmo7CiAgfSwKCiAgLyoqCiAgICBJbnNlcnRzIHRoZSBnaXZlbiBv
        YmplY3Qgb24gdG8gdGhlIGVuZCBvZiB0aGUgc2V0LiBJdCByZXR1cm5zCiAg
        ICB0aGUgc2V0IGl0c2VsZi4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIGZvciBg
        RW1iZXIuTXV0YWJsZUVudW1lcmFibGUuYWRkT2JqZWN0KClgLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KCk7
        CiAgICBjb2xvcnMucHVzaCgicmVkIik7ICAgLy8gWyJyZWQiXQogICAgY29s
        b3JzLnB1c2goImdyZWVuIik7IC8vIFsicmVkIiwgImdyZWVuIl0KICAgIGNv
        bG9ycy5wdXNoKCJibHVlIik7ICAvLyBbInJlZCIsICJncmVlbiIsICJibHVl
        Il0KICAgIGBgYAoKICAgIEBtZXRob2QgcHVzaAogICAgQHJldHVybiB7RW1i
        ZXIuU2V0fSBUaGUgc2V0IGl0c2VsZi4KICAqLwogIHB1c2g6IEVtYmVyLmFs
        aWFzTWV0aG9kKCdhZGRPYmplY3QnKSwKCiAgLyoqCiAgICBSZW1vdmVzIHRo
        ZSBsYXN0IGVsZW1lbnQgZnJvbSB0aGUgc2V0IGFuZCByZXR1cm5zIGl0LCBv
        ciBgbnVsbGAgaWYgaXQncyBlbXB0eS4KCiAgICBUaGlzIGlzIGFuIGFsaWFz
        IGZvciBgRW1iZXIuU2V0LnBvcCgpYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICB2YXIgY29sb3JzID0gbmV3IEVtYmVyLlNldChbImdyZWVuIiwgImJsdWUi
        XSk7CiAgICBjb2xvcnMuc2hpZnQoKTsgIC8vICJibHVlIgogICAgY29sb3Jz
        LnNoaWZ0KCk7ICAvLyAiZ3JlZW4iCiAgICBjb2xvcnMuc2hpZnQoKTsgIC8v
        IG51bGwKICAgIGBgYAoKICAgIEBtZXRob2Qgc2hpZnQKICAgIEByZXR1cm4g
        e09iamVjdH0gVGhlIHJlbW92ZWQgb2JqZWN0IGZyb20gdGhlIHNldCBvciBu
        dWxsLgogICovCiAgc2hpZnQ6IEVtYmVyLmFsaWFzTWV0aG9kKCdwb3AnKSwK
        CiAgLyoqCiAgICBJbnNlcnRzIHRoZSBnaXZlbiBvYmplY3Qgb24gdG8gdGhl
        IGVuZCBvZiB0aGUgc2V0LiBJdCByZXR1cm5zCiAgICB0aGUgc2V0IGl0c2Vs
        Zi4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIG9mIGBFbWJlci5TZXQucHVzaCgp
        YAoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1i
        ZXIuU2V0KCk7CiAgICBjb2xvcnMudW5zaGlmdCgicmVkIik7ICAgIC8vIFsi
        cmVkIl0KICAgIGNvbG9ycy51bnNoaWZ0KCJncmVlbiIpOyAgLy8gWyJyZWQi
        LCAiZ3JlZW4iXQogICAgY29sb3JzLnVuc2hpZnQoImJsdWUiKTsgICAvLyBb
        InJlZCIsICJncmVlbiIsICJibHVlIl0KICAgIGBgYAoKICAgIEBtZXRob2Qg
        dW5zaGlmdAogICAgQHJldHVybiB7RW1iZXIuU2V0fSBUaGUgc2V0IGl0c2Vs
        Zi4KICAqLwogIHVuc2hpZnQ6IEVtYmVyLmFsaWFzTWV0aG9kKCdwdXNoJyks
        CgogIC8qKgogICAgQWRkcyBlYWNoIG9iamVjdCBpbiB0aGUgcGFzc2VkIGVu
        dW1lcmFibGUgdG8gdGhlIHNldC4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIG9m
        IGBFbWJlci5NdXRhYmxlRW51bWVyYWJsZS5hZGRPYmplY3RzKClgCgogICAg
        YGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQo
        KTsKICAgIGNvbG9ycy5hZGRFYWNoKFsicmVkIiwgImdyZWVuIiwgImJsdWUi
        XSk7ICAvLyBbInJlZCIsICJncmVlbiIsICJibHVlIl0KICAgIGBgYAoKICAg
        IEBtZXRob2QgYWRkRWFjaAogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxl
        fSBvYmplY3RzIHRoZSBvYmplY3RzIHRvIGFkZC4KICAgIEByZXR1cm4ge0Vt
        YmVyLlNldH0gVGhlIHNldCBpdHNlbGYuCiAgKi8KICBhZGRFYWNoOiBFbWJl
        ci5hbGlhc01ldGhvZCgnYWRkT2JqZWN0cycpLAoKICAvKioKICAgIFJlbW92
        ZXMgZWFjaCBvYmplY3QgaW4gdGhlIHBhc3NlZCBlbnVtZXJhYmxlIHRvIHRo
        ZSBzZXQuCgogICAgVGhpcyBpcyBhbiBhbGlhcyBvZiBgRW1iZXIuTXV0YWJs
        ZUVudW1lcmFibGUucmVtb3ZlT2JqZWN0cygpYAoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsicmVkIiwgImdy
        ZWVuIiwgImJsdWUiXSk7CiAgICBjb2xvcnMucmVtb3ZlRWFjaChbInJlZCIs
        ICJibHVlIl0pOyAgLy8gIFsiZ3JlZW4iXQogICAgYGBgCgogICAgQG1ldGhv
        ZCByZW1vdmVFYWNoCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9i
        amVjdHMgdGhlIG9iamVjdHMgdG8gcmVtb3ZlLgogICAgQHJldHVybiB7RW1i
        ZXIuU2V0fSBUaGUgc2V0IGl0c2VsZi4KICAqLwogIHJlbW92ZUVhY2g6IEVt
        YmVyLmFsaWFzTWV0aG9kKCdyZW1vdmVPYmplY3RzJyksCgogIC8vIC4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4KICAvLyBQUklWQVRFIEVOVU1FUkFCTEUgU1VQUE9SVAogIC8v
        CgogIGluaXQ6IGZ1bmN0aW9uKGl0ZW1zKSB7CiAgICB0aGlzLl9zdXBlcigp
        OwogICAgaWYgKGl0ZW1zKSB0aGlzLmFkZE9iamVjdHMoaXRlbXMpOwogIH0s
        CgogIC8vIGltcGxlbWVudCBFbWJlci5FbnVtZXJhYmxlCiAgbmV4dE9iamVj
        dDogZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gdGhpc1tpZHhdOwogIH0s
        CgogIC8vIG1vcmUgb3B0aW1pemVkIHZlcnNpb24KICBmaXJzdE9iamVjdDog
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5s
        ZW5ndGggPiAwID8gdGhpc1swXSA6IHVuZGVmaW5lZDsKICB9KSwKCiAgLy8g
        bW9yZSBvcHRpbWl6ZWQgdmVyc2lvbgogIGxhc3RPYmplY3Q6IEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubGVuZ3RoID4g
        MCA/IHRoaXNbdGhpcy5sZW5ndGgtMV0gOiB1bmRlZmluZWQ7CiAgfSksCgog
        IC8vIGltcGxlbWVudHMgRW1iZXIuTXV0YWJsZUVudW1lcmFibGUKICBhZGRP
        YmplY3Q6IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKGdldCh0aGlzLCAnaXNG
        cm96ZW4nKSkgdGhyb3cgbmV3IEVtYmVyLkVycm9yKEVtYmVyLkZST1pFTl9F
        UlJPUik7CiAgICBpZiAoaXNOb25lKG9iaikpIHJldHVybiB0aGlzOyAvLyBu
        b3RoaW5nIHRvIGRvCgogICAgdmFyIGd1aWQgPSBndWlkRm9yKG9iaiksCiAg
        ICAgICAgaWR4ICA9IHRoaXNbZ3VpZF0sCiAgICAgICAgbGVuICA9IGdldCh0
        aGlzLCAnbGVuZ3RoJyksCiAgICAgICAgYWRkZWQgOwoKICAgIGlmIChpZHg+
        PTAgJiYgaWR4PGxlbiAmJiAodGhpc1tpZHhdID09PSBvYmopKSByZXR1cm4g
        dGhpczsgLy8gYWRkZWQKCiAgICBhZGRlZCA9IFtvYmpdOwoKICAgIHRoaXMu
        ZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlKG51bGwsIGFkZGVkKTsKICAg
        IEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcp
        OwoKICAgIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICB0aGlzW2d1
        aWRdID0gbGVuOwogICAgdGhpc1tsZW5dID0gb2JqOwogICAgc2V0KHRoaXMs
        ICdsZW5ndGgnLCBsZW4rMSk7CgogICAgRW1iZXIucHJvcGVydHlEaWRDaGFu
        Z2UodGhpcywgJ2xhc3RPYmplY3QnKTsKICAgIHRoaXMuZW51bWVyYWJsZUNv
        bnRlbnREaWRDaGFuZ2UobnVsbCwgYWRkZWQpOwoKICAgIHJldHVybiB0aGlz
        OwogIH0sCgogIC8vIGltcGxlbWVudHMgRW1iZXIuTXV0YWJsZUVudW1lcmFi
        bGUKICByZW1vdmVPYmplY3Q6IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKGdl
        dCh0aGlzLCAnaXNGcm96ZW4nKSkgdGhyb3cgbmV3IEVtYmVyLkVycm9yKEVt
        YmVyLkZST1pFTl9FUlJPUik7CiAgICBpZiAoaXNOb25lKG9iaikpIHJldHVy
        biB0aGlzOyAvLyBub3RoaW5nIHRvIGRvCgogICAgdmFyIGd1aWQgPSBndWlk
        Rm9yKG9iaiksCiAgICAgICAgaWR4ICA9IHRoaXNbZ3VpZF0sCiAgICAgICAg
        bGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKSwKICAgICAgICBpc0ZpcnN0ID0g
        aWR4ID09PSAwLAogICAgICAgIGlzTGFzdCA9IGlkeCA9PT0gbGVuLTEsCiAg
        ICAgICAgbGFzdCwgcmVtb3ZlZDsKCgogICAgaWYgKGlkeD49MCAmJiBpZHg8
        bGVuICYmICh0aGlzW2lkeF0gPT09IG9iaikpIHsKICAgICAgcmVtb3ZlZCA9
        IFtvYmpdOwoKICAgICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFu
        Z2UocmVtb3ZlZCwgbnVsbCk7CiAgICAgIGlmIChpc0ZpcnN0KSB7IEVtYmVy
        LnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnZmlyc3RPYmplY3QnKTsgfQog
        ICAgICBpZiAoaXNMYXN0KSAgeyBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        dGhpcywgJ2xhc3RPYmplY3QnKTsgfQoKICAgICAgLy8gc3dhcCBpdGVtcyAt
        IGJhc2ljYWxseSBtb3ZlIHRoZSBpdGVtIHRvIHRoZSBlbmQgc28gaXQgY2Fu
        IGJlIHJlbW92ZWQKICAgICAgaWYgKGlkeCA8IGxlbi0xKSB7CiAgICAgICAg
        bGFzdCA9IHRoaXNbbGVuLTFdOwogICAgICAgIHRoaXNbaWR4XSA9IGxhc3Q7
        CiAgICAgICAgdGhpc1tndWlkRm9yKGxhc3QpXSA9IGlkeDsKICAgICAgfQoK
        ICAgICAgZGVsZXRlIHRoaXNbZ3VpZF07CiAgICAgIGRlbGV0ZSB0aGlzW2xl
        bi0xXTsKICAgICAgc2V0KHRoaXMsICdsZW5ndGgnLCBsZW4tMSk7CgogICAg
        ICBpZiAoaXNGaXJzdCkgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCAnZmlyc3RPYmplY3QnKTsgfQogICAgICBpZiAoaXNMYXN0KSAgeyBFbWJl
        ci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcpOyB9CiAg
        ICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UocmVtb3ZlZCwg
        bnVsbCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLy8gb3B0
        aW1pemVkIHZlcnNpb24KICBjb250YWluczogZnVuY3Rpb24ob2JqKSB7CiAg
        ICByZXR1cm4gdGhpc1tndWlkRm9yKG9iaildPj0wOwogIH0sCgogIGNvcHk6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIEMgPSB0aGlzLmNvbnN0cnVjdG9yLCBy
        ZXQgPSBuZXcgQygpLCBsb2MgPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAg
        c2V0KHJldCwgJ2xlbmd0aCcsIGxvYyk7CiAgICB3aGlsZSgtLWxvYz49MCkg
        ewogICAgICByZXRbbG9jXSA9IHRoaXNbbG9jXTsKICAgICAgcmV0W2d1aWRG
        b3IodGhpc1tsb2NdKV0gPSBsb2M7CiAgICB9CiAgICByZXR1cm4gcmV0Owog
        IH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBsZW4gPSB0
        aGlzLmxlbmd0aCwgaWR4LCBhcnJheSA9IFtdOwogICAgZm9yKGlkeCA9IDA7
        IGlkeCA8IGxlbjsgaWR4KyspIHsKICAgICAgYXJyYXlbaWR4XSA9IHRoaXNb
        aWR4XTsKICAgIH0KICAgIHJldHVybiBmbXQoIkVtYmVyLlNldDwlQD4iLCBb
        YXJyYXkuam9pbignLCcpXSk7CiAgfQoKfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7CnZhciBEZWZlcnJlZE1peGluID0gRW1iZXIuRGVmZXJyZWRNaXhp
        biwgLy8gbWl4aW5zL2RlZmVycmVkCiAgICBnZXQgPSBFbWJlci5nZXQ7Cgp2
        YXIgRGVmZXJyZWQgPSBFbWJlci5PYmplY3QuZXh0ZW5kKERlZmVycmVkTWl4
        aW4pOwoKRGVmZXJyZWQucmVvcGVuQ2xhc3MoewogIHByb21pc2U6IGZ1bmN0
        aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICB2YXIgZGVmZXJyZWQgPSBE
        ZWZlcnJlZC5jcmVhdGUoKTsKICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywg
        ZGVmZXJyZWQpOwogICAgcmV0dXJuIGRlZmVycmVkOwogIH0KfSk7CgpFbWJl
        ci5EZWZlcnJlZCA9IERlZmVycmVkOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewp2YXIgZm9yRWFjaCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2g7
        CgovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUK
        Ki8KCnZhciBsb2FkSG9va3MgPSBFbWJlci5FTlYuRU1CRVJfTE9BRF9IT09L
        UyB8fCB7fTsKdmFyIGxvYWRlZCA9IHt9OwoKLyoqCgpEZXRlY3RzIHdoZW4g
        YSBzcGVjaWZpYyBwYWNrYWdlIG9mIEVtYmVyIChlLmcuICdFbWJlci5IYW5k
        bGViYXJzJykKaGFzIGZ1bGx5IGxvYWRlZCBhbmQgaXMgYXZhaWxhYmxlIGZv
        ciBleHRlbnNpb24uCgpUaGUgcHJvdmlkZWQgYGNhbGxiYWNrYCB3aWxsIGJl
        IGNhbGxlZCB3aXRoIHRoZSBgbmFtZWAgcGFzc2VkCnJlc29sdmVkIGZyb20g
        YSBzdHJpbmcgaW50byB0aGUgb2JqZWN0OgoKYGBgamF2YXNjcmlwdApFbWJl
        ci5vbkxvYWQoJ0VtYmVyLkhhbmRsZWJhcnMnIGZ1bmN0aW9uKGhiYXJzKXsK
        ICBoYmFycy5yZWdpc3RlckhlbHBlciguLi4pOwp9KTsKYGBgCgoKQG1ldGhv
        ZCBvbkxvYWQKQGZvciBFbWJlcgpAcGFyYW0gbmFtZSB7U3RyaW5nfSBuYW1l
        IG9mIGhvb2sKQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0gY2FsbGJhY2sg
        dG8gYmUgY2FsbGVkCiovCkVtYmVyLm9uTG9hZCA9IGZ1bmN0aW9uKG5hbWUs
        IGNhbGxiYWNrKSB7CiAgdmFyIG9iamVjdDsKCiAgbG9hZEhvb2tzW25hbWVd
        ID0gbG9hZEhvb2tzW25hbWVdIHx8IEVtYmVyLkEoKTsKICBsb2FkSG9va3Nb
        bmFtZV0ucHVzaE9iamVjdChjYWxsYmFjayk7CgogIGlmIChvYmplY3QgPSBs
        b2FkZWRbbmFtZV0pIHsKICAgIGNhbGxiYWNrKG9iamVjdCk7CiAgfQp9OwoK
        LyoqCgpDYWxsZWQgd2hlbiBhbiBFbWJlci5qcyBwYWNrYWdlIChlLmcgRW1i
        ZXIuSGFuZGxlYmFycykgaGFzIGZpbmlzaGVkCmxvYWRpbmcuIFRyaWdnZXJz
        IGFueSBjYWxsYmFja3MgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudC4KCkBt
        ZXRob2QgcnVuTG9hZEhvb2tzCkBmb3IgRW1iZXIKQHBhcmFtIG5hbWUge1N0
        cmluZ30gbmFtZSBvZiBob29rCkBwYXJhbSBvYmplY3Qge09iamVjdH0gb2Jq
        ZWN0IHRvIHBhc3MgdG8gY2FsbGJhY2tzCiovCkVtYmVyLnJ1bkxvYWRIb29r
        cyA9IGZ1bmN0aW9uKG5hbWUsIG9iamVjdCkgewogIGxvYWRlZFtuYW1lXSA9
        IG9iamVjdDsKCiAgaWYgKGxvYWRIb29rc1tuYW1lXSkgewogICAgZm9yRWFj
        aC5jYWxsKGxvYWRIb29rc1tuYW1lXSwgZnVuY3Rpb24oY2FsbGJhY2spIHsK
        ICAgICAgY2FsbGJhY2sob2JqZWN0KTsKICAgIH0pOwogIH0KfTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFy
        IGdldCA9IEVtYmVyLmdldDsKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItcnVudGltZQoqLwoKLyoqCiAgYEVtYmVyLkNvbnRyb2xsZXJN
        aXhpbmAgcHJvdmlkZXMgYSBzdGFuZGFyZCBpbnRlcmZhY2UgZm9yIGFsbCBj
        bGFzc2VzIHRoYXQKICBjb21wb3NlIEVtYmVyJ3MgY29udHJvbGxlciBsYXll
        cjogYEVtYmVyLkNvbnRyb2xsZXJgLAogIGBFbWJlci5BcnJheUNvbnRyb2xs
        ZXJgLCBhbmQgYEVtYmVyLk9iamVjdENvbnRyb2xsZXJgLgoKICBAY2xhc3Mg
        Q29udHJvbGxlck1peGluCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5D
        b250cm9sbGVyTWl4aW4gPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuQWN0
        aW9uSGFuZGxlciwgewogIC8qIGR1Y2t0eXBlIGFzIGEgY29udHJvbGxlciAq
        LwogIGlzQ29udHJvbGxlcjogdHJ1ZSwKCiAgLyoqCiAgICBUaGUgb2JqZWN0
        IHRvIHdoaWNoIGFjdGlvbnMgZnJvbSB0aGUgdmlldyBzaG91bGQgYmUgc2Vu
        dC4KCiAgICBGb3IgZXhhbXBsZSwgd2hlbiBhIEhhbmRsZWJhcnMgdGVtcGxh
        dGUgdXNlcyB0aGUgYHt7YWN0aW9ufX1gIGhlbHBlciwKICAgIGl0IHdpbGwg
        YXR0ZW1wdCB0byBzZW5kIHRoZSBhY3Rpb24gdG8gdGhlIHZpZXcncyBjb250
        cm9sbGVyJ3MgYHRhcmdldGAuCgogICAgQnkgZGVmYXVsdCwgYSBjb250cm9s
        bGVyJ3MgYHRhcmdldGAgaXMgc2V0IHRvIHRoZSByb3V0ZXIgYWZ0ZXIgaXQg
        aXMKICAgIGluc3RhbnRpYXRlZCBieSBgRW1iZXIuQXBwbGljYXRpb24jaW5p
        dGlhbGl6ZWAuCgogICAgQHByb3BlcnR5IHRhcmdldAogICAgQGRlZmF1bHQg
        bnVsbAogICovCiAgdGFyZ2V0OiBudWxsLAoKICBjb250YWluZXI6IG51bGws
        CgogIHBhcmVudENvbnRyb2xsZXI6IG51bGwsCgogIHN0b3JlOiBudWxsLAoK
        ICBtb2RlbDogRW1iZXIuY29tcHV0ZWQuYWxpYXMoJ2NvbnRlbnQnKSwKCiAg
        ZGVwcmVjYXRlZFNlbmRIYW5kbGVzOiBmdW5jdGlvbihhY3Rpb25OYW1lKSB7
        CiAgICByZXR1cm4gISF0aGlzW2FjdGlvbk5hbWVdOwogIH0sCgogIGRlcHJl
        Y2F0ZWRTZW5kOiBmdW5jdGlvbihhY3Rpb25OYW1lKSB7CiAgICB2YXIgYXJn
        cyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIEVtYmVyLmFz
        c2VydCgnJyArIHRoaXMgKyAiIGhhcyB0aGUgYWN0aW9uICIgKyBhY3Rpb25O
        YW1lICsgIiBidXQgaXQgaXMgbm90IGEgZnVuY3Rpb24iLCB0eXBlb2YgdGhp
        c1thY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJyk7CiAgICBFbWJlci5kZXBy
        ZWNhdGUoJ0FjdGlvbiBoYW5kbGVycyBpbXBsZW1lbnRlZCBkaXJlY3RseSBv
        biBjb250cm9sbGVycyBhcmUgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBhY3Rp
        b24gaGFuZGxlcnMgb24gYW4gYGFjdGlvbnNgIG9iamVjdCAoJyArIGFjdGlv
        bk5hbWUgKyAnIG9uICcgKyB0aGlzICsgJyknLCBmYWxzZSk7CiAgICB0aGlz
        W2FjdGlvbk5hbWVdLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgcmV0dXJuOwog
        IH0KfSk7CgovKioKICBAY2xhc3MgQ29udHJvbGxlcgogIEBuYW1lc3BhY2Ug
        RW1iZXIKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKICBAdXNlcyBFbWJlci5D
        b250cm9sbGVyTWl4aW4KKi8KRW1iZXIuQ29udHJvbGxlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoRW1iZXIuQ29udHJvbGxlck1peGluKTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBl
        bWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBF
        bWJlci5zZXQsIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9y
        RWFjaDsKCi8qKgogIGBFbWJlci5Tb3J0YWJsZU1peGluYCBwcm92aWRlcyBh
        IHN0YW5kYXJkIGludGVyZmFjZSBmb3IgYXJyYXkgcHJveGllcwogIHRvIHNw
        ZWNpZnkgYSBzb3J0IG9yZGVyIGFuZCBtYWludGFpbiB0aGlzIHNvcnRpbmcg
        d2hlbiBvYmplY3RzIGFyZSBhZGRlZCwKICByZW1vdmVkLCBvciB1cGRhdGVk
        IHdpdGhvdXQgY2hhbmdpbmcgdGhlIGltcGxpY2l0IG9yZGVyIG9mIHRoZWly
        IHVuZGVybHlpbmcKICBjb250ZW50IGFycmF5OgoKICBgYGBqYXZhc2NyaXB0
        CiAgc29uZ3MgPSBbCiAgICB7dHJhY2tOdW1iZXI6IDQsIHRpdGxlOiAnT2It
        TGEtRGksIE9iLUxhLURhJ30sCiAgICB7dHJhY2tOdW1iZXI6IDIsIHRpdGxl
        OiAnQmFjayBpbiB0aGUgVS5TLlMuUi4nfSwKICAgIHt0cmFja051bWJlcjog
        MywgdGl0bGU6ICdHbGFzcyBPbmlvbid9LAogIF07CgogIHNvbmdzQ29udHJv
        bGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5jcmVhdGUoewogICAgY29u
        dGVudDogc29uZ3MsCiAgICBzb3J0UHJvcGVydGllczogWyd0cmFja051bWJl
        ciddLAogICAgc29ydEFzY2VuZGluZzogdHJ1ZQogIH0pOwoKICBzb25nc0Nv
        bnRyb2xsZXIuZ2V0KCdmaXJzdE9iamVjdCcpOyAgLy8ge3RyYWNrTnVtYmVy
        OiAyLCB0aXRsZTogJ0JhY2sgaW4gdGhlIFUuUy5TLlIuJ30KCiAgc29uZ3ND
        b250cm9sbGVyLmFkZE9iamVjdCh7dHJhY2tOdW1iZXI6IDEsIHRpdGxlOiAn
        RGVhciBQcnVkZW5jZSd9KTsKICBzb25nc0NvbnRyb2xsZXIuZ2V0KCdmaXJz
        dE9iamVjdCcpOyAgLy8ge3RyYWNrTnVtYmVyOiAxLCB0aXRsZTogJ0RlYXIg
        UHJ1ZGVuY2UnfQogIGBgYAoKICBJZiB5b3UgYWRkIG9yIHJlbW92ZSB0aGUg
        cHJvcGVydGllcyB0byBzb3J0IGJ5IG9yIGNoYW5nZSB0aGUgc29ydCBkaXJl
        Y3Rpb24gdGhlIGNvbnRlbnQKICBzb3J0IG9yZGVyIHdpbGwgYmUgYXV0b21h
        dGljYWxseSB1cGRhdGVkLgoKICBgYGBqYXZhc2NyaXB0CiAgc29uZ3NDb250
        cm9sbGVyLnNldCgnc29ydFByb3BlcnRpZXMnLCBbJ3RpdGxlJ10pOwogIHNv
        bmdzQ29udHJvbGxlci5nZXQoJ2ZpcnN0T2JqZWN0Jyk7IC8vIHt0cmFja051
        bWJlcjogMiwgdGl0bGU6ICdCYWNrIGluIHRoZSBVLlMuUy5SLid9CgogIHNv
        bmdzQ29udHJvbGxlci50b2dnbGVQcm9wZXJ0eSgnc29ydEFzY2VuZGluZycp
        OwogIHNvbmdzQ29udHJvbGxlci5nZXQoJ2ZpcnN0T2JqZWN0Jyk7IC8vIHt0
        cmFja051bWJlcjogNCwgdGl0bGU6ICdPYi1MYS1EaSwgT2ItTGEtRGEnfQog
        IGBgYAoKICBTb3J0YWJsZU1peGluIHdvcmtzIGJ5IHNvcnRpbmcgdGhlIGFy
        cmFuZ2VkQ29udGVudCBhcnJheSwgd2hpY2ggaXMgdGhlIGFycmF5IHRoYXQK
        ICBhcnJheVByb3h5IGRpc3BsYXlzLiBEdWUgdG8gdGhlIGZhY3QgdGhhdCB0
        aGUgdW5kZXJseWluZyAnY29udGVudCcgYXJyYXkgaXMgbm90IGNoYW5nZWQs
        IHRoYXQKICBhcnJheSB3aWxsIG5vdCBkaXNwbGF5IHRoZSBzb3J0ZWQgbGlz
        dDoKCiAgIGBgYGphdmFzY3JpcHQKICBzb25nc0NvbnRyb2xsZXIuZ2V0KCdj
        b250ZW50JykuZ2V0KCdmaXJzdE9iamVjdCcpOyAvLyBSZXR1cm5zIHRoZSB1
        bnNvcnRlZCBvcmlnaW5hbCBjb250ZW50CiAgc29uZ3NDb250cm9sbGVyLmdl
        dCgnZmlyc3RPYmplY3QnKTsgLy8gUmV0dXJucyB0aGUgc29ydGVkIGNvbnRl
        bnQuCiAgYGBgIAogIAogIEFsdGhvdWdoIHRoZSBzb3J0ZWQgY29udGVudCBj
        YW4gYWxzbyBiZSBhY2Nlc3NlZCB0aHJvdWdoIHRoZSBhcnJhbmdlZENvbnRl
        bnQgcHJvcGVydHksCiAgaXQgaXMgcHJlZmVyYWJsZSB0byB1c2UgdGhlIHBy
        b3hpZWQgY2xhc3MgYW5kIG5vdCB0aGUgYXJyYW5nZWRDb250ZW50IGFycmF5
        IGRpcmVjdGx5LgoKICBAY2xhc3MgU29ydGFibGVNaXhpbgogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAdXNlcyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQoqLwpF
        bWJlci5Tb3J0YWJsZU1peGluID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVy
        Lk11dGFibGVFbnVtZXJhYmxlLCB7CgogIC8qKgogICAgU3BlY2lmaWVzIHdo
        aWNoIHByb3BlcnRpZXMgZGljdGF0ZSB0aGUgYXJyYW5nZWRDb250ZW50J3Mg
        c29ydCBvcmRlci4KCiAgICBXaGVuIHNwZWNpZnlpbmcgbXVsdGlwbGUgcHJv
        cGVydGllcyB0aGUgc29ydGluZyB3aWxsIHVzZSBwcm9wZXJ0aWVzCiAgICBm
        cm9tIHRoZSBgc29ydFByb3BlcnRpZXNgIGFycmF5IHByaW9yaXRpemVkIGZy
        b20gZmlyc3QgdG8gbGFzdC4KCiAgICBAcHJvcGVydHkge0FycmF5fSBzb3J0
        UHJvcGVydGllcwogICovCiAgc29ydFByb3BlcnRpZXM6IG51bGwsCgogIC8q
        KgogICAgU3BlY2lmaWVzIHRoZSBhcnJhbmdlZENvbnRlbnQncyBzb3J0IGRp
        cmVjdGlvbgoKICAgIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gc29ydEFzY2VuZGlu
        ZwogICovCiAgc29ydEFzY2VuZGluZzogdHJ1ZSwKCiAgLyoqCiAgICBUaGUg
        ZnVuY3Rpb24gdXNlZCB0byBjb21wYXJlIHR3byB2YWx1ZXMuIFlvdSBjYW4g
        b3ZlcnJpZGUgdGhpcyBpZiB5b3UKICAgIHdhbnQgdG8gZG8gY3VzdG9tIGNv
        bXBhcmlzb25zLiBGdW5jdGlvbnMgbXVzdCBiZSBvZiB0aGUgdHlwZSBleHBl
        Y3RlZCBieQogICAgQXJyYXkjc29ydCwgaS5lLgogICAgICByZXR1cm4gMCBp
        ZiB0aGUgdHdvIHBhcmFtZXRlcnMgYXJlIGVxdWFsLAogICAgICByZXR1cm4g
        YSBuZWdhdGl2ZSB2YWx1ZSBpZiB0aGUgZmlyc3QgcGFyYW1ldGVyIGlzIHNt
        YWxsZXIgdGhhbiB0aGUgc2Vjb25kIG9yCiAgICAgIHJldHVybiBhIHBvc2l0
        aXZlIHZhbHVlIG90aGVyd2lzZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBm
        dW5jdGlvbih4LHkpIHsgLy8gVGhlc2UgYXJlIGFzc3VtZWQgdG8gYmUgaW50
        ZWdlcnMKICAgICAgaWYgKHggPT09IHkpCiAgICAgICAgcmV0dXJuIDA7CiAg
        ICAgIHJldHVybiB4IDwgeSA/IC0xIDogMTsKICAgIH0KICAgIGBgYAoKICAg
        IEBwcm9wZXJ0eSBzb3J0RnVuY3Rpb24KICAgIEB0eXBlIHtGdW5jdGlvbn0K
        ICAgIEBkZWZhdWx0IEVtYmVyLmNvbXBhcmUKICAqLwogIHNvcnRGdW5jdGlv
        bjogRW1iZXIuY29tcGFyZSwKCiAgb3JkZXJCeTogZnVuY3Rpb24oaXRlbTEs
        IGl0ZW0yKSB7CiAgICB2YXIgcmVzdWx0ID0gMCwKICAgICAgICBzb3J0UHJv
        cGVydGllcyA9IGdldCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKSwKICAgICAg
        ICBzb3J0QXNjZW5kaW5nID0gZ2V0KHRoaXMsICdzb3J0QXNjZW5kaW5nJyks
        CiAgICAgICAgc29ydEZ1bmN0aW9uID0gZ2V0KHRoaXMsICdzb3J0RnVuY3Rp
        b24nKTsKCiAgICBFbWJlci5hc3NlcnQoInlvdSBuZWVkIHRvIGRlZmluZSBg
        c29ydFByb3BlcnRpZXNgIiwgISFzb3J0UHJvcGVydGllcyk7CgogICAgZm9y
        RWFjaChzb3J0UHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHlOYW1lKSB7
        CiAgICAgIGlmIChyZXN1bHQgPT09IDApIHsKICAgICAgICByZXN1bHQgPSBz
        b3J0RnVuY3Rpb24oZ2V0KGl0ZW0xLCBwcm9wZXJ0eU5hbWUpLCBnZXQoaXRl
        bTIsIHByb3BlcnR5TmFtZSkpOwogICAgICAgIGlmICgocmVzdWx0ICE9PSAw
        KSAmJiAhc29ydEFzY2VuZGluZykgewogICAgICAgICAgcmVzdWx0ID0gKC0x
        KSAqIHJlc3VsdDsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIHJl
        dHVybiByZXN1bHQ7CiAgfSwKCiAgZGVzdHJveTogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAg
        IHNvcnRQcm9wZXJ0aWVzID0gZ2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycp
        OwoKICAgIGlmIChjb250ZW50ICYmIHNvcnRQcm9wZXJ0aWVzKSB7CiAgICAg
        IGZvckVhY2goY29udGVudCwgZnVuY3Rpb24oaXRlbSkgewogICAgICAgIGZv
        ckVhY2goc29ydFByb3BlcnRpZXMsIGZ1bmN0aW9uKHNvcnRQcm9wZXJ0eSkg
        ewogICAgICAgICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIoaXRlbSwgc29ydFBy
        b3BlcnR5LCB0aGlzLCAnY29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFu
        Z2UnKTsKICAgICAgICB9LCB0aGlzKTsKICAgICAgfSwgdGhpcyk7CiAgICB9
        CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7CiAgfSwKCiAgaXNTb3J0ZWQ6
        IEVtYmVyLmNvbXB1dGVkLmJvb2woJ3NvcnRQcm9wZXJ0aWVzJyksCgogIC8q
        KgogICAgT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGFycmFuZ2VkQ29udGVudCBm
        cm9tIGFycmF5UHJveHkgaW4gb3JkZXIgdG8gc29ydCBieSBzb3J0RnVuY3Rp
        b24uCiAgICBBbHNvIHNldHMgdXAgb2JzZXJ2ZXJzIGZvciBlYWNoIHNvcnRQ
        cm9wZXJ0eSBvbiBlYWNoIGl0ZW0gaW4gdGhlIGNvbnRlbnQgQXJyYXkuCiAg
        ICAKICAgIEBwcm9wZXJ0eSBhcnJhbmdlZENvbnRlbnQKICAqLwoKICBhcnJh
        bmdlZENvbnRlbnQ6IEVtYmVyLmNvbXB1dGVkKCdjb250ZW50JywgJ3NvcnRQ
        cm9wZXJ0aWVzLkBlYWNoJywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAg
        dmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBp
        c1NvcnRlZCA9IGdldCh0aGlzLCAnaXNTb3J0ZWQnKSwKICAgICAgICBzb3J0
        UHJvcGVydGllcyA9IGdldCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKSwKICAg
        ICAgICBzZWxmID0gdGhpczsKCiAgICBpZiAoY29udGVudCAmJiBpc1NvcnRl
        ZCkgewogICAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgpOwogICAgICBj
        b250ZW50LnNvcnQoZnVuY3Rpb24oaXRlbTEsIGl0ZW0yKSB7CiAgICAgICAg
        cmV0dXJuIHNlbGYub3JkZXJCeShpdGVtMSwgaXRlbTIpOwogICAgICB9KTsK
        ICAgICAgZm9yRWFjaChjb250ZW50LCBmdW5jdGlvbihpdGVtKSB7CiAgICAg
        ICAgZm9yRWFjaChzb3J0UHJvcGVydGllcywgZnVuY3Rpb24oc29ydFByb3Bl
        cnR5KSB7CiAgICAgICAgICBFbWJlci5hZGRPYnNlcnZlcihpdGVtLCBzb3J0
        UHJvcGVydHksIHRoaXMsICdjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENo
        YW5nZScpOwogICAgICAgIH0sIHRoaXMpOwogICAgICB9LCB0aGlzKTsKICAg
        ICAgcmV0dXJuIEVtYmVyLkEoY29udGVudCk7CiAgICB9CgogICAgcmV0dXJu
        IGNvbnRlbnQ7CiAgfSksCgogIF9jb250ZW50V2lsbENoYW5nZTogRW1iZXIu
        YmVmb3JlT2JzZXJ2ZXIoJ2NvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIHZh
        ciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgc29y
        dFByb3BlcnRpZXMgPSBnZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyk7Cgog
        ICAgaWYgKGNvbnRlbnQgJiYgc29ydFByb3BlcnRpZXMpIHsKICAgICAgZm9y
        RWFjaChjb250ZW50LCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgZm9yRWFj
        aChzb3J0UHJvcGVydGllcywgZnVuY3Rpb24oc29ydFByb3BlcnR5KSB7CiAg
        ICAgICAgICBFbWJlci5yZW1vdmVPYnNlcnZlcihpdGVtLCBzb3J0UHJvcGVy
        dHksIHRoaXMsICdjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZScp
        OwogICAgICAgIH0sIHRoaXMpOwogICAgICB9LCB0aGlzKTsKICAgIH0KCiAg
        ICB0aGlzLl9zdXBlcigpOwogIH0pLAoKICBzb3J0QXNjZW5kaW5nV2lsbENo
        YW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIoJ3NvcnRBc2NlbmRpbmcnLCBm
        dW5jdGlvbigpIHsKICAgIHRoaXMuX2xhc3RTb3J0QXNjZW5kaW5nID0gZ2V0
        KHRoaXMsICdzb3J0QXNjZW5kaW5nJyk7CiAgfSksCgogIHNvcnRBc2NlbmRp
        bmdEaWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdzb3J0QXNjZW5kaW5nJywg
        ZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdzb3J0QXNjZW5kaW5n
        JykgIT09IHRoaXMuX2xhc3RTb3J0QXNjZW5kaW5nKSB7CiAgICAgIHZhciBh
        cnJhbmdlZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcp
        OwogICAgICBhcnJhbmdlZENvbnRlbnQucmV2ZXJzZU9iamVjdHMoKTsKICAg
        IH0KICB9KSwKCiAgY29udGVudEFycmF5V2lsbENoYW5nZTogZnVuY3Rpb24o
        YXJyYXksIGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KSB7CiAgICB2
        YXIgaXNTb3J0ZWQgPSBnZXQodGhpcywgJ2lzU29ydGVkJyk7CgogICAgaWYg
        KGlzU29ydGVkKSB7CiAgICAgIHZhciBhcnJhbmdlZENvbnRlbnQgPSBnZXQo
        dGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwogICAgICB2YXIgcmVtb3ZlZE9i
        amVjdHMgPSBhcnJheS5zbGljZShpZHgsIGlkeCtyZW1vdmVkQ291bnQpOwog
        ICAgICB2YXIgc29ydFByb3BlcnRpZXMgPSBnZXQodGhpcywgJ3NvcnRQcm9w
        ZXJ0aWVzJyk7CgogICAgICBmb3JFYWNoKHJlbW92ZWRPYmplY3RzLCBmdW5j
        dGlvbihpdGVtKSB7CiAgICAgICAgYXJyYW5nZWRDb250ZW50LnJlbW92ZU9i
        amVjdChpdGVtKTsKCiAgICAgICAgZm9yRWFjaChzb3J0UHJvcGVydGllcywg
        ZnVuY3Rpb24oc29ydFByb3BlcnR5KSB7CiAgICAgICAgICBFbWJlci5yZW1v
        dmVPYnNlcnZlcihpdGVtLCBzb3J0UHJvcGVydHksIHRoaXMsICdjb250ZW50
        SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZScpOwogICAgICAgIH0sIHRoaXMp
        OwogICAgICB9LCB0aGlzKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3Vw
        ZXIoYXJyYXksIGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KTsKICB9
        LAoKICBjb250ZW50QXJyYXlEaWRDaGFuZ2U6IGZ1bmN0aW9uKGFycmF5LCBp
        ZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCkgewogICAgdmFyIGlzU29y
        dGVkID0gZ2V0KHRoaXMsICdpc1NvcnRlZCcpLAogICAgICAgIHNvcnRQcm9w
        ZXJ0aWVzID0gZ2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycpOwoKICAgIGlm
        IChpc1NvcnRlZCkgewogICAgICB2YXIgYWRkZWRPYmplY3RzID0gYXJyYXku
        c2xpY2UoaWR4LCBpZHgrYWRkZWRDb3VudCk7CgogICAgICBmb3JFYWNoKGFk
        ZGVkT2JqZWN0cywgZnVuY3Rpb24oaXRlbSkgewogICAgICAgIHRoaXMuaW5z
        ZXJ0SXRlbVNvcnRlZChpdGVtKTsKCiAgICAgICAgZm9yRWFjaChzb3J0UHJv
        cGVydGllcywgZnVuY3Rpb24oc29ydFByb3BlcnR5KSB7CiAgICAgICAgICBF
        bWJlci5hZGRPYnNlcnZlcihpdGVtLCBzb3J0UHJvcGVydHksIHRoaXMsICdj
        b250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZScpOwogICAgICAgIH0s
        IHRoaXMpOwogICAgICB9LCB0aGlzKTsKICAgIH0KCiAgICByZXR1cm4gdGhp
        cy5fc3VwZXIoYXJyYXksIGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50
        KTsKICB9LAoKICBpbnNlcnRJdGVtU29ydGVkOiBmdW5jdGlvbihpdGVtKSB7
        CiAgICB2YXIgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJhbmdl
        ZENvbnRlbnQnKTsKICAgIHZhciBsZW5ndGggPSBnZXQoYXJyYW5nZWRDb250
        ZW50LCAnbGVuZ3RoJyk7CgogICAgdmFyIGlkeCA9IHRoaXMuX2JpbmFyeVNl
        YXJjaChpdGVtLCAwLCBsZW5ndGgpOwogICAgYXJyYW5nZWRDb250ZW50Lmlu
        c2VydEF0KGlkeCwgaXRlbSk7CiAgfSwKCiAgY29udGVudEl0ZW1Tb3J0UHJv
        cGVydHlEaWRDaGFuZ2U6IGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBhcnJh
        bmdlZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpLAog
        ICAgICAgIG9sZEluZGV4ID0gYXJyYW5nZWRDb250ZW50LmluZGV4T2YoaXRl
        bSksCiAgICAgICAgbGVmdEl0ZW0gPSBhcnJhbmdlZENvbnRlbnQub2JqZWN0
        QXQob2xkSW5kZXggLSAxKSwKICAgICAgICByaWdodEl0ZW0gPSBhcnJhbmdl
        ZENvbnRlbnQub2JqZWN0QXQob2xkSW5kZXggKyAxKSwKICAgICAgICBsZWZ0
        UmVzdWx0ID0gbGVmdEl0ZW0gJiYgdGhpcy5vcmRlckJ5KGl0ZW0sIGxlZnRJ
        dGVtKSwKICAgICAgICByaWdodFJlc3VsdCA9IHJpZ2h0SXRlbSAmJiB0aGlz
        Lm9yZGVyQnkoaXRlbSwgcmlnaHRJdGVtKTsKCiAgICBpZiAobGVmdFJlc3Vs
        dCA8IDAgfHwgcmlnaHRSZXN1bHQgPiAwKSB7CiAgICAgIGFycmFuZ2VkQ29u
        dGVudC5yZW1vdmVPYmplY3QoaXRlbSk7CiAgICAgIHRoaXMuaW5zZXJ0SXRl
        bVNvcnRlZChpdGVtKTsKICAgIH0KICB9LAoKICBfYmluYXJ5U2VhcmNoOiBm
        dW5jdGlvbihpdGVtLCBsb3csIGhpZ2gpIHsKICAgIHZhciBtaWQsIG1pZEl0
        ZW0sIHJlcywgYXJyYW5nZWRDb250ZW50OwoKICAgIGlmIChsb3cgPT09IGhp
        Z2gpIHsKICAgICAgcmV0dXJuIGxvdzsKICAgIH0KCiAgICBhcnJhbmdlZENv
        bnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwoKICAgIG1p
        ZCA9IGxvdyArIE1hdGguZmxvb3IoKGhpZ2ggLSBsb3cpIC8gMik7CiAgICBt
        aWRJdGVtID0gYXJyYW5nZWRDb250ZW50Lm9iamVjdEF0KG1pZCk7CgogICAg
        cmVzID0gdGhpcy5vcmRlckJ5KG1pZEl0ZW0sIGl0ZW0pOwoKICAgIGlmIChy
        ZXMgPCAwKSB7CiAgICAgIHJldHVybiB0aGlzLl9iaW5hcnlTZWFyY2goaXRl
        bSwgbWlkKzEsIGhpZ2gpOwogICAgfSBlbHNlIGlmIChyZXMgPiAwKSB7CiAg
        ICAgIHJldHVybiB0aGlzLl9iaW5hcnlTZWFyY2goaXRlbSwgbG93LCBtaWQp
        OwogICAgfQoKICAgIHJldHVybiBtaWQ7CiAgfQp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQsIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFj
        aCwKICAgIHJlcGxhY2UgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMucmVwbGFj
        ZTsKCi8qKgogIGBFbWJlci5BcnJheUNvbnRyb2xsZXJgIHByb3ZpZGVzIGEg
        d2F5IGZvciB5b3UgdG8gcHVibGlzaCBhIGNvbGxlY3Rpb24gb2YKICBvYmpl
        Y3RzIHNvIHRoYXQgeW91IGNhbiBlYXNpbHkgYmluZCB0byB0aGUgY29sbGVj
        dGlvbiBmcm9tIGEgSGFuZGxlYmFycwogIGAjZWFjaGAgaGVscGVyLCBhbiBg
        RW1iZXIuQ29sbGVjdGlvblZpZXdgLCBvciBvdGhlciBjb250cm9sbGVycy4K
        CiAgVGhlIGFkdmFudGFnZSBvZiB1c2luZyBhbiBgQXJyYXlDb250cm9sbGVy
        YCBpcyB0aGF0IHlvdSBvbmx5IGhhdmUgdG8gc2V0IHVwCiAgeW91ciB2aWV3
        IGJpbmRpbmdzIG9uY2U7IHRvIGNoYW5nZSB3aGF0J3MgZGlzcGxheWVkLCBz
        aW1wbHkgc3dhcCBvdXQgdGhlCiAgYGNvbnRlbnRgIHByb3BlcnR5IG9uIHRo
        ZSBjb250cm9sbGVyLgoKICBGb3IgZXhhbXBsZSwgaW1hZ2luZSB5b3Ugd2Fu
        dGVkIHRvIGRpc3BsYXkgYSBsaXN0IG9mIGl0ZW1zIGZldGNoZWQgdmlhIGFu
        IFhIUgogIHJlcXVlc3QuIENyZWF0ZSBhbiBgRW1iZXIuQXJyYXlDb250cm9s
        bGVyYCBhbmQgc2V0IGl0cyBgY29udGVudGAgcHJvcGVydHk6CgogIGBgYGph
        dmFzY3JpcHQKICBNeUFwcC5saXN0Q29udHJvbGxlciA9IEVtYmVyLkFycmF5
        Q29udHJvbGxlci5jcmVhdGUoKTsKCiAgJC5nZXQoJ3Blb3BsZS5qc29uJywg
        ZnVuY3Rpb24oZGF0YSkgewogICAgTXlBcHAubGlzdENvbnRyb2xsZXIuc2V0
        KCdjb250ZW50JywgZGF0YSk7CiAgfSk7CiAgYGBgCgogIFRoZW4sIGNyZWF0
        ZSBhIHZpZXcgdGhhdCBiaW5kcyB0byB5b3VyIG5ldyBjb250cm9sbGVyOgoK
        ICBgYGBoYW5kbGViYXJzCiAge3sjZWFjaCBNeUFwcC5saXN0Q29udHJvbGxl
        cn19CiAgICB7e2ZpcnN0TmFtZX19IHt7bGFzdE5hbWV9fQogIHt7L2VhY2h9
        fQogIGBgYAoKICBBbHRob3VnaCB5b3UgYXJlIGJpbmRpbmcgdG8gdGhlIGNv
        bnRyb2xsZXIsIHRoZSBiZWhhdmlvciBvZiB0aGlzIGNvbnRyb2xsZXIKICBp
        cyB0byBwYXNzIHRocm91Z2ggYW55IG1ldGhvZHMgb3IgcHJvcGVydGllcyB0
        byB0aGUgdW5kZXJseWluZyBhcnJheS4gVGhpcwogIGNhcGFiaWxpdHkgY29t
        ZXMgZnJvbSBgRW1iZXIuQXJyYXlQcm94eWAsIHdoaWNoIHRoaXMgY2xhc3Mg
        aW5oZXJpdHMgZnJvbS4KCiAgU29tZXRpbWVzIHlvdSB3YW50IHRvIGRpc3Bs
        YXkgY29tcHV0ZWQgcHJvcGVydGllcyB3aXRoaW4gdGhlIGJvZHkgb2YgYW4K
        ICBgI2VhY2hgIGhlbHBlciB0aGF0IGRlcGVuZCBvbiB0aGUgdW5kZXJseWlu
        ZyBpdGVtcyBpbiBgY29udGVudGAsIGJ1dCBhcmUgbm90CiAgcHJlc2VudCBv
        biB0aG9zZSBpdGVtcy4gICBUbyBkbyB0aGlzLCBzZXQgYGl0ZW1Db250cm9s
        bGVyYCB0byB0aGUgbmFtZSBvZiBhCiAgY29udHJvbGxlciAocHJvYmFibHkg
        YW4gYE9iamVjdENvbnRyb2xsZXJgKSB0aGF0IHdpbGwgd3JhcCBlYWNoIGlu
        ZGl2aWR1YWwgaXRlbS4KCiAgRm9yIGV4YW1wbGU6CgogIGBgYGhhbmRsZWJh
        cnMKICAgIHt7I2VhY2ggcG9zdCBpbiBjb250cm9sbGVyfX0KICAgICAgPGxp
        Pnt7dGl0bGV9fSAoe3t0aXRsZUxlbmd0aH19IGNoYXJhY3RlcnMpPC9saT4K
        ICAgIHt7L2VhY2h9fQogIGBgYAoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBv
        c3RzQ29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQo
        ewogICAgaXRlbUNvbnRyb2xsZXI6ICdwb3N0JwogIH0pOwoKICBBcHAuUG9z
        dENvbnRyb2xsZXIgPSBFbWJlci5PYmplY3RDb250cm9sbGVyLmV4dGVuZCh7
        CiAgICAvLyB0aGUgYHRpdGxlYCBwcm9wZXJ0eSB3aWxsIGJlIHByb3hpZWQg
        dG8gdGhlIHVuZGVybHlpbmcgcG9zdC4KCiAgICB0aXRsZUxlbmd0aDogZnVu
        Y3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmdldCgndGl0bGUnKS5sZW5n
        dGg7CiAgICB9LnByb3BlcnR5KCd0aXRsZScpCiAgfSk7CiAgYGBgCgogIElu
        IHNvbWUgY2FzZXMgaXQgaXMgaGVscGZ1bCB0byByZXR1cm4gYSBkaWZmZXJl
        bnQgYGl0ZW1Db250cm9sbGVyYCBkZXBlbmRpbmcKICBvbiB0aGUgcGFydGlj
        dWxhciBpdGVtLiAgU3ViY2xhc3NlcyBjYW4gZG8gdGhpcyBieSBvdmVycmlk
        aW5nCiAgYGxvb2t1cEl0ZW1Db250cm9sbGVyYC4KCiAgRm9yIGV4YW1wbGU6
        CgogIGBgYGphdmFzY3JpcHQKICBBcHAuTXlBcnJheUNvbnRyb2xsZXIgPSBF
        bWJlci5BcnJheUNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIGxvb2t1cEl0ZW1D
        b250cm9sbGVyOiBmdW5jdGlvbiggb2JqZWN0ICkgewogICAgICBpZiAob2Jq
        ZWN0LmdldCgnaXNTcGVjaWFsJykpIHsKICAgICAgICByZXR1cm4gInNwZWNp
        YWwiOyAvLyB1c2UgQXBwLlNwZWNpYWxDb250cm9sbGVyCiAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgcmV0dXJuICJyZWd1bGFyIjsgLy8gdXNlIEFwcC5SZWd1
        bGFyQ29udHJvbGxlcgogICAgICB9CiAgICB9CiAgfSk7CiAgYGBgCgogIFRo
        ZSBpdGVtQ29udHJvbGxlciBpbnN0YW5jZXMgd2lsbCBoYXZlIGEgYHBhcmVu
        dENvbnRyb2xsZXJgIHByb3BlcnR5IHNldCB0bwogIGVpdGhlciB0aGUgdGhl
        IGBwYXJlbnRDb250cm9sbGVyYCBwcm9wZXJ0eSBvZiB0aGUgYEFycmF5Q29u
        dHJvbGxlcmAKICBvciB0byB0aGUgYEFycmF5Q29udHJvbGxlcmAgaW5zdGFu
        Y2UgaXRzZWxmLgoKICBAY2xhc3MgQXJyYXlDb250cm9sbGVyCiAgQG5hbWVz
        cGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLkFycmF5UHJveHkKICBAdXNl
        cyBFbWJlci5Tb3J0YWJsZU1peGluCiAgQHVzZXMgRW1iZXIuQ29udHJvbGxl
        ck1peGluCiovCgpFbWJlci5BcnJheUNvbnRyb2xsZXIgPSBFbWJlci5BcnJh
        eVByb3h5LmV4dGVuZChFbWJlci5Db250cm9sbGVyTWl4aW4sCiAgRW1iZXIu
        U29ydGFibGVNaXhpbiwgewoKICAvKioKICAgIFRoZSBjb250cm9sbGVyIHVz
        ZWQgdG8gd3JhcCBpdGVtcywgaWYgYW55LgoKICAgIEBwcm9wZXJ0eSBpdGVt
        Q29udHJvbGxlcgogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxs
        CiAgKi8KICBpdGVtQ29udHJvbGxlcjogbnVsbCwKCiAgLyoqCiAgICBSZXR1
        cm4gdGhlIG5hbWUgb2YgdGhlIGNvbnRyb2xsZXIgdG8gd3JhcCBpdGVtcywg
        b3IgYG51bGxgIGlmIGl0ZW1zIHNob3VsZAogICAgYmUgcmV0dXJuZWQgZGly
        ZWN0bHkuICBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgcmV0
        dXJucyB0aGUKICAgIGBpdGVtQ29udHJvbGxlcmAgcHJvcGVydHksIGJ1dCBz
        dWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byByZXR1cm4K
        ICAgIGRpZmZlcmVudCBjb250cm9sbGVycyBmb3IgZGlmZmVyZW50IG9iamVj
        dHMuCgogICAgRm9yIGV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        QXBwLk15QXJyYXlDb250cm9sbGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVy
        LmV4dGVuZCh7CiAgICAgIGxvb2t1cEl0ZW1Db250cm9sbGVyOiBmdW5jdGlv
        biggb2JqZWN0ICkgewogICAgICAgIGlmIChvYmplY3QuZ2V0KCdpc1NwZWNp
        YWwnKSkgewogICAgICAgICAgcmV0dXJuICJzcGVjaWFsIjsgLy8gdXNlIEFw
        cC5TcGVjaWFsQ29udHJvbGxlcgogICAgICAgIH0gZWxzZSB7CiAgICAgICAg
        ICByZXR1cm4gInJlZ3VsYXIiOyAvLyB1c2UgQXBwLlJlZ3VsYXJDb250cm9s
        bGVyCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBt
        ZXRob2QgbG9va3VwSXRlbUNvbnRyb2xsZXIKICAgIEBwYXJhbSB7T2JqZWN0
        fSBvYmplY3QKICAgIEByZXR1cm4ge1N0cmluZ30KICAqLwogIGxvb2t1cEl0
        ZW1Db250cm9sbGVyOiBmdW5jdGlvbihvYmplY3QpIHsKICAgIHJldHVybiBn
        ZXQodGhpcywgJ2l0ZW1Db250cm9sbGVyJyk7CiAgfSwKCiAgb2JqZWN0QXRD
        b250ZW50OiBmdW5jdGlvbihpZHgpIHsKICAgIHZhciBsZW5ndGggPSBnZXQo
        dGhpcywgJ2xlbmd0aCcpLAogICAgICAgIGFycmFuZ2VkQ29udGVudCA9IGdl
        dCh0aGlzLCdhcnJhbmdlZENvbnRlbnQnKSwKICAgICAgICBvYmplY3QgPSBh
        cnJhbmdlZENvbnRlbnQgJiYgYXJyYW5nZWRDb250ZW50Lm9iamVjdEF0KGlk
        eCk7CgogICAgaWYgKGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aCkgewogICAg
        ICB2YXIgY29udHJvbGxlckNsYXNzID0gdGhpcy5sb29rdXBJdGVtQ29udHJv
        bGxlcihvYmplY3QpOwogICAgICBpZiAoY29udHJvbGxlckNsYXNzKSB7CiAg
        ICAgICAgcmV0dXJuIHRoaXMuY29udHJvbGxlckF0KGlkeCwgb2JqZWN0LCBj
        b250cm9sbGVyQ2xhc3MpOwogICAgICB9CiAgICB9CgogICAgLy8gV2hlbiBg
        Y29udHJvbGxlckNsYXNzYCBpcyBmYWxzeSwgd2UgaGF2ZSBub3Qgb3B0ZWQg
        aW4gdG8gdXNpbmcgaXRlbQogICAgLy8gY29udHJvbGxlcnMsIHNvIHJldHVy
        biB0aGUgb2JqZWN0IGRpcmVjdGx5LgoKICAgIC8vIFdoZW4gdGhlIGluZGV4
        IGlzIG91dCBvZiByYW5nZSwgd2Ugd2FudCB0byByZXR1cm4gdGhlICJvdXQg
        b2YgcmFuZ2UiCiAgICAvLyB2YWx1ZSwgd2hhdGV2ZXIgdGhhdCBtaWdodCBi
        ZS4gIFJhdGhlciB0aGFuIG1ha2UgYXNzdW1wdGlvbnMKICAgIC8vIChlLmcu
        IGd1ZXNzaW5nIGBudWxsYCBvciBgdW5kZWZpbmVkYCkgd2UgZGVmZXIgdGhp
        cyB0byBgYXJyYW5nZWRDb250ZW50YC4KICAgIHJldHVybiBvYmplY3Q7CiAg
        fSwKCiAgYXJyYW5nZWRDb250ZW50RGlkQ2hhbmdlOiBmdW5jdGlvbigpIHsK
        ICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLl9yZXNldFN1YkNvbnRyb2xs
        ZXJzKCk7CiAgfSwKCiAgYXJyYXlDb250ZW50RGlkQ2hhbmdlOiBmdW5jdGlv
        bihpZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KSB7CiAgICB2YXIgc3ViQ29u
        dHJvbGxlcnMgPSBnZXQodGhpcywgJ19zdWJDb250cm9sbGVycycpLAogICAg
        ICAgIHN1YkNvbnRyb2xsZXJzVG9SZW1vdmUgPSBzdWJDb250cm9sbGVycy5z
        bGljZShpZHgsIGlkeCtyZW1vdmVkQ250KTsKCiAgICBmb3JFYWNoKHN1YkNv
        bnRyb2xsZXJzVG9SZW1vdmUsIGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpIHsK
        ICAgICAgaWYgKHN1YkNvbnRyb2xsZXIpIHsgc3ViQ29udHJvbGxlci5kZXN0
        cm95KCk7IH0KICAgIH0pOwoKICAgIHJlcGxhY2Uoc3ViQ29udHJvbGxlcnMs
        IGlkeCwgcmVtb3ZlZENudCwgbmV3IEFycmF5KGFkZGVkQ250KSk7CgogICAg
        Ly8gVGhlIHNoYWRvdyBhcnJheSBvZiBzdWJjb250cm9sbGVycyBtdXN0IGJl
        IHVwZGF0ZWQgYmVmb3JlIHdlIHRyaWdnZXIKICAgIC8vIG9ic2VydmVycywg
        b3RoZXJ3aXNlIG9ic2VydmVycyB3aWxsIGdldCB0aGUgd3Jvbmcgc3ViY29u
        dGFpbmVyIHdoZW4KICAgIC8vIGNhbGxpbmcgYG9iamVjdEF0YAogICAgdGhp
        cy5fc3VwZXIoaWR4LCByZW1vdmVkQ250LCBhZGRlZENudCk7CiAgfSwKCiAg
        aW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwoKICAgIHRo
        aXMuc2V0KCdfc3ViQ29udHJvbGxlcnMnLCBFbWJlci5BKCkpOwogIH0sCgog
        IGNvbnRlbnQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJl
        dHVybiBFbWJlci5BKCk7CiAgfSksCgogIGNvbnRyb2xsZXJBdDogZnVuY3Rp
        b24oaWR4LCBvYmplY3QsIGNvbnRyb2xsZXJDbGFzcykgewogICAgdmFyIGNv
        bnRhaW5lciA9IGdldCh0aGlzLCAnY29udGFpbmVyJyksCiAgICAgICAgc3Vi
        Q29udHJvbGxlcnMgPSBnZXQodGhpcywgJ19zdWJDb250cm9sbGVycycpLAog
        ICAgICAgIHN1YkNvbnRyb2xsZXIgPSBzdWJDb250cm9sbGVyc1tpZHhdLAog
        ICAgICAgIGZhY3RvcnksIGZ1bGxOYW1lOwoKICAgIGlmIChzdWJDb250cm9s
        bGVyKSB7IHJldHVybiBzdWJDb250cm9sbGVyOyB9CgogICAgZnVsbE5hbWUg
        PSAiY29udHJvbGxlcjoiICsgY29udHJvbGxlckNsYXNzOwoKICAgIGlmICgh
        Y29udGFpbmVyLmhhcyhmdWxsTmFtZSkpIHsKICAgICAgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCdDb3VsZCBub3QgcmVzb2x2ZSBpdGVtQ29udHJvbGxlcjog
        IicgKyBjb250cm9sbGVyQ2xhc3MgKyAnIicpOwogICAgfQoKICAgIHN1YkNv
        bnRyb2xsZXIgPSBjb250YWluZXIubG9va3VwRmFjdG9yeShmdWxsTmFtZSku
        Y3JlYXRlKHsKICAgICAgdGFyZ2V0OiB0aGlzLAogICAgICBwYXJlbnRDb250
        cm9sbGVyOiBnZXQodGhpcywgJ3BhcmVudENvbnRyb2xsZXInKSB8fCB0aGlz
        LAogICAgICBjb250ZW50OiBvYmplY3QKICAgIH0pOwoKICAgIHN1YkNvbnRy
        b2xsZXJzW2lkeF0gPSBzdWJDb250cm9sbGVyOwoKICAgIHJldHVybiBzdWJD
        b250cm9sbGVyOwogIH0sCgogIF9zdWJDb250cm9sbGVyczogbnVsbCwKCiAg
        X3Jlc2V0U3ViQ29udHJvbGxlcnM6IGZ1bmN0aW9uKCkgewogICAgdmFyIHN1
        YkNvbnRyb2xsZXJzID0gZ2V0KHRoaXMsICdfc3ViQ29udHJvbGxlcnMnKTsK
        ICAgIGlmIChzdWJDb250cm9sbGVycykgewogICAgICBmb3JFYWNoKHN1YkNv
        bnRyb2xsZXJzLCBmdW5jdGlvbihzdWJDb250cm9sbGVyKSB7CiAgICAgICAg
        aWYgKHN1YkNvbnRyb2xsZXIpIHsgc3ViQ29udHJvbGxlci5kZXN0cm95KCk7
        IH0KICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5zZXQoJ19zdWJDb250cm9s
        bGVycycsIEVtYmVyLkEoKSk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50
        aW1lCiovCgovKioKICBgRW1iZXIuT2JqZWN0Q29udHJvbGxlcmAgaXMgcGFy
        dCBvZiBFbWJlcidzIENvbnRyb2xsZXIgbGF5ZXIuIEl0IGlzIGludGVuZGVk
        CiAgdG8gd3JhcCBhIHNpbmdsZSBvYmplY3QsIHByb3h5aW5nIHVuaGFuZGxl
        ZCBhdHRlbXB0cyB0byBgZ2V0YCBhbmQgYHNldGAgdG8gdGhlIHVuZGVybHlp
        bmcKICBjb250ZW50IG9iamVjdCwgYW5kIHRvIGZvcndhcmQgdW5oYW5kbGVk
        IGFjdGlvbiBhdHRlbXB0cyB0byBpdHMgYHRhcmdldGAuCgogIGBFbWJlci5P
        YmplY3RDb250cm9sbGVyYCBkZXJpdmVzIHRoaXMgZnVuY3Rpb25hbGl0eSBm
        cm9tIGl0cyBzdXBlcmNsYXNzCiAgYEVtYmVyLk9iamVjdFByb3h5YCBhbmQg
        dGhlIGBFbWJlci5Db250cm9sbGVyTWl4aW5gIG1peGluLgoKICBAY2xhc3Mg
        T2JqZWN0Q29udHJvbGxlcgogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5k
        cyBFbWJlci5PYmplY3RQcm94eQogIEB1c2VzIEVtYmVyLkNvbnRyb2xsZXJN
        aXhpbgoqKi8KRW1iZXIuT2JqZWN0Q29udHJvbGxlciA9IEVtYmVyLk9iamVj
        dFByb3h5LmV4dGVuZChFbWJlci5Db250cm9sbGVyTWl4aW4pOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        RW1iZXIgUnVudGltZQoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXJ1bnRpbWUKQHJlcXVpcmVzIGVtYmVyLW1ldGFsCiovCgp9KSgpOwoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXZpZXdzCiovCgp2YXIgalF1ZXJ5ID0gdGhpcy5qUXVlcnkgfHwgKEVtYmVy
        LmltcG9ydHMgJiYgRW1iZXIuaW1wb3J0cy5qUXVlcnkpOwppZiAoIWpRdWVy
        eSAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykgewogIGpRdWVy
        eSA9IHJlcXVpcmUoJ2pxdWVyeScpOwp9CgpFbWJlci5hc3NlcnQoIkVtYmVy
        IFZpZXdzIHJlcXVpcmUgalF1ZXJ5IDEuNywgMS44LCAxLjksIDEuMTAsIG9y
        IDIuMCIsIGpRdWVyeSAmJiAoalF1ZXJ5KCkuanF1ZXJ5Lm1hdGNoKC9eKCgx
        XC4oN3w4fDl8MTApKXwyLjApKFwuXGQrKT8ocHJlfHJjXGQ/KT8vKSB8fCBF
        bWJlci5FTlYuRk9SQ0VfSlFVRVJZKSk7CgovKioKICBBbGlhcyBmb3IgalF1
        ZXJ5CgogIEBtZXRob2QgJAogIEBmb3IgRW1iZXIKKi8KRW1iZXIuJCA9IGpR
        dWVyeTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwppZiAoRW1iZXIuJCkgewog
        IC8vIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJy
        ZW50LXdvcmsvbXVsdGlwYWdlL2RuZC5odG1sI2RuZGV2ZW50cwogIHZhciBk
        cmFnRXZlbnRzID0gRW1iZXIuU3RyaW5nLncoJ2RyYWdzdGFydCBkcmFnIGRy
        YWdlbnRlciBkcmFnbGVhdmUgZHJhZ292ZXIgZHJvcCBkcmFnZW5kJyk7Cgog
        IC8vIENvcGllcyB0aGUgYGRhdGFUcmFuc2ZlcmAgcHJvcGVydHkgZnJvbSBh
        IGJyb3dzZXIgZXZlbnQgb2JqZWN0IG9udG8gdGhlCiAgLy8galF1ZXJ5IGV2
        ZW50IG9iamVjdCBmb3IgdGhlIHNwZWNpZmllZCBldmVudHMKICBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaChkcmFnRXZlbnRzLCBmdW5jdGlvbihl
        dmVudE5hbWUpIHsKICAgIEVtYmVyLiQuZXZlbnQuZml4SG9va3NbZXZlbnRO
        YW1lXSA9IHsgcHJvcHM6IFsnZGF0YVRyYW5zZmVyJ10gfTsKICB9KTsKfQoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3Vi
        bW9kdWxlIGVtYmVyLXZpZXdzCiovCgovKiBCRUdJTiBNRVRBTU9SUEggSEVM
        UEVSUyAqLwoKLy8gSW50ZXJuZXQgRXhwbG9yZXIgcHJpb3IgdG8gOSBkb2Vz
        IG5vdCBhbGxvdyBzZXR0aW5nIGlubmVySFRNTCBpZiB0aGUgZmlyc3QgZWxl
        bWVudAovLyBpcyBhICJ6ZXJvLXNjb3BlIiBlbGVtZW50LiBUaGlzIHByb2Js
        ZW0gY2FuIGJlIHdvcmtlZCBhcm91bmQgYnkgbWFraW5nCi8vIHRoZSBmaXJz
        dCBub2RlIGFuIGludmlzaWJsZSB0ZXh0IG5vZGUuIFdlLCBsaWtlIE1vZGVy
        bml6ciwgdXNlICZzaHk7Cgp2YXIgbmVlZHNTaHkgPSB0aGlzLmRvY3VtZW50
        ICYmIChmdW5jdGlvbigpIHsKICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3Jl
        YXRlRWxlbWVudCgnZGl2Jyk7CiAgdGVzdEVsLmlubmVySFRNTCA9ICI8ZGl2
        PjwvZGl2PiI7CiAgdGVzdEVsLmZpcnN0Q2hpbGQuaW5uZXJIVE1MID0gIjxz
        Y3JpcHQ+PC9zY3JpcHQ+IjsKICByZXR1cm4gdGVzdEVsLmZpcnN0Q2hpbGQu
        aW5uZXJIVE1MID09PSAnJzsKfSkoKTsKCi8vIElFIDggKGFuZCBsaWtlbHkg
        ZWFybGllcikgbGlrZXMgdG8gbW92ZSB3aGl0ZXNwYWNlIHByZWNlZWRpbmcK
        Ly8gYSBzY3JpcHQgdGFnIHRvIGFwcGVhciBhZnRlciBpdC4gVGhpcyBtZWFu
        cyB0aGF0IHdlIGNhbgovLyBhY2NpZGVudGFsbHkgcmVtb3ZlIHdoaXRlc3Bh
        Y2Ugd2hlbiB1cGRhdGluZyBhIG1vcnBoLgp2YXIgbW92ZXNXaGl0ZXNwYWNl
        ID0gdGhpcy5kb2N1bWVudCAmJiAoZnVuY3Rpb24oKSB7CiAgdmFyIHRlc3RF
        bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIHRlc3RFbC5p
        bm5lckhUTUwgPSAiVGVzdDogPHNjcmlwdCB0eXBlPSd0ZXh0L3gtcGxhY2Vo
        b2xkZXInPjwvc2NyaXB0PlZhbHVlIjsKICByZXR1cm4gdGVzdEVsLmNoaWxk
        Tm9kZXNbMF0ubm9kZVZhbHVlID09PSAnVGVzdDonICYmCiAgICAgICAgICB0
        ZXN0RWwuY2hpbGROb2Rlc1syXS5ub2RlVmFsdWUgPT09ICcgVmFsdWUnOwp9
        KSgpOwoKLy8gVXNlIHRoaXMgdG8gZmluZCBjaGlsZHJlbiBieSBJRCBpbnN0
        ZWFkIG9mIHVzaW5nIGpRdWVyeQp2YXIgZmluZENoaWxkQnlJZCA9IGZ1bmN0
        aW9uKGVsZW1lbnQsIGlkKSB7CiAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRl
        KCdpZCcpID09PSBpZCkgeyByZXR1cm4gZWxlbWVudDsgfQoKICB2YXIgbGVu
        ID0gZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCwgaWR4LCBub2RlLCBmb3Vu
        ZDsKICBmb3IgKGlkeD0wOyBpZHg8bGVuOyBpZHgrKykgewogICAgbm9kZSA9
        IGVsZW1lbnQuY2hpbGROb2Rlc1tpZHhdOwogICAgZm91bmQgPSBub2RlLm5v
        ZGVUeXBlID09PSAxICYmIGZpbmRDaGlsZEJ5SWQobm9kZSwgaWQpOwogICAg
        aWYgKGZvdW5kKSB7IHJldHVybiBmb3VuZDsgfQogIH0KfTsKCnZhciBzZXRJ
        bm5lckhUTUxXaXRob3V0Rml4ID0gZnVuY3Rpb24oZWxlbWVudCwgaHRtbCkg
        ewogIGlmIChuZWVkc1NoeSkgewogICAgaHRtbCA9ICcmc2h5OycgKyBodG1s
        OwogIH0KCiAgdmFyIG1hdGNoZXMgPSBbXTsKICBpZiAobW92ZXNXaGl0ZXNw
        YWNlKSB7CiAgICAvLyBSaWdodCBub3cgd2Ugb25seSBjaGVjayBmb3Igc2Ny
        aXB0IHRhZ3Mgd2l0aCBpZHMgd2l0aCB0aGUKICAgIC8vIGdvYWwgb2YgdGFy
        Z2V0aW5nIG1vcnBocy4KICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLyhccysp
        KDxzY3JpcHQgaWQ9JyhbXiddKyknKS9nLCBmdW5jdGlvbihtYXRjaCwgc3Bh
        Y2VzLCB0YWcsIGlkKSB7CiAgICAgIG1hdGNoZXMucHVzaChbaWQsIHNwYWNl
        c10pOwogICAgICByZXR1cm4gdGFnOwogICAgfSk7CiAgfQoKICBlbGVtZW50
        LmlubmVySFRNTCA9IGh0bWw7CgogIC8vIElmIHdlIGhhdmUgdG8gZG8gYW55
        IHdoaXRlc3BhY2UgYWRqdXN0bWVudHMgZG8gdGhlbSBub3cKICBpZiAobWF0
        Y2hlcy5sZW5ndGggPiAwKSB7CiAgICB2YXIgbGVuID0gbWF0Y2hlcy5sZW5n
        dGgsIGlkeDsKICAgIGZvciAoaWR4PTA7IGlkeDxsZW47IGlkeCsrKSB7CiAg
        ICAgIHZhciBzY3JpcHQgPSBmaW5kQ2hpbGRCeUlkKGVsZW1lbnQsIG1hdGNo
        ZXNbaWR4XVswXSksCiAgICAgICAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRl
        VGV4dE5vZGUobWF0Y2hlc1tpZHhdWzFdKTsKICAgICAgc2NyaXB0LnBhcmVu
        dE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHNjcmlwdCk7CiAgICB9CiAgfQoK
        ICBpZiAobmVlZHNTaHkpIHsKICAgIHZhciBzaHlFbGVtZW50ID0gZWxlbWVu
        dC5maXJzdENoaWxkOwogICAgd2hpbGUgKHNoeUVsZW1lbnQubm9kZVR5cGUg
        PT09IDEgJiYgIXNoeUVsZW1lbnQubm9kZU5hbWUpIHsKICAgICAgc2h5RWxl
        bWVudCA9IHNoeUVsZW1lbnQuZmlyc3RDaGlsZDsKICAgIH0KICAgIGlmIChz
        aHlFbGVtZW50Lm5vZGVUeXBlID09PSAzICYmIHNoeUVsZW1lbnQubm9kZVZh
        bHVlLmNoYXJBdCgwKSA9PT0gIlx1MDBBRCIpIHsKICAgICAgc2h5RWxlbWVu
        dC5ub2RlVmFsdWUgPSBzaHlFbGVtZW50Lm5vZGVWYWx1ZS5zbGljZSgxKTsK
        ICAgIH0KICB9Cn07CgovKiBFTkQgTUVUQU1PUlBIIEhFTFBFUlMgKi8KCgp2
        YXIgaW5uZXJIVE1MVGFncyA9IHt9Owp2YXIgY2FuU2V0SW5uZXJIVE1MID0g
        ZnVuY3Rpb24odGFnTmFtZSkgewogIGlmIChpbm5lckhUTUxUYWdzW3RhZ05h
        bWVdICE9PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBpbm5lckhUTUxUYWdz
        W3RhZ05hbWVdOwogIH0KCiAgdmFyIGNhblNldCA9IHRydWU7CgogIC8vIElF
        IDggYW5kIGVhcmxpZXIgZG9uJ3QgYWxsb3cgdXMgdG8gZG8gaW5uZXJIVE1M
        IG9uIHNlbGVjdAogIGlmICh0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdz
        ZWxlY3QnKSB7CiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50
        KCdzZWxlY3QnKTsKICAgIHNldElubmVySFRNTFdpdGhvdXRGaXgoZWwsICc8
        b3B0aW9uIHZhbHVlPSJ0ZXN0Ij5UZXN0PC9vcHRpb24+Jyk7CiAgICBjYW5T
        ZXQgPSBlbC5vcHRpb25zLmxlbmd0aCA9PT0gMTsKICB9CgogIGlubmVySFRN
        TFRhZ3NbdGFnTmFtZV0gPSBjYW5TZXQ7CgogIHJldHVybiBjYW5TZXQ7Cn07
        Cgp2YXIgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24oZWxlbWVudCwgaHRtbCkg
        ewogIHZhciB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lOwoKICBpZiAoY2Fu
        U2V0SW5uZXJIVE1MKHRhZ05hbWUpKSB7CiAgICBzZXRJbm5lckhUTUxXaXRo
        b3V0Rml4KGVsZW1lbnQsIGh0bWwpOwogIH0gZWxzZSB7CiAgICAvLyBGaXJl
        Zm94IHZlcnNpb25zIDwgMTEgZG8gbm90IGhhdmUgc3VwcG9ydCBmb3IgZWxl
        bWVudC5vdXRlckhUTUwuCiAgICB2YXIgb3V0ZXJIVE1MID0gZWxlbWVudC5v
        dXRlckhUTUwgfHwgbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0
        cmluZyhlbGVtZW50KTsKICAgIEVtYmVyLmFzc2VydCgiQ2FuJ3Qgc2V0IGlu
        bmVySFRNTCBvbiAiK2VsZW1lbnQudGFnTmFtZSsiIGluIHRoaXMgYnJvd3Nl
        ciIsIG91dGVySFRNTCk7CgogICAgdmFyIHN0YXJ0VGFnID0gb3V0ZXJIVE1M
        Lm1hdGNoKG5ldyBSZWdFeHAoIjwiK3RhZ05hbWUrIihbXj5dKik+IiwgJ2kn
        KSlbMF0sCiAgICAgICAgZW5kVGFnID0gJzwvJyt0YWdOYW1lKyc+JzsKCiAg
        ICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Rpdicp
        OwogICAgc2V0SW5uZXJIVE1MV2l0aG91dEZpeCh3cmFwcGVyLCBzdGFydFRh
        ZyArIGh0bWwgKyBlbmRUYWcpOwogICAgZWxlbWVudCA9IHdyYXBwZXIuZmly
        c3RDaGlsZDsKICAgIHdoaWxlIChlbGVtZW50LnRhZ05hbWUgIT09IHRhZ05h
        bWUpIHsKICAgICAgZWxlbWVudCA9IGVsZW1lbnQubmV4dFNpYmxpbmc7CiAg
        ICB9CiAgfQoKICByZXR1cm4gZWxlbWVudDsKfTsKCmZ1bmN0aW9uIGlzU2lt
        cGxlQ2xpY2soZXZlbnQpIHsKICB2YXIgbW9kaWZpZXIgPSBldmVudC5zaGlm
        dEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVu
        dC5jdHJsS2V5LAogICAgICBzZWNvbmRhcnlDbGljayA9IGV2ZW50LndoaWNo
        ID4gMTsgLy8gSUU5IG1heSByZXR1cm4gdW5kZWZpbmVkCgogIHJldHVybiAh
        bW9kaWZpZXIgJiYgIXNlY29uZGFyeUNsaWNrOwp9CgpFbWJlci5WaWV3VXRp
        bHMgPSB7CiAgc2V0SW5uZXJIVE1MOiBzZXRJbm5lckhUTUwsCiAgaXNTaW1w
        bGVDbGljazogaXNTaW1wbGVDbGljawp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdz
        CiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7Cgp2
        YXIgQ2xhc3NTZXQgPSBmdW5jdGlvbigpIHsKICB0aGlzLnNlZW4gPSB7fTsK
        ICB0aGlzLmxpc3QgPSBbXTsKfTsKCkNsYXNzU2V0LnByb3RvdHlwZSA9IHsK
        ICBhZGQ6IGZ1bmN0aW9uKHN0cmluZykgewogICAgaWYgKHN0cmluZyBpbiB0
        aGlzLnNlZW4pIHsgcmV0dXJuOyB9CiAgICB0aGlzLnNlZW5bc3RyaW5nXSA9
        IHRydWU7CgogICAgdGhpcy5saXN0LnB1c2goc3RyaW5nKTsKICB9LAoKICB0
        b0RPTTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5saXN0LmpvaW4o
        IiAiKTsKICB9Cn07Cgp2YXIgQkFEX1RBR19OQU1FX1RFU1RfUkVHRVhQID0g
        L1teYS16QS1aMC05XC1dLzsKdmFyIEJBRF9UQUdfTkFNRV9SRVBMQUNFX1JF
        R0VYUCA9IC9bXmEtekEtWjAtOVwtXS9nOwoKZnVuY3Rpb24gc3RyaXBUYWdO
        YW1lKHRhZ05hbWUpIHsKICBpZiAoIXRhZ05hbWUpIHsKICAgIHJldHVybiB0
        YWdOYW1lOwogIH0KCiAgaWYgKCFCQURfVEFHX05BTUVfVEVTVF9SRUdFWFAu
        dGVzdCh0YWdOYW1lKSkgewogICAgcmV0dXJuIHRhZ05hbWU7CiAgfQoKICBy
        ZXR1cm4gdGFnTmFtZS5yZXBsYWNlKEJBRF9UQUdfTkFNRV9SRVBMQUNFX1JF
        R0VYUCwgJycpOwp9Cgp2YXIgQkFEX0NIQVJTX1JFR0VYUCA9IC8mKD8hXHcr
        Oyl8Wzw+IidgXS9nOwp2YXIgUE9TU0lCTEVfQ0hBUlNfUkVHRVhQID0gL1sm
        PD4iJ2BdLzsKCmZ1bmN0aW9uIGVzY2FwZUF0dHJpYnV0ZSh2YWx1ZSkgewog
        IC8vIFN0b2xlbiBzaGFtZWxlc3NseSBmcm9tIEhhbmRsZWJhcnMKCiAgdmFy
        IGVzY2FwZSA9IHsKICAgICI8IjogIiZsdDsiLAogICAgIj4iOiAiJmd0OyIs
        CiAgICAnIic6ICImcXVvdDsiLAogICAgIiciOiAiJiN4Mjc7IiwKICAgICJg
        IjogIiYjeDYwOyIKICB9OwoKICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9u
        KGNocikgewogICAgcmV0dXJuIGVzY2FwZVtjaHJdIHx8ICImYW1wOyI7CiAg
        fTsKCiAgdmFyIHN0cmluZyA9IHZhbHVlLnRvU3RyaW5nKCk7CgogIGlmKCFQ
        T1NTSUJMRV9DSEFSU19SRUdFWFAudGVzdChzdHJpbmcpKSB7IHJldHVybiBz
        dHJpbmc7IH0KICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoQkFEX0NIQVJTX1JF
        R0VYUCwgZXNjYXBlQ2hhcik7Cn0KCi8vIElFIDYvNyBoYXZlIGJ1Z3MgYXJv
        bmQgc2V0dGluZyBuYW1lcyBvbiBpbnB1dHMgZHVyaW5nIGNyZWF0aW9uLgov
        LyBGcm9tIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFy
        eS9pZS9tczUzNjM4OSh2PXZzLjg1KS5hc3B4OgovLyAiVG8gaW5jbHVkZSB0
        aGUgTkFNRSBhdHRyaWJ1dGUgYXQgcnVuIHRpbWUgb24gb2JqZWN0cyBjcmVh
        dGVkIHdpdGggdGhlIGNyZWF0ZUVsZW1lbnQgbWV0aG9kLCB1c2UgdGhlIGVU
        YWcuIgp2YXIgY2FuU2V0TmFtZU9uSW5wdXRzID0gKGZ1bmN0aW9uKCkgewog
        IHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwKICAg
        ICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwoKICBl
        bC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZm9vJyk7CiAgZGl2LmFwcGVuZENo
        aWxkKGVsKTsKCiAgcmV0dXJuICEhZGl2LmlubmVySFRNTC5tYXRjaCgnZm9v
        Jyk7Cn0pKCk7CgovKioKICBgRW1iZXIuUmVuZGVyQnVmZmVyYCBnYXRoZXJz
        IGluZm9ybWF0aW9uIHJlZ2FyZGluZyB0aGUgYSB2aWV3IGFuZCBnZW5lcmF0
        ZXMgdGhlCiAgZmluYWwgcmVwcmVzZW50YXRpb24uIGBFbWJlci5SZW5kZXJC
        dWZmZXJgIHdpbGwgZ2VuZXJhdGUgSFRNTCB3aGljaCBjYW4gYmUgcHVzaGVk
        CiAgdG8gdGhlIERPTS4KCiAgIGBgYGphdmFzY3JpcHQKICAgdmFyIGJ1ZmZl
        ciA9IEVtYmVyLlJlbmRlckJ1ZmZlcignZGl2Jyk7CiAgYGBgCgogIEBjbGFz
        cyBSZW5kZXJCdWZmZXIKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGNvbnN0cnVj
        dG9yCiAgQHBhcmFtIHtTdHJpbmd9IHRhZ05hbWUgdGFnIG5hbWUgKHN1Y2gg
        YXMgJ2Rpdicgb3IgJ3AnKSB1c2VkIGZvciB0aGUgYnVmZmVyCiovCkVtYmVy
        LlJlbmRlckJ1ZmZlciA9IGZ1bmN0aW9uKHRhZ05hbWUpIHsKICByZXR1cm4g
        bmV3IEVtYmVyLl9SZW5kZXJCdWZmZXIodGFnTmFtZSk7Cn07CgpFbWJlci5f
        UmVuZGVyQnVmZmVyID0gZnVuY3Rpb24odGFnTmFtZSkgewogIHRoaXMudGFn
        TmFtZXMgPSBbdGFnTmFtZSB8fCBudWxsXTsKICB0aGlzLmJ1ZmZlciA9ICIi
        Owp9OwoKRW1iZXIuX1JlbmRlckJ1ZmZlci5wcm90b3R5cGUgPQovKiogQHNj
        b3BlIEVtYmVyLlJlbmRlckJ1ZmZlci5wcm90b3R5cGUgKi8gewoKICAvLyBU
        aGUgcm9vdCB2aWV3J3MgZWxlbWVudAogIF9lbGVtZW50OiBudWxsLAoKICBf
        aGFzRWxlbWVudDogdHJ1ZSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIEFu
        IGludGVybmFsIHNldCB1c2VkIHRvIGRlLWR1cGUgY2xhc3MgbmFtZXMgd2hl
        biBgYWRkQ2xhc3MoKWAgaXMKICAgIHVzZWQuIEFmdGVyIGVhY2ggY2FsbCB0
        byBgYWRkQ2xhc3MoKWAsIHRoZSBgY2xhc3Nlc2AgcHJvcGVydHkKICAgIHdp
        bGwgYmUgdXBkYXRlZC4KCiAgICBAcHJvcGVydHkgZWxlbWVudENsYXNzZXMK
        ICAgIEB0eXBlIEFycmF5CiAgICBAZGVmYXVsdCBbXQogICovCiAgZWxlbWVu
        dENsYXNzZXM6IG51bGwsCgogIC8qKgogICAgQXJyYXkgb2YgY2xhc3MgbmFt
        ZXMgd2hpY2ggd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBjbGFzcyBhdHRyaWJ1
        dGUuCgogICAgWW91IGNhbiB1c2UgYHNldENsYXNzZXMoKWAgdG8gc2V0IHRo
        aXMgcHJvcGVydHkgZGlyZWN0bHkuIElmIHlvdQogICAgdXNlIGBhZGRDbGFz
        cygpYCwgaXQgd2lsbCBiZSBtYWludGFpbmVkIGZvciB5b3UuCgogICAgQHBy
        b3BlcnR5IGNsYXNzZXMKICAgIEB0eXBlIEFycmF5CiAgICBAZGVmYXVsdCBb
        XQogICovCiAgY2xhc3NlczogbnVsbCwKCiAgLyoqCiAgICBUaGUgaWQgaW4g
        b2YgdGhlIGVsZW1lbnQsIHRvIGJlIGFwcGxpZWQgaW4gdGhlIGlkIGF0dHJp
        YnV0ZS4KCiAgICBZb3Ugc2hvdWxkIG5vdCBzZXQgdGhpcyBwcm9wZXJ0eSB5
        b3Vyc2VsZiwgcmF0aGVyLCB5b3Ugc2hvdWxkIHVzZQogICAgdGhlIGBpZCgp
        YCBtZXRob2Qgb2YgYEVtYmVyLlJlbmRlckJ1ZmZlcmAuCgogICAgQHByb3Bl
        cnR5IGVsZW1lbnRJZAogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBu
        dWxsCiAgKi8KICBlbGVtZW50SWQ6IG51bGwsCgogIC8qKgogICAgQSBoYXNo
        IGtleWVkIG9uIHRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgYW5kIHdob3Nl
        IHZhbHVlIHdpbGwgYmUKICAgIGFwcGxpZWQgdG8gdGhhdCBhdHRyaWJ1dGUu
        IEZvciBleGFtcGxlLCBpZiB5b3Ugd2FudGVkIHRvIGFwcGx5IGEKICAgIGBk
        YXRhLXZpZXc9IkZvby5iYXIiYCBwcm9wZXJ0eSB0byBhbiBlbGVtZW50LCB5
        b3Ugd291bGQgc2V0IHRoZQogICAgZWxlbWVudEF0dHJpYnV0ZXMgaGFzaCB0
        byBgeydkYXRhLXZpZXcnOidGb28uYmFyJ31gLgoKICAgIFlvdSBzaG91bGQg
        bm90IG1haW50YWluIHRoaXMgaGFzaCB5b3Vyc2VsZiwgcmF0aGVyLCB5b3Ug
        c2hvdWxkIHVzZQogICAgdGhlIGBhdHRyKClgIG1ldGhvZCBvZiBgRW1iZXIu
        UmVuZGVyQnVmZmVyYC4KCiAgICBAcHJvcGVydHkgZWxlbWVudEF0dHJpYnV0
        ZXMKICAgIEB0eXBlIEhhc2gKICAgIEBkZWZhdWx0IHt9CiAgKi8KICBlbGVt
        ZW50QXR0cmlidXRlczogbnVsbCwKCiAgLyoqCiAgICBBIGhhc2gga2V5ZWQg
        b24gdGhlIG5hbWUgb2YgdGhlIHByb3BlcnRpZXMgYW5kIHdob3NlIHZhbHVl
        IHdpbGwgYmUKICAgIGFwcGxpZWQgdG8gdGhhdCBwcm9wZXJ0eS4gRm9yIGV4
        YW1wbGUsIGlmIHlvdSB3YW50ZWQgdG8gYXBwbHkgYQogICAgYGNoZWNrZWQ9
        dHJ1ZWAgcHJvcGVydHkgdG8gYW4gZWxlbWVudCwgeW91IHdvdWxkIHNldCB0
        aGUKICAgIGVsZW1lbnRQcm9wZXJ0aWVzIGhhc2ggdG8gYHsnY2hlY2tlZCc6
        dHJ1ZX1gLgoKICAgIFlvdSBzaG91bGQgbm90IG1haW50YWluIHRoaXMgaGFz
        aCB5b3Vyc2VsZiwgcmF0aGVyLCB5b3Ugc2hvdWxkIHVzZQogICAgdGhlIGBw
        cm9wKClgIG1ldGhvZCBvZiBgRW1iZXIuUmVuZGVyQnVmZmVyYC4KCiAgICBA
        cHJvcGVydHkgZWxlbWVudFByb3BlcnRpZXMKICAgIEB0eXBlIEhhc2gKICAg
        IEBkZWZhdWx0IHt9CiAgKi8KICBlbGVtZW50UHJvcGVydGllczogbnVsbCwK
        CiAgLyoqCiAgICBUaGUgdGFnbmFtZSBvZiB0aGUgZWxlbWVudCBhbiBpbnN0
        YW5jZSBvZiBgRW1iZXIuUmVuZGVyQnVmZmVyYCByZXByZXNlbnRzLgoKICAg
        IFVzdWFsbHksIHRoaXMgZ2V0cyBzZXQgYXMgdGhlIGZpcnN0IHBhcmFtZXRl
        ciB0byBgRW1iZXIuUmVuZGVyQnVmZmVyYC4gRm9yCiAgICBleGFtcGxlLCBp
        ZiB5b3Ugd2FudGVkIHRvIGNyZWF0ZSBhIGBwYCB0YWcsIHRoZW4geW91IHdv
        dWxkIGNhbGwKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5SZW5kZXJC
        dWZmZXIoJ3AnKQogICAgYGBgCgogICAgQHByb3BlcnR5IGVsZW1lbnRUYWcK
        ICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgZWxl
        bWVudFRhZzogbnVsbCwKCiAgLyoqCiAgICBBIGhhc2gga2V5ZWQgb24gdGhl
        IG5hbWUgb2YgdGhlIHN0eWxlIGF0dHJpYnV0ZSBhbmQgd2hvc2UgdmFsdWUg
        d2lsbAogICAgYmUgYXBwbGllZCB0byB0aGF0IGF0dHJpYnV0ZS4gRm9yIGV4
        YW1wbGUsIGlmIHlvdSB3YW50ZWQgdG8gYXBwbHkgYQogICAgYGJhY2tncm91
        bmQtY29sb3I6YmxhY2s7YCBzdHlsZSB0byBhbiBlbGVtZW50LCB5b3Ugd291
        bGQgc2V0IHRoZQogICAgZWxlbWVudFN0eWxlIGhhc2ggdG8gYHsnYmFja2dy
        b3VuZC1jb2xvcic6J2JsYWNrJ31gLgoKICAgIFlvdSBzaG91bGQgbm90IG1h
        aW50YWluIHRoaXMgaGFzaCB5b3Vyc2VsZiwgcmF0aGVyLCB5b3Ugc2hvdWxk
        IHVzZQogICAgdGhlIGBzdHlsZSgpYCBtZXRob2Qgb2YgYEVtYmVyLlJlbmRl
        ckJ1ZmZlcmAuCgogICAgQHByb3BlcnR5IGVsZW1lbnRTdHlsZQogICAgQHR5
        cGUgSGFzaAogICAgQGRlZmF1bHQge30KICAqLwogIGVsZW1lbnRTdHlsZTog
        bnVsbCwKCiAgLyoqCiAgICBOZXN0ZWQgYFJlbmRlckJ1ZmZlcnNgIHdpbGwg
        c2V0IHRoaXMgdG8gdGhlaXIgcGFyZW50IGBSZW5kZXJCdWZmZXJgCiAgICBp
        bnN0YW5jZS4KCiAgICBAcHJvcGVydHkgcGFyZW50QnVmZmVyCiAgICBAdHlw
        ZSBFbWJlci5fUmVuZGVyQnVmZmVyCiAgKi8KICBwYXJlbnRCdWZmZXI6IG51
        bGwsCgogIC8qKgogICAgQWRkcyBhIHN0cmluZyBvZiBIVE1MIHRvIHRoZSBg
        UmVuZGVyQnVmZmVyYC4KCiAgICBAbWV0aG9kIHB1c2gKICAgIEBwYXJhbSB7
        U3RyaW5nfSBzdHJpbmcgSFRNTCB0byBwdXNoIGludG8gdGhlIGJ1ZmZlcgog
        ICAgQGNoYWluYWJsZQogICovCiAgcHVzaDogZnVuY3Rpb24oc3RyaW5nKSB7
        CiAgICB0aGlzLmJ1ZmZlciArPSBzdHJpbmc7CiAgICByZXR1cm4gdGhpczsK
        ICB9LAoKICAvKioKICAgIEFkZHMgYSBjbGFzcyB0byB0aGUgYnVmZmVyLCB3
        aGljaCB3aWxsIGJlIHJlbmRlcmVkIHRvIHRoZSBjbGFzcyBhdHRyaWJ1dGUu
        CgogICAgQG1ldGhvZCBhZGRDbGFzcwogICAgQHBhcmFtIHtTdHJpbmd9IGNs
        YXNzTmFtZSBDbGFzcyBuYW1lIHRvIGFkZCB0byB0aGUgYnVmZmVyCiAgICBA
        Y2hhaW5hYmxlCiAgKi8KICBhZGRDbGFzczogZnVuY3Rpb24oY2xhc3NOYW1l
        KSB7CiAgICAvLyBsYXppbHkgY3JlYXRlIGVsZW1lbnRDbGFzc2VzCiAgICB0
        aGlzLmVsZW1lbnRDbGFzc2VzID0gKHRoaXMuZWxlbWVudENsYXNzZXMgfHwg
        bmV3IENsYXNzU2V0KCkpOwogICAgdGhpcy5lbGVtZW50Q2xhc3Nlcy5hZGQo
        Y2xhc3NOYW1lKTsKICAgIHRoaXMuY2xhc3NlcyA9IHRoaXMuZWxlbWVudENs
        YXNzZXMubGlzdDsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICBzZXRDbGFz
        c2VzOiBmdW5jdGlvbihjbGFzc05hbWVzKSB7CiAgICB0aGlzLmNsYXNzZXMg
        PSBjbGFzc05hbWVzOwogIH0sCgogIC8qKgogICAgU2V0cyB0aGUgZWxlbWVu
        dElEIHRvIGJlIHVzZWQgZm9yIHRoZSBlbGVtZW50LgoKICAgIEBtZXRob2Qg
        aWQKICAgIEBwYXJhbSB7U3RyaW5nfSBpZAogICAgQGNoYWluYWJsZQogICov
        CiAgaWQ6IGZ1bmN0aW9uKGlkKSB7CiAgICB0aGlzLmVsZW1lbnRJZCA9IGlk
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLy8gZHVjayB0eXBlIGF0dHJp
        YnV0ZSBmdW5jdGlvbmFsaXR5IGxpa2UgalF1ZXJ5IHNvIGEgcmVuZGVyIGJ1
        ZmZlcgogIC8vIGNhbiBiZSB1c2VkIGxpa2UgYSBqUXVlcnkgb2JqZWN0IGlu
        IGF0dHJpYnV0ZSBiaW5kaW5nIHNjZW5hcmlvcy4KCiAgLyoqCiAgICBBZGRz
        IGFuIGF0dHJpYnV0ZSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIHRvIHRoZSBl
        bGVtZW50LgoKICAgIEBtZXRob2QgYXR0cgogICAgQHBhcmFtIHtTdHJpbmd9
        IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgQHBhcmFtIHtT
        dHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBhZGQgdG8gdGhlIGF0dHJpYnV0
        ZQogICAgQGNoYWluYWJsZQogICAgQHJldHVybiB7RW1iZXIuUmVuZGVyQnVm
        ZmVyfFN0cmluZ30gdGhpcyBvciB0aGUgY3VycmVudCBhdHRyaWJ1dGUgdmFs
        dWUKICAqLwogIGF0dHI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICB2
        YXIgYXR0cmlidXRlcyA9IHRoaXMuZWxlbWVudEF0dHJpYnV0ZXMgPSAodGhp
        cy5lbGVtZW50QXR0cmlidXRlcyB8fCB7fSk7CgogICAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIGF0dHJpYnV0ZXNbbmFt
        ZV07CiAgICB9IGVsc2UgewogICAgICBhdHRyaWJ1dGVzW25hbWVdID0gdmFs
        dWU7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBS
        ZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gdGhlIGxpc3Qgb2YgYXR0cmlidXRl
        cyB0byByZW5kZXIuCgogICAgQG1ldGhvZCByZW1vdmVBdHRyCiAgICBAcGFy
        YW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlCiAg
        ICBAY2hhaW5hYmxlCiAgKi8KICByZW1vdmVBdHRyOiBmdW5jdGlvbihuYW1l
        KSB7CiAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuZWxlbWVudEF0dHJpYnV0
        ZXM7CiAgICBpZiAoYXR0cmlidXRlcykgeyBkZWxldGUgYXR0cmlidXRlc1tu
        YW1lXTsgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQWRk
        cyBhbiBwcm9wZXJ0eSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIHRvIHRoZSBl
        bGVtZW50LgoKICAgIEBtZXRob2QgcHJvcAogICAgQHBhcmFtIHtTdHJpbmd9
        IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5CiAgICBAcGFyYW0ge1N0
        cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIGFkZCB0byB0aGUgcHJvcGVydHkK
        ICAgIEBjaGFpbmFibGUKICAgIEByZXR1cm4ge0VtYmVyLlJlbmRlckJ1ZmZl
        cnxTdHJpbmd9IHRoaXMgb3IgdGhlIGN1cnJlbnQgcHJvcGVydHkgdmFsdWUK
        ICAqLwogIHByb3A6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIg
        cHJvcGVydGllcyA9IHRoaXMuZWxlbWVudFByb3BlcnRpZXMgPSAodGhpcy5l
        bGVtZW50UHJvcGVydGllcyB8fCB7fSk7CgogICAgaWYgKGFyZ3VtZW50cy5s
        ZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIHByb3BlcnRpZXNbbmFtZV07
        CiAgICB9IGVsc2UgewogICAgICBwcm9wZXJ0aWVzW25hbWVdID0gdmFsdWU7
        CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZW1v
        dmUgYW4gcHJvcGVydHkgZnJvbSB0aGUgbGlzdCBvZiBwcm9wZXJ0aWVzIHRv
        IHJlbmRlci4KCiAgICBAbWV0aG9kIHJlbW92ZVByb3AKICAgIEBwYXJhbSB7
        U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eQogICAgQGNo
        YWluYWJsZQogICovCiAgcmVtb3ZlUHJvcDogZnVuY3Rpb24obmFtZSkgewog
        ICAgdmFyIHByb3BlcnRpZXMgPSB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzOwog
        ICAgaWYgKHByb3BlcnRpZXMpIHsgZGVsZXRlIHByb3BlcnRpZXNbbmFtZV07
        IH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIEFkZHMgYSBz
        dHlsZSB0byB0aGUgc3R5bGUgYXR0cmlidXRlIHdoaWNoIHdpbGwgYmUgcmVu
        ZGVyZWQgdG8gdGhlIGVsZW1lbnQuCgogICAgQG1ldGhvZCBzdHlsZQogICAg
        QHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgc3R5bGUKICAgIEBw
        YXJhbSB7U3RyaW5nfSB2YWx1ZQogICAgQGNoYWluYWJsZQogICovCiAgc3R5
        bGU6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICB0aGlzLmVsZW1lbnRT
        dHlsZSA9ICh0aGlzLmVsZW1lbnRTdHlsZSB8fCB7fSk7CgogICAgdGhpcy5l
        bGVtZW50U3R5bGVbbmFtZV0gPSB2YWx1ZTsKICAgIHJldHVybiB0aGlzOwog
        IH0sCgogIGJlZ2luOiBmdW5jdGlvbih0YWdOYW1lKSB7CiAgICB0aGlzLnRh
        Z05hbWVzLnB1c2godGFnTmFtZSB8fCBudWxsKTsKICAgIHJldHVybiB0aGlz
        OwogIH0sCgogIHB1c2hPcGVuaW5nVGFnOiBmdW5jdGlvbigpIHsKICAgIHZh
        ciB0YWdOYW1lID0gdGhpcy5jdXJyZW50VGFnTmFtZSgpOwogICAgaWYgKCF0
        YWdOYW1lKSB7IHJldHVybjsgfQoKICAgIGlmICh0aGlzLl9oYXNFbGVtZW50
        ICYmICF0aGlzLl9lbGVtZW50ICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0g
        MCkgewogICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5nZW5lcmF0ZUVsZW1l
        bnQoKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBidWZmZXIgPSB0
        aGlzLmJ1ZmZlciwKICAgICAgICBpZCA9IHRoaXMuZWxlbWVudElkLAogICAg
        ICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXMsCiAgICAgICAgYXR0cnMgPSB0
        aGlzLmVsZW1lbnRBdHRyaWJ1dGVzLAogICAgICAgIHByb3BzID0gdGhpcy5l
        bGVtZW50UHJvcGVydGllcywKICAgICAgICBzdHlsZSA9IHRoaXMuZWxlbWVu
        dFN0eWxlLAogICAgICAgIGF0dHIsIHByb3A7CgogICAgYnVmZmVyICs9ICc8
        JyArIHN0cmlwVGFnTmFtZSh0YWdOYW1lKTsKCiAgICBpZiAoaWQpIHsKICAg
        ICAgYnVmZmVyICs9ICcgaWQ9IicgKyBlc2NhcGVBdHRyaWJ1dGUoaWQpICsg
        JyInOwogICAgICB0aGlzLmVsZW1lbnRJZCA9IG51bGw7CiAgICB9CiAgICBp
        ZiAoY2xhc3NlcykgewogICAgICBidWZmZXIgKz0gJyBjbGFzcz0iJyArIGVz
        Y2FwZUF0dHJpYnV0ZShjbGFzc2VzLmpvaW4oJyAnKSkgKyAnIic7CiAgICAg
        IHRoaXMuY2xhc3NlcyA9IG51bGw7CiAgICB9CgogICAgaWYgKHN0eWxlKSB7
        CiAgICAgIGJ1ZmZlciArPSAnIHN0eWxlPSInOwoKICAgICAgZm9yIChwcm9w
        IGluIHN0eWxlKSB7CiAgICAgICAgaWYgKHN0eWxlLmhhc093blByb3BlcnR5
        KHByb3ApKSB7CiAgICAgICAgICBidWZmZXIgKz0gcHJvcCArICc6JyArIGVz
        Y2FwZUF0dHJpYnV0ZShzdHlsZVtwcm9wXSkgKyAnOyc7CiAgICAgICAgfQog
        ICAgICB9CgogICAgICBidWZmZXIgKz0gJyInOwoKICAgICAgdGhpcy5lbGVt
        ZW50U3R5bGUgPSBudWxsOwogICAgfQoKICAgIGlmIChhdHRycykgewogICAg
        ICBmb3IgKGF0dHIgaW4gYXR0cnMpIHsKICAgICAgICBpZiAoYXR0cnMuaGFz
        T3duUHJvcGVydHkoYXR0cikpIHsKICAgICAgICAgIGJ1ZmZlciArPSAnICcg
        KyBhdHRyICsgJz0iJyArIGVzY2FwZUF0dHJpYnV0ZShhdHRyc1thdHRyXSkg
        KyAnIic7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRB
        dHRyaWJ1dGVzID0gbnVsbDsKICAgIH0KCiAgICBpZiAocHJvcHMpIHsKICAg
        ICAgZm9yIChwcm9wIGluIHByb3BzKSB7CiAgICAgICAgaWYgKHByb3BzLmhh
        c093blByb3BlcnR5KHByb3ApKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBw
        cm9wc1twcm9wXTsKICAgICAgICAgIGlmICh2YWx1ZSB8fCB0eXBlb2YodmFs
        dWUpID09PSAnbnVtYmVyJykgewogICAgICAgICAgICBpZiAodmFsdWUgPT09
        IHRydWUpIHsKICAgICAgICAgICAgICBidWZmZXIgKz0gJyAnICsgcHJvcCAr
        ICc9IicgKyBwcm9wICsgJyInOwogICAgICAgICAgICB9IGVsc2UgewogICAg
        ICAgICAgICAgIGJ1ZmZlciArPSAnICcgKyBwcm9wICsgJz0iJyArIGVzY2Fw
        ZUF0dHJpYnV0ZShwcm9wc1twcm9wXSkgKyAnIic7CiAgICAgICAgICAgIH0K
        ICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZWxl
        bWVudFByb3BlcnRpZXMgPSBudWxsOwogICAgfQoKICAgIGJ1ZmZlciArPSAn
        Pic7CiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjsKICB9LAoKICBwdXNoQ2xv
        c2luZ1RhZzogZnVuY3Rpb24oKSB7CiAgICB2YXIgdGFnTmFtZSA9IHRoaXMu
        dGFnTmFtZXMucG9wKCk7CiAgICBpZiAodGFnTmFtZSkgeyB0aGlzLmJ1ZmZl
        ciArPSAnPC8nICsgc3RyaXBUYWdOYW1lKHRhZ05hbWUpICsgJz4nOyB9CiAg
        fSwKCiAgY3VycmVudFRhZ05hbWU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJu
        IHRoaXMudGFnTmFtZXNbdGhpcy50YWdOYW1lcy5sZW5ndGgtMV07CiAgfSwK
        CiAgZ2VuZXJhdGVFbGVtZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciB0YWdO
        YW1lID0gdGhpcy50YWdOYW1lcy5wb3AoKSwgLy8gcG9wIHNpbmNlIHdlIGRv
        bid0IG5lZWQgdG8gY2xvc2UKICAgICAgICBpZCA9IHRoaXMuZWxlbWVudElk
        LAogICAgICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXMsCiAgICAgICAgYXR0
        cnMgPSB0aGlzLmVsZW1lbnRBdHRyaWJ1dGVzLAogICAgICAgIHByb3BzID0g
        dGhpcy5lbGVtZW50UHJvcGVydGllcywKICAgICAgICBzdHlsZSA9IHRoaXMu
        ZWxlbWVudFN0eWxlLAogICAgICAgIHN0eWxlQnVmZmVyID0gJycsIGF0dHIs
        IHByb3AsIHRhZ1N0cmluZzsKCiAgICBpZiAoYXR0cnMgJiYgYXR0cnMubmFt
        ZSAmJiAhY2FuU2V0TmFtZU9uSW5wdXRzKSB7CiAgICAgIC8vIElFIGFsbG93
        cyBwYXNzaW5nIGEgdGFnIHRvIGNyZWF0ZUVsZW1lbnQuIFNlZSBub3RlIG9u
        IGBjYW5TZXROYW1lT25JbnB1dHNgIGFib3ZlIGFzIHdlbGwuCiAgICAgIHRh
        Z1N0cmluZyA9ICc8JytzdHJpcFRhZ05hbWUodGFnTmFtZSkrJyBuYW1lPSIn
        K2VzY2FwZUF0dHJpYnV0ZShhdHRycy5uYW1lKSsnIj4nOwogICAgfSBlbHNl
        IHsKICAgICAgdGFnU3RyaW5nID0gdGFnTmFtZTsKICAgIH0KCiAgICB2YXIg
        ZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnU3RyaW5nKSwK
        ICAgICAgICAkZWxlbWVudCA9IEVtYmVyLiQoZWxlbWVudCk7CgogICAgaWYg
        KGlkKSB7CiAgICAgICRlbGVtZW50LmF0dHIoJ2lkJywgaWQpOwogICAgICB0
        aGlzLmVsZW1lbnRJZCA9IG51bGw7CiAgICB9CiAgICBpZiAoY2xhc3Nlcykg
        ewogICAgICAkZWxlbWVudC5hdHRyKCdjbGFzcycsIGNsYXNzZXMuam9pbign
        ICcpKTsKICAgICAgdGhpcy5jbGFzc2VzID0gbnVsbDsKICAgIH0KCiAgICBp
        ZiAoc3R5bGUpIHsKICAgICAgZm9yIChwcm9wIGluIHN0eWxlKSB7CiAgICAg
        ICAgaWYgKHN0eWxlLmhhc093blByb3BlcnR5KHByb3ApKSB7CiAgICAgICAg
        ICBzdHlsZUJ1ZmZlciArPSAocHJvcCArICc6JyArIHN0eWxlW3Byb3BdICsg
        JzsnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgICRlbGVtZW50LmF0dHIo
        J3N0eWxlJywgc3R5bGVCdWZmZXIpOwoKICAgICAgdGhpcy5lbGVtZW50U3R5
        bGUgPSBudWxsOwogICAgfQoKICAgIGlmIChhdHRycykgewogICAgICBmb3Ig
        KGF0dHIgaW4gYXR0cnMpIHsKICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJv
        cGVydHkoYXR0cikpIHsKICAgICAgICAgICRlbGVtZW50LmF0dHIoYXR0ciwg
        YXR0cnNbYXR0cl0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5l
        bGVtZW50QXR0cmlidXRlcyA9IG51bGw7CiAgICB9CgogICAgaWYgKHByb3Bz
        KSB7CiAgICAgIGZvciAocHJvcCBpbiBwcm9wcykgewogICAgICAgIGlmIChw
        cm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgJGVsZW1l
        bnQucHJvcChwcm9wLCBwcm9wc1twcm9wXSk7CiAgICAgICAgfQogICAgICB9
        CgogICAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzID0gbnVsbDsKICAgIH0K
        CiAgICByZXR1cm4gZWxlbWVudDsKICB9LAoKICAvKioKICAgIEBtZXRob2Qg
        ZWxlbWVudAogICAgQHJldHVybiB7RE9NRWxlbWVudH0gVGhlIGVsZW1lbnQg
        Y29ycmVzcG9uZGluZyB0byB0aGUgZ2VuZXJhdGVkIEhUTUwKICAgICAgb2Yg
        dGhpcyBidWZmZXIKICAqLwogIGVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIGh0bWwgPSB0aGlzLmlubmVyU3RyaW5nKCk7CgogICAgaWYgKGh0bWwp
        IHsKICAgICAgdGhpcy5fZWxlbWVudCA9IEVtYmVyLlZpZXdVdGlscy5zZXRJ
        bm5lckhUTUwodGhpcy5fZWxlbWVudCwgaHRtbCk7CiAgICB9CgogICAgcmV0
        dXJuIHRoaXMuX2VsZW1lbnQ7CiAgfSwKCiAgLyoqCiAgICBHZW5lcmF0ZXMg
        dGhlIEhUTUwgY29udGVudCBmb3IgdGhpcyBidWZmZXIuCgogICAgQG1ldGhv
        ZCBzdHJpbmcKICAgIEByZXR1cm4ge1N0cmluZ30gVGhlIGdlbmVyYXRlZCBI
        VE1MCiAgKi8KICBzdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMu
        X2hhc0VsZW1lbnQgJiYgdGhpcy5fZWxlbWVudCkgewogICAgICAvLyBGaXJl
        Zm94IHZlcnNpb25zIDwgMTEgZG8gbm90IGhhdmUgc3VwcG9ydCBmb3IgZWxl
        bWVudC5vdXRlckhUTUwuCiAgICAgIHZhciB0aGlzRWxlbWVudCA9IHRoaXMu
        ZWxlbWVudCgpLCBvdXRlckhUTUwgPSB0aGlzRWxlbWVudC5vdXRlckhUTUw7
        CiAgICAgIGlmICh0eXBlb2Ygb3V0ZXJIVE1MID09PSAndW5kZWZpbmVkJykg
        ewogICAgICAgIHJldHVybiBFbWJlci4kKCc8ZGl2Lz4nKS5hcHBlbmQodGhp
        c0VsZW1lbnQpLmh0bWwoKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0ZXJI
        VE1MOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuaW5uZXJTdHJp
        bmcoKTsKICAgIH0KICB9LAoKICBpbm5lclN0cmluZzogZnVuY3Rpb24oKSB7
        CiAgICByZXR1cm4gdGhpcy5idWZmZXI7CiAgfQp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXZpZXdzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5z
        ZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQ7CgovKioKICBgRW1iZXIuRXZl
        bnREaXNwYXRjaGVyYCBoYW5kbGVzIGRlbGVnYXRpbmcgYnJvd3NlciBldmVu
        dHMgdG8gdGhlaXIKICBjb3JyZXNwb25kaW5nIGBFbWJlci5WaWV3cy5gIEZv
        ciBleGFtcGxlLCB3aGVuIHlvdSBjbGljayBvbiBhIHZpZXcsCiAgYEVtYmVy
        LkV2ZW50RGlzcGF0Y2hlcmAgZW5zdXJlcyB0aGF0IHRoYXQgdmlldydzIGBt
        b3VzZURvd25gIG1ldGhvZCBnZXRzCiAgY2FsbGVkLgoKICBAY2xhc3MgRXZl
        bnREaXNwYXRjaGVyCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBwcml2YXRlCiAg
        QGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkV2ZW50RGlzcGF0Y2hl
        ciA9IEVtYmVyLk9iamVjdC5leHRlbmQoLyoqIEBzY29wZSBFbWJlci5FdmVu
        dERpc3BhdGNoZXIucHJvdG90eXBlICovewoKICAvKioKICAgIFRoZSBzZXQg
        b2YgZXZlbnRzIG5hbWVzIChhbmQgYXNzb2NpYXRlZCBoYW5kbGVyIGZ1bmN0
        aW9uIG5hbWVzKSB0byBiZSBzZXR1cAogICAgYW5kIGRpc3BhdGNoZWQgYnkg
        dGhlIGBFdmVudERpc3BhdGNoZXJgLiBDdXN0b20gZXZlbnRzIGNhbiBhZGRl
        ZCB0byB0aGlzIGxpc3QgYXQgc2V0dXAKICAgIHRpbWUsIGdlbmVyYWxseSB2
        aWEgdGhlIGBFbWJlci5BcHBsaWNhdGlvbi5jdXN0b21FdmVudHNgIGhhc2gu
        IE9ubHkgb3ZlcnJpZGUgdGhpcwogICAgZGVmYXVsdCBzZXQgdG8gcHJldmVu
        dCB0aGUgRXZlbnREaXNwYXRjaGVyIGZyb20gbGlzdGVuaW5nIG9uIHNvbWUg
        ZXZlbnRzIGFsbCB0b2dldGhlci4KCiAgICBUaGlzIHNldCB3aWxsIGJlIG1v
        ZGlmaWVkIGJ5IGBzZXR1cGAgdG8gYWxzbyBpbmNsdWRlIGFueSBldmVudHMg
        YWRkZWQgYXQgdGhhdCB0aW1lLgoKICAgIEBwcm9wZXJ0eSBldmVudHMKICAg
        IEB0eXBlIE9iamVjdAogICovCiAgZXZlbnRzOiB7CiAgICB0b3VjaHN0YXJ0
        ICA6ICd0b3VjaFN0YXJ0JywKICAgIHRvdWNobW92ZSAgIDogJ3RvdWNoTW92
        ZScsCiAgICB0b3VjaGVuZCAgICA6ICd0b3VjaEVuZCcsCiAgICB0b3VjaGNh
        bmNlbCA6ICd0b3VjaENhbmNlbCcsCiAgICBrZXlkb3duICAgICA6ICdrZXlE
        b3duJywKICAgIGtleXVwICAgICAgIDogJ2tleVVwJywKICAgIGtleXByZXNz
        ICAgIDogJ2tleVByZXNzJywKICAgIG1vdXNlZG93biAgIDogJ21vdXNlRG93
        bicsCiAgICBtb3VzZXVwICAgICA6ICdtb3VzZVVwJywKICAgIGNvbnRleHRt
        ZW51IDogJ2NvbnRleHRNZW51JywKICAgIGNsaWNrICAgICAgIDogJ2NsaWNr
        JywKICAgIGRibGNsaWNrICAgIDogJ2RvdWJsZUNsaWNrJywKICAgIG1vdXNl
        bW92ZSAgIDogJ21vdXNlTW92ZScsCiAgICBmb2N1c2luICAgICA6ICdmb2N1
        c0luJywKICAgIGZvY3Vzb3V0ICAgIDogJ2ZvY3VzT3V0JywKICAgIG1vdXNl
        ZW50ZXIgIDogJ21vdXNlRW50ZXInLAogICAgbW91c2VsZWF2ZSAgOiAnbW91
        c2VMZWF2ZScsCiAgICBzdWJtaXQgICAgICA6ICdzdWJtaXQnLAogICAgaW5w
        dXQgICAgICAgOiAnaW5wdXQnLAogICAgY2hhbmdlICAgICAgOiAnY2hhbmdl
        JywKICAgIGRyYWdzdGFydCAgIDogJ2RyYWdTdGFydCcsCiAgICBkcmFnICAg
        ICAgICA6ICdkcmFnJywKICAgIGRyYWdlbnRlciAgIDogJ2RyYWdFbnRlcics
        CiAgICBkcmFnbGVhdmUgICA6ICdkcmFnTGVhdmUnLAogICAgZHJhZ292ZXIg
        ICAgOiAnZHJhZ092ZXInLAogICAgZHJvcCAgICAgICAgOiAnZHJvcCcsCiAg
        ICBkcmFnZW5kICAgICA6ICdkcmFnRW5kJwogIH0sCgogIC8qKgogICAgQHBy
        aXZhdGUKCiAgICBUaGUgcm9vdCBET00gZWxlbWVudCB0byB3aGljaCBldmVu
        dCBsaXN0ZW5lcnMgc2hvdWxkIGJlIGF0dGFjaGVkLiBFdmVudAogICAgbGlz
        dGVuZXJzIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50IHVubGVz
        cyB0aGlzIGlzIG92ZXJyaWRkZW4uCgogICAgQ2FuIGJlIHNwZWNpZmllZCBh
        cyBhIERPTUVsZW1lbnQgb3IgYSBzZWxlY3RvciBzdHJpbmcuCgogICAgVGhl
        IGRlZmF1bHQgYm9keSBpcyBhIHN0cmluZyBzaW5jZSB0aGlzIG1heSBiZSBl
        dmFsdWF0ZWQgYmVmb3JlIGRvY3VtZW50LmJvZHkKICAgIGV4aXN0cyBpbiB0
        aGUgRE9NLgoKICAgIEBwcm9wZXJ0eSByb290RWxlbWVudAogICAgQHR5cGUg
        RE9NRWxlbWVudAogICAgQGRlZmF1bHQgJ2JvZHknCiAgKi8KICByb290RWxl
        bWVudDogJ2JvZHknLAoKICAvKioKICAgIEBwcml2YXRlCgogICAgU2V0cyB1
        cCBldmVudCBsaXN0ZW5lcnMgZm9yIHN0YW5kYXJkIGJyb3dzZXIgZXZlbnRz
        LgoKICAgIFRoaXMgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGJyb3dzZXIg
        c2VuZHMgYSBgRE9NQ29udGVudFJlYWR5YCBldmVudC4gQnkKICAgIGRlZmF1
        bHQsIGl0IHdpbGwgc2V0IHVwIGFsbCBvZiB0aGUgbGlzdGVuZXJzIG9uIHRo
        ZSBkb2N1bWVudCBib2R5LiBJZiB5b3UKICAgIHdvdWxkIGxpa2UgdG8gcmVn
        aXN0ZXIgdGhlIGxpc3RlbmVycyBvbiBhIGRpZmZlcmVudCBlbGVtZW50LCBz
        ZXQgdGhlIGV2ZW50CiAgICBkaXNwYXRjaGVyJ3MgYHJvb3RgIHByb3BlcnR5
        LgoKICAgIEBtZXRob2Qgc2V0dXAKICAgIEBwYXJhbSBhZGRlZEV2ZW50cyB7
        SGFzaH0KICAqLwogIHNldHVwOiBmdW5jdGlvbihhZGRlZEV2ZW50cywgcm9v
        dEVsZW1lbnQpIHsKICAgIHZhciBldmVudCwgZXZlbnRzID0gZ2V0KHRoaXMs
        ICdldmVudHMnKTsKCiAgICBFbWJlci4kLmV4dGVuZChldmVudHMsIGFkZGVk
        RXZlbnRzIHx8IHt9KTsKCgogICAgaWYgKCFFbWJlci5pc05vbmUocm9vdEVs
        ZW1lbnQpKSB7CiAgICAgIHNldCh0aGlzLCAncm9vdEVsZW1lbnQnLCByb290
        RWxlbWVudCk7CiAgICB9CgogICAgcm9vdEVsZW1lbnQgPSBFbWJlci4kKGdl
        dCh0aGlzLCAncm9vdEVsZW1lbnQnKSk7CgogICAgRW1iZXIuYXNzZXJ0KGZt
        dCgnWW91IGNhbm5vdCB1c2UgdGhlIHNhbWUgcm9vdCBlbGVtZW50ICglQCkg
        bXVsdGlwbGUgdGltZXMgaW4gYW4gRW1iZXIuQXBwbGljYXRpb24nLCBbcm9v
        dEVsZW1lbnQuc2VsZWN0b3IgfHwgcm9vdEVsZW1lbnRbMF0udGFnTmFtZV0p
        LCAhcm9vdEVsZW1lbnQuaXMoJy5lbWJlci1hcHBsaWNhdGlvbicpKTsKICAg
        IEVtYmVyLmFzc2VydCgnWW91IGNhbm5vdCBtYWtlIGEgbmV3IEVtYmVyLkFw
        cGxpY2F0aW9uIHVzaW5nIGEgcm9vdCBlbGVtZW50IHRoYXQgaXMgYSBkZXNj
        ZW5kZW50IG9mIGFuIGV4aXN0aW5nIEVtYmVyLkFwcGxpY2F0aW9uJywgIXJv
        b3RFbGVtZW50LmNsb3Nlc3QoJy5lbWJlci1hcHBsaWNhdGlvbicpLmxlbmd0
        aCk7CiAgICBFbWJlci5hc3NlcnQoJ1lvdSBjYW5ub3QgbWFrZSBhIG5ldyBF
        bWJlci5BcHBsaWNhdGlvbiB1c2luZyBhIHJvb3QgZWxlbWVudCB0aGF0IGlz
        IGFuIGFuY2VzdG9yIG9mIGFuIGV4aXN0aW5nIEVtYmVyLkFwcGxpY2F0aW9u
        JywgIXJvb3RFbGVtZW50LmZpbmQoJy5lbWJlci1hcHBsaWNhdGlvbicpLmxl
        bmd0aCk7CgogICAgcm9vdEVsZW1lbnQuYWRkQ2xhc3MoJ2VtYmVyLWFwcGxp
        Y2F0aW9uJyk7CgogICAgRW1iZXIuYXNzZXJ0KCdVbmFibGUgdG8gYWRkICJl
        bWJlci1hcHBsaWNhdGlvbiIgY2xhc3MgdG8gcm9vdEVsZW1lbnQuIE1ha2Ug
        c3VyZSB5b3Ugc2V0IHJvb3RFbGVtZW50IHRvIHRoZSBib2R5IG9yIGFuIGVs
        ZW1lbnQgaW4gdGhlIGJvZHkuJywgcm9vdEVsZW1lbnQuaXMoJy5lbWJlci1h
        cHBsaWNhdGlvbicpKTsKCiAgICBmb3IgKGV2ZW50IGluIGV2ZW50cykgewog
        ICAgICBpZiAoZXZlbnRzLmhhc093blByb3BlcnR5KGV2ZW50KSkgewogICAg
        ICAgIHRoaXMuc2V0dXBIYW5kbGVyKHJvb3RFbGVtZW50LCBldmVudCwgZXZl
        bnRzW2V2ZW50XSk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAgIEBw
        cml2YXRlCgogICAgUmVnaXN0ZXJzIGFuIGV2ZW50IGxpc3RlbmVyIG9uIHRo
        ZSBkb2N1bWVudC4gSWYgdGhlIGdpdmVuIGV2ZW50IGlzCiAgICB0cmlnZ2Vy
        ZWQsIHRoZSBwcm92aWRlZCBldmVudCBoYW5kbGVyIHdpbGwgYmUgdHJpZ2dl
        cmVkIG9uIHRoZSB0YXJnZXQgdmlldy4KCiAgICBJZiB0aGUgdGFyZ2V0IHZp
        ZXcgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBldmVudCBoYW5kbGVyLCBvciBp
        ZiB0aGUgaGFuZGxlcgogICAgcmV0dXJucyBgZmFsc2VgLCB0aGUgcGFyZW50
        IHZpZXcgd2lsbCBiZSBjYWxsZWQuIFRoZSBldmVudCB3aWxsIGNvbnRpbnVl
        IHRvCiAgICBidWJibGUgdG8gZWFjaCBzdWNjZXNzaXZlIHBhcmVudCB2aWV3
        IHVudGlsIGl0IHJlYWNoZXMgdGhlIHRvcC4KCiAgICBGb3IgZXhhbXBsZSwg
        dG8gaGF2ZSB0aGUgYG1vdXNlRG93bmAgbWV0aG9kIGNhbGxlZCBvbiB0aGUg
        dGFyZ2V0IHZpZXcgd2hlbgogICAgYSBgbW91c2Vkb3duYCBldmVudCBpcyBy
        ZWNlaXZlZCBmcm9tIHRoZSBicm93c2VyLCBkbyB0aGUgZm9sbG93aW5nOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIHNldHVwSGFuZGxlcignbW91c2Vkb3du
        JywgJ21vdXNlRG93bicpOwogICAgYGBgCgogICAgQG1ldGhvZCBzZXR1cEhh
        bmRsZXIKICAgIEBwYXJhbSB7RWxlbWVudH0gcm9vdEVsZW1lbnQKICAgIEBw
        YXJhbSB7U3RyaW5nfSBldmVudCB0aGUgYnJvd3Nlci1vcmlnaW5hdGVkIGV2
        ZW50IHRvIGxpc3RlbiB0bwogICAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFt
        ZSB0aGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIGNhbGwgb24gdGhlIHZpZXcK
        ICAqLwogIHNldHVwSGFuZGxlcjogZnVuY3Rpb24ocm9vdEVsZW1lbnQsIGV2
        ZW50LCBldmVudE5hbWUpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBy
        b290RWxlbWVudC5vbihldmVudCArICcuZW1iZXInLCAnLmVtYmVyLXZpZXcn
        LCBmdW5jdGlvbihldnQsIHRyaWdnZXJpbmdNYW5hZ2VyKSB7CiAgICAgIHJl
        dHVybiBFbWJlci5oYW5kbGVFcnJvcnMoZnVuY3Rpb24oKSB7CiAgICAgICAg
        dmFyIHZpZXcgPSBFbWJlci5WaWV3LnZpZXdzW3RoaXMuaWRdLAogICAgICAg
        ICAgICByZXN1bHQgPSB0cnVlLCBtYW5hZ2VyID0gbnVsbDsKCiAgICAgICAg
        bWFuYWdlciA9IHNlbGYuX2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyKHZpZXcs
        ZXZlbnROYW1lKTsKCiAgICAgICAgaWYgKG1hbmFnZXIgJiYgbWFuYWdlciAh
        PT0gdHJpZ2dlcmluZ01hbmFnZXIpIHsKICAgICAgICAgIHJlc3VsdCA9IHNl
        bGYuX2Rpc3BhdGNoRXZlbnQobWFuYWdlciwgZXZ0LCBldmVudE5hbWUsIHZp
        ZXcpOwogICAgICAgIH0gZWxzZSBpZiAodmlldykgewogICAgICAgICAgcmVz
        dWx0ID0gc2VsZi5fYnViYmxlRXZlbnQodmlldyxldnQsZXZlbnROYW1lKTsK
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlv
        bigpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAg
        fSwgdGhpcyk7CiAgICB9KTsKCiAgICByb290RWxlbWVudC5vbihldmVudCAr
        ICcuZW1iZXInLCAnW2RhdGEtZW1iZXItYWN0aW9uXScsIGZ1bmN0aW9uKGV2
        dCkgewogICAgICByZXR1cm4gRW1iZXIuaGFuZGxlRXJyb3JzKGZ1bmN0aW9u
        KCkgewogICAgICAgIHZhciBhY3Rpb25JZCA9IEVtYmVyLiQoZXZ0LmN1cnJl
        bnRUYXJnZXQpLmF0dHIoJ2RhdGEtZW1iZXItYWN0aW9uJyksCiAgICAgICAg
        ICAgIGFjdGlvbiAgID0gRW1iZXIuSGFuZGxlYmFycy5BY3Rpb25IZWxwZXIu
        cmVnaXN0ZXJlZEFjdGlvbnNbYWN0aW9uSWRdOwoKICAgICAgICAvLyBXZSBo
        YXZlIHRvIGNoZWNrIGZvciBhY3Rpb24gaGVyZSBzaW5jZSBpbiBzb21lIGNh
        c2VzLCBqUXVlcnkgd2lsbCB0cmlnZ2VyCiAgICAgICAgLy8gYW4gZXZlbnQg
        b24gYHJlbW92ZUNoaWxkYCAoaS5lLiBmb2N1c291dCkgYWZ0ZXIgd2UndmUg
        YWxyZWFkeSB0b3JuIGRvd24gdGhlCiAgICAgICAgLy8gYWN0aW9uIGhhbmRs
        ZXJzIGZvciB0aGUgdmlldy4KICAgICAgICBpZiAoYWN0aW9uICYmIGFjdGlv
        bi5ldmVudE5hbWUgPT09IGV2ZW50TmFtZSkgewogICAgICAgICAgcmV0dXJu
        IGFjdGlvbi5oYW5kbGVyKGV2dCk7CiAgICAgICAgfQogICAgICB9LCB0aGlz
        KTsKICAgIH0pOwogIH0sCgogIF9maW5kTmVhcmVzdEV2ZW50TWFuYWdlcjog
        ZnVuY3Rpb24odmlldywgZXZlbnROYW1lKSB7CiAgICB2YXIgbWFuYWdlciA9
        IG51bGw7CgogICAgd2hpbGUgKHZpZXcpIHsKICAgICAgbWFuYWdlciA9IGdl
        dCh2aWV3LCAnZXZlbnRNYW5hZ2VyJyk7CiAgICAgIGlmIChtYW5hZ2VyICYm
        IG1hbmFnZXJbZXZlbnROYW1lXSkgeyBicmVhazsgfQoKICAgICAgdmlldyA9
        IGdldCh2aWV3LCAncGFyZW50VmlldycpOwogICAgfQoKICAgIHJldHVybiBt
        YW5hZ2VyOwogIH0sCgogIF9kaXNwYXRjaEV2ZW50OiBmdW5jdGlvbihvYmpl
        Y3QsIGV2dCwgZXZlbnROYW1lLCB2aWV3KSB7CiAgICB2YXIgcmVzdWx0ID0g
        dHJ1ZTsKCiAgICB2YXIgaGFuZGxlciA9IG9iamVjdFtldmVudE5hbWVdOwog
        ICAgaWYgKEVtYmVyLnR5cGVPZihoYW5kbGVyKSA9PT0gJ2Z1bmN0aW9uJykg
        ewogICAgICByZXN1bHQgPSBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAgICAg
        ICAgcmV0dXJuIGhhbmRsZXIuY2FsbChvYmplY3QsIGV2dCwgdmlldyk7CiAg
        ICAgIH0pOwogICAgICAvLyBEbyBub3QgcHJldmVudERlZmF1bHQgaW4gZXZl
        bnRNYW5hZ2Vycy4KICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAg
        fQogICAgZWxzZSB7CiAgICAgIHJlc3VsdCA9IHRoaXMuX2J1YmJsZUV2ZW50
        KHZpZXcsIGV2dCwgZXZlbnROYW1lKTsKICAgIH0KCiAgICByZXR1cm4gcmVz
        dWx0OwogIH0sCgogIF9idWJibGVFdmVudDogZnVuY3Rpb24odmlldywgZXZ0
        LCBldmVudE5hbWUpIHsKICAgIHJldHVybiBFbWJlci5ydW4oZnVuY3Rpb24o
        KSB7CiAgICAgIHJldHVybiB2aWV3LmhhbmRsZUV2ZW50KGV2ZW50TmFtZSwg
        ZXZ0KTsKICAgIH0pOwogIH0sCgogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0KHRoaXMsICdyb290RWxlbWVudCcp
        OwogICAgRW1iZXIuJChyb290RWxlbWVudCkub2ZmKCcuZW1iZXInLCAnKion
        KS5yZW1vdmVDbGFzcygnZW1iZXItYXBwbGljYXRpb24nKTsKICAgIHJldHVy
        biB0aGlzLl9zdXBlcigpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MK
        Ki8KCi8vIEFkZCBhIG5ldyBuYW1lZCBxdWV1ZSBmb3IgcmVuZGVyaW5nIHZp
        ZXdzIHRoYXQgaGFwcGVucwovLyBhZnRlciBiaW5kaW5ncyBoYXZlIHN5bmNl
        ZCwgYW5kIGEgcXVldWUgZm9yIHNjaGVkdWxpbmcgYWN0aW9ucwovLyB0aGF0
        IHRoYXQgc2hvdWxkIG9jY3VyIGFmdGVyIHZpZXcgcmVuZGVyaW5nLgp2YXIg
        cXVldWVzID0gRW1iZXIucnVuLnF1ZXVlcywKICAgIGluZGV4T2YgPSBFbWJl
        ci5BcnJheVBvbHlmaWxscy5pbmRleE9mOwpxdWV1ZXMuc3BsaWNlKGluZGV4
        T2YuY2FsbChxdWV1ZXMsICdhY3Rpb25zJykrMSwgMCwgJ3JlbmRlcicsICdh
        ZnRlclJlbmRlcicpOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovLyBPcmlnaW5hbCBj
        bGFzcyBkZWNsYXJhdGlvbiBhbmQgZG9jdW1lbnRhdGlvbiBpbiBydW50aW1l
        L2xpYi9jb250cm9sbGVycy9jb250cm9sbGVyLmpzCi8vIE5PVEU6IEl0IG1h
        eSBiZSBwb3NzaWJsZSB3aXRoIFlVSURvYyB0byBjb21iaW5lIGRvY3MgaW4g
        dHdvIGxvY2F0aW9ucwoKLyoqCkFkZGl0aW9uYWwgbWV0aG9kcyBmb3IgdGhl
        IENvbnRyb2xsZXJNaXhpbgoKQGNsYXNzIENvbnRyb2xsZXJNaXhpbgpAbmFt
        ZXNwYWNlIEVtYmVyCiovCkVtYmVyLkNvbnRyb2xsZXJNaXhpbi5yZW9wZW4o
        ewogIHRhcmdldDogbnVsbCwKICBuYW1lc3BhY2U6IG51bGwsCiAgdmlldzog
        bnVsbCwKICBjb250YWluZXI6IG51bGwsCiAgX2NoaWxkQ29udGFpbmVyczog
        bnVsbCwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigp
        OwogICAgc2V0KHRoaXMsICdfY2hpbGRDb250YWluZXJzJywge30pOwogIH0s
        CgogIF9tb2RlbERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ21vZGVsJywg
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGFpbmVycyA9IGdldCh0aGlzLCAn
        X2NoaWxkQ29udGFpbmVycycpOwoKICAgIGZvciAodmFyIHByb3AgaW4gY29u
        dGFpbmVycykgewogICAgICBpZiAoIWNvbnRhaW5lcnMuaGFzT3duUHJvcGVy
        dHkocHJvcCkpIHsgY29udGludWU7IH0KICAgICAgY29udGFpbmVyc1twcm9w
        XS5kZXN0cm95KCk7CiAgICB9CgogICAgc2V0KHRoaXMsICdfY2hpbGRDb250
        YWluZXJzJywge30pOwogIH0pCn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgc3RhdGVzID0ge307Cgov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBndWlk
        Rm9yID0gRW1iZXIuZ3VpZEZvcjsKdmFyIGFfZm9yRWFjaCA9IEVtYmVyLkVu
        dW1lcmFibGVVdGlscy5mb3JFYWNoOwp2YXIgYV9hZGRPYmplY3QgPSBFbWJl
        ci5FbnVtZXJhYmxlVXRpbHMuYWRkT2JqZWN0Owp2YXIgbWV0YSA9IEVtYmVy
        Lm1ldGE7Cgp2YXIgY2hpbGRWaWV3c1Byb3BlcnR5ID0gRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKSB7CiAgdmFyIGNoaWxkVmlld3MgPSB0aGlzLl9jaGls
        ZFZpZXdzLCByZXQgPSBFbWJlci5BKCksIHZpZXcgPSB0aGlzOwoKICBhX2Zv
        ckVhY2goY2hpbGRWaWV3cywgZnVuY3Rpb24odmlldykgewogICAgdmFyIGN1
        cnJlbnRDaGlsZFZpZXdzOwogICAgaWYgKHZpZXcuaXNWaXJ0dWFsKSB7CiAg
        ICAgIGlmIChjdXJyZW50Q2hpbGRWaWV3cyA9IGdldCh2aWV3LCAnY2hpbGRW
        aWV3cycpKSB7CiAgICAgICAgcmV0LnB1c2hPYmplY3RzKGN1cnJlbnRDaGls
        ZFZpZXdzKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0LnB1c2go
        dmlldyk7CiAgICB9CiAgfSk7CgogIHJldC5yZXBsYWNlID0gZnVuY3Rpb24g
        KGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZFZpZXdzKSB7CiAgICBpZiAodmll
        dyBpbnN0YW5jZW9mIEVtYmVyLkNvbnRhaW5lclZpZXcpIHsKICAgICAgRW1i
        ZXIuZGVwcmVjYXRlKCJNYW5pcHVsYXRpbmcgYW4gRW1iZXIuQ29udGFpbmVy
        VmlldyB0aHJvdWdoIGl0cyBjaGlsZFZpZXdzIHByb3BlcnR5IGlzIGRlcHJl
        Y2F0ZWQuIFBsZWFzZSB1c2UgdGhlIENvbnRhaW5lclZpZXcgaW5zdGFuY2Ug
        aXRzZWxmIGFzIGFuIEVtYmVyLk11dGFibGVBcnJheS4iKTsKICAgICAgcmV0
        dXJuIHZpZXcucmVwbGFjZShpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRWaWV3
        cyk7CiAgICB9CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImNoaWxkVmll
        d3MgaXMgaW1tdXRhYmxlIik7CiAgfTsKCiAgcmV0dXJuIHJldDsKfSk7CgpF
        bWJlci53YXJuKCJUaGUgVklFV19QUkVTRVJWRVNfQ09OVEVYVCBmbGFnIGhh
        cyBiZWVuIHJlbW92ZWQgYW5kIHRoZSBmdW5jdGlvbmFsaXR5IGNhbiBubyBs
        b25nZXIgYmUgZGlzYWJsZWQuIiwgRW1iZXIuRU5WLlZJRVdfUFJFU0VSVkVT
        X0NPTlRFWFQgIT09IGZhbHNlKTsKCi8qKgogIEdsb2JhbCBoYXNoIG9mIHNo
        YXJlZCB0ZW1wbGF0ZXMuIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHBv
        cHVsYXRlZAogIGJ5IHRoZSBidWlsZCB0b29scyBzbyB0aGF0IHlvdSBjYW4g
        c3RvcmUgeW91ciBIYW5kbGViYXJzIHRlbXBsYXRlcyBpbgogIHNlcGFyYXRl
        IGZpbGVzIHRoYXQgZ2V0IGxvYWRlZCBpbnRvIEphdmFTY3JpcHQgYXQgYnVp
        bGR0aW1lLgoKICBAcHJvcGVydHkgVEVNUExBVEVTCiAgQGZvciBFbWJlcgog
        IEB0eXBlIEhhc2gKKi8KRW1iZXIuVEVNUExBVEVTID0ge307CgovKioKICBg
        RW1iZXIuQ29yZVZpZXdgIGlzIGFuIGFic3RyYWN0IGNsYXNzIHRoYXQgZXhp
        c3RzIHRvIGdpdmUgdmlldy1saWtlIGJlaGF2aW9yCiAgdG8gYm90aCBFbWJl
        cidzIG1haW4gdmlldyBjbGFzcyBgRW1iZXIuVmlld2AgYW5kIG90aGVyIGNs
        YXNzZXMgbGlrZQogIGBFbWJlci5fU2ltcGxlTWV0YW1vcnBoVmlld2AgdGhh
        dCBkb24ndCBuZWVkIHRoZSBmdWxseSBmdW5jdGlvbmFsdGl5IG9mCiAgYEVt
        YmVyLlZpZXdgLgoKICBVbmxlc3MgeW91IGhhdmUgc3BlY2lmaWMgbmVlZHMg
        Zm9yIGBDb3JlVmlld2AsIHlvdSB3aWxsIHVzZSBgRW1iZXIuVmlld2AKICBp
        biB5b3VyIGFwcGxpY2F0aW9ucy4KCiAgQGNsYXNzIENvcmVWaWV3CiAgQG5h
        bWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAogIEB1c2Vz
        IEVtYmVyLkV2ZW50ZWQKKi8KCkVtYmVyLkNvcmVWaWV3ID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCBFbWJlci5BY3Rpb25IYW5kbGVy
        LCB7CiAgaXNWaWV3OiB0cnVlLAoKICBzdGF0ZXM6IHN0YXRlcywKCiAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy50
        cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicpOwogIH0sCgogIC8qKgogICAgSWYg
        dGhlIHZpZXcgaXMgY3VycmVudGx5IGluc2VydGVkIGludG8gdGhlIERPTSBv
        ZiBhIHBhcmVudCB2aWV3LCB0aGlzCiAgICBwcm9wZXJ0eSB3aWxsIHBvaW50
        IHRvIHRoZSBwYXJlbnQgb2YgdGhlIHZpZXcuCgogICAgQHByb3BlcnR5IHBh
        cmVudFZpZXcKICAgIEB0eXBlIEVtYmVyLlZpZXcKICAgIEBkZWZhdWx0IG51
        bGwKICAqLwogIHBhcmVudFZpZXc6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCkgewogICAgdmFyIHBhcmVudCA9IHRoaXMuX3BhcmVudFZpZXc7CgogICAg
        aWYgKHBhcmVudCAmJiBwYXJlbnQuaXNWaXJ0dWFsKSB7CiAgICAgIHJldHVy
        biBnZXQocGFyZW50LCAncGFyZW50VmlldycpOwogICAgfSBlbHNlIHsKICAg
        ICAgcmV0dXJuIHBhcmVudDsKICAgIH0KICB9KS5wcm9wZXJ0eSgnX3BhcmVu
        dFZpZXcnKSwKCiAgc3RhdGU6IG51bGwsCgogIF9wYXJlbnRWaWV3OiBudWxs
        LAoKICAvLyByZXR1cm4gdGhlIGN1cnJlbnQgdmlldywgbm90IGluY2x1ZGlu
        ZyB2aXJ0dWFsIHZpZXdzCiAgY29uY3JldGVWaWV3OiBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5pc1ZpcnR1YWwpIHsgcmV0
        dXJuIHRoaXM7IH0KICAgIGVsc2UgeyByZXR1cm4gZ2V0KHRoaXMsICdwYXJl
        bnRWaWV3Jyk7IH0KICB9KS5wcm9wZXJ0eSgncGFyZW50VmlldycpLAoKICBp
        bnN0cnVtZW50TmFtZTogJ2NvcmVfdmlldycsCgogIGluc3RydW1lbnREZXRh
        aWxzOiBmdW5jdGlvbihoYXNoKSB7CiAgICBoYXNoLm9iamVjdCA9IHRoaXMu
        dG9TdHJpbmcoKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgSW52
        b2tlZCBieSB0aGUgdmlldyBzeXN0ZW0gd2hlbiB0aGlzIHZpZXcgbmVlZHMg
        dG8gcHJvZHVjZSBhbiBIVE1MCiAgICByZXByZXNlbnRhdGlvbi4gVGhpcyBt
        ZXRob2Qgd2lsbCBjcmVhdGUgYSBuZXcgcmVuZGVyIGJ1ZmZlciwgaWYgbmVl
        ZGVkLAogICAgdGhlbiBhcHBseSBhbnkgZGVmYXVsdCBhdHRyaWJ1dGVzLCBz
        dWNoIGFzIGNsYXNzIG5hbWVzIGFuZCB2aXNpYmlsaXR5LgogICAgRmluYWxs
        eSwgdGhlIGByZW5kZXIoKWAgbWV0aG9kIGlzIGludm9rZWQsIHdoaWNoIGlz
        IHJlc3BvbnNpYmxlIGZvcgogICAgZG9pbmcgdGhlIGJ1bGsgb2YgdGhlIHJl
        bmRlcmluZy4KCiAgICBZb3Ugc2hvdWxkIG5vdCBuZWVkIHRvIG92ZXJyaWRl
        IHRoaXMgbWV0aG9kOyBpbnN0ZWFkLCBpbXBsZW1lbnQgdGhlCiAgICBgdGVt
        cGxhdGVgIHByb3BlcnR5LCBvciBpZiB5b3UgbmVlZCBtb3JlIGNvbnRyb2ws
        IG92ZXJyaWRlIHRoZSBgcmVuZGVyYAogICAgbWV0aG9kLgoKICAgIEBtZXRo
        b2QgcmVuZGVyVG9CdWZmZXIKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVm
        ZmVyfSBidWZmZXIgdGhlIHJlbmRlciBidWZmZXIuIElmIG5vIGJ1ZmZlciBp
        cwogICAgICBwYXNzZWQsIGEgZGVmYXVsdCBidWZmZXIsIHVzaW5nIHRoZSBj
        dXJyZW50IHZpZXcncyBgdGFnTmFtZWAsIHdpbGwKICAgICAgYmUgdXNlZC4K
        ICAqLwogIHJlbmRlclRvQnVmZmVyOiBmdW5jdGlvbihwYXJlbnRCdWZmZXIs
        IGJ1ZmZlck9wZXJhdGlvbikgewogICAgdmFyIG5hbWUgPSAncmVuZGVyLicg
        KyB0aGlzLmluc3RydW1lbnROYW1lLAogICAgICAgIGRldGFpbHMgPSB7fTsK
        CiAgICB0aGlzLmluc3RydW1lbnREZXRhaWxzKGRldGFpbHMpOwoKICAgIHJl
        dHVybiBFbWJlci5pbnN0cnVtZW50KG5hbWUsIGRldGFpbHMsIGZ1bmN0aW9u
        KCkgewogICAgICByZXR1cm4gdGhpcy5fcmVuZGVyVG9CdWZmZXIocGFyZW50
        QnVmZmVyLCBidWZmZXJPcGVyYXRpb24pOwogICAgfSwgdGhpcyk7CiAgfSwK
        CiAgX3JlbmRlclRvQnVmZmVyOiBmdW5jdGlvbihwYXJlbnRCdWZmZXIsIGJ1
        ZmZlck9wZXJhdGlvbikgewogICAgLy8gSWYgdGhpcyBpcyB0aGUgdG9wLW1v
        c3Qgdmlldywgc3RhcnQgYSBuZXcgYnVmZmVyLiBPdGhlcndpc2UsCiAgICAv
        LyBjcmVhdGUgYSBuZXcgYnVmZmVyIHJlbGF0aXZlIHRvIHRoZSBvcmlnaW5h
        bCB1c2luZyB0aGUKICAgIC8vIHByb3ZpZGVkIGJ1ZmZlciBvcGVyYXRpb24g
        KGZvciBleGFtcGxlLCBgaW5zZXJ0QWZ0ZXJgIHdpbGwKICAgIC8vIGluc2Vy
        dCBhIG5ldyBidWZmZXIgYWZ0ZXIgdGhlICJwYXJlbnQgYnVmZmVyIikuCiAg
        ICB2YXIgdGFnTmFtZSA9IHRoaXMudGFnTmFtZTsKCiAgICBpZiAodGFnTmFt
        ZSA9PT0gbnVsbCB8fCB0YWdOYW1lID09PSB1bmRlZmluZWQpIHsKICAgICAg
        dGFnTmFtZSA9ICdkaXYnOwogICAgfQoKICAgIHZhciBidWZmZXIgPSB0aGlz
        LmJ1ZmZlciA9IHBhcmVudEJ1ZmZlciAmJiBwYXJlbnRCdWZmZXIuYmVnaW4o
        dGFnTmFtZSkgfHwgRW1iZXIuUmVuZGVyQnVmZmVyKHRhZ05hbWUpOwogICAg
        dGhpcy50cmFuc2l0aW9uVG8oJ2luQnVmZmVyJywgZmFsc2UpOwoKICAgIHRo
        aXMuYmVmb3JlUmVuZGVyKGJ1ZmZlcik7CiAgICB0aGlzLnJlbmRlcihidWZm
        ZXIpOwogICAgdGhpcy5hZnRlclJlbmRlcihidWZmZXIpOwoKICAgIHJldHVy
        biBidWZmZXI7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIE92ZXJy
        aWRlIHRoZSBkZWZhdWx0IGV2ZW50IGZpcmluZyBmcm9tIGBFbWJlci5FdmVu
        dGVkYCB0bwogICAgYWxzbyBjYWxsIG1ldGhvZHMgd2l0aCB0aGUgZ2l2ZW4g
        bmFtZS4KCiAgICBAbWV0aG9kIHRyaWdnZXIKICAgIEBwYXJhbSBuYW1lIHtT
        dHJpbmd9CiAgKi8KICB0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7CiAgICB0
        aGlzLl9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgdmFyIG1l
        dGhvZCA9IHRoaXNbbmFtZV07CiAgICBpZiAobWV0aG9kKSB7CiAgICAgIHZh
        ciBhcmdzID0gW10sIGksIGw7CiAgICAgIGZvciAoaSA9IDEsIGwgPSBhcmd1
        bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgYXJncy5wdXNo
        KGFyZ3VtZW50c1tpXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1ldGhvZC5h
        cHBseSh0aGlzLCBhcmdzKTsKICAgIH0KICB9LAoKICBkZXByZWNhdGVkU2Vu
        ZEhhbmRsZXM6IGZ1bmN0aW9uKGFjdGlvbk5hbWUpIHsKICAgIHJldHVybiAh
        IXRoaXNbYWN0aW9uTmFtZV07CiAgfSwKCiAgZGVwcmVjYXRlZFNlbmQ6IGZ1
        bmN0aW9uKGFjdGlvbk5hbWUpIHsKICAgIHZhciBhcmdzID0gW10uc2xpY2Uu
        Y2FsbChhcmd1bWVudHMsIDEpOwogICAgRW1iZXIuYXNzZXJ0KCcnICsgdGhp
        cyArICIgaGFzIHRoZSBhY3Rpb24gIiArIGFjdGlvbk5hbWUgKyAiIGJ1dCBp
        dCBpcyBub3QgYSBmdW5jdGlvbiIsIHR5cGVvZiB0aGlzW2FjdGlvbk5hbWVd
        ID09PSAnZnVuY3Rpb24nKTsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnQWN0aW9u
        IGhhbmRsZXJzIGltcGxlbWVudGVkIGRpcmVjdGx5IG9uIHZpZXdzIGFyZSBk
        ZXByZWNhdGVkIGluIGZhdm9yIG9mIGFjdGlvbiBoYW5kbGVycyBvbiBhbiBg
        YWN0aW9uc2Agb2JqZWN0ICgnICsgYWN0aW9uTmFtZSArICcgb24gJyArIHRo
        aXMgKyAnKScsIGZhbHNlKTsKICAgIHRoaXNbYWN0aW9uTmFtZV0uYXBwbHko
        dGhpcywgYXJncyk7CiAgICByZXR1cm47CiAgfSwKCiAgaGFzOiBmdW5jdGlv
        bihuYW1lKSB7CiAgICByZXR1cm4gRW1iZXIudHlwZU9mKHRoaXNbbmFtZV0p
        ID09PSAnZnVuY3Rpb24nIHx8IHRoaXMuX3N1cGVyKG5hbWUpOwogIH0sCgog
        IGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBhcmVudCA9IHRoaXMu
        X3BhcmVudFZpZXc7CgogICAgaWYgKCF0aGlzLl9zdXBlcigpKSB7IHJldHVy
        bjsgfQoKICAgIC8vIGRlc3Ryb3kgdGhlIGVsZW1lbnQgLS0gdGhpcyB3aWxs
        IGF2b2lkIGVhY2ggY2hpbGQgdmlldyBkZXN0cm95aW5nCiAgICAvLyB0aGUg
        ZWxlbWVudCBvdmVyIGFuZCBvdmVyIGFnYWluLi4uCiAgICBpZiAoIXRoaXMu
        cmVtb3ZlZEZyb21ET00pIHsgdGhpcy5kZXN0cm95RWxlbWVudCgpOyB9Cgog
        ICAgLy8gcmVtb3ZlIGZyb20gcGFyZW50IGlmIGZvdW5kLiBEb24ndCBjYWxs
        IHJlbW92ZUZyb21QYXJlbnQsCiAgICAvLyBhcyByZW1vdmVGcm9tUGFyZW50
        IHdpbGwgdHJ5IHRvIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tCiAgICAvLyB0
        aGUgRE9NIGFnYWluLgogICAgaWYgKHBhcmVudCkgeyBwYXJlbnQucmVtb3Zl
        Q2hpbGQodGhpcyk7IH0KCiAgICB0aGlzLnRyYW5zaXRpb25UbygnZGVzdHJv
        eWluZycsIGZhbHNlKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjbGVh
        clJlbmRlcmVkQ2hpbGRyZW46IEVtYmVyLkssCiAgdHJpZ2dlclJlY3Vyc2l2
        ZWx5OiBFbWJlci5LLAogIGludm9rZVJlY3Vyc2l2ZWx5OiBFbWJlci5LLAog
        IHRyYW5zaXRpb25UbzogRW1iZXIuSywKICBkZXN0cm95RWxlbWVudDogRW1i
        ZXIuSwp9KTsKCnZhciBWaWV3Q29sbGVjdGlvbiA9IEVtYmVyLl9WaWV3Q29s
        bGVjdGlvbiA9IGZ1bmN0aW9uKGluaXRpYWxWaWV3cykgewogIHZhciB2aWV3
        cyA9IHRoaXMudmlld3MgPSBpbml0aWFsVmlld3MgfHwgW107CiAgdGhpcy5s
        ZW5ndGggPSB2aWV3cy5sZW5ndGg7Cn07CgpWaWV3Q29sbGVjdGlvbi5wcm90
        b3R5cGUgPSB7CiAgbGVuZ3RoOiAwLAoKICB0cmlnZ2VyOiBmdW5jdGlvbihl
        dmVudE5hbWUpIHsKICAgIHZhciB2aWV3cyA9IHRoaXMudmlld3MsIHZpZXc7
        CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZpZXdzLmxlbmd0aDsgaSA8IGw7
        IGkrKykgewogICAgICB2aWV3ID0gdmlld3NbaV07CiAgICAgIGlmICh2aWV3
        LnRyaWdnZXIpIHsgdmlldy50cmlnZ2VyKGV2ZW50TmFtZSk7IH0KICAgIH0K
        ICB9LAoKICB0cmlnZ2VyUmVjdXJzaXZlbHk6IGZ1bmN0aW9uKGV2ZW50TmFt
        ZSkgewogICAgdmFyIHZpZXdzID0gdGhpcy52aWV3czsKICAgIGZvciAodmFy
        IGkgPSAwLCBsID0gdmlld3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAg
        IHZpZXdzW2ldLnRyaWdnZXJSZWN1cnNpdmVseShldmVudE5hbWUpOwogICAg
        fQogIH0sCgogIGludm9rZVJlY3Vyc2l2ZWx5OiBmdW5jdGlvbihmbikgewog
        ICAgdmFyIHZpZXdzID0gdGhpcy52aWV3cywgdmlldzsKCiAgICBmb3IgKHZh
        ciBpID0gMCwgbCA9IHZpZXdzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAg
        ICB2aWV3ID0gdmlld3NbaV07CiAgICAgIGZuKHZpZXcpOwogICAgfQogIH0s
        CgogIHRyYW5zaXRpb25UbzogZnVuY3Rpb24oc3RhdGUsIGNoaWxkcmVuKSB7
        CiAgICB2YXIgdmlld3MgPSB0aGlzLnZpZXdzOwogICAgZm9yICh2YXIgaSA9
        IDAsIGwgPSB2aWV3cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmll
        d3NbaV0udHJhbnNpdGlvblRvKHN0YXRlLCBjaGlsZHJlbik7CiAgICB9CiAg
        fSwKCiAgcHVzaDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmxlbmd0aCArPSBh
        cmd1bWVudHMubGVuZ3RoOwogICAgdmFyIHZpZXdzID0gdGhpcy52aWV3czsK
        ICAgIHJldHVybiB2aWV3cy5wdXNoLmFwcGx5KHZpZXdzLCBhcmd1bWVudHMp
        OwogIH0sCgogIG9iamVjdEF0OiBmdW5jdGlvbihpZHgpIHsKICAgIHJldHVy
        biB0aGlzLnZpZXdzW2lkeF07CiAgfSwKCiAgZm9yRWFjaDogZnVuY3Rpb24o
        Y2FsbGJhY2spIHsKICAgIHZhciB2aWV3cyA9IHRoaXMudmlld3M7CiAgICBy
        ZXR1cm4gYV9mb3JFYWNoKHZpZXdzLCBjYWxsYmFjayk7CiAgfSwKCiAgY2xl
        YXI6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sZW5ndGggPSAwOwogICAgdGhp
        cy52aWV3cy5sZW5ndGggPSAwOwogIH0KfTsKCnZhciBFTVBUWV9BUlJBWSA9
        IFtdOwoKLyoqCiAgYEVtYmVyLlZpZXdgIGlzIHRoZSBjbGFzcyBpbiBFbWJl
        ciByZXNwb25zaWJsZSBmb3IgZW5jYXBzdWxhdGluZyB0ZW1wbGF0ZXMgb2YK
        ICBIVE1MIGNvbnRlbnQsIGNvbWJpbmluZyB0ZW1wbGF0ZXMgd2l0aCBkYXRh
        IHRvIHJlbmRlciBhcyBzZWN0aW9ucyBvZiBhIHBhZ2UncwogIERPTSwgYW5k
        IHJlZ2lzdGVyaW5nIGFuZCByZXNwb25kaW5nIHRvIHVzZXItaW5pdGlhdGVk
        IGV2ZW50cy4KCiAgIyMgSFRNTCBUYWcKCiAgVGhlIGRlZmF1bHQgSFRNTCB0
        YWcgbmFtZSB1c2VkIGZvciBhIHZpZXcncyBET00gcmVwcmVzZW50YXRpb24g
        aXMgYGRpdmAuIFRoaXMKICBjYW4gYmUgY3VzdG9taXplZCBieSBzZXR0aW5n
        IHRoZSBgdGFnTmFtZWAgcHJvcGVydHkuIFRoZSBmb2xsb3dpbmcgdmlldwog
        IGNsYXNzOgoKICBgYGBqYXZhc2NyaXB0CiAgUGFyYWdyYXBoVmlldyA9IEVt
        YmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRhZ05hbWU6ICdlbScKICB9KTsKICBg
        YGAKCiAgV291bGQgcmVzdWx0IGluIGluc3RhbmNlcyB3aXRoIHRoZSBmb2xs
        b3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDxlbSBpZD0iZW1iZXIxIiBjbGFz
        cz0iZW1iZXItdmlldyI+PC9lbT4KICBgYGAKCiAgIyMgSFRNTCBgY2xhc3Ng
        IEF0dHJpYnV0ZQoKICBUaGUgSFRNTCBgY2xhc3NgIGF0dHJpYnV0ZSBvZiBh
        IHZpZXcncyB0YWcgY2FuIGJlIHNldCBieSBwcm92aWRpbmcgYQogIGBjbGFz
        c05hbWVzYCBwcm9wZXJ0eSB0aGF0IGlzIHNldCB0byBhbiBhcnJheSBvZiBz
        dHJpbmdzOgoKICBgYGBqYXZhc2NyaXB0CiAgTXlWaWV3ID0gRW1iZXIuVmll
        dy5leHRlbmQoewogICAgY2xhc3NOYW1lczogWydteS1jbGFzcycsICdteS1v
        dGhlci1jbGFzcyddCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZp
        ZXcgaW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoK
        CiAgYGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZp
        ZXcgbXktY2xhc3MgbXktb3RoZXItY2xhc3MiPjwvZGl2PgogIGBgYAoKICBg
        Y2xhc3NgIGF0dHJpYnV0ZSB2YWx1ZXMgY2FuIGFsc28gYmUgc2V0IGJ5IHBy
        b3ZpZGluZyBhIGBjbGFzc05hbWVCaW5kaW5nc2AKICBwcm9wZXJ0eSBzZXQg
        dG8gYW4gYXJyYXkgb2YgcHJvcGVydGllcyBuYW1lcyBmb3IgdGhlIHZpZXcu
        IFRoZSByZXR1cm4gdmFsdWUKICBvZiB0aGVzZSBwcm9wZXJ0aWVzIHdpbGwg
        YmUgYWRkZWQgYXMgcGFydCBvZiB0aGUgdmFsdWUgZm9yIHRoZSB2aWV3J3Mg
        YGNsYXNzYAogIGF0dHJpYnV0ZS4gVGhlc2UgcHJvcGVydGllcyBjYW4gYmUg
        Y29tcHV0ZWQgcHJvcGVydGllczoKCiAgYGBgamF2YXNjcmlwdAogIE15Vmll
        dyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNsYXNzTmFtZUJpbmRpbmdz
        OiBbJ3Byb3BlcnR5QScsICdwcm9wZXJ0eUInXSwKICAgIHByb3BlcnR5QTog
        J2Zyb20tYScsCiAgICBwcm9wZXJ0eUI6IGZ1bmN0aW9uKCkgewogICAgICBp
        ZiAoc29tZUxvZ2ljKSB7IHJldHVybiAnZnJvbS1iJzsgfQogICAgfS5wcm9w
        ZXJ0eSgpCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5z
        dGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBg
        aHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXcgZnJv
        bS1hIGZyb20tYiI+PC9kaXY+CiAgYGBgCgogIElmIHRoZSB2YWx1ZSBvZiBh
        IGNsYXNzIG5hbWUgYmluZGluZyByZXR1cm5zIGEgYm9vbGVhbiB0aGUgcHJv
        cGVydHkgbmFtZQogIGl0c2VsZiB3aWxsIGJlIHVzZWQgYXMgdGhlIGNsYXNz
        IG5hbWUgaWYgdGhlIHByb3BlcnR5IGlzIHRydWUuIFRoZSBjbGFzcyBuYW1l
        CiAgd2lsbCBub3QgYmUgYWRkZWQgaWYgdGhlIHZhbHVlIGlzIGBmYWxzZWAg
        b3IgYHVuZGVmaW5lZGAuCgogIGBgYGphdmFzY3JpcHQKICBNeVZpZXcgPSBF
        bWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydo
        b3ZlcmVkJ10sCiAgICBob3ZlcmVkOiB0cnVlCiAgfSk7CiAgYGBgCgogIFdp
        bGwgcmVzdWx0IGluIHZpZXcgaW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXBy
        ZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIg
        Y2xhc3M9ImVtYmVyLXZpZXcgaG92ZXJlZCI+PC9kaXY+CiAgYGBgCgogIFdo
        ZW4gdXNpbmcgYm9vbGVhbiBjbGFzcyBuYW1lIGJpbmRpbmdzIHlvdSBjYW4g
        c3VwcGx5IGEgc3RyaW5nIHZhbHVlIG90aGVyCiAgdGhhbiB0aGUgcHJvcGVy
        dHkgbmFtZSBmb3IgdXNlIGFzIHRoZSBgY2xhc3NgIEhUTUwgYXR0cmlidXRl
        IGJ5IGFwcGVuZGluZyB0aGUKICBwcmVmZXJyZWQgdmFsdWUgYWZ0ZXIgYSAi
        OiIgY2hhcmFjdGVyIHdoZW4gZGVmaW5pbmcgdGhlIGJpbmRpbmc6CgogIGBg
        YGphdmFzY3JpcHQKICBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAg
        ICBjbGFzc05hbWVCaW5kaW5nczogWydhd2Vzb21lOnNvLXZlcnktY29vbCdd
        LAogICAgYXdlc29tZTogdHJ1ZQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3Vs
        dCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRp
        b24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJl
        bWJlci12aWV3IHNvLXZlcnktY29vbCI+PC9kaXY+CiAgYGBgCgogIEJvb2xl
        YW4gdmFsdWUgY2xhc3MgbmFtZSBiaW5kaW5ncyB3aG9zZSBwcm9wZXJ0eSBu
        YW1lcyBhcmUgaW4gYQogIGNhbWVsQ2FzZS1zdHlsZSBmb3JtYXQgd2lsbCBi
        ZSBjb252ZXJ0ZWQgdG8gYSBkYXNoZXJpemVkIGZvcm1hdDoKCiAgYGBgamF2
        YXNjcmlwdAogIE15VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNs
        YXNzTmFtZUJpbmRpbmdzOiBbJ2lzVXJnZW50J10sCiAgICBpc1VyZ2VudDog
        dHJ1ZQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3Rh
        bmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0
        bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3IGlzLXVy
        Z2VudCI+PC9kaXY+CiAgYGBgCgogIENsYXNzIG5hbWUgYmluZGluZ3MgY2Fu
        IGFsc28gcmVmZXIgdG8gb2JqZWN0IHZhbHVlcyB0aGF0IGFyZSBmb3VuZCBi
        eQogIHRyYXZlcnNpbmcgYSBwYXRoIHJlbGF0aXZlIHRvIHRoZSB2aWV3IGl0
        c2VsZjoKCiAgYGBgamF2YXNjcmlwdAogIE15VmlldyA9IEVtYmVyLlZpZXcu
        ZXh0ZW5kKHsKICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBbJ21lc3NhZ2VzLmVt
        cHR5J10KICAgIG1lc3NhZ2VzOiBFbWJlci5PYmplY3QuY3JlYXRlKHsKICAg
        ICAgZW1wdHk6IHRydWUKICAgIH0pCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVz
        dWx0IGluIHZpZXcgaW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRh
        dGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9
        ImVtYmVyLXZpZXcgZW1wdHkiPjwvZGl2PgogIGBgYAoKICBJZiB5b3Ugd2Fu
        dCB0byBhZGQgYSBjbGFzcyBuYW1lIGZvciBhIHByb3BlcnR5IHdoaWNoIGV2
        YWx1YXRlcyB0byB0cnVlIGFuZAogIGFuZCBhIGRpZmZlcmVudCBjbGFzcyBu
        YW1lIGlmIGl0IGV2YWx1YXRlcyB0byBmYWxzZSwgeW91IGNhbiBwYXNzIGEg
        YmluZGluZwogIGxpa2UgdGhpczoKCiAgYGBgamF2YXNjcmlwdAogIC8vIEFw
        cGxpZXMgJ2VuYWJsZWQnIGNsYXNzIHdoZW4gaXNFbmFibGVkIGlzIHRydWUg
        YW5kICdkaXNhYmxlZCcgd2hlbiBpc0VuYWJsZWQgaXMgZmFsc2UKICBFbWJl
        ci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydpc0Vu
        YWJsZWQ6ZW5hYmxlZDpkaXNhYmxlZCddCiAgICBpc0VuYWJsZWQ6IHRydWUK
        ICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMg
        d2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAg
        PGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyBlbmFibGVkIj48
        L2Rpdj4KICBgYGAKCiAgV2hlbiBpc0VuYWJsZWQgaXMgYGZhbHNlYCwgdGhl
        IHJlc3VsdGluZyBIVE1MIHJlcHJlbnNlbnRhdGlvbiBsb29rcyBsaWtlCiAg
        dGhpczoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVt
        YmVyLXZpZXcgZGlzYWJsZWQiPjwvZGl2PgogIGBgYAoKICBUaGlzIHN5bnRh
        eCBvZmZlcnMgdGhlIGNvbnZlbmllbmNlIHRvIGFkZCBhIGNsYXNzIGlmIGEg
        cHJvcGVydHkgaXMgYGZhbHNlYDoKCiAgYGBgamF2YXNjcmlwdAogIC8vIEFw
        cGxpZXMgbm8gY2xhc3Mgd2hlbiBpc0VuYWJsZWQgaXMgdHJ1ZSBhbmQgY2xh
        c3MgJ2Rpc2FibGVkJyB3aGVuIGlzRW5hYmxlZCBpcyBmYWxzZQogIEVtYmVy
        LlZpZXcuZXh0ZW5kKHsKICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBbJ2lzRW5h
        YmxlZDo6ZGlzYWJsZWQnXQogICAgaXNFbmFibGVkOiB0cnVlCiAgfSk7CiAg
        YGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5zdGFuY2VzIHdpdGggYW4g
        SFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9
        ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXciPjwvZGl2PgogIGBgYAoKICBX
        aGVuIHRoZSBgaXNFbmFibGVkYCBwcm9wZXJ0eSBvbiB0aGUgdmlldyBpcyBz
        ZXQgdG8gYGZhbHNlYCwgaXQgd2lsbCByZXN1bHQKICBpbiB2aWV3IGluc3Rh
        bmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0
        bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3IGRpc2Fi
        bGVkIj48L2Rpdj4KICBgYGAKCiAgVXBkYXRlcyB0byB0aGUgdGhlIHZhbHVl
        IG9mIGEgY2xhc3MgbmFtZSBiaW5kaW5nIHdpbGwgcmVzdWx0IGluIGF1dG9t
        YXRpYwogIHVwZGF0ZSBvZiB0aGUgIEhUTUwgYGNsYXNzYCBhdHRyaWJ1dGUg
        aW4gdGhlIHZpZXcncyByZW5kZXJlZCBIVE1MCiAgcmVwcmVzZW50YXRpb24u
        IElmIHRoZSB2YWx1ZSBiZWNvbWVzIGBmYWxzZWAgb3IgYHVuZGVmaW5lZGAg
        dGhlIGNsYXNzIG5hbWUKICB3aWxsIGJlIHJlbW92ZWQuCgogIEJvdGggYGNs
        YXNzTmFtZXNgIGFuZCBgY2xhc3NOYW1lQmluZGluZ3NgIGFyZSBjb25jYXRl
        bmF0ZWQgcHJvcGVydGllcy4gU2VlCiAgW0VtYmVyLk9iamVjdF0oL2FwaS9j
        bGFzc2VzL0VtYmVyLk9iamVjdC5odG1sKSBkb2N1bWVudGF0aW9uIGZvciBt
        b3JlCiAgaW5mb3JtYXRpb24gYWJvdXQgY29uY2F0ZW5hdGVkIHByb3BlcnRp
        ZXMuCgogICMjIEhUTUwgQXR0cmlidXRlcwoKICBUaGUgSFRNTCBhdHRyaWJ1
        dGUgc2VjdGlvbiBvZiBhIHZpZXcncyB0YWcgY2FuIGJlIHNldCBieSBwcm92
        aWRpbmcgYW4KICBgYXR0cmlidXRlQmluZGluZ3NgIHByb3BlcnR5IHNldCB0
        byBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBvbiB0aGUgdmlldy4KICBU
        aGUgcmV0dXJuIHZhbHVlIG9mIHRoZXNlIHByb3BlcnRpZXMgd2lsbCBiZSB1
        c2VkIGFzIHRoZSB2YWx1ZSBvZiB0aGUgdmlldydzCiAgSFRNTCBhc3NvY2lh
        dGVkIGF0dHJpYnV0ZToKCiAgYGBgamF2YXNjcmlwdAogIEFuY2hvclZpZXcg
        PSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAnYScsCiAgICBh
        dHRyaWJ1dGVCaW5kaW5nczogWydocmVmJ10sCiAgICBocmVmOiAnaHR0cDov
        L2dvb2dsZS5jb20nCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZp
        ZXcgaW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoK
        CiAgYGBgaHRtbAogIDxhIGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3
        IiBocmVmPSJodHRwOi8vZ29vZ2xlLmNvbSI+PC9hPgogIGBgYAoKICBJZiB0
        aGUgcmV0dXJuIHZhbHVlIG9mIGFuIGBhdHRyaWJ1dGVCaW5kaW5nc2AgbW9u
        aXRvcmVkIHByb3BlcnR5IGlzIGEgYm9vbGVhbgogIHRoZSBwcm9wZXJ0eSB3
        aWxsIGZvbGxvdyBIVE1MJ3MgcGF0dGVybiBvZiByZXBlYXRpbmcgdGhlIGF0
        dHJpYnV0ZSdzIG5hbWUgYXMKICBpdHMgdmFsdWU6CgogIGBgYGphdmFzY3Jp
        cHQKICBNeVRleHRJbnB1dCA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRh
        Z05hbWU6ICdpbnB1dCcsCiAgICBhdHRyaWJ1dGVCaW5kaW5nczogWydkaXNh
        YmxlZCddLAogICAgZGlzYWJsZWQ6IHRydWUKICB9KTsKICBgYGAKCiAgV2ls
        bCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJl
        c2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGlucHV0IGlkPSJlbWJlcjEi
        IGNsYXNzPSJlbWJlci12aWV3IiBkaXNhYmxlZD0iZGlzYWJsZWQiIC8+CiAg
        YGBgCgogIGBhdHRyaWJ1dGVCaW5kaW5nc2AgY2FuIHJlZmVyIHRvIGNvbXB1
        dGVkIHByb3BlcnRpZXM6CgogIGBgYGphdmFzY3JpcHQKICBNeVRleHRJbnB1
        dCA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRhZ05hbWU6ICdpbnB1dCcs
        CiAgICBhdHRyaWJ1dGVCaW5kaW5nczogWydkaXNhYmxlZCddLAogICAgZGlz
        YWJsZWQ6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoc29tZUxvZ2ljKSB7CiAg
        ICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0
        dXJuIGZhbHNlOwogICAgICB9CiAgICB9LnByb3BlcnR5KCkKICB9KTsKICBg
        YGAKCiAgVXBkYXRlcyB0byB0aGUgdGhlIHByb3BlcnR5IG9mIGFuIGF0dHJp
        YnV0ZSBiaW5kaW5nIHdpbGwgcmVzdWx0IGluIGF1dG9tYXRpYwogIHVwZGF0
        ZSBvZiB0aGUgIEhUTUwgYXR0cmlidXRlIGluIHRoZSB2aWV3J3MgcmVuZGVy
        ZWQgSFRNTCByZXByZXNlbnRhdGlvbi4KCiAgYGF0dHJpYnV0ZUJpbmRpbmdz
        YCBpcyBhIGNvbmNhdGVuYXRlZCBwcm9wZXJ0eS4gU2VlIFtFbWJlci5PYmpl
        Y3RdKC9hcGkvY2xhc3Nlcy9FbWJlci5PYmplY3QuaHRtbCkKICBkb2N1bWVu
        dGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGNvbmNhdGVuYXRl
        ZCBwcm9wZXJ0aWVzLgoKICAjIyBUZW1wbGF0ZXMKCiAgVGhlIEhUTUwgY29u
        dGVudHMgb2YgYSB2aWV3J3MgcmVuZGVyZWQgcmVwcmVzZW50YXRpb24gYXJl
        IGRldGVybWluZWQgYnkgaXRzCiAgdGVtcGxhdGUuIFRlbXBsYXRlcyBjYW4g
        YmUgYW55IGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBhbiBvcHRpb25hbCBjb250
        ZXh0CiAgcGFyYW1ldGVyIGFuZCByZXR1cm5zIGEgc3RyaW5nIG9mIEhUTUwg
        dGhhdCB3aWxsIGJlIGluc2VydGVkIHdpdGhpbiB0aGUKICB2aWV3J3MgdGFn
        LiBNb3N0IHR5cGljYWxseSBpbiBFbWJlciB0aGlzIGZ1bmN0aW9uIHdpbGwg
        YmUgYSBjb21waWxlZAogIGBFbWJlci5IYW5kbGViYXJzYCB0ZW1wbGF0ZS4K
        CiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQo
        ewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgnSSBh
        bSB0aGUgdGVtcGxhdGUnKQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBp
        biB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24g
        b2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJl
        ci12aWV3Ij5JIGFtIHRoZSB0ZW1wbGF0ZTwvZGl2PgogIGBgYAoKICBXaXRo
        aW4gYW4gRW1iZXIgYXBwbGljYXRpb24gaXMgbW9yZSBjb21tb24gdG8gZGVm
        aW5lIGEgSGFuZGxlYmFycyB0ZW1wbGF0ZXMgYXMKICBwYXJ0IG9mIGEgcGFn
        ZToKCiAgYGBgaHRtbAogIDxzY3JpcHQgdHlwZT0ndGV4dC94LWhhbmRsZWJh
        cnMnIGRhdGEtdGVtcGxhdGUtbmFtZT0nc29tZS10ZW1wbGF0ZSc+CiAgICBI
        ZWxsbwogIDwvc2NyaXB0PgogIGBgYAoKICBBbmQgYXNzb2NpYXRlIGl0IGJ5
        IG5hbWUgdXNpbmcgYSB2aWV3J3MgYHRlbXBsYXRlTmFtZWAgcHJvcGVydHk6
        CgogIGBgYGphdmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5k
        KHsKICAgIHRlbXBsYXRlTmFtZTogJ3NvbWUtdGVtcGxhdGUnCiAgfSk7CiAg
        YGBgCgogIFVzaW5nIGEgdmFsdWUgZm9yIGB0ZW1wbGF0ZU5hbWVgIHRoYXQg
        ZG9lcyBub3QgaGF2ZSBhIEhhbmRsZWJhcnMgdGVtcGxhdGUKICB3aXRoIGEg
        bWF0Y2hpbmcgYGRhdGEtdGVtcGxhdGUtbmFtZWAgYXR0cmlidXRlIHdpbGwg
        dGhyb3cgYW4gZXJyb3IuCgogIEZvciB2aWV3cyBjbGFzc2VzIHRoYXQgbWF5
        IGhhdmUgYSB0ZW1wbGF0ZSBsYXRlciBkZWZpbmVkIChlLmcuIGFzIHRoZSBi
        bG9jawogIHBvcnRpb24gb2YgYSBge3t2aWV3fX1gIEhhbmRsZWJhcnMgaGVs
        cGVyIGNhbGwgaW4gYW5vdGhlciB0ZW1wbGF0ZSBvciBpbgogIGEgc3ViY2xh
        c3MpLCB5b3UgY2FuIHByb3ZpZGUgYSBgZGVmYXVsdFRlbXBsYXRlYCBwcm9w
        ZXJ0eSBzZXQgdG8gY29tcGlsZWQKICB0ZW1wbGF0ZSBmdW5jdGlvbi4gSWYg
        YSB0ZW1wbGF0ZSBpcyBub3QgbGF0ZXIgcHJvdmlkZWQgZm9yIHRoZSB2aWV3
        IGluc3RhbmNlCiAgdGhlIGBkZWZhdWx0VGVtcGxhdGVgIHZhbHVlIHdpbGwg
        YmUgdXNlZDoKCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmll
        dy5leHRlbmQoewogICAgZGVmYXVsdFRlbXBsYXRlOiBFbWJlci5IYW5kbGVi
        YXJzLmNvbXBpbGUoJ0kgd2FzIHRoZSBkZWZhdWx0JyksCiAgICB0ZW1wbGF0
        ZTogbnVsbCwKICAgIHRlbXBsYXRlTmFtZTogbnVsbAogIH0pOwogIGBgYAoK
        ICBXaWxsIHJlc3VsdCBpbiBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJl
        c2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBj
        bGFzcz0iZW1iZXItdmlldyI+SSB3YXMgdGhlIGRlZmF1bHQ8L2Rpdj4KICBg
        YGAKCiAgSWYgYSBgdGVtcGxhdGVgIG9yIGB0ZW1wbGF0ZU5hbWVgIGlzIHBy
        b3ZpZGVkIGl0IHdpbGwgdGFrZSBwcmVjZWRlbmNlIG92ZXIKICBgZGVmYXVs
        dFRlbXBsYXRlYDoKCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgZGVmYXVsdFRlbXBsYXRlOiBFbWJlci5IYW5k
        bGViYXJzLmNvbXBpbGUoJ0kgd2FzIHRoZSBkZWZhdWx0JykKICB9KTsKCiAg
        YVZpZXcgPSBBVmlldy5jcmVhdGUoewogICAgdGVtcGxhdGU6IEVtYmVyLkhh
        bmRsZWJhcnMuY29tcGlsZSgnSSB3YXMgdGhlIHRlbXBsYXRlLCBub3QgZGVm
        YXVsdCcpCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHRoZSBmb2xs
        b3dpbmcgSFRNTCByZXByZXNlbnRhdGlvbiB3aGVuIHJlbmRlcmVkOgoKICBg
        YGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyI+
        SSB3YXMgdGhlIHRlbXBsYXRlLCBub3QgZGVmYXVsdDwvZGl2PgogIGBgYAoK
        ICAjIyBWaWV3IENvbnRleHQKCiAgVGhlIGRlZmF1bHQgY29udGV4dCBvZiB0
        aGUgY29tcGlsZWQgdGVtcGxhdGUgaXMgdGhlIHZpZXcncyBjb250cm9sbGVy
        OgoKICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCdI
        ZWxsbyB7e2V4Y2l0ZWRHcmVldGluZ319JykKICB9KTsKCiAgYUNvbnRyb2xs
        ZXIgPSBFbWJlci5PYmplY3QuY3JlYXRlKHsKICAgIGZpcnN0TmFtZTogJ0Jh
        cnJ5JywKICAgIGV4Y2l0ZWRHcmVldGluZzogZnVuY3Rpb24oKSB7CiAgICAg
        IHJldHVybiB0aGlzLmdldCgiY29udGVudC5maXJzdE5hbWUiKSArICIhISEi
        CiAgICB9LnByb3BlcnR5KCkKICB9KTsKCiAgYVZpZXcgPSBBVmlldy5jcmVh
        dGUoewogICAgY29udHJvbGxlcjogYUNvbnRyb2xsZXIsCiAgfSk7CiAgYGBg
        CgogIFdpbGwgcmVzdWx0IGluIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6
        CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12
        aWV3Ij5IZWxsbyBCYXJyeSEhITwvZGl2PgogIGBgYAoKICBBIGNvbnRleHQg
        Y2FuIGFsc28gYmUgZXhwbGljaXRseSBzdXBwbGllZCB0aHJvdWdoIHRoZSB2
        aWV3J3MgYGNvbnRleHRgCiAgcHJvcGVydHkuIElmIHRoZSB2aWV3IGhhcyBu
        ZWl0aGVyIGBjb250ZXh0YCBub3IgYGNvbnRyb2xsZXJgIHByb3BlcnRpZXMs
        IHRoZQogIGBwYXJlbnRWaWV3YCdzIGNvbnRleHQgd2lsbCBiZSB1c2VkLgoK
        ICAjIyBMYXlvdXRzCgogIFZpZXdzIGNhbiBoYXZlIGEgc2Vjb25kYXJ5IHRl
        bXBsYXRlIHRoYXQgd3JhcHMgdGhlaXIgbWFpbiB0ZW1wbGF0ZS4gTGlrZQog
        IHByaW1hcnkgdGVtcGxhdGVzLCBsYXlvdXRzIGNhbiBiZSBhbnkgZnVuY3Rp
        b24gdGhhdCAgYWNjZXB0cyBhbiBvcHRpb25hbAogIGNvbnRleHQgcGFyYW1l
        dGVyIGFuZCByZXR1cm5zIGEgc3RyaW5nIG9mIEhUTUwgdGhhdCB3aWxsIGJl
        IGluc2VydGVkIGluc2lkZQogIHZpZXcncyB0YWcuIFZpZXdzIHdob3NlIEhU
        TUwgZWxlbWVudCBpcyBzZWxmIGNsb3NpbmcgKGUuZy4gYDxpbnB1dCAvPmAp
        CiAgY2Fubm90IGhhdmUgYSBsYXlvdXQgYW5kIHRoaXMgcHJvcGVydHkgd2ls
        bCBiZSBpZ25vcmVkLgoKICBNb3N0IHR5cGljYWxseSBpbiBFbWJlciBhIGxh
        eW91dCB3aWxsIGJlIGEgY29tcGlsZWQgYEVtYmVyLkhhbmRsZWJhcnNgCiAg
        dGVtcGxhdGUuCgogIEEgdmlldydzIGxheW91dCBjYW4gYmUgc2V0IGRpcmVj
        dGx5IHdpdGggdGhlIGBsYXlvdXRgIHByb3BlcnR5IG9yIHJlZmVyZW5jZQog
        IGFuIGV4aXN0aW5nIEhhbmRsZWJhcnMgdGVtcGxhdGUgYnkgbmFtZSB3aXRo
        IHRoZSBgbGF5b3V0TmFtZWAgcHJvcGVydHkuCgogIEEgdGVtcGxhdGUgdXNl
        ZCBhcyBhIGxheW91dCBtdXN0IGNvbnRhaW4gYSBzaW5nbGUgdXNlIG9mIHRo
        ZSBIYW5kbGViYXJzCiAgYHt7eWllbGR9fWAgaGVscGVyLiBUaGUgSFRNTCBj
        b250ZW50cyBvZiBhIHZpZXcncyByZW5kZXJlZCBgdGVtcGxhdGVgIHdpbGwg
        YmUKICBpbnNlcnRlZCBhdCB0aGlzIGxvY2F0aW9uOgoKICBgYGBqYXZhc2Ny
        aXB0CiAgQVZpZXdXaXRoTGF5b3V0ID0gRW1iZXIuVmlldy5leHRlbmQoewog
        ICAgbGF5b3V0OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIjxkaXYgY2xh
        c3M9J215LWRlY29yYXRpdmUtY2xhc3MnPnt7eWllbGR9fTwvZGl2PiIpCiAg
        ICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJJIGdvdCB3
        cmFwcGVkIiksCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcg
        aW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAg
        YGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXci
        PgogICAgPGRpdiBjbGFzcz0ibXktZGVjb3JhdGl2ZS1jbGFzcyI+CiAgICAg
        IEkgZ290IHdyYXBwZWQKICAgIDwvZGl2PgogIDwvZGl2PgogIGBgYAoKICBT
        ZWUgW0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy55aWVsZF0oL2FwaS9jbGFz
        c2VzL0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5odG1sI21ldGhvZF95aWVs
        ZCkKICBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KCiAgIyMgUmVzcG9uZGluZyB0
        byBCcm93c2VyIEV2ZW50cwoKICBWaWV3cyBjYW4gcmVzcG9uZCB0byB1c2Vy
        LWluaXRpYXRlZCBldmVudHMgaW4gb25lIG9mIHRocmVlIHdheXM6IG1ldGhv
        ZAogIGltcGxlbWVudGF0aW9uLCB0aHJvdWdoIGFuIGV2ZW50IG1hbmFnZXIs
        IGFuZCB0aHJvdWdoIGB7e2FjdGlvbn19YCBoZWxwZXIgdXNlCiAgaW4gdGhl
        aXIgdGVtcGxhdGUgb3IgbGF5b3V0LgoKICAjIyMgTWV0aG9kIEltcGxlbWVu
        dGF0aW9uCgogIFZpZXdzIGNhbiByZXNwb25kIHRvIHVzZXItaW5pdGlhdGVk
        IGV2ZW50cyBieSBpbXBsZW1lbnRpbmcgYSBtZXRob2QgdGhhdAogIG1hdGNo
        ZXMgdGhlIGV2ZW50IG5hbWUuIEEgYGpRdWVyeS5FdmVudGAgb2JqZWN0IHdp
        bGwgYmUgcGFzc2VkIGFzIHRoZQogIGFyZ3VtZW50IHRvIHRoaXMgbWV0aG9k
        LgoKICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICBjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgLy8gd2ls
        bCBiZSBjYWxsZWQgd2hlbiB3aGVuIGFuIGluc3RhbmNlJ3MKICAgICAgLy8g
        cmVuZGVyZWQgZWxlbWVudCBpcyBjbGlja2VkCiAgICB9CiAgfSk7CiAgYGBg
        CgogICMjIyBFdmVudCBNYW5hZ2VycwoKICBWaWV3cyBjYW4gZGVmaW5lIGFu
        IG9iamVjdCBhcyB0aGVpciBgZXZlbnRNYW5hZ2VyYCBwcm9wZXJ0eS4gVGhp
        cyBvYmplY3QgY2FuCiAgdGhlbiBpbXBsZW1lbnQgbWV0aG9kcyB0aGF0IG1h
        dGNoIHRoZSBkZXNpcmVkIGV2ZW50IG5hbWVzLiBNYXRjaGluZyBldmVudHMK
        ICB0aGF0IG9jY3VyIG9uIHRoZSB2aWV3J3MgcmVuZGVyZWQgSFRNTCBvciB0
        aGUgcmVuZGVyZWQgSFRNTCBvZiBhbnkgb2YgaXRzIERPTQogIGRlc2NlbmRh
        bnRzIHdpbGwgdHJpZ2dlciB0aGlzIG1ldGhvZC4gQSBgalF1ZXJ5LkV2ZW50
        YCBvYmplY3Qgd2lsbCBiZSBwYXNzZWQKICBhcyB0aGUgZmlyc3QgYXJndW1l
        bnQgdG8gdGhlIG1ldGhvZCBhbmQgYW4gIGBFbWJlci5WaWV3YCBvYmplY3Qg
        YXMgdGhlCiAgc2Vjb25kLiBUaGUgYEVtYmVyLlZpZXdgIHdpbGwgYmUgdGhl
        IHZpZXcgd2hvc2UgcmVuZGVyZWQgSFRNTCB3YXMgaW50ZXJhY3RlZAogIHdp
        dGguIFRoaXMgbWF5IGJlIHRoZSB2aWV3IHdpdGggdGhlIGBldmVudE1hbmFn
        ZXJgIHByb3BlcnR5IG9yIG9uZSBvZiBpdHMKICBkZXNjZW5kZW50IHZpZXdz
        LgoKICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICBldmVudE1hbmFnZXI6IEVtYmVyLk9iamVjdC5jcmVhdGUoewog
        ICAgICBkb3VibGVDbGljazogZnVuY3Rpb24oZXZlbnQsIHZpZXcpIHsKICAg
        ICAgICAvLyB3aWxsIGJlIGNhbGxlZCB3aGVuIHdoZW4gYW4gaW5zdGFuY2Un
        cwogICAgICAgIC8vIHJlbmRlcmVkIGVsZW1lbnQgb3IgYW55IHJlbmRlcmlu
        ZwogICAgICAgIC8vIG9mIHRoaXMgdmlld3MncyBkZXNjZW5kZW50CiAgICAg
        ICAgLy8gZWxlbWVudHMgaXMgY2xpY2tlZAogICAgICB9CiAgICB9KQogIH0p
        OwogIGBgYAoKICBBbiBldmVudCBkZWZpbmVkIGZvciBhbiBldmVudCBtYW5h
        Z2VyIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBldmVudHMgb2YgdGhlCiAgc2Ft
        ZSBuYW1lIGhhbmRsZWQgdGhyb3VnaCBtZXRob2RzIG9uIHRoZSB2aWV3LgoK
        ICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICBtb3VzZUVudGVyOiBmdW5jdGlvbihldmVudCkgewogICAgICAvLyB3
        aWxsIG5ldmVyIHRyaWdnZXIuCiAgICB9LAogICAgZXZlbnRNYW5hZ2VyOiBF
        bWJlci5PYmplY3QuY3JlYXRlKHsKICAgICAgbW91c2VFbnRlcjogZnVuY3Rp
        b24oZXZlbnQsIHZpZXcpIHsKICAgICAgICAvLyB0YWtlcyBwcmVjZWRlbmNl
        IG92ZXIgQVZpZXcjbW91c2VFbnRlcgogICAgICB9CiAgICB9KQogIH0pOwog
        IGBgYAoKICBTaW1pbGFybHkgYSB2aWV3J3MgZXZlbnQgbWFuYWdlciB3aWxs
        IHRha2UgcHJlY2VkZW5jZSBmb3IgZXZlbnRzIG9mIGFueSB2aWV3cwogIHJl
        bmRlcmVkIGFzIGEgZGVzY2VuZGVudC4gQSBtZXRob2QgbmFtZSB0aGF0IG1h
        dGNoZXMgYW4gZXZlbnQgbmFtZSB3aWxsIG5vdAogIGJlIGNhbGxlZCBpZiB0
        aGUgdmlldyBpbnN0YW5jZSB3YXMgcmVuZGVyZWQgaW5zaWRlIHRoZSBIVE1M
        IHJlcHJlc2VudGF0aW9uIG9mCiAgYSB2aWV3IHRoYXQgaGFzIGFuIGBldmVu
        dE1hbmFnZXJgIHByb3BlcnR5IGRlZmluZWQgdGhhdCBoYW5kbGVzIGV2ZW50
        cyBvZiB0aGUKICBuYW1lLiBFdmVudHMgbm90IGhhbmRsZWQgYnkgdGhlIGV2
        ZW50IG1hbmFnZXIgd2lsbCBzdGlsbCB0cmlnZ2VyIG1ldGhvZCBjYWxscwog
        IG9uIHRoZSBkZXNjZW5kZW50LgoKICBgYGBqYXZhc2NyaXB0CiAgT3V0ZXJW
        aWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgdGVtcGxhdGU6IEVtYmVy
        LkhhbmRsZWJhcnMuY29tcGlsZSgib3V0ZXIge3sjdmlldyBJbm5lclZpZXd9
        fWlubmVye3svdmlld319IG91dGVyIiksCiAgICBldmVudE1hbmFnZXI6IEVt
        YmVyLk9iamVjdC5jcmVhdGUoewogICAgICBtb3VzZUVudGVyOiBmdW5jdGlv
        bihldmVudCwgdmlldykgewogICAgICAgIC8vIHZpZXcgbWlnaHQgYmUgaW5z
        dGFuY2Ugb2YgZWl0aGVyCiAgICAgICAgLy8gT3V0ZXJWaWV3IG9yIElubmVy
        VmlldyBkZXBlbmRpbmcgb24KICAgICAgICAvLyB3aGVyZSBvbiB0aGUgcGFn
        ZSB0aGUgdXNlciBpbnRlcmFjdGlvbiBvY2N1cmVkCiAgICAgIH0KICAgIH0p
        CiAgfSk7CgogIElubmVyVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAg
        IGNsaWNrOiBmdW5jdGlvbihldmVudCkgewogICAgICAvLyB3aWxsIGJlIGNh
        bGxlZCBpZiByZW5kZXJlZCBpbnNpZGUKICAgICAgLy8gYW4gT3V0ZXJWaWV3
        IGJlY2F1c2UgT3V0ZXJWaWV3J3MKICAgICAgLy8gZXZlbnRNYW5hZ2VyIGRv
        ZXNuJ3QgaGFuZGxlIGNsaWNrIGV2ZW50cwogICAgfSwKICAgIG1vdXNlRW50
        ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIC8vIHdpbGwgbmV2ZXIgYmUg
        Y2FsbGVkIGlmIHJlbmRlcmVkIGluc2lkZQogICAgICAvLyBhbiBPdXRlclZp
        ZXcuCiAgICB9CiAgfSk7CiAgYGBgCgogICMjIyBIYW5kbGViYXJzIGB7e2Fj
        dGlvbn19YCBIZWxwZXIKCiAgU2VlIFtIYW5kbGViYXJzLmhlbHBlcnMuYWN0
        aW9uXSgvYXBpL2NsYXNzZXMvRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0
        bWwjbWV0aG9kX2FjdGlvbikuCgogICMjIyBFdmVudCBOYW1lcwoKICBBbGwg
        b2YgdGhlIGV2ZW50IGhhbmRsaW5nIGFwcHJvYWNoZXMgZGVzY3JpYmVkIGFi
        b3ZlIHJlc3BvbmQgdG8gdGhlIHNhbWUgc2V0CiAgb2YgZXZlbnRzLiBUaGUg
        bmFtZXMgb2YgdGhlIGJ1aWx0LWluIGV2ZW50cyBhcmUgbGlzdGVkIGJlbG93
        LiAoVGhlIGhhc2ggb2YKICBidWlsdC1pbiBldmVudHMgZXhpc3RzIGluIGBF
        bWJlci5FdmVudERpc3BhdGNoZXJgLikgQWRkaXRpb25hbCwgY3VzdG9tIGV2
        ZW50cwogIGNhbiBiZSByZWdpc3RlcmVkIGJ5IHVzaW5nIGBFbWJlci5BcHBs
        aWNhdGlvbi5jdXN0b21FdmVudHNgLgoKICBUb3VjaCBldmVudHM6CgogICog
        YHRvdWNoU3RhcnRgCiAgKiBgdG91Y2hNb3ZlYAogICogYHRvdWNoRW5kYAog
        ICogYHRvdWNoQ2FuY2VsYAoKICBLZXlib2FyZCBldmVudHMKCiAgKiBga2V5
        RG93bmAKICAqIGBrZXlVcGAKICAqIGBrZXlQcmVzc2AKCiAgTW91c2UgZXZl
        bnRzCgogICogYG1vdXNlRG93bmAKICAqIGBtb3VzZVVwYAogICogYGNvbnRl
        eHRNZW51YAogICogYGNsaWNrYAogICogYGRvdWJsZUNsaWNrYAogICogYG1v
        dXNlTW92ZWAKICAqIGBmb2N1c0luYAogICogYGZvY3VzT3V0YAogICogYG1v
        dXNlRW50ZXJgCiAgKiBgbW91c2VMZWF2ZWAKCiAgRm9ybSBldmVudHM6Cgog
        ICogYHN1Ym1pdGAKICAqIGBjaGFuZ2VgCiAgKiBgZm9jdXNJbmAKICAqIGBm
        b2N1c091dGAKICAqIGBpbnB1dGAKCiAgSFRNTDUgZHJhZyBhbmQgZHJvcCBl
        dmVudHM6CgogICogYGRyYWdTdGFydGAKICAqIGBkcmFnYAogICogYGRyYWdF
        bnRlcmAKICAqIGBkcmFnTGVhdmVgCiAgKiBgZHJvcGAKICAqIGBkcmFnRW5k
        YAoKICAjIyBIYW5kbGViYXJzIGB7e3ZpZXd9fWAgSGVscGVyCgogIE90aGVy
        IGBFbWJlci5WaWV3YCBpbnN0YW5jZXMgY2FuIGJlIGluY2x1ZGVkIGFzIHBh
        cnQgb2YgYSB2aWV3J3MgdGVtcGxhdGUgYnkKICB1c2luZyB0aGUgYHt7dmll
        d319YCBIYW5kbGViYXJzIGhlbHBlci4gU2VlIFtFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMudmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycy5odG1sI21ldGhvZF92aWV3KQogIGZvciBhZGRpdGlvbmFsIGlu
        Zm9ybWF0aW9uLgoKICBAY2xhc3MgVmlldwogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAZXh0ZW5kcyBFbWJlci5Db3JlVmlldwoqLwpFbWJlci5WaWV3ID0gRW1i
        ZXIuQ29yZVZpZXcuZXh0ZW5kKAovKiogQHNjb3BlIEVtYmVyLlZpZXcucHJv
        dG90eXBlICovIHsKCiAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogWydjbGFz
        c05hbWVzJywgJ2NsYXNzTmFtZUJpbmRpbmdzJywgJ2F0dHJpYnV0ZUJpbmRp
        bmdzJ10sCgogIC8qKgogICAgQHByb3BlcnR5IGlzVmlldwogICAgQHR5cGUg
        Qm9vbGVhbgogICAgQGRlZmF1bHQgdHJ1ZQogICAgQGZpbmFsCiAgKi8KICBp
        c1ZpZXc6IHRydWUsCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBURU1QTEFU
        RSBTVVBQT1JUCiAgLy8KCiAgLyoqCiAgICBUaGUgbmFtZSBvZiB0aGUgdGVt
        cGxhdGUgdG8gbG9va3VwIGlmIG5vIHRlbXBsYXRlIGlzIHByb3ZpZGVkLgoK
        ICAgIGBFbWJlci5WaWV3YCB3aWxsIGxvb2sgZm9yIGEgdGVtcGxhdGUgd2l0
        aCB0aGlzIG5hbWUgaW4gdGhpcyB2aWV3J3MKICAgIGB0ZW1wbGF0ZXNgIG9i
        amVjdC4gQnkgZGVmYXVsdCwgdGhpcyB3aWxsIGJlIGEgZ2xvYmFsIG9iamVj
        dAogICAgc2hhcmVkIGluIGBFbWJlci5URU1QTEFURVNgLgoKICAgIEBwcm9w
        ZXJ0eSB0ZW1wbGF0ZU5hbWUKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1
        bHQgbnVsbAogICovCiAgdGVtcGxhdGVOYW1lOiBudWxsLAoKICAvKioKICAg
        IFRoZSBuYW1lIG9mIHRoZSBsYXlvdXQgdG8gbG9va3VwIGlmIG5vIGxheW91
        dCBpcyBwcm92aWRlZC4KCiAgICBgRW1iZXIuVmlld2Agd2lsbCBsb29rIGZv
        ciBhIHRlbXBsYXRlIHdpdGggdGhpcyBuYW1lIGluIHRoaXMgdmlldydzCiAg
        ICBgdGVtcGxhdGVzYCBvYmplY3QuIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCBi
        ZSBhIGdsb2JhbCBvYmplY3QKICAgIHNoYXJlZCBpbiBgRW1iZXIuVEVNUExB
        VEVTYC4KCiAgICBAcHJvcGVydHkgbGF5b3V0TmFtZQogICAgQHR5cGUgU3Ry
        aW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBsYXlvdXROYW1lOiBudWxs
        LAoKICAvKioKICAgIFRoZSBoYXNoIGluIHdoaWNoIHRvIGxvb2sgZm9yIGB0
        ZW1wbGF0ZU5hbWVgLgoKICAgIEBwcm9wZXJ0eSB0ZW1wbGF0ZXMKICAgIEB0
        eXBlIEVtYmVyLk9iamVjdAogICAgQGRlZmF1bHQgRW1iZXIuVEVNUExBVEVT
        CiAgKi8KICB0ZW1wbGF0ZXM6IEVtYmVyLlRFTVBMQVRFUywKCiAgLyoqCiAg
        ICBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIHZpZXcuIFRoaXMg
        c2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdAogICAgYWNjZXB0cyBhbiBvcHRp
        b25hbCBjb250ZXh0IHBhcmFtZXRlciBhbmQgcmV0dXJucyBhIHN0cmluZyBv
        ZiBIVE1MIHRoYXQKICAgIHdpbGwgYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9N
        IHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgdmlldy4KCiAgICBJbiBnZW5lcmFs
        LCB5b3Ugc2hvdWxkIHNldCB0aGUgYHRlbXBsYXRlTmFtZWAgcHJvcGVydHkg
        aW5zdGVhZCBvZiBzZXR0aW5nCiAgICB0aGUgdGVtcGxhdGUgeW91cnNlbGYu
        CgogICAgQHByb3BlcnR5IHRlbXBsYXRlCiAgICBAdHlwZSBGdW5jdGlvbgog
        ICovCiAgdGVtcGxhdGU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7IHJldHVy
        biB2YWx1ZTsgfQoKICAgIHZhciB0ZW1wbGF0ZU5hbWUgPSBnZXQodGhpcywg
        J3RlbXBsYXRlTmFtZScpLAogICAgICAgIHRlbXBsYXRlID0gdGhpcy50ZW1w
        bGF0ZUZvck5hbWUodGVtcGxhdGVOYW1lLCAndGVtcGxhdGUnKTsKCiAgICBF
        bWJlci5hc3NlcnQoIllvdSBzcGVjaWZpZWQgdGhlIHRlbXBsYXRlTmFtZSAi
        ICsgdGVtcGxhdGVOYW1lICsgIiBmb3IgIiArIHRoaXMgKyAiLCBidXQgaXQg
        ZGlkIG5vdCBleGlzdC4iLCAhdGVtcGxhdGVOYW1lIHx8IHRlbXBsYXRlKTsK
        CiAgICByZXR1cm4gdGVtcGxhdGUgfHwgZ2V0KHRoaXMsICdkZWZhdWx0VGVt
        cGxhdGUnKTsKICB9KS5wcm9wZXJ0eSgndGVtcGxhdGVOYW1lJyksCgogIC8q
        KgogICAgVGhlIGNvbnRyb2xsZXIgbWFuYWdpbmcgdGhpcyB2aWV3LiBJZiB0
        aGlzIHByb3BlcnR5IGlzIHNldCwgaXQgd2lsbCBiZQogICAgbWFkZSBhdmFp
        bGFibGUgZm9yIHVzZSBieSB0aGUgdGVtcGxhdGUuCgogICAgQHByb3BlcnR5
        IGNvbnRyb2xsZXIKICAgIEB0eXBlIE9iamVjdAogICovCiAgY29udHJvbGxl
        cjogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgcGFy
        ZW50VmlldyA9IGdldCh0aGlzLCAnX3BhcmVudFZpZXcnKTsKICAgIHJldHVy
        biBwYXJlbnRWaWV3ID8gZ2V0KHBhcmVudFZpZXcsICdjb250cm9sbGVyJykg
        OiBudWxsOwogIH0pLnByb3BlcnR5KCdfcGFyZW50VmlldycpLAoKICAvKioK
        ICAgIEEgdmlldyBtYXkgY29udGFpbiBhIGxheW91dC4gQSBsYXlvdXQgaXMg
        YSByZWd1bGFyIHRlbXBsYXRlIGJ1dAogICAgc3VwZXJzZWRlcyB0aGUgYHRl
        bXBsYXRlYCBwcm9wZXJ0eSBkdXJpbmcgcmVuZGVyaW5nLiBJdCBpcyB0aGUK
        ICAgIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsYXlvdXQgdGVtcGxhdGUgdG8g
        cmV0cmlldmUgdGhlIGB0ZW1wbGF0ZWAKICAgIHByb3BlcnR5IGZyb20gdGhl
        IHZpZXcgKG9yIGFsdGVybmF0aXZlbHksIGNhbGwgYEhhbmRsZWJhcnMuaGVs
        cGVycy55aWVsZGAsCiAgICBge3t5aWVsZH19YCkgdG8gcmVuZGVyIGl0IGlu
        IHRoZSBjb3JyZWN0IGxvY2F0aW9uLgoKICAgIFRoaXMgaXMgdXNlZnVsIGZv
        ciBhIHZpZXcgdGhhdCBoYXMgYSBzaGFyZWQgd3JhcHBlciwgYnV0IHdoaWNo
        IGRlbGVnYXRlcwogICAgdGhlIHJlbmRlcmluZyBvZiB0aGUgY29udGVudHMg
        b2YgdGhlIHdyYXBwZXIgdG8gdGhlIGB0ZW1wbGF0ZWAgcHJvcGVydHkKICAg
        IG9uIGEgc3ViY2xhc3MuCgogICAgQHByb3BlcnR5IGxheW91dAogICAgQHR5
        cGUgRnVuY3Rpb24KICAqLwogIGxheW91dDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oa2V5KSB7CiAgICB2YXIgbGF5b3V0TmFtZSA9IGdldCh0aGlzLCAn
        bGF5b3V0TmFtZScpLAogICAgICAgIGxheW91dCA9IHRoaXMudGVtcGxhdGVG
        b3JOYW1lKGxheW91dE5hbWUsICdsYXlvdXQnKTsKCiAgICBFbWJlci5hc3Nl
        cnQoIllvdSBzcGVjaWZpZWQgdGhlIGxheW91dE5hbWUgIiArIGxheW91dE5h
        bWUgKyAiIGZvciAiICsgdGhpcyArICIsIGJ1dCBpdCBkaWQgbm90IGV4aXN0
        LiIsICFsYXlvdXROYW1lIHx8IGxheW91dCk7CgogICAgcmV0dXJuIGxheW91
        dCB8fCBnZXQodGhpcywgJ2RlZmF1bHRMYXlvdXQnKTsKICB9KS5wcm9wZXJ0
        eSgnbGF5b3V0TmFtZScpLAoKICBfeWllbGQ6IGZ1bmN0aW9uKGNvbnRleHQs
        IG9wdGlvbnMpIHsKICAgIHZhciB0ZW1wbGF0ZSA9IGdldCh0aGlzLCAndGVt
        cGxhdGUnKTsKICAgIGlmICh0ZW1wbGF0ZSkgeyB0ZW1wbGF0ZShjb250ZXh0
        LCBvcHRpb25zKTsgfQogIH0sCgogIHRlbXBsYXRlRm9yTmFtZTogZnVuY3Rp
        b24obmFtZSwgdHlwZSkgewogICAgaWYgKCFuYW1lKSB7IHJldHVybjsgfQog
        ICAgRW1iZXIuYXNzZXJ0KCJ0ZW1wbGF0ZU5hbWVzIGFyZSBub3QgYWxsb3dl
        ZCB0byBjb250YWluIHBlcmlvZHM6ICIrbmFtZSwgbmFtZS5pbmRleE9mKCcu
        JykgPT09IC0xKTsKCiAgICAvLyB0aGUgZGVmYXVsdENvbnRhaW5lciBpcyBk
        ZXByZWNhdGVkCiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIg
        fHwgKEVtYmVyLkNvbnRhaW5lciAmJiBFbWJlci5Db250YWluZXIuZGVmYXVs
        dENvbnRhaW5lcik7CiAgICByZXR1cm4gY29udGFpbmVyICYmIGNvbnRhaW5l
        ci5sb29rdXAoJ3RlbXBsYXRlOicgKyBuYW1lKTsKICB9LAoKICAvKioKICAg
        IFRoZSBvYmplY3QgZnJvbSB3aGljaCB0ZW1wbGF0ZXMgc2hvdWxkIGFjY2Vz
        cyBwcm9wZXJ0aWVzLgoKICAgIFRoaXMgb2JqZWN0IHdpbGwgYmUgcGFzc2Vk
        IHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbiBlYWNoIHRpbWUgdGhlIHJlbmRl
        cgogICAgbWV0aG9kIGlzIGNhbGxlZCwgYnV0IGl0IGlzIHVwIHRvIHRoZSBp
        bmRpdmlkdWFsIGZ1bmN0aW9uIHRvIGRlY2lkZSB3aGF0CiAgICB0byBkbyB3
        aXRoIGl0LgoKICAgIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCBiZSB0aGUgdmll
        dydzIGNvbnRyb2xsZXIuCgogICAgQHByb3BlcnR5IGNvbnRleHQKICAgIEB0
        eXBlIE9iamVjdAogICovCiAgY29udGV4dDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgg
        PT09IDIpIHsKICAgICAgc2V0KHRoaXMsICdfY29udGV4dCcsIHZhbHVlKTsK
        ICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJu
        IGdldCh0aGlzLCAnX2NvbnRleHQnKTsKICAgIH0KICB9KS52b2xhdGlsZSgp
        LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgUHJpdmF0ZSBjb3B5IG9mIHRo
        ZSB2aWV3J3MgdGVtcGxhdGUgY29udGV4dC4gVGhpcyBjYW4gYmUgc2V0IGRp
        cmVjdGx5CiAgICBieSBIYW5kbGViYXJzIHdpdGhvdXQgdHJpZ2dlcmluZyB0
        aGUgb2JzZXJ2ZXIgdGhhdCBjYXVzZXMgdGhlIHZpZXcKICAgIHRvIGJlIHJl
        LXJlbmRlcmVkLgoKICAgIFRoZSBjb250ZXh0IG9mIGEgdmlldyBpcyBsb29r
        ZWQgdXAgYXMgZm9sbG93czoKCiAgICAxLiBTdXBwbGllZCBjb250ZXh0ICh1
        c3VhbGx5IGJ5IEhhbmRsZWJhcnMpCiAgICAyLiBTcGVjaWZpZWQgY29udHJv
        bGxlcgogICAgMy4gYHBhcmVudFZpZXdgJ3MgY29udGV4dCAoZm9yIGEgY2hp
        bGQgb2YgYSBDb250YWluZXJWaWV3KQoKICAgIFRoZSBjb2RlIGluIEhhbmRs
        ZWJhcnMgdGhhdCBvdmVycmlkZXMgdGhlIGBfY29udGV4dGAgcHJvcGVydHkg
        Zmlyc3QKICAgIGNoZWNrcyB0byBzZWUgd2hldGhlciB0aGUgdmlldyBoYXMg
        YSBzcGVjaWZpZWQgY29udHJvbGxlci4gVGhpcyBpcwogICAgc29tZXRoaW5n
        IG9mIGEgaGFjayBhbmQgc2hvdWxkIGJlIHJldmlzaXRlZC4KCiAgICBAcHJv
        cGVydHkgX2NvbnRleHQKICAqLwogIF9jb250ZXh0OiBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbihrZXkpIHsKICAgIHZhciBwYXJlbnRWaWV3LCBjb250cm9s
        bGVyOwoKICAgIGlmIChjb250cm9sbGVyID0gZ2V0KHRoaXMsICdjb250cm9s
        bGVyJykpIHsKICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7CiAgICB9CgogICAg
        cGFyZW50VmlldyA9IHRoaXMuX3BhcmVudFZpZXc7CiAgICBpZiAocGFyZW50
        VmlldykgewogICAgICByZXR1cm4gZ2V0KHBhcmVudFZpZXcsICdfY29udGV4
        dCcpOwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0pLAoKICAvKioKICAg
        IEBwcml2YXRlCgogICAgSWYgYSB2YWx1ZSB0aGF0IGFmZmVjdHMgdGVtcGxh
        dGUgcmVuZGVyaW5nIGNoYW5nZXMsIHRoZSB2aWV3IHNob3VsZCBiZQogICAg
        cmUtcmVuZGVyZWQgdG8gcmVmbGVjdCB0aGUgbmV3IHZhbHVlLgoKICAgIEBt
        ZXRob2QgX2NvbnRleHREaWRDaGFuZ2UKICAqLwogIF9jb250ZXh0RGlkQ2hh
        bmdlOiBFbWJlci5vYnNlcnZlcignY29udGV4dCcsIGZ1bmN0aW9uKCkgewog
        ICAgdGhpcy5yZXJlbmRlcigpOwogIH0pLAoKICAvKioKICAgIElmIGBmYWxz
        ZWAsIHRoZSB2aWV3IHdpbGwgYXBwZWFyIGhpZGRlbiBpbiBET00uCgogICAg
        QHByb3BlcnR5IGlzVmlzaWJsZQogICAgQHR5cGUgQm9vbGVhbgogICAgQGRl
        ZmF1bHQgbnVsbAogICovCiAgaXNWaXNpYmxlOiB0cnVlLAoKICAvKioKICAg
        IEBwcml2YXRlCgogICAgQXJyYXkgb2YgY2hpbGQgdmlld3MuIFlvdSBzaG91
        bGQgbmV2ZXIgZWRpdCB0aGlzIGFycmF5IGRpcmVjdGx5LgogICAgSW5zdGVh
        ZCwgdXNlIGBhcHBlbmRDaGlsZGAgYW5kIGByZW1vdmVGcm9tUGFyZW50YC4K
        CiAgICBAcHJvcGVydHkgY2hpbGRWaWV3cwogICAgQHR5cGUgQXJyYXkKICAg
        IEBkZWZhdWx0IFtdCiAgKi8KICBjaGlsZFZpZXdzOiBjaGlsZFZpZXdzUHJv
        cGVydHksCgogIF9jaGlsZFZpZXdzOiBFTVBUWV9BUlJBWSwKCiAgLy8gV2hl
        biBpdCdzIGEgdmlydHVhbCB2aWV3LCB3ZSBuZWVkIHRvIG5vdGlmeSB0aGUg
        cGFyZW50IHRoYXQgdGhlaXIKICAvLyBjaGlsZFZpZXdzIHdpbGwgY2hhbmdl
        LgogIF9jaGlsZFZpZXdzV2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2
        ZXIoJ2NoaWxkVmlld3MnLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlz
        VmlydHVhbCkgewogICAgICB2YXIgcGFyZW50VmlldyA9IGdldCh0aGlzLCAn
        cGFyZW50VmlldycpOwogICAgICBpZiAocGFyZW50VmlldykgeyBFbWJlci5w
        cm9wZXJ0eVdpbGxDaGFuZ2UocGFyZW50VmlldywgJ2NoaWxkVmlld3MnKTsg
        fQogICAgfQogIH0pLAoKICAvLyBXaGVuIGl0J3MgYSB2aXJ0dWFsIHZpZXcs
        IHdlIG5lZWQgdG8gbm90aWZ5IHRoZSBwYXJlbnQgdGhhdCB0aGVpcgogIC8v
        IGNoaWxkVmlld3MgZGlkIGNoYW5nZS4KICBfY2hpbGRWaWV3c0RpZENoYW5n
        ZTogRW1iZXIub2JzZXJ2ZXIoJ2NoaWxkVmlld3MnLCBmdW5jdGlvbigpIHsK
        ICAgIGlmICh0aGlzLmlzVmlydHVhbCkgewogICAgICB2YXIgcGFyZW50Vmll
        dyA9IGdldCh0aGlzLCAncGFyZW50VmlldycpOwogICAgICBpZiAocGFyZW50
        VmlldykgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZShwYXJlbnRWaWV3LCAn
        Y2hpbGRWaWV3cycpOyB9CiAgICB9CiAgfSksCgogIC8qKgogICAgUmV0dXJu
        IHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2Yg
        dGhlIHByb3ZpZGVkCiAgICBjbGFzcy4KCiAgICBAcHJvcGVydHkgbmVhcmVz
        dEluc3RhbmNlT2YKICAgIEBwYXJhbSB7Q2xhc3N9IGtsYXNzIFN1YmNsYXNz
        IG9mIEVtYmVyLlZpZXcgKG9yIEVtYmVyLlZpZXcgaXRzZWxmKQogICAgQHJl
        dHVybiBFbWJlci5WaWV3CiAgICBAZGVwcmVjYXRlZAogICovCiAgbmVhcmVz
        dEluc3RhbmNlT2Y6IGZ1bmN0aW9uKGtsYXNzKSB7CiAgICBFbWJlci5kZXBy
        ZWNhdGUoIm5lYXJlc3RJbnN0YW5jZU9mIGlzIGRlcHJlY2F0ZWQgYW5kIHdp
        bGwgYmUgcmVtb3ZlZCBmcm9tIGZ1dHVyZSByZWxlYXNlcy4gVXNlIG5lYXJl
        c3RPZlR5cGUuIik7CiAgICB2YXIgdmlldyA9IGdldCh0aGlzLCAncGFyZW50
        VmlldycpOwoKICAgIHdoaWxlICh2aWV3KSB7CiAgICAgIGlmICh2aWV3IGlu
        c3RhbmNlb2Yga2xhc3MpIHsgcmV0dXJuIHZpZXc7IH0KICAgICAgdmlldyA9
        IGdldCh2aWV3LCAncGFyZW50VmlldycpOwogICAgfQogIH0sCgogIC8qKgog
        ICAgUmV0dXJuIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgaXMgYW4gaW5z
        dGFuY2Ugb2YgdGhlIHByb3ZpZGVkCiAgICBjbGFzcyBvciBtaXhpbi4KCiAg
        ICBAcHJvcGVydHkgbmVhcmVzdE9mVHlwZQogICAgQHBhcmFtIHtDbGFzcyxN
        aXhpbn0ga2xhc3MgU3ViY2xhc3Mgb2YgRW1iZXIuVmlldyAob3IgRW1iZXIu
        VmlldyBpdHNlbGYpLAogICAgICAgICAgIG9yIGFuIGluc3RhbmNlIG9mIEVt
        YmVyLk1peGluLgogICAgQHJldHVybiBFbWJlci5WaWV3CiAgKi8KICBuZWFy
        ZXN0T2ZUeXBlOiBmdW5jdGlvbihrbGFzcykgewogICAgdmFyIHZpZXcgPSBn
        ZXQodGhpcywgJ3BhcmVudFZpZXcnKSwKICAgICAgICBpc09mVHlwZSA9IGts
        YXNzIGluc3RhbmNlb2YgRW1iZXIuTWl4aW4gPwogICAgICAgICAgICAgICAg
        ICAgZnVuY3Rpb24odmlldykgeyByZXR1cm4ga2xhc3MuZGV0ZWN0KHZpZXcp
        OyB9IDoKICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZpZXcpIHsgcmV0
        dXJuIGtsYXNzLmRldGVjdCh2aWV3LmNvbnN0cnVjdG9yKTsgfTsKCiAgICB3
        aGlsZSAodmlldykgewogICAgICBpZiAoaXNPZlR5cGUodmlldykpIHsgcmV0
        dXJuIHZpZXc7IH0KICAgICAgdmlldyA9IGdldCh2aWV3LCAncGFyZW50Vmll
        dycpOwogICAgfQogIH0sCgogIC8qKgogICAgUmV0dXJuIHRoZSBuZWFyZXN0
        IGFuY2VzdG9yIHRoYXQgaGFzIGEgZ2l2ZW4gcHJvcGVydHkuCgogICAgQHBy
        b3BlcnR5IG5lYXJlc3RXaXRoUHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5n
        fSBwcm9wZXJ0eSBBIHByb3BlcnR5IG5hbWUKICAgIEByZXR1cm4gRW1iZXIu
        VmlldwogICovCiAgbmVhcmVzdFdpdGhQcm9wZXJ0eTogZnVuY3Rpb24ocHJv
        cGVydHkpIHsKICAgIHZhciB2aWV3ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3
        Jyk7CgogICAgd2hpbGUgKHZpZXcpIHsKICAgICAgaWYgKHByb3BlcnR5IGlu
        IHZpZXcpIHsgcmV0dXJuIHZpZXc7IH0KICAgICAgdmlldyA9IGdldCh2aWV3
        LCAncGFyZW50VmlldycpOwogICAgfQogIH0sCgogIC8qKgogICAgUmV0dXJu
        IHRoZSBuZWFyZXN0IGFuY2VzdG9yIHdob3NlIHBhcmVudCBpcyBhbiBpbnN0
        YW5jZSBvZgogICAgYGtsYXNzYC4KCiAgICBAcHJvcGVydHkgbmVhcmVzdENo
        aWxkT2YKICAgIEBwYXJhbSB7Q2xhc3N9IGtsYXNzIFN1YmNsYXNzIG9mIEVt
        YmVyLlZpZXcgKG9yIEVtYmVyLlZpZXcgaXRzZWxmKQogICAgQHJldHVybiBF
        bWJlci5WaWV3CiAgKi8KICBuZWFyZXN0Q2hpbGRPZjogZnVuY3Rpb24oa2xh
        c3MpIHsKICAgIHZhciB2aWV3ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Jyk7
        CgogICAgd2hpbGUgKHZpZXcpIHsKICAgICAgaWYgKGdldCh2aWV3LCAncGFy
        ZW50VmlldycpIGluc3RhbmNlb2Yga2xhc3MpIHsgcmV0dXJuIHZpZXc7IH0K
        ICAgICAgdmlldyA9IGdldCh2aWV3LCAncGFyZW50VmlldycpOwogICAgfQog
        IH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBXaGVuIHRoZSBwYXJlbnQg
        dmlldyBjaGFuZ2VzLCByZWN1cnNpdmVseSBpbnZhbGlkYXRlIGBjb250cm9s
        bGVyYAoKICAgIEBtZXRob2QgX3BhcmVudFZpZXdEaWRDaGFuZ2UKICAqLwog
        IF9wYXJlbnRWaWV3RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignX3BhcmVu
        dFZpZXcnLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRGVzdHJveWlu
        ZykgeyByZXR1cm47IH0KCiAgICB0aGlzLnRyaWdnZXIoJ3BhcmVudFZpZXdE
        aWRDaGFuZ2UnKTsKCiAgICBpZiAoZ2V0KHRoaXMsICdwYXJlbnRWaWV3LmNv
        bnRyb2xsZXInKSAmJiAhZ2V0KHRoaXMsICdjb250cm9sbGVyJykpIHsKICAg
        ICAgdGhpcy5ub3RpZnlQcm9wZXJ0eUNoYW5nZSgnY29udHJvbGxlcicpOwog
        ICAgfQogIH0pLAoKICBfY29udHJvbGxlckRpZENoYW5nZTogRW1iZXIub2Jz
        ZXJ2ZXIoJ2NvbnRyb2xsZXInLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlz
        LmlzRGVzdHJveWluZykgeyByZXR1cm47IH0KCiAgICB0aGlzLnJlcmVuZGVy
        KCk7CgogICAgdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcp
        IHsKICAgICAgdmlldy5wcm9wZXJ0eURpZENoYW5nZSgnY29udHJvbGxlcicp
        OwogICAgfSk7CiAgfSksCgogIGNsb25lS2V5d29yZHM6IGZ1bmN0aW9uKCkg
        ewogICAgdmFyIHRlbXBsYXRlRGF0YSA9IGdldCh0aGlzLCAndGVtcGxhdGVE
        YXRhJyk7CgogICAgdmFyIGtleXdvcmRzID0gdGVtcGxhdGVEYXRhID8gRW1i
        ZXIuY29weSh0ZW1wbGF0ZURhdGEua2V5d29yZHMpIDoge307CiAgICBzZXQo
        a2V5d29yZHMsICd2aWV3JywgZ2V0KHRoaXMsICdjb25jcmV0ZVZpZXcnKSk7
        CiAgICBzZXQoa2V5d29yZHMsICdfdmlldycsIHRoaXMpOwogICAgc2V0KGtl
        eXdvcmRzLCAnY29udHJvbGxlcicsIGdldCh0aGlzLCAnY29udHJvbGxlcicp
        KTsKCiAgICByZXR1cm4ga2V5d29yZHM7CiAgfSwKCiAgLyoqCiAgICBDYWxs
        ZWQgb24geW91ciB2aWV3IHdoZW4gaXQgc2hvdWxkIHB1c2ggc3RyaW5ncyBv
        ZiBIVE1MIGludG8gYQogICAgYEVtYmVyLlJlbmRlckJ1ZmZlcmAuIE1vc3Qg
        dXNlcnMgd2lsbCB3YW50IHRvIG92ZXJyaWRlIHRoZSBgdGVtcGxhdGVgCiAg
        ICBvciBgdGVtcGxhdGVOYW1lYCBwcm9wZXJ0aWVzIGluc3RlYWQgb2YgdGhp
        cyBtZXRob2QuCgogICAgQnkgZGVmYXVsdCwgYEVtYmVyLlZpZXdgIHdpbGwg
        bG9vayBmb3IgYSBmdW5jdGlvbiBpbiB0aGUgYHRlbXBsYXRlYAogICAgcHJv
        cGVydHkgYW5kIGludm9rZSBpdCB3aXRoIHRoZSB2YWx1ZSBvZiBgY29udGV4
        dGAuIFRoZSB2YWx1ZSBvZgogICAgYGNvbnRleHRgIHdpbGwgYmUgdGhlIHZp
        ZXcncyBjb250cm9sbGVyIHVubGVzcyB5b3Ugb3ZlcnJpZGUgaXQuCgogICAg
        QG1ldGhvZCByZW5kZXIKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVmZmVy
        fSBidWZmZXIgVGhlIHJlbmRlciBidWZmZXIKICAqLwogIHJlbmRlcjogZnVu
        Y3Rpb24oYnVmZmVyKSB7CiAgICAvLyBJZiB0aGlzIHZpZXcgaGFzIGEgbGF5
        b3V0LCBpdCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlCiAgICAvLyB0
        aGUgbGF5b3V0IHRvIHJlbmRlciB0aGUgdmlldydzIHRlbXBsYXRlLiBPdGhl
        cndpc2UsIHJlbmRlciB0aGUgdGVtcGxhdGUKICAgIC8vIGRpcmVjdGx5Lgog
        ICAgdmFyIHRlbXBsYXRlID0gZ2V0KHRoaXMsICdsYXlvdXQnKSB8fCBnZXQo
        dGhpcywgJ3RlbXBsYXRlJyk7CgogICAgaWYgKHRlbXBsYXRlKSB7CiAgICAg
        IHZhciBjb250ZXh0ID0gZ2V0KHRoaXMsICdjb250ZXh0Jyk7CiAgICAgIHZh
        ciBrZXl3b3JkcyA9IHRoaXMuY2xvbmVLZXl3b3JkcygpOwogICAgICB2YXIg
        b3V0cHV0OwoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdmlldzogdGhp
        cywKICAgICAgICBidWZmZXI6IGJ1ZmZlciwKICAgICAgICBpc1JlbmRlckRh
        dGE6IHRydWUsCiAgICAgICAga2V5d29yZHM6IGtleXdvcmRzLAogICAgICAg
        IGluc2lkZUdyb3VwOiBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YS5pbnNpZGVH
        cm91cCcpCiAgICAgIH07CgogICAgICAvLyBJbnZva2UgdGhlIHRlbXBsYXRl
        IHdpdGggdGhlIHByb3ZpZGVkIHRlbXBsYXRlIGNvbnRleHQsIHdoaWNoCiAg
        ICAgIC8vIGlzIHRoZSB2aWV3J3MgY29udHJvbGxlciBieSBkZWZhdWx0LiBB
        IGhhc2ggb2YgZGF0YSBpcyBhbHNvIHBhc3NlZCB0aGF0IHByb3ZpZGVzCiAg
        ICAgIC8vIHRoZSB0ZW1wbGF0ZSB3aXRoIGFjY2VzcyB0byB0aGUgdmlldyBh
        bmQgcmVuZGVyIGJ1ZmZlci4KCiAgICAgIEVtYmVyLmFzc2VydCgndGVtcGxh
        dGUgbXVzdCBiZSBhIGZ1bmN0aW9uLiBEaWQgeW91IG1lYW4gdG8gY2FsbCBF
        bWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIi4uLiIpIG9yIHNwZWNpZnkgdGVt
        cGxhdGVOYW1lIGluc3RlYWQ/JywgdHlwZW9mIHRlbXBsYXRlID09PSAnZnVu
        Y3Rpb24nKTsKICAgICAgLy8gVGhlIHRlbXBsYXRlIHNob3VsZCB3cml0ZSBk
        aXJlY3RseSB0byB0aGUgcmVuZGVyIGJ1ZmZlciBpbnN0ZWFkCiAgICAgIC8v
        IG9mIHJldHVybmluZyBhIHN0cmluZy4KICAgICAgb3V0cHV0ID0gdGVtcGxh
        dGUoY29udGV4dCwgeyBkYXRhOiBkYXRhIH0pOwoKICAgICAgLy8gSWYgdGhl
        IHRlbXBsYXRlIHJldHVybmVkIGEgc3RyaW5nIGluc3RlYWQgb2Ygd3JpdGlu
        ZyB0byB0aGUgYnVmZmVyLAogICAgICAvLyBwdXNoIHRoZSBzdHJpbmcgb250
        byB0aGUgYnVmZmVyLgogICAgICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQp
        IHsgYnVmZmVyLnB1c2gob3V0cHV0KTsgfQogICAgfQogIH0sCgogIC8qKgog
        ICAgUmVuZGVycyB0aGUgdmlldyBhZ2Fpbi4gVGhpcyB3aWxsIHdvcmsgcmVn
        YXJkbGVzcyBvZiB3aGV0aGVyIHRoZQogICAgdmlldyBpcyBhbHJlYWR5IGlu
        IHRoZSBET00gb3Igbm90LiBJZiB0aGUgdmlldyBpcyBpbiB0aGUgRE9NLCB0
        aGUKICAgIHJlbmRlcmluZyBwcm9jZXNzIHdpbGwgYmUgZGVmZXJyZWQgdG8g
        Z2l2ZSBiaW5kaW5ncyBhIGNoYW5jZQogICAgdG8gc3luY2hyb25pemUuCgog
        ICAgSWYgY2hpbGRyZW4gd2VyZSBhZGRlZCBkdXJpbmcgdGhlIHJlbmRlcmlu
        ZyBwcm9jZXNzIHVzaW5nIGBhcHBlbmRDaGlsZGAsCiAgICBgcmVyZW5kZXJg
        IHdpbGwgcmVtb3ZlIHRoZW0sIGJlY2F1c2UgdGhleSB3aWxsIGJlIGFkZGVk
        IGFnYWluCiAgICBpZiBuZWVkZWQgYnkgdGhlIG5leHQgYHJlbmRlcmAuCgog
        ICAgSW4gZ2VuZXJhbCwgaWYgdGhlIGRpc3BsYXkgb2YgeW91ciB2aWV3IGNo
        YW5nZXMsIHlvdSBzaG91bGQgbW9kaWZ5CiAgICB0aGUgRE9NIGVsZW1lbnQg
        ZGlyZWN0bHkgaW5zdGVhZCBvZiBtYW51YWxseSBjYWxsaW5nIGByZXJlbmRl
        cmAsIHdoaWNoIGNhbgogICAgYmUgc2xvdy4KCiAgICBAbWV0aG9kIHJlcmVu
        ZGVyCiAgKi8KICByZXJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
        dGhpcy5jdXJyZW50U3RhdGUucmVyZW5kZXIodGhpcyk7CiAgfSwKCiAgY2xl
        YXJSZW5kZXJlZENoaWxkcmVuOiBmdW5jdGlvbigpIHsKICAgIHZhciBsZW5n
        dGhCZWZvcmUgPSB0aGlzLmxlbmd0aEJlZm9yZVJlbmRlciwKICAgICAgICBs
        ZW5ndGhBZnRlciAgPSB0aGlzLmxlbmd0aEFmdGVyUmVuZGVyOwoKICAgIC8v
        IElmIHRoZXJlIHdlcmUgY2hpbGQgdmlld3MgY3JlYXRlZCBkdXJpbmcgdGhl
        IGxhc3QgY2FsbCB0byByZW5kZXIoKSwKICAgIC8vIHJlbW92ZSB0aGVtIHVu
        ZGVyIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhleSB3aWxsIGJlIHJlLWNyZWF0
        ZWQgd2hlbgogICAgLy8gd2UgcmUtcmVuZGVyLgoKICAgIC8vIFZJRVctVE9E
        TzogVW5pdCB0ZXN0IHRoaXMgcGF0aC4KICAgIHZhciBjaGlsZFZpZXdzID0g
        dGhpcy5fY2hpbGRWaWV3czsKICAgIGZvciAodmFyIGk9bGVuZ3RoQWZ0ZXIt
        MTsgaT49bGVuZ3RoQmVmb3JlOyBpLS0pIHsKICAgICAgaWYgKGNoaWxkVmll
        d3NbaV0pIHsgY2hpbGRWaWV3c1tpXS5kZXN0cm95KCk7IH0KICAgIH0KICB9
        LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgSXRlcmF0ZXMgb3ZlciB0aGUg
        dmlldydzIGBjbGFzc05hbWVCaW5kaW5nc2AgYXJyYXksIGluc2VydHMgdGhl
        IHZhbHVlCiAgICBvZiB0aGUgc3BlY2lmaWVkIHByb3BlcnR5IGludG8gdGhl
        IGBjbGFzc05hbWVzYCBhcnJheSwgdGhlbiBjcmVhdGVzIGFuCiAgICBvYnNl
        cnZlciB0byB1cGRhdGUgdGhlIHZpZXcncyBlbGVtZW50IGlmIHRoZSBib3Vu
        ZCBwcm9wZXJ0eSBldmVyIGNoYW5nZXMKICAgIGluIHRoZSBmdXR1cmUuCgog
        ICAgQG1ldGhvZCBfYXBwbHlDbGFzc05hbWVCaW5kaW5ncwogICovCiAgX2Fw
        cGx5Q2xhc3NOYW1lQmluZGluZ3M6IGZ1bmN0aW9uKGNsYXNzQmluZGluZ3Mp
        IHsKICAgIHZhciBjbGFzc05hbWVzID0gdGhpcy5jbGFzc05hbWVzLAogICAg
        ZWxlbSwgbmV3Q2xhc3MsIGRhc2hlcml6ZWRDbGFzczsKCiAgICAvLyBMb29w
        IHRocm91Z2ggYWxsIG9mIHRoZSBjb25maWd1cmVkIGJpbmRpbmdzLiBUaGVz
        ZSB3aWxsIGJlIGVpdGhlcgogICAgLy8gcHJvcGVydHkgbmFtZXMgKCdpc1Vy
        Z2VudCcpIG9yIHByb3BlcnR5IHBhdGhzIHJlbGF0aXZlIHRvIHRoZSB2aWV3
        CiAgICAvLyAoJ2NvbnRlbnQuaXNVcmdlbnQnKQogICAgYV9mb3JFYWNoKGNs
        YXNzQmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHsKCiAgICAgIC8vIFZh
        cmlhYmxlIGluIHdoaWNoIHRoZSBvbGQgY2xhc3MgdmFsdWUgaXMgc2F2ZWQu
        IFRoZSBvYnNlcnZlciBmdW5jdGlvbgogICAgICAvLyBjbG9zZXMgb3ZlciB0
        aGlzIHZhcmlhYmxlLCBzbyBpdCBrbm93cyB3aGljaCBzdHJpbmcgdG8gcmVt
        b3ZlIHdoZW4KICAgICAgLy8gdGhlIHByb3BlcnR5IGNoYW5nZXMuCiAgICAg
        IHZhciBvbGRDbGFzczsKICAgICAgLy8gRXh0cmFjdCBqdXN0IHRoZSBwcm9w
        ZXJ0eSBuYW1lIGZyb20gYmluZGluZ3MgbGlrZSAnZm9vOmJhcicKICAgICAg
        dmFyIHBhcnNlZFBhdGggPSBFbWJlci5WaWV3Ll9wYXJzZVByb3BlcnR5UGF0
        aChiaW5kaW5nKTsKCiAgICAgIC8vIFNldCB1cCBhbiBvYnNlcnZlciBvbiB0
        aGUgY29udGV4dC4gSWYgdGhlIHByb3BlcnR5IGNoYW5nZXMsIHRvZ2dsZSB0
        aGUKICAgICAgLy8gY2xhc3MgbmFtZS4KICAgICAgdmFyIG9ic2VydmVyID0g
        ZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHZhbHVl
        IG9mIHRoZSBwcm9wZXJ0eQogICAgICAgIG5ld0NsYXNzID0gdGhpcy5fY2xh
        c3NTdHJpbmdGb3JQcm9wZXJ0eShiaW5kaW5nKTsKICAgICAgICBlbGVtID0g
        dGhpcy4kKCk7CgogICAgICAgIC8vIElmIHdlIGhhZCBwcmV2aW91c2x5IGFk
        ZGVkIGEgY2xhc3MgdG8gdGhlIGVsZW1lbnQsIHJlbW92ZSBpdC4KICAgICAg
        ICBpZiAob2xkQ2xhc3MpIHsKICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3Mo
        b2xkQ2xhc3MpOwogICAgICAgICAgLy8gQWxzbyByZW1vdmUgZnJvbSBjbGFz
        c05hbWVzIHNvIHRoYXQgaWYgdGhlIHZpZXcgZ2V0cyByZXJlbmRlcmVkLAog
        ICAgICAgICAgLy8gdGhlIGNsYXNzIGRvZXNuJ3QgZ2V0IGFkZGVkIGJhY2sg
        dG8gdGhlIERPTS4KICAgICAgICAgIGNsYXNzTmFtZXMucmVtb3ZlT2JqZWN0
        KG9sZENsYXNzKTsKICAgICAgICB9CgogICAgICAgIC8vIElmIG5lY2Vzc2Fy
        eSwgYWRkIGEgbmV3IGNsYXNzLiBNYWtlIHN1cmUgd2Uga2VlcCB0cmFjayBv
        ZiBpdCBzbwogICAgICAgIC8vIGl0IGNhbiBiZSByZW1vdmVkIGluIHRoZSBm
        dXR1cmUuCiAgICAgICAgaWYgKG5ld0NsYXNzKSB7CiAgICAgICAgICBlbGVt
        LmFkZENsYXNzKG5ld0NsYXNzKTsKICAgICAgICAgIG9sZENsYXNzID0gbmV3
        Q2xhc3M7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9sZENsYXNzID0g
        bnVsbDsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyBHZXQgdGhlIGNs
        YXNzIG5hbWUgZm9yIHRoZSBwcm9wZXJ0eSBhdCBpdHMgY3VycmVudCB2YWx1
        ZQogICAgICBkYXNoZXJpemVkQ2xhc3MgPSB0aGlzLl9jbGFzc1N0cmluZ0Zv
        clByb3BlcnR5KGJpbmRpbmcpOwoKICAgICAgaWYgKGRhc2hlcml6ZWRDbGFz
        cykgewogICAgICAgIC8vIEVuc3VyZSB0aGF0IGl0IGdldHMgaW50byB0aGUg
        Y2xhc3NOYW1lcyBhcnJheQogICAgICAgIC8vIHNvIGl0IGlzIGRpc3BsYXll
        ZCB3aGVuIHdlIHJlbmRlci4KICAgICAgICBhX2FkZE9iamVjdChjbGFzc05h
        bWVzLCBkYXNoZXJpemVkQ2xhc3MpOwoKICAgICAgICAvLyBTYXZlIGEgcmVm
        ZXJlbmNlIHRvIHRoZSBjbGFzcyBuYW1lIHNvIHdlIGNhbiByZW1vdmUgaXQK
        ICAgICAgICAvLyBpZiB0aGUgb2JzZXJ2ZXIgZmlyZXMuIFJlbWVtYmVyIHRo
        YXQgdGhpcyB2YXJpYWJsZSBoYXMKICAgICAgICAvLyBiZWVuIGNsb3NlZCBv
        dmVyIGJ5IHRoZSBvYnNlcnZlci4KICAgICAgICBvbGRDbGFzcyA9IGRhc2hl
        cml6ZWRDbGFzczsKICAgICAgfQoKICAgICAgdGhpcy5yZWdpc3Rlck9ic2Vy
        dmVyKHRoaXMsIHBhcnNlZFBhdGgucGF0aCwgb2JzZXJ2ZXIpOwogICAgICAv
        LyBSZW1vdmUgY2xhc3NOYW1lIHNvIHdoZW4gdGhlIHZpZXcgaXMgcmVyZW5k
        ZXJlZCwKICAgICAgLy8gdGhlIGNsYXNzTmFtZSBpcyBhZGRlZCBiYXNlZCBv
        biBiaW5kaW5nIHJlZXZhbHVhdGlvbgogICAgICB0aGlzLm9uZSgnd2lsbENs
        ZWFyUmVuZGVyJywgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKG9sZENsYXNz
        KSB7CiAgICAgICAgICBjbGFzc05hbWVzLnJlbW92ZU9iamVjdChvbGRDbGFz
        cyk7CiAgICAgICAgICBvbGRDbGFzcyA9IG51bGw7CiAgICAgICAgfQogICAg
        ICB9KTsKCiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgSXRlcmF0ZXMgdGhyb3VnaCB0aGUgdmlldydzIGF0dHJpYnV0ZSBi
        aW5kaW5ncywgc2V0cyB1cCBvYnNlcnZlcnMgZm9yIGVhY2gsCiAgICB0aGVu
        IGFwcGxpZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZXMg
        dG8gdGhlIHBhc3NlZCByZW5kZXIgYnVmZmVyLgoKICAgIEBtZXRob2QgX2Fw
        cGx5QXR0cmlidXRlQmluZGluZ3MKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVy
        QnVmZmVyfSBidWZmZXIKICAqLwogIF9hcHBseUF0dHJpYnV0ZUJpbmRpbmdz
        OiBmdW5jdGlvbihidWZmZXIsIGF0dHJpYnV0ZUJpbmRpbmdzKSB7CiAgICB2
        YXIgYXR0cmlidXRlVmFsdWUsIGVsZW07CgogICAgYV9mb3JFYWNoKGF0dHJp
        YnV0ZUJpbmRpbmdzLCBmdW5jdGlvbihiaW5kaW5nKSB7CiAgICAgIHZhciBz
        cGxpdCA9IGJpbmRpbmcuc3BsaXQoJzonKSwKICAgICAgICAgIHByb3BlcnR5
        ID0gc3BsaXRbMF0sCiAgICAgICAgICBhdHRyaWJ1dGVOYW1lID0gc3BsaXRb
        MV0gfHwgcHJvcGVydHk7CgogICAgICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIg
        dG8gYWRkL3JlbW92ZS9jaGFuZ2UgdGhlIGF0dHJpYnV0ZSBpZiB0aGUKICAg
        ICAgLy8gSmF2YVNjcmlwdCBwcm9wZXJ0eSBjaGFuZ2VzLgogICAgICB2YXIg
        b2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBlbGVtID0gdGhpcy4k
        KCk7CgogICAgICAgIGF0dHJpYnV0ZVZhbHVlID0gZ2V0KHRoaXMsIHByb3Bl
        cnR5KTsKCiAgICAgICAgRW1iZXIuVmlldy5hcHBseUF0dHJpYnV0ZUJpbmRp
        bmdzKGVsZW0sIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTsKICAg
        ICAgfTsKCiAgICAgIHRoaXMucmVnaXN0ZXJPYnNlcnZlcih0aGlzLCBwcm9w
        ZXJ0eSwgb2JzZXJ2ZXIpOwoKICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjdXJy
        ZW50IHZhbHVlIGFuZCBhZGQgaXQgdG8gdGhlIHJlbmRlciBidWZmZXIKICAg
        ICAgLy8gaWYgbmVjZXNzYXJ5LgogICAgICBhdHRyaWJ1dGVWYWx1ZSA9IGdl
        dCh0aGlzLCBwcm9wZXJ0eSk7CiAgICAgIEVtYmVyLlZpZXcuYXBwbHlBdHRy
        aWJ1dGVCaW5kaW5ncyhidWZmZXIsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0
        ZVZhbHVlKTsKICAgIH0sIHRoaXMpOwogIH0sCgogIC8qKgogICAgQHByaXZh
        dGUKCiAgICBHaXZlbiBhIHByb3BlcnR5IG5hbWUsIHJldHVybnMgYSBkYXNo
        ZXJpemVkIHZlcnNpb24gb2YgdGhhdAogICAgcHJvcGVydHkgbmFtZSBpZiB0
        aGUgcHJvcGVydHkgZXZhbHVhdGVzIHRvIGEgbm9uLWZhbHN5IHZhbHVlLgoK
        ICAgIEZvciBleGFtcGxlLCBpZiB0aGUgdmlldyBoYXMgcHJvcGVydHkgYGlz
        VXJnZW50YCB0aGF0IGV2YWx1YXRlcyB0byB0cnVlLAogICAgcGFzc2luZyBg
        aXNVcmdlbnRgIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGAiaXMtdXJn
        ZW50ImAuCgogICAgQG1ldGhvZCBfY2xhc3NTdHJpbmdGb3JQcm9wZXJ0eQog
        ICAgQHBhcmFtIHByb3BlcnR5CiAgKi8KICBfY2xhc3NTdHJpbmdGb3JQcm9w
        ZXJ0eTogZnVuY3Rpb24ocHJvcGVydHkpIHsKICAgIHZhciBwYXJzZWRQYXRo
        ID0gRW1iZXIuVmlldy5fcGFyc2VQcm9wZXJ0eVBhdGgocHJvcGVydHkpOwog
        ICAgdmFyIHBhdGggPSBwYXJzZWRQYXRoLnBhdGg7CgogICAgdmFyIHZhbCA9
        IGdldCh0aGlzLCBwYXRoKTsKICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCAm
        JiBFbWJlci5pc0dsb2JhbFBhdGgocGF0aCkpIHsKICAgICAgdmFsID0gZ2V0
        KEVtYmVyLmxvb2t1cCwgcGF0aCk7CiAgICB9CgogICAgcmV0dXJuIEVtYmVy
        LlZpZXcuX2NsYXNzU3RyaW5nRm9yVmFsdWUocGF0aCwgdmFsLCBwYXJzZWRQ
        YXRoLmNsYXNzTmFtZSwgcGFyc2VkUGF0aC5mYWxzeUNsYXNzTmFtZSk7CiAg
        fSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIEVMRU1FTlQgU1VQUE9SVAog
        IC8vCgogIC8qKgogICAgUmV0dXJucyB0aGUgY3VycmVudCBET00gZWxlbWVu
        dCBmb3IgdGhlIHZpZXcuCgogICAgQHByb3BlcnR5IGVsZW1lbnQKICAgIEB0
        eXBlIERPTUVsZW1lbnQKICAqLwogIGVsZW1lbnQ6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmICh2YWx1ZSAhPT0gdW5k
        ZWZpbmVkKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5zZXRF
        bGVtZW50KHRoaXMsIHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVy
        biB0aGlzLmN1cnJlbnRTdGF0ZS5nZXRFbGVtZW50KHRoaXMpOwogICAgfQog
        IH0pLnByb3BlcnR5KCdfcGFyZW50VmlldycpLAoKICAvKioKICAgIFJldHVy
        bnMgYSBqUXVlcnkgb2JqZWN0IGZvciB0aGlzIHZpZXcncyBlbGVtZW50LiBJ
        ZiB5b3UgcGFzcyBpbiBhIHNlbGVjdG9yCiAgICBzdHJpbmcsIHRoaXMgbWV0
        aG9kIHdpbGwgcmV0dXJuIGEgalF1ZXJ5IG9iamVjdCwgdXNpbmcgdGhlIGN1
        cnJlbnQgZWxlbWVudAogICAgYXMgaXRzIGJ1ZmZlci4KCiAgICBGb3IgZXhh
        bXBsZSwgY2FsbGluZyBgdmlldy4kKCdsaScpYCB3aWxsIHJldHVybiBhIGpR
        dWVyeSBvYmplY3QgY29udGFpbmluZwogICAgYWxsIG9mIHRoZSBgbGlgIGVs
        ZW1lbnRzIGluc2lkZSB0aGUgRE9NIGVsZW1lbnQgb2YgdGhpcyB2aWV3LgoK
        ICAgIEBtZXRob2QgJAogICAgQHBhcmFtIHtTdHJpbmd9IFtzZWxlY3Rvcl0g
        YSBqUXVlcnktY29tcGF0aWJsZSBzZWxlY3RvciBzdHJpbmcKICAgIEByZXR1
        cm4ge2pRdWVyeX0gdGhlIGpRdWVyeSBvYmplY3QgZm9yIHRoZSBET00gbm9k
        ZQogICovCiAgJDogZnVuY3Rpb24oc2VsKSB7CiAgICByZXR1cm4gdGhpcy5j
        dXJyZW50U3RhdGUuJCh0aGlzLCBzZWwpOwogIH0sCgogIG11dGF0ZUNoaWxk
        Vmlld3M6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB2YXIgY2hpbGRWaWV3
        cyA9IHRoaXMuX2NoaWxkVmlld3MsCiAgICAgICAgaWR4ID0gY2hpbGRWaWV3
        cy5sZW5ndGgsCiAgICAgICAgdmlldzsKCiAgICB3aGlsZSgtLWlkeCA+PSAw
        KSB7CiAgICAgIHZpZXcgPSBjaGlsZFZpZXdzW2lkeF07CiAgICAgIGNhbGxi
        YWNrKHRoaXMsIHZpZXcsIGlkeCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7
        CiAgfSwKCiAgZm9yRWFjaENoaWxkVmlldzogZnVuY3Rpb24oY2FsbGJhY2sp
        IHsKICAgIHZhciBjaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3czsKCiAg
        ICBpZiAoIWNoaWxkVmlld3MpIHsgcmV0dXJuIHRoaXM7IH0KCiAgICB2YXIg
        bGVuID0gY2hpbGRWaWV3cy5sZW5ndGgsCiAgICAgICAgdmlldywgaWR4OwoK
        ICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuOyBpZHgrKykgewogICAgICB2
        aWV3ID0gY2hpbGRWaWV3c1tpZHhdOwogICAgICBjYWxsYmFjayh2aWV3KTsK
        ICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIEFwcGVu
        ZHMgdGhlIHZpZXcncyBlbGVtZW50IHRvIHRoZSBzcGVjaWZpZWQgcGFyZW50
        IGVsZW1lbnQuCgogICAgSWYgdGhlIHZpZXcgZG9lcyBub3QgaGF2ZSBhbiBI
        VE1MIHJlcHJlc2VudGF0aW9uIHlldCwgYGNyZWF0ZUVsZW1lbnQoKWAKICAg
        IHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkuCgogICAgTm90ZSB0aGF0
        IHRoaXMgbWV0aG9kIGp1c3Qgc2NoZWR1bGVzIHRoZSB2aWV3IHRvIGJlIGFw
        cGVuZGVkOyB0aGUgRE9NCiAgICBlbGVtZW50IHdpbGwgbm90IGJlIGFwcGVu
        ZGVkIHRvIHRoZSBnaXZlbiBlbGVtZW50IHVudGlsIGFsbCBiaW5kaW5ncyBo
        YXZlCiAgICBmaW5pc2hlZCBzeW5jaHJvbml6aW5nLgoKICAgIFRoaXMgaXMg
        bm90IHR5cGljYWxseSBhIGZ1bmN0aW9uIHRoYXQgeW91IHdpbGwgbmVlZCB0
        byBjYWxsIGRpcmVjdGx5IHdoZW4KICAgIGJ1aWxkaW5nIHlvdXIgYXBwbGlj
        YXRpb24uIFlvdSBtaWdodCBjb25zaWRlciB1c2luZyBgRW1iZXIuQ29udGFp
        bmVyVmlld2AKICAgIGluc3RlYWQuIElmIHlvdSBkbyBuZWVkIHRvIHVzZSBg
        YXBwZW5kVG9gLCBiZSBzdXJlIHRoYXQgdGhlIHRhcmdldCBlbGVtZW50CiAg
        ICB5b3UgYXJlIHByb3ZpZGluZyBpcyBhc3NvY2lhdGVkIHdpdGggYW4gYEVt
        YmVyLkFwcGxpY2F0aW9uYCBhbmQgZG9lcyBub3QKICAgIGhhdmUgYW4gYW5j
        ZXN0b3IgZWxlbWVudCB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBFbWJl
        ciB2aWV3LgoKICAgIEBtZXRob2QgYXBwZW5kVG8KICAgIEBwYXJhbSB7U3Ry
        aW5nfERPTUVsZW1lbnR8alF1ZXJ5fSBBIHNlbGVjdG9yLCBlbGVtZW50LCBI
        VE1MIHN0cmluZywgb3IgalF1ZXJ5IG9iamVjdAogICAgQHJldHVybiB7RW1i
        ZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIGFwcGVuZFRvOiBmdW5jdGlvbih0
        YXJnZXQpIHsKICAgIC8vIFNjaGVkdWxlIHRoZSBET00gZWxlbWVudCB0byBi
        ZSBjcmVhdGVkIGFuZCBhcHBlbmRlZCB0byB0aGUgZ2l2ZW4KICAgIC8vIGVs
        ZW1lbnQgYWZ0ZXIgYmluZGluZ3MgaGF2ZSBzeW5jaHJvbml6ZWQuCiAgICB0
        aGlzLl9pbnNlcnRFbGVtZW50TGF0ZXIoZnVuY3Rpb24oKSB7CiAgICAgIEVt
        YmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGFwcGVuZCB0byAoIiArIHRhcmdl
        dCArICIpIGJ1dCB0aGF0IGlzbid0IGluIHRoZSBET00iLCBFbWJlci4kKHRh
        cmdldCkubGVuZ3RoID4gMCk7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGNh
        bm5vdCBhcHBlbmQgdG8gYW4gZXhpc3RpbmcgRW1iZXIuVmlldy4gQ29uc2lk
        ZXIgdXNpbmcgRW1iZXIuQ29udGFpbmVyVmlldyBpbnN0ZWFkLiIsICFFbWJl
        ci4kKHRhcmdldCkuaXMoJy5lbWJlci12aWV3JykgJiYgIUVtYmVyLiQodGFy
        Z2V0KS5wYXJlbnRzKCkuaXMoJy5lbWJlci12aWV3JykpOwogICAgICB0aGlz
        LiQoKS5hcHBlbmRUbyh0YXJnZXQpOwogICAgfSk7CgogICAgcmV0dXJuIHRo
        aXM7CiAgfSwKCiAgLyoqCiAgICBSZXBsYWNlcyB0aGUgY29udGVudCBvZiB0
        aGUgc3BlY2lmaWVkIHBhcmVudCBlbGVtZW50IHdpdGggdGhpcyB2aWV3J3MK
        ICAgIGVsZW1lbnQuIElmIHRoZSB2aWV3IGRvZXMgbm90IGhhdmUgYW4gSFRN
        TCByZXByZXNlbnRhdGlvbiB5ZXQsCiAgICBgY3JlYXRlRWxlbWVudCgpYCB3
        aWxsIGJlIGNhbGxlZCBhdXRvbWF0aWNhbGx5LgoKICAgIE5vdGUgdGhhdCB0
        aGlzIG1ldGhvZCBqdXN0IHNjaGVkdWxlcyB0aGUgdmlldyB0byBiZSBhcHBl
        bmRlZDsgdGhlIERPTQogICAgZWxlbWVudCB3aWxsIG5vdCBiZSBhcHBlbmRl
        ZCB0byB0aGUgZ2l2ZW4gZWxlbWVudCB1bnRpbCBhbGwgYmluZGluZ3MgaGF2
        ZQogICAgZmluaXNoZWQgc3luY2hyb25pemluZwoKICAgIEBtZXRob2QgcmVw
        bGFjZUluCiAgICBAcGFyYW0ge1N0cmluZ3xET01FbGVtZW50fGpRdWVyeX0g
        QSBzZWxlY3RvciwgZWxlbWVudCwgSFRNTCBzdHJpbmcsIG9yIGpRdWVyeSBv
        YmplY3QKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVkCiAgKi8K
        ICByZXBsYWNlSW46IGZ1bmN0aW9uKHRhcmdldCkgewogICAgRW1iZXIuYXNz
        ZXJ0KCJZb3UgdHJpZWQgdG8gcmVwbGFjZSBpbiAoIiArIHRhcmdldCArICIp
        IGJ1dCB0aGF0IGlzbid0IGluIHRoZSBET00iLCBFbWJlci4kKHRhcmdldCku
        bGVuZ3RoID4gMCk7CiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW5ub3QgcmVw
        bGFjZSBhbiBleGlzdGluZyBFbWJlci5WaWV3LiBDb25zaWRlciB1c2luZyBF
        bWJlci5Db250YWluZXJWaWV3IGluc3RlYWQuIiwgIUVtYmVyLiQodGFyZ2V0
        KS5pcygnLmVtYmVyLXZpZXcnKSAmJiAhRW1iZXIuJCh0YXJnZXQpLnBhcmVu
        dHMoKS5pcygnLmVtYmVyLXZpZXcnKSk7CgogICAgdGhpcy5faW5zZXJ0RWxl
        bWVudExhdGVyKGZ1bmN0aW9uKCkgewogICAgICBFbWJlci4kKHRhcmdldCku
        ZW1wdHkoKTsKICAgICAgdGhpcy4kKCkuYXBwZW5kVG8odGFyZ2V0KTsKICAg
        IH0pOwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQHByaXZh
        dGUKCiAgICBTY2hlZHVsZXMgYSBET00gb3BlcmF0aW9uIHRvIG9jY3VyIGR1
        cmluZyB0aGUgbmV4dCByZW5kZXIgcGhhc2UuIFRoaXMKICAgIGVuc3VyZXMg
        dGhhdCBhbGwgYmluZGluZ3MgaGF2ZSBmaW5pc2hlZCBzeW5jaHJvbml6aW5n
        IGJlZm9yZSB0aGUgdmlldyBpcwogICAgcmVuZGVyZWQuCgogICAgVG8gdXNl
        LCBwYXNzIGEgZnVuY3Rpb24gdGhhdCBwZXJmb3JtcyBhIERPTSBvcGVyYXRp
        b24uCgogICAgQmVmb3JlIHlvdXIgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGlz
        IHZpZXcgYW5kIGFsbCBjaGlsZCB2aWV3cyB3aWxsIHJlY2VpdmUKICAgIHRo
        ZSBgd2lsbEluc2VydEVsZW1lbnRgIGV2ZW50LiBBZnRlciB5b3VyIGZ1bmN0
        aW9uIGlzIGludm9rZWQsIHRoaXMgdmlldwogICAgYW5kIGFsbCBvZiBpdHMg
        Y2hpbGQgdmlld3Mgd2lsbCByZWNlaXZlIHRoZSBgZGlkSW5zZXJ0RWxlbWVu
        dGAgZXZlbnQuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmlldy5faW5zZXJ0
        RWxlbWVudExhdGVyKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmNyZWF0ZUVs
        ZW1lbnQoKTsKICAgICAgdGhpcy4kKCkuYXBwZW5kVG8oJ2JvZHknKTsKICAg
        IH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBfaW5zZXJ0RWxlbWVudExhdGVy
        CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmbiB0aGUgZnVuY3Rpb24gdGhhdCBp
        bnNlcnRzIHRoZSBlbGVtZW50IGludG8gdGhlIERPTQogICovCiAgX2luc2Vy
        dEVsZW1lbnRMYXRlcjogZnVuY3Rpb24oZm4pIHsKICAgIHRoaXMuX3NjaGVk
        dWxlZEluc2VydCA9IEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRlcics
        IHRoaXMsICdfaW5zZXJ0RWxlbWVudCcsIGZuKTsKICB9LAoKICBfaW5zZXJ0
        RWxlbWVudDogZnVuY3Rpb24gKGZuKSB7CiAgICB0aGlzLl9zY2hlZHVsZWRJ
        bnNlcnQgPSBudWxsOwogICAgdGhpcy5jdXJyZW50U3RhdGUuaW5zZXJ0RWxl
        bWVudCh0aGlzLCBmbik7CiAgfSwKCiAgLyoqCiAgICBBcHBlbmRzIHRoZSB2
        aWV3J3MgZWxlbWVudCB0byB0aGUgZG9jdW1lbnQgYm9keS4gSWYgdGhlIHZp
        ZXcgZG9lcwogICAgbm90IGhhdmUgYW4gSFRNTCByZXByZXNlbnRhdGlvbiB5
        ZXQsIGBjcmVhdGVFbGVtZW50KClgIHdpbGwgYmUgY2FsbGVkCiAgICBhdXRv
        bWF0aWNhbGx5LgoKICAgIElmIHlvdXIgYXBwbGljYXRpb24gdXNlcyB0aGUg
        YHJvb3RFbGVtZW50YCBwcm9wZXJ0eSwgeW91IG11c3QgYXBwZW5kCiAgICB0
        aGUgdmlldyB3aXRoaW4gdGhhdCBlbGVtZW50LiBSZW5kZXJpbmcgdmlld3Mg
        b3V0c2lkZSBvZiB0aGUgYHJvb3RFbGVtZW50YAogICAgaXMgbm90IHN1cHBv
        cnRlZC4KCiAgICBOb3RlIHRoYXQgdGhpcyBtZXRob2QganVzdCBzY2hlZHVs
        ZXMgdGhlIHZpZXcgdG8gYmUgYXBwZW5kZWQ7IHRoZSBET00KICAgIGVsZW1l
        bnQgd2lsbCBub3QgYmUgYXBwZW5kZWQgdG8gdGhlIGRvY3VtZW50IGJvZHkg
        dW50aWwgYWxsIGJpbmRpbmdzIGhhdmUKICAgIGZpbmlzaGVkIHN5bmNocm9u
        aXppbmcuCgogICAgQG1ldGhvZCBhcHBlbmQKICAgIEByZXR1cm4ge0VtYmVy
        LlZpZXd9IHJlY2VpdmVyCiAgKi8KICBhcHBlbmQ6IGZ1bmN0aW9uKCkgewog
        ICAgcmV0dXJuIHRoaXMuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7CiAgfSwK
        CiAgLyoqCiAgICBSZW1vdmVzIHRoZSB2aWV3J3MgZWxlbWVudCBmcm9tIHRo
        ZSBlbGVtZW50IHRvIHdoaWNoIGl0IGlzIGF0dGFjaGVkLgoKICAgIEBtZXRo
        b2QgcmVtb3ZlCiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSByZWNlaXZlcgog
        ICovCiAgcmVtb3ZlOiBmdW5jdGlvbigpIHsKICAgIC8vIFdoYXQgd2Ugc2hv
        dWxkIHJlYWxseSBkbyBoZXJlIGlzIHdhaXQgdW50aWwgdGhlIGVuZCBvZiB0
        aGUgcnVuIGxvb3AKICAgIC8vIHRvIGRldGVybWluZSBpZiB0aGUgZWxlbWVu
        dCBoYXMgYmVlbiByZS1hcHBlbmRlZCB0byBhIGRpZmZlcmVudAogICAgLy8g
        ZWxlbWVudC4KICAgIC8vIEluIHRoZSBpbnRlcmltLCB3ZSB3aWxsIGp1c3Qg
        cmUtcmVuZGVyIGlmIHRoYXQgaGFwcGVucy4gSXQgaXMgbW9yZQogICAgLy8g
        aW1wb3J0YW50IHRoYW4gZWxlbWVudHMgZ2V0IGdhcmJhZ2UgY29sbGVjdGVk
        LgogICAgaWYgKCF0aGlzLnJlbW92ZWRGcm9tRE9NKSB7IHRoaXMuZGVzdHJv
        eUVsZW1lbnQoKTsgfQogICAgdGhpcy5pbnZva2VSZWN1cnNpdmVseShmdW5j
        dGlvbih2aWV3KSB7CiAgICAgIGlmICh2aWV3LmNsZWFyUmVuZGVyZWRDaGls
        ZHJlbikgeyB2aWV3LmNsZWFyUmVuZGVyZWRDaGlsZHJlbigpOyB9CiAgICB9
        KTsKICB9LAoKICBlbGVtZW50SWQ6IG51bGwsCgogIC8qKgogICAgQXR0ZW1w
        dHMgdG8gZGlzY292ZXIgdGhlIGVsZW1lbnQgaW4gdGhlIHBhcmVudCBlbGVt
        ZW50LiBUaGUgZGVmYXVsdAogICAgaW1wbGVtZW50YXRpb24gbG9va3MgZm9y
        IGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBvZiBgZWxlbWVudElkYCAob3IgdGhl
        CiAgICB2aWV3J3MgZ3VpZCBpZiBgZWxlbWVudElkYCBpcyBudWxsKS4gWW91
        IGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCB0bwogICAgcHJvdmlkZSB5b3Vy
        IG93biBmb3JtIG9mIGxvb2t1cC4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50
        IHRvIGRpc2NvdmVyIHlvdXIKICAgIGVsZW1lbnQgdXNpbmcgYSBDU1MgY2xh
        c3MgbmFtZSBpbnN0ZWFkIG9mIGFuIElELgoKICAgIEBtZXRob2QgZmluZEVs
        ZW1lbnRJblBhcmVudEVsZW1lbnQKICAgIEBwYXJhbSB7RE9NRWxlbWVudH0g
        cGFyZW50RWxlbWVudCBUaGUgcGFyZW50J3MgRE9NIGVsZW1lbnQKICAgIEBy
        ZXR1cm4ge0RPTUVsZW1lbnR9IFRoZSBkaXNjb3ZlcmVkIGVsZW1lbnQKICAq
        LwogIGZpbmRFbGVtZW50SW5QYXJlbnRFbGVtZW50OiBmdW5jdGlvbihwYXJl
        bnRFbGVtKSB7CiAgICB2YXIgaWQgPSAiIyIgKyB0aGlzLmVsZW1lbnRJZDsK
        ICAgIHJldHVybiBFbWJlci4kKGlkKVswXSB8fCBFbWJlci4kKGlkLCBwYXJl
        bnRFbGVtKVswXTsKICB9LAoKICAvKioKICAgIENyZWF0ZXMgYSBET00gcmVw
        cmVzZW50YXRpb24gb2YgdGhlIHZpZXcgYW5kIGFsbCBvZiBpdHMKICAgIGNo
        aWxkIHZpZXdzIGJ5IHJlY3Vyc2l2ZWx5IGNhbGxpbmcgdGhlIGByZW5kZXIo
        KWAgbWV0aG9kLgoKICAgIEFmdGVyIHRoZSBlbGVtZW50IGhhcyBiZWVuIGNy
        ZWF0ZWQsIGBkaWRJbnNlcnRFbGVtZW50YCB3aWxsCiAgICBiZSBjYWxsZWQg
        b24gdGhpcyB2aWV3IGFuZCBhbGwgb2YgaXRzIGNoaWxkIHZpZXdzLgoKICAg
        IEBtZXRob2QgY3JlYXRlRWxlbWVudAogICAgQHJldHVybiB7RW1iZXIuVmll
        d30gcmVjZWl2ZXIKICAqLwogIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uKCkg
        ewogICAgaWYgKGdldCh0aGlzLCAnZWxlbWVudCcpKSB7IHJldHVybiB0aGlz
        OyB9CgogICAgdmFyIGJ1ZmZlciA9IHRoaXMucmVuZGVyVG9CdWZmZXIoKTsK
        ICAgIHNldCh0aGlzLCAnZWxlbWVudCcsIGJ1ZmZlci5lbGVtZW50KCkpOwoK
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIHdoZW4g
        YSB2aWV3IGlzIGdvaW5nIHRvIGluc2VydCBhbiBlbGVtZW50IGludG8gdGhl
        IERPTS4KCiAgICBAZXZlbnQgd2lsbEluc2VydEVsZW1lbnQKICAqLwogIHdp
        bGxJbnNlcnRFbGVtZW50OiBFbWJlci5LLAoKICAvKioKICAgIENhbGxlZCB3
        aGVuIHRoZSBlbGVtZW50IG9mIHRoZSB2aWV3IGhhcyBiZWVuIGluc2VydGVk
        IGludG8gdGhlIERPTQogICAgb3IgYWZ0ZXIgdGhlIHZpZXcgd2FzIHJlLXJl
        bmRlcmVkLiBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGRvIGFueQogICAg
        c2V0IHVwIHRoYXQgcmVxdWlyZXMgYW4gZWxlbWVudCBpbiB0aGUgZG9jdW1l
        bnQgYm9keS4KCiAgICBAZXZlbnQgZGlkSW5zZXJ0RWxlbWVudAogICovCiAg
        ZGlkSW5zZXJ0RWxlbWVudDogRW1iZXIuSywKCiAgLyoqCiAgICBDYWxsZWQg
        d2hlbiB0aGUgdmlldyBpcyBhYm91dCB0byByZXJlbmRlciwgYnV0IGJlZm9y
        ZSBhbnl0aGluZyBoYXMKICAgIGJlZW4gdG9ybiBkb3duLiBUaGlzIGlzIGEg
        Z29vZCBvcHBvcnR1bml0eSB0byB0ZWFyIGRvd24gYW55IG1hbnVhbAogICAg
        b2JzZXJ2ZXJzIHlvdSBoYXZlIGluc3RhbGxlZCBiYXNlZCBvbiB0aGUgRE9N
        IHN0YXRlCgogICAgQGV2ZW50IHdpbGxDbGVhclJlbmRlcgogICovCiAgd2ls
        bENsZWFyUmVuZGVyOiBFbWJlci5LLAoKICAvKioKICAgIEBwcml2YXRlCgog
        ICAgUnVuIHRoaXMgY2FsbGJhY2sgb24gdGhlIGN1cnJlbnQgdmlldyAodW5s
        ZXNzIGluY2x1ZGVTZWxmIGlzIGZhbHNlKSBhbmQgcmVjdXJzaXZlbHkgb24g
        Y2hpbGQgdmlld3MuCgogICAgQG1ldGhvZCBpbnZva2VSZWN1cnNpdmVseQog
        ICAgQHBhcmFtIGZuIHtGdW5jdGlvbn0KICAgIEBwYXJhbSBpbmNsdWRlU2Vs
        ZiAob3B0aW9uYWwsIGRlZmF1bHQgdHJ1ZSkKICAqLwogIGludm9rZVJlY3Vy
        c2l2ZWx5OiBmdW5jdGlvbihmbiwgaW5jbHVkZVNlbGYpIHsKICAgIHZhciBj
        aGlsZFZpZXdzID0gKGluY2x1ZGVTZWxmID09PSBmYWxzZSkgPyB0aGlzLl9j
        aGlsZFZpZXdzIDogW3RoaXNdOwogICAgdmFyIGN1cnJlbnRWaWV3cywgdmll
        dywgY3VycmVudENoaWxkVmlld3M7CgogICAgd2hpbGUgKGNoaWxkVmlld3Mu
        bGVuZ3RoKSB7CiAgICAgIGN1cnJlbnRWaWV3cyA9IGNoaWxkVmlld3Muc2xp
        Y2UoKTsKICAgICAgY2hpbGRWaWV3cyA9IFtdOwoKICAgICAgZm9yICh2YXIg
        aT0wLCBsPWN1cnJlbnRWaWV3cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAg
        ICAgdmlldyA9IGN1cnJlbnRWaWV3c1tpXTsKICAgICAgICBjdXJyZW50Q2hp
        bGRWaWV3cyA9IHZpZXcuX2NoaWxkVmlld3MgPyB2aWV3Ll9jaGlsZFZpZXdz
        LnNsaWNlKDApIDogbnVsbDsKICAgICAgICBmbih2aWV3KTsKICAgICAgICBp
        ZiAoY3VycmVudENoaWxkVmlld3MpIHsKICAgICAgICAgIGNoaWxkVmlld3Mu
        cHVzaC5hcHBseShjaGlsZFZpZXdzLCBjdXJyZW50Q2hpbGRWaWV3cyk7CiAg
        ICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKCiAgdHJpZ2dlclJlY3Vyc2l2
        ZWx5OiBmdW5jdGlvbihldmVudE5hbWUpIHsKICAgIHZhciBjaGlsZFZpZXdz
        ID0gW3RoaXNdLCBjdXJyZW50Vmlld3MsIHZpZXcsIGN1cnJlbnRDaGlsZFZp
        ZXdzOwoKICAgIHdoaWxlIChjaGlsZFZpZXdzLmxlbmd0aCkgewogICAgICBj
        dXJyZW50Vmlld3MgPSBjaGlsZFZpZXdzLnNsaWNlKCk7CiAgICAgIGNoaWxk
        Vmlld3MgPSBbXTsKCiAgICAgIGZvciAodmFyIGk9MCwgbD1jdXJyZW50Vmll
        d3MubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgIHZpZXcgPSBjdXJyZW50
        Vmlld3NbaV07CiAgICAgICAgY3VycmVudENoaWxkVmlld3MgPSB2aWV3Ll9j
        aGlsZFZpZXdzID8gdmlldy5fY2hpbGRWaWV3cy5zbGljZSgwKSA6IG51bGw7
        CiAgICAgICAgaWYgKHZpZXcudHJpZ2dlcikgeyB2aWV3LnRyaWdnZXIoZXZl
        bnROYW1lKTsgfQogICAgICAgIGlmIChjdXJyZW50Q2hpbGRWaWV3cykgewog
        ICAgICAgICAgY2hpbGRWaWV3cy5wdXNoLmFwcGx5KGNoaWxkVmlld3MsIGN1
        cnJlbnRDaGlsZFZpZXdzKTsKICAgICAgICB9CgogICAgICB9CiAgICB9CiAg
        fSwKCiAgdmlld0hpZXJhcmNoeUNvbGxlY3Rpb246IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIGN1cnJlbnRWaWV3LCB2aWV3Q29sbGVjdGlvbiA9IG5ldyBWaWV3
        Q29sbGVjdGlvbihbdGhpc10pOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwg
        dmlld0NvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHsKICAgICAgY3VycmVudFZp
        ZXcgPSB2aWV3Q29sbGVjdGlvbi5vYmplY3RBdChpKTsKICAgICAgaWYgKGN1
        cnJlbnRWaWV3Ll9jaGlsZFZpZXdzKSB7CiAgICAgICAgdmlld0NvbGxlY3Rp
        b24ucHVzaC5hcHBseSh2aWV3Q29sbGVjdGlvbiwgY3VycmVudFZpZXcuX2No
        aWxkVmlld3MpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHZpZXdDb2xs
        ZWN0aW9uOwogIH0sCgogIC8qKgogICAgRGVzdHJveXMgYW55IGV4aXN0aW5n
        IGVsZW1lbnQgYWxvbmcgd2l0aCB0aGUgZWxlbWVudCBmb3IgYW55IGNoaWxk
        IHZpZXdzCiAgICBhcyB3ZWxsLiBJZiB0aGUgdmlldyBkb2VzIG5vdCBjdXJy
        ZW50bHkgaGF2ZSBhIGVsZW1lbnQsIHRoZW4gdGhpcyBtZXRob2QKICAgIHdp
        bGwgZG8gbm90aGluZy4KCiAgICBJZiB5b3UgaW1wbGVtZW50IGB3aWxsRGVz
        dHJveUVsZW1lbnQoKWAgb24geW91ciB2aWV3LCB0aGVuIHRoaXMgbWV0aG9k
        IHdpbGwKICAgIGJlIGludm9rZWQgb24geW91ciB2aWV3IGJlZm9yZSB5b3Vy
        IGVsZW1lbnQgaXMgZGVzdHJveWVkIHRvIGdpdmUgeW91IGEKICAgIGNoYW5j
        ZSB0byBjbGVhbiB1cCBhbnkgZXZlbnQgaGFuZGxlcnMsIGV0Yy4KCiAgICBJ
        ZiB5b3Ugd3JpdGUgYSBgd2lsbERlc3Ryb3lFbGVtZW50KClgIGhhbmRsZXIs
        IHlvdSBjYW4gYXNzdW1lIHRoYXQgeW91cgogICAgYGRpZEluc2VydEVsZW1l
        bnQoKWAgaGFuZGxlciB3YXMgY2FsbGVkIGVhcmxpZXIgZm9yIHRoZSBzYW1l
        IGVsZW1lbnQuCgogICAgWW91IHNob3VsZCBub3QgY2FsbCBvciBvdmVycmlk
        ZSB0aGlzIG1ldGhvZCB5b3Vyc2VsZiwgYnV0IHlvdSBtYXkKICAgIHdhbnQg
        dG8gaW1wbGVtZW50IHRoZSBhYm92ZSBjYWxsYmFja3MuCgogICAgQG1ldGhv
        ZCBkZXN0cm95RWxlbWVudAogICAgQHJldHVybiB7RW1iZXIuVmlld30gcmVj
        ZWl2ZXIKICAqLwogIGRlc3Ryb3lFbGVtZW50OiBmdW5jdGlvbigpIHsKICAg
        IHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5kZXN0cm95RWxlbWVudCh0aGlz
        KTsKICB9LAoKICAvKioKICAgIENhbGxlZCB3aGVuIHRoZSBlbGVtZW50IG9m
        IHRoZSB2aWV3IGlzIGdvaW5nIHRvIGJlIGRlc3Ryb3llZC4gT3ZlcnJpZGUK
        ICAgIHRoaXMgZnVuY3Rpb24gdG8gZG8gYW55IHRlYXJkb3duIHRoYXQgcmVx
        dWlyZXMgYW4gZWxlbWVudCwgbGlrZSByZW1vdmluZwogICAgZXZlbnQgbGlz
        dGVuZXJzLgoKICAgIEBldmVudCB3aWxsRGVzdHJveUVsZW1lbnQKICAqLwog
        IHdpbGxEZXN0cm95RWxlbWVudDogRW1iZXIuSywKCiAgLyoqCiAgICBAcHJp
        dmF0ZQoKICAgIFRyaWdnZXJzIHRoZSBgd2lsbERlc3Ryb3lFbGVtZW50YCBl
        dmVudCAod2hpY2ggaW52b2tlcyB0aGUKICAgIGB3aWxsRGVzdHJveUVsZW1l
        bnQoKWAgbWV0aG9kIGlmIGl0IGV4aXN0cykgb24gdGhpcyB2aWV3IGFuZCBh
        bGwgY2hpbGQKICAgIHZpZXdzLgoKICAgIEJlZm9yZSB0cmlnZ2VyaW5nIGB3
        aWxsRGVzdHJveUVsZW1lbnRgLCBpdCBmaXJzdCB0cmlnZ2VycyB0aGUKICAg
        IGB3aWxsQ2xlYXJSZW5kZXJgIGV2ZW50IHJlY3Vyc2l2ZWx5LgoKICAgIEBt
        ZXRob2QgX25vdGlmeVdpbGxEZXN0cm95RWxlbWVudAogICovCiAgX25vdGlm
        eVdpbGxEZXN0cm95RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB2YXIgdmll
        d0NvbGxlY3Rpb24gPSB0aGlzLnZpZXdIaWVyYXJjaHlDb2xsZWN0aW9uKCk7
        CiAgICB2aWV3Q29sbGVjdGlvbi50cmlnZ2VyKCd3aWxsQ2xlYXJSZW5kZXIn
        KTsKICAgIHZpZXdDb2xsZWN0aW9uLnRyaWdnZXIoJ3dpbGxEZXN0cm95RWxl
        bWVudCcpOwogICAgcmV0dXJuIHZpZXdDb2xsZWN0aW9uOwogIH0sCgogIC8q
        KgogICAgQHByaXZhdGUKCiAgICBJZiB0aGlzIHZpZXcncyBlbGVtZW50IGNo
        YW5nZXMsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgY2FjaGVzIG9mIG91
        cgogICAgY2hpbGQgdmlld3Mgc28gdGhhdCB3ZSBkbyBub3QgcmV0YWluIHJl
        ZmVyZW5jZXMgdG8gRE9NIGVsZW1lbnRzIHRoYXQgYXJlCiAgICBubyBsb25n
        ZXIgbmVlZGVkLgoKICAgIEBtZXRob2QgX2VsZW1lbnREaWRDaGFuZ2UKICAq
        LwogIF9lbGVtZW50RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignZWxlbWVu
        dCcsIGZ1bmN0aW9uKCkgewogICAgdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1
        bmN0aW9uKHZpZXcpIHsKICAgICAgZGVsZXRlIG1ldGEodmlldykuY2FjaGUu
        ZWxlbWVudDsKICAgIH0pOwogIH0pLAoKICAvKioKICAgIENhbGxlZCB3aGVu
        IHRoZSBwYXJlbnRWaWV3IHByb3BlcnR5IGhhcyBjaGFuZ2VkLgoKICAgIEBl
        dmVudCBwYXJlbnRWaWV3RGlkQ2hhbmdlCiAgKi8KICBwYXJlbnRWaWV3RGlk
        Q2hhbmdlOiBFbWJlci5LLAoKICBpbnN0cnVtZW50TmFtZTogJ3ZpZXcnLAoK
        ICBpbnN0cnVtZW50RGV0YWlsczogZnVuY3Rpb24oaGFzaCkgewogICAgaGFz
        aC50ZW1wbGF0ZSA9IGdldCh0aGlzLCAndGVtcGxhdGVOYW1lJyk7CiAgICB0
        aGlzLl9zdXBlcihoYXNoKTsKICB9LAoKICBfcmVuZGVyVG9CdWZmZXI6IGZ1
        bmN0aW9uKHBhcmVudEJ1ZmZlciwgYnVmZmVyT3BlcmF0aW9uKSB7CiAgICB0
        aGlzLmxlbmd0aEJlZm9yZVJlbmRlciA9IHRoaXMuX2NoaWxkVmlld3MubGVu
        Z3RoOwogICAgdmFyIGJ1ZmZlciA9IHRoaXMuX3N1cGVyKHBhcmVudEJ1ZmZl
        ciwgYnVmZmVyT3BlcmF0aW9uKTsKICAgIHRoaXMubGVuZ3RoQWZ0ZXJSZW5k
        ZXIgPSB0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aDsKCiAgICByZXR1cm4gYnVm
        ZmVyOwogIH0sCgogIHJlbmRlclRvQnVmZmVySWZOZWVkZWQ6IGZ1bmN0aW9u
        IChidWZmZXIpIHsKICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5yZW5k
        ZXJUb0J1ZmZlcklmTmVlZGVkKHRoaXMsIGJ1ZmZlcik7CiAgfSwKCiAgYmVm
        b3JlUmVuZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAgIHRoaXMuYXBwbHlB
        dHRyaWJ1dGVzVG9CdWZmZXIoYnVmZmVyKTsKICAgIGJ1ZmZlci5wdXNoT3Bl
        bmluZ1RhZygpOwogIH0sCgogIGFmdGVyUmVuZGVyOiBmdW5jdGlvbihidWZm
        ZXIpIHsKICAgIGJ1ZmZlci5wdXNoQ2xvc2luZ1RhZygpOwogIH0sCgogIGFw
        cGx5QXR0cmlidXRlc1RvQnVmZmVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAg
        IC8vIENyZWF0ZXMgb2JzZXJ2ZXJzIGZvciBhbGwgcmVnaXN0ZXJlZCBjbGFz
        cyBuYW1lIGFuZCBhdHRyaWJ1dGUgYmluZGluZ3MsCiAgICAvLyB0aGVuIGFk
        ZHMgdGhlbSB0byB0aGUgZWxlbWVudC4KICAgIHZhciBjbGFzc05hbWVCaW5k
        aW5ncyA9IGdldCh0aGlzLCAnY2xhc3NOYW1lQmluZGluZ3MnKTsKICAgIGlm
        IChjbGFzc05hbWVCaW5kaW5ncy5sZW5ndGgpIHsKICAgICAgdGhpcy5fYXBw
        bHlDbGFzc05hbWVCaW5kaW5ncyhjbGFzc05hbWVCaW5kaW5ncyk7CiAgICB9
        CgogICAgLy8gUGFzcyB0aGUgcmVuZGVyIGJ1ZmZlciBzbyB0aGUgbWV0aG9k
        IGNhbiBhcHBseSBhdHRyaWJ1dGVzIGRpcmVjdGx5LgogICAgLy8gVGhpcyBp
        c24ndCBuZWVkZWQgZm9yIGNsYXNzIG5hbWUgYmluZGluZ3MgYmVjYXVzZSB0
        aGV5IHVzZSB0aGUKICAgIC8vIGV4aXN0aW5nIGNsYXNzTmFtZXMgaW5mcmFz
        dHJ1Y3R1cmUuCiAgICB2YXIgYXR0cmlidXRlQmluZGluZ3MgPSBnZXQodGhp
        cywgJ2F0dHJpYnV0ZUJpbmRpbmdzJyk7CiAgICBpZiAoYXR0cmlidXRlQmlu
        ZGluZ3MubGVuZ3RoKSB7CiAgICAgIHRoaXMuX2FwcGx5QXR0cmlidXRlQmlu
        ZGluZ3MoYnVmZmVyLCBhdHRyaWJ1dGVCaW5kaW5ncyk7CiAgICB9CgogICAg
        YnVmZmVyLnNldENsYXNzZXModGhpcy5jbGFzc05hbWVzKTsKICAgIGJ1ZmZl
        ci5pZCh0aGlzLmVsZW1lbnRJZCk7CgogICAgdmFyIHJvbGUgPSBnZXQodGhp
        cywgJ2FyaWFSb2xlJyk7CiAgICBpZiAocm9sZSkgewogICAgICBidWZmZXIu
        YXR0cigncm9sZScsIHJvbGUpOwogICAgfQoKICAgIGlmIChnZXQodGhpcywg
        J2lzVmlzaWJsZScpID09PSBmYWxzZSkgewogICAgICBidWZmZXIuc3R5bGUo
        J2Rpc3BsYXknLCAnbm9uZScpOwogICAgfQogIH0sCgogIC8vIC4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4KICAvLyBTVEFOREFSRCBSRU5ERVIgUFJPUEVSVElFUwogIC8vCgog
        IC8qKgogICAgVGFnIG5hbWUgZm9yIHRoZSB2aWV3J3Mgb3V0ZXIgZWxlbWVu
        dC4gVGhlIHRhZyBuYW1lIGlzIG9ubHkgdXNlZCB3aGVuIGFuCiAgICBlbGVt
        ZW50IGlzIGZpcnN0IGNyZWF0ZWQuIElmIHlvdSBjaGFuZ2UgdGhlIGB0YWdO
        YW1lYCBmb3IgYW4gZWxlbWVudCwgeW91CiAgICBtdXN0IGRlc3Ryb3kgYW5k
        IHJlY3JlYXRlIHRoZSB2aWV3IGVsZW1lbnQuCgogICAgQnkgZGVmYXVsdCwg
        dGhlIHJlbmRlciBidWZmZXIgd2lsbCB1c2UgYSBgPGRpdj5gIHRhZyBmb3Ig
        dmlld3MuCgogICAgQHByb3BlcnR5IHRhZ05hbWUKICAgIEB0eXBlIFN0cmlu
        ZwogICAgQGRlZmF1bHQgbnVsbAogICovCgogIC8vIFdlIGxlYXZlIHRoaXMg
        bnVsbCBieSBkZWZhdWx0IHNvIHdlIGNhbiB0ZWxsIHRoZSBkaWZmZXJlbmNl
        IGJldHdlZW4KICAvLyB0aGUgZGVmYXVsdCBjYXNlIGFuZCBhIHVzZXItc3Bl
        Y2lmaWVkIHRhZy4KICB0YWdOYW1lOiBudWxsLAoKICAvKioKICAgIFRoZSBX
        QUktQVJJQSByb2xlIG9mIHRoZSBjb250cm9sIHJlcHJlc2VudGVkIGJ5IHRo
        aXMgdmlldy4gRm9yIGV4YW1wbGUsIGEKICAgIGJ1dHRvbiBtYXkgaGF2ZSBh
        IHJvbGUgb2YgdHlwZSAnYnV0dG9uJywgb3IgYSBwYW5lIG1heSBoYXZlIGEg
        cm9sZSBvZgogICAgdHlwZSAnYWxlcnRkaWFsb2cnLiBUaGlzIHByb3BlcnR5
        IGlzIHVzZWQgYnkgYXNzaXN0aXZlIHNvZnR3YXJlIHRvIGhlbHAKICAgIHZp
        c3VhbGx5IGNoYWxsZW5nZWQgdXNlcnMgbmF2aWdhdGUgcmljaCB3ZWIgYXBw
        bGljYXRpb25zLgoKICAgIFRoZSBmdWxsIGxpc3Qgb2YgdmFsaWQgV0FJLUFS
        SUEgcm9sZXMgaXMgYXZhaWxhYmxlIGF0OgogICAgW2h0dHA6Ly93d3cudzMu
        b3JnL1RSL3dhaS1hcmlhL3JvbGVzI3JvbGVzX2NhdGVnb3JpemF0aW9uXSho
        dHRwOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS9yb2xlcyNyb2xlc19jYXRl
        Z29yaXphdGlvbikKCiAgICBAcHJvcGVydHkgYXJpYVJvbGUKICAgIEB0eXBl
        IFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgYXJpYVJvbGU6IG51
        bGwsCgogIC8qKgogICAgU3RhbmRhcmQgQ1NTIGNsYXNzIG5hbWVzIHRvIGFw
        cGx5IHRvIHRoZSB2aWV3J3Mgb3V0ZXIgZWxlbWVudC4gVGhpcwogICAgcHJv
        cGVydHkgYXV0b21hdGljYWxseSBpbmhlcml0cyBhbnkgY2xhc3MgbmFtZXMg
        ZGVmaW5lZCBieSB0aGUgdmlldydzCiAgICBzdXBlcmNsYXNzZXMgYXMgd2Vs
        bC4KCiAgICBAcHJvcGVydHkgY2xhc3NOYW1lcwogICAgQHR5cGUgQXJyYXkK
        ICAgIEBkZWZhdWx0IFsnZW1iZXItdmlldyddCiAgKi8KICBjbGFzc05hbWVz
        OiBbJ2VtYmVyLXZpZXcnXSwKCiAgLyoqCiAgICBBIGxpc3Qgb2YgcHJvcGVy
        dGllcyBvZiB0aGUgdmlldyB0byBhcHBseSBhcyBjbGFzcyBuYW1lcy4gSWYg
        dGhlIHByb3BlcnR5CiAgICBpcyBhIHN0cmluZyB2YWx1ZSwgdGhlIHZhbHVl
        IG9mIHRoYXQgc3RyaW5nIHdpbGwgYmUgYXBwbGllZCBhcyBhIGNsYXNzCiAg
        ICBuYW1lLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIC8vIEFwcGxpZXMgdGhl
        ICdoaWdoJyBjbGFzcyB0byB0aGUgdmlldyBlbGVtZW50CiAgICBFbWJlci5W
        aWV3LmV4dGVuZCh7CiAgICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBbJ3ByaW9y
        aXR5J10KICAgICAgcHJpb3JpdHk6ICdoaWdoJwogICAgfSk7CiAgICBgYGAK
        CiAgICBJZiB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IGlzIGEgQm9vbGVh
        biwgdGhlIG5hbWUgb2YgdGhhdCBwcm9wZXJ0eSBpcwogICAgYWRkZWQgYXMg
        YSBkYXNoZXJpemVkIGNsYXNzIG5hbWUuCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgLy8gQXBwbGllcyB0aGUgJ2lzLXVyZ2VudCcgY2xhc3MgdG8gdGhlIHZp
        ZXcgZWxlbWVudAogICAgRW1iZXIuVmlldy5leHRlbmQoewogICAgICBjbGFz
        c05hbWVCaW5kaW5nczogWydpc1VyZ2VudCddCiAgICAgIGlzVXJnZW50OiB0
        cnVlCiAgICB9KTsKICAgIGBgYAoKICAgIElmIHlvdSB3b3VsZCBwcmVmZXIg
        dG8gdXNlIGEgY3VzdG9tIHZhbHVlIGluc3RlYWQgb2YgdGhlIGRhc2hlcml6
        ZWQKICAgIHByb3BlcnR5IG5hbWUsIHlvdSBjYW4gcGFzcyBhIGJpbmRpbmcg
        bGlrZSB0aGlzOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIC8vIEFwcGxpZXMg
        dGhlICd1cmdlbnQnIGNsYXNzIHRvIHRoZSB2aWV3IGVsZW1lbnQKICAgIEVt
        YmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgY2xhc3NOYW1lQmluZGluZ3M6IFsn
        aXNVcmdlbnQ6dXJnZW50J10KICAgICAgaXNVcmdlbnQ6IHRydWUKICAgIH0p
        OwogICAgYGBgCgogICAgVGhpcyBsaXN0IG9mIHByb3BlcnRpZXMgaXMgaW5o
        ZXJpdGVkIGZyb20gdGhlIHZpZXcncyBzdXBlcmNsYXNzZXMgYXMgd2VsbC4K
        CiAgICBAcHJvcGVydHkgY2xhc3NOYW1lQmluZGluZ3MKICAgIEB0eXBlIEFy
        cmF5CiAgICBAZGVmYXVsdCBbXQogICovCiAgY2xhc3NOYW1lQmluZGluZ3M6
        IEVNUFRZX0FSUkFZLAoKICAvKioKICAgIEEgbGlzdCBvZiBwcm9wZXJ0aWVz
        IG9mIHRoZSB2aWV3IHRvIGFwcGx5IGFzIGF0dHJpYnV0ZXMuIElmIHRoZSBw
        cm9wZXJ0eSBpcwogICAgYSBzdHJpbmcgdmFsdWUsIHRoZSB2YWx1ZSBvZiB0
        aGF0IHN0cmluZyB3aWxsIGJlIGFwcGxpZWQgYXMgdGhlIGF0dHJpYnV0ZS4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICAvLyBBcHBsaWVzIHRoZSB0eXBlIGF0
        dHJpYnV0ZSB0byB0aGUgZWxlbWVudAogICAgLy8gd2l0aCB0aGUgdmFsdWUg
        ImJ1dHRvbiIsIGxpa2UgPGRpdiB0eXBlPSJidXR0b24iPgogICAgRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgICBhdHRyaWJ1dGVCaW5kaW5nczogWyd0eXBl
        J10sCiAgICAgIHR5cGU6ICdidXR0b24nCiAgICB9KTsKICAgIGBgYAoKICAg
        IElmIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgaXMgYSBCb29sZWFuLCB0
        aGUgbmFtZSBvZiB0aGF0IHByb3BlcnR5IGlzCiAgICBhZGRlZCBhcyBhbiBh
        dHRyaWJ1dGUuCgogICAgYGBgamF2YXNjcmlwdAogICAgLy8gUmVuZGVycyBz
        b21ldGhpbmcgbGlrZSA8ZGl2IGVuYWJsZWQ9ImVuYWJsZWQiPgogICAgRW1i
        ZXIuVmlldy5leHRlbmQoewogICAgICBhdHRyaWJ1dGVCaW5kaW5nczogWydl
        bmFibGVkJ10sCiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIH0pOwogICAgYGBg
        CgogICAgQHByb3BlcnR5IGF0dHJpYnV0ZUJpbmRpbmdzCiAgKi8KICBhdHRy
        aWJ1dGVCaW5kaW5nczogRU1QVFlfQVJSQVksCgogIC8vIC4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4K
        ICAvLyBDT1JFIERJU1BMQVkgTUVUSE9EUwogIC8vCgogIC8qKgogICAgQHBy
        aXZhdGUKCiAgICBTZXR1cCBhIHZpZXcsIGJ1dCBkbyBub3QgZmluaXNoIHdh
        a2luZyBpdCB1cC4KICAgIC0gY29uZmlndXJlIGBjaGlsZFZpZXdzYAogICAg
        LSByZWdpc3RlciB0aGUgdmlldyB3aXRoIHRoZSBnbG9iYWwgdmlld3MgaGFz
        aCwgd2hpY2ggaXMgdXNlZCBmb3IgZXZlbnQKICAgICAgZGlzcGF0Y2gKCiAg
        ICBAbWV0aG9kIGluaXQKICAqLwogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAg
        dGhpcy5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZCB8fCBndWlkRm9yKHRo
        aXMpOwoKICAgIHRoaXMuX3N1cGVyKCk7CgogICAgLy8gc2V0dXAgY2hpbGQg
        dmlld3MuIGJlIHN1cmUgdG8gY2xvbmUgdGhlIGNoaWxkIHZpZXdzIGFycmF5
        IGZpcnN0CiAgICB0aGlzLl9jaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3
        cy5zbGljZSgpOwoKICAgIEVtYmVyLmFzc2VydCgiT25seSBhcnJheXMgYXJl
        IGFsbG93ZWQgZm9yICdjbGFzc05hbWVCaW5kaW5ncyciLCBFbWJlci50eXBl
        T2YodGhpcy5jbGFzc05hbWVCaW5kaW5ncykgPT09ICdhcnJheScpOwogICAg
        dGhpcy5jbGFzc05hbWVCaW5kaW5ncyA9IEVtYmVyLkEodGhpcy5jbGFzc05h
        bWVCaW5kaW5ncy5zbGljZSgpKTsKCiAgICBFbWJlci5hc3NlcnQoIk9ubHkg
        YXJyYXlzIGFyZSBhbGxvd2VkIGZvciAnY2xhc3NOYW1lcyciLCBFbWJlci50
        eXBlT2YodGhpcy5jbGFzc05hbWVzKSA9PT0gJ2FycmF5Jyk7CiAgICB0aGlz
        LmNsYXNzTmFtZXMgPSBFbWJlci5BKHRoaXMuY2xhc3NOYW1lcy5zbGljZSgp
        KTsKICB9LAoKICBhcHBlbmRDaGlsZDogZnVuY3Rpb24odmlldywgb3B0aW9u
        cykgewogICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmFwcGVuZENoaWxk
        KHRoaXMsIHZpZXcsIG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAgUmVtb3Zl
        cyB0aGUgY2hpbGQgdmlldyBmcm9tIHRoZSBwYXJlbnQgdmlldy4KCiAgICBA
        bWV0aG9kIHJlbW92ZUNoaWxkCiAgICBAcGFyYW0ge0VtYmVyLlZpZXd9IHZp
        ZXcKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVyCiAgKi8KICBy
        ZW1vdmVDaGlsZDogZnVuY3Rpb24odmlldykgewogICAgLy8gSWYgd2UncmUg
        ZGVzdHJveWluZywgdGhlIGVudGlyZSBzdWJ0cmVlIHdpbGwgYmUKICAgIC8v
        IGZyZWVkLCBhbmQgdGhlIERPTSB3aWxsIGJlIGhhbmRsZWQgc2VwYXJhdGVs
        eSwKICAgIC8vIHNvIG5vIG5lZWQgdG8gbWVzcyB3aXRoIGNoaWxkVmlld3Mu
        CiAgICBpZiAodGhpcy5pc0Rlc3Ryb3lpbmcpIHsgcmV0dXJuOyB9CgogICAg
        Ly8gdXBkYXRlIHBhcmVudCBub2RlCiAgICBzZXQodmlldywgJ19wYXJlbnRW
        aWV3JywgbnVsbCk7CgogICAgLy8gcmVtb3ZlIHZpZXcgZnJvbSBjaGlsZFZp
        ZXdzIGFycmF5LgogICAgdmFyIGNoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZp
        ZXdzOwoKICAgIEVtYmVyLkVudW1lcmFibGVVdGlscy5yZW1vdmVPYmplY3Qo
        Y2hpbGRWaWV3cywgdmlldyk7CgogICAgdGhpcy5wcm9wZXJ0eURpZENoYW5n
        ZSgnY2hpbGRWaWV3cycpOyAvLyBIVUg/ISB3aGF0IGhhcHBlbmVkIHRvIHdp
        bGwgY2hhbmdlPwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAg
        UmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGUgYHBhcmVudFZpZXdgLgoK
        ICAgIEBtZXRob2QgcmVtb3ZlQWxsQ2hpbGRyZW4KICAgIEByZXR1cm4ge0Vt
        YmVyLlZpZXd9IHJlY2VpdmVyCiAgKi8KICByZW1vdmVBbGxDaGlsZHJlbjog
        ZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5tdXRhdGVDaGlsZFZpZXdz
        KGZ1bmN0aW9uKHBhcmVudFZpZXcsIHZpZXcpIHsKICAgICAgcGFyZW50Vmll
        dy5yZW1vdmVDaGlsZCh2aWV3KTsKICAgIH0pOwogIH0sCgogIGRlc3Ryb3lB
        bGxDaGlsZHJlbjogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5tdXRh
        dGVDaGlsZFZpZXdzKGZ1bmN0aW9uKHBhcmVudFZpZXcsIHZpZXcpIHsKICAg
        ICAgdmlldy5kZXN0cm95KCk7CiAgICB9KTsKICB9LAoKICAvKioKICAgIFJl
        bW92ZXMgdGhlIHZpZXcgZnJvbSBpdHMgYHBhcmVudFZpZXdgLCBpZiBvbmUg
        aXMgZm91bmQuIE90aGVyd2lzZQogICAgZG9lcyBub3RoaW5nLgoKICAgIEBt
        ZXRob2QgcmVtb3ZlRnJvbVBhcmVudAogICAgQHJldHVybiB7RW1iZXIuVmll
        d30gcmVjZWl2ZXIKICAqLwogIHJlbW92ZUZyb21QYXJlbnQ6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHBhcmVudCA9IHRoaXMuX3BhcmVudFZpZXc7CgogICAg
        Ly8gUmVtb3ZlIERPTSBlbGVtZW50IGZyb20gcGFyZW50CiAgICB0aGlzLnJl
        bW92ZSgpOwoKICAgIGlmIChwYXJlbnQpIHsgcGFyZW50LnJlbW92ZUNoaWxk
        KHRoaXMpOyB9CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFlv
        dSBtdXN0IGNhbGwgYGRlc3Ryb3lgIG9uIGEgdmlldyB0byBkZXN0cm95IHRo
        ZSB2aWV3IChhbmQgYWxsIG9mIGl0cwogICAgY2hpbGQgdmlld3MpLiBUaGlz
        IHdpbGwgcmVtb3ZlIHRoZSB2aWV3IGZyb20gYW55IHBhcmVudCBub2RlLCB0
        aGVuIG1ha2UKICAgIHN1cmUgdGhhdCB0aGUgRE9NIGVsZW1lbnQgbWFuYWdl
        ZCBieSB0aGUgdmlldyBjYW4gYmUgcmVsZWFzZWQgYnkgdGhlCiAgICBtZW1v
        cnkgbWFuYWdlci4KCiAgICBAbWV0aG9kIGRlc3Ryb3kKICAqLwogIGRlc3Ry
        b3k6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoaWxkVmlld3MgPSB0aGlzLl9j
        aGlsZFZpZXdzLAogICAgICAgIC8vIGdldCBwYXJlbnRWaWV3IGJlZm9yZSBj
        YWxsaW5nIHN1cGVyIGJlY2F1c2UgaXQnbGwgYmUgZGVzdHJveWVkCiAgICAg
        ICAgbm9uVmlydHVhbFBhcmVudFZpZXcgPSBnZXQodGhpcywgJ3BhcmVudFZp
        ZXcnKSwKICAgICAgICB2aWV3TmFtZSA9IHRoaXMudmlld05hbWUsCiAgICAg
        ICAgY2hpbGRMZW4sIGk7CgogICAgaWYgKCF0aGlzLl9zdXBlcigpKSB7IHJl
        dHVybjsgfQoKICAgIGNoaWxkTGVuID0gY2hpbGRWaWV3cy5sZW5ndGg7CiAg
        ICBmb3IgKGk9Y2hpbGRMZW4tMTsgaT49MDsgaS0tKSB7CiAgICAgIGNoaWxk
        Vmlld3NbaV0ucmVtb3ZlZEZyb21ET00gPSB0cnVlOwogICAgfQoKICAgIC8v
        IHJlbW92ZSBmcm9tIG5vbi12aXJ0dWFsIHBhcmVudCB2aWV3IGlmIHZpZXdO
        YW1lIHdhcyBzcGVjaWZpZWQKICAgIGlmICh2aWV3TmFtZSAmJiBub25WaXJ0
        dWFsUGFyZW50VmlldykgewogICAgICBub25WaXJ0dWFsUGFyZW50Vmlldy5z
        ZXQodmlld05hbWUsIG51bGwpOwogICAgfQoKICAgIGNoaWxkTGVuID0gY2hp
        bGRWaWV3cy5sZW5ndGg7CiAgICBmb3IgKGk9Y2hpbGRMZW4tMTsgaT49MDsg
        aS0tKSB7CiAgICAgIGNoaWxkVmlld3NbaV0uZGVzdHJveSgpOwogICAgfQoK
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgSW5zdGFudGlhdGVz
        IGEgdmlldyB0byBiZSBhZGRlZCB0byB0aGUgY2hpbGRWaWV3cyBhcnJheSBk
        dXJpbmcgdmlldwogICAgaW5pdGlhbGl6YXRpb24uIFlvdSBnZW5lcmFsbHkg
        d2lsbCBub3QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSB1bmxlc3MKICAg
        IHlvdSBhcmUgb3ZlcnJpZGluZyBgY3JlYXRlQ2hpbGRWaWV3cygpYC4gTm90
        ZSB0aGF0IHRoaXMgbWV0aG9kIHdpbGwKICAgIGF1dG9tYXRpY2FsbHkgY29u
        ZmlndXJlIHRoZSBjb3JyZWN0IHNldHRpbmdzIG9uIHRoZSBuZXcgdmlldyBp
        bnN0YW5jZSB0bwogICAgYWN0IGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVudC4K
        CiAgICBAbWV0aG9kIGNyZWF0ZUNoaWxkVmlldwogICAgQHBhcmFtIHtDbGFz
        c3xTdHJpbmd9IHZpZXdDbGFzcwogICAgQHBhcmFtIHtIYXNofSBbYXR0cnNd
        IEF0dHJpYnV0ZXMgdG8gYWRkCiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSBu
        ZXcgaW5zdGFuY2UKICAqLwogIGNyZWF0ZUNoaWxkVmlldzogZnVuY3Rpb24o
        dmlldywgYXR0cnMpIHsKICAgIGlmICghdmlldykgewogICAgICB0aHJvdyBu
        ZXcgVHlwZUVycm9yKCJjcmVhdGVDaGlsZFZpZXdzIGZpcnN0IGFyZ3VtZW50
        IG11c3QgZXhpc3QiKTsKICAgIH0KCiAgICBpZiAodmlldy5pc1ZpZXcgJiYg
        dmlldy5fcGFyZW50VmlldyA9PT0gdGhpcyAmJiB2aWV3LmNvbnRhaW5lciA9
        PT0gdGhpcy5jb250YWluZXIpIHsKICAgICAgcmV0dXJuIHZpZXc7CiAgICB9
        CgogICAgYXR0cnMgPSBhdHRycyB8fCB7fTsKICAgIGF0dHJzLl9wYXJlbnRW
        aWV3ID0gdGhpczsKCiAgICBpZiAoRW1iZXIuQ29yZVZpZXcuZGV0ZWN0KHZp
        ZXcpKSB7CiAgICAgIGF0dHJzLnRlbXBsYXRlRGF0YSA9IGF0dHJzLnRlbXBs
        YXRlRGF0YSB8fCBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YScpOwoKICAgICAg
        YXR0cnMuY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7CiAgICAgIHZpZXcg
        PSB2aWV3LmNyZWF0ZShhdHRycyk7CgogICAgICAvLyBkb24ndCBzZXQgdGhl
        IHByb3BlcnR5IG9uIGEgdmlydHVhbCB2aWV3LCBhcyB0aGV5IGFyZSBpbnZp
        c2libGUgdG8KICAgICAgLy8gY29uc3VtZXJzIG9mIHRoZSB2aWV3IEFQSQog
        ICAgICBpZiAodmlldy52aWV3TmFtZSkgewogICAgICAgIHNldChnZXQodGhp
        cywgJ2NvbmNyZXRlVmlldycpLCB2aWV3LnZpZXdOYW1lLCB2aWV3KTsKICAg
        ICAgfQogICAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHZpZXcp
        IHsKICAgICAgdmFyIGZ1bGxOYW1lID0gJ3ZpZXc6JyArIHZpZXc7CiAgICAg
        IHZhciBWaWV3ID0gdGhpcy5jb250YWluZXIubG9va3VwRmFjdG9yeShmdWxs
        TmFtZSk7CgogICAgICBFbWJlci5hc3NlcnQoIkNvdWxkIG5vdCBmaW5kIHZp
        ZXc6ICciICsgZnVsbE5hbWUgKyAiJyIsICEhVmlldyk7CgogICAgICBhdHRy
        cy50ZW1wbGF0ZURhdGEgPSBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YScpOwog
        ICAgICB2aWV3ID0gVmlldy5jcmVhdGUoYXR0cnMpOwogICAgfSBlbHNlIHsK
        ICAgICAgRW1iZXIuYXNzZXJ0KCdZb3UgbXVzdCBwYXNzIGluc3RhbmNlIG9y
        IHN1YmNsYXNzIG9mIFZpZXcnLCB2aWV3LmlzVmlldyk7CiAgICAgIGF0dHJz
        LmNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyOwoKICAgICAgaWYgKCFnZXQo
        dmlldywgJ3RlbXBsYXRlRGF0YScpKSB7CiAgICAgICAgYXR0cnMudGVtcGxh
        dGVEYXRhID0gZ2V0KHRoaXMsICd0ZW1wbGF0ZURhdGEnKTsKICAgICAgfQoK
        ICAgICAgRW1iZXIuc2V0UHJvcGVydGllcyh2aWV3LCBhdHRycyk7CgogICAg
        fQoKICAgIHJldHVybiB2aWV3OwogIH0sCgogIGJlY2FtZVZpc2libGU6IEVt
        YmVyLkssCiAgYmVjYW1lSGlkZGVuOiBFbWJlci5LLAoKICAvKioKICAgIEBw
        cml2YXRlCgogICAgV2hlbiB0aGUgdmlldydzIGBpc1Zpc2libGVgIHByb3Bl
        cnR5IGNoYW5nZXMsIHRvZ2dsZSB0aGUgdmlzaWJpbGl0eQogICAgZWxlbWVu
        dCBvZiB0aGUgYWN0dWFsIERPTSBlbGVtZW50LgoKICAgIEBtZXRob2QgX2lz
        VmlzaWJsZURpZENoYW5nZQogICovCiAgX2lzVmlzaWJsZURpZENoYW5nZTog
        RW1iZXIub2JzZXJ2ZXIoJ2lzVmlzaWJsZScsIGZ1bmN0aW9uKCkgewogICAg
        dmFyICRlbCA9IHRoaXMuJCgpOwogICAgaWYgKCEkZWwpIHsgcmV0dXJuOyB9
        CgogICAgdmFyIGlzVmlzaWJsZSA9IGdldCh0aGlzLCAnaXNWaXNpYmxlJyk7
        CgogICAgJGVsLnRvZ2dsZShpc1Zpc2libGUpOwoKICAgIGlmICh0aGlzLl9p
        c0FuY2VzdG9ySGlkZGVuKCkpIHsgcmV0dXJuOyB9CgogICAgaWYgKGlzVmlz
        aWJsZSkgewogICAgICB0aGlzLl9ub3RpZnlCZWNhbWVWaXNpYmxlKCk7CiAg
        ICB9IGVsc2UgewogICAgICB0aGlzLl9ub3RpZnlCZWNhbWVIaWRkZW4oKTsK
        ICAgIH0KICB9KSwKCiAgX25vdGlmeUJlY2FtZVZpc2libGU6IGZ1bmN0aW9u
        KCkgewogICAgdGhpcy50cmlnZ2VyKCdiZWNhbWVWaXNpYmxlJyk7CgogICAg
        dGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAg
        dmFyIGlzVmlzaWJsZSA9IGdldCh2aWV3LCAnaXNWaXNpYmxlJyk7CgogICAg
        ICBpZiAoaXNWaXNpYmxlIHx8IGlzVmlzaWJsZSA9PT0gbnVsbCkgewogICAg
        ICAgIHZpZXcuX25vdGlmeUJlY2FtZVZpc2libGUoKTsKICAgICAgfQogICAg
        fSk7CiAgfSwKCiAgX25vdGlmeUJlY2FtZUhpZGRlbjogZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLnRyaWdnZXIoJ2JlY2FtZUhpZGRlbicpOwogICAgdGhpcy5m
        b3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgdmFyIGlz
        VmlzaWJsZSA9IGdldCh2aWV3LCAnaXNWaXNpYmxlJyk7CgogICAgICBpZiAo
        aXNWaXNpYmxlIHx8IGlzVmlzaWJsZSA9PT0gbnVsbCkgewogICAgICAgIHZp
        ZXcuX25vdGlmeUJlY2FtZUhpZGRlbigpOwogICAgICB9CiAgICB9KTsKICB9
        LAoKICBfaXNBbmNlc3RvckhpZGRlbjogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        cGFyZW50ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Jyk7CgogICAgd2hpbGUg
        KHBhcmVudCkgewogICAgICBpZiAoZ2V0KHBhcmVudCwgJ2lzVmlzaWJsZScp
        ID09PSBmYWxzZSkgeyByZXR1cm4gdHJ1ZTsgfQoKICAgICAgcGFyZW50ID0g
        Z2V0KHBhcmVudCwgJ3BhcmVudFZpZXcnKTsKICAgIH0KCiAgICByZXR1cm4g
        ZmFsc2U7CiAgfSwKCiAgY2xlYXJCdWZmZXI6IGZ1bmN0aW9uKCkgewogICAg
        dGhpcy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlvbih2aWV3KSB7CiAgICAg
        IHZpZXcuYnVmZmVyID0gbnVsbDsKICAgIH0pOwogIH0sCgogIHRyYW5zaXRp
        b25UbzogZnVuY3Rpb24oc3RhdGUsIGNoaWxkcmVuKSB7CiAgICB2YXIgcHJp
        b3JTdGF0ZSA9IHRoaXMuY3VycmVudFN0YXRlLAogICAgICAgIGN1cnJlbnRT
        dGF0ZSA9IHRoaXMuY3VycmVudFN0YXRlID0gdGhpcy5zdGF0ZXNbc3RhdGVd
        OwogICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwoKICAgIGlmIChwcmlvclN0YXRl
        ICYmIHByaW9yU3RhdGUuZXhpdCkgeyBwcmlvclN0YXRlLmV4aXQodGhpcyk7
        IH0KICAgIGlmIChjdXJyZW50U3RhdGUuZW50ZXIpIHsgY3VycmVudFN0YXRl
        LmVudGVyKHRoaXMpOyB9CiAgICBpZiAoc3RhdGUgPT09ICdpbkRPTScpIHsg
        ZGVsZXRlIEVtYmVyLm1ldGEodGhpcykuY2FjaGUuZWxlbWVudDsgfQoKICAg
        IGlmIChjaGlsZHJlbiAhPT0gZmFsc2UpIHsKICAgICAgdGhpcy5mb3JFYWNo
        Q2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgICB2aWV3LnRyYW5z
        aXRpb25UbyhzdGF0ZSk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIC8vIC4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4KICAvLyBFVkVOVCBIQU5ETElORwogIC8vCgogIC8qKgogICAg
        QHByaXZhdGUKCiAgICBIYW5kbGUgZXZlbnRzIGZyb20gYEVtYmVyLkV2ZW50
        RGlzcGF0Y2hlcmAKCiAgICBAbWV0aG9kIGhhbmRsZUV2ZW50CiAgICBAcGFy
        YW0gZXZlbnROYW1lIHtTdHJpbmd9CiAgICBAcGFyYW0gZXZ0IHtFdmVudH0K
        ICAqLwogIGhhbmRsZUV2ZW50OiBmdW5jdGlvbihldmVudE5hbWUsIGV2dCkg
        ewogICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmhhbmRsZUV2ZW50KHRo
        aXMsIGV2ZW50TmFtZSwgZXZ0KTsKICB9LAoKICByZWdpc3Rlck9ic2VydmVy
        OiBmdW5jdGlvbihyb290LCBwYXRoLCB0YXJnZXQsIG9ic2VydmVyKSB7CiAg
        ICBpZiAoIW9ic2VydmVyICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiB0YXJn
        ZXQpIHsKICAgICAgb2JzZXJ2ZXIgPSB0YXJnZXQ7CiAgICAgIHRhcmdldCA9
        IG51bGw7CiAgICB9CgogICAgaWYgKCFyb290IHx8IHR5cGVvZiByb290ICE9
        PSAnb2JqZWN0JykgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHZp
        ZXcgPSB0aGlzLAogICAgICAgIHN0YXRlQ2hlY2tlZE9ic2VydmVyID0gZnVu
        Y3Rpb24oKSB7CiAgICAgICAgICB2aWV3LmN1cnJlbnRTdGF0ZS5pbnZva2VP
        YnNlcnZlcih0aGlzLCBvYnNlcnZlcik7CiAgICAgICAgfSwKICAgICAgICBz
        Y2hlZHVsZWRPYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgRW1i
        ZXIucnVuLnNjaGVkdWxlT25jZSgncmVuZGVyJywgdGhpcywgc3RhdGVDaGVj
        a2VkT2JzZXJ2ZXIpOwogICAgICAgIH07CgogICAgRW1iZXIuYWRkT2JzZXJ2
        ZXIocm9vdCwgcGF0aCwgdGFyZ2V0LCBzY2hlZHVsZWRPYnNlcnZlcik7Cgog
        ICAgdGhpcy5vbmUoJ3dpbGxDbGVhclJlbmRlcicsIGZ1bmN0aW9uKCkgewog
        ICAgICBFbWJlci5yZW1vdmVPYnNlcnZlcihyb290LCBwYXRoLCB0YXJnZXQs
        IHNjaGVkdWxlZE9ic2VydmVyKTsKICAgIH0pOwogIH0KCn0pOwoKLyoKICBE
        ZXNjcmliZSBob3cgdGhlIHNwZWNpZmllZCBhY3Rpb25zIHNob3VsZCBiZWhh
        dmUgaW4gdGhlIHZhcmlvdXMKICBzdGF0ZXMgdGhhdCBhIHZpZXcgY2FuIGV4
        aXN0IGluLiBQb3NzaWJsZSBzdGF0ZXM6CgogICogcHJlUmVuZGVyOiB3aGVu
        IGEgdmlldyBpcyBmaXJzdCBpbnN0YW50aWF0ZWQsIGFuZCBhZnRlciBpdHMK
        ICAgIGVsZW1lbnQgd2FzIGRlc3Ryb3llZCwgaXQgaXMgaW4gdGhlIHByZVJl
        bmRlciBzdGF0ZQogICogaW5CdWZmZXI6IG9uY2UgYSB2aWV3IGhhcyBiZWVu
        IHJlbmRlcmVkLCBidXQgYmVmb3JlIGl0IGhhcwogICAgYmVlbiBpbnNlcnRl
        ZCBpbnRvIHRoZSBET00sIGl0IGlzIGluIHRoZSBpbkJ1ZmZlciBzdGF0ZQog
        ICogaW5ET006IG9uY2UgYSB2aWV3IGhhcyBiZWVuIGluc2VydGVkIGludG8g
        dGhlIERPTSBpdCBpcyBpbgogICAgdGhlIGluRE9NIHN0YXRlLiBBIHZpZXcg
        c3BlbmRzIHRoZSB2YXN0IG1ham9yaXR5IG9mIGl0cwogICAgZXhpc3RlbmNl
        IGluIHRoaXMgc3RhdGUuCiAgKiBkZXN0cm95ZWQ6IG9uY2UgYSB2aWV3IGhh
        cyBiZWVuIGRlc3Ryb3llZCAodXNpbmcgdGhlIGRlc3Ryb3kKICAgIG1ldGhv
        ZCksIGl0IGlzIGluIHRoaXMgc3RhdGUuIE5vIGZ1cnRoZXIgYWN0aW9ucyBj
        YW4gYmUgaW52b2tlZAogICAgb24gYSBkZXN0cm95ZWQgdmlldy4KKi8KCiAg
        Ly8gaW4gdGhlIGRlc3Ryb3llZCBzdGF0ZSwgZXZlcnl0aGluZyBpcyBpbGxl
        Z2FsCgogIC8vIGJlZm9yZSByZW5kZXJpbmcgaGFzIGJlZ3VuLCBhbGwgbGVn
        YWwgbWFuaXB1bGF0aW9ucyBhcmUgbm9vcHMuCgogIC8vIGluc2lkZSB0aGUg
        YnVmZmVyLCBsZWdhbCBtYW5pcHVsYXRpb25zIGFyZSBkb25lIG9uIHRoZSBi
        dWZmZXIKCiAgLy8gb25jZSB0aGUgdmlldyBoYXMgYmVlbiBpbnNlcnRlZCBp
        bnRvIHRoZSBET00sIGxlZ2FsIG1hbmlwdWxhdGlvbnMKICAvLyBhcmUgZG9u
        ZSBvbiB0aGUgRE9NIGVsZW1lbnQuCgpmdW5jdGlvbiBub3RpZnlNdXRhdGlv
        bkxpc3RlbmVycygpIHsKICBFbWJlci5ydW4ub25jZShFbWJlci5WaWV3LCAn
        bm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMnKTsKfQoKdmFyIERPTU1hbmFnZXIg
        PSB7CiAgcHJlcGVuZDogZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmll
        dy4kKCkucHJlcGVuZChodG1sKTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVu
        ZXJzKCk7CiAgfSwKCiAgYWZ0ZXI6IGZ1bmN0aW9uKHZpZXcsIGh0bWwpIHsK
        ICAgIHZpZXcuJCgpLmFmdGVyKGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25M
        aXN0ZW5lcnMoKTsKICB9LAoKICBodG1sOiBmdW5jdGlvbih2aWV3LCBodG1s
        KSB7CiAgICB2aWV3LiQoKS5odG1sKGh0bWwpOwogICAgbm90aWZ5TXV0YXRp
        b25MaXN0ZW5lcnMoKTsKICB9LAoKICByZXBsYWNlOiBmdW5jdGlvbih2aWV3
        KSB7CiAgICB2YXIgZWxlbWVudCA9IGdldCh2aWV3LCAnZWxlbWVudCcpOwoK
        ICAgIHNldCh2aWV3LCAnZWxlbWVudCcsIG51bGwpOwoKICAgIHZpZXcuX2lu
        c2VydEVsZW1lbnRMYXRlcihmdW5jdGlvbigpIHsKICAgICAgRW1iZXIuJChl
        bGVtZW50KS5yZXBsYWNlV2l0aChnZXQodmlldywgJ2VsZW1lbnQnKSk7CiAg
        ICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgICB9KTsKICB9LAoK
        ICByZW1vdmU6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZpZXcuJCgpLnJlbW92
        ZSgpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9LAoKICBl
        bXB0eTogZnVuY3Rpb24odmlldykgewogICAgdmlldy4kKCkuZW1wdHkoKTsK
        ICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgfQp9OwoKRW1iZXIu
        Vmlldy5yZW9wZW4oewogIGRvbU1hbmFnZXI6IERPTU1hbmFnZXIKfSk7CgpF
        bWJlci5WaWV3LnJlb3BlbkNsYXNzKHsKCiAgLyoqCiAgICBAcHJpdmF0ZQoK
        ICAgIFBhcnNlIGEgcGF0aCBhbmQgcmV0dXJuIGFuIG9iamVjdCB3aGljaCBo
        b2xkcyB0aGUgcGFyc2VkIHByb3BlcnRpZXMuCgogICAgRm9yIGV4YW1wbGUg
        YSBwYXRoIGxpa2UgImNvbnRlbnQuaXNFbmFibGVkOmVuYWJsZWQ6ZGlzYWJs
        ZWQiIHdpbGwgcmV0dXJuIHRoZQogICAgZm9sbG93aW5nIG9iamVjdDoKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICB7CiAgICAgIHBhdGg6ICJjb250ZW50Lmlz
        RW5hYmxlZCIsCiAgICAgIGNsYXNzTmFtZTogImVuYWJsZWQiLAogICAgICBm
        YWxzeUNsYXNzTmFtZTogImRpc2FibGVkIiwKICAgICAgY2xhc3NOYW1lczog
        IjplbmFibGVkOmRpc2FibGVkIgogICAgfQogICAgYGBgCgogICAgQG1ldGhv
        ZCBfcGFyc2VQcm9wZXJ0eVBhdGgKICAgIEBzdGF0aWMKICAqLwogIF9wYXJz
        ZVByb3BlcnR5UGF0aDogZnVuY3Rpb24ocGF0aCkgewogICAgdmFyIHNwbGl0
        ID0gcGF0aC5zcGxpdCgnOicpLAogICAgICAgIHByb3BlcnR5UGF0aCA9IHNw
        bGl0WzBdLAogICAgICAgIGNsYXNzTmFtZXMgPSAiIiwKICAgICAgICBjbGFz
        c05hbWUsCiAgICAgICAgZmFsc3lDbGFzc05hbWU7CgogICAgLy8gY2hlY2sg
        aWYgdGhlIHByb3BlcnR5IGlzIGRlZmluZWQgYXMgcHJvcDpjbGFzcyBvciBw
        cm9wOnRydWVDbGFzczpmYWxzZUNsYXNzCiAgICBpZiAoc3BsaXQubGVuZ3Ro
        ID4gMSkgewogICAgICBjbGFzc05hbWUgPSBzcGxpdFsxXTsKICAgICAgaWYg
        KHNwbGl0Lmxlbmd0aCA9PT0gMykgeyBmYWxzeUNsYXNzTmFtZSA9IHNwbGl0
        WzJdOyB9CgogICAgICBjbGFzc05hbWVzID0gJzonICsgY2xhc3NOYW1lOwog
        ICAgICBpZiAoZmFsc3lDbGFzc05hbWUpIHsgY2xhc3NOYW1lcyArPSAiOiIg
        KyBmYWxzeUNsYXNzTmFtZTsgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAg
        IHBhdGg6IHByb3BlcnR5UGF0aCwKICAgICAgY2xhc3NOYW1lczogY2xhc3NO
        YW1lcywKICAgICAgY2xhc3NOYW1lOiAoY2xhc3NOYW1lID09PSAnJykgPyB1
        bmRlZmluZWQgOiBjbGFzc05hbWUsCiAgICAgIGZhbHN5Q2xhc3NOYW1lOiBm
        YWxzeUNsYXNzTmFtZQogICAgfTsKICB9LAoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgR2V0IHRoZSBjbGFzcyBuYW1lIGZvciBhIGdpdmVuIHZhbHVlLCBi
        YXNlZCBvbiB0aGUgcGF0aCwgb3B0aW9uYWwKICAgIGBjbGFzc05hbWVgIGFu
        ZCBvcHRpb25hbCBgZmFsc3lDbGFzc05hbWVgLgoKICAgIC0gaWYgYSBgY2xh
        c3NOYW1lYCBvciBgZmFsc3lDbGFzc05hbWVgIGhhcyBiZWVuIHNwZWNpZmll
        ZDoKICAgICAgLSBpZiB0aGUgdmFsdWUgaXMgdHJ1dGh5IGFuZCBgY2xhc3NO
        YW1lYCBoYXMgYmVlbiBzcGVjaWZpZWQsCiAgICAgICAgYGNsYXNzTmFtZWAg
        aXMgcmV0dXJuZWQKICAgICAgLSBpZiB0aGUgdmFsdWUgaXMgZmFsc3kgYW5k
        IGBmYWxzeUNsYXNzTmFtZWAgaGFzIGJlZW4gc3BlY2lmaWVkLAogICAgICAg
        IGBmYWxzeUNsYXNzTmFtZWAgaXMgcmV0dXJuZWQKICAgICAgLSBvdGhlcndp
        c2UgYG51bGxgIGlzIHJldHVybmVkCiAgICAtIGlmIHRoZSB2YWx1ZSBpcyBg
        dHJ1ZWAsIHRoZSBkYXNoZXJpemVkIGxhc3QgcGFydCBvZiB0aGUgc3VwcGxp
        ZWQgcGF0aAogICAgICBpcyByZXR1cm5lZAogICAgLSBpZiB0aGUgdmFsdWUg
        aXMgbm90IGBmYWxzZWAsIGB1bmRlZmluZWRgIG9yIGBudWxsYCwgdGhlIGB2
        YWx1ZWAKICAgICAgaXMgcmV0dXJuZWQKICAgIC0gaWYgbm9uZSBvZiB0aGUg
        YWJvdmUgcnVsZXMgYXBwbHksIGBudWxsYCBpcyByZXR1cm5lZAoKICAgIEBt
        ZXRob2QgX2NsYXNzU3RyaW5nRm9yVmFsdWUKICAgIEBwYXJhbSBwYXRoCiAg
        ICBAcGFyYW0gdmFsCiAgICBAcGFyYW0gY2xhc3NOYW1lCiAgICBAcGFyYW0g
        ZmFsc3lDbGFzc05hbWUKICAgIEBzdGF0aWMKICAqLwogIF9jbGFzc1N0cmlu
        Z0ZvclZhbHVlOiBmdW5jdGlvbihwYXRoLCB2YWwsIGNsYXNzTmFtZSwgZmFs
        c3lDbGFzc05hbWUpIHsKICAgIC8vIFdoZW4gdXNpbmcgdGhlIGNvbG9uIHN5
        bnRheCwgZXZhbHVhdGUgdGhlIHRydXRoaW5lc3Mgb3IgZmFsc2luZXNzCiAg
        ICAvLyBvZiB0aGUgdmFsdWUgdG8gZGV0ZXJtaW5lIHdoaWNoIGNsYXNzTmFt
        ZSB0byByZXR1cm4KICAgIGlmIChjbGFzc05hbWUgfHwgZmFsc3lDbGFzc05h
        bWUpIHsKICAgICAgaWYgKGNsYXNzTmFtZSAmJiAhIXZhbCkgewogICAgICAg
        IHJldHVybiBjbGFzc05hbWU7CgogICAgICB9IGVsc2UgaWYgKGZhbHN5Q2xh
        c3NOYW1lICYmICF2YWwpIHsKICAgICAgICByZXR1cm4gZmFsc3lDbGFzc05h
        bWU7CgogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAg
        ICB9CgogICAgLy8gSWYgdmFsdWUgaXMgYSBCb29sZWFuIGFuZCB0cnVlLCBy
        ZXR1cm4gdGhlIGRhc2hlcml6ZWQgcHJvcGVydHkKICAgIC8vIG5hbWUuCiAg
        ICB9IGVsc2UgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAvLyBOb3JtYWxp
        emUgcHJvcGVydHkgcGF0aCB0byBiZSBzdWl0YWJsZSBmb3IgdXNlCiAgICAg
        IC8vIGFzIGEgY2xhc3MgbmFtZS4gRm9yIGV4YXBsZSwgY29udGVudC5mb28u
        YmFyQmF6CiAgICAgIC8vIGJlY29tZXMgYmFyLWJhei4KICAgICAgdmFyIHBh
        cnRzID0gcGF0aC5zcGxpdCgnLicpOwogICAgICByZXR1cm4gRW1iZXIuU3Ry
        aW5nLmRhc2hlcml6ZShwYXJ0c1twYXJ0cy5sZW5ndGgtMV0pOwoKICAgIC8v
        IElmIHRoZSB2YWx1ZSBpcyBub3QgZmFsc2UsIHVuZGVmaW5lZCwgb3IgbnVs
        bCwgcmV0dXJuIHRoZSBjdXJyZW50CiAgICAvLyB2YWx1ZSBvZiB0aGUgcHJv
        cGVydHkuCiAgICB9IGVsc2UgaWYgKHZhbCAhPT0gZmFsc2UgJiYgdmFsICE9
        IG51bGwpIHsKICAgICAgcmV0dXJuIHZhbDsKCiAgICAvLyBOb3RoaW5nIHRv
        IGRpc3BsYXkuIFJldHVybiBudWxsIHNvIHRoYXQgdGhlIG9sZCBjbGFzcyBp
        cyByZW1vdmVkCiAgICAvLyBidXQgbm8gbmV3IGNsYXNzIGlzIGFkZGVkLgog
        ICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQp9KTsK
        CnZhciBtdXRhdGlvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuRXZl
        bnRlZCkuY3JlYXRlKCk7CgpFbWJlci5WaWV3LmFkZE11dGF0aW9uTGlzdGVu
        ZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgewogIG11dGF0aW9uLm9uKCdjaGFu
        Z2UnLCBjYWxsYmFjayk7Cn07CgpFbWJlci5WaWV3LnJlbW92ZU11dGF0aW9u
        TGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgewogIG11dGF0aW9uLm9m
        ZignY2hhbmdlJywgY2FsbGJhY2spOwp9OwoKRW1iZXIuVmlldy5ub3RpZnlN
        dXRhdGlvbkxpc3RlbmVycyA9IGZ1bmN0aW9uKCkgewogIG11dGF0aW9uLnRy
        aWdnZXIoJ2NoYW5nZScpOwp9OwoKLyoqCiAgR2xvYmFsIHZpZXdzIGhhc2gK
        CiAgQHByb3BlcnR5IHZpZXdzCiAgQHN0YXRpYwogIEB0eXBlIEhhc2gKKi8K
        RW1iZXIuVmlldy52aWV3cyA9IHt9OwoKLy8gSWYgc29tZW9uZSBvdmVycmlk
        ZXMgdGhlIGNoaWxkIHZpZXdzIGNvbXB1dGVkIHByb3BlcnR5IHdoZW4KLy8g
        ZGVmaW5pbmcgdGhlaXIgY2xhc3MsIHdlIHdhbnQgdG8gYmUgYWJsZSB0byBw
        cm9jZXNzIHRoZSB1c2VyJ3MKLy8gc3VwcGxpZWQgY2hpbGRWaWV3cyBhbmQg
        dGhlbiByZXN0b3JlIHRoZSBvcmlnaW5hbCBjb21wdXRlZCBwcm9wZXJ0eQov
        LyBhdCB2aWV3IGluaXRpYWxpemF0aW9uIHRpbWUuIFRoaXMgaGFwcGVucyBp
        biBFbWJlci5Db250YWluZXJWaWV3J3MgaW5pdAovLyBtZXRob2QuCkVtYmVy
        LlZpZXcuY2hpbGRWaWV3c1Byb3BlcnR5ID0gY2hpbGRWaWV3c1Byb3BlcnR5
        OwoKRW1iZXIuVmlldy5hcHBseUF0dHJpYnV0ZUJpbmRpbmdzID0gZnVuY3Rp
        b24oZWxlbSwgbmFtZSwgdmFsdWUpIHsKICB2YXIgdHlwZSA9IEVtYmVyLnR5
        cGVPZih2YWx1ZSk7CgogIC8vIGlmIHRoaXMgY2hhbmdlcywgYWxzbyBjaGFu
        Z2UgdGhlIGxvZ2ljIGluIGVtYmVyLWhhbmRsZWJhcnMvbGliL2hlbHBlcnMv
        YmluZGluZy5qcwogIGlmIChuYW1lICE9PSAndmFsdWUnICYmICh0eXBlID09
        PSAnc3RyaW5nJyB8fCAodHlwZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZh
        bHVlKSkpKSB7CiAgICBpZiAodmFsdWUgIT09IGVsZW0uYXR0cihuYW1lKSkg
        ewogICAgICBlbGVtLmF0dHIobmFtZSwgdmFsdWUpOwogICAgfQogIH0gZWxz
        ZSBpZiAobmFtZSA9PT0gJ3ZhbHVlJyB8fCB0eXBlID09PSAnYm9vbGVhbicp
        IHsKICAgIC8vIFdlIGNhbid0IHNldCBwcm9wZXJ0aWVzIHRvIHVuZGVmaW5l
        ZCBvciBudWxsCiAgICBpZiAoRW1iZXIuaXNOb25lKHZhbHVlKSkgeyB2YWx1
        ZSA9ICcnOyB9CgogICAgaWYgKHZhbHVlICE9PSBlbGVtLnByb3AobmFtZSkp
        IHsKICAgICAgLy8gdmFsdWUgYW5kIGJvb2xlYW5zIHNob3VsZCBhbHdheXMg
        YmUgcHJvcGVydGllcwogICAgICBlbGVtLnByb3AobmFtZSwgdmFsdWUpOwog
        ICAgfQogIH0gZWxzZSBpZiAoIXZhbHVlKSB7CiAgICBlbGVtLnJlbW92ZUF0
        dHIobmFtZSk7CiAgfQp9OwoKRW1iZXIuVmlldy5zdGF0ZXMgPSBzdGF0ZXM7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQs
        IHNldCA9IEVtYmVyLnNldDsKCkVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0
        ID0gewogIC8vIGFwcGVuZENoaWxkIGlzIG9ubHkgbGVnYWwgd2hpbGUgcmVu
        ZGVyaW5nIHRoZSBidWZmZXIuCiAgYXBwZW5kQ2hpbGQ6IGZ1bmN0aW9uKCkg
        ewogICAgdGhyb3cgIllvdSBjYW4ndCB1c2UgYXBwZW5kQ2hpbGQgb3V0c2lk
        ZSBvZiB0aGUgcmVuZGVyaW5nIHByb2Nlc3MiOwogIH0sCgogICQ6IGZ1bmN0
        aW9uKCkgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9LAoKICBnZXRFbGVt
        ZW50OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBudWxsOwogIH0sCgogIC8v
        IEhhbmRsZSBldmVudHMgZnJvbSBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYAog
        IGhhbmRsZUV2ZW50OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0cnVlOyAv
        LyBjb250aW51ZSBldmVudCBwcm9wYWdhdGlvbgogIH0sCgogIGRlc3Ryb3lF
        bGVtZW50OiBmdW5jdGlvbih2aWV3KSB7CiAgICBzZXQodmlldywgJ2VsZW1l
        bnQnLCBudWxsKTsKICAgIGlmICh2aWV3Ll9zY2hlZHVsZWRJbnNlcnQpIHsK
        ICAgICAgRW1iZXIucnVuLmNhbmNlbCh2aWV3Ll9zY2hlZHVsZWRJbnNlcnQp
        OwogICAgICB2aWV3Ll9zY2hlZHVsZWRJbnNlcnQgPSBudWxsOwogICAgfQog
        ICAgcmV0dXJuIHZpZXc7CiAgfSwKCiAgcmVuZGVyVG9CdWZmZXJJZk5lZWRl
        ZDogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIHJl
        cmVuZGVyOiBFbWJlci5LLAogIGludm9rZU9ic2VydmVyOiBFbWJlci5LCn07
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBwcmVSZW5kZXIgPSBFbWJl
        ci5WaWV3LnN0YXRlcy5wcmVSZW5kZXIgPSBFbWJlci5jcmVhdGUoRW1iZXIu
        Vmlldy5zdGF0ZXMuX2RlZmF1bHQpOwoKRW1iZXIubWVyZ2UocHJlUmVuZGVy
        LCB7CiAgLy8gYSB2aWV3IGxlYXZlcyB0aGUgcHJlUmVuZGVyIHN0YXRlIG9u
        Y2UgaXRzIGVsZW1lbnQgaGFzIGJlZW4KICAvLyBjcmVhdGVkIChjcmVhdGVF
        bGVtZW50KS4KICBpbnNlcnRFbGVtZW50OiBmdW5jdGlvbih2aWV3LCBmbikg
        ewogICAgdmlldy5jcmVhdGVFbGVtZW50KCk7CiAgICB2YXIgdmlld0NvbGxl
        Y3Rpb24gPSB2aWV3LnZpZXdIaWVyYXJjaHlDb2xsZWN0aW9uKCk7CgogICAg
        dmlld0NvbGxlY3Rpb24udHJpZ2dlcignd2lsbEluc2VydEVsZW1lbnQnKTsK
        CiAgICBmbi5jYWxsKHZpZXcpOwoKICAgIC8vIFdlIHRyYW5zaXRpb24gdG8g
        YGluRE9NYCBpZiB0aGUgZWxlbWVudCBleGlzdHMgaW4gdGhlIERPTQogICAg
        dmFyIGVsZW1lbnQgPSB2aWV3LmdldCgnZWxlbWVudCcpOwogICAgd2hpbGUg
        KGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpIHsKICAgICAgaWYgKGVs
        ZW1lbnQgPT09IGRvY3VtZW50KSB7CiAgICAgICAgdmlld0NvbGxlY3Rpb24u
        dHJhbnNpdGlvblRvKCdpbkRPTScsIGZhbHNlKTsKICAgICAgICB2aWV3Q29s
        bGVjdGlvbi50cmlnZ2VyKCdkaWRJbnNlcnRFbGVtZW50Jyk7CiAgICAgIH0K
        ICAgIH0KCiAgfSwKCiAgcmVuZGVyVG9CdWZmZXJJZk5lZWRlZDogZnVuY3Rp
        b24odmlldywgYnVmZmVyKSB7CiAgICB2aWV3LnJlbmRlclRvQnVmZmVyKGJ1
        ZmZlcik7CiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBlbXB0eTogRW1iZXIu
        SywKCiAgc2V0RWxlbWVudDogZnVuY3Rpb24odmlldywgdmFsdWUpIHsKICAg
        IGlmICh2YWx1ZSAhPT0gbnVsbCkgewogICAgICB2aWV3LnRyYW5zaXRpb25U
        bygnaGFzRWxlbWVudCcpOwogICAgfQogICAgcmV0dXJuIHZhbHVlOwogIH0K
        fSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5n
        ZXQsIHNldCA9IEVtYmVyLnNldDsKCnZhciBpbkJ1ZmZlciA9IEVtYmVyLlZp
        ZXcuc3RhdGVzLmluQnVmZmVyID0gRW1iZXIuY3JlYXRlKEVtYmVyLlZpZXcu
        c3RhdGVzLl9kZWZhdWx0KTsKCkVtYmVyLm1lcmdlKGluQnVmZmVyLCB7CiAg
        JDogZnVuY3Rpb24odmlldywgc2VsKSB7CiAgICAvLyBpZiB3ZSBkb24ndCBo
        YXZlIGFuIGVsZW1lbnQgeWV0LCBzb21lb25lIGNhbGxpbmcgdGhpcy4kKCkg
        aXMKICAgIC8vIHRyeWluZyB0byB1cGRhdGUgYW4gZWxlbWVudCB0aGF0IGlz
        bid0IGluIHRoZSBET00uIEluc3RlYWQsCiAgICAvLyByZXJlbmRlciB0aGUg
        dmlldyB0byBhbGxvdyB0aGUgcmVuZGVyIG1ldGhvZCB0byByZWZsZWN0IHRo
        ZQogICAgLy8gY2hhbmdlcy4KICAgIHZpZXcucmVyZW5kZXIoKTsKICAgIHJl
        dHVybiBFbWJlci4kKCk7CiAgfSwKCiAgLy8gd2hlbiBhIHZpZXcgaXMgcmVu
        ZGVyZWQgaW4gYSBidWZmZXIsIHJlcmVuZGVyaW5nIGl0IHNpbXBseQogIC8v
        IHJlcGxhY2VzIHRoZSBleGlzdGluZyBidWZmZXIgd2l0aCBhIG5ldyBvbmUK
        ICByZXJlbmRlcjogZnVuY3Rpb24odmlldykgewogICAgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCJTb21ldGhpbmcgeW91IGRpZCBjYXVzZWQgYSB2aWV3IHRv
        IHJlLXJlbmRlciBhZnRlciBpdCByZW5kZXJlZCBidXQgYmVmb3JlIGl0IHdh
        cyBpbnNlcnRlZCBpbnRvIHRoZSBET00uIik7CiAgfSwKCiAgLy8gd2hlbiBh
        IHZpZXcgaXMgcmVuZGVyZWQgaW4gYSBidWZmZXIsIGFwcGVuZGluZyBhIGNo
        aWxkCiAgLy8gdmlldyB3aWxsIHJlbmRlciB0aGF0IHZpZXcgYW5kIGFwcGVu
        ZCB0aGUgcmVzdWx0aW5nCiAgLy8gYnVmZmVyIGludG8gaXRzIGJ1ZmZlci4K
        ICBhcHBlbmRDaGlsZDogZnVuY3Rpb24odmlldywgY2hpbGRWaWV3LCBvcHRp
        b25zKSB7CiAgICB2YXIgYnVmZmVyID0gdmlldy5idWZmZXIsIF9jaGlsZFZp
        ZXdzID0gdmlldy5fY2hpbGRWaWV3czsKCiAgICBjaGlsZFZpZXcgPSB2aWV3
        LmNyZWF0ZUNoaWxkVmlldyhjaGlsZFZpZXcsIG9wdGlvbnMpOwogICAgaWYg
        KCFfY2hpbGRWaWV3cy5sZW5ndGgpIHsgX2NoaWxkVmlld3MgPSB2aWV3Ll9j
        aGlsZFZpZXdzID0gX2NoaWxkVmlld3Muc2xpY2UoKTsgfQogICAgX2NoaWxk
        Vmlld3MucHVzaChjaGlsZFZpZXcpOwoKICAgIGNoaWxkVmlldy5yZW5kZXJU
        b0J1ZmZlcihidWZmZXIpOwoKICAgIHZpZXcucHJvcGVydHlEaWRDaGFuZ2Uo
        J2NoaWxkVmlld3MnKTsKCiAgICByZXR1cm4gY2hpbGRWaWV3OwogIH0sCgog
        IC8vIHdoZW4gYSB2aWV3IGlzIHJlbmRlcmVkIGluIGEgYnVmZmVyLCBkZXN0
        cm95aW5nIHRoZQogIC8vIGVsZW1lbnQgd2lsbCBzaW1wbHkgZGVzdHJveSB0
        aGUgYnVmZmVyIGFuZCBwdXQgdGhlCiAgLy8gc3RhdGUgYmFjayBpbnRvIHRo
        ZSBwcmVSZW5kZXIgc3RhdGUuCiAgZGVzdHJveUVsZW1lbnQ6IGZ1bmN0aW9u
        KHZpZXcpIHsKICAgIHZpZXcuY2xlYXJCdWZmZXIoKTsKICAgIHZhciB2aWV3
        Q29sbGVjdGlvbiA9IHZpZXcuX25vdGlmeVdpbGxEZXN0cm95RWxlbWVudCgp
        OwogICAgdmlld0NvbGxlY3Rpb24udHJhbnNpdGlvblRvKCdwcmVSZW5kZXIn
        LCBmYWxzZSk7CgogICAgcmV0dXJuIHZpZXc7CiAgfSwKCiAgZW1wdHk6IGZ1
        bmN0aW9uKCkgewogICAgRW1iZXIuYXNzZXJ0KCJFbXB0eWluZyBhIHZpZXcg
        aW4gdGhlIGluQnVmZmVyIHN0YXRlIGlzIG5vdCBhbGxvd2VkIGFuZCBzaG91
        bGQgbm90IGhhcHBlbiB1bmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcy4gTW9z
        dCBsaWtlbHkgdGhlcmUgaXMgYSBidWcgaW4geW91ciBhcHBsaWNhdGlvbi4g
        VGhpcyBtYXkgYmUgZHVlIHRvIGV4Y2Vzc2l2ZSBwcm9wZXJ0eSBjaGFuZ2Ug
        bm90aWZpY2F0aW9ucy4iKTsKICB9LAoKICByZW5kZXJUb0J1ZmZlcklmTmVl
        ZGVkOiBmdW5jdGlvbiAodmlldywgYnVmZmVyKSB7CiAgICByZXR1cm4gZmFs
        c2U7CiAgfSwKCiAgLy8gSXQgc2hvdWxkIGJlIGltcG9zc2libGUgZm9yIGEg
        cmVuZGVyZWQgdmlldyB0byBiZSBzY2hlZHVsZWQgZm9yCiAgLy8gaW5zZXJ0
        aW9uLgogIGluc2VydEVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgdGhyb3cg
        IllvdSBjYW4ndCBpbnNlcnQgYW4gZWxlbWVudCB0aGF0IGhhcyBhbHJlYWR5
        IGJlZW4gcmVuZGVyZWQiOwogIH0sCgogIHNldEVsZW1lbnQ6IGZ1bmN0aW9u
        KHZpZXcsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpIHsKICAg
        ICAgdmlldy50cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicpOwogICAgfSBlbHNl
        IHsKICAgICAgdmlldy5jbGVhckJ1ZmZlcigpOwogICAgICB2aWV3LnRyYW5z
        aXRpb25UbygnaGFzRWxlbWVudCcpOwogICAgfQoKICAgIHJldHVybiB2YWx1
        ZTsKICB9LAoKICBpbnZva2VPYnNlcnZlcjogZnVuY3Rpb24odGFyZ2V0LCBv
        YnNlcnZlcikgewogICAgb2JzZXJ2ZXIuY2FsbCh0YXJnZXQpOwogIH0KfSk7
        CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7Cgp2YXIgaGFzRWxlbWVudCA9IEVtYmVyLlZp
        ZXcuc3RhdGVzLmhhc0VsZW1lbnQgPSBFbWJlci5jcmVhdGUoRW1iZXIuVmll
        dy5zdGF0ZXMuX2RlZmF1bHQpOwoKRW1iZXIubWVyZ2UoaGFzRWxlbWVudCwg
        ewogICQ6IGZ1bmN0aW9uKHZpZXcsIHNlbCkgewogICAgdmFyIGVsZW0gPSBn
        ZXQodmlldywgJ2VsZW1lbnQnKTsKICAgIHJldHVybiBzZWwgPyBFbWJlci4k
        KHNlbCwgZWxlbSkgOiBFbWJlci4kKGVsZW0pOwogIH0sCgogIGdldEVsZW1l
        bnQ6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZhciBwYXJlbnQgPSBnZXQodmll
        dywgJ3BhcmVudFZpZXcnKTsKICAgIGlmIChwYXJlbnQpIHsgcGFyZW50ID0g
        Z2V0KHBhcmVudCwgJ2VsZW1lbnQnKTsgfQogICAgaWYgKHBhcmVudCkgeyBy
        ZXR1cm4gdmlldy5maW5kRWxlbWVudEluUGFyZW50RWxlbWVudChwYXJlbnQp
        OyB9CiAgICByZXR1cm4gRW1iZXIuJCgiIyIgKyBnZXQodmlldywgJ2VsZW1l
        bnRJZCcpKVswXTsKICB9LAoKICBzZXRFbGVtZW50OiBmdW5jdGlvbih2aWV3
        LCB2YWx1ZSkgewogICAgaWYgKHZhbHVlID09PSBudWxsKSB7CiAgICAgIHZp
        ZXcudHJhbnNpdGlvblRvKCdwcmVSZW5kZXInKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIHRocm93ICJZb3UgY2Fubm90IHNldCBhbiBlbGVtZW50IHRvIGEgbm9u
        LW51bGwgdmFsdWUgd2hlbiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IGluIHRo
        ZSBET00uIjsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfSwKCiAgLy8g
        b25jZSB0aGUgdmlldyBoYXMgYmVlbiBpbnNlcnRlZCBpbnRvIHRoZSBET00s
        IHJlcmVuZGVyaW5nIGlzCiAgLy8gZGVmZXJyZWQgdG8gYWxsb3cgYmluZGlu
        Z3MgdG8gc3luY2hyb25pemUuCiAgcmVyZW5kZXI6IGZ1bmN0aW9uKHZpZXcp
        IHsKICAgIHZpZXcudHJpZ2dlclJlY3Vyc2l2ZWx5KCd3aWxsQ2xlYXJSZW5k
        ZXInKTsKCiAgICB2aWV3LmNsZWFyUmVuZGVyZWRDaGlsZHJlbigpOwoKICAg
        IHZpZXcuZG9tTWFuYWdlci5yZXBsYWNlKHZpZXcpOwogICAgcmV0dXJuIHZp
        ZXc7CiAgfSwKCiAgLy8gb25jZSB0aGUgdmlldyBpcyBhbHJlYWR5IGluIHRo
        ZSBET00sIGRlc3Ryb3lpbmcgaXQgcmVtb3ZlcyBpdAogIC8vIGZyb20gdGhl
        IERPTSwgbnVrZXMgaXRzIGVsZW1lbnQsIGFuZCBwdXRzIGl0IGJhY2sgaW50
        byB0aGUKICAvLyBwcmVSZW5kZXIgc3RhdGUgaWYgaW5ET00uCgogIGRlc3Ry
        b3lFbGVtZW50OiBmdW5jdGlvbih2aWV3KSB7CiAgICB2aWV3Ll9ub3RpZnlX
        aWxsRGVzdHJveUVsZW1lbnQoKTsKICAgIHZpZXcuZG9tTWFuYWdlci5yZW1v
        dmUodmlldyk7CiAgICBzZXQodmlldywgJ2VsZW1lbnQnLCBudWxsKTsKICAg
        IGlmICh2aWV3Ll9zY2hlZHVsZWRJbnNlcnQpIHsKICAgICAgRW1iZXIucnVu
        LmNhbmNlbCh2aWV3Ll9zY2hlZHVsZWRJbnNlcnQpOwogICAgICB2aWV3Ll9z
        Y2hlZHVsZWRJbnNlcnQgPSBudWxsOwogICAgfQogICAgcmV0dXJuIHZpZXc7
        CiAgfSwKCiAgZW1wdHk6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZhciBfY2hp
        bGRWaWV3cyA9IHZpZXcuX2NoaWxkVmlld3MsIGxlbiwgaWR4OwogICAgaWYg
        KF9jaGlsZFZpZXdzKSB7CiAgICAgIGxlbiA9IF9jaGlsZFZpZXdzLmxlbmd0
        aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW47IGlkeCsrKSB7CiAg
        ICAgICAgX2NoaWxkVmlld3NbaWR4XS5fbm90aWZ5V2lsbERlc3Ryb3lFbGVt
        ZW50KCk7CiAgICAgIH0KICAgIH0KICAgIHZpZXcuZG9tTWFuYWdlci5lbXB0
        eSh2aWV3KTsKICB9LAoKICAvLyBIYW5kbGUgZXZlbnRzIGZyb20gYEVtYmVy
        LkV2ZW50RGlzcGF0Y2hlcmAKICBoYW5kbGVFdmVudDogZnVuY3Rpb24odmll
        dywgZXZlbnROYW1lLCBldnQpIHsKICAgIGlmICh2aWV3LmhhcyhldmVudE5h
        bWUpKSB7CiAgICAgIC8vIEhhbmRsZXIgc2hvdWxkIGJlIGFibGUgdG8gcmUt
        ZGlzcGF0Y2ggZXZlbnRzLCBzbyB3ZSBkb24ndAogICAgICAvLyBwcmV2ZW50
        RGVmYXVsdCBvciBzdG9wUHJvcGFnYXRpb24uCiAgICAgIHJldHVybiB2aWV3
        LnRyaWdnZXIoZXZlbnROYW1lLCBldnQpOwogICAgfSBlbHNlIHsKICAgICAg
        cmV0dXJuIHRydWU7IC8vIGNvbnRpbnVlIGV2ZW50IHByb3BhZ2F0aW9uCiAg
        ICB9CiAgfSwKCiAgaW52b2tlT2JzZXJ2ZXI6IGZ1bmN0aW9uKHRhcmdldCwg
        b2JzZXJ2ZXIpIHsKICAgIG9ic2VydmVyLmNhbGwodGFyZ2V0KTsKICB9Cn0p
        OwoKdmFyIGluRE9NID0gRW1iZXIuVmlldy5zdGF0ZXMuaW5ET00gPSBFbWJl
        ci5jcmVhdGUoaGFzRWxlbWVudCk7CgpFbWJlci5tZXJnZShpbkRPTSwgewog
        IGVudGVyOiBmdW5jdGlvbih2aWV3KSB7CiAgICAvLyBSZWdpc3RlciB0aGUg
        dmlldyBmb3IgZXZlbnQgaGFuZGxpbmcuIFRoaXMgaGFzaCBpcyB1c2VkIGJ5
        CiAgICAvLyBFbWJlci5FdmVudERpc3BhdGNoZXIgdG8gZGlzcGF0Y2ggaW5j
        b21pbmcgZXZlbnRzLgogICAgaWYgKCF2aWV3LmlzVmlydHVhbCkgewogICAg
        ICBFbWJlci5hc3NlcnQoIkF0dGVtcHRlZCB0byByZWdpc3RlciBhIHZpZXcg
        d2l0aCBhbiBpZCBhbHJlYWR5IGluIHVzZTogIit2aWV3LmVsZW1lbnRJZCwg
        IUVtYmVyLlZpZXcudmlld3Nbdmlldy5lbGVtZW50SWRdKTsKICAgICAgRW1i
        ZXIuVmlldy52aWV3c1t2aWV3LmVsZW1lbnRJZF0gPSB2aWV3OwogICAgfQoK
        ICAgIHZpZXcuYWRkQmVmb3JlT2JzZXJ2ZXIoJ2VsZW1lbnRJZCcsIGZ1bmN0
        aW9uKCkgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNoYW5naW5n
        IGEgdmlldydzIGVsZW1lbnRJZCBhZnRlciBjcmVhdGlvbiBpcyBub3QgYWxs
        b3dlZCIpOwogICAgfSk7CiAgfSwKCiAgZXhpdDogZnVuY3Rpb24odmlldykg
        ewogICAgaWYgKCF0aGlzLmlzVmlydHVhbCkgZGVsZXRlIEVtYmVyLlZpZXcu
        dmlld3Nbdmlldy5lbGVtZW50SWRdOwogIH0sCgogIGluc2VydEVsZW1lbnQ6
        IGZ1bmN0aW9uKHZpZXcsIGZuKSB7CiAgICB0aHJvdyAiWW91IGNhbid0IGlu
        c2VydCBhbiBlbGVtZW50IGludG8gdGhlIERPTSB0aGF0IGhhcyBhbHJlYWR5
        IGJlZW4gaW5zZXJ0ZWQiOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MK
        Ki8KCnZhciBkZXN0cm95aW5nRXJyb3IgPSAiWW91IGNhbid0IGNhbGwgJUAg
        b24gYSB2aWV3IGJlaW5nIGRlc3Ryb3llZCIsIGZtdCA9IEVtYmVyLlN0cmlu
        Zy5mbXQ7Cgp2YXIgZGVzdHJveWluZyA9IEVtYmVyLlZpZXcuc3RhdGVzLmRl
        c3Ryb3lpbmcgPSBFbWJlci5jcmVhdGUoRW1iZXIuVmlldy5zdGF0ZXMuX2Rl
        ZmF1bHQpOwoKRW1iZXIubWVyZ2UoZGVzdHJveWluZywgewogIGFwcGVuZENo
        aWxkOiBmdW5jdGlvbigpIHsKICAgIHRocm93IGZtdChkZXN0cm95aW5nRXJy
        b3IsIFsnYXBwZW5kQ2hpbGQnXSk7CiAgfSwKICByZXJlbmRlcjogZnVuY3Rp
        b24oKSB7CiAgICB0aHJvdyBmbXQoZGVzdHJveWluZ0Vycm9yLCBbJ3JlcmVu
        ZGVyJ10pOwogIH0sCiAgZGVzdHJveUVsZW1lbnQ6IGZ1bmN0aW9uKCkgewog
        ICAgdGhyb3cgZm10KGRlc3Ryb3lpbmdFcnJvciwgWydkZXN0cm95RWxlbWVu
        dCddKTsKICB9LAogIGVtcHR5OiBmdW5jdGlvbigpIHsKICAgIHRocm93IGZt
        dChkZXN0cm95aW5nRXJyb3IsIFsnZW1wdHknXSk7CiAgfSwKCiAgc2V0RWxl
        bWVudDogZnVuY3Rpb24oKSB7CiAgICB0aHJvdyBmbXQoZGVzdHJveWluZ0Vy
        cm9yLCBbInNldCgnZWxlbWVudCcsIC4uLikiXSk7CiAgfSwKCiAgcmVuZGVy
        VG9CdWZmZXJJZk5lZWRlZDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZmFs
        c2U7CiAgfSwKCiAgLy8gU2luY2UgZWxlbWVudCBpbnNlcnRpb24gaXMgc2No
        ZWR1bGVkLCBkb24ndCBkbyBhbnl0aGluZyBpZgogIC8vIHRoZSB2aWV3IGhh
        cyBiZWVuIGRlc3Ryb3llZCBiZXR3ZWVuIHNjaGVkdWxpbmcgYW5kIGV4ZWN1
        dGlvbgogIGluc2VydEVsZW1lbnQ6IEVtYmVyLksKfSk7CgoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewpFbWJlci5WaWV3LmNsb25lU3RhdGVzID0gZnVuY3Rp
        b24oZnJvbSkgewogIHZhciBpbnRvID0ge307CgogIGludG8uX2RlZmF1bHQg
        PSB7fTsKICBpbnRvLnByZVJlbmRlciA9IEVtYmVyLmNyZWF0ZShpbnRvLl9k
        ZWZhdWx0KTsKICBpbnRvLmRlc3Ryb3lpbmcgPSBFbWJlci5jcmVhdGUoaW50
        by5fZGVmYXVsdCk7CiAgaW50by5pbkJ1ZmZlciA9IEVtYmVyLmNyZWF0ZShp
        bnRvLl9kZWZhdWx0KTsKICBpbnRvLmhhc0VsZW1lbnQgPSBFbWJlci5jcmVh
        dGUoaW50by5fZGVmYXVsdCk7CiAgaW50by5pbkRPTSA9IEVtYmVyLmNyZWF0
        ZShpbnRvLmhhc0VsZW1lbnQpOwoKICBmb3IgKHZhciBzdGF0ZU5hbWUgaW4g
        ZnJvbSkgewogICAgaWYgKCFmcm9tLmhhc093blByb3BlcnR5KHN0YXRlTmFt
        ZSkpIHsgY29udGludWU7IH0KICAgIEVtYmVyLm1lcmdlKGludG9bc3RhdGVO
        YW1lXSwgZnJvbVtzdGF0ZU5hbWVdKTsKICB9CgogIHJldHVybiBpbnRvOwp9
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgc3RhdGVzID0gRW1iZXIu
        Vmlldy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0YXRlcyk7CgovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBmb3JFYWNoID0g
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2g7CnZhciBWaWV3Q29sbGVj
        dGlvbiA9IEVtYmVyLl9WaWV3Q29sbGVjdGlvbjsKCi8qKgogIEEgYENvbnRh
        aW5lclZpZXdgIGlzIGFuIGBFbWJlci5WaWV3YCBzdWJjbGFzcyB0aGF0IGlt
        cGxlbWVudHMgYEVtYmVyLk11dGFibGVBcnJheWAKICBhbGxvd2luZyBwcm9n
        cmFtYXRpYyBtYW5hZ2VtZW50IG9mIGl0cyBjaGlsZCB2aWV3cy4KCiAgIyMg
        U2V0dGluZyBJbml0aWFsIENoaWxkIFZpZXdzCgogIFRoZSBpbml0aWFsIGFy
        cmF5IG9mIGNoaWxkIHZpZXdzIGNhbiBiZSBzZXQgaW4gb25lIG9mIHR3byB3
        YXlzLiBZb3UgY2FuCiAgcHJvdmlkZSBhIGBjaGlsZFZpZXdzYCBwcm9wZXJ0
        eSBhdCBjcmVhdGlvbiB0aW1lIHRoYXQgY29udGFpbnMgaW5zdGFuY2Ugb2YK
        ICBgRW1iZXIuVmlld2A6CgogIGBgYGphdmFzY3JpcHQKICBhQ29udGFpbmVy
        ID0gRW1iZXIuQ29udGFpbmVyVmlldy5jcmVhdGUoewogICAgY2hpbGRWaWV3
        czogW0VtYmVyLlZpZXcuY3JlYXRlKCksIEVtYmVyLlZpZXcuY3JlYXRlKCld
        CiAgfSk7CiAgYGBgCgogIFlvdSBjYW4gYWxzbyBwcm92aWRlIGEgbGlzdCBv
        ZiBwcm9wZXJ0eSBuYW1lcyB3aG9zZSB2YWx1ZXMgYXJlIGluc3RhbmNlcyBv
        ZgogIGBFbWJlci5WaWV3YDoKCiAgYGBgamF2YXNjcmlwdAogIGFDb250YWlu
        ZXIgPSBFbWJlci5Db250YWluZXJWaWV3LmNyZWF0ZSh7CiAgICBjaGlsZFZp
        ZXdzOiBbJ2FWaWV3JywgJ2JWaWV3JywgJ2NWaWV3J10sCiAgICBhVmlldzog
        RW1iZXIuVmlldy5jcmVhdGUoKSwKICAgIGJWaWV3OiBFbWJlci5WaWV3LmNy
        ZWF0ZSgpLAogICAgY1ZpZXc6IEVtYmVyLlZpZXcuY3JlYXRlKCkKICB9KTsK
        ICBgYGAKCiAgVGhlIHR3byBzdHJhdGVnaWVzIGNhbiBiZSBjb21iaW5lZDoK
        CiAgYGBgamF2YXNjcmlwdAogIGFDb250YWluZXIgPSBFbWJlci5Db250YWlu
        ZXJWaWV3LmNyZWF0ZSh7CiAgICBjaGlsZFZpZXdzOiBbJ2FWaWV3JywgRW1i
        ZXIuVmlldy5jcmVhdGUoKV0sCiAgICBhVmlldzogRW1iZXIuVmlldy5jcmVh
        dGUoKQogIH0pOwogIGBgYAoKICBFYWNoIGNoaWxkIHZpZXcncyByZW5kZXJp
        bmcgd2lsbCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBjb250YWluZXIncyByZW5k
        ZXJlZAogIEhUTUwgaW4gdGhlIHNhbWUgb3JkZXIgYXMgaXRzIHBvc2l0aW9u
        IGluIHRoZSBgY2hpbGRWaWV3c2AgcHJvcGVydHkuCgogICMjIEFkZGluZyBh
        bmQgUmVtb3ZpbmcgQ2hpbGQgVmlld3MKCiAgVGhlIGNvbnRhaW5lciB2aWV3
        IGltcGxlbWVudHMgYEVtYmVyLk11dGFibGVBcnJheWAgYWxsb3dpbmcgcHJv
        Z3JhbWF0aWMgbWFuYWdlbWVudCBvZiBpdHMgY2hpbGQgdmlld3MuCgogIFRv
        IHJlbW92ZSBhIHZpZXcsIHBhc3MgdGhhdCB2aWV3IGludG8gYSBgcmVtb3Zl
        T2JqZWN0YCBjYWxsIG9uIHRoZSBjb250YWluZXIgdmlldy4KCiAgR2l2ZW4g
        YW4gZW1wdHkgYDxib2R5PmAgdGhlIGZvbGxvd2luZyBjb2RlCgogIGBgYGph
        dmFzY3JpcHQKICBhQ29udGFpbmVyID0gRW1iZXIuQ29udGFpbmVyVmlldy5j
        cmVhdGUoewogICAgY2xhc3NOYW1lczogWyd0aGUtY29udGFpbmVyJ10sCiAg
        ICBjaGlsZFZpZXdzOiBbJ2FWaWV3JywgJ2JWaWV3J10sCiAgICBhVmlldzog
        RW1iZXIuVmlldy5jcmVhdGUoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFu
        ZGxlYmFycy5jb21waWxlKCJBIikKICAgIH0pLAogICAgYlZpZXc6IEVtYmVy
        LlZpZXcuY3JlYXRlKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJh
        cnMuY29tcGlsZSgiQiIpCiAgICB9KQogIH0pOwoKICBhQ29udGFpbmVyLmFw
        cGVuZFRvKCdib2R5Jyk7CiAgYGBgCgogIFJlc3VsdHMgaW4gdGhlIEhUTUwK
        CiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXcgdGhlLWNvbnRh
        aW5lciI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5BPC9kaXY+CiAg
        ICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5CPC9kaXY+CiAgPC9kaXY+CiAg
        YGBgCgogIFJlbW92aW5nIGEgdmlldwoKICBgYGBqYXZhc2NyaXB0CiAgYUNv
        bnRhaW5lci50b0FycmF5KCk7ICAvLyBbYUNvbnRhaW5lci5hVmlldywgYUNv
        bnRhaW5lci5iVmlld10KICBhQ29udGFpbmVyLnJlbW92ZU9iamVjdChhQ29u
        dGFpbmVyLmdldCgnYlZpZXcnKSk7CiAgYUNvbnRhaW5lci50b0FycmF5KCk7
        ICAvLyBbYUNvbnRhaW5lci5hVmlld10KICBgYGAKCiAgV2lsbCByZXN1bHQg
        aW4gdGhlIGZvbGxvd2luZyBIVE1MCgogIGBgYGh0bWwKICA8ZGl2IGNsYXNz
        PSJlbWJlci12aWV3IHRoZS1jb250YWluZXIiPgogICAgPGRpdiBjbGFzcz0i
        ZW1iZXItdmlldyI+QTwvZGl2PgogIDwvZGl2PgogIGBgYAoKICBTaW1pbGFy
        bHksIGFkZGluZyBhIGNoaWxkIHZpZXcgaXMgYWNjb21wbGlzaGVkIGJ5IGFk
        ZGluZyBgRW1iZXIuVmlld2AgaW5zdGFuY2VzIHRvIHRoZQogIGNvbnRhaW5l
        ciB2aWV3LgoKICBHaXZlbiBhbiBlbXB0eSBgPGJvZHk+YCB0aGUgZm9sbG93
        aW5nIGNvZGUKCiAgYGBgamF2YXNjcmlwdAogIGFDb250YWluZXIgPSBFbWJl
        ci5Db250YWluZXJWaWV3LmNyZWF0ZSh7CiAgICBjbGFzc05hbWVzOiBbJ3Ro
        ZS1jb250YWluZXInXSwKICAgIGNoaWxkVmlld3M6IFsnYVZpZXcnLCAnYlZp
        ZXcnXSwKICAgIGFWaWV3OiBFbWJlci5WaWV3LmNyZWF0ZSh7CiAgICAgIHRl
        bXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIkEiKQogICAgfSks
        CiAgICBiVmlldzogRW1iZXIuVmlldy5jcmVhdGUoewogICAgICB0ZW1wbGF0
        ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJCIikKICAgIH0pCiAgfSk7
        CgogIGFDb250YWluZXIuYXBwZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgUmVz
        dWx0cyBpbiB0aGUgSFRNTAoKICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1i
        ZXItdmlldyB0aGUtY29udGFpbmVyIj4KICAgIDxkaXYgY2xhc3M9ImVtYmVy
        LXZpZXciPkE8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkI8
        L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgQWRkaW5nIGEgdmlldwoKICBgYGBq
        YXZhc2NyaXB0CiAgQW5vdGhlclZpZXdDbGFzcyA9IEVtYmVyLlZpZXcuZXh0
        ZW5kKHsKICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUo
        IkFub3RoZXIgdmlldyIpCiAgfSk7CgogIGFDb250YWluZXIudG9BcnJheSgp
        OyAgLy8gW2FDb250YWluZXIuYVZpZXcsIGFDb250YWluZXIuYlZpZXddCiAg
        YUNvbnRhaW5lci5wdXNoT2JqZWN0KEFub3RoZXJWaWV3Q2xhc3MuY3JlYXRl
        KCkpOwogIGFDb250YWluZXIudG9BcnJheSgpOyAvLyBbYUNvbnRhaW5lci5h
        VmlldywgYUNvbnRhaW5lci5iVmlldywgPEFub3RoZXJWaWV3Q2xhc3MgaW5z
        dGFuY2U+XQogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IEhUTUwKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXcgdGhl
        LWNvbnRhaW5lciI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5BPC9k
        aXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5CPC9kaXY+CiAgICA8
        ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5Bbm90aGVyIHZpZXc8L2Rpdj4KICA8
        L2Rpdj4KICBgYGAKCiAgIyMgVGVtcGxhdGVzIGFuZCBMYXlvdXQKCiAgQSBg
        dGVtcGxhdGVgLCBgdGVtcGxhdGVOYW1lYCwgYGRlZmF1bHRUZW1wbGF0ZWAs
        IGBsYXlvdXRgLCBgbGF5b3V0TmFtZWAgb3IKICBgZGVmYXVsdExheW91dGAg
        cHJvcGVydHkgb24gYSBjb250YWluZXIgdmlldyB3aWxsIG5vdCByZXN1bHQg
        aW4gdGhlIHRlbXBsYXRlCiAgb3IgbGF5b3V0IGJlaW5nIHJlbmRlcmVkLiBU
        aGUgSFRNTCBjb250ZW50cyBvZiBhIGBFbWJlci5Db250YWluZXJWaWV3YCdz
        IERPTQogIHJlcHJlc2VudGF0aW9uIHdpbGwgb25seSBiZSB0aGUgcmVuZGVy
        ZWQgSFRNTCBvZiBpdHMgY2hpbGQgdmlld3MuCgogIEBjbGFzcyBDb250YWlu
        ZXJWaWV3CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLlZp
        ZXcKKi8KRW1iZXIuQ29udGFpbmVyVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5k
        KEVtYmVyLk11dGFibGVBcnJheSwgewogIHN0YXRlczogc3RhdGVzLAoKICBp
        bml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CgogICAgdmFy
        IGNoaWxkVmlld3MgPSBnZXQodGhpcywgJ2NoaWxkVmlld3MnKTsKCiAgICAv
        LyByZWRlZmluZSB2aWV3J3MgY2hpbGRWaWV3cyBwcm9wZXJ0eSB0aGF0IHdh
        cyBvYmxpdGVyYXRlZAogICAgRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywg
        J2NoaWxkVmlld3MnLCBFbWJlci5WaWV3LmNoaWxkVmlld3NQcm9wZXJ0eSk7
        CgogICAgdmFyIF9jaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3czsKCiAg
        ICBmb3JFYWNoKGNoaWxkVmlld3MsIGZ1bmN0aW9uKHZpZXdOYW1lLCBpZHgp
        IHsKICAgICAgdmFyIHZpZXc7CgogICAgICBpZiAoJ3N0cmluZycgPT09IHR5
        cGVvZiB2aWV3TmFtZSkgewogICAgICAgIHZpZXcgPSBnZXQodGhpcywgdmll
        d05hbWUpOwogICAgICAgIHZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmlldyh2
        aWV3KTsKICAgICAgICBzZXQodGhpcywgdmlld05hbWUsIHZpZXcpOwogICAg
        ICB9IGVsc2UgewogICAgICAgIHZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmll
        dyh2aWV3TmFtZSk7CiAgICAgIH0KCiAgICAgIF9jaGlsZFZpZXdzW2lkeF0g
        PSB2aWV3OwogICAgfSwgdGhpcyk7CgogICAgdmFyIGN1cnJlbnRWaWV3ID0g
        Z2V0KHRoaXMsICdjdXJyZW50VmlldycpOwogICAgaWYgKGN1cnJlbnRWaWV3
        KSB7CiAgICAgIGlmICghX2NoaWxkVmlld3MubGVuZ3RoKSB7IF9jaGlsZFZp
        ZXdzID0gdGhpcy5fY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3Muc2xp
        Y2UoKTsgfQogICAgICBfY2hpbGRWaWV3cy5wdXNoKHRoaXMuY3JlYXRlQ2hp
        bGRWaWV3KGN1cnJlbnRWaWV3KSk7CiAgICB9CiAgfSwKCiAgcmVwbGFjZTog
        ZnVuY3Rpb24oaWR4LCByZW1vdmVkQ291bnQsIGFkZGVkVmlld3MpIHsKICAg
        IHZhciBhZGRlZENvdW50ID0gYWRkZWRWaWV3cyA/IGdldChhZGRlZFZpZXdz
        LCAnbGVuZ3RoJykgOiAwOwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgRW1i
        ZXIuYXNzZXJ0KCJZb3UgY2FuJ3QgYWRkIGEgY2hpbGQgdG8gYSBjb250YWlu
        ZXIgdGhhdCBpcyBhbHJlYWR5IGEgY2hpbGQgb2YgYW5vdGhlciB2aWV3Iiwg
        RW1iZXIuQShhZGRlZFZpZXdzKS5ldmVyeShmdW5jdGlvbihpdGVtKSB7IHJl
        dHVybiAhZ2V0KGl0ZW0sICdfcGFyZW50VmlldycpIHx8IGdldChpdGVtLCAn
        X3BhcmVudFZpZXcnKSA9PT0gc2VsZjsgfSkpOwoKICAgIHRoaXMuYXJyYXlD
        b250ZW50V2lsbENoYW5nZShpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3Vu
        dCk7CiAgICB0aGlzLmNoaWxkVmlld3NXaWxsQ2hhbmdlKHRoaXMuX2NoaWxk
        Vmlld3MsIGlkeCwgcmVtb3ZlZENvdW50KTsKCiAgICBpZiAoYWRkZWRDb3Vu
        dCA9PT0gMCkgewogICAgICB0aGlzLl9jaGlsZFZpZXdzLnNwbGljZShpZHgs
        IHJlbW92ZWRDb3VudCkgOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGFyZ3Mg
        PSBbaWR4LCByZW1vdmVkQ291bnRdLmNvbmNhdChhZGRlZFZpZXdzKTsKICAg
        ICAgaWYgKGFkZGVkVmlld3MubGVuZ3RoICYmICF0aGlzLl9jaGlsZFZpZXdz
        Lmxlbmd0aCkgeyB0aGlzLl9jaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3
        cy5zbGljZSgpOyB9CiAgICAgIHRoaXMuX2NoaWxkVmlld3Muc3BsaWNlLmFw
        cGx5KHRoaXMuX2NoaWxkVmlld3MsIGFyZ3MpOwogICAgfQoKICAgIHRoaXMu
        YXJyYXlDb250ZW50RGlkQ2hhbmdlKGlkeCwgcmVtb3ZlZENvdW50LCBhZGRl
        ZENvdW50KTsKICAgIHRoaXMuY2hpbGRWaWV3c0RpZENoYW5nZSh0aGlzLl9j
        aGlsZFZpZXdzLCBpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCk7Cgog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlk
        eCkgewogICAgcmV0dXJuIHRoaXMuX2NoaWxkVmlld3NbaWR4XTsKICB9LAoK
        ICBsZW5ndGg6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJl
        dHVybiB0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aDsKICB9KS52b2xhdGlsZSgp
        LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgSW5zdHJ1Y3RzIGVhY2ggY2hp
        bGQgdmlldyB0byByZW5kZXIgdG8gdGhlIHBhc3NlZCByZW5kZXIgYnVmZmVy
        LgoKICAgIEBtZXRob2QgcmVuZGVyCiAgICBAcGFyYW0ge0VtYmVyLlJlbmRl
        ckJ1ZmZlcn0gYnVmZmVyIHRoZSBidWZmZXIgdG8gcmVuZGVyIHRvCiAgKi8K
        ICByZW5kZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgdGhpcy5mb3JFYWNo
        Q2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgdmlldy5yZW5kZXJU
        b0J1ZmZlcihidWZmZXIpOwogICAgfSk7CiAgfSwKCiAgaW5zdHJ1bWVudE5h
        bWU6ICdjb250YWluZXInLAoKICAvKioKICAgIEBwcml2YXRlCgogICAgV2hl
        biBhIGNoaWxkIHZpZXcgaXMgcmVtb3ZlZCwgZGVzdHJveSBpdHMgZWxlbWVu
        dCBzbyB0aGF0CiAgICBpdCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS4KCiAg
        ICBUaGUgYXJyYXkgb2JzZXJ2ZXIgdGhhdCB0cmlnZ2VycyB0aGlzIGFjdGlv
        biBpcyBzZXQgdXAgaW4gdGhlCiAgICBgcmVuZGVyVG9CdWZmZXJgIG1ldGhv
        ZC4KCiAgICBAbWV0aG9kIGNoaWxkVmlld3NXaWxsQ2hhbmdlCiAgICBAcGFy
        YW0ge0VtYmVyLkFycmF5fSB2aWV3cyB0aGUgY2hpbGQgdmlld3MgYXJyYXkg
        YmVmb3JlIG11dGF0aW9uCiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgdGhl
        IHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtdXRhdGlvbgogICAgQHBhcmFtIHtO
        dW1iZXJ9IHJlbW92ZWQgdGhlIG51bWJlciBvZiBjaGlsZCB2aWV3cyByZW1v
        dmVkCiAgKiovCiAgY2hpbGRWaWV3c1dpbGxDaGFuZ2U6IGZ1bmN0aW9uKHZp
        ZXdzLCBzdGFydCwgcmVtb3ZlZCkgewogICAgdGhpcy5wcm9wZXJ0eVdpbGxD
        aGFuZ2UoJ2NoaWxkVmlld3MnKTsKCiAgICBpZiAocmVtb3ZlZCA+IDApIHsK
        ICAgICAgdmFyIGNoYW5nZWRWaWV3cyA9IHZpZXdzLnNsaWNlKHN0YXJ0LCBz
        dGFydCtyZW1vdmVkKTsKICAgICAgLy8gdHJhbnNpdGlvbiB0byBwcmVSZW5k
        ZXIgYmVmb3JlIGNsZWFyaW5nIHBhcmVudFZpZXcKICAgICAgdGhpcy5jdXJy
        ZW50U3RhdGUuY2hpbGRWaWV3c1dpbGxDaGFuZ2UodGhpcywgdmlld3MsIHN0
        YXJ0LCByZW1vdmVkKTsKICAgICAgdGhpcy5pbml0aWFsaXplVmlld3MoY2hh
        bmdlZFZpZXdzLCBudWxsLCBudWxsKTsKICAgIH0KICB9LAoKICByZW1vdmVD
        aGlsZDogZnVuY3Rpb24oY2hpbGQpIHsKICAgIHRoaXMucmVtb3ZlT2JqZWN0
        KGNoaWxkKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQHBy
        aXZhdGUKCiAgICBXaGVuIGEgY2hpbGQgdmlldyBpcyBhZGRlZCwgbWFrZSBz
        dXJlIHRoZSBET00gZ2V0cyB1cGRhdGVkIGFwcHJvcHJpYXRlbHkuCgogICAg
        SWYgdGhlIHZpZXcgaGFzIGFscmVhZHkgcmVuZGVyZWQgYW4gZWxlbWVudCwg
        d2UgdGVsbCB0aGUgY2hpbGQgdmlldyB0bwogICAgY3JlYXRlIGFuIGVsZW1l
        bnQgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBET00uIElmIHRoZSBlbmNsb3Np
        bmcgY29udGFpbmVyCiAgICB2aWV3IGhhcyBhbHJlYWR5IHdyaXR0ZW4gdG8g
        YSBidWZmZXIsIGJ1dCBub3QgeWV0IGNvbnZlcnRlZCB0aGF0IGJ1ZmZlcgog
        ICAgaW50byBhbiBlbGVtZW50LCB3ZSBpbnNlcnQgdGhlIHN0cmluZyByZXBy
        ZXNlbnRhdGlvbiBvZiB0aGUgY2hpbGQgaW50byB0aGUKICAgIGFwcHJvcHJp
        YXRlIHBsYWNlIGluIHRoZSBidWZmZXIuCgogICAgQG1ldGhvZCBjaGlsZFZp
        ZXdzRGlkQ2hhbmdlCiAgICBAcGFyYW0ge0VtYmVyLkFycmF5fSB2aWV3cyB0
        aGUgYXJyYXkgb2YgY2hpbGQgdmlld3MgYWZ0ZSB0aGUgbXV0YXRpb24gaGFz
        IG9jY3VycmVkCiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgdGhlIHN0YXJ0
        IHBvc2l0aW9uIG9mIHRoZSBtdXRhdGlvbgogICAgQHBhcmFtIHtOdW1iZXJ9
        IHJlbW92ZWQgdGhlIG51bWJlciBvZiBjaGlsZCB2aWV3cyByZW1vdmVkCiAg
        ICBAcGFyYW0ge051bWJlcn0gdGhlIG51bWJlciBvZiBjaGlsZCB2aWV3cyBh
        ZGRlZAogICovCiAgY2hpbGRWaWV3c0RpZENoYW5nZTogZnVuY3Rpb24odmll
        d3MsIHN0YXJ0LCByZW1vdmVkLCBhZGRlZCkgewogICAgaWYgKGFkZGVkID4g
        MCkgewogICAgICB2YXIgY2hhbmdlZFZpZXdzID0gdmlld3Muc2xpY2Uoc3Rh
        cnQsIHN0YXJ0K2FkZGVkKTsKICAgICAgdGhpcy5pbml0aWFsaXplVmlld3Mo
        Y2hhbmdlZFZpZXdzLCB0aGlzLCBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YScp
        KTsKICAgICAgdGhpcy5jdXJyZW50U3RhdGUuY2hpbGRWaWV3c0RpZENoYW5n
        ZSh0aGlzLCB2aWV3cywgc3RhcnQsIGFkZGVkKTsKICAgIH0KICAgIHRoaXMu
        cHJvcGVydHlEaWRDaGFuZ2UoJ2NoaWxkVmlld3MnKTsKICB9LAoKICBpbml0
        aWFsaXplVmlld3M6IGZ1bmN0aW9uKHZpZXdzLCBwYXJlbnRWaWV3LCB0ZW1w
        bGF0ZURhdGEpIHsKICAgIGZvckVhY2godmlld3MsIGZ1bmN0aW9uKHZpZXcp
        IHsKICAgICAgc2V0KHZpZXcsICdfcGFyZW50VmlldycsIHBhcmVudFZpZXcp
        OwoKICAgICAgaWYgKCF2aWV3LmNvbnRhaW5lciAmJiBwYXJlbnRWaWV3KSB7
        CiAgICAgICAgc2V0KHZpZXcsICdjb250YWluZXInLCBwYXJlbnRWaWV3LmNv
        bnRhaW5lcik7CiAgICAgIH0KCiAgICAgIGlmICghZ2V0KHZpZXcsICd0ZW1w
        bGF0ZURhdGEnKSkgewogICAgICAgIHNldCh2aWV3LCAndGVtcGxhdGVEYXRh
        JywgdGVtcGxhdGVEYXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKCiAgY3Vy
        cmVudFZpZXc6IG51bGwsCgogIF9jdXJyZW50Vmlld1dpbGxDaGFuZ2U6IEVt
        YmVyLmJlZm9yZU9ic2VydmVyKCdjdXJyZW50VmlldycsIGZ1bmN0aW9uKCkg
        ewogICAgdmFyIGN1cnJlbnRWaWV3ID0gZ2V0KHRoaXMsICdjdXJyZW50Vmll
        dycpOwogICAgaWYgKGN1cnJlbnRWaWV3KSB7CiAgICAgIGN1cnJlbnRWaWV3
        LmRlc3Ryb3koKTsKICAgIH0KICB9KSwKCiAgX2N1cnJlbnRWaWV3RGlkQ2hh
        bmdlOiBFbWJlci5vYnNlcnZlcignY3VycmVudFZpZXcnLCBmdW5jdGlvbigp
        IHsKICAgIHZhciBjdXJyZW50VmlldyA9IGdldCh0aGlzLCAnY3VycmVudFZp
        ZXcnKTsKICAgIGlmIChjdXJyZW50VmlldykgewogICAgICBFbWJlci5hc3Nl
        cnQoIllvdSB0cmllZCB0byBzZXQgYSBjdXJyZW50IHZpZXcgdGhhdCBhbHJl
        YWR5IGhhcyBhIHBhcmVudC4gTWFrZSBzdXJlIHlvdSBkb24ndCBoYXZlIG11
        bHRpcGxlIG91dGxldHMgaW4gdGhlIHNhbWUgdmlldy4iLCAhZ2V0KGN1cnJl
        bnRWaWV3LCAnX3BhcmVudFZpZXcnKSk7CiAgICAgIHRoaXMucHVzaE9iamVj
        dChjdXJyZW50Vmlldyk7CiAgICB9CiAgfSksCgogIF9lbnN1cmVDaGlsZHJl
        bkFyZUluRE9NOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmN1cnJlbnRTdGF0
        ZS5lbnN1cmVDaGlsZHJlbkFyZUluRE9NKHRoaXMpOwogIH0KfSk7CgpFbWJl
        ci5tZXJnZShzdGF0ZXMuX2RlZmF1bHQsIHsKICBjaGlsZFZpZXdzV2lsbENo
        YW5nZTogRW1iZXIuSywKICBjaGlsZFZpZXdzRGlkQ2hhbmdlOiBFbWJlci5L
        LAogIGVuc3VyZUNoaWxkcmVuQXJlSW5ET006IEVtYmVyLksKfSk7CgpFbWJl
        ci5tZXJnZShzdGF0ZXMuaW5CdWZmZXIsIHsKICBjaGlsZFZpZXdzRGlkQ2hh
        bmdlOiBmdW5jdGlvbihwYXJlbnRWaWV3LCB2aWV3cywgc3RhcnQsIGFkZGVk
        KSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ1lvdSBjYW5ub3QgbW9k
        aWZ5IGNoaWxkIHZpZXdzIHdoaWxlIGluIHRoZSBpbkJ1ZmZlciBzdGF0ZScp
        OwogIH0KfSk7CgpFbWJlci5tZXJnZShzdGF0ZXMuaGFzRWxlbWVudCwgewog
        IGNoaWxkVmlld3NXaWxsQ2hhbmdlOiBmdW5jdGlvbih2aWV3LCB2aWV3cywg
        c3RhcnQsIHJlbW92ZWQpIHsKICAgIGZvciAodmFyIGk9c3RhcnQ7IGk8c3Rh
        cnQrcmVtb3ZlZDsgaSsrKSB7CiAgICAgIHZpZXdzW2ldLnJlbW92ZSgpOwog
        ICAgfQogIH0sCgogIGNoaWxkVmlld3NEaWRDaGFuZ2U6IGZ1bmN0aW9uKHZp
        ZXcsIHZpZXdzLCBzdGFydCwgYWRkZWQpIHsKICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZU9uY2UoJ3JlbmRlcicsIHZpZXcsICdfZW5zdXJlQ2hpbGRyZW5BcmVJ
        bkRPTScpOwogIH0sCgogIGVuc3VyZUNoaWxkcmVuQXJlSW5ET006IGZ1bmN0
        aW9uKHZpZXcpIHsKICAgIHZhciBjaGlsZFZpZXdzID0gdmlldy5fY2hpbGRW
        aWV3cywgaSwgbGVuLCBjaGlsZFZpZXcsIHByZXZpb3VzLCBidWZmZXIsIHZp
        ZXdDb2xsZWN0aW9uID0gbmV3IFZpZXdDb2xsZWN0aW9uKCk7CgogICAgZm9y
        IChpID0gMCwgbGVuID0gY2hpbGRWaWV3cy5sZW5ndGg7IGkgPCBsZW47IGkr
        KykgewogICAgICBjaGlsZFZpZXcgPSBjaGlsZFZpZXdzW2ldOwoKICAgICAg
        aWYgKCFidWZmZXIpIHsgYnVmZmVyID0gRW1iZXIuUmVuZGVyQnVmZmVyKCk7
        IGJ1ZmZlci5faGFzRWxlbWVudCA9IGZhbHNlOyB9CgogICAgICBpZiAoY2hp
        bGRWaWV3LnJlbmRlclRvQnVmZmVySWZOZWVkZWQoYnVmZmVyKSkgewogICAg
        ICAgIHZpZXdDb2xsZWN0aW9uLnB1c2goY2hpbGRWaWV3KTsKICAgICAgfSBl
        bHNlIGlmICh2aWV3Q29sbGVjdGlvbi5sZW5ndGgpIHsKICAgICAgICBpbnNl
        cnRWaWV3Q29sbGVjdGlvbih2aWV3LCB2aWV3Q29sbGVjdGlvbiwgcHJldmlv
        dXMsIGJ1ZmZlcik7CiAgICAgICAgYnVmZmVyID0gbnVsbDsKICAgICAgICBw
        cmV2aW91cyA9IGNoaWxkVmlldzsKICAgICAgICB2aWV3Q29sbGVjdGlvbi5j
        bGVhcigpOwogICAgICB9IGVsc2UgewogICAgICAgIHByZXZpb3VzID0gY2hp
        bGRWaWV3OwogICAgICB9CiAgICB9CgogICAgaWYgKHZpZXdDb2xsZWN0aW9u
        Lmxlbmd0aCkgewogICAgICBpbnNlcnRWaWV3Q29sbGVjdGlvbih2aWV3LCB2
        aWV3Q29sbGVjdGlvbiwgcHJldmlvdXMsIGJ1ZmZlcik7CiAgICB9CiAgfQp9
        KTsKCmZ1bmN0aW9uIGluc2VydFZpZXdDb2xsZWN0aW9uKHZpZXcsIHZpZXdD
        b2xsZWN0aW9uLCBwcmV2aW91cywgYnVmZmVyKSB7CiAgdmlld0NvbGxlY3Rp
        b24udHJpZ2dlclJlY3Vyc2l2ZWx5KCd3aWxsSW5zZXJ0RWxlbWVudCcpOwoK
        ICBpZiAocHJldmlvdXMpIHsKICAgIHByZXZpb3VzLmRvbU1hbmFnZXIuYWZ0
        ZXIocHJldmlvdXMsIGJ1ZmZlci5zdHJpbmcoKSk7CiAgfSBlbHNlIHsKICAg
        IHZpZXcuZG9tTWFuYWdlci5wcmVwZW5kKHZpZXcsIGJ1ZmZlci5zdHJpbmco
        KSk7CiAgfQoKICB2aWV3Q29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKHYp
        IHsKICAgIHYudHJhbnNpdGlvblRvKCdpbkRPTScpOwogICAgdi5wcm9wZXJ0
        eURpZENoYW5nZSgnZWxlbWVudCcpOwogICAgdi50cmlnZ2VyUmVjdXJzaXZl
        bHkoJ2RpZEluc2VydEVsZW1lbnQnKTsKICB9KTsKfQoKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIu
        c2V0LCBmbXQgPSBFbWJlci5TdHJpbmcuZm10OwoKLyoqCiAgYEVtYmVyLkNv
        bGxlY3Rpb25WaWV3YCBpcyBhbiBgRW1iZXIuVmlld2AgZGVzY2VuZGVudCBy
        ZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcKICBhIGNvbGxlY3Rpb24gKGFuIGFy
        cmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0KSBieSBtYWludGFpbmluZyBhIGNo
        aWxkIHZpZXcgb2JqZWN0CiAgYW5kIGFzc29jaWF0ZWQgRE9NIHJlcHJlc2Vu
        dGF0aW9uIGZvciBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5IGFuZCBlbnN1cmlu
        ZwogIHRoYXQgY2hpbGQgdmlld3MgYW5kIHRoZWlyIGFzc29jaWF0ZWQgcmVu
        ZGVyZWQgSFRNTCBhcmUgdXBkYXRlZCB3aGVuIGl0ZW1zIGluCiAgdGhlIGFy
        cmF5IGFyZSBhZGRlZCwgcmVtb3ZlZCwgb3IgcmVwbGFjZWQuCgogICMjIFNl
        dHRpbmcgY29udGVudAoKICBUaGUgbWFuYWdlZCBjb2xsZWN0aW9uIG9mIG9i
        amVjdHMgaXMgcmVmZXJlbmNlZCBhcyB0aGUgYEVtYmVyLkNvbGxlY3Rpb25W
        aWV3YAogIGluc3RhbmNlJ3MgYGNvbnRlbnRgIHByb3BlcnR5LgoKICBgYGBq
        YXZhc2NyaXB0CiAgc29tZUl0ZW1zVmlldyA9IEVtYmVyLkNvbGxlY3Rpb25W
        aWV3LmNyZWF0ZSh7CiAgICBjb250ZW50OiBbJ0EnLCAnQicsJ0MnXQogIH0p
        CiAgYGBgCgogIFRoZSB2aWV3IGZvciBlYWNoIGl0ZW0gaW4gdGhlIGNvbGxl
        Y3Rpb24gd2lsbCBoYXZlIGl0cyBgY29udGVudGAgcHJvcGVydHkgc2V0CiAg
        dG8gdGhlIGl0ZW0uCgogICMjIFNwZWNpZnlpbmcgaXRlbVZpZXdDbGFzcwoK
        ICBCeSBkZWZhdWx0IHRoZSB2aWV3IGNsYXNzIGZvciBlYWNoIGl0ZW0gaW4g
        dGhlIG1hbmFnZWQgY29sbGVjdGlvbiB3aWxsIGJlIGFuCiAgaW5zdGFuY2Ug
        b2YgYEVtYmVyLlZpZXdgLiBZb3UgY2FuIHN1cHBseSBhIGRpZmZlcmVudCBj
        bGFzcyBieSBzZXR0aW5nIHRoZQogIGBDb2xsZWN0aW9uVmlld2AncyBgaXRl
        bVZpZXdDbGFzc2AgcHJvcGVydHkuCgogIEdpdmVuIGFuIGVtcHR5IGA8Ym9k
        eT5gIGFuZCB0aGUgZm9sbG93aW5nIGNvZGU6CgogIGBgYGphdmFzY3JpcHQK
        ICBzb21lSXRlbXNWaWV3ID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuY3JlYXRl
        KHsKICAgIGNsYXNzTmFtZXM6IFsnYS1jb2xsZWN0aW9uJ10sCiAgICBjb250
        ZW50OiBbJ0EnLCdCJywnQyddLAogICAgaXRlbVZpZXdDbGFzczogRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCJ0aGUgbGV0dGVyOiB7e3ZpZXcuY29udGVudH19IikKICAg
        IH0pCiAgfSk7CgogIHNvbWVJdGVtc1ZpZXcuYXBwZW5kVG8oJ2JvZHknKTsK
        ICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MIHN0
        cnVjdHVyZQoKICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyBh
        LWNvbGxlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+dGhl
        IGxldHRlcjogQTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+
        dGhlIGxldHRlcjogQjwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmll
        dyI+dGhlIGxldHRlcjogQzwvZGl2PgogIDwvZGl2PgogIGBgYAoKICAjIyBB
        dXRvbWF0aWMgbWF0Y2hpbmcgb2YgcGFyZW50L2NoaWxkIHRhZ05hbWVzCgog
        IFNldHRpbmcgdGhlIGB0YWdOYW1lYCBwcm9wZXJ0eSBvZiBhIGBDb2xsZWN0
        aW9uVmlld2AgdG8gYW55IG9mCiAgInVsIiwgIm9sIiwgInRhYmxlIiwgInRo
        ZWFkIiwgInRib2R5IiwgInRmb290IiwgInRyIiwgb3IgInNlbGVjdCIgd2ls
        bCByZXN1bHQKICBpbiB0aGUgaXRlbSB2aWV3cyByZWNlaXZpbmcgYW4gYXBw
        cm9wcmlhdGVseSBtYXRjaGVkIGB0YWdOYW1lYCBwcm9wZXJ0eS4KCiAgR2l2
        ZW4gYW4gZW1wdHkgYDxib2R5PmAgYW5kIHRoZSBmb2xsb3dpbmcgY29kZToK
        CiAgYGBgamF2YXNjcmlwdAogIGFuVW5kb3JkZXJlZExpc3RWaWV3ID0gRW1i
        ZXIuQ29sbGVjdGlvblZpZXcuY3JlYXRlKHsKICAgIHRhZ05hbWU6ICd1bCcs
        CiAgICBjb250ZW50OiBbJ0EnLCdCJywnQyddLAogICAgaXRlbVZpZXdDbGFz
        czogRW1iZXIuVmlldy5leHRlbmQoewogICAgICB0ZW1wbGF0ZTogRW1iZXIu
        SGFuZGxlYmFycy5jb21waWxlKCJ0aGUgbGV0dGVyOiB7e3ZpZXcuY29udGVu
        dH19IikKICAgIH0pCiAgfSk7CgogIGFuVW5kb3JkZXJlZExpc3RWaWV3LmFw
        cGVuZFRvKCdib2R5Jyk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHRoZSBm
        b2xsb3dpbmcgSFRNTCBzdHJ1Y3R1cmUKCiAgYGBgaHRtbAogIDx1bCBjbGFz
        cz0iZW1iZXItdmlldyBhLWNvbGxlY3Rpb24iPgogICAgPGxpIGNsYXNzPSJl
        bWJlci12aWV3Ij50aGUgbGV0dGVyOiBBPC9saT4KICAgIDxsaSBjbGFzcz0i
        ZW1iZXItdmlldyI+dGhlIGxldHRlcjogQjwvbGk+CiAgICA8bGkgY2xhc3M9
        ImVtYmVyLXZpZXciPnRoZSBsZXR0ZXI6IEM8L2xpPgogIDwvdWw+CiAgYGBg
        CgogIEFkZGl0aW9uYWwgYHRhZ05hbWVgIHBhaXJzIGNhbiBiZSBwcm92aWRl
        ZCBieSBhZGRpbmcgdG8KICBgRW1iZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJ
        TkVSX01BUCBgCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5Db2xsZWN0aW9u
        Vmlldy5DT05UQUlORVJfTUFQWydhcnRpY2xlJ10gPSAnc2VjdGlvbicKICBg
        YGAKCiAgIyMgUHJvZ3JhbWF0aWMgY3JlYXRpb24gb2YgY2hpbGQgdmlld3MK
        CiAgRm9yIGNhc2VzIHdoZXJlIGFkZGl0aW9uYWwgY3VzdG9taXphdGlvbiBi
        ZXlvbmQgdGhlIHVzZSBvZiBhIHNpbmdsZQogIGBpdGVtVmlld0NsYXNzYCBv
        ciBgdGFnTmFtZWAgbWF0Y2hpbmcgaXMgcmVxdWlyZWQgQ29sbGVjdGlvblZp
        ZXcncwogIGBjcmVhdGVDaGlsZFZpZXdgIG1ldGhvZCBjYW4gYmUgb3Zlcmlk
        ZGVuOgoKICBgYGBqYXZhc2NyaXB0CiAgQ3VzdG9tQ29sbGVjdGlvblZpZXcg
        PSBFbWJlci5Db2xsZWN0aW9uVmlldy5leHRlbmQoewogICAgY3JlYXRlQ2hp
        bGRWaWV3OiBmdW5jdGlvbih2aWV3Q2xhc3MsIGF0dHJzKSB7CiAgICAgIGlm
        IChhdHRycy5jb250ZW50LmtpbmQgPT0gJ2FsYnVtJykgewogICAgICAgIHZp
        ZXdDbGFzcyA9IEFwcC5BbGJ1bVZpZXc7CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgdmlld0NsYXNzID0gQXBwLlNvbmdWaWV3OwogICAgICB9CiAgICAgIHJl
        dHVybiB0aGlzLl9zdXBlcih2aWV3Q2xhc3MsIGF0dHJzKTsKICAgIH0KICB9
        KTsKICBgYGAKCiAgIyMgRW1wdHkgVmlldwoKICBZb3UgY2FuIHByb3ZpZGUg
        YW4gYEVtYmVyLlZpZXdgIHN1YmNsYXNzIHRvIHRoZSBgRW1iZXIuQ29sbGVj
        dGlvblZpZXdgCiAgaW5zdGFuY2UgYXMgaXRzIGBlbXB0eVZpZXdgIHByb3Bl
        cnR5LiBJZiB0aGUgYGNvbnRlbnRgIHByb3BlcnR5IG9mIGEKICBgQ29sbGVj
        dGlvblZpZXdgIGlzIHNldCB0byBgbnVsbGAgb3IgYW4gZW1wdHkgYXJyYXks
        IGFuIGluc3RhbmNlIG9mIHRoaXMgdmlldwogIHdpbGwgYmUgdGhlIGBDb2xs
        ZWN0aW9uVmlld2BzIG9ubHkgY2hpbGQuCgogIGBgYGphdmFzY3JpcHQKICBh
        TGlzdFdpdGhOb3RoaW5nID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuY3JlYXRl
        KHsKICAgIGNsYXNzTmFtZXM6IFsnbm90aGluZyddCiAgICBjb250ZW50OiBu
        dWxsLAogICAgZW1wdHlWaWV3OiBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAg
        IHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIlRoZSBjb2xs
        ZWN0aW9uIGlzIGVtcHR5IikKICAgIH0pCiAgfSk7CgogIGFMaXN0V2l0aE5v
        dGhpbmcuYXBwZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQg
        aW4gdGhlIGZvbGxvd2luZyBIVE1MIHN0cnVjdHVyZQoKICBgYGBodG1sCiAg
        PGRpdiBjbGFzcz0iZW1iZXItdmlldyBub3RoaW5nIj4KICAgIDxkaXYgY2xh
        c3M9ImVtYmVyLXZpZXciPgogICAgICBUaGUgY29sbGVjdGlvbiBpcyBlbXB0
        eQogICAgPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIEFkZGluZyBhbmQg
        UmVtb3ZpbmcgaXRlbXMKCiAgVGhlIGBjaGlsZFZpZXdzYCBwcm9wZXJ0eSBv
        ZiBhIGBDb2xsZWN0aW9uVmlld2Agc2hvdWxkIG5vdCBiZSBkaXJlY3RseQog
        IG1hbmlwdWxhdGVkLiBJbnN0ZWFkLCBhZGQsIHJlbW92ZSwgcmVwbGFjZSBp
        dGVtcyBmcm9tIGl0cyBgY29udGVudGAgcHJvcGVydHkuCiAgVGhpcyB3aWxs
        IHRyaWdnZXIgYXBwcm9wcmlhdGUgY2hhbmdlcyB0byBpdHMgcmVuZGVyZWQg
        SFRNTC4KCgogIEBjbGFzcyBDb2xsZWN0aW9uVmlldwogIEBuYW1lc3BhY2Ug
        RW1iZXIKICBAZXh0ZW5kcyBFbWJlci5Db250YWluZXJWaWV3CiAgQHNpbmNl
        IEVtYmVyIDAuOQoqLwpFbWJlci5Db2xsZWN0aW9uVmlldyA9IEVtYmVyLkNv
        bnRhaW5lclZpZXcuZXh0ZW5kKC8qKiBAc2NvcGUgRW1iZXIuQ29sbGVjdGlv
        blZpZXcucHJvdG90eXBlICovIHsKCiAgLyoqCiAgICBBIGxpc3Qgb2YgaXRl
        bXMgdG8gYmUgZGlzcGxheWVkIGJ5IHRoZSBgRW1iZXIuQ29sbGVjdGlvblZp
        ZXdgLgoKICAgIEBwcm9wZXJ0eSBjb250ZW50CiAgICBAdHlwZSBFbWJlci5B
        cnJheQogICAgQGRlZmF1bHQgbnVsbAogICovCiAgY29udGVudDogbnVsbCwK
        CiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFRoaXMgcHJvdmlkZXMgbWV0YWRh
        dGEgYWJvdXQgd2hhdCBraW5kIG9mIGVtcHR5IHZpZXcgY2xhc3MgdGhpcwog
        ICAgY29sbGVjdGlvbiB3b3VsZCBsaWtlIGlmIGl0IGlzIGJlaW5nIGluc3Rh
        bnRpYXRlZCBmcm9tIGFub3RoZXIKICAgIHN5c3RlbSAobGlrZSBIYW5kbGVi
        YXJzKQoKICAgIEBwcm9wZXJ0eSBlbXB0eVZpZXdDbGFzcwogICovCiAgZW1w
        dHlWaWV3Q2xhc3M6IEVtYmVyLlZpZXcsCgogIC8qKgogICAgQW4gb3B0aW9u
        YWwgdmlldyB0byBkaXNwbGF5IGlmIGNvbnRlbnQgaXMgc2V0IHRvIGFuIGVt
        cHR5IGFycmF5LgoKICAgIEBwcm9wZXJ0eSBlbXB0eVZpZXcKICAgIEB0eXBl
        IEVtYmVyLlZpZXcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIGVtcHR5Vmll
        dzogbnVsbCwKCiAgLyoqCiAgICBAcHJvcGVydHkgaXRlbVZpZXdDbGFzcwog
        ICAgQHR5cGUgRW1iZXIuVmlldwogICAgQGRlZmF1bHQgRW1iZXIuVmlldwog
        ICovCiAgaXRlbVZpZXdDbGFzczogRW1iZXIuVmlldywKCiAgLyoqCiAgICBT
        ZXR1cCBhIENvbGxlY3Rpb25WaWV3CgogICAgQG1ldGhvZCBpbml0CiAgKi8K
        ICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHZhciByZXQgPSB0aGlzLl9zdXBl
        cigpOwogICAgdGhpcy5fY29udGVudERpZENoYW5nZSgpOwogICAgcmV0dXJu
        IHJldDsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgSW52b2tlZCB3
        aGVuIHRoZSBjb250ZW50IHByb3BlcnR5IGlzIGFib3V0IHRvIGNoYW5nZS4g
        Tm90aWZpZXMgb2JzZXJ2ZXJzIHRoYXQgdGhlCiAgICBlbnRpcmUgYXJyYXkg
        Y29udGVudCB3aWxsIGNoYW5nZS4KCiAgICBAbWV0aG9kIF9jb250ZW50V2ls
        bENoYW5nZQogICovCiAgX2NvbnRlbnRXaWxsQ2hhbmdlOiBFbWJlci5iZWZv
        cmVPYnNlcnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGNv
        bnRlbnQgPSB0aGlzLmdldCgnY29udGVudCcpOwoKICAgIGlmIChjb250ZW50
        KSB7IGNvbnRlbnQucmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlzKTsgfQogICAg
        dmFyIGxlbiA9IGNvbnRlbnQgPyBnZXQoY29udGVudCwgJ2xlbmd0aCcpIDog
        MDsKICAgIHRoaXMuYXJyYXlXaWxsQ2hhbmdlKGNvbnRlbnQsIDAsIGxlbik7
        CiAgfSksCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBDaGVjayB0byBtYWtl
        IHN1cmUgdGhhdCB0aGUgY29udGVudCBoYXMgY2hhbmdlZCwgYW5kIGlmIHNv
        LAogICAgdXBkYXRlIHRoZSBjaGlsZHJlbiBkaXJlY3RseS4gVGhpcyBpcyBh
        bHdheXMgc2NoZWR1bGVkCiAgICBhc3luY2hyb25vdXNseSwgdG8gYWxsb3cg
        dGhlIGVsZW1lbnQgdG8gYmUgY3JlYXRlZCBiZWZvcmUKICAgIGJpbmRpbmdz
        IGhhdmUgc3luY2hyb25pemVkIGFuZCB2aWNlIHZlcnNhLgoKICAgIEBtZXRo
        b2QgX2NvbnRlbnREaWRDaGFuZ2UKICAqLwogIF9jb250ZW50RGlkQ2hhbmdl
        OiBFbWJlci5vYnNlcnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkgewogICAg
        dmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKTsKCiAgICBpZiAo
        Y29udGVudCkgewogICAgICB0aGlzLl9hc3NlcnRBcnJheUxpa2UoY29udGVu
        dCk7CiAgICAgIGNvbnRlbnQuYWRkQXJyYXlPYnNlcnZlcih0aGlzKTsKICAg
        IH0KCiAgICB2YXIgbGVuID0gY29udGVudCA/IGdldChjb250ZW50LCAnbGVu
        Z3RoJykgOiAwOwogICAgdGhpcy5hcnJheURpZENoYW5nZShjb250ZW50LCAw
        LCBudWxsLCBsZW4pOwogIH0pLAoKICAvKioKICAgIEBwcml2YXRlCgogICAg
        RW5zdXJlIHRoYXQgdGhlIGNvbnRlbnQgaW1wbGVtZW50cyBFbWJlci5BcnJh
        eQoKICAgIEBtZXRob2QgX2Fzc2VydEFycmF5TGlrZQogICovCiAgX2Fzc2Vy
        dEFycmF5TGlrZTogZnVuY3Rpb24oY29udGVudCkgewogICAgRW1iZXIuYXNz
        ZXJ0KGZtdCgiYW4gRW1iZXIuQ29sbGVjdGlvblZpZXcncyBjb250ZW50IG11
        c3QgaW1wbGVtZW50IEVtYmVyLkFycmF5LiBZb3UgcGFzc2VkICVAIiwgW2Nv
        bnRlbnRdKSwgRW1iZXIuQXJyYXkuZGV0ZWN0KGNvbnRlbnQpKTsKICB9LAoK
        ICAvKioKICAgIFJlbW92ZXMgdGhlIGNvbnRlbnQgYW5kIGNvbnRlbnQgb2Jz
        ZXJ2ZXJzLgoKICAgIEBtZXRob2QgZGVzdHJveQogICovCiAgZGVzdHJveTog
        ZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuX3N1cGVyKCkpIHsgcmV0dXJu
        OyB9CgogICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKTsK
        ICAgIGlmIChjb250ZW50KSB7IGNvbnRlbnQucmVtb3ZlQXJyYXlPYnNlcnZl
        cih0aGlzKTsgfQoKICAgIGlmICh0aGlzLl9jcmVhdGVkRW1wdHlWaWV3KSB7
        CiAgICAgIHRoaXMuX2NyZWF0ZWRFbXB0eVZpZXcuZGVzdHJveSgpOwogICAg
        fQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIHdo
        ZW4gYSBtdXRhdGlvbiB0byB0aGUgdW5kZXJseWluZyBjb250ZW50IGFycmF5
        IHdpbGwgb2NjdXIuCgogICAgVGhpcyBtZXRob2Qgd2lsbCByZW1vdmUgYW55
        IHZpZXdzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgdW5kZXJseWluZwog
        ICAgY29udGVudCBhcnJheS4KCiAgICBJbnZva2VzIHdoZW5ldmVyIHRoZSBj
        b250ZW50IGFycmF5IGl0c2VsZiB3aWxsIGNoYW5nZS4KCiAgICBAbWV0aG9k
        IGFycmF5V2lsbENoYW5nZQogICAgQHBhcmFtIHtBcnJheX0gY29udGVudCB0
        aGUgbWFuYWdlZCBjb2xsZWN0aW9uIG9mIG9iamVjdHMKICAgIEBwYXJhbSB7
        TnVtYmVyfSBzdGFydCB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGNoYW5nZXMg
        d2lsbCBvY2N1cnIKICAgIEBwYXJhbSB7TnVtYmVyfSByZW1vdmVkIG51bWJl
        ciBvZiBvYmplY3QgdG8gYmUgcmVtb3ZlZCBmcm9tIGNvbnRlbnQKICAqLwog
        IGFycmF5V2lsbENoYW5nZTogZnVuY3Rpb24oY29udGVudCwgc3RhcnQsIHJl
        bW92ZWRDb3VudCkgewogICAgLy8gSWYgdGhlIGNvbnRlbnRzIHdlcmUgZW1w
        dHkgYmVmb3JlIGFuZCB0aGlzIHRlbXBsYXRlIGNvbGxlY3Rpb24gaGFzIGFu
        CiAgICAvLyBlbXB0eSB2aWV3IHJlbW92ZSBpdCBub3cuCiAgICB2YXIgZW1w
        dHlWaWV3ID0gZ2V0KHRoaXMsICdlbXB0eVZpZXcnKTsKICAgIGlmIChlbXB0
        eVZpZXcgJiYgZW1wdHlWaWV3IGluc3RhbmNlb2YgRW1iZXIuVmlldykgewog
        ICAgICBlbXB0eVZpZXcucmVtb3ZlRnJvbVBhcmVudCgpOwogICAgfQoKICAg
        IC8vIExvb3AgdGhyb3VnaCBjaGlsZCB2aWV3cyB0aGF0IGNvcnJlc3BvbmQg
        d2l0aCB0aGUgcmVtb3ZlZCBpdGVtcy4KICAgIC8vIE5vdGUgdGhhdCB3ZSBs
        b29wIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXkgdG8gdGhlIGJlZ2lubmlu
        ZyBiZWNhdXNlCiAgICAvLyB3ZSBhcmUgbXV0YXRpbmcgaXQgYXMgd2UgZ28u
        CiAgICB2YXIgY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3MsIGNoaWxk
        VmlldywgaWR4LCBsZW47CgogICAgbGVuID0gdGhpcy5fY2hpbGRWaWV3cy5s
        ZW5ndGg7CgogICAgdmFyIHJlbW92aW5nQWxsID0gcmVtb3ZlZENvdW50ID09
        PSBsZW47CgogICAgaWYgKHJlbW92aW5nQWxsKSB7CiAgICAgIHRoaXMuY3Vy
        cmVudFN0YXRlLmVtcHR5KHRoaXMpOwogICAgICB0aGlzLmludm9rZVJlY3Vy
        c2l2ZWx5KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgICB2aWV3LnJlbW92ZWRG
        cm9tRE9NID0gdHJ1ZTsKICAgICAgfSwgZmFsc2UpOwogICAgfQoKICAgIGZv
        ciAoaWR4ID0gc3RhcnQgKyByZW1vdmVkQ291bnQgLSAxOyBpZHggPj0gc3Rh
        cnQ7IGlkeC0tKSB7CiAgICAgIGNoaWxkVmlldyA9IGNoaWxkVmlld3NbaWR4
        XTsKICAgICAgY2hpbGRWaWV3LmRlc3Ryb3koKTsKICAgIH0KICB9LAoKICAv
        KioKICAgIENhbGxlZCB3aGVuIGEgbXV0YXRpb24gdG8gdGhlIHVuZGVybHlp
        bmcgY29udGVudCBhcnJheSBvY2N1cnMuCgogICAgVGhpcyBtZXRob2Qgd2ls
        bCByZXBsYXkgdGhhdCBtdXRhdGlvbiBhZ2FpbnN0IHRoZSB2aWV3cyB0aGF0
        IGNvbXBvc2UgdGhlCiAgICBgRW1iZXIuQ29sbGVjdGlvblZpZXdgLCBlbnN1
        cmluZyB0aGF0IHRoZSB2aWV3IHJlZmxlY3RzIHRoZSBtb2RlbC4KCiAgICBU
        aGlzIGFycmF5IG9ic2VydmVyIGlzIGFkZGVkIGluIGBjb250ZW50RGlkQ2hh
        bmdlYC4KCiAgICBAbWV0aG9kIGFycmF5RGlkQ2hhbmdlCiAgICBAcGFyYW0g
        e0FycmF5fSBjb250ZW50IHRoZSBtYW5hZ2VkIGNvbGxlY3Rpb24gb2Ygb2Jq
        ZWN0cwogICAgQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IHRoZSBpbmRleCBhdCB3
        aGljaCB0aGUgY2hhbmdlcyBvY2N1cnJlZAogICAgQHBhcmFtIHtOdW1iZXJ9
        IHJlbW92ZWQgbnVtYmVyIG9mIG9iamVjdCByZW1vdmVkIGZyb20gY29udGVu
        dAogICAgQHBhcmFtIHtOdW1iZXJ9IGFkZGVkIG51bWJlciBvZiBvYmplY3Qg
        YWRkZWQgdG8gY29udGVudAogICovCiAgYXJyYXlEaWRDaGFuZ2U6IGZ1bmN0
        aW9uKGNvbnRlbnQsIHN0YXJ0LCByZW1vdmVkLCBhZGRlZCkgewogICAgdmFy
        IGFkZGVkVmlld3MgPSBbXSwgdmlldywgaXRlbSwgaWR4LCBsZW4sIGl0ZW1W
        aWV3Q2xhc3MsCiAgICAgIGVtcHR5VmlldzsKCiAgICBsZW4gPSBjb250ZW50
        ID8gZ2V0KGNvbnRlbnQsICdsZW5ndGgnKSA6IDA7CgogICAgaWYgKGxlbikg
        ewogICAgICBpdGVtVmlld0NsYXNzID0gZ2V0KHRoaXMsICdpdGVtVmlld0Ns
        YXNzJyk7CgogICAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBpdGVtVmll
        d0NsYXNzKSB7CiAgICAgICAgaXRlbVZpZXdDbGFzcyA9IGdldChpdGVtVmll
        d0NsYXNzKSB8fCBpdGVtVmlld0NsYXNzOwogICAgICB9CgogICAgICBFbWJl
        ci5hc3NlcnQoZm10KCJpdGVtVmlld0NsYXNzIG11c3QgYmUgYSBzdWJjbGFz
        cyBvZiBFbWJlci5WaWV3LCBub3QgJUAiLCBbaXRlbVZpZXdDbGFzc10pLCAn
        c3RyaW5nJyA9PT0gdHlwZW9mIGl0ZW1WaWV3Q2xhc3MgfHwgRW1iZXIuVmll
        dy5kZXRlY3QoaXRlbVZpZXdDbGFzcykpOwoKICAgICAgZm9yIChpZHggPSBz
        dGFydDsgaWR4IDwgc3RhcnQrYWRkZWQ7IGlkeCsrKSB7CiAgICAgICAgaXRl
        bSA9IGNvbnRlbnQub2JqZWN0QXQoaWR4KTsKCiAgICAgICAgdmlldyA9IHRo
        aXMuY3JlYXRlQ2hpbGRWaWV3KGl0ZW1WaWV3Q2xhc3MsIHsKICAgICAgICAg
        IGNvbnRlbnQ6IGl0ZW0sCiAgICAgICAgICBjb250ZW50SW5kZXg6IGlkeAog
        ICAgICAgIH0pOwoKICAgICAgICBhZGRlZFZpZXdzLnB1c2godmlldyk7CiAg
        ICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGVtcHR5VmlldyA9IGdldCh0aGlz
        LCAnZW1wdHlWaWV3Jyk7CgogICAgICBpZiAoIWVtcHR5VmlldykgeyByZXR1
        cm47IH0KCiAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIGVtcHR5Vmll
        dykgewogICAgICAgIGVtcHR5VmlldyA9IGdldChlbXB0eVZpZXcpIHx8IGVt
        cHR5VmlldzsKICAgICAgfQoKICAgICAgZW1wdHlWaWV3ID0gdGhpcy5jcmVh
        dGVDaGlsZFZpZXcoZW1wdHlWaWV3KTsKICAgICAgYWRkZWRWaWV3cy5wdXNo
        KGVtcHR5Vmlldyk7CiAgICAgIHNldCh0aGlzLCAnZW1wdHlWaWV3JywgZW1w
        dHlWaWV3KTsKCiAgICAgIGlmIChFbWJlci5Db3JlVmlldy5kZXRlY3QoZW1w
        dHlWaWV3KSkgewogICAgICAgIHRoaXMuX2NyZWF0ZWRFbXB0eVZpZXcgPSBl
        bXB0eVZpZXc7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLnJlcGxhY2Uoc3Rh
        cnQsIDAsIGFkZGVkVmlld3MpOwogIH0sCgogIC8qKgogICAgSW5zdGFudGlh
        dGVzIGEgdmlldyB0byBiZSBhZGRlZCB0byB0aGUgY2hpbGRWaWV3cyBhcnJh
        eSBkdXJpbmcgdmlldwogICAgaW5pdGlhbGl6YXRpb24uIFlvdSBnZW5lcmFs
        bHkgd2lsbCBub3QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSB1bmxlc3MK
        ICAgIHlvdSBhcmUgb3ZlcnJpZGluZyBgY3JlYXRlQ2hpbGRWaWV3cygpYC4g
        Tm90ZSB0aGF0IHRoaXMgbWV0aG9kIHdpbGwKICAgIGF1dG9tYXRpY2FsbHkg
        Y29uZmlndXJlIHRoZSBjb3JyZWN0IHNldHRpbmdzIG9uIHRoZSBuZXcgdmll
        dyBpbnN0YW5jZSB0bwogICAgYWN0IGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVu
        dC4KCiAgICBUaGUgdGFnIG5hbWUgZm9yIHRoZSB2aWV3IHdpbGwgYmUgc2V0
        IHRvIHRoZSB0YWdOYW1lIG9mIHRoZSB2aWV3Q2xhc3MKICAgIHBhc3NlZCBp
        bi4KCiAgICBAbWV0aG9kIGNyZWF0ZUNoaWxkVmlldwogICAgQHBhcmFtIHtD
        bGFzc30gdmlld0NsYXNzCiAgICBAcGFyYW0ge0hhc2h9IFthdHRyc10gQXR0
        cmlidXRlcyB0byBhZGQKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IG5ldyBp
        bnN0YW5jZQogICovCiAgY3JlYXRlQ2hpbGRWaWV3OiBmdW5jdGlvbih2aWV3
        LCBhdHRycykgewogICAgdmlldyA9IHRoaXMuX3N1cGVyKHZpZXcsIGF0dHJz
        KTsKCiAgICB2YXIgaXRlbVRhZ05hbWUgPSBnZXQodmlldywgJ3RhZ05hbWUn
        KTsKCiAgICBpZiAoaXRlbVRhZ05hbWUgPT09IG51bGwgfHwgaXRlbVRhZ05h
        bWUgPT09IHVuZGVmaW5lZCkgewogICAgICBpdGVtVGFnTmFtZSA9IEVtYmVy
        LkNvbGxlY3Rpb25WaWV3LkNPTlRBSU5FUl9NQVBbZ2V0KHRoaXMsICd0YWdO
        YW1lJyldOwogICAgICBzZXQodmlldywgJ3RhZ05hbWUnLCBpdGVtVGFnTmFt
        ZSk7CiAgICB9CgogICAgcmV0dXJuIHZpZXc7CiAgfQp9KTsKCi8qKgogIEEg
        bWFwIG9mIHBhcmVudCB0YWdzIHRvIHRoZWlyIGRlZmF1bHQgY2hpbGQgdGFn
        cy4gWW91IGNhbiBhZGQKICBhZGRpdGlvbmFsIHBhcmVudCB0YWdzIGlmIHlv
        dSB3YW50IGNvbGxlY3Rpb24gdmlld3MgdGhhdCB1c2UKICBhIHBhcnRpY3Vs
        YXIgcGFyZW50IHRhZyB0byBkZWZhdWx0IHRvIGEgY2hpbGQgdGFnLgoKICBA
        cHJvcGVydHkgQ09OVEFJTkVSX01BUAogIEB0eXBlIEhhc2gKICBAc3RhdGlj
        CiAgQGZpbmFsCiovCkVtYmVyLkNvbGxlY3Rpb25WaWV3LkNPTlRBSU5FUl9N
        QVAgPSB7CiAgdWw6ICdsaScsCiAgb2w6ICdsaScsCiAgdGFibGU6ICd0cics
        CiAgdGhlYWQ6ICd0cicsCiAgdGJvZHk6ICd0cicsCiAgdGZvb3Q6ICd0cics
        CiAgdHI6ICd0ZCcsCiAgc2VsZWN0OiAnb3B0aW9uJwp9OwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQsIGlzTm9uZSA9IEVtYmVyLmlzTm9uZSwKICAgIGFfc2xpY2UgPSBB
        cnJheS5wcm90b3R5cGUuc2xpY2U7CgoKLyoqCkBtb2R1bGUgZW1iZXIKQHN1
        Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKLyoqCiAgQW4gYEVtYmVyLkNvbXBv
        bmVudGAgaXMgYSB2aWV3IHRoYXQgaXMgY29tcGxldGVseQogIGlzb2xhdGVk
        LiBQcm9wZXJ0eSBhY2Nlc3MgaW4gaXRzIHRlbXBsYXRlcyBnbwogIHRvIHRo
        ZSB2aWV3IG9iamVjdCBhbmQgYWN0aW9ucyBhcmUgdGFyZ2V0ZWQgYXQKICB0
        aGUgdmlldyBvYmplY3QuIFRoZXJlIGlzIG5vIGFjY2VzcyB0byB0aGUKICBz
        dXJyb3VuZGluZyBjb250ZXh0IG9yIG91dGVyIGNvbnRyb2xsZXI7IGFsbAog
        IGNvbnRleHR1YWwgaW5mb3JtYXRpb24gaXMgcGFzc2VkIGluLgoKICBUaGUg
        ZWFzaWVzdCB3YXkgdG8gY3JlYXRlIGFuIGBFbWJlci5Db21wb25lbnRgIGlz
        IHZpYQogIGEgdGVtcGxhdGUuIElmIHlvdSBuYW1lIGEgdGVtcGxhdGUKICBg
        Y29tcG9uZW50cy9teS1mb29gLCB5b3Ugd2lsbCBiZSBhYmxlIHRvIHVzZQog
        IGB7e215LWZvb319YCBpbiBvdGhlciB0ZW1wbGF0ZXMsIHdoaWNoIHdpbGwg
        bWFrZQogIGFuIGluc3RhbmNlIG9mIHRoZSBpc29sYXRlZCBjb21wb25lbnQu
        CgogIGBgYGh0bWwKICB7e2FwcC1wcm9maWxlIHBlcnNvbj1jdXJyZW50VXNl
        cn19CiAgYGBgCgogIGBgYGh0bWwKICA8IS0tIGFwcC1wcm9maWxlIHRlbXBs
        YXRlIC0tPgogIDxoMT57e3BlcnNvbi50aXRsZX19PC9oMT4KICA8aW1nIHt7
        YmluZC1hdHRyIHNyYz1wZXJzb24uYXZhdGFyfX0+CiAgPHAgY2xhc3M9J3Np
        Z25hdHVyZSc+e3twZXJzb24uc2lnbmF0dXJlfX08L3A+CiAgYGBgCgogIFlv
        dSBjYW4gYWxzbyB1c2UgYHlpZWxkYCBpbnNpZGUgYSB0ZW1wbGF0ZSB0bwog
        IGluY2x1ZGUgdGhlICoqY29udGVudHMqKiBvZiB0aGUgY3VzdG9tIHRhZzoK
        CiAgYGBgaHRtbAogIHt7I2FwcC1wcm9maWxlIHBlcnNvbj1jdXJyZW50VXNl
        cn19CiAgICA8cD5BZG1pbiBtb2RlPC9wPgogIHt7L2FwcC1wcm9maWxlfX0K
        ICBgYGAKCiAgYGBgaHRtbAogIDwhLS0gYXBwLXByb2ZpbGUgdGVtcGxhdGUg
        LS0+CiAgPGgxPnt7cGVyc29uLnRpdGxlfX08L2gxPgogIHt7eWllbGR9fSA8
        IS0tIGJsb2NrIGNvbnRlbnRzIC0tPgogIGBgYAoKICBJZiB5b3Ugd2FudCB0
        byBjdXN0b21pemUgdGhlIGNvbXBvbmVudCwgaW4gb3JkZXIgdG8KICBoYW5k
        bGUgZXZlbnRzIG9yIGFjdGlvbnMsIHlvdSBpbXBsZW1lbnQgYSBzdWJjbGFz
        cwogIG9mIGBFbWJlci5Db21wb25lbnRgIG5hbWVkIGFmdGVyIHRoZSBuYW1l
        IG9mIHRoZQogIGNvbXBvbmVudC4gTm90ZSB0aGF0IGBDb21wb25lbnRgIG5l
        ZWRzIHRvIGJlIGFwcGVuZGVkIHRvIHRoZSBuYW1lIG9mCiAgeW91ciBzdWJj
        bGFzcyBsaWtlIGBBcHBQcm9maWxlQ29tcG9uZW50YC4KCiAgRm9yIGV4YW1w
        bGUsIHlvdSBjb3VsZCBpbXBsZW1lbnQgdGhlIGFjdGlvbgogIGBoZWxsb2Ag
        Zm9yIHRoZSBgYXBwLXByb2ZpbGVgIGNvbXBvbmVudDoKCiAgYGBgamF2YXNj
        cmlwdAogIEFwcC5BcHBQcm9maWxlQ29tcG9uZW50ID0gRW1iZXIuQ29tcG9u
        ZW50LmV4dGVuZCh7CiAgICBhY3Rpb25zOiB7CiAgICAgIGhlbGxvOiBmdW5j
        dGlvbihuYW1lKSB7CiAgICAgICAgY29uc29sZS5sb2coIkhlbGxvIiwgbmFt
        ZSk7CiAgICAgIH0KICAgIH0KICB9KTsKICBgYGAKCiAgQW5kIHRoZW4gdXNl
        IGl0IGluIHRoZSBjb21wb25lbnQncyB0ZW1wbGF0ZToKCiAgYGBgaHRtbAog
        IDwhLS0gYXBwLXByb2ZpbGUgdGVtcGxhdGUgLS0+CgogIDxoMT57e3BlcnNv
        bi50aXRsZX19PC9oMT4KICB7e3lpZWxkfX0gPCEtLSBibG9jayBjb250ZW50
        cyAtLT4KCiAgPGJ1dHRvbiB7e2FjdGlvbiAnaGVsbG8nIHBlcnNvbi5uYW1l
        fX0+CiAgICBTYXkgSGVsbG8gdG8ge3twZXJzb24ubmFtZX19CiAgPC9idXR0
        b24+CiAgYGBgCgogIENvbXBvbmVudHMgbXVzdCBoYXZlIGEgYC1gIGluIHRo
        ZWlyIG5hbWUgdG8gYXZvaWQKICBjb25mbGljdHMgd2l0aCBidWlsdC1pbiBj
        b250cm9scyB0aGF0IHdyYXAgSFRNTAogIGVsZW1lbnRzLiBUaGlzIGlzIGNv
        bnNpc3RlbnQgd2l0aCB0aGUgc2FtZQogIHJlcXVpcmVtZW50IGluIHdlYiBj
        b21wb25lbnRzLgoKICBAY2xhc3MgQ29tcG9uZW50CiAgQG5hbWVzcGFjZSBF
        bWJlcgogIEBleHRlbmRzIEVtYmVyLlZpZXcKKi8KRW1iZXIuQ29tcG9uZW50
        ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9y
        dCwgewogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsK
        ICAgIHNldCh0aGlzLCAnY29udGV4dCcsIHRoaXMpOwogICAgc2V0KHRoaXMs
        ICdjb250cm9sbGVyJywgdGhpcyk7CiAgfSwKCiAgLy8gZHVyaW5nIHJlbmRl
        ciwgaXNvbGF0ZSBrZXl3b3JkcwogIGNsb25lS2V5d29yZHM6IGZ1bmN0aW9u
        KCkgewogICAgcmV0dXJuIHsKICAgICAgdmlldzogdGhpcywKICAgICAgY29u
        dHJvbGxlcjogdGhpcwogICAgfTsKICB9LAoKICBfeWllbGQ6IGZ1bmN0aW9u
        KGNvbnRleHQsIG9wdGlvbnMpIHsKICAgIHZhciB2aWV3ID0gb3B0aW9ucy5k
        YXRhLnZpZXcsCiAgICAgICAgcGFyZW50VmlldyA9IHRoaXMuX3BhcmVudFZp
        ZXcsCiAgICAgICAgdGVtcGxhdGUgPSBnZXQodGhpcywgJ3RlbXBsYXRlJyk7
        CgogICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiQSBD
        b21wb25lbnQgbXVzdCBoYXZlIGEgcGFyZW50IHZpZXcgaW4gb3JkZXIgdG8g
        eWllbGQuIiwgcGFyZW50Vmlldyk7CgogICAgICB2aWV3LmFwcGVuZENoaWxk
        KEVtYmVyLlZpZXcsIHsKICAgICAgICBpc1ZpcnR1YWw6IHRydWUsCiAgICAg
        ICAgdGFnTmFtZTogJycsCiAgICAgICAgX2NvbnRleHRWaWV3OiBwYXJlbnRW
        aWV3LAogICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSwKICAgICAgICBjb250
        ZXh0OiBnZXQocGFyZW50VmlldywgJ2NvbnRleHQnKSwKICAgICAgICBjb250
        cm9sbGVyOiBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXInKSwKICAgICAg
        ICB0ZW1wbGF0ZURhdGE6IHsga2V5d29yZHM6IHBhcmVudFZpZXcuY2xvbmVL
        ZXl3b3JkcygpIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBJ
        ZiB0aGUgY29tcG9uZW50IGlzIGN1cnJlbnRseSBpbnNlcnRlZCBpbnRvIHRo
        ZSBET00gb2YgYSBwYXJlbnQgdmlldywgdGhpcwogICAgcHJvcGVydHkgd2ls
        bCBwb2ludCB0byB0aGUgY29udHJvbGxlciBvZiB0aGUgcGFyZW50IHZpZXcu
        CgogICAgQHByb3BlcnR5IHRhcmdldE9iamVjdAogICAgQHR5cGUgRW1iZXIu
        Q29udHJvbGxlcgogICAgQGRlZmF1bHQgbnVsbAogICovCiAgdGFyZ2V0T2Jq
        ZWN0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXkpIHsKICAgIHZhciBw
        YXJlbnRWaWV3ID0gZ2V0KHRoaXMsICdfcGFyZW50VmlldycpOwogICAgcmV0
        dXJuIHBhcmVudFZpZXcgPyBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXIn
        KSA6IG51bGw7CiAgfSkucHJvcGVydHkoJ19wYXJlbnRWaWV3JyksCgogIC8q
        KgogICAgU2VuZHMgYW4gYWN0aW9uIHRvIGNvbXBvbmVudCdzIGNvbnRyb2xs
        ZXIuIEEgY29tcG9uZW50IGluaGVyaXRzIGl0cwogICAgY29udHJvbGxlciBm
        cm9tIHRoZSBjb250ZXh0IGluIHdoaWNoIGl0IGlzIHVzZWQuCgogICAgQnkg
        ZGVmYXVsdCwgY2FsbGluZyBgc2VuZEFjdGlvbigpYCB3aWxsIHNlbmQgYW4g
        YWN0aW9uIHdpdGggdGhlIG5hbWUKICAgIG9mIHRoZSBjb21wb25lbnQncyBg
        YWN0aW9uYCBwcm9wZXJ0eS4KCiAgICBGb3IgZXhhbXBsZSwgaWYgdGhlIGNv
        bXBvbmVudCBoYWQgYSBwcm9wZXJ0eSBgYWN0aW9uYCB3aXRoIHRoZSB2YWx1
        ZQogICAgYCJhZGRJdGVtImAsIGNhbGxpbmcgYHNlbmRBY3Rpb24oKWAgd291
        bGQgc2VuZCB0aGUgYGFkZEl0ZW1gIGFjdGlvbgogICAgdG8gdGhlIGNvbXBv
        bmVudCdzIGNvbnRyb2xsZXIuCgogICAgSWYgeW91IHByb3ZpZGUgdGhlIGBh
        Y3Rpb25gIGFyZ3VtZW50IHRvIGBzZW5kQWN0aW9uKClgLCB0aGF0IGtleSB3
        aWxsCiAgICBiZSB1c2VkIHRvIGxvb2sgdXAgdGhlIGFjdGlvbiBuYW1lLgoK
        ICAgIEZvciBleGFtcGxlLCBpZiB0aGUgY29tcG9uZW50IGhhZCBhIHByb3Bl
        cnR5IGBwbGF5aW5nYCB3aXRoIHRoZSB2YWx1ZQogICAgYGRpZFN0YXJ0UGxh
        eWluZ2AsIGNhbGxpbmcgYHNlbmRBY3Rpb24oJ3BsYXlpbmcnKWAgd291bGQg
        c2VuZCB0aGUKICAgIGBkaWRTdGFydFBsYXlpbmdgIGFjdGlvbiB0byB0aGUg
        Y29tcG9uZW50J3MgY29udHJvbGxlci4KCiAgICBXaGV0aGVyIG9yIG5vdCB5
        b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGFjdGlvbiBvciBhIG5hbWVkIGFj
        dGlvbiwgaWYKICAgIHRoZSBhY3Rpb24gbmFtZSBpcyBub3QgZGVmaW5lZCBv
        biB0aGUgY29tcG9uZW50LCBjYWxsaW5nIGBzZW5kQWN0aW9uKClgCiAgICBk
        b2VzIG5vdCBoYXZlIGFueSBlZmZlY3QuCgogICAgRm9yIGV4YW1wbGUsIGlm
        IHlvdSBjYWxsIGBzZW5kQWN0aW9uKClgIG9uIGEgY29tcG9uZW50IHRoYXQg
        ZG9lcyBub3QgaGF2ZQogICAgYW4gYGFjdGlvbmAgcHJvcGVydHkgZGVmaW5l
        ZCwgbm8gYWN0aW9uIHdpbGwgYmUgc2VudCB0byB0aGUgY29udHJvbGxlciwK
        ICAgIG5vciB3aWxsIGFuIGV4Y2VwdGlvbiBiZSByYWlzZWQuCgogICAgWW91
        IGNhbiBzZW5kIGEgY29udGV4dCBvYmplY3Qgd2l0aCB0aGUgYWN0aW9uIGJ5
        IHN1cHBseWluZyB0aGUgYGNvbnRleHRgCiAgICBhcmd1bWVudC4gVGhlIGNv
        bnRleHQgd2lsbCBiZSBzdXBwbGllZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQg
        aW4gdGhlCiAgICB0YXJnZXQncyBhY3Rpb24gbWV0aG9kLiBFeGFtcGxlOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5NeVRyZWVDb21wb25lbnQgPSBF
        bWJlci5Db21wb25lbnQuZXh0ZW5kKHsKICAgICAgY2xpY2s6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHRoaXMuc2VuZEFjdGlvbignZGlkQ2xpY2tUcmVlTm9k
        ZScsIHRoaXMuZ2V0KCdub2RlJykpOwogICAgICB9CiAgICB9KTsKCiAgICBB
        cHAuQ2F0ZWdvcmllc0NvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4
        dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBkaWRDbGlja0NhdGVn
        b3J5OiBmdW5jdGlvbihjYXRlZ29yeSkgewogICAgICAgICAgLy9EbyBzb21l
        dGhpbmcgd2l0aCB0aGUgbm9kZS9jYXRlZ29yeSB0aGF0IHdhcyBjbGlja2Vk
        CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIGBgYGhh
        bmRsZWJhcnMKICAgIHt7ISBjYXRlZ29yaWVzLmhic319CiAgICB7e215LXRy
        ZWUgZGlkQ2xpY2tUcmVlTm9kZT0nZGlkQ2xpY2tDYXRlZ29yeSd9fQogICAg
        YGBgCgogICAgQG1ldGhvZCBzZW5kQWN0aW9uCiAgICBAcGFyYW0gW2FjdGlv
        bl0ge1N0cmluZ30gdGhlIGFjdGlvbiB0byB0cmlnZ2VyCiAgICBAcGFyYW0g
        W2NvbnRleHRdIHsqfSBhIGNvbnRleHQgdG8gc2VuZCB3aXRoIHRoZSBhY3Rp
        b24KICAqLwogIHNlbmRBY3Rpb246IGZ1bmN0aW9uKGFjdGlvbikgewogICAg
        dmFyIGFjdGlvbk5hbWUsCiAgICAgICAgY29udGV4dHMgPSBhX3NsaWNlLmNh
        bGwoYXJndW1lbnRzLCAxKTsKCiAgICAvLyBTZW5kIHRoZSBkZWZhdWx0IGFj
        dGlvbgogICAgaWYgKGFjdGlvbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGFj
        dGlvbk5hbWUgPSBnZXQodGhpcywgJ2FjdGlvbicpOwogICAgICBFbWJlci5h
        c3NlcnQoIlRoZSBkZWZhdWx0IGFjdGlvbiB3YXMgdHJpZ2dlcmVkIG9uIHRo
        ZSBjb21wb25lbnQgIiArIHRoaXMudG9TdHJpbmcoKSArICIsIGJ1dCB0aGUg
        YWN0aW9uIG5hbWUgKCIgKyBhY3Rpb25OYW1lICsgIikgd2FzIG5vdCBhIHN0
        cmluZy4iLCBpc05vbmUoYWN0aW9uTmFtZSkgfHwgdHlwZW9mIGFjdGlvbk5h
        bWUgPT09ICdzdHJpbmcnKTsKICAgIH0gZWxzZSB7CiAgICAgIGFjdGlvbk5h
        bWUgPSBnZXQodGhpcywgYWN0aW9uKTsKICAgICAgRW1iZXIuYXNzZXJ0KCJU
        aGUgIiArIGFjdGlvbiArICIgYWN0aW9uIHdhcyB0cmlnZ2VyZWQgb24gdGhl
        IGNvbXBvbmVudCAiICsgdGhpcy50b1N0cmluZygpICsgIiwgYnV0IHRoZSBh
        Y3Rpb24gbmFtZSAoIiArIGFjdGlvbk5hbWUgKyAiKSB3YXMgbm90IGEgc3Ry
        aW5nLiIsIGlzTm9uZShhY3Rpb25OYW1lKSB8fCB0eXBlb2YgYWN0aW9uTmFt
        ZSA9PT0gJ3N0cmluZycpOwogICAgfQoKICAgIC8vIElmIG5vIGFjdGlvbiBu
        YW1lIGZvciB0aGF0IGFjdGlvbiBjb3VsZCBiZSBmb3VuZCwganVzdCBhYm9y
        dC4KICAgIGlmIChhY3Rpb25OYW1lID09PSB1bmRlZmluZWQpIHsgcmV0dXJu
        OyB9CgogICAgdGhpcy50cmlnZ2VyQWN0aW9uKHsKICAgICAgYWN0aW9uOiBh
        Y3Rpb25OYW1lLAogICAgICBhY3Rpb25Db250ZXh0OiBjb250ZXh0cwogICAg
        fSk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCmBFbWJlci5WaWV3VGFyZ2V0QWN0aW9uU3Vw
        cG9ydGAgaXMgYSBtaXhpbiB0aGF0IGNhbiBiZSBpbmNsdWRlZCBpbiBhCnZp
        ZXcgY2xhc3MgdG8gYWRkIGEgYHRyaWdnZXJBY3Rpb25gIG1ldGhvZCB3aXRo
        IHNlbWFudGljcyBzaW1pbGFyIHRvCnRoZSBIYW5kbGViYXJzIGB7e2FjdGlv
        bn19YCBoZWxwZXIuIEl0IHByb3ZpZGVzIGludGVsbGlnZW50IGRlZmF1bHRz
        CmZvciB0aGUgYWN0aW9uJ3MgdGFyZ2V0OiB0aGUgdmlldydzIGNvbnRyb2xs
        ZXI7IGFuZCB0aGUgY29udGV4dCB0aGF0IGlzCnNlbnQgd2l0aCB0aGUgYWN0
        aW9uOiB0aGUgdmlldydzIGNvbnRleHQuCgpOb3RlOiBJbiBub3JtYWwgRW1i
        ZXIgdXNhZ2UsIHRoZSBge3thY3Rpb259fWAgaGVscGVyIGlzIHVzdWFsbHkg
        dGhlIGJlc3QKY2hvaWNlLiBUaGlzIG1peGluIGlzIG1vc3Qgb2Z0ZW4gdXNl
        ZnVsIHdoZW4geW91IGFyZSBkb2luZyBtb3JlIGNvbXBsZXgKZXZlbnQgaGFu
        ZGxpbmcgaW4gY3VzdG9tIFZpZXcgc3ViY2xhc3Nlcy4KCkZvciBleGFtcGxl
        OgoKYGBgamF2YXNjcmlwdApBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5W
        aWV3LmV4dGVuZChFbWJlci5WaWV3VGFyZ2V0QWN0aW9uU3VwcG9ydCwgewog
        IGFjdGlvbjogJ3NhdmUnLAogIGNsaWNrOiBmdW5jdGlvbigpIHsKICAgIHRo
        aXMudHJpZ2dlckFjdGlvbigpOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFjdGlv
        biwgYWxvbmcgd2l0aCB0aGUgY3VycmVudCBjb250ZXh0CiAgICAgICAgICAg
        ICAgICAgICAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgY29udHJvbGxlcgog
        IH0KfSk7CmBgYAoKVGhlIGBhY3Rpb25gIGNhbiBiZSBwcm92aWRlZCBhcyBw
        cm9wZXJ0aWVzIG9mIGFuIG9wdGlvbmFsIG9iamVjdCBhcmd1bWVudAp0byBg
        dHJpZ2dlckFjdGlvbmAgYXMgd2VsbC4KCmBgYGphdmFzY3JpcHQKQXBwLlNh
        dmVCdXR0b25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVmlld1Rh
        cmdldEFjdGlvblN1cHBvcnQsIHsKICBjbGljazogZnVuY3Rpb24oKSB7CiAg
        ICB0aGlzLnRyaWdnZXJBY3Rpb24oewogICAgICBhY3Rpb246ICdzYXZlJwog
        ICAgfSk7IC8vIFNlbmRzIHRoZSBgc2F2ZWAgYWN0aW9uLCBhbG9uZyB3aXRo
        IHRoZSBjdXJyZW50IGNvbnRleHQKICAgICAgICAvLyB0byB0aGUgY3VycmVu
        dCBjb250cm9sbGVyCiAgfQp9KTsKYGBgCgpAY2xhc3MgVmlld1RhcmdldEFj
        dGlvblN1cHBvcnQKQG5hbWVzcGFjZSBFbWJlcgpAZXh0ZW5kcyBFbWJlci5U
        YXJnZXRBY3Rpb25TdXBwb3J0CiovCkVtYmVyLlZpZXdUYXJnZXRBY3Rpb25T
        dXBwb3J0ID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLlRhcmdldEFjdGlv
        blN1cHBvcnQsIHsKICAvKioKICBAcHJvcGVydHkgdGFyZ2V0CiAgKi8KICB0
        YXJnZXQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250cm9sbGVyJyksCiAg
        LyoqCiAgQHByb3BlcnR5IGFjdGlvbkNvbnRleHQKICAqLwogIGFjdGlvbkNv
        bnRleHQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250ZXh0JykKfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpFbWJlciBWaWV3cwoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXZpZXdzCkByZXF1aXJlcyBlbWJlci1ydW50aW1lCkBtYWluIGVtYmVy
        LXZpZXdzCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewpkZWZpbmUoIm1ldGFt
        b3JwaCIsCiAgW10sCiAgZnVuY3Rpb24oKSB7CiAgICAidXNlIHN0cmljdCI7
        CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8g
        UHJvamVjdDogICBtZXRhbW9ycGgKICAgIC8vIENvcHlyaWdodDogwqkyMDEx
        IE15IENvbXBhbnkgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogICAgLy8g
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICB2YXIgSyA9IGZ1
        bmN0aW9uKCkge30sCiAgICAgICAgZ3VpZCA9IDAsCiAgICAgICAgZG9jdW1l
        bnQgPSB0aGlzLmRvY3VtZW50LAogICAgICAgIGRpc2FibGVSYW5nZSA9ICgn
        dW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVOViA/IHt9IDogRU5WKS5ESVNBQkxF
        X1JBTkdFX0FQSSwKCiAgICAgICAgLy8gRmVhdHVyZS1kZXRlY3QgdGhlIFcz
        QyByYW5nZSBBUEksIHRoZSBleHRlbmRlZCBjaGVjayBpcyBmb3IgSUU5IHdo
        aWNoIG9ubHkgcGFydGlhbGx5IHN1cHBvcnRzIHJhbmdlcwogICAgICAgIHN1
        cHBvcnRzUmFuZ2UgPSAoIWRpc2FibGVSYW5nZSkgJiYgZG9jdW1lbnQgJiYg
        KCdjcmVhdGVSYW5nZScgaW4gZG9jdW1lbnQpICYmICh0eXBlb2YgUmFuZ2Ug
        IT09ICd1bmRlZmluZWQnKSAmJiBSYW5nZS5wcm90b3R5cGUuY3JlYXRlQ29u
        dGV4dHVhbEZyYWdtZW50LAoKICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3Jl
        ciBwcmlvciB0byA5IGRvZXMgbm90IGFsbG93IHNldHRpbmcgaW5uZXJIVE1M
        IGlmIHRoZSBmaXJzdCBlbGVtZW50CiAgICAgICAgLy8gaXMgYSAiemVyby1z
        Y29wZSIgZWxlbWVudC4gVGhpcyBwcm9ibGVtIGNhbiBiZSB3b3JrZWQgYXJv
        dW5kIGJ5IG1ha2luZwogICAgICAgIC8vIHRoZSBmaXJzdCBub2RlIGFuIGlu
        dmlzaWJsZSB0ZXh0IG5vZGUuIFdlLCBsaWtlIE1vZGVybml6ciwgdXNlICZz
        aHk7CiAgICAgICAgbmVlZHNTaHkgPSBkb2N1bWVudCAmJiAoZnVuY3Rpb24o
        KSB7CiAgICAgICAgICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxl
        bWVudCgnZGl2Jyk7CiAgICAgICAgICB0ZXN0RWwuaW5uZXJIVE1MID0gIjxk
        aXY+PC9kaXY+IjsKICAgICAgICAgIHRlc3RFbC5maXJzdENoaWxkLmlubmVy
        SFRNTCA9ICI8c2NyaXB0Pjwvc2NyaXB0PiI7CiAgICAgICAgICByZXR1cm4g
        dGVzdEVsLmZpcnN0Q2hpbGQuaW5uZXJIVE1MID09PSAnJzsKICAgICAgICB9
        KSgpLAoKCiAgICAgICAgLy8gSUUgOCAoYW5kIGxpa2VseSBlYXJsaWVyKSBs
        aWtlcyB0byBtb3ZlIHdoaXRlc3BhY2UgcHJlY2VlZGluZwogICAgICAgIC8v
        IGEgc2NyaXB0IHRhZyB0byBhcHBlYXIgYWZ0ZXIgaXQuIFRoaXMgbWVhbnMg
        dGhhdCB3ZSBjYW4KICAgICAgICAvLyBhY2NpZGVudGFsbHkgcmVtb3ZlIHdo
        aXRlc3BhY2Ugd2hlbiB1cGRhdGluZyBhIG1vcnBoLgogICAgICAgIG1vdmVz
        V2hpdGVzcGFjZSA9IGRvY3VtZW50ICYmIChmdW5jdGlvbigpIHsKICAgICAg
        ICAgIHZhciB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYn
        KTsKICAgICAgICAgIHRlc3RFbC5pbm5lckhUTUwgPSAiVGVzdDogPHNjcmlw
        dCB0eXBlPSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PlZhbHVlIjsK
        ICAgICAgICAgIHJldHVybiB0ZXN0RWwuY2hpbGROb2Rlc1swXS5ub2RlVmFs
        dWUgPT09ICdUZXN0OicgJiYKICAgICAgICAgICAgICAgICAgdGVzdEVsLmNo
        aWxkTm9kZXNbMl0ubm9kZVZhbHVlID09PSAnIFZhbHVlJzsKICAgICAgICB9
        KSgpOwoKICAgIC8vIENvbnN0cnVjdG9yIHRoYXQgc3VwcG9ydHMgZWl0aGVy
        IE1ldGFtb3JwaCgnZm9vJykgb3IgbmV3CiAgICAvLyBNZXRhbW9ycGgoJ2Zv
        bycpOwogICAgLy8KICAgIC8vIFRha2VzIGEgc3RyaW5nIG9mIEhUTUwgYXMg
        dGhlIGFyZ3VtZW50LgoKICAgIHZhciBNZXRhbW9ycGggPSBmdW5jdGlvbiho
        dG1sKSB7CiAgICAgIHZhciBzZWxmOwoKICAgICAgaWYgKHRoaXMgaW5zdGFu
        Y2VvZiBNZXRhbW9ycGgpIHsKICAgICAgICBzZWxmID0gdGhpczsKICAgICAg
        fSBlbHNlIHsKICAgICAgICBzZWxmID0gbmV3IEsoKTsKICAgICAgfQoKICAg
        ICAgc2VsZi5pbm5lckhUTUwgPSBodG1sOwogICAgICB2YXIgbXlHdWlkID0g
        J21ldGFtb3JwaC0nKyhndWlkKyspOwogICAgICBzZWxmLnN0YXJ0ID0gbXlH
        dWlkICsgJy1zdGFydCc7CiAgICAgIHNlbGYuZW5kID0gbXlHdWlkICsgJy1l
        bmQnOwoKICAgICAgcmV0dXJuIHNlbGY7CiAgICB9OwoKICAgIEsucHJvdG90
        eXBlID0gTWV0YW1vcnBoLnByb3RvdHlwZTsKCiAgICB2YXIgcmFuZ2VGb3Is
        IGh0bWxGdW5jLCByZW1vdmVGdW5jLCBvdXRlckhUTUxGdW5jLCBhcHBlbmRU
        b0Z1bmMsIGFmdGVyRnVuYywgcHJlcGVuZEZ1bmMsIHN0YXJ0VGFnRnVuYywg
        ZW5kVGFnRnVuYzsKCiAgICBvdXRlckhUTUxGdW5jID0gZnVuY3Rpb24oKSB7
        CiAgICAgIHJldHVybiB0aGlzLnN0YXJ0VGFnKCkgKyB0aGlzLmlubmVySFRN
        TCArIHRoaXMuZW5kVGFnKCk7CiAgICB9OwoKICAgIHN0YXJ0VGFnRnVuYyA9
        IGZ1bmN0aW9uKCkgewogICAgICAvKgogICAgICAgKiBXZSByZXBsYWNlIGNo
        ZXZyb24gYnkgaXRzIGhleCBjb2RlIGluIG9yZGVyIHRvIHByZXZlbnQgZXNj
        YXBpbmcgcHJvYmxlbXMuCiAgICAgICAqIENoZWNrIHRoaXMgdGhyZWFkIGZv
        ciBtb3JlIGV4cGxhaW5hdGlvbjoKICAgICAgICogaHR0cDovL3N0YWNrb3Zl
        cmZsb3cuY29tL3F1ZXN0aW9ucy84MjMxMDQ4L3doeS11c2UteDNjLWluc3Rl
        YWQtb2Ytd2hlbi1nZW5lcmF0aW5nLWh0bWwtZnJvbS1qYXZhc2NyaXB0CiAg
        ICAgICAqLwogICAgICByZXR1cm4gIjxzY3JpcHQgaWQ9JyIgKyB0aGlzLnN0
        YXJ0ICsgIicgdHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz5ceDNDL3Njcmlw
        dD4iOwogICAgfTsKCiAgICBlbmRUYWdGdW5jID0gZnVuY3Rpb24oKSB7CiAg
        ICAgIC8qCiAgICAgICAqIFdlIHJlcGxhY2UgY2hldnJvbiBieSBpdHMgaGV4
        IGNvZGUgaW4gb3JkZXIgdG8gcHJldmVudCBlc2NhcGluZyBwcm9ibGVtcy4K
        ICAgICAgICogQ2hlY2sgdGhpcyB0aHJlYWQgZm9yIG1vcmUgZXhwbGFpbmF0
        aW9uOgogICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rp
        b25zLzgyMzEwNDgvd2h5LXVzZS14M2MtaW5zdGVhZC1vZi13aGVuLWdlbmVy
        YXRpbmctaHRtbC1mcm9tLWphdmFzY3JpcHQKICAgICAgICovCiAgICAgIHJl
        dHVybiAiPHNjcmlwdCBpZD0nIiArIHRoaXMuZW5kICsgIicgdHlwZT0ndGV4
        dC94LXBsYWNlaG9sZGVyJz5ceDNDL3NjcmlwdD4iOwogICAgfTsKCiAgICAv
        LyBJZiB3ZSBoYXZlIHRoZSBXM0MgcmFuZ2UgQVBJLCB0aGlzIHByb2Nlc3Mg
        aXMgcmVsYXRpdmVseSBzdHJhaWdodCBmb3J3YXJkLgogICAgaWYgKHN1cHBv
        cnRzUmFuZ2UpIHsKCiAgICAgIC8vIEdldCBhIHJhbmdlIGZvciB0aGUgY3Vy
        cmVudCBtb3JwaC4gT3B0aW9uYWxseSBpbmNsdWRlIHRoZSBzdGFydGluZyBh
        bmQKICAgICAgLy8gZW5kaW5nIHBsYWNlaG9sZGVycy4KICAgICAgcmFuZ2VG
        b3IgPSBmdW5jdGlvbihtb3JwaCwgb3V0ZXJUb28pIHsKICAgICAgICB2YXIg
        cmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZhciBi
        ZWZvcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb3JwaC5zdGFydCk7
        CiAgICAgICAgdmFyIGFmdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo
        bW9ycGguZW5kKTsKCiAgICAgICAgaWYgKG91dGVyVG9vKSB7CiAgICAgICAg
        ICByYW5nZS5zZXRTdGFydEJlZm9yZShiZWZvcmUpOwogICAgICAgICAgcmFu
        Z2Uuc2V0RW5kQWZ0ZXIoYWZ0ZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgICByYW5nZS5zZXRTdGFydEFmdGVyKGJlZm9yZSk7CiAgICAgICAgICBy
        YW5nZS5zZXRFbmRCZWZvcmUoYWZ0ZXIpOwogICAgICAgIH0KCiAgICAgICAg
        cmV0dXJuIHJhbmdlOwogICAgICB9OwoKICAgICAgaHRtbEZ1bmMgPSBmdW5j
        dGlvbihodG1sLCBvdXRlclRvbykgewogICAgICAgIC8vIGdldCBhIHJhbmdl
        IGZvciB0aGUgY3VycmVudCBtZXRhbW9ycGggb2JqZWN0CiAgICAgICAgdmFy
        IHJhbmdlID0gcmFuZ2VGb3IodGhpcywgb3V0ZXJUb28pOwoKICAgICAgICAv
        LyBkZWxldGUgdGhlIGNvbnRlbnRzIG9mIHRoZSByYW5nZSwgd2hpY2ggd2ls
        bCBiZSB0aGUKICAgICAgICAvLyBub2RlcyBiZXR3ZWVuIHRoZSBzdGFydGlu
        ZyBhbmQgZW5kaW5nIHBsYWNlaG9sZGVyLgogICAgICAgIHJhbmdlLmRlbGV0
        ZUNvbnRlbnRzKCk7CgogICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBkb2N1bWVu
        dCBmcmFnbWVudCBmb3IgdGhlIEhUTUwKICAgICAgICB2YXIgZnJhZ21lbnQg
        PSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7CgogICAg
        ICAgIC8vIGluc2VydCB0aGUgZnJhZ21lbnQgaW50byB0aGUgcmFuZ2UKICAg
        ICAgICByYW5nZS5pbnNlcnROb2RlKGZyYWdtZW50KTsKICAgICAgfTsKCiAg
        ICAgIC8qKgogICAgICAqIEBwdWJsaWMKICAgICAgKiAKICAgICAgKiBSZW1v
        dmUgdGhpcyBvYmplY3QgKGluY2x1ZGluZyBzdGFydGluZyBhbmQgZW5kaW5n
        CiAgICAgICogcGxhY2Vob2xkZXJzKS4KICAgICAgKgogICAgICAqIEBtZXRo
        b2QgcmVtb3ZlCiAgICAgICovCiAgICAgIHJlbW92ZUZ1bmMgPSBmdW5jdGlv
        bigpIHsKICAgICAgICAvLyBnZXQgYSByYW5nZSBmb3IgdGhlIGN1cnJlbnQg
        bWV0YW1vcnBoIG9iamVjdCBpbmNsdWRpbmcKICAgICAgICAvLyB0aGUgc3Rh
        cnRpbmcgYW5kIGVuZGluZyBwbGFjZWhvbGRlcnMuCiAgICAgICAgdmFyIHJh
        bmdlID0gcmFuZ2VGb3IodGhpcywgdHJ1ZSk7CgogICAgICAgIC8vIGRlbGV0
        ZSB0aGUgZW50aXJlIHJhbmdlLgogICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRl
        bnRzKCk7CiAgICAgIH07CgogICAgICBhcHBlbmRUb0Z1bmMgPSBmdW5jdGlv
        bihub2RlKSB7CiAgICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRl
        UmFuZ2UoKTsKICAgICAgICByYW5nZS5zZXRTdGFydChub2RlKTsKICAgICAg
        ICByYW5nZS5jb2xsYXBzZShmYWxzZSk7CiAgICAgICAgdmFyIGZyYWcgPSBy
        YW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQodGhpcy5vdXRlckhUTUwo
        KSk7CiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChmcmFnKTsKICAgICAgfTsK
        CiAgICAgIGFmdGVyRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICB2
        YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZh
        ciBhZnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKTsK
        CiAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihhZnRlcik7CiAgICAgICAg
        cmFuZ2Uuc2V0RW5kQWZ0ZXIoYWZ0ZXIpOwoKICAgICAgICB2YXIgZnJhZ21l
        bnQgPSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7CiAg
        ICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnbWVudCk7CiAgICAgIH07Cgog
        ICAgICBwcmVwZW5kRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICB2
        YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZh
        ciBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhcnQp
        OwoKICAgICAgICByYW5nZS5zZXRTdGFydEFmdGVyKHN0YXJ0KTsKICAgICAg
        ICByYW5nZS5zZXRFbmRBZnRlcihzdGFydCk7CgogICAgICAgIHZhciBmcmFn
        bWVudCA9IHJhbmdlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsK
        ICAgICAgICByYW5nZS5pbnNlcnROb2RlKGZyYWdtZW50KTsKICAgICAgfTsK
        CiAgICB9IGVsc2UgewogICAgICAvKgogICAgICAgKiBUaGlzIGNvZGUgaXMg
        bW9zdGx5IHRha2VuIGZyb20galF1ZXJ5LCB3aXRoIG9uZSBleGNlcHRpb24u
        IEluIGpRdWVyeSdzIGNhc2UsIHdlCiAgICAgICAqIGhhdmUgc29tZSBIVE1M
        IGFuZCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGNvbnZlcnQgaXQg
        aW50byBzb21lIG5vZGVzLgogICAgICAgKgogICAgICAgKiBJbiB0aGlzIGNh
        c2UsIGpRdWVyeSBuZWVkcyB0byBzY2FuIHRoZSBIVE1MIGxvb2tpbmcgZm9y
        IGFuIG9wZW5pbmcgdGFnIGFuZCB1c2UKICAgICAgICogdGhhdCBhcyB0aGUg
        a2V5IGZvciB0aGUgd3JhcCBtYXAuIEluIG91ciBjYXNlLCB3ZSBrbm93IHRo
        ZSBwYXJlbnQgbm9kZSwgYW5kCiAgICAgICAqIGNhbiB1c2UgaXRzIHR5cGUg
        YXMgdGhlIGtleSBmb3IgdGhlIHdyYXAgbWFwLgogICAgICAgKiovCiAgICAg
        IHZhciB3cmFwTWFwID0gewogICAgICAgIHNlbGVjdDogWyAxLCAiPHNlbGVj
        dCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iIF0sCiAgICAg
        ICAgZmllbGRzZXQ6IFsgMSwgIjxmaWVsZHNldD4iLCAiPC9maWVsZHNldD4i
        IF0sCiAgICAgICAgdGFibGU6IFsgMSwgIjx0YWJsZT4iLCAiPC90YWJsZT4i
        IF0sCiAgICAgICAgdGJvZHk6IFsgMiwgIjx0YWJsZT48dGJvZHk+IiwgIjwv
        dGJvZHk+PC90YWJsZT4iIF0sCiAgICAgICAgdHI6IFsgMywgIjx0YWJsZT48
        dGJvZHk+PHRyPiIsICI8L3RyPjwvdGJvZHk+PC90YWJsZT4iIF0sCiAgICAg
        ICAgY29sZ3JvdXA6IFsgMiwgIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29s
        Z3JvdXA+IiwgIjwvY29sZ3JvdXA+PC90YWJsZT4iIF0sCiAgICAgICAgbWFw
        OiBbIDEsICI8bWFwPiIsICI8L21hcD4iIF0sCiAgICAgICAgX2RlZmF1bHQ6
        IFsgMCwgIiIsICIiIF0KICAgICAgfTsKCiAgICAgIHZhciBmaW5kQ2hpbGRC
        eUlkID0gZnVuY3Rpb24oZWxlbWVudCwgaWQpIHsKICAgICAgICBpZiAoZWxl
        bWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09IGlkKSB7IHJldHVybiBlbGVt
        ZW50OyB9CgogICAgICAgIHZhciBsZW4gPSBlbGVtZW50LmNoaWxkTm9kZXMu
        bGVuZ3RoLCBpZHgsIG5vZGUsIGZvdW5kOwogICAgICAgIGZvciAoaWR4PTA7
        IGlkeDxsZW47IGlkeCsrKSB7CiAgICAgICAgICBub2RlID0gZWxlbWVudC5j
        aGlsZE5vZGVzW2lkeF07CiAgICAgICAgICBmb3VuZCA9IG5vZGUubm9kZVR5
        cGUgPT09IDEgJiYgZmluZENoaWxkQnlJZChub2RlLCBpZCk7CiAgICAgICAg
        ICBpZiAoZm91bmQpIHsgcmV0dXJuIGZvdW5kOyB9CiAgICAgICAgfQogICAg
        ICB9OwoKICAgICAgdmFyIHNldElubmVySFRNTCA9IGZ1bmN0aW9uKGVsZW1l
        bnQsIGh0bWwpIHsKICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdOwogICAgICAg
        IGlmIChtb3Zlc1doaXRlc3BhY2UpIHsKICAgICAgICAgIC8vIFJpZ2h0IG5v
        dyB3ZSBvbmx5IGNoZWNrIGZvciBzY3JpcHQgdGFncyB3aXRoIGlkcyB3aXRo
        IHRoZQogICAgICAgICAgLy8gZ29hbCBvZiB0YXJnZXRpbmcgbW9ycGhzLgog
        ICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvKFxzKykoPHNjcmlwdCBp
        ZD0nKFteJ10rKScpL2csIGZ1bmN0aW9uKG1hdGNoLCBzcGFjZXMsIHRhZywg
        aWQpIHsKICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKFtpZCwgc3BhY2VzXSk7
        CiAgICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgICAgICB9KTsKICAgICAg
        ICB9CgogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDsKCiAgICAg
        ICAgLy8gSWYgd2UgaGF2ZSB0byBkbyBhbnkgd2hpdGVzcGFjZSBhZGp1c3Rt
        ZW50cyBkbyB0aGVtIG5vdwogICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+
        IDApIHsKICAgICAgICAgIHZhciBsZW4gPSBtYXRjaGVzLmxlbmd0aCwgaWR4
        OwogICAgICAgICAgZm9yIChpZHg9MDsgaWR4PGxlbjsgaWR4KyspIHsKICAg
        ICAgICAgICAgdmFyIHNjcmlwdCA9IGZpbmRDaGlsZEJ5SWQoZWxlbWVudCwg
        bWF0Y2hlc1tpZHhdWzBdKSwKICAgICAgICAgICAgICAgIG5vZGUgPSBkb2N1
        bWVudC5jcmVhdGVUZXh0Tm9kZShtYXRjaGVzW2lkeF1bMV0pOwogICAgICAg
        ICAgICBzY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgc2Ny
        aXB0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAv
        KgogICAgICAgKiBHaXZlbiBhIHBhcmVudCBub2RlIGFuZCBzb21lIEhUTUws
        IGdlbmVyYXRlIGEgc2V0IG9mIG5vZGVzLiBSZXR1cm4gdGhlIGZpcnN0CiAg
        ICAgICAqIG5vZGUsIHdoaWNoIHdpbGwgYWxsb3cgdXMgdG8gdHJhdmVyc2Ug
        dGhlIHJlc3QgdXNpbmcgbmV4dFNpYmxpbmcuCiAgICAgICAqCiAgICAgICAq
        IFdlIG5lZWQgdG8gZG8gdGhpcyBiZWNhdXNlIGlubmVySFRNTCBpbiBJRSBk
        b2VzIG5vdCByZWFsbHkgcGFyc2UgdGhlIG5vZGVzLgogICAgICAgKi8KICAg
        ICAgdmFyIGZpcnN0Tm9kZUZvciA9IGZ1bmN0aW9uKHBhcmVudE5vZGUsIGh0
        bWwpIHsKICAgICAgICB2YXIgYXJyID0gd3JhcE1hcFtwYXJlbnROb2RlLnRh
        Z05hbWUudG9Mb3dlckNhc2UoKV0gfHwgd3JhcE1hcC5fZGVmYXVsdDsKICAg
        ICAgICB2YXIgZGVwdGggPSBhcnJbMF0sIHN0YXJ0ID0gYXJyWzFdLCBlbmQg
        PSBhcnJbMl07CgogICAgICAgIGlmIChuZWVkc1NoeSkgeyBodG1sID0gJyZz
        aHk7JytodG1sOyB9CgogICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQu
        Y3JlYXRlRWxlbWVudCgnZGl2Jyk7CgogICAgICAgIHNldElubmVySFRNTChl
        bGVtZW50LCBzdGFydCArIGh0bWwgKyBlbmQpOwoKICAgICAgICBmb3IgKHZh
        ciBpPTA7IGk8PWRlcHRoOyBpKyspIHsKICAgICAgICAgIGVsZW1lbnQgPSBl
        bGVtZW50LmZpcnN0Q2hpbGQ7CiAgICAgICAgfQoKICAgICAgICAvLyBMb29r
        IGZvciAmc2h5OyB0byByZW1vdmUgaXQuCiAgICAgICAgaWYgKG5lZWRzU2h5
        KSB7CiAgICAgICAgICB2YXIgc2h5RWxlbWVudCA9IGVsZW1lbnQ7CgogICAg
        ICAgICAgLy8gU29tZXRpbWVzIHdlIGdldCBuYW1lbGVzcyBlbGVtZW50cyB3
        aXRoIHRoZSBzaHkgaW5zaWRlCiAgICAgICAgICB3aGlsZSAoc2h5RWxlbWVu
        dC5ub2RlVHlwZSA9PT0gMSAmJiAhc2h5RWxlbWVudC5ub2RlTmFtZSkgewog
        ICAgICAgICAgICBzaHlFbGVtZW50ID0gc2h5RWxlbWVudC5maXJzdENoaWxk
        OwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgaXQn
        cyB0aGUgYWN0dWFsIHVuaWNvZGUgY2hhcmFjdGVyLgogICAgICAgICAgaWYg
        KHNoeUVsZW1lbnQubm9kZVR5cGUgPT09IDMgJiYgc2h5RWxlbWVudC5ub2Rl
        VmFsdWUuY2hhckF0KDApID09PSAiXHUwMEFEIikgewogICAgICAgICAgICBz
        aHlFbGVtZW50Lm5vZGVWYWx1ZSA9IHNoeUVsZW1lbnQubm9kZVZhbHVlLnNs
        aWNlKDEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJu
        IGVsZW1lbnQ7CiAgICAgIH07CgogICAgICAvKgogICAgICAgKiBJbiBzb21l
        IGNhc2VzLCBJbnRlcm5ldCBFeHBsb3JlciBjYW4gY3JlYXRlIGFuIGFub255
        bW91cyBub2RlIGluCiAgICAgICAqIHRoZSBoaWVyYXJjaHkgd2l0aCBubyB0
        YWdOYW1lLiBZb3UgY2FuIGNyZWF0ZSB0aGlzIHNjZW5hcmlvIHZpYToKICAg
        ICAgICoKICAgICAgICogICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l
        bnQoImRpdiIpOwogICAgICAgKiAgICAgZGl2LmlubmVySFRNTCA9ICI8dGFi
        bGU+JnNoeTxzY3JpcHQ+PC9zY3JpcHQ+PHRyPjx0ZD5oaTwvdGQ+PC90cj48
        L3RhYmxlPiI7CiAgICAgICAqICAgICBkaXYuZmlyc3RDaGlsZC5maXJzdENo
        aWxkLnRhZ05hbWUgLy89PiAiIgogICAgICAgKgogICAgICAgKiBJZiBvdXIg
        c2NyaXB0IG1hcmtlcnMgYXJlIGluc2lkZSBzdWNoIGEgbm9kZSwgd2UgbmVl
        ZCB0byBmaW5kIHRoYXQKICAgICAgICogbm9kZSBhbmQgdXNlICppdCogYXMg
        dGhlIG1hcmtlci4KICAgICAgICovCiAgICAgIHZhciByZWFsTm9kZSA9IGZ1
        bmN0aW9uKHN0YXJ0KSB7CiAgICAgICAgd2hpbGUgKHN0YXJ0LnBhcmVudE5v
        ZGUudGFnTmFtZSA9PT0gIiIpIHsKICAgICAgICAgIHN0YXJ0ID0gc3RhcnQu
        cGFyZW50Tm9kZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdGFydDsK
        ICAgICAgfTsKCiAgICAgIC8qCiAgICAgICAqIFdoZW4gYXV0b21hdGljYWxs
        eSBhZGRpbmcgYSB0Ym9keSwgSW50ZXJuZXQgRXhwbG9yZXIgaW5zZXJ0cyB0
        aGUKICAgICAgICogdGJvZHkgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBmaXJz
        dCA8dHI+LiBPdGhlciBicm93c2VycyBjcmVhdGUgaXQKICAgICAgICogYmVm
        b3JlIHRoZSBmaXJzdCBub2RlLCBubyBtYXR0ZXIgd2hhdC4KICAgICAgICoK
        ICAgICAgICogVGhpcyBtZWFucyB0aGUgdGhlIGZvbGxvd2luZyBjb2RlOgog
        ICAgICAgKgogICAgICAgKiAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxl
        bWVudCgiZGl2Iik7CiAgICAgICAqICAgICBkaXYuaW5uZXJIVE1MID0gIjx0
        YWJsZT48c2NyaXB0IGlkPSdmaXJzdCc+PC9zY3JpcHQ+PHRyPjx0ZD5oaTwv
        dGQ+PC90cj48c2NyaXB0IGlkPSdsYXN0Jz48L3NjcmlwdD48L3RhYmxlPgog
        ICAgICAgKgogICAgICAgKiBHZW5lcmF0ZXMgdGhlIGZvbGxvd2luZyBET00g
        aW4gSUU6CiAgICAgICAqCiAgICAgICAqICAgICArIGRpdgogICAgICAgKiAg
        ICAgICArIHRhYmxlCiAgICAgICAqICAgICAgICAgLSBzY3JpcHQgaWQ9J2Zp
        cnN0JwogICAgICAgKiAgICAgICAgICsgdGJvZHkKICAgICAgICogICAgICAg
        ICAgICsgdHIKICAgICAgICogICAgICAgICAgICAgKyB0ZAogICAgICAgKiAg
        ICAgICAgICAgICAgIC0gImhpIgogICAgICAgKiAgICAgICAgICAgLSBzY3Jp
        cHQgaWQ9J2xhc3QnCiAgICAgICAqCiAgICAgICAqIFdoaWNoIG1lYW5zIHRo
        YXQgdGhlIHR3byBzY3JpcHQgdGFncywgZXZlbiB0aG91Z2ggdGhleSB3ZXJl
        CiAgICAgICAqIGluc2VydGVkIGF0IHRoZSBzYW1lIHBvaW50IGluIHRoZSBo
        aWVyYXJjaHkgaW4gdGhlIG9yaWdpbmFsCiAgICAgICAqIEhUTUwsIG5vdyBo
        YXZlIGRpZmZlcmVudCBwYXJlbnRzLgogICAgICAgKgogICAgICAgKiBUaGlz
        IGNvZGUgcmVwYXJlbnRzIHRoZSBmaXJzdCBzY3JpcHQgdGFnIGJ5IG1ha2lu
        ZyBpdCB0aGUgdGJvZHkncwogICAgICAgKiBmaXJzdCBjaGlsZC4KICAgICAg
        ICoKICAgICAgICovCiAgICAgIHZhciBmaXhQYXJlbnRhZ2UgPSBmdW5jdGlv
        bihzdGFydCwgZW5kKSB7CiAgICAgICAgaWYgKHN0YXJ0LnBhcmVudE5vZGUg
        IT09IGVuZC5wYXJlbnROb2RlKSB7CiAgICAgICAgICBlbmQucGFyZW50Tm9k
        ZS5pbnNlcnRCZWZvcmUoc3RhcnQsIGVuZC5wYXJlbnROb2RlLmZpcnN0Q2hp
        bGQpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGh0bWxGdW5jID0gZnVu
        Y3Rpb24oaHRtbCwgb3V0ZXJUb28pIHsKICAgICAgICAvLyBnZXQgdGhlIHJl
        YWwgc3RhcnRpbmcgbm9kZS4gc2VlIHJlYWxOb2RlIGZvciBkZXRhaWxzLgog
        ICAgICAgIHZhciBzdGFydCA9IHJlYWxOb2RlKGRvY3VtZW50LmdldEVsZW1l
        bnRCeUlkKHRoaXMuc3RhcnQpKTsKICAgICAgICB2YXIgZW5kID0gZG9jdW1l
        bnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpOwogICAgICAgIHZhciBwYXJl
        bnROb2RlID0gZW5kLnBhcmVudE5vZGU7CiAgICAgICAgdmFyIG5vZGUsIG5l
        eHRTaWJsaW5nLCBsYXN0OwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0
        aGUgc3RhcnQgYW5kIGVuZCBub2RlcyBzaGFyZSB0aGUgc2FtZQogICAgICAg
        IC8vIHBhcmVudC4gSWYgbm90LCBmaXggaXQuCiAgICAgICAgZml4UGFyZW50
        YWdlKHN0YXJ0LCBlbmQpOwoKICAgICAgICAvLyByZW1vdmUgYWxsIG9mIHRo
        ZSBub2RlcyBhZnRlciB0aGUgc3RhcnRpbmcgcGxhY2Vob2xkZXIgYW5kCiAg
        ICAgICAgLy8gYmVmb3JlIHRoZSBlbmRpbmcgcGxhY2Vob2xkZXIuCiAgICAg
        ICAgbm9kZSA9IHN0YXJ0Lm5leHRTaWJsaW5nOwogICAgICAgIHdoaWxlIChu
        b2RlKSB7CiAgICAgICAgICBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxp
        bmc7CiAgICAgICAgICBsYXN0ID0gbm9kZSA9PT0gZW5kOwoKICAgICAgICAg
        IC8vIGlmIHRoaXMgaXMgdGhlIGxhc3Qgbm9kZSwgYW5kIHdlIHdhbnQgdG8g
        cmVtb3ZlIGl0IGFzIHdlbGwsCiAgICAgICAgICAvLyBzZXQgdGhlIGBlbmRg
        IG5vZGUgdG8gdGhlIG5leHQgc2libGluZy4gVGhpcyBpcyBiZWNhdXNlCiAg
        ICAgICAgICAvLyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGZ1bmN0aW9uLCB3ZSBp
        bnNlcnQgdGhlIG5ldyBub2RlcwogICAgICAgICAgLy8gYmVmb3JlIHRoZSBl
        bmQgKG5vdGUgdGhhdCBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbCkgaXMKICAg
        ICAgICAgIC8vIHRoZSBzYW1lIGFzIGFwcGVuZENoaWxkKG5vZGUpKS4KICAg
        ICAgICAgIC8vCiAgICAgICAgICAvLyBpZiB3ZSBkbyBub3Qgd2FudCB0byBy
        ZW1vdmUgaXQsIGp1c3QgYnJlYWsuCiAgICAgICAgICBpZiAobGFzdCkgewog
        ICAgICAgICAgICBpZiAob3V0ZXJUb28pIHsgZW5kID0gbm9kZS5uZXh0U2li
        bGluZzsgfSBlbHNlIHsgYnJlYWs7IH0KICAgICAgICAgIH0KCiAgICAgICAg
        ICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CgogICAgICAg
        ICAgLy8gaWYgdGhpcyBpcyB0aGUgbGFzdCBub2RlIGFuZCB3ZSBkaWRuJ3Qg
        YnJlYWsgYmVmb3JlCiAgICAgICAgICAvLyAoYmVjYXVzZSB3ZSB3YW50ZWQg
        dG8gcmVtb3ZlIHRoZSBvdXRlciBub2RlcyksIGJyZWFrCiAgICAgICAgICAv
        LyBub3cuCiAgICAgICAgICBpZiAobGFzdCkgeyBicmVhazsgfQoKICAgICAg
        ICAgIG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CgogICAgICAgIC8v
        IGdldCB0aGUgZmlyc3Qgbm9kZSBmb3IgdGhlIEhUTUwgc3RyaW5nLCBldmVu
        IGluIGNhc2VzIGxpa2UKICAgICAgICAvLyB0YWJsZXMgYW5kIGxpc3RzIHdo
        ZXJlIGEgc2ltcGxlIGlubmVySFRNTCBvbiBhIGRpdiB3b3VsZAogICAgICAg
        IC8vIHN3YWxsb3cgc29tZSBvZiB0aGUgY29udGVudC4KICAgICAgICBub2Rl
        ID0gZmlyc3ROb2RlRm9yKHN0YXJ0LnBhcmVudE5vZGUsIGh0bWwpOwoKICAg
        ICAgICAvLyBjb3B5IHRoZSBub2RlcyBmb3IgdGhlIEhUTUwgYmV0d2VlbiB0
        aGUgc3RhcnRpbmcgYW5kIGVuZGluZwogICAgICAgIC8vIHBsYWNlaG9sZGVy
        LgogICAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAgICBuZXh0U2libGlu
        ZyA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICBwYXJlbnROb2RlLmlu
        c2VydEJlZm9yZShub2RlLCBlbmQpOwogICAgICAgICAgbm9kZSA9IG5leHRT
        aWJsaW5nOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIHJlbW92ZSB0
        aGUgbm9kZXMgaW4gdGhlIERPTSByZXByZXNlbnRpbmcgdGhpcyBtZXRhbW9y
        cGguCiAgICAgIC8vCiAgICAgIC8vIHRoaXMgaW5jbHVkZXMgdGhlIHN0YXJ0
        aW5nIGFuZCBlbmRpbmcgcGxhY2Vob2xkZXJzLgogICAgICByZW1vdmVGdW5j
        ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gcmVhbE5vZGUo
        ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGFydCkpOwogICAgICAg
        IHZhciBlbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVuZCk7
        CgogICAgICAgIHRoaXMuaHRtbCgnJyk7CiAgICAgICAgc3RhcnQucGFyZW50
        Tm9kZS5yZW1vdmVDaGlsZChzdGFydCk7CiAgICAgICAgZW5kLnBhcmVudE5v
        ZGUucmVtb3ZlQ2hpbGQoZW5kKTsKICAgICAgfTsKCiAgICAgIGFwcGVuZFRv
        RnVuYyA9IGZ1bmN0aW9uKHBhcmVudE5vZGUpIHsKICAgICAgICB2YXIgbm9k
        ZSA9IGZpcnN0Tm9kZUZvcihwYXJlbnROb2RlLCB0aGlzLm91dGVySFRNTCgp
        KTsKICAgICAgICB2YXIgbmV4dFNpYmxpbmc7CgogICAgICAgIHdoaWxlIChu
        b2RlKSB7CiAgICAgICAgICBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxp
        bmc7CiAgICAgICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKG5vZGUpOwog
        ICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nOwogICAgICAgIH0KICAgICAg
        fTsKCiAgICAgIGFmdGVyRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAg
        ICAvLyBnZXQgdGhlIHJlYWwgc3RhcnRpbmcgbm9kZS4gc2VlIHJlYWxOb2Rl
        IGZvciBkZXRhaWxzLgogICAgICAgIHZhciBlbmQgPSBkb2N1bWVudC5nZXRF
        bGVtZW50QnlJZCh0aGlzLmVuZCk7CiAgICAgICAgdmFyIGluc2VydEJlZm9y
        ZSA9IGVuZC5uZXh0U2libGluZzsKICAgICAgICB2YXIgcGFyZW50Tm9kZSA9
        IGVuZC5wYXJlbnROb2RlOwogICAgICAgIHZhciBuZXh0U2libGluZzsKICAg
        ICAgICB2YXIgbm9kZTsKCiAgICAgICAgLy8gZ2V0IHRoZSBmaXJzdCBub2Rl
        IGZvciB0aGUgSFRNTCBzdHJpbmcsIGV2ZW4gaW4gY2FzZXMgbGlrZQogICAg
        ICAgIC8vIHRhYmxlcyBhbmQgbGlzdHMgd2hlcmUgYSBzaW1wbGUgaW5uZXJI
        VE1MIG9uIGEgZGl2IHdvdWxkCiAgICAgICAgLy8gc3dhbGxvdyBzb21lIG9m
        IHRoZSBjb250ZW50LgogICAgICAgIG5vZGUgPSBmaXJzdE5vZGVGb3IocGFy
        ZW50Tm9kZSwgaHRtbCk7CgogICAgICAgIC8vIGNvcHkgdGhlIG5vZGVzIGZv
        ciB0aGUgSFRNTCBiZXR3ZWVuIHRoZSBzdGFydGluZyBhbmQgZW5kaW5nCiAg
        ICAgICAgLy8gcGxhY2Vob2xkZXIuCiAgICAgICAgd2hpbGUgKG5vZGUpIHsK
        ICAgICAgICAgIG5leHRTaWJsaW5nID0gbm9kZS5uZXh0U2libGluZzsKICAg
        ICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGluc2VydEJl
        Zm9yZSk7CiAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmc7CiAgICAgICAg
        fQogICAgICB9OwoKICAgICAgcHJlcGVuZEZ1bmMgPSBmdW5jdGlvbihodG1s
        KSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5
        SWQodGhpcy5zdGFydCk7CiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBzdGFy
        dC5wYXJlbnROb2RlOwogICAgICAgIHZhciBuZXh0U2libGluZzsKICAgICAg
        ICB2YXIgbm9kZTsKCiAgICAgICAgbm9kZSA9IGZpcnN0Tm9kZUZvcihwYXJl
        bnROb2RlLCBodG1sKTsKICAgICAgICB2YXIgaW5zZXJ0QmVmb3JlID0gc3Rh
        cnQubmV4dFNpYmxpbmc7CgogICAgICAgIHdoaWxlIChub2RlKSB7CiAgICAg
        ICAgICBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAg
        ICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBpbnNlcnRCZWZvcmUp
        OwogICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nOwogICAgICAgIH0KICAg
        ICAgfTsKICAgIH0KCiAgICBNZXRhbW9ycGgucHJvdG90eXBlLmh0bWwgPSBm
        dW5jdGlvbihodG1sKSB7CiAgICAgIHRoaXMuY2hlY2tSZW1vdmVkKCk7CiAg
        ICAgIGlmIChodG1sID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHRoaXMuaW5u
        ZXJIVE1MOyB9CgogICAgICBodG1sRnVuYy5jYWxsKHRoaXMsIGh0bWwpOwoK
        ICAgICAgdGhpcy5pbm5lckhUTUwgPSBodG1sOwogICAgfTsKCiAgICBNZXRh
        bW9ycGgucHJvdG90eXBlLnJlcGxhY2VXaXRoID0gZnVuY3Rpb24oaHRtbCkg
        ewogICAgICB0aGlzLmNoZWNrUmVtb3ZlZCgpOwogICAgICBodG1sRnVuYy5j
        YWxsKHRoaXMsIGh0bWwsIHRydWUpOwogICAgfTsKCiAgICBNZXRhbW9ycGgu
        cHJvdG90eXBlLnJlbW92ZSA9IHJlbW92ZUZ1bmM7CiAgICBNZXRhbW9ycGgu
        cHJvdG90eXBlLm91dGVySFRNTCA9IG91dGVySFRNTEZ1bmM7CiAgICBNZXRh
        bW9ycGgucHJvdG90eXBlLmFwcGVuZFRvID0gYXBwZW5kVG9GdW5jOwogICAg
        TWV0YW1vcnBoLnByb3RvdHlwZS5hZnRlciA9IGFmdGVyRnVuYzsKICAgIE1l
        dGFtb3JwaC5wcm90b3R5cGUucHJlcGVuZCA9IHByZXBlbmRGdW5jOwogICAg
        TWV0YW1vcnBoLnByb3RvdHlwZS5zdGFydFRhZyA9IHN0YXJ0VGFnRnVuYzsK
        ICAgIE1ldGFtb3JwaC5wcm90b3R5cGUuZW5kVGFnID0gZW5kVGFnRnVuYzsK
        CiAgICBNZXRhbW9ycGgucHJvdG90eXBlLmlzUmVtb3ZlZCA9IGZ1bmN0aW9u
        KCkgewogICAgICB2YXIgYmVmb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5
        SWQodGhpcy5zdGFydCk7CiAgICAgIHZhciBhZnRlciA9IGRvY3VtZW50Lmdl
        dEVsZW1lbnRCeUlkKHRoaXMuZW5kKTsKCiAgICAgIHJldHVybiAhYmVmb3Jl
        IHx8ICFhZnRlcjsKICAgIH07CgogICAgTWV0YW1vcnBoLnByb3RvdHlwZS5j
        aGVja1JlbW92ZWQgPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuaXNS
        ZW1vdmVkKCkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBw
        ZXJmb3JtIG9wZXJhdGlvbnMgb24gYSBNZXRhbW9ycGggdGhhdCBpcyBub3Qg
        aW4gdGhlIERPTS4iKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gTWV0
        YW1vcnBoOwogIH0pOwoKfSkoKTsKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzLWNvbXBpbGVy
        CiovCgovLyBFbGltaW5hdGUgZGVwZW5kZW5jeSBvbiBhbnkgRW1iZXIgdG8g
        c2ltcGxpZnkgcHJlY29tcGlsYXRpb24gd29ya2Zsb3cKdmFyIG9iamVjdENy
        ZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24ocGFyZW50KSB7CiAg
        ZnVuY3Rpb24gRigpIHt9CiAgRi5wcm90b3R5cGUgPSBwYXJlbnQ7CiAgcmV0
        dXJuIG5ldyBGKCk7Cn07Cgp2YXIgSGFuZGxlYmFycyA9IHRoaXMuSGFuZGxl
        YmFycyB8fCAoRW1iZXIuaW1wb3J0cyAmJiBFbWJlci5pbXBvcnRzLkhhbmRs
        ZWJhcnMpOwppZiAoIUhhbmRsZWJhcnMgJiYgdHlwZW9mIHJlcXVpcmUgPT09
        ICdmdW5jdGlvbicpIHsKICBIYW5kbGViYXJzID0gcmVxdWlyZSgnaGFuZGxl
        YmFycycpOwp9CgpFbWJlci5hc3NlcnQoIkVtYmVyIEhhbmRsZWJhcnMgcmVx
        dWlyZXMgSGFuZGxlYmFycyB2ZXJzaW9uIDEuMC4wLiBJbmNsdWRlIGEgU0NS
        SVBUIHRhZyBpbiB0aGUgSFRNTCBIRUFEIGxpbmtpbmcgdG8gdGhlIEhhbmRs
        ZWJhcnMgZmlsZSBiZWZvcmUgeW91IGxpbmsgdG8gRW1iZXIuIiwgSGFuZGxl
        YmFycyk7CkVtYmVyLmFzc2VydCgiRW1iZXIgSGFuZGxlYmFycyByZXF1aXJl
        cyBIYW5kbGViYXJzIHZlcnNpb24gMS4wLjAsIENPTVBJTEVSX1JFVklTSU9O
        IGV4cGVjdGVkOiA0LCBnb3Q6ICIgKyAgSGFuZGxlYmFycy5DT01QSUxFUl9S
        RVZJU0lPTiArICIgLSBQbGVhc2Ugbm90ZTogQnVpbGRzIG9mIG1hc3RlciBt
        YXkgaGF2ZSBvdGhlciBDT01QSUxFUl9SRVZJU0lPTiB2YWx1ZXMuIiwgSGFu
        ZGxlYmFycy5DT01QSUxFUl9SRVZJU0lPTiA9PT0gNCk7CgovKioKICBQcmVw
        YXJlcyB0aGUgSGFuZGxlYmFycyB0ZW1wbGF0aW5nIGxpYnJhcnkgZm9yIHVz
        ZSBpbnNpZGUgRW1iZXIncyB2aWV3CiAgc3lzdGVtLgoKICBUaGUgYEVtYmVy
        LkhhbmRsZWJhcnNgIG9iamVjdCBpcyB0aGUgc3RhbmRhcmQgSGFuZGxlYmFy
        cyBsaWJyYXJ5LCBleHRlbmRlZCB0bwogIHVzZSBFbWJlcidzIGBnZXQoKWAg
        bWV0aG9kIGluc3RlYWQgb2YgZGlyZWN0IHByb3BlcnR5IGFjY2Vzcywgd2hp
        Y2ggYWxsb3dzCiAgY29tcHV0ZWQgcHJvcGVydGllcyB0byBiZSB1c2VkIGlu
        c2lkZSB0ZW1wbGF0ZXMuCgogIFRvIGNyZWF0ZSBhbiBgRW1iZXIuSGFuZGxl
        YmFyc2AgdGVtcGxhdGUsIGNhbGwgYEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgpYC4KICBUaGlzIHdpbGwgcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBjYW4g
        YmUgdXNlZCBieSBgRW1iZXIuVmlld2AgZm9yIHJlbmRlcmluZy4KCiAgQGNs
        YXNzIEhhbmRsZWJhcnMKICBAbmFtZXNwYWNlIEVtYmVyCiovCkVtYmVyLkhh
        bmRsZWJhcnMgPSBvYmplY3RDcmVhdGUoSGFuZGxlYmFycyk7CgovKioKICBS
        ZWdpc3RlciBhIGJvdW5kIGhlbHBlciBvciBjdXN0b20gdmlldyBoZWxwZXIu
        CgogICMjIFNpbXBsZSBib3VuZCBoZWxwZXIgZXhhbXBsZQoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXIoJ2NhcGl0YWxpemUn
        LCBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJD
        YXNlKCk7CiAgfSk7CiAgYGBgCgogIFRoZSBhYm92ZSBib3VuZCBoZWxwZXIg
        Y2FuIGJlIHVzZWQgaW5zaWRlIG9mIHRlbXBsYXRlcyBhcyBmb2xsb3dzOgoK
        ICBgYGBoYW5kbGViYXJzCiAge3tjYXBpdGFsaXplIG5hbWV9fQogIGBgYAoK
        ICBJbiB0aGlzIGNhc2UsIHdoZW4gdGhlIGBuYW1lYCBwcm9wZXJ0eSBvZiB0
        aGUgdGVtcGxhdGUncyBjb250ZXh0IGNoYW5nZXMsCiAgdGhlIHJlbmRlcmVk
        IHZhbHVlIG9mIHRoZSBoZWxwZXIgd2lsbCB1cGRhdGUgdG8gcmVmbGVjdCB0
        aGlzIGNoYW5nZS4KCiAgRm9yIG1vcmUgZXhhbXBsZXMgb2YgYm91bmQgaGVs
        cGVycywgc2VlIGRvY3VtZW50YXRpb24gZm9yCiAgYEVtYmVyLkhhbmRsZWJh
        cnMucmVnaXN0ZXJCb3VuZEhlbHBlcmAuCgogICMjIEN1c3RvbSB2aWV3IGhl
        bHBlciBleGFtcGxlCgogIEFzc3VtaW5nIGEgdmlldyBzdWJjbGFzcyBuYW1l
        ZCBgQXBwLkNhbGVuZGFyVmlld2Agd2VyZSBkZWZpbmVkLCBhIGhlbHBlcgog
        IGZvciByZW5kZXJpbmcgaW5zdGFuY2VzIG9mIHRoaXMgdmlldyBjb3VsZCBi
        ZSByZWdpc3RlcmVkIGFzIGZvbGxvd3M6CgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcignY2FsZW5kYXInLCBBcHAuQ2FsZW5k
        YXJWaWV3KToKICBgYGAKCiAgVGhlIGFib3ZlIGJvdW5kIGhlbHBlciBjYW4g
        YmUgdXNlZCBpbnNpZGUgb2YgdGVtcGxhdGVzIGFzIGZvbGxvd3M6CgogIGBg
        YGhhbmRsZWJhcnMKICB7e2NhbGVuZGFyfX0KICBgYGAKCiAgV2hpY2ggaXMg
        ZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG86CgogIGBgYGhhbmRsZWJhcnMK
        ICB7e3ZpZXcgQXBwLkNhbGVuZGFyVmlld319CiAgYGBgCgogIE9wdGlvbnMg
        aW4gdGhlIGhlbHBlciB3aWxsIGJlIHBhc3NlZCB0byB0aGUgdmlldyBpbiBl
        eGFjdGx5IHRoZSBzYW1lCiAgbWFubmVyIGFzIHdpdGggdGhlIGB2aWV3YCBo
        ZWxwZXIuCgogIEBtZXRob2QgaGVscGVyCiAgQGZvciBFbWJlci5IYW5kbGVi
        YXJzCiAgQHBhcmFtIHtTdHJpbmd9IG5hbWUKICBAcGFyYW0ge0Z1bmN0aW9u
        fEVtYmVyLlZpZXd9IGZ1bmN0aW9uIG9yIHZpZXcgY2xhc3MgY29uc3RydWN0
        b3IKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5cyoKKi8KRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewog
        IEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIHJlZ2lzdGVyIGEgY29tcG9u
        ZW50IG5hbWVkICciICsgbmFtZSArICInLCBidXQgY29tcG9uZW50IG5hbWVz
        IG11c3QgaW5jbHVkZSBhICctJyIsICFFbWJlci5Db21wb25lbnQuZGV0ZWN0
        KHZhbHVlKSB8fCBuYW1lLm1hdGNoKC8tLykpOwoKICBpZiAoRW1iZXIuVmll
        dy5kZXRlY3QodmFsdWUpKSB7CiAgICBFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVySGVscGVyKG5hbWUsIEVtYmVyLkhhbmRsZWJhcnMubWFrZVZpZXdIZWxw
        ZXIodmFsdWUpKTsKICB9IGVsc2UgewogICAgRW1iZXIuSGFuZGxlYmFycy5y
        ZWdpc3RlckJvdW5kSGVscGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAg
        fQp9OwoKLyoqCiAgQHByaXZhdGUKCiAgUmV0dXJucyBhIGhlbHBlciBmdW5j
        dGlvbiB0aGF0IHJlbmRlcnMgdGhlIHByb3ZpZGVkIFZpZXdDbGFzcy4KCiAg
        VXNlZCBpbnRlcm5hbGx5IGJ5IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyIGFu
        ZCBvdGhlciBtZXRob2RzCiAgaW52b2x2aW5nIGhlbHBlci9jb21wb25lbnQg
        cmVnaXN0cmF0aW9uLgoKICBAbWV0aG9kIGhlbHBlcgogIEBmb3IgRW1iZXIu
        SGFuZGxlYmFycwogIEBwYXJhbSB7RnVuY3Rpb259IFZpZXdDbGFzcyB2aWV3
        IGNsYXNzIGNvbnN0cnVjdG9yCiovCkVtYmVyLkhhbmRsZWJhcnMubWFrZVZp
        ZXdIZWxwZXIgPSBmdW5jdGlvbihWaWV3Q2xhc3MpIHsKICByZXR1cm4gZnVu
        Y3Rpb24ob3B0aW9ucykgewogICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2FuIG9u
        bHkgcGFzcyBhdHRyaWJ1dGVzIChzdWNoIGFzIG5hbWU9dmFsdWUpIG5vdCBi
        YXJlIHZhbHVlcyB0byBhIGhlbHBlciBmb3IgYSBWaWV3IiwgYXJndW1lbnRz
        Lmxlbmd0aCA8IDIpOwogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVs
        cGVycy52aWV3LmNhbGwodGhpcywgVmlld0NsYXNzLCBvcHRpb25zKTsKICB9
        Owp9OwoKLyoqCkBjbGFzcyBoZWxwZXJzCkBuYW1lc3BhY2UgRW1iZXIuSGFu
        ZGxlYmFycwoqLwpFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMgPSBvYmplY3RD
        cmVhdGUoSGFuZGxlYmFycy5oZWxwZXJzKTsKCi8qKgogIE92ZXJyaWRlIHRo
        ZSB0aGUgb3Bjb2RlIGNvbXBpbGVyIGFuZCBKYXZhU2NyaXB0IGNvbXBpbGVy
        IGZvciBIYW5kbGViYXJzLgoKICBAY2xhc3MgQ29tcGlsZXIKICBAbmFtZXNw
        YWNlIEVtYmVyLkhhbmRsZWJhcnMKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3Rv
        cgoqLwpFbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyID0gZnVuY3Rpb24oKSB7
        fTsKCi8vIEhhbmRsZWJhcnMuQ29tcGlsZXIgZG9lc24ndCBleGlzdCBpbiBy
        dW50aW1lLW9ubHkKaWYgKEhhbmRsZWJhcnMuQ29tcGlsZXIpIHsKICBFbWJl
        ci5IYW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZSA9IG9iamVjdENyZWF0
        ZShIYW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZSk7Cn0KCkVtYmVyLkhh
        bmRsZWJhcnMuQ29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGVyID0gRW1iZXIu
        SGFuZGxlYmFycy5Db21waWxlcjsKCi8qKgogIEBjbGFzcyBKYXZhU2NyaXB0
        Q29tcGlsZXIKICBAbmFtZXNwYWNlIEVtYmVyLkhhbmRsZWJhcnMKICBAcHJp
        dmF0ZQogIEBjb25zdHJ1Y3RvcgoqLwpFbWJlci5IYW5kbGViYXJzLkphdmFT
        Y3JpcHRDb21waWxlciA9IGZ1bmN0aW9uKCkge307CgovLyBIYW5kbGViYXJz
        LkphdmFTY3JpcHRDb21waWxlciBkb2Vzbid0IGV4aXN0IGluIHJ1bnRpbWUt
        b25seQppZiAoSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIpIHsKICBF
        bWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUg
        PSBvYmplY3RDcmVhdGUoSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIu
        cHJvdG90eXBlKTsKICBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21w
        aWxlci5wcm90b3R5cGUuY29tcGlsZXIgPSBFbWJlci5IYW5kbGViYXJzLkph
        dmFTY3JpcHRDb21waWxlcjsKfQoKCkVtYmVyLkhhbmRsZWJhcnMuSmF2YVNj
        cmlwdENvbXBpbGVyLnByb3RvdHlwZS5uYW1lc3BhY2UgPSAiRW1iZXIuSGFu
        ZGxlYmFycyI7CgpFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxl
        ci5wcm90b3R5cGUuaW5pdGlhbGl6ZUJ1ZmZlciA9IGZ1bmN0aW9uKCkgewog
        IHJldHVybiAiJyciOwp9OwoKLyoqCiAgQHByaXZhdGUKCiAgT3ZlcnJpZGUg
        dGhlIGRlZmF1bHQgYnVmZmVyIGZvciBFbWJlciBIYW5kbGViYXJzLiBCeSBk
        ZWZhdWx0LCBIYW5kbGViYXJzCiAgY3JlYXRlcyBhbiBlbXB0eSBTdHJpbmcg
        YXQgdGhlIGJlZ2lubmluZyBvZiBlYWNoIGludm9jYXRpb24gYW5kIGFwcGVu
        ZHMgdG8KICBpdC4gRW1iZXIncyBIYW5kbGViYXJzIG92ZXJyaWRlcyB0aGlz
        IHRvIGFwcGVuZCB0byBhIHNpbmdsZSBzaGFyZWQgYnVmZmVyLgoKICBAbWV0
        aG9kIGFwcGVuZFRvQnVmZmVyCiAgQHBhcmFtIHN0cmluZyB7U3RyaW5nfQoq
        LwpFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5
        cGUuYXBwZW5kVG9CdWZmZXIgPSBmdW5jdGlvbihzdHJpbmcpIHsKICByZXR1
        cm4gImRhdGEuYnVmZmVyLnB1c2goIitzdHJpbmcrIik7IjsKfTsKCi8vIEhh
        Y2tzIGFoZWFkOgovLyBIYW5kbGViYXJzIHByZXNlbnRseSBoYXMgYSBidWcg
        d2hlcmUgdGhlIGBibG9ja0hlbHBlck1pc3NpbmdgIGhvb2sKLy8gZG9lc24n
        dCBnZXQgcGFzc2VkIHRoZSBuYW1lIG9mIHRoZSBtaXNzaW5nIGhlbHBlciBu
        YW1lLCBidXQgcmF0aGVyCi8vIGdldHMgcGFzc2VkIHRoZSB2YWx1ZSBvZiB0
        aGF0IG1pc3NpbmcgaGVscGVyIGV2YWx1YXRlZCBvbiB0aGUgY3VycmVudAov
        LyBjb250ZXh0LCB3aGljaCBpcyBtb3N0IGxpa2VseSBgdW5kZWZpbmVkYCBh
        bmQgdG90YWxseSB1c2VsZXNzLgovLwovLyBTbyB3ZSBhbHRlciB0aGUgY29t
        cGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24gdG8gcGFzcyB0aGUgbmFtZSBvZiB0
        aGUgaGVscGVyCi8vIGluc3RlYWQsIGFzIGV4cGVjdGVkLgovLwovLyBUaGlz
        IGNhbiBnbyBhd2F5IG9uY2UgdGhlIGZvbGxvd2luZyBpcyBjbG9zZWQ6Ci8v
        IGh0dHBzOi8vZ2l0aHViLmNvbS93eWNhdHMvaGFuZGxlYmFycy5qcy9pc3N1
        ZXMvNjE3Cgp2YXIgRE9UX0xPT0tVUF9SRUdFWCA9IC9oZWxwZXJzXC4oLio/
        KVwpLywKICAgIEJSQUNLRVRfU1RSSU5HX0xPT0tVUF9SRUdFWCA9IC9oZWxw
        ZXJzXFsnKC4qPyknLywKICAgIElOVk9DQVRJT05fU1BMSVRUSU5HX1JFR0VY
        ID0gLyguKmJsb2NrSGVscGVyTWlzc2luZ1wuY2FsbFwoLiopKHN0YWNrWzAt
        OV0rKSgsLiopLzsKCkVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBp
        bGVyLnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9u
        ID0gZnVuY3Rpb24oc291cmNlKSB7CiAgdmFyIGhlbHBlckludm9jYXRpb24g
        PSBzb3VyY2Vbc291cmNlLmxlbmd0aCAtIDFdLAogICAgICBoZWxwZXJOYW1l
        ID0gKERPVF9MT09LVVBfUkVHRVguZXhlYyhoZWxwZXJJbnZvY2F0aW9uKSB8
        fCBCUkFDS0VUX1NUUklOR19MT09LVVBfUkVHRVguZXhlYyhoZWxwZXJJbnZv
        Y2F0aW9uKSlbMV0sCiAgICAgIG1hdGNoZXMgPSBJTlZPQ0FUSU9OX1NQTElU
        VElOR19SRUdFWC5leGVjKGhlbHBlckludm9jYXRpb24pOwoKICBzb3VyY2Vb
        c291cmNlLmxlbmd0aCAtIDFdID0gbWF0Y2hlc1sxXSArICInIiArIGhlbHBl
        ck5hbWUgKyAiJyIgKyBtYXRjaGVzWzNdOwp9CnZhciBzdHJpbmdpZnlCbG9j
        a0hlbHBlck1pc3NpbmcgPSBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRD
        b21waWxlci5zdHJpbmdpZnlMYXN0QmxvY2tIZWxwZXJNaXNzaW5nSW52b2Nh
        dGlvbjsKCnZhciBvcmlnaW5hbEJsb2NrVmFsdWUgPSBFbWJlci5IYW5kbGVi
        YXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUuYmxvY2tWYWx1ZTsK
        RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBl
        LmJsb2NrVmFsdWUgPSBmdW5jdGlvbigpIHsKICBvcmlnaW5hbEJsb2NrVmFs
        dWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICBzdHJpbmdpZnlCbG9ja0hl
        bHBlck1pc3NpbmcodGhpcy5zb3VyY2UpOwp9OwoKdmFyIG9yaWdpbmFsQW1i
        aWd1b3VzQmxvY2tWYWx1ZSA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyLnByb3RvdHlwZS5hbWJpZ3VvdXNCbG9ja1ZhbHVlOwpFbWJl
        ci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUuYW1i
        aWd1b3VzQmxvY2tWYWx1ZSA9IGZ1bmN0aW9uKCkgewogIG9yaWdpbmFsQW1i
        aWd1b3VzQmxvY2tWYWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIHN0
        cmluZ2lmeUJsb2NrSGVscGVyTWlzc2luZyh0aGlzLnNvdXJjZSk7Cn07Cgp2
        YXIgcHJlZml4ID0gImVtYmVyIiArICgrbmV3IERhdGUoKSksIGluY3IgPSAx
        OwoKLyoqCiAgQHByaXZhdGUKCiAgUmV3cml0ZSBzaW1wbGUgbXVzdGFjaGVz
        IGZyb20gYHt7Zm9vfX1gIHRvIGB7e2JpbmQgImZvbyJ9fWAuIFRoaXMgbWVh
        bnMgdGhhdAogIGFsbCBzaW1wbGUgbXVzdGFjaGVzIGluIEVtYmVyJ3MgSGFu
        ZGxlYmFycyB3aWxsIGFsc28gc2V0IHVwIGFuIG9ic2VydmVyIHRvCiAga2Vl
        cCB0aGUgRE9NIHVwIHRvIGRhdGUgd2hlbiB0aGUgdW5kZXJseWluZyBwcm9w
        ZXJ0eSBjaGFuZ2VzLgoKICBAbWV0aG9kIG11c3RhY2hlCiAgQGZvciBFbWJl
        ci5IYW5kbGViYXJzLkNvbXBpbGVyCiAgQHBhcmFtIG11c3RhY2hlCiovCkVt
        YmVyLkhhbmRsZWJhcnMuQ29tcGlsZXIucHJvdG90eXBlLm11c3RhY2hlID0g
        ZnVuY3Rpb24obXVzdGFjaGUpIHsKICBpZiAobXVzdGFjaGUuaXNIZWxwZXIg
        JiYgbXVzdGFjaGUuaWQuc3RyaW5nID09PSAnY29udHJvbCcpIHsKICAgIG11
        c3RhY2hlLmhhc2ggPSBtdXN0YWNoZS5oYXNoIHx8IG5ldyBIYW5kbGViYXJz
        LkFTVC5IYXNoTm9kZShbXSk7CiAgICBtdXN0YWNoZS5oYXNoLnBhaXJzLnB1
        c2goWyJjb250cm9sSUQiLCBuZXcgSGFuZGxlYmFycy5BU1QuU3RyaW5nTm9k
        ZShwcmVmaXggKyBpbmNyKyspXSk7CiAgfSBlbHNlIGlmIChtdXN0YWNoZS5w
        YXJhbXMubGVuZ3RoIHx8IG11c3RhY2hlLmhhc2gpIHsKICAgIC8vIG5vIGNo
        YW5nZXMgcmVxdWlyZWQKICB9IGVsc2UgewogICAgdmFyIGlkID0gbmV3IEhh
        bmRsZWJhcnMuQVNULklkTm9kZShbeyBwYXJ0OiAnX3RyaWFnZU11c3RhY2hl
        JyB9XSk7CgogICAgLy8gVXBkYXRlIHRoZSBtdXN0YWNoZSBub2RlIHRvIGlu
        Y2x1ZGUgYSBoYXNoIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgb3Jp
        Z2luYWwgbm9kZQogICAgLy8gd2FzIGVzY2FwZWQuIFRoaXMgd2lsbCBhbGxv
        dyB1cyB0byBwcm9wZXJseSBlc2NhcGUgdmFsdWVzIHdoZW4gdGhlIHVuZGVy
        bHlpbmcgdmFsdWUKICAgIC8vIGNoYW5nZXMgYW5kIHdlIG5lZWQgdG8gcmUt
        cmVuZGVyIHRoZSB2YWx1ZS4KICAgIGlmICghbXVzdGFjaGUuZXNjYXBlZCkg
        ewogICAgICBtdXN0YWNoZS5oYXNoID0gbXVzdGFjaGUuaGFzaCB8fCBuZXcg
        SGFuZGxlYmFycy5BU1QuSGFzaE5vZGUoW10pOwogICAgICBtdXN0YWNoZS5o
        YXNoLnBhaXJzLnB1c2goWyJ1bmVzY2FwZWQiLCBuZXcgSGFuZGxlYmFycy5B
        U1QuU3RyaW5nTm9kZSgidHJ1ZSIpXSk7CiAgICB9CiAgICBtdXN0YWNoZSA9
        IG5ldyBIYW5kbGViYXJzLkFTVC5NdXN0YWNoZU5vZGUoW2lkXS5jb25jYXQo
        W211c3RhY2hlLmlkXSksIG11c3RhY2hlLmhhc2gsICFtdXN0YWNoZS5lc2Nh
        cGVkKTsKICB9CgogIHJldHVybiBIYW5kbGViYXJzLkNvbXBpbGVyLnByb3Rv
        dHlwZS5tdXN0YWNoZS5jYWxsKHRoaXMsIG11c3RhY2hlKTsKfTsKCi8qKgog
        IFVzZWQgZm9yIHByZWNvbXBpbGF0aW9uIG9mIEVtYmVyIEhhbmRsZWJhcnMg
        dGVtcGxhdGVzLiBUaGlzIHdpbGwgbm90IGJlIHVzZWQKICBkdXJpbmcgbm9y
        bWFsIGFwcCBleGVjdXRpb24uCgogIEBtZXRob2QgcHJlY29tcGlsZQogIEBm
        b3IgRW1iZXIuSGFuZGxlYmFycwogIEBzdGF0aWMKICBAcGFyYW0ge1N0cmlu
        Z30gc3RyaW5nIFRoZSB0ZW1wbGF0ZSB0byBwcmVjb21waWxlCiovCkVtYmVy
        LkhhbmRsZWJhcnMucHJlY29tcGlsZSA9IGZ1bmN0aW9uKHN0cmluZykgewog
        IHZhciBhc3QgPSBIYW5kbGViYXJzLnBhcnNlKHN0cmluZyk7CgogIHZhciBv
        cHRpb25zID0gewogICAga25vd25IZWxwZXJzOiB7CiAgICAgIGFjdGlvbjog
        dHJ1ZSwKICAgICAgdW5ib3VuZDogdHJ1ZSwKICAgICAgYmluZEF0dHI6IHRy
        dWUsCiAgICAgIHRlbXBsYXRlOiB0cnVlLAogICAgICB2aWV3OiB0cnVlLAog
        ICAgICBfdHJpYWdlTXVzdGFjaGU6IHRydWUKICAgIH0sCiAgICBkYXRhOiB0
        cnVlLAogICAgc3RyaW5nUGFyYW1zOiB0cnVlCiAgfTsKCiAgdmFyIGVudmly
        b25tZW50ID0gbmV3IEVtYmVyLkhhbmRsZWJhcnMuQ29tcGlsZXIoKS5jb21w
        aWxlKGFzdCwgb3B0aW9ucyk7CiAgcmV0dXJuIG5ldyBFbWJlci5IYW5kbGVi
        YXJzLkphdmFTY3JpcHRDb21waWxlcigpLmNvbXBpbGUoZW52aXJvbm1lbnQs
        IG9wdGlvbnMsIHVuZGVmaW5lZCwgdHJ1ZSk7Cn07CgovLyBXZSBkb24ndCBz
        dXBwb3J0IHRoaXMgZm9yIEhhbmRsZWJhcnMgcnVudGltZS1vbmx5CmlmIChI
        YW5kbGViYXJzLmNvbXBpbGUpIHsKICAvKioKICAgIFRoZSBlbnRyeSBwb2lu
        dCBmb3IgRW1iZXIgSGFuZGxlYmFycy4gVGhpcyByZXBsYWNlcyB0aGUgZGVm
        YXVsdAogICAgYEhhbmRsZWJhcnMuY29tcGlsZWAgYW5kIHR1cm5zIG9uIHRl
        bXBsYXRlLWxvY2FsIGRhdGEgYW5kIFN0cmluZwogICAgcGFyYW1ldGVycy4K
        CiAgICBAbWV0aG9kIGNvbXBpbGUKICAgIEBmb3IgRW1iZXIuSGFuZGxlYmFy
        cwogICAgQHN0YXRpYwogICAgQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUg
        dGVtcGxhdGUgdG8gY29tcGlsZQogICAgQHJldHVybiB7RnVuY3Rpb259CiAg
        Ki8KICBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUgPSBmdW5jdGlvbihzdHJp
        bmcpIHsKICAgIHZhciBhc3QgPSBIYW5kbGViYXJzLnBhcnNlKHN0cmluZyk7
        CiAgICB2YXIgb3B0aW9ucyA9IHsgZGF0YTogdHJ1ZSwgc3RyaW5nUGFyYW1z
        OiB0cnVlIH07CiAgICB2YXIgZW52aXJvbm1lbnQgPSBuZXcgRW1iZXIuSGFu
        ZGxlYmFycy5Db21waWxlcigpLmNvbXBpbGUoYXN0LCBvcHRpb25zKTsKICAg
        IHZhciB0ZW1wbGF0ZVNwZWMgPSBuZXcgRW1iZXIuSGFuZGxlYmFycy5KYXZh
        U2NyaXB0Q29tcGlsZXIoKS5jb21waWxlKGVudmlyb25tZW50LCBvcHRpb25z
        LCB1bmRlZmluZWQsIHRydWUpOwoKICAgIHZhciB0ZW1wbGF0ZSA9IEVtYmVy
        LkhhbmRsZWJhcnMudGVtcGxhdGUodGVtcGxhdGVTcGVjKTsKICAgIHRlbXBs
        YXRlLmlzTWV0aG9kID0gZmFsc2U7IC8vTWFrZSBzdXJlIHdlIGRvbid0IHdy
        YXAgdGVtcGxhdGVzIHdpdGggLl9zdXBlcgoKICAgIHJldHVybiB0ZW1wbGF0
        ZTsKICB9Owp9CgoKfSkoKTsKCihmdW5jdGlvbigpIHsKdmFyIHNsaWNlID0g
        QXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgb3JpZ2luYWxUZW1wbGF0ZSA9
        IEVtYmVyLkhhbmRsZWJhcnMudGVtcGxhdGU7CgovKioKICBAcHJpdmF0ZQoK
        ICBJZiBhIHBhdGggc3RhcnRzIHdpdGggYSByZXNlcnZlZCBrZXl3b3JkLCBy
        ZXR1cm5zIHRoZSByb290CiAgdGhhdCBzaG91bGQgYmUgdXNlZC4KCiAgQG1l
        dGhvZCBub3JtYWxpemVQYXRoCiAgQGZvciBFbWJlcgogIEBwYXJhbSByb290
        IHtPYmplY3R9CiAgQHBhcmFtIHBhdGgge1N0cmluZ30KICBAcGFyYW0gZGF0
        YSB7SGFzaH0KKi8KdmFyIG5vcm1hbGl6ZVBhdGggPSBFbWJlci5IYW5kbGVi
        YXJzLm5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbihyb290LCBwYXRoLCBkYXRh
        KSB7CiAgdmFyIGtleXdvcmRzID0gKGRhdGEgJiYgZGF0YS5rZXl3b3Jkcykg
        fHwge30sCiAgICAgIGtleXdvcmQsIGlzS2V5d29yZDsKCiAgLy8gR2V0IHRo
        ZSBmaXJzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiBGb3IgZXhhbXBsZSwgaWYg
        dGhlCiAgLy8gcGF0aCBpcyAiZm9vLmJhci5iYXoiLCByZXR1cm5zICJmb28i
        LgogIGtleXdvcmQgPSBwYXRoLnNwbGl0KCcuJywgMSlbMF07CgogIC8vIFRl
        c3QgdG8gc2VlIGlmIHRoZSBmaXJzdCBwYXRoIGlzIGEga2V5d29yZCB0aGF0
        IGhhcyBiZWVuCiAgLy8gcGFzc2VkIGFsb25nIGluIHRoZSB2aWV3J3MgZGF0
        YSBoYXNoLiBJZiBzbywgd2Ugd2lsbCB0cmVhdAogIC8vIHRoYXQgb2JqZWN0
        IGFzIHRoZSBuZXcgcm9vdC4KICBpZiAoa2V5d29yZHMuaGFzT3duUHJvcGVy
        dHkoa2V5d29yZCkpIHsKICAgIC8vIExvb2sgdXAgdGhlIHZhbHVlIGluIHRo
        ZSB0ZW1wbGF0ZSdzIGRhdGEgaGFzaC4KICAgIHJvb3QgPSBrZXl3b3Jkc1tr
        ZXl3b3JkXTsKICAgIGlzS2V5d29yZCA9IHRydWU7CgogICAgLy8gSGFuZGxl
        IGNhc2VzIHdoZXJlIHRoZSBlbnRpcmUgcGF0aCBpcyB0aGUgcmVzZXJ2ZWQK
        ICAgIC8vIHdvcmQuIEluIHRoYXQgY2FzZSwgcmV0dXJuIHRoZSBvYmplY3Qg
        aXRzZWxmLgogICAgaWYgKHBhdGggPT09IGtleXdvcmQpIHsKICAgICAgcGF0
        aCA9ICcnOwogICAgfSBlbHNlIHsKICAgICAgLy8gU3RyaXAgdGhlIGtleXdv
        cmQgZnJvbSB0aGUgcGF0aCBhbmQgbG9vayB1cAogICAgICAvLyB0aGUgcmVt
        YWluZGVyIGZyb20gdGhlIG5ld2x5IGZvdW5kIHJvb3QuCiAgICAgIHBhdGgg
        PSBwYXRoLnN1YnN0cihrZXl3b3JkLmxlbmd0aCsxKTsKICAgIH0KICB9Cgog
        IHJldHVybiB7IHJvb3Q6IHJvb3QsIHBhdGg6IHBhdGgsIGlzS2V5d29yZDog
        aXNLZXl3b3JkIH07Cn07CgoKLyoqCiAgTG9va3VwIGJvdGggb24gcm9vdCBh
        bmQgb24gd2luZG93LiBJZiB0aGUgcGF0aCBzdGFydHMgd2l0aAogIGEga2V5
        d29yZCwgdGhlIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdpbGwgYmUgbG9va2Vk
        IHVwIGluIHRoZQogIHRlbXBsYXRlJ3MgZGF0YSBoYXNoIGFuZCB1c2VkIHRv
        IHJlc29sdmUgdGhlIHBhdGguCgogIEBtZXRob2QgZ2V0CiAgQGZvciBFbWJl
        ci5IYW5kbGViYXJzCiAgQHBhcmFtIHtPYmplY3R9IHJvb3QgVGhlIG9iamVj
        dCB0byBsb29rIHVwIHRoZSBwcm9wZXJ0eSBvbgogIEBwYXJhbSB7U3RyaW5n
        fSBwYXRoIFRoZSBwYXRoIHRvIGJlIGxvb2tlZHVwCiAgQHBhcmFtIHtPYmpl
        Y3R9IG9wdGlvbnMgVGhlIHRlbXBsYXRlJ3Mgb3B0aW9uIGhhc2gKKi8KdmFy
        IGhhbmRsZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJzLmdldCA9IGZ1bmN0
        aW9uKHJvb3QsIHBhdGgsIG9wdGlvbnMpIHsKICB2YXIgZGF0YSA9IG9wdGlv
        bnMgJiYgb3B0aW9ucy5kYXRhLAogICAgICBub3JtYWxpemVkUGF0aCA9IG5v
        cm1hbGl6ZVBhdGgocm9vdCwgcGF0aCwgZGF0YSksCiAgICAgIHZhbHVlOwoK
        ICAvLyBJbiBjYXNlcyB3aGVyZSB0aGUgcGF0aCBiZWdpbnMgd2l0aCBhIGtl
        eXdvcmQsIGNoYW5nZSB0aGUKICAvLyByb290IHRvIHRoZSB2YWx1ZSByZXBy
        ZXNlbnRlZCBieSB0aGF0IGtleXdvcmQsIGFuZCBlbnN1cmUKICAvLyB0aGUg
        cGF0aCBpcyByZWxhdGl2ZSB0byBpdC4KICByb290ID0gbm9ybWFsaXplZFBh
        dGgucm9vdDsKICBwYXRoID0gbm9ybWFsaXplZFBhdGgucGF0aDsKCiAgdmFs
        dWUgPSBFbWJlci5nZXQocm9vdCwgcGF0aCk7CgogIC8vIElmIHRoZSBwYXRo
        IHN0YXJ0cyB3aXRoIGEgY2FwaXRhbCBsZXR0ZXIsIGxvb2sgaXQgdXAgb24g
        RW1iZXIubG9va3VwLAogIC8vIHdoaWNoIGRlZmF1bHRzIHRvIHRoZSBgd2lu
        ZG93YCBvYmplY3QgaW4gYnJvd3NlcnMuCiAgaWYgKHZhbHVlID09PSB1bmRl
        ZmluZWQgJiYgcm9vdCAhPT0gRW1iZXIubG9va3VwICYmIEVtYmVyLmlzR2xv
        YmFsUGF0aChwYXRoKSkgewogICAgdmFsdWUgPSBFbWJlci5nZXQoRW1iZXIu
        bG9va3VwLCBwYXRoKTsKICB9CiAgcmV0dXJuIHZhbHVlOwp9OwoKRW1iZXIu
        SGFuZGxlYmFycy5yZXNvbHZlUGFyYW1zID0gZnVuY3Rpb24oY29udGV4dCwg
        cGFyYW1zLCBvcHRpb25zKSB7CiAgdmFyIHJlc29sdmVkUGFyYW1zID0gW10s
        IHR5cGVzID0gb3B0aW9ucy50eXBlcywgcGFyYW0sIHR5cGU7CgogIGZvciAo
        dmFyIGk9MCwgbD1wYXJhbXMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgcGFy
        YW0gPSBwYXJhbXNbaV07CiAgICB0eXBlID0gdHlwZXNbaV07CgogICAgaWYg
        KHR5cGUgPT09ICdJRCcpIHsKICAgICAgcmVzb2x2ZWRQYXJhbXMucHVzaCho
        YW5kbGViYXJzR2V0KGNvbnRleHQsIHBhcmFtLCBvcHRpb25zKSk7CiAgICB9
        IGVsc2UgewogICAgICByZXNvbHZlZFBhcmFtcy5wdXNoKHBhcmFtKTsKICAg
        IH0KICB9CgogIHJldHVybiByZXNvbHZlZFBhcmFtczsKfTsKCkVtYmVyLkhh
        bmRsZWJhcnMucmVzb2x2ZUhhc2ggPSBmdW5jdGlvbihjb250ZXh0LCBoYXNo
        LCBvcHRpb25zKSB7CiAgdmFyIHJlc29sdmVkSGFzaCA9IHt9LCB0eXBlcyA9
        IG9wdGlvbnMuaGFzaFR5cGVzLCB0eXBlOwoKICBmb3IgKHZhciBrZXkgaW4g
        aGFzaCkgewogICAgaWYgKCFoYXNoLmhhc093blByb3BlcnR5KGtleSkpIHsg
        Y29udGludWU7IH0KCiAgICB0eXBlID0gdHlwZXNba2V5XTsKCiAgICBpZiAo
        dHlwZSA9PT0gJ0lEJykgewogICAgICByZXNvbHZlZEhhc2hba2V5XSA9IGhh
        bmRsZWJhcnNHZXQoY29udGV4dCwgaGFzaFtrZXldLCBvcHRpb25zKTsKICAg
        IH0gZWxzZSB7CiAgICAgIHJlc29sdmVkSGFzaFtrZXldID0gaGFzaFtrZXld
        OwogICAgfQogIH0KCiAgcmV0dXJuIHJlc29sdmVkSGFzaDsKfTsKCi8qKgog
        IEBwcml2YXRlCgogIFJlZ2lzdGVycyBhIGhlbHBlciBpbiBIYW5kbGViYXJz
        IHRoYXQgd2lsbCBiZSBjYWxsZWQgaWYgbm8gcHJvcGVydHkgd2l0aCB0aGUK
        ICBnaXZlbiBuYW1lIGNhbiBiZSBmb3VuZCBvbiB0aGUgY3VycmVudCBjb250
        ZXh0IG9iamVjdCwgYW5kIG5vIGhlbHBlciB3aXRoCiAgdGhhdCBuYW1lIGlz
        IHJlZ2lzdGVyZWQuCgogIFRoaXMgdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aXRo
        IGEgbW9yZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2Ugc28gdGhlIHVzZXIgY2Fu
        CiAgdHJhY2sgZG93biB3aGVyZSB0aGUgcHJvYmxlbSBpcyBoYXBwZW5pbmcu
        CgogIEBtZXRob2QgaGVscGVyTWlzc2luZwogIEBmb3IgRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBhdGgKICBAcGFyYW0g
        e0hhc2h9IG9wdGlvbnMKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rlckhl
        bHBlcignaGVscGVyTWlzc2luZycsIGZ1bmN0aW9uKHBhdGgpIHsKICB2YXIg
        ZXJyb3IsIHZpZXcgPSAiIjsKCiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHNb
        YXJndW1lbnRzLmxlbmd0aCAtIDFdOwoKICAKCiAgICB2YXIgaGVscGVyID0g
        RW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlSGVscGVyKG9wdGlvbnMuZGF0YS52
        aWV3LmNvbnRhaW5lciwgcGF0aCk7CgogICAgaWYgKGhlbHBlcikgewogICAg
        ICByZXR1cm4gaGVscGVyLmFwcGx5KHRoaXMsIHNsaWNlLmNhbGwoYXJndW1l
        bnRzLCAxKSk7CiAgICB9CiAgCgogIGVycm9yID0gIiVAIEhhbmRsZWJhcnMg
        ZXJyb3I6IENvdWxkIG5vdCBmaW5kIHByb3BlcnR5ICclQCcgb24gb2JqZWN0
        ICVALiI7CiAgaWYgKG9wdGlvbnMuZGF0YSkgewogICAgdmlldyA9IG9wdGlv
        bnMuZGF0YS52aWV3OwogIH0KICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1i
        ZXIuU3RyaW5nLmZtdChlcnJvciwgW3ZpZXcsIHBhdGgsIHRoaXNdKSk7Cn0p
        OwoKLyoqCiAgQHByaXZhdGUKCiAgUmVnaXN0ZXJzIGEgaGVscGVyIGluIEhh
        bmRsZWJhcnMgdGhhdCB3aWxsIGJlIGNhbGxlZCBpZiBubyBwcm9wZXJ0eSB3
        aXRoIHRoZQogIGdpdmVuIG5hbWUgY2FuIGJlIGZvdW5kIG9uIHRoZSBjdXJy
        ZW50IGNvbnRleHQgb2JqZWN0LCBhbmQgbm8gaGVscGVyIHdpdGgKICB0aGF0
        IG5hbWUgaXMgcmVnaXN0ZXJlZC4KCiAgVGhpcyB0aHJvd3MgYW4gZXhjZXB0
        aW9uIHdpdGggYSBtb3JlIGhlbHBmdWwgZXJyb3IgbWVzc2FnZSBzbyB0aGUg
        dXNlciBjYW4KICB0cmFjayBkb3duIHdoZXJlIHRoZSBwcm9ibGVtIGlzIGhh
        cHBlbmluZy4KCiAgQG1ldGhvZCBoZWxwZXJNaXNzaW5nCiAgQGZvciBFbWJl
        ci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcGF0aAog
        IEBwYXJhbSB7SGFzaH0gb3B0aW9ucwoqLwpFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVySGVscGVyKCdibG9ja0hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbihw
        YXRoKSB7CgogIHZhciBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5s
        ZW5ndGggLSAxXTsKCiAgCgogICAgdmFyIGhlbHBlciA9IEVtYmVyLkhhbmRs
        ZWJhcnMucmVzb2x2ZUhlbHBlcihvcHRpb25zLmRhdGEudmlldy5jb250YWlu
        ZXIsIHBhdGgpOwoKICAgIGlmIChoZWxwZXIpIHsKICAgICAgcmV0dXJuIGhl
        bHBlci5hcHBseSh0aGlzLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpOwog
        ICAgfQogIAoKICByZXR1cm4gSGFuZGxlYmFycy5oZWxwZXJzLmJsb2NrSGVs
        cGVyTWlzc2luZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9KTsKCi8qKgog
        IFJlZ2lzdGVyIGEgYm91bmQgaGFuZGxlYmFycyBoZWxwZXIuIEJvdW5kIGhl
        bHBlcnMgYmVoYXZlIHNpbWlsYXJseSB0byByZWd1bGFyCiAgaGFuZGxlYmFy
        cyBoZWxwZXJzLCB3aXRoIHRoZSBhZGRlZCBhYmlsaXR5IHRvIHJlLXJlbmRl
        ciB3aGVuIHRoZSB1bmRlcmx5aW5nIGRhdGEKICBjaGFuZ2VzLgoKICAjIyBT
        aW1wbGUgZXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuSGFuZGxl
        YmFycy5yZWdpc3RlckJvdW5kSGVscGVyKCdjYXBpdGFsaXplJywgZnVuY3Rp
        b24odmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZS50b1VwcGVyQ2FzZSgpOwog
        IH0pOwogIGBgYAoKICBUaGUgYWJvdmUgYm91bmQgaGVscGVyIGNhbiBiZSB1
        c2VkIGluc2lkZSBvZiB0ZW1wbGF0ZXMgYXMgZm9sbG93czoKCiAgYGBgaGFu
        ZGxlYmFycwogIHt7Y2FwaXRhbGl6ZSBuYW1lfX0KICBgYGAKCiAgSW4gdGhp
        cyBjYXNlLCB3aGVuIHRoZSBgbmFtZWAgcHJvcGVydHkgb2YgdGhlIHRlbXBs
        YXRlJ3MgY29udGV4dCBjaGFuZ2VzLAogIHRoZSByZW5kZXJlZCB2YWx1ZSBv
        ZiB0aGUgaGVscGVyIHdpbGwgdXBkYXRlIHRvIHJlZmxlY3QgdGhpcyBjaGFu
        Z2UuCgogICMjIEV4YW1wbGUgd2l0aCBvcHRpb25zCgogIExpa2Ugbm9ybWFs
        IGhhbmRsZWJhcnMgaGVscGVycywgYm91bmQgaGVscGVycyBoYXZlIGFjY2Vz
        cyB0byB0aGUgb3B0aW9ucwogIHBhc3NlZCBpbnRvIHRoZSBoZWxwZXIgY2Fs
        bC4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0
        ZXJCb3VuZEhlbHBlcigncmVwZWF0JywgZnVuY3Rpb24odmFsdWUsIG9wdGlv
        bnMpIHsKICAgIHZhciBjb3VudCA9IG9wdGlvbnMuaGFzaC5jb3VudDsKICAg
        IHZhciBhID0gW107CiAgICB3aGlsZShhLmxlbmd0aCA8IGNvdW50KSB7CiAg
        ICAgICAgYS5wdXNoKHZhbHVlKTsKICAgIH0KICAgIHJldHVybiBhLmpvaW4o
        JycpOwogIH0pOwogIGBgYAoKICBUaGlzIGhlbHBlciBjb3VsZCBiZSB1c2Vk
        IGluIGEgdGVtcGxhdGUgYXMgZm9sbG93czoKCiAgYGBgaGFuZGxlYmFycwog
        IHt7cmVwZWF0IHRleHQgY291bnQ9M319CiAgYGBgCgogICMjIEV4YW1wbGUg
        d2l0aCBib3VuZCBvcHRpb25zCgogIEJvdW5kIGhhc2ggb3B0aW9ucyBhcmUg
        YWxzbyBzdXBwb3J0ZWQuIEV4YW1wbGU6CgogIGBgYGhhbmRsZWJhcnMKICB7
        e3JlcGVhdCB0ZXh0IGNvdW50QmluZGluZz0ibnVtUmVwZWF0cyJ9fQogIGBg
        YAoKICBJbiB0aGlzIGV4YW1wbGUsIGNvdW50IHdpbGwgYmUgYm91bmQgdG8g
        dGhlIHZhbHVlIG9mCiAgdGhlIGBudW1SZXBlYXRzYCBwcm9wZXJ0eSBvbiB0
        aGUgY29udGV4dC4gSWYgdGhhdCBwcm9wZXJ0eQogIGNoYW5nZXMsIHRoZSBo
        ZWxwZXIgd2lsbCBiZSByZS1yZW5kZXJlZC4KCiAgIyMgRXhhbXBsZSB3aXRo
        IGV4dHJhIGRlcGVuZGVuY2llcwoKICBUaGUgYEVtYmVyLkhhbmRsZWJhcnMu
        cmVnaXN0ZXJCb3VuZEhlbHBlcmAgbWV0aG9kIHRha2VzIGEgdmFyaWFibGUg
        bGVuZ3RoCiAgdGhpcmQgcGFyYW1ldGVyIHdoaWNoIGluZGljYXRlcyBleHRy
        YSBkZXBlbmRlbmNpZXMgb24gdGhlIHBhc3NlZCBpbiB2YWx1ZS4KICBUaGlz
        IGFsbG93cyB0aGUgaGFuZGxlYmFycyBoZWxwZXIgdG8gdXBkYXRlIHdoZW4g
        dGhlc2UgZGVwZW5kZW5jaWVzIGNoYW5nZS4KCiAgYGBgamF2YXNjcmlwdAog
        IEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJCb3VuZEhlbHBlcignY2FwaXRh
        bGl6ZU5hbWUnLCBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVl
        LmdldCgnbmFtZScpLnRvVXBwZXJDYXNlKCk7CiAgfSwgJ25hbWUnKTsKICBg
        YGAKCiAgIyMgRXhhbXBsZSB3aXRoIG11bHRpcGxlIGJvdW5kIHByb3BlcnRp
        ZXMKCiAgYEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJCb3VuZEhlbHBlcmAg
        c3VwcG9ydHMgYmluZGluZyB0bwogIG11bHRpcGxlIHByb3BlcnRpZXMsIGUu
        Zy46CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVyQm91bmRIZWxwZXIoJ2NvbmNhdGVuYXRlJywgZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgdmFsdWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJn
        dW1lbnRzLCAwLCAtMSk7CiAgICByZXR1cm4gdmFsdWVzLmpvaW4oJ3x8Jyk7
        CiAgfSk7CiAgYGBgCgogIFdoaWNoIGFsbG93cyBmb3IgdGVtcGxhdGUgc3lu
        dGF4IHN1Y2ggYXMgYHt7Y29uY2F0ZW5hdGUgcHJvcDEgcHJvcDJ9fWAgb3IK
        ICBge3tjb25jYXRlbmF0ZSBwcm9wMSBwcm9wMiBwcm9wM319YC4gSWYgYW55
        IG9mIHRoZSBwcm9wZXJ0aWVzIGNoYW5nZSwKICB0aGUgaGVscHIgd2lsbCBy
        ZS1yZW5kZXIuICBOb3RlIHRoYXQgZGVwZW5kZW5jeSBrZXlzIGNhbm5vdCBi
        ZQogIHVzaW5nIGluIGNvbmp1bmN0aW9uIHdpdGggbXVsdGktcHJvcGVydHkg
        aGVscGVycywgc2luY2UgaXQgaXMgYW1iaWd1b3VzCiAgd2hpY2ggcHJvcGVy
        dHkgdGhlIGRlcGVuZGVudCBrZXlzIHdvdWxkIGJlbG9uZyB0by4KCiAgIyMg
        VXNlIHdpdGggdW5ib3VuZCBoZWxwZXIKCiAgVGhlIGB7e3VuYm91bmR9fWAg
        aGVscGVyIGNhbiBiZSB1c2VkIHdpdGggYm91bmQgaGVscGVyIGludm9jYXRp
        b25zCiAgdG8gcmVuZGVyIHRoZW0gaW4gdGhlaXIgdW5ib3VuZCBmb3JtLCBl
        LmcuCgogIGBgYGhhbmRsZWJhcnMKICB7e3VuYm91bmQgY2FwaXRhbGl6ZSBu
        YW1lfX0KICBgYGAKCiAgSW4gdGhpcyBleGFtcGxlLCBpZiB0aGUgbmFtZSBw
        cm9wZXJ0eSBjaGFuZ2VzLCB0aGUgaGVscGVyCiAgd2lsbCBub3QgcmUtcmVu
        ZGVyLgoKICAjIyBVc2Ugd2l0aCBibG9ja3Mgbm90IHN1cHBvcnRlZAoKICBC
        b3VuZCBoZWxwZXJzIGRvIG5vdCBzdXBwb3J0IHVzZSB3aXRoIEhhbmRsZWJh
        cnMgYmxvY2tzIG9yCiAgdGhlIGFkZGl0aW9uIG9mIGNoaWxkIHZpZXdzIG9m
        IGFueSBraW5kLgoKICBAbWV0aG9kIHJlZ2lzdGVyQm91bmRIZWxwZXIKICBA
        Zm9yIEVtYmVyLkhhbmRsZWJhcnMKICBAcGFyYW0ge1N0cmluZ30gbmFtZQog
        IEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uCiAgQHBhcmFtIHtTdHJpbmd9
        IGRlcGVuZGVudEtleXMqCiovCkVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJC
        b3VuZEhlbHBlciA9IGZ1bmN0aW9uKG5hbWUsIGZuKSB7CiAgdmFyIGJvdW5k
        SGVscGVyQXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwKICAgICAg
        Ym91bmRGbiA9IEVtYmVyLkhhbmRsZWJhcnMubWFrZUJvdW5kSGVscGVyLmFw
        cGx5KHRoaXMsIGJvdW5kSGVscGVyQXJncyk7CiAgRW1iZXIuSGFuZGxlYmFy
        cy5yZWdpc3RlckhlbHBlcihuYW1lLCBib3VuZEZuKTsKfTsKCi8qKgogIEBw
        cml2YXRlCgogIEEgKG1vc3RseSkgcHJpdmF0ZSBoZWxwZXIgZnVuY3Rpb24g
        dG8gYHJlZ2lzdGVyQm91bmRIZWxwZXJgLiBUYWtlcyB0aGUKICBwcm92aWRl
        ZCBIYW5kbGViYXJzIGhlbHBlciBmdW5jdGlvbiBmbiBhbmQgcmV0dXJucyBp
        dCBpbiB3cmFwcGVkCiAgYm91bmQgaGVscGVyIGZvcm0uCgogIFRoZSBtYWlu
        IHVzZSBjYXNlIGZvciB1c2luZyB0aGlzIG91dHNpZGUgb2YgYHJlZ2lzdGVy
        Qm91bmRIZWxwZXJgCiAgaXMgZm9yIHJlZ2lzdGVyaW5nIGhlbHBlcnMgb24g
        dGhlIGNvbnRhaW5lcjoKCiAgYGBganMKICB2YXIgYm91bmRIZWxwZXJGbiA9
        IEVtYmVyLkhhbmRsZWJhcnMubWFrZUJvdW5kSGVscGVyKGZ1bmN0aW9uKHdv
        cmQpIHsKICAgIHJldHVybiB3b3JkLnRvVXBwZXJDYXNlKCk7CiAgfSk7Cgog
        IGNvbnRhaW5lci5yZWdpc3RlcignaGVscGVyOm15LWJvdW5kLWhlbHBlcics
        IGJvdW5kSGVscGVyRm4pOwogIGBgYAoKICBJbiB0aGUgYWJvdmUgZXhhbXBs
        ZSwgaWYgdGhlIGhlbHBlciBmdW5jdGlvbiBoYWRuJ3QgYmVlbiB3cmFwcGVk
        IGluCiAgYG1ha2VCb3VuZEhlbHBlcmAsIHRoZSByZWdpc3RlcmVkIGhlbHBl
        ciB3b3VsZCBiZSB1bmJvdW5kLgoKICBAbWV0aG9kIG1ha2VCb3VuZEhlbHBl
        cgogIEBmb3IgRW1iZXIuSGFuZGxlYmFycwogIEBwYXJhbSB7RnVuY3Rpb259
        IGZ1bmN0aW9uCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleXMqCiov
        CkVtYmVyLkhhbmRsZWJhcnMubWFrZUJvdW5kSGVscGVyID0gZnVuY3Rpb24o
        Zm4pIHsKICB2YXIgZGVwZW5kZW50S2V5cyA9IHNsaWNlLmNhbGwoYXJndW1l
        bnRzLCAxKTsKCiAgZnVuY3Rpb24gaGVscGVyKCkgewogICAgdmFyIHByb3Bl
        cnRpZXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEpLAogICAgICBu
        dW1Qcm9wZXJ0aWVzID0gcHJvcGVydGllcy5sZW5ndGgsCiAgICAgIG9wdGlv
        bnMgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLAogICAgICBu
        b3JtYWxpemVkUHJvcGVydGllcyA9IFtdLAogICAgICB0eXBlcyA9IG9wdGlv
        bnMudHlwZXMsCiAgICAgIGRhdGEgPSBvcHRpb25zLmRhdGEsCiAgICAgIGhh
        c2ggPSBvcHRpb25zLmhhc2gsCiAgICAgIHZpZXcgPSBkYXRhLnZpZXcsCiAg
        ICAgIGNvbnRleHRzID0gb3B0aW9ucy5jb250ZXh0cywKICAgICAgY3VycmVu
        dENvbnRleHQgPSAoY29udGV4dHMgJiYgY29udGV4dHMubGVuZ3RoKSA/IGNv
        bnRleHRzWzBdIDogdGhpcywKICAgICAgcHJlZml4UGF0aEZvckRlcGVuZGVu
        dEtleXMgPSAnJywKICAgICAgbG9jLCBsZW4sIGhhc2hPcHRpb24sCiAgICAg
        IGJvdW5kT3B0aW9uLCBwcm9wZXJ0eSwKICAgICAgbm9ybWFsaXplZFZhbHVl
        ID0gRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3LnByb3RvdHlwZS5ub3Jt
        YWxpemVkVmFsdWU7CgogICAgRW1iZXIuYXNzZXJ0KCJyZWdpc3RlckJvdW5k
        SGVscGVyLWdlbmVyYXRlZCBoZWxwZXJzIGRvIG5vdCBzdXBwb3J0IHVzZSB3
        aXRoIEhhbmRsZWJhcnMgYmxvY2tzLiIsICFvcHRpb25zLmZuKTsKCiAgICAv
        LyBEZXRlY3QgYm91bmQgb3B0aW9ucyAoZS5nLiBjb3VudEJpbmRpbmc9Im90
        aGVyQ291bnQiKQogICAgdmFyIGJvdW5kT3B0aW9ucyA9IGhhc2guYm91bmRP
        cHRpb25zID0ge307CiAgICBmb3IgKGhhc2hPcHRpb24gaW4gaGFzaCkgewog
        ICAgICBpZiAoRW1iZXIuSVNfQklORElORy50ZXN0KGhhc2hPcHRpb24pKSB7
        CiAgICAgICAgLy8gTG9wIG9mZiAnQmluZGluZycgc3VmZml4LgogICAgICAg
        IGJvdW5kT3B0aW9uc1toYXNoT3B0aW9uLnNsaWNlKDAsIC03KV0gPSBoYXNo
        W2hhc2hPcHRpb25dOwogICAgICB9CiAgICB9CgogICAgLy8gRXhwb3NlIHBy
        b3BlcnR5IG5hbWVzIG9uIGRhdGEucHJvcGVydGllcyBvYmplY3QuCiAgICB2
        YXIgd2F0Y2hlZFByb3BlcnRpZXMgPSBbXTsKICAgIGRhdGEucHJvcGVydGll
        cyA9IFtdOwogICAgZm9yIChsb2MgPSAwOyBsb2MgPCBudW1Qcm9wZXJ0aWVz
        OyArK2xvYykgewogICAgICBkYXRhLnByb3BlcnRpZXMucHVzaChwcm9wZXJ0
        aWVzW2xvY10pOwogICAgICBpZiAodHlwZXNbbG9jXSA9PT0gJ0lEJykgewog
        ICAgICAgIHZhciBub3JtYWxpemVkUHJvcCA9IG5vcm1hbGl6ZVBhdGgoY3Vy
        cmVudENvbnRleHQsIHByb3BlcnRpZXNbbG9jXSwgZGF0YSk7CiAgICAgICAg
        bm9ybWFsaXplZFByb3BlcnRpZXMucHVzaChub3JtYWxpemVkUHJvcCk7CiAg
        ICAgICAgd2F0Y2hlZFByb3BlcnRpZXMucHVzaChub3JtYWxpemVkUHJvcCk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9ybWFsaXplZFByb3BlcnRpZXMu
        cHVzaChudWxsKTsKICAgICAgfQogICAgfQoKICAgIC8vIEhhbmRsZSBjYXNl
        IHdoZW4gaGVscGVyIGludm9jYXRpb24gaXMgcHJlY2VkZWQgYnkgYHVuYm91
        bmRgLCBlLmcuCiAgICAvLyB7e3VuYm91bmQgbXlIZWxwZXIgZm9vfX0KICAg
        IGlmIChkYXRhLmlzVW5ib3VuZCkgewogICAgICByZXR1cm4gZXZhbHVhdGVV
        bmJvdW5kSGVscGVyKHRoaXMsIGZuLCBub3JtYWxpemVkUHJvcGVydGllcywg
        b3B0aW9ucyk7CiAgICB9CgogICAgdmFyIGJpbmRWaWV3ID0gbmV3IEVtYmVy
        Ll9TaW1wbGVIYW5kbGViYXJzVmlldyhudWxsLCBudWxsLCAhb3B0aW9ucy5o
        YXNoLnVuZXNjYXBlZCwgb3B0aW9ucy5kYXRhKTsKCiAgICAvLyBPdmVycmlk
        ZSBTaW1wbGVIYW5kbGViYXJzVmlldydzIG1ldGhvZCBmb3IgZ2VuZXJhdGlu
        ZyB0aGUgdmlldydzIGNvbnRlbnQuCiAgICBiaW5kVmlldy5ub3JtYWxpemVk
        VmFsdWUgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBbXSwgYm91
        bmRPcHRpb247CgogICAgICAvLyBDb3B5IG92ZXIgYm91bmQgaGFzaCBvcHRp
        b25zLgogICAgICBmb3IgKGJvdW5kT3B0aW9uIGluIGJvdW5kT3B0aW9ucykg
        ewogICAgICAgIGlmICghYm91bmRPcHRpb25zLmhhc093blByb3BlcnR5KGJv
        dW5kT3B0aW9uKSkgeyBjb250aW51ZTsgfQogICAgICAgIHByb3BlcnR5ID0g
        bm9ybWFsaXplUGF0aChjdXJyZW50Q29udGV4dCwgYm91bmRPcHRpb25zW2Jv
        dW5kT3B0aW9uXSwgZGF0YSk7CiAgICAgICAgYmluZFZpZXcucGF0aCA9IHBy
        b3BlcnR5LnBhdGg7CiAgICAgICAgYmluZFZpZXcucGF0aFJvb3QgPSBwcm9w
        ZXJ0eS5yb290OwogICAgICAgIGhhc2hbYm91bmRPcHRpb25dID0gbm9ybWFs
        aXplZFZhbHVlLmNhbGwoYmluZFZpZXcpOwogICAgICB9CgogICAgICBmb3Ig
        KGxvYyA9IDA7IGxvYyA8IG51bVByb3BlcnRpZXM7ICsrbG9jKSB7CiAgICAg
        ICAgcHJvcGVydHkgPSBub3JtYWxpemVkUHJvcGVydGllc1tsb2NdOwogICAg
        ICAgIGlmIChwcm9wZXJ0eSkgewogICAgICAgICAgYmluZFZpZXcucGF0aCA9
        IHByb3BlcnR5LnBhdGg7CiAgICAgICAgICBiaW5kVmlldy5wYXRoUm9vdCA9
        IHByb3BlcnR5LnJvb3Q7CiAgICAgICAgICBhcmdzLnB1c2gobm9ybWFsaXpl
        ZFZhbHVlLmNhbGwoYmluZFZpZXcpKTsKICAgICAgICB9IGVsc2UgewogICAg
        ICAgICAgYXJncy5wdXNoKHByb3BlcnRpZXNbbG9jXSk7CiAgICAgICAgfQog
        ICAgICB9CiAgICAgIGFyZ3MucHVzaChvcHRpb25zKTsKCiAgICAgIC8vIFJ1
        biB0aGUgc3VwcGxpZWQgaGVscGVyIGZ1bmN0aW9uLgogICAgICByZXR1cm4g
        Zm4uYXBwbHkoY3VycmVudENvbnRleHQsIGFyZ3MpOwogICAgfTsKCiAgICB2
        aWV3LmFwcGVuZENoaWxkKGJpbmRWaWV3KTsKCiAgICAvLyBBc3NlbWJsZSBs
        aXN0IG9mIHdhdGNoZWQgcHJvcGVydGllcyB0aGF0J2xsIHJlLXJlbmRlciB0
        aGlzIGhlbHBlci4KICAgIGZvciAoYm91bmRPcHRpb24gaW4gYm91bmRPcHRp
        b25zKSB7CiAgICAgIGlmIChib3VuZE9wdGlvbnMuaGFzT3duUHJvcGVydHko
        Ym91bmRPcHRpb24pKSB7CiAgICAgICAgd2F0Y2hlZFByb3BlcnRpZXMucHVz
        aChub3JtYWxpemVQYXRoKGN1cnJlbnRDb250ZXh0LCBib3VuZE9wdGlvbnNb
        Ym91bmRPcHRpb25dLCBkYXRhKSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBP
        YnNlcnZlIGVhY2ggcHJvcGVydHkuCiAgICBmb3IgKGxvYyA9IDAsIGxlbiA9
        IHdhdGNoZWRQcm9wZXJ0aWVzLmxlbmd0aDsgbG9jIDwgbGVuOyArK2xvYykg
        ewogICAgICBwcm9wZXJ0eSA9IHdhdGNoZWRQcm9wZXJ0aWVzW2xvY107CiAg
        ICAgIHZpZXcucmVnaXN0ZXJPYnNlcnZlcihwcm9wZXJ0eS5yb290LCBwcm9w
        ZXJ0eS5wYXRoLCBiaW5kVmlldywgYmluZFZpZXcucmVyZW5kZXIpOwogICAg
        fQoKICAgIGlmICh0eXBlc1swXSAhPT0gJ0lEJyB8fCBub3JtYWxpemVkUHJv
        cGVydGllcy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuOwogICAgfQoK
        ICAgIC8vIEFkZCBkZXBlbmRlbnQga2V5IG9ic2VydmVycyB0byB0aGUgZmly
        c3QgcGFyYW0KICAgIHZhciBub3JtYWxpemVkID0gbm9ybWFsaXplZFByb3Bl
        cnRpZXNbMF0sCiAgICAgICAgcGF0aFJvb3QgPSBub3JtYWxpemVkLnJvb3Qs
        CiAgICAgICAgcGF0aCA9IG5vcm1hbGl6ZWQucGF0aDsKCiAgICBpZighRW1i
        ZXIuaXNFbXB0eShwYXRoKSkgewogICAgICBwcmVmaXhQYXRoRm9yRGVwZW5k
        ZW50S2V5cyA9IHBhdGggKyAnLic7CiAgICB9CiAgICBmb3IgKHZhciBpPTAs
        IGw9ZGVwZW5kZW50S2V5cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHZp
        ZXcucmVnaXN0ZXJPYnNlcnZlcihwYXRoUm9vdCwgcHJlZml4UGF0aEZvckRl
        cGVuZGVudEtleXMgKyBkZXBlbmRlbnRLZXlzW2ldLCBiaW5kVmlldywgYmlu
        ZFZpZXcucmVyZW5kZXIpOwogICAgfQogIH0KCiAgaGVscGVyLl9yYXdGdW5j
        dGlvbiA9IGZuOwogIHJldHVybiBoZWxwZXI7Cn07CgovKioKICBAcHJpdmF0
        ZQoKICBSZW5kZXJzIHRoZSB1bmJvdW5kIGZvcm0gb2YgYW4gb3RoZXJ3aXNl
        IGJvdW5kIGhlbHBlciBmdW5jdGlvbi4KCiAgQG1ldGhvZCBldmFsdWF0ZVVu
        Ym91bmRIZWxwZXIKICBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogIEBwYXJhbSB7
        T2JqZWN0fSBjb250ZXh0CiAgQHBhcmFtIHtBcnJheX0gbm9ybWFsaXplZFBy
        b3BlcnRpZXMKICBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucwoqLwpmdW5jdGlv
        biBldmFsdWF0ZVVuYm91bmRIZWxwZXIoY29udGV4dCwgZm4sIG5vcm1hbGl6
        ZWRQcm9wZXJ0aWVzLCBvcHRpb25zKSB7CiAgdmFyIGFyZ3MgPSBbXSwgaGFz
        aCA9IG9wdGlvbnMuaGFzaCwgYm91bmRPcHRpb25zID0gaGFzaC5ib3VuZE9w
        dGlvbnMsIGxvYywgbGVuLCBwcm9wZXJ0eSwgYm91bmRPcHRpb247CgogIGZv
        ciAoYm91bmRPcHRpb24gaW4gYm91bmRPcHRpb25zKSB7CiAgICBpZiAoIWJv
        dW5kT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShib3VuZE9wdGlvbikpIHsgY29u
        dGludWU7IH0KICAgIGhhc2hbYm91bmRPcHRpb25dID0gRW1iZXIuSGFuZGxl
        YmFycy5nZXQoY29udGV4dCwgYm91bmRPcHRpb25zW2JvdW5kT3B0aW9uXSwg
        b3B0aW9ucyk7CiAgfQoKICBmb3IobG9jID0gMCwgbGVuID0gbm9ybWFsaXpl
        ZFByb3BlcnRpZXMubGVuZ3RoOyBsb2MgPCBsZW47ICsrbG9jKSB7CiAgICBw
        cm9wZXJ0eSA9IG5vcm1hbGl6ZWRQcm9wZXJ0aWVzW2xvY107CiAgICBhcmdz
        LnB1c2goRW1iZXIuSGFuZGxlYmFycy5nZXQocHJvcGVydHkucm9vdCwgcHJv
        cGVydHkucGF0aCwgb3B0aW9ucykpOwogIH0KICBhcmdzLnB1c2gob3B0aW9u
        cyk7CiAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwp9CgovKioK
        ICBAcHJpdmF0ZQoKICBPdmVycmlkZXMgSGFuZGxlYmFycy50ZW1wbGF0ZSBz
        byB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaAogIHVzZXItY3JlYXRlZCwgdG9w
        LWxldmVsIHRlbXBsYXRlcyBmcm9tIGlubmVyIGNvbnRleHRzLgoKICBAbWV0
        aG9kIHRlbXBsYXRlCiAgQGZvciBFbWJlci5IYW5kbGViYXJzCiAgQHBhcmFt
        IHtTdHJpbmd9IHNwZWMKKi8KRW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZSA9
        IGZ1bmN0aW9uKHNwZWMpIHsKICB2YXIgdCA9IG9yaWdpbmFsVGVtcGxhdGUo
        c3BlYyk7CiAgdC5pc1RvcCA9IHRydWU7CiAgcmV0dXJuIHQ7Cn07Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIE1hcmsgYSBzdHJpbmcgYXMgc2Fm
        ZSBmb3IgdW5lc2NhcGVkIG91dHB1dCB3aXRoIEhhbmRsZWJhcnMuIElmIHlv
        dQogIHJldHVybiBIVE1MIGZyb20gYSBIYW5kbGViYXJzIGhlbHBlciwgdXNl
        IHRoaXMgZnVuY3Rpb24gdG8KICBlbnN1cmUgSGFuZGxlYmFycyBkb2VzIG5v
        dCBlc2NhcGUgdGhlIEhUTUwuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5T
        dHJpbmcuaHRtbFNhZmUoJzxkaXY+c29tZVN0cmluZzwvZGl2PicpCiAgYGBg
        CgogIEBtZXRob2QgaHRtbFNhZmUKICBAZm9yIEVtYmVyLlN0cmluZwogIEBz
        dGF0aWMKICBAcmV0dXJuIHtIYW5kbGViYXJzLlNhZmVTdHJpbmd9IGEgc3Ry
        aW5nIHRoYXQgd2lsbCBub3QgYmUgaHRtbCBlc2NhcGVkIGJ5IEhhbmRsZWJh
        cnMKKi8KRW1iZXIuU3RyaW5nLmh0bWxTYWZlID0gZnVuY3Rpb24oc3RyKSB7
        CiAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoc3RyKTsKfTsK
        CnZhciBodG1sU2FmZSA9IEVtYmVyLlN0cmluZy5odG1sU2FmZTsKCmlmIChF
        bWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFUy5TdHJpbmcpIHsKCiAgLyoqCiAgICBNYXJrIGEgc3Ry
        aW5nIGFzIGJlaW5nIHNhZmUgZm9yIHVuZXNjYXBlZCBvdXRwdXQgd2l0aCBI
        YW5kbGViYXJzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICc8ZGl2PnNvbWVT
        dHJpbmc8L2Rpdj4nLmh0bWxTYWZlKCkKICAgIGBgYAoKICAgIFNlZSBbRW1i
        ZXIuU3RyaW5nLmh0bWxTYWZlXSgvYXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5n
        Lmh0bWwjbWV0aG9kX2h0bWxTYWZlKS4KCiAgICBAbWV0aG9kIGh0bWxTYWZl
        CiAgICBAZm9yIFN0cmluZwogICAgQHJldHVybiB7SGFuZGxlYmFycy5TYWZl
        U3RyaW5nfSBhIHN0cmluZyB0aGF0IHdpbGwgbm90IGJlIGh0bWwgZXNjYXBl
        ZCBieSBIYW5kbGViYXJzCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmh0bWxT
        YWZlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gaHRtbFNhZmUodGhpcyk7
        CiAgfTsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpFbWJlci5IYW5kbGVi
        YXJzLnJlc29sdmVQYXRocyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICB2YXIg
        cmV0ID0gW10sCiAgICAgIGNvbnRleHRzID0gb3B0aW9ucy5jb250ZXh0cywK
        ICAgICAgcm9vdHMgPSBvcHRpb25zLnJvb3RzLAogICAgICBkYXRhID0gb3B0
        aW9ucy5kYXRhOwoKICBmb3IgKHZhciBpPTAsIGw9Y29udGV4dHMubGVuZ3Ro
        OyBpPGw7IGkrKykgewogICAgcmV0LnB1c2goIEVtYmVyLkhhbmRsZWJhcnMu
        Z2V0KHJvb3RzW2ldLCBjb250ZXh0c1tpXSwgeyBkYXRhOiBkYXRhIH0pICk7
        CiAgfQoKICByZXR1cm4gcmV0Owp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKmpzaGludCBuZXdjYXA6ZmFsc2UqLwovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBzZXQgPSBFbWJl
        ci5zZXQsIGdldCA9IEVtYmVyLmdldDsKdmFyIE1ldGFtb3JwaCA9IHJlcXVp
        cmVNb2R1bGUoJ21ldGFtb3JwaCcpOwoKZnVuY3Rpb24gbm90aWZ5TXV0YXRp
        b25MaXN0ZW5lcnMoKSB7CiAgRW1iZXIucnVuLm9uY2UoRW1iZXIuVmlldywg
        J25vdGlmeU11dGF0aW9uTGlzdGVuZXJzJyk7Cn0KCi8vIERPTU1hbmFnZXIg
        c2hvdWxkIGp1c3QgYWJzdHJhY3QgZG9tIG1hbmlwdWxhdGlvbiBiZXR3ZWVu
        IGpxdWVyeSBhbmQgbWV0YW1vcnBoCnZhciBET01NYW5hZ2VyID0gewogIHJl
        bW92ZTogZnVuY3Rpb24odmlldykgewogICAgdmlldy5tb3JwaC5yZW1vdmUo
        KTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgfSwKCiAgcHJl
        cGVuZDogZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmlldy5tb3JwaC5w
        cmVwZW5kKGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsK
        ICB9LAoKICBhZnRlcjogZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmll
        dy5tb3JwaC5hZnRlcihodG1sKTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVu
        ZXJzKCk7CiAgfSwKCiAgaHRtbDogZnVuY3Rpb24odmlldywgaHRtbCkgewog
        ICAgdmlldy5tb3JwaC5odG1sKGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25M
        aXN0ZW5lcnMoKTsKICB9LAoKICAvLyBUaGlzIGlzIG1lc3NlZCB1cC4KICBy
        ZXBsYWNlOiBmdW5jdGlvbih2aWV3KSB7CiAgICB2YXIgbW9ycGggPSB2aWV3
        Lm1vcnBoOwoKICAgIHZpZXcudHJhbnNpdGlvblRvKCdwcmVSZW5kZXInKTsK
        CiAgICBFbWJlci5ydW4uc2NoZWR1bGUoJ3JlbmRlcicsIHRoaXMsIGZ1bmN0
        aW9uKCkgewogICAgICBpZiAodmlldy5pc0Rlc3Ryb3lpbmcpIHsgcmV0dXJu
        OyB9CgogICAgICB2aWV3LmNsZWFyUmVuZGVyZWRDaGlsZHJlbigpOwogICAg
        ICB2YXIgYnVmZmVyID0gdmlldy5yZW5kZXJUb0J1ZmZlcigpOwoKICAgICAg
        dmlldy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlvbih2aWV3KSB7CiAgICAg
        ICAgdmlldy5wcm9wZXJ0eVdpbGxDaGFuZ2UoJ2VsZW1lbnQnKTsKICAgICAg
        fSk7CiAgICAgIHZpZXcudHJpZ2dlclJlY3Vyc2l2ZWx5KCd3aWxsSW5zZXJ0
        RWxlbWVudCcpOwoKICAgICAgbW9ycGgucmVwbGFjZVdpdGgoYnVmZmVyLnN0
        cmluZygpKTsKICAgICAgdmlldy50cmFuc2l0aW9uVG8oJ2luRE9NJyk7Cgog
        ICAgICB2aWV3Lmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKHZpZXcpIHsK
        ICAgICAgICB2aWV3LnByb3BlcnR5RGlkQ2hhbmdlKCdlbGVtZW50Jyk7CiAg
        ICAgIH0pOwogICAgICB2aWV3LnRyaWdnZXJSZWN1cnNpdmVseSgnZGlkSW5z
        ZXJ0RWxlbWVudCcpOwoKICAgICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMo
        KTsKICAgIH0pOwogIH0sCgogIGVtcHR5OiBmdW5jdGlvbih2aWV3KSB7CiAg
        ICB2aWV3Lm1vcnBoLmh0bWwoIiIpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0
        ZW5lcnMoKTsKICB9Cn07CgovLyBUaGUgYG1vcnBoYCBhbmQgYG91dGVySFRN
        TGAgcHJvcGVydGllcyBhcmUgaW50ZXJuYWwgb25seQovLyBhbmQgbm90IG9i
        c2VydmFibGUuCgovKioKICBAY2xhc3MgX01ldGFtb3JwaAogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAcHJpdmF0ZQoqLwpFbWJlci5fTWV0YW1vcnBoID0gRW1i
        ZXIuTWl4aW4uY3JlYXRlKHsKICBpc1ZpcnR1YWw6IHRydWUsCiAgdGFnTmFt
        ZTogJycsCgogIGluc3RydW1lbnROYW1lOiAnbWV0YW1vcnBoJywKCiAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5t
        b3JwaCA9IE1ldGFtb3JwaCgpOwogICAgRW1iZXIuZGVwcmVjYXRlKCdTdXBw
        bHlpbmcgYSB0YWdOYW1lIHRvIE1ldGFtb3JwaCB2aWV3cyBpcyB1bnJlbGlh
        YmxlIGFuZCBpcyBkZXByZWNhdGVkLiBZb3UgbWF5IGJlIHNldHRpbmcgdGhl
        IHRhZ05hbWUgb24gYSBIYW5kbGViYXJzIGhlbHBlciB0aGF0IGNyZWF0ZXMg
        YSBNZXRhbW9ycGguJywgIXRoaXMudGFnTmFtZSk7CiAgfSwKCiAgYmVmb3Jl
        UmVuZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAgIGJ1ZmZlci5wdXNoKHRo
        aXMubW9ycGguc3RhcnRUYWcoKSk7CiAgICBidWZmZXIucHVzaE9wZW5pbmdU
        YWcoKTsKICB9LAoKICBhZnRlclJlbmRlcjogZnVuY3Rpb24oYnVmZmVyKSB7
        CiAgICBidWZmZXIucHVzaENsb3NpbmdUYWcoKTsKICAgIGJ1ZmZlci5wdXNo
        KHRoaXMubW9ycGguZW5kVGFnKCkpOwogIH0sCgogIGNyZWF0ZUVsZW1lbnQ6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIGJ1ZmZlciA9IHRoaXMucmVuZGVyVG9C
        dWZmZXIoKTsKICAgIHRoaXMub3V0ZXJIVE1MID0gYnVmZmVyLnN0cmluZygp
        OwogICAgdGhpcy5jbGVhckJ1ZmZlcigpOwogIH0sCgogIGRvbU1hbmFnZXI6
        IERPTU1hbmFnZXIKfSk7CgovKioKICBAY2xhc3MgX01ldGFtb3JwaFZpZXcK
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuVmlldwogIEB1
        c2VzIEVtYmVyLl9NZXRhbW9ycGgKICBAcHJpdmF0ZQoqLwpFbWJlci5fTWV0
        YW1vcnBoVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVyLl9NZXRhbW9y
        cGgpOwoKLyoqCiAgQGNsYXNzIF9TaW1wbGVNZXRhbW9ycGhWaWV3CiAgQG5h
        bWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLkNvcmVWaWV3CiAgQHVz
        ZXMgRW1iZXIuX01ldGFtb3JwaAogIEBwcml2YXRlCiovCkVtYmVyLl9TaW1w
        bGVNZXRhbW9ycGhWaWV3ID0gRW1iZXIuQ29yZVZpZXcuZXh0ZW5kKEVtYmVy
        Ll9NZXRhbW9ycGgpOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypnbG9i
        YWxzIEhhbmRsZWJhcnMgKi8KLypqc2hpbnQgbmV3Y2FwOmZhbHNlKi8KLyoq
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGhhbmRs
        ZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJzLmdldDsKdmFyIE1ldGFtb3Jw
        aCA9IHJlcXVpcmVNb2R1bGUoJ21ldGFtb3JwaCcpOwpmdW5jdGlvbiBTaW1w
        bGVIYW5kbGViYXJzVmlldyhwYXRoLCBwYXRoUm9vdCwgaXNFc2NhcGVkLCB0
        ZW1wbGF0ZURhdGEpIHsKICB0aGlzLnBhdGggPSBwYXRoOwogIHRoaXMucGF0
        aFJvb3QgPSBwYXRoUm9vdDsKICB0aGlzLmlzRXNjYXBlZCA9IGlzRXNjYXBl
        ZDsKICB0aGlzLnRlbXBsYXRlRGF0YSA9IHRlbXBsYXRlRGF0YTsKCiAgdGhp
        cy5tb3JwaCA9IE1ldGFtb3JwaCgpOwogIHRoaXMuc3RhdGUgPSAncHJlUmVu
        ZGVyJzsKICB0aGlzLnVwZGF0ZUlkID0gbnVsbDsKICB0aGlzLl9wYXJlbnRW
        aWV3ID0gbnVsbDsKICB0aGlzLmJ1ZmZlciA9IG51bGw7Cn0KCkVtYmVyLl9T
        aW1wbGVIYW5kbGViYXJzVmlldyA9IFNpbXBsZUhhbmRsZWJhcnNWaWV3OwoK
        U2ltcGxlSGFuZGxlYmFyc1ZpZXcucHJvdG90eXBlID0gewogIGlzVmlydHVh
        bDogdHJ1ZSwKICBpc1ZpZXc6IHRydWUsCgogIGRlc3Ryb3k6IGZ1bmN0aW9u
        ICgpIHsKICAgIGlmICh0aGlzLnVwZGF0ZUlkKSB7CiAgICAgIEVtYmVyLnJ1
        bi5jYW5jZWwodGhpcy51cGRhdGVJZCk7CiAgICAgIHRoaXMudXBkYXRlSWQg
        PSBudWxsOwogICAgfQogICAgaWYgKHRoaXMuX3BhcmVudFZpZXcpIHsKICAg
        ICAgdGhpcy5fcGFyZW50Vmlldy5yZW1vdmVDaGlsZCh0aGlzKTsKICAgIH0K
        ICAgIHRoaXMubW9ycGggPSBudWxsOwogICAgdGhpcy5zdGF0ZSA9ICdkZXN0
        cm95ZWQnOwogIH0sCgogIHByb3BlcnR5V2lsbENoYW5nZTogRW1iZXIuSywK
        CiAgcHJvcGVydHlEaWRDaGFuZ2U6IEVtYmVyLkssCgogIG5vcm1hbGl6ZWRW
        YWx1ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcGF0aCA9IHRoaXMucGF0aCwK
        ICAgICAgICBwYXRoUm9vdCA9IHRoaXMucGF0aFJvb3QsCiAgICAgICAgcmVz
        dWx0LCB0ZW1wbGF0ZURhdGE7CgogICAgLy8gVXNlIHRoZSBwYXRoUm9vdCBh
        cyB0aGUgcmVzdWx0IGlmIG5vIHBhdGggaXMgcHJvdmlkZWQuIFRoaXMKICAg
        IC8vIGhhcHBlbnMgaWYgdGhlIHBhdGggaXMgYHRoaXNgLCB3aGljaCBnZXRz
        IG5vcm1hbGl6ZWQgaW50bwogICAgLy8gYSBgcGF0aFJvb3RgIG9mIHRoZSBj
        dXJyZW50IEhhbmRsZWJhcnMgY29udGV4dCBhbmQgYSBwYXRoCiAgICAvLyBv
        ZiBgJydgLgogICAgaWYgKHBhdGggPT09ICcnKSB7CiAgICAgIHJlc3VsdCA9
        IHBhdGhSb290OwogICAgfSBlbHNlIHsKICAgICAgdGVtcGxhdGVEYXRhID0g
        dGhpcy50ZW1wbGF0ZURhdGE7CiAgICAgIHJlc3VsdCA9IGhhbmRsZWJhcnNH
        ZXQocGF0aFJvb3QsIHBhdGgsIHsgZGF0YTogdGVtcGxhdGVEYXRhIH0pOwog
        ICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwKCiAgcmVuZGVyVG9CdWZm
        ZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgdmFyIHN0cmluZyA9ICcnOwoK
        ICAgIHN0cmluZyArPSB0aGlzLm1vcnBoLnN0YXJ0VGFnKCk7CiAgICBzdHJp
        bmcgKz0gdGhpcy5yZW5kZXIoKTsKICAgIHN0cmluZyArPSB0aGlzLm1vcnBo
        LmVuZFRhZygpOwoKICAgIGJ1ZmZlci5wdXNoKHN0cmluZyk7CiAgfSwKCiAg
        cmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIC8vIElmIG5vdCBpbnZva2VkIHZp
        YSBhIHRyaXBsZS1tdXN0YWNoZSAoe3t7Zm9vfX19KSwgZXNjYXBlCiAgICAv
        LyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUuCiAgICB2YXIgZXNjYXBl
        ID0gdGhpcy5pc0VzY2FwZWQ7CiAgICB2YXIgcmVzdWx0ID0gdGhpcy5ub3Jt
        YWxpemVkVmFsdWUoKTsKCiAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJl
        c3VsdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJlc3VsdCA9ICIiOwogICAg
        fSBlbHNlIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIEhhbmRsZWJhcnMuU2Fm
        ZVN0cmluZykpIHsKICAgICAgcmVzdWx0ID0gU3RyaW5nKHJlc3VsdCk7CiAg
        ICB9CgogICAgaWYgKGVzY2FwZSkgeyByZXN1bHQgPSBIYW5kbGViYXJzLlV0
        aWxzLmVzY2FwZUV4cHJlc3Npb24ocmVzdWx0KTsgfQogICAgcmV0dXJuIHJl
        c3VsdDsKICB9LAoKICByZXJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICBzd2l0
        Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlICdwcmVSZW5kZXInOgogICAg
        ICBjYXNlICdkZXN0cm95ZWQnOgogICAgICAgIGJyZWFrOwogICAgICBjYXNl
        ICdpbkJ1ZmZlcic6CiAgICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJT
        b21ldGhpbmcgeW91IGRpZCB0cmllZCB0byByZXBsYWNlIGFuIHt7ZXhwcmVz
        c2lvbn19IGJlZm9yZSBpdCB3YXMgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLiIp
        OwogICAgICBjYXNlICdoYXNFbGVtZW50JzoKICAgICAgY2FzZSAnaW5ET00n
        OgogICAgICAgIHRoaXMudXBkYXRlSWQgPSBFbWJlci5ydW4uc2NoZWR1bGVP
        bmNlKCdyZW5kZXInLCB0aGlzLCAndXBkYXRlJyk7CiAgICAgICAgYnJlYWs7
        CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgdXBkYXRlOiBmdW5j
        dGlvbiAoKSB7CiAgICB0aGlzLnVwZGF0ZUlkID0gbnVsbDsKICAgIHRoaXMu
        bW9ycGguaHRtbCh0aGlzLnJlbmRlcigpKTsKICB9LAoKICB0cmFuc2l0aW9u
        VG86IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB0aGlzLnN0YXRlID0gc3RhdGU7
        CiAgfQp9OwoKdmFyIHN0YXRlcyA9IEVtYmVyLlZpZXcuY2xvbmVTdGF0ZXMo
        RW1iZXIuVmlldy5zdGF0ZXMpLCBtZXJnZSA9IEVtYmVyLm1lcmdlOwoKbWVy
        Z2Uoc3RhdGVzLl9kZWZhdWx0LCB7CiAgcmVyZW5kZXJJZk5lZWRlZDogRW1i
        ZXIuSwp9KTsKCm1lcmdlKHN0YXRlcy5pbkRPTSwgewogIHJlcmVuZGVySWZO
        ZWVkZWQ6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIGlmICh2aWV3Lm5vcm1hbGl6
        ZWRWYWx1ZSgpICE9PSB2aWV3Ll9sYXN0Tm9ybWFsaXplZFZhbHVlKSB7CiAg
        ICAgIHZpZXcucmVyZW5kZXIoKTsKICAgIH0KICB9Cn0pOwoKLyoqCiAgYEVt
        YmVyLl9IYW5kbGViYXJzQm91bmRWaWV3YCBpcyBhIHByaXZhdGUgdmlldyBj
        cmVhdGVkIGJ5IHRoZSBIYW5kbGViYXJzCiAgYHt7YmluZH19YCBoZWxwZXJz
        IHRoYXQgaXMgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGJvdW5kIHByb3BlcnRp
        ZXMuCgogIEV2ZXJ5IHRpbWUgYSBwcm9wZXJ0eSBpcyBib3VuZCB1c2luZyBh
        IGB7e211c3RhY2hlfX1gLCBhbiBhbm9ueW1vdXMgc3ViY2xhc3MKICBvZiBg
        RW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXdgIGlzIGNyZWF0ZWQgd2l0aCB0
        aGUgYXBwcm9wcmlhdGUgc3ViLXRlbXBsYXRlCiAgYW5kIGNvbnRleHQgc2V0
        IHVwLiBXaGVuIHRoZSBhc3NvY2lhdGVkIHByb3BlcnR5IGNoYW5nZXMsIGp1
        c3QgdGhlIHRlbXBsYXRlCiAgZm9yIHRoaXMgdmlldyB3aWxsIHJlLXJlbmRl
        ci4KCiAgQGNsYXNzIF9IYW5kbGViYXJzQm91bmRWaWV3CiAgQG5hbWVzcGFj
        ZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLl9NZXRhbW9ycGhWaWV3CiAgQHBy
        aXZhdGUKKi8KRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXcgPSBFbWJlci5f
        TWV0YW1vcnBoVmlldy5leHRlbmQoewogIGluc3RydW1lbnROYW1lOiAnYm91
        bmRIYW5kbGViYXJzJywKICBzdGF0ZXM6IHN0YXRlcywKCiAgLyoqCiAgICBU
        aGUgZnVuY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGBkaXNwbGF5
        VGVtcGxhdGVgIG9yCiAgICBgaW52ZXJzZVRlbXBsYXRlYCBzaG91bGQgYmUg
        cmVuZGVyZWQuIFRoaXMgc2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdCB0YWtl
        cwogICAgYSB2YWx1ZSBhbmQgcmV0dXJucyBhIEJvb2xlYW4uCgogICAgQHBy
        b3BlcnR5IHNob3VsZERpc3BsYXlGdW5jCiAgICBAdHlwZSBGdW5jdGlvbgog
        ICAgQGRlZmF1bHQgbnVsbAogICovCiAgc2hvdWxkRGlzcGxheUZ1bmM6IG51
        bGwsCgogIC8qKgogICAgV2hldGhlciB0aGUgdGVtcGxhdGUgcmVuZGVyZWQg
        YnkgdGhpcyB2aWV3IGdldHMgcGFzc2VkIHRoZSBjb250ZXh0IG9iamVjdAog
        ICAgb2YgaXRzIHBhcmVudCB0ZW1wbGF0ZSwgb3IgZ2V0cyBwYXNzZWQgdGhl
        IHZhbHVlIG9mIHJldHJpZXZpbmcgYHBhdGhgCiAgICBmcm9tIHRoZSBgcGF0
        aFJvb3RgLgoKICAgIEZvciBleGFtcGxlLCB0aGlzIGlzIHRydWUgd2hlbiB1
        c2luZyB0aGUgYHt7I2lmfX1gIGhlbHBlciwgYmVjYXVzZSB0aGUKICAgIHRl
        bXBsYXRlIGluc2lkZSB0aGUgaGVscGVyIHNob3VsZCBsb29rIHVwIHByb3Bl
        cnRpZXMgcmVsYXRpdmUgdG8gdGhlIHNhbWUKICAgIG9iamVjdCBhcyBvdXRz
        aWRlIHRoZSBibG9jay4gVGhpcyB3b3VsZCBiZSBgZmFsc2VgIHdoZW4gdXNl
        ZCB3aXRoIGB7eyN3aXRoCiAgICBmb299fWAgYmVjYXVzZSB0aGUgdGVtcGxh
        dGUgc2hvdWxkIHJlY2VpdmUgdGhlIG9iamVjdCBmb3VuZCBieSBldmFsdWF0
        aW5nCiAgICBgZm9vYC4KCiAgICBAcHJvcGVydHkgcHJlc2VydmVDb250ZXh0
        CiAgICBAdHlwZSBCb29sZWFuCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAg
        cHJlc2VydmVDb250ZXh0OiBmYWxzZSwKCiAgLyoqCiAgICBJZiBgcHJlc2Vy
        dmVDb250ZXh0YCBpcyB0cnVlLCB0aGlzIGlzIHRoZSBvYmplY3QgdGhhdCB3
        aWxsIGJlIHVzZWQKICAgIHRvIHJlbmRlciB0aGUgdGVtcGxhdGUuCgogICAg
        QHByb3BlcnR5IHByZXZpb3VzQ29udGV4dAogICAgQHR5cGUgT2JqZWN0CiAg
        Ki8KICBwcmV2aW91c0NvbnRleHQ6IG51bGwsCgogIC8qKgogICAgVGhlIHRl
        bXBsYXRlIHRvIHJlbmRlciB3aGVuIGBzaG91bGREaXNwbGF5RnVuY2AgZXZh
        bHVhdGVzIHRvIGB0cnVlYC4KCiAgICBAcHJvcGVydHkgZGlzcGxheVRlbXBs
        YXRlCiAgICBAdHlwZSBGdW5jdGlvbgogICAgQGRlZmF1bHQgbnVsbAogICov
        CiAgZGlzcGxheVRlbXBsYXRlOiBudWxsLAoKICAvKioKICAgIFRoZSB0ZW1w
        bGF0ZSB0byByZW5kZXIgd2hlbiBgc2hvdWxkRGlzcGxheUZ1bmNgIGV2YWx1
        YXRlcyB0byBgZmFsc2VgLgoKICAgIEBwcm9wZXJ0eSBpbnZlcnNlVGVtcGxh
        dGUKICAgIEB0eXBlIEZ1bmN0aW9uCiAgICBAZGVmYXVsdCBudWxsCiAgKi8K
        ICBpbnZlcnNlVGVtcGxhdGU6IG51bGwsCgoKICAvKioKICAgIFRoZSBwYXRo
        IHRvIGxvb2sgdXAgb24gYHBhdGhSb290YCB0aGF0IGlzIHBhc3NlZCB0bwog
        ICAgYHNob3VsZERpc3BsYXlGdW5jYCB0byBkZXRlcm1pbmUgd2hpY2ggdGVt
        cGxhdGUgdG8gcmVuZGVyLgoKICAgIEluIGFkZGl0aW9uLCBpZiBgcHJlc2Vy
        dmVDb250ZXh0YCBpcyBgZmFsc2UsYCB0aGUgb2JqZWN0IGF0IHRoaXMgcGF0
        aCB3aWxsCiAgICBiZSBwYXNzZWQgdG8gdGhlIHRlbXBsYXRlIHdoZW4gcmVu
        ZGVyaW5nLgoKICAgIEBwcm9wZXJ0eSBwYXRoCiAgICBAdHlwZSBTdHJpbmcK
        ICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHBhdGg6IG51bGwsCgogIC8qKgog
        ICAgVGhlIG9iamVjdCBmcm9tIHdoaWNoIHRoZSBgcGF0aGAgd2lsbCBiZSBs
        b29rZWQgdXAuIFNvbWV0aW1lcyB0aGlzIGlzIHRoZQogICAgc2FtZSBhcyB0
        aGUgYHByZXZpb3VzQ29udGV4dGAsIGJ1dCBpbiBjYXNlcyB3aGVyZSB0aGlz
        IHZpZXcgaGFzIGJlZW4KICAgIGdlbmVyYXRlZCBmb3IgcGF0aHMgdGhhdCBz
        dGFydCB3aXRoIGEga2V5d29yZCBzdWNoIGFzIGB2aWV3YCBvcgogICAgYGNv
        bnRyb2xsZXJgLCB0aGUgcGF0aCByb290IHdpbGwgYmUgdGhhdCByZXNvbHZl
        ZCBvYmplY3QuCgogICAgQHByb3BlcnR5IHBhdGhSb290CiAgICBAdHlwZSBP
        YmplY3QKICAqLwogIHBhdGhSb290OiBudWxsLAoKICBub3JtYWxpemVkVmFs
        dWU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBhdGggPSBnZXQodGhpcywgJ3Bh
        dGgnKSwKICAgICAgICBwYXRoUm9vdCAgPSBnZXQodGhpcywgJ3BhdGhSb290
        JyksCiAgICAgICAgdmFsdWVOb3JtYWxpemVyID0gZ2V0KHRoaXMsICd2YWx1
        ZU5vcm1hbGl6ZXJGdW5jJyksCiAgICAgICAgcmVzdWx0LCB0ZW1wbGF0ZURh
        dGE7CgogICAgLy8gVXNlIHRoZSBwYXRoUm9vdCBhcyB0aGUgcmVzdWx0IGlm
        IG5vIHBhdGggaXMgcHJvdmlkZWQuIFRoaXMKICAgIC8vIGhhcHBlbnMgaWYg
        dGhlIHBhdGggaXMgYHRoaXNgLCB3aGljaCBnZXRzIG5vcm1hbGl6ZWQgaW50
        bwogICAgLy8gYSBgcGF0aFJvb3RgIG9mIHRoZSBjdXJyZW50IEhhbmRsZWJh
        cnMgY29udGV4dCBhbmQgYSBwYXRoCiAgICAvLyBvZiBgJydgLgogICAgaWYg
        KHBhdGggPT09ICcnKSB7CiAgICAgIHJlc3VsdCA9IHBhdGhSb290OwogICAg
        fSBlbHNlIHsKICAgICAgdGVtcGxhdGVEYXRhID0gZ2V0KHRoaXMsICd0ZW1w
        bGF0ZURhdGEnKTsKICAgICAgcmVzdWx0ID0gaGFuZGxlYmFyc0dldChwYXRo
        Um9vdCwgcGF0aCwgeyBkYXRhOiB0ZW1wbGF0ZURhdGEgfSk7CiAgICB9Cgog
        ICAgcmV0dXJuIHZhbHVlTm9ybWFsaXplciA/IHZhbHVlTm9ybWFsaXplcihy
        ZXN1bHQpIDogcmVzdWx0OwogIH0sCgogIHJlcmVuZGVySWZOZWVkZWQ6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5jdXJyZW50U3RhdGUucmVyZW5kZXJJZk5l
        ZWRlZCh0aGlzKTsKICB9LAoKICAvKioKICAgIERldGVybWluZXMgd2hpY2gg
        dGVtcGxhdGUgdG8gaW52b2tlLCBzZXRzIHVwIHRoZSBjb3JyZWN0IHN0YXRl
        IGJhc2VkIG9uCiAgICB0aGF0IGxvZ2ljLCB0aGVuIGludm9rZXMgdGhlIGRl
        ZmF1bHQgYEVtYmVyLlZpZXdgIGByZW5kZXJgIGltcGxlbWVudGF0aW9uLgoK
        ICAgIFRoaXMgbWV0aG9kIHdpbGwgZmlyc3QgbG9vayB1cCB0aGUgYHBhdGhg
        IGtleSBvbiBgcGF0aFJvb3RgLAogICAgdGhlbiBwYXNzIHRoYXQgdmFsdWUg
        dG8gdGhlIGBzaG91bGREaXNwbGF5RnVuY2AgZnVuY3Rpb24uIElmIHRoYXQg
        cmV0dXJucwogICAgYHRydWUsYCB0aGUgYGRpc3BsYXlUZW1wbGF0ZWAgZnVu
        Y3Rpb24gd2lsbCBiZSByZW5kZXJlZCB0byBET00uIE90aGVyd2lzZSwKICAg
        IGBpbnZlcnNlVGVtcGxhdGVgLCBpZiBzcGVjaWZpZWQsIHdpbGwgYmUgcmVu
        ZGVyZWQuCgogICAgRm9yIGV4YW1wbGUsIGlmIHRoaXMgYEVtYmVyLl9IYW5k
        bGViYXJzQm91bmRWaWV3YCByZXByZXNlbnRlZCB0aGUgYHt7I3dpdGgKICAg
        IGZvb319YCBoZWxwZXIsIGl0IHdvdWxkIGxvb2sgdXAgdGhlIGBmb29gIHBy
        b3BlcnR5IG9mIGl0cyBjb250ZXh0LCBhbmQKICAgIGBzaG91bGREaXNwbGF5
        RnVuY2Agd291bGQgYWx3YXlzIHJldHVybiB0cnVlLiBUaGUgb2JqZWN0IGZv
        dW5kIGJ5IGxvb2tpbmcKICAgIHVwIGBmb29gIHdvdWxkIGJlIHBhc3NlZCB0
        byBgZGlzcGxheVRlbXBsYXRlYC4KCiAgICBAbWV0aG9kIHJlbmRlcgogICAg
        QHBhcmFtIHtFbWJlci5SZW5kZXJCdWZmZXJ9IGJ1ZmZlcgogICovCiAgcmVu
        ZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAgIC8vIElmIG5vdCBpbnZva2Vk
        IHZpYSBhIHRyaXBsZS1tdXN0YWNoZSAoe3t7Zm9vfX19KSwgZXNjYXBlCiAg
        ICAvLyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUuCiAgICB2YXIgZXNj
        YXBlID0gZ2V0KHRoaXMsICdpc0VzY2FwZWQnKTsKCiAgICB2YXIgc2hvdWxk
        RGlzcGxheSA9IGdldCh0aGlzLCAnc2hvdWxkRGlzcGxheUZ1bmMnKSwKICAg
        ICAgICBwcmVzZXJ2ZUNvbnRleHQgPSBnZXQodGhpcywgJ3ByZXNlcnZlQ29u
        dGV4dCcpLAogICAgICAgIGNvbnRleHQgPSBnZXQodGhpcywgJ3ByZXZpb3Vz
        Q29udGV4dCcpOwoKICAgIHZhciBpbnZlcnNlVGVtcGxhdGUgPSBnZXQodGhp
        cywgJ2ludmVyc2VUZW1wbGF0ZScpLAogICAgICAgIGRpc3BsYXlUZW1wbGF0
        ZSA9IGdldCh0aGlzLCAnZGlzcGxheVRlbXBsYXRlJyk7CgogICAgdmFyIHJl
        c3VsdCA9IHRoaXMubm9ybWFsaXplZFZhbHVlKCk7CiAgICB0aGlzLl9sYXN0
        Tm9ybWFsaXplZFZhbHVlID0gcmVzdWx0OwoKICAgIC8vIEZpcnN0LCB0ZXN0
        IHRoZSBjb25kaXRpb25hbCB0byBzZWUgaWYgd2Ugc2hvdWxkCiAgICAvLyBy
        ZW5kZXIgdGhlIHRlbXBsYXRlIG9yIG5vdC4KICAgIGlmIChzaG91bGREaXNw
        bGF5KHJlc3VsdCkpIHsKICAgICAgc2V0KHRoaXMsICd0ZW1wbGF0ZScsIGRp
        c3BsYXlUZW1wbGF0ZSk7CgogICAgICAvLyBJZiB3ZSBhcmUgcHJlc2Vydmlu
        ZyB0aGUgY29udGV4dCAoZm9yIGV4YW1wbGUsIGlmIHRoaXMKICAgICAgLy8g
        aXMgYW4gI2lmIGJsb2NrLCBjYWxsIHRoZSB0ZW1wbGF0ZSB3aXRoIHRoZSBz
        YW1lIG9iamVjdC4KICAgICAgaWYgKHByZXNlcnZlQ29udGV4dCkgewogICAg
        ICAgIHNldCh0aGlzLCAnX2NvbnRleHQnLCBjb250ZXh0KTsKICAgICAgfSBl
        bHNlIHsKICAgICAgLy8gT3RoZXJ3aXNlLCBkZXRlcm1pbmUgaWYgdGhpcyBp
        cyBhIGJsb2NrIGJpbmQgb3Igbm90LgogICAgICAvLyBJZiBzbywgcGFzcyB0
        aGUgc3BlY2lmaWVkIG9iamVjdCB0byB0aGUgdGVtcGxhdGUKICAgICAgICBp
        ZiAoZGlzcGxheVRlbXBsYXRlKSB7CiAgICAgICAgICBzZXQodGhpcywgJ19j
        b250ZXh0JywgcmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgIC8v
        IFRoaXMgaXMgbm90IGEgYmluZCBibG9jaywganVzdCBwdXNoIHRoZSByZXN1
        bHQgb2YgdGhlCiAgICAgICAgLy8gZXhwcmVzc2lvbiB0byB0aGUgcmVuZGVy
        IGNvbnRleHQgYW5kIHJldHVybi4KICAgICAgICAgIGlmIChyZXN1bHQgPT09
        IG51bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAg
        cmVzdWx0ID0gIiI7CiAgICAgICAgICB9IGVsc2UgaWYgKCEocmVzdWx0IGlu
        c3RhbmNlb2YgSGFuZGxlYmFycy5TYWZlU3RyaW5nKSkgewogICAgICAgICAg
        ICByZXN1bHQgPSBTdHJpbmcocmVzdWx0KTsKICAgICAgICAgIH0KCiAgICAg
        ICAgICBpZiAoZXNjYXBlKSB7IHJlc3VsdCA9IEhhbmRsZWJhcnMuVXRpbHMu
        ZXNjYXBlRXhwcmVzc2lvbihyZXN1bHQpOyB9CiAgICAgICAgICBidWZmZXIu
        cHVzaChyZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAg
        ICAgfQogICAgfSBlbHNlIGlmIChpbnZlcnNlVGVtcGxhdGUpIHsKICAgICAg
        c2V0KHRoaXMsICd0ZW1wbGF0ZScsIGludmVyc2VUZW1wbGF0ZSk7CgogICAg
        ICBpZiAocHJlc2VydmVDb250ZXh0KSB7CiAgICAgICAgc2V0KHRoaXMsICdf
        Y29udGV4dCcsIGNvbnRleHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHNl
        dCh0aGlzLCAnX2NvbnRleHQnLCByZXN1bHQpOwogICAgICB9CiAgICB9IGVs
        c2UgewogICAgICBzZXQodGhpcywgJ3RlbXBsYXRlJywgZnVuY3Rpb24oKSB7
        IHJldHVybiAnJzsgfSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3N1cGVy
        KGJ1ZmZlcik7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGZtdCA9
        IEVtYmVyLlN0cmluZy5mbXQ7CnZhciBoYW5kbGViYXJzR2V0ID0gRW1iZXIu
        SGFuZGxlYmFycy5nZXQsIG5vcm1hbGl6ZVBhdGggPSBFbWJlci5IYW5kbGVi
        YXJzLm5vcm1hbGl6ZVBhdGg7CnZhciBmb3JFYWNoID0gRW1iZXIuQXJyYXlQ
        b2x5ZmlsbHMuZm9yRWFjaDsKCnZhciBFbWJlckhhbmRsZWJhcnMgPSBFbWJl
        ci5IYW5kbGViYXJzLCBoZWxwZXJzID0gRW1iZXJIYW5kbGViYXJzLmhlbHBl
        cnM7CgpmdW5jdGlvbiBleGlzdHModmFsdWUpIHsKICByZXR1cm4gIUVtYmVy
        LmlzTm9uZSh2YWx1ZSk7Cn0KCi8vIEJpbmRzIGEgcHJvcGVydHkgaW50byB0
        aGUgRE9NLiBUaGlzIHdpbGwgY3JlYXRlIGEgaG9vayBpbiBET00gdGhhdCB0
        aGUKLy8gS1ZPIHN5c3RlbSB3aWxsIGxvb2sgZm9yIGFuZCB1cGRhdGUgaWYg
        dGhlIHByb3BlcnR5IGNoYW5nZXMuCmZ1bmN0aW9uIGJpbmQocHJvcGVydHks
        IG9wdGlvbnMsIHByZXNlcnZlQ29udGV4dCwgc2hvdWxkRGlzcGxheSwgdmFs
        dWVOb3JtYWxpemVyLCBjaGlsZFByb3BlcnRpZXMpIHsKICB2YXIgZGF0YSA9
        IG9wdGlvbnMuZGF0YSwKICAgICAgZm4gPSBvcHRpb25zLmZuLAogICAgICBp
        bnZlcnNlID0gb3B0aW9ucy5pbnZlcnNlLAogICAgICB2aWV3ID0gZGF0YS52
        aWV3LAogICAgICBjdXJyZW50Q29udGV4dCA9IHRoaXMsCiAgICAgIG5vcm1h
        bGl6ZWQsIG9ic2VydmVyLCBpOwoKICBub3JtYWxpemVkID0gbm9ybWFsaXpl
        UGF0aChjdXJyZW50Q29udGV4dCwgcHJvcGVydHksIGRhdGEpOwoKICAvLyBT
        ZXQgdXAgb2JzZXJ2ZXJzIGZvciBvYnNlcnZhYmxlIG9iamVjdHMKICBpZiAo
        J29iamVjdCcgPT09IHR5cGVvZiB0aGlzKSB7CiAgICBpZiAoZGF0YS5pbnNp
        ZGVHcm91cCkgewogICAgICBvYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogICAg
        ICAgIEVtYmVyLnJ1bi5vbmNlKHZpZXcsICdyZXJlbmRlcicpOwogICAgICB9
        OwoKICAgICAgdmFyIHRlbXBsYXRlLCBjb250ZXh0LCByZXN1bHQgPSBoYW5k
        bGViYXJzR2V0KGN1cnJlbnRDb250ZXh0LCBwcm9wZXJ0eSwgb3B0aW9ucyk7
        CgogICAgICByZXN1bHQgPSB2YWx1ZU5vcm1hbGl6ZXIgPyB2YWx1ZU5vcm1h
        bGl6ZXIocmVzdWx0KSA6IHJlc3VsdDsKCiAgICAgIGNvbnRleHQgPSBwcmVz
        ZXJ2ZUNvbnRleHQgPyBjdXJyZW50Q29udGV4dCA6IHJlc3VsdDsKICAgICAg
        aWYgKHNob3VsZERpc3BsYXkocmVzdWx0KSkgewogICAgICAgIHRlbXBsYXRl
        ID0gZm47CiAgICAgIH0gZWxzZSBpZiAoaW52ZXJzZSkgewogICAgICAgIHRl
        bXBsYXRlID0gaW52ZXJzZTsKICAgICAgfQoKICAgICAgdGVtcGxhdGUoY29u
        dGV4dCwgeyBkYXRhOiBvcHRpb25zLmRhdGEgfSk7CiAgICB9IGVsc2Ugewog
        ICAgICAvLyBDcmVhdGUgdGhlIHZpZXcgdGhhdCB3aWxsIHdyYXAgdGhlIG91
        dHB1dCBvZiB0aGlzIHRlbXBsYXRlL3Byb3BlcnR5CiAgICAgIC8vIGFuZCBh
        ZGQgaXQgdG8gdGhlIG5lYXJlc3QgdmlldydzIGNoaWxkVmlld3MgYXJyYXku
        CiAgICAgIC8vIFNlZSB0aGUgZG9jdW1lbnRhdGlvbiBvZiBFbWJlci5fSGFu
        ZGxlYmFyc0JvdW5kVmlldyBmb3IgbW9yZS4KICAgICAgdmFyIGJpbmRWaWV3
        ID0gdmlldy5jcmVhdGVDaGlsZFZpZXcoRW1iZXIuX0hhbmRsZWJhcnNCb3Vu
        ZFZpZXcsIHsKICAgICAgICBwcmVzZXJ2ZUNvbnRleHQ6IHByZXNlcnZlQ29u
        dGV4dCwKICAgICAgICBzaG91bGREaXNwbGF5RnVuYzogc2hvdWxkRGlzcGxh
        eSwKICAgICAgICB2YWx1ZU5vcm1hbGl6ZXJGdW5jOiB2YWx1ZU5vcm1hbGl6
        ZXIsCiAgICAgICAgZGlzcGxheVRlbXBsYXRlOiBmbiwKICAgICAgICBpbnZl
        cnNlVGVtcGxhdGU6IGludmVyc2UsCiAgICAgICAgcGF0aDogcHJvcGVydHks
        CiAgICAgICAgcGF0aFJvb3Q6IGN1cnJlbnRDb250ZXh0LAogICAgICAgIHBy
        ZXZpb3VzQ29udGV4dDogY3VycmVudENvbnRleHQsCiAgICAgICAgaXNFc2Nh
        cGVkOiAhb3B0aW9ucy5oYXNoLnVuZXNjYXBlZCwKICAgICAgICB0ZW1wbGF0
        ZURhdGE6IG9wdGlvbnMuZGF0YQogICAgICB9KTsKCiAgICAgIHZpZXcuYXBw
        ZW5kQ2hpbGQoYmluZFZpZXcpOwoKICAgICAgb2JzZXJ2ZXIgPSBmdW5jdGlv
        bigpIHsKICAgICAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyZW5kZXIn
        LCBiaW5kVmlldywgJ3JlcmVuZGVySWZOZWVkZWQnKTsKICAgICAgfTsKICAg
        IH0KCiAgICAvLyBPYnNlcnZlcyB0aGUgZ2l2ZW4gcHJvcGVydHkgb24gdGhl
        IGNvbnRleHQgYW5kCiAgICAvLyB0ZWxscyB0aGUgRW1iZXIuX0hhbmRsZWJh
        cnNCb3VuZFZpZXcgdG8gcmUtcmVuZGVyLiBJZiBwcm9wZXJ0eQogICAgLy8g
        aXMgYW4gZW1wdHkgc3RyaW5nLCB3ZSBhcmUgcHJpbnRpbmcgdGhlIGN1cnJl
        bnQgY29udGV4dAogICAgLy8gb2JqZWN0ICh7e3RoaXN9fSkgc28gdXBkYXRp
        bmcgaXQgaXMgbm90IG91ciByZXNwb25zaWJpbGl0eS4KICAgIGlmIChub3Jt
        YWxpemVkLnBhdGggIT09ICcnKSB7CiAgICAgIHZpZXcucmVnaXN0ZXJPYnNl
        cnZlcihub3JtYWxpemVkLnJvb3QsIG5vcm1hbGl6ZWQucGF0aCwgb2JzZXJ2
        ZXIpOwogICAgICBpZiAoY2hpbGRQcm9wZXJ0aWVzKSB7CiAgICAgICAgZm9y
        IChpPTA7IGk8Y2hpbGRQcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7CiAgICAg
        ICAgICB2aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZC5yb290LCBu
        b3JtYWxpemVkLnBhdGgrJy4nK2NoaWxkUHJvcGVydGllc1tpXSwgb2JzZXJ2
        ZXIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICAv
        LyBUaGUgb2JqZWN0IGlzIG5vdCBvYnNlcnZhYmxlLCBzbyBqdXN0IHJlbmRl
        ciBpdCBvdXQgYW5kCiAgICAvLyBiZSBkb25lIHdpdGggaXQuCiAgICBkYXRh
        LmJ1ZmZlci5wdXNoKGhhbmRsZWJhcnNHZXQoY3VycmVudENvbnRleHQsIHBy
        b3BlcnR5LCBvcHRpb25zKSk7CiAgfQp9CgpmdW5jdGlvbiBzaW1wbGVCaW5k
        KGN1cnJlbnRDb250ZXh0LCBwcm9wZXJ0eSwgb3B0aW9ucykgewogIHZhciBk
        YXRhID0gb3B0aW9ucy5kYXRhLAogICAgICB2aWV3ID0gZGF0YS52aWV3LAog
        ICAgICBub3JtYWxpemVkLCBvYnNlcnZlciwgcGF0aFJvb3QsIG91dHB1dDsK
        CiAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY3VycmVudENvbnRleHQs
        IHByb3BlcnR5LCBkYXRhKTsKICBwYXRoUm9vdCA9IG5vcm1hbGl6ZWQucm9v
        dDsKCiAgLy8gU2V0IHVwIG9ic2VydmVycyBmb3Igb2JzZXJ2YWJsZSBvYmpl
        Y3RzCiAgaWYgKHBhdGhSb290ICYmICgnb2JqZWN0JyA9PT0gdHlwZW9mIHBh
        dGhSb290KSkgewogICAgaWYgKGRhdGEuaW5zaWRlR3JvdXApIHsKICAgICAg
        b2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBFbWJlci5ydW4ub25j
        ZSh2aWV3LCAncmVyZW5kZXInKTsKICAgICAgfTsKCiAgICAgIHZhciByZXN1
        bHQgPSBoYW5kbGViYXJzR2V0KGN1cnJlbnRDb250ZXh0LCBwcm9wZXJ0eSwg
        b3B0aW9ucyk7CiAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0
        ID09PSB1bmRlZmluZWQpIHsgcmVzdWx0ID0gIiI7IH0KICAgICAgZGF0YS5i
        dWZmZXIucHVzaChyZXN1bHQpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGJp
        bmRWaWV3ID0gbmV3IEVtYmVyLl9TaW1wbGVIYW5kbGViYXJzVmlldygKICAg
        ICAgICBwcm9wZXJ0eSwgY3VycmVudENvbnRleHQsICFvcHRpb25zLmhhc2gu
        dW5lc2NhcGVkLCBvcHRpb25zLmRhdGEKICAgICAgKTsKCiAgICAgIGJpbmRW
        aWV3Ll9wYXJlbnRWaWV3ID0gdmlldzsKICAgICAgdmlldy5hcHBlbmRDaGls
        ZChiaW5kVmlldyk7CgogICAgICBvYnNlcnZlciA9IGZ1bmN0aW9uKCkgewog
        ICAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRlcicsIGJpbmRW
        aWV3LCAncmVyZW5kZXInKTsKICAgICAgfTsKICAgIH0KCiAgICAvLyBPYnNl
        cnZlcyB0aGUgZ2l2ZW4gcHJvcGVydHkgb24gdGhlIGNvbnRleHQgYW5kCiAg
        ICAvLyB0ZWxscyB0aGUgRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXcgdG8g
        cmUtcmVuZGVyLiBJZiBwcm9wZXJ0eQogICAgLy8gaXMgYW4gZW1wdHkgc3Ry
        aW5nLCB3ZSBhcmUgcHJpbnRpbmcgdGhlIGN1cnJlbnQgY29udGV4dAogICAg
        Ly8gb2JqZWN0ICh7e3RoaXN9fSkgc28gdXBkYXRpbmcgaXQgaXMgbm90IG91
        ciByZXNwb25zaWJpbGl0eS4KICAgIGlmIChub3JtYWxpemVkLnBhdGggIT09
        ICcnKSB7CiAgICAgIHZpZXcucmVnaXN0ZXJPYnNlcnZlcihub3JtYWxpemVk
        LnJvb3QsIG5vcm1hbGl6ZWQucGF0aCwgb2JzZXJ2ZXIpOwogICAgfQogIH0g
        ZWxzZSB7CiAgICAvLyBUaGUgb2JqZWN0IGlzIG5vdCBvYnNlcnZhYmxlLCBz
        byBqdXN0IHJlbmRlciBpdCBvdXQgYW5kCiAgICAvLyBiZSBkb25lIHdpdGgg
        aXQuCiAgICBvdXRwdXQgPSBoYW5kbGViYXJzR2V0KGN1cnJlbnRDb250ZXh0
        LCBwcm9wZXJ0eSwgb3B0aW9ucyk7CiAgICBkYXRhLmJ1ZmZlci5wdXNoKChv
        dXRwdXQgPT09IG51bGwgfHwgdHlwZW9mIG91dHB1dCA9PT0gJ3VuZGVmaW5l
        ZCcpID8gJycgOiBvdXRwdXQpOwogIH0KfQoKLyoqCiAgQHByaXZhdGUKCiAg
        J190cmlhZ2VNdXN0YWNoZScgaXMgdXNlZCBpbnRlcm5hbGx5IHNlbGVjdCBi
        ZXR3ZWVuIGEgYmluZGluZywgaGVscGVyLCBvciBjb21wb25lbnQgZm9yCiAg
        dGhlIGdpdmVuIGNvbnRleHQuIFVudGlsIHRoaXMgcG9pbnQsIGl0IHdvdWxk
        IGJlIGhhcmQgdG8gZGV0ZXJtaW5lIGlmIHRoZQogIG11c3RhY2hlIGlzIGEg
        cHJvcGVydHkgcmVmZXJlbmNlIG9yIGEgcmVndWxhciBoZWxwZXIgcmVmZXJl
        bmNlLiBUaGlzIHRyaWFnZQogIGhlbHBlciByZXNvbHZlcyB0aGF0LgoKICBU
        aGlzIHdvdWxkIG5vdCBiZSB0eXBpY2FsbHkgaW52b2tlZCBieSBkaXJlY3Rs
        eS4KCiAgQG1ldGhvZCBfdHJpYWdlTXVzdGFjaGUKICBAZm9yIEVtYmVyLkhh
        bmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBQ
        cm9wZXJ0eS9oZWxwZXJJRCB0byB0cmlhZ2UKICBAcGFyYW0ge09iamVjdH0g
        b3B0aW9ucyBoYXNoIG9mIHRlbXBsYXRlL3JlbmRlcmluZyBvcHRpb25zCiAg
        QHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlckhhbmRsZWJh
        cnMucmVnaXN0ZXJIZWxwZXIoJ190cmlhZ2VNdXN0YWNoZScsIGZ1bmN0aW9u
        KHByb3BlcnR5LCBvcHRpb25zKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fu
        bm90IHBhc3MgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCB0byB0aGUgX3RyaWFn
        ZU11c3RhY2hlIGhlbHBlciIsIGFyZ3VtZW50cy5sZW5ndGggPD0gMik7Cgog
        IGlmIChoZWxwZXJzW3Byb3BlcnR5XSkgewogICAgcmV0dXJuIGhlbHBlcnNb
        cHJvcGVydHldLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgfQoKICAKCiAgICB2
        YXIgaGVscGVyID0gRW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlSGVscGVyKG9w
        dGlvbnMuZGF0YS52aWV3LmNvbnRhaW5lciwgcHJvcGVydHkpOwogICAgaWYg
        KGhlbHBlcikgewogICAgICByZXR1cm4gaGVscGVyLmNhbGwodGhpcywgb3B0
        aW9ucyk7CiAgICB9CiAgCgogIHJldHVybiBoZWxwZXJzLmJpbmQuY2FsbCh0
        aGlzLCBwcm9wZXJ0eSwgb3B0aW9ucyk7Cn0pOwoKRW1iZXIuSGFuZGxlYmFy
        cy5yZXNvbHZlSGVscGVyID0gZnVuY3Rpb24oY29udGFpbmVyLCBuYW1lKSB7
        CgogIGlmICghY29udGFpbmVyIHx8IG5hbWUuaW5kZXhPZignLScpID09PSAt
        MSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGhlbHBlciA9IGNvbnRhaW5l
        ci5sb29rdXAoJ2hlbHBlcjonICsgbmFtZSk7CiAgaWYgKCFoZWxwZXIpIHsK
        ICAgIHZhciBjb21wb25lbnRMb29rdXAgPSBjb250YWluZXIubG9va3VwKCdj
        b21wb25lbnQtbG9va3VwOm1haW4nKTsKICAgIEVtYmVyLmFzc2VydCgiQ291
        bGQgbm90IGZpbmQgJ2NvbXBvbmVudC1sb29rdXA6bWFpbicgb24gdGhlIHBy
        b3ZpZGVkIGNvbnRhaW5lciwgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBwZXJm
        b3JtaW5nIGNvbXBvbmVudCBsb29rdXBzIiwgY29tcG9uZW50TG9va3VwKTsK
        CiAgICB2YXIgQ29tcG9uZW50ID0gY29tcG9uZW50TG9va3VwLmxvb2t1cEZh
        Y3RvcnkobmFtZSwgY29udGFpbmVyKTsKICAgIGlmIChDb21wb25lbnQpIHsK
        ICAgICAgaGVscGVyID0gRW1iZXJIYW5kbGViYXJzLm1ha2VWaWV3SGVscGVy
        KENvbXBvbmVudCk7CiAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignaGVscGVy
        OicgKyBuYW1lLCBoZWxwZXIpOwogICAgfQogIH0KICByZXR1cm4gaGVscGVy
        Owp9OwoKLyoqCiAgQHByaXZhdGUKCiAgYGJpbmRgIGNhbiBiZSB1c2VkIHRv
        IGRpc3BsYXkgYSB2YWx1ZSwgdGhlbiB1cGRhdGUgdGhhdCB2YWx1ZSBpZiBp
        dAogIGNoYW5nZXMuIEZvciBleGFtcGxlLCBpZiB5b3Ugd2FudGVkIHRvIHBy
        aW50IHRoZSBgdGl0bGVgIHByb3BlcnR5IG9mCiAgYGNvbnRlbnRgOgoKICBg
        YGBoYW5kbGViYXJzCiAge3tiaW5kICJjb250ZW50LnRpdGxlIn19CiAgYGBg
        CgogIFRoaXMgd2lsbCByZXR1cm4gdGhlIGB0aXRsZWAgcHJvcGVydHkgYXMg
        YSBzdHJpbmcsIHRoZW4gY3JlYXRlIGEgbmV3IG9ic2VydmVyCiAgYXQgdGhl
        IHNwZWNpZmllZCBwYXRoLiBJZiBpdCBjaGFuZ2VzLCBpdCB3aWxsIHVwZGF0
        ZSB0aGUgdmFsdWUgaW4gRE9NLiBOb3RlCiAgdGhhdCBpZiB5b3UgbmVlZCB0
        byBzdXBwb3J0IElFNyBhbmQgSUU4IHlvdSBtdXN0IG1vZGlmeSB0aGUgbW9k
        ZWwgb2JqZWN0cwogIHByb3BlcnRpZXMgdXNpbmcgYEVtYmVyLmdldCgpYCBh
        bmQgYEVtYmVyLnNldCgpYCBmb3IgdGhpcyB0byB3b3JrIGFzIGl0CiAgcmVs
        aWVzIG9uIEVtYmVyJ3MgS1ZPIHN5c3RlbS4gRm9yIGFsbCBvdGhlciBicm93
        c2VycyB0aGlzIHdpbGwgYmUgaGFuZGxlZCBmb3IKICB5b3UgYXV0b21hdGlj
        YWxseS4KCiAgQG1ldGhvZCBiaW5kCiAgQGZvciBFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkg
        dG8gYmluZAogIEBwYXJhbSB7RnVuY3Rpb259IGZuIENvbnRleHQgdG8gcHJv
        dmlkZSBmb3IgcmVuZGVyaW5nCiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0
        cmluZwoqLwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2JpbmQn
        LCBmdW5jdGlvbihwcm9wZXJ0eSwgb3B0aW9ucykgewogIEVtYmVyLmFzc2Vy
        dCgiWW91IGNhbm5vdCBwYXNzIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQgdG8g
        dGhlIGJpbmQgaGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA8PSAyKTsKCiAg
        dmFyIGNvbnRleHQgPSAob3B0aW9ucy5jb250ZXh0cyAmJiBvcHRpb25zLmNv
        bnRleHRzLmxlbmd0aCkgPyBvcHRpb25zLmNvbnRleHRzWzBdIDogdGhpczsK
        CiAgaWYgKCFvcHRpb25zLmZuKSB7CiAgICByZXR1cm4gc2ltcGxlQmluZChj
        b250ZXh0LCBwcm9wZXJ0eSwgb3B0aW9ucyk7CiAgfQoKICByZXR1cm4gYmlu
        ZC5jYWxsKGNvbnRleHQsIHByb3BlcnR5LCBvcHRpb25zLCBmYWxzZSwgZXhp
        c3RzKTsKfSk7CgovKioKICBAcHJpdmF0ZQoKICBVc2UgdGhlIGBib3VuZElm
        YCBoZWxwZXIgdG8gY3JlYXRlIGEgY29uZGl0aW9uYWwgdGhhdCByZS1ldmFs
        dWF0ZXMKICB3aGVuZXZlciB0aGUgdHJ1dGhpbmVzcyBvZiB0aGUgYm91bmQg
        dmFsdWUgY2hhbmdlcy4KCiAgYGBgaGFuZGxlYmFycwogIHt7I2JvdW5kSWYg
        ImNvbnRlbnQuc2hvdWxkRGlzcGxheVRpdGxlIn19CiAgICB7e2NvbnRlbnQu
        dGl0bGV9fQogIHt7L2JvdW5kSWZ9fQogIGBgYAoKICBAbWV0aG9kIGJvdW5k
        SWYKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7
        U3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSB0byBiaW5kCiAgQHBhcmFtIHtG
        dW5jdGlvbn0gZm4gQ29udGV4dCB0byBwcm92aWRlIGZvciByZW5kZXJpbmcK
        ICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxl
        YmFycy5yZWdpc3RlckhlbHBlcignYm91bmRJZicsIGZ1bmN0aW9uKHByb3Bl
        cnR5LCBmbikgewogIHZhciBjb250ZXh0ID0gKGZuLmNvbnRleHRzICYmIGZu
        LmNvbnRleHRzLmxlbmd0aCkgPyBmbi5jb250ZXh0c1swXSA6IHRoaXM7CiAg
        dmFyIGZ1bmMgPSBmdW5jdGlvbihyZXN1bHQpIHsKICAgIHZhciB0cnV0aHkg
        PSByZXN1bHQgJiYgZ2V0KHJlc3VsdCwgJ2lzVHJ1dGh5Jyk7CiAgICBpZiAo
        dHlwZW9mIHRydXRoeSA9PT0gJ2Jvb2xlYW4nKSB7IHJldHVybiB0cnV0aHk7
        IH0KCiAgICBpZiAoRW1iZXIuaXNBcnJheShyZXN1bHQpKSB7CiAgICAgIHJl
        dHVybiBnZXQocmVzdWx0LCAnbGVuZ3RoJykgIT09IDA7CiAgICB9IGVsc2Ug
        ewogICAgICByZXR1cm4gISFyZXN1bHQ7CiAgICB9CiAgfTsKCiAgcmV0dXJu
        IGJpbmQuY2FsbChjb250ZXh0LCBwcm9wZXJ0eSwgZm4sIHRydWUsIGZ1bmMs
        IGZ1bmMsIFsnaXNUcnV0aHknLCAnbGVuZ3RoJ10pOwp9KTsKCi8qKgogIEBt
        ZXRob2Qgd2l0aAogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAg
        QHBhcmFtIHtGdW5jdGlvbn0gY29udGV4dAogIEBwYXJhbSB7SGFzaH0gb3B0
        aW9ucwogIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJI
        YW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd3aXRoJywgZnVuY3Rpb24oY29u
        dGV4dCwgb3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSA0
        KSB7CiAgICB2YXIga2V5d29yZE5hbWUsIHBhdGgsIHJvb3RQYXRoLCBub3Jt
        YWxpemVkOwoKICAgIEVtYmVyLmFzc2VydCgiSWYgeW91IHBhc3MgbW9yZSB0
        aGFuIG9uZSBhcmd1bWVudCB0byB0aGUgd2l0aCBoZWxwZXIsIGl0IG11c3Qg
        YmUgaW4gdGhlIGZvcm0gI3dpdGggZm9vIGFzIGJhciIsIGFyZ3VtZW50c1sx
        XSA9PT0gImFzIik7CiAgICBvcHRpb25zID0gYXJndW1lbnRzWzNdOwogICAg
        a2V5d29yZE5hbWUgPSBhcmd1bWVudHNbMl07CiAgICBwYXRoID0gYXJndW1l
        bnRzWzBdOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IG11c3QgcGFzcyBhIGJs
        b2NrIHRvIHRoZSB3aXRoIGhlbHBlciIsIG9wdGlvbnMuZm4gJiYgb3B0aW9u
        cy5mbiAhPT0gSGFuZGxlYmFycy5WTS5ub29wKTsKCiAgICBpZiAoRW1iZXIu
        aXNHbG9iYWxQYXRoKHBhdGgpKSB7CiAgICAgIEVtYmVyLmJpbmQob3B0aW9u
        cy5kYXRhLmtleXdvcmRzLCBrZXl3b3JkTmFtZSwgcGF0aCk7CiAgICB9IGVs
        c2UgewogICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aCh0aGlzLCBw
        YXRoLCBvcHRpb25zLmRhdGEpOwogICAgICBwYXRoID0gbm9ybWFsaXplZC5w
        YXRoOwogICAgICByb290UGF0aCA9IG5vcm1hbGl6ZWQucm9vdDsKCiAgICAg
        IC8vIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgZmFjdCB0aGF0IHlv
        dSBjYW5ub3QgYmluZCBzZXBhcmF0ZSBvYmplY3RzCiAgICAgIC8vIHRvZ2V0
        aGVyLiBXaGVuIHdlIGltcGxlbWVudCB0aGF0IGZ1bmN0aW9uYWxpdHksIHdl
        IHNob3VsZCB1c2UgaXQgaGVyZS4KICAgICAgdmFyIGNvbnRleHRLZXkgPSBF
        bWJlci4kLmV4cGFuZG8gKyBFbWJlci5ndWlkRm9yKHJvb3RQYXRoKTsKICAg
        ICAgb3B0aW9ucy5kYXRhLmtleXdvcmRzW2NvbnRleHRLZXldID0gcm9vdFBh
        dGg7CgogICAgICAvLyBpZiB0aGUgcGF0aCBpcyAnJyAoInRoaXMiKSwganVz
        dCBiaW5kIGRpcmVjdGx5IHRvIHRoZSBjdXJyZW50IGNvbnRleHQKICAgICAg
        dmFyIGNvbnRleHRQYXRoID0gcGF0aCA/IGNvbnRleHRLZXkgKyAnLicgKyBw
        YXRoIDogY29udGV4dEtleTsKICAgICAgRW1iZXIuYmluZChvcHRpb25zLmRh
        dGEua2V5d29yZHMsIGtleXdvcmROYW1lLCBjb250ZXh0UGF0aCk7CiAgICB9
        CgogICAgcmV0dXJuIGJpbmQuY2FsbCh0aGlzLCBwYXRoLCBvcHRpb25zLCB0
        cnVlLCBleGlzdHMpOwogIH0gZWxzZSB7CiAgICBFbWJlci5hc3NlcnQoIllv
        dSBtdXN0IHBhc3MgZXhhY3RseSBvbmUgYXJndW1lbnQgdG8gdGhlIHdpdGgg
        aGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMik7CiAgICBFbWJlci5h
        c3NlcnQoIllvdSBtdXN0IHBhc3MgYSBibG9jayB0byB0aGUgd2l0aCBoZWxw
        ZXIiLCBvcHRpb25zLmZuICYmIG9wdGlvbnMuZm4gIT09IEhhbmRsZWJhcnMu
        Vk0ubm9vcCk7CiAgICByZXR1cm4gaGVscGVycy5iaW5kLmNhbGwob3B0aW9u
        cy5jb250ZXh0c1swXSwgY29udGV4dCwgb3B0aW9ucyk7CiAgfQp9KTsKCgov
        KioKICBTZWUgW2JvdW5kSWZdKC9hcGkvY2xhc3Nlcy9FbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMuaHRtbCNtZXRob2RfYm91bmRJZikKCiAgQG1ldGhvZCBp
        ZgogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtG
        dW5jdGlvbn0gY29udGV4dAogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogIEBy
        ZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJz
        LnJlZ2lzdGVySGVscGVyKCdpZicsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlv
        bnMpIHsKICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3MgZXhhY3RseSBv
        bmUgYXJndW1lbnQgdG8gdGhlIGlmIGhlbHBlciIsIGFyZ3VtZW50cy5sZW5n
        dGggPT09IDIpOwogIEVtYmVyLmFzc2VydCgiWW91IG11c3QgcGFzcyBhIGJs
        b2NrIHRvIHRoZSBpZiBoZWxwZXIiLCBvcHRpb25zLmZuICYmIG9wdGlvbnMu
        Zm4gIT09IEhhbmRsZWJhcnMuVk0ubm9vcCk7CgogIHJldHVybiBoZWxwZXJz
        LmJvdW5kSWYuY2FsbChvcHRpb25zLmNvbnRleHRzWzBdLCBjb250ZXh0LCBv
        cHRpb25zKTsKfSk7CgovKioKICBAbWV0aG9kIHVubGVzcwogIEBmb3IgRW1i
        ZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtGdW5jdGlvbn0gY29u
        dGV4dAogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogIEByZXR1cm4ge1N0cmlu
        Z30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lzdGVySGVs
        cGVyKCd1bmxlc3MnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7CiAg
        RW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGV4YWN0bHkgb25lIGFyZ3Vt
        ZW50IHRvIHRoZSB1bmxlc3MgaGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA9
        PT0gMik7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGEgYmxvY2sg
        dG8gdGhlIHVubGVzcyBoZWxwZXIiLCBvcHRpb25zLmZuICYmIG9wdGlvbnMu
        Zm4gIT09IEhhbmRsZWJhcnMuVk0ubm9vcCk7CgogIHZhciBmbiA9IG9wdGlv
        bnMuZm4sIGludmVyc2UgPSBvcHRpb25zLmludmVyc2U7CgogIG9wdGlvbnMu
        Zm4gPSBpbnZlcnNlOwogIG9wdGlvbnMuaW52ZXJzZSA9IGZuOwoKICByZXR1
        cm4gaGVscGVycy5ib3VuZElmLmNhbGwob3B0aW9ucy5jb250ZXh0c1swXSwg
        Y29udGV4dCwgb3B0aW9ucyk7Cn0pOwoKLyoqCiAgYGJpbmQtYXR0cmAgYWxs
        b3dzIHlvdSB0byBjcmVhdGUgYSBiaW5kaW5nIGJldHdlZW4gRE9NIGVsZW1l
        bnQgYXR0cmlidXRlcyBhbmQKICBFbWJlciBvYmplY3RzLiBGb3IgZXhhbXBs
        ZToKCiAgYGBgaGFuZGxlYmFycwogIDxpbWcge3tiaW5kLWF0dHIgc3JjPSJp
        bWFnZVVybCIgYWx0PSJpbWFnZVRpdGxlIn19PgogIGBgYAoKICBUaGUgYWJv
        dmUgaGFuZGxlYmFycyB0ZW1wbGF0ZSB3aWxsIGZpbGwgdGhlIGA8aW1nPmAn
        cyBgc3JjYCBhdHRyaWJ1dGUgd2lsbAogIHRoZSB2YWx1ZSBvZiB0aGUgcHJv
        cGVydHkgcmVmZXJlbmNlZCB3aXRoIGAiaW1hZ2VVcmwiYCBhbmQgaXRzIGBh
        bHRgCiAgYXR0cmlidXRlIHdpdGggdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0
        eSByZWZlcmVuY2VkIHdpdGggYCJpbWFnZVRpdGxlImAuCgogIElmIHRoZSBy
        ZW5kZXJpbmcgY29udGV4dCBvZiB0aGlzIHRlbXBsYXRlIGlzIHRoZSBmb2xs
        b3dpbmcgb2JqZWN0OgoKICBgYGBqYXZhc2NyaXB0CiAgewogICAgaW1hZ2VV
        cmw6ICdodHRwOi8vbG9sY2F0cy5pbmZvL2hhei1hLWZ1bm55JywKICAgIGlt
        YWdlVGl0bGU6ICdBIGh1bW9yb3VzIGltYWdlIG9mIGEgY2F0JwogIH0KICBg
        YGAKCiAgVGhlIHJlc3VsdGluZyBIVE1MIG91dHB1dCB3aWxsIGJlOgoKICBg
        YGBodG1sCiAgPGltZyBzcmM9Imh0dHA6Ly9sb2xjYXRzLmluZm8vaGF6LWEt
        ZnVubnkiIGFsdD0iQSBodW1vcm91cyBpbWFnZSBvZiBhIGNhdCI+CiAgYGBg
        CgogIGBiaW5kLWF0dHJgIGNhbm5vdCByZWRlY2xhcmUgZXhpc3RpbmcgRE9N
        IGVsZW1lbnQgYXR0cmlidXRlcy4gVGhlIHVzZSBvZiBgc3JjYAogIGluIHRo
        ZSBmb2xsb3dpbmcgYGJpbmQtYXR0cmAgZXhhbXBsZSB3aWxsIGJlIGlnbm9y
        ZWQgYW5kIHRoZSBoYXJkIGNvZGVkIHZhbHVlCiAgb2YgYHNyYz0iL2ZhaWx3
        aGFsZS5naWYiYCB3aWxsIHRha2UgcHJlY2VkZW5jZToKCiAgYGBgaGFuZGxl
        YmFycwogIDxpbWcgc3JjPSIvZmFpbHdoYWxlLmdpZiIge3tiaW5kLWF0dHIg
        c3JjPSJpbWFnZVVybCIgYWx0PSJpbWFnZVRpdGxlIn19PgogIGBgYAoKICAj
        IyMgYGJpbmQtYXR0cmAgYW5kIHRoZSBgY2xhc3NgIGF0dHJpYnV0ZQoKICBg
        YmluZC1hdHRyYCBzdXBwb3J0cyBhIHNwZWNpYWwgc3ludGF4IGZvciBoYW5k
        bGluZyBhIG51bWJlciBvZiBjYXNlcyB1bmlxdWUKICB0byB0aGUgYGNsYXNz
        YCBET00gZWxlbWVudCBhdHRyaWJ1dGUuIFRoZSBgY2xhc3NgIGF0dHJpYnV0
        ZSBjb21iaW5lcwogIG11bHRpcGxlIGRpc2NyZXRlIHZhbHVlcyBpbnRvIGEg
        c2luZ2xlIGF0dHJpYnV0ZSBhcyBhIHNwYWNlLWRlbGltaXRlZAogIGxpc3Qg
        b2Ygc3RyaW5ncy4gRWFjaCBzdHJpbmcgY2FuIGJlOgoKICAqIGEgc3RyaW5n
        IHJldHVybiB2YWx1ZSBvZiBhbiBvYmplY3QncyBwcm9wZXJ0eS4KICAqIGEg
        Ym9vbGVhbiByZXR1cm4gdmFsdWUgb2YgYW4gb2JqZWN0J3MgcHJvcGVydHkK
        ICAqIGEgaGFyZC1jb2RlZCB2YWx1ZQoKICBBIHN0cmluZyByZXR1cm4gdmFs
        dWUgd29ya3MgaWRlbnRpY2FsbHkgdG8gb3RoZXIgdXNlcyBvZiBgYmluZC1h
        dHRyYC4gVGhlCiAgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aWxs
        IGJlY29tZSB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS4gRm9yCiAgZXhh
        bXBsZSwgdGhlIGZvbGxvd2luZyB2aWV3IGFuZCB0ZW1wbGF0ZToKCiAgYGBg
        amF2YXNjcmlwdAogICAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAg
        ICAgIHNvbWVQcm9wZXJ0eTogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJu
        ICJhVmFsdWUiOwogICAgICB9LnByb3BlcnR5KCkKICAgIH0pCiAgYGBgCgog
        IGBgYGhhbmRsZWJhcnMKICA8aW1nIHt7YmluZC1hdHRyIGNsYXNzPSJ2aWV3
        LnNvbWVQcm9wZXJ0eX19PgogIGBgYAoKICBSZXN1bHQgaW4gdGhlIGZvbGxv
        d2luZyByZW5kZXJlZCBvdXRwdXQ6CgogIGBgYGh0bWwKICA8aW1nIGNsYXNz
        PSJhVmFsdWUiPgogIGBgYAoKICBBIGJvb2xlYW4gcmV0dXJuIHZhbHVlIHdp
        bGwgaW5zZXJ0IGEgc3BlY2lmaWVkIGNsYXNzIG5hbWUgaWYgdGhlIHByb3Bl
        cnR5CiAgcmV0dXJucyBgdHJ1ZWAgYW5kIHJlbW92ZSB0aGUgY2xhc3MgbmFt
        ZSBpZiB0aGUgcHJvcGVydHkgcmV0dXJucyBgZmFsc2VgLgoKICBBIGNsYXNz
        IG5hbWUgaXMgcHJvdmlkZWQgdmlhIHRoZSBzeW50YXgKICBgc29tZVByb3Bl
        cnR5TmFtZTpjbGFzcy1uYW1lLWlmLXRydWVgLgoKICBgYGBqYXZhc2NyaXB0
        CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBzb21lQm9vbDog
        dHJ1ZQogIH0pCiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICA8aW1nIHt7Ymlu
        ZC1hdHRyIGNsYXNzPSJ2aWV3LnNvbWVCb29sOmNsYXNzLW5hbWUtaWYtdHJ1
        ZSJ9fT4KICBgYGAKCiAgUmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgcmVuZGVy
        ZWQgb3V0cHV0OgoKICBgYGBodG1sCiAgPGltZyBjbGFzcz0iY2xhc3MtbmFt
        ZS1pZi10cnVlIj4KICBgYGAKCiAgQW4gYWRkaXRpb25hbCBzZWN0aW9uIG9m
        IHRoZSBiaW5kaW5nIGNhbiBiZSBwcm92aWRlZCBpZiB5b3Ugd2FudCB0bwog
        IHJlcGxhY2UgdGhlIGV4aXN0aW5nIGNsYXNzIGluc3RlYWQgb2YgcmVtb3Zp
        bmcgaXQgd2hlbiB0aGUgYm9vbGVhbgogIHZhbHVlIGNoYW5nZXM6CgogIGBg
        YGhhbmRsZWJhcnMKICA8aW1nIHt7YmluZC1hdHRyIGNsYXNzPSJ2aWV3LnNv
        bWVCb29sOmNsYXNzLW5hbWUtaWYtdHJ1ZTpjbGFzcy1uYW1lLWlmLWZhbHNl
        In19PgogIGBgYAoKICBBIGhhcmQtY29kZWQgdmFsdWUgY2FuIGJlIHVzZWQg
        YnkgcHJlcGVuZGluZyBgOmAgdG8gdGhlIGRlc2lyZWQKICBjbGFzcyBuYW1l
        OiBgOmNsYXNzLW5hbWUtdG8tYWx3YXlzLWFwcGx5YC4KCiAgYGBgaGFuZGxl
        YmFycwogIDxpbWcge3tiaW5kLWF0dHIgY2xhc3M9IjpjbGFzcy1uYW1lLXRv
        LWFsd2F5cy1hcHBseSJ9fT4KICBgYGAKCiAgUmVzdWx0cyBpbiB0aGUgZm9s
        bG93aW5nIHJlbmRlcmVkIG91dHB1dDoKCiAgYGBgaHRtbAogIDxpbWcgY2xh
        c3M9ImNsYXNzLW5hbWUtdG8tYWx3YXlzLWFwcGx5Ij4KICBgYGAKCiAgQWxs
        IHRocmVlIHN0cmF0ZWdpZXMgLSBzdHJpbmcgcmV0dXJuIHZhbHVlLCBib29s
        ZWFuIHJldHVybiB2YWx1ZSwgYW5kCiAgaGFyZC1jb2RlZCB2YWx1ZSDigJMg
        Y2FuIGJlIGNvbWJpbmVkIGluIGEgc2luZ2xlIGRlY2xhcmF0aW9uOgoKICBg
        YGBoYW5kbGViYXJzCiAgPGltZyB7e2JpbmQtYXR0ciBjbGFzcz0iOmNsYXNz
        LW5hbWUtdG8tYWx3YXlzLWFwcGx5IHZpZXcuc29tZUJvb2w6Y2xhc3MtbmFt
        ZS1pZi10cnVlIHZpZXcuc29tZVByb3BlcnR5In19PgogIGBgYAoKICBAbWV0
        aG9kIGJpbmQtYXR0cgogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJz
        CiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgQHJldHVybiB7U3RyaW5nfSBI
        VE1MIHN0cmluZwoqLwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIo
        J2JpbmQtYXR0cicsIGZ1bmN0aW9uKG9wdGlvbnMpIHsKCiAgdmFyIGF0dHJz
        ID0gb3B0aW9ucy5oYXNoOwoKICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHNw
        ZWNpZnkgYXQgbGVhc3Qgb25lIGhhc2ggYXJndW1lbnQgdG8gYmluZC1hdHRy
        IiwgISFFbWJlci5rZXlzKGF0dHJzKS5sZW5ndGgpOwoKICB2YXIgdmlldyA9
        IG9wdGlvbnMuZGF0YS52aWV3OwogIHZhciByZXQgPSBbXTsKICB2YXIgY3R4
        ID0gdGhpczsKCiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaWQgZm9yIHRoaXMg
        ZWxlbWVudC4gVGhpcyB3aWxsIGJlIGFkZGVkIGFzIGEKICAvLyBkYXRhIGF0
        dHJpYnV0ZSB0byB0aGUgZWxlbWVudCBzbyBpdCBjYW4gYmUgbG9va2VkIHVw
        IHdoZW4KICAvLyB0aGUgYm91bmQgcHJvcGVydHkgY2hhbmdlcy4KICB2YXIg
        ZGF0YUlkID0gKytFbWJlci51dWlkOwoKICAvLyBIYW5kbGUgY2xhc3NlcyBk
        aWZmZXJlbnRseSwgYXMgd2UgY2FuIGJpbmQgbXVsdGlwbGUgY2xhc3Nlcwog
        IHZhciBjbGFzc0JpbmRpbmdzID0gYXR0cnNbJ2NsYXNzJ107CiAgaWYgKGNs
        YXNzQmluZGluZ3MgIT0gbnVsbCkgewogICAgdmFyIGNsYXNzUmVzdWx0cyA9
        IEVtYmVySGFuZGxlYmFycy5iaW5kQ2xhc3Nlcyh0aGlzLCBjbGFzc0JpbmRp
        bmdzLCB2aWV3LCBkYXRhSWQsIG9wdGlvbnMpOwoKICAgIHJldC5wdXNoKCdj
        bGFzcz0iJyArIEhhbmRsZWJhcnMuVXRpbHMuZXNjYXBlRXhwcmVzc2lvbihj
        bGFzc1Jlc3VsdHMuam9pbignICcpKSArICciJyk7CiAgICBkZWxldGUgYXR0
        cnNbJ2NsYXNzJ107CiAgfQoKICB2YXIgYXR0cktleXMgPSBFbWJlci5rZXlz
        KGF0dHJzKTsKCiAgLy8gRm9yIGVhY2ggYXR0cmlidXRlIHBhc3NlZCwgY3Jl
        YXRlIGFuIG9ic2VydmVyIGFuZCBlbWl0IHRoZQogIC8vIGN1cnJlbnQgdmFs
        dWUgb2YgdGhlIHByb3BlcnR5IGFzIGFuIGF0dHJpYnV0ZS4KICBmb3JFYWNo
        LmNhbGwoYXR0cktleXMsIGZ1bmN0aW9uKGF0dHIpIHsKICAgIHZhciBwYXRo
        ID0gYXR0cnNbYXR0cl0sCiAgICAgICAgbm9ybWFsaXplZDsKCiAgICBFbWJl
        ci5hc3NlcnQoZm10KCJZb3UgbXVzdCBwcm92aWRlIGFuIGV4cHJlc3Npb24g
        YXMgdGhlIHZhbHVlIG9mIGJvdW5kIGF0dHJpYnV0ZS4gWW91IHNwZWNpZmll
        ZDogJUA9JUAiLCBbYXR0ciwgcGF0aF0pLCB0eXBlb2YgcGF0aCA9PT0gJ3N0
        cmluZycpOwoKICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKGN0eCwg
        cGF0aCwgb3B0aW9ucy5kYXRhKTsKCiAgICB2YXIgdmFsdWUgPSAocGF0aCA9
        PT0gJ3RoaXMnKSA/IG5vcm1hbGl6ZWQucm9vdCA6IGhhbmRsZWJhcnNHZXQo
        Y3R4LCBwYXRoLCBvcHRpb25zKSwKICAgICAgICB0eXBlID0gRW1iZXIudHlw
        ZU9mKHZhbHVlKTsKCiAgICBFbWJlci5hc3NlcnQoZm10KCJBdHRyaWJ1dGVz
        IG11c3QgYmUgbnVtYmVycywgc3RyaW5ncyBvciBib29sZWFucywgbm90ICVA
        IiwgW3ZhbHVlXSksIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRl
        ZmluZWQgfHwgdHlwZSA9PT0gJ251bWJlcicgfHwgdHlwZSA9PT0gJ3N0cmlu
        ZycgfHwgdHlwZSA9PT0gJ2Jvb2xlYW4nKTsKCiAgICB2YXIgb2JzZXJ2ZXIs
        IGludm9rZXI7CgogICAgb2JzZXJ2ZXIgPSBmdW5jdGlvbiBvYnNlcnZlcigp
        IHsKICAgICAgdmFyIHJlc3VsdCA9IGhhbmRsZWJhcnNHZXQoY3R4LCBwYXRo
        LCBvcHRpb25zKTsKCiAgICAgIEVtYmVyLmFzc2VydChmbXQoIkF0dHJpYnV0
        ZXMgbXVzdCBiZSBudW1iZXJzLCBzdHJpbmdzIG9yIGJvb2xlYW5zLCBub3Qg
        JUAiLCBbcmVzdWx0XSksIHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09
        IHVuZGVmaW5lZCB8fCB0eXBlb2YgcmVzdWx0ID09PSAnbnVtYmVyJyB8fCB0
        eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgcmVzdWx0ID09
        PSAnYm9vbGVhbicpOwoKICAgICAgdmFyIGVsZW0gPSB2aWV3LiQoIltkYXRh
        LWJpbmRhdHRyLSIgKyBkYXRhSWQgKyAiPSciICsgZGF0YUlkICsgIiddIik7
        CgogICAgICAvLyBJZiB3ZSBhcmVuJ3QgYWJsZSB0byBmaW5kIHRoZSBlbGVt
        ZW50LCBpdCBtZWFucyB0aGUgZWxlbWVudAogICAgICAvLyB0byB3aGljaCB3
        ZSB3ZXJlIGJvdW5kIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgdmlldy4K
        ICAgICAgLy8gSW4gdGhhdCBjYXNlLCB3ZSBjYW4gYXNzdW1lIHRoZSB0ZW1w
        bGF0ZSBoYXMgYmVlbiByZS1yZW5kZXJlZAogICAgICAvLyBhbmQgd2UgbmVl
        ZCB0byBjbGVhbiB1cCB0aGUgb2JzZXJ2ZXIuCiAgICAgIGlmICghZWxlbSB8
        fCBlbGVtLmxlbmd0aCA9PT0gMCkgewogICAgICAgIEVtYmVyLnJlbW92ZU9i
        c2VydmVyKG5vcm1hbGl6ZWQucm9vdCwgbm9ybWFsaXplZC5wYXRoLCBpbnZv
        a2VyKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIEVtYmVyLlZp
        ZXcuYXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhlbGVtLCBhdHRyLCByZXN1bHQp
        OwogICAgfTsKCiAgICAvLyBBZGQgYW4gb2JzZXJ2ZXIgdG8gdGhlIHZpZXcg
        Zm9yIHdoZW4gdGhlIHByb3BlcnR5IGNoYW5nZXMuCiAgICAvLyBXaGVuIHRo
        ZSBvYnNlcnZlciBmaXJlcywgZmluZCB0aGUgZWxlbWVudCB1c2luZyB0aGUK
        ICAgIC8vIHVuaXF1ZSBkYXRhIGlkIGFuZCB1cGRhdGUgdGhlIGF0dHJpYnV0
        ZSB0byB0aGUgbmV3IHZhbHVlLgogICAgLy8gTm90ZTogZG9uJ3QgYWRkIG9i
        c2VydmVyIHdoZW4gcGF0aCBpcyAndGhpcycgb3IgcGF0aAogICAgLy8gaXMg
        d2hvbGUga2V5d29yZCBlLmcuIHt7I2VhY2ggeCBpbiBsaXN0fX0gLi4uIHt7
        YmluZC1hdHRyIGF0dHI9IngifX0KICAgIGlmIChwYXRoICE9PSAndGhpcycg
        JiYgIShub3JtYWxpemVkLmlzS2V5d29yZCAmJiBub3JtYWxpemVkLnBhdGgg
        PT09ICcnICkpIHsKICAgICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKG5vcm1h
        bGl6ZWQucm9vdCwgbm9ybWFsaXplZC5wYXRoLCBvYnNlcnZlcik7CiAgICB9
        CgogICAgLy8gaWYgdGhpcyBjaGFuZ2VzLCBhbHNvIGNoYW5nZSB0aGUgbG9n
        aWMgaW4gZW1iZXItdmlld3MvbGliL3ZpZXdzL3ZpZXcuanMKICAgIGlmICgo
        dHlwZSA9PT0gJ3N0cmluZycgfHwgKHR5cGUgPT09ICdudW1iZXInICYmICFp
        c05hTih2YWx1ZSkpKSkgewogICAgICByZXQucHVzaChhdHRyICsgJz0iJyAr
        IEhhbmRsZWJhcnMuVXRpbHMuZXNjYXBlRXhwcmVzc2lvbih2YWx1ZSkgKyAn
        IicpOwogICAgfSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlID09PSAnYm9vbGVh
        bicpIHsKICAgICAgLy8gVGhlIGRldmVsb3BlciBjb250cm9scyB0aGUgYXR0
        ciBuYW1lLCBzbyBpdCBzaG91bGQgYWx3YXlzIGJlIHNhZmUKICAgICAgcmV0
        LnB1c2goYXR0ciArICc9IicgKyBhdHRyICsgJyInKTsKICAgIH0KICB9LCB0
        aGlzKTsKCiAgLy8gQWRkIHRoZSB1bmlxdWUgaWRlbnRpZmllcgogIC8vIE5P
        VEU6IFdlIHVzZSBhbGwgbG93ZXItY2FzZSBzaW5jZSBGaXJlZm94IGhhcyBw
        cm9ibGVtcyB3aXRoIG1peGVkIGNhc2UgaW4gU1ZHCiAgcmV0LnB1c2goJ2Rh
        dGEtYmluZGF0dHItJyArIGRhdGFJZCArICc9IicgKyBkYXRhSWQgKyAnIicp
        OwogIHJldHVybiBuZXcgRW1iZXJIYW5kbGViYXJzLlNhZmVTdHJpbmcocmV0
        LmpvaW4oJyAnKSk7Cn0pOwoKLyoqCiAgU2VlIGBiaW5kLWF0dHJgCgogIEBt
        ZXRob2QgYmluZEF0dHIKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cwogIEBkZXByZWNhdGVkCiAgQHBhcmFtIHtGdW5jdGlvbn0gY29udGV4dAog
        IEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogIEByZXR1cm4ge1N0cmluZ30gSFRN
        TCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdi
        aW5kQXR0cicsIEVtYmVySGFuZGxlYmFycy5oZWxwZXJzWydiaW5kLWF0dHIn
        XSk7CgovKioKICBAcHJpdmF0ZQoKICBIZWxwZXIgdGhhdCwgZ2l2ZW4gYSBz
        cGFjZS1zZXBhcmF0ZWQgc3RyaW5nIG9mIHByb3BlcnR5IHBhdGhzIGFuZCBh
        IGNvbnRleHQsCiAgcmV0dXJucyBhbiBhcnJheSBvZiBjbGFzcyBuYW1lcy4g
        Q2FsbGluZyB0aGlzIG1ldGhvZCBhbHNvIGhhcyB0aGUgc2lkZQogIGVmZmVj
        dCBvZiBzZXR0aW5nIHVwIG9ic2VydmVycyBhdCB0aG9zZSBwcm9wZXJ0eSBw
        YXRocywgc3VjaCB0aGF0IGlmIHRoZXkKICBjaGFuZ2UsIHRoZSBjb3JyZWN0
        IGNsYXNzIG5hbWUgd2lsbCBiZSByZWFwcGxpZWQgdG8gdGhlIERPTSBlbGVt
        ZW50LgoKICBGb3IgZXhhbXBsZSwgaWYgeW91IHBhc3MgdGhlIHN0cmluZyAi
        Zm9vQmFyIiwgaXQgd2lsbCBmaXJzdCBsb29rIHVwIHRoZQogICJmb29CYXIi
        IHZhbHVlIG9mIHRoZSBjb250ZXh0LiBJZiB0aGF0IHZhbHVlIGlzIHRydWUs
        IGl0IHdpbGwgYWRkIHRoZQogICJmb28tYmFyIiBjbGFzcyB0byB0aGUgY3Vy
        cmVudCBlbGVtZW50IChpLmUuLCB0aGUgZGFzaGVyaXplZCBmb3JtIG9mCiAg
        ImZvb0JhciIpLiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIGl0IHdpbGwg
        YWRkIHRoYXQgc3RyaW5nIGFzIHRoZSBjbGFzcy4KICBPdGhlcndpc2UsIGl0
        IHdpbGwgbm90IGFkZCBhbnkgbmV3IGNsYXNzIG5hbWUuCgogIEBtZXRob2Qg
        YmluZENsYXNzZXMKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMKICBAcGFyYW0g
        e0VtYmVyLk9iamVjdH0gY29udGV4dCBUaGUgY29udGV4dCBmcm9tIHdoaWNo
        IHRvIGxvb2t1cCBwcm9wZXJ0aWVzCiAgQHBhcmFtIHtTdHJpbmd9IGNsYXNz
        QmluZGluZ3MgQSBzdHJpbmcsIHNwYWNlLXNlcGFyYXRlZCwgb2YgY2xhc3Mg
        YmluZGluZ3MKICAgIHRvIHVzZQogIEBwYXJhbSB7RW1iZXIuVmlld30gdmll
        dyBUaGUgdmlldyBpbiB3aGljaCBvYnNlcnZlcnMgc2hvdWxkIGxvb2sgZm9y
        IHRoZQogICAgZWxlbWVudCB0byB1cGRhdGUKICBAcGFyYW0ge1NydGluZ30g
        YmluZEF0dHJJZCBPcHRpb25hbCBiaW5kQXR0ciBpZCB1c2VkIHRvIGxvb2t1
        cCBlbGVtZW50cwogIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBjbGFz
        cyBuYW1lcyB0byBhZGQKKi8KRW1iZXJIYW5kbGViYXJzLmJpbmRDbGFzc2Vz
        ID0gZnVuY3Rpb24oY29udGV4dCwgY2xhc3NCaW5kaW5ncywgdmlldywgYmlu
        ZEF0dHJJZCwgb3B0aW9ucykgewogIHZhciByZXQgPSBbXSwgbmV3Q2xhc3Ms
        IHZhbHVlLCBlbGVtOwoKICAvLyBIZWxwZXIgbWV0aG9kIHRvIHJldHJpZXZl
        IHRoZSBwcm9wZXJ0eSBmcm9tIHRoZSBjb250ZXh0IGFuZAogIC8vIGRldGVy
        bWluZSB3aGljaCBjbGFzcyBzdHJpbmcgdG8gcmV0dXJuLCBiYXNlZCBvbiB3
        aGV0aGVyIGl0IGlzCiAgLy8gYSBCb29sZWFuIG9yIG5vdC4KICB2YXIgY2xh
        c3NTdHJpbmdGb3JQYXRoID0gZnVuY3Rpb24ocm9vdCwgcGFyc2VkUGF0aCwg
        b3B0aW9ucykgewogICAgdmFyIHZhbCwKICAgICAgICBwYXRoID0gcGFyc2Vk
        UGF0aC5wYXRoOwoKICAgIGlmIChwYXRoID09PSAndGhpcycpIHsKICAgICAg
        dmFsID0gcm9vdDsKICAgIH0gZWxzZSBpZiAocGF0aCA9PT0gJycpIHsKICAg
        ICAgdmFsID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbCA9IGhhbmRs
        ZWJhcnNHZXQocm9vdCwgcGF0aCwgb3B0aW9ucyk7CiAgICB9CgogICAgcmV0
        dXJuIEVtYmVyLlZpZXcuX2NsYXNzU3RyaW5nRm9yVmFsdWUocGF0aCwgdmFs
        LCBwYXJzZWRQYXRoLmNsYXNzTmFtZSwgcGFyc2VkUGF0aC5mYWxzeUNsYXNz
        TmFtZSk7CiAgfTsKCiAgLy8gRm9yIGVhY2ggcHJvcGVydHkgcGFzc2VkLCBs
        b29wIHRocm91Z2ggYW5kIHNldHVwCiAgLy8gYW4gb2JzZXJ2ZXIuCiAgZm9y
        RWFjaC5jYWxsKGNsYXNzQmluZGluZ3Muc3BsaXQoJyAnKSwgZnVuY3Rpb24o
        YmluZGluZykgewoKICAgIC8vIFZhcmlhYmxlIGluIHdoaWNoIHRoZSBvbGQg
        Y2xhc3MgdmFsdWUgaXMgc2F2ZWQuIFRoZSBvYnNlcnZlciBmdW5jdGlvbgog
        ICAgLy8gY2xvc2VzIG92ZXIgdGhpcyB2YXJpYWJsZSwgc28gaXQga25vd3Mg
        d2hpY2ggc3RyaW5nIHRvIHJlbW92ZSB3aGVuCiAgICAvLyB0aGUgcHJvcGVy
        dHkgY2hhbmdlcy4KICAgIHZhciBvbGRDbGFzczsKCiAgICB2YXIgb2JzZXJ2
        ZXIsIGludm9rZXI7CgogICAgdmFyIHBhcnNlZFBhdGggPSBFbWJlci5WaWV3
        Ll9wYXJzZVByb3BlcnR5UGF0aChiaW5kaW5nKSwKICAgICAgICBwYXRoID0g
        cGFyc2VkUGF0aC5wYXRoLAogICAgICAgIHBhdGhSb290ID0gY29udGV4dCwK
        ICAgICAgICBub3JtYWxpemVkOwoKICAgIGlmIChwYXRoICE9PSAnJyAmJiBw
        YXRoICE9PSAndGhpcycpIHsKICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6
        ZVBhdGgoY29udGV4dCwgcGF0aCwgb3B0aW9ucy5kYXRhKTsKCiAgICAgIHBh
        dGhSb290ID0gbm9ybWFsaXplZC5yb290OwogICAgICBwYXRoID0gbm9ybWFs
        aXplZC5wYXRoOwogICAgfQoKICAgIC8vIFNldCB1cCBhbiBvYnNlcnZlciBv
        biB0aGUgY29udGV4dC4gSWYgdGhlIHByb3BlcnR5IGNoYW5nZXMsIHRvZ2ds
        ZSB0aGUKICAgIC8vIGNsYXNzIG5hbWUuCiAgICBvYnNlcnZlciA9IGZ1bmN0
        aW9uKCkgewogICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhl
        IHByb3BlcnR5CiAgICAgIG5ld0NsYXNzID0gY2xhc3NTdHJpbmdGb3JQYXRo
        KGNvbnRleHQsIHBhcnNlZFBhdGgsIG9wdGlvbnMpOwogICAgICBlbGVtID0g
        YmluZEF0dHJJZCA/IHZpZXcuJCgiW2RhdGEtYmluZGF0dHItIiArIGJpbmRB
        dHRySWQgKyAiPSciICsgYmluZEF0dHJJZCArICInXSIpIDogdmlldy4kKCk7
        CgogICAgICAvLyBJZiB3ZSBjYW4ndCBmaW5kIHRoZSBlbGVtZW50IGFueW1v
        cmUsIGEgcGFyZW50IHRlbXBsYXRlIGhhcyBiZWVuCiAgICAgIC8vIHJlLXJl
        bmRlcmVkIGFuZCB3ZSd2ZSBiZWVuIG51a2VkLiBSZW1vdmUgdGhlIG9ic2Vy
        dmVyLgogICAgICBpZiAoIWVsZW0gfHwgZWxlbS5sZW5ndGggPT09IDApIHsK
        ICAgICAgICBFbWJlci5yZW1vdmVPYnNlcnZlcihwYXRoUm9vdCwgcGF0aCwg
        aW52b2tlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSWYgd2UgaGFk
        IHByZXZpb3VzbHkgYWRkZWQgYSBjbGFzcyB0byB0aGUgZWxlbWVudCwgcmVt
        b3ZlIGl0LgogICAgICAgIGlmIChvbGRDbGFzcykgewogICAgICAgICAgZWxl
        bS5yZW1vdmVDbGFzcyhvbGRDbGFzcyk7CiAgICAgICAgfQoKICAgICAgICAv
        LyBJZiBuZWNlc3NhcnksIGFkZCBhIG5ldyBjbGFzcy4gTWFrZSBzdXJlIHdl
        IGtlZXAgdHJhY2sgb2YgaXQgc28KICAgICAgICAvLyBpdCBjYW4gYmUgcmVt
        b3ZlZCBpbiB0aGUgZnV0dXJlLgogICAgICAgIGlmIChuZXdDbGFzcykgewog
        ICAgICAgICAgZWxlbS5hZGRDbGFzcyhuZXdDbGFzcyk7CiAgICAgICAgICBv
        bGRDbGFzcyA9IG5ld0NsYXNzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAg
        ICBvbGRDbGFzcyA9IG51bGw7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoK
        ICAgIGlmIChwYXRoICE9PSAnJyAmJiBwYXRoICE9PSAndGhpcycpIHsKICAg
        ICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKHBhdGhSb290LCBwYXRoLCBvYnNl
        cnZlcik7CiAgICB9CgogICAgLy8gV2UndmUgYWxyZWFkeSBzZXR1cCB0aGUg
        b2JzZXJ2ZXI7IG5vdyB3ZSBqdXN0IG5lZWQgdG8gZmlndXJlIG91dCB0aGUK
        ICAgIC8vIGNvcnJlY3QgYmVoYXZpb3IgcmlnaHQgbm93IG9uIHRoZSBmaXJz
        dCBwYXNzIHRocm91Z2guCiAgICB2YWx1ZSA9IGNsYXNzU3RyaW5nRm9yUGF0
        aChjb250ZXh0LCBwYXJzZWRQYXRoLCBvcHRpb25zKTsKCiAgICBpZiAodmFs
        dWUpIHsKICAgICAgcmV0LnB1c2godmFsdWUpOwoKICAgICAgLy8gTWFrZSBz
        dXJlIHdlIHNhdmUgdGhlIGN1cnJlbnQgdmFsdWUgc28gdGhhdCBpdCBjYW4g
        YmUgcmVtb3ZlZCBpZiB0aGUKICAgICAgLy8gb2JzZXJ2ZXIgZmlyZXMuCiAg
        ICAgIG9sZENsYXNzID0gdmFsdWU7CiAgICB9CiAgfSk7CgogIHJldHVybiBy
        ZXQ7Cn07CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgSGFu
        ZGxlYmFycyAqLwoKLy8gVE9ETzogRG9uJ3QgcmVxdWlyZSB0aGUgZW50aXJl
        IG1vZHVsZQovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhh
        bmRsZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKdmFyIEVtYmVySGFuZGxlYmFycyA9IEVtYmVyLkhhbmRsZWJhcnM7
        CnZhciBMT1dFUkNBU0VfQV9aID0gL15bYS16XS87CnZhciBWSUVXX1BSRUZJ
        WCA9IC9edmlld1wuLzsKCmZ1bmN0aW9uIG1ha2VCaW5kaW5ncyh0aGlzQ29u
        dGV4dCwgb3B0aW9ucykgewogIHZhciBoYXNoID0gb3B0aW9ucy5oYXNoLAog
        ICAgICBoYXNoVHlwZSA9IG9wdGlvbnMuaGFzaFR5cGVzOwoKICBmb3IgKHZh
        ciBwcm9wIGluIGhhc2gpIHsKICAgIGlmIChoYXNoVHlwZVtwcm9wXSA9PT0g
        J0lEJykgewoKICAgICAgdmFyIHZhbHVlID0gaGFzaFtwcm9wXTsKCiAgICAg
        IGlmIChFbWJlci5JU19CSU5ESU5HLnRlc3QocHJvcCkpIHsKICAgICAgICBF
        bWJlci53YXJuKCJZb3UncmUgYXR0ZW1wdGluZyB0byByZW5kZXIgYSB2aWV3
        IGJ5IHBhc3NpbmcgIiArIHByb3AgKyAiPSIgKyB2YWx1ZSArICIgdG8gYSB2
        aWV3IGhlbHBlciwgYnV0IHRoaXMgc3ludGF4IGlzIGFtYmlndW91cy4gWW91
        IHNob3VsZCBlaXRoZXIgc3Vycm91bmQgIiArIHZhbHVlICsgIiBpbiBxdW90
        ZXMgb3IgcmVtb3ZlIGBCaW5kaW5nYCBmcm9tICIgKyBwcm9wICsgIi4iKTsK
        ICAgICAgfSBlbHNlIHsKICAgICAgICBoYXNoW3Byb3AgKyAnQmluZGluZydd
        ID0gdmFsdWU7CiAgICAgICAgaGFzaFR5cGVbcHJvcCArICdCaW5kaW5nJ10g
        PSAnU1RSSU5HJzsKICAgICAgICBkZWxldGUgaGFzaFtwcm9wXTsKICAgICAg
        ICBkZWxldGUgaGFzaFR5cGVbcHJvcF07CiAgICAgIH0KICAgIH0KICB9Cgog
        IGlmIChoYXNoLmhhc093blByb3BlcnR5KCdpZEJpbmRpbmcnKSkgewogICAg
        Ly8gaWQgY2FuJ3QgYmUgYm91bmQsIHNvIGp1c3QgcGVyZm9ybSBvbmUtdGlt
        ZSBsb29rdXAuCiAgICBoYXNoLmlkID0gRW1iZXJIYW5kbGViYXJzLmdldCh0
        aGlzQ29udGV4dCwgaGFzaC5pZEJpbmRpbmcsIG9wdGlvbnMpOwogICAgaGFz
        aFR5cGUuaWQgPSAnU1RSSU5HJzsKICAgIGRlbGV0ZSBoYXNoLmlkQmluZGlu
        ZzsKICAgIGRlbGV0ZSBoYXNoVHlwZS5pZEJpbmRpbmc7CiAgfQp9CgpFbWJl
        ckhhbmRsZWJhcnMuVmlld0hlbHBlciA9IEVtYmVyLk9iamVjdC5jcmVhdGUo
        ewoKICBwcm9wZXJ0aWVzRnJvbUhUTUxPcHRpb25zOiBmdW5jdGlvbihvcHRp
        b25zKSB7CiAgICB2YXIgaGFzaCA9IG9wdGlvbnMuaGFzaCwgZGF0YSA9IG9w
        dGlvbnMuZGF0YTsKICAgIHZhciBleHRlbnNpb25zID0ge30sCiAgICAgICAg
        Y2xhc3NlcyA9IGhhc2hbJ2NsYXNzJ10sCiAgICAgICAgZHVwID0gZmFsc2U7
        CgogICAgaWYgKGhhc2guaWQpIHsKICAgICAgZXh0ZW5zaW9ucy5lbGVtZW50
        SWQgPSBoYXNoLmlkOwogICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlm
        IChoYXNoLnRhZykgewogICAgICBleHRlbnNpb25zLnRhZ05hbWUgPSBoYXNo
        LnRhZzsKICAgICAgZHVwID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoY2xhc3Nl
        cykgewogICAgICBjbGFzc2VzID0gY2xhc3Nlcy5zcGxpdCgnICcpOwogICAg
        ICBleHRlbnNpb25zLmNsYXNzTmFtZXMgPSBjbGFzc2VzOwogICAgICBkdXAg
        PSB0cnVlOwogICAgfQoKICAgIGlmIChoYXNoLmNsYXNzQmluZGluZykgewog
        ICAgICBleHRlbnNpb25zLmNsYXNzTmFtZUJpbmRpbmdzID0gaGFzaC5jbGFz
        c0JpbmRpbmcuc3BsaXQoJyAnKTsKICAgICAgZHVwID0gdHJ1ZTsKICAgIH0K
        CiAgICBpZiAoaGFzaC5jbGFzc05hbWVCaW5kaW5ncykgewogICAgICBpZiAo
        ZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5ncyA9PT0gdW5kZWZpbmVkKSBl
        eHRlbnNpb25zLmNsYXNzTmFtZUJpbmRpbmdzID0gW107CiAgICAgIGV4dGVu
        c2lvbnMuY2xhc3NOYW1lQmluZGluZ3MgPSBleHRlbnNpb25zLmNsYXNzTmFt
        ZUJpbmRpbmdzLmNvbmNhdChoYXNoLmNsYXNzTmFtZUJpbmRpbmdzLnNwbGl0
        KCcgJykpOwogICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmIChoYXNo
        LmF0dHJpYnV0ZUJpbmRpbmdzKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiU2V0
        dGluZyAnYXR0cmlidXRlQmluZGluZ3MnIHZpYSBIYW5kbGViYXJzIGlzIG5v
        dCBhbGxvd2VkLiBQbGVhc2Ugc3ViY2xhc3MgRW1iZXIuVmlldyBhbmQgc2V0
        IGl0IHRoZXJlIGluc3RlYWQuIik7CiAgICAgIGV4dGVuc2lvbnMuYXR0cmli
        dXRlQmluZGluZ3MgPSBudWxsOwogICAgICBkdXAgPSB0cnVlOwogICAgfQoK
        ICAgIGlmIChkdXApIHsKICAgICAgaGFzaCA9IEVtYmVyLiQuZXh0ZW5kKHt9
        LCBoYXNoKTsKICAgICAgZGVsZXRlIGhhc2guaWQ7CiAgICAgIGRlbGV0ZSBo
        YXNoLnRhZzsKICAgICAgZGVsZXRlIGhhc2hbJ2NsYXNzJ107CiAgICAgIGRl
        bGV0ZSBoYXNoLmNsYXNzQmluZGluZzsKICAgIH0KCiAgICAvLyBTZXQgdGhl
        IHByb3BlciBjb250ZXh0IGZvciBhbGwgYmluZGluZ3MgcGFzc2VkIHRvIHRo
        ZSBoZWxwZXIuIFRoaXMgYXBwbGllcyB0byByZWd1bGFyIGF0dHJpYnV0ZSBi
        aW5kaW5ncwogICAgLy8gYXMgd2VsbCBhcyBjbGFzcyBuYW1lIGJpbmRpbmdz
        LiBJZiB0aGUgYmluZGluZ3MgYXJlIGxvY2FsLCBtYWtlIHRoZW0gcmVsYXRp
        dmUgdG8gdGhlIGN1cnJlbnQgY29udGV4dAogICAgLy8gaW5zdGVhZCBvZiB0
        aGUgdmlldy4KICAgIHZhciBwYXRoOwoKICAgIC8vIEV2YWx1YXRlIHRoZSBj
        b250ZXh0IG9mIHJlZ3VsYXIgYXR0cmlidXRlIGJpbmRpbmdzOgogICAgZm9y
        ICh2YXIgcHJvcCBpbiBoYXNoKSB7CiAgICAgIGlmICghaGFzaC5oYXNPd25Q
        cm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQoKICAgICAgLy8gVGVzdCBp
        ZiB0aGUgcHJvcGVydHkgZW5kcyBpbiAiQmluZGluZyIKICAgICAgaWYgKEVt
        YmVyLklTX0JJTkRJTkcudGVzdChwcm9wKSAmJiB0eXBlb2YgaGFzaFtwcm9w
        XSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBwYXRoID0gdGhpcy5jb250ZXh0
        dWFsaXplQmluZGluZ1BhdGgoaGFzaFtwcm9wXSwgZGF0YSk7CiAgICAgICAg
        aWYgKHBhdGgpIHsgaGFzaFtwcm9wXSA9IHBhdGg7IH0KICAgICAgfQogICAg
        fQoKICAgIC8vIEV2YWx1YXRlIHRoZSBjb250ZXh0IG9mIGNsYXNzIG5hbWUg
        YmluZGluZ3M6CiAgICBpZiAoZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5n
        cykgewogICAgICBmb3IgKHZhciBiIGluIGV4dGVuc2lvbnMuY2xhc3NOYW1l
        QmluZGluZ3MpIHsKICAgICAgICB2YXIgZnVsbCA9IGV4dGVuc2lvbnMuY2xh
        c3NOYW1lQmluZGluZ3NbYl07CiAgICAgICAgaWYgKHR5cGVvZiBmdWxsID09
        PSAnc3RyaW5nJykgewogICAgICAgICAgLy8gQ29udGV4dHVhbGl6ZSB0aGUg
        cGF0aCBvZiBjbGFzc05hbWVCaW5kaW5nIHNvIHRoaXM6CiAgICAgICAgICAv
        LwogICAgICAgICAgLy8gICAgIGNsYXNzTmFtZUJpbmRpbmc9ImlzR3JlZW46
        Z3JlZW4iCiAgICAgICAgICAvLwogICAgICAgICAgLy8gaXMgY29udmVydGVk
        IHRvIHRoaXM6CiAgICAgICAgICAvLwogICAgICAgICAgLy8gICAgIGNsYXNz
        TmFtZUJpbmRpbmc9Il9wYXJlbnRWaWV3LmNvbnRleHQuaXNHcmVlbjpncmVl
        biIKICAgICAgICAgIHZhciBwYXJzZWRQYXRoID0gRW1iZXIuVmlldy5fcGFy
        c2VQcm9wZXJ0eVBhdGgoZnVsbCk7CiAgICAgICAgICBwYXRoID0gdGhpcy5j
        b250ZXh0dWFsaXplQmluZGluZ1BhdGgocGFyc2VkUGF0aC5wYXRoLCBkYXRh
        KTsKICAgICAgICAgIGlmIChwYXRoKSB7IGV4dGVuc2lvbnMuY2xhc3NOYW1l
        QmluZGluZ3NbYl0gPSBwYXRoICsgcGFyc2VkUGF0aC5jbGFzc05hbWVzOyB9
        CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIEVtYmVyLiQu
        ZXh0ZW5kKGhhc2gsIGV4dGVuc2lvbnMpOwogIH0sCgogIC8vIFRyYW5zZm9y
        bSBiaW5kaW5ncyBmcm9tIHRoZSBjdXJyZW50IGNvbnRleHQgdG8gYSBjb250
        ZXh0IHRoYXQgY2FuIGJlIGV2YWx1YXRlZCB3aXRoaW4gdGhlIHZpZXcuCiAg
        Ly8gUmV0dXJucyBudWxsIGlmIHRoZSBwYXRoIHNob3VsZG4ndCBiZSBjaGFu
        Z2VkLgogIC8vCiAgLy8gVE9ETzogY29uc2lkZXIgdGhlIGFkZGl0aW9uIG9m
        IGEgcHJlZml4IHRoYXQgd291bGQgYWxsb3cgdGhpcyBtZXRob2QgdG8gcmV0
        dXJuIGBwYXRoYC4KICBjb250ZXh0dWFsaXplQmluZGluZ1BhdGg6IGZ1bmN0
        aW9uKHBhdGgsIGRhdGEpIHsKICAgIHZhciBub3JtYWxpemVkID0gRW1iZXIu
        SGFuZGxlYmFycy5ub3JtYWxpemVQYXRoKG51bGwsIHBhdGgsIGRhdGEpOwog
        ICAgaWYgKG5vcm1hbGl6ZWQuaXNLZXl3b3JkKSB7CiAgICAgIHJldHVybiAn
        dGVtcGxhdGVEYXRhLmtleXdvcmRzLicgKyBwYXRoOwogICAgfSBlbHNlIGlm
        IChFbWJlci5pc0dsb2JhbFBhdGgocGF0aCkpIHsKICAgICAgcmV0dXJuIG51
        bGw7CiAgICB9IGVsc2UgaWYgKHBhdGggPT09ICd0aGlzJykgewogICAgICBy
        ZXR1cm4gJ19wYXJlbnRWaWV3LmNvbnRleHQnOwogICAgfSBlbHNlIHsKICAg
        ICAgcmV0dXJuICdfcGFyZW50Vmlldy5jb250ZXh0LicgKyBwYXRoOwogICAg
        fQogIH0sCgogIGhlbHBlcjogZnVuY3Rpb24odGhpc0NvbnRleHQsIHBhdGgs
        IG9wdGlvbnMpIHsKICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhLAogICAg
        ICAgIGZuID0gb3B0aW9ucy5mbiwKICAgICAgICBuZXdWaWV3OwoKICAgIG1h
        a2VCaW5kaW5ncyh0aGlzQ29udGV4dCwgb3B0aW9ucyk7CgogICAgaWYgKCdz
        dHJpbmcnID09PSB0eXBlb2YgcGF0aCkgewoKICAgICAgLy8gVE9ETzogdGhp
        cyBpcyBhIGxhbWUgY29uZGl0aW9uYWwsIHRoaXMgc2hvdWxkIGxpa2VseSBj
        aGFuZ2UKICAgICAgLy8gYnV0IHNvbWV0aGluZyBhbG9uZyB0aGVzZSBsaW5l
        cyB3aWxsIGxpa2VseSBuZWVkIHRvIGJlIGFkZGVkCiAgICAgIC8vIGFzIGRl
        cHJlY2F0aW9uIHdhcm5pbmdzCiAgICAgIC8vCiAgICAgIGlmIChvcHRpb25z
        LnR5cGVzWzBdID09PSAnU1RSSU5HJyAmJiBMT1dFUkNBU0VfQV9aLnRlc3Qo
        cGF0aCkgJiYgIVZJRVdfUFJFRklYLnRlc3QocGF0aCkpIHsKICAgICAgICBF
        bWJlci5hc3NlcnQoIlZpZXcgcmVxdWlyZXMgYSBjb250YWluZXIiLCAhIWRh
        dGEudmlldy5jb250YWluZXIpOwogICAgICAgIG5ld1ZpZXcgPSBkYXRhLnZp
        ZXcuY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ3ZpZXc6JyArIHBhdGgpOwog
        ICAgICB9IGVsc2UgewogICAgICAgIG5ld1ZpZXcgPSBFbWJlckhhbmRsZWJh
        cnMuZ2V0KHRoaXNDb250ZXh0LCBwYXRoLCBvcHRpb25zKTsKICAgICAgfQoK
        ICAgICAgRW1iZXIuYXNzZXJ0KCJVbmFibGUgdG8gZmluZCB2aWV3IGF0IHBh
        dGggJyIgKyBwYXRoICsgIiciLCAhIW5ld1ZpZXcpOwogICAgfSBlbHNlIHsK
        ICAgICAgbmV3VmlldyA9IHBhdGg7CiAgICB9CgogICAgRW1iZXIuYXNzZXJ0
        KEVtYmVyLlN0cmluZy5mbXQoJ1lvdSBtdXN0IHBhc3MgYSB2aWV3IHRvIHRo
        ZSAjdmlldyBoZWxwZXIsIG5vdCAlQCAoJUApJywgW3BhdGgsIG5ld1ZpZXdd
        KSwgRW1iZXIuVmlldy5kZXRlY3QobmV3VmlldykgfHwgRW1iZXIuVmlldy5k
        ZXRlY3RJbnN0YW5jZShuZXdWaWV3KSk7CgogICAgdmFyIHZpZXdPcHRpb25z
        ID0gdGhpcy5wcm9wZXJ0aWVzRnJvbUhUTUxPcHRpb25zKG9wdGlvbnMsIHRo
        aXNDb250ZXh0KTsKICAgIHZhciBjdXJyZW50VmlldyA9IGRhdGEudmlldzsK
        ICAgIHZpZXdPcHRpb25zLnRlbXBsYXRlRGF0YSA9IGRhdGE7CiAgICB2YXIg
        bmV3Vmlld1Byb3RvID0gbmV3Vmlldy5wcm90byA/IG5ld1ZpZXcucHJvdG8o
        KSA6IG5ld1ZpZXc7CgogICAgaWYgKGZuKSB7CiAgICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IGNhbm5vdCBwcm92aWRlIGEgdGVtcGxhdGUgYmxvY2sgaWYgeW91
        IGFsc28gc3BlY2lmaWVkIGEgdGVtcGxhdGVOYW1lIiwgIWdldCh2aWV3T3B0
        aW9ucywgJ3RlbXBsYXRlTmFtZScpICYmICFnZXQobmV3Vmlld1Byb3RvLCAn
        dGVtcGxhdGVOYW1lJykpOwogICAgICB2aWV3T3B0aW9ucy50ZW1wbGF0ZSA9
        IGZuOwogICAgfQoKICAgIC8vIFdlIG9ubHkgd2FudCB0byBvdmVycmlkZSB0
        aGUgYF9jb250ZXh0YCBjb21wdXRlZCBwcm9wZXJ0eSBpZiB0aGVyZSBpcwog
        ICAgLy8gbm8gc3BlY2lmaWVkIGNvbnRyb2xsZXIuIFNlZSBWaWV3I19jb250
        ZXh0IGZvciBtb3JlIGluZm9ybWF0aW9uLgogICAgaWYgKCFuZXdWaWV3UHJv
        dG8uY29udHJvbGxlciAmJiAhbmV3Vmlld1Byb3RvLmNvbnRyb2xsZXJCaW5k
        aW5nICYmICF2aWV3T3B0aW9ucy5jb250cm9sbGVyICYmICF2aWV3T3B0aW9u
        cy5jb250cm9sbGVyQmluZGluZykgewogICAgICB2aWV3T3B0aW9ucy5fY29u
        dGV4dCA9IHRoaXNDb250ZXh0OwogICAgfQoKICAgIGN1cnJlbnRWaWV3LmFw
        cGVuZENoaWxkKG5ld1ZpZXcsIHZpZXdPcHRpb25zKTsKICB9Cn0pOwoKLyoq
        CiAgYHt7dmlld319YCBpbnNlcnRzIGEgbmV3IGluc3RhbmNlIG9mIGBFbWJl
        ci5WaWV3YCBpbnRvIGEgdGVtcGxhdGUgcGFzc2luZyBpdHMKICBvcHRpb25z
        IHRvIHRoZSBgRW1iZXIuVmlld2AncyBgY3JlYXRlYCBtZXRob2QgYW5kIHVz
        aW5nIHRoZSBzdXBwbGllZCBibG9jayBhcwogIHRoZSB2aWV3J3Mgb3duIHRl
        bXBsYXRlLgoKICBBbiBlbXB0eSBgPGJvZHk+YCBhbmQgdGhlIGZvbGxvd2lu
        ZyB0ZW1wbGF0ZToKCiAgYGBgaGFuZGxlYmFycwogIEEgc3BhbjoKICB7eyN2
        aWV3IHRhZ05hbWU9InNwYW4ifX0KICAgIGhlbGxvLgogIHt7L3ZpZXd9fQog
        IGBgYAoKICBXaWxsIHJlc3VsdCBpbiBIVE1MIHN0cnVjdHVyZToKCiAgYGBg
        aHRtbAogIDxib2R5PgogICAgPCEtLSBOb3RlOiB0aGUgaGFuZGxlYmFycyB0
        ZW1wbGF0ZSBzY3JpcHQKICAgICAgICAgYWxzbyByZXN1bHRzIGluIGEgcmVu
        ZGVyZWQgRW1iZXIuVmlldwogICAgICAgICB3aGljaCBpcyB0aGUgb3V0ZXIg
        PGRpdj4gaGVyZSAtLT4KCiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij4K
        ICAgICAgQSBzcGFuOgogICAgICA8c3BhbiBpZD0iZW1iZXIxIiBjbGFzcz0i
        ZW1iZXItdmlldyI+CiAgICAgICAgSGVsbG8uCiAgICAgIDwvc3Bhbj4KICAg
        IDwvZGl2PgogIDwvYm9keT4KICBgYGAKCiAgIyMjIGBwYXJlbnRWaWV3YCBz
        ZXR0aW5nCgogIFRoZSBgcGFyZW50Vmlld2AgcHJvcGVydHkgb2YgdGhlIG5l
        dyBgRW1iZXIuVmlld2AgaW5zdGFuY2UgY3JlYXRlZCB0aHJvdWdoCiAgYHt7
        dmlld319YCB3aWxsIGJlIHNldCB0byB0aGUgYEVtYmVyLlZpZXdgIGluc3Rh
        bmNlIG9mIHRoZSB0ZW1wbGF0ZSB3aGVyZQogIGB7e3ZpZXd9fWAgd2FzIGNh
        bGxlZC4KCiAgYGBgamF2YXNjcmlwdAogIGFWaWV3ID0gRW1iZXIuVmlldy5j
        cmVhdGUoewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgie3sjdmlld319IG15IHBhcmVudDoge3twYXJlbnRWaWV3LmVsZW1lbnRJ
        ZH19IHt7L3ZpZXd9fSIpCiAgfSk7CgogIGFWaWV3LmFwcGVuZFRvKCdib2R5
        Jyk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIEhUTUwgc3RydWN0dXJlOgoK
        ICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmll
        dyI+CiAgICA8ZGl2IGlkPSJlbWJlcjIiIGNsYXNzPSJlbWJlci12aWV3Ij4K
        ICAgICAgbXkgcGFyZW50OiBlbWJlcjEKICAgIDwvZGl2PgogIDwvZGl2Pgog
        IGBgYAoKICAjIyMgU2V0dGluZyBDU1MgaWQgYW5kIGNsYXNzIGF0dHJpYnV0
        ZXMKCiAgVGhlIEhUTUwgYGlkYCBhdHRyaWJ1dGUgY2FuIGJlIHNldCBvbiB0
        aGUgYHt7dmlld319YCdzIHJlc3VsdGluZyBlbGVtZW50IHdpdGgKICB0aGUg
        YGlkYCBvcHRpb24uIFRoaXMgb3B0aW9uIHdpbGwgX25vdF8gYmUgcGFzc2Vk
        IHRvIGBFbWJlci5WaWV3LmNyZWF0ZWAuCgogIGBgYGhhbmRsZWJhcnMKICB7
        eyN2aWV3IHRhZ05hbWU9InNwYW4iIGlkPSJhLWN1c3RvbS1pZCJ9fQogICAg
        aGVsbG8uCiAge3svdmlld319CiAgYGBgCgogIFJlc3VsdHMgaW4gdGhlIGZv
        bGxvd2luZyBIVE1MIHN0cnVjdHVyZToKCiAgYGBgaHRtbAogIDxkaXYgY2xh
        c3M9ImVtYmVyLXZpZXciPgogICAgPHNwYW4gaWQ9ImEtY3VzdG9tLWlkIiBj
        bGFzcz0iZW1iZXItdmlldyI+CiAgICAgIGhlbGxvLgogICAgPC9zcGFuPgog
        IDwvZGl2PgogIGBgYAoKICBUaGUgSFRNTCBgY2xhc3NgIGF0dHJpYnV0ZSBj
        YW4gYmUgc2V0IG9uIHRoZSBge3t2aWV3fX1gJ3MgcmVzdWx0aW5nIGVsZW1l
        bnQKICB3aXRoIHRoZSBgY2xhc3NgIG9yIGBjbGFzc05hbWVCaW5kaW5nc2Ag
        b3B0aW9ucy4gVGhlIGBjbGFzc2Agb3B0aW9uIHdpbGwKICBkaXJlY3RseSBz
        ZXQgdGhlIENTUyBgY2xhc3NgIGF0dHJpYnV0ZSBhbmQgd2lsbCBub3QgYmUg
        cGFzc2VkIHRvCiAgYEVtYmVyLlZpZXcuY3JlYXRlYC4gYGNsYXNzTmFtZUJp
        bmRpbmdzYCB3aWxsIGJlIHBhc3NlZCB0byBgY3JlYXRlYCBhbmQgdXNlCiAg
        YEVtYmVyLlZpZXdgJ3MgY2xhc3MgbmFtZSBiaW5kaW5nIGZ1bmN0aW9uYWxp
        dHk6CgogIGBgYGhhbmRsZWJhcnMKICB7eyN2aWV3IHRhZ05hbWU9InNwYW4i
        IGNsYXNzPSJhLWN1c3RvbS1jbGFzcyJ9fQogICAgaGVsbG8uCiAge3svdmll
        d319CiAgYGBgCgogIFJlc3VsdHMgaW4gdGhlIGZvbGxvd2luZyBIVE1MIHN0
        cnVjdHVyZToKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXci
        PgogICAgPHNwYW4gaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVyLXZpZXcgYS1j
        dXN0b20tY2xhc3MiPgogICAgICBoZWxsby4KICAgIDwvc3Bhbj4KICA8L2Rp
        dj4KICBgYGAKCiAgIyMjIFN1cHBseWluZyBhIGRpZmZlcmVudCB2aWV3IGNs
        YXNzCgogIGB7e3ZpZXd9fWAgY2FuIHRha2UgYW4gb3B0aW9uYWwgZmlyc3Qg
        YXJndW1lbnQgYmVmb3JlIGl0cyBzdXBwbGllZCBvcHRpb25zIHRvCiAgc3Bl
        Y2lmeSBhIHBhdGggdG8gYSBjdXN0b20gdmlldyBjbGFzcy4KCiAgYGBgaGFu
        ZGxlYmFycwogIHt7I3ZpZXcgIk15QXBwLkN1c3RvbVZpZXcifX0KICAgIGhl
        bGxvLgogIHt7L3ZpZXd9fQogIGBgYAoKICBUaGUgZmlyc3QgYXJndW1lbnQg
        Y2FuIGFsc28gYmUgYSByZWxhdGl2ZSBwYXRoIGFjY2Vzc2libGUgZnJvbSB0
        aGUgY3VycmVudAogIGNvbnRleHQuCgogIGBgYGphdmFzY3JpcHQKICBNeUFw
        cCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7fSk7CiAgTXlBcHAuT3V0
        ZXJWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgaW5uZXJWaWV3Q2xh
        c3M6IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgY2xhc3NOYW1lczogWydh
        LWN1c3RvbS12aWV3LWNsYXNzLWFzLXByb3BlcnR5J10KICAgIH0pLAogICAg
        dGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgne3sjdmlldyAi
        dmlldy5pbm5lclZpZXdDbGFzcyJ9fSBoaSB7ey92aWV3fX0nKQogIH0pOwoK
        ICBNeUFwcC5PdXRlclZpZXcuY3JlYXRlKCkuYXBwZW5kVG8oJ2JvZHknKTsK
        ICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MOgoK
        ICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmll
        dyI+CiAgICA8ZGl2IGlkPSJlbWJlcjIiIGNsYXNzPSJlbWJlci12aWV3IGEt
        Y3VzdG9tLXZpZXctY2xhc3MtYXMtcHJvcGVydHkiPgogICAgICBoaQogICAg
        PC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIyBCbG9ja2xlc3MgdXNlCgog
        IElmIHlvdSBzdXBwbHkgYSBjdXN0b20gYEVtYmVyLlZpZXdgIHN1YmNsYXNz
        IHRoYXQgc3BlY2lmaWVzIGl0cyBvd24gdGVtcGxhdGUKICBvciBwcm92aWRl
        IGEgYHRlbXBsYXRlTmFtZWAgb3B0aW9uIHRvIGB7e3ZpZXd9fWAgaXQgY2Fu
        IGJlIHVzZWQgd2l0aG91dAogIHN1cHBseWluZyBhIGJsb2NrLiBBdHRlbXB0
        cyB0byB1c2UgYm90aCBhIGB0ZW1wbGF0ZU5hbWVgIG9wdGlvbiBhbmQgc3Vw
        cGx5IGEKICBibG9jayB3aWxsIHRocm93IGFuIGVycm9yLgoKICBgYGBoYW5k
        bGViYXJzCiAge3t2aWV3ICJNeUFwcC5WaWV3V2l0aEFUZW1wbGF0ZURlZmlu
        ZWQifX0KICBgYGAKCiAgIyMjIGB2aWV3TmFtZWAgcHJvcGVydHkKCiAgWW91
        IGNhbiBzdXBwbHkgYSBgdmlld05hbWVgIG9wdGlvbiB0byBge3t2aWV3fX1g
        LiBUaGUgYEVtYmVyLlZpZXdgIGluc3RhbmNlCiAgd2lsbCBiZSByZWZlcmVu
        Y2VkIGFzIGEgcHJvcGVydHkgb2YgaXRzIHBhcmVudCB2aWV3IGJ5IHRoaXMg
        bmFtZS4KCiAgYGBgamF2YXNjcmlwdAogIGFWaWV3ID0gRW1iZXIuVmlldy5j
        cmVhdGUoewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgne3sjdmlldyB2aWV3TmFtZT0iYUNoaWxkQnlOYW1lIn19IGhpIHt7L3Zp
        ZXd9fScpCiAgfSk7CgogIGFWaWV3LmFwcGVuZFRvKCdib2R5Jyk7CiAgYVZp
        ZXcuZ2V0KCdhQ2hpbGRCeU5hbWUnKSAvLyB0aGUgaW5zdGFuY2Ugb2YgRW1i
        ZXIuVmlldyBjcmVhdGVkIGJ5IHt7dmlld319IGhlbHBlcgogIGBgYAoKICBA
        bWV0aG9kIHZpZXcKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwog
        IEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtIYXNofSBvcHRpb25z
        CiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlckhhbmRs
        ZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3ZpZXcnLCBmdW5jdGlvbihwYXRoLCBv
        cHRpb25zKSB7CiAgRW1iZXIuYXNzZXJ0KCJUaGUgdmlldyBoZWxwZXIgb25s
        eSB0YWtlcyBhIHNpbmdsZSBhcmd1bWVudCIsIGFyZ3VtZW50cy5sZW5ndGgg
        PD0gMik7CgogIC8vIElmIG5vIHBhdGggaXMgcHJvdmlkZWQsIHRyZWF0IHBh
        dGggcGFyYW0gYXMgb3B0aW9ucy4KICBpZiAocGF0aCAmJiBwYXRoLmRhdGEg
        JiYgcGF0aC5kYXRhLmlzUmVuZGVyRGF0YSkgewogICAgb3B0aW9ucyA9IHBh
        dGg7CiAgICBwYXRoID0gIkVtYmVyLlZpZXciOwogIH0KCiAgcmV0dXJuIEVt
        YmVySGFuZGxlYmFycy5WaWV3SGVscGVyLmhlbHBlcih0aGlzLCBwYXRoLCBv
        cHRpb25zKTsKfSk7CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmdsb2Jh
        bHMgSGFuZGxlYmFycyAqLwoKLy8gVE9ETzogRG9uJ3QgcmVxdWlyZSBhbGwg
        b2YgdGhpcyBtb2R1bGUKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBl
        bWJlci1oYW5kbGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBoYW5k
        bGViYXJzR2V0ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQsIGZtdCA9IEVtYmVy
        LlN0cmluZy5mbXQ7CgovKioKICBge3tjb2xsZWN0aW9ufX1gIGlzIGEgYEVt
        YmVyLkhhbmRsZWJhcnNgIGhlbHBlciBmb3IgYWRkaW5nIGluc3RhbmNlcyBv
        ZgogIGBFbWJlci5Db2xsZWN0aW9uVmlld2AgdG8gYSB0ZW1wbGF0ZS4gU2Vl
        IFtFbWJlci5Db2xsZWN0aW9uVmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLkNv
        bGxlY3Rpb25WaWV3Lmh0bWwpCiAgIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0
        aW9uIG9uIGhvdyBhIGBDb2xsZWN0aW9uVmlld2AgZnVuY3Rpb25zLgoKICBg
        e3tjb2xsZWN0aW9ufX1gJ3MgcHJpbWFyeSB1c2UgaXMgYXMgYSBibG9jayBo
        ZWxwZXIgd2l0aCBhIGBjb250ZW50QmluZGluZ2AKICBvcHRpb24gcG9pbnRp
        bmcgdG93YXJkcyBhbiBgRW1iZXIuQXJyYXlgLWNvbXBhdGlibGUgb2JqZWN0
        LiBBbiBgRW1iZXIuVmlld2AKICBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQg
        Zm9yIGVhY2ggaXRlbSBpbiBpdHMgYGNvbnRlbnRgIHByb3BlcnR5LiBFYWNo
        IHZpZXcKICB3aWxsIGhhdmUgaXRzIG93biBgY29udGVudGAgcHJvcGVydHkg
        c2V0IHRvIHRoZSBhcHByb3ByaWF0ZSBpdGVtIGluIHRoZQogIGNvbGxlY3Rp
        b24uCgogIFRoZSBwcm92aWRlZCBibG9jayB3aWxsIGJlIGFwcGxpZWQgYXMg
        dGhlIHRlbXBsYXRlIGZvciBlYWNoIGl0ZW0ncyB2aWV3LgoKICBHaXZlbiBh
        biBlbXB0eSBgPGJvZHk+YCB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOgoKICBg
        YGBoYW5kbGViYXJzCiAge3sjY29sbGVjdGlvbiBjb250ZW50QmluZGluZz0i
        QXBwLml0ZW1zIn19CiAgICBIaSB7e3ZpZXcuY29udGVudC5uYW1lfX0KICB7
        ey9jb2xsZWN0aW9ufX0KICBgYGAKCiAgQW5kIHRoZSBmb2xsb3dpbmcgYXBw
        bGljYXRpb24gY29kZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwID0gRW1iZXIu
        QXBwbGljYXRpb24uY3JlYXRlKCkKICBBcHAuaXRlbXMgPSBbCiAgICBFbWJl
        ci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnRGF2ZSd9KSwKICAgIEVtYmVyLk9i
        amVjdC5jcmVhdGUoe25hbWU6ICdNYXJ5J30pLAogICAgRW1iZXIuT2JqZWN0
        LmNyZWF0ZSh7bmFtZTogJ1NhcmEnfSkKICBdCiAgYGBgCgogIFdpbGwgcmVz
        dWx0IGluIHRoZSBIVE1MIHN0cnVjdHVyZSBiZWxvdwoKICBgYGBodG1sCiAg
        PGRpdiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8ZGl2IGNsYXNzPSJlbWJl
        ci12aWV3Ij5IaSBEYXZlPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12
        aWV3Ij5IaSBNYXJ5PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3
        Ij5IaSBTYXJhPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIyBCbG9ja2xl
        c3MgVXNlCgogIElmIHlvdSBwcm92aWRlIGFuIGBpdGVtVmlld0NsYXNzYCBv
        cHRpb24gdGhhdCBoYXMgaXRzIG93biBgdGVtcGxhdGVgIHlvdSBjYW4KICBv
        bWl0IHRoZSBibG9jay4KCiAgVGhlIGZvbGxvd2luZyB0ZW1wbGF0ZToKCiAg
        YGBgaGFuZGxlYmFycwogIHt7Y29sbGVjdGlvbiBjb250ZW50QmluZGluZz0i
        QXBwLml0ZW1zIiBpdGVtVmlld0NsYXNzPSJBcHAuQW5JdGVtVmlldyJ9fQog
        IGBgYAoKICBBbmQgYXBwbGljYXRpb24gY29kZQoKICBgYGBqYXZhc2NyaXB0
        CiAgQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CiAgQXBwLml0
        ZW1zID0gWwogICAgRW1iZXIuT2JqZWN0LmNyZWF0ZSh7bmFtZTogJ0RhdmUn
        fSksCiAgICBFbWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnTWFyeSd9KSwK
        ICAgIEVtYmVyLk9iamVjdC5jcmVhdGUoe25hbWU6ICdTYXJhJ30pCiAgXTsK
        CiAgQXBwLkFuSXRlbVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0
        ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJHcmVldGluZ3Mg
        e3t2aWV3LmNvbnRlbnQubmFtZX19IikKICB9KTsKICBgYGAKCiAgV2lsbCBy
        ZXN1bHQgaW4gdGhlIEhUTUwgc3RydWN0dXJlIGJlbG93CgogIGBgYGh0bWwK
        ICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij4KICAgIDxkaXYgY2xhc3M9ImVt
        YmVyLXZpZXciPkdyZWV0aW5ncyBEYXZlPC9kaXY+CiAgICA8ZGl2IGNsYXNz
        PSJlbWJlci12aWV3Ij5HcmVldGluZ3MgTWFyeTwvZGl2PgogICAgPGRpdiBj
        bGFzcz0iZW1iZXItdmlldyI+R3JlZXRpbmdzIFNhcmE8L2Rpdj4KICA8L2Rp
        dj4KICBgYGAKCiAgIyMjIFNwZWNpZnlpbmcgYSBDb2xsZWN0aW9uVmlldyBz
        dWJjbGFzcwoKICBCeSBkZWZhdWx0IHRoZSBge3tjb2xsZWN0aW9ufX1gIGhl
        bHBlciB3aWxsIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZgogIGBFbWJlci5Db2xs
        ZWN0aW9uVmlld2AuIFlvdSBjYW4gc3VwcGx5IGEgYEVtYmVyLkNvbGxlY3Rp
        b25WaWV3YCBzdWJjbGFzcyB0bwogIHRoZSBoZWxwZXIgYnkgcGFzc2luZyBp
        dCBhcyB0aGUgZmlyc3QgYXJndW1lbnQ6CgogIGBgYGhhbmRsZWJhcnMKICB7
        eyNjb2xsZWN0aW9uIEFwcC5NeUN1c3RvbUNvbGxlY3Rpb25DbGFzcyBjb250
        ZW50QmluZGluZz0iQXBwLml0ZW1zIn19CiAgICBIaSB7e3ZpZXcuY29udGVu
        dC5uYW1lfX0KICB7ey9jb2xsZWN0aW9ufX0KICBgYGAKCiAgIyMjIEZvcndh
        cmRlZCBgaXRlbS4qYC1uYW1lZCBPcHRpb25zCgogIEFzIHdpdGggdGhlIGB7
        e3ZpZXd9fWAsIGhlbHBlciBvcHRpb25zIHBhc3NlZCB0byB0aGUgYHt7Y29s
        bGVjdGlvbn19YCB3aWxsIGJlCiAgc2V0IG9uIHRoZSByZXN1bHRpbmcgYEVt
        YmVyLkNvbGxlY3Rpb25WaWV3YCBhcyBwcm9wZXJ0aWVzLiBBZGRpdGlvbmFs
        bHksCiAgb3B0aW9ucyBwcmVmaXhlZCB3aXRoIGBpdGVtYCB3aWxsIGJlIGFw
        cGxpZWQgdG8gdGhlIHZpZXdzIHJlbmRlcmVkIGZvciBlYWNoCiAgaXRlbSAo
        bm90ZSB0aGUgY2FtZWxjYXNpbmcpOgoKICBgYGBoYW5kbGViYXJzCiAge3sj
        Y29sbGVjdGlvbiBjb250ZW50QmluZGluZz0iQXBwLml0ZW1zIgogICAgICAg
        ICAgICAgICAgaXRlbVRhZ05hbWU9InAiCiAgICAgICAgICAgICAgICBpdGVt
        Q2xhc3NOYW1lcz0iZ3JlZXRpbmcifX0KICAgIEhvd2R5IHt7dmlldy5jb250
        ZW50Lm5hbWV9fQogIHt7L2NvbGxlY3Rpb259fQogIGBgYAoKICBXaWxsIHJl
        c3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwgc3RydWN0dXJlOgoKICBgYGBo
        dG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8cCBjbGFzcz0i
        ZW1iZXItdmlldyBncmVldGluZyI+SG93ZHkgRGF2ZTwvcD4KICAgIDxwIGNs
        YXNzPSJlbWJlci12aWV3IGdyZWV0aW5nIj5Ib3dkeSBNYXJ5PC9wPgogICAg
        PHAgY2xhc3M9ImVtYmVyLXZpZXcgZ3JlZXRpbmciPkhvd2R5IFNhcmE8L3A+
        CiAgPC9kaXY+CiAgYGBgCgogIEBtZXRob2QgY29sbGVjdGlvbgogIEBmb3Ig
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBh
        dGgKICBAcGFyYW0ge0hhc2h9IG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9
        IEhUTUwgc3RyaW5nCiAgQGRlcHJlY2F0ZWQgVXNlIGB7e2VhY2h9fWAgaGVs
        cGVyIGluc3RlYWQuCiovCkVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoJ2NvbGxlY3Rpb24nLCBmdW5jdGlvbihwYXRoLCBvcHRpb25zKSB7CiAg
        RW1iZXIuZGVwcmVjYXRlKCJVc2luZyB0aGUge3tjb2xsZWN0aW9ufX0gaGVs
        cGVyIHdpdGhvdXQgc3BlY2lmeWluZyBhIGNsYXNzIGhhcyBiZWVuIGRlcHJl
        Y2F0ZWQgYXMgdGhlIHt7ZWFjaH19IGhlbHBlciBub3cgc3VwcG9ydHMgdGhl
        IHNhbWUgZnVuY3Rpb25hbGl0eS4iLCBwYXRoICE9PSAnY29sbGVjdGlvbicp
        OwoKICAvLyBJZiBubyBwYXRoIGlzIHByb3ZpZGVkLCB0cmVhdCBwYXRoIHBh
        cmFtIGFzIG9wdGlvbnMuCiAgaWYgKHBhdGggJiYgcGF0aC5kYXRhICYmIHBh
        dGguZGF0YS5pc1JlbmRlckRhdGEpIHsKICAgIG9wdGlvbnMgPSBwYXRoOwog
        ICAgcGF0aCA9IHVuZGVmaW5lZDsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNh
        bm5vdCBwYXNzIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQgdG8gdGhlIGNvbGxl
        Y3Rpb24gaGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMSk7CiAgfSBl
        bHNlIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCBwYXNzIG1vcmUg
        dGhhbiBvbmUgYXJndW1lbnQgdG8gdGhlIGNvbGxlY3Rpb24gaGVscGVyIiwg
        YXJndW1lbnRzLmxlbmd0aCA9PT0gMik7CiAgfQoKICB2YXIgZm4gPSBvcHRp
        b25zLmZuOwogIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhOwogIHZhciBpbnZl
        cnNlID0gb3B0aW9ucy5pbnZlcnNlOwogIHZhciB2aWV3ID0gb3B0aW9ucy5k
        YXRhLnZpZXc7CgogIC8vIElmIHBhc3NlZCBhIHBhdGggc3RyaW5nLCBjb252
        ZXJ0IHRoYXQgaW50byBhbiBvYmplY3QuCiAgLy8gT3RoZXJ3aXNlLCBqdXN0
        IGRlZmF1bHQgdG8gdGhlIHN0YW5kYXJkIGNsYXNzLgogIHZhciBjb2xsZWN0
        aW9uQ2xhc3M7CiAgY29sbGVjdGlvbkNsYXNzID0gcGF0aCA/IGhhbmRsZWJh
        cnNHZXQodGhpcywgcGF0aCwgb3B0aW9ucykgOiBFbWJlci5Db2xsZWN0aW9u
        VmlldzsKICBFbWJlci5hc3NlcnQoZm10KCIlQCAjY29sbGVjdGlvbjogQ291
        bGQgbm90IGZpbmQgY29sbGVjdGlvbiBjbGFzcyAlQCIsIFtkYXRhLnZpZXcs
        IHBhdGhdKSwgISFjb2xsZWN0aW9uQ2xhc3MpOwoKICB2YXIgaGFzaCA9IG9w
        dGlvbnMuaGFzaCwgaXRlbUhhc2ggPSB7fSwgbWF0Y2g7CgogIC8vIEV4dHJh
        Y3QgaXRlbSB2aWV3IGNsYXNzIGlmIHByb3ZpZGVkIGVsc2UgZGVmYXVsdCB0
        byB0aGUgc3RhbmRhcmQgY2xhc3MKICB2YXIgY29sbGVjdGlvblByb3RvdHlw
        ZSA9IGNvbGxlY3Rpb25DbGFzcy5wcm90bygpLAogICAgICBpdGVtVmlld0Ns
        YXNzOwoKICBpZiAoaGFzaC5pdGVtVmlldykgewogICAgdmFyIGNvbnRyb2xs
        ZXIgPSBkYXRhLmtleXdvcmRzLmNvbnRyb2xsZXI7CiAgICBFbWJlci5hc3Nl
        cnQoJ1lvdSBzcGVjaWZpZWQgYW4gaXRlbVZpZXcsIGJ1dCB0aGUgY3VycmVu
        dCBjb250ZXh0IGhhcyBubyBjb250YWluZXIgdG8gbG9vayB0aGUgaXRlbVZp
        ZXcgdXAgaW4uIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB5b3UgY3JlYXRl
        ZCBhIHZpZXcgbWFudWFsbHksIGluc3RlYWQgb2YgdGhyb3VnaCB0aGUgY29u
        dGFpbmVyLiBJbnN0ZWFkLCB1c2UgY29udGFpbmVyLmxvb2t1cCgidmlldzp2
        aWV3TmFtZSIpLCB3aGljaCB3aWxsIHByb3Blcmx5IGluc3RhbnRpYXRlIHlv
        dXIgdmlldy4nLCBjb250cm9sbGVyICYmIGNvbnRyb2xsZXIuY29udGFpbmVy
        KTsKICAgIHZhciBjb250YWluZXIgPSBjb250cm9sbGVyLmNvbnRhaW5lcjsK
        ICAgIGl0ZW1WaWV3Q2xhc3MgPSBjb250YWluZXIucmVzb2x2ZSgndmlldzon
        ICsgaGFzaC5pdGVtVmlldyk7CiAgICBFbWJlci5hc3NlcnQoJ1lvdSBzcGVj
        aWZpZWQgdGhlIGl0ZW1WaWV3ICcgKyBoYXNoLml0ZW1WaWV3ICsgIiwgYnV0
        IGl0IHdhcyBub3QgZm91bmQgYXQgIiArIGNvbnRhaW5lci5kZXNjcmliZSgi
        dmlldzoiICsgaGFzaC5pdGVtVmlldykgKyAiIChhbmQgaXQgd2FzIG5vdCBy
        ZWdpc3RlcmVkIGluIHRoZSBjb250YWluZXIpIiwgISFpdGVtVmlld0NsYXNz
        KTsKICB9IGVsc2UgaWYgKGhhc2guaXRlbVZpZXdDbGFzcykgewogICAgaXRl
        bVZpZXdDbGFzcyA9IGhhbmRsZWJhcnNHZXQoY29sbGVjdGlvblByb3RvdHlw
        ZSwgaGFzaC5pdGVtVmlld0NsYXNzLCBvcHRpb25zKTsKICB9IGVsc2Ugewog
        ICAgaXRlbVZpZXdDbGFzcyA9IGNvbGxlY3Rpb25Qcm90b3R5cGUuaXRlbVZp
        ZXdDbGFzczsKICB9CgogIEVtYmVyLmFzc2VydChmbXQoIiVAICNjb2xsZWN0
        aW9uOiBDb3VsZCBub3QgZmluZCBpdGVtVmlld0NsYXNzICVAIiwgW2RhdGEu
        dmlldywgaXRlbVZpZXdDbGFzc10pLCAhIWl0ZW1WaWV3Q2xhc3MpOwoKICBk
        ZWxldGUgaGFzaC5pdGVtVmlld0NsYXNzOwogIGRlbGV0ZSBoYXNoLml0ZW1W
        aWV3OwoKICAvLyBHbyB0aHJvdWdoIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSB7
        e2NvbGxlY3Rpb259fSBoZWxwZXIgYW5kIGV4dHJhY3Qgb3B0aW9ucwogIC8v
        IHRoYXQgY29uZmlndXJlIGl0ZW0gdmlld3MgaW5zdGVhZCBvZiB0aGUgY29s
        bGVjdGlvbiBpdHNlbGYuCiAgZm9yICh2YXIgcHJvcCBpbiBoYXNoKSB7CiAg
        ICBpZiAoaGFzaC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICBtYXRj
        aCA9IHByb3AubWF0Y2goL15pdGVtKC4pKC4qKSQvKTsKCiAgICAgIGlmICht
        YXRjaCAmJiBwcm9wICE9PSAnaXRlbUNvbnRyb2xsZXInKSB7CiAgICAgICAg
        Ly8gQ29udmVydCBpdGVtU2hvdWxkRm9vIC0+IHNob3VsZEZvbwogICAgICAg
        IGl0ZW1IYXNoW21hdGNoWzFdLnRvTG93ZXJDYXNlKCkgKyBtYXRjaFsyXV0g
        PSBoYXNoW3Byb3BdOwogICAgICAgIC8vIERlbGV0ZSBmcm9tIGhhc2ggYXMg
        dGhpcyB3aWxsIGVuZCB1cCBnZXR0aW5nIHBhc3NlZCB0byB0aGUKICAgICAg
        ICAvLyB7e3ZpZXd9fSBoZWxwZXIgbWV0aG9kLgogICAgICAgIGRlbGV0ZSBo
        YXNoW3Byb3BdOwogICAgICB9CiAgICB9CiAgfQoKICBpZiAoZm4pIHsKICAg
        IGl0ZW1IYXNoLnRlbXBsYXRlID0gZm47CiAgICBkZWxldGUgb3B0aW9ucy5m
        bjsKICB9CgogIHZhciBlbXB0eVZpZXdDbGFzczsKICBpZiAoaW52ZXJzZSAm
        JiBpbnZlcnNlICE9PSBIYW5kbGViYXJzLlZNLm5vb3ApIHsKICAgIGVtcHR5
        Vmlld0NsYXNzID0gZ2V0KGNvbGxlY3Rpb25Qcm90b3R5cGUsICdlbXB0eVZp
        ZXdDbGFzcycpOwogICAgZW1wdHlWaWV3Q2xhc3MgPSBlbXB0eVZpZXdDbGFz
        cy5leHRlbmQoewogICAgICAgICAgdGVtcGxhdGU6IGludmVyc2UsCiAgICAg
        ICAgICB0YWdOYW1lOiBpdGVtSGFzaC50YWdOYW1lCiAgICB9KTsKICB9IGVs
        c2UgaWYgKGhhc2guZW1wdHlWaWV3Q2xhc3MpIHsKICAgIGVtcHR5Vmlld0Ns
        YXNzID0gaGFuZGxlYmFyc0dldCh0aGlzLCBoYXNoLmVtcHR5Vmlld0NsYXNz
        LCBvcHRpb25zKTsKICB9CiAgaWYgKGVtcHR5Vmlld0NsYXNzKSB7IGhhc2gu
        ZW1wdHlWaWV3ID0gZW1wdHlWaWV3Q2xhc3M7IH0KCiAgaWYgKCFoYXNoLmtl
        eXdvcmQpIHsKICAgIGl0ZW1IYXNoLl9jb250ZXh0ID0gRW1iZXIuY29tcHV0
        ZWQuYWxpYXMoJ2NvbnRlbnQnKTsKICB9CgogIHZhciB2aWV3T3B0aW9ucyA9
        IEVtYmVyLkhhbmRsZWJhcnMuVmlld0hlbHBlci5wcm9wZXJ0aWVzRnJvbUhU
        TUxPcHRpb25zKHsgZGF0YTogZGF0YSwgaGFzaDogaXRlbUhhc2ggfSwgdGhp
        cyk7CiAgaGFzaC5pdGVtVmlld0NsYXNzID0gaXRlbVZpZXdDbGFzcy5leHRl
        bmQodmlld09wdGlvbnMpOwoKICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5o
        ZWxwZXJzLnZpZXcuY2FsbCh0aGlzLCBjb2xsZWN0aW9uQ2xhc3MsIG9wdGlv
        bnMpOwp9KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBI
        YW5kbGViYXJzICovCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItaGFuZGxlYmFycwoqLwoKdmFyIGhhbmRsZWJhcnNHZXQgPSBFbWJlci5I
        YW5kbGViYXJzLmdldDsKCi8qKgogIGB1bmJvdW5kYCBhbGxvd3MgeW91IHRv
        IG91dHB1dCBhIHByb3BlcnR5IHdpdGhvdXQgYmluZGluZy4gKkltcG9ydGFu
        dDoqIFRoZQogIG91dHB1dCB3aWxsIG5vdCBiZSB1cGRhdGVkIGlmIHRoZSBw
        cm9wZXJ0eSBjaGFuZ2VzLiBVc2Ugd2l0aCBjYXV0aW9uLgoKICBgYGBoYW5k
        bGViYXJzCiAgPGRpdj57e3VuYm91bmQgc29tZVByb3BlcnR5VGhhdERvZXNu
        dENoYW5nZX19PC9kaXY+CiAgYGBgCgogIGB1bmJvdW5kYCBjYW4gYWxzbyBi
        ZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYSBib3VuZCBoZWxwZXIgdG8K
        ICByZW5kZXIgaXQgaW4gaXRzIHVuYm91bmQgZm9ybToKCiAgYGBgaGFuZGxl
        YmFycwogIDxkaXY+e3t1bmJvdW5kIGhlbHBlck5hbWUgc29tZVByb3BlcnR5
        VGhhdERvZXNudENoYW5nZX19PC9kaXY+CiAgYGBgCgogIEBtZXRob2QgdW5i
        b3VuZAogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFt
        IHtTdHJpbmd9IHByb3BlcnR5CiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0
        cmluZwoqLwpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd1bmJv
        dW5kJywgZnVuY3Rpb24ocHJvcGVydHksIGZuKSB7CiAgdmFyIG9wdGlvbnMg
        PSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLCBoZWxwZXIsIGNv
        bnRleHQsIG91dDsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7CiAg
        ICAvLyBVbmJvdW5kIGhlbHBlciBjYWxsLgogICAgb3B0aW9ucy5kYXRhLmlz
        VW5ib3VuZCA9IHRydWU7CiAgICBoZWxwZXIgPSBFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnNbYXJndW1lbnRzWzBdXSB8fCBFbWJlci5IYW5kbGViYXJzLmhl
        bHBlck1pc3Npbmc7CiAgICBvdXQgPSBoZWxwZXIuYXBwbHkodGhpcywgQXJy
        YXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgICBk
        ZWxldGUgb3B0aW9ucy5kYXRhLmlzVW5ib3VuZDsKICAgIHJldHVybiBvdXQ7
        CiAgfQoKICBjb250ZXh0ID0gKGZuLmNvbnRleHRzICYmIGZuLmNvbnRleHRz
        Lmxlbmd0aCkgPyBmbi5jb250ZXh0c1swXSA6IHRoaXM7CiAgcmV0dXJuIGhh
        bmRsZWJhcnNHZXQoY29udGV4dCwgcHJvcGVydHksIGZuKTsKfSk7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qanNoaW50IGRlYnVnOnRydWUqLwovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8K
        CnZhciBoYW5kbGViYXJzR2V0ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQsIG5v
        cm1hbGl6ZVBhdGggPSBFbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGg7
        CgovKioKICBgbG9nYCBhbGxvd3MgeW91IHRvIG91dHB1dCB0aGUgdmFsdWUg
        b2YgYSB2YXJpYWJsZSBpbiB0aGUgY3VycmVudCByZW5kZXJpbmcKICBjb250
        ZXh0LgoKICBgYGBoYW5kbGViYXJzCiAge3tsb2cgbXlWYXJpYWJsZX19CiAg
        YGBgCgogIEBtZXRob2QgbG9nCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhl
        bHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkKKi8KRW1iZXIuSGFu
        ZGxlYmFycy5yZWdpc3RlckhlbHBlcignbG9nJywgZnVuY3Rpb24ocHJvcGVy
        dHksIG9wdGlvbnMpIHsKICB2YXIgY29udGV4dCA9IChvcHRpb25zLmNvbnRl
        eHRzICYmIG9wdGlvbnMuY29udGV4dHMubGVuZ3RoKSA/IG9wdGlvbnMuY29u
        dGV4dHNbMF0gOiB0aGlzLAogICAgICBub3JtYWxpemVkID0gbm9ybWFsaXpl
        UGF0aChjb250ZXh0LCBwcm9wZXJ0eSwgb3B0aW9ucy5kYXRhKSwKICAgICAg
        cGF0aFJvb3QgPSBub3JtYWxpemVkLnJvb3QsCiAgICAgIHBhdGggPSBub3Jt
        YWxpemVkLnBhdGgsCiAgICAgIHZhbHVlID0gKHBhdGggPT09ICd0aGlzJykg
        PyBwYXRoUm9vdCA6IGhhbmRsZWJhcnNHZXQocGF0aFJvb3QsIHBhdGgsIG9w
        dGlvbnMpOwogIEVtYmVyLkxvZ2dlci5sb2codmFsdWUpOwp9KTsKCi8qKgog
        IEV4ZWN1dGUgdGhlIGBkZWJ1Z2dlcmAgc3RhdGVtZW50IGluIHRoZSBjdXJy
        ZW50IGNvbnRleHQuCgogIGBgYGhhbmRsZWJhcnMKICB7e2RlYnVnZ2VyfX0K
        ICBgYGAKCiAgQG1ldGhvZCBkZWJ1Z2dlcgogIEBmb3IgRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5CiovCkVt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2RlYnVnZ2VyJywgZnVu
        Y3Rpb24ob3B0aW9ucykgewogIGRlYnVnZ2VyOwp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1oYW5kbGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBF
        bWJlci5zZXQ7CgpFbWJlci5IYW5kbGViYXJzLkVhY2hWaWV3ID0gRW1iZXIu
        Q29sbGVjdGlvblZpZXcuZXh0ZW5kKEVtYmVyLl9NZXRhbW9ycGgsIHsKICBp
        bml0OiBmdW5jdGlvbigpIHsKICAgIHZhciBpdGVtQ29udHJvbGxlciA9IGdl
        dCh0aGlzLCAnaXRlbUNvbnRyb2xsZXInKTsKICAgIHZhciBiaW5kaW5nOwoK
        ICAgIGlmIChpdGVtQ29udHJvbGxlcikgewogICAgICB2YXIgY29udHJvbGxl
        ciA9IGdldCh0aGlzLCAnY29udHJvbGxlci5jb250YWluZXInKS5sb29rdXBG
        YWN0b3J5KCdjb250cm9sbGVyOmFycmF5JykuY3JlYXRlKHsKICAgICAgICBw
        YXJlbnRDb250cm9sbGVyOiBnZXQodGhpcywgJ2NvbnRyb2xsZXInKSwKICAg
        ICAgICBpdGVtQ29udHJvbGxlcjogaXRlbUNvbnRyb2xsZXIsCiAgICAgICAg
        dGFyZ2V0OiBnZXQodGhpcywgJ2NvbnRyb2xsZXInKSwKICAgICAgICBfZWFj
        aFZpZXc6IHRoaXMKICAgICAgfSk7CgogICAgICB0aGlzLmRpc2FibGVDb250
        ZW50T2JzZXJ2ZXJzKGZ1bmN0aW9uKCkgewogICAgICAgIHNldCh0aGlzLCAn
        Y29udGVudCcsIGNvbnRyb2xsZXIpOwogICAgICAgIGJpbmRpbmcgPSBuZXcg
        RW1iZXIuQmluZGluZygnY29udGVudCcsICdfZWFjaFZpZXcuZGF0YVNvdXJj
        ZScpLm9uZVdheSgpOwogICAgICAgIGJpbmRpbmcuY29ubmVjdChjb250cm9s
        bGVyKTsKICAgICAgfSk7CgogICAgICBzZXQodGhpcywgJ19hcnJheUNvbnRy
        b2xsZXInLCBjb250cm9sbGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMu
        ZGlzYWJsZUNvbnRlbnRPYnNlcnZlcnMoZnVuY3Rpb24oKSB7CiAgICAgICAg
        YmluZGluZyA9IG5ldyBFbWJlci5CaW5kaW5nKCdjb250ZW50JywgJ2RhdGFT
        b3VyY2UnKS5vbmVXYXkoKTsKICAgICAgICBiaW5kaW5nLmNvbm5lY3QodGhp
        cyk7CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9zdXBlcigp
        OwogIH0sCgogIF9hc3NlcnRBcnJheUxpa2U6IGZ1bmN0aW9uKGNvbnRlbnQp
        IHsKICAgIEVtYmVyLmFzc2VydCgiVGhlIHZhbHVlIHRoYXQgI2VhY2ggbG9v
        cHMgb3ZlciBtdXN0IGJlIGFuIEFycmF5LiBZb3UgcGFzc2VkICIgKyBjb250
        ZW50LmNvbnN0cnVjdG9yICsgIiwgYnV0IGl0IHNob3VsZCBoYXZlIGJlZW4g
        YW4gQXJyYXlDb250cm9sbGVyIiwgIUVtYmVyLkNvbnRyb2xsZXJNaXhpbi5k
        ZXRlY3QoY29udGVudCkgfHwgKGNvbnRlbnQgJiYgY29udGVudC5pc0dlbmVy
        YXRlZCkgfHwgY29udGVudCBpbnN0YW5jZW9mIEVtYmVyLkFycmF5Q29udHJv
        bGxlcik7CiAgICBFbWJlci5hc3NlcnQoIlRoZSB2YWx1ZSB0aGF0ICNlYWNo
        IGxvb3BzIG92ZXIgbXVzdCBiZSBhbiBBcnJheS4gWW91IHBhc3NlZCAiICsg
        KChFbWJlci5Db250cm9sbGVyTWl4aW4uZGV0ZWN0KGNvbnRlbnQpICYmIGNv
        bnRlbnQuZ2V0KCdtb2RlbCcpICE9PSB1bmRlZmluZWQpID8gKCIiICsgY29u
        dGVudC5nZXQoJ21vZGVsJykgKyAiICh3cmFwcGVkIGluICIgKyBjb250ZW50
        ICsgIikiKSA6ICgiIiArIGNvbnRlbnQpKSwgRW1iZXIuQXJyYXkuZGV0ZWN0
        KGNvbnRlbnQpKTsKICB9LAoKICBkaXNhYmxlQ29udGVudE9ic2VydmVyczog
        ZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIEVtYmVyLnJlbW92ZUJlZm9yZU9i
        c2VydmVyKHRoaXMsICdjb250ZW50JywgbnVsbCwgJ19jb250ZW50V2lsbENo
        YW5nZScpOwogICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcywgJ2NvbnRl
        bnQnLCBudWxsLCAnX2NvbnRlbnREaWRDaGFuZ2UnKTsKCiAgICBjYWxsYmFj
        ay5jYWxsKHRoaXMpOwoKICAgIEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKHRo
        aXMsICdjb250ZW50JywgbnVsbCwgJ19jb250ZW50V2lsbENoYW5nZScpOwog
        ICAgRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcywgJ2NvbnRlbnQnLCBudWxsLCAn
        X2NvbnRlbnREaWRDaGFuZ2UnKTsKICB9LAoKICBpdGVtVmlld0NsYXNzOiBF
        bWJlci5fTWV0YW1vcnBoVmlldywKICBlbXB0eVZpZXdDbGFzczogRW1iZXIu
        X01ldGFtb3JwaFZpZXcsCgogIGNyZWF0ZUNoaWxkVmlldzogZnVuY3Rpb24o
        dmlldywgYXR0cnMpIHsKICAgIHZpZXcgPSB0aGlzLl9zdXBlcih2aWV3LCBh
        dHRycyk7CgogICAgLy8gQXQgdGhlIG1vbWVudCwgaWYgYSBjb250YWluZXIg
        dmlldyBzdWJjbGFzcyB3YW50cwogICAgLy8gdG8gaW5zZXJ0IGtleXdvcmRz
        LCBpdCBpcyByZXNwb25zaWJsZSBmb3IgY2xvbmluZwogICAgLy8gdGhlIGtl
        eXdvcmRzIGhhc2guIFRoaXMgd2lsbCBiZSBmaXhlZCBtb21lbnRhcmlseS4K
        ICAgIHZhciBrZXl3b3JkID0gZ2V0KHRoaXMsICdrZXl3b3JkJyk7CiAgICB2
        YXIgY29udGVudCA9IGdldCh2aWV3LCAnY29udGVudCcpOwoKICAgIGlmIChr
        ZXl3b3JkKSB7CiAgICAgIHZhciBkYXRhID0gZ2V0KHZpZXcsICd0ZW1wbGF0
        ZURhdGEnKTsKCiAgICAgIGRhdGEgPSBFbWJlci5jb3B5KGRhdGEpOwogICAg
        ICBkYXRhLmtleXdvcmRzID0gdmlldy5jbG9uZUtleXdvcmRzKCk7CiAgICAg
        IHNldCh2aWV3LCAndGVtcGxhdGVEYXRhJywgZGF0YSk7CgogICAgICAvLyBJ
        biB0aGlzIGNhc2UsIHdlIGRvIG5vdCBiaW5kLCBiZWNhdXNlIHRoZSBgY29u
        dGVudGAgb2YKICAgICAgLy8gYSAjZWFjaCBpdGVtIGNhbm5vdCBjaGFuZ2Uu
        CiAgICAgIGRhdGEua2V5d29yZHNba2V5d29yZF0gPSBjb250ZW50OwogICAg
        fQoKICAgIC8vIElmIHt7I2VhY2h9fSBpcyBsb29waW5nIG92ZXIgYW4gYXJy
        YXkgb2YgY29udHJvbGxlcnMsCiAgICAvLyBwb2ludCBlYWNoIGNoaWxkIHZp
        ZXcgYXQgdGhlaXIgcmVzcGVjdGl2ZSBjb250cm9sbGVyLgogICAgaWYgKGNv
        bnRlbnQgJiYgZ2V0KGNvbnRlbnQsICdpc0NvbnRyb2xsZXInKSkgewogICAg
        ICBzZXQodmlldywgJ2NvbnRyb2xsZXInLCBjb250ZW50KTsKICAgIH0KCiAg
        ICByZXR1cm4gdmlldzsKICB9LAoKICBkZXN0cm95OiBmdW5jdGlvbigpIHsK
        ICAgIGlmICghdGhpcy5fc3VwZXIoKSkgeyByZXR1cm47IH0KCiAgICB2YXIg
        YXJyYXlDb250cm9sbGVyID0gZ2V0KHRoaXMsICdfYXJyYXlDb250cm9sbGVy
        Jyk7CgogICAgaWYgKGFycmF5Q29udHJvbGxlcikgewogICAgICBhcnJheUNv
        bnRyb2xsZXIuZGVzdHJveSgpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwog
        IH0KfSk7Cgp2YXIgR3JvdXBlZEVhY2ggPSBFbWJlci5IYW5kbGViYXJzLkdy
        b3VwZWRFYWNoID0gZnVuY3Rpb24oY29udGV4dCwgcGF0aCwgb3B0aW9ucykg
        ewogIHZhciBzZWxmID0gdGhpcywKICAgICAgbm9ybWFsaXplZCA9IEVtYmVy
        LkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChjb250ZXh0LCBwYXRoLCBvcHRp
        b25zLmRhdGEpOwoKICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogIHRoaXMu
        cGF0aCA9IHBhdGg7CiAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICB0aGlz
        LnRlbXBsYXRlID0gb3B0aW9ucy5mbjsKICB0aGlzLmNvbnRhaW5pbmdWaWV3
        ID0gb3B0aW9ucy5kYXRhLnZpZXc7CiAgdGhpcy5ub3JtYWxpemVkUm9vdCA9
        IG5vcm1hbGl6ZWQucm9vdDsKICB0aGlzLm5vcm1hbGl6ZWRQYXRoID0gbm9y
        bWFsaXplZC5wYXRoOwogIHRoaXMuY29udGVudCA9IHRoaXMubG9va3VwQ29u
        dGVudCgpOwoKICB0aGlzLmFkZENvbnRlbnRPYnNlcnZlcnMoKTsKICB0aGlz
        LmFkZEFycmF5T2JzZXJ2ZXJzKCk7CgogIHRoaXMuY29udGFpbmluZ1ZpZXcu
        b24oJ3dpbGxDbGVhclJlbmRlcicsIGZ1bmN0aW9uKCkgewogICAgc2VsZi5k
        ZXN0cm95KCk7CiAgfSk7Cn07CgpHcm91cGVkRWFjaC5wcm90b3R5cGUgPSB7
        CiAgY29udGVudFdpbGxDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5y
        ZW1vdmVBcnJheU9ic2VydmVycygpOwogIH0sCgogIGNvbnRlbnREaWRDaGFu
        Z2U6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jb250ZW50ID0gdGhpcy5sb29r
        dXBDb250ZW50KCk7CiAgICB0aGlzLmFkZEFycmF5T2JzZXJ2ZXJzKCk7CiAg
        ICB0aGlzLnJlcmVuZGVyQ29udGFpbmluZ1ZpZXcoKTsKICB9LAoKICBjb250
        ZW50QXJyYXlXaWxsQ2hhbmdlOiBFbWJlci5LLAoKICBjb250ZW50QXJyYXlE
        aWRDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5yZXJlbmRlckNvbnRh
        aW5pbmdWaWV3KCk7CiAgfSwKCiAgbG9va3VwQ29udGVudDogZnVuY3Rpb24o
        KSB7CiAgICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5nZXQodGhpcy5ub3Jt
        YWxpemVkUm9vdCwgdGhpcy5ub3JtYWxpemVkUGF0aCwgdGhpcy5vcHRpb25z
        KTsKICB9LAoKICBhZGRBcnJheU9ic2VydmVyczogZnVuY3Rpb24oKSB7CiAg
        ICBpZiAoIXRoaXMuY29udGVudCkgeyByZXR1cm47IH0KCiAgICB0aGlzLmNv
        bnRlbnQuYWRkQXJyYXlPYnNlcnZlcih0aGlzLCB7CiAgICAgIHdpbGxDaGFu
        Z2U6ICdjb250ZW50QXJyYXlXaWxsQ2hhbmdlJywKICAgICAgZGlkQ2hhbmdl
        OiAnY29udGVudEFycmF5RGlkQ2hhbmdlJwogICAgfSk7CiAgfSwKCiAgcmVt
        b3ZlQXJyYXlPYnNlcnZlcnM6IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlz
        LmNvbnRlbnQpIHsgcmV0dXJuOyB9CgogICAgdGhpcy5jb250ZW50LnJlbW92
        ZUFycmF5T2JzZXJ2ZXIodGhpcywgewogICAgICB3aWxsQ2hhbmdlOiAnY29u
        dGVudEFycmF5V2lsbENoYW5nZScsCiAgICAgIGRpZENoYW5nZTogJ2NvbnRl
        bnRBcnJheURpZENoYW5nZScKICAgIH0pOwogIH0sCgogIGFkZENvbnRlbnRP
        YnNlcnZlcnM6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuYWRkQmVmb3JlT2Jz
        ZXJ2ZXIodGhpcy5ub3JtYWxpemVkUm9vdCwgdGhpcy5ub3JtYWxpemVkUGF0
        aCwgdGhpcywgdGhpcy5jb250ZW50V2lsbENoYW5nZSk7CiAgICBFbWJlci5h
        ZGRPYnNlcnZlcih0aGlzLm5vcm1hbGl6ZWRSb290LCB0aGlzLm5vcm1hbGl6
        ZWRQYXRoLCB0aGlzLCB0aGlzLmNvbnRlbnREaWRDaGFuZ2UpOwogIH0sCgog
        IHJlbW92ZUNvbnRlbnRPYnNlcnZlcnM6IGZ1bmN0aW9uKCkgewogICAgRW1i
        ZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIodGhpcy5ub3JtYWxpemVkUm9vdCwg
        dGhpcy5ub3JtYWxpemVkUGF0aCwgdGhpcy5jb250ZW50V2lsbENoYW5nZSk7
        CiAgICBFbWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLm5vcm1hbGl6ZWRSb290
        LCB0aGlzLm5vcm1hbGl6ZWRQYXRoLCB0aGlzLmNvbnRlbnREaWRDaGFuZ2Up
        OwogIH0sCgogIHJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMu
        Y29udGVudCkgeyByZXR1cm47IH0KCiAgICB2YXIgY29udGVudCA9IHRoaXMu
        Y29udGVudCwKICAgICAgICBjb250ZW50TGVuZ3RoID0gZ2V0KGNvbnRlbnQs
        ICdsZW5ndGgnKSwKICAgICAgICBkYXRhID0gdGhpcy5vcHRpb25zLmRhdGEs
        CiAgICAgICAgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlOwoKICAgIGRhdGEu
        aW5zaWRlRWFjaCA9IHRydWU7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNv
        bnRlbnRMZW5ndGg7IGkrKykgewogICAgICB0ZW1wbGF0ZShjb250ZW50Lm9i
        amVjdEF0KGkpLCB7IGRhdGE6IGRhdGEgfSk7CiAgICB9CiAgfSwKCiAgcmVy
        ZW5kZXJDb250YWluaW5nVmlldzogZnVuY3Rpb24oKSB7CiAgICB2YXIgc2Vs
        ZiA9IHRoaXM7CiAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyZW5kZXIn
        LCB0aGlzLCBmdW5jdGlvbigpIHsKICAgICAgLy8gSXQncyBwb3NzaWJsZSBp
        dCdzIGJlZW4gZGVzdHJveWVkIGFmdGVyIHdlIGVucXVldWVkIGEgcmUtcmVu
        ZGVyIGNhbGwuCiAgICAgIGlmICghc2VsZi5kZXN0cm95ZWQpIHsKICAgICAg
        ICBzZWxmLmNvbnRhaW5pbmdWaWV3LnJlcmVuZGVyKCk7CiAgICAgIH0KICAg
        IH0pOwogIH0sCgogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5y
        ZW1vdmVDb250ZW50T2JzZXJ2ZXJzKCk7CiAgICBpZiAodGhpcy5jb250ZW50
        KSB7CiAgICAgIHRoaXMucmVtb3ZlQXJyYXlPYnNlcnZlcnMoKTsKICAgIH0K
        ICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTsKICB9Cn07CgovKioKICBUaGUg
        YHt7I2VhY2h9fWAgaGVscGVyIGxvb3BzIG92ZXIgZWxlbWVudHMgaW4gYSBj
        b2xsZWN0aW9uLCByZW5kZXJpbmcgaXRzCiAgYmxvY2sgb25jZSBmb3IgZWFj
        aCBpdGVtLiBJdCBpcyBhbiBleHRlbnNpb24gb2YgdGhlIGJhc2UgSGFuZGxl
        YmFycyBge3sjZWFjaH19YAogIGhlbHBlcjoKCiAgYGBgamF2YXNjcmlwdAog
        IERldmVsb3BlcnMgPSBbe25hbWU6ICdZZWh1ZGEnfSx7bmFtZTogJ1RvbSd9
        LCB7bmFtZTogJ1BhdWwnfV07CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7
        eyNlYWNoIERldmVsb3BlcnN9fQogICAge3tuYW1lfX0KICB7ey9lYWNofX0K
        ICBgYGAKCiAgYHt7ZWFjaH19YCBzdXBwb3J0cyBhbiBhbHRlcm5hdGl2ZSBz
        eW50YXggd2l0aCBlbGVtZW50IG5hbWluZzoKCiAgYGBgaGFuZGxlYmFycwog
        IHt7I2VhY2ggcGVyc29uIGluIERldmVsb3BlcnN9fQogICAge3twZXJzb24u
        bmFtZX19CiAge3svZWFjaH19CiAgYGBgCgogIFdoZW4gbG9vcGluZyBvdmVy
        IG9iamVjdHMgdGhhdCBkbyBub3QgaGF2ZSBwcm9wZXJ0aWVzLCBge3t0aGlz
        fX1gIGNhbiBiZSB1c2VkCiAgdG8gcmVuZGVyIHRoZSBvYmplY3Q6CgogIGBg
        YGphdmFzY3JpcHQKICBEZXZlbG9wZXJOYW1lcyA9IFsnWWVodWRhJywgJ1Rv
        bScsICdQYXVsJ10KICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7I2VhY2gg
        RGV2ZWxvcGVyTmFtZXN9fQogICAge3t0aGlzfX0KICB7ey9lYWNofX0KICBg
        YGAKICAjIyMge3tlbHNlfX0gY29uZGl0aW9uCiAgYHt7I2VhY2h9fWAgY2Fu
        IGhhdmUgYSBtYXRjaGluZyBge3tlbHNlfX1gLiBUaGUgY29udGVudHMgb2Yg
        dGhpcyBibG9jayB3aWxsIHJlbmRlcgogIGlmIHRoZSBjb2xsZWN0aW9uIGlz
        IGVtcHR5LgoKICBgYGAKICB7eyNlYWNoIHBlcnNvbiBpbiBEZXZlbG9wZXJz
        fX0KICAgIHt7cGVyc29uLm5hbWV9fQogIHt7ZWxzZX19CiAgICA8cD5Tb3Jy
        eSwgbm9ib2R5IGlzIGF2YWlsYWJsZSBmb3IgdGhpcyB0YXNrLjwvcD4KICB7
        ey9lYWNofX0KICBgYGAKICAjIyMgU3BlY2lmeWluZyBhIFZpZXcgY2xhc3Mg
        Zm9yIGl0ZW1zCiAgSWYgeW91IHByb3ZpZGUgYW4gYGl0ZW1WaWV3Q2xhc3Ng
        IG9wdGlvbiB0aGF0IHJlZmVyZW5jZXMgYSB2aWV3IGNsYXNzCiAgd2l0aCBp
        dHMgb3duIGB0ZW1wbGF0ZWAgeW91IGNhbiBvbWl0IHRoZSBibG9jay4KCiAg
        VGhlIGZvbGxvd2luZyB0ZW1wbGF0ZToKCiAgYGBgaGFuZGxlYmFycwogIHt7
        I3ZpZXcgQXBwLk15VmlldyB9fQogICAge3tlYWNoIHZpZXcuaXRlbXMgaXRl
        bVZpZXdDbGFzcz0iQXBwLkFuSXRlbVZpZXcifX0KICB7ey92aWV3fX0KICBg
        YGAKCiAgQW5kIGFwcGxpY2F0aW9uIGNvZGUKCiAgYGBgamF2YXNjcmlwdAog
        IEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7CiAgICBNeVZpZXc6
        IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgaXRlbXM6IFsKICAgICAgICBF
        bWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnRGF2ZSd9KSwKICAgICAgICBF
        bWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnTWFyeSd9KSwKICAgICAgICBF
        bWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnU2FyYSd9KQogICAgICBdCiAg
        ICB9KQogIH0pOwoKICBBcHAuQW5JdGVtVmlldyA9IEVtYmVyLlZpZXcuZXh0
        ZW5kKHsKICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUo
        IkdyZWV0aW5ncyB7e25hbWV9fSIpCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVz
        dWx0IGluIHRoZSBIVE1MIHN0cnVjdHVyZSBiZWxvdwoKICBgYGBodG1sCiAg
        PGRpdiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8ZGl2IGNsYXNzPSJlbWJl
        ci12aWV3Ij5HcmVldGluZ3MgRGF2ZTwvZGl2PgogICAgPGRpdiBjbGFzcz0i
        ZW1iZXItdmlldyI+R3JlZXRpbmdzIE1hcnk8L2Rpdj4KICAgIDxkaXYgY2xh
        c3M9ImVtYmVyLXZpZXciPkdyZWV0aW5ncyBTYXJhPC9kaXY+CiAgPC9kaXY+
        CiAgYGBgCgogIElmIGFuIGBpdGVtVmlld0NsYXNzYCBpcyBkZWZpbmVkIG9u
        IHRoZSBoZWxwZXIsIGFuZCB0aGVyZWZvcmUgdGhlIGhlbHBlciBpcyBub3QK
        ICBiZWluZyB1c2VkIGFzIGEgYmxvY2ssIGFuIGBlbXB0eVZpZXdDbGFzc2Ag
        Y2FuIGFsc28gYmUgcHJvdmlkZWQgb3B0aW9uYWxseS4KICBUaGUgYGVtcHR5
        Vmlld0NsYXNzYCB3aWxsIG1hdGNoIHRoZSBiZWhhdmlvciBvZiB0aGUgYHt7
        ZWxzZX19YCBjb25kaXRpb24KICBkZXNjcmliZWQgYWJvdmUuIFRoYXQgaXMs
        IHRoZSBgZW1wdHlWaWV3Q2xhc3NgIHdpbGwgcmVuZGVyIGlmIHRoZSBjb2xs
        ZWN0aW9uCiAgaXMgZW1wdHkuCgogICMjIyBSZXByZXNlbnRpbmcgZWFjaCBp
        dGVtIHdpdGggYSBDb250cm9sbGVyLgogIEJ5IGRlZmF1bHQgdGhlIGNvbnRy
        b2xsZXIgbG9va3VwIHdpdGhpbiBhbiBge3sjZWFjaH19YCBibG9jayB3aWxs
        IGJlCiAgdGhlIGNvbnRyb2xsZXIgb2YgdGhlIHRlbXBsYXRlIHdoZXJlIHRo
        ZSBge3sjZWFjaH19YCB3YXMgdXNlZC4gSWYgZWFjaAogIGl0ZW0gbmVlZHMg
        dG8gYmUgcHJlc2VudGVkIGJ5IGEgY3VzdG9tIGNvbnRyb2xsZXIgeW91IGNh
        biBwcm92aWRlIGEKICBgaXRlbUNvbnRyb2xsZXJgIG9wdGlvbiB3aGljaCBy
        ZWZlcmVuY2VzIGEgY29udHJvbGxlciBieSBsb29rdXAgbmFtZS4KICBFYWNo
        IGl0ZW0gaW4gdGhlIGxvb3Agd2lsbCBiZSB3cmFwcGVkIGluIGFuIGluc3Rh
        bmNlIG9mIHRoaXMgY29udHJvbGxlcgogIGFuZCB0aGUgaXRlbSBpdHNlbGYg
        d2lsbCBiZSBzZXQgdG8gdGhlIGBjb250ZW50YCBwcm9wZXJ0eSBvZiB0aGF0
        IGNvbnRyb2xsZXIuCgogIFRoaXMgaXMgdXNlZnVsIGluIGNhc2VzIHdoZXJl
        IHByb3BlcnRpZXMgb2YgbW9kZWwgb2JqZWN0cyBuZWVkIHRyYW5zZm9ybWF0
        aW9uCiAgb3Igc3ludGhlc2lzIGZvciBkaXNwbGF5OgoKICBgYGBqYXZhc2Ny
        aXB0CiAgQXBwLkRldmVsb3BlckNvbnRyb2xsZXIgPSBFbWJlci5PYmplY3RD
        b250cm9sbGVyLmV4dGVuZCh7CiAgICBpc0F2YWlsYWJsZUZvckhpcmU6IGZ1
        bmN0aW9uKCkgewogICAgICByZXR1cm4gIXRoaXMuZ2V0KCdjb250ZW50Lmlz
        RW1wbG95ZWQnKSAmJiB0aGlzLmdldCgnY29udGVudC5pc1NlZWtpbmdXb3Jr
        Jyk7CiAgICB9LnByb3BlcnR5KCdpc0VtcGxveWVkJywgJ2lzU2Vla2luZ1dv
        cmsnKQogIH0pCiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7eyNlYWNoIHBl
        cnNvbiBpbiBkZXZlbG9wZXJzIGl0ZW1Db250cm9sbGVyPSJkZXZlbG9wZXIi
        fX0KICAgIHt7cGVyc29uLm5hbWV9fSB7eyNpZiBwZXJzb24uaXNBdmFpbGFi
        bGVGb3JIaXJlfX1IaXJlIG1lIXt7L2lmfX0KICB7ey9lYWNofX0KICBgYGAK
        CiAgRWFjaCBpdGVtQ29udHJvbGxlciB3aWxsIHJlY2VpdmUgYSByZWZlcmVu
        Y2UgdG8gdGhlIGN1cnJlbnQgY29udHJvbGxlciBhcwogIGEgYHBhcmVudENv
        bnRyb2xsZXJgIHByb3BlcnR5LgoKICAjIyMgKEV4cGVyaW1lbnRhbCkgR3Jv
        dXBlZCBFYWNoCgogIFdoZW4gdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRo
        ZSBleHBlcmltZW50YWwgW2dyb3VwIGhlbHBlcl0oaHR0cHM6Ly9naXRodWIu
        Y29tL2VtYmVyanMvZ3JvdXAtaGVscGVyKSwKICB5b3UgY2FuIGluZm9ybSBI
        YW5kbGViYXJzIHRvIHJlLXJlbmRlciBhbiBlbnRpcmUgZ3JvdXAgb2YgaXRl
        bXMgaW5zdGVhZCBvZgogIHJlLXJlbmRlcmluZyB0aGVtIG9uZSBhdCBhIHRp
        bWUgKGluIHRoZSBldmVudCB0aGF0IHRoZXkgYXJlIGNoYW5nZWQgZW4gbWFz
        c2UKICBvciBhbiBpdGVtIGlzIGFkZGVkL3JlbW92ZWQpLgoKICBgYGBoYW5k
        bGViYXJzCiAge3sjZ3JvdXB9fQogICAge3sjZWFjaCBwZW9wbGV9fQogICAg
        ICB7e2ZpcnN0TmFtZX19IHt7bGFzdE5hbWV9fQogICAge3svZWFjaH19CiAg
        e3svZ3JvdXB9fQogIGBgYAoKICBUaGlzIGNhbiBiZSBmYXN0ZXIgdGhhbiB0
        aGUgbm9ybWFsIHdheSB0aGF0IEhhbmRsZWJhcnMgcmUtcmVuZGVycyBpdGVt
        cwogIGluIHNvbWUgY2FzZXMuCgogIElmIGZvciBzb21lIHJlYXNvbiB5b3Ug
        aGF2ZSBhIGdyb3VwIHdpdGggbW9yZSB0aGFuIG9uZSBgI2VhY2hgLCB5b3Ug
        Y2FuIG1ha2UKICBvbmUgb2YgdGhlIGNvbGxlY3Rpb25zIGJlIHVwZGF0ZWQg
        aW4gbm9ybWFsIChub24tZ3JvdXBlZCkgZmFzaGlvbiBieSBzZXR0aW5nCiAg
        dGhlIG9wdGlvbiBgZ3JvdXBlZFJvd3M9dHJ1ZWAgKGNvdW50ZXItaW50dWl0
        aXZlLCBJIGtub3cpLgoKICBGb3IgZXhhbXBsZSwKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7ZGVhbGVyc2hpcE5hbWV9fQoKICB7eyNncm91cH19CiAgICB7eyNl
        YWNoIGRlYWxlcnN9fQogICAgICB7e2ZpcnN0TmFtZX19IHt7bGFzdE5hbWV9
        fQogICAge3svZWFjaH19CgogICAge3sjZWFjaCBjYXIgaW4gY2FycyBncm91
        cGVkUm93cz10cnVlfX0KICAgICAge3tjYXIubWFrZX19IHt7Y2FyLm1vZGVs
        fX0ge3tjYXIuY29sb3J9fQogICAge3svZWFjaH19CiAge3svZ3JvdXB9fQog
        IGBgYAogIEFueSBjaGFuZ2UgdG8gYGRlYWxlcnNoaXBOYW1lYCBvciB0aGUg
        YGRlYWxlcnNgIGNvbGxlY3Rpb24gd2lsbCBjYXVzZSB0aGUKICBlbnRpcmUg
        Z3JvdXAgdG8gYmUgcmUtcmVuZGVyZWQuIEhvd2V2ZXIsIGNoYW5nZXMgdG8g
        dGhlIGBjYXJzYCBjb2xsZWN0aW9uCiAgd2lsbCBiZSByZS1yZW5kZXJlZCBp
        bmRpdmlkdWFsbHkgKGFzIG5vcm1hbCkuCgogIE5vdGUgdGhhdCBgZ3JvdXBg
        IGJlaGF2aW9yIGlzIGFsc28gZGlzYWJsZWQgYnkgc3BlY2lmeWluZyBhbiBg
        aXRlbVZpZXdDbGFzc2AuCgogIEBtZXRob2QgZWFjaAogIEBmb3IgRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIFtuYW1lXSB7U3RyaW5nfSBu
        YW1lIGZvciBpdGVtICh1c2VkIHdpdGggYGluYCkKICBAcGFyYW0gW3BhdGhd
        IHtTdHJpbmd9IHBhdGgKICBAcGFyYW0gW29wdGlvbnNdIHtPYmplY3R9IEhh
        bmRsZWJhcnMga2V5L3ZhbHVlIHBhaXJzIG9mIG9wdGlvbnMKICBAcGFyYW0g
        W29wdGlvbnMuaXRlbVZpZXdDbGFzc10ge1N0cmluZ30gYSBwYXRoIHRvIGEg
        dmlldyBjbGFzcyB1c2VkIGZvciBlYWNoIGl0ZW0KICBAcGFyYW0gW29wdGlv
        bnMuaXRlbUNvbnRyb2xsZXJdIHtTdHJpbmd9IG5hbWUgb2YgYSBjb250cm9s
        bGVyIHRvIGJlIGNyZWF0ZWQgZm9yIGVhY2ggaXRlbQogIEBwYXJhbSBbb3B0
        aW9ucy5ncm91cGVkUm93c10ge2Jvb2xlYW59IGVuYWJsZSBub3JtYWwgaXRl
        bS1ieS1pdGVtIHJlbmRlcmluZyB3aGVuIGluc2lkZSBhIGAjZ3JvdXBgIGhl
        bHBlcgoqLwpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlYWNo
        JywgZnVuY3Rpb24ocGF0aCwgb3B0aW9ucykgewogIGlmIChhcmd1bWVudHMu
        bGVuZ3RoID09PSA0KSB7CiAgICBFbWJlci5hc3NlcnQoIklmIHlvdSBwYXNz
        IG1vcmUgdGhhbiBvbmUgYXJndW1lbnQgdG8gdGhlIGVhY2ggaGVscGVyLCBp
        dCBtdXN0IGJlIGluIHRoZSBmb3JtICNlYWNoIGZvbyBpbiBiYXIiLCBhcmd1
        bWVudHNbMV0gPT09ICJpbiIpOwoKICAgIHZhciBrZXl3b3JkTmFtZSA9IGFy
        Z3VtZW50c1swXTsKCiAgICBvcHRpb25zID0gYXJndW1lbnRzWzNdOwogICAg
        cGF0aCA9IGFyZ3VtZW50c1syXTsKICAgIGlmIChwYXRoID09PSAnJykgeyBw
        YXRoID0gInRoaXMiOyB9CgogICAgb3B0aW9ucy5oYXNoLmtleXdvcmQgPSBr
        ZXl3b3JkTmFtZTsKICB9CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAx
        KSB7CiAgICBvcHRpb25zID0gcGF0aDsKICAgIHBhdGggPSAndGhpcyc7CiAg
        fQoKICBvcHRpb25zLmhhc2guZGF0YVNvdXJjZUJpbmRpbmcgPSBwYXRoOwog
        IC8vIFNldCB1cCBlbXB0eVZpZXcgYXMgYSBtZXRhbW9ycGggd2l0aCBubyB0
        YWcKICAvL29wdGlvbnMuaGFzaC5lbXB0eVZpZXdDbGFzcyA9IEVtYmVyLl9N
        ZXRhbW9ycGhWaWV3OwoKICBpZiAob3B0aW9ucy5kYXRhLmluc2lkZUdyb3Vw
        ICYmICFvcHRpb25zLmhhc2guZ3JvdXBlZFJvd3MgJiYgIW9wdGlvbnMuaGFz
        aC5pdGVtVmlld0NsYXNzKSB7CiAgICBuZXcgRW1iZXIuSGFuZGxlYmFycy5H
        cm91cGVkRWFjaCh0aGlzLCBwYXRoLCBvcHRpb25zKS5yZW5kZXIoKTsKICB9
        IGVsc2UgewogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5j
        b2xsZWN0aW9uLmNhbGwodGhpcywgJ0VtYmVyLkhhbmRsZWJhcnMuRWFjaFZp
        ZXcnLCBvcHRpb25zKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJh
        cnMKKi8KCi8qKgogIGB0ZW1wbGF0ZWAgYWxsb3dzIHlvdSB0byByZW5kZXIg
        YSB0ZW1wbGF0ZSBmcm9tIGluc2lkZSBhbm90aGVyIHRlbXBsYXRlLgogIFRo
        aXMgYWxsb3dzIHlvdSB0byByZS11c2UgdGhlIHNhbWUgdGVtcGxhdGUgaW4g
        bXVsdGlwbGUgcGxhY2VzLiBGb3IgZXhhbXBsZToKCiAgYGBgaHRtbAogIDxz
        Y3JpcHQgdHlwZT0idGV4dC94LWhhbmRsZWJhcnMiIGRhdGEtdGVtcGxhdGUt
        bmFtZT0ibG9nZ2VkX2luX3VzZXIiPgogICAge3sjd2l0aCBsb2dnZWRJblVz
        ZXJ9fQogICAgICBMYXN0IExvZ2luOiB7e2xhc3RMb2dpbn19CiAgICAgIFVz
        ZXIgSW5mbzoge3t0ZW1wbGF0ZSAidXNlcl9pbmZvIn19CiAgICB7ey93aXRo
        fX0KICA8L3NjcmlwdD4KICBgYGAKCiAgYGBgaHRtbAogIDxzY3JpcHQgdHlw
        ZT0idGV4dC94LWhhbmRsZWJhcnMiIGRhdGEtdGVtcGxhdGUtbmFtZT0idXNl
        cl9pbmZvIj4KICAgIE5hbWU6IDxlbT57e25hbWV9fTwvZW0+CiAgICBLYXJt
        YTogPGVtPnt7a2FybWF9fTwvZW0+CiAgPC9zY3JpcHQ+CiAgYGBgCgogIGBg
        YGhhbmRsZWJhcnMKICB7eyNpZiBpc1VzZXJ9fQogICAge3t0ZW1wbGF0ZSAi
        dXNlcl9pbmZvIn19CiAge3tlbHNlfX0KICAgIHt7dGVtcGxhdGUgInVubG9n
        Z2VkX3VzZXJfaW5mbyJ9fQogIHt7L2lmfX0KICBgYGAKCiAgVGhpcyBoZWxw
        ZXIgbG9va3MgZm9yIHRlbXBsYXRlcyBpbiB0aGUgZ2xvYmFsIGBFbWJlci5U
        RU1QTEFURVNgIGhhc2guIElmIHlvdQogIGFkZCBgPHNjcmlwdD5gIHRhZ3Mg
        dG8geW91ciBwYWdlIHdpdGggdGhlIGBkYXRhLXRlbXBsYXRlLW5hbWVgIGF0
        dHJpYnV0ZSBzZXQsCiAgdGhleSB3aWxsIGJlIGNvbXBpbGVkIGFuZCBwbGFj
        ZWQgaW4gdGhpcyBoYXNoIGF1dG9tYXRpY2FsbHkuCgogIFlvdSBjYW4gYWxz
        byBtYW51YWxseSByZWdpc3RlciB0ZW1wbGF0ZXMgYnkgYWRkaW5nIHRoZW0g
        dG8gdGhlIGhhc2g6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5URU1QTEFU
        RVNbIm15X2Nvb2xfdGVtcGxhdGUiXSA9IEVtYmVyLkhhbmRsZWJhcnMuY29t
        cGlsZSgnPGI+e3t1c2VyfX08L2I+Jyk7CiAgYGBgCgogIEBkZXByZWNhdGVk
        CiAgQG1ldGhvZCB0ZW1wbGF0ZQogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5o
        ZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlTmFtZSB0aGUgdGVt
        cGxhdGUgdG8gcmVuZGVyCiovCgpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKCd0ZW1wbGF0ZScsIGZ1bmN0aW9uKG5hbWUsIG9wdGlvbnMpIHsK
        ICBFbWJlci5kZXByZWNhdGUoIlRoZSBgdGVtcGxhdGVgIGhlbHBlciBoYXMg
        YmVlbiBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHRoZSBgcGFydGlhbGAgaGVs
        cGVyLiBQbGVhc2UgdXNlIGBwYXJ0aWFsYCBpbnN0ZWFkLCB3aGljaCB3aWxs
        IHdvcmsgdGhlIHNhbWUgd2F5LiIpOwogIHJldHVybiBFbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMucGFydGlhbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9
        KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiovCgovKioKICBgcGFydGlh
        bGAgcmVuZGVycyBhIHRlbXBsYXRlIGRpcmVjdGx5IHVzaW5nIHRoZSBjdXJy
        ZW50IGNvbnRleHQuCiAgSWYgbmVlZGVkIHRoZSBjb250ZXh0IGNhbiBiZSBz
        ZXQgdXNpbmcgdGhlIGB7eyN3aXRoIGZvb319YCBoZWxwZXIuCgogIGBgYGh0
        bWwKICA8c2NyaXB0IHR5cGU9InRleHQveC1oYW5kbGViYXJzIiBkYXRhLXRl
        bXBsYXRlLW5hbWU9ImhlYWRlcl9iYXIiPgogICAge3sjd2l0aCBjdXJyZW50
        VXNlcn19CiAgICAgIHt7cGFydGlhbCB1c2VyX2luZm99fQogICAge3svd2l0
        aH19CiAgPC9zY3JpcHQ+CiAgYGBgCgogIFRoZSBgZGF0YS10ZW1wbGF0ZS1u
        YW1lYCBhdHRyaWJ1dGUgb2YgYSBwYXJ0aWFsIHRlbXBsYXRlCiAgaXMgcHJl
        Zml4ZWQgd2l0aCBhbiB1bmRlcnNjb3JlLgoKICBgYGBodG1sCiAgPHNjcmlw
        dCB0eXBlPSJ0ZXh0L3gtaGFuZGxlYmFycyIgZGF0YS10ZW1wbGF0ZS1uYW1l
        PSJfdXNlcl9pbmZvIj4KICAgIDxzcGFuPkhlbGxvIHt7dXNlcm5hbWV9fSE8
        L3NwYW4+CiAgPC9zY3JpcHQ+CiAgYGBgCgogIEBtZXRob2QgcGFydGlhbAog
        IEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJp
        bmd9IHBhcnRpYWxOYW1lIHRoZSBuYW1lIG9mIHRoZSB0ZW1wbGF0ZSB0byBy
        ZW5kZXIgbWludXMgdGhlIGxlYWRpbmcgdW5kZXJzY29yZQoqLwoKRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncGFydGlhbCcsIGZ1bmN0aW9u
        KG5hbWUsIG9wdGlvbnMpIHsKICB2YXIgbmFtZVBhcnRzID0gbmFtZS5zcGxp
        dCgiLyIpLAogICAgICBsYXN0UGFydCA9IG5hbWVQYXJ0c1tuYW1lUGFydHMu
        bGVuZ3RoIC0gMV07CgogIG5hbWVQYXJ0c1tuYW1lUGFydHMubGVuZ3RoIC0g
        MV0gPSAiXyIgKyBsYXN0UGFydDsKCiAgdmFyIHZpZXcgPSBvcHRpb25zLmRh
        dGEudmlldywKICAgICAgdW5kZXJzY29yZWROYW1lID0gbmFtZVBhcnRzLmpv
        aW4oIi8iKSwKICAgICAgdGVtcGxhdGUgPSB2aWV3LnRlbXBsYXRlRm9yTmFt
        ZSh1bmRlcnNjb3JlZE5hbWUpLAogICAgICBkZXByZWNhdGVkVGVtcGxhdGUg
        PSAhdGVtcGxhdGUgJiYgdmlldy50ZW1wbGF0ZUZvck5hbWUobmFtZSk7Cgog
        IEVtYmVyLmFzc2VydCgiVW5hYmxlIHRvIGZpbmQgcGFydGlhbCB3aXRoIG5h
        bWUgJyIrbmFtZSsiJy4iLCB0ZW1wbGF0ZSB8fCBkZXByZWNhdGVkVGVtcGxh
        dGUpOwoKICB0ZW1wbGF0ZSA9IHRlbXBsYXRlIHx8IGRlcHJlY2F0ZWRUZW1w
        bGF0ZTsKCiAgdGVtcGxhdGUodGhpcywgeyBkYXRhOiBvcHRpb25zLmRhdGEg
        fSk7Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQg
        PSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgogIGB7e3lpZWxk
        fX1gIGRlbm90ZXMgYW4gYXJlYSBvZiBhIHRlbXBsYXRlIHRoYXQgd2lsbCBi
        ZSByZW5kZXJlZCBpbnNpZGUKICBvZiBhbm90aGVyIHRlbXBsYXRlLiBJdCBo
        YXMgdHdvIG1haW4gdXNlczoKCiAgIyMjIFVzZSB3aXRoIGBsYXlvdXRgCiAg
        V2hlbiB1c2VkIGluIGEgSGFuZGxlYmFycyB0ZW1wbGF0ZSB0aGF0IGlzIGFz
        c2lnbmVkIHRvIGFuIGBFbWJlci5WaWV3YAogIGluc3RhbmNlJ3MgYGxheW91
        dGAgcHJvcGVydHkgRW1iZXIgd2lsbCByZW5kZXIgdGhlIGxheW91dCB0ZW1w
        bGF0ZSBmaXJzdCwKICBpbnNlcnRpbmcgdGhlIHZpZXcncyBvd24gcmVuZGVy
        ZWQgb3V0cHV0IGF0IHRoZSBge3t5aWVsZH19YCBsb2NhdGlvbi4KCiAgQW4g
        ZW1wdHkgYDxib2R5PmAgYW5kIHRoZSBmb2xsb3dpbmcgYXBwbGljYXRpb24g
        Y29kZToKCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5l
        eHRlbmQoewogICAgY2xhc3NOYW1lczogWydhLXZpZXctd2l0aC1sYXlvdXQn
        XSwKICAgIGxheW91dDogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCc8ZGl2
        IGNsYXNzPSJ3cmFwcGVyIj57e3lpZWxkfX08L2Rpdj4nKSwKICAgIHRlbXBs
        YXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJzxzcGFuPkkgYW0gd3Jh
        cHBlZDwvc3Bhbj4nKQogIH0pOwoKICBhVmlldyA9IEFWaWV3LmNyZWF0ZSgp
        OwogIGFWaWV3LmFwcGVuZFRvKCdib2R5Jyk7CiAgYGBgCgogIFdpbGwgcmVz
        dWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTCBvdXRwdXQ6CgogIGBgYGh0bWwK
        ICA8Ym9keT4KICAgIDxkaXYgY2xhc3M9J2VtYmVyLXZpZXcgYS12aWV3LXdp
        dGgtbGF5b3V0Jz4KICAgICAgPGRpdiBjbGFzcz0id3JhcHBlciI+CiAgICAg
        ICAgPHNwYW4+SSBhbSB3cmFwcGVkPC9zcGFuPgogICAgICA8L2Rpdj4KICAg
        IDwvZGl2PgogIDwvYm9keT4KICBgYGAKCiAgVGhlIGB5aWVsZGAgaGVscGVy
        IGNhbm5vdCBiZSB1c2VkIG91dHNpZGUgb2YgYSB0ZW1wbGF0ZSBhc3NpZ25l
        ZCB0byBhbgogIGBFbWJlci5WaWV3YCdzIGBsYXlvdXRgIHByb3BlcnR5IGFu
        ZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIGF0dGVtcHRlZC4KCiAgYGBgamF2
        YXNjcmlwdAogIEJWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgY2xh
        c3NOYW1lczogWydhLXZpZXctd2l0aC1sYXlvdXQnXSwKICAgIHRlbXBsYXRl
        OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ3t7eWllbGR9fScpCiAgfSk7
        CgogIGJWaWV3ID0gQlZpZXcuY3JlYXRlKCk7CiAgYlZpZXcuYXBwZW5kVG8o
        J2JvZHknKTsKCiAgLy8gdGhyb3dzCiAgLy8gVW5jYXVnaHQgRXJyb3I6IGFz
        c2VydGlvbiBmYWlsZWQ6CiAgLy8gWW91IGNhbGxlZCB5aWVsZCBpbiBhIHRl
        bXBsYXRlIHRoYXQgd2FzIG5vdCBhIGxheW91dAogIGBgYAoKICAjIyMgVXNl
        IHdpdGggRW1iZXIuQ29tcG9uZW50CiAgV2hlbiBkZXNpZ25pbmcgY29tcG9u
        ZW50cyBge3t5aWVsZH19YCBpcyB1c2VkIHRvIGRlbm90ZSB3aGVyZSwgaW5z
        aWRlIHRoZSBjb21wb25lbnQncwogIHRlbXBsYXRlLCBhbiBvcHRpb25hbCBi
        bG9jayBwYXNzZWQgdG8gdGhlIGNvbXBvbmVudCBzaG91bGQgcmVuZGVyOgoK
        ICBgYGBoYW5kbGViYXJzCiAgPCEtLSBhcHBsaWNhdGlvbi5oYnMgLS0+CiAg
        e3sjbGFiZWxlZC10ZXh0ZmllbGQgdmFsdWU9c29tZVByb3BlcnR5fX0KICAg
        IEZpcnN0IG5hbWU6CiAge3svbGFiZWxlZC10ZXh0ZmllbGR9fQogIGBgYAoK
        ICBgYGBoYW5kbGViYXJzCiAgPCEtLSBjb21wb25lbnRzL2xhYmVsZWQtdGV4
        dGZpZWxkLmhicyAtLT4KICA8bGFiZWw+CiAgICB7e3lpZWxkfX0ge3tpbnB1
        dCB2YWx1ZT12YWx1ZX19CiAgPC9sYWJlbD4KICBgYGAKCiAgUmVzdWx0OgoK
        ICBgYGBodG1sCiAgPGxhYmVsPgogICAgRmlyc3QgbmFtZTogPGlucHV0IHR5
        cGU9InRleHQiIC8+CiAgPGxhYmVsPgogIGBgYAoKICBAbWV0aG9kIHlpZWxk
        CiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge0hh
        c2h9IG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiov
        CkVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3lpZWxkJywgZnVu
        Y3Rpb24ob3B0aW9ucykgewogIHZhciB2aWV3ID0gb3B0aW9ucy5kYXRhLnZp
        ZXc7CgogIHdoaWxlICh2aWV3ICYmICFnZXQodmlldywgJ2xheW91dCcpKSB7
        CiAgICBpZiAodmlldy5fY29udGV4dFZpZXcpIHsKICAgICAgdmlldyA9IHZp
        ZXcuX2NvbnRleHRWaWV3OwogICAgfSBlbHNlIHsKICAgICAgdmlldyA9IGdl
        dCh2aWV3LCAncGFyZW50VmlldycpOwogICAgfQogIH0KCiAgRW1iZXIuYXNz
        ZXJ0KCJZb3UgY2FsbGVkIHlpZWxkIGluIGEgdGVtcGxhdGUgdGhhdCB3YXMg
        bm90IGEgbGF5b3V0IiwgISF2aWV3KTsKCiAgdmlldy5feWllbGQodGhpcywg
        b3B0aW9ucyk7Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCi8q
        KgogIGBsb2NgIGxvb2tzIHVwIHRoZSBzdHJpbmcgaW4gdGhlIGxvY2FsaXpl
        ZCBzdHJpbmdzIGhhc2guCiAgVGhpcyBpcyBhIGNvbnZlbmllbnQgd2F5IHRv
        IGxvY2FsaXplIHRleHQuIEZvciBleGFtcGxlOgoKICBgYGBodG1sCiAgPHNj
        cmlwdCB0eXBlPSJ0ZXh0L3gtaGFuZGxlYmFycyIgZGF0YS10ZW1wbGF0ZS1u
        YW1lPSJob21lIj4KICAgIHt7bG9jICJ3ZWxjb21lIn19CiAgPC9zY3JpcHQ+
        CiAgYGBgCgogIFRha2Ugbm90ZSB0aGF0IGAid2VsY29tZSJgIGlzIGEgc3Ry
        aW5nIGFuZCBub3QgYW4gb2JqZWN0CiAgcmVmZXJlbmNlLgoKICBAbWV0aG9k
        IGxvYwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFt
        IHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIGZvcm1hdAoqLwoKRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignbG9jJywgZnVuY3Rpb24oc3Ry
        KSB7CiAgcmV0dXJuIEVtYmVyLlN0cmluZy5sb2Moc3RyKTsKfSk7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIHNldCA9IEVtYmVyLnNl
        dCwgZ2V0ID0gRW1iZXIuZ2V0OwoKLyoqCiAgVGhlIGludGVybmFsIGNsYXNz
        IHVzZWQgdG8gY3JlYXRlIHRleHQgaW5wdXRzIHdoZW4gdGhlIGB7e2lucHV0
        fX1gCiAgaGVscGVyIGlzIHVzZWQgd2l0aCBgdHlwZWAgb2YgYGNoZWNrYm94
        YC4KCiAgU2VlIEhhbmRsZWJhcnMuaGVscGVycy5pbnB1dCBmb3IgdXNhZ2Ug
        ZGV0YWlscy4KCiAgIyMgRGlyZWN0IG1hbmlwdWxhdGlvbiBvZiBgY2hlY2tl
        ZGAKCiAgVGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgb2YgYW4gYEVtYmVyLkNo
        ZWNrYm94YCBvYmplY3Qgc2hvdWxkIGFsd2F5cyBiZSBzZXQKICB0aHJvdWdo
        IHRoZSBFbWJlciBvYmplY3Qgb3IgYnkgaW50ZXJhY3Rpbmcgd2l0aCBpdHMg
        cmVuZGVyZWQgZWxlbWVudAogIHJlcHJlc2VudGF0aW9uIHZpYSB0aGUgbW91
        c2UsIGtleWJvYXJkLCBvciB0b3VjaC4gVXBkYXRpbmcgdGhlIHZhbHVlIG9m
        IHRoZQogIGNoZWNrYm94IHZpYSBqUXVlcnkgd2lsbCByZXN1bHQgaW4gdGhl
        IGNoZWNrZWQgdmFsdWUgb2YgdGhlIG9iamVjdCBhbmQgaXRzCiAgZWxlbWVu
        dCBsb3Npbmcgc3luY2hyb25pemF0aW9uLgoKICAjIyBMYXlvdXQgYW5kIExh
        eW91dE5hbWUgcHJvcGVydGllcwoKICBCZWNhdXNlIEhUTUwgYGlucHV0YCBl
        bGVtZW50cyBhcmUgc2VsZiBjbG9zaW5nIGBsYXlvdXRgIGFuZCBgbGF5b3V0
        TmFtZWAKICBwcm9wZXJ0aWVzIHdpbGwgbm90IGJlIGFwcGxpZWQuIFNlZSBb
        RW1iZXIuVmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLlZpZXcuaHRtbCkncwog
        IGxheW91dCBzZWN0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICBAY2xh
        c3MgQ2hlY2tib3gKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1i
        ZXIuVmlldwoqLwpFbWJlci5DaGVja2JveCA9IEVtYmVyLlZpZXcuZXh0ZW5k
        KHsKICBjbGFzc05hbWVzOiBbJ2VtYmVyLWNoZWNrYm94J10sCgogIHRhZ05h
        bWU6ICdpbnB1dCcsCgogIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ3R5cGUnLCAn
        Y2hlY2tlZCcsICdpbmRldGVybWluYXRlJywgJ2Rpc2FibGVkJywgJ3RhYmlu
        ZGV4JywgJ25hbWUnXSwKCiAgdHlwZTogImNoZWNrYm94IiwKICBjaGVja2Vk
        OiBmYWxzZSwKICBkaXNhYmxlZDogZmFsc2UsCiAgaW5kZXRlcm1pbmF0ZTog
        ZmFsc2UsCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fc3VwZXIo
        KTsKICAgIHRoaXMub24oImNoYW5nZSIsIHRoaXMsIHRoaXMuX3VwZGF0ZUVs
        ZW1lbnRWYWx1ZSk7CiAgfSwKCiAgZGlkSW5zZXJ0RWxlbWVudDogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5nZXQoJ2VsZW1l
        bnQnKS5pbmRldGVybWluYXRlID0gISF0aGlzLmdldCgnaW5kZXRlcm1pbmF0
        ZScpOwogIH0sCgogIF91cGRhdGVFbGVtZW50VmFsdWU6IGZ1bmN0aW9uKCkg
        ewogICAgc2V0KHRoaXMsICdjaGVja2VkJywgdGhpcy4kKCkucHJvcCgnY2hl
        Y2tlZCcpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8K
        CnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgog
        IFNoYXJlZCBtaXhpbiB1c2VkIGJ5IGBFbWJlci5UZXh0RmllbGRgIGFuZCBg
        RW1iZXIuVGV4dEFyZWFgLgoKICBAY2xhc3MgVGV4dFN1cHBvcnQKICBAbmFt
        ZXNwYWNlIEVtYmVyCiAgQHByaXZhdGUKKi8KRW1iZXIuVGV4dFN1cHBvcnQg
        PSBFbWJlci5NaXhpbi5jcmVhdGUoewogIHZhbHVlOiAiIiwKCiAgYXR0cmli
        dXRlQmluZGluZ3M6IFsncGxhY2Vob2xkZXInLCAnZGlzYWJsZWQnLCAnbWF4
        bGVuZ3RoJywgJ3RhYmluZGV4JywgJ3JlYWRvbmx5J10sCiAgcGxhY2Vob2xk
        ZXI6IG51bGwsCiAgZGlzYWJsZWQ6IGZhbHNlLAogIG1heGxlbmd0aDogbnVs
        bCwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwog
        ICAgdGhpcy5vbigiZm9jdXNPdXQiLCB0aGlzLCB0aGlzLl9lbGVtZW50VmFs
        dWVEaWRDaGFuZ2UpOwogICAgdGhpcy5vbigiY2hhbmdlIiwgdGhpcywgdGhp
        cy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKTsKICAgIHRoaXMub24oInBhc3Rl
        IiwgdGhpcywgdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKTsKICAgIHRo
        aXMub24oImN1dCIsIHRoaXMsIHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5n
        ZSk7CiAgICB0aGlzLm9uKCJpbnB1dCIsIHRoaXMsIHRoaXMuX2VsZW1lbnRW
        YWx1ZURpZENoYW5nZSk7CiAgICB0aGlzLm9uKCJrZXlVcCIsIHRoaXMsIHRo
        aXMuaW50ZXJwcmV0S2V5RXZlbnRzKTsKICB9LAoKICAvKioKICAgIFRoZSBh
        Y3Rpb24gdG8gYmUgc2VudCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgdGhlIHJl
        dHVybiBrZXkuCgogICAgVGhpcyBpcyBzaW1pbGFyIHRvIHRoZSBge3thY3Rp
        b259fWAgaGVscGVyLCBidXQgaXMgZmlyZWQgd2hlbgogICAgdGhlIHVzZXIg
        cHJlc3NlcyB0aGUgcmV0dXJuIGtleSB3aGVuIGVkaXRpbmcgYSB0ZXh0IGZp
        ZWxkLCBhbmQgc2VuZHMKICAgIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYXMg
        dGhlIGNvbnRleHQuCgogICAgQHByb3BlcnR5IGFjdGlvbgogICAgQHR5cGUg
        U3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBhY3Rpb246IG51bGws
        CgogIC8qKgogICAgVGhlIGV2ZW50IHRoYXQgc2hvdWxkIHNlbmQgdGhlIGFj
        dGlvbi4KCiAgICBPcHRpb25zIGFyZToKCiAgICAqIGBlbnRlcmA6IHRoZSB1
        c2VyIHByZXNzZWQgZW50ZXIKICAgICogYGtleVByZXNzYDogdGhlIHVzZXIg
        cHJlc3NlZCBhIGtleQoKICAgIEBwcm9wZXJ0eSBvbkV2ZW50CiAgICBAdHlw
        ZSBTdHJpbmcKICAgIEBkZWZhdWx0IGVudGVyCiAgKi8KICBvbkV2ZW50OiAn
        ZW50ZXInLAoKICAvKioKICAgIFdoZXRoZXIgdGhleSBga2V5VXBgIGV2ZW50
        IHRoYXQgdHJpZ2dlcnMgYW4gYGFjdGlvbmAgdG8gYmUgc2VudCBjb250aW51
        ZXMKICAgIHByb3BhZ2F0aW5nIHRvIG90aGVyIHZpZXdzLgoKICAgIEJ5IGRl
        ZmF1bHQsIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyB0aGUgcmV0dXJuIGtleSBv
        biB0aGVpciBrZXlib2FyZCBhbmQKICAgIHRoZSB0ZXh0IGZpZWxkIGhhcyBh
        biBgYWN0aW9uYCBzZXQsIHRoZSBhY3Rpb24gd2lsbCBiZSBzZW50IHRvIHRo
        ZSB2aWV3J3MKICAgIGNvbnRyb2xsZXIgYW5kIHRoZSBrZXkgZXZlbnQgd2ls
        bCBzdG9wIHByb3BhZ2F0aW5nLgoKICAgIElmIHlvdSB3b3VsZCBsaWtlIHBh
        cmVudCB2aWV3cyB0byByZWNlaXZlIHRoZSBga2V5VXBgIGV2ZW50IGV2ZW4g
        YWZ0ZXIgYW4KICAgIGFjdGlvbiBoYXMgYmVlbiBkaXNwYXRjaGVkLCBzZXQg
        YGJ1YmJsZXNgIHRvIHRydWUuCgogICAgQHByb3BlcnR5IGJ1YmJsZXMKICAg
        IEB0eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8KICBidWJi
        bGVzOiBmYWxzZSwKCiAgaW50ZXJwcmV0S2V5RXZlbnRzOiBmdW5jdGlvbihl
        dmVudCkgewogICAgdmFyIG1hcCA9IEVtYmVyLlRleHRTdXBwb3J0LktFWV9F
        VkVOVFM7CiAgICB2YXIgbWV0aG9kID0gbWFwW2V2ZW50LmtleUNvZGVdOwoK
        ICAgIHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5nZSgpOwogICAgaWYgKG1l
        dGhvZCkgeyByZXR1cm4gdGhpc1ttZXRob2RdKGV2ZW50KTsgfQogIH0sCgog
        IF9lbGVtZW50VmFsdWVEaWRDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgc2V0
        KHRoaXMsICd2YWx1ZScsIHRoaXMuJCgpLnZhbCgpKTsKICB9LAoKICAvKioK
        ICAgIFRoZSBhY3Rpb24gdG8gYmUgc2VudCB3aGVuIHRoZSB1c2VyIGluc2Vy
        dHMgYSBuZXcgbGluZS4KCiAgICBDYWxsZWQgYnkgdGhlIGBFbWJlci5UZXh0
        U3VwcG9ydGAgbWl4aW4gb24ga2V5VXAgaWYga2V5Y29kZSBtYXRjaGVzIDEz
        LgogICAgVXNlcyBzZW5kQWN0aW9uIHRvIHNlbmQgdGhlIGBlbnRlcmAgYWN0
        aW9uIHRvIHRoZSBjb250cm9sbGVyLgoKICAgIEBtZXRob2QgaW5zZXJ0TmV3
        bGluZQogICAgQHBhcmFtIHtFdmVudH0gZXZlbnQKICAqLwogIGluc2VydE5l
        d2xpbmU6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBzZW5kQWN0aW9uKCdlbnRl
        cicsIHRoaXMsIGV2ZW50KTsKICAgIHNlbmRBY3Rpb24oJ2luc2VydC1uZXds
        aW5lJywgdGhpcywgZXZlbnQpOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIHdo
        ZW4gdGhlIHVzZXIgaGl0cyBlc2NhcGUuCgogICAgQ2FsbGVkIGJ5IHRoZSBg
        RW1iZXIuVGV4dFN1cHBvcnRgIG1peGluIG9uIGtleVVwIGlmIGtleWNvZGUg
        bWF0Y2hlcyAyNy4KICAgIFVzZXMgc2VuZEFjdGlvbiB0byBzZW5kIHRoZSBg
        ZXNjYXBlLXByZXNzYCBhY3Rpb24gdG8gdGhlIGNvbnRyb2xsZXIuCgogICAg
        QG1ldGhvZCBjYW5jZWwKICAgIEBwYXJhbSB7RXZlbnR9IGV2ZW50CiAgKi8K
        ICBjYW5jZWw6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBzZW5kQWN0aW9uKCdl
        c2NhcGUtcHJlc3MnLCB0aGlzLCBldmVudCk7CiAgfSwKCiAgLyoqCiAgICBD
        YWxsZWQgd2hlbiB0aGUgdGV4dCBhcmVhIGlzIGZvY3VzZWQuCgogICAgQG1l
        dGhvZCBmb2N1c0luCiAgICBAcGFyYW0ge0V2ZW50fSBldmVudAogICovCiAg
        Zm9jdXNJbjogZnVuY3Rpb24oZXZlbnQpIHsKICAgIHNlbmRBY3Rpb24oJ2Zv
        Y3VzLWluJywgdGhpcywgZXZlbnQpOwogIH0sCgogIC8qKgogICAgQ2FsbGVk
        IHdoZW4gdGhlIHRleHQgYXJlYSBpcyBibHVycmVkLgoKICAgIEBtZXRob2Qg
        Zm9jdXNPdXQKICAgIEBwYXJhbSB7RXZlbnR9IGV2ZW50CiAgKi8KICBmb2N1
        c091dDogZnVuY3Rpb24oZXZlbnQpIHsKICAgIHNlbmRBY3Rpb24oJ2ZvY3Vz
        LW91dCcsIHRoaXMsIGV2ZW50KTsKICB9LAoKICAvKioKICAgIFRoZSBhY3Rp
        b24gdG8gYmUgc2VudCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgYSBrZXkuIEVu
        YWJsZWQgYnkgc2V0dGluZwogICAgdGhlIGBvbkV2ZW50YCBwcm9wZXJ0eSB0
        byBga2V5UHJlc3NgLgoKICAgIFVzZXMgc2VuZEFjdGlvbiB0byBzZW5kIHRo
        ZSBga2V5UHJlc3NgIGFjdGlvbiB0byB0aGUgY29udHJvbGxlci4KCiAgICBA
        bWV0aG9kIGtleVByZXNzCiAgICBAcGFyYW0ge0V2ZW50fSBldmVudAogICov
        CiAga2V5UHJlc3M6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBzZW5kQWN0aW9u
        KCdrZXktcHJlc3MnLCB0aGlzLCBldmVudCk7CiAgfQoKfSk7CgpFbWJlci5U
        ZXh0U3VwcG9ydC5LRVlfRVZFTlRTID0gewogIDEzOiAnaW5zZXJ0TmV3bGlu
        ZScsCiAgMjc6ICdjYW5jZWwnCn07CgovLyBJbiBwcmluY2lwbGUsIHRoaXMg
        c2hvdWxkbid0IGJlIG5lY2Vzc2FyeSwgYnV0IHRoZSBsZWdhY3kKLy8gc2Vj
        dGlvbkFjdGlvbiBzZW1hbnRpY3MgZm9yIFRleHRGaWVsZCBhcmUgZGlmZmVy
        ZW50IGZyb20KLy8gdGhlIGNvbXBvbmVudCBzZW1hbnRpY3Mgc28gdGhpcyBt
        ZXRob2Qgbm9ybWFsaXplcyB0aGVtLgpmdW5jdGlvbiBzZW5kQWN0aW9uKGV2
        ZW50TmFtZSwgdmlldywgZXZlbnQpIHsKICB2YXIgYWN0aW9uID0gZ2V0KHZp
        ZXcsIGV2ZW50TmFtZSksCiAgICAgIG9uID0gZ2V0KHZpZXcsICdvbkV2ZW50
        JyksCiAgICAgIHZhbHVlID0gZ2V0KHZpZXcsICd2YWx1ZScpOwoKICAvLyBi
        YWNrLWNvbXBhdCBzdXBwb3J0IGZvciBrZXlQcmVzcyBhcyBhbiBldmVudCBu
        YW1lIGV2ZW4gdGhvdWdoCiAgLy8gaXQncyBhbHNvIGEgbWV0aG9kIG5hbWUg
        dGhhdCBjb25zdW1lcyB0aGUgZXZlbnQgKGFuZCB0aGVyZWZvcmUKICAvLyBp
        bmNvbXBhdGlibGUgd2l0aCBzZW5kQWN0aW9uIHNlbWFudGljcykuCiAgaWYg
        KG9uID09PSBldmVudE5hbWUgfHwgKG9uID09PSAna2V5UHJlc3MnICYmIGV2
        ZW50TmFtZSA9PT0gJ2tleS1wcmVzcycpKSB7CiAgICB2aWV3LnNlbmRBY3Rp
        b24oJ2FjdGlvbicsIHZhbHVlKTsKICB9CgogIHZpZXcuc2VuZEFjdGlvbihl
        dmVudE5hbWUsIHZhbHVlKTsKCiAgaWYgKGFjdGlvbiB8fCBvbiA9PT0gZXZl
        bnROYW1lKSB7CiAgICBpZighZ2V0KHZpZXcsICdidWJibGVzJykpIHsKICAg
        ICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9CiAgfQp9Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0OwoKLyoqCgogIFRoZSBpbnRlcm5hbCBjbGFzcyB1
        c2VkIHRvIGNyZWF0ZSB0ZXh0IGlucHV0cyB3aGVuIHRoZSBge3tpbnB1dH19
        YAogIGhlbHBlciBpcyB1c2VkIHdpdGggYHR5cGVgIG9mIGB0ZXh0YC4KCiAg
        U2VlIFtoYW5kbGViYXJzLmhlbHBlcnMuaW5wdXRdKC9hcGkvY2xhc3Nlcy9F
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNtZXRob2RfaW5wdXQpICBm
        b3IgdXNhZ2UgZGV0YWlscy4KCiAgIyMgTGF5b3V0IGFuZCBMYXlvdXROYW1l
        IHByb3BlcnRpZXMKCiAgQmVjYXVzZSBIVE1MIGBpbnB1dGAgZWxlbWVudHMg
        YXJlIHNlbGYgY2xvc2luZyBgbGF5b3V0YCBhbmQgYGxheW91dE5hbWVgCiAg
        cHJvcGVydGllcyB3aWxsIG5vdCBiZSBhcHBsaWVkLiBTZWUgW0VtYmVyLlZp
        ZXddKC9hcGkvY2xhc3Nlcy9FbWJlci5WaWV3Lmh0bWwpJ3MKICBsYXlvdXQg
        c2VjdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KCiAgQGNsYXNzIFRleHRG
        aWVsZAogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5Db21w
        b25lbnQKICBAdXNlcyBFbWJlci5UZXh0U3VwcG9ydAoqLwpFbWJlci5UZXh0
        RmllbGQgPSBFbWJlci5Db21wb25lbnQuZXh0ZW5kKEVtYmVyLlRleHRTdXBw
        b3J0LAogIC8qKiBAc2NvcGUgRW1iZXIuVGV4dEZpZWxkLnByb3RvdHlwZSAq
        LyB7CgogIGNsYXNzTmFtZXM6IFsnZW1iZXItdGV4dC1maWVsZCddLAogIHRh
        Z05hbWU6ICJpbnB1dCIsCiAgYXR0cmlidXRlQmluZGluZ3M6IFsndHlwZScs
        ICd2YWx1ZScsICdzaXplJywgJ3BhdHRlcm4nLCAnbmFtZSddLAoKICAvKioK
        ICAgIFRoZSBgdmFsdWVgIGF0dHJpYnV0ZSBvZiB0aGUgaW5wdXQgZWxlbWVu
        dC4gQXMgdGhlIHVzZXIgaW5wdXRzIHRleHQsIHRoaXMKICAgIHByb3BlcnR5
        IGlzIHVwZGF0ZWQgbGl2ZS4KCiAgICBAcHJvcGVydHkgdmFsdWUKICAgIEB0
        eXBlIFN0cmluZwogICAgQGRlZmF1bHQgIiIKICAqLwogIHZhbHVlOiAiIiwK
        CiAgLyoqCiAgICBUaGUgYHR5cGVgIGF0dHJpYnV0ZSBvZiB0aGUgaW5wdXQg
        ZWxlbWVudC4KCiAgICBAcHJvcGVydHkgdHlwZQogICAgQHR5cGUgU3RyaW5n
        CiAgICBAZGVmYXVsdCAidGV4dCIKICAqLwogIHR5cGU6ICJ0ZXh0IiwKCiAg
        LyoqCiAgICBUaGUgYHNpemVgIG9mIHRoZSB0ZXh0IGZpZWxkIGluIGNoYXJh
        Y3RlcnMuCgogICAgQHByb3BlcnR5IHNpemUKICAgIEB0eXBlIFN0cmluZwog
        ICAgQGRlZmF1bHQgbnVsbAogICovCiAgc2l6ZTogbnVsbCwKCiAgLyoqCiAg
        ICBUaGUgYHBhdHRlcm5gIHRoZSBwYXR0ZXJuIGF0dHJpYnV0ZSBvZiBpbnB1
        dCBlbGVtZW50LgoKICAgIEBwcm9wZXJ0eSBwYXR0ZXJuCiAgICBAdHlwZSBT
        dHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHBhdHRlcm46IG51bGwK
        fSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiovCgp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovKgogIEBjbGFzcyBCdXR0b24K
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuVmlldwogIEB1
        c2VzIEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQKICBAZGVwcmVjYXRlZAoq
        LwpFbWJlci5CdXR0b24gPSBFbWJlci5WaWV3LmV4dGVuZChFbWJlci5UYXJn
        ZXRBY3Rpb25TdXBwb3J0LCB7CiAgY2xhc3NOYW1lczogWydlbWJlci1idXR0
        b24nXSwKICBjbGFzc05hbWVCaW5kaW5nczogWydpc0FjdGl2ZSddLAoKICB0
        YWdOYW1lOiAnYnV0dG9uJywKCiAgcHJvcGFnYXRlRXZlbnRzOiBmYWxzZSwK
        CiAgYXR0cmlidXRlQmluZGluZ3M6IFsndHlwZScsICdkaXNhYmxlZCcsICdo
        cmVmJywgJ3RhYmluZGV4J10sCgogIC8qCiAgICBAcHJpdmF0ZQoKICAgIE92
        ZXJyaWRlcyBgVGFyZ2V0QWN0aW9uU3VwcG9ydGAncyBgdGFyZ2V0T2JqZWN0
        YCBjb21wdXRlZAogICAgcHJvcGVydHkgdG8gdXNlIEhhbmRsZWJhcnMtc3Bl
        Y2lmaWMgcGF0aCByZXNvbHV0aW9uLgoKICAgIEBwcm9wZXJ0eSB0YXJnZXRP
        YmplY3QKICAqLwogIHRhcmdldE9iamVjdDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oKSB7CiAgICB2YXIgdGFyZ2V0ID0gZ2V0KHRoaXMsICd0YXJnZXQn
        KSwKICAgICAgICByb290ID0gZ2V0KHRoaXMsICdjb250ZXh0JyksCiAgICAg
        ICAgZGF0YSA9IGdldCh0aGlzLCAndGVtcGxhdGVEYXRhJyk7CgogICAgaWYg
        KHR5cGVvZiB0YXJnZXQgIT09ICdzdHJpbmcnKSB7IHJldHVybiB0YXJnZXQ7
        IH0KCiAgICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5nZXQocm9vdCwgdGFy
        Z2V0LCB7IGRhdGE6IGRhdGEgfSk7CiAgfSkucHJvcGVydHkoJ3RhcmdldCcp
        LAoKICAvLyBEZWZhdWx0cyB0byAnYnV0dG9uJyBpZiB0YWdOYW1lIGlzICdp
        bnB1dCcgb3IgJ2J1dHRvbicKICB0eXBlOiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbihrZXkpIHsKICAgIHZhciB0YWdOYW1lID0gdGhpcy50YWdOYW1lOwog
        ICAgaWYgKHRhZ05hbWUgPT09ICdpbnB1dCcgfHwgdGFnTmFtZSA9PT0gJ2J1
        dHRvbicpIHsgcmV0dXJuICdidXR0b24nOyB9CiAgfSksCgogIGRpc2FibGVk
        OiBmYWxzZSwKCiAgLy8gQWxsb3cgJ2EnIHRhZ3MgdG8gYWN0IGxpa2UgYnV0
        dG9ucwogIGhyZWY6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMudGFnTmFtZSA9PT0gJ2EnID8gJyMnIDogbnVsbDsKICB9
        KSwKCiAgbW91c2VEb3duOiBmdW5jdGlvbigpIHsKICAgIGlmICghZ2V0KHRo
        aXMsICdkaXNhYmxlZCcpKSB7CiAgICAgIHNldCh0aGlzLCAnaXNBY3RpdmUn
        LCB0cnVlKTsKICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTsKICAgICAg
        dGhpcy5fbW91c2VFbnRlcmVkID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBn
        ZXQodGhpcywgJ3Byb3BhZ2F0ZUV2ZW50cycpOwogIH0sCgogIG1vdXNlTGVh
        dmU6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuX21vdXNlRG93bikgewog
        ICAgICBzZXQodGhpcywgJ2lzQWN0aXZlJywgZmFsc2UpOwogICAgICB0aGlz
        Ll9tb3VzZUVudGVyZWQgPSBmYWxzZTsKICAgIH0KICB9LAoKICBtb3VzZUVu
        dGVyOiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLl9tb3VzZURvd24pIHsK
        ICAgICAgc2V0KHRoaXMsICdpc0FjdGl2ZScsIHRydWUpOwogICAgICB0aGlz
        Ll9tb3VzZUVudGVyZWQgPSB0cnVlOwogICAgfQogIH0sCgogIG1vdXNlVXA6
        IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc0FjdGl2
        ZScpKSB7CiAgICAgIC8vIEFjdHVhbGx5IGludm9rZSB0aGUgYnV0dG9uJ3Mg
        dGFyZ2V0IGFuZCBhY3Rpb24uCiAgICAgIC8vIFRoaXMgbWV0aG9kIGNvbWVz
        IGZyb20gdGhlIEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQgbWl4aW4uCiAg
        ICAgIHRoaXMudHJpZ2dlckFjdGlvbigpOwogICAgICBzZXQodGhpcywgJ2lz
        QWN0aXZlJywgZmFsc2UpOwogICAgfQoKICAgIHRoaXMuX21vdXNlRG93biA9
        IGZhbHNlOwogICAgdGhpcy5fbW91c2VFbnRlcmVkID0gZmFsc2U7CiAgICBy
        ZXR1cm4gZ2V0KHRoaXMsICdwcm9wYWdhdGVFdmVudHMnKTsKICB9LAoKICBr
        ZXlEb3duOiBmdW5jdGlvbihldmVudCkgewogICAgLy8gSGFuZGxlIHNwYWNl
        IG9yIGVudGVyCiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMgfHwgZXZl
        bnQua2V5Q29kZSA9PT0gMzIpIHsKICAgICAgdGhpcy5tb3VzZURvd24oKTsK
        ICAgIH0KICB9LAoKICBrZXlVcDogZnVuY3Rpb24oZXZlbnQpIHsKICAgIC8v
        IEhhbmRsZSBzcGFjZSBvciBlbnRlcgogICAgaWYgKGV2ZW50LmtleUNvZGUg
        PT09IDEzIHx8IGV2ZW50LmtleUNvZGUgPT09IDMyKSB7CiAgICAgIHRoaXMu
        bW91c2VVcCgpOwogICAgfQogIH0sCgogIC8vIFRPRE86IEhhbmRsZSBwcm9w
        ZXIgdG91Y2ggYmVoYXZpb3IuIEluY2x1ZGluZyBzaG91bGQgbWFrZSBpbmFj
        dGl2ZSB3aGVuCiAgLy8gZmluZ2VyIG1vdmVzIG1vcmUgdGhhbiAyMHggb3V0
        c2lkZSBvZiB0aGUgZWRnZSBvZiB0aGUgYnV0dG9uICh2cyBtb3VzZQogIC8v
        IHdoaWNoIGdvZXMgaW5hY3RpdmUgYXMgc29vbiBhcyBtb3VzZSBnb2VzIG91
        dCBvZiBlZGdlcy4pCgogIHRvdWNoU3RhcnQ6IGZ1bmN0aW9uKHRvdWNoKSB7
        CiAgICByZXR1cm4gdGhpcy5tb3VzZURvd24odG91Y2gpOwogIH0sCgogIHRv
        dWNoRW5kOiBmdW5jdGlvbih0b3VjaCkgewogICAgcmV0dXJuIHRoaXMubW91
        c2VVcCh0b3VjaCk7CiAgfSwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICBF
        bWJlci5kZXByZWNhdGUoIkVtYmVyLkJ1dHRvbiBpcyBkZXByZWNhdGVkIGFu
        ZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSBmdXR1cmUgcmVsZWFzZXMuIENvbnNp
        ZGVyIHVzaW5nIHRoZSBge3thY3Rpb259fWAgaGVscGVyLiIpOwogICAgdGhp
        cy5fc3VwZXIoKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8q
        KgogIFRoZSBpbnRlcm5hbCBjbGFzcyB1c2VkIHRvIGNyZWF0ZSB0ZXh0YXJl
        YSBlbGVtZW50IHdoZW4gdGhlIGB7e3RleHRhcmVhfX1gCiAgaGVscGVyIGlz
        IHVzZWQuCgogIFNlZSBbaGFuZGxlYmFycy5oZWxwZXJzLnRleHRhcmVhXSgv
        YXBpL2NsYXNzZXMvRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0bWwjbWV0
        aG9kX3RleHRhcmVhKSAgZm9yIHVzYWdlIGRldGFpbHMuCgogICMjIExheW91
        dCBhbmQgTGF5b3V0TmFtZSBwcm9wZXJ0aWVzCgogIEJlY2F1c2UgSFRNTCBg
        dGV4dGFyZWFgIGVsZW1lbnRzIGRvIG5vdCBjb250YWluIGlubmVyIEhUTUwg
        dGhlIGBsYXlvdXRgIGFuZAogIGBsYXlvdXROYW1lYCBwcm9wZXJ0aWVzIHdp
        bGwgbm90IGJlIGFwcGxpZWQuIFNlZSBbRW1iZXIuVmlld10oL2FwaS9jbGFz
        c2VzL0VtYmVyLlZpZXcuaHRtbCkncwogIGxheW91dCBzZWN0aW9uIGZvciBt
        b3JlIGluZm9ybWF0aW9uLgoKICBAY2xhc3MgVGV4dEFyZWEKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuQ29tcG9uZW50CiAgQHVzZXMg
        RW1iZXIuVGV4dFN1cHBvcnQKKi8KRW1iZXIuVGV4dEFyZWEgPSBFbWJlci5D
        b21wb25lbnQuZXh0ZW5kKEVtYmVyLlRleHRTdXBwb3J0LCB7CiAgY2xhc3NO
        YW1lczogWydlbWJlci10ZXh0LWFyZWEnXSwKCiAgdGFnTmFtZTogInRleHRh
        cmVhIiwKICBhdHRyaWJ1dGVCaW5kaW5nczogWydyb3dzJywgJ2NvbHMnLCAn
        bmFtZSddLAogIHJvd3M6IG51bGwsCiAgY29sczogbnVsbCwKCiAgX3VwZGF0
        ZUVsZW1lbnRWYWx1ZTogRW1iZXIub2JzZXJ2ZXIoJ3ZhbHVlJywgZnVuY3Rp
        b24oKSB7CiAgICAvLyBXZSBkbyB0aGlzIGNoZWNrIHNvIGN1cnNvciBwb3Np
        dGlvbiBkb2Vzbid0IGdldCBhZmZlY3RlZCBpbiBJRQogICAgdmFyIHZhbHVl
        ID0gZ2V0KHRoaXMsICd2YWx1ZScpLAogICAgICAgICRlbCA9IHRoaXMuJCgp
        OwogICAgaWYgKCRlbCAmJiB2YWx1ZSAhPT0gJGVsLnZhbCgpKSB7CiAgICAg
        ICRlbC52YWwodmFsdWUpOwogICAgfQogIH0pLAoKICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLm9uKCJkaWRJbnNl
        cnRFbGVtZW50IiwgdGhpcywgdGhpcy5fdXBkYXRlRWxlbWVudFZhbHVlKTsK
        ICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypqc2hpbnQgZXFl
        cWVxOmZhbHNlICovCgovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLWhhbmRsZWJhcnMKKi8KCnZhciBzZXQgPSBFbWJlci5zZXQsCiAgICBn
        ZXQgPSBFbWJlci5nZXQsCiAgICBpbmRleE9mID0gRW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmluZGV4T2YsCiAgICBpbmRleGVzT2YgPSBFbWJlci5FbnVtZXJh
        YmxlVXRpbHMuaW5kZXhlc09mLAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1l
        cmFibGVVdGlscy5mb3JFYWNoLAogICAgcmVwbGFjZSA9IEVtYmVyLkVudW1l
        cmFibGVVdGlscy5yZXBsYWNlLAogICAgaXNBcnJheSA9IEVtYmVyLmlzQXJy
        YXksCiAgICBwcmVjb21waWxlVGVtcGxhdGUgPSBFbWJlci5IYW5kbGViYXJz
        LmNvbXBpbGU7CgpFbWJlci5TZWxlY3RPcHRpb24gPSBFbWJlci5WaWV3LmV4
        dGVuZCh7CiAgdGFnTmFtZTogJ29wdGlvbicsCiAgYXR0cmlidXRlQmluZGlu
        Z3M6IFsndmFsdWUnLCAnc2VsZWN0ZWQnXSwKCiAgZGVmYXVsdFRlbXBsYXRl
        OiBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7CiAgICBvcHRpb25zID0g
        eyBkYXRhOiBvcHRpb25zLmRhdGEsIGhhc2g6IHt9IH07CiAgICBFbWJlci5I
        YW5kbGViYXJzLmhlbHBlcnMuYmluZC5jYWxsKGNvbnRleHQsICJ2aWV3Lmxh
        YmVsIiwgb3B0aW9ucyk7CiAgfSwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAg
        ICB0aGlzLmxhYmVsUGF0aERpZENoYW5nZSgpOwogICAgdGhpcy52YWx1ZVBh
        dGhEaWRDaGFuZ2UoKTsKCiAgICB0aGlzLl9zdXBlcigpOwogIH0sCgogIHNl
        bGVjdGVkOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBj
        b250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgc2VsZWN0
        aW9uID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3LnNlbGVjdGlvbicpOwogICAg
        aWYgKGdldCh0aGlzLCAncGFyZW50Vmlldy5tdWx0aXBsZScpKSB7CiAgICAg
        IHJldHVybiBzZWxlY3Rpb24gJiYgaW5kZXhPZihzZWxlY3Rpb24sIGNvbnRl
        bnQudmFsdWVPZigpKSA+IC0xOwogICAgfSBlbHNlIHsKICAgICAgLy8gUHJp
        bWl0aXZlcyBnZXQgcGFzc2VkIHRocm91Z2ggYmluZGluZ3MgYXMgb2JqZWN0
        cy4uLiBzaW5jZQogICAgICAvLyBgbmV3IE51bWJlcig0KSAhPT0gNGAsIHdl
        IHVzZSBgPT1gIGJlbG93CiAgICAgIHJldHVybiBjb250ZW50ID09IHNlbGVj
        dGlvbjsKICAgIH0KICB9KS5wcm9wZXJ0eSgnY29udGVudCcsICdwYXJlbnRW
        aWV3LnNlbGVjdGlvbicpLAoKICBsYWJlbFBhdGhEaWRDaGFuZ2U6IEVtYmVy
        Lm9ic2VydmVyKCdwYXJlbnRWaWV3Lm9wdGlvbkxhYmVsUGF0aCcsIGZ1bmN0
        aW9uKCkgewogICAgdmFyIGxhYmVsUGF0aCA9IGdldCh0aGlzLCAncGFyZW50
        Vmlldy5vcHRpb25MYWJlbFBhdGgnKTsKCiAgICBpZiAoIWxhYmVsUGF0aCkg
        eyByZXR1cm47IH0KCiAgICBFbWJlci5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAn
        bGFiZWwnLCBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgICAgcmV0
        dXJuIGdldCh0aGlzLCBsYWJlbFBhdGgpOwogICAgfSkucHJvcGVydHkobGFi
        ZWxQYXRoKSk7CiAgfSksCgogIHZhbHVlUGF0aERpZENoYW5nZTogRW1iZXIu
        b2JzZXJ2ZXIoJ3BhcmVudFZpZXcub3B0aW9uVmFsdWVQYXRoJywgZnVuY3Rp
        b24oKSB7CiAgICB2YXIgdmFsdWVQYXRoID0gZ2V0KHRoaXMsICdwYXJlbnRW
        aWV3Lm9wdGlvblZhbHVlUGF0aCcpOwoKICAgIGlmICghdmFsdWVQYXRoKSB7
        IHJldHVybjsgfQoKICAgIEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsICd2
        YWx1ZScsIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICByZXR1
        cm4gZ2V0KHRoaXMsIHZhbHVlUGF0aCk7CiAgICB9KS5wcm9wZXJ0eSh2YWx1
        ZVBhdGgpKTsKICB9KQp9KTsKCkVtYmVyLlNlbGVjdE9wdGdyb3VwID0gRW1i
        ZXIuQ29sbGVjdGlvblZpZXcuZXh0ZW5kKHsKICB0YWdOYW1lOiAnb3B0Z3Jv
        dXAnLAogIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ2xhYmVsJ10sCgogIHNlbGVj
        dGlvbkJpbmRpbmc6ICdwYXJlbnRWaWV3LnNlbGVjdGlvbicsCiAgbXVsdGlw
        bGVCaW5kaW5nOiAncGFyZW50Vmlldy5tdWx0aXBsZScsCiAgb3B0aW9uTGFi
        ZWxQYXRoQmluZGluZzogJ3BhcmVudFZpZXcub3B0aW9uTGFiZWxQYXRoJywK
        ICBvcHRpb25WYWx1ZVBhdGhCaW5kaW5nOiAncGFyZW50Vmlldy5vcHRpb25W
        YWx1ZVBhdGgnLAoKICBpdGVtVmlld0NsYXNzQmluZGluZzogJ3BhcmVudFZp
        ZXcub3B0aW9uVmlldycKfSk7CgovKioKICBUaGUgYEVtYmVyLlNlbGVjdGAg
        dmlldyBjbGFzcyByZW5kZXJzIGEKICBbc2VsZWN0XShodHRwczovL2RldmVs
        b3Blci5tb3ppbGxhLm9yZy9lbi9IVE1ML0VsZW1lbnQvc2VsZWN0KSBIVE1M
        IGVsZW1lbnQsCiAgYWxsb3dpbmcgdGhlIHVzZXIgdG8gY2hvb3NlIGZyb20g
        YSBsaXN0IG9mIG9wdGlvbnMuCgogIFRoZSB0ZXh0IGFuZCBgdmFsdWVgIHBy
        b3BlcnR5IG9mIGVhY2ggYDxvcHRpb24+YCBlbGVtZW50IHdpdGhpbiB0aGUK
        ICBgPHNlbGVjdD5gIGVsZW1lbnQgYXJlIHBvcHVsYXRlZCBmcm9tIHRoZSBv
        YmplY3RzIGluIHRoZSBgRWxlbWVudC5TZWxlY3RgJ3MKICBgY29udGVudGAg
        cHJvcGVydHkuIFRoZSB1bmRlcmx5aW5nIGRhdGEgb2JqZWN0IG9mIHRoZSBz
        ZWxlY3RlZCBgPG9wdGlvbj5gIGlzCiAgc3RvcmVkIGluIHRoZSBgRWxlbWVu
        dC5TZWxlY3RgJ3MgYHZhbHVlYCBwcm9wZXJ0eS4KCiAgIyMgVGhlIENvbnRl
        bnQgUHJvcGVydHkgKGFycmF5IG9mIHN0cmluZ3MpCgogIFRoZSBzaW1wbGVz
        dCB2ZXJzaW9uIG9mIGFuIGBFbWJlci5TZWxlY3RgIHRha2VzIGFuIGFycmF5
        IG9mIHN0cmluZ3MgYXMgaXRzCiAgYGNvbnRlbnRgIHByb3BlcnR5LiBUaGUg
        c3RyaW5nIHdpbGwgYmUgdXNlZCBhcyBib3RoIHRoZSBgdmFsdWVgIHByb3Bl
        cnR5IGFuZAogIHRoZSBpbm5lciB0ZXh0IG9mIGVhY2ggYDxvcHRpb24+YCBl
        bGVtZW50IGluc2lkZSB0aGUgcmVuZGVyZWQgYDxzZWxlY3Q+YC4KCiAgRXhh
        bXBsZToKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRy
        b2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICBuYW1lczog
        WyJZZWh1ZGEiLCAiVG9tIl0KICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7dmlldyBFbWJlci5TZWxlY3QgY29udGVudD1uYW1lc319CiAgYGBg
        CgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBg
        YGh0bWwKICA8c2VsZWN0IGNsYXNzPSJlbWJlci1zZWxlY3QiPgogICAgPG9w
        dGlvbiB2YWx1ZT0iWWVodWRhIj5ZZWh1ZGE8L29wdGlvbj4KICAgIDxvcHRp
        b24gdmFsdWU9IlRvbSI+VG9tPC9vcHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBg
        CgogIFlvdSBjYW4gY29udHJvbCB3aGljaCBgPG9wdGlvbj5gIGlzIHNlbGVj
        dGVkIHRocm91Z2ggdGhlIGBFbWJlci5TZWxlY3RgJ3MKICBgdmFsdWVgIHBy
        b3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29u
        dHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHNlbGVj
        dGVkTmFtZTogJ1RvbScsCiAgICBuYW1lczogWyJZZWh1ZGEiLCAiVG9tIl0K
        ICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5T
        ZWxlY3QKICAgICAgICAgY29udGVudD1uYW1lcwogICAgICAgICB2YWx1ZT1z
        ZWxlY3RlZE5hbWUKICB9fQogIGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhl
        IGZvbGxvd2luZyBIVE1MIHdpdGggdGhlIGA8b3B0aW9uPmAgZm9yICdUb20n
        IHNlbGVjdGVkOgoKICBgYGBodG1sCiAgPHNlbGVjdCBjbGFzcz0iZW1iZXIt
        c2VsZWN0Ij4KICAgIDxvcHRpb24gdmFsdWU9IlllaHVkYSI+WWVodWRhPC9v
        cHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJUb20iIHNlbGVjdGVkPSJzZWxl
        Y3RlZCI+VG9tPC9vcHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBgCgogIEEgdXNl
        ciBpbnRlcmFjdGluZyB3aXRoIHRoZSByZW5kZXJlZCBgPHNlbGVjdD5gIHRv
        IGNob29zZSAiWWVodWRhIiB3b3VsZAogIHVwZGF0ZSB0aGUgdmFsdWUgb2Yg
        YHNlbGVjdGVkTmFtZWAgdG8gIlllaHVkYSIuCgogICMjIFRoZSBDb250ZW50
        IFByb3BlcnR5IChhcnJheSBvZiBPYmplY3RzKQoKICBBbiBgRW1iZXIuU2Vs
        ZWN0YCBjYW4gYWxzbyB0YWtlIGFuIGFycmF5IG9mIEphdmFTY3JpcHQgb3Ig
        RW1iZXIgb2JqZWN0cyBhcwogIGl0cyBgY29udGVudGAgcHJvcGVydHkuCgog
        IFdoZW4gdXNpbmcgb2JqZWN0cyB5b3UgbmVlZCB0byB0ZWxsIHRoZSBgRW1i
        ZXIuU2VsZWN0YCB3aGljaCBwcm9wZXJ0eSBzaG91bGQKICBiZSBhY2Nlc3Nl
        ZCBvbiBlYWNoIG9iamVjdCB0byBzdXBwbHkgdGhlIGB2YWx1ZWAgYXR0cmli
        dXRlIG9mIHRoZSBgPG9wdGlvbj5gCiAgYW5kIHdoaWNoIHByb3BlcnR5IHNo
        b3VsZCBiZSB1c2VkIHRvIHN1cHBseSB0aGUgZWxlbWVudCB0ZXh0LgoKICBU
        aGUgYG9wdGlvblZhbHVlUGF0aGAgb3B0aW9uIGlzIHVzZWQgdG8gc3BlY2lm
        eSB0aGUgcGF0aCBvbiBlYWNoIG9iamVjdCB0bwogIHRoZSBkZXNpcmVkIHBy
        b3BlcnR5IGZvciB0aGUgYHZhbHVlYCBhdHRyaWJ1dGUuIFRoZSBgb3B0aW9u
        TGFiZWxQYXRoYAogIHNwZWNpZmllcyB0aGUgcGF0aCBvbiBlYWNoIG9iamVj
        dCB0byB0aGUgZGVzaXJlZCBwcm9wZXJ0eSBmb3IgdGhlCiAgZWxlbWVudCdz
        IHRleHQuIEJvdGggcGF0aHMgbXVzdCByZWZlcmVuY2UgZWFjaCBvYmplY3Qg
        aXRzZWxmIGFzIGBjb250ZW50YDoKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5B
        cHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVu
        ZCh7CiAgICBwcm9ncmFtbWVyczogWwogICAgICB7Zmlyc3ROYW1lOiAiWWVo
        dWRhIiwgaWQ6IDF9LAogICAgICB7Zmlyc3ROYW1lOiAiVG9tIiwgICAgaWQ6
        IDJ9CiAgICBdCiAgfSk7CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7e3Zp
        ZXcgRW1iZXIuU2VsZWN0CiAgICAgICAgIGNvbnRlbnQ9cHJvZ3JhbW1lcnMK
        ICAgICAgICAgb3B0aW9uVmFsdWVQYXRoPSJjb250ZW50LmlkIgogICAgICAg
        ICBvcHRpb25MYWJlbFBhdGg9ImNvbnRlbnQuZmlyc3ROYW1lIn19CiAgYGBg
        CgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBg
        YGh0bWwKICA8c2VsZWN0IGNsYXNzPSJlbWJlci1zZWxlY3QiPgogICAgPG9w
        dGlvbiB2YWx1ZT0iMSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0aW9uIHZh
        bHVlPSIyIj5Ub208L29wdGlvbj4KICA8L3NlbGVjdD4KICBgYGAKCiAgVGhl
        IGB2YWx1ZWAgYXR0cmlidXRlIG9mIHRoZSBzZWxlY3RlZCBgPG9wdGlvbj5g
        IHdpdGhpbiBhbiBgRW1iZXIuU2VsZWN0YAogIGNhbiBiZSBib3VuZCB0byBh
        IHByb3BlcnR5IG9uIGFub3RoZXIgb2JqZWN0OgoKICBgYGBqYXZhc2NyaXB0
        CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xs
        ZXIuZXh0ZW5kKHsKICAgIHByb2dyYW1tZXJzOiBbCiAgICAgIHtmaXJzdE5h
        bWU6ICJZZWh1ZGEiLCBpZDogMX0sCiAgICAgIHtmaXJzdE5hbWU6ICJUb20i
        LCAgICBpZDogMn0KICAgIF0sCiAgICBjdXJyZW50UHJvZ3JhbW1lcjogewog
        ICAgICBpZDogMgogICAgfQogIH0pOwogIGBgYAoKICBgYGBoYW5kbGViYXJz
        CiAge3t2aWV3IEVtYmVyLlNlbGVjdAogICAgICAgICBjb250ZW50PXByb2dy
        YW1tZXJzCiAgICAgICAgIG9wdGlvblZhbHVlUGF0aD0iY29udGVudC5pZCIK
        ICAgICAgICAgb3B0aW9uTGFiZWxQYXRoPSJjb250ZW50LmZpcnN0TmFtZSIK
        ICAgICAgICAgdmFsdWU9Y3VycmVudFByb2dyYW1tZXIuaWR9fQogIGBgYAoK
        ICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MIHdpdGggYSBz
        ZWxlY3RlZCBvcHRpb246CgogIGBgYGh0bWwKICA8c2VsZWN0IGNsYXNzPSJl
        bWJlci1zZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1ZT0iMSI+WWVodWRhPC9v
        cHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSIyIiBzZWxlY3RlZD0ic2VsZWN0
        ZWQiPlRvbTwvb3B0aW9uPgogIDwvc2VsZWN0PgogIGBgYAoKICBJbnRlcmFj
        dGluZyB3aXRoIHRoZSByZW5kZXJlZCBlbGVtZW50IGJ5IHNlbGVjdGluZyB0
        aGUgZmlyc3Qgb3B0aW9uCiAgKCdZZWh1ZGEnKSB3aWxsIHVwZGF0ZSB0aGUg
        YGlkYCBvZiBgY3VycmVudFByb2dyYW1tZXJgCiAgdG8gbWF0Y2ggdGhlIGB2
        YWx1ZWAgcHJvcGVydHkgb2YgdGhlIG5ld2x5IHNlbGVjdGVkIGA8b3B0aW9u
        PmAuCgogIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gY29udHJvbCBzZWxlY3Rp
        b24gdGhyb3VnaCB0aGUgdW5kZXJseWluZyBvYmplY3RzCiAgdXNlZCB0byBy
        ZW5kZXIgZWFjaCBvYmplY3QgYnkgYmluZGluZyB0aGUgYHNlbGVjdGlvbmAg
        b3B0aW9uLiBXaGVuIHRoZSBzZWxlY3RlZAogIGA8b3B0aW9uPmAgaXMgY2hh
        bmdlZCwgdGhlIHByb3BlcnR5IHBhdGggcHJvdmlkZWQgdG8gYHNlbGVjdGlv
        bmAKICB3aWxsIGJlIHVwZGF0ZWQgdG8gbWF0Y2ggdGhlIGNvbnRlbnQgb2Jq
        ZWN0IG9mIHRoZSByZW5kZXJlZCBgPG9wdGlvbj5gCiAgZWxlbWVudDoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBF
        bWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICBzZWxlY3RlZFBlcnNvbjog
        bnVsbCwKICAgIHByb2dyYW1tZXJzOiBbCiAgICAgIHtmaXJzdE5hbWU6ICJZ
        ZWh1ZGEiLCBpZDogMX0sCiAgICAgIHtmaXJzdE5hbWU6ICJUb20iLCAgICBp
        ZDogMn0KICAgIF0KICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7
        dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAgY29udGVudD1wcm9ncmFtbWVy
        cwogICAgICAgICBvcHRpb25WYWx1ZVBhdGg9ImNvbnRlbnQuaWQiCiAgICAg
        ICAgIG9wdGlvbkxhYmVsUGF0aD0iY29udGVudC5maXJzdE5hbWUiCiAgICAg
        ICAgIHNlbGVjdGlvbj1zZWxlY3RlZFBlcnNvbn19CiAgYGBgCgogIFdvdWxk
        IHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwgd2l0aCBhIHNlbGVjdGVk
        IG9wdGlvbjoKCiAgYGBgaHRtbAogIDxzZWxlY3QgY2xhc3M9ImVtYmVyLXNl
        bGVjdCI+CiAgICA8b3B0aW9uIHZhbHVlPSIxIj5ZZWh1ZGE8L29wdGlvbj4K
        ICAgIDxvcHRpb24gdmFsdWU9IjIiIHNlbGVjdGVkPSJzZWxlY3RlZCI+VG9t
        PC9vcHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBgCgogIEludGVyYWN0aW5nIHdp
        dGggdGhlIHJlbmRlcmVkIGVsZW1lbnQgYnkgc2VsZWN0aW5nIHRoZSBmaXJz
        dCBvcHRpb24KICAoJ1llaHVkYScpIHdpbGwgdXBkYXRlIHRoZSBgc2VsZWN0
        ZWRQZXJzb25gIHRvIG1hdGNoIHRoZSBvYmplY3Qgb2YKICB0aGUgbmV3bHkg
        c2VsZWN0ZWQgYDxvcHRpb24+YC4gSW4gdGhpcyBjYXNlIGl0IGlzIHRoZSBm
        aXJzdCBvYmplY3QKICBpbiB0aGUgYHByb2dyYW1tZXJzYAoKICAjIyBTdXBw
        bHlpbmcgYSBQcm9tcHQKCiAgQSBgbnVsbGAgdmFsdWUgZm9yIHRoZSBgRW1i
        ZXIuU2VsZWN0YCdzIGB2YWx1ZWAgb3IgYHNlbGVjdGlvbmAgcHJvcGVydHkK
        ICByZXN1bHRzIGluIHRoZXJlIGJlaW5nIG5vIGA8b3B0aW9uPmAgd2l0aCBh
        IGBzZWxlY3RlZGAgYXR0cmlidXRlOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBw
        LkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0
        ZW5kKHsKICAgIHNlbGVjdGVkUHJvZ3JhbW1lcjogbnVsbCwKICAgIHByb2dy
        YW1tZXJzOiBbCiAgICAgICJZZWh1ZGEiLAogICAgICAiVG9tIgogICAgXQog
        IH0pOwogIGBgYAoKICBgYGAgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5T
        ZWxlY3QKICAgICAgICAgY29udGVudD1wcm9ncmFtbWVycwogICAgICAgICB2
        YWx1ZT1zZWxlY3RlZFByb2dyYW1tZXIKICB9fQogIGBgYAoKICBXb3VsZCBy
        ZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MOgoKICBgYGBodG1sCiAgPHNl
        bGVjdCBjbGFzcz0iZW1iZXItc2VsZWN0Ij4KICAgIDxvcHRpb24gdmFsdWU9
        IlllaHVkYSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJU
        b20iPlRvbTwvb3B0aW9uPgogIDwvc2VsZWN0PgogIGBgYAoKICBBbHRob3Vn
        aCBgc2VsZWN0ZWRQcm9ncmFtbWVyYCBpcyBgbnVsbGAgYW5kIG5vIGA8b3B0
        aW9uPmAKICBoYXMgYSBgc2VsZWN0ZWRgIGF0dHJpYnV0ZSB0aGUgcmVuZGVy
        ZWQgSFRNTCB3aWxsIGRpc3BsYXkgdGhlCiAgZmlyc3QgaXRlbSBhcyB0aG91
        Z2ggaXQgd2VyZSBzZWxlY3RlZC4gWW91IGNhbiBzdXBwbHkgYSBzdHJpbmcK
        ICB2YWx1ZSBmb3IgdGhlIGBFbWJlci5TZWxlY3RgIHRvIGRpc3BsYXkgd2hl
        biB0aGVyZSBpcyBubyBzZWxlY3Rpb24KICB3aXRoIHRoZSBgcHJvbXB0YCBv
        cHRpb246CgogIGBgYGphdmFzY3JpcHQKICBBcHAuQXBwbGljYXRpb25Db250
        cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRlbmQoewogICAgc2VsZWN0
        ZWRQcm9ncmFtbWVyOiBudWxsLAogICAgcHJvZ3JhbW1lcnM6IFsKICAgICAg
        IlllaHVkYSIsCiAgICAgICJUb20iCiAgICBdCiAgfSk7CiAgYGBgCgogIGBg
        YGhhbmRsZWJhcnMKICB7e3ZpZXcgRW1iZXIuU2VsZWN0CiAgICAgICAgIGNv
        bnRlbnQ9cHJvZ3JhbW1lcnMKICAgICAgICAgdmFsdWU9c2VsZWN0ZWRQcm9n
        cmFtbWVyCiAgICAgICAgIHByb21wdD0iUGxlYXNlIHNlbGVjdCBhIG5hbWUi
        CiAgfX0KICBgYGAKCiAgV291bGQgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcg
        SFRNTDoKCiAgYGBgaHRtbAogIDxzZWxlY3QgY2xhc3M9ImVtYmVyLXNlbGVj
        dCI+CiAgICA8b3B0aW9uPlBsZWFzZSBzZWxlY3QgYSBuYW1lPC9vcHRpb24+
        CiAgICA8b3B0aW9uIHZhbHVlPSJZZWh1ZGEiPlllaHVkYTwvb3B0aW9uPgog
        ICAgPG9wdGlvbiB2YWx1ZT0iVG9tIj5Ub208L29wdGlvbj4KICA8L3NlbGVj
        dD4KICBgYGAKCiAgQGNsYXNzIFNlbGVjdAogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAZXh0ZW5kcyBFbWJlci5WaWV3CiovCkVtYmVyLlNlbGVjdCA9IEVtYmVy
        LlZpZXcuZXh0ZW5kKAogIC8qKiBAc2NvcGUgRW1iZXIuU2VsZWN0LnByb3Rv
        dHlwZSAqLyB7CgogIHRhZ05hbWU6ICdzZWxlY3QnLAogIGNsYXNzTmFtZXM6
        IFsnZW1iZXItc2VsZWN0J10sCiAgZGVmYXVsdFRlbXBsYXRlOiBFbWJlci5I
        YW5kbGViYXJzLnRlbXBsYXRlKGZ1bmN0aW9uIGFub255bW91cyhIYW5kbGVi
        YXJzLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHsKdGhpcy5jb21w
        aWxlckluZm8gPSBbNCwnPj0gMS4wLjAnXTsKaGVscGVycyA9IHRoaXMubWVy
        Z2UoaGVscGVycywgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9
        IGRhdGEgfHwge307CiAgdmFyIGJ1ZmZlciA9ICcnLCBzdGFjazEsIGhhc2hU
        eXBlcywgaGFzaENvbnRleHRzLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNj
        YXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzOwoKZnVuY3Rpb24gcHJvZ3JhbTEo
        ZGVwdGgwLGRhdGEpIHsKICAKICB2YXIgYnVmZmVyID0gJycsIGhhc2hUeXBl
        cywgaGFzaENvbnRleHRzOwogIGRhdGEuYnVmZmVyLnB1c2goIjxvcHRpb24g
        dmFsdWU9XCJcIj4iKTsKICBoYXNoVHlwZXMgPSB7fTsKICBoYXNoQ29udGV4
        dHMgPSB7fTsKICBkYXRhLmJ1ZmZlci5wdXNoKGVzY2FwZUV4cHJlc3Npb24o
        aGVscGVycy5fdHJpYWdlTXVzdGFjaGUuY2FsbChkZXB0aDAsICJ2aWV3LnBy
        b21wdCIsIHtoYXNoOnt9LGNvbnRleHRzOltkZXB0aDBdLHR5cGVzOlsiSUQi
        XSxoYXNoQ29udGV4dHM6aGFzaENvbnRleHRzLGhhc2hUeXBlczpoYXNoVHlw
        ZXMsZGF0YTpkYXRhfSkpKTsKICBkYXRhLmJ1ZmZlci5wdXNoKCI8L29wdGlv
        bj4iKTsKICByZXR1cm4gYnVmZmVyOwogIH0KCmZ1bmN0aW9uIHByb2dyYW0z
        KGRlcHRoMCxkYXRhKSB7CiAgCiAgdmFyIHN0YWNrMSwgaGFzaFR5cGVzLCBo
        YXNoQ29udGV4dHM7CiAgaGFzaFR5cGVzID0ge307CiAgaGFzaENvbnRleHRz
        ID0ge307CiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAi
        dmlldy5ncm91cGVkQ29udGVudCIsIHtoYXNoOnt9LGludmVyc2U6c2VsZi5u
        b29wLGZuOnNlbGYucHJvZ3JhbSg0LCBwcm9ncmFtNCwgZGF0YSksY29udGV4
        dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGhhc2hDb250ZXh0czpoYXNoQ29u
        dGV4dHMsaGFzaFR5cGVzOmhhc2hUeXBlcyxkYXRhOmRhdGF9KTsKICBpZihz
        dGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGRhdGEuYnVmZmVyLnB1c2goc3Rh
        Y2sxKTsgfQogIGVsc2UgeyBkYXRhLmJ1ZmZlci5wdXNoKCcnKTsgfQogIH0K
        ZnVuY3Rpb24gcHJvZ3JhbTQoZGVwdGgwLGRhdGEpIHsKICAKICB2YXIgaGFz
        aENvbnRleHRzLCBoYXNoVHlwZXM7CiAgaGFzaENvbnRleHRzID0geydjb250
        ZW50JzogZGVwdGgwLCdsYWJlbCc6IGRlcHRoMH07CiAgaGFzaFR5cGVzID0g
        eydjb250ZW50JzogIklEIiwnbGFiZWwnOiAiSUQifTsKICBkYXRhLmJ1ZmZl
        ci5wdXNoKGVzY2FwZUV4cHJlc3Npb24oaGVscGVycy52aWV3LmNhbGwoZGVw
        dGgwLCAidmlldy5ncm91cFZpZXciLCB7aGFzaDp7CiAgICAnY29udGVudCc6
        ICgiY29udGVudCIpLAogICAgJ2xhYmVsJzogKCJsYWJlbCIpCiAgfSxjb250
        ZXh0czpbZGVwdGgwXSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOmhhc2hD
        b250ZXh0cyxoYXNoVHlwZXM6aGFzaFR5cGVzLGRhdGE6ZGF0YX0pKSk7CiAg
        fQoKZnVuY3Rpb24gcHJvZ3JhbTYoZGVwdGgwLGRhdGEpIHsKICAKICB2YXIg
        c3RhY2sxLCBoYXNoVHlwZXMsIGhhc2hDb250ZXh0czsKICBoYXNoVHlwZXMg
        PSB7fTsKICBoYXNoQ29udGV4dHMgPSB7fTsKICBzdGFjazEgPSBoZWxwZXJz
        LmVhY2guY2FsbChkZXB0aDAsICJ2aWV3LmNvbnRlbnQiLCB7aGFzaDp7fSxp
        bnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oNywgcHJvZ3JhbTcs
        IGRhdGEpLGNvbnRleHRzOltkZXB0aDBdLHR5cGVzOlsiSUQiXSxoYXNoQ29u
        dGV4dHM6aGFzaENvbnRleHRzLGhhc2hUeXBlczpoYXNoVHlwZXMsZGF0YTpk
        YXRhfSk7CiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBkYXRhLmJ1
        ZmZlci5wdXNoKHN0YWNrMSk7IH0KICBlbHNlIHsgZGF0YS5idWZmZXIucHVz
        aCgnJyk7IH0KICB9CmZ1bmN0aW9uIHByb2dyYW03KGRlcHRoMCxkYXRhKSB7
        CiAgCiAgdmFyIGhhc2hDb250ZXh0cywgaGFzaFR5cGVzOwogIGhhc2hDb250
        ZXh0cyA9IHsnY29udGVudCc6IGRlcHRoMH07CiAgaGFzaFR5cGVzID0geydj
        b250ZW50JzogIklEIn07CiAgZGF0YS5idWZmZXIucHVzaChlc2NhcGVFeHBy
        ZXNzaW9uKGhlbHBlcnMudmlldy5jYWxsKGRlcHRoMCwgInZpZXcub3B0aW9u
        VmlldyIsIHtoYXNoOnsKICAgICdjb250ZW50JzogKCIiKQogIH0sY29udGV4
        dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGhhc2hDb250ZXh0czpoYXNoQ29u
        dGV4dHMsaGFzaFR5cGVzOmhhc2hUeXBlcyxkYXRhOmRhdGF9KSkpOwogIH0K
        CiAgaGFzaFR5cGVzID0ge307CiAgaGFzaENvbnRleHRzID0ge307CiAgc3Rh
        Y2sxID0gaGVscGVyc1snaWYnXS5jYWxsKGRlcHRoMCwgInZpZXcucHJvbXB0
        Iiwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFt
        KDEsIHByb2dyYW0xLCBkYXRhKSxjb250ZXh0czpbZGVwdGgwXSx0eXBlczpb
        IklEIl0saGFzaENvbnRleHRzOmhhc2hDb250ZXh0cyxoYXNoVHlwZXM6aGFz
        aFR5cGVzLGRhdGE6ZGF0YX0pOwogIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09
        IDApIHsgZGF0YS5idWZmZXIucHVzaChzdGFjazEpOyB9CiAgaGFzaFR5cGVz
        ID0ge307CiAgaGFzaENvbnRleHRzID0ge307CiAgc3RhY2sxID0gaGVscGVy
        c1snaWYnXS5jYWxsKGRlcHRoMCwgInZpZXcub3B0aW9uR3JvdXBQYXRoIiwg
        e2hhc2g6e30saW52ZXJzZTpzZWxmLnByb2dyYW0oNiwgcHJvZ3JhbTYsIGRh
        dGEpLGZuOnNlbGYucHJvZ3JhbSgzLCBwcm9ncmFtMywgZGF0YSksY29udGV4
        dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGhhc2hDb250ZXh0czpoYXNoQ29u
        dGV4dHMsaGFzaFR5cGVzOmhhc2hUeXBlcyxkYXRhOmRhdGF9KTsKICBpZihz
        dGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGRhdGEuYnVmZmVyLnB1c2goc3Rh
        Y2sxKTsgfQogIHJldHVybiBidWZmZXI7CiAgCn0pLAogIGF0dHJpYnV0ZUJp
        bmRpbmdzOiBbJ211bHRpcGxlJywgJ2Rpc2FibGVkJywgJ3RhYmluZGV4Jywg
        J25hbWUnXSwKCiAgLyoqCiAgICBUaGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUg
        b2YgdGhlIHNlbGVjdCBlbGVtZW50LiBJbmRpY2F0ZXMgd2hldGhlciBtdWx0
        aXBsZQogICAgb3B0aW9ucyBjYW4gYmUgc2VsZWN0ZWQuCgogICAgQHByb3Bl
        cnR5IG11bHRpcGxlCiAgICBAdHlwZSBCb29sZWFuCiAgICBAZGVmYXVsdCBm
        YWxzZQogICovCiAgbXVsdGlwbGU6IGZhbHNlLAoKICAvKioKICAgIFRoZSBg
        ZGlzYWJsZWRgIGF0dHJpYnV0ZSBvZiB0aGUgc2VsZWN0IGVsZW1lbnQuIElu
        ZGljYXRlcyB3aGV0aGVyCiAgICB0aGUgZWxlbWVudCBpcyBkaXNhYmxlZCBm
        cm9tIGludGVyYWN0aW9ucy4KCiAgICBAcHJvcGVydHkgZGlzYWJsZWQKICAg
        IEB0eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8KICBkaXNh
        YmxlZDogZmFsc2UsCgogIC8qKgogICAgVGhlIGxpc3Qgb2Ygb3B0aW9ucy4K
        CiAgICBJZiBgb3B0aW9uTGFiZWxQYXRoYCBhbmQgYG9wdGlvblZhbHVlUGF0
        aGAgYXJlIG5vdCBvdmVycmlkZGVuLCB0aGlzIHNob3VsZAogICAgYmUgYSBs
        aXN0IG9mIHN0cmluZ3MsIHdoaWNoIHdpbGwgc2VydmUgc2ltdWx0YW5lb3Vz
        bHkgYXMgbGFiZWxzIGFuZCB2YWx1ZXMuCgogICAgT3RoZXJ3aXNlLCB0aGlz
        IHNob3VsZCBiZSBhIGxpc3Qgb2Ygb2JqZWN0cy4gRm9yIGluc3RhbmNlOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIEVtYmVyLlNlbGVjdC5jcmVhdGUoewog
        ICAgICBjb250ZW50OiBFbWJlci5BKFsKICAgICAgICAgIHsgaWQ6IDEsIGZp
        cnN0TmFtZTogJ1llaHVkYScgfSwKICAgICAgICAgIHsgaWQ6IDIsIGZpcnN0
        TmFtZTogJ1RvbScgfQogICAgICAgIF0pLAogICAgICBvcHRpb25MYWJlbFBh
        dGg6ICdjb250ZW50LmZpcnN0TmFtZScsCiAgICAgIG9wdGlvblZhbHVlUGF0
        aDogJ2NvbnRlbnQuaWQnCiAgICB9KTsKICAgIGBgYAoKICAgIEBwcm9wZXJ0
        eSBjb250ZW50CiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1bHQgbnVsbAog
        ICovCiAgY29udGVudDogbnVsbCwKCiAgLyoqCiAgICBXaGVuIGBtdWx0aXBs
        ZWAgaXMgYGZhbHNlYCwgdGhlIGVsZW1lbnQgb2YgYGNvbnRlbnRgIHRoYXQg
        aXMgY3VycmVudGx5CiAgICBzZWxlY3RlZCwgaWYgYW55LgoKICAgIFdoZW4g
        YG11bHRpcGxlYCBpcyBgdHJ1ZWAsIGFuIGFycmF5IG9mIHN1Y2ggZWxlbWVu
        dHMuCgogICAgQHByb3BlcnR5IHNlbGVjdGlvbgogICAgQHR5cGUgT2JqZWN0
        IG9yIEFycmF5CiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBzZWxlY3Rpb246
        IG51bGwsCgogIC8qKgogICAgSW4gc2luZ2xlIHNlbGVjdGlvbiBtb2RlICh3
        aGVuIGBtdWx0aXBsZWAgaXMgYGZhbHNlYCksIHZhbHVlIGNhbiBiZSB1c2Vk
        IHRvCiAgICBnZXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uJ3MgdmFsdWUgb3Ig
        c2V0IHRoZSBzZWxlY3Rpb24gYnkgaXQncyB2YWx1ZS4KCiAgICBJdCBpcyBu
        b3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbiBtdWx0aXBsZSBzZWxlY3Rpb24g
        bW9kZS4KCiAgICBAcHJvcGVydHkgdmFsdWUKICAgIEB0eXBlIFN0cmluZwog
        ICAgQGRlZmF1bHQgbnVsbAogICovCiAgdmFsdWU6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmIChhcmd1bWVudHMubGVu
        Z3RoID09PSAyKSB7IHJldHVybiB2YWx1ZTsgfQogICAgdmFyIHZhbHVlUGF0
        aCA9IGdldCh0aGlzLCAnb3B0aW9uVmFsdWVQYXRoJykucmVwbGFjZSgvXmNv
        bnRlbnRcLj8vLCAnJyk7CiAgICByZXR1cm4gdmFsdWVQYXRoID8gZ2V0KHRo
        aXMsICdzZWxlY3Rpb24uJyArIHZhbHVlUGF0aCkgOiBnZXQodGhpcywgJ3Nl
        bGVjdGlvbicpOwogIH0pLnByb3BlcnR5KCdzZWxlY3Rpb24nKSwKCiAgLyoq
        CiAgICBJZiBnaXZlbiwgYSB0b3AtbW9zdCBkdW1teSBvcHRpb24gd2lsbCBi
        ZSByZW5kZXJlZCB0byBzZXJ2ZSBhcyBhIHVzZXIKICAgIHByb21wdC4KCiAg
        ICBAcHJvcGVydHkgcHJvbXB0CiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZh
        dWx0IG51bGwKICAqLwogIHByb21wdDogbnVsbCwKCiAgLyoqCiAgICBUaGUg
        cGF0aCBvZiB0aGUgb3B0aW9uIGxhYmVscy4gU2VlIFtjb250ZW50XSgvYXBp
        L2NsYXNzZXMvRW1iZXIuU2VsZWN0Lmh0bWwjcHJvcGVydHlfY29udGVudCku
        CgogICAgQHByb3BlcnR5IG9wdGlvbkxhYmVsUGF0aAogICAgQHR5cGUgU3Ry
        aW5nCiAgICBAZGVmYXVsdCAnY29udGVudCcKICAqLwogIG9wdGlvbkxhYmVs
        UGF0aDogJ2NvbnRlbnQnLAoKICAvKioKICAgIFRoZSBwYXRoIG9mIHRoZSBv
        cHRpb24gdmFsdWVzLiBTZWUgW2NvbnRlbnRdKC9hcGkvY2xhc3Nlcy9FbWJl
        ci5TZWxlY3QuaHRtbCNwcm9wZXJ0eV9jb250ZW50KS4KCiAgICBAcHJvcGVy
        dHkgb3B0aW9uVmFsdWVQYXRoCiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZh
        dWx0ICdjb250ZW50JwogICovCiAgb3B0aW9uVmFsdWVQYXRoOiAnY29udGVu
        dCcsCgogIC8qKgogICAgVGhlIHBhdGggb2YgdGhlIG9wdGlvbiBncm91cC4K
        ICAgIFdoZW4gdGhpcyBwcm9wZXJ0eSBpcyB1c2VkLCBgY29udGVudGAgc2hv
        dWxkIGJlIHNvcnRlZCBieSBgb3B0aW9uR3JvdXBQYXRoYC4KCiAgICBAcHJv
        cGVydHkgb3B0aW9uR3JvdXBQYXRoCiAgICBAdHlwZSBTdHJpbmcKICAgIEBk
        ZWZhdWx0IG51bGwKICAqLwogIG9wdGlvbkdyb3VwUGF0aDogbnVsbCwKCiAg
        LyoqCiAgICBUaGUgdmlldyBjbGFzcyBmb3Igb3B0Z3JvdXAuCgogICAgQHBy
        b3BlcnR5IGdyb3VwVmlldwogICAgQHR5cGUgRW1iZXIuVmlldwogICAgQGRl
        ZmF1bHQgRW1iZXIuU2VsZWN0T3B0Z3JvdXAKICAqLwogIGdyb3VwVmlldzog
        RW1iZXIuU2VsZWN0T3B0Z3JvdXAsCgogIGdyb3VwZWRDb250ZW50OiBFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBncm91cFBhdGggPSBn
        ZXQodGhpcywgJ29wdGlvbkdyb3VwUGF0aCcpOwogICAgdmFyIGdyb3VwZWRD
        b250ZW50ID0gRW1iZXIuQSgpOwogICAgdmFyIGNvbnRlbnQgPSBnZXQodGhp
        cywgJ2NvbnRlbnQnKSB8fCBbXTsKCiAgICBmb3JFYWNoKGNvbnRlbnQsIGZ1
        bmN0aW9uKGl0ZW0pIHsKICAgICAgdmFyIGxhYmVsID0gZ2V0KGl0ZW0sIGdy
        b3VwUGF0aCk7CgogICAgICBpZiAoZ2V0KGdyb3VwZWRDb250ZW50LCAnbGFz
        dE9iamVjdC5sYWJlbCcpICE9PSBsYWJlbCkgewogICAgICAgIGdyb3VwZWRD
        b250ZW50LnB1c2hPYmplY3QoewogICAgICAgICAgbGFiZWw6IGxhYmVsLAog
        ICAgICAgICAgY29udGVudDogRW1iZXIuQSgpCiAgICAgICAgfSk7CiAgICAg
        IH0KCiAgICAgIGdldChncm91cGVkQ29udGVudCwgJ2xhc3RPYmplY3QuY29u
        dGVudCcpLnB1c2goaXRlbSk7CiAgICB9KTsKCiAgICByZXR1cm4gZ3JvdXBl
        ZENvbnRlbnQ7CiAgfSkucHJvcGVydHkoJ29wdGlvbkdyb3VwUGF0aCcsICdj
        b250ZW50LkBlYWNoJyksCgogIC8qKgogICAgVGhlIHZpZXcgY2xhc3MgZm9y
        IG9wdGlvbi4KCiAgICBAcHJvcGVydHkgb3B0aW9uVmlldwogICAgQHR5cGUg
        RW1iZXIuVmlldwogICAgQGRlZmF1bHQgRW1iZXIuU2VsZWN0T3B0aW9uCiAg
        Ki8KICBvcHRpb25WaWV3OiBFbWJlci5TZWxlY3RPcHRpb24sCgogIF9jaGFu
        Z2U6IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnbXVsdGlwbGUn
        KSkgewogICAgICB0aGlzLl9jaGFuZ2VNdWx0aXBsZSgpOwogICAgfSBlbHNl
        IHsKICAgICAgdGhpcy5fY2hhbmdlU2luZ2xlKCk7CiAgICB9CiAgfSwKCiAg
        c2VsZWN0aW9uRGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignc2VsZWN0aW9u
        LkBlYWNoJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VsZWN0aW9uID0gZ2V0
        KHRoaXMsICdzZWxlY3Rpb24nKTsKICAgIGlmIChnZXQodGhpcywgJ211bHRp
        cGxlJykpIHsKICAgICAgaWYgKCFpc0FycmF5KHNlbGVjdGlvbikpIHsKICAg
        ICAgICBzZXQodGhpcywgJ3NlbGVjdGlvbicsIEVtYmVyLkEoW3NlbGVjdGlv
        bl0pKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fc2Vs
        ZWN0aW9uRGlkQ2hhbmdlTXVsdGlwbGUoKTsKICAgIH0gZWxzZSB7CiAgICAg
        IHRoaXMuX3NlbGVjdGlvbkRpZENoYW5nZVNpbmdsZSgpOwogICAgfQogIH0p
        LAoKICB2YWx1ZURpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ3ZhbHVlJywg
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29u
        dGVudCcpLAogICAgICAgIHZhbHVlID0gZ2V0KHRoaXMsICd2YWx1ZScpLAog
        ICAgICAgIHZhbHVlUGF0aCA9IGdldCh0aGlzLCAnb3B0aW9uVmFsdWVQYXRo
        JykucmVwbGFjZSgvXmNvbnRlbnRcLj8vLCAnJyksCiAgICAgICAgc2VsZWN0
        ZWRWYWx1ZSA9ICh2YWx1ZVBhdGggPyBnZXQodGhpcywgJ3NlbGVjdGlvbi4n
        ICsgdmFsdWVQYXRoKSA6IGdldCh0aGlzLCAnc2VsZWN0aW9uJykpLAogICAg
        ICAgIHNlbGVjdGlvbjsKCiAgICBpZiAodmFsdWUgIT09IHNlbGVjdGVkVmFs
        dWUpIHsKICAgICAgc2VsZWN0aW9uID0gY29udGVudCA/IGNvbnRlbnQuZmlu
        ZChmdW5jdGlvbihvYmopIHsKICAgICAgICByZXR1cm4gdmFsdWUgPT09ICh2
        YWx1ZVBhdGggPyBnZXQob2JqLCB2YWx1ZVBhdGgpIDogb2JqKTsKICAgICAg
        fSkgOiBudWxsOwoKICAgICAgdGhpcy5zZXQoJ3NlbGVjdGlvbicsIHNlbGVj
        dGlvbik7CiAgICB9CiAgfSksCgoKICBfdHJpZ2dlckNoYW5nZTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgc2VsZWN0aW9uID0gZ2V0KHRoaXMsICdzZWxlY3Rp
        b24nKTsKICAgIHZhciB2YWx1ZSA9IGdldCh0aGlzLCAndmFsdWUnKTsKCiAg
        ICBpZiAoIUVtYmVyLmlzTm9uZShzZWxlY3Rpb24pKSB7IHRoaXMuc2VsZWN0
        aW9uRGlkQ2hhbmdlKCk7IH0KICAgIGlmICghRW1iZXIuaXNOb25lKHZhbHVl
        KSkgeyB0aGlzLnZhbHVlRGlkQ2hhbmdlKCk7IH0KCiAgICB0aGlzLl9jaGFu
        Z2UoKTsKICB9LAoKICBfY2hhbmdlU2luZ2xlOiBmdW5jdGlvbigpIHsKICAg
        IHZhciBzZWxlY3RlZEluZGV4ID0gdGhpcy4kKClbMF0uc2VsZWN0ZWRJbmRl
        eCwKICAgICAgICBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAg
        ICAgICAgcHJvbXB0ID0gZ2V0KHRoaXMsICdwcm9tcHQnKTsKCiAgICBpZiAo
        IWNvbnRlbnQgfHwgIWdldChjb250ZW50LCAnbGVuZ3RoJykpIHsgcmV0dXJu
        OyB9CiAgICBpZiAocHJvbXB0ICYmIHNlbGVjdGVkSW5kZXggPT09IDApIHsg
        c2V0KHRoaXMsICdzZWxlY3Rpb24nLCBudWxsKTsgcmV0dXJuOyB9CgogICAg
        aWYgKHByb21wdCkgeyBzZWxlY3RlZEluZGV4IC09IDE7IH0KICAgIHNldCh0
        aGlzLCAnc2VsZWN0aW9uJywgY29udGVudC5vYmplY3RBdChzZWxlY3RlZElu
        ZGV4KSk7CiAgfSwKCgogIF9jaGFuZ2VNdWx0aXBsZTogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJCgnb3B0aW9uOnNlbGVjdGVkJyks
        CiAgICAgICAgcHJvbXB0ID0gZ2V0KHRoaXMsICdwcm9tcHQnKSwKICAgICAg
        ICBvZmZzZXQgPSBwcm9tcHQgPyAxIDogMCwKICAgICAgICBjb250ZW50ID0g
        Z2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgc2VsZWN0aW9uID0gZ2V0
        KHRoaXMsICdzZWxlY3Rpb24nKTsKCiAgICBpZiAoIWNvbnRlbnQpIHsgcmV0
        dXJuOyB9CiAgICBpZiAob3B0aW9ucykgewogICAgICB2YXIgc2VsZWN0ZWRJ
        bmRleGVzID0gb3B0aW9ucy5tYXAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0
        dXJuIHRoaXMuaW5kZXggLSBvZmZzZXQ7CiAgICAgIH0pLnRvQXJyYXkoKTsK
        ICAgICAgdmFyIG5ld1NlbGVjdGlvbiA9IGNvbnRlbnQub2JqZWN0c0F0KHNl
        bGVjdGVkSW5kZXhlcyk7CgogICAgICBpZiAoaXNBcnJheShzZWxlY3Rpb24p
        KSB7CiAgICAgICAgcmVwbGFjZShzZWxlY3Rpb24sIDAsIGdldChzZWxlY3Rp
        b24sICdsZW5ndGgnKSwgbmV3U2VsZWN0aW9uKTsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICBzZXQodGhpcywgJ3NlbGVjdGlvbicsIG5ld1NlbGVjdGlvbik7
        CiAgICAgIH0KICAgIH0KICB9LAoKICBfc2VsZWN0aW9uRGlkQ2hhbmdlU2lu
        Z2xlOiBmdW5jdGlvbigpIHsKICAgIHZhciBlbCA9IHRoaXMuZ2V0KCdlbGVt
        ZW50Jyk7CiAgICBpZiAoIWVsKSB7IHJldHVybjsgfQoKICAgIHZhciBjb250
        ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgc2VsZWN0aW9u
        ID0gZ2V0KHRoaXMsICdzZWxlY3Rpb24nKSwKICAgICAgICBzZWxlY3Rpb25J
        bmRleCA9IGNvbnRlbnQgPyBpbmRleE9mKGNvbnRlbnQsIHNlbGVjdGlvbikg
        OiAtMSwKICAgICAgICBwcm9tcHQgPSBnZXQodGhpcywgJ3Byb21wdCcpOwoK
        ICAgIGlmIChwcm9tcHQpIHsgc2VsZWN0aW9uSW5kZXggKz0gMTsgfQogICAg
        aWYgKGVsKSB7IGVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3Rpb25JbmRleDsg
        fQogIH0sCgogIF9zZWxlY3Rpb25EaWRDaGFuZ2VNdWx0aXBsZTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcp
        LAogICAgICAgIHNlbGVjdGlvbiA9IGdldCh0aGlzLCAnc2VsZWN0aW9uJyks
        CiAgICAgICAgc2VsZWN0ZWRJbmRleGVzID0gY29udGVudCA/IGluZGV4ZXNP
        Zihjb250ZW50LCBzZWxlY3Rpb24pIDogWy0xXSwKICAgICAgICBwcm9tcHQg
        PSBnZXQodGhpcywgJ3Byb21wdCcpLAogICAgICAgIG9mZnNldCA9IHByb21w
        dCA/IDEgOiAwLAogICAgICAgIG9wdGlvbnMgPSB0aGlzLiQoJ29wdGlvbicp
        LAogICAgICAgIGFkanVzdGVkOwoKICAgIGlmIChvcHRpb25zKSB7CiAgICAg
        IG9wdGlvbnMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICBhZGp1c3RlZCA9
        IHRoaXMuaW5kZXggPiAtMSA/IHRoaXMuaW5kZXggLSBvZmZzZXQgOiAtMTsK
        ICAgICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXhPZihzZWxlY3RlZEluZGV4
        ZXMsIGFkanVzdGVkKSA+IC0xOwogICAgICB9KTsKICAgIH0KICB9LAoKICBp
        bml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlz
        Lm9uKCJkaWRJbnNlcnRFbGVtZW50IiwgdGhpcywgdGhpcy5fdHJpZ2dlckNo
        YW5nZSk7CiAgICB0aGlzLm9uKCJjaGFuZ2UiLCB0aGlzLCB0aGlzLl9jaGFu
        Z2UpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycy1jb21waWxl
        cgoqLwoKLyoqCgogIFRoZSBge3tpbnB1dH19YCBoZWxwZXIgaW5zZXJ0cyBh
        biBIVE1MIGA8aW5wdXQ+YCB0YWcgaW50byB0aGUgdGVtcGxhdGUsCiAgd2l0
        aCBhIGB0eXBlYCB2YWx1ZSBvZiBlaXRoZXIgYHRleHRgIG9yIGBjaGVja2Jv
        eGAuIElmIG5vIGB0eXBlYCBpcyBwcm92aWRlZCwKICBgdGV4dGAgd2lsbCBi
        ZSB0aGUgZGVmYXVsdCB2YWx1ZSBhcHBsaWVkLiBUaGUgYXR0cmlidXRlcyBv
        ZiBge3tpbnB1dH19YAogIG1hdGNoIHRob3NlIG9mIHRoZSBuYXRpdmUgSFRN
        TCB0YWcgYXMgY2xvc2VseSBhcyBwb3NzaWJsZSBmb3IgdGhlc2UgdHdvIHR5
        cGVzLgoKICAjIyBVc2UgYXMgdGV4dCBmaWVsZAogIEFuIGB7e2lucHV0fX1g
        IHdpdGggbm8gYHR5cGVgIG9yIGEgYHR5cGVgIG9mIGB0ZXh0YCB3aWxsIHJl
        bmRlciBhbiBIVE1MIHRleHQgaW5wdXQuCiAgVGhlIGZvbGxvd2luZyBIVE1M
        IGF0dHJpYnV0ZXMgY2FuIGJlIHNldCB2aWEgdGhlIGhlbHBlcjoKCiogYHZh
        bHVlYAoqIGBzaXplYAoqIGBuYW1lYAoqIGBwYXR0ZXJuYAoqIGBwbGFjZWhv
        bGRlcmAKKiBgZGlzYWJsZWRgCiogYG1heGxlbmd0aGAKKiBgdGFiaW5kZXhg
        CgoKICBXaGVuIHNldCB0byBhIHF1b3RlZCBzdHJpbmcsIHRoZXNlIHZhbHVl
        cyB3aWxsIGJlIGRpcmVjdGx5IGFwcGxpZWQgdG8gdGhlIEhUTUwKICBlbGVt
        ZW50LiBXaGVuIGxlZnQgdW5xdW90ZWQsIHRoZXNlIHZhbHVlcyB3aWxsIGJl
        IGJvdW5kIHRvIGEgcHJvcGVydHkgb24gdGhlCiAgdGVtcGxhdGUncyBjdXJy
        ZW50IHJlbmRlcmluZyBjb250ZXh0IChtb3N0IHR5cGljYWxseSBhIGNvbnRy
        b2xsZXIgaW5zdGFuY2UpLgoKICAjIyBVbmJvdW5kOgoKICBgYGBoYW5kbGVi
        YXJzCiAge3tpbnB1dCB2YWx1ZT0iaHR0cDovL3d3dy5mYWNlYm9vay5jb20i
        fX0KICBgYGAKCgogIGBgYGh0bWwKICA8aW5wdXQgdHlwZT0idGV4dCIgdmFs
        dWU9Imh0dHA6Ly93d3cuZmFjZWJvb2suY29tIi8+CiAgYGBgCgogICMjIEJv
        dW5kOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJv
        bGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIGZpcnN0TmFt
        ZTogIlN0YW5sZXkiLAogICAgZW50cnlOb3RBbGxvd2VkOiB0cnVlCiAgfSk7
        CiAgYGBgCgoKICBgYGBoYW5kbGViYXJzCiAge3tpbnB1dCB0eXBlPSJ0ZXh0
        IiB2YWx1ZT1maXJzdE5hbWUgZGlzYWJsZWQ9ZW50cnlOb3RBbGxvd2VkIHNp
        emU9IjUwIn19CiAgYGBgCgoKICBgYGBodG1sCiAgPGlucHV0IHR5cGU9InRl
        eHQiIHZhbHVlPSJTdGFubGV5IiBkaXNhYmxlZD0iZGlzYWJsZWQiIHNpemU9
        IjUwIi8+CiAgYGBgCgogICMjIEV4dGVuc2lvbgoKICBJbnRlcm5hbGx5LCBg
        e3tpbnB1dCB0eXBlPSJ0ZXh0In19YCBjcmVhdGVzIGFuIGluc3RhbmNlIG9m
        IGBFbWJlci5UZXh0RmllbGRgLCBwYXNzaW5nCiAgYXJndW1lbnRzIGZyb20g
        dGhlIGhlbHBlciB0byBgRW1iZXIuVGV4dEZpZWxkYCdzIGBjcmVhdGVgIG1l
        dGhvZC4gWW91IGNhbiBleHRlbmQgdGhlCiAgY2FwYWJsaWx0aWVzIG9mIHRl
        eHQgaW5wdXRzIGluIHlvdXIgYXBwbGljYXRpb25zIGJ5IHJlb3BlbmluZyB0
        aGlzIGNsYXNzLiBGb3IgZXhhbXBsZSwKICBpZiB5b3UgYXJlIGRlcGxveWlu
        ZyB0byBicm93c2VycyB3aGVyZSB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUg
        aXMgdXNlZCwgeW91CiAgY2FuIGFkZCB0aGlzIHRvIHRoZSBgVGV4dEZpZWxk
        YCdzIGBhdHRyaWJ1dGVCaW5kaW5nc2AgcHJvcGVydHk6CgogIGBgYGphdmFz
        Y3JpcHQKICBFbWJlci5UZXh0RmllbGQucmVvcGVuKHsKICAgIGF0dHJpYnV0
        ZUJpbmRpbmdzOiBbJ3JlcXVpcmVkJ10KICB9KTsKICBgYGAKCiAgS2VlcCBp
        biBtaW5kIHdoZW4gd3JpdGluZyBgRW1iZXIuVGV4dEZpZWxkYCBzdWJjbGFz
        c2VzIHRoYXQgYEVtYmVyLlRleHRGaWVsZGAKICBpdHNlbGYgZXh0ZW5kcyBg
        RW1iZXIuQ29tcG9uZW50YCwgbWVhbmluZyB0aGF0IGl0IGRvZXMgTk9UIGlu
        aGVyaXQKICB0aGUgYGNvbnRyb2xsZXJgIG9mIHRoZSBwYXJlbnQgdmlldy4K
        CiAgU2VlIG1vcmUgYWJvdXQgW0VtYmVyIGNvbXBvbmVudHNdKGFwaS9jbGFz
        c2VzL0VtYmVyLkNvbXBvbmVudC5odG1sKQoKCiAgIyMgVXNlIGFzIGNoZWNr
        Ym94CgogIEFuIGB7e2lucHV0fX1gIHdpdGggYSBgdHlwZWAgb2YgYGNoZWNr
        Ym94YCB3aWxsIHJlbmRlciBhbiBIVE1MIGNoZWNrYm94IGlucHV0LgogIFRo
        ZSBmb2xsb3dpbmcgSFRNTCBhdHRyaWJ1dGVzIGNhbiBiZSBzZXQgdmlhIHRo
        ZSBoZWxwZXI6CgoqIGBjaGVja2VkYAoqIGBkaXNhYmxlZGAKKiBgdGFiaW5k
        ZXhgCiogYGluZGV0ZXJtaW5hdGVgCiogYG5hbWVgCgoKICBXaGVuIHNldCB0
        byBhIHF1b3RlZCBzdHJpbmcsIHRoZXNlIHZhbHVlcyB3aWxsIGJlIGRpcmVj
        dGx5IGFwcGxpZWQgdG8gdGhlIEhUTUwKICBlbGVtZW50LiBXaGVuIGxlZnQg
        dW5xdW90ZWQsIHRoZXNlIHZhbHVlcyB3aWxsIGJlIGJvdW5kIHRvIGEgcHJv
        cGVydHkgb24gdGhlCiAgdGVtcGxhdGUncyBjdXJyZW50IHJlbmRlcmluZyBj
        b250ZXh0IChtb3N0IHR5cGljYWxseSBhIGNvbnRyb2xsZXIgaW5zdGFuY2Up
        LgoKICAjIyBVbmJvdW5kOgoKICBgYGBoYW5kbGViYXJzCiAge3tpbnB1dCB0
        eXBlPSJjaGVja2JveCIgbmFtZT0iaXNBZG1pbiJ9fQogIGBgYAoKICBgYGBo
        dG1sCiAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJpc0FkbWluIiAv
        PgogIGBgYAoKICAjIyBCb3VuZDoKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5B
        cHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVu
        ZCh7CiAgICBpc0FkbWluOiB0cnVlCiAgfSk7CiAgYGBgCgoKICBgYGBoYW5k
        bGViYXJzCiAge3tpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD1pc0Fk
        bWluIH19CiAgYGBgCgoKICBgYGBodG1sCiAgPGlucHV0IHR5cGU9ImNoZWNr
        Ym94IiBjaGVja2VkPSJjaGVja2VkIiAvPgogIGBgYAoKICAjIyBFeHRlbnNp
        b24KCiAgSW50ZXJuYWxseSwgYHt7aW5wdXQgdHlwZT0iY2hlY2tib3gifX1g
        IGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYEVtYmVyLkNoZWNrYm94YCwgcGFz
        c2luZwogIGFyZ3VtZW50cyBmcm9tIHRoZSBoZWxwZXIgdG8gYEVtYmVyLkNo
        ZWNrYm94YCdzIGBjcmVhdGVgIG1ldGhvZC4gWW91IGNhbiBleHRlbmQgdGhl
        CiAgY2FwYWJsaWx0aWVzIG9mIGNoZWNrYm94IGlucHV0cyBpbiB5b3VyIGFw
        cGxpY2F0aW9ucyBieSByZW9wZW5pbmcgdGhpcyBjbGFzcy4gRm9yIGV4YW1w
        bGUsCiAgaWYgeW91IHdhbnRlZCB0byBhZGQgYSBjc3MgY2xhc3MgdG8gYWxs
        IGNoZWNrYm94ZXMgaW4geW91ciBhcHBsaWNhdGlvbjoKCiAgYGBgamF2YXNj
        cmlwdAogIEVtYmVyLkNoZWNrYm94LnJlb3Blbih7CiAgICBjbGFzc05hbWVz
        OiBbJ215LWFwcC1jaGVja2JveCddCiAgfSk7CiAgYGBgCgoKICBAbWV0aG9k
        IGlucHV0CiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFy
        YW0ge0hhc2h9IG9wdGlvbnMKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rl
        ckhlbHBlcignaW5wdXQnLCBmdW5jdGlvbihvcHRpb25zKSB7CiAgRW1iZXIu
        YXNzZXJ0KCdZb3UgY2FuIG9ubHkgcGFzcyBhdHRyaWJ1dGVzIHRvIHRoZSBg
        aW5wdXRgIGhlbHBlciwgbm90IGFyZ3VtZW50cycsIGFyZ3VtZW50cy5sZW5n
        dGggPCAyKTsKCiAgdmFyIGhhc2ggPSBvcHRpb25zLmhhc2gsCiAgICAgIHR5
        cGVzID0gb3B0aW9ucy5oYXNoVHlwZXMsCiAgICAgIGlucHV0VHlwZSA9IGhh
        c2gudHlwZSwKICAgICAgb25FdmVudCA9IGhhc2gub247CgogIGRlbGV0ZSBo
        YXNoLnR5cGU7CiAgZGVsZXRlIGhhc2gub247CgogIGlmIChpbnB1dFR5cGUg
        PT09ICdjaGVja2JveCcpIHsKICAgIHJldHVybiBFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMudmlldy5jYWxsKHRoaXMsIEVtYmVyLkNoZWNrYm94LCBvcHRp
        b25zKTsKICB9IGVsc2UgewogICAgaWYgKGlucHV0VHlwZSkgeyBoYXNoLnR5
        cGUgPSBpbnB1dFR5cGU7IH0KICAgIGhhc2gub25FdmVudCA9IG9uRXZlbnQg
        fHwgJ2VudGVyJzsKICAgIHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMudmlldy5jYWxsKHRoaXMsIEVtYmVyLlRleHRGaWVsZCwgb3B0aW9ucyk7
        CiAgfQp9KTsKCi8qKgogIGB7e3RleHRhcmVhfX1gIGluc2VydHMgYSBuZXcg
        aW5zdGFuY2Ugb2YgYDx0ZXh0YXJlYT5gIHRhZyBpbnRvIHRoZSB0ZW1wbGF0
        ZS4KICBUaGUgYXR0cmlidXRlcyBvZiBge3t0ZXh0YXJlYX19YCBtYXRjaCB0
        aG9zZSBvZiB0aGUgbmF0aXZlIEhUTUwgdGFncyBhcwogIGNsb3NlbHkgYXMg
        cG9zc2libGUuCgogIFRoZSBmb2xsb3dpbmcgSFRNTCBhdHRyaWJ1dGVzIGNh
        biBiZSBzZXQ6CgogICAgKiBgdmFsdWVgCiAgICAqIGBuYW1lYAogICAgKiBg
        cm93c2AKICAgICogYGNvbHNgCiAgICAqIGBwbGFjZWhvbGRlcmAKICAgICog
        YGRpc2FibGVkYAogICAgKiBgbWF4bGVuZ3RoYAogICAgKiBgdGFiaW5kZXhg
        CgogIFdoZW4gc2V0IHRvIGEgcXVvdGVkIHN0cmluZywgdGhlc2UgdmFsdWUg
        d2lsbCBiZSBkaXJlY3RseSBhcHBsaWVkIHRvIHRoZSBIVE1MCiAgZWxlbWVu
        dC4gV2hlbiBsZWZ0IHVucXVvdGVkLCB0aGVzZSB2YWx1ZXMgd2lsbCBiZSBi
        b3VuZCB0byBhIHByb3BlcnR5IG9uIHRoZQogIHRlbXBsYXRlJ3MgY3VycmVu
        dCByZW5kZXJpbmcgY29udGV4dCAobW9zdCB0eXBpY2FsbHkgYSBjb250cm9s
        bGVyIGluc3RhbmNlKS4KCiAgVW5ib3VuZDoKCiAgYGBgaGFuZGxlYmFycwog
        IHt7dGV4dGFyZWEgdmFsdWU9IkxvdHMgb2Ygc3RhdGljIHRleHQgdGhhdCBJ
        U04nVCBib3VuZCJ9fQogIGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZv
        bGxvd2luZyBIVE1MOgoKICBgYGBodG1sCiAgPHRleHRhcmVhIGNsYXNzPSJl
        bWJlci10ZXh0LWFyZWEiPgogICAgTG90cyBvZiBzdGF0aWMgdGV4dCB0aGF0
        IElTTidUIGJvdW5kCiAgPC90ZXh0YXJlYT4KICBgYGAKCiAgQm91bmQ6Cgog
        IEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSwgdGhlIGB3cml0dGVuV29yZHNg
        IHByb3BlcnR5IG9uIGBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyYAogIHdp
        bGwgYmUgdXBkYXRlZCBsaXZlIGFzIHRoZSB1c2VyIHR5cGVzICdMb3RzIG9m
        IHRleHQgdGhhdCBJUyBib3VuZCcgaW50bwogIHRoZSB0ZXh0IGFyZWEgb2Yg
        dGhlaXIgYnJvd3NlcidzIHdpbmRvdy4KCiAgYGBgamF2YXNjcmlwdAogIEFw
        cC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4
        dGVuZCh7CiAgICB3cml0dGVuV29yZHM6ICJMb3RzIG9mIHRleHQgdGhhdCBJ
        UyBib3VuZCIKICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7dGV4
        dGFyZWEgdmFsdWU9d3JpdHRlbldvcmRzfX0KICBgYGAKCiAgIFdvdWxkIHJl
        c3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8dGV4
        dGFyZWEgY2xhc3M9ImVtYmVyLXRleHQtYXJlYSI+CiAgICBMb3RzIG9mIHRl
        eHQgdGhhdCBJUyBib3VuZAogIDwvdGV4dGFyZWE+CiAgYGBgCgogIElmIHlv
        dSB3YW50ZWQgYSBvbmUgd2F5IGJpbmRpbmcgYmV0d2VlbiB0aGUgdGV4dCBh
        cmVhIGFuZCBhIGRpdiB0YWcKICBzb21ld2hlcmUgZWxzZSBvbiB5b3VyIHNj
        cmVlbiwgeW91IGNvdWxkIHVzZSBgRW1iZXIuY29tcHV0ZWQub25lV2F5YDoK
        CiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIg
        PSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICB3cml0dGVuV29yZHM6
        ICJMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZCIsCiAgICBvdXRwdXRXcml0
        dGVuV29yZHM6IEVtYmVyLmNvbXB1dGVkLm9uZVdheSgid3JpdHRlbldvcmRz
        IikKICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7dGV4dGFyZWEg
        dmFsdWU9d3JpdHRlbldvcmRzfX0KCiAgPGRpdj4KICAgIHt7b3V0cHV0V3Jp
        dHRlbldvcmRzfX0KICA8L2Rpdj4KICBgYGAKCiAgV291bGQgcmVzdWx0IGlu
        IHRoZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDx0ZXh0YXJlYSBj
        bGFzcz0iZW1iZXItdGV4dC1hcmVhIj4KICAgIExvdHMgb2YgdGV4dCB0aGF0
        IElTIGJvdW5kCiAgPC90ZXh0YXJlYT4KCiAgPC0tIHRoZSBmb2xsb3dpbmcg
        ZGl2IHdpbGwgYmUgdXBkYXRlZCBpbiByZWFsIHRpbWUgYXMgeW91IHR5cGUg
        LS0+CgogIDxkaXY+CiAgICBMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZAog
        IDwvZGl2PgogIGBgYAoKICBGaW5hbGx5LCB0aGlzIGV4YW1wbGUgcmVhbGx5
        IHNob3dzIHRoZSBwb3dlciBhbmQgZWFzZSBvZiBFbWJlciB3aGVuIHR3bwog
        IHByb3BlcnRpZXMgYXJlIGJvdW5kIHRvIGVhY2hvdGhlciB2aWEgYEVtYmVy
        LmNvbXB1dGVkLmFsaWFzYC4gVHlwZSBpbnRvCiAgZWl0aGVyIHRleHQgYXJl
        YSBib3ggYW5kIHRoZXknbGwgYm90aCBzdGF5IGluIHN5bmMuIE5vdGUgdGhh
        dAogIGBFbWJlci5jb21wdXRlZC5hbGlhc2AgY29zdHMgbW9yZSBpbiB0ZXJt
        cyBvZiBwZXJmb3JtYW5jZSwgc28gb25seSB1c2UgaXQgd2hlbgogIHlvdXIg
        cmVhbGx5IGJpbmRpbmcgaW4gYm90aCBkaXJlY3Rpb25zOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNv
        bnRyb2xsZXIuZXh0ZW5kKHsKICAgIHdyaXR0ZW5Xb3JkczogIkxvdHMgb2Yg
        dGV4dCB0aGF0IElTIGJvdW5kIiwKICAgIHR3b1dheVdyaXR0ZW5Xb3Jkczog
        RW1iZXIuY29tcHV0ZWQuYWxpYXMoIndyaXR0ZW5Xb3JkcyIpCiAgfSk7CiAg
        YGBgCgogIGBgYGhhbmRsZWJhcnMKICB7e3RleHRhcmVhIHZhbHVlPXdyaXR0
        ZW5Xb3Jkc319CiAge3t0ZXh0YXJlYSB2YWx1ZT10d29XYXlXcml0dGVuV29y
        ZHN9fQogIGBgYAoKICBgYGBodG1sCiAgPHRleHRhcmVhIGlkPSJlbWJlcjEi
        IGNsYXNzPSJlbWJlci10ZXh0LWFyZWEiPgogICAgTG90cyBvZiB0ZXh0IHRo
        YXQgSVMgYm91bmQKICA8L3RleHRhcmVhPgoKICA8LS0gYm90aCB1cGRhdGVk
        IGluIHJlYWwgdGltZSAtLT4KCiAgPHRleHRhcmVhIGlkPSJlbWJlcjIiIGNs
        YXNzPSJlbWJlci10ZXh0LWFyZWEiPgogICAgTG90cyBvZiB0ZXh0IHRoYXQg
        SVMgYm91bmQKICA8L3RleHRhcmVhPgogIGBgYAoKICAjIyBFeHRlbnNpb24K
        CiAgSW50ZXJuYWxseSwgYHt7dGV4dGFyZWF9fWAgY3JlYXRlcyBhbiBpbnN0
        YW5jZSBvZiBgRW1iZXIuVGV4dEFyZWFgLCBwYXNzaW5nCiAgYXJndW1lbnRz
        IGZyb20gdGhlIGhlbHBlciB0byBgRW1iZXIuVGV4dEFyZWFgJ3MgYGNyZWF0
        ZWAgbWV0aG9kLiBZb3UgY2FuCiAgZXh0ZW5kIHRoZSBjYXBhYmlsaXRpZXMg
        b2YgdGV4dCBhcmVhcyBpbiB5b3VyIGFwcGxpY2F0aW9uIGJ5IHJlb3Blbmlu
        ZyB0aGlzCiAgY2xhc3MuIEZvciBleGFtcGxlLCBpZiB5b3UgYXJlIGRlcGxv
        eWluZyB0byBicm93c2VycyB3aGVyZSB0aGUgYHJlcXVpcmVkYAogIGF0dHJp
        YnV0ZSBpcyB1c2VkLCB5b3UgY2FuIGdsb2JhbGx5IGFkZCBzdXBwb3J0IGZv
        ciB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUKICBvbiBhbGwge3t0ZXh0YXJl
        YX19J3MnIGluIHlvdXIgYXBwIGJ5IHJlb3BlbmluZyBgRW1iZXIuVGV4dEFy
        ZWFgIG9yCiAgYEVtYmVyLlRleHRTdXBwb3J0YCBhbmQgYWRkaW5nIGl0IHRv
        IHRoZSBgYXR0cmlidXRlQmluZGluZ3NgIGNvbmNhdGVuYXRlZAogIHByb3Bl
        cnR5OgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuVGV4dEFyZWEucmVvcGVu
        KHsKICAgIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ3JlcXVpcmVkJ10KICB9KTsK
        ICBgYGAKCiAgS2VlcCBpbiBtaW5kIHdoZW4gd3JpdGluZyBgRW1iZXIuVGV4
        dEFyZWFgIHN1YmNsYXNzZXMgdGhhdCBgRW1iZXIuVGV4dEFyZWFgCiAgaXRz
        ZWxmIGV4dGVuZHMgYEVtYmVyLkNvbXBvbmVudGAsIG1lYW5pbmcgdGhhdCBp
        dCBkb2VzIE5PVCBpbmhlcml0CiAgdGhlIGBjb250cm9sbGVyYCBvZiB0aGUg
        cGFyZW50IHZpZXcuCgogIFNlZSBtb3JlIGFib3V0IFtFbWJlciBjb21wb25l
        bnRzXShhcGkvY2xhc3Nlcy9FbWJlci5Db21wb25lbnQuaHRtbCkKCiAgQG1l
        dGhvZCB0ZXh0YXJlYQogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJz
        CiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiovCkVtYmVyLkhhbmRsZWJhcnMu
        cmVnaXN0ZXJIZWxwZXIoJ3RleHRhcmVhJywgZnVuY3Rpb24ob3B0aW9ucykg
        ewogIEVtYmVyLmFzc2VydCgnWW91IGNhbiBvbmx5IHBhc3MgYXR0cmlidXRl
        cyB0byB0aGUgYHRleHRhcmVhYCBoZWxwZXIsIG5vdCBhcmd1bWVudHMnLCBh
        cmd1bWVudHMubGVuZ3RoIDwgMik7CgogIHZhciBoYXNoID0gb3B0aW9ucy5o
        YXNoLAogICAgICB0eXBlcyA9IG9wdGlvbnMuaGFzaFR5cGVzOwoKICByZXR1
        cm4gRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLCBF
        bWJlci5UZXh0QXJlYSwgb3B0aW9ucyk7Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewpFbWJlci5Db21wb25lbnRMb29rdXAgPSBFbWJlci5PYmplY3Qu
        ZXh0ZW5kKHsKICBsb29rdXBGYWN0b3J5OiBmdW5jdGlvbihuYW1lLCBjb250
        YWluZXIpIHsKCiAgICBjb250YWluZXIgPSBjb250YWluZXIgfHwgdGhpcy5j
        b250YWluZXI7CgogICAgdmFyIGZ1bGxOYW1lID0gJ2NvbXBvbmVudDonICsg
        bmFtZSwKICAgICAgICB0ZW1wbGF0ZUZ1bGxOYW1lID0gJ3RlbXBsYXRlOmNv
        bXBvbmVudHMvJyArIG5hbWUsCiAgICAgICAgdGVtcGxhdGVSZWdpc3RlcmVk
        ID0gY29udGFpbmVyICYmIGNvbnRhaW5lci5oYXModGVtcGxhdGVGdWxsTmFt
        ZSk7CgogICAgaWYgKHRlbXBsYXRlUmVnaXN0ZXJlZCkgewogICAgICBjb250
        YWluZXIuaW5qZWN0aW9uKGZ1bGxOYW1lLCAnbGF5b3V0JywgdGVtcGxhdGVG
        dWxsTmFtZSk7CiAgICB9CgogICAgdmFyIENvbXBvbmVudCA9IGNvbnRhaW5l
        ci5sb29rdXBGYWN0b3J5KGZ1bGxOYW1lKTsKCiAgICAvLyBPbmx5IHRyZWF0
        IGFzIGEgY29tcG9uZW50IGlmIGVpdGhlciB0aGUgY29tcG9uZW50CiAgICAv
        LyBvciBhIHRlbXBsYXRlIGhhcyBiZWVuIHJlZ2lzdGVyZWQuCiAgICBpZiAo
        dGVtcGxhdGVSZWdpc3RlcmVkIHx8IENvbXBvbmVudCkgewogICAgICBpZiAo
        IUNvbXBvbmVudCkgewogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcihmdWxs
        TmFtZSwgRW1iZXIuQ29tcG9uZW50KTsKICAgICAgICBDb21wb25lbnQgPSBj
        b250YWluZXIubG9va3VwRmFjdG9yeShmdWxsTmFtZSk7CiAgICAgIH0KICAg
        ICAgcmV0dXJuIENvbXBvbmVudDsKICAgIH0KICB9Cn0pOwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgSGFuZGxlYmFycyAqLwovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCi8q
        KgogIEBwcml2YXRlCgogIEZpbmQgdGVtcGxhdGVzIHN0b3JlZCBpbiB0aGUg
        aGVhZCB0YWcgYXMgc2NyaXB0IHRhZ3MgYW5kIG1ha2UgdGhlbSBhdmFpbGFi
        bGUKICB0byBgRW1iZXIuQ29yZVZpZXdgIGluIHRoZSBnbG9iYWwgYEVtYmVy
        LlRFTVBMQVRFU2Agb2JqZWN0LiBUaGlzIHdpbGwgYmUgcnVuCiAgYXMgYXMg
        alF1ZXJ5IERPTS1yZWFkeSBjYWxsYmFjay4KCiAgU2NyaXB0IHRhZ3Mgd2l0
        aCBgdGV4dC94LWhhbmRsZWJhcnNgIHdpbGwgYmUgY29tcGlsZWQKICB3aXRo
        IEVtYmVyJ3MgSGFuZGxlYmFycyBhbmQgYXJlIHN1aXRhYmxlIGZvciB1c2Ug
        YXMgYSB2aWV3J3MgdGVtcGxhdGUuCiAgVGhvc2Ugd2l0aCB0eXBlIGB0ZXh0
        L3gtcmF3LWhhbmRsZWJhcnNgIHdpbGwgYmUgY29tcGlsZWQgd2l0aCByZWd1
        bGFyCiAgSGFuZGxlYmFycyBhbmQgYXJlIHN1aXRhYmxlIGZvciB1c2UgaW4g
        dmlld3MnIGNvbXB1dGVkIHByb3BlcnRpZXMuCgogIEBtZXRob2QgYm9vdHN0
        cmFwCiAgQGZvciBFbWJlci5IYW5kbGViYXJzCiAgQHN0YXRpYwogIEBwYXJh
        bSBjdHgKKi8KRW1iZXIuSGFuZGxlYmFycy5ib290c3RyYXAgPSBmdW5jdGlv
        bihjdHgpIHsKICB2YXIgc2VsZWN0b3JzID0gJ3NjcmlwdFt0eXBlPSJ0ZXh0
        L3gtaGFuZGxlYmFycyJdLCBzY3JpcHRbdHlwZT0idGV4dC94LXJhdy1oYW5k
        bGViYXJzIl0nOwoKICBFbWJlci4kKHNlbGVjdG9ycywgY3R4KQogICAgLmVh
        Y2goZnVuY3Rpb24oKSB7CiAgICAvLyBHZXQgYSByZWZlcmVuY2UgdG8gdGhl
        IHNjcmlwdCB0YWcKICAgIHZhciBzY3JpcHQgPSBFbWJlci4kKHRoaXMpOwoK
        ICAgIHZhciBjb21waWxlID0gKHNjcmlwdC5hdHRyKCd0eXBlJykgPT09ICd0
        ZXh0L3gtcmF3LWhhbmRsZWJhcnMnKSA/CiAgICAgICAgICAgICAgICAgIEVt
        YmVyLiQucHJveHkoSGFuZGxlYmFycy5jb21waWxlLCBIYW5kbGViYXJzKSA6
        CiAgICAgICAgICAgICAgICAgIEVtYmVyLiQucHJveHkoRW1iZXIuSGFuZGxl
        YmFycy5jb21waWxlLCBFbWJlci5IYW5kbGViYXJzKSwKICAgICAgLy8gR2V0
        IHRoZSBuYW1lIG9mIHRoZSBzY3JpcHQsIHVzZWQgYnkgRW1iZXIuVmlldydz
        IHRlbXBsYXRlTmFtZSBwcm9wZXJ0eS4KICAgICAgLy8gRmlyc3QgbG9vayBm
        b3IgZGF0YS10ZW1wbGF0ZS1uYW1lIGF0dHJpYnV0ZSwgdGhlbiBmYWxsIGJh
        Y2sgdG8gaXRzCiAgICAgIC8vIGlkIGlmIG5vIG5hbWUgaXMgZm91bmQuCiAg
        ICAgIHRlbXBsYXRlTmFtZSA9IHNjcmlwdC5hdHRyKCdkYXRhLXRlbXBsYXRl
        LW5hbWUnKSB8fCBzY3JpcHQuYXR0cignaWQnKSB8fCAnYXBwbGljYXRpb24n
        LAogICAgICB0ZW1wbGF0ZSA9IGNvbXBpbGUoc2NyaXB0Lmh0bWwoKSk7Cgog
        ICAgLy8gQ2hlY2sgaWYgdGVtcGxhdGUgb2Ygc2FtZSBuYW1lIGFscmVhZHkg
        ZXhpc3RzCiAgICBpZiAoRW1iZXIuVEVNUExBVEVTW3RlbXBsYXRlTmFtZV0g
        IT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        J1RlbXBsYXRlIG5hbWVkICInICsgdGVtcGxhdGVOYW1lICArICciIGFscmVh
        ZHkgZXhpc3RzLicpOwogICAgfQoKICAgIC8vIEZvciB0ZW1wbGF0ZXMgd2hp
        Y2ggaGF2ZSBhIG5hbWUsIHdlIHNhdmUgdGhlbSBhbmQgdGhlbiByZW1vdmUg
        dGhlbSBmcm9tIHRoZSBET00KICAgIEVtYmVyLlRFTVBMQVRFU1t0ZW1wbGF0
        ZU5hbWVdID0gdGVtcGxhdGU7CgogICAgLy8gUmVtb3ZlIHNjcmlwdCB0YWcg
        ZnJvbSBET00KICAgIHNjcmlwdC5yZW1vdmUoKTsKICB9KTsKfTsKCmZ1bmN0
        aW9uIGJvb3RzdHJhcCgpIHsKICBFbWJlci5IYW5kbGViYXJzLmJvb3RzdHJh
        cCggRW1iZXIuJChkb2N1bWVudCkgKTsKfQoKZnVuY3Rpb24gcmVnaXN0ZXJD
        b21wb25lbnRzKGNvbnRhaW5lcikgewogIHZhciB0ZW1wbGF0ZXMgPSBFbWJl
        ci5URU1QTEFURVMsIG1hdGNoOwogIGlmICghdGVtcGxhdGVzKSB7IHJldHVy
        bjsgfQoKICBmb3IgKHZhciBwcm9wIGluIHRlbXBsYXRlcykgewogICAgaWYg
        KG1hdGNoID0gcHJvcC5tYXRjaCgvXmNvbXBvbmVudHNcLyguKikkLykpIHsK
        ICAgICAgcmVnaXN0ZXJDb21wb25lbnQoY29udGFpbmVyLCBtYXRjaFsxXSk7
        CiAgICB9CiAgfQp9CgoKZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQoY29u
        dGFpbmVyLCBuYW1lKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgcHJvdmlkZWQg
        YSB0ZW1wbGF0ZSBuYW1lZCAnY29tcG9uZW50cy8iICsgbmFtZSArICInLCBi
        dXQgY3VzdG9tIGNvbXBvbmVudHMgbXVzdCBpbmNsdWRlIGEgJy0nIiwgbmFt
        ZS5tYXRjaCgvLS8pKTsKCiAgdmFyIGZ1bGxOYW1lID0gJ2NvbXBvbmVudDon
        ICsgbmFtZTsKCiAgY29udGFpbmVyLmluamVjdGlvbihmdWxsTmFtZSwgJ2xh
        eW91dCcsICd0ZW1wbGF0ZTpjb21wb25lbnRzLycgKyBuYW1lKTsKCiAgdmFy
        IENvbXBvbmVudCA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KGZ1bGxOYW1l
        KTsKCiAgaWYgKCFDb21wb25lbnQpIHsKICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cihmdWxsTmFtZSwgRW1iZXIuQ29tcG9uZW50KTsKICAgIENvbXBvbmVudCA9
        IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KGZ1bGxOYW1lKTsKICB9CgogIEVt
        YmVyLkhhbmRsZWJhcnMuaGVscGVyKG5hbWUsIENvbXBvbmVudCk7Cn0KCmZ1
        bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50TG9va3VwKGNvbnRhaW5lcikgewog
        IGNvbnRhaW5lci5yZWdpc3RlcignY29tcG9uZW50LWxvb2t1cDptYWluJywg
        RW1iZXIuQ29tcG9uZW50TG9va3VwKTsKfQoKLyoKICBXZSB0aWUgdGhpcyB0
        byBhcHBsaWNhdGlvbi5sb2FkIHRvIGVuc3VyZSB0aGF0IHdlJ3ZlIGF0IGxl
        YXN0CiAgYXR0ZW1wdGVkIHRvIGJvb3RzdHJhcCBhdCB0aGUgcG9pbnQgdGhh
        dCB0aGUgYXBwbGljYXRpb24gaXMgbG9hZGVkLgoKICBXZSBhbHNvIHRpZSB0
        aGlzIHRvIGRvY3VtZW50IHJlYWR5IHNpbmNlIHdlJ3JlIGd1YXJhbnRlZWQg
        dGhhdCBhbGwKICB0aGUgaW5saW5lIHRlbXBsYXRlcyBhcmUgcHJlc2VudCBh
        dCB0aGlzIHBvaW50LgoKICBUaGVyZSdzIG5vIGhhcm0gdG8gcnVubmluZyB0
        aGlzIHR3aWNlLCBzaW5jZSB3ZSByZW1vdmUgdGhlIHRlbXBsYXRlcwogIGZy
        b20gdGhlIERPTSBhZnRlciBwcm9jZXNzaW5nLgoqLwoKRW1iZXIub25Mb2Fk
        KCdFbWJlci5BcHBsaWNhdGlvbicsIGZ1bmN0aW9uKEFwcGxpY2F0aW9uKSB7
        CiAgQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogJ2RvbVRl
        bXBsYXRlcycsCiAgICBpbml0aWFsaXplOiBib290c3RyYXAKICB9KTsKCiAg
        CiAgICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7CiAgICAgIG5hbWU6ICdy
        ZWdpc3RlckNvbXBvbmVudExvb2t1cCcsCiAgICAgIGFmdGVyOiAnZG9tVGVt
        cGxhdGVzJywKICAgICAgaW5pdGlhbGl6ZTogcmVnaXN0ZXJDb21wb25lbnRM
        b29rdXAKICAgIH0pOwogIH0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKRW1iZXIgSGFuZGxlYmFycwoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLWhhbmRsZWJhcnMKQHJlcXVpcmVzIGVtYmVyLXZpZXdzCiovCgpF
        bWJlci5ydW5Mb2FkSG9va3MoJ0VtYmVyLkhhbmRsZWJhcnMnLCBFbWJlci5I
        YW5kbGViYXJzKTsKCn0pKCk7CgooZnVuY3Rpb24oKSB7CmRlZmluZSgicm91
        dGUtcmVjb2duaXplciIsCiAgW10sCiAgZnVuY3Rpb24oKSB7CiAgICAidXNl
        IHN0cmljdCI7CiAgICB2YXIgc3BlY2lhbHMgPSBbCiAgICAgICcvJywgJy4n
        LCAnKicsICcrJywgJz8nLCAnfCcsCiAgICAgICcoJywgJyknLCAnWycsICdd
        JywgJ3snLCAnfScsICdcXCcKICAgIF07CgogICAgdmFyIGVzY2FwZVJlZ2V4
        ID0gbmV3IFJlZ0V4cCgnKFxcJyArIHNwZWNpYWxzLmpvaW4oJ3xcXCcpICsg
        JyknLCAnZycpOwoKICAgIC8vIEEgU2VnbWVudCByZXByZXNlbnRzIGEgc2Vn
        bWVudCBpbiB0aGUgb3JpZ2luYWwgcm91dGUgZGVzY3JpcHRpb24uCiAgICAv
        LyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFu
        ZCBgcmVnZXhgIG1ldGhvZC4KICAgIC8vCiAgICAvLyBUaGUgYGVhY2hDaGFy
        YCBtZXRob2QgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCBvbmUgb3IgbW9y
        ZSBjaGFyYWN0ZXIKICAgIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3Rl
        ciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0CiAg
        ICAvLyBjaGFyYWN0ZXJzLgogICAgLy8KICAgIC8vIFRoZSBgcmVnZXhgIG1l
        dGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50
        LiBJZiB0aGUKICAgIC8vIHNlZ21lbnQgaXMgYSBkeW5hbWljIG9mIHN0YXIg
        c2VnbWVudCwgdGhlIHJlZ2V4IGZyYWdtZW50IGFsc28gaW5jbHVkZXMKICAg
        IC8vIGEgY2FwdHVyZS4KICAgIC8vCiAgICAvLyBBIGNoYXJhY3RlciBzcGVj
        aWZpY2F0aW9uIGNvbnRhaW5zOgogICAgLy8KICAgIC8vICogYHZhbGlkQ2hh
        cnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFj
        dGVycywgb3IKICAgIC8vICogYGludmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdp
        dGggYSBsaXN0IG9mIGFsbCBpbnZhbGlkIGNoYXJhY3RlcnMKICAgIC8vICog
        YHJlcGVhdGA6IHRydWUgaWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9u
        IGNhbiByZXBlYXQKCiAgICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmlu
        ZykgeyB0aGlzLnN0cmluZyA9IHN0cmluZzsgfQogICAgU3RhdGljU2VnbWVu
        dC5wcm90b3R5cGUgPSB7CiAgICAgIGVhY2hDaGFyOiBmdW5jdGlvbihjYWxs
        YmFjaykgewogICAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZywgY2hh
        cjsKCiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXN0cmluZy5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgICAgICBjaGFyID0gc3RyaW5nLmNoYXJBdChpKTsK
        ICAgICAgICAgIGNhbGxiYWNrKHsgdmFsaWRDaGFyczogY2hhciB9KTsKICAg
        ICAgICB9CiAgICAgIH0sCgogICAgICByZWdleDogZnVuY3Rpb24oKSB7CiAg
        ICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoZXNjYXBlUmVnZXgs
        ICdcXCQxJyk7CiAgICAgIH0sCgogICAgICBnZW5lcmF0ZTogZnVuY3Rpb24o
        KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nOwogICAgICB9CiAgICB9
        OwoKICAgIGZ1bmN0aW9uIER5bmFtaWNTZWdtZW50KG5hbWUpIHsgdGhpcy5u
        YW1lID0gbmFtZTsgfQogICAgRHluYW1pY1NlZ21lbnQucHJvdG90eXBlID0g
        ewogICAgICBlYWNoQ2hhcjogZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAg
        ICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogIi8iLCByZXBlYXQ6IHRydWUg
        fSk7CiAgICAgIH0sCgogICAgICByZWdleDogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgcmV0dXJuICIoW14vXSspIjsKICAgICAgfSwKCiAgICAgIGdlbmVyYXRl
        OiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICByZXR1cm4gcGFyYW1zW3Ro
        aXMubmFtZV07CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gU3RhclNl
        Z21lbnQobmFtZSkgeyB0aGlzLm5hbWUgPSBuYW1lOyB9CiAgICBTdGFyU2Vn
        bWVudC5wcm90b3R5cGUgPSB7CiAgICAgIGVhY2hDaGFyOiBmdW5jdGlvbihj
        YWxsYmFjaykgewogICAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiAi
        IiwgcmVwZWF0OiB0cnVlIH0pOwogICAgICB9LAoKICAgICAgcmVnZXg6IGZ1
        bmN0aW9uKCkgewogICAgICAgIHJldHVybiAiKC4rKSI7CiAgICAgIH0sCgog
        ICAgICBnZW5lcmF0ZTogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgcmV0
        dXJuIHBhcmFtc1t0aGlzLm5hbWVdOwogICAgICB9CiAgICB9OwoKICAgIGZ1
        bmN0aW9uIEVwc2lsb25TZWdtZW50KCkge30KICAgIEVwc2lsb25TZWdtZW50
        LnByb3RvdHlwZSA9IHsKICAgICAgZWFjaENoYXI6IGZ1bmN0aW9uKCkge30s
        CiAgICAgIHJlZ2V4OiBmdW5jdGlvbigpIHsgcmV0dXJuICIiOyB9LAogICAg
        ICBnZW5lcmF0ZTogZnVuY3Rpb24oKSB7IHJldHVybiAiIjsgfQogICAgfTsK
        CiAgICBmdW5jdGlvbiBwYXJzZShyb3V0ZSwgbmFtZXMsIHR5cGVzKSB7CiAg
        ICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBh
        ICIvIi4gUmVjb2duaXRpb24gd2lsbAogICAgICAvLyBhbHNvIG5vcm1hbGl6
        ZS4KICAgICAgaWYgKHJvdXRlLmNoYXJBdCgwKSA9PT0gIi8iKSB7IHJvdXRl
        ID0gcm91dGUuc3Vic3RyKDEpOyB9CgogICAgICB2YXIgc2VnbWVudHMgPSBy
        b3V0ZS5zcGxpdCgiLyIpLCByZXN1bHRzID0gW107CgogICAgICBmb3IgKHZh
        ciBpPTAsIGw9c2VnbWVudHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAg
        IHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sIG1hdGNoOwoKICAgICAgICBp
        ZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXlwvXSspJC8pKSB7CiAg
        ICAgICAgICByZXN1bHRzLnB1c2gobmV3IER5bmFtaWNTZWdtZW50KG1hdGNo
        WzFdKSk7CiAgICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTsKICAgICAg
        ICAgIHR5cGVzLmR5bmFtaWNzKys7CiAgICAgICAgfSBlbHNlIGlmIChtYXRj
        aCA9IHNlZ21lbnQubWF0Y2goL15cKihbXlwvXSspJC8pKSB7CiAgICAgICAg
        ICByZXN1bHRzLnB1c2gobmV3IFN0YXJTZWdtZW50KG1hdGNoWzFdKSk7CiAg
        ICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTsKICAgICAgICAgIHR5cGVz
        LnN0YXJzKys7CiAgICAgICAgfSBlbHNlIGlmKHNlZ21lbnQgPT09ICIiKSB7
        CiAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IEVwc2lsb25TZWdtZW50KCkp
        OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHRzLnB1c2gobmV3
        IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpOwogICAgICAgICAgdHlwZXMuc3Rh
        dGljcysrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3Vs
        dHM7CiAgICB9CgogICAgLy8gQSBTdGF0ZSBoYXMgYSBjaGFyYWN0ZXIgc3Bl
        Y2lmaWNhdGlvbiBhbmQgKGBjaGFyU3BlY2ApIGFuZCBhIGxpc3Qgb2YgcG9z
        c2libGUKICAgIC8vIHN1YnNlcXVlbnQgc3RhdGVzIChgbmV4dFN0YXRlc2Ap
        LgogICAgLy8KICAgIC8vIElmIGEgU3RhdGUgaXMgYW4gYWNjZXB0aW5nIHN0
        YXRlLCBpdCB3aWxsIGFsc28gaGF2ZSBzZXZlcmFsIGFkZGl0aW9uYWwKICAg
        IC8vIHByb3BlcnRpZXM6CiAgICAvLwogICAgLy8gKiBgcmVnZXhgOiBBIHJl
        Z3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgdG8gZXh0cmFjdCBwYXJh
        bWV0ZXJzIGZyb20gcGF0aHMKICAgIC8vICAgdGhhdCByZWFjaGVkIHRoaXMg
        YWNjZXB0aW5nIHN0YXRlLgogICAgLy8gKiBgaGFuZGxlcnNgOiBJbmZvcm1h
        dGlvbiBvbiBob3cgdG8gY29udmVydCB0aGUgbGlzdCBvZiBjYXB0dXJlcyBp
        bnRvIGNhbGxzCiAgICAvLyAgIHRvIHJlZ2lzdGVyZWQgaGFuZGxlcnMgd2l0
        aCB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlcnMKICAgIC8vICogYHR5cGVzYDog
        SG93IG1hbnkgc3RhdGljLCBkeW5hbWljIG9yIHN0YXIgc2VnbWVudHMgaW4g
        dGhpcyByb3V0ZS4gVXNlZCB0bwogICAgLy8gICBkZWNpZGUgd2hpY2ggcm91
        dGUgdG8gdXNlIGlmIG11bHRpcGxlIHJlZ2lzdGVyZWQgcm91dGVzIG1hdGNo
        IGEgcGF0aC4KICAgIC8vCiAgICAvLyBDdXJyZW50bHksIFN0YXRlIGlzIGlt
        cGxlbWVudGVkIG5haXZlbHkgYnkgbG9vcGluZyBvdmVyIGBuZXh0U3RhdGVz
        YCBhbmQKICAgIC8vIGNvbXBhcmluZyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0
        aW9uIGFnYWluc3QgYSBjaGFyYWN0ZXIuIEEgbW9yZSBlZmZpY2llbnQKICAg
        IC8vIGltcGxlbWVudGF0aW9uIHdvdWxkIHVzZSBhIGhhc2ggb2Yga2V5cyBw
        b2ludGluZyBhdCBvbmUgb3IgbW9yZSBuZXh0IHN0YXRlcy4KCiAgICBmdW5j
        dGlvbiBTdGF0ZShjaGFyU3BlYykgewogICAgICB0aGlzLmNoYXJTcGVjID0g
        Y2hhclNwZWM7CiAgICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdOwogICAgfQoK
        ICAgIFN0YXRlLnByb3RvdHlwZSA9IHsKICAgICAgZ2V0OiBmdW5jdGlvbihj
        aGFyU3BlYykgewogICAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0
        U3RhdGVzOwoKICAgICAgICBmb3IgKHZhciBpPTAsIGw9bmV4dFN0YXRlcy5s
        ZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICB2YXIgY2hpbGQgPSBuZXh0
        U3RhdGVzW2ldOwoKICAgICAgICAgIHZhciBpc0VxdWFsID0gY2hpbGQuY2hh
        clNwZWMudmFsaWRDaGFycyA9PT0gY2hhclNwZWMudmFsaWRDaGFyczsKICAg
        ICAgICAgIGlzRXF1YWwgPSBpc0VxdWFsICYmIGNoaWxkLmNoYXJTcGVjLmlu
        dmFsaWRDaGFycyA9PT0gY2hhclNwZWMuaW52YWxpZENoYXJzOwoKICAgICAg
        ICAgIGlmIChpc0VxdWFsKSB7IHJldHVybiBjaGlsZDsgfQogICAgICAgIH0K
        ICAgICAgfSwKCiAgICAgIHB1dDogZnVuY3Rpb24oY2hhclNwZWMpIHsKICAg
        ICAgICB2YXIgc3RhdGU7CgogICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIg
        c3BlY2lmaWNhdGlvbiBhbHJlYWR5IGV4aXN0cyBpbiBhIGNoaWxkIG9mIHRo
        ZSBjdXJyZW50CiAgICAgICAgLy8gc3RhdGUsIGp1c3QgcmV0dXJuIHRoYXQg
        c3RhdGUuCiAgICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMp
        KSB7IHJldHVybiBzdGF0ZTsgfQoKICAgICAgICAvLyBNYWtlIGEgbmV3IHN0
        YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWMKICAgICAgICBzdGF0ZSA9IG5l
        dyBTdGF0ZShjaGFyU3BlYyk7CgogICAgICAgIC8vIEluc2VydCB0aGUgbmV3
        IHN0YXRlIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgc3RhdGUKICAgICAg
        ICB0aGlzLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7CgogICAgICAgIC8vIElm
        IHRoaXMgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gcmVwZWF0cywgaW5zZXJ0
        IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZAogICAgICAgIC8vIG9mIGl0c2Vs
        Zi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgdHJpZ2dlciBhbiBpbmZpbml0
        ZSBsb29wIGJlY2F1c2UgZWFjaAogICAgICAgIC8vIHRyYW5zaXRpb24gZHVy
        aW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLgogICAgICAg
        IGlmIChjaGFyU3BlYy5yZXBlYXQpIHsKICAgICAgICAgIHN0YXRlLm5leHRT
        dGF0ZXMucHVzaChzdGF0ZSk7CiAgICAgICAgfQoKICAgICAgICAvLyBSZXR1
        cm4gdGhlIG5ldyBzdGF0ZQogICAgICAgIHJldHVybiBzdGF0ZTsKICAgICAg
        fSwKCiAgICAgIC8vIEZpbmQgYSBsaXN0IG9mIGNoaWxkIHN0YXRlcyBtYXRj
        aGluZyB0aGUgbmV4dCBjaGFyYWN0ZXIKICAgICAgbWF0Y2g6IGZ1bmN0aW9u
        KGNoYXIpIHsKICAgICAgICAvLyBERUJVRyAiUHJvY2Vzc2luZyBgIiArIGNo
        YXIgKyAiYDoiCiAgICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRT
        dGF0ZXMsCiAgICAgICAgICAgIGNoaWxkLCBjaGFyU3BlYywgY2hhcnM7Cgog
        ICAgICAgIC8vIERFQlVHICIgICIgKyBkZWJ1Z1N0YXRlKHRoaXMpCiAgICAg
        ICAgdmFyIHJldHVybmVkID0gW107CgogICAgICAgIGZvciAodmFyIGk9MCwg
        bD1uZXh0U3RhdGVzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIGNo
        aWxkID0gbmV4dFN0YXRlc1tpXTsKCiAgICAgICAgICBjaGFyU3BlYyA9IGNo
        aWxkLmNoYXJTcGVjOwoKICAgICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0g
        Y2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7CiAgICAg
        ICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoYXIpICE9PSAtMSkgeyByZXR1
        cm5lZC5wdXNoKGNoaWxkKTsgfQogICAgICAgICAgfSBlbHNlIGlmICh0eXBl
        b2YgKGNoYXJzID0gY2hhclNwZWMuaW52YWxpZENoYXJzKSAhPT0gJ3VuZGVm
        aW5lZCcpIHsKICAgICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2hhcikg
        PT09IC0xKSB7IHJldHVybmVkLnB1c2goY2hpbGQpOyB9CiAgICAgICAgICB9
        CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmV0dXJuZWQ7CiAgICAgIH0K
        CiAgICAgIC8qKiBJRiBERUJVRwogICAgICAsIGRlYnVnOiBmdW5jdGlvbigp
        IHsKICAgICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLAogICAg
        ICAgICAgICBkZWJ1ZyA9ICJbIiwKICAgICAgICAgICAgY2hhcnMgPSBjaGFy
        U3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFyczsKCiAg
        ICAgICAgaWYgKGNoYXJTcGVjLmludmFsaWRDaGFycykgeyBkZWJ1ZyArPSAi
        XiI7IH0KICAgICAgICBkZWJ1ZyArPSBjaGFyczsKICAgICAgICBkZWJ1ZyAr
        PSAiXSI7CgogICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcg
        Kz0gIisiOyB9CgogICAgICAgIHJldHVybiBkZWJ1ZzsKICAgICAgfQogICAg
        ICBFTkQgSUYgKiovCiAgICB9OwoKICAgIC8qKiBJRiBERUJVRwogICAgZnVu
        Y3Rpb24gZGVidWcobG9nKSB7CiAgICAgIGNvbnNvbGUubG9nKGxvZyk7CiAg
        ICB9CgogICAgZnVuY3Rpb24gZGVidWdTdGF0ZShzdGF0ZSkgewogICAgICBy
        ZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikgewogICAg
        ICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiAi
        KCAiICsgbi5kZWJ1ZygpICsgIiBbYWNjZXB0aW5nXSApIjsgfQogICAgICAg
        IHJldHVybiAiKCAiICsgbi5kZWJ1ZygpICsgIiA8dGhlbj4gIiArIG4ubmV4
        dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0p
        LmpvaW4oIiBvciAiKSArICIgKSI7CiAgICAgIH0pLmpvaW4oIiwgIikKICAg
        IH0KICAgIEVORCBJRiAqKi8KCiAgICAvLyBUaGlzIGlzIGEgc29tZXdoYXQg
        bmFpdmUgc3RyYXRlZ3ksIGJ1dCBzaG91bGQgd29yayBpbiBhIGxvdCBvZiBj
        YXNlcwogICAgLy8gQSBiZXR0ZXIgc3RyYXRlZ3kgd291bGQgcHJvcGVybHkg
        cmVzb2x2ZSAvcG9zdHMvOmlkL25ldyBhbmQgL3Bvc3RzL2VkaXQvOmlkCiAg
        ICBmdW5jdGlvbiBzb3J0U29sdXRpb25zKHN0YXRlcykgewogICAgICByZXR1
        cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24oYSwgYikgewogICAgICAgIGlmIChh
        LnR5cGVzLnN0YXJzICE9PSBiLnR5cGVzLnN0YXJzKSB7IHJldHVybiBhLnR5
        cGVzLnN0YXJzIC0gYi50eXBlcy5zdGFyczsgfQogICAgICAgIGlmIChhLnR5
        cGVzLmR5bmFtaWNzICE9PSBiLnR5cGVzLmR5bmFtaWNzKSB7IHJldHVybiBh
        LnR5cGVzLmR5bmFtaWNzIC0gYi50eXBlcy5keW5hbWljczsgfQogICAgICAg
        IGlmIChhLnR5cGVzLnN0YXRpY3MgIT09IGIudHlwZXMuc3RhdGljcykgeyBy
        ZXR1cm4gYi50eXBlcy5zdGF0aWNzIC0gYS50eXBlcy5zdGF0aWNzOyB9Cgog
        ICAgICAgIHJldHVybiAwOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlv
        biByZWNvZ25pemVDaGFyKHN0YXRlcywgY2hhcikgewogICAgICB2YXIgbmV4
        dFN0YXRlcyA9IFtdOwoKICAgICAgZm9yICh2YXIgaT0wLCBsPXN0YXRlcy5s
        ZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVz
        W2ldOwoKICAgICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQo
        c3RhdGUubWF0Y2goY2hhcikpOwogICAgICB9CgogICAgICByZXR1cm4gbmV4
        dFN0YXRlczsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kSGFuZGxlcihzdGF0
        ZSwgcGF0aCwgcXVlcnlQYXJhbXMpIHsKICAgICAgdmFyIGhhbmRsZXJzID0g
        c3RhdGUuaGFuZGxlcnMsIHJlZ2V4ID0gc3RhdGUucmVnZXg7CiAgICAgIHZh
        ciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLCBjdXJyZW50Q2FwdHVy
        ZSA9IDE7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgIGZvciAodmFy
        IGk9MCwgbD1oYW5kbGVycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAg
        dmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tpXSwgbmFtZXMgPSBoYW5kbGVyLm5h
        bWVzLCBwYXJhbXMgPSB7fSwKICAgICAgICAgIHdhdGNoZWRRdWVyeVBhcmFt
        cyA9IGhhbmRsZXIucXVlcnlQYXJhbXMgfHwgW10sCiAgICAgICAgICBhY3Rp
        dmVRdWVyeVBhcmFtcyA9IHt9LAogICAgICAgICAgaiwgbTsKCiAgICAgICAg
        Zm9yIChqPTAsIG09bmFtZXMubGVuZ3RoOyBqPG07IGorKykgewogICAgICAg
        ICAgcGFyYW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJl
        KytdOwogICAgICAgIH0KICAgICAgICBmb3IgKGo9MCwgbT13YXRjaGVkUXVl
        cnlQYXJhbXMubGVuZ3RoOyBqIDwgbTsgaisrKSB7CiAgICAgICAgICB2YXIg
        a2V5ID0gd2F0Y2hlZFF1ZXJ5UGFyYW1zW2pdOwogICAgICAgICAgaWYocXVl
        cnlQYXJhbXNba2V5XSl7CiAgICAgICAgICAgIGFjdGl2ZVF1ZXJ5UGFyYW1z
        W2tleV0gPSBxdWVyeVBhcmFtc1trZXldOwogICAgICAgICAgfQogICAgICAg
        IH0KICAgICAgICB2YXIgY3VycmVudFJlc3VsdCA9IHsgaGFuZGxlcjogaGFu
        ZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5h
        bWVzLmxlbmd0aCB9OwogICAgICAgIGlmKHdhdGNoZWRRdWVyeVBhcmFtcyAm
        JiB3YXRjaGVkUXVlcnlQYXJhbXMubGVuZ3RoID4gMCkgewogICAgICAgICAg
        Y3VycmVudFJlc3VsdC5xdWVyeVBhcmFtcyA9IGFjdGl2ZVF1ZXJ5UGFyYW1z
        OwogICAgICAgIH0KICAgICAgICByZXN1bHQucHVzaChjdXJyZW50UmVzdWx0
        KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBm
        dW5jdGlvbiBhZGRTZWdtZW50KGN1cnJlbnRTdGF0ZSwgc2VnbWVudCkgewog
        ICAgICBzZWdtZW50LmVhY2hDaGFyKGZ1bmN0aW9uKGNoYXIpIHsKICAgICAg
        ICB2YXIgc3RhdGU7CgogICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRT
        dGF0ZS5wdXQoY2hhcik7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGN1cnJl
        bnRTdGF0ZTsKICAgIH0KCiAgICAvLyBUaGUgbWFpbiBpbnRlcmZhY2UKCiAg
        ICB2YXIgUm91dGVSZWNvZ25pemVyID0gZnVuY3Rpb24oKSB7CiAgICAgIHRo
        aXMucm9vdFN0YXRlID0gbmV3IFN0YXRlKCk7CiAgICAgIHRoaXMubmFtZXMg
        PSB7fTsKICAgIH07CgoKICAgIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUg
        PSB7CiAgICAgIGFkZDogZnVuY3Rpb24ocm91dGVzLCBvcHRpb25zKSB7CiAg
        ICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHRoaXMucm9vdFN0YXRlLCByZWdl
        eCA9ICJeIiwKICAgICAgICAgICAgdHlwZXMgPSB7IHN0YXRpY3M6IDAsIGR5
        bmFtaWNzOiAwLCBzdGFyczogMCB9LAogICAgICAgICAgICBoYW5kbGVycyA9
        IFtdLCBhbGxTZWdtZW50cyA9IFtdLCBuYW1lOwoKICAgICAgICB2YXIgaXNF
        bXB0eSA9IHRydWU7CgogICAgICAgIGZvciAodmFyIGk9MCwgbD1yb3V0ZXMu
        bGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgICAgdmFyIHJvdXRlID0gcm91
        dGVzW2ldLCBuYW1lcyA9IFtdOwoKICAgICAgICAgIHZhciBzZWdtZW50cyA9
        IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCB0eXBlcyk7CgogICAgICAgICAg
        YWxsU2VnbWVudHMgPSBhbGxTZWdtZW50cy5jb25jYXQoc2VnbWVudHMpOwoK
        ICAgICAgICAgIGZvciAodmFyIGo9MCwgbT1zZWdtZW50cy5sZW5ndGg7IGo8
        bTsgaisrKSB7CiAgICAgICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNb
        al07CgogICAgICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2ls
        b25TZWdtZW50KSB7IGNvbnRpbnVlOyB9CgogICAgICAgICAgICBpc0VtcHR5
        ID0gZmFsc2U7CgogICAgICAgICAgICAvLyBBZGQgYSAiLyIgZm9yIHRoZSBu
        ZXcgc2VnbWVudAogICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50
        U3RhdGUucHV0KHsgdmFsaWRDaGFyczogIi8iIH0pOwogICAgICAgICAgICBy
        ZWdleCArPSAiLyI7CgogICAgICAgICAgICAvLyBBZGQgYSByZXByZXNlbnRh
        dGlvbiBvZiB0aGUgc2VnbWVudCB0byB0aGUgTkZBIGFuZCByZWdleAogICAg
        ICAgICAgICBjdXJyZW50U3RhdGUgPSBhZGRTZWdtZW50KGN1cnJlbnRTdGF0
        ZSwgc2VnbWVudCk7CiAgICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVn
        ZXgoKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaGFuZGxlciA9IHsg
        aGFuZGxlcjogcm91dGUuaGFuZGxlciwgbmFtZXM6IG5hbWVzIH07CiAgICAg
        ICAgICBpZihyb3V0ZS5xdWVyeVBhcmFtcykgewogICAgICAgICAgICBoYW5k
        bGVyLnF1ZXJ5UGFyYW1zID0gcm91dGUucXVlcnlQYXJhbXM7CiAgICAgICAg
        ICB9CiAgICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpOwogICAgICAg
        IH0KCiAgICAgICAgaWYgKGlzRW1wdHkpIHsKICAgICAgICAgIGN1cnJlbnRT
        dGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiAiLyIgfSk7
        CiAgICAgICAgICByZWdleCArPSAiLyI7CiAgICAgICAgfQoKICAgICAgICBj
        dXJyZW50U3RhdGUuaGFuZGxlcnMgPSBoYW5kbGVyczsKICAgICAgICBjdXJy
        ZW50U3RhdGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4ICsgIiQiKTsKICAg
        ICAgICBjdXJyZW50U3RhdGUudHlwZXMgPSB0eXBlczsKCiAgICAgICAgaWYg
        KG5hbWUgPSBvcHRpb25zICYmIG9wdGlvbnMuYXMpIHsKICAgICAgICAgIHRo
        aXMubmFtZXNbbmFtZV0gPSB7CiAgICAgICAgICAgIHNlZ21lbnRzOiBhbGxT
        ZWdtZW50cywKICAgICAgICAgICAgaGFuZGxlcnM6IGhhbmRsZXJzCiAgICAg
        ICAgICB9OwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGhhbmRsZXJzRm9y
        OiBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgdmFyIHJvdXRlID0gdGhpcy5u
        YW1lc1tuYW1lXSwgcmVzdWx0ID0gW107CiAgICAgICAgaWYgKCFyb3V0ZSkg
        eyB0aHJvdyBuZXcgRXJyb3IoIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkICIg
        KyBuYW1lKTsgfQoKICAgICAgICBmb3IgKHZhciBpPTAsIGw9cm91dGUuaGFu
        ZGxlcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgICAgcmVzdWx0LnB1
        c2gocm91dGUuaGFuZGxlcnNbaV0pOwogICAgICAgIH0KCiAgICAgICAgcmV0
        dXJuIHJlc3VsdDsKICAgICAgfSwKCiAgICAgIGhhc1JvdXRlOiBmdW5jdGlv
        bihuYW1lKSB7CiAgICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTsK
        ICAgICAgfSwKCiAgICAgIGdlbmVyYXRlOiBmdW5jdGlvbihuYW1lLCBwYXJh
        bXMpIHsKICAgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLCBv
        dXRwdXQgPSAiIjsKICAgICAgICBpZiAoIXJvdXRlKSB7IHRocm93IG5ldyBF
        cnJvcigiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgIiArIG5hbWUpOyB9Cgog
        ICAgICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNlZ21lbnRzOwoKICAgICAg
        ICBmb3IgKHZhciBpPTAsIGw9c2VnbWVudHMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTsKCiAgICAg
        ICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7
        IGNvbnRpbnVlOyB9CgogICAgICAgICAgb3V0cHV0ICs9ICIvIjsKICAgICAg
        ICAgIG91dHB1dCArPSBzZWdtZW50LmdlbmVyYXRlKHBhcmFtcyk7CiAgICAg
        ICAgfQoKICAgICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7
        IG91dHB1dCA9ICcvJyArIG91dHB1dDsgfQoKICAgICAgICBpZiAocGFyYW1z
        ICYmIHBhcmFtcy5xdWVyeVBhcmFtcykgewogICAgICAgICAgb3V0cHV0ICs9
        IHRoaXMuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMucXVlcnlQYXJhbXMs
        IHJvdXRlLmhhbmRsZXJzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBv
        dXRwdXQ7CiAgICAgIH0sCgogICAgICBnZW5lcmF0ZVF1ZXJ5U3RyaW5nOiBm
        dW5jdGlvbihwYXJhbXMsIGhhbmRsZXJzKSB7CiAgICAgICAgdmFyIHBhaXJz
        ID0gW10sIGFsbG93ZWRQYXJhbXMgPSBbXTsKICAgICAgICBmb3IodmFyIGk9
        MDsgaSA8IGhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIg
        Y3VycmVudFBhcmFtTGlzdCA9IGhhbmRsZXJzW2ldLnF1ZXJ5UGFyYW1zOwog
        ICAgICAgICAgaWYoY3VycmVudFBhcmFtTGlzdCkgewogICAgICAgICAgICBh
        bGxvd2VkUGFyYW1zLnB1c2guYXBwbHkoYWxsb3dlZFBhcmFtcywgY3VycmVu
        dFBhcmFtTGlzdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZv
        cih2YXIga2V5IGluIHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5o
        YXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgIGlmKGFsbG93ZWRQ
        YXJhbXMuaW5kZXhPZihrZXkpID09PSAtMSkgewogICAgICAgICAgICAgIHRo
        cm93ICdRdWVyeSBwYXJhbSAiJyArIGtleSArICciIGlzIG5vdCBzcGVjaWZp
        ZWQgYXMgYSB2YWxpZCBwYXJhbSBmb3IgdGhpcyByb3V0ZSc7CiAgICAgICAg
        ICAgIH0KICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2tleV07CiAg
        ICAgICAgICAgIHZhciBwYWlyID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7
        CiAgICAgICAgICAgIGlmKHZhbHVlICE9PSB0cnVlKSB7CiAgICAgICAgICAg
        ICAgcGFpciArPSAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpOwog
        ICAgICAgICAgICB9CiAgICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7CiAg
        ICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGFpcnMubGVuZ3Ro
        ID09PSAwKSB7IHJldHVybiAnJzsgfQoKICAgICAgICByZXR1cm4gIj8iICsg
        cGFpcnMuam9pbigiJiIpOwogICAgICB9LAoKICAgICAgcGFyc2VRdWVyeVN0
        cmluZzogZnVuY3Rpb24ocXVlcnlTdHJpbmcpIHsKICAgICAgICB2YXIgcGFp
        cnMgPSBxdWVyeVN0cmluZy5zcGxpdCgiJiIpLCBxdWVyeVBhcmFtcyA9IHt9
        OwogICAgICAgIGZvcih2YXIgaT0wOyBpIDwgcGFpcnMubGVuZ3RoOyBpKysp
        IHsKICAgICAgICAgIHZhciBwYWlyICAgICAgPSBwYWlyc1tpXS5zcGxpdCgn
        PScpLAogICAgICAgICAgICAgIGtleSAgICAgICA9IGRlY29kZVVSSUNvbXBv
        bmVudChwYWlyWzBdKSwKICAgICAgICAgICAgICB2YWx1ZSAgICAgPSBwYWly
        WzFdID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pIDogdHJ1ZTsKICAg
        ICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSB2YWx1ZTsKICAgICAgICB9CiAg
        ICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zOwogICAgICB9LAoKICAgICAgcmVj
        b2duaXplOiBmdW5jdGlvbihwYXRoKSB7CiAgICAgICAgdmFyIHN0YXRlcyA9
        IFsgdGhpcy5yb290U3RhdGUgXSwKICAgICAgICAgICAgcGF0aExlbiwgaSwg
        bCwgcXVlcnlTdGFydCwgcXVlcnlQYXJhbXMgPSB7fTsKCiAgICAgICAgcXVl
        cnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpOwogICAgICAgIGlmIChxdWVy
        eVN0YXJ0ICE9PSAtMSkgewogICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0g
        cGF0aC5zdWJzdHIocXVlcnlTdGFydCArIDEsIHBhdGgubGVuZ3RoKTsKICAg
        ICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KTsKICAg
        ICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1
        ZXJ5U3RyaW5nKTsKICAgICAgICB9CgogICAgICAgIC8vIERFQlVHIEdST1VQ
        IHBhdGgKCiAgICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9PSAiLyIpIHsg
        cGF0aCA9ICIvIiArIHBhdGg7IH0KCiAgICAgICAgcGF0aExlbiA9IHBhdGgu
        bGVuZ3RoOwogICAgICAgIGlmIChwYXRoTGVuID4gMSAmJiBwYXRoLmNoYXJB
        dChwYXRoTGVuIC0gMSkgPT09ICIvIikgewogICAgICAgICAgcGF0aCA9IHBh
        dGguc3Vic3RyKDAsIHBhdGhMZW4gLSAxKTsKICAgICAgICB9CgogICAgICAg
        IGZvciAoaT0wLCBsPXBhdGgubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAg
        ICAgc3RhdGVzID0gcmVjb2duaXplQ2hhcihzdGF0ZXMsIHBhdGguY2hhckF0
        KGkpKTsKICAgICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkgeyBicmVhazsg
        fQogICAgICAgIH0KCiAgICAgICAgLy8gRU5EIERFQlVHIEdST1VQCgogICAg
        ICAgIHZhciBzb2x1dGlvbnMgPSBbXTsKICAgICAgICBmb3IgKGk9MCwgbD1z
        dGF0ZXMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgICAgaWYgKHN0YXRl
        c1tpXS5oYW5kbGVycykgeyBzb2x1dGlvbnMucHVzaChzdGF0ZXNbaV0pOyB9
        CiAgICAgICAgfQoKICAgICAgICBzdGF0ZXMgPSBzb3J0U29sdXRpb25zKHNv
        bHV0aW9ucyk7CgogICAgICAgIHZhciBzdGF0ZSA9IHNvbHV0aW9uc1swXTsK
        CiAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7CiAgICAg
        ICAgICByZXR1cm4gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFy
        YW1zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24g
        VGFyZ2V0KHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7CiAgICAgIHRoaXMu
        cGF0aCA9IHBhdGg7CiAgICAgIHRoaXMubWF0Y2hlciA9IG1hdGNoZXI7CiAg
        ICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTsKICAgIH0KCiAgICBUYXJn
        ZXQucHJvdG90eXBlID0gewogICAgICB0bzogZnVuY3Rpb24odGFyZ2V0LCBj
        YWxsYmFjaykgewogICAgICAgIHZhciBkZWxlZ2F0ZSA9IHRoaXMuZGVsZWdh
        dGU7CgogICAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRk
        Um91dGUpIHsKICAgICAgICAgIHRhcmdldCA9IGRlbGVnYXRlLndpbGxBZGRS
        b3V0ZSh0aGlzLm1hdGNoZXIudGFyZ2V0LCB0YXJnZXQpOwogICAgICAgIH0K
        CiAgICAgICAgdGhpcy5tYXRjaGVyLmFkZCh0aGlzLnBhdGgsIHRhcmdldCk7
        CgogICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgaWYgKGNhbGxi
        YWNrLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoIllvdSBtdXN0
        IGhhdmUgYW4gYXJndW1lbnQgaW4gdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBg
        dG9gIik7IH0KICAgICAgICAgIHRoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlz
        LnBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIHRoaXMuZGVsZWdhdGUpOwogICAg
        ICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSwKCiAgICAgIHdp
        dGhRdWVyeVBhcmFtczogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGFyZ3Vt
        ZW50cy5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCJ5b3UgbXVz
        dCBwcm92aWRlIGFyZ3VtZW50cyB0byB0aGUgd2l0aFF1ZXJ5UGFyYW1zIG1l
        dGhvZCIpOyB9CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVu
        dHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1l
        bnRzW2ldICE9PSAic3RyaW5nIikgewogICAgICAgICAgICB0aHJvdyBuZXcg
        RXJyb3IoJ3lvdSBzaG91bGQgY2FsbCB3aXRoUXVlcnlQYXJhbXMgd2l0aCBh
        IGxpc3Qgb2Ygc3RyaW5ncywgZS5nLiB3aXRoUXVlcnlQYXJhbXMoImZvbyIs
        ICJiYXIiKScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIg
        cXVlcnlQYXJhbXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAg
        ICAgdGhpcy5tYXRjaGVyLmFkZFF1ZXJ5UGFyYW1zKHRoaXMucGF0aCwgcXVl
        cnlQYXJhbXMpOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIE1hdGNo
        ZXIodGFyZ2V0KSB7CiAgICAgIHRoaXMucm91dGVzID0ge307CiAgICAgIHRo
        aXMuY2hpbGRyZW4gPSB7fTsKICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHt9
        OwogICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDsKICAgIH0KCiAgICBNYXRj
        aGVyLnByb3RvdHlwZSA9IHsKICAgICAgYWRkOiBmdW5jdGlvbihwYXRoLCBo
        YW5kbGVyKSB7CiAgICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSBoYW5kbGVy
        OwogICAgICB9LAoKICAgICAgYWRkUXVlcnlQYXJhbXM6IGZ1bmN0aW9uKHBh
        dGgsIHBhcmFtcykgewogICAgICAgIHRoaXMucXVlcnlQYXJhbXNbcGF0aF0g
        PSBwYXJhbXM7CiAgICAgIH0sCgogICAgICBhZGRDaGlsZDogZnVuY3Rpb24o
        cGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgZGVsZWdhdGUpIHsKICAgICAgICB2
        YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKHRhcmdldCk7CiAgICAgICAgdGhp
        cy5jaGlsZHJlbltwYXRoXSA9IG1hdGNoZXI7CgogICAgICAgIHZhciBtYXRj
        aCA9IGdlbmVyYXRlTWF0Y2gocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpOwoK
        ICAgICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVy
        ZWQpIHsKICAgICAgICAgIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKHRhcmdl
        dCwgbWF0Y2gpOwogICAgICAgIH0KCiAgICAgICAgY2FsbGJhY2sobWF0Y2gp
        OwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2go
        c3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkgewogICAgICByZXR1
        cm4gZnVuY3Rpb24ocGF0aCwgbmVzdGVkQ2FsbGJhY2spIHsKICAgICAgICB2
        YXIgZnVsbFBhdGggPSBzdGFydGluZ1BhdGggKyBwYXRoOwoKICAgICAgICBp
        ZiAobmVzdGVkQ2FsbGJhY2spIHsKICAgICAgICAgIG5lc3RlZENhbGxiYWNr
        KGdlbmVyYXRlTWF0Y2goZnVsbFBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSk7
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBuZXcgVGFyZ2V0
        KHN0YXJ0aW5nUGF0aCArIHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKTsKICAg
        ICAgICB9CiAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gYWRkUm91dGUo
        cm91dGVBcnJheSwgcGF0aCwgaGFuZGxlciwgcXVlcnlQYXJhbXMpIHsKICAg
        ICAgdmFyIGxlbiA9IDA7CiAgICAgIGZvciAodmFyIGk9MCwgbD1yb3V0ZUFy
        cmF5Lmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICBsZW4gKz0gcm91dGVB
        cnJheVtpXS5wYXRoLmxlbmd0aDsKICAgICAgfQoKICAgICAgcGF0aCA9IHBh
        dGguc3Vic3RyKGxlbik7CiAgICAgIHZhciByb3V0ZSA9IHsgcGF0aDogcGF0
        aCwgaGFuZGxlcjogaGFuZGxlciB9OwogICAgICBpZihxdWVyeVBhcmFtcykg
        eyByb3V0ZS5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zOyB9CiAgICAgIHJv
        dXRlQXJyYXkucHVzaChyb3V0ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZWFj
        aFJvdXRlKGJhc2VSb3V0ZSwgbWF0Y2hlciwgY2FsbGJhY2ssIGJpbmRpbmcp
        IHsKICAgICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzOwogICAgICB2
        YXIgcXVlcnlQYXJhbXMgPSBtYXRjaGVyLnF1ZXJ5UGFyYW1zOwoKICAgICAg
        Zm9yICh2YXIgcGF0aCBpbiByb3V0ZXMpIHsKICAgICAgICBpZiAocm91dGVz
        Lmhhc093blByb3BlcnR5KHBhdGgpKSB7CiAgICAgICAgICB2YXIgcm91dGVB
        cnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpOwogICAgICAgICAgYWRkUm91dGUo
        cm91dGVBcnJheSwgcGF0aCwgcm91dGVzW3BhdGhdLCBxdWVyeVBhcmFtc1tw
        YXRoXSk7CgogICAgICAgICAgaWYgKG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0p
        IHsKICAgICAgICAgICAgZWFjaFJvdXRlKHJvdXRlQXJyYXksIG1hdGNoZXIu
        Y2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBiaW5kaW5nKTsKICAgICAgICAg
        IH0gZWxzZSB7CiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywg
        cm91dGVBcnJheSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg
        ICB9CgogICAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZS5tYXAgPSBmdW5j
        dGlvbihjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykgewogICAgICB2YXIg
        bWF0Y2hlciA9IG5ldyBNYXRjaGVyKCk7CgogICAgICBjYWxsYmFjayhnZW5l
        cmF0ZU1hdGNoKCIiLCBtYXRjaGVyLCB0aGlzLmRlbGVnYXRlKSk7CgogICAg
        ICBlYWNoUm91dGUoW10sIG1hdGNoZXIsIGZ1bmN0aW9uKHJvdXRlKSB7CiAg
        ICAgICAgaWYgKGFkZFJvdXRlQ2FsbGJhY2spIHsgYWRkUm91dGVDYWxsYmFj
        ayh0aGlzLCByb3V0ZSk7IH0KICAgICAgICBlbHNlIHsgdGhpcy5hZGQocm91
        dGUpOyB9CiAgICAgIH0sIHRoaXMpOwogICAgfTsKICAgIHJldHVybiBSb3V0
        ZVJlY29nbml6ZXI7CiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CmRl
        ZmluZSgicm91dGVyIiwKICBbInJvdXRlLXJlY29nbml6ZXIiLCJyc3ZwIiwi
        ZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBl
        bmRlbmN5Ml9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwog
        ICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBUaGlzIGZpbGUgcmVmZXJl
        bmNlcyBzZXZlcmFsIGludGVybmFsIHN0cnVjdHVyZXM6CgogICAgICAjIyBg
        UmVjb2duaXplZEhhbmRsZXJgCgogICAgICAqIGB7U3RyaW5nfSBoYW5kbGVy
        YDogQSBoYW5kbGVyIG5hbWUKICAgICAgKiBge09iamVjdH0gcGFyYW1zYDog
        QSBoYXNoIG9mIHJlY29nbml6ZWQgcGFyYW1ldGVycwoKICAgICAgIyMgYEhh
        bmRsZXJJbmZvYAoKICAgICAgKiBge0Jvb2xlYW59IGlzRHluYW1pY2A6IHdo
        ZXRoZXIgYSBoYW5kbGVyIGhhcyBhbnkgZHluYW1pYyBzZWdtZW50cwogICAg
        ICAqIGB7U3RyaW5nfSBuYW1lYDogdGhlIG5hbWUgb2YgYSBoYW5kbGVyCiAg
        ICAgICogYHtPYmplY3R9IGhhbmRsZXJgOiBhIGhhbmRsZXIgb2JqZWN0CiAg
        ICAgICogYHtPYmplY3R9IGNvbnRleHRgOiB0aGUgYWN0aXZlIGNvbnRleHQg
        Zm9yIHRoZSBoYW5kbGVyCiAgICAqLwoKICAgIHZhciBSb3V0ZVJlY29nbml6
        ZXIgPSBfX2RlcGVuZGVuY3kxX187CiAgICB2YXIgUlNWUCA9IF9fZGVwZW5k
        ZW5jeTJfXzsKCiAgICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xp
        Y2U7CgoKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIEEgVHJhbnNp
        dGlvbiBpcyBhIHRoZW5uYWJsZSAoYSBwcm9taXNlLWxpa2Ugb2JqZWN0KSB0
        aGF0IHJlcHJlc2VudHMKICAgICAgYW4gYXR0ZW1wdCB0byB0cmFuc2l0aW9u
        IHRvIGFub3RoZXIgcm91dGUuIEl0IGNhbiBiZSBhYm9ydGVkLCBlaXRoZXIK
        ICAgICAgZXhwbGljaXRseSB2aWEgYGFib3J0YCBvciBieSBhdHRlbXB0aW5n
        IGFub3RoZXIgdHJhbnNpdGlvbiB3aGlsZSBhCiAgICAgIHByZXZpb3VzIG9u
        ZSBpcyBzdGlsbCB1bmRlcndheS4gQW4gYWJvcnRlZCB0cmFuc2l0aW9uIGNh
        biBhbHNvCiAgICAgIGJlIGByZXRyeSgpYGQgbGF0ZXIuCiAgICAgKi8KCiAg
        ICBmdW5jdGlvbiBUcmFuc2l0aW9uKHJvdXRlciwgcHJvbWlzZSkgewogICAg
        ICB0aGlzLnJvdXRlciA9IHJvdXRlcjsKICAgICAgdGhpcy5wcm9taXNlID0g
        cHJvbWlzZTsKICAgICAgdGhpcy5kYXRhID0ge307CiAgICAgIHRoaXMucmVz
        b2x2ZWRNb2RlbHMgPSB7fTsKICAgICAgdGhpcy5wcm92aWRlZE1vZGVscyA9
        IHt9OwogICAgICB0aGlzLnByb3ZpZGVkTW9kZWxzQXJyYXkgPSBbXTsKICAg
        ICAgdGhpcy5zZXF1ZW5jZSA9ICsrVHJhbnNpdGlvbi5jdXJyZW50U2VxdWVu
        Y2U7CiAgICAgIHRoaXMucGFyYW1zID0ge307CiAgICB9CgogICAgVHJhbnNp
        dGlvbi5jdXJyZW50U2VxdWVuY2UgPSAwOwoKICAgIFRyYW5zaXRpb24ucHJv
        dG90eXBlID0gewogICAgICB0YXJnZXROYW1lOiBudWxsLAogICAgICB1cmxN
        ZXRob2Q6ICd1cGRhdGUnLAogICAgICBwcm92aWRlZE1vZGVsczogbnVsbCwK
        ICAgICAgcmVzb2x2ZWRNb2RlbHM6IG51bGwsCiAgICAgIHBhcmFtczogbnVs
        bCwKICAgICAgcGl2b3RIYW5kbGVyOiBudWxsLAogICAgICByZXNvbHZlSW5k
        ZXg6IDAsCiAgICAgIGhhbmRsZXJJbmZvczogbnVsbCwKCiAgICAgIGlzQWN0
        aXZlOiB0cnVlLAoKICAgICAgLyoqCiAgICAgICAgVGhlIFRyYW5zaXRpb24n
        cyBpbnRlcm5hbCBwcm9taXNlLiBDYWxsaW5nIGAudGhlbmAgb24gdGhpcyBw
        cm9wZXJ0eQogICAgICAgIGlzIHRoYXQgc2FtZSBhcyBjYWxsaW5nIGAudGhl
        bmAgb24gdGhlIFRyYW5zaXRpb24gb2JqZWN0IGl0c2VsZiwgYnV0CiAgICAg
        ICAgdGhpcyBwcm9wZXJ0eSBpcyBleHBvc2VkIGZvciB3aGVuIHlvdSB3YW50
        IHRvIHBhc3MgYXJvdW5kIGEKICAgICAgICBUcmFuc2l0aW9uJ3MgcHJvbWlz
        ZSwgYnV0IG5vdCB0aGUgVHJhbnNpdGlvbiBvYmplY3QgaXRzZWxmLCBzaW5j
        ZQogICAgICAgIFRyYW5zaXRpb24gb2JqZWN0IGNhbiBiZSBleHRlcm5hbGx5
        IGBhYm9ydGBlZCwgd2hpbGUgdGhlIHByb21pc2UKICAgICAgICBjYW5ub3Qu
        CiAgICAgICAqLwogICAgICBwcm9taXNlOiBudWxsLAoKICAgICAgLyoqCiAg
        ICAgICAgQ3VzdG9tIHN0YXRlIGNhbiBiZSBzdG9yZWQgb24gYSBUcmFuc2l0
        aW9uJ3MgYGRhdGFgIG9iamVjdC4KICAgICAgICBUaGlzIGNhbiBiZSB1c2Vm
        dWwgZm9yIGRlY29yYXRpbmcgYSBUcmFuc2l0aW9uIHdpdGhpbiBhbiBlYXJs
        aWVyCiAgICAgICAgaG9vayBhbmQgc2hhcmVkIHdpdGggYSBsYXRlciBob29r
        LiBQcm9wZXJ0aWVzIHNldCBvbiBgZGF0YWAgd2lsbAogICAgICAgIGJlIGNv
        cGllZCB0byBuZXcgdHJhbnNpdGlvbnMgZ2VuZXJhdGVkIGJ5IGNhbGxpbmcg
        YHJldHJ5YCBvbiB0aGlzCiAgICAgICAgdHJhbnNpdGlvbi4KICAgICAgICov
        CiAgICAgIGRhdGE6IG51bGwsCgogICAgICAvKioKICAgICAgICBBIHN0YW5k
        YXJkIHByb21pc2UgaG9vayB0aGF0IHJlc29sdmVzIGlmIHRoZSB0cmFuc2l0
        aW9uCiAgICAgICAgc3VjY2VlZHMgYW5kIHJlamVjdHMgaWYgaXQgZmFpbHMv
        cmVkaXJlY3RzL2Fib3J0cy4KCiAgICAgICAgRm9yd2FyZHMgdG8gdGhlIGlu
        dGVybmFsIGBwcm9taXNlYCBwcm9wZXJ0eSB3aGljaCB5b3UgY2FuCiAgICAg
        ICAgdXNlIGluIHNpdHVhdGlvbnMgd2hlcmUgeW91IHdhbnQgdG8gcGFzcyBh
        cm91bmQgYSB0aGVubmFibGUsCiAgICAgICAgYnV0IG5vdCB0aGUgVHJhbnNp
        dGlvbiBpdHNlbGYuCgogICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IHN1Y2Nl
        c3MKICAgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmYWlsdXJlCiAgICAgICAq
        LwogICAgICB0aGVuOiBmdW5jdGlvbihzdWNjZXNzLCBmYWlsdXJlKSB7CiAg
        ICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZS50aGVuKHN1Y2Nlc3MsIGZhaWx1
        cmUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQWJvcnRzIHRoZSBU
        cmFuc2l0aW9uLiBOb3RlIHlvdSBjYW4gYWxzbyBpbXBsaWNpdGx5IGFib3J0
        IGEgdHJhbnNpdGlvbgogICAgICAgIGJ5IGluaXRpYXRpbmcgYW5vdGhlciB0
        cmFuc2l0aW9uIHdoaWxlIGEgcHJldmlvdXMgb25lIGlzIHVuZGVyd2F5Lgog
        ICAgICAgKi8KICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgIGlm
        ICh0aGlzLmlzQWJvcnRlZCkgeyByZXR1cm4gdGhpczsgfQogICAgICAgIGxv
        Zyh0aGlzLnJvdXRlciwgdGhpcy5zZXF1ZW5jZSwgdGhpcy50YXJnZXROYW1l
        ICsgIjogdHJhbnNpdGlvbiB3YXMgYWJvcnRlZCIpOwogICAgICAgIHRoaXMu
        aXNBYm9ydGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFs
        c2U7CiAgICAgICAgdGhpcy5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbiA9IG51
        bGw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0sCgogICAgICAvKioK
        ICAgICAgICBSZXRyaWVzIGEgcHJldmlvdXNseS1hYm9ydGVkIHRyYW5zaXRp
        b24gKG1ha2luZyBzdXJlIHRvIGFib3J0IHRoZQogICAgICAgIHRyYW5zaXRp
        b24gaWYgaXQncyBzdGlsbCBhY3RpdmUpLiBSZXR1cm5zIGEgbmV3IHRyYW5z
        aXRpb24gdGhhdAogICAgICAgIHJlcHJlc2VudHMgdGhlIG5ldyBhdHRlbXB0
        IHRvIHRyYW5zaXRpb24uCiAgICAgICAqLwogICAgICByZXRyeTogZnVuY3Rp
        b24oKSB7CiAgICAgICAgdGhpcy5hYm9ydCgpOwogICAgICAgIHZhciByZWNv
        Z0hhbmRsZXJzID0gdGhpcy5yb3V0ZXIucmVjb2duaXplci5oYW5kbGVyc0Zv
        cih0aGlzLnRhcmdldE5hbWUpLAogICAgICAgICAgICBoYW5kbGVySW5mb3Mg
        ID0gZ2VuZXJhdGVIYW5kbGVySW5mb3NXaXRoUXVlcnlQYXJhbXModGhpcy5y
        b3V0ZXIsIHJlY29nSGFuZGxlcnMsIHRoaXMucXVlcnlQYXJhbXMpLAogICAg
        ICAgICAgICBuZXdUcmFuc2l0aW9uID0gcGVyZm9ybVRyYW5zaXRpb24odGhp
        cy5yb3V0ZXIsIGhhbmRsZXJJbmZvcywgdGhpcy5wcm92aWRlZE1vZGVsc0Fy
        cmF5LCB0aGlzLnBhcmFtcywgdGhpcy5xdWVyeVBhcmFtcywgdGhpcy5kYXRh
        KTsKCiAgICAgICAgcmV0dXJuIG5ld1RyYW5zaXRpb247CiAgICAgIH0sCgog
        ICAgICAvKioKICAgICAgICBTZXRzIHRoZSBVUkwtY2hhbmdpbmcgbWV0aG9k
        IHRvIGJlIGVtcGxveWVkIGF0IHRoZSBlbmQgb2YgYQogICAgICAgIHN1Y2Nl
        c3NmdWwgdHJhbnNpdGlvbi4gQnkgZGVmYXVsdCwgYSBuZXcgVHJhbnNpdGlv
        biB3aWxsIGp1c3QKICAgICAgICB1c2UgYHVwZGF0ZVVSTGAsIGJ1dCBwYXNz
        aW5nICdyZXBsYWNlJyB0byB0aGlzIG1ldGhvZCB3aWxsCiAgICAgICAgY2F1
        c2UgdGhlIFVSTCB0byB1cGRhdGUgdXNpbmcgJ3JlcGxhY2VXaXRoJyBpbnN0
        ZWFkLiBPbWl0dGluZwogICAgICAgIGEgcGFyYW1ldGVyIHdpbGwgZGlzYWJs
        ZSB0aGUgVVJMIGNoYW5nZSwgYWxsb3dpbmcgZm9yIHRyYW5zaXRpb25zCiAg
        ICAgICAgdGhhdCBkb24ndCB1cGRhdGUgdGhlIFVSTCBhdCBjb21wbGV0aW9u
        ICh0aGlzIGlzIGFsc28gdXNlZCBmb3IKICAgICAgICBoYW5kbGVVUkwsIHNp
        bmNlIHRoZSBVUkwgaGFzIGFscmVhZHkgY2hhbmdlZCBiZWZvcmUgdGhlCiAg
        ICAgICAgdHJhbnNpdGlvbiB0b29rIHBsYWNlKS4KCiAgICAgICAgQHBhcmFt
        IHtTdHJpbmd9IG1ldGhvZCB0aGUgdHlwZSBvZiBVUkwtY2hhbmdpbmcgbWV0
        aG9kIHRvIHVzZQogICAgICAgICAgYXQgdGhlIGVuZCBvZiBhIHRyYW5zaXRp
        b24uIEFjY2VwdGVkIHZhbHVlcyBhcmUgJ3JlcGxhY2UnLAogICAgICAgICAg
        ZmFsc3kgdmFsdWVzLCBvciBhbnkgb3RoZXIgbm9uLWZhbHN5IHZhbHVlICh3
        aGljaCBpcwogICAgICAgICAgaW50ZXJwcmV0ZWQgYXMgYW4gdXBkYXRlVVJM
        IHRyYW5zaXRpb24pLgoKICAgICAgICBAcmV0dXJuIHtUcmFuc2l0aW9ufSB0
        aGlzIHRyYW5zaXRpb24KICAgICAgICovCiAgICAgIG1ldGhvZDogZnVuY3Rp
        b24obWV0aG9kKSB7CiAgICAgICAgdGhpcy51cmxNZXRob2QgPSBtZXRob2Q7
        CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0sCgogICAgICAvKioKICAg
        ICAgICBGaXJlcyBhbiBldmVudCBvbiB0aGUgY3VycmVudCBsaXN0IG9mIHJl
        c29sdmVkL3Jlc29sdmluZwogICAgICAgIGhhbmRsZXJzIHdpdGhpbiB0aGlz
        IHRyYW5zaXRpb24uIFVzZWZ1bCBmb3IgZmlyaW5nIGV2ZW50cwogICAgICAg
        IG9uIHJvdXRlIGhpZXJhcmNoaWVzIHRoYXQgaGF2ZW4ndCBmdWxseSBiZWVu
        IGVudGVyZWQgeWV0LgoKICAgICAgICBAcGFyYW0ge0Jvb2xlYW59IGlnbm9y
        ZUZhaWx1cmUgdGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGZpcmUKICAgICAg
        ICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZXZlbnQg
        dG8gZmlyZQogICAgICAgKi8KICAgICAgdHJpZ2dlcjogZnVuY3Rpb24oaWdu
        b3JlRmFpbHVyZSkgewogICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChh
        cmd1bWVudHMpOwogICAgICAgIGlmICh0eXBlb2YgaWdub3JlRmFpbHVyZSA9
        PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICBhcmdzLnNoaWZ0KCk7CiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIC8vIFRocm93IGVycm9ycyBvbiB1bmhh
        bmRsZWQgdHJpZ2dlciBldmVudHMgYnkgZGVmYXVsdAogICAgICAgICAgaWdu
        b3JlRmFpbHVyZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICB0cmlnZ2Vy
        KHRoaXMucm91dGVyLCB0aGlzLmhhbmRsZXJJbmZvcy5zbGljZSgwLCB0aGlz
        LnJlc29sdmVJbmRleCArIDEpLCBpZ25vcmVGYWlsdXJlLCBhcmdzKTsKICAg
        ICAgfSwKCiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAgICBy
        ZXR1cm4gIlRyYW5zaXRpb24gKHNlcXVlbmNlICIgKyB0aGlzLnNlcXVlbmNl
        ICsgIikiOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIFJvdXRlcigp
        IHsKICAgICAgdGhpcy5yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXpl
        cigpOwogICAgfQoKICAgIC8vIFRPRE86IHNlcGFyYXRlIGludG8gbW9kdWxl
        PwogICAgUm91dGVyLlRyYW5zaXRpb24gPSBUcmFuc2l0aW9uOwoKICAgIF9f
        ZXhwb3J0c19fWydkZWZhdWx0J10gPSBSb3V0ZXI7CgoKICAgIC8qKgogICAg
        ICBQcm9taXNlIHJlamVjdCByZWFzb25zIHBhc3NlZCB0byBwcm9taXNlIHJl
        amVjdGlvbgogICAgICBoYW5kbGVycyBmb3IgZmFpbGVkIHRyYW5zaXRpb25z
        LgogICAgICovCiAgICBSb3V0ZXIuVW5yZWNvZ25pemVkVVJMRXJyb3IgPSBm
        dW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHRoaXMubWVzc2FnZSA9IChtZXNz
        YWdlIHx8ICJVbnJlY29nbml6ZWRVUkxFcnJvciIpOwogICAgICB0aGlzLm5h
        bWUgPSAiVW5yZWNvZ25pemVkVVJMRXJyb3IiOwogICAgfTsKCiAgICBSb3V0
        ZXIuVHJhbnNpdGlvbkFib3J0ZWQgPSBmdW5jdGlvbihtZXNzYWdlKSB7CiAg
        ICAgIHRoaXMubWVzc2FnZSA9IChtZXNzYWdlIHx8ICJUcmFuc2l0aW9uQWJv
        cnRlZCIpOwogICAgICB0aGlzLm5hbWUgPSAiVHJhbnNpdGlvbkFib3J0ZWQi
        OwogICAgfTsKCiAgICBmdW5jdGlvbiBlcnJvclRyYW5zaXRpb24ocm91dGVy
        LCByZWFzb24pIHsKICAgICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHJvdXRl
        ciwgUlNWUC5yZWplY3QocmVhc29uKSk7CiAgICB9CgoKICAgIFJvdXRlci5w
        cm90b3R5cGUgPSB7CiAgICAgIC8qKgogICAgICAgIFRoZSBtYWluIGVudHJ5
        IHBvaW50IGludG8gdGhlIHJvdXRlci4gVGhlIEFQSSBpcyBlc3NlbnRpYWxs
        eQogICAgICAgIHRoZSBzYW1lIGFzIHRoZSBgbWFwYCBtZXRob2QgaW4gYHJv
        dXRlLXJlY29nbml6ZXJgLgoKICAgICAgICBUaGlzIG1ldGhvZCBleHRyYWN0
        cyB0aGUgU3RyaW5nIGhhbmRsZXIgYXQgdGhlIGxhc3QgYC50bygpYAogICAg
        ICAgIGNhbGwgYW5kIHVzZXMgaXQgYXMgdGhlIG5hbWUgb2YgdGhlIHdob2xl
        IHJvdXRlLgoKICAgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawog
        ICAgICAqLwogICAgICBtYXA6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAg
        ICAgdGhpcy5yZWNvZ25pemVyLmRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZTsK
        CiAgICAgICAgdGhpcy5yZWNvZ25pemVyLm1hcChjYWxsYmFjaywgZnVuY3Rp
        b24ocmVjb2duaXplciwgcm91dGUpIHsKICAgICAgICAgIHZhciBsYXN0SGFu
        ZGxlciA9IHJvdXRlW3JvdXRlLmxlbmd0aCAtIDFdLmhhbmRsZXI7CiAgICAg
        ICAgICB2YXIgYXJncyA9IFtyb3V0ZSwgeyBhczogbGFzdEhhbmRsZXIgfV07
        CiAgICAgICAgICByZWNvZ25pemVyLmFkZC5hcHBseShyZWNvZ25pemVyLCBh
        cmdzKTsKICAgICAgICB9KTsKICAgICAgfSwKCiAgICAgIGhhc1JvdXRlOiBm
        dW5jdGlvbihyb3V0ZSkgewogICAgICAgIHJldHVybiB0aGlzLnJlY29nbml6
        ZXIuaGFzUm91dGUocm91dGUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAg
        ICAgQ2xlYXJzIHRoZSBjdXJyZW50IGFuZCB0YXJnZXQgcm91dGUgaGFuZGxl
        cnMgYW5kIHRyaWdnZXJzIGV4aXQKICAgICAgICBvbiBlYWNoIG9mIHRoZW0g
        c3RhcnRpbmcgYXQgdGhlIGxlYWYgYW5kIHRyYXZlcnNpbmcgdXAgdGhyb3Vn
        aAogICAgICAgIGl0cyBhbmNlc3RvcnMuCiAgICAgICovCiAgICAgIHJlc2V0
        OiBmdW5jdGlvbigpIHsKICAgICAgICBlYWNoSGFuZGxlcih0aGlzLmN1cnJl
        bnRIYW5kbGVySW5mb3MgfHwgW10sIGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7
        CiAgICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJJbmZvLmhhbmRsZXI7
        CiAgICAgICAgICBpZiAoaGFuZGxlci5leGl0KSB7CiAgICAgICAgICAgIGhh
        bmRsZXIuZXhpdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAg
        IHRoaXMuY3VycmVudEhhbmRsZXJJbmZvcyA9IG51bGw7CiAgICAgICAgdGhp
        cy50YXJnZXRIYW5kbGVySW5mb3MgPSBudWxsOwogICAgICB9LAoKICAgICAg
        YWN0aXZlVHJhbnNpdGlvbjogbnVsbCwKCiAgICAgIC8qKgogICAgICAgIHZh
        ciBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFuZGxlcjsKICAgICAgICBUaGUg
        ZW50cnkgcG9pbnQgZm9yIGhhbmRsaW5nIGEgY2hhbmdlIHRvIHRoZSBVUkwg
        KHVzdWFsbHkKICAgICAgICB2aWEgdGhlIGJhY2sgYW5kIGZvcndhcmQgYnV0
        dG9uKS4KCiAgICAgICAgUmV0dXJucyBhbiBBcnJheSBvZiBoYW5kbGVycyBh
        bmQgdGhlIHBhcmFtZXRlcnMgYXNzb2NpYXRlZAogICAgICAgIHdpdGggdGhv
        c2UgcGFyYW1ldGVycy4KCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHVybCBh
        IFVSTCB0byBwcm9jZXNzCgogICAgICAgIEByZXR1cm4ge0FycmF5fSBhbiBB
        cnJheSBvZiBgW2hhbmRsZXIsIHBhcmFtZXRlcl1gIHR1cGxlcwogICAgICAq
        LwogICAgICBoYW5kbGVVUkw6IGZ1bmN0aW9uKHVybCkgewogICAgICAgIC8v
        IFBlcmZvcm0gYSBVUkwtYmFzZWQgdHJhbnNpdGlvbiwgYnV0IGRvbid0IGNo
        YW5nZQogICAgICAgIC8vIHRoZSBVUkwgYWZ0ZXJ3YXJkLCBzaW5jZSBpdCBh
        bHJlYWR5IGhhcHBlbmVkLgogICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2Fs
        bChhcmd1bWVudHMpOwogICAgICAgIGlmICh1cmwuY2hhckF0KDApICE9PSAn
        LycpIHsgYXJnc1swXSA9ICcvJyArIHVybDsgfQogICAgICAgIHJldHVybiBk
        b1RyYW5zaXRpb24odGhpcywgYXJncykubWV0aG9kKG51bGwpOwogICAgICB9
        LAoKICAgICAgLyoqCiAgICAgICAgSG9vayBwb2ludCBmb3IgdXBkYXRpbmcg
        dGhlIFVSTC4KCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHVybCBhIFVSTCB0
        byB1cGRhdGUgdG8KICAgICAgKi8KICAgICAgdXBkYXRlVVJMOiBmdW5jdGlv
        bigpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInVwZGF0ZVVSTCBpcyBu
        b3QgaW1wbGVtZW50ZWQiKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAg
        IEhvb2sgcG9pbnQgZm9yIHJlcGxhY2luZyB0aGUgY3VycmVudCBVUkwsIGku
        ZS4gd2l0aCByZXBsYWNlU3RhdGUKCiAgICAgICAgQnkgZGVmYXVsdCB0aGlz
        IGJlaGF2ZXMgdGhlIHNhbWUgYXMgYHVwZGF0ZVVSTGAKCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IHVybCBhIFVSTCB0byB1cGRhdGUgdG8KICAgICAgKi8K
        ICAgICAgcmVwbGFjZVVSTDogZnVuY3Rpb24odXJsKSB7CiAgICAgICAgdGhp
        cy51cGRhdGVVUkwodXJsKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAg
        IFRyYW5zaXRpb24gaW50byB0aGUgc3BlY2lmaWVkIG5hbWVkIHJvdXRlLgoK
        ICAgICAgICBJZiBuZWNlc3NhcnksIHRyaWdnZXIgdGhlIGV4aXQgY2FsbGJh
        Y2sgb24gYW55IGhhbmRsZXJzCiAgICAgICAgdGhhdCBhcmUgbm8gbG9uZ2Vy
        IHJlcHJlc2VudGVkIGJ5IHRoZSB0YXJnZXQgcm91dGUuCgogICAgICAgIEBw
        YXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSByb3V0ZQogICAg
        ICAqLwogICAgICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uKG5hbWUpIHsKICAg
        ICAgICByZXR1cm4gZG9UcmFuc2l0aW9uKHRoaXMsIGFyZ3VtZW50cyk7CiAg
        ICAgIH0sCgogICAgICBpbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG86IGZ1bmN0
        aW9uKG5hbWUpIHsKICAgICAgICBkb1RyYW5zaXRpb24odGhpcywgYXJndW1l
        bnRzLCB0cnVlKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIElkZW50
        aWNhbCB0byBgdHJhbnNpdGlvblRvYCBleGNlcHQgdGhhdCB0aGUgY3VycmVu
        dCBVUkwgd2lsbCBiZSByZXBsYWNlZAogICAgICAgIGlmIHBvc3NpYmxlLgoK
        ICAgICAgICBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBwcmltYXJpbHkgZm9y
        IHVzZSB3aXRoIGByZXBsYWNlU3RhdGVgLgoKICAgICAgICBAcGFyYW0ge1N0
        cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUKICAgICAgKi8KICAg
        ICAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICByZXR1
        cm4gZG9UcmFuc2l0aW9uKHRoaXMsIGFyZ3VtZW50cykubWV0aG9kKCdyZXBs
        YWNlJyk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBAcHJpdmF0ZQoK
        ICAgICAgICBUaGlzIG1ldGhvZCB0YWtlcyBhIGhhbmRsZXIgbmFtZSBhbmQg
        YSBsaXN0IG9mIGNvbnRleHRzIGFuZCByZXR1cm5zCiAgICAgICAgYSBzZXJp
        YWxpemVkIHBhcmFtZXRlciBoYXNoIHN1aXRhYmxlIHRvIHBhc3MgdG8gYHJl
        Y29nbml6ZXIuZ2VuZXJhdGUoKWAuCgogICAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBoYW5kbGVyTmFtZQogICAgICAgIEBwYXJhbSB7QXJyYXlbT2JqZWN0XX0g
        Y29udGV4dHMKICAgICAgICBAcmV0dXJuIHtPYmplY3R9IGEgc2VyaWFsaXpl
        ZCBwYXJhbWV0ZXIgaGFzaAogICAgICAqLwoKICAgICAgcGFyYW1zRm9ySGFu
        ZGxlcjogZnVuY3Rpb24oaGFuZGxlck5hbWUsIGNvbnRleHRzKSB7CiAgICAg
        ICAgdmFyIHBhcnRpdGlvbmVkQXJncyA9IGV4dHJhY3RRdWVyeVBhcmFtcyhz
        bGljZS5jYWxsKGFyZ3VtZW50cywgMSkpOwogICAgICAgIHJldHVybiBwYXJh
        bXNGb3JIYW5kbGVyKHRoaXMsIGhhbmRsZXJOYW1lLCBwYXJ0aXRpb25lZEFy
        Z3NbMF0sIHBhcnRpdGlvbmVkQXJnc1sxXSk7CiAgICAgIH0sCgogICAgICAv
        KioKICAgICAgICBUaGlzIG1ldGhvZCB0YWtlcyBhIGhhbmRsZXIgbmFtZSBh
        bmQgcmV0dXJucyBhIGxpc3Qgb2YgcXVlcnkgcGFyYW1zCiAgICAgICAgdGhh
        dCBhcmUgdmFsaWQgdG8gcGFzcyB0byB0aGUgaGFuZGxlciBvciBpdHMgcGFy
        ZW50cwoKICAgICAgICBAcGFyYW0ge1N0cmluZ30gaGFuZGxlck5hbWUKICAg
        ICAgICBAcmV0dXJuIHtBcnJheVtTdHJpbmddfSBhIGxpc3Qgb2YgcXVlcnkg
        cGFyYW1ldGVycwogICAgICAqLwogICAgICBxdWVyeVBhcmFtc0ZvckhhbmRs
        ZXI6IGZ1bmN0aW9uIChoYW5kbGVyTmFtZSkgewogICAgICAgIHJldHVybiBx
        dWVyeVBhcmFtc0ZvckhhbmRsZXIodGhpcywgaGFuZGxlck5hbWUpOwogICAg
        ICB9LAoKICAgICAgLyoqCiAgICAgICAgVGFrZSBhIG5hbWVkIHJvdXRlIGFu
        ZCBjb250ZXh0IG9iamVjdHMgYW5kIGdlbmVyYXRlIGEKICAgICAgICBVUkwu
        CgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRo
        ZSByb3V0ZSB0byBnZW5lcmF0ZQogICAgICAgICAgYSBVUkwgZm9yCiAgICAg
        ICAgQHBhcmFtIHsuLi5PYmplY3R9IG9iamVjdHMgYSBsaXN0IG9mIG9iamVj
        dHMgdG8gc2VyaWFsaXplCgogICAgICAgIEByZXR1cm4ge1N0cmluZ30gYSBV
        UkwKICAgICAgKi8KICAgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uKGhhbmRsZXJO
        YW1lKSB7CiAgICAgICAgdmFyIHBhcnRpdGlvbmVkQXJncyA9IGV4dHJhY3RR
        dWVyeVBhcmFtcyhzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpLAogICAgICAg
        ICAgc3VwcGxpZWRQYXJhbXMgPSBwYXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAg
        ICAgICBxdWVyeVBhcmFtcyA9IHBhcnRpdGlvbmVkQXJnc1sxXTsKCiAgICAg
        ICAgdmFyIHBhcmFtcyA9IHBhcmFtc0ZvckhhbmRsZXIodGhpcywgaGFuZGxl
        ck5hbWUsIHN1cHBsaWVkUGFyYW1zLCBxdWVyeVBhcmFtcyksCiAgICAgICAg
        ICB2YWxpZFF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXNGb3JIYW5kbGVyKHRo
        aXMsIGhhbmRsZXJOYW1lKTsKCiAgICAgICAgdmFyIG1pc3NpbmdQYXJhbXMg
        PSBbXTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIHF1ZXJ5UGFyYW1zKSB7
        CiAgICAgICAgICBpZiAocXVlcnlQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5
        KSAmJiAhfnZhbGlkUXVlcnlQYXJhbXMuaW5kZXhPZihrZXkpKSB7CiAgICAg
        ICAgICAgIG1pc3NpbmdQYXJhbXMucHVzaChrZXkpOwogICAgICAgICAgfQog
        ICAgICAgIH0KCiAgICAgICAgaWYgKG1pc3NpbmdQYXJhbXMubGVuZ3RoID4g
        MCkgewogICAgICAgICAgdmFyIGVyciA9ICdZb3Ugc3VwcGxpZWQgdGhlIHBh
        cmFtcyAnOwogICAgICAgICAgZXJyICs9IG1pc3NpbmdQYXJhbXMubWFwKGZ1
        bmN0aW9uKHBhcmFtKSB7CiAgICAgICAgICAgIHJldHVybiAnIicgKyBwYXJh
        bSArICI9IiArIHF1ZXJ5UGFyYW1zW3BhcmFtXSArICciJzsKICAgICAgICAg
        IH0pLmpvaW4oJyBhbmQgJyk7CgogICAgICAgICAgZXJyICs9ICcgd2hpY2gg
        YXJlIG5vdCB2YWxpZCBmb3IgdGhlICInICsgaGFuZGxlck5hbWUgKyAnIiBo
        YW5kbGVyIG9yIGl0cyBwYXJlbnRzJzsKCiAgICAgICAgICB0aHJvdyBuZXcg
        RXJyb3IoZXJyKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLnJl
        Y29nbml6ZXIuZ2VuZXJhdGUoaGFuZGxlck5hbWUsIHBhcmFtcyk7CiAgICAg
        IH0sCgogICAgICBpc0FjdGl2ZTogZnVuY3Rpb24oaGFuZGxlck5hbWUpIHsK
        ICAgICAgICB2YXIgcGFydGl0aW9uZWRBcmdzICAgPSBleHRyYWN0UXVlcnlQ
        YXJhbXMoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSwKICAgICAgICAgICAg
        Y29udGV4dHMgICAgICAgICAgPSBwYXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAg
        ICAgICAgIHF1ZXJ5UGFyYW1zICAgICAgID0gcGFydGl0aW9uZWRBcmdzWzFd
        LAogICAgICAgICAgICBhY3RpdmVRdWVyeVBhcmFtcyAgPSB7fSwKICAgICAg
        ICAgICAgZWZmZWN0aXZlUXVlcnlQYXJhbXMgPSB7fTsKCiAgICAgICAgdmFy
        IHRhcmdldEhhbmRsZXJJbmZvcyA9IHRoaXMudGFyZ2V0SGFuZGxlckluZm9z
        LAogICAgICAgICAgICBmb3VuZCA9IGZhbHNlLCBuYW1lcywgb2JqZWN0LCBo
        YW5kbGVySW5mbywgaGFuZGxlck9iajsKCiAgICAgICAgaWYgKCF0YXJnZXRI
        YW5kbGVySW5mb3MpIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgICAgIHZhciBy
        ZWNvZ0hhbmRsZXJzID0gdGhpcy5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKHRh
        cmdldEhhbmRsZXJJbmZvc1t0YXJnZXRIYW5kbGVySW5mb3MubGVuZ3RoIC0g
        MV0ubmFtZSk7CiAgICAgICAgZm9yICh2YXIgaT10YXJnZXRIYW5kbGVySW5m
        b3MubGVuZ3RoLTE7IGk+PTA7IGktLSkgewogICAgICAgICAgaGFuZGxlcklu
        Zm8gPSB0YXJnZXRIYW5kbGVySW5mb3NbaV07CiAgICAgICAgICBpZiAoaGFu
        ZGxlckluZm8ubmFtZSA9PT0gaGFuZGxlck5hbWUpIHsgZm91bmQgPSB0cnVl
        OyB9CgogICAgICAgICAgaWYgKGZvdW5kKSB7CiAgICAgICAgICAgIHZhciBy
        ZWNvZ0hhbmRsZXIgPSByZWNvZ0hhbmRsZXJzW2ldOwoKICAgICAgICAgICAg
        bWVyZ2UoYWN0aXZlUXVlcnlQYXJhbXMsIGhhbmRsZXJJbmZvLnF1ZXJ5UGFy
        YW1zKTsKICAgICAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zICE9PSBmYWxzZSkg
        ewogICAgICAgICAgICAgIG1lcmdlKGVmZmVjdGl2ZVF1ZXJ5UGFyYW1zLCBo
        YW5kbGVySW5mby5xdWVyeVBhcmFtcyk7CiAgICAgICAgICAgICAgbWVyZ2VT
        b21lS2V5cyhlZmZlY3RpdmVRdWVyeVBhcmFtcywgcXVlcnlQYXJhbXMsIHJl
        Y29nSGFuZGxlci5xdWVyeVBhcmFtcyk7CiAgICAgICAgICAgIH0KCiAgICAg
        ICAgICAgIGlmIChoYW5kbGVySW5mby5pc0R5bmFtaWMgJiYgY29udGV4dHMu
        bGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIG9iamVjdCA9IGNvbnRleHRz
        LnBvcCgpOwoKICAgICAgICAgICAgICBpZiAoaXNQYXJhbShvYmplY3QpKSB7
        CiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHJlY29nSGFuZGxlci5uYW1l
        c1swXTsKICAgICAgICAgICAgICAgIGlmICgiIiArIG9iamVjdCAhPT0gdGhp
        cy5jdXJyZW50UGFyYW1zW25hbWVdKSB7IHJldHVybiBmYWxzZTsgfQogICAg
        ICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlckluZm8uY29udGV4dCAhPT0g
        b2JqZWN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg
        ICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAg
        fQoKCiAgICAgICAgcmV0dXJuIGNvbnRleHRzLmxlbmd0aCA9PT0gMCAmJiBm
        b3VuZCAmJiBxdWVyeVBhcmFtc0VxdWFsKGFjdGl2ZVF1ZXJ5UGFyYW1zLCBl
        ZmZlY3RpdmVRdWVyeVBhcmFtcyk7CiAgICAgIH0sCgogICAgICB0cmlnZ2Vy
        OiBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5j
        YWxsKGFyZ3VtZW50cyk7CiAgICAgICAgdHJpZ2dlcih0aGlzLCB0aGlzLmN1
        cnJlbnRIYW5kbGVySW5mb3MsIGZhbHNlLCBhcmdzKTsKICAgICAgfSwKCiAg
        ICAgIC8qKgogICAgICAgIEhvb2sgcG9pbnQgZm9yIGxvZ2dpbmcgdHJhbnNp
        dGlvbiBzdGF0dXMgdXBkYXRlcy4KCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9
        IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbG9nLgogICAgICAqLwogICAgICBs
        b2c6IG51bGwKICAgIH07CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAg
        ICBVc2VkIGludGVybmFsbHkgZm9yIGJvdGggVVJMIGFuZCBuYW1lZCB0cmFu
        c2l0aW9uIHRvIGRldGVybWluZQogICAgICBhIHNoYXJlZCBwaXZvdCBwYXJl
        bnQgcm91dGUgYW5kIG90aGVyIGRhdGEgbmVjZXNzYXJ5IHRvIHBlcmZvcm0K
        ICAgICAgYSB0cmFuc2l0aW9uLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRN
        YXRjaFBvaW50KHJvdXRlciwgaGFuZGxlcnMsIG9iamVjdHMsIGlucHV0UGFy
        YW1zLCBxdWVyeVBhcmFtcykgewoKICAgICAgdmFyIG1hdGNoUG9pbnQgPSBo
        YW5kbGVycy5sZW5ndGgsCiAgICAgICAgICBwcm92aWRlZE1vZGVscyA9IHt9
        LCBpLAogICAgICAgICAgY3VycmVudEhhbmRsZXJJbmZvcyA9IHJvdXRlci5j
        dXJyZW50SGFuZGxlckluZm9zIHx8IFtdLAogICAgICAgICAgcGFyYW1zID0g
        e30sCiAgICAgICAgICBvbGRQYXJhbXMgPSByb3V0ZXIuY3VycmVudFBhcmFt
        cyB8fCB7fSwKICAgICAgICAgIGFjdGl2ZVRyYW5zaXRpb24gPSByb3V0ZXIu
        YWN0aXZlVHJhbnNpdGlvbiwKICAgICAgICAgIGhhbmRsZXJQYXJhbXMgPSB7
        fSwKICAgICAgICAgIG9iajsKCiAgICAgIG9iamVjdHMgPSBzbGljZS5jYWxs
        KG9iamVjdHMpOwogICAgICBtZXJnZShwYXJhbXMsIGlucHV0UGFyYW1zKTsK
        CiAgICAgIGZvciAoaSA9IGhhbmRsZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsg
        aS0tKSB7CiAgICAgICAgdmFyIGhhbmRsZXJPYmogPSBoYW5kbGVyc1tpXSwK
        ICAgICAgICAgICAgaGFuZGxlck5hbWUgPSBoYW5kbGVyT2JqLmhhbmRsZXIs
        CiAgICAgICAgICAgIG9sZEhhbmRsZXJJbmZvID0gY3VycmVudEhhbmRsZXJJ
        bmZvc1tpXSwKICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IGZhbHNlOwoKICAg
        ICAgICAvLyBDaGVjayBpZiBoYW5kbGVyIG5hbWVzIGhhdmUgY2hhbmdlZC4K
        ICAgICAgICBpZiAoIW9sZEhhbmRsZXJJbmZvIHx8IG9sZEhhbmRsZXJJbmZv
        Lm5hbWUgIT09IGhhbmRsZXJPYmouaGFuZGxlcikgeyBoYXNDaGFuZ2VkID0g
        dHJ1ZTsgfQoKICAgICAgICBpZiAoaGFuZGxlck9iai5pc0R5bmFtaWMpIHsK
        ICAgICAgICAgIC8vIFVSTCB0cmFuc2l0aW9uLgoKICAgICAgICAgIGlmIChv
        YmogPSBnZXRNYXRjaFBvaW50T2JqZWN0KG9iamVjdHMsIGhhbmRsZXJOYW1l
        LCBhY3RpdmVUcmFuc2l0aW9uLCB0cnVlLCBwYXJhbXMpKSB7CiAgICAgICAg
        ICAgIGhhc0NoYW5nZWQgPSB0cnVlOwogICAgICAgICAgICBwcm92aWRlZE1v
        ZGVsc1toYW5kbGVyTmFtZV0gPSBvYmo7CiAgICAgICAgICB9IGVsc2Ugewog
        ICAgICAgICAgICBoYW5kbGVyUGFyYW1zW2hhbmRsZXJOYW1lXSA9IHt9Owog
        ICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGhhbmRsZXJPYmoucGFyYW1z
        KSB7CiAgICAgICAgICAgICAgaWYgKCFoYW5kbGVyT2JqLnBhcmFtcy5oYXNP
        d25Qcm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQogICAgICAgICAgICAg
        IHZhciBuZXdQYXJhbSA9IGhhbmRsZXJPYmoucGFyYW1zW3Byb3BdOwogICAg
        ICAgICAgICAgIGlmIChvbGRQYXJhbXNbcHJvcF0gIT09IG5ld1BhcmFtKSB7
        IGhhc0NoYW5nZWQgPSB0cnVlOyB9CiAgICAgICAgICAgICAgaGFuZGxlclBh
        cmFtc1toYW5kbGVyTmFtZV1bcHJvcF0gPSBwYXJhbXNbcHJvcF0gPSBuZXdQ
        YXJhbTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxz
        ZSBpZiAoaGFuZGxlck9iai5oYXNPd25Qcm9wZXJ0eSgnbmFtZXMnKSkgewog
        ICAgICAgICAgLy8gTmFtZWQgdHJhbnNpdGlvbi4KCiAgICAgICAgICBpZiAo
        b2JqZWN0cy5sZW5ndGgpIHsgaGFzQ2hhbmdlZCA9IHRydWU7IH0KCiAgICAg
        ICAgICBpZiAob2JqID0gZ2V0TWF0Y2hQb2ludE9iamVjdChvYmplY3RzLCBo
        YW5kbGVyTmFtZSwgYWN0aXZlVHJhbnNpdGlvbiwgaGFuZGxlck9iai5uYW1l
        c1swXSwgcGFyYW1zKSkgewogICAgICAgICAgICBwcm92aWRlZE1vZGVsc1to
        YW5kbGVyTmFtZV0gPSBvYmo7CiAgICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgICB2YXIgbmFtZXMgPSBoYW5kbGVyT2JqLm5hbWVzOwogICAgICAgICAg
        ICBoYW5kbGVyUGFyYW1zW2hhbmRsZXJOYW1lXSA9IHt9OwogICAgICAgICAg
        ICBmb3IgKHZhciBqID0gMCwgbGVuID0gbmFtZXMubGVuZ3RoOyBqIDwgbGVu
        OyArK2opIHsKICAgICAgICAgICAgICB2YXIgbmFtZSA9IG5hbWVzW2pdOwog
        ICAgICAgICAgICAgIGhhbmRsZXJQYXJhbXNbaGFuZGxlck5hbWVdW25hbWVd
        ID0gcGFyYW1zW25hbWVdID0gcGFyYW1zW25hbWVdIHx8IG9sZFBhcmFtc1tu
        YW1lXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAg
        ICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gb2xkIGhhbmRsZXIsIHNlZSBpZiBx
        dWVyeSBwYXJhbXMgYXJlIHRoZSBzYW1lLiBJZiB0aGVyZSBpc24ndCBhbiBv
        bGQgaGFuZGxlciwKICAgICAgICAvLyBoYXNDaGFuZ2VkIHdpbGwgYWxyZWFk
        eSBiZSB0cnVlIGhlcmUKICAgICAgICBpZihvbGRIYW5kbGVySW5mbyAmJiAh
        cXVlcnlQYXJhbXNFcXVhbChvbGRIYW5kbGVySW5mby5xdWVyeVBhcmFtcywg
        aGFuZGxlck9iai5xdWVyeVBhcmFtcykpIHsKICAgICAgICAgICAgaGFzQ2hh
        bmdlZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoaGFzQ2hhbmdl
        ZCkgeyBtYXRjaFBvaW50ID0gaTsgfQogICAgICB9CgogICAgICBpZiAob2Jq
        ZWN0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJN
        b3JlIGNvbnRleHQgb2JqZWN0cyB3ZXJlIHBhc3NlZCB0aGFuIHRoZXJlIGFy
        ZSBkeW5hbWljIHNlZ21lbnRzIGZvciB0aGUgcm91dGU6ICIgKyBoYW5kbGVy
        c1toYW5kbGVycy5sZW5ndGggLSAxXS5oYW5kbGVyKTsKICAgICAgfQoKICAg
        ICAgdmFyIHBpdm90SGFuZGxlckluZm8gPSBjdXJyZW50SGFuZGxlckluZm9z
        W21hdGNoUG9pbnQgLSAxXSwKICAgICAgICAgIHBpdm90SGFuZGxlciA9IHBp
        dm90SGFuZGxlckluZm8gJiYgcGl2b3RIYW5kbGVySW5mby5oYW5kbGVyOwoK
        ICAgICAgcmV0dXJuIHsgbWF0Y2hQb2ludDogbWF0Y2hQb2ludCwgcHJvdmlk
        ZWRNb2RlbHM6IHByb3ZpZGVkTW9kZWxzLCBwYXJhbXM6IHBhcmFtcywgaGFu
        ZGxlclBhcmFtczogaGFuZGxlclBhcmFtcywgcGl2b3RIYW5kbGVyOiBwaXZv
        dEhhbmRsZXIgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRNYXRjaFBvaW50
        T2JqZWN0KG9iamVjdHMsIGhhbmRsZXJOYW1lLCBhY3RpdmVUcmFuc2l0aW9u
        LCBwYXJhbU5hbWUsIHBhcmFtcykgewoKICAgICAgaWYgKG9iamVjdHMubGVu
        Z3RoICYmIHBhcmFtTmFtZSkgewoKICAgICAgICB2YXIgb2JqZWN0ID0gb2Jq
        ZWN0cy5wb3AoKTsKCiAgICAgICAgLy8gSWYgcHJvdmlkZWQgb2JqZWN0IGlz
        IHN0cmluZyBvciBudW1iZXIsIHRyZWF0IGFzIHBhcmFtLgogICAgICAgIGlm
        IChpc1BhcmFtKG9iamVjdCkpIHsKICAgICAgICAgIHBhcmFtc1twYXJhbU5h
        bWVdID0gb2JqZWN0LnRvU3RyaW5nKCk7CiAgICAgICAgfSBlbHNlIHsKICAg
        ICAgICAgIHJldHVybiBvYmplY3Q7CiAgICAgICAgfQogICAgICB9IGVsc2Ug
        aWYgKGFjdGl2ZVRyYW5zaXRpb24pIHsKICAgICAgICAvLyBVc2UgbW9kZWwg
        ZnJvbSBwcmV2aW91cyB0cmFuc2l0aW9uIGF0dGVtcHQsIHByZWZlcmFibHkg
        dGhlIHJlc29sdmVkIG9uZS4KICAgICAgICByZXR1cm4gYWN0aXZlVHJhbnNp
        dGlvbi5yZXNvbHZlZE1vZGVsc1toYW5kbGVyTmFtZV0gfHwKICAgICAgICAg
        ICAgICAgKHBhcmFtTmFtZSAmJiBhY3RpdmVUcmFuc2l0aW9uLnByb3ZpZGVk
        TW9kZWxzW2hhbmRsZXJOYW1lXSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5j
        dGlvbiBpc1BhcmFtKG9iamVjdCkgewogICAgICByZXR1cm4gKHR5cGVvZiBv
        YmplY3QgPT09ICJzdHJpbmciIHx8IG9iamVjdCBpbnN0YW5jZW9mIFN0cmlu
        ZyB8fCB0eXBlb2Ygb2JqZWN0ID09PSAibnVtYmVyIiB8fCBvYmplY3QgaW5z
        dGFuY2VvZiBOdW1iZXIpOwogICAgfQoKCgogICAgLyoqCiAgICAgIEBwcml2
        YXRlCgogICAgICBUaGlzIG1ldGhvZCB0YWtlcyBhIGhhbmRsZXIgbmFtZSBh
        bmQgcmV0dXJucyBhIGxpc3Qgb2YgcXVlcnkgcGFyYW1zCiAgICAgIHRoYXQg
        YXJlIHZhbGlkIHRvIHBhc3MgdG8gdGhlIGhhbmRsZXIgb3IgaXRzIHBhcmVu
        dHMKCiAgICAgIEBwYXJhbSB7Um91dGVyfSByb3V0ZXIKICAgICAgQHBhcmFt
        IHtTdHJpbmd9IGhhbmRsZXJOYW1lCiAgICAgIEByZXR1cm4ge0FycmF5W1N0
        cmluZ119IGEgbGlzdCBvZiBxdWVyeSBwYXJhbWV0ZXJzCiAgICAqLwogICAg
        ZnVuY3Rpb24gcXVlcnlQYXJhbXNGb3JIYW5kbGVyKHJvdXRlciwgaGFuZGxl
        ck5hbWUpIHsKICAgICAgdmFyIGhhbmRsZXJzID0gcm91dGVyLnJlY29nbml6
        ZXIuaGFuZGxlcnNGb3IoaGFuZGxlck5hbWUpLAogICAgICAgIHF1ZXJ5UGFy
        YW1zID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXJz
        Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVlcnlQYXJhbXMucHVzaC5hcHBs
        eShxdWVyeVBhcmFtcywgaGFuZGxlcnNbaV0ucXVlcnlQYXJhbXMgfHwgW10p
        OwogICAgICB9CgogICAgICByZXR1cm4gcXVlcnlQYXJhbXM7CiAgICB9CiAg
        ICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFRoaXMgbWV0aG9kIHRha2Vz
        IGEgaGFuZGxlciBuYW1lIGFuZCBhIGxpc3Qgb2YgY29udGV4dHMgYW5kIHJl
        dHVybnMKICAgICAgYSBzZXJpYWxpemVkIHBhcmFtZXRlciBoYXNoIHN1aXRh
        YmxlIHRvIHBhc3MgdG8gYHJlY29nbml6ZXIuZ2VuZXJhdGUoKWAuCgogICAg
        ICBAcGFyYW0ge1JvdXRlcn0gcm91dGVyCiAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBoYW5kbGVyTmFtZQogICAgICBAcGFyYW0ge0FycmF5W09iamVjdF19IG9i
        amVjdHMKICAgICAgQHJldHVybiB7T2JqZWN0fSBhIHNlcmlhbGl6ZWQgcGFy
        YW1ldGVyIGhhc2gKICAgICovCiAgICBmdW5jdGlvbiBwYXJhbXNGb3JIYW5k
        bGVyKHJvdXRlciwgaGFuZGxlck5hbWUsIG9iamVjdHMsIHF1ZXJ5UGFyYW1z
        KSB7CgogICAgICB2YXIgaGFuZGxlcnMgPSByb3V0ZXIucmVjb2duaXplci5o
        YW5kbGVyc0ZvcihoYW5kbGVyTmFtZSksCiAgICAgICAgICBwYXJhbXMgPSB7
        fSwKICAgICAgICAgIGhhbmRsZXJJbmZvcyA9IGdlbmVyYXRlSGFuZGxlcklu
        Zm9zV2l0aFF1ZXJ5UGFyYW1zKHJvdXRlciwgaGFuZGxlcnMsIHF1ZXJ5UGFy
        YW1zKSwKICAgICAgICAgIG1hdGNoUG9pbnQgPSBnZXRNYXRjaFBvaW50KHJv
        dXRlciwgaGFuZGxlckluZm9zLCBvYmplY3RzKS5tYXRjaFBvaW50LAogICAg
        ICAgICAgbWVyZ2VkUXVlcnlQYXJhbXMgPSB7fSwKICAgICAgICAgIG9iamVj
        dCwgaGFuZGxlck9iaiwgaGFuZGxlciwgbmFtZXMsIGk7CgogICAgICBwYXJh
        bXMucXVlcnlQYXJhbXMgPSB7fTsKCiAgICAgIGZvciAoaT0wOyBpPGhhbmRs
        ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaGFuZGxlck9iaiA9IGhhbmRs
        ZXJzW2ldOwogICAgICAgIGhhbmRsZXIgPSByb3V0ZXIuZ2V0SGFuZGxlciho
        YW5kbGVyT2JqLmhhbmRsZXIpOwogICAgICAgIG5hbWVzID0gaGFuZGxlck9i
        ai5uYW1lczsKCiAgICAgICAgLy8gSWYgaXQncyBhIGR5bmFtaWMgc2VnbWVu
        dAogICAgICAgIGlmIChuYW1lcy5sZW5ndGgpIHsKICAgICAgICAgIC8vIElm
        IHdlIGhhdmUgb2JqZWN0cywgdXNlIHRoZW0KICAgICAgICAgIGlmIChpID49
        IG1hdGNoUG9pbnQpIHsKICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0cy5z
        aGlmdCgpOwogICAgICAgICAgLy8gT3RoZXJ3aXNlIHVzZSBleGlzdGluZyBj
        b250ZXh0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvYmplY3Qg
        PSBoYW5kbGVyLmNvbnRleHQ7CiAgICAgICAgICB9CgogICAgICAgICAgLy8g
        U2VyaWFsaXplIHRvIGdlbmVyYXRlIHBhcmFtcwogICAgICAgICAgbWVyZ2Uo
        cGFyYW1zLCBzZXJpYWxpemUoaGFuZGxlciwgb2JqZWN0LCBuYW1lcykpOwog
        ICAgICAgIH0KICAgICAgICBpZiAocXVlcnlQYXJhbXMgIT09IGZhbHNlKSB7
        CiAgICAgICAgICBtZXJnZVNvbWVLZXlzKHBhcmFtcy5xdWVyeVBhcmFtcywg
        cm91dGVyLmN1cnJlbnRRdWVyeVBhcmFtcywgaGFuZGxlck9iai5xdWVyeVBh
        cmFtcyk7CiAgICAgICAgICBtZXJnZVNvbWVLZXlzKHBhcmFtcy5xdWVyeVBh
        cmFtcywgcXVlcnlQYXJhbXMsIGhhbmRsZXJPYmoucXVlcnlQYXJhbXMpOwog
        ICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHF1ZXJ5UGFyYW1zRXF1YWwo
        cGFyYW1zLnF1ZXJ5UGFyYW1zLCB7fSkpIHsgZGVsZXRlIHBhcmFtcy5xdWVy
        eVBhcmFtczsgfQogICAgICByZXR1cm4gcGFyYW1zOwogICAgfQoKICAgIGZ1
        bmN0aW9uIG1lcmdlKGhhc2gsIG90aGVyKSB7CiAgICAgIGZvciAodmFyIHBy
        b3AgaW4gb3RoZXIpIHsKICAgICAgICBpZiAob3RoZXIuaGFzT3duUHJvcGVy
        dHkocHJvcCkpIHsgaGFzaFtwcm9wXSA9IG90aGVyW3Byb3BdOyB9CiAgICAg
        IH0KICAgIH0KCiAgICBmdW5jdGlvbiBtZXJnZVNvbWVLZXlzKGhhc2gsIG90
        aGVyLCBrZXlzKSB7CiAgICAgIGlmICghb3RoZXIgfHwgIWtleXMpIHsgcmV0
        dXJuOyB9CiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsg
        aSsrKSB7CiAgICAgICAgdmFyIGtleSA9IGtleXNbaV0sIHZhbHVlOwogICAg
        ICAgIGlmKG90aGVyLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAg
        IHZhbHVlID0gb3RoZXJba2V5XTsKICAgICAgICAgIGlmKHZhbHVlID09PSBu
        dWxsIHx8IHZhbHVlID09PSBmYWxzZSB8fCB0eXBlb2YgdmFsdWUgPT09ICJ1
        bmRlZmluZWQiKSB7CiAgICAgICAgICAgIGRlbGV0ZSBoYXNoW2tleV07CiAg
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoYXNoW2tleV0gPSBvdGhl
        cltrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoK
        ICAgIC8qKgogICAgICBAcHJpdmF0ZQogICAgKi8KCiAgICBmdW5jdGlvbiBn
        ZW5lcmF0ZUhhbmRsZXJJbmZvc1dpdGhRdWVyeVBhcmFtcyhyb3V0ZXIsIGhh
        bmRsZXJzLCBxdWVyeVBhcmFtcykgewogICAgICB2YXIgaGFuZGxlckluZm9z
        ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXJzLmxl
        bmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tp
        XSwKICAgICAgICAgIGhhbmRsZXJJbmZvID0geyBoYW5kbGVyOiBoYW5kbGVy
        LmhhbmRsZXIsIG5hbWVzOiBoYW5kbGVyLm5hbWVzLCBjb250ZXh0OiBoYW5k
        bGVyLmNvbnRleHQsIGlzRHluYW1pYzogaGFuZGxlci5pc0R5bmFtaWMgfSwK
        ICAgICAgICAgIGFjdGl2ZVF1ZXJ5UGFyYW1zID0ge307CgogICAgICAgIGlm
        IChxdWVyeVBhcmFtcyAhPT0gZmFsc2UpIHsKICAgICAgICAgIG1lcmdlU29t
        ZUtleXMoYWN0aXZlUXVlcnlQYXJhbXMsIHJvdXRlci5jdXJyZW50UXVlcnlQ
        YXJhbXMsIGhhbmRsZXIucXVlcnlQYXJhbXMpOwogICAgICAgICAgbWVyZ2VT
        b21lS2V5cyhhY3RpdmVRdWVyeVBhcmFtcywgcXVlcnlQYXJhbXMsIGhhbmRs
        ZXIucXVlcnlQYXJhbXMpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhhbmRs
        ZXIucXVlcnlQYXJhbXMgJiYgaGFuZGxlci5xdWVyeVBhcmFtcy5sZW5ndGgg
        PiAwKSB7CiAgICAgICAgICBoYW5kbGVySW5mby5xdWVyeVBhcmFtcyA9IGFj
        dGl2ZVF1ZXJ5UGFyYW1zOwogICAgICAgIH0KCiAgICAgICAgaGFuZGxlcklu
        Zm9zLnB1c2goaGFuZGxlckluZm8pOwogICAgICB9CgogICAgICByZXR1cm4g
        aGFuZGxlckluZm9zOwogICAgfQoKICAgIC8qKgogICAgICBAcHJpdmF0ZQog
        ICAgKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZVF1ZXJ5UGFyYW1UcmFuc2l0aW9u
        KHJvdXRlciwgcXVlcnlQYXJhbXMsIGlzSW50ZXJtZWRpYXRlKSB7CiAgICAg
        IHZhciBjdXJyZW50SGFuZGxlcnMgPSByb3V0ZXIuY3VycmVudEhhbmRsZXJJ
        bmZvcywKICAgICAgICAgIGN1cnJlbnRIYW5kbGVyID0gY3VycmVudEhhbmRs
        ZXJzW2N1cnJlbnRIYW5kbGVycy5sZW5ndGggLSAxXSwKICAgICAgICAgIG5h
        bWUgPSBjdXJyZW50SGFuZGxlci5uYW1lOwoKICAgICAgbG9nKHJvdXRlciwg
        IkF0dGVtcHRpbmcgcXVlcnkgcGFyYW0gdHJhbnNpdGlvbiIpOwoKICAgICAg
        cmV0dXJuIGNyZWF0ZU5hbWVkVHJhbnNpdGlvbihyb3V0ZXIsIFtuYW1lLCBx
        dWVyeVBhcmFtc10sIGlzSW50ZXJtZWRpYXRlKTsKICAgIH0KCiAgICAvKioK
        ICAgICAgQHByaXZhdGUKICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVOYW1l
        ZFRyYW5zaXRpb24ocm91dGVyLCBhcmdzLCBpc0ludGVybWVkaWF0ZSkgewog
        ICAgICB2YXIgcGFydGl0aW9uZWRBcmdzICAgICA9IGV4dHJhY3RRdWVyeVBh
        cmFtcyhhcmdzKSwKICAgICAgICBwdXJlQXJncyAgICAgICAgICAgICAgPSBw
        YXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAgICAgcXVlcnlQYXJhbXMgICAgICAg
        ICAgID0gcGFydGl0aW9uZWRBcmdzWzFdLAogICAgICAgIGhhbmRsZXJzICAg
        ICAgICAgICAgICA9IHJvdXRlci5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKHB1
        cmVBcmdzWzBdKSwKICAgICAgICBoYW5kbGVySW5mb3MgICAgICAgICAgPSBn
        ZW5lcmF0ZUhhbmRsZXJJbmZvc1dpdGhRdWVyeVBhcmFtcyhyb3V0ZXIsIGhh
        bmRsZXJzLCBxdWVyeVBhcmFtcyk7CgoKICAgICAgbG9nKHJvdXRlciwgIkF0
        dGVtcHRpbmcgdHJhbnNpdGlvbiB0byAiICsgcHVyZUFyZ3NbMF0pOwoKICAg
        ICAgcmV0dXJuIHBlcmZvcm1UcmFuc2l0aW9uKHJvdXRlciwKICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJJbmZvcywKICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgIHNsaWNlLmNhbGwocHVyZUFyZ3MsIDEp
        LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyLmN1cnJl
        bnRQYXJhbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVy
        eVBhcmFtcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGws
        CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ludGVybWVkaWF0
        ZSk7CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCiAgICAqLwogICAg
        ZnVuY3Rpb24gY3JlYXRlVVJMVHJhbnNpdGlvbihyb3V0ZXIsIHVybCwgaXNJ
        bnRlcm1lZGlhdGUpIHsKICAgICAgdmFyIHJlc3VsdHMgPSByb3V0ZXIucmVj
        b2duaXplci5yZWNvZ25pemUodXJsKSwKICAgICAgICAgIGN1cnJlbnRIYW5k
        bGVySW5mb3MgPSByb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvcywKICAgICAg
        ICAgIHF1ZXJ5UGFyYW1zID0ge30sCiAgICAgICAgICBpLCBsZW47CgogICAg
        ICBsb2cocm91dGVyLCAiQXR0ZW1wdGluZyBVUkwgdHJhbnNpdGlvbiB0byAi
        ICsgdXJsKTsKCiAgICAgIGlmIChyZXN1bHRzKSB7CiAgICAgICAgLy8gTWFr
        ZSBzdXJlIHRoaXMgcm91dGUgaXMgYWN0dWFsbHkgYWNjZXNzaWJsZSBieSBV
        UkwuCiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVzdWx0cy5sZW5ndGg7
        IGkgPCBsZW47ICsraSkgewoKICAgICAgICAgIGlmIChyb3V0ZXIuZ2V0SGFu
        ZGxlcihyZXN1bHRzW2ldLmhhbmRsZXIpLmluYWNjZXNzaWJsZUJ5VVJMKSB7
        CiAgICAgICAgICAgIHJlc3VsdHMgPSBudWxsOwogICAgICAgICAgICBicmVh
        azsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICgh
        cmVzdWx0cykgewogICAgICAgIHJldHVybiBlcnJvclRyYW5zaXRpb24ocm91
        dGVyLCBuZXcgUm91dGVyLlVucmVjb2duaXplZFVSTEVycm9yKHVybCkpOwog
        ICAgICB9CgogICAgICBmb3IoaSA9IDAsIGxlbiA9IHJlc3VsdHMubGVuZ3Ro
        OyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBtZXJnZShxdWVyeVBhcmFtcywg
        cmVzdWx0c1tpXS5xdWVyeVBhcmFtcyk7CiAgICAgIH0KCiAgICAgIHJldHVy
        biBwZXJmb3JtVHJhbnNpdGlvbihyb3V0ZXIsIHJlc3VsdHMsIFtdLCB7fSwg
        cXVlcnlQYXJhbXMsIG51bGwsIGlzSW50ZXJtZWRpYXRlKTsKICAgIH0KCgog
        ICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBUYWtlcyBhbiBBcnJheSBv
        ZiBgSGFuZGxlckluZm9gcywgZmlndXJlcyBvdXQgd2hpY2ggb25lcyBhcmUK
        ICAgICAgZXhpdGluZywgZW50ZXJpbmcsIG9yIGNoYW5naW5nIGNvbnRleHRz
        LCBhbmQgY2FsbHMgdGhlCiAgICAgIHByb3BlciBoYW5kbGVyIGhvb2tzLgoK
        ICAgICAgRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBmb2xsb3dpbmcgdHJl
        ZSBvZiBoYW5kbGVycy4gRWFjaCBoYW5kbGVyIGlzCiAgICAgIGZvbGxvd2Vk
        IGJ5IHRoZSBVUkwgc2VnbWVudCBpdCBoYW5kbGVzLgoKICAgICAgYGBgCiAg
        ICAgIHx+aW5kZXggKCIvIikKICAgICAgfCB8fnBvc3RzICgiL3Bvc3RzIikK
        ICAgICAgfCB8IHwtc2hvd1Bvc3QgKCIvOmlkIikKICAgICAgfCB8IHwtbmV3
        UG9zdCAoIi9uZXciKQogICAgICB8IHwgfC1lZGl0UG9zdCAoIi9lZGl0IikK
        ICAgICAgfCB8fmFib3V0ICgiL2Fib3V0LzppZCIpCiAgICAgIGBgYAoKICAg
        ICAgQ29uc2lkZXIgdGhlIGZvbGxvd2luZyB0cmFuc2l0aW9uczoKCiAgICAg
        IDEuIEEgVVJMIHRyYW5zaXRpb24gdG8gYC9wb3N0cy8xYC4KICAgICAgICAg
        MS4gVHJpZ2dlcnMgdGhlIGAqbW9kZWxgIGNhbGxiYWNrcyBvbiB0aGUKICAg
        ICAgICAgICAgYGluZGV4YCwgYHBvc3RzYCwgYW5kIGBzaG93UG9zdGAgaGFu
        ZGxlcnMKICAgICAgICAgMi4gVHJpZ2dlcnMgdGhlIGBlbnRlcmAgY2FsbGJh
        Y2sgb24gdGhlIHNhbWUKICAgICAgICAgMy4gVHJpZ2dlcnMgdGhlIGBzZXR1
        cGAgY2FsbGJhY2sgb24gdGhlIHNhbWUKICAgICAgMi4gQSBkaXJlY3QgdHJh
        bnNpdGlvbiB0byBgbmV3UG9zdGAKICAgICAgICAgMS4gVHJpZ2dlcnMgdGhl
        IGBleGl0YCBjYWxsYmFjayBvbiBgc2hvd1Bvc3RgCiAgICAgICAgIDIuIFRy
        aWdnZXJzIHRoZSBgZW50ZXJgIGNhbGxiYWNrIG9uIGBuZXdQb3N0YAogICAg
        ICAgICAzLiBUcmlnZ2VycyB0aGUgYHNldHVwYCBjYWxsYmFjayBvbiBgbmV3
        UG9zdGAKICAgICAgMy4gQSBkaXJlY3QgdHJhbnNpdGlvbiB0byBgYWJvdXRg
        IHdpdGggYSBzcGVjaWZpZWQKICAgICAgICAgY29udGV4dCBvYmplY3QKICAg
        ICAgICAgMS4gVHJpZ2dlcnMgdGhlIGBleGl0YCBjYWxsYmFjayBvbiBgbmV3
        UG9zdGAKICAgICAgICAgICAgYW5kIGBwb3N0c2AKICAgICAgICAgMi4gVHJp
        Z2dlcnMgdGhlIGBzZXJpYWxpemVgIGNhbGxiYWNrIG9uIGBhYm91dGAKICAg
        ICAgICAgMy4gVHJpZ2dlcnMgdGhlIGBlbnRlcmAgY2FsbGJhY2sgb24gYGFi
        b3V0YAogICAgICAgICA0LiBUcmlnZ2VycyB0aGUgYHNldHVwYCBjYWxsYmFj
        ayBvbiBgYWJvdXRgCgogICAgICBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5z
        aXRpb24KICAgICAgQHBhcmFtIHtBcnJheVtIYW5kbGVySW5mb119IGhhbmRs
        ZXJJbmZvcwogICAgKi8KICAgIGZ1bmN0aW9uIHNldHVwQ29udGV4dHModHJh
        bnNpdGlvbiwgaGFuZGxlckluZm9zKSB7CiAgICAgIHZhciByb3V0ZXIgPSB0
        cmFuc2l0aW9uLnJvdXRlciwKICAgICAgICAgIHBhcnRpdGlvbiA9IHBhcnRp
        dGlvbkhhbmRsZXJzKHJvdXRlci5jdXJyZW50SGFuZGxlckluZm9zIHx8IFtd
        LCBoYW5kbGVySW5mb3MpOwoKICAgICAgcm91dGVyLnRhcmdldEhhbmRsZXJJ
        bmZvcyA9IGhhbmRsZXJJbmZvczsKCiAgICAgIGVhY2hIYW5kbGVyKHBhcnRp
        dGlvbi5leGl0ZWQsIGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7CiAgICAgICAg
        dmFyIGhhbmRsZXIgPSBoYW5kbGVySW5mby5oYW5kbGVyOwogICAgICAgIGRl
        bGV0ZSBoYW5kbGVyLmNvbnRleHQ7CiAgICAgICAgaWYgKGhhbmRsZXIuZXhp
        dCkgeyBoYW5kbGVyLmV4aXQoKTsgfQogICAgICB9KTsKCiAgICAgIHZhciBj
        dXJyZW50SGFuZGxlckluZm9zID0gcGFydGl0aW9uLnVuY2hhbmdlZC5zbGlj
        ZSgpOwogICAgICByb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvcyA9IGN1cnJl
        bnRIYW5kbGVySW5mb3M7CgogICAgICBlYWNoSGFuZGxlcihwYXJ0aXRpb24u
        dXBkYXRlZENvbnRleHQsIGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7CiAgICAg
        ICAgaGFuZGxlckVudGVyZWRPclVwZGF0ZWQodHJhbnNpdGlvbiwgY3VycmVu
        dEhhbmRsZXJJbmZvcywgaGFuZGxlckluZm8sIGZhbHNlKTsKICAgICAgfSk7
        CgogICAgICBlYWNoSGFuZGxlcihwYXJ0aXRpb24uZW50ZXJlZCwgZnVuY3Rp
        b24oaGFuZGxlckluZm8pIHsKICAgICAgICBoYW5kbGVyRW50ZXJlZE9yVXBk
        YXRlZCh0cmFuc2l0aW9uLCBjdXJyZW50SGFuZGxlckluZm9zLCBoYW5kbGVy
        SW5mbywgdHJ1ZSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICBA
        cHJpdmF0ZQoKICAgICAgSGVscGVyIG1ldGhvZCB1c2VkIGJ5IHNldHVwQ29u
        dGV4dHMuIEhhbmRsZXMgZXJyb3JzIG9yIHJlZGlyZWN0cwogICAgICB0aGF0
        IG1heSBoYXBwZW4gaW4gZW50ZXIvc2V0dXAuCiAgICAqLwogICAgZnVuY3Rp
        b24gaGFuZGxlckVudGVyZWRPclVwZGF0ZWQodHJhbnNpdGlvbiwgY3VycmVu
        dEhhbmRsZXJJbmZvcywgaGFuZGxlckluZm8sIGVudGVyKSB7CiAgICAgIHZh
        ciBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFuZGxlciwKICAgICAgICAgIGNv
        bnRleHQgPSBoYW5kbGVySW5mby5jb250ZXh0OwoKICAgICAgdHJ5IHsKICAg
        ICAgICBpZiAoZW50ZXIgJiYgaGFuZGxlci5lbnRlcikgeyBoYW5kbGVyLmVu
        dGVyKCk7IH0KICAgICAgICBjaGVja0Fib3J0KHRyYW5zaXRpb24pOwoKICAg
        ICAgICBzZXRDb250ZXh0KGhhbmRsZXIsIGNvbnRleHQpOwogICAgICAgIHNl
        dFF1ZXJ5UGFyYW1zKGhhbmRsZXIsIGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1z
        KTsKCiAgICAgICAgaWYgKGhhbmRsZXIuc2V0dXApIHsgaGFuZGxlci5zZXR1
        cChjb250ZXh0LCBoYW5kbGVySW5mby5xdWVyeVBhcmFtcyk7IH0KICAgICAg
        ICBjaGVja0Fib3J0KHRyYW5zaXRpb24pOwogICAgICB9IGNhdGNoKGUpIHsK
        ICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgUm91dGVyLlRyYW5zaXRpb25B
        Ym9ydGVkKSkgewogICAgICAgICAgLy8gVHJpZ2dlciB0aGUgYGVycm9yYCBl
        dmVudCBzdGFydGluZyBmcm9tIHRoaXMgZmFpbGVkIGhhbmRsZXIuCiAgICAg
        ICAgICB0cmFuc2l0aW9uLnRyaWdnZXIodHJ1ZSwgJ2Vycm9yJywgZSwgdHJh
        bnNpdGlvbiwgaGFuZGxlcik7CiAgICAgICAgfQoKICAgICAgICAvLyBQcm9w
        YWdhdGUgdGhlIGVycm9yIHNvIHRoYXQgdGhlIHRyYW5zaXRpb24gcHJvbWlz
        ZSB3aWxsIHJlamVjdC4KICAgICAgICB0aHJvdyBlOwogICAgICB9CgogICAg
        ICBjdXJyZW50SGFuZGxlckluZm9zLnB1c2goaGFuZGxlckluZm8pOwogICAg
        fQoKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIEl0ZXJhdGVzIG92
        ZXIgYW4gYXJyYXkgb2YgYEhhbmRsZXJJbmZvYHMsIHBhc3NpbmcgdGhlIGhh
        bmRsZXIKICAgICAgYW5kIGNvbnRleHQgaW50byB0aGUgY2FsbGJhY2suCgog
        ICAgICBAcGFyYW0ge0FycmF5W0hhbmRsZXJJbmZvXX0gaGFuZGxlckluZm9z
        CiAgICAgIEBwYXJhbSB7RnVuY3Rpb24oT2JqZWN0LCBPYmplY3QpfSBjYWxs
        YmFjawogICAgKi8KICAgIGZ1bmN0aW9uIGVhY2hIYW5kbGVyKGhhbmRsZXJJ
        bmZvcywgY2FsbGJhY2spIHsKICAgICAgZm9yICh2YXIgaT0wLCBsPWhhbmRs
        ZXJJbmZvcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgY2FsbGJhY2so
        aGFuZGxlckluZm9zW2ldKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAg
        ICBAcHJpdmF0ZQoKICAgICAgZGV0ZXJtaW5lcyBpZiB0d28gcXVlcnlwYXJh
        bSBvYmplY3RzIGFyZSB0aGUgc2FtZSBvciBub3QKICAgICoqLwogICAgZnVu
        Y3Rpb24gcXVlcnlQYXJhbXNFcXVhbChhLCBiKSB7CiAgICAgIGEgPSBhIHx8
        IHt9OwogICAgICBiID0gYiB8fCB7fTsKICAgICAgdmFyIGNoZWNrZWRLZXlz
        ID0gW10sIGtleTsKICAgICAgZm9yKGtleSBpbiBhKSB7CiAgICAgICAgaWYg
        KCFhLmhhc093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KICAgICAg
        ICBpZihiW2tleV0gIT09IGFba2V5XSkgeyByZXR1cm4gZmFsc2U7IH0KICAg
        ICAgICBjaGVja2VkS2V5cy5wdXNoKGtleSk7CiAgICAgIH0KICAgICAgZm9y
        KGtleSBpbiBiKSB7CiAgICAgICAgaWYgKCFiLmhhc093blByb3BlcnR5KGtl
        eSkpIHsgY29udGludWU7IH0KICAgICAgICBpZiAofmNoZWNrZWRLZXlzLmlu
        ZGV4T2Yoa2V5KSkgeyBjb250aW51ZTsgfQogICAgICAgIC8vIGIgaGFzIGEg
        a2V5IG5vdCBpbiBhCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAg
        ICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICBAcHJpdmF0
        ZQoKICAgICAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0cmFuc2l0
        aW9uaW5nIGZyb20gb25lIFVSTCB0bwogICAgICBhbm90aGVyIHRvIGRldGVy
        bWluZSB3aGljaCBoYW5kbGVycyBhcmUgbm8gbG9uZ2VyIGFjdGl2ZSwKICAg
        ICAgd2hpY2ggaGFuZGxlcnMgYXJlIG5ld2x5IGFjdGl2ZSwgYW5kIHdoaWNo
        IGhhbmRsZXJzIHJlbWFpbgogICAgICBhY3RpdmUgYnV0IGhhdmUgdGhlaXIg
        Y29udGV4dCBjaGFuZ2VkLgoKICAgICAgVGFrZSBhIGxpc3Qgb2Ygb2xkIGhh
        bmRsZXJzIGFuZCBuZXcgaGFuZGxlcnMgYW5kIHBhcnRpdGlvbgogICAgICB0
        aGVtIGludG8gZm91ciBidWNrZXRzOgoKICAgICAgKiB1bmNoYW5nZWQ6IHRo
        ZSBoYW5kbGVyIHdhcyBhY3RpdmUgaW4gYm90aCB0aGUgb2xkIGFuZAogICAg
        ICAgIG5ldyBVUkwsIGFuZCBpdHMgY29udGV4dCByZW1haW5zIHRoZSBzYW1l
        CiAgICAgICogdXBkYXRlZCBjb250ZXh0OiB0aGUgaGFuZGxlciB3YXMgYWN0
        aXZlIGluIGJvdGggdGhlCiAgICAgICAgb2xkIGFuZCBuZXcgVVJMLCBidXQg
        aXRzIGNvbnRleHQgY2hhbmdlZC4gVGhlIGhhbmRsZXIncwogICAgICAgIGBz
        ZXR1cGAgbWV0aG9kLCBpZiBhbnksIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhl
        IG5ldwogICAgICAgIGNvbnRleHQuCiAgICAgICogZXhpdGVkOiB0aGUgaGFu
        ZGxlciB3YXMgYWN0aXZlIGluIHRoZSBvbGQgVVJMLCBidXQgaXMKICAgICAg
        ICBubyBsb25nZXIgYWN0aXZlLgogICAgICAqIGVudGVyZWQ6IHRoZSBoYW5k
        bGVyIHdhcyBub3QgYWN0aXZlIGluIHRoZSBvbGQgVVJMLCBidXQKICAgICAg
        ICBpcyBub3cgYWN0aXZlLgoKICAgICAgVGhlIFBhcnRpdGlvbmVkSGFuZGxl
        cnMgc3RydWN0dXJlIGhhcyBmb3VyIGZpZWxkczoKCiAgICAgICogYHVwZGF0
        ZWRDb250ZXh0YDogYSBsaXN0IG9mIGBIYW5kbGVySW5mb2Agb2JqZWN0cyB0
        aGF0CiAgICAgICAgcmVwcmVzZW50IGhhbmRsZXJzIHRoYXQgcmVtYWluIGFj
        dGl2ZSBidXQgaGF2ZSBhIGNoYW5nZWQKICAgICAgICBjb250ZXh0CiAgICAg
        ICogYGVudGVyZWRgOiBhIGxpc3Qgb2YgYEhhbmRsZXJJbmZvYCBvYmplY3Rz
        IHRoYXQgcmVwcmVzZW50CiAgICAgICAgaGFuZGxlcnMgdGhhdCBhcmUgbmV3
        bHkgYWN0aXZlCiAgICAgICogYGV4aXRlZGA6IGEgbGlzdCBvZiBgSGFuZGxl
        ckluZm9gIG9iamVjdHMgdGhhdCBhcmUgbm8KICAgICAgICBsb25nZXIgYWN0
        aXZlLgogICAgICAqIGB1bmNoYW5nZWRgOiBhIGxpc3Qgb2YgYEhhbmRlcklu
        Zm9gIG9iamVjdHMgdGhhdCByZW1haW4gYWN0aXZlLgoKICAgICAgQHBhcmFt
        IHtBcnJheVtIYW5kbGVySW5mb119IG9sZEhhbmRsZXJzIGEgbGlzdCBvZiB0
        aGUgaGFuZGxlcgogICAgICAgIGluZm9ybWF0aW9uIGZvciB0aGUgcHJldmlv
        dXMgVVJMIChvciBgW11gIGlmIHRoaXMgaXMgdGhlCiAgICAgICAgZmlyc3Qg
        aGFuZGxlZCB0cmFuc2l0aW9uKQogICAgICBAcGFyYW0ge0FycmF5W0hhbmRs
        ZXJJbmZvXX0gbmV3SGFuZGxlcnMgYSBsaXN0IG9mIHRoZSBoYW5kbGVyCiAg
        ICAgICAgaW5mb3JtYXRpb24gZm9yIHRoZSBuZXcgVVJMCgogICAgICBAcmV0
        dXJuIHtQYXJ0aXRpb259CiAgICAqLwogICAgZnVuY3Rpb24gcGFydGl0aW9u
        SGFuZGxlcnMob2xkSGFuZGxlcnMsIG5ld0hhbmRsZXJzKSB7CiAgICAgIHZh
        ciBoYW5kbGVycyA9IHsKICAgICAgICAgICAgdXBkYXRlZENvbnRleHQ6IFtd
        LAogICAgICAgICAgICBleGl0ZWQ6IFtdLAogICAgICAgICAgICBlbnRlcmVk
        OiBbXSwKICAgICAgICAgICAgdW5jaGFuZ2VkOiBbXQogICAgICAgICAgfTsK
        CiAgICAgIHZhciBoYW5kbGVyQ2hhbmdlZCwgY29udGV4dENoYW5nZWQsIHF1
        ZXJ5UGFyYW1zQ2hhbmdlZCwgaSwgbDsKCiAgICAgIGZvciAoaT0wLCBsPW5l
        d0hhbmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICB2YXIgb2xk
        SGFuZGxlciA9IG9sZEhhbmRsZXJzW2ldLCBuZXdIYW5kbGVyID0gbmV3SGFu
        ZGxlcnNbaV07CgogICAgICAgIGlmICghb2xkSGFuZGxlciB8fCBvbGRIYW5k
        bGVyLmhhbmRsZXIgIT09IG5ld0hhbmRsZXIuaGFuZGxlcikgewogICAgICAg
        ICAgaGFuZGxlckNoYW5nZWQgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAo
        IXF1ZXJ5UGFyYW1zRXF1YWwob2xkSGFuZGxlci5xdWVyeVBhcmFtcywgbmV3
        SGFuZGxlci5xdWVyeVBhcmFtcykpIHsKICAgICAgICAgIHF1ZXJ5UGFyYW1z
        Q2hhbmdlZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoaGFuZGxl
        ckNoYW5nZWQpIHsKICAgICAgICAgIGhhbmRsZXJzLmVudGVyZWQucHVzaChu
        ZXdIYW5kbGVyKTsKICAgICAgICAgIGlmIChvbGRIYW5kbGVyKSB7IGhhbmRs
        ZXJzLmV4aXRlZC51bnNoaWZ0KG9sZEhhbmRsZXIpOyB9CiAgICAgICAgfSBl
        bHNlIGlmIChjb250ZXh0Q2hhbmdlZCB8fCBvbGRIYW5kbGVyLmNvbnRleHQg
        IT09IG5ld0hhbmRsZXIuY29udGV4dCB8fCBxdWVyeVBhcmFtc0NoYW5nZWQp
        IHsKICAgICAgICAgIGNvbnRleHRDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAg
        IGhhbmRsZXJzLnVwZGF0ZWRDb250ZXh0LnB1c2gobmV3SGFuZGxlcik7CiAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhhbmRsZXJzLnVuY2hhbmdlZC5w
        dXNoKG9sZEhhbmRsZXIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9y
        IChpPW5ld0hhbmRsZXJzLmxlbmd0aCwgbD1vbGRIYW5kbGVycy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICAgICAgaGFuZGxlcnMuZXhpdGVkLnVuc2hpZnQo
        b2xkSGFuZGxlcnNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxl
        cnM7CiAgICB9CgogICAgZnVuY3Rpb24gdHJpZ2dlcihyb3V0ZXIsIGhhbmRs
        ZXJJbmZvcywgaWdub3JlRmFpbHVyZSwgYXJncykgewogICAgICBpZiAocm91
        dGVyLnRyaWdnZXJFdmVudCkgewogICAgICAgIHJvdXRlci50cmlnZ2VyRXZl
        bnQoaGFuZGxlckluZm9zLCBpZ25vcmVGYWlsdXJlLCBhcmdzKTsKICAgICAg
        ICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBuYW1lID0gYXJncy5zaGlm
        dCgpOwoKICAgICAgaWYgKCFoYW5kbGVySW5mb3MpIHsKICAgICAgICBpZiAo
        aWdub3JlRmFpbHVyZSkgeyByZXR1cm47IH0KICAgICAgICB0aHJvdyBuZXcg
        RXJyb3IoIkNvdWxkIG5vdCB0cmlnZ2VyIGV2ZW50ICciICsgbmFtZSArICIn
        LiBUaGVyZSBhcmUgbm8gYWN0aXZlIGhhbmRsZXJzIik7CiAgICAgIH0KCiAg
        ICAgIHZhciBldmVudFdhc0hhbmRsZWQgPSBmYWxzZTsKCiAgICAgIGZvciAo
        dmFyIGk9aGFuZGxlckluZm9zLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHsKICAg
        ICAgICB2YXIgaGFuZGxlckluZm8gPSBoYW5kbGVySW5mb3NbaV0sCiAgICAg
        ICAgICAgIGhhbmRsZXIgPSBoYW5kbGVySW5mby5oYW5kbGVyOwoKICAgICAg
        ICBpZiAoaGFuZGxlci5ldmVudHMgJiYgaGFuZGxlci5ldmVudHNbbmFtZV0p
        IHsKICAgICAgICAgIGlmIChoYW5kbGVyLmV2ZW50c1tuYW1lXS5hcHBseSho
        YW5kbGVyLCBhcmdzKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICBldmVudFdh
        c0hhbmRsZWQgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
        ICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAg
        ICAgaWYgKCFldmVudFdhc0hhbmRsZWQgJiYgIWlnbm9yZUZhaWx1cmUpIHsK
        ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vdGhpbmcgaGFuZGxlZCB0aGUg
        ZXZlbnQgJyIgKyBuYW1lICsgIicuIik7CiAgICAgIH0KICAgIH0KCiAgICBm
        dW5jdGlvbiBzZXRDb250ZXh0KGhhbmRsZXIsIGNvbnRleHQpIHsKICAgICAg
        aGFuZGxlci5jb250ZXh0ID0gY29udGV4dDsKICAgICAgaWYgKGhhbmRsZXIu
        Y29udGV4dERpZENoYW5nZSkgeyBoYW5kbGVyLmNvbnRleHREaWRDaGFuZ2Uo
        KTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFF1ZXJ5UGFyYW1zKGhhbmRs
        ZXIsIHF1ZXJ5UGFyYW1zKSB7CiAgICAgIGhhbmRsZXIucXVlcnlQYXJhbXMg
        PSBxdWVyeVBhcmFtczsKICAgICAgaWYgKGhhbmRsZXIucXVlcnlQYXJhbXNE
        aWRDaGFuZ2UpIHsgaGFuZGxlci5xdWVyeVBhcmFtc0RpZENoYW5nZSgpOyB9
        CiAgICB9CgoKICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAgICAgRXh0cmFj
        dHMgcXVlcnkgcGFyYW1zIGZyb20gdGhlIGVuZCBvZiBhbiBhcnJheQogICAg
        KiovCgogICAgZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5UGFyYW1zKGFycmF5KSB7
        CiAgICAgIHZhciBsZW4gPSAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSwgaGVh
        ZCwgcXVlcnlQYXJhbXM7CgogICAgICBpZihsZW4gJiYgbGVuID4gMCAmJiBh
        cnJheVtsZW4gLSAxXSAmJiBhcnJheVtsZW4gLSAxXS5oYXNPd25Qcm9wZXJ0
        eSgncXVlcnlQYXJhbXMnKSkgewogICAgICAgIHF1ZXJ5UGFyYW1zID0gYXJy
        YXlbbGVuIC0gMV0ucXVlcnlQYXJhbXM7CiAgICAgICAgaGVhZCA9IHNsaWNl
        LmNhbGwoYXJyYXksIDAsIGxlbiAtIDEpOwogICAgICAgIHJldHVybiBbaGVh
        ZCwgcXVlcnlQYXJhbXNdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVy
        biBbYXJyYXksIG51bGxdOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24g
        cGVyZm9ybUludGVybWVkaWF0ZVRyYW5zaXRpb24ocm91dGVyLCByZWNvZ0hh
        bmRsZXJzLCBtYXRjaFBvaW50UmVzdWx0cykgewoKICAgICAgdmFyIGhhbmRs
        ZXJJbmZvcyA9IGdlbmVyYXRlSGFuZGxlckluZm9zKHJvdXRlciwgcmVjb2dI
        YW5kbGVycyk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcklu
        Zm9zLmxlbmd0aDsgKytpKSB7CiAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0g
        aGFuZGxlckluZm9zW2ldOwogICAgICAgIGhhbmRsZXJJbmZvLmNvbnRleHQg
        PSBtYXRjaFBvaW50UmVzdWx0cy5wcm92aWRlZE1vZGVsc1toYW5kbGVySW5m
        by5uYW1lXTsKICAgICAgfQoKICAgICAgdmFyIHN0dWJiZWRUcmFuc2l0aW9u
        ID0gewogICAgICAgIHJvdXRlcjogcm91dGVyLAogICAgICAgIGlzQWJvcnRl
        ZDogZmFsc2UKICAgICAgfTsKCiAgICAgIHNldHVwQ29udGV4dHMoc3R1YmJl
        ZFRyYW5zaXRpb24sIGhhbmRsZXJJbmZvcyk7CiAgICB9CgogICAgLyoqCiAg
        ICAgIEBwcml2YXRlCgogICAgICBDcmVhdGVzLCBiZWdpbnMsIGFuZCByZXR1
        cm5zIGEgVHJhbnNpdGlvbi4KICAgICAqLwogICAgZnVuY3Rpb24gcGVyZm9y
        bVRyYW5zaXRpb24ocm91dGVyLCByZWNvZ0hhbmRsZXJzLCBwcm92aWRlZE1v
        ZGVsc0FycmF5LCBwYXJhbXMsIHF1ZXJ5UGFyYW1zLCBkYXRhLCBpc0ludGVy
        bWVkaWF0ZSkgewoKICAgICAgdmFyIG1hdGNoUG9pbnRSZXN1bHRzID0gZ2V0
        TWF0Y2hQb2ludChyb3V0ZXIsIHJlY29nSGFuZGxlcnMsIHByb3ZpZGVkTW9k
        ZWxzQXJyYXksIHBhcmFtcywgcXVlcnlQYXJhbXMpLAogICAgICAgICAgdGFy
        Z2V0TmFtZSA9IHJlY29nSGFuZGxlcnNbcmVjb2dIYW5kbGVycy5sZW5ndGgg
        LSAxXS5oYW5kbGVyLAogICAgICAgICAgd2FzVHJhbnNpdGlvbmluZyA9IGZh
        bHNlLAogICAgICAgICAgY3VycmVudEhhbmRsZXJJbmZvcyA9IHJvdXRlci5j
        dXJyZW50SGFuZGxlckluZm9zOwoKICAgICAgaWYgKGlzSW50ZXJtZWRpYXRl
        KSB7CiAgICAgICAgcmV0dXJuIHBlcmZvcm1JbnRlcm1lZGlhdGVUcmFuc2l0
        aW9uKHJvdXRlciwgcmVjb2dIYW5kbGVycywgbWF0Y2hQb2ludFJlc3VsdHMp
        OwogICAgICB9CgogICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkg
        YSB0cmFuc2l0aW9uIHVuZGVyd2F5LgogICAgICBpZiAocm91dGVyLmFjdGl2
        ZVRyYW5zaXRpb24pIHsKICAgICAgICBpZiAodHJhbnNpdGlvbnNJZGVudGlj
        YWwocm91dGVyLmFjdGl2ZVRyYW5zaXRpb24sIHRhcmdldE5hbWUsIHByb3Zp
        ZGVkTW9kZWxzQXJyYXksIHF1ZXJ5UGFyYW1zKSkgewogICAgICAgICAgcmV0
        dXJuIHJvdXRlci5hY3RpdmVUcmFuc2l0aW9uOwogICAgICAgIH0KICAgICAg
        ICByb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbi5hYm9ydCgpOwogICAgICAgIHdh
        c1RyYW5zaXRpb25pbmcgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgZGVm
        ZXJyZWQgPSBSU1ZQLmRlZmVyKCksCiAgICAgICAgICB0cmFuc2l0aW9uID0g
        bmV3IFRyYW5zaXRpb24ocm91dGVyLCBkZWZlcnJlZC5wcm9taXNlKTsKCiAg
        ICAgIHRyYW5zaXRpb24udGFyZ2V0TmFtZSA9IHRhcmdldE5hbWU7CiAgICAg
        IHRyYW5zaXRpb24ucHJvdmlkZWRNb2RlbHMgPSBtYXRjaFBvaW50UmVzdWx0
        cy5wcm92aWRlZE1vZGVsczsKICAgICAgdHJhbnNpdGlvbi5wcm92aWRlZE1v
        ZGVsc0FycmF5ID0gcHJvdmlkZWRNb2RlbHNBcnJheTsKICAgICAgdHJhbnNp
        dGlvbi5wYXJhbXMgPSBtYXRjaFBvaW50UmVzdWx0cy5wYXJhbXM7CiAgICAg
        IHRyYW5zaXRpb24uZGF0YSA9IGRhdGEgfHwge307CiAgICAgIHRyYW5zaXRp
        b24ucXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtczsKICAgICAgdHJhbnNpdGlv
        bi5waXZvdEhhbmRsZXIgPSBtYXRjaFBvaW50UmVzdWx0cy5waXZvdEhhbmRs
        ZXI7CiAgICAgIHJvdXRlci5hY3RpdmVUcmFuc2l0aW9uID0gdHJhbnNpdGlv
        bjsKCiAgICAgIHZhciBoYW5kbGVySW5mb3MgPSBnZW5lcmF0ZUhhbmRsZXJJ
        bmZvcyhyb3V0ZXIsIHJlY29nSGFuZGxlcnMpOwogICAgICB0cmFuc2l0aW9u
        LmhhbmRsZXJJbmZvcyA9IGhhbmRsZXJJbmZvczsKCiAgICAgIC8vIEZpcmUg
        J3dpbGxUcmFuc2l0aW9uJyBldmVudCBvbiBjdXJyZW50IGhhbmRsZXJzLCBi
        dXQgZG9uJ3QgZmlyZSBpdAogICAgICAvLyBpZiBhIHRyYW5zaXRpb24gd2Fz
        IGFscmVhZHkgdW5kZXJ3YXkuCiAgICAgIGlmICghd2FzVHJhbnNpdGlvbmlu
        ZykgewogICAgICAgIHRyaWdnZXIocm91dGVyLCBjdXJyZW50SGFuZGxlcklu
        Zm9zLCB0cnVlLCBbJ3dpbGxUcmFuc2l0aW9uJywgdHJhbnNpdGlvbl0pOwog
        ICAgICB9CgogICAgICBsb2cocm91dGVyLCB0cmFuc2l0aW9uLnNlcXVlbmNl
        LCAiQmVnaW5uaW5nIHZhbGlkYXRpb24gZm9yIHRyYW5zaXRpb24gdG8gIiAr
        IHRyYW5zaXRpb24udGFyZ2V0TmFtZSk7CiAgICAgIHZhbGlkYXRlRW50cnko
        dHJhbnNpdGlvbiwgbWF0Y2hQb2ludFJlc3VsdHMubWF0Y2hQb2ludCwgbWF0
        Y2hQb2ludFJlc3VsdHMuaGFuZGxlclBhcmFtcykKICAgICAgICAgICAgICAg
        ICAgIC50aGVuKHRyYW5zaXRpb25TdWNjZXNzLCB0cmFuc2l0aW9uRmFpbHVy
        ZSk7CgogICAgICByZXR1cm4gdHJhbnNpdGlvbjsKCiAgICAgIGZ1bmN0aW9u
        IHRyYW5zaXRpb25TdWNjZXNzKCkgewogICAgICAgIGNoZWNrQWJvcnQodHJh
        bnNpdGlvbik7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmaW5hbGl6ZVRy
        YW5zaXRpb24odHJhbnNpdGlvbiwgaGFuZGxlckluZm9zKTsKCiAgICAgICAg
        ICAvLyBjdXJyZW50SGFuZGxlckluZm9zIHdhcyB1cGRhdGVkIGluIGZpbmFs
        aXplVHJhbnNpdGlvbgogICAgICAgICAgdHJpZ2dlcihyb3V0ZXIsIHJvdXRl
        ci5jdXJyZW50SGFuZGxlckluZm9zLCB0cnVlLCBbJ2RpZFRyYW5zaXRpb24n
        XSk7CgogICAgICAgICAgaWYgKHJvdXRlci5kaWRUcmFuc2l0aW9uKSB7CiAg
        ICAgICAgICAgIHJvdXRlci5kaWRUcmFuc2l0aW9uKGhhbmRsZXJJbmZvcyk7
        CiAgICAgICAgICB9CgogICAgICAgICAgbG9nKHJvdXRlciwgdHJhbnNpdGlv
        bi5zZXF1ZW5jZSwgIlRSQU5TSVRJT04gQ09NUExFVEUuIik7CgogICAgICAg
        ICAgLy8gUmVzb2x2ZSB3aXRoIHRoZSBmaW5hbCBoYW5kbGVyLgogICAgICAg
        ICAgdHJhbnNpdGlvbi5pc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgZGVm
        ZXJyZWQucmVzb2x2ZShoYW5kbGVySW5mb3NbaGFuZGxlckluZm9zLmxlbmd0
        aCAtIDFdLmhhbmRsZXIpOwogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAg
        ICAgZGVmZXJyZWQucmVqZWN0KGUpOwogICAgICAgIH0KCiAgICAgICAgLy8g
        RG9uJ3QgbnVsbGlmeSBpZiBhbm90aGVyIHRyYW5zaXRpb24gaXMgdW5kZXJ3
        YXkgKG1lYW5pbmcKICAgICAgICAvLyB0aGVyZSB3YXMgYSB0cmFuc2l0aW9u
        IGluaXRpYXRlZCB3aXRoIGVudGVyL3NldHVwKS4KICAgICAgICBpZiAoIXRy
        YW5zaXRpb24uaXNBYm9ydGVkKSB7CiAgICAgICAgICByb3V0ZXIuYWN0aXZl
        VHJhbnNpdGlvbiA9IG51bGw7CiAgICAgICAgfQogICAgICB9CgogICAgICBm
        dW5jdGlvbiB0cmFuc2l0aW9uRmFpbHVyZShyZWFzb24pIHsKICAgICAgICBk
        ZWZlcnJlZC5yZWplY3QocmVhc29uKTsKICAgICAgfQogICAgfQoKICAgIC8q
        KgogICAgICBAcHJpdmF0ZQoKICAgICAgQWNjZXB0cyBoYW5kbGVycyBpbiBS
        ZWNvZ25pemVyIGZvcm1hdCwgZWl0aGVyIHJldHVybmVkIGZyb20KICAgICAg
        cmVjb2duaXplKCkgb3IgaGFuZGxlcnNGb3IoKSwgYW5kIHJldHVybnMgdW5p
        ZmllZAogICAgICBgSGFuZGxlckluZm9gcy4KICAgICAqLwogICAgZnVuY3Rp
        b24gZ2VuZXJhdGVIYW5kbGVySW5mb3Mocm91dGVyLCByZWNvZ0hhbmRsZXJz
        KSB7CiAgICAgIHZhciBoYW5kbGVySW5mb3MgPSBbXTsKICAgICAgZm9yICh2
        YXIgaSA9IDAsIGxlbiA9IHJlY29nSGFuZGxlcnMubGVuZ3RoOyBpIDwgbGVu
        OyArK2kpIHsKICAgICAgICB2YXIgaGFuZGxlck9iaiA9IHJlY29nSGFuZGxl
        cnNbaV0sCiAgICAgICAgICAgIGlzRHluYW1pYyA9IGhhbmRsZXJPYmouaXNE
        eW5hbWljIHx8IChoYW5kbGVyT2JqLm5hbWVzICYmIGhhbmRsZXJPYmoubmFt
        ZXMubGVuZ3RoKTsKCiAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0gewogICAg
        ICAgICAgaXNEeW5hbWljOiAhIWlzRHluYW1pYywKICAgICAgICAgIG5hbWU6
        IGhhbmRsZXJPYmouaGFuZGxlciwKICAgICAgICAgIGhhbmRsZXI6IHJvdXRl
        ci5nZXRIYW5kbGVyKGhhbmRsZXJPYmouaGFuZGxlcikKICAgICAgICB9Owog
        ICAgICAgIGlmKGhhbmRsZXJPYmoucXVlcnlQYXJhbXMpIHsKICAgICAgICAg
        IGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zID0gaGFuZGxlck9iai5xdWVyeVBh
        cmFtczsKICAgICAgICB9CiAgICAgICAgaGFuZGxlckluZm9zLnB1c2goaGFu
        ZGxlckluZm8pOwogICAgICB9CiAgICAgIHJldHVybiBoYW5kbGVySW5mb3M7
        CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCiAgICAgKi8KICAgIGZ1
        bmN0aW9uIHRyYW5zaXRpb25zSWRlbnRpY2FsKG9sZFRyYW5zaXRpb24sIHRh
        cmdldE5hbWUsIHByb3ZpZGVkTW9kZWxzQXJyYXksIHF1ZXJ5UGFyYW1zKSB7
        CgogICAgICBpZiAob2xkVHJhbnNpdGlvbi50YXJnZXROYW1lICE9PSB0YXJn
        ZXROYW1lKSB7IHJldHVybiBmYWxzZTsgfQoKICAgICAgdmFyIG9sZE1vZGVs
        cyA9IG9sZFRyYW5zaXRpb24ucHJvdmlkZWRNb2RlbHNBcnJheTsKICAgICAg
        aWYgKG9sZE1vZGVscy5sZW5ndGggIT09IHByb3ZpZGVkTW9kZWxzQXJyYXku
        bGVuZ3RoKSB7IHJldHVybiBmYWxzZTsgfQoKICAgICAgZm9yICh2YXIgaSA9
        IDAsIGxlbiA9IG9sZE1vZGVscy5sZW5ndGg7IGkgPCBsZW47ICsraSkgewog
        ICAgICAgIGlmIChvbGRNb2RlbHNbaV0gIT09IHByb3ZpZGVkTW9kZWxzQXJy
        YXlbaV0pIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAgIH0KCiAgICAgIGlmKCFx
        dWVyeVBhcmFtc0VxdWFsKG9sZFRyYW5zaXRpb24ucXVlcnlQYXJhbXMsIHF1
        ZXJ5UGFyYW1zKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoK
        ICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2
        YXRlCgogICAgICBVcGRhdGVzIHRoZSBVUkwgKGlmIG5lY2Vzc2FyeSkgYW5k
        IGNhbGxzIGBzZXR1cENvbnRleHRzYAogICAgICB0byB1cGRhdGUgdGhlIHJv
        dXRlcidzIGFycmF5IG9mIGBjdXJyZW50SGFuZGxlckluZm9zYC4KICAgICAq
        LwogICAgZnVuY3Rpb24gZmluYWxpemVUcmFuc2l0aW9uKHRyYW5zaXRpb24s
        IGhhbmRsZXJJbmZvcykgewoKICAgICAgbG9nKHRyYW5zaXRpb24ucm91dGVy
        LCB0cmFuc2l0aW9uLnNlcXVlbmNlLCAiVmFsaWRhdGlvbiBzdWNjZWVkZWQs
        IGZpbmFsaXppbmcgdHJhbnNpdGlvbjsiKTsKCiAgICAgIHZhciByb3V0ZXIg
        PSB0cmFuc2l0aW9uLnJvdXRlciwKICAgICAgICAgIHNlcSA9IHRyYW5zaXRp
        b24uc2VxdWVuY2UsCiAgICAgICAgICBoYW5kbGVyTmFtZSA9IGhhbmRsZXJJ
        bmZvc1toYW5kbGVySW5mb3MubGVuZ3RoIC0gMV0ubmFtZSwKICAgICAgICAg
        IHVybE1ldGhvZCA9IHRyYW5zaXRpb24udXJsTWV0aG9kLAogICAgICAgICAg
        aTsKCiAgICAgIC8vIENvbGxlY3QgcGFyYW1zIGZvciBVUkwuCiAgICAgIHZh
        ciBvYmplY3RzID0gW10sIHByb3ZpZGVkTW9kZWxzID0gdHJhbnNpdGlvbi5w
        cm92aWRlZE1vZGVsc0FycmF5LnNsaWNlKCk7CiAgICAgIGZvciAoaSA9IGhh
        bmRsZXJJbmZvcy5sZW5ndGggLSAxOyBpPj0wOyAtLWkpIHsKICAgICAgICB2
        YXIgaGFuZGxlckluZm8gPSBoYW5kbGVySW5mb3NbaV07CiAgICAgICAgaWYg
        KGhhbmRsZXJJbmZvLmlzRHluYW1pYykgewogICAgICAgICAgdmFyIHByb3Zp
        ZGVkTW9kZWwgPSBwcm92aWRlZE1vZGVscy5wb3AoKTsKICAgICAgICAgIG9i
        amVjdHMudW5zaGlmdChpc1BhcmFtKHByb3ZpZGVkTW9kZWwpID8gcHJvdmlk
        ZWRNb2RlbC50b1N0cmluZygpIDogaGFuZGxlckluZm8uY29udGV4dCk7CiAg
        ICAgICAgfQoKICAgICAgICBpZiAoaGFuZGxlckluZm8uaGFuZGxlci5pbmFj
        Y2Vzc2libGVCeVVSTCkgewogICAgICAgICAgdXJsTWV0aG9kID0gbnVsbDsK
        ICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBuZXdRdWVyeVBhcmFtcyA9
        IHt9OwogICAgICBmb3IgKGkgPSBoYW5kbGVySW5mb3MubGVuZ3RoIC0gMTsg
        aT49MDsgLS1pKSB7CiAgICAgICAgbWVyZ2UobmV3UXVlcnlQYXJhbXMsIGhh
        bmRsZXJJbmZvc1tpXS5xdWVyeVBhcmFtcyk7CiAgICAgIH0KICAgICAgcm91
        dGVyLmN1cnJlbnRRdWVyeVBhcmFtcyA9IG5ld1F1ZXJ5UGFyYW1zOwoKCiAg
        ICAgIHZhciBwYXJhbXMgPSBwYXJhbXNGb3JIYW5kbGVyKHJvdXRlciwgaGFu
        ZGxlck5hbWUsIG9iamVjdHMsIHRyYW5zaXRpb24ucXVlcnlQYXJhbXMpOwoK
        ICAgICAgcm91dGVyLmN1cnJlbnRQYXJhbXMgPSBwYXJhbXM7CgogICAgICBp
        ZiAodXJsTWV0aG9kKSB7CiAgICAgICAgdmFyIHVybCA9IHJvdXRlci5yZWNv
        Z25pemVyLmdlbmVyYXRlKGhhbmRsZXJOYW1lLCBwYXJhbXMpOwoKICAgICAg
        ICBpZiAodXJsTWV0aG9kID09PSAncmVwbGFjZScpIHsKICAgICAgICAgIHJv
        dXRlci5yZXBsYWNlVVJMKHVybCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAg
        ICAgIC8vIEFzc3VtZSBldmVyeXRoaW5nIGVsc2UgaXMganVzdCBhIFVSTCB1
        cGRhdGUgZm9yIG5vdy4KICAgICAgICAgIHJvdXRlci51cGRhdGVVUkwodXJs
        KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNldHVwQ29udGV4dHModHJh
        bnNpdGlvbiwgaGFuZGxlckluZm9zKTsKICAgIH0KCiAgICAvKioKICAgICAg
        QHByaXZhdGUKCiAgICAgIEludGVybmFsIGZ1bmN0aW9uIHVzZWQgdG8gY29u
        c3RydWN0IHRoZSBjaGFpbiBvZiBwcm9taXNlcyB1c2VkCiAgICAgIHRvIHZh
        bGlkYXRlIGEgdHJhbnNpdGlvbi4gV3JhcHMgY2FsbHMgdG8gYGJlZm9yZU1v
        ZGVsYCwgYG1vZGVsYCwKICAgICAgYW5kIGBhZnRlck1vZGVsYCBpbiBwcm9t
        aXNlcywgYW5kIGNoZWNrcyBmb3IgcmVkaXJlY3RzL2Fib3J0cwogICAgICBi
        ZXR3ZWVuIGVhY2guCiAgICAgKi8KICAgIGZ1bmN0aW9uIHZhbGlkYXRlRW50
        cnkodHJhbnNpdGlvbiwgbWF0Y2hQb2ludCwgaGFuZGxlclBhcmFtcykgewoK
        ICAgICAgdmFyIGhhbmRsZXJJbmZvcyA9IHRyYW5zaXRpb24uaGFuZGxlcklu
        Zm9zLAogICAgICAgICAgaW5kZXggPSB0cmFuc2l0aW9uLnJlc29sdmVJbmRl
        eDsKCiAgICAgIGlmIChpbmRleCA9PT0gaGFuZGxlckluZm9zLmxlbmd0aCkg
        ewogICAgICAgIC8vIE5vIG1vcmUgY29udGV4dHMgdG8gcmVzb2x2ZS4KICAg
        ICAgICByZXR1cm4gUlNWUC5yZXNvbHZlKHRyYW5zaXRpb24ucmVzb2x2ZWRN
        b2RlbHMpOwogICAgICB9CgogICAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlv
        bi5yb3V0ZXIsCiAgICAgICAgICBoYW5kbGVySW5mbyA9IGhhbmRsZXJJbmZv
        c1tpbmRleF0sCiAgICAgICAgICBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFu
        ZGxlciwKICAgICAgICAgIGhhbmRsZXJOYW1lID0gaGFuZGxlckluZm8ubmFt
        ZSwKICAgICAgICAgIHNlcSA9IHRyYW5zaXRpb24uc2VxdWVuY2U7CgogICAg
        ICBpZiAoaW5kZXggPCBtYXRjaFBvaW50KSB7CiAgICAgICAgbG9nKHJvdXRl
        ciwgc2VxLCBoYW5kbGVyTmFtZSArICI6IHVzaW5nIGNvbnRleHQgZnJvbSBh
        bHJlYWR5LWFjdGl2ZSBoYW5kbGVyIik7CgogICAgICAgIC8vIFdlJ3JlIGJl
        Zm9yZSB0aGUgbWF0Y2ggcG9pbnQsIHNvIGRvbid0IHJ1biBhbnkgaG9va3Ms
        CiAgICAgICAgLy8ganVzdCB1c2UgdGhlIGFscmVhZHkgcmVzb2x2ZWQgY29u
        dGV4dCBmcm9tIHRoZSBoYW5kbGVyLgogICAgICAgIHRyYW5zaXRpb24ucmVz
        b2x2ZWRNb2RlbHNbaGFuZGxlckluZm8ubmFtZV0gPQogICAgICAgICAgdHJh
        bnNpdGlvbi5wcm92aWRlZE1vZGVsc1toYW5kbGVySW5mby5uYW1lXSB8fAog
        ICAgICAgICAgaGFuZGxlckluZm8uaGFuZGxlci5jb250ZXh0OwogICAgICAg
        IHJldHVybiBwcm9jZWVkKCk7CiAgICAgIH0KCiAgICAgIHRyYW5zaXRpb24u
        dHJpZ2dlcih0cnVlLCAnd2lsbFJlc29sdmVNb2RlbCcsIHRyYW5zaXRpb24s
        IGhhbmRsZXIpOwoKICAgICAgcmV0dXJuIFJTVlAucmVzb2x2ZSgpLnRoZW4o
        aGFuZGxlQWJvcnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVu
        KGJlZm9yZU1vZGVsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAudGhl
        bihoYW5kbGVBYm9ydCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRo
        ZW4obW9kZWwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGhh
        bmRsZUFib3J0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihh
        ZnRlck1vZGVsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbiho
        YW5kbGVBYm9ydCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4o
        bnVsbCwgaGFuZGxlRXJyb3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
        IC50aGVuKHByb2NlZWQpOwoKICAgICAgZnVuY3Rpb24gaGFuZGxlQWJvcnQo
        cmVzdWx0KSB7CiAgICAgICAgaWYgKHRyYW5zaXRpb24uaXNBYm9ydGVkKSB7
        CiAgICAgICAgICBsb2codHJhbnNpdGlvbi5yb3V0ZXIsIHRyYW5zaXRpb24u
        c2VxdWVuY2UsICJkZXRlY3RlZCBhYm9ydC4iKTsKICAgICAgICAgIHJldHVy
        biBSU1ZQLnJlamVjdChuZXcgUm91dGVyLlRyYW5zaXRpb25BYm9ydGVkKCkp
        OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQoK
        ICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IocmVhc29uKSB7CiAgICAgICAg
        aWYgKHJlYXNvbiBpbnN0YW5jZW9mIFJvdXRlci5UcmFuc2l0aW9uQWJvcnRl
        ZCB8fCB0cmFuc2l0aW9uLmlzQWJvcnRlZCkgewogICAgICAgICAgLy8gaWYg
        dGhlIHRyYW5zaXRpb24gd2FzIGFib3J0ZWQgYW5kICpubyBhZGRpdGlvbmFs
        KiBlcnJvciB3YXMgdGhyb3duLAogICAgICAgICAgLy8gcmVqZWN0IHdpdGgg
        dGhlIFJvdXRlci5UcmFuc2l0aW9uQWJvcnRlZCBpbnN0YW5jZQogICAgICAg
        ICAgcmV0dXJuIFJTVlAucmVqZWN0KHJlYXNvbik7CiAgICAgICAgfQoKICAg
        ICAgICAvLyBvdGhlcndpc2UsIHdlJ3JlIGhlcmUgYmVjYXVzZSBvZiBhIGRp
        ZmZlcmVudCBlcnJvcgogICAgICAgIHRyYW5zaXRpb24uYWJvcnQoKTsKCiAg
        ICAgICAgbG9nKHJvdXRlciwgc2VxLCBoYW5kbGVyTmFtZSArICI6IGhhbmRs
        aW5nIGVycm9yOiAiICsgcmVhc29uKTsKCiAgICAgICAgLy8gQW4gZXJyb3Ig
        d2FzIHRocm93biAvIHByb21pc2UgcmVqZWN0ZWQsIHNvIGZpcmUgYW4KICAg
        ICAgICAvLyBgZXJyb3JgIGV2ZW50IGZyb20gdGhpcyBoYW5kbGVyIGluZm8g
        dXAgdG8gcm9vdC4KICAgICAgICB0cmFuc2l0aW9uLnRyaWdnZXIodHJ1ZSwg
        J2Vycm9yJywgcmVhc29uLCB0cmFuc2l0aW9uLCBoYW5kbGVySW5mby5oYW5k
        bGVyKTsKCiAgICAgICAgLy8gUHJvcGFnYXRlIHRoZSBvcmlnaW5hbCBlcnJv
        ci4KICAgICAgICByZXR1cm4gUlNWUC5yZWplY3QocmVhc29uKTsKICAgICAg
        fQoKICAgICAgZnVuY3Rpb24gYmVmb3JlTW9kZWwoKSB7CgogICAgICAgIGxv
        Zyhyb3V0ZXIsIHNlcSwgaGFuZGxlck5hbWUgKyAiOiBjYWxsaW5nIGJlZm9y
        ZU1vZGVsIGhvb2siKTsKCiAgICAgICAgdmFyIGFyZ3M7CgogICAgICAgIGlm
        IChoYW5kbGVySW5mby5xdWVyeVBhcmFtcykgewogICAgICAgICAgYXJncyA9
        IFtoYW5kbGVySW5mby5xdWVyeVBhcmFtcywgdHJhbnNpdGlvbl07CiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIGFyZ3MgPSBbdHJhbnNpdGlvbl07CiAg
        ICAgICAgfQoKICAgICAgICB2YXIgcCA9IGhhbmRsZXIuYmVmb3JlTW9kZWwg
        JiYgaGFuZGxlci5iZWZvcmVNb2RlbC5hcHBseShoYW5kbGVyLCBhcmdzKTsK
        ICAgICAgICByZXR1cm4gKHAgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSA/IG51
        bGwgOiBwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBtb2RlbCgpIHsKICAg
        ICAgICBsb2cocm91dGVyLCBzZXEsIGhhbmRsZXJOYW1lICsgIjogcmVzb2x2
        aW5nIG1vZGVsIik7CiAgICAgICAgdmFyIHAgPSBnZXRNb2RlbChoYW5kbGVy
        SW5mbywgdHJhbnNpdGlvbiwgaGFuZGxlclBhcmFtc1toYW5kbGVyTmFtZV0s
        IGluZGV4ID49IG1hdGNoUG9pbnQpOwogICAgICAgIHJldHVybiAocCBpbnN0
        YW5jZW9mIFRyYW5zaXRpb24pID8gbnVsbCA6IHA7CiAgICAgIH0KCiAgICAg
        IGZ1bmN0aW9uIGFmdGVyTW9kZWwoY29udGV4dCkgewoKICAgICAgICBsb2co
        cm91dGVyLCBzZXEsIGhhbmRsZXJOYW1lICsgIjogY2FsbGluZyBhZnRlck1v
        ZGVsIGhvb2siKTsKCiAgICAgICAgLy8gUGFzcyB0aGUgY29udGV4dCBhbmQg
        cmVzb2x2ZWQgcGFyZW50IGNvbnRleHRzIHRvIGFmdGVyTW9kZWwsIGJ1dCB3
        ZSBkb24ndAogICAgICAgIC8vIHdhbnQgdG8gdXNlIHRoZSB2YWx1ZSByZXR1
        cm5lZCBmcm9tIGBhZnRlck1vZGVsYCBpbiBhbnkgd2F5LCBidXQgcmF0aGVy
        CiAgICAgICAgLy8gYWx3YXlzIHJlc29sdmUgd2l0aCB0aGUgb3JpZ2luYWwg
        YGNvbnRleHRgIG9iamVjdC4KCiAgICAgICAgdHJhbnNpdGlvbi5yZXNvbHZl
        ZE1vZGVsc1toYW5kbGVySW5mby5uYW1lXSA9IGNvbnRleHQ7CgogICAgICAg
        IHZhciBhcmdzOwoKICAgICAgICBpZiAoaGFuZGxlckluZm8ucXVlcnlQYXJh
        bXMpIHsKICAgICAgICAgIGFyZ3MgPSBbY29udGV4dCwgaGFuZGxlckluZm8u
        cXVlcnlQYXJhbXMsIHRyYW5zaXRpb25dOwogICAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgICBhcmdzID0gW2NvbnRleHQsIHRyYW5zaXRpb25dOwogICAgICAg
        IH0KCiAgICAgICAgdmFyIHAgPSBoYW5kbGVyLmFmdGVyTW9kZWwgJiYgaGFu
        ZGxlci5hZnRlck1vZGVsLmFwcGx5KGhhbmRsZXIsIGFyZ3MpOwogICAgICAg
        IHJldHVybiAocCBpbnN0YW5jZW9mIFRyYW5zaXRpb24pID8gbnVsbCA6IHA7
        CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHByb2NlZWQoKSB7CiAgICAgICAg
        bG9nKHJvdXRlciwgc2VxLCBoYW5kbGVyTmFtZSArICI6IHZhbGlkYXRpb24g
        c3VjY2VlZGVkLCBwcm9jZWVkaW5nIik7CgogICAgICAgIGhhbmRsZXJJbmZv
        LmNvbnRleHQgPSB0cmFuc2l0aW9uLnJlc29sdmVkTW9kZWxzW2hhbmRsZXJJ
        bmZvLm5hbWVdOwogICAgICAgIHRyYW5zaXRpb24ucmVzb2x2ZUluZGV4Kys7
        CiAgICAgICAgcmV0dXJuIHZhbGlkYXRlRW50cnkodHJhbnNpdGlvbiwgbWF0
        Y2hQb2ludCwgaGFuZGxlclBhcmFtcyk7CiAgICAgIH0KICAgIH0KCiAgICAv
        KioKICAgICAgQHByaXZhdGUKCiAgICAgIFRocm93cyBhIFRyYW5zaXRpb25B
        Ym9ydGVkIGlmIHRoZSBwcm92aWRlZCB0cmFuc2l0aW9uIGhhcyBiZWVuIGFi
        b3J0ZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoZWNrQWJvcnQodHJhbnNp
        dGlvbikgewogICAgICBpZiAodHJhbnNpdGlvbi5pc0Fib3J0ZWQpIHsKICAg
        ICAgICBsb2codHJhbnNpdGlvbi5yb3V0ZXIsIHRyYW5zaXRpb24uc2VxdWVu
        Y2UsICJkZXRlY3RlZCBhYm9ydC4iKTsKICAgICAgICB0aHJvdyBuZXcgUm91
        dGVyLlRyYW5zaXRpb25BYm9ydGVkKCk7CiAgICAgIH0KICAgIH0KCiAgICAv
        KioKICAgICAgQHByaXZhdGUKCiAgICAgIEVuY2Fwc3VsYXRlcyB0aGUgbG9n
        aWMgZm9yIHdoZXRoZXIgdG8gY2FsbCBgbW9kZWxgIG9uIGEgcm91dGUsCiAg
        ICAgIG9yIHVzZSBvbmUgb2YgdGhlIG1vZGVscyBwcm92aWRlZCB0byBgdHJh
        bnNpdGlvblRvYC4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TW9kZWwoaGFu
        ZGxlckluZm8sIHRyYW5zaXRpb24sIGhhbmRsZXJQYXJhbXMsIG5lZWRzVXBk
        YXRlKSB7CiAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFuZGxl
        ciwKICAgICAgICAgIGhhbmRsZXJOYW1lID0gaGFuZGxlckluZm8ubmFtZSwg
        YXJnczsKCiAgICAgIGlmICghbmVlZHNVcGRhdGUgJiYgaGFuZGxlci5oYXNP
        d25Qcm9wZXJ0eSgnY29udGV4dCcpKSB7CiAgICAgICAgcmV0dXJuIGhhbmRs
        ZXIuY29udGV4dDsKICAgICAgfQoKICAgICAgaWYgKHRyYW5zaXRpb24ucHJv
        dmlkZWRNb2RlbHMuaGFzT3duUHJvcGVydHkoaGFuZGxlck5hbWUpKSB7CiAg
        ICAgICAgdmFyIHByb3ZpZGVkTW9kZWwgPSB0cmFuc2l0aW9uLnByb3ZpZGVk
        TW9kZWxzW2hhbmRsZXJOYW1lXTsKICAgICAgICByZXR1cm4gdHlwZW9mIHBy
        b3ZpZGVkTW9kZWwgPT09ICdmdW5jdGlvbicgPyBwcm92aWRlZE1vZGVsKCkg
        OiBwcm92aWRlZE1vZGVsOwogICAgICB9CgogICAgICBpZiAoaGFuZGxlcklu
        Zm8ucXVlcnlQYXJhbXMpIHsKICAgICAgICBhcmdzID0gW2hhbmRsZXJQYXJh
        bXMgfHwge30sIGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zLCB0cmFuc2l0aW9u
        XTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhcmdzID0gW2hhbmRsZXJQYXJh
        bXMgfHwge30sIHRyYW5zaXRpb24sIGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1z
        XTsKICAgICAgfQoKICAgICAgcmV0dXJuIGhhbmRsZXIubW9kZWwgJiYgaGFu
        ZGxlci5tb2RlbC5hcHBseShoYW5kbGVyLCBhcmdzKTsKICAgIH0KCiAgICAv
        KioKICAgICAgQHByaXZhdGUKICAgICAqLwogICAgZnVuY3Rpb24gbG9nKHJv
        dXRlciwgc2VxdWVuY2UsIG1zZykgewoKICAgICAgaWYgKCFyb3V0ZXIubG9n
        KSB7IHJldHVybjsgfQoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09
        IDMpIHsKICAgICAgICByb3V0ZXIubG9nKCJUcmFuc2l0aW9uICMiICsgc2Vx
        dWVuY2UgKyAiOiAiICsgbXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBt
        c2cgPSBzZXF1ZW5jZTsKICAgICAgICByb3V0ZXIubG9nKG1zZyk7CiAgICAg
        IH0KICAgIH0KCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIEJlZ2lu
        cyBhbmQgcmV0dXJucyBhIFRyYW5zaXRpb24gYmFzZWQgb24gdGhlIHByb3Zp
        ZGVkCiAgICAgIGFyZ3VtZW50cy4gQWNjZXB0cyBhcmd1bWVudHMgaW4gdGhl
        IGZvcm0gb2YgYm90aCBVUkwKICAgICAgdHJhbnNpdGlvbnMgYW5kIG5hbWVk
        IHRyYW5zaXRpb25zLgoKICAgICAgQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlcgog
        ICAgICBAcGFyYW0ge0FycmF5W09iamVjdF19IGFyZ3MgYXJndW1lbnRzIHBh
        c3NlZCB0byB0cmFuc2l0aW9uVG8sCiAgICAgICAgcmVwbGFjZVdpdGgsIG9y
        IGhhbmRsZVVSTAogICAgKi8KICAgIGZ1bmN0aW9uIGRvVHJhbnNpdGlvbihy
        b3V0ZXIsIGFyZ3MsIGlzSW50ZXJtZWRpYXRlKSB7CiAgICAgIC8vIE5vcm1h
        bGl6ZSBibGFuayB0cmFuc2l0aW9ucyB0byByb290IFVSTCB0cmFuc2l0aW9u
        cy4KICAgICAgdmFyIG5hbWUgPSBhcmdzWzBdIHx8ICcvJzsKCiAgICAgIGlm
        KGFyZ3MubGVuZ3RoID09PSAxICYmIGFyZ3NbMF0uaGFzT3duUHJvcGVydHko
        J3F1ZXJ5UGFyYW1zJykpIHsKICAgICAgICByZXR1cm4gY3JlYXRlUXVlcnlQ
        YXJhbVRyYW5zaXRpb24ocm91dGVyLCBhcmdzWzBdLCBpc0ludGVybWVkaWF0
        ZSk7CiAgICAgIH0gZWxzZSBpZiAobmFtZS5jaGFyQXQoMCkgPT09ICcvJykg
        ewogICAgICAgIHJldHVybiBjcmVhdGVVUkxUcmFuc2l0aW9uKHJvdXRlciwg
        bmFtZSwgaXNJbnRlcm1lZGlhdGUpOwogICAgICB9IGVsc2UgewogICAgICAg
        IHJldHVybiBjcmVhdGVOYW1lZFRyYW5zaXRpb24ocm91dGVyLCBzbGljZS5j
        YWxsKGFyZ3MpLCBpc0ludGVybWVkaWF0ZSk7CiAgICAgIH0KICAgIH0KCiAg
        ICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFNlcmlhbGl6ZXMgYSBoYW5k
        bGVyIHVzaW5nIGl0cyBjdXN0b20gYHNlcmlhbGl6ZWAgbWV0aG9kIG9yCiAg
        ICAgIGJ5IGEgZGVmYXVsdCB0aGF0IGxvb2tzIHVwIHRoZSBleHBlY3RlZCBw
        cm9wZXJ0eSBuYW1lIGZyb20KICAgICAgdGhlIGR5bmFtaWMgc2VnbWVudC4K
        CiAgICAgIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyIGEgcm91dGVyIGhhbmRs
        ZXIKICAgICAgQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRoZSBtb2RlbCB0byBi
        ZSBzZXJpYWxpemVkIGZvciB0aGlzIGhhbmRsZXIKICAgICAgQHBhcmFtIHtB
        cnJheVtPYmplY3RdfSBuYW1lcyB0aGUgbmFtZXMgYXJyYXkgYXR0YWNoZWQg
        dG8gYW4KICAgICAgICBoYW5kbGVyIG9iamVjdCByZXR1cm5lZCBmcm9tIHJv
        dXRlci5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKCkKICAgICovCiAgICBmdW5j
        dGlvbiBzZXJpYWxpemUoaGFuZGxlciwgbW9kZWwsIG5hbWVzKSB7CgogICAg
        ICB2YXIgb2JqZWN0ID0ge307CiAgICAgIGlmIChpc1BhcmFtKG1vZGVsKSkg
        ewogICAgICAgIG9iamVjdFtuYW1lc1swXV0gPSBtb2RlbDsKICAgICAgICBy
        ZXR1cm4gb2JqZWN0OwogICAgICB9CgogICAgICAvLyBVc2UgY3VzdG9tIHNl
        cmlhbGl6ZSBpZiBpdCBleGlzdHMuCiAgICAgIGlmIChoYW5kbGVyLnNlcmlh
        bGl6ZSkgewogICAgICAgIHJldHVybiBoYW5kbGVyLnNlcmlhbGl6ZShtb2Rl
        bCwgbmFtZXMpOwogICAgICB9CgogICAgICBpZiAobmFtZXMubGVuZ3RoICE9
        PSAxKSB7IHJldHVybjsgfQoKICAgICAgdmFyIG5hbWUgPSBuYW1lc1swXTsK
        CiAgICAgIGlmICgvX2lkJC8udGVzdChuYW1lKSkgewogICAgICAgIG9iamVj
        dFtuYW1lXSA9IG1vZGVsLmlkOwogICAgICB9IGVsc2UgewogICAgICAgIG9i
        amVjdFtuYW1lXSA9IG1vZGVsOwogICAgICB9CiAgICAgIHJldHVybiBvYmpl
        Y3Q7CiAgICB9CiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKZnVu
        Y3Rpb24gRFNMKG5hbWUpIHsKICB0aGlzLnBhcmVudCA9IG5hbWU7CiAgdGhp
        cy5tYXRjaGVzID0gW107Cn0KCkRTTC5wcm90b3R5cGUgPSB7CiAgcmVzb3Vy
        Y2U6IGZ1bmN0aW9uKG5hbWUsIG9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICBp
        ZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2Ygb3B0aW9ucyA9
        PT0gJ2Z1bmN0aW9uJykgewogICAgICBjYWxsYmFjayA9IG9wdGlvbnM7CiAg
        ICAgIG9wdGlvbnMgPSB7fTsKICAgIH0KCiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aCA9PT0gMSkgewogICAgICBvcHRpb25zID0ge307CiAgICB9CgogICAg
        aWYgKHR5cGVvZiBvcHRpb25zLnBhdGggIT09ICdzdHJpbmcnKSB7CiAgICAg
        IG9wdGlvbnMucGF0aCA9ICIvIiArIG5hbWU7CiAgICB9CgogICAgaWYgKGNh
        bGxiYWNrKSB7CiAgICAgIHZhciBkc2wgPSBuZXcgRFNMKG5hbWUpOwogICAg
        ICBkc2wucm91dGUoJ2xvYWRpbmcnKTsKICAgICAgZHNsLnJvdXRlKCdlcnJv
        cicsIHsgcGF0aDogIi9fdW51c2VkX2R1bW15X2Vycm9yX3BhdGgvOmVycm9y
        IiB9KTsKICAgICAgY2FsbGJhY2suY2FsbChkc2wpOwogICAgICB0aGlzLnB1
        c2gob3B0aW9ucy5wYXRoLCBuYW1lLCBkc2wuZ2VuZXJhdGUoKSwgb3B0aW9u
        cy5xdWVyeVBhcmFtcyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnB1c2go
        b3B0aW9ucy5wYXRoLCBuYW1lLCBudWxsLCBvcHRpb25zLnF1ZXJ5UGFyYW1z
        KTsKICAgIH0KICB9LAoKICBwdXNoOiBmdW5jdGlvbih1cmwsIG5hbWUsIGNh
        bGxiYWNrLCBxdWVyeVBhcmFtcykgewogICAgdmFyIHBhcnRzID0gbmFtZS5z
        cGxpdCgnLicpOwogICAgaWYgKHVybCA9PT0gIiIgfHwgdXJsID09PSAiLyIg
        fHwgcGFydHNbcGFydHMubGVuZ3RoLTFdID09PSAiaW5kZXgiKSB7IHRoaXMu
        ZXhwbGljaXRJbmRleCA9IHRydWU7IH0KCiAgICB0aGlzLm1hdGNoZXMucHVz
        aChbdXJsLCBuYW1lLCBjYWxsYmFjaywgcXVlcnlQYXJhbXNdKTsKICB9LAoK
        ICByb3V0ZTogZnVuY3Rpb24obmFtZSwgb3B0aW9ucykgewogICAgRW1iZXIu
        YXNzZXJ0KCJZb3UgbXVzdCB1c2UgYHRoaXMucmVzb3VyY2VgIHRvIG5lc3Qi
        LCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ2Z1bmN0aW9uJyk7CgogICAgb3B0aW9u
        cyA9IG9wdGlvbnMgfHwge307CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLnBh
        dGggIT09ICdzdHJpbmcnKSB7CiAgICAgIG9wdGlvbnMucGF0aCA9ICIvIiAr
        IG5hbWU7CiAgICB9CgogICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFy
        ZW50ICE9PSAnYXBwbGljYXRpb24nKSB7CiAgICAgIG5hbWUgPSB0aGlzLnBh
        cmVudCArICIuIiArIG5hbWU7CiAgICB9CgogICAgdGhpcy5wdXNoKG9wdGlv
        bnMucGF0aCwgbmFtZSwgbnVsbCwgb3B0aW9ucy5xdWVyeVBhcmFtcyk7CiAg
        fSwKCiAgZ2VuZXJhdGU6IGZ1bmN0aW9uKCkgewogICAgdmFyIGRzbE1hdGNo
        ZXMgPSB0aGlzLm1hdGNoZXM7CgogICAgaWYgKCF0aGlzLmV4cGxpY2l0SW5k
        ZXgpIHsKICAgICAgdGhpcy5yb3V0ZSgiaW5kZXgiLCB7IHBhdGg6ICIvIiB9
        KTsKICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24obWF0Y2gpIHsKICAgICAg
        Zm9yICh2YXIgaT0wLCBsPWRzbE1hdGNoZXMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgICAgIHZhciBkc2xNYXRjaCA9IGRzbE1hdGNoZXNbaV07CiAgICAg
        ICAgdmFyIG1hdGNoT2JqID0gbWF0Y2goZHNsTWF0Y2hbMF0pLnRvKGRzbE1h
        dGNoWzFdLCBkc2xNYXRjaFsyXSk7CiAgICAgICAgaWYgKEVtYmVyLkZFQVRV
        UkVTLmlzRW5hYmxlZCgicXVlcnktcGFyYW1zIikpIHsKICAgICAgICAgIGlm
        KGRzbE1hdGNoWzNdKSB7CiAgICAgICAgICAgIG1hdGNoT2JqLndpdGhRdWVy
        eVBhcmFtcy5hcHBseShtYXRjaE9iaiwgZHNsTWF0Y2hbM10pOwogICAgICAg
        ICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9Cn07CgpEU0wubWFw
        ID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICB2YXIgZHNsID0gbmV3IERTTCgp
        OwogIGNhbGxiYWNrLmNhbGwoZHNsKTsKICByZXR1cm4gZHNsOwp9OwoKRW1i
        ZXIuUm91dGVyRFNMID0gRFNMOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0OwoKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1yb3V0aW5nCiovCgovKioKICAKICBGaW5kcyBhIGNvbnRy
        b2xsZXIgaW5zdGFuY2UuCgogIEBmb3IgRW1iZXIKICBAbWV0aG9kIGNvbnRy
        b2xsZXJGb3IKICBAcHJpdmF0ZQoqLwpFbWJlci5jb250cm9sbGVyRm9yID0g
        ZnVuY3Rpb24oY29udGFpbmVyLCBjb250cm9sbGVyTmFtZSwgbG9va3VwT3B0
        aW9ucykgewogIHJldHVybiBjb250YWluZXIubG9va3VwKCdjb250cm9sbGVy
        OicgKyBjb250cm9sbGVyTmFtZSwgbG9va3VwT3B0aW9ucyk7Cn07CgovKioK
        ICBHZW5lcmF0ZXMgYSBjb250cm9sbGVyIGF1dG9tYXRpY2FsbHkgaWYgbm9u
        ZSB3YXMgcHJvdmlkZWQuCiAgVGhlIHR5cGUgb2YgZ2VuZXJhdGVkIGNvbnRy
        b2xsZXIgZGVwZW5kcyBvbiB0aGUgY29udGV4dC4KICBZb3UgY2FuIGN1c3Rv
        bWl6ZSB5b3VyIGdlbmVyYXRlZCBjb250cm9sbGVycyBieSBkZWZpbmluZwog
        IGBBcHAuT2JqZWN0Q29udHJvbGxlcmAgYW5kIGBBcHAuQXJyYXlDb250cm9s
        bGVyYAogIAogIEBmb3IgRW1iZXIKICBAbWV0aG9kIGdlbmVyYXRlQ29udHJv
        bGxlcgogIEBwcml2YXRlCiovCkVtYmVyLmdlbmVyYXRlQ29udHJvbGxlciA9
        IGZ1bmN0aW9uKGNvbnRhaW5lciwgY29udHJvbGxlck5hbWUsIGNvbnRleHQp
        IHsKICB2YXIgQ29udHJvbGxlckZhY3RvcnksIGZ1bGxOYW1lLCBpbnN0YW5j
        ZSwgbmFtZSwgZmFjdG9yeU5hbWUsIGNvbnRyb2xsZXJUeXBlOwoKICBpZiAo
        Y29udGV4dCAmJiBFbWJlci5pc0FycmF5KGNvbnRleHQpKSB7CiAgICBjb250
        cm9sbGVyVHlwZSA9ICdhcnJheSc7CiAgfSBlbHNlIGlmIChjb250ZXh0KSB7
        CiAgICBjb250cm9sbGVyVHlwZSA9ICdvYmplY3QnOwogIH0gZWxzZSB7CiAg
        ICBjb250cm9sbGVyVHlwZSA9ICdiYXNpYyc7CiAgfQoKICBmYWN0b3J5TmFt
        ZSA9ICdjb250cm9sbGVyOicgKyBjb250cm9sbGVyVHlwZTsKCiAgQ29udHJv
        bGxlckZhY3RvcnkgPSBjb250YWluZXIubG9va3VwRmFjdG9yeShmYWN0b3J5
        TmFtZSkuZXh0ZW5kKHsKICAgIGlzR2VuZXJhdGVkOiB0cnVlLAogICAgdG9T
        dHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gIihnZW5lcmF0ZWQg
        IiArIGNvbnRyb2xsZXJOYW1lICsgIiBjb250cm9sbGVyKSI7CiAgICB9CiAg
        fSk7CgogIGZ1bGxOYW1lID0gJ2NvbnRyb2xsZXI6JyArIGNvbnRyb2xsZXJO
        YW1lOwoKICBjb250YWluZXIucmVnaXN0ZXIoZnVsbE5hbWUsIENvbnRyb2xs
        ZXJGYWN0b3J5KTsKCiAgaW5zdGFuY2UgPSBjb250YWluZXIubG9va3VwKGZ1
        bGxOYW1lKTsKCiAgaWYgKGdldChpbnN0YW5jZSwgJ25hbWVzcGFjZS5MT0df
        QUNUSVZFX0dFTkVSQVRJT04nKSkgewogICAgRW1iZXIuTG9nZ2VyLmluZm8o
        ImdlbmVyYXRlZCAtPiAiICsgZnVsbE5hbWUsIHsgZnVsbE5hbWU6IGZ1bGxO
        YW1lIH0pOwogIH0KCiAgcmV0dXJuIGluc3RhbmNlOwp9OwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXJvdXRpbmcKKi8KCnZhciBSb3V0ZXIgPSByZXF1aXJlTW9kdWxlKCJy
        b3V0ZXIiKVsnZGVmYXVsdCddOwp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQg
        PSBFbWJlci5zZXQ7CnZhciBkZWZpbmVQcm9wZXJ0eSA9IEVtYmVyLmRlZmlu
        ZVByb3BlcnR5OwoKdmFyIERlZmF1bHRWaWV3ID0gRW1iZXIuX01ldGFtb3Jw
        aFZpZXc7Ci8qKgogIFRoZSBgRW1iZXIuUm91dGVyYCBjbGFzcyBtYW5hZ2Vz
        IHRoZSBhcHBsaWNhdGlvbiBzdGF0ZSBhbmQgVVJMcy4gUmVmZXIgdG8KICB0
        aGUgW3JvdXRpbmcgZ3VpZGVdKGh0dHA6Ly9lbWJlcmpzLmNvbS9ndWlkZXMv
        cm91dGluZy8pIGZvciBkb2N1bWVudGF0aW9uLgoKICBAY2xhc3MgUm91dGVy
        CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoq
        LwpFbWJlci5Sb3V0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkV2
        ZW50ZWQsIHsKICBsb2NhdGlvbjogJ2hhc2gnLAoKICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMucm91dGVyID0gdGhpcy5jb25zdHJ1Y3Rvci5yb3V0
        ZXIgfHwgdGhpcy5jb25zdHJ1Y3Rvci5tYXAoRW1iZXIuSyk7CiAgICB0aGlz
        Ll9hY3RpdmVWaWV3cyA9IHt9OwogICAgdGhpcy5fc2V0dXBMb2NhdGlvbigp
        OwogIH0sCgogIHVybDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAg
        ICByZXR1cm4gZ2V0KHRoaXMsICdsb2NhdGlvbicpLmdldFVSTCgpOwogIH0p
        LAoKICBzdGFydFJvdXRpbmc6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5yb3V0
        ZXIgPSB0aGlzLnJvdXRlciB8fCB0aGlzLmNvbnN0cnVjdG9yLm1hcChFbWJl
        ci5LKTsKCiAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXIsCiAgICAgICAg
        bG9jYXRpb24gPSBnZXQodGhpcywgJ2xvY2F0aW9uJyksCiAgICAgICAgY29u
        dGFpbmVyID0gdGhpcy5jb250YWluZXIsCiAgICAgICAgc2VsZiA9IHRoaXM7
        CgogICAgdGhpcy5fc2V0dXBSb3V0ZXIocm91dGVyLCBsb2NhdGlvbik7Cgog
        ICAgY29udGFpbmVyLnJlZ2lzdGVyKCd2aWV3OmRlZmF1bHQnLCBEZWZhdWx0
        Vmlldyk7CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ3ZpZXc6dG9wbGV2ZWwn
        LCBFbWJlci5WaWV3LmV4dGVuZCgpKTsKCiAgICBsb2NhdGlvbi5vblVwZGF0
        ZVVSTChmdW5jdGlvbih1cmwpIHsKICAgICAgc2VsZi5oYW5kbGVVUkwodXJs
        KTsKICAgIH0pOwoKICAgIHRoaXMuaGFuZGxlVVJMKGxvY2F0aW9uLmdldFVS
        TCgpKTsKICB9LAoKICBkaWRUcmFuc2l0aW9uOiBmdW5jdGlvbihpbmZvcykg
        ewogICAgdXBkYXRlUGF0aHModGhpcyk7CgogICAgCiAgICAgIHRoaXMuX2Nh
        bmNlbExvYWRpbmdFdmVudCgpOwogICAgCiAgICB0aGlzLm5vdGlmeVByb3Bl
        cnR5Q2hhbmdlKCd1cmwnKTsKCiAgICAKICAgICAgLy8gUHV0IHRoaXMgaW4g
        dGhlIHJ1bmxvb3Agc28gdXJsIHdpbGwgYmUgYWNjdXJhdGUuIFNlZW1zCiAg
        ICAgIC8vIGxlc3Mgc3VycHJpc2luZyB0aGFuIGRpZFRyYW5zaXRpb24gYmVp
        bmcgb3V0IG9mIHN5bmMuCiAgICAgIEVtYmVyLnJ1bi5vbmNlKHRoaXMsIHRo
        aXMudHJpZ2dlciwgJ2RpZFRyYW5zaXRpb24nKTsKICAgIAoKICAgIGlmIChn
        ZXQodGhpcywgJ25hbWVzcGFjZScpLkxPR19UUkFOU0lUSU9OUykgewogICAg
        ICBFbWJlci5Mb2dnZXIubG9nKCJUcmFuc2l0aW9uZWQgaW50byAnIiArIEVt
        YmVyLlJvdXRlci5fcm91dGVQYXRoKGluZm9zKSArICInIik7CiAgICB9CiAg
        fSwKCiAgaGFuZGxlVVJMOiBmdW5jdGlvbih1cmwpIHsKICAgIHJldHVybiB0
        aGlzLl9kb1RyYW5zaXRpb24oJ2hhbmRsZVVSTCcsIFt1cmxdKTsKICB9LAoK
        ICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMu
        X2RvVHJhbnNpdGlvbigndHJhbnNpdGlvblRvJywgYXJndW1lbnRzKTsKICB9
        LAoKICBpbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG86IGZ1bmN0aW9uKCkgewog
        ICAgdGhpcy5yb3V0ZXIuaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvLmFwcGx5
        KHRoaXMucm91dGVyLCBhcmd1bWVudHMpOwoKICAgIHVwZGF0ZVBhdGhzKHRo
        aXMpOwoKICAgIHZhciBpbmZvcyA9IHRoaXMucm91dGVyLmN1cnJlbnRIYW5k
        bGVySW5mb3M7CiAgICBpZiAoZ2V0KHRoaXMsICduYW1lc3BhY2UnKS5MT0df
        VFJBTlNJVElPTlMpIHsKICAgICAgRW1iZXIuTG9nZ2VyLmxvZygiSW50ZXJt
        ZWRpYXRlLXRyYW5zaXRpb25lZCBpbnRvICciICsgRW1iZXIuUm91dGVyLl9y
        b3V0ZVBhdGgoaW5mb3MpICsgIiciKTsKICAgIH0KICB9LAoKICByZXBsYWNl
        V2l0aDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fZG9UcmFuc2l0
        aW9uKCdyZXBsYWNlV2l0aCcsIGFyZ3VtZW50cyk7CiAgfSwKCiAgZ2VuZXJh
        dGU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHVybCA9IHRoaXMucm91dGVyLmdl
        bmVyYXRlLmFwcGx5KHRoaXMucm91dGVyLCBhcmd1bWVudHMpOwogICAgcmV0
        dXJuIHRoaXMubG9jYXRpb24uZm9ybWF0VVJMKHVybCk7CiAgfSwKCiAgaXNB
        Y3RpdmU6IGZ1bmN0aW9uKHJvdXRlTmFtZSkgewogICAgdmFyIHJvdXRlciA9
        IHRoaXMucm91dGVyOwogICAgcmV0dXJuIHJvdXRlci5pc0FjdGl2ZS5hcHBs
        eShyb3V0ZXIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgc2VuZDogZnVuY3Rpb24o
        bmFtZSwgY29udGV4dCkgewogICAgdGhpcy5yb3V0ZXIudHJpZ2dlci5hcHBs
        eSh0aGlzLnJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICBoYXNSb3V0ZTog
        ZnVuY3Rpb24ocm91dGUpIHsKICAgIHJldHVybiB0aGlzLnJvdXRlci5oYXNS
        b3V0ZShyb3V0ZSk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFJl
        c2V0cyB0aGUgc3RhdGUgb2YgdGhlIHJvdXRlciBieSBjbGVhcmluZyB0aGUg
        Y3VycmVudCByb3V0ZQogICAgaGFuZGxlcnMgYW5kIGRlYWN0aXZhdGluZyB0
        aGVtLgoKICAgIEBtZXRob2QgcmVzZXQKICAgKi8KICByZXNldDogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLnJvdXRlci5yZXNldCgpOwogIH0sCgogIF9sb29r
        dXBBY3RpdmVWaWV3OiBmdW5jdGlvbih0ZW1wbGF0ZU5hbWUpIHsKICAgIHZh
        ciBhY3RpdmUgPSB0aGlzLl9hY3RpdmVWaWV3c1t0ZW1wbGF0ZU5hbWVdOwog
        ICAgcmV0dXJuIGFjdGl2ZSAmJiBhY3RpdmVbMF07CiAgfSwKCiAgX2Nvbm5l
        Y3RBY3RpdmVWaWV3OiBmdW5jdGlvbih0ZW1wbGF0ZU5hbWUsIHZpZXcpIHsK
        ICAgIHZhciBleGlzdGluZyA9IHRoaXMuX2FjdGl2ZVZpZXdzW3RlbXBsYXRl
        TmFtZV07CgogICAgaWYgKGV4aXN0aW5nKSB7CiAgICAgIGV4aXN0aW5nWzBd
        Lm9mZignd2lsbERlc3Ryb3lFbGVtZW50JywgdGhpcywgZXhpc3RpbmdbMV0p
        OwogICAgfQoKICAgIHZhciBkaXNjb25uZWN0ID0gZnVuY3Rpb24oKSB7CiAg
        ICAgIGRlbGV0ZSB0aGlzLl9hY3RpdmVWaWV3c1t0ZW1wbGF0ZU5hbWVdOwog
        ICAgfTsKCiAgICB0aGlzLl9hY3RpdmVWaWV3c1t0ZW1wbGF0ZU5hbWVdID0g
        W3ZpZXcsIGRpc2Nvbm5lY3RdOwogICAgdmlldy5vbmUoJ3dpbGxEZXN0cm95
        RWxlbWVudCcsIHRoaXMsIGRpc2Nvbm5lY3QpOwogIH0sCgogIF9zZXR1cExv
        Y2F0aW9uOiBmdW5jdGlvbigpIHsKICAgIHZhciBsb2NhdGlvbiA9IGdldCh0
        aGlzLCAnbG9jYXRpb24nKSwKICAgICAgICByb290VVJMID0gZ2V0KHRoaXMs
        ICdyb290VVJMJyksCiAgICAgICAgb3B0aW9ucyA9IHt9OwoKICAgIGlmICh0
        eXBlb2Ygcm9vdFVSTCA9PT0gJ3N0cmluZycpIHsKICAgICAgb3B0aW9ucy5y
        b290VVJMID0gcm9vdFVSTDsKICAgIH0KCiAgICBpZiAoJ3N0cmluZycgPT09
        IHR5cGVvZiBsb2NhdGlvbikgewogICAgICBvcHRpb25zLmltcGxlbWVudGF0
        aW9uID0gbG9jYXRpb247CiAgICAgIGxvY2F0aW9uID0gc2V0KHRoaXMsICds
        b2NhdGlvbicsIEVtYmVyLkxvY2F0aW9uLmNyZWF0ZShvcHRpb25zKSk7CiAg
        ICB9CiAgfSwKCiAgX2dldEhhbmRsZXJGdW5jdGlvbjogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgc2VlbiA9IHt9LCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5l
        ciwKICAgICAgICBEZWZhdWx0Um91dGUgPSBjb250YWluZXIubG9va3VwRmFj
        dG9yeSgncm91dGU6YmFzaWMnKSwKICAgICAgICBzZWxmID0gdGhpczsKCiAg
        ICByZXR1cm4gZnVuY3Rpb24obmFtZSkgewogICAgICB2YXIgcm91dGVOYW1l
        ID0gJ3JvdXRlOicgKyBuYW1lLAogICAgICAgICAgaGFuZGxlciA9IGNvbnRh
        aW5lci5sb29rdXAocm91dGVOYW1lKTsKCiAgICAgIGlmIChzZWVuW25hbWVd
        KSB7IHJldHVybiBoYW5kbGVyOyB9CgogICAgICBzZWVuW25hbWVdID0gdHJ1
        ZTsKCiAgICAgIGlmICghaGFuZGxlcikgewogICAgICAgIAogICAgICAgIAog
        ICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcihyb3V0ZU5hbWUsIERlZmF1bHRS
        b3V0ZS5leHRlbmQoKSk7CiAgICAgICAgaGFuZGxlciA9IGNvbnRhaW5lci5s
        b29rdXAocm91dGVOYW1lKTsKCiAgICAgICAgaWYgKGdldChzZWxmLCAnbmFt
        ZXNwYWNlLkxPR19BQ1RJVkVfR0VORVJBVElPTicpKSB7CiAgICAgICAgICBF
        bWJlci5Mb2dnZXIuaW5mbygiZ2VuZXJhdGVkIC0+ICIgKyByb3V0ZU5hbWUs
        IHsgZnVsbE5hbWU6IHJvdXRlTmFtZSB9KTsKICAgICAgICB9CiAgICAgIH0K
        CiAgICAgIGhhbmRsZXIucm91dGVOYW1lID0gbmFtZTsKICAgICAgcmV0dXJu
        IGhhbmRsZXI7CiAgICB9OwogIH0sCgogIF9zZXR1cFJvdXRlcjogZnVuY3Rp
        b24ocm91dGVyLCBsb2NhdGlvbikgewogICAgdmFyIGxhc3RVUkwsIGVtYmVy
        Um91dGVyID0gdGhpczsKCiAgICByb3V0ZXIuZ2V0SGFuZGxlciA9IHRoaXMu
        X2dldEhhbmRsZXJGdW5jdGlvbigpOwoKICAgIHZhciBkb1VwZGF0ZVVSTCA9
        IGZ1bmN0aW9uKCkgewogICAgICBsb2NhdGlvbi5zZXRVUkwobGFzdFVSTCk7
        CiAgICB9OwoKICAgIHJvdXRlci51cGRhdGVVUkwgPSBmdW5jdGlvbihwYXRo
        KSB7CiAgICAgIGxhc3RVUkwgPSBwYXRoOwogICAgICBFbWJlci5ydW4ub25j
        ZShkb1VwZGF0ZVVSTCk7CiAgICB9OwoKICAgIGlmIChsb2NhdGlvbi5yZXBs
        YWNlVVJMKSB7CiAgICAgIHZhciBkb1JlcGxhY2VVUkwgPSBmdW5jdGlvbigp
        IHsKICAgICAgICBsb2NhdGlvbi5yZXBsYWNlVVJMKGxhc3RVUkwpOwogICAg
        ICB9OwoKICAgICAgcm91dGVyLnJlcGxhY2VVUkwgPSBmdW5jdGlvbihwYXRo
        KSB7CiAgICAgICAgbGFzdFVSTCA9IHBhdGg7CiAgICAgICAgRW1iZXIucnVu
        Lm9uY2UoZG9SZXBsYWNlVVJMKTsKICAgICAgfTsKICAgIH0KCiAgICByb3V0
        ZXIuZGlkVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKGluZm9zKSB7CiAgICAgIGVt
        YmVyUm91dGVyLmRpZFRyYW5zaXRpb24oaW5mb3MpOwogICAgfTsKICB9LAoK
        ICBfZG9UcmFuc2l0aW9uOiBmdW5jdGlvbihtZXRob2QsIGFyZ3MpIHsKICAg
        IC8vIE5vcm1hbGl6ZSBibGFuayByb3V0ZSB0byByb290IFVSTC4KICAgIGFy
        Z3MgPSBbXS5zbGljZS5jYWxsKGFyZ3MpOwogICAgYXJnc1swXSA9IGFyZ3Nb
        MF0gfHwgJy8nOwoKICAgIHZhciBwYXNzZWROYW1lID0gYXJnc1swXSwgbmFt
        ZSwgc2VsZiA9IHRoaXMsCiAgICAgIGlzUXVlcnlQYXJhbXNPbmx5ID0gZmFs
        c2U7CgogICAgaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicXVlcnkt
        cGFyYW1zIikpIHsKICAgICAgaXNRdWVyeVBhcmFtc09ubHkgPSAoYXJncy5s
        ZW5ndGggPT09IDEgJiYgYXJnc1swXS5oYXNPd25Qcm9wZXJ0eSgncXVlcnlQ
        YXJhbXMnKSk7CiAgICB9CgogICAgaWYgKCFpc1F1ZXJ5UGFyYW1zT25seSAm
        JiBwYXNzZWROYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSB7CiAgICAgIG5hbWUg
        PSBwYXNzZWROYW1lOwogICAgfSBlbHNlIGlmICghaXNRdWVyeVBhcmFtc09u
        bHkpIHsKICAgICAgaWYgKCF0aGlzLnJvdXRlci5oYXNSb3V0ZShwYXNzZWRO
        YW1lKSkgewogICAgICAgIG5hbWUgPSBhcmdzWzBdID0gcGFzc2VkTmFtZSAr
        ICcuaW5kZXgnOwogICAgICB9IGVsc2UgewogICAgICAgIG5hbWUgPSBwYXNz
        ZWROYW1lOwogICAgICB9CgogICAgICBFbWJlci5hc3NlcnQoIlRoZSByb3V0
        ZSAiICsgcGFzc2VkTmFtZSArICIgd2FzIG5vdCBmb3VuZCIsIHRoaXMucm91
        dGVyLmhhc1JvdXRlKG5hbWUpKTsKICAgIH0KCiAgICB2YXIgdHJhbnNpdGlv
        blByb21pc2UgPSB0aGlzLnJvdXRlclttZXRob2RdLmFwcGx5KHRoaXMucm91
        dGVyLCBhcmdzKTsKCiAgICAvLyBEb24ndCBzY2hlZHVsZSBsb2FkaW5nIHN0
        YXRlIGVudHJ5IGlmIHVzZXIgaGFzIGFscmVhZHkgYWJvcnRlZCB0aGUgdHJh
        bnNpdGlvbi4KICAgIAogICAgCiAgICB0cmFuc2l0aW9uUHJvbWlzZS50aGVu
        KG51bGwsIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgIGlmIChlcnJvci5uYW1l
        ID09PSAiVW5yZWNvZ25pemVkVVJMRXJyb3IiKSB7CiAgICAgICAgRW1iZXIu
        YXNzZXJ0KCJUaGUgVVJMICciICsgZXJyb3IubWVzc2FnZSArICInIGRpZCBu
        b3QgbWF0Y2ggYW55IHJvdXRlcyBpbiB5b3VyIGFwcGxpY2F0aW9uIik7CiAg
        ICAgIH0KICAgIH0pOwoKICAgIC8vIFdlIHdhbnQgdG8gcmV0dXJuIHRoZSBj
        b25maWd1cmFibGUgcHJvbWlzZSBvYmplY3QKICAgIC8vIHNvIHRoYXQgY2Fs
        bGVycyBvZiB0aGlzIGZ1bmN0aW9uIGNhbiB1c2UgYC5tZXRob2QoKWAgb24g
        aXQsCiAgICAvLyB3aGljaCBvYnZpb3VzbHkgZG9lc24ndCBleGlzdCBmb3Ig
        bm9ybWFsIFJTVlAgcHJvbWlzZXMuCiAgICByZXR1cm4gdHJhbnNpdGlvblBy
        b21pc2U7CiAgfSwKCiAgX3NjaGVkdWxlTG9hZGluZ0V2ZW50OiBmdW5jdGlv
        bih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgdGhpcy5fY2FuY2Vs
        TG9hZGluZ0V2ZW50KCk7CiAgICAKICAgICAgdGhpcy5fbG9hZGluZ1N0YXRl
        VGltZXIgPSBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyb3V0ZXJUcmFuc2l0
        aW9ucycsIHRoaXMsICdfZmlyZUxvYWRpbmdFdmVudCcsIHRyYW5zaXRpb24s
        IG9yaWdpblJvdXRlKTsKICAgIAogIH0sCgogIF9maXJlTG9hZGluZ0V2ZW50
        OiBmdW5jdGlvbih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgCiAg
        ICAgIGlmICghdGhpcy5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbikgewogICAg
        ICAgIC8vIERvbid0IGZpcmUgYW4gZXZlbnQgaWYgd2UndmUgc2luY2UgbW92
        ZWQgb24gZnJvbQogICAgICAgIC8vIHRoZSB0cmFuc2l0aW9uIHRoYXQgcHV0
        IHVzIGluIGEgbG9hZGluZyBzdGF0ZS4KICAgICAgICByZXR1cm47CiAgICAg
        IH0KCiAgICAgIHRyYW5zaXRpb24udHJpZ2dlcih0cnVlLCAnbG9hZGluZycs
        IHRyYW5zaXRpb24sIG9yaWdpblJvdXRlKTsKICAgICAgfSwKCiAgX2NhbmNl
        bExvYWRpbmdFdmVudDogZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMuX2xv
        YWRpbmdTdGF0ZVRpbWVyKSB7CiAgICAgIEVtYmVyLnJ1bi5jYW5jZWwodGhp
        cy5fbG9hZGluZ1N0YXRlVGltZXIpOwogICAgfQogICAgdGhpcy5fbG9hZGlu
        Z1N0YXRlVGltZXIgPSBudWxsOwogIH0KfSk7CgpmdW5jdGlvbiB0cmlnZ2Vy
        RXZlbnQoaGFuZGxlckluZm9zLCBpZ25vcmVGYWlsdXJlLCBhcmdzKSB7CiAg
        dmFyIG5hbWUgPSBhcmdzLnNoaWZ0KCk7CgogIGlmICghaGFuZGxlckluZm9z
        KSB7CiAgICBpZiAoaWdub3JlRmFpbHVyZSkgeyByZXR1cm47IH0KICAgIHRo
        cm93IG5ldyBFbWJlci5FcnJvcigiQ291bGQgbm90IHRyaWdnZXIgZXZlbnQg
        JyIgKyBuYW1lICsgIicuIFRoZXJlIGFyZSBubyBhY3RpdmUgaGFuZGxlcnMi
        KTsKICB9CgogIHZhciBldmVudFdhc0hhbmRsZWQgPSBmYWxzZTsKCiAgZm9y
        ICh2YXIgaT1oYW5kbGVySW5mb3MubGVuZ3RoLTE7IGk+PTA7IGktLSkgewog
        ICAgdmFyIGhhbmRsZXJJbmZvID0gaGFuZGxlckluZm9zW2ldLAogICAgICAg
        IGhhbmRsZXIgPSBoYW5kbGVySW5mby5oYW5kbGVyOwoKICAgIGlmIChoYW5k
        bGVyLl9hY3Rpb25zICYmIGhhbmRsZXIuX2FjdGlvbnNbbmFtZV0pIHsKICAg
        ICAgaWYgKGhhbmRsZXIuX2FjdGlvbnNbbmFtZV0uYXBwbHkoaGFuZGxlciwg
        YXJncykgPT09IHRydWUpIHsKICAgICAgICBldmVudFdhc0hhbmRsZWQgPSB0
        cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQog
        ICAgfQogIH0KCiAgaWYgKCFldmVudFdhc0hhbmRsZWQgJiYgIWlnbm9yZUZh
        aWx1cmUpIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiTm90aGluZyBo
        YW5kbGVkIHRoZSBhY3Rpb24gJyIgKyBuYW1lICsgIicuIElmIHlvdSBkaWQg
        aGFuZGxlIHRoZSBhY3Rpb24sIHRoaXMgZXJyb3IgY2FuIGJlIGNhdXNlZCBi
        eSByZXR1cm5pbmcgdHJ1ZSBmcm9tIGFuIGFjdGlvbiBoYW5kbGVyLCBjYXVz
        aW5nIHRoZSBhY3Rpb24gdG8gYnViYmxlLiIpOwogIH0KfQoKZnVuY3Rpb24g
        dXBkYXRlUGF0aHMocm91dGVyKSB7CiAgdmFyIGFwcENvbnRyb2xsZXIgPSBy
        b3V0ZXIuY29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjphcHBsaWNhdGlv
        bicpLAogICAgICBpbmZvcyA9IHJvdXRlci5yb3V0ZXIuY3VycmVudEhhbmRs
        ZXJJbmZvcywKICAgICAgcGF0aCA9IEVtYmVyLlJvdXRlci5fcm91dGVQYXRo
        KGluZm9zKTsKCiAgaWYgKCEoJ2N1cnJlbnRQYXRoJyBpbiBhcHBDb250cm9s
        bGVyKSkgewogICAgZGVmaW5lUHJvcGVydHkoYXBwQ29udHJvbGxlciwgJ2N1
        cnJlbnRQYXRoJyk7CiAgfQoKICBzZXQoYXBwQ29udHJvbGxlciwgJ2N1cnJl
        bnRQYXRoJywgcGF0aCk7CgogIGlmICghKCdjdXJyZW50Um91dGVOYW1lJyBp
        biBhcHBDb250cm9sbGVyKSkgewogICAgZGVmaW5lUHJvcGVydHkoYXBwQ29u
        dHJvbGxlciwgJ2N1cnJlbnRSb3V0ZU5hbWUnKTsKICB9CgogIHNldChhcHBD
        b250cm9sbGVyLCAnY3VycmVudFJvdXRlTmFtZScsIGluZm9zW2luZm9zLmxl
        bmd0aCAtIDFdLm5hbWUpOwp9CgpmdW5jdGlvbiBzY2hlZHVsZUxlZ2FjeUxv
        YWRpbmdSb3V0ZUVudHJ5KHJvdXRlcikgewogIGNhbmNlbExlZ2FjeUxvYWRp
        bmdSb3V0ZUVudHJ5KHJvdXRlcik7CiAgaWYgKHJvdXRlci5yb3V0ZXIuYWN0
        aXZlVHJhbnNpdGlvbikgewogICAgcm91dGVyLl9sZWdhY3lMb2FkaW5nU3Rh
        dGVUaW1lciA9IEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3JvdXRlclRyYW5z
        aXRpb25zJywgbnVsbCwgZW50ZXJMZWdhY3lMb2FkaW5nUm91dGUsIHJvdXRl
        cik7CiAgfQp9CgpmdW5jdGlvbiBlbnRlckxlZ2FjeUxvYWRpbmdSb3V0ZShy
        b3V0ZXIpIHsKICB2YXIgbG9hZGluZ1JvdXRlID0gcm91dGVyLnJvdXRlci5n
        ZXRIYW5kbGVyKCdsb2FkaW5nJyk7CiAgaWYgKGxvYWRpbmdSb3V0ZSAmJiAh
        bG9hZGluZ1JvdXRlLl9sb2FkaW5nU3RhdGVBY3RpdmUpIHsKICAgIGlmIChs
        b2FkaW5nUm91dGUuZW50ZXIpIHsgbG9hZGluZ1JvdXRlLmVudGVyKCk7IH0K
        ICAgIGlmIChsb2FkaW5nUm91dGUuc2V0dXApIHsgbG9hZGluZ1JvdXRlLnNl
        dHVwKCk7IH0KICAgIGxvYWRpbmdSb3V0ZS5fbG9hZGluZ1N0YXRlQWN0aXZl
        ID0gdHJ1ZTsKICB9Cn0KCmZ1bmN0aW9uIGNhbmNlbExlZ2FjeUxvYWRpbmdS
        b3V0ZUVudHJ5KHJvdXRlcikgewogIGlmIChyb3V0ZXIuX2xlZ2FjeUxvYWRp
        bmdTdGF0ZVRpbWVyKSB7CiAgICBFbWJlci5ydW4uY2FuY2VsKHJvdXRlci5f
        bGVnYWN5TG9hZGluZ1N0YXRlVGltZXIpOwogIH0KICByb3V0ZXIuX2xlZ2Fj
        eUxvYWRpbmdTdGF0ZVRpbWVyID0gbnVsbDsKfQoKZnVuY3Rpb24gZXhpdExl
        Z2FjeUxvYWRpbmdSb3V0ZShyb3V0ZXIpIHsKCiAgY2FuY2VsTGVnYWN5TG9h
        ZGluZ1JvdXRlRW50cnkocm91dGVyKTsKCiAgdmFyIGxvYWRpbmdSb3V0ZSA9
        IHJvdXRlci5yb3V0ZXIuZ2V0SGFuZGxlcignbG9hZGluZycpOwoKICBpZiAo
        bG9hZGluZ1JvdXRlICYmIGxvYWRpbmdSb3V0ZS5fbG9hZGluZ1N0YXRlQWN0
        aXZlKSB7CiAgICBpZiAobG9hZGluZ1JvdXRlLmV4aXQpIHsgbG9hZGluZ1Jv
        dXRlLmV4aXQoKTsgfQogICAgbG9hZGluZ1JvdXRlLl9sb2FkaW5nU3RhdGVB
        Y3RpdmUgPSBmYWxzZTsKICB9Cn0KCkVtYmVyLlJvdXRlci5yZW9wZW5DbGFz
        cyh7CiAgcm91dGVyOiBudWxsLAogIG1hcDogZnVuY3Rpb24oY2FsbGJhY2sp
        IHsKICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjsKICAgIGlmICghcm91
        dGVyKSB7CiAgICAgIHJvdXRlciA9IG5ldyBSb3V0ZXIoKTsKICAgICAgcm91
        dGVyLmNhbGxiYWNrcyA9IFtdOwogICAgICByb3V0ZXIudHJpZ2dlckV2ZW50
        ID0gdHJpZ2dlckV2ZW50OwogICAgICB0aGlzLnJlb3BlbkNsYXNzKHsgcm91
        dGVyOiByb3V0ZXIgfSk7CiAgICB9CgogICAgaWYgKGdldCh0aGlzLCAnbmFt
        ZXNwYWNlLkxPR19UUkFOU0lUSU9OU19JTlRFUk5BTCcpKSB7CiAgICAgIHJv
        dXRlci5sb2cgPSBFbWJlci5Mb2dnZXIuZGVidWc7CiAgICB9CgogICAgdmFy
        IGRzbCA9IEVtYmVyLlJvdXRlckRTTC5tYXAoZnVuY3Rpb24oKSB7CiAgICAg
        IHRoaXMucmVzb3VyY2UoJ2FwcGxpY2F0aW9uJywgeyBwYXRoOiAiLyIgfSwg
        ZnVuY3Rpb24oKSB7CiAgICAgICAgZm9yICh2YXIgaT0wOyBpIDwgcm91dGVy
        LmNhbGxiYWNrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcm91dGVyLmNh
        bGxiYWNrc1tpXS5jYWxsKHRoaXMpOwogICAgICAgIH0KICAgICAgICBjYWxs
        YmFjay5jYWxsKHRoaXMpOwogICAgICB9KTsKICAgIH0pOwoKICAgIHJvdXRl
        ci5jYWxsYmFja3MucHVzaChjYWxsYmFjayk7CiAgICByb3V0ZXIubWFwKGRz
        bC5nZW5lcmF0ZSgpKTsKICAgIHJldHVybiByb3V0ZXI7CiAgfSwKCiAgX3Jv
        dXRlUGF0aDogZnVuY3Rpb24oaGFuZGxlckluZm9zKSB7CiAgICB2YXIgcGF0
        aCA9IFtdOwoKICAgIGZvciAodmFyIGk9MSwgbD1oYW5kbGVySW5mb3MubGVu
        Z3RoOyBpPGw7IGkrKykgewogICAgICB2YXIgbmFtZSA9IGhhbmRsZXJJbmZv
        c1tpXS5uYW1lLAogICAgICAgICAgbmFtZVBhcnRzID0gbmFtZS5zcGxpdCgi
        LiIpOwoKICAgICAgcGF0aC5wdXNoKG5hbWVQYXJ0c1tuYW1lUGFydHMubGVu
        Z3RoIC0gMV0pOwogICAgfQoKICAgIHJldHVybiBwYXRoLmpvaW4oIi4iKTsK
        ICB9Cn0pOwoKUm91dGVyLlRyYW5zaXRpb24ucHJvdG90eXBlLnNlbmQgPSBS
        b3V0ZXIuVHJhbnNpdGlvbi5wcm90b3R5cGUudHJpZ2dlcjsKCgoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXJvdXRpbmcKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9
        IEVtYmVyLnNldCwKICAgIGdldFByb3BlcnRpZXMgPSBFbWJlci5nZXRQcm9w
        ZXJ0aWVzLAogICAgY2xhc3NpZnkgPSBFbWJlci5TdHJpbmcuY2xhc3NpZnks
        CiAgICBmbXQgPSBFbWJlci5TdHJpbmcuZm10LAogICAgYV9mb3JFYWNoID0g
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICBhX3JlcGxhY2Ug
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMucmVwbGFjZTsKCnZhciBkZWZhdWx0
        QWN0aW9uSGFuZGxlcnMgPSB7CgogIHdpbGxSZXNvbHZlTW9kZWw6IGZ1bmN0
        aW9uKHRyYW5zaXRpb24sIG9yaWdpblJvdXRlKSB7CiAgICB0aGlzLnJvdXRl
        ci5fc2NoZWR1bGVMb2FkaW5nRXZlbnQodHJhbnNpdGlvbiwgb3JpZ2luUm91
        dGUpOwogIH0sCgogIGVycm9yOiBmdW5jdGlvbihlcnJvciwgdHJhbnNpdGlv
        biwgb3JpZ2luUm91dGUpIHsKICAgIAogICAgICBpZiAodGhpcyAhPT0gb3Jp
        Z2luUm91dGUpIHsKICAgICAgICB2YXIgY2hpbGRFcnJvclJvdXRlTmFtZSA9
        IGZpbmRDaGlsZFJvdXRlTmFtZSh0aGlzLCAnZXJyb3InKTsKICAgICAgICBp
        ZiAoY2hpbGRFcnJvclJvdXRlTmFtZSkgewogICAgICAgICAgdGhpcy5pbnRl
        cm1lZGlhdGVUcmFuc2l0aW9uVG8oY2hpbGRFcnJvclJvdXRlTmFtZSwgZXJy
        b3IpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAg
        CgogICAgaWYgKHRoaXMucm91dGVOYW1lID09PSAnYXBwbGljYXRpb24nKSB7
        CiAgICAgIEVtYmVyLkxvZ2dlci5hc3NlcnQoZmFsc2UsICdFcnJvciB3aGls
        ZSBsb2FkaW5nIHJvdXRlOiAnICsgRW1iZXIuaW5zcGVjdChlcnJvcikpOwog
        ICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0sCgogIGxvYWRpbmc6IGZ1bmN0
        aW9uKHRyYW5zaXRpb24sIG9yaWdpblJvdXRlKSB7CiAgICAKICAgICAgaWYg
        KHRoaXMgPT09IG9yaWdpblJvdXRlKSB7CiAgICAgICAgLy8gVGhpcyBpcyB0
        aGUgcm91dGUgd2l0aCB0aGUgZXJyb3I7IGp1c3QgYnViYmxlCiAgICAgICAg
        Ly8gc28gdGhhdCB0aGUgcGFyZW50IHJvdXRlIGNhbiBsb29rIHVwIGl0cyBj
        aGlsZCBsb2FkaW5nIHJvdXRlLgogICAgICAgIHJldHVybiB0cnVlOwogICAg
        ICB9CgogICAgICB2YXIgY2hpbGRMb2FkaW5nUm91dGVOYW1lID0gZmluZENo
        aWxkUm91dGVOYW1lKHRoaXMsICdsb2FkaW5nJyk7CiAgICAgIGlmIChjaGls
        ZExvYWRpbmdSb3V0ZU5hbWUpIHsKICAgICAgICB0aGlzLmludGVybWVkaWF0
        ZVRyYW5zaXRpb25UbyhjaGlsZExvYWRpbmdSb3V0ZU5hbWUpOwogICAgICB9
        IGVsc2UgaWYgKHRyYW5zaXRpb24ucGl2b3RIYW5kbGVyICE9PSB0aGlzKSB7
        CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIAogIH0KfTsKCi8q
        KgogIFRoZSBgRW1iZXIuUm91dGVgIGNsYXNzIGlzIHVzZWQgdG8gZGVmaW5l
        IGluZGl2aWR1YWwgcm91dGVzLiBSZWZlciB0bwogIHRoZSBbcm91dGluZyBn
        dWlkZV0oaHR0cDovL2VtYmVyanMuY29tL2d1aWRlcy9yb3V0aW5nLykgZm9y
        IGRvY3VtZW50YXRpb24uCgogIEBjbGFzcyBSb3V0ZQogIEBuYW1lc3BhY2Ug
        RW1iZXIKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8KRW1iZXIuUm91dGUg
        PSBFbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkFjdGlvbkhhbmRsZXIsIHsK
        CiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIEBtZXRob2QgZXhpdAogICovCiAg
        ZXhpdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmRlYWN0aXZhdGUoKTsKICAg
        IHRoaXMudGVhcmRvd25WaWV3cygpOwogIH0sCgogIC8qKgogICAgQHByaXZh
        dGUKCiAgICBAbWV0aG9kIGVudGVyCiAgKi8KICBlbnRlcjogZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLmFjdGl2YXRlKCk7CiAgfSwKCiAgLyoqCiAgICBUaGUg
        Y29sbGVjdGlvbiBvZiBmdW5jdGlvbnMsIGtleWVkIGJ5IG5hbWUsIGF2YWls
        YWJsZSBvbiB0aGlzIHJvdXRlIGFzCiAgICBhY3Rpb24gdGFyZ2V0cy4KCiAg
        ICBUaGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBpbnZva2VkIHdoZW4gYSBtYXRj
        aGluZyBge3thY3Rpb259fWAgaXMgdHJpZ2dlcmVkCiAgICBmcm9tIHdpdGhp
        biBhIHRlbXBsYXRlIGFuZCB0aGUgYXBwbGljYXRpb24ncyBjdXJyZW50IHJv
        dXRlIGlzIHRoaXMgcm91dGUuCgogICAgQWN0aW9ucyBjYW4gYWxzbyBiZSBp
        bnZva2VkIGZyb20gb3RoZXIgcGFydHMgb2YgeW91ciBhcHBsaWNhdGlvbiB2
        aWEgYFJvdXRlI3NlbmRgCiAgICBvciBgQ29udHJvbGxlciNzZW5kYC4KCiAg
        ICBUaGUgYGFjdGlvbnNgIGhhc2ggd2lsbCBpbmhlcml0IGFjdGlvbiBoYW5k
        bGVycyBmcm9tCiAgICB0aGUgYGFjdGlvbnNgIGhhc2ggZGVmaW5lZCBvbiBl
        eHRlbmRlZCBSb3V0ZSBwYXJlbnQgY2xhc3NlcwogICAgb3IgbWl4aW5zIHJh
        dGhlciB0aGFuIGp1c3QgcmVwbGFjZSB0aGUgZW50aXJlIGhhc2gsIGUuZy46
        CgogICAgYGBganMKICAgIEFwcC5DYW5EaXNwbGF5QmFubmVyID0gRW1iZXIu
        TWl4aW4uY3JlYXRlKHsKICAgICAgYWN0aW9uczogewogICAgICAgIGRpc3Bs
        YXlCYW5uZXI6IGZ1bmN0aW9uKG1zZykgewogICAgICAgICAgLy8gLi4uCiAg
        ICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBBcHAuV2VsY29tZVJvdXRl
        ID0gRW1iZXIuUm91dGUuZXh0ZW5kKEFwcC5DYW5EaXNwbGF5QmFubmVyLCB7
        CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBwbGF5TXVzaWM6IGZ1bmN0aW9u
        KCkgewogICAgICAgICAgLy8gLi4uCiAgICAgICAgfQogICAgICB9CiAgICB9
        KTsKCiAgICAvLyBgV2VsY29tZVJvdXRlYCwgd2hlbiBhY3RpdmUsIHdpbGwg
        YmUgYWJsZSB0byByZXNwb25kCiAgICAvLyB0byBib3RoIGFjdGlvbnMsIHNp
        bmNlIHRoZSBhY3Rpb25zIGhhc2ggaXMgbWVyZ2VkIHJhdGhlcgogICAgLy8g
        dGhlbiByZXBsYWNlZCB3aGVuIGV4dGVuZGluZyBtaXhpbnMgLyBwYXJlbnQg
        Y2xhc3Nlcy4KICAgIHRoaXMuc2VuZCgnZGlzcGxheUJhbm5lcicpOwogICAg
        dGhpcy5zZW5kKCdwbGF5TXVzaWMnKTsKICAgIGBgYAoKICAgIFdpdGhpbiBh
        IHJvdXRlJ3MgYWN0aW9uIGhhbmRsZXIsIHRoZSB2YWx1ZSBvZiB0aGUgYHRo
        aXNgIGNvbnRleHQKICAgIGlzIHRoZSBSb3V0ZSBvYmplY3Q6CgogICAgYGBg
        anMKICAgIEFwcC5Tb25nUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgbXlBY3Rpb246IGZ1bmN0aW9uKCkg
        ewogICAgICAgICAgdGhpcy5jb250cm9sbGVyRm9yKCJzb25nIik7CiAgICAg
        ICAgICB0aGlzLnRyYW5zaXRpb25Ubygib3RoZXIucm91dGUiKTsKICAgICAg
        ICAgIC4uLgogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAg
        ICBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGNhbGwgYHRoaXMuX3N1cGVyKClg
        IGZyb20gd2l0aGluIGFuCiAgICBhY3Rpb24gaGFuZGxlciBpZiBpdCBvdmVy
        cmlkZXMgYSBoYW5kbGVyIGRlZmluZWQgb24gYSBwYXJlbnQKICAgIGNsYXNz
        IG9yIG1peGluOgoKICAgIFRha2UgZm9yIGV4YW1wbGUgdGhlIGZvbGxvd2lu
        ZyByb3V0ZXM6CgogICAgYGBganMKICAgIEFwcC5EZWJ1Z1JvdXRlID0gRW1i
        ZXIuTWl4aW4uY3JlYXRlKHsKICAgICAgYWN0aW9uczogewogICAgICAgIGRl
        YnVnUm91dGVJbmZvcm1hdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBj
        b25zb2xlLmRlYnVnKCJ0cm9sb2xvIik7CiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKCiAgICBBcHAuQW5ub3lpbmdEZWJ1Z1JvdXRlID0gRW1iZXIuUm91
        dGUuZXh0ZW5kKEFwcC5EZWJ1Z1JvdXRlLCB7CiAgICAgIGFjdGlvbnM6IHsK
        ICAgICAgICBkZWJ1Z1JvdXRlSW5mb3JtYXRpb246IGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgLy8gYWxzbyBjYWxsIHRoZSBkZWJ1Z1JvdXRlSW5mb3JtYXRp
        b24gb2YgbWl4ZWQgaW4gQXBwLkRlYnVnUm91dGUKICAgICAgICAgIHRoaXMu
        X3N1cGVyKCk7CgogICAgICAgICAgLy8gc2hvdyBhZGRpdGlvbmFsIGFubm95
        YW5jZQogICAgICAgICAgd2luZG93LmFsZXJ0KC4uLik7CiAgICAgICAgfQog
        ICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgICMjIEJ1YmJsaW5nCgogICAg
        QnkgZGVmYXVsdCwgYW4gYWN0aW9uIHdpbGwgc3RvcCBidWJibGluZyBvbmNl
        IGEgaGFuZGxlciBkZWZpbmVkCiAgICBvbiB0aGUgYGFjdGlvbnNgIGhhc2gg
        aGFuZGxlcyBpdC4gVG8gY29udGludWUgYnViYmxpbmcgdGhlIGFjdGlvbiwK
        ICAgIHlvdSBtdXN0IHJldHVybiBgdHJ1ZWAgZnJvbSB0aGUgaGFuZGxlcjoK
        CiAgICBgYGBqcwogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMucmVzb3VyY2UoImFsYnVtIiwgZnVuY3Rpb24oKSB7CiAgICAg
        ICAgdGhpcy5yb3V0ZSgic29uZyIpOwogICAgICB9KTsKICAgIH0pOwoKICAg
        IEFwcC5BbGJ1bVJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAg
        YWN0aW9uczogewogICAgICAgIHN0YXJ0UGxheWluZzogZnVuY3Rpb24oKSB7
        CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBBcHAuQWxidW1Tb25n
        Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7
        CiAgICAgICAgc3RhcnRQbGF5aW5nOiBmdW5jdGlvbigpIHsKICAgICAgICAg
        IC8vIC4uLgoKICAgICAgICAgIGlmIChhY3Rpb25TaG91bGRBbHNvQmVUcmln
        Z2VyZWRPblBhcmVudFJvdXRlKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVl
        OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBg
        YGAKCiAgICAjIyBCdWlsdC1pbiBhY3Rpb25zCgogICAgVGhlcmUgYXJlIGEg
        ZmV3IGJ1aWx0LWluIGFjdGlvbnMgcGVydGFpbmluZyB0byB0cmFuc2l0aW9u
        cyB0aGF0IHlvdQogICAgY2FuIHVzZSB0byBjdXN0b21pemUgdHJhbnNpdGlv
        biBiZWhhdmlvcjogYHdpbGxUcmFuc2l0aW9uYCBhbmQKICAgIGBlcnJvcmAu
        CgogICAgIyMjIGB3aWxsVHJhbnNpdGlvbmAKCiAgICBUaGUgYHdpbGxUcmFu
        c2l0aW9uYCBhY3Rpb24gaXMgZmlyZWQgYXQgdGhlIGJlZ2lubmluZyBvZiBh
        bnkKICAgIGF0dGVtcHRlZCB0cmFuc2l0aW9uIHdpdGggYSBgVHJhbnNpdGlv
        bmAgb2JqZWN0IGFzIHRoZSBzb2xlCiAgICBhcmd1bWVudC4gVGhpcyBhY3Rp
        b24gY2FuIGJlIHVzZWQgZm9yIGFib3J0aW5nLCByZWRpcmVjdGluZywKICAg
        IG9yIGRlY29yYXRpbmcgdGhlIHRyYW5zaXRpb24gZnJvbSB0aGUgY3VycmVu
        dGx5IGFjdGl2ZSByb3V0ZXMuCgogICAgQSBnb29kIGV4YW1wbGUgaXMgcHJl
        dmVudGluZyBuYXZpZ2F0aW9uIHdoZW4gYSBmb3JtIGlzCiAgICBoYWxmLWZp
        bGxlZCBvdXQ6CgogICAgYGBganMKICAgIEFwcC5Db250YWN0Rm9ybVJvdXRl
        ID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAg
        ICAgIHdpbGxUcmFuc2l0aW9uOiBmdW5jdGlvbih0cmFuc2l0aW9uKSB7CiAg
        ICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLmdldCgndXNlckhhc0VudGVy
        ZWREYXRhJykpIHsKICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmRpc3Bs
        YXlOYXZpZ2F0aW9uQ29uZmlybSgpOwogICAgICAgICAgICB0cmFuc2l0aW9u
        LmFib3J0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9
        KTsKICAgIGBgYAoKICAgIFlvdSBjYW4gYWxzbyByZWRpcmVjdCBlbHNld2hl
        cmUgYnkgY2FsbGluZwogICAgYHRoaXMudHJhbnNpdGlvblRvKCdlbHNld2hl
        cmUnKWAgZnJvbSB3aXRoaW4gYHdpbGxUcmFuc2l0aW9uYC4KICAgIE5vdGUg
        dGhhdCBgd2lsbFRyYW5zaXRpb25gIHdpbGwgbm90IGJlIGZpcmVkIGZvciB0
        aGUKICAgIHJlZGlyZWN0aW5nIGB0cmFuc2l0aW9uVG9gLCBzaW5jZSBgd2ls
        bFRyYW5zaXRpb25gIGRvZXNuJ3QKICAgIGZpcmUgd2hlbiB0aGVyZSBpcyBh
        bHJlYWR5IGEgdHJhbnNpdGlvbiB1bmRlcndheS4gSWYgeW91IHdhbnQKICAg
        IHN1YnNlcXVlbnQgYHdpbGxUcmFuc2l0aW9uYCBhY3Rpb25zIHRvIGZpcmUg
        Zm9yIHRoZSByZWRpcmVjdGluZwogICAgdHJhbnNpdGlvbiwgeW91IG11c3Qg
        Zmlyc3QgZXhwbGljaXRseSBjYWxsCiAgICBgdHJhbnNpdGlvbi5hYm9ydCgp
        YC4KCiAgICAjIyMgYGVycm9yYAoKICAgIFdoZW4gYXR0ZW1wdGluZyB0byB0
        cmFuc2l0aW9uIGludG8gYSByb3V0ZSwgYW55IG9mIHRoZSBob29rcwogICAg
        bWF5IHRocm93IGFuIGVycm9yLCBvciByZXR1cm4gYSBwcm9taXNlIHRoYXQg
        cmVqZWN0cywgYXQgd2hpY2gKICAgIHBvaW50IGFuIGBlcnJvcmAgYWN0aW9u
        IHdpbGwgYmUgZmlyZWQgb24gdGhlIHBhcnRpYWxseS1lbnRlcmVkCiAgICBy
        b3V0ZXMsIGFsbG93aW5nIGZvciBwZXItcm91dGUgZXJyb3IgaGFuZGxpbmcg
        bG9naWMsIG9yIHNoYXJlZAogICAgZXJyb3IgaGFuZGxpbmcgbG9naWMgZGVm
        aW5lZCBvbiBhIHBhcmVudCByb3V0ZS4KCiAgICBIZXJlIGlzIGFuIGV4YW1w
        bGUgb2YgYW4gZXJyb3IgaGFuZGxlciB0aGF0IHdpbGwgYmUgaW52b2tlZAog
        ICAgZm9yIHJlamVjdGVkIHByb21pc2VzIC8gdGhyb3duIGVycm9ycyBmcm9t
        IHRoZSB2YXJpb3VzIGhvb2tzCiAgICBvbiB0aGUgcm91dGUsIGFzIHdlbGwg
        YXMgYW55IHVuaGFuZGxlZCBlcnJvcnMgZnJvbSBjaGlsZAogICAgcm91dGVz
        OgoKICAgIGBgYGpzCiAgICBBcHAuQWRtaW5Sb3V0ZSA9IEVtYmVyLlJvdXRl
        LmV4dGVuZCh7CiAgICAgIGJlZm9yZU1vZGVsOiBmdW5jdGlvbigpIHsKICAg
        ICAgICB0aHJvdyAiYmFkIHRoaW5ncyEiOwogICAgICAgIC8vIC4uLm9yLCBl
        cXVpdmFsZW50bHk6CiAgICAgICAgcmV0dXJuIEVtYmVyLlJTVlAucmVqZWN0
        KCJiYWQgdGhpbmdzISIpOwogICAgICB9LAoKICAgICAgYWN0aW9uczogewog
        ICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvciwgdHJhbnNpdGlvbikgewog
        ICAgICAgICAgLy8gQXNzdW1pbmcgd2UgZ290IGhlcmUgZHVlIHRvIHRoZSBl
        cnJvciBpbiBgYmVmb3JlTW9kZWxgLAogICAgICAgICAgLy8gd2UgY2FuIGV4
        cGVjdCB0aGF0IGVycm9yID09PSAiYmFkIHRoaW5ncyEiLAogICAgICAgICAg
        Ly8gYnV0IGEgcHJvbWlzZSBtb2RlbCByZWplY3Rpbmcgd291bGQgYWxzbwog
        ICAgICAgICAgLy8gY2FsbCB0aGlzIGhvb2ssIGFzIHdvdWxkIGFueSBlcnJv
        cnMgZW5jb3VudGVyZWQKICAgICAgICAgIC8vIGluIGBhZnRlck1vZGVsYC4K
        CiAgICAgICAgICAvLyBUaGUgYGVycm9yYCBob29rIGlzIGFsc28gcHJvdmlk
        ZWQgdGhlIGZhaWxlZAogICAgICAgICAgLy8gYHRyYW5zaXRpb25gLCB3aGlj
        aCBjYW4gYmUgc3RvcmVkIGFuZCBsYXRlcgogICAgICAgICAgLy8gYC5yZXRy
        eSgpYGQgaWYgZGVzaXJlZC4KCiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25U
        bygnbG9naW4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBg
        CgogICAgYGVycm9yYCBhY3Rpb25zIHRoYXQgYnViYmxlIHVwIGFsbCB0aGUg
        d2F5IHRvIGBBcHBsaWNhdGlvblJvdXRlYAogICAgd2lsbCBmaXJlIGEgZGVm
        YXVsdCBlcnJvciBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXJyb3IuIFlvdSBj
        YW4KICAgIHNwZWNpZnkgeW91ciBvd24gZ2xvYmFsIGRlZmF1bHQgZXJyb3Ig
        aGFuZGxlciBieSBvdmVycmlkaW5nIHRoZQogICAgYGVycm9yYCBoYW5kbGVy
        IG9uIGBBcHBsaWNhdGlvblJvdXRlYDoKCiAgICBgYGBqcwogICAgQXBwLkFw
        cGxpY2F0aW9uUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBh
        Y3Rpb25zOiB7CiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yLCB0cmFu
        c2l0aW9uKSB7CiAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJGb3IoJ2Jhbm5l
        cicpLmRpc3BsYXlFcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgICB9CiAg
        ICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQHNlZSB7RW1iZXIuUm91dGUj
        c2VuZH0KICAgIEBzZWUge0hhbmRsZWJhcnMuaGVscGVycy5hY3Rpb259Cgog
        ICAgQHByb3BlcnR5IGFjdGlvbnMKICAgIEB0eXBlIEhhc2gKICAgIEBkZWZh
        dWx0IG51bGwKICAqLwogIGFjdGlvbnM6IG51bGwsCgogIF9hY3Rpb25zOiBk
        ZWZhdWx0QWN0aW9uSGFuZGxlcnMsCgogIC8qKgogICAgQGRlcHJlY2F0ZWQK
        CiAgICBQbGVhc2UgdXNlIGBhY3Rpb25zYCBpbnN0ZWFkLgogICAgQG1ldGhv
        ZCBldmVudHMKICAqLwogIGV2ZW50czogZGVmYXVsdEFjdGlvbkhhbmRsZXJz
        LAoKICBtZXJnZWRQcm9wZXJ0aWVzOiBbJ2V2ZW50cyddLAoKICAvKioKICAg
        IFRoaXMgaG9vayBpcyBleGVjdXRlZCB3aGVuIHRoZSByb3V0ZXIgY29tcGxl
        dGVseSBleGl0cyB0aGlzIHJvdXRlLiBJdCBpcwogICAgbm90IGV4ZWN1dGVk
        IHdoZW4gdGhlIG1vZGVsIGZvciB0aGUgcm91dGUgY2hhbmdlcy4KCiAgICBA
        bWV0aG9kIGRlYWN0aXZhdGUKICAqLwogIGRlYWN0aXZhdGU6IEVtYmVyLkss
        CgogIC8qKgogICAgVGhpcyBob29rIGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHJv
        dXRlciBlbnRlcnMgdGhlIHJvdXRlIGZvciB0aGUgZmlyc3QgdGltZS4KICAg
        IEl0IGlzIG5vdCBleGVjdXRlZCB3aGVuIHRoZSBtb2RlbCBmb3IgdGhlIHJv
        dXRlIGNoYW5nZXMuCgogICAgQG1ldGhvZCBhY3RpdmF0ZQogICovCiAgYWN0
        aXZhdGU6IEVtYmVyLkssCgogIC8qKgogICAgVHJhbnNpdGlvbiBpbnRvIGFu
        b3RoZXIgcm91dGUuIE9wdGlvbmFsbHkgc3VwcGx5IG1vZGVsKHMpIGZvciB0
        aGUKICAgIHJvdXRlIGluIHF1ZXN0aW9uLiBJZiBtdWx0aXBsZSBtb2RlbHMg
        YXJlIHN1cHBsaWVkIHRoZXkgd2lsbCBiZSBhcHBsaWVkCiAgICBsYXN0IHRv
        IGZpcnN0IHJlY3Vyc2l2ZWx5IHVwIHRoZSByZXNvdXJjZSB0cmVlIChzZWUg
        TXVsdGlwbGUgTW9kZWxzIEV4YW1wbGUKICAgIGJlbG93KS4gVGhlIG1vZGVs
        KHMpIHdpbGwgYmUgc2VyaWFsaXplZCBpbnRvIHRoZSBVUkwgdXNpbmcgdGhl
        IGFwcHJvcHJpYXRlCiAgICByb3V0ZSdzIGBzZXJpYWxpemVgIGhvb2suIFNl
        ZSBhbHNvICdyZXBsYWNlV2l0aCcuCgogICAgU2ltcGxlIFRyYW5zaXRpb24g
        RXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Sb3V0ZXIubWFw
        KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJvdXRlKCJpbmRleCIpOwogICAg
        ICB0aGlzLnJvdXRlKCJzZWNyZXQiKTsKICAgICAgdGhpcy5yb3V0ZSgiZm91
        ck9oRm91ciIsIHsgcGF0aDogIio6In0pOwogICAgfSk7CgogICAgQXBwLklu
        ZGV4Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25z
        OiB7CiAgICAgICAgbW92ZVRvU2VjcmV0OiBmdW5jdGlvbihjb250ZXh0KXsK
        ICAgICAgICAgIGlmIChhdXRob3JpemVkKCkpewogICAgICAgICAgICB0aGlz
        LnRyYW5zaXRpb25Ubygnc2VjcmV0JywgY29udGV4dCk7CiAgICAgICAgICB9
        CiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdmb3VyT2hGb3VyJyk7
        CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIE11bHRp
        cGxlIE1vZGVscyBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBw
        LlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucm91dGUoImlu
        ZGV4Iik7CiAgICAgIHRoaXMucmVzb3VyY2UoJ2JyZWFrZmFzdCcsIHtwYXRo
        Oic6YnJlYWtmYXN0SWQnfSwgZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLnJl
        c291cmNlKCdjZXJlYWwnLCB7cGF0aDogJzpjZXJlYWxJZCd9KTsKICAgICAg
        fSk7CiAgICB9KTsKCiAgICBBcHAuSW5kZXhSb3V0ZSA9IEVtYmVyLlJvdXRl
        LmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBtb3ZlVG9DaG9j
        b2xhdGVDZXJlYWw6IGZ1bmN0aW9uKCl7CiAgICAgICAgICB2YXIgY2VyZWFs
        ID0geyBjZXJlYWxJZDogIkNob2NvbGF0ZVl1bW1pbmVzcyJ9LAogICAgICAg
        ICAgICAgIGJyZWFrZmFzdCA9IHticmVha2Zhc3RJZDogIkNlcmVhbEFuZE1p
        bGsifTsKCiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25UbygnY2VyZWFsJywg
        YnJlYWtmYXN0LCBjZXJlYWwpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7
        CgogICAgQG1ldGhvZCB0cmFuc2l0aW9uVG8KICAgIEBwYXJhbSB7U3RyaW5n
        fSBuYW1lIHRoZSBuYW1lIG9mIHRoZSByb3V0ZQogICAgQHBhcmFtIHsuLi5P
        YmplY3R9IG1vZGVscyB0aGUgbW9kZWwocykgdG8gYmUgdXNlZCB3aGlsZSB0
        cmFuc2l0aW9uaW5nCiAgICB0byB0aGUgcm91dGUuCiAgKi8KICB0cmFuc2l0
        aW9uVG86IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQpIHsKICAgIHZhciByb3V0
        ZXIgPSB0aGlzLnJvdXRlcjsKICAgIHJldHVybiByb3V0ZXIudHJhbnNpdGlv
        blRvLmFwcGx5KHJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAg
        IFBlcmZvcm0gYSBzeW5jaHJvbm91cyB0cmFuc2l0aW9uIGludG8gYW5vdGhl
        ciByb3V0ZSB3aXRoIG91dCBhdHRlbXB0aW5nCiAgICB0byByZXNvbHZlIHBy
        b21pc2VzLCB1cGRhdGUgdGhlIFVSTCwgb3IgYWJvcnQgYW55IGN1cnJlbnRs
        eSBhY3RpdmUKICAgIGFzeW5jaHJvbm91cyB0cmFuc2l0aW9ucyAoaS5lLiBy
        ZWd1bGFyIHRyYW5zaXRpb25zIGNhdXNlZCBieQogICAgYHRyYW5zaXRpb25U
        b2Agb3IgVVJMIGNoYW5nZXMpLgoKICAgIFRoaXMgbWV0aG9kIGlzIGhhbmR5
        IGZvciBwZXJmb3JtaW5nIGludGVybWVkaWF0ZSB0cmFuc2l0aW9ucyBvbiB0
        aGUKICAgIHdheSB0byBhIGZpbmFsIGRlc3RpbmF0aW9uIHJvdXRlLCBhbmQg
        aXMgY2FsbGVkIGludGVybmFsbHkgYnkgdGhlCiAgICBkZWZhdWx0IGltcGxl
        bWVudGF0aW9ucyBvZiB0aGUgYGVycm9yYCBhbmQgYGxvYWRpbmdgIGhhbmRs
        ZXJzLgoKICAgIEBtZXRob2QgaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvCiAg
        ICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUK
        ICAgIEBwYXJhbSB7Li4uT2JqZWN0fSBtb2RlbHMgdGhlIG1vZGVsKHMpIHRv
        IGJlIHVzZWQgd2hpbGUgdHJhbnNpdGlvbmluZwogICAgdG8gdGhlIHJvdXRl
        LgogICAqLwogIGludGVybWVkaWF0ZVRyYW5zaXRpb25UbzogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7CiAgICByb3V0ZXIu
        aW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvLmFwcGx5KHJvdXRlciwgYXJndW1l
        bnRzKTsKICB9LAoKICAvKioKICAgIFRyYW5zaXRpb24gaW50byBhbm90aGVy
        IHJvdXRlIHdoaWxlIHJlcGxhY2luZyB0aGUgY3VycmVudCBVUkwsIGlmIHBv
        c3NpYmxlLgogICAgVGhpcyB3aWxsIHJlcGxhY2UgdGhlIGN1cnJlbnQgaGlz
        dG9yeSBlbnRyeSBpbnN0ZWFkIG9mIGFkZGluZyBhIG5ldyBvbmUuCiAgICBC
        ZXNpZGUgdGhhdCwgaXQgaXMgaWRlbnRpY2FsIHRvIGB0cmFuc2l0aW9uVG9g
        IGluIGFsbCBvdGhlciByZXNwZWN0cy4gU2VlCiAgICAndHJhbnNpdGlvblRv
        JyBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgbXVsdGlw
        bGUgbW9kZWxzLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yb3V0
        ZSgiaW5kZXgiKTsKICAgICAgdGhpcy5yb3V0ZSgic2VjcmV0Iik7CiAgICB9
        KTsKCiAgICBBcHAuU2VjcmV0Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQo
        ewogICAgICBhZnRlck1vZGVsOiBmdW5jdGlvbigpIHsKICAgICAgICBpZiAo
        IWF1dGhvcml6ZWQoKSl7CiAgICAgICAgICB0aGlzLnJlcGxhY2VXaXRoKCdp
        bmRleCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHJlcGxhY2VXaXRoCiAgICBAcGFyYW0ge1N0cmluZ30gbmFt
        ZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUKICAgIEBwYXJhbSB7Li4uT2JqZWN0
        fSBtb2RlbHMgdGhlIG1vZGVsKHMpIHRvIGJlIHVzZWQgd2hpbGUgdHJhbnNp
        dGlvbmluZwogICAgdG8gdGhlIHJvdXRlLgogICovCiAgcmVwbGFjZVdpdGg6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyOwog
        ICAgcmV0dXJuIHJvdXRlci5yZXBsYWNlV2l0aC5hcHBseShyb3V0ZXIsIGFy
        Z3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBTZW5kcyBhbiBhY3Rpb24gdG8g
        dGhlIHJvdXRlciwgd2hpY2ggd2lsbCBkZWxlZ2F0ZSBpdCB0byB0aGUgY3Vy
        cmVudGx5CiAgICBhY3RpdmUgcm91dGUgaGllcmFyY2h5IHBlciB0aGUgYnVi
        YmxpbmcgcnVsZXMgZXhwbGFpbmVkIHVuZGVyIGBhY3Rpb25zYC4KCiAgICBF
        eGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlJvdXRlci5tYXAo
        ZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucm91dGUoImluZGV4Iik7CiAgICB9
        KTsKCiAgICBBcHAuQXBwbGljYXRpb25Sb3V0ZSA9IEVtYmVyLlJvdXRlLmV4
        dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICB0cmFjazogZnVuY3Rp
        b24oYXJnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhhcmcsICd3YXMgY2xp
        Y2tlZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgQXBwLklu
        ZGV4Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25z
        OiB7CiAgICAgICAgdHJhY2tJZkRlYnVnOiBmdW5jdGlvbihhcmcpIHsKICAg
        ICAgICAgIGlmIChkZWJ1ZykgewogICAgICAgICAgICB0aGlzLnNlbmQoJ3Ry
        YWNrJywgYXJnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAg
        IH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBzZW5kCiAgICBAcGFyYW0ge1N0
        cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgYWN0aW9uIHRvIHRyaWdnZXIK
        ICAgIEBwYXJhbSB7Li4uKn0gYXJncwogICovCiAgc2VuZDogZnVuY3Rpb24o
        KSB7CiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuc2VuZC5hcHBseSh0aGlzLnJv
        dXRlciwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgog
        ICAgVGhpcyBob29rIGlzIHRoZSBlbnRyeSBwb2ludCBmb3Igcm91dGVyLmpz
        CgogICAgQG1ldGhvZCBzZXR1cAogICovCiAgc2V0dXA6IGZ1bmN0aW9uKGNv
        bnRleHQsIHF1ZXJ5UGFyYW1zKSB7CiAgICB2YXIgY29udHJvbGxlck5hbWUg
        PSB0aGlzLmNvbnRyb2xsZXJOYW1lIHx8IHRoaXMucm91dGVOYW1lLAogICAg
        ICAgIGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXJGb3IoY29udHJvbGxl
        ck5hbWUsIHRydWUpOwogICAgaWYgKCFjb250cm9sbGVyKSB7CiAgICAgIGNv
        bnRyb2xsZXIgPSAgdGhpcy5nZW5lcmF0ZUNvbnRyb2xsZXIoY29udHJvbGxl
        ck5hbWUsIGNvbnRleHQpOwogICAgfQoKICAgIC8vIEFzc2lnbiB0aGUgcm91
        dGUncyBjb250cm9sbGVyIHNvIHRoYXQgaXQgY2FuIG1vcmUgZWFzaWx5IGJl
        CiAgICAvLyByZWZlcmVuY2VkIGluIGFjdGlvbiBoYW5kbGVycwogICAgdGhp
        cy5jb250cm9sbGVyID0gY29udHJvbGxlcjsKCiAgICB2YXIgYXJncyA9IFtj
        b250cm9sbGVyLCBjb250ZXh0XTsKCiAgICBpZiAoRW1iZXIuRkVBVFVSRVMu
        aXNFbmFibGVkKCJxdWVyeS1wYXJhbXMiKSkgewogICAgICBhcmdzLnB1c2go
        cXVlcnlQYXJhbXMpOwogICAgfQoKICAgIGlmICh0aGlzLnNldHVwQ29udHJv
        bGxlcnMpIHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCJFbWJlci5Sb3V0ZS5z
        ZXR1cENvbnRyb2xsZXJzIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRW1i
        ZXIuUm91dGUuc2V0dXBDb250cm9sbGVyKGNvbnRyb2xsZXIsIG1vZGVsKSBp
        bnN0ZWFkLiIpOwogICAgICB0aGlzLnNldHVwQ29udHJvbGxlcnMoY29udHJv
        bGxlciwgY29udGV4dCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnNldHVw
        Q29udHJvbGxlci5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KCiAgICBpZiAo
        dGhpcy5yZW5kZXJUZW1wbGF0ZXMpIHsKICAgICAgRW1iZXIuZGVwcmVjYXRl
        KCJFbWJlci5Sb3V0ZS5yZW5kZXJUZW1wbGF0ZXMgaXMgZGVwcmVjYXRlZC4g
        UGxlYXNlIHVzZSBFbWJlci5Sb3V0ZS5yZW5kZXJUZW1wbGF0ZShjb250cm9s
        bGVyLCBtb2RlbCkgaW5zdGVhZC4iKTsKICAgICAgdGhpcy5yZW5kZXJUZW1w
        bGF0ZXMoY29udGV4dCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnJlbmRl
        clRlbXBsYXRlLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfQogIH0sCgogIC8q
        KgogICAgQSBob29rIHlvdSBjYW4gaW1wbGVtZW50IHRvIG9wdGlvbmFsbHkg
        cmVkaXJlY3QgdG8gYW5vdGhlciByb3V0ZS4KCiAgICBJZiB5b3UgY2FsbCBg
        dGhpcy50cmFuc2l0aW9uVG9gIGZyb20gaW5zaWRlIG9mIHRoaXMgaG9vaywg
        dGhpcyByb3V0ZQogICAgd2lsbCBub3QgYmUgZW50ZXJlZCBpbiBmYXZvciBv
        ZiB0aGUgb3RoZXIgaG9vay4KCiAgICBOb3RlIHRoYXQgdGhpcyBob29rIGlz
        IGNhbGxlZCBieSB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZgogICAg
        YGFmdGVyTW9kZWxgLCBzbyBpZiB5b3Ugb3ZlcnJpZGUgYGFmdGVyTW9kZWxg
        LCB5b3UgbXVzdCBlaXRoZXIKICAgIGV4cGxpY2l0bHkgY2FsbCBgcmVkaXJl
        Y3RgIG9yIGp1c3QgcHV0IHlvdXIgcmVkaXJlY3RpbmcKICAgIGB0aGlzLnRy
        YW5zaXRpb25UbygpYCBjYWxsIHdpdGhpbiBgYWZ0ZXJNb2RlbGAuCgogICAg
        QG1ldGhvZCByZWRpcmVjdAogICAgQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRo
        ZSBtb2RlbCBmb3IgdGhpcyByb3V0ZQogICovCiAgcmVkaXJlY3Q6IEVtYmVy
        LkssCgogIC8qKgogICAgVGhpcyBob29rIGlzIHRoZSBmaXJzdCBvZiB0aGUg
        cm91dGUgZW50cnkgdmFsaWRhdGlvbiBob29rcwogICAgY2FsbGVkIHdoZW4g
        YW4gYXR0ZW1wdCBpcyBtYWRlIHRvIHRyYW5zaXRpb24gaW50byBhIHJvdXRl
        CiAgICBvciBvbmUgb2YgaXRzIGNoaWxkcmVuLiBJdCBpcyBjYWxsZWQgYmVm
        b3JlIGBtb2RlbGAgYW5kCiAgICBgYWZ0ZXJNb2RlbGAsIGFuZCBpcyBhcHBy
        b3ByaWF0ZSBmb3IgY2FzZXMgd2hlbjoKCiAgICAxKSBBIGRlY2lzaW9uIGNh
        biBiZSBtYWRlIHRvIHJlZGlyZWN0IGVsc2V3aGVyZSB3aXRob3V0CiAgICAg
        ICBuZWVkaW5nIHRvIHJlc29sdmUgdGhlIG1vZGVsIGZpcnN0LgogICAgMikg
        QW55IGFzeW5jIG9wZXJhdGlvbnMgbmVlZCB0byBvY2N1ciBmaXJzdCBiZWZv
        cmUgdGhlCiAgICAgICBtb2RlbCBpcyBhdHRlbXB0ZWQgdG8gYmUgcmVzb2x2
        ZWQuCgogICAgVGhpcyBob29rIGlzIHByb3ZpZGVkIHRoZSBjdXJyZW50IGB0
        cmFuc2l0aW9uYCBhdHRlbXB0CiAgICBhcyBhIHBhcmFtZXRlciwgd2hpY2gg
        Y2FuIGJlIHVzZWQgdG8gYC5hYm9ydCgpYCB0aGUgdHJhbnNpdGlvbiwKICAg
        IHNhdmUgaXQgZm9yIGEgbGF0ZXIgYC5yZXRyeSgpYCwgb3IgcmV0cmlldmUg
        dmFsdWVzIHNldAogICAgb24gaXQgZnJvbSBhIHByZXZpb3VzIGhvb2suIFlv
        dSBjYW4gYWxzbyBqdXN0IGNhbGwKICAgIGB0aGlzLnRyYW5zaXRpb25Ub2Ag
        dG8gYW5vdGhlciByb3V0ZSB0byBpbXBsaWNpdGx5CiAgICBhYm9ydCB0aGUg
        YHRyYW5zaXRpb25gLgoKICAgIFlvdSBjYW4gcmV0dXJuIGEgcHJvbWlzZSBm
        cm9tIHRoaXMgaG9vayB0byBwYXVzZSB0aGUKICAgIHRyYW5zaXRpb24gdW50
        aWwgdGhlIHByb21pc2UgcmVzb2x2ZXMgKG9yIHJlamVjdHMpLiBUaGlzIGNv
        dWxkCiAgICBiZSB1c2VmdWwsIGZvciBpbnN0YW5jZSwgZm9yIHJldHJpZXZp
        bmcgYXN5bmMgY29kZSBmcm9tCiAgICB0aGUgc2VydmVyIHRoYXQgaXMgcmVx
        dWlyZWQgdG8gZW50ZXIgYSByb3V0ZS4KCiAgICBgYGBqcwogICAgQXBwLlBv
        c3RSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGJlZm9yZU1v
        ZGVsOiBmdW5jdGlvbih0cmFuc2l0aW9uKSB7CiAgICAgICAgaWYgKCFBcHAu
        UG9zdCkgewogICAgICAgICAgcmV0dXJuIEVtYmVyLiQuZ2V0U2NyaXB0KCcv
        bW9kZWxzL3Bvc3QuanMnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwog
        ICAgYGBgCgogICAgSWYgYEFwcC5Qb3N0YCBkb2Vzbid0IGV4aXN0IGluIHRo
        ZSBhYm92ZSBleGFtcGxlLAogICAgYGJlZm9yZU1vZGVsYCB3aWxsIHVzZSBq
        UXVlcnkncyBgZ2V0U2NyaXB0YCwgd2hpY2gKICAgIHJldHVybnMgYSBwcm9t
        aXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIHNlcnZlciBoYXMKICAgIHN1
        Y2Nlc3NmdWxseSByZXRyaWV2ZWQgYW5kIGV4ZWN1dGVkIHRoZSBjb2RlIGZy
        b20gdGhlCiAgICBzZXJ2ZXIuIE5vdGUgdGhhdCBpZiBhbiBlcnJvciB3ZXJl
        IHRvIG9jY3VyLCBpdCB3b3VsZAogICAgYmUgcGFzc2VkIHRvIHRoZSBgZXJy
        b3JgIGhvb2sgb24gYEVtYmVyLlJvdXRlYCwgYnV0CiAgICBpdCdzIGFsc28g
        cG9zc2libGUgdG8gaGFuZGxlIGVycm9ycyBzcGVjaWZpYyB0bwogICAgYGJl
        Zm9yZU1vZGVsYCByaWdodCBmcm9tIHdpdGhpbiB0aGUgaG9vayAodG8gZGlz
        dGluZ3Vpc2gKICAgIGZyb20gdGhlIHNoYXJlZCBlcnJvciBoYW5kbGluZyBi
        ZWhhdmlvciBvZiB0aGUgYGVycm9yYAogICAgaG9vayk6CgogICAgYGBganMK
        ICAgIEFwcC5Qb3N0Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAg
        ICBiZWZvcmVNb2RlbDogZnVuY3Rpb24odHJhbnNpdGlvbikgewogICAgICAg
        IGlmICghQXBwLlBvc3QpIHsKICAgICAgICAgIHZhciBzZWxmID0gdGhpczsK
        ICAgICAgICAgIHJldHVybiBFbWJlci4kLmdldFNjcmlwdCgncG9zdC5qcycp
        LnRoZW4obnVsbCwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBzZWxmLnRy
        YW5zaXRpb25UbygnaGVscCcpOwoKICAgICAgICAgICAgLy8gTm90ZSB0aGF0
        IHRoZSBhYm92ZSB0cmFuc2l0aW9uVG8gd2lsbCBpbXBsaWNpdGx5CiAgICAg
        ICAgICAgIC8vIGhhbHQgdGhlIHRyYW5zaXRpb24uIElmIHlvdSB3ZXJlIHRv
        IHJldHVybgogICAgICAgICAgICAvLyBub3RoaW5nIGZyb20gdGhpcyBwcm9t
        aXNlIHJlamVjdCBoYW5kbGVyLAogICAgICAgICAgICAvLyBhY2NvcmRpbmcg
        dG8gcHJvbWlzZSBzZW1hbnRpY3MsIHRoYXQgd291bGQKICAgICAgICAgICAg
        Ly8gY29udmVydCB0aGUgcmVqZWN0IGludG8gYSByZXNvbHZlIGFuZCB0aGUK
        ICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiB3b3VsZCBjb250aW51ZS4gVG8g
        cHJvcGFnYXRlIHRoZQogICAgICAgICAgICAvLyBlcnJvciBzbyB0aGF0IGl0
        J2QgYmUgaGFuZGxlZCBieSB0aGUgYGVycm9yYAogICAgICAgICAgICAvLyBo
        b29rLCB5b3Ugd291bGQgaGF2ZSB0byBlaXRoZXIKICAgICAgICAgICAgcmV0
        dXJuIEVtYmVyLlJTVlAucmVqZWN0KGUpOwogICAgICAgICAgICAvLyBvcgog
        ICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgfSk7CiAgICAgICAgfQog
        ICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgYmVmb3JlTW9k
        ZWwKICAgIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvbgogICAgQHBh
        cmFtIHtPYmplY3R9IHF1ZXJ5UGFyYW1zIHRoZSBhY3RpdmUgcXVlcnkgcGFy
        YW1zIGZvciB0aGlzIHJvdXRlCiAgICBAcmV0dXJuIHtQcm9taXNlfSBpZiB0
        aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGlzIGhvb2sgaXMKICAgICAgYSBw
        cm9taXNlLCB0aGUgdHJhbnNpdGlvbiB3aWxsIHBhdXNlIHVudGlsIHRoZSB0
        cmFuc2l0aW9uCiAgICAgIHJlc29sdmVzLiBPdGhlcndpc2UsIG5vbi1wcm9t
        aXNlIHJldHVybiB2YWx1ZXMgYXJlIG5vdAogICAgICB1dGlsaXplZCBpbiBh
        bnkgd2F5LgogICovCiAgYmVmb3JlTW9kZWw6IEVtYmVyLkssCgogIC8qKgog
        ICAgVGhpcyBob29rIGlzIGNhbGxlZCBhZnRlciB0aGlzIHJvdXRlJ3MgbW9k
        ZWwgaGFzIHJlc29sdmVkLgogICAgSXQgZm9sbG93cyBpZGVudGljYWwgYXN5
        bmMvcHJvbWlzZSBzZW1hbnRpY3MgdG8gYGJlZm9yZU1vZGVsYAogICAgYnV0
        IGlzIHByb3ZpZGVkIHRoZSByb3V0ZSdzIHJlc29sdmVkIG1vZGVsIGluIGFk
        ZGl0aW9uIHRvCiAgICB0aGUgYHRyYW5zaXRpb25gLCBhbmQgaXMgdGhlcmVm
        b3JlIHN1aXRlZCB0byBwZXJmb3JtaW5nCiAgICBsb2dpYyB0aGF0IGNhbiBv
        bmx5IHRha2UgcGxhY2UgYWZ0ZXIgdGhlIG1vZGVsIGhhcyBhbHJlYWR5CiAg
        ICByZXNvbHZlZC4KCiAgICBgYGBqcwogICAgQXBwLlBvc3RzUm91dGUgPSBF
        bWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhZnRlck1vZGVsOiBmdW5jdGlv
        bihwb3N0cywgdHJhbnNpdGlvbikgewogICAgICAgIGlmIChwb3N0cy5sZW5n
        dGggPT09IDEpIHsKICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdwb3N0
        LnNob3cnLCBwb3N0c1swXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsK
        ICAgIGBgYAoKICAgIFJlZmVyIHRvIGRvY3VtZW50YXRpb24gZm9yIGBiZWZv
        cmVNb2RlbGAgZm9yIGEgZGVzY3JpcHRpb24KICAgIG9mIHRyYW5zaXRpb24t
        cGF1c2luZyBzZW1hbnRpY3Mgd2hlbiBhIHByb21pc2UgaXMgcmV0dXJuZWQK
        ICAgIGZyb20gdGhpcyBob29rLgoKICAgIEBtZXRob2QgYWZ0ZXJNb2RlbAog
        ICAgQHBhcmFtIHtPYmplY3R9IHJlc29sdmVkTW9kZWwgdGhlIHZhbHVlIHJl
        dHVybmVkIGZyb20gYG1vZGVsYCwKICAgICAgb3IgaXRzIHJlc29sdmVkIHZh
        bHVlIGlmIGl0IHdhcyBhIHByb21pc2UKICAgIEBwYXJhbSB7VHJhbnNpdGlv
        bn0gdHJhbnNpdGlvbgogICAgQHBhcmFtIHtPYmplY3R9IHF1ZXJ5UGFyYW1z
        IHRoZSBhY3RpdmUgcXVlcnkgcGFyYW1zIGZvciB0aGlzIGhhbmRsZXIKICAg
        IEByZXR1cm4ge1Byb21pc2V9IGlmIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9t
        IHRoaXMgaG9vayBpcwogICAgICBhIHByb21pc2UsIHRoZSB0cmFuc2l0aW9u
        IHdpbGwgcGF1c2UgdW50aWwgdGhlIHRyYW5zaXRpb24KICAgICAgcmVzb2x2
        ZXMuIE90aGVyd2lzZSwgbm9uLXByb21pc2UgcmV0dXJuIHZhbHVlcyBhcmUg
        bm90CiAgICAgIHV0aWxpemVkIGluIGFueSB3YXkuCiAgICovCiAgYWZ0ZXJN
        b2RlbDogZnVuY3Rpb24ocmVzb2x2ZWRNb2RlbCwgdHJhbnNpdGlvbiwgcXVl
        cnlQYXJhbXMpIHsKICAgIHRoaXMucmVkaXJlY3QocmVzb2x2ZWRNb2RlbCwg
        dHJhbnNpdGlvbik7CiAgfSwKCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBD
        YWxsZWQgd2hlbiB0aGUgY29udGV4dCBpcyBjaGFuZ2VkIGJ5IHJvdXRlci5q
        cy4KCiAgICBAbWV0aG9kIGNvbnRleHREaWRDaGFuZ2UKICAqLwogIGNvbnRl
        eHREaWRDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jdXJyZW50TW9k
        ZWwgPSB0aGlzLmNvbnRleHQ7CiAgfSwKCiAgLyoqCiAgICBBIGhvb2sgeW91
        IGNhbiBpbXBsZW1lbnQgdG8gY29udmVydCB0aGUgVVJMIGludG8gdGhlIG1v
        ZGVsIGZvcgogICAgdGhpcyByb3V0ZS4KCiAgICBgYGBqcwogICAgQXBwLlJv
        dXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bv
        c3QnLCB7cGF0aDogJy9wb3N0cy86cG9zdF9pZCd9KTsKICAgIH0pOwogICAg
        YGBgCgogICAgVGhlIG1vZGVsIGZvciB0aGUgYHBvc3RgIHJvdXRlIGlzIGBB
        cHAuUG9zdC5maW5kKHBhcmFtcy5wb3N0X2lkKWAuCgogICAgQnkgZGVmYXVs
        dCwgaWYgeW91ciByb3V0ZSBoYXMgYSBkeW5hbWljIHNlZ21lbnQgZW5kaW5n
        IGluIGBfaWRgOgoKICAgICogVGhlIG1vZGVsIGNsYXNzIGlzIGRldGVybWlu
        ZWQgZnJvbSB0aGUgc2VnbWVudCAoYHBvc3RfaWRgJ3MKICAgICAgY2xhc3Mg
        aXMgYEFwcC5Qb3N0YCkKICAgICogVGhlIGZpbmQgbWV0aG9kIGlzIGNhbGxl
        ZCBvbiB0aGUgbW9kZWwgY2xhc3Mgd2l0aCB0aGUgdmFsdWUgb2YKICAgICAg
        dGhlIGR5bmFtaWMgc2VnbWVudC4KCiAgICBOb3RlIHRoYXQgZm9yIHJvdXRl
        cyB3aXRoIGR5bmFtaWMgc2VnbWVudHMsIHRoaXMgaG9vayBpcyBvbmx5CiAg
        ICBleGVjdXRlZCB3aGVuIGVudGVyZWQgdmlhIHRoZSBVUkwuIElmIHRoZSBy
        b3V0ZSBpcyBlbnRlcmVkCiAgICB0aHJvdWdoIGEgdHJhbnNpdGlvbiAoZS5n
        LiB3aGVuIHVzaW5nIHRoZSBgbGlua1RvYCBIYW5kbGViYXJzCiAgICBoZWxw
        ZXIpLCB0aGVuIGEgbW9kZWwgY29udGV4dCBpcyBhbHJlYWR5IHByb3ZpZGVk
        IGFuZCB0aGlzIGhvb2sKICAgIGlzIG5vdCBjYWxsZWQuIFJvdXRlcyB3aXRo
        b3V0IGR5bmFtaWMgc2VnbWVudHMgd2lsbCBhbHdheXMKICAgIGV4ZWN1dGUg
        dGhlIG1vZGVsIGhvb2suCgogICAgVGhpcyBob29rIGZvbGxvd3MgdGhlIGFz
        eW5jaHJvbm91cy9wcm9taXNlIHNlbWFudGljcwogICAgZGVzY3JpYmVkIGlu
        IHRoZSBkb2N1bWVudGF0aW9uIGZvciBgYmVmb3JlTW9kZWxgLiBJbiBwYXJ0
        aWN1bGFyLAogICAgaWYgYSBwcm9taXNlIHJldHVybmVkIGZyb20gYG1vZGVs
        YCBmYWlscywgdGhlIGVycm9yIHdpbGwgYmUKICAgIGhhbmRsZWQgYnkgdGhl
        IGBlcnJvcmAgaG9vayBvbiBgRW1iZXIuUm91dGVgLgoKICAgIEV4YW1wbGUK
        CiAgICBgYGBqcwogICAgQXBwLlBvc3RSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4
        dGVuZCh7CiAgICAgIG1vZGVsOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAg
        ICByZXR1cm4gQXBwLlBvc3QuZmluZChwYXJhbXMucG9zdF9pZCk7CiAgICAg
        IH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBtb2RlbAogICAgQHBh
        cmFtIHtPYmplY3R9IHBhcmFtcyB0aGUgcGFyYW1ldGVycyBleHRyYWN0ZWQg
        ZnJvbSB0aGUgVVJMCiAgICBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRp
        b24KICAgIEBwYXJhbSB7T2JqZWN0fSBxdWVyeVBhcmFtcyB0aGUgcXVlcnkg
        cGFyYW1zIGZvciB0aGlzIHJvdXRlCiAgICBAcmV0dXJuIHtPYmplY3R8UHJv
        bWlzZX0gdGhlIG1vZGVsIGZvciB0aGlzIHJvdXRlLiBJZgogICAgICBhIHBy
        b21pc2UgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2l0aW9uIHdpbGwgcGF1c2Ug
        dW50aWwKICAgICAgdGhlIHByb21pc2UgcmVzb2x2ZXMsIGFuZCB0aGUgcmVz
        b2x2ZWQgdmFsdWUgb2YgdGhlIHByb21pc2UKICAgICAgd2lsbCBiZSB1c2Vk
        IGFzIHRoZSBtb2RlbCBmb3IgdGhpcyByb3V0ZS4KICAqLwogIG1vZGVsOiBm
        dW5jdGlvbihwYXJhbXMsIHRyYW5zaXRpb24pIHsKICAgIHZhciBtYXRjaCwg
        bmFtZSwgc2F3UGFyYW1zLCB2YWx1ZTsKCiAgICBmb3IgKHZhciBwcm9wIGlu
        IHBhcmFtcykgewogICAgICBpZiAobWF0Y2ggPSBwcm9wLm1hdGNoKC9eKC4q
        KV9pZCQvKSkgewogICAgICAgIG5hbWUgPSBtYXRjaFsxXTsKICAgICAgICB2
        YWx1ZSA9IHBhcmFtc1twcm9wXTsKICAgICAgfQogICAgICBzYXdQYXJhbXMg
        PSB0cnVlOwogICAgfQoKICAgIGlmICghbmFtZSAmJiBzYXdQYXJhbXMpIHsg
        cmV0dXJuIHBhcmFtczsgfQogICAgZWxzZSBpZiAoIW5hbWUpIHsgcmV0dXJu
        OyB9CgogICAgcmV0dXJuIHRoaXMuZmluZE1vZGVsKG5hbWUsIHZhbHVlKTsK
        ICB9LAoKICAvKioKCiAgICBAbWV0aG9kIGZpbmRNb2RlbAogICAgQHBhcmFt
        IHtTdHJpbmd9IHR5cGUgdGhlIG1vZGVsIHR5cGUKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSB2YWx1ZSB0aGUgdmFsdWUgcGFzc2VkIHRvIGZpbmQKICAqLwogIGZp
        bmRNb2RlbDogZnVuY3Rpb24oKXsKICAgIHZhciBzdG9yZSA9IGdldCh0aGlz
        LCAnc3RvcmUnKTsKICAgIHJldHVybiBzdG9yZS5maW5kLmFwcGx5KHN0b3Jl
        LCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgU3RvcmUgcHJvcGVydHkg
        cHJvdmlkZXMgYSBob29rIGZvciBkYXRhIHBlcnNpc3RlbmNlIGxpYnJhcmll
        cyB0byBpbmplY3QgdGhlbXNlbHZlcy4KCiAgICBCeSBkZWZhdWx0LCB0aGlz
        IHN0b3JlIHByb3BlcnR5IHByb3ZpZGVzIHRoZSBleGFjdCBzYW1lIGZ1bmN0
        aW9uYWxpdHkgcHJldmlvdXNseQogICAgaW4gdGhlIG1vZGVsIGhvb2suCgog
        ICAgQ3VycmVudGx5LCB0aGUgcmVxdWlyZWQgaW50ZXJmYWNlIGlzOgoKICAg
        IGBzdG9yZS5maW5kKG1vZGVsTmFtZSwgZmluZEFyZ3VtZW50cylgCgogICAg
        QG1ldGhvZCBzdG9yZQogICAgQHBhcmFtIHtPYmplY3R9IHN0b3JlCiAgKi8K
        ICBzdG9yZTogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXsKICAgIHZhciBj
        b250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjsKICAgIHZhciByb3V0ZU5hbWUg
        PSB0aGlzLnJvdXRlTmFtZTsKICAgIHZhciBuYW1lc3BhY2UgPSBnZXQodGhp
        cywgJ3JvdXRlci5uYW1lc3BhY2UnKTsKCiAgICByZXR1cm4gewogICAgICBm
        aW5kOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgICAgIHZhciBtb2Rl
        bENsYXNzID0gY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ21vZGVsOicgKyBu
        YW1lKTsKCiAgICAgICAgRW1iZXIuYXNzZXJ0KCJZb3UgdXNlZCB0aGUgZHlu
        YW1pYyBzZWdtZW50ICIgKyBuYW1lICsgIl9pZCBpbiB5b3VyIHJvdXRlICIr
        IHJvdXRlTmFtZSArICIsIGJ1dCAiICsgbmFtZXNwYWNlICsgIi4iICsgY2xh
        c3NpZnkobmFtZSkgKyAiIGRpZCBub3QgZXhpc3QgYW5kIHlvdSBkaWQgbm90
        IG92ZXJyaWRlIHlvdXIgcm91dGUncyBgbW9kZWxgIGhvb2suIiwgbW9kZWxD
        bGFzcyk7CgogICAgICAgIHJldHVybiBtb2RlbENsYXNzLmZpbmQodmFsdWUp
        OwogICAgICB9CiAgICB9OwogIH0pLAoKICAvKioKICAgIEEgaG9vayB5b3Ug
        Y2FuIGltcGxlbWVudCB0byBjb252ZXJ0IHRoZSByb3V0ZSdzIG1vZGVsIGlu
        dG8gcGFyYW1ldGVycwogICAgZm9yIHRoZSBVUkwuCgogICAgYGBganMKICAg
        IEFwcC5Sb3V0ZXIubWFwKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291
        cmNlKCdwb3N0Jywge3BhdGg6ICcvcG9zdHMvOnBvc3RfaWQnfSk7CiAgICB9
        KTsKCiAgICBBcHAuUG9zdFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsK
        ICAgICAgbW9kZWw6IGZ1bmN0aW9uKHBhcmFtcykgewogICAgICAgIC8vIHRo
        ZSBzZXJ2ZXIgcmV0dXJucyBgeyBpZDogMTIgfWAKICAgICAgICByZXR1cm4g
        alF1ZXJ5LmdldEpTT04oIi9wb3N0cy8iICsgcGFyYW1zLnBvc3RfaWQpOwog
        ICAgICB9LAoKICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbihtb2RlbCkgewog
        ICAgICAgIC8vIHRoaXMgd2lsbCBtYWtlIHRoZSBVUkwgYC9wb3N0cy8xMmAK
        ICAgICAgICByZXR1cm4geyBwb3N0X2lkOiBtb2RlbC5pZCB9OwogICAgICB9
        CiAgICB9KTsKICAgIGBgYAoKICAgIFRoZSBkZWZhdWx0IGBzZXJpYWxpemVg
        IG1ldGhvZCB3aWxsIGluc2VydCB0aGUgbW9kZWwncyBgaWRgIGludG8gdGhl
        CiAgICByb3V0ZSdzIGR5bmFtaWMgc2VnbWVudCAoaW4gdGhpcyBjYXNlLCBg
        OnBvc3RfaWRgKSBpZiB0aGUgc2VnbWVudCBjb250YWlucyAnX2lkJy4KICAg
        IElmIHRoZSByb3V0ZSBoYXMgbXVsdGlwbGUgZHluYW1pYyBzZWdtZW50cyBv
        ciBkb2VzIG5vdCBjb250YWluICdfaWQnLCBgc2VyaWFsaXplYAogICAgd2ls
        bCByZXR1cm4gYEVtYmVyLmdldFByb3BlcnRpZXMobW9kZWwsIHBhcmFtcylg
        CgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gYHRyYW5zaXRpb25U
        b2AgaXMgY2FsbGVkIHdpdGggYSBjb250ZXh0CiAgICBpbiBvcmRlciB0byBw
        b3B1bGF0ZSB0aGUgVVJMLgoKICAgIEBtZXRob2Qgc2VyaWFsaXplCiAgICBA
        cGFyYW0ge09iamVjdH0gbW9kZWwgdGhlIHJvdXRlJ3MgbW9kZWwKICAgIEBw
        YXJhbSB7QXJyYXl9IHBhcmFtcyBhbiBBcnJheSBvZiBwYXJhbWV0ZXIgbmFt
        ZXMgZm9yIHRoZSBjdXJyZW50CiAgICAgIHJvdXRlIChpbiB0aGUgZXhhbXBs
        ZSwgYFsncG9zdF9pZCddYC4KICAgIEByZXR1cm4ge09iamVjdH0gdGhlIHNl
        cmlhbGl6ZWQgcGFyYW1ldGVycwogICovCiAgc2VyaWFsaXplOiBmdW5jdGlv
        bihtb2RlbCwgcGFyYW1zKSB7CiAgICBpZiAocGFyYW1zLmxlbmd0aCA8IDEp
        IHsgcmV0dXJuOyB9CgogICAgdmFyIG5hbWUgPSBwYXJhbXNbMF0sIG9iamVj
        dCA9IHt9OwoKICAgIGlmICgvX2lkJC8udGVzdChuYW1lKSAmJiBwYXJhbXMu
        bGVuZ3RoID09PSAxKSB7CiAgICAgIG9iamVjdFtuYW1lXSA9IGdldChtb2Rl
        bCwgImlkIik7CiAgICB9IGVsc2UgewogICAgICBvYmplY3QgPSBnZXRQcm9w
        ZXJ0aWVzKG1vZGVsLCBwYXJhbXMpOwogICAgfQoKICAgIHJldHVybiBvYmpl
        Y3Q7CiAgfSwKCiAgLyoqCiAgICBBIGhvb2sgeW91IGNhbiB1c2UgdG8gc2V0
        dXAgdGhlIGNvbnRyb2xsZXIgZm9yIHRoZSBjdXJyZW50IHJvdXRlLgoKICAg
        IFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aXRoIHRoZSBjb250cm9sbGVyIGZv
        ciB0aGUgY3VycmVudCByb3V0ZSBhbmQgdGhlCiAgICBtb2RlbCBzdXBwbGll
        ZCBieSB0aGUgYG1vZGVsYCBob29rLgoKICAgIEJ5IGRlZmF1bHQsIHRoZSBg
        c2V0dXBDb250cm9sbGVyYCBob29rIHNldHMgdGhlIGBjb250ZW50YCBwcm9w
        ZXJ0eSBvZgogICAgdGhlIGNvbnRyb2xsZXIgdG8gdGhlIGBtb2RlbGAuCgog
        ICAgVGhpcyBtZWFucyB0aGF0IHlvdXIgdGVtcGxhdGUgd2lsbCBnZXQgYSBw
        cm94eSBmb3IgdGhlIG1vZGVsIGFzIGl0cwogICAgY29udGV4dCwgYW5kIHlv
        dSBjYW4gYWN0IGFzIHRob3VnaCB0aGUgbW9kZWwgaXRzZWxmIHdhcyB0aGUg
        Y29udGV4dC4KCiAgICBUaGUgcHJvdmlkZWQgY29udHJvbGxlciB3aWxsIGJl
        IG9uZSByZXNvbHZlZCBiYXNlZCBvbiB0aGUgbmFtZQogICAgb2YgdGhpcyBy
        b3V0ZS4KCiAgICBJZiBubyBleHBsaWNpdCBjb250cm9sbGVyIGlzIGRlZmlu
        ZWQsIEVtYmVyIHdpbGwgYXV0b21hdGljYWxseSBjcmVhdGUKICAgIGFuIGFw
        cHJvcHJpYXRlIGNvbnRyb2xsZXIgZm9yIHRoZSBtb2RlbC4KCiAgICAqIGlm
        IHRoZSBtb2RlbCBpcyBhbiBgRW1iZXIuQXJyYXlgIChpbmNsdWRpbmcgcmVj
        b3JkIGFycmF5cyBmcm9tIEVtYmVyCiAgICAgIERhdGEpLCB0aGUgY29udHJv
        bGxlciBpcyBhbiBgRW1iZXIuQXJyYXlDb250cm9sbGVyYC4KICAgICogb3Ro
        ZXJ3aXNlLCB0aGUgY29udHJvbGxlciBpcyBhbiBgRW1iZXIuT2JqZWN0Q29u
        dHJvbGxlcmAuCgogICAgQXMgYW4gZXhhbXBsZSwgY29uc2lkZXIgdGhlIHJv
        dXRlcjoKCiAgICBgYGBqcwogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24o
        KSB7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3QnLCB7cGF0aDogJy9wb3N0
        cy86cG9zdF9pZCd9KTsKICAgIH0pOwogICAgYGBgCgogICAgRm9yIHRoZSBg
        cG9zdGAgcm91dGUsIGEgY29udHJvbGxlciBuYW1lZCBgQXBwLlBvc3RDb250
        cm9sbGVyYCB3b3VsZAogICAgYmUgdXNlZCBpZiBpdCBpcyBkZWZpbmVkLiBJ
        ZiBpdCBpcyBub3QgZGVmaW5lZCwgYW4gYEVtYmVyLk9iamVjdENvbnRyb2xs
        ZXJgCiAgICBpbnN0YW5jZSB3b3VsZCBiZSB1c2VkLgoKICAgIEV4YW1wbGUK
        ICAgIAogICAgYGBganMKICAgIEFwcC5Qb3N0Um91dGUgPSBFbWJlci5Sb3V0
        ZS5leHRlbmQoewogICAgICBzZXR1cENvbnRyb2xsZXI6IGZ1bmN0aW9uKGNv
        bnRyb2xsZXIsIG1vZGVsKSB7CiAgICAgICAgY29udHJvbGxlci5zZXQoJ21v
        ZGVsJywgbW9kZWwpOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBt
        ZXRob2Qgc2V0dXBDb250cm9sbGVyCiAgICBAcGFyYW0ge0NvbnRyb2xsZXJ9
        IGNvbnRyb2xsZXIgaW5zdGFuY2UKICAgIEBwYXJhbSB7T2JqZWN0fSBtb2Rl
        bAogICovCiAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbihjb250cm9sbGVy
        LCBjb250ZXh0KSB7CiAgICBpZiAoY29udHJvbGxlciAmJiAoY29udGV4dCAh
        PT0gdW5kZWZpbmVkKSkgewogICAgICBzZXQoY29udHJvbGxlciwgJ21vZGVs
        JywgY29udGV4dCk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRo
        ZSBjb250cm9sbGVyIGZvciBhIHBhcnRpY3VsYXIgcm91dGUgb3IgbmFtZS4K
        CiAgICBUaGUgY29udHJvbGxlciBpbnN0YW5jZSBtdXN0IGFscmVhZHkgaGF2
        ZSBiZWVuIGNyZWF0ZWQsIGVpdGhlciB0aHJvdWdoIGVudGVyaW5nIHRoZQog
        ICAgYXNzb2NpYXRlZCByb3V0ZSBvciB1c2luZyBgZ2VuZXJhdGVDb250cm9s
        bGVyYC4KCiAgICBgYGBqcwogICAgQXBwLlBvc3RSb3V0ZSA9IEVtYmVyLlJv
        dXRlLmV4dGVuZCh7CiAgICAgIHNldHVwQ29udHJvbGxlcjogZnVuY3Rpb24o
        Y29udHJvbGxlciwgcG9zdCkgewogICAgICAgIHRoaXMuX3N1cGVyKGNvbnRy
        b2xsZXIsIHBvc3QpOwogICAgICAgIHRoaXMuY29udHJvbGxlckZvcigncG9z
        dHMnKS5zZXQoJ2N1cnJlbnRQb3N0JywgcG9zdCk7CiAgICAgIH0KICAgIH0p
        OwogICAgYGBgCgogICAgQG1ldGhvZCBjb250cm9sbGVyRm9yCiAgICBAcGFy
        YW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUgb3IgY29u
        dHJvbGxlcgogICAgQHJldHVybiB7RW1iZXIuQ29udHJvbGxlcn0KICAqLwog
        IGNvbnRyb2xsZXJGb3I6IGZ1bmN0aW9uKG5hbWUsIF9za2lwQXNzZXJ0KSB7
        CiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIsCiAgICAgICAg
        cm91dGUgPSBjb250YWluZXIubG9va3VwKCdyb3V0ZTonK25hbWUpLAogICAg
        ICAgIGNvbnRyb2xsZXI7CgogICAgaWYgKHJvdXRlICYmIHJvdXRlLmNvbnRy
        b2xsZXJOYW1lKSB7CiAgICAgIG5hbWUgPSByb3V0ZS5jb250cm9sbGVyTmFt
        ZTsKICAgIH0KCiAgICBjb250cm9sbGVyID0gY29udGFpbmVyLmxvb2t1cCgn
        Y29udHJvbGxlcjonICsgbmFtZSk7CgogICAgLy8gTk9URTogV2UncmUgc3Bl
        Y2lmaWNhbGx5IGNoZWNraW5nIHRoYXQgc2tpcEFzc2VydCBpcyB0cnVlLCBi
        ZWNhdXNlIGFjY29yZGluZwogICAgLy8gICB0byB0aGUgb2xkIEFQSSB0aGUg
        c2Vjb25kIHBhcmFtZXRlciB3YXMgbW9kZWwuIFdlIGRvIG5vdCB3YW50IHBl
        b3BsZSB3aG8KICAgIC8vICAgcGFzc2VkIGEgbW9kZWwgdG8gc2tpcCB0aGUg
        YXNzZXJ0aW9uLgogICAgRW1iZXIuYXNzZXJ0KCJUaGUgY29udHJvbGxlciBu
        YW1lZCAnIituYW1lKyInIGNvdWxkIG5vdCBiZSBmb3VuZC4gTWFrZSBzdXJl
        IHRoYXQgdGhpcyByb3V0ZSBleGlzdHMgYW5kIGhhcyBhbHJlYWR5IGJlZW4g
        ZW50ZXJlZCBhdCBsZWFzdCBvbmNlLiBJZiB5b3UgYXJlIGFjY2Vzc2luZyBh
        IGNvbnRyb2xsZXIgbm90IGFzc29jaWF0ZWQgd2l0aCBhIHJvdXRlLCBtYWtl
        IHN1cmUgdGhlIGNvbnRyb2xsZXIgY2xhc3MgaXMgZXhwbGljaXRseSBkZWZp
        bmVkLiIsIGNvbnRyb2xsZXIgfHwgX3NraXBBc3NlcnQgPT09IHRydWUpOwoK
        ICAgIHJldHVybiBjb250cm9sbGVyOwogIH0sCgogIC8qKgogICAgR2VuZXJh
        dGVzIGEgY29udHJvbGxlciBmb3IgYSByb3V0ZS4KCiAgICBJZiB0aGUgb3B0
        aW9uYWwgbW9kZWwgaXMgcGFzc2VkIHRoZW4gdGhlIGNvbnRyb2xsZXIgdHlw
        ZSBpcyBkZXRlcm1pbmVkIGF1dG9tYXRpY2FsbHksCiAgICBlLmcuLCBhbiBB
        cnJheUNvbnRyb2xsZXIgZm9yIGFycmF5cy4KCiAgICBFeGFtcGxlCgogICAg
        YGBganMKICAgIEFwcC5Qb3N0Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQo
        ewogICAgICBzZXR1cENvbnRyb2xsZXI6IGZ1bmN0aW9uKGNvbnRyb2xsZXIs
        IHBvc3QpIHsKICAgICAgICB0aGlzLl9zdXBlcihjb250cm9sbGVyLCBwb3N0
        KTsKICAgICAgICB0aGlzLmdlbmVyYXRlQ29udHJvbGxlcigncG9zdHMnLCBw
        b3N0KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGdl
        bmVyYXRlQ29udHJvbGxlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhl
        IG5hbWUgb2YgdGhlIGNvbnRyb2xsZXIKICAgIEBwYXJhbSB7T2JqZWN0fSBt
        b2RlbCB0aGUgbW9kZWwgdG8gaW5mZXIgdGhlIHR5cGUgb2YgdGhlIGNvbnRy
        b2xsZXIgKG9wdGlvbmFsKQogICovCiAgZ2VuZXJhdGVDb250cm9sbGVyOiBm
        dW5jdGlvbihuYW1lLCBtb2RlbCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRo
        aXMuY29udGFpbmVyOwoKICAgIG1vZGVsID0gbW9kZWwgfHwgdGhpcy5tb2Rl
        bEZvcihuYW1lKTsKCiAgICByZXR1cm4gRW1iZXIuZ2VuZXJhdGVDb250cm9s
        bGVyKGNvbnRhaW5lciwgbmFtZSwgbW9kZWwpOwogIH0sCgogIC8qKgogICAg
        UmV0dXJucyB0aGUgY3VycmVudCBtb2RlbCBmb3IgYSBnaXZlbiByb3V0ZS4K
        CiAgICBUaGlzIGlzIHRoZSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGBtb2Rl
        bGAgaG9vayBvZiB0aGUgcm91dGUKICAgIGluIHF1ZXN0aW9uLgoKICAgIEV4
        YW1wbGUKCiAgICBgYGBqcwogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24o
        KSB7CiAgICAgICAgdGhpcy5yZXNvdXJjZSgncG9zdCcsIHsgcGF0aDogJy9w
        b3N0Lzpwb3N0X2lkJyB9LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhp
        cy5yZXNvdXJjZSgnY29tbWVudHMnKTsKICAgICAgICB9KTsKICAgIH0pOwoK
        ICAgIEFwcC5Db21tZW50c1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsK
        ICAgICAgICBhZnRlck1vZGVsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAg
        dGhpcy5zZXQoJ3Bvc3QnLCB0aGlzLm1vZGVsRm9yKCdwb3N0JykpOwogICAg
        ICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBtb2RlbEZvcgog
        ICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRl
        CiAgICBAcmV0dXJuIHtPYmplY3R9IHRoZSBtb2RlbCBvYmplY3QKICAqLwog
        IG1vZGVsRm9yOiBmdW5jdGlvbihuYW1lKSB7CgogICAgdmFyIHJvdXRlID0g
        dGhpcy5jb250YWluZXIubG9va3VwKCdyb3V0ZTonICsgbmFtZSksCiAgICAg
        ICAgdHJhbnNpdGlvbiA9IHRoaXMucm91dGVyLnJvdXRlci5hY3RpdmVUcmFu
        c2l0aW9uOwoKICAgIC8vIElmIHdlIGFyZSBtaWQtdHJhbnNpdGlvbiwgd2Ug
        d2FudCB0byB0cnkgYW5kIGxvb2sgdXAKICAgIC8vIHJlc29sdmVkIHBhcmVu
        dCBjb250ZXh0cyBvbiB0aGUgY3VycmVudCB0cmFuc2l0aW9uRXZlbnQuCiAg
        ICBpZiAodHJhbnNpdGlvbikgewogICAgICB2YXIgbW9kZWxMb29rdXBOYW1l
        ID0gKHJvdXRlICYmIHJvdXRlLnJvdXRlTmFtZSkgfHwgbmFtZTsKICAgICAg
        aWYgKHRyYW5zaXRpb24ucmVzb2x2ZWRNb2RlbHMuaGFzT3duUHJvcGVydHko
        bW9kZWxMb29rdXBOYW1lKSkgewogICAgICAgIHJldHVybiB0cmFuc2l0aW9u
        LnJlc29sdmVkTW9kZWxzW21vZGVsTG9va3VwTmFtZV07CiAgICAgIH0KICAg
        IH0KCiAgICByZXR1cm4gcm91dGUgJiYgcm91dGUuY3VycmVudE1vZGVsOwog
        IH0sCgogIC8qKgogICAgQSBob29rIHlvdSBjYW4gdXNlIHRvIHJlbmRlciB0
        aGUgdGVtcGxhdGUgZm9yIHRoZSBjdXJyZW50IHJvdXRlLgoKICAgIFRoaXMg
        bWV0aG9kIGlzIGNhbGxlZCB3aXRoIHRoZSBjb250cm9sbGVyIGZvciB0aGUg
        Y3VycmVudCByb3V0ZSBhbmQgdGhlCiAgICBtb2RlbCBzdXBwbGllZCBieSB0
        aGUgYG1vZGVsYCBob29rLiBCeSBkZWZhdWx0LCBpdCByZW5kZXJzIHRoZSBy
        b3V0ZSdzCiAgICB0ZW1wbGF0ZSwgY29uZmlndXJlZCB3aXRoIHRoZSBjb250
        cm9sbGVyIGZvciB0aGUgcm91dGUuCgogICAgVGhpcyBtZXRob2QgY2FuIGJl
        IG92ZXJyaWRkZW4gdG8gc2V0IHVwIGFuZCByZW5kZXIgYWRkaXRpb25hbCBv
        cgogICAgYWx0ZXJuYXRpdmUgdGVtcGxhdGVzLgoKICAgIGBgYGpzCiAgICBB
        cHAuUG9zdHNSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIHJl
        bmRlclRlbXBsYXRlOiBmdW5jdGlvbihjb250cm9sbGVyLCBtb2RlbCkgewog
        ICAgICAgIHZhciBmYXZDb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyRm9y
        KCdmYXZvcml0ZVBvc3QnKTsKCiAgICAgICAgLy8gUmVuZGVyIHRoZSBgZmF2
        b3JpdGVQb3N0YCB0ZW1wbGF0ZSBpbnRvCiAgICAgICAgLy8gdGhlIG91dGxl
        dCBgcG9zdHNgLCBhbmQgZGlzcGxheSB0aGUgYGZhdm9yaXRlUG9zdGAKICAg
        ICAgICAvLyBjb250cm9sbGVyLgogICAgICAgIHRoaXMucmVuZGVyKCdmYXZv
        cml0ZVBvc3QnLCB7CiAgICAgICAgICBvdXRsZXQ6ICdwb3N0cycsCiAgICAg
        ICAgICBjb250cm9sbGVyOiBmYXZDb250cm9sbGVyCiAgICAgICAgfSk7CiAg
        ICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCByZW5kZXJUZW1w
        bGF0ZQogICAgQHBhcmFtIHtPYmplY3R9IGNvbnRyb2xsZXIgdGhlIHJvdXRl
        J3MgY29udHJvbGxlcgogICAgQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRoZSBy
        b3V0ZSdzIG1vZGVsCiAgKi8KICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24o
        Y29udHJvbGxlciwgbW9kZWwpIHsKICAgIHRoaXMucmVuZGVyKCk7CiAgfSwK
        CiAgLyoqCiAgICBSZW5kZXJzIGEgdGVtcGxhdGUgaW50byBhbiBvdXRsZXQu
        CgogICAgVGhpcyBtZXRob2QgaGFzIGEgbnVtYmVyIG9mIGRlZmF1bHRzLCBi
        YXNlZCBvbiB0aGUgbmFtZSBvZiB0aGUKICAgIHJvdXRlIHNwZWNpZmllZCBp
        biB0aGUgcm91dGVyLgoKICAgIEZvciBleGFtcGxlOgoKICAgIGBgYGpzCiAg
        ICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yb3V0
        ZSgnaW5kZXgnKTsKICAgICAgdGhpcy5yZXNvdXJjZSgncG9zdCcsIHtwYXRo
        OiAnL3Bvc3RzLzpwb3N0X2lkJ30pOwogICAgfSk7CgogICAgQXBwLlBvc3RS
        b3V0ZSA9IEFwcC5Sb3V0ZS5leHRlbmQoewogICAgICByZW5kZXJUZW1wbGF0
        ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAg
        fQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgbmFtZSBvZiB0aGUgYFBvc3RS
        b3V0ZWAsIGFzIGRlZmluZWQgYnkgdGhlIHJvdXRlciwgaXMgYHBvc3RgLgoK
        ICAgIEJ5IGRlZmF1bHQsIHJlbmRlciB3aWxsOgoKICAgICogcmVuZGVyIHRo
        ZSBgcG9zdGAgdGVtcGxhdGUKICAgICogd2l0aCB0aGUgYHBvc3RgIHZpZXcg
        KGBQb3N0Vmlld2ApIGZvciBldmVudCBoYW5kbGluZywgaWYgb25lIGV4aXN0
        cwogICAgKiBhbmQgdGhlIGBwb3N0YCBjb250cm9sbGVyIChgUG9zdENvbnRy
        b2xsZXJgKSwgaWYgb25lIGV4aXN0cwogICAgKiBpbnRvIHRoZSBgbWFpbmAg
        b3V0bGV0IG9mIHRoZSBgYXBwbGljYXRpb25gIHRlbXBsYXRlCgogICAgWW91
        IGNhbiBvdmVycmlkZSB0aGlzIGJlaGF2aW9yOgoKICAgIGBgYGpzCiAgICBB
        cHAuUG9zdFJvdXRlID0gQXBwLlJvdXRlLmV4dGVuZCh7CiAgICAgIHJlbmRl
        clRlbXBsYXRlOiBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLnJlbmRlcign
        bXlQb3N0JywgeyAgIC8vIHRoZSB0ZW1wbGF0ZSB0byByZW5kZXIKICAgICAg
        ICAgIGludG86ICdpbmRleCcsICAgICAgICAgIC8vIHRoZSB0ZW1wbGF0ZSB0
        byByZW5kZXIgaW50bwogICAgICAgICAgb3V0bGV0OiAnZGV0YWlsJywgICAg
        ICAgLy8gdGhlIG5hbWUgb2YgdGhlIG91dGxldCBpbiB0aGF0IHRlbXBsYXRl
        CiAgICAgICAgICBjb250cm9sbGVyOiAnYmxvZ1Bvc3QnICAvLyB0aGUgY29u
        dHJvbGxlciB0byB1c2UgZm9yIHRoZSB0ZW1wbGF0ZQogICAgICAgIH0pOwog
        ICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFJlbWVtYmVyIHRoYXQgdGhl
        IGNvbnRyb2xsZXIncyBgY29udGVudGAgd2lsbCBiZSB0aGUgcm91dGUncyBt
        b2RlbC4gSW4KICAgIHRoaXMgY2FzZSwgdGhlIGRlZmF1bHQgbW9kZWwgd2ls
        bCBiZSBgQXBwLlBvc3QuZmluZChwYXJhbXMucG9zdF9pZClgLgoKICAgIEBt
        ZXRob2QgcmVuZGVyCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFt
        ZSBvZiB0aGUgdGVtcGxhdGUgdG8gcmVuZGVyCiAgICBAcGFyYW0ge09iamVj
        dH0gb3B0aW9ucyB0aGUgb3B0aW9ucwogICovCiAgcmVuZGVyOiBmdW5jdGlv
        bihuYW1lLCBvcHRpb25zKSB7CiAgICBFbWJlci5hc3NlcnQoIlRoZSBuYW1l
        IGluIHRoZSBnaXZlbiBhcmd1bWVudHMgaXMgdW5kZWZpbmVkIiwgYXJndW1l
        bnRzLmxlbmd0aCA+IDAgPyAhRW1iZXIuaXNOb25lKGFyZ3VtZW50c1swXSkg
        OiB0cnVlKTsKCiAgICB2YXIgbmFtZVBhc3NlZCA9ICEhbmFtZTsKCiAgICBp
        ZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnICYmICFvcHRpb25zKSB7CiAg
        ICAgIG9wdGlvbnMgPSBuYW1lOwogICAgICBuYW1lID0gdGhpcy5yb3V0ZU5h
        bWU7CiAgICB9CgogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBu
        YW1lID0gbmFtZSA/IG5hbWUucmVwbGFjZSgvXC8vZywgJy4nKSA6IHRoaXMu
        cm91dGVOYW1lOwogICAgdmFyIHZpZXdOYW1lID0gb3B0aW9ucy52aWV3IHx8
        IHRoaXMudmlld05hbWUgfHwgbmFtZTsKICAgIHZhciB0ZW1wbGF0ZU5hbWUg
        PSB0aGlzLnRlbXBsYXRlTmFtZSB8fCBuYW1lOwoKICAgIHZhciBjb250YWlu
        ZXIgPSB0aGlzLmNvbnRhaW5lciwKICAgICAgICB2aWV3ID0gY29udGFpbmVy
        Lmxvb2t1cCgndmlldzonICsgdmlld05hbWUpLAogICAgICAgIHRlbXBsYXRl
        ID0gdmlldyA/IHZpZXcuZ2V0KCd0ZW1wbGF0ZScpIDogbnVsbDsKCiAgICBp
        ZiAoIXRlbXBsYXRlKSB7CiAgICAgIHRlbXBsYXRlID0gY29udGFpbmVyLmxv
        b2t1cCgndGVtcGxhdGU6JyArIHRlbXBsYXRlTmFtZSk7CiAgICB9CgogICAg
        aWYgKCF2aWV3ICYmICF0ZW1wbGF0ZSkgewogICAgICBFbWJlci5hc3NlcnQo
        IkNvdWxkIG5vdCBmaW5kIFwiIiArIG5hbWUgKyAiXCIgdGVtcGxhdGUgb3Ig
        dmlldy4iLCAhbmFtZVBhc3NlZCk7CiAgICAgIGlmIChnZXQodGhpcy5yb3V0
        ZXIsICduYW1lc3BhY2UuTE9HX1ZJRVdfTE9PS1VQUycpKSB7CiAgICAgICAg
        RW1iZXIuTG9nZ2VyLmluZm8oIkNvdWxkIG5vdCBmaW5kIFwiIiArIG5hbWUg
        KyAiXCIgdGVtcGxhdGUgb3Igdmlldy4gTm90aGluZyB3aWxsIGJlIHJlbmRl
        cmVkIiwgeyBmdWxsTmFtZTogJ3RlbXBsYXRlOicgKyBuYW1lIH0pOwogICAg
        ICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBvcHRpb25zID0gbm9ybWFs
        aXplT3B0aW9ucyh0aGlzLCBuYW1lLCB0ZW1wbGF0ZSwgb3B0aW9ucyk7CiAg
        ICB2aWV3ID0gc2V0dXBWaWV3KHZpZXcsIGNvbnRhaW5lciwgb3B0aW9ucyk7
        CgogICAgaWYgKG9wdGlvbnMub3V0bGV0ID09PSAnbWFpbicpIHsgdGhpcy5s
        YXN0UmVuZGVyZWRUZW1wbGF0ZSA9IG5hbWU7IH0KCiAgICBhcHBlbmRWaWV3
        KHRoaXMsIHZpZXcsIG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAgRGlzY29u
        bmVjdHMgYSB2aWV3IHRoYXQgaGFzIGJlZW4gcmVuZGVyZWQgaW50byBhbiBv
        dXRsZXQuCgogICAgWW91IG1heSBwYXNzIGFueSBvciBhbGwgb2YgdGhlIGZv
        bGxvd2luZyBvcHRpb25zIHRvIGBkaXNjb25uZWN0T3V0bGV0YDoKCiAgICAq
        IGBvdXRsZXRgOiB0aGUgbmFtZSBvZiB0aGUgb3V0bGV0IHRvIGNsZWFyIChk
        ZWZhdWx0OiAnbWFpbicpCiAgICAqIGBwYXJlbnRWaWV3YDogdGhlIG5hbWUg
        b2YgdGhlIHZpZXcgY29udGFpbmluZyB0aGUgb3V0bGV0IHRvIGNsZWFyCiAg
        ICAgICAoZGVmYXVsdDogdGhlIHZpZXcgcmVuZGVyZWQgYnkgdGhlIHBhcmVu
        dCByb3V0ZSkKCiAgICBFeGFtcGxlOgoKICAgIGBgYGpzCiAgICBBcHAuQXBw
        bGljYXRpb25Sb3V0ZSA9IEFwcC5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rp
        b25zOiB7CiAgICAgICAgc2hvd01vZGFsOiBmdW5jdGlvbihldnQpIHsKICAg
        ICAgICAgIHRoaXMucmVuZGVyKGV2dC5tb2RhbE5hbWUsIHsKICAgICAgICAg
        ICAgb3V0bGV0OiAnbW9kYWwnLAogICAgICAgICAgICBpbnRvOiAnYXBwbGlj
        YXRpb24nCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGhpZGVN
        b2RhbDogZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICB0aGlzLmRpc2Nvbm5l
        Y3RPdXRsZXQoewogICAgICAgICAgICBvdXRsZXQ6ICdtb2RhbCcsCiAgICAg
        ICAgICAgIHBhcmVudFZpZXc6ICdhcHBsaWNhdGlvbicKICAgICAgICAgIH0p
        OwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0
        aG9kIGRpc2Nvbm5lY3RPdXRsZXQKICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRp
        b25zIHRoZSBvcHRpb25zCiAgKi8KICBkaXNjb25uZWN0T3V0bGV0OiBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsK
        ICAgIG9wdGlvbnMucGFyZW50VmlldyA9IG9wdGlvbnMucGFyZW50VmlldyA/
        IG9wdGlvbnMucGFyZW50Vmlldy5yZXBsYWNlKC9cLy9nLCAnLicpIDogcGFy
        ZW50VGVtcGxhdGUodGhpcyk7CiAgICBvcHRpb25zLm91dGxldCA9IG9wdGlv
        bnMub3V0bGV0IHx8ICdtYWluJzsKCiAgICB2YXIgcGFyZW50VmlldyA9IHRo
        aXMucm91dGVyLl9sb29rdXBBY3RpdmVWaWV3KG9wdGlvbnMucGFyZW50Vmll
        dyk7CiAgICBwYXJlbnRWaWV3LmRpc2Nvbm5lY3RPdXRsZXQob3B0aW9ucy5v
        dXRsZXQpOwogIH0sCgogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsKICAg
        IHRoaXMudGVhcmRvd25WaWV3cygpOwogIH0sCgogIC8qKgogICAgQHByaXZh
        dGUKCiAgICBAbWV0aG9kIHRlYXJkb3duVmlld3MKICAqLwogIHRlYXJkb3du
        Vmlld3M6IGZ1bmN0aW9uKCkgewogICAgLy8gVGVhciBkb3duIHRoZSB0b3Ag
        bGV2ZWwgdmlldwogICAgaWYgKHRoaXMudGVhcmRvd25Ub3BMZXZlbFZpZXcp
        IHsgdGhpcy50ZWFyZG93blRvcExldmVsVmlldygpOyB9CgogICAgLy8gVGVh
        ciBkb3duIGFueSBvdXRsZXRzIHJlbmRlcmVkIHdpdGggJ2ludG8nCiAgICB2
        YXIgdGVhcmRvd25PdXRsZXRWaWV3cyA9IHRoaXMudGVhcmRvd25PdXRsZXRW
        aWV3cyB8fCBbXTsKICAgIGFfZm9yRWFjaCh0ZWFyZG93bk91dGxldFZpZXdz
        LCBmdW5jdGlvbih0ZWFyZG93bk91dGxldFZpZXcpIHsKICAgICAgdGVhcmRv
        d25PdXRsZXRWaWV3KCk7CiAgICB9KTsKCiAgICBkZWxldGUgdGhpcy50ZWFy
        ZG93blRvcExldmVsVmlldzsKICAgIGRlbGV0ZSB0aGlzLnRlYXJkb3duT3V0
        bGV0Vmlld3M7CiAgICBkZWxldGUgdGhpcy5sYXN0UmVuZGVyZWRUZW1wbGF0
        ZTsKICB9Cn0pOwoKZnVuY3Rpb24gcGFyZW50Um91dGUocm91dGUpIHsKICB2
        YXIgaGFuZGxlckluZm9zID0gcm91dGUucm91dGVyLnJvdXRlci50YXJnZXRI
        YW5kbGVySW5mb3M7CgogIGlmICghaGFuZGxlckluZm9zKSB7IHJldHVybjsg
        fQoKICB2YXIgcGFyZW50LCBjdXJyZW50OwoKICBmb3IgKHZhciBpPTAsIGw9
        aGFuZGxlckluZm9zLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgIGN1cnJlbnQg
        PSBoYW5kbGVySW5mb3NbaV0uaGFuZGxlcjsKICAgIGlmIChjdXJyZW50ID09
        PSByb3V0ZSkgeyByZXR1cm4gcGFyZW50OyB9CiAgICBwYXJlbnQgPSBjdXJy
        ZW50OwogIH0KfQoKZnVuY3Rpb24gcGFyZW50VGVtcGxhdGUocm91dGUpIHsK
        ICB2YXIgcGFyZW50ID0gcGFyZW50Um91dGUocm91dGUpLCB0ZW1wbGF0ZTsK
        CiAgaWYgKCFwYXJlbnQpIHsgcmV0dXJuOyB9CgogIGlmICh0ZW1wbGF0ZSA9
        IHBhcmVudC5sYXN0UmVuZGVyZWRUZW1wbGF0ZSkgewogICAgcmV0dXJuIHRl
        bXBsYXRlOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcGFyZW50VGVtcGxhdGUo
        cGFyZW50KTsKICB9Cn0KCmZ1bmN0aW9uIG5vcm1hbGl6ZU9wdGlvbnMocm91
        dGUsIG5hbWUsIHRlbXBsYXRlLCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9w
        dGlvbnMgfHwge307CiAgb3B0aW9ucy5pbnRvID0gb3B0aW9ucy5pbnRvID8g
        b3B0aW9ucy5pbnRvLnJlcGxhY2UoL1wvL2csICcuJykgOiBwYXJlbnRUZW1w
        bGF0ZShyb3V0ZSk7CiAgb3B0aW9ucy5vdXRsZXQgPSBvcHRpb25zLm91dGxl
        dCB8fCAnbWFpbic7CiAgb3B0aW9ucy5uYW1lID0gbmFtZTsKICBvcHRpb25z
        LnRlbXBsYXRlID0gdGVtcGxhdGU7CiAgb3B0aW9ucy5MT0dfVklFV19MT09L
        VVBTID0gZ2V0KHJvdXRlLnJvdXRlciwgJ25hbWVzcGFjZS5MT0dfVklFV19M
        T09LVVBTJyk7CgogIEVtYmVyLmFzc2VydCgiQW4gb3V0bGV0ICgiK29wdGlv
        bnMub3V0bGV0KyIpIHdhcyBzcGVjaWZpZWQgYnV0IHdhcyBub3QgZm91bmQu
        Iiwgb3B0aW9ucy5vdXRsZXQgPT09ICdtYWluJyB8fCBvcHRpb25zLmludG8p
        OwoKICB2YXIgY29udHJvbGxlciA9IG9wdGlvbnMuY29udHJvbGxlciwgbmFt
        ZWRDb250cm9sbGVyOwoKICBpZiAob3B0aW9ucy5jb250cm9sbGVyKSB7CiAg
        ICBjb250cm9sbGVyID0gb3B0aW9ucy5jb250cm9sbGVyOwogIH0gZWxzZSBp
        ZiAobmFtZWRDb250cm9sbGVyID0gcm91dGUuY29udGFpbmVyLmxvb2t1cCgn
        Y29udHJvbGxlcjonICsgbmFtZSkpIHsKICAgIGNvbnRyb2xsZXIgPSBuYW1l
        ZENvbnRyb2xsZXI7CiAgfSBlbHNlIHsKICAgIGNvbnRyb2xsZXIgPSByb3V0
        ZS5jb250cm9sbGVyTmFtZSB8fCByb3V0ZS5yb3V0ZU5hbWU7CiAgfQoKICBp
        ZiAodHlwZW9mIGNvbnRyb2xsZXIgPT09ICdzdHJpbmcnKSB7CiAgICBjb250
        cm9sbGVyID0gcm91dGUuY29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjon
        ICsgY29udHJvbGxlcik7CiAgfQoKICBvcHRpb25zLmNvbnRyb2xsZXIgPSBj
        b250cm9sbGVyOwoKICByZXR1cm4gb3B0aW9uczsKfQoKZnVuY3Rpb24gc2V0
        dXBWaWV3KHZpZXcsIGNvbnRhaW5lciwgb3B0aW9ucykgewogIGlmICh2aWV3
        KSB7CiAgICBpZiAob3B0aW9ucy5MT0dfVklFV19MT09LVVBTKSB7CiAgICAg
        IEVtYmVyLkxvZ2dlci5pbmZvKCJSZW5kZXJpbmcgIiArIG9wdGlvbnMubmFt
        ZSArICIgd2l0aCAiICsgdmlldywgeyBmdWxsTmFtZTogJ3ZpZXc6JyArIG9w
        dGlvbnMubmFtZSB9KTsKICAgIH0KICB9IGVsc2UgewogICAgdmFyIGRlZmF1
        bHRWaWV3ID0gb3B0aW9ucy5pbnRvID8gJ3ZpZXc6ZGVmYXVsdCcgOiAndmll
        dzp0b3BsZXZlbCc7CiAgICB2aWV3ID0gY29udGFpbmVyLmxvb2t1cChkZWZh
        dWx0Vmlldyk7CiAgICBpZiAob3B0aW9ucy5MT0dfVklFV19MT09LVVBTKSB7
        CiAgICAgIEVtYmVyLkxvZ2dlci5pbmZvKCJSZW5kZXJpbmcgIiArIG9wdGlv
        bnMubmFtZSArICIgd2l0aCBkZWZhdWx0IHZpZXcgIiArIHZpZXcsIHsgZnVs
        bE5hbWU6ICd2aWV3OicgKyBvcHRpb25zLm5hbWUgfSk7CiAgICB9CiAgfQoK
        ICBpZiAoIWdldCh2aWV3LCAndGVtcGxhdGVOYW1lJykpIHsKICAgIHNldCh2
        aWV3LCAndGVtcGxhdGUnLCBvcHRpb25zLnRlbXBsYXRlKTsKCiAgICBzZXQo
        dmlldywgJ19kZWJ1Z1RlbXBsYXRlTmFtZScsIG9wdGlvbnMubmFtZSk7CiAg
        fQoKICBzZXQodmlldywgJ3JlbmRlcmVkTmFtZScsIG9wdGlvbnMubmFtZSk7
        CiAgc2V0KHZpZXcsICdjb250cm9sbGVyJywgb3B0aW9ucy5jb250cm9sbGVy
        KTsKCiAgcmV0dXJuIHZpZXc7Cn0KCmZ1bmN0aW9uIGFwcGVuZFZpZXcocm91
        dGUsIHZpZXcsIG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucy5pbnRvKSB7CiAg
        ICB2YXIgcGFyZW50VmlldyA9IHJvdXRlLnJvdXRlci5fbG9va3VwQWN0aXZl
        VmlldyhvcHRpb25zLmludG8pOwogICAgdmFyIHRlYXJkb3duT3V0bGV0Vmll
        dyA9IGdlbmVyYXRlT3V0bGV0VGVhcmRvd24ocGFyZW50Vmlldywgb3B0aW9u
        cy5vdXRsZXQpOwogICAgaWYgKCFyb3V0ZS50ZWFyZG93bk91dGxldFZpZXdz
        KSB7IHJvdXRlLnRlYXJkb3duT3V0bGV0Vmlld3MgPSBbXTsgfQogICAgYV9y
        ZXBsYWNlKHJvdXRlLnRlYXJkb3duT3V0bGV0Vmlld3MsIDAsIDAsIFt0ZWFy
        ZG93bk91dGxldFZpZXddKTsKICAgIHBhcmVudFZpZXcuY29ubmVjdE91dGxl
        dChvcHRpb25zLm91dGxldCwgdmlldyk7CiAgfSBlbHNlIHsKICAgIHZhciBy
        b290RWxlbWVudCA9IGdldChyb3V0ZSwgJ3JvdXRlci5uYW1lc3BhY2Uucm9v
        dEVsZW1lbnQnKTsKICAgIC8vIHRlYXIgZG93biB2aWV3IGlmIG9uZSBpcyBh
        bHJlYWR5IHJlbmRlcmVkCiAgICBpZiAocm91dGUudGVhcmRvd25Ub3BMZXZl
        bFZpZXcpIHsKICAgICAgcm91dGUudGVhcmRvd25Ub3BMZXZlbFZpZXcoKTsK
        ICAgIH0KICAgIHJvdXRlLnJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXcob3B0
        aW9ucy5uYW1lLCB2aWV3KTsKICAgIHJvdXRlLnRlYXJkb3duVG9wTGV2ZWxW
        aWV3ID0gZ2VuZXJhdGVUb3BMZXZlbFRlYXJkb3duKHZpZXcpOwogICAgdmll
        dy5hcHBlbmRUbyhyb290RWxlbWVudCk7CiAgfQp9CgpmdW5jdGlvbiBnZW5l
        cmF0ZVRvcExldmVsVGVhcmRvd24odmlldykgewogIHJldHVybiBmdW5jdGlv
        bigpIHsgdmlldy5kZXN0cm95KCk7IH07Cn0KCmZ1bmN0aW9uIGdlbmVyYXRl
        T3V0bGV0VGVhcmRvd24ocGFyZW50Vmlldywgb3V0bGV0KSB7CiAgcmV0dXJu
        IGZ1bmN0aW9uKCkgeyBwYXJlbnRWaWV3LmRpc2Nvbm5lY3RPdXRsZXQob3V0
        bGV0KTsgfTsKfQoKZnVuY3Rpb24gZmluZENoaWxkUm91dGVOYW1lKHJvdXRl
        LCBuYW1lKSB7CiAgdmFyIGNvbnRhaW5lciA9IHJvdXRlLmNvbnRhaW5lcjsK
        CiAgdmFyIGNoaWxkTmFtZSA9IHJvdXRlLnJvdXRlTmFtZSA9PT0gJ2FwcGxp
        Y2F0aW9uJyA/IG5hbWUgOiByb3V0ZS5yb3V0ZU5hbWUgKyAnLicgKyBuYW1l
        OwoKICB2YXIgaGFzQ2hpbGQgPSByb3V0ZS5yb3V0ZXIuaGFzUm91dGUoY2hp
        bGROYW1lKSAmJgogICAgICAgICAgICAgICAgIChjb250YWluZXIuaGFzKCd0
        ZW1wbGF0ZTonICsgY2hpbGROYW1lKSB8fAogICAgICAgICAgICAgICAgICBj
        b250YWluZXIuaGFzKCdyb3V0ZTonICsgY2hpbGROYW1lKSk7CgogIHJldHVy
        biBoYXNDaGlsZCAmJiBjaGlsZE5hbWU7Cn0KCgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLm9uTG9hZCgn
        RW1iZXIuSGFuZGxlYmFycycsIGZ1bmN0aW9uKCkgewogIHZhciBoYW5kbGVi
        YXJzUmVzb2x2ZSA9IEVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBhcmFtcywK
        ICAgICAgbWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLAogICAgICBn
        ZXQgPSBFbWJlci5nZXQsCiAgICAgIGhhbmRsZWJhcnNHZXQgPSBFbWJlci5I
        YW5kbGViYXJzLmdldDsKCiAgZnVuY3Rpb24gcmVzb2x2ZVBhcmFtcyhjb250
        ZXh0LCBwYXJhbXMsIG9wdGlvbnMpIHsKICAgIHJldHVybiBtYXAuY2FsbChy
        ZXNvbHZlUGF0aHMoY29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSwgZnVuY3Rp
        b24ocGF0aCwgaSkgewogICAgICBpZiAobnVsbCA9PT0gcGF0aCkgewogICAg
        ICAgIC8vIFBhcmFtIHdhcyBzdHJpbmcvbnVtYmVyLCBub3QgYSBwYXRoLCBz
        byBqdXN0IHJldHVybiByYXcgc3RyaW5nL251bWJlci4KICAgICAgICByZXR1
        cm4gcGFyYW1zW2ldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBo
        YW5kbGViYXJzR2V0KGNvbnRleHQsIHBhdGgsIG9wdGlvbnMpOwogICAgICB9
        CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVQYXRocyhjb250ZXh0
        LCBwYXJhbXMsIG9wdGlvbnMpIHsKICAgIHZhciByZXNvbHZlZCA9IGhhbmRs
        ZWJhcnNSZXNvbHZlKGNvbnRleHQsIHBhcmFtcywgb3B0aW9ucyksCiAgICAg
        ICAgdHlwZXMgPSBvcHRpb25zLnR5cGVzOwoKICAgIHJldHVybiBtYXAuY2Fs
        bChyZXNvbHZlZCwgZnVuY3Rpb24ob2JqZWN0LCBpKSB7CiAgICAgIGlmICh0
        eXBlc1tpXSA9PT0gJ0lEJykgewogICAgICAgIHJldHVybiB1bndyYXAob2Jq
        ZWN0LCBwYXJhbXNbaV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVy
        biBudWxsOwogICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlvbiB1bndyYXAo
        b2JqZWN0LCBwYXRoKSB7CiAgICAgIGlmIChwYXRoID09PSAnY29udHJvbGxl
        cicpIHsgcmV0dXJuIHBhdGg7IH0KCiAgICAgIGlmIChFbWJlci5Db250cm9s
        bGVyTWl4aW4uZGV0ZWN0KG9iamVjdCkpIHsKICAgICAgICByZXR1cm4gdW53
        cmFwKGdldChvYmplY3QsICdtb2RlbCcpLCBwYXRoID8gcGF0aCArICcubW9k
        ZWwnIDogJ21vZGVsJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJu
        IHBhdGg7CiAgICAgIH0KICAgIH0KICB9CgogIEVtYmVyLlJvdXRlci5yZXNv
        bHZlUGFyYW1zID0gcmVzb2x2ZVBhcmFtczsKICBFbWJlci5Sb3V0ZXIucmVz
        b2x2ZVBhdGhzID0gcmVzb2x2ZVBhdGhzOwp9KTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1y
        b3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5z
        ZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQ7CkVtYmVyLm9uTG9hZCgnRW1i
        ZXIuSGFuZGxlYmFycycsIGZ1bmN0aW9uKEhhbmRsZWJhcnMpIHsKCiAgdmFy
        IHJlc29sdmVQYXJhbXMgPSBFbWJlci5Sb3V0ZXIucmVzb2x2ZVBhcmFtcywK
        ICAgICAgcmVzb2x2ZVBhdGhzICA9IEVtYmVyLlJvdXRlci5yZXNvbHZlUGF0
        aHMsCiAgICAgIGlzU2ltcGxlQ2xpY2sgPSBFbWJlci5WaWV3VXRpbHMuaXNT
        aW1wbGVDbGljazsKCiAgZnVuY3Rpb24gZnVsbFJvdXRlTmFtZShyb3V0ZXIs
        IG5hbWUpIHsKICAgIGlmICghcm91dGVyLmhhc1JvdXRlKG5hbWUpKSB7CiAg
        ICAgIG5hbWUgPSBuYW1lICsgJy5pbmRleCc7CiAgICB9CgogICAgcmV0dXJu
        IG5hbWU7CiAgfQoKICBmdW5jdGlvbiBnZXRSZXNvbHZlZFBhdGhzKG9wdGlv
        bnMpIHsKCiAgICB2YXIgdHlwZXMgPSBvcHRpb25zLm9wdGlvbnMudHlwZXMs
        CiAgICAgICAgZGF0YSA9IG9wdGlvbnMub3B0aW9ucy5kYXRhOwoKICAgIHJl
        dHVybiByZXNvbHZlUGF0aHMob3B0aW9ucy5jb250ZXh0LCBvcHRpb25zLnBh
        cmFtcywgeyB0eXBlczogdHlwZXMsIGRhdGE6IGRhdGEgfSk7CiAgfQoKICAv
        KioKICAgIGBFbWJlci5MaW5rVmlld2AgcmVuZGVycyBhbiBlbGVtZW50IHdo
        b3NlIGBjbGlja2AgZXZlbnQgdHJpZ2dlcnMgYQogICAgdHJhbnNpdGlvbiBv
        ZiB0aGUgYXBwbGljYXRpb24ncyBpbnN0YW5jZSBvZiBgRW1iZXIuUm91dGVy
        YCB0bwogICAgYSBzdXBwbGllZCByb3V0ZSBieSBuYW1lLgoKICAgIEluc3Rh
        bmNlcyBvZiBgTGlua1ZpZXdgIHdpbGwgbW9zdCBsaWtlbHkgYmUgY3JlYXRl
        ZCB0aHJvdWdoCiAgICB0aGUgYGxpbmstdG9gIEhhbmRsZWJhcnMgaGVscGVy
        LCBidXQgcHJvcGVydGllcyBvZiB0aGlzIGNsYXNzCiAgICBjYW4gYmUgb3Zl
        cnJpZGRlbiB0byBjdXN0b21pemUgYXBwbGljYXRpb24td2lkZSBiZWhhdmlv
        ci4KCiAgICBAY2xhc3MgTGlua1ZpZXcKICAgIEBuYW1lc3BhY2UgRW1iZXIK
        ICAgIEBleHRlbmRzIEVtYmVyLlZpZXcKICAgIEBzZWUge0hhbmRsZWJhcnMu
        aGVscGVycy5saW5rLXRvfQogICoqLwogIHZhciBMaW5rVmlldyA9IEVtYmVy
        LkxpbmtWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgdGFnTmFtZTog
        J2EnLAogICAgY3VycmVudFdoZW46IG51bGwsCgogICAgLyoqCiAgICAgIFNl
        dHMgdGhlIGB0aXRsZWAgYXR0cmlidXRlIG9mIHRoZSBgTGlua1ZpZXdgJ3Mg
        SFRNTCBlbGVtZW50LgoKICAgICAgQHByb3BlcnR5IHRpdGxlCiAgICAgIEBk
        ZWZhdWx0IG51bGwKICAgICoqLwogICAgdGl0bGU6IG51bGwsCgogICAgLyoq
        CiAgICAgIFNldHMgdGhlIGByZWxgIGF0dHJpYnV0ZSBvZiB0aGUgYExpbmtW
        aWV3YCdzIEhUTUwgZWxlbWVudC4KCiAgICAgIEBwcm9wZXJ0eSByZWwKICAg
        ICAgQGRlZmF1bHQgbnVsbAogICAgKiovCiAgICByZWw6IG51bGwsCgogICAg
        LyoqCiAgICAgIFRoZSBDU1MgY2xhc3MgdG8gYXBwbHkgdG8gYExpbmtWaWV3
        YCdzIGVsZW1lbnQgd2hlbiBpdHMgYGFjdGl2ZWAKICAgICAgcHJvcGVydHkg
        aXMgYHRydWVgLgoKICAgICAgQHByb3BlcnR5IGFjdGl2ZUNsYXNzCiAgICAg
        IEB0eXBlIFN0cmluZwogICAgICBAZGVmYXVsdCBhY3RpdmUKICAgICoqLwog
        ICAgYWN0aXZlQ2xhc3M6ICdhY3RpdmUnLAoKICAgIC8qKgogICAgICBUaGUg
        Q1NTIGNsYXNzIHRvIGFwcGx5IHRvIGBMaW5rVmlld2AncyBlbGVtZW50IHdo
        ZW4gaXRzIGBsb2FkaW5nYAogICAgICBwcm9wZXJ0eSBpcyBgdHJ1ZWAuCgog
        ICAgICBAcHJvcGVydHkgbG9hZGluZ0NsYXNzCiAgICAgIEB0eXBlIFN0cmlu
        ZwogICAgICBAZGVmYXVsdCBsb2FkaW5nCiAgICAqKi8KICAgIGxvYWRpbmdD
        bGFzczogJ2xvYWRpbmcnLAoKICAgIC8qKgogICAgICBUaGUgQ1NTIGNsYXNz
        IHRvIGFwcGx5IHRvIGEgYExpbmtWaWV3YCdzIGVsZW1lbnQgd2hlbiBpdHMg
        YGRpc2FibGVkYAogICAgICBwcm9wZXJ0eSBpcyBgdHJ1ZWAuCgogICAgICBA
        cHJvcGVydHkgZGlzYWJsZWRDbGFzcwogICAgICBAdHlwZSBTdHJpbmcKICAg
        ICAgQGRlZmF1bHQgZGlzYWJsZWQKICAgICoqLwogICAgZGlzYWJsZWRDbGFz
        czogJ2Rpc2FibGVkJywKICAgIF9pc0Rpc2FibGVkOiBmYWxzZSwKCiAgICAv
        KioKICAgICAgRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBgTGlua1ZpZXdgIHdp
        bGwgdHJpZ2dlciByb3V0aW5nIHZpYQogICAgICB0aGUgYHJlcGxhY2VXaXRo
        YCByb3V0aW5nIHN0cmF0ZWd5LgoKICAgICAgQHByb3BlcnR5IHJlcGxhY2UK
        ICAgICAgQHR5cGUgQm9vbGVhbgogICAgICBAZGVmYXVsdCBmYWxzZQogICAg
        KiovCiAgICByZXBsYWNlOiBmYWxzZSwKCiAgICAvKioKICAgICAgQnkgZGVm
        YXVsdCB0aGUgYHt7bGluay10b319YCBoZWxwZXIgd2lsbCBiaW5kIHRvIHRo
        ZSBgaHJlZmAgYW5kCiAgICAgIGB0aXRsZWAgYXR0cmlidXRlcy4gSXQncyBk
        aXNjb3VyYWdlIHRoYXQgeW91IG92ZXJyaWRlIHRoZXNlIGRlZmF1bHRzLAog
        ICAgICBob3dldmVyIHlvdSBjYW4gcHVzaCBvbnRvIHRoZSBhcnJheSBpZiBu
        ZWVkZWQuCgogICAgICBAcHJvcGVydHkgYXR0cmlidXRlQmluZGluZ3MKICAg
        ICAgQHR5cGUgQXJyYXkgfCBTdHJpbmcKICAgICAgQGRlZmF1bHQgWydocmVm
        JywgJ3RpdGxlJywgJ3JlbCddCiAgICAgKiovCiAgICBhdHRyaWJ1dGVCaW5k
        aW5nczogWydocmVmJywgJ3RpdGxlJywgJ3JlbCddLAoKICAgIC8qKgogICAg
        ICBCeSBkZWZhdWx0IHRoZSBge3tsaW5rLXRvfX1gIGhlbHBlciB3aWxsIGJp
        bmQgdG8gdGhlIGBhY3RpdmVgLCBgbG9hZGluZ2AsIGFuZAogICAgICBgZGlz
        YWJsZWRgIGNsYXNzZXMuIEl0IGlzIGRpc2NvdXJhZ2VkIHRvIG92ZXJyaWRl
        IHRoZXNlIGRpcmVjdGx5LgoKICAgICAgQHByb3BlcnR5IGNsYXNzTmFtZUJp
        bmRpbmdzCiAgICAgIEB0eXBlIEFycmF5CiAgICAgIEBkZWZhdWx0IFsnYWN0
        aXZlJywgJ2xvYWRpbmcnLCAnZGlzYWJsZWQnXQogICAgICoqLwogICAgY2xh
        c3NOYW1lQmluZGluZ3M6IFsnYWN0aXZlJywgJ2xvYWRpbmcnLCAnZGlzYWJs
        ZWQnXSwKCiAgICAvKioKICAgICAgQnkgZGVmYXVsdCB0aGUgYHt7bGluay10
        b319YCBoZWxwZXIgcmVzcG9uZHMgdG8gdGhlIGBjbGlja2AgZXZlbnQuIFlv
        dQogICAgICBjYW4gb3ZlcnJpZGUgdGhpcyBnbG9iYWxseSBieSBzZXR0aW5n
        IHRoaXMgcHJvcGVydHkgdG8geW91ciBjdXN0b20KICAgICAgZXZlbnQgbmFt
        ZS4KCiAgICAgIFRoaXMgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBvbiBtb2Jp
        bGUgd2hlbiBvbmUgd2FudHMgdG8gYXZvaWQgdGhlIDMwMG1zCiAgICAgIGNs
        aWNrIGRlbGF5IHVzaW5nIHNvbWUgc29ydCBvZiBjdXN0b20gYHRhcGAgZXZl
        bnQuCgogICAgICBAcHJvcGVydHkgZXZlbnROYW1lCiAgICAgIEB0eXBlIFN0
        cmluZwogICAgICBAZGVmYXVsdCBjbGljawogICAgKi8KICAgIGV2ZW50TmFt
        ZTogJ2NsaWNrJywKCiAgICAvLyB0aGlzIGlzIGRvYydlZCBoZXJlIHNvIGl0
        IHNob3dzIHVwIGluIHRoZSBldmVudHMKICAgIC8vIHNlY3Rpb24gb2YgdGhl
        IEFQSSBkb2N1bWVudGF0aW9uLCB3aGljaCBpcyB3aGVyZQogICAgLy8gcGVv
        cGxlIHdpbGwgbGlrZWx5IGdvIGxvb2tpbmcgZm9yIGl0LgogICAgLyoqCiAg
        ICAgIFRyaWdnZXJzIHRoZSBgTGlua1ZpZXdgJ3Mgcm91dGluZyBiZWhhdmlv
        ci4gSWYKICAgICAgYGV2ZW50TmFtZWAgaXMgY2hhbmdlZCB0byBhIHZhbHVl
        IG90aGVyIHRoYW4gYGNsaWNrYAogICAgICB0aGUgcm91dGluZyBiZWhhdmlv
        ciB3aWxsIHRyaWdnZXIgb24gdGhhdCBjdXN0b20gZXZlbnQKICAgICAgaW5z
        dGVhZC4KCiAgICAgIEBldmVudCBjbGljawogICAgKiovCgogICAgLyoqCiAg
        ICAgIEFuIG92ZXJyaWRhYmxlIG1ldGhvZCBjYWxsZWQgd2hlbiBMaW5rVmll
        dyBvYmplY3RzIGFyZSBpbnN0YW50aWF0ZWQuCgogICAgICBFeGFtcGxlOgoK
        ICAgICAgYGBgamF2YXNjcmlwdAogICAgICBBcHAuTXlMaW5rVmlldyA9IEVt
        YmVyLkxpbmtWaWV3LmV4dGVuZCh7CiAgICAgICAgaW5pdDogZnVuY3Rpb24o
        KSB7CiAgICAgICAgICB0aGlzLl9zdXBlcigpOwogICAgICAgICAgRW1iZXIu
        TG9nZ2VyLmxvZygnRXZlbnQgaXMgJyArIHRoaXMuZ2V0KCdldmVudE5hbWUn
        KSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgYGBgCgogICAgICBOT1RF
        OiBJZiB5b3UgZG8gb3ZlcnJpZGUgYGluaXRgIGZvciBhIGZyYW1ld29yayBj
        bGFzcyBsaWtlIGBFbWJlci5WaWV3YCBvcgogICAgICBgRW1iZXIuQXJyYXlD
        b250cm9sbGVyYCwgYmUgc3VyZSB0byBjYWxsIGB0aGlzLl9zdXBlcigpYCBp
        biB5b3VyCiAgICAgIGBpbml0YCBkZWNsYXJhdGlvbiEgSWYgeW91IGRvbid0
        LCBFbWJlciBtYXkgbm90IGhhdmUgYW4gb3Bwb3J0dW5pdHkgdG8KICAgICAg
        ZG8gaW1wb3J0YW50IHNldHVwIHdvcmssIGFuZCB5b3UnbGwgc2VlIHN0cmFu
        Z2UgYmVoYXZpb3IgaW4geW91cgogICAgICBhcHBsaWNhdGlvbi4KCiAgICAg
        IEBtZXRob2QgaW5pdAogICAgKi8KICAgIGluaXQ6IGZ1bmN0aW9uKCkgewog
        ICAgICB0aGlzLl9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAg
        ICAgLy8gTWFwIGRlc2lyZWQgZXZlbnQgbmFtZSB0byBpbnZva2UgZnVuY3Rp
        b24KICAgICAgdmFyIGV2ZW50TmFtZSA9IGdldCh0aGlzLCAnZXZlbnROYW1l
        Jyk7CiAgICAgIHRoaXMub24oZXZlbnROYW1lLCB0aGlzLCB0aGlzLl9pbnZv
        a2UpOwoKICAgICAgdmFyIGhlbHBlclBhcmFtZXRlcnMgPSB0aGlzLnBhcmFt
        ZXRlcnMsCiAgICAgICAgICB0ZW1wbGF0ZUNvbnRleHQgPSBoZWxwZXJQYXJh
        bWV0ZXJzLmNvbnRleHQsCiAgICAgICAgICBwYXRocyA9IGdldFJlc29sdmVk
        UGF0aHMoaGVscGVyUGFyYW1ldGVycyksCiAgICAgICAgICBsZW5ndGggPSBw
        YXRocy5sZW5ndGgsCiAgICAgICAgICBwYXRoLCBpLCBub3JtYWxpemVkUGF0
        aDsKCiAgICAgIAogICAgICAgIHZhciBsaW5rVGV4dFBhdGggPSBoZWxwZXJQ
        YXJhbWV0ZXJzLm9wdGlvbnMubGlua1RleHRQYXRoOwogICAgICAgIGlmIChs
        aW5rVGV4dFBhdGgpIHsKICAgICAgICAgIG5vcm1hbGl6ZWRQYXRoID0gRW1i
        ZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoKHRlbXBsYXRlQ29udGV4dCwg
        bGlua1RleHRQYXRoLCBoZWxwZXJQYXJhbWV0ZXJzLm9wdGlvbnMuZGF0YSk7
        CiAgICAgICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZFBh
        dGgucm9vdCwgbm9ybWFsaXplZFBhdGgucGF0aCwgdGhpcywgdGhpcy5yZXJl
        bmRlcik7CiAgICAgICAgfQogICAgICAKCiAgICAgIGZvcihpPTA7IGkgPCBs
        ZW5ndGg7IGkrKykgewogICAgICAgIHBhdGggPSBwYXRoc1tpXTsKICAgICAg
        ICBpZiAobnVsbCA9PT0gcGF0aCkgewogICAgICAgICAgLy8gQSBsaXRlcmFs
        IHZhbHVlIHdhcyBwcm92aWRlZCwgbm90IGEgcGF0aCwgc28gbm90aGluZyB0
        byBvYnNlcnZlLgogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAg
        ICAgICBub3JtYWxpemVkUGF0aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFs
        aXplUGF0aCh0ZW1wbGF0ZUNvbnRleHQsIHBhdGgsIGhlbHBlclBhcmFtZXRl
        cnMub3B0aW9ucy5kYXRhKTsKICAgICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2
        ZXIobm9ybWFsaXplZFBhdGgucm9vdCwgbm9ybWFsaXplZFBhdGgucGF0aCwg
        dGhpcywgdGhpcy5fcGFyYW1zQ2hhbmdlZCk7CiAgICAgIH0KCgogICAgICBp
        ZiAoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCJxdWVyeS1wYXJhbXMiKSkg
        ewogICAgICAgIHZhciBxdWVyeVBhcmFtcyA9IGdldCh0aGlzLCAnX3BvdGVu
        dGlhbFF1ZXJ5UGFyYW1zJykgfHwgW107CgogICAgICAgIGZvcihpPTA7IGkg
        PCBxdWVyeVBhcmFtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5y
        ZWdpc3Rlck9ic2VydmVyKHRoaXMsIHF1ZXJ5UGFyYW1zW2ldLCB0aGlzLCB0
        aGlzLl9xdWVyeVBhcmFtc0NoYW5nZWQpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfSwKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFRoaXMgbWV0
        aG9kIGlzIGludm9rZWQgYnkgb2JzZXJ2ZXJzIGluc3RhbGxlZCBkdXJpbmcg
        YGluaXRgIHRoYXQgZmlyZQogICAgICB3aGVuZXZlciB0aGUgcGFyYW1zIGNo
        YW5nZQogICAgICBAbWV0aG9kIF9wYXJhbXNDaGFuZ2VkCiAgICAgKi8KICAg
        IF9wYXJhbXNDaGFuZ2VkOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ub3Rp
        ZnlQcm9wZXJ0eUNoYW5nZSgncmVzb2x2ZWRQYXJhbXMnKTsKICAgIH0sCgoK
        ICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAgICAgVGhpcyBtZXRob2QgaXMg
        aW52b2tlZCBieSBvYnNlcnZlcnMgaW5zdGFsbGVkIGR1cmluZyBgaW5pdGAg
        dGhhdCBmaXJlCiAgICAgIHdoZW5ldmVyIHRoZSBxdWVyeSBwYXJhbXMgY2hh
        bmdlCiAgICAgKi8KICAgIF9xdWVyeVBhcmFtc0NoYW5nZWQ6IGZ1bmN0aW9u
        IChvYmplY3QsIHBhdGgpIHsKICAgICAgdGhpcy5ub3RpZnlQcm9wZXJ0eUNo
        YW5nZSgncXVlcnlQYXJhbXMnKTsKICAgIH0sCgoKICAgIC8qKgogICAgICBA
        cHJpdmF0ZQoKICAgICAgRXZlbiB0aG91Z2ggdGhpcyBpc24ndCBhIHZpcnR1
        YWwgdmlldywgd2Ugd2FudCB0byB0cmVhdCBpdCBhcyBpZiBpdCBpcwogICAg
        ICBzbyB0aGF0IHlvdSBjYW4gYWNjZXNzIHRoZSBwYXJlbnQgd2l0aCB7e3Zp
        ZXcucHJvcH19CgogICAgICBAbWV0aG9kIGNvbmNyZXRlVmlldwogICAgKiov
        CiAgICBjb25jcmV0ZVZpZXc6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkg
        ewogICAgICByZXR1cm4gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Jyk7CiAgICB9
        KS5wcm9wZXJ0eSgncGFyZW50VmlldycpLAoKICAgIC8qKgoKICAgICAgQWNj
        ZXNzZWQgYXMgYSBjbGFzc25hbWUgYmluZGluZyB0byBhcHBseSB0aGUgYExp
        bmtWaWV3YCdzIGBkaXNhYmxlZENsYXNzYAogICAgICBDU1MgYGNsYXNzYCB0
        byB0aGUgZWxlbWVudCB3aGVuIHRoZSBsaW5rIGlzIGRpc2FibGVkLgoKICAg
        ICAgV2hlbiBgdHJ1ZWAgaW50ZXJhY3Rpb25zIHdpdGggdGhlIGVsZW1lbnQg
        d2lsbCBub3QgdHJpZ2dlciByb3V0ZSBjaGFuZ2VzLgogICAgICBAcHJvcGVy
        dHkgZGlzYWJsZWQKICAgICovCiAgICBkaXNhYmxlZDogRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT09
        IHVuZGVmaW5lZCkgeyB0aGlzLnNldCgnX2lzRGlzYWJsZWQnLCB2YWx1ZSk7
        IH0KCiAgICAgIHJldHVybiB2YWx1ZSA/IGdldCh0aGlzLCAnZGlzYWJsZWRD
        bGFzcycpIDogZmFsc2U7CiAgICB9KSwKCiAgICAvKioKICAgICAgQWNjZXNz
        ZWQgYXMgYSBjbGFzc25hbWUgYmluZGluZyB0byBhcHBseSB0aGUgYExpbmtW
        aWV3YCdzIGBhY3RpdmVDbGFzc2AKICAgICAgQ1NTIGBjbGFzc2AgdG8gdGhl
        IGVsZW1lbnQgd2hlbiB0aGUgbGluayBpcyBhY3RpdmUuCgogICAgICBBIGBM
        aW5rVmlld2AgaXMgY29uc2lkZXJlZCBhY3RpdmUgd2hlbiBpdHMgYGN1cnJl
        bnRXaGVuYCBwcm9wZXJ0eSBpcyBgdHJ1ZWAKICAgICAgb3IgdGhlIGFwcGxp
        Y2F0aW9uJ3MgY3VycmVudCByb3V0ZSBpcyB0aGUgcm91dGUgdGhlIGBMaW5r
        Vmlld2Agd291bGQgdHJpZ2dlcgogICAgICB0cmFuc2l0aW9ucyBpbnRvLgoK
        ICAgICAgQHByb3BlcnR5IGFjdGl2ZQogICAgKiovCiAgICBhY3RpdmU6IEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICBpZiAoZ2V0KHRoaXMs
        ICdsb2FkaW5nJykpIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgICB2YXIgcm91
        dGVyID0gZ2V0KHRoaXMsICdyb3V0ZXInKSwKICAgICAgICAgIHJvdXRlQXJn
        cyA9IGdldCh0aGlzLCAncm91dGVBcmdzJyksCiAgICAgICAgICBjb250ZXh0
        cyA9IHJvdXRlQXJncy5zbGljZSgxKSwKICAgICAgICAgIHJlc29sdmVkUGFy
        YW1zID0gZ2V0KHRoaXMsICdyZXNvbHZlZFBhcmFtcycpLAogICAgICAgICAg
        Y3VycmVudFdoZW4gPSB0aGlzLmN1cnJlbnRXaGVuIHx8IHJlc29sdmVkUGFy
        YW1zWzBdLAogICAgICAgICAgY3VycmVudFdpdGhJbmRleCA9IGN1cnJlbnRX
        aGVuICsgJy5pbmRleCcsCiAgICAgICAgICBpc0FjdGl2ZSA9IHJvdXRlci5p
        c0FjdGl2ZS5hcHBseShyb3V0ZXIsIFtjdXJyZW50V2hlbl0uY29uY2F0KGNv
        bnRleHRzKSkgfHwKICAgICAgICAgICAgICAgICAgICAgcm91dGVyLmlzQWN0
        aXZlLmFwcGx5KHJvdXRlciwgW2N1cnJlbnRXaXRoSW5kZXhdLmNvbmNhdChj
        b250ZXh0cykpOwoKICAgICAgaWYgKGlzQWN0aXZlKSB7IHJldHVybiBnZXQo
        dGhpcywgJ2FjdGl2ZUNsYXNzJyk7IH0KICAgIH0pLnByb3BlcnR5KCdyZXNv
        bHZlZFBhcmFtcycsICdyb3V0ZUFyZ3MnLCAncm91dGVyLnVybCcpLAoKICAg
        IC8qKgogICAgICBBY2Nlc3NlZCBhcyBhIGNsYXNzbmFtZSBiaW5kaW5nIHRv
        IGFwcGx5IHRoZSBgTGlua1ZpZXdgJ3MgYGxvYWRpbmdDbGFzc2AKICAgICAg
        Q1NTIGBjbGFzc2AgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgbGluayBpcyBs
        b2FkaW5nLgoKICAgICAgQSBgTGlua1ZpZXdgIGlzIGNvbnNpZGVyZWQgbG9h
        ZGluZyB3aGVuIGl0IGhhcyBhdCBsZWFzdCBvbmUKICAgICAgcGFyYW1ldGVy
        IHdob3NlIHZhbHVlIGlzIGN1cnJlbnRseSBudWxsIG9yIHVuZGVmaW5lZC4g
        RHVyaW5nCiAgICAgIHRoaXMgdGltZSwgY2xpY2tpbmcgdGhlIGxpbmsgd2ls
        bCBwZXJmb3JtIG5vIHRyYW5zaXRpb24gYW5kCiAgICAgIGVtaXQgYSB3YXJu
        aW5nIHRoYXQgdGhlIGxpbmsgaXMgc3RpbGwgaW4gYSBsb2FkaW5nIHN0YXRl
        LgoKICAgICAgQHByb3BlcnR5IGxvYWRpbmcKICAgICoqLwogICAgbG9hZGlu
        ZzogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICAgIGlmICghZ2V0
        KHRoaXMsICdyb3V0ZUFyZ3MnKSkgeyByZXR1cm4gZ2V0KHRoaXMsICdsb2Fk
        aW5nQ2xhc3MnKTsgfQogICAgfSkucHJvcGVydHkoJ3JvdXRlQXJncycpLAoK
        ICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAgICAgUmV0dXJucyB0aGUgYXBw
        bGljYXRpb24ncyBtYWluIHJvdXRlciBmcm9tIHRoZSBjb250YWluZXIuCgog
        ICAgICBAcHJvcGVydHkgcm91dGVyCiAgICAqKi8KICAgIHJvdXRlcjogRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBnZXQodGhp
        cywgJ2NvbnRyb2xsZXInKS5jb250YWluZXIubG9va3VwKCdyb3V0ZXI6bWFp
        bicpOwogICAgfSksCgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBF
        dmVudCBoYW5kbGVyIHRoYXQgaW52b2tlcyB0aGUgbGluaywgYWN0aXZhdGlu
        ZyB0aGUgYXNzb2NpYXRlZCByb3V0ZS4KCiAgICAgIEBtZXRob2QgX2ludm9r
        ZQogICAgICBAcGFyYW0ge0V2ZW50fSBldmVudAogICAgKi8KICAgIF9pbnZv
        a2U6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIGlmICghaXNTaW1wbGVDbGlj
        ayhldmVudCkpIHsgcmV0dXJuIHRydWU7IH0KCiAgICAgIGV2ZW50LnByZXZl
        bnREZWZhdWx0KCk7CiAgICAgIGlmICh0aGlzLmJ1YmJsZXMgPT09IGZhbHNl
        KSB7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB9CgogICAgICBpZiAoZ2V0
        KHRoaXMsICdfaXNEaXNhYmxlZCcpKSB7IHJldHVybiBmYWxzZTsgfQoKICAg
        ICAgaWYgKGdldCh0aGlzLCAnbG9hZGluZycpKSB7CiAgICAgICAgRW1iZXIu
        TG9nZ2VyLndhcm4oIlRoaXMgbGluay10byBpcyBpbiBhbiBpbmFjdGl2ZSBs
        b2FkaW5nIHN0YXRlIGJlY2F1c2UgYXQgbGVhc3Qgb25lIG9mIGl0cyBwYXJh
        bWV0ZXJzIHByZXNlbnRseSBoYXMgYSBudWxsL3VuZGVmaW5lZCB2YWx1ZSwg
        b3IgdGhlIHByb3ZpZGVkIHJvdXRlIG5hbWUgaXMgaW52YWxpZC4iKTsKICAg
        ICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciByb3V0ZXIg
        PSBnZXQodGhpcywgJ3JvdXRlcicpLAogICAgICAgICAgcm91dGVBcmdzID0g
        Z2V0KHRoaXMsICdyb3V0ZUFyZ3MnKTsKCiAgICAgIGlmIChnZXQodGhpcywg
        J3JlcGxhY2UnKSkgewogICAgICAgIHJvdXRlci5yZXBsYWNlV2l0aC5hcHBs
        eShyb3V0ZXIsIHJvdXRlQXJncyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAg
        cm91dGVyLnRyYW5zaXRpb25Uby5hcHBseShyb3V0ZXIsIHJvdXRlQXJncyk7
        CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAg
        ICBDb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdGhlIHJlc29sdmVk
        IHBhcmFtZXRlcnMuCgogICAgICBAcHJvcGVydHkKICAgICAgQHJldHVybiB7
        QXJyYXl9CiAgICAgKi8KICAgIHJlc29sdmVkUGFyYW1zOiBFbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpIHsKICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0aGlz
        LnBhcmFtZXRlcnMsCiAgICAgICAgICBvcHRpb25zID0gcGFyYW1ldGVycy5v
        cHRpb25zLAogICAgICAgICAgdHlwZXMgPSBvcHRpb25zLnR5cGVzLAogICAg
        ICAgICAgZGF0YSA9IG9wdGlvbnMuZGF0YTsKCiAgICAgIGlmIChFbWJlci5G
        RUFUVVJFUy5pc0VuYWJsZWQoInF1ZXJ5LXBhcmFtcyIpKSB7CiAgICAgICAg
        aWYgKHBhcmFtZXRlcnMucGFyYW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAg
        ICAgdmFyIGFwcENvbnRyb2xsZXIgPSB0aGlzLmNvbnRhaW5lci5sb29rdXAo
        J2NvbnRyb2xsZXI6YXBwbGljYXRpb24nKTsKICAgICAgICAgIHJldHVybiBb
        Z2V0KGFwcENvbnRyb2xsZXIsICdjdXJyZW50Um91dGVOYW1lJyldOwogICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZVBhcmFtcyhw
        YXJhbWV0ZXJzLmNvbnRleHQsIHBhcmFtZXRlcnMucGFyYW1zLCB7IHR5cGVz
        OiB0eXBlcywgZGF0YTogZGF0YSB9KTsKICAgICAgICB9CiAgICAgIH0KCiAg
        ICAgIC8vIE9yaWdpbmFsIGltcGxlbWVudGF0aW9uIGlmIHF1ZXJ5IHBhcmFt
        cyBub3QgZW5hYmxlZAogICAgICByZXR1cm4gcmVzb2x2ZVBhcmFtcyhwYXJh
        bWV0ZXJzLmNvbnRleHQsIHBhcmFtZXRlcnMucGFyYW1zLCB7IHR5cGVzOiB0
        eXBlcywgZGF0YTogZGF0YSB9KTsKICAgIH0pLnByb3BlcnR5KCksCgogICAg
        LyoqCiAgICAgIEBwcml2YXRlCgogICAgICBDb21wdXRlZCBwcm9wZXJ0eSB0
        aGF0IHJldHVybnMgdGhlIGN1cnJlbnQgcm91dGUgbmFtZSBhbmQKICAgICAg
        YW55IGR5bmFtaWMgc2VnbWVudHMuCgogICAgICBAcHJvcGVydHkKICAgICAg
        QHJldHVybiB7QXJyYXl9IEFuIGFycmF5IHdpdGggdGhlIHJvdXRlIG5hbWUg
        YW5kIGFueSBkeW5hbWljIHNlZ21lbnRzCiAgICAgKi8KICAgIHJvdXRlQXJn
        czogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICAgIHZhciByZXNv
        bHZlZFBhcmFtcyA9IGdldCh0aGlzLCAncmVzb2x2ZWRQYXJhbXMnKS5zbGlj
        ZSgwKSwKICAgICAgICAgIHJvdXRlciA9IGdldCh0aGlzLCAncm91dGVyJyks
        CiAgICAgICAgICBuYW1lZFJvdXRlID0gcmVzb2x2ZWRQYXJhbXNbMF07Cgog
        ICAgICBpZiAoIW5hbWVkUm91dGUpIHsgcmV0dXJuOyB9CgogICAgICBuYW1l
        ZFJvdXRlID0gZnVsbFJvdXRlTmFtZShyb3V0ZXIsIG5hbWVkUm91dGUpOwog
        ICAgICByZXNvbHZlZFBhcmFtc1swXSA9IG5hbWVkUm91dGU7CgogICAgICBF
        bWJlci5hc3NlcnQoZm10KCJUaGUgYXR0ZW1wdCB0byBsaW5rLXRvIHJvdXRl
        ICclQCcgZmFpbGVkLiBUaGUgcm91dGVyIGRpZCBub3QgZmluZCAnJUAnIGlu
        IGl0cyBwb3NzaWJsZSByb3V0ZXM6ICclQCciLCBbbmFtZWRSb3V0ZSwgbmFt
        ZWRSb3V0ZSwgRW1iZXIua2V5cyhyb3V0ZXIucm91dGVyLnJlY29nbml6ZXIu
        bmFtZXMpLmpvaW4oIicsICciKV0pLCByb3V0ZXIuaGFzUm91dGUobmFtZWRS
        b3V0ZSkpOwoKICAgICAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IHJlc29sdmVk
        UGFyYW1zLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICAgICAgdmFyIHBh
        cmFtID0gcmVzb2x2ZWRQYXJhbXNbaV07CiAgICAgICAgaWYgKHBhcmFtID09
        PSBudWxsIHx8IHR5cGVvZiBwYXJhbSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAg
        ICAgICAgIC8vIElmIGNvbnRleHRzIGFyZW4ndCBwcmVzZW50LCBjb25zaWRl
        ciB0aGUgbGlua1ZpZXcgdW5sb2FkZWQuCiAgICAgICAgICByZXR1cm47CiAg
        ICAgICAgfQogICAgICB9CgogICAgICBpZiAoRW1iZXIuRkVBVFVSRVMuaXNF
        bmFibGVkKCJxdWVyeS1wYXJhbXMiKSkgewogICAgICAgIHZhciBxdWVyeVBh
        cmFtcyA9IGdldCh0aGlzLCAncXVlcnlQYXJhbXMnKTsKCiAgICAgICAgaWYg
        KHF1ZXJ5UGFyYW1zIHx8IHF1ZXJ5UGFyYW1zID09PSBmYWxzZSkgeyByZXNv
        bHZlZFBhcmFtcy5wdXNoKHtxdWVyeVBhcmFtczogcXVlcnlQYXJhbXN9KTsg
        fQogICAgICB9CgogICAgICByZXR1cm4gcmVzb2x2ZWRQYXJhbXM7CiAgICB9
        KS5wcm9wZXJ0eSgncmVzb2x2ZWRQYXJhbXMnLCAncXVlcnlQYXJhbXMnLCAn
        cm91dGVyLnVybCcpLAoKCiAgICBfcG90ZW50aWFsUXVlcnlQYXJhbXM6IEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG5hbWVkUm91
        dGUgPSBnZXQodGhpcywgJ3Jlc29sdmVkUGFyYW1zJylbMF07CiAgICAgIGlm
        ICghbmFtZWRSb3V0ZSkgeyByZXR1cm4gbnVsbDsgfQogICAgICB2YXIgcm91
        dGVyICAgICAgICAgID0gZ2V0KHRoaXMsICdyb3V0ZXInKTsKCiAgICAgIG5h
        bWVkUm91dGUgPSBmdWxsUm91dGVOYW1lKHJvdXRlciwgbmFtZWRSb3V0ZSk7
        CgogICAgICByZXR1cm4gcm91dGVyLnJvdXRlci5xdWVyeVBhcmFtc0Zvckhh
        bmRsZXIobmFtZWRSb3V0ZSk7CiAgICB9KS5wcm9wZXJ0eSgncmVzb2x2ZWRQ
        YXJhbXMnKSwKCiAgICBxdWVyeVBhcmFtczogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24gKCkgewogICAgICB2YXIgc2VsZiAgICAgICAgICAgICAgPSB0aGlz
        LAogICAgICAgIHF1ZXJ5UGFyYW1zICAgICAgICAgPSBudWxsLAogICAgICAg
        IGFsbG93ZWRRdWVyeVBhcmFtcyAgPSBnZXQodGhpcywgJ19wb3RlbnRpYWxR
        dWVyeVBhcmFtcycpOwoKICAgICAgaWYgKCFhbGxvd2VkUXVlcnlQYXJhbXMp
        IHsgcmV0dXJuIG51bGw7IH0KICAgICAgYWxsb3dlZFF1ZXJ5UGFyYW1zLmZv
        ckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7CiAgICAgICAgdmFyIHZhbHVlID0g
        Z2V0KHNlbGYsIHBhcmFtKTsKICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9
        PSAndW5kZWZpbmVkJykgewogICAgICAgICAgcXVlcnlQYXJhbXMgPSBxdWVy
        eVBhcmFtcyB8fCB7fTsKICAgICAgICAgIHF1ZXJ5UGFyYW1zW3BhcmFtXSA9
        IHZhbHVlOwogICAgICAgIH0KICAgICAgfSk7CgoKICAgICAgcmV0dXJuIHF1
        ZXJ5UGFyYW1zOwogICAgfSkucHJvcGVydHkoJ19wb3RlbnRpYWxRdWVyeVBh
        cmFtcy5bXScpLAoKICAgIC8qKgogICAgICBTZXRzIHRoZSBlbGVtZW50J3Mg
        YGhyZWZgIGF0dHJpYnV0ZSB0byB0aGUgdXJsIGZvcgogICAgICB0aGUgYExp
        bmtWaWV3YCdzIHRhcmdldGVkIHJvdXRlLgoKICAgICAgSWYgdGhlIGBMaW5r
        Vmlld2AncyBgdGFnTmFtZWAgaXMgY2hhbmdlZCB0byBhIHZhbHVlIG90aGVy
        CiAgICAgIHRoYW4gYGFgLCB0aGlzIHByb3BlcnR5IHdpbGwgYmUgaWdub3Jl
        ZC4KCiAgICAgIEBwcm9wZXJ0eSBocmVmCiAgICAqKi8KICAgIGhyZWY6IEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICBpZiAoZ2V0KHRoaXMs
        ICd0YWdOYW1lJykgIT09ICdhJykgeyByZXR1cm47IH0KCiAgICAgIHZhciBy
        b3V0ZXIgPSBnZXQodGhpcywgJ3JvdXRlcicpLAogICAgICAgICAgcm91dGVB
        cmdzID0gZ2V0KHRoaXMsICdyb3V0ZUFyZ3MnKTsKCiAgICAgIHJldHVybiBy
        b3V0ZUFyZ3MgPyByb3V0ZXIuZ2VuZXJhdGUuYXBwbHkocm91dGVyLCByb3V0
        ZUFyZ3MpIDogZ2V0KHRoaXMsICdsb2FkaW5nSHJlZicpOwogICAgfSkucHJv
        cGVydHkoJ3JvdXRlQXJncycpLAoKICAgIC8qKgogICAgICBUaGUgZGVmYXVs
        dCBocmVmIHZhbHVlIHRvIHVzZSB3aGlsZSBhIGxpbmstdG8gaXMgbG9hZGlu
        Zy4KICAgICAgT25seSBhcHBsaWVzIHdoZW4gdGFnTmFtZSBpcyAnYScKCiAg
        ICAgIEBwcm9wZXJ0eSBsb2FkaW5nSHJlZgogICAgICBAdHlwZSBTdHJpbmcK
        ICAgICAgQGRlZmF1bHQgIwogICAgKi8KICAgIGxvYWRpbmdIcmVmOiAnIycK
        ICB9KTsKCiAgTGlua1ZpZXcudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0
        dXJuICJMaW5rVmlldyI7IH07CgogIC8qKgogICAgVGhlIGB7e2xpbmstdG99
        fWAgaGVscGVyIHJlbmRlcnMgYSBsaW5rIHRvIHRoZSBzdXBwbGllZAogICAg
        YHJvdXRlTmFtZWAgcGFzc2luZyBhbiBvcHRpb25hbGx5IHN1cHBsaWVkIG1v
        ZGVsIHRvIHRoZQogICAgcm91dGUgYXMgaXRzIGBtb2RlbGAgY29udGV4dCBv
        ZiB0aGUgcm91dGUuIFRoZSBibG9jawogICAgZm9yIGB7e2xpbmstdG99fWAg
        YmVjb21lcyB0aGUgaW5uZXJIVE1MIG9mIHRoZSByZW5kZXJlZAogICAgZWxl
        bWVudDoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90
        b0dhbGxlcnknfX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MKICAgIHt7
        L2xpbmstdG99fQogICAgYGBgCgogICAgYGBgaHRtbAogICAgPGEgaHJlZj0i
        L2hhbXN0ZXItcGhvdG9zIj4KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MK
        ICAgIDwvYT4KICAgIGBgYAoKICAgICMjIyBTdXBwbHlpbmcgYSB0YWdOYW1l
        CiAgICBCeSBkZWZhdWx0IGB7e2xpbmstdG99fWAgcmVuZGVycyBhbiBgPGE+
        YCBlbGVtZW50LiBUaGlzIGNhbgogICAgYmUgb3ZlcnJpZGRlbiBmb3IgYSBz
        aW5nbGUgdXNlIG9mIGB7e2xpbmstdG99fWAgYnkgc3VwcGx5aW5nCiAgICBh
        IGB0YWdOYW1lYCBvcHRpb246CgogICAgYGBgaGFuZGxlYmFycwogICAge3sj
        bGluay10byAncGhvdG9HYWxsZXJ5JyB0YWdOYW1lPSJsaSJ9fQogICAgICBH
        cmVhdCBIYW1zdGVyIFBob3RvcwogICAge3svbGluay10b319CiAgICBgYGAK
        CiAgICBgYGBodG1sCiAgICA8bGk+CiAgICAgIEdyZWF0IEhhbXN0ZXIgUGhv
        dG9zCiAgICA8L2xpPgogICAgYGBgCgogICAgVG8gb3ZlcnJpZGUgdGhpcyBv
        cHRpb24gZm9yIHlvdXIgZW50aXJlIGFwcGxpY2F0aW9uLCBzZWUKICAgICJP
        dmVycmlkaW5nIEFwcGxpY2F0aW9uLXdpZGUgRGVmYXVsdHMiLgogICAgCiAg
        ICAjIyMgRGlzYWJsaW5nIHRoZSBgbGluay10b2AgaGVscGVyCiAgICBCeSBk
        ZWZhdWx0IGB7e2xpbmstdG99fWAgaXMgZW5hYmxlZC4gCiAgICBhbnkgcGFz
        c2VkIHZhbHVlIHRvIGBkaXNhYmxlZGAgaGVscGVyIHByb3BlcnR5IHdpbGwg
        ZGlzYWJsZSB0aGUgYGxpbmstdG9gIGhlbHBlci4KICAgICAKICAgIHN0YXRp
        YyB1c2U6IHRoZSBgZGlzYWJsZWRgIG9wdGlvbjoKIAogICAgYGBgaGFuZGxl
        YmFycwogICAge3sjbGluay10byAncGhvdG9HYWxsZXJ5JyBkaXNhYmxlZD10
        cnVlfX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MKICAgIHt7L2xpbmst
        dG99fQogICAgYGBgCiAgICAgCiAgICBkeW5hbWljIHVzZTogdGhlIGBkaXNh
        YmxlZFdoZW5gIG9wdGlvbjoKICAgIAogICAgYGBgaGFuZGxlYmFycwogICAg
        e3sjbGluay10byAncGhvdG9HYWxsZXJ5JyBkaXNhYmxlZFdoZW49Y29udHJv
        bGxlci5zb21lUHJvcGVydHl9fQogICAgICBHcmVhdCBIYW1zdGVyIFBob3Rv
        cwogICAge3svbGluay10b319CiAgICBgYGAKICAgIAogICAgYW55IHBhc3Nl
        ZCB2YWx1ZSB0byBgZGlzYWJsZWRgIHdpbGwgZGlzYWJsZSBpdCBleGNlcHQg
        YHVuZGVmaW5lZGAuCiAgICB0byBlbnN1cmUgdGhhdCBvbmx5IGB0cnVlYCBk
        aXNhYmxlIHRoZSBgbGluay10b2AgaGVscGVyIHlvdSBjYW4KICAgIG92ZXJy
        aWRlIHRoZSBnbG9iYWwgYmVoYXZpb3VyIG9mIGBFbWJlci5MaW5rVmlld2Au
        CiAgICAgICAgIAogICAgYGBgamF2YXNjcmlwdCAgCiAgICBFbWJlci5MaW5r
        Vmlldy5yZW9wZW4oewogICAgICBkaXNhYmxlZDogRW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSAhPT0g
        dW5kZWZpbmVkKSB7IAogICAgICAgICAgdGhpcy5zZXQoJ19pc0Rpc2FibGVk
        JywgdmFsdWUgPT09IHRydWUpOyAKICAgICAgICB9CiAgICAgICAgcmV0dXJu
        IHZhbHVlID09PSB0cnVlID8gZ2V0KHRoaXMsICdkaXNhYmxlZENsYXNzJykg
        OiBmYWxzZTsKICAgICAgfSkKICAgIH0pOwogICAgYGBgCiAgICAgCiAgICBz
        ZWUgIk92ZXJyaWRpbmcgQXBwbGljYXRpb24td2lkZSBEZWZhdWx0cyIgZm9y
        IG1vcmUuCiAgICAKICAgICMjIyBIYW5kbGluZyBgaHJlZmAKICAgIGB7e2xp
        bmstdG99fWAgd2lsbCB1c2UgeW91ciBhcHBsaWNhdGlvbidzIFJvdXRlciB0
        bwogICAgZmlsbCB0aGUgZWxlbWVudCdzIGBocmVmYCBwcm9wZXJ0eSB3aXRo
        IGEgdXJsIHRoYXQKICAgIG1hdGNoZXMgdGhlIHBhdGggdG8gdGhlIHN1cHBs
        aWVkIGByb3V0ZU5hbWVgIGZvciB5b3VyCiAgICByb3V0ZXJzJ3MgY29uZmln
        dXJlZCBgTG9jYXRpb25gIHNjaGVtZSwgd2hpY2ggZGVmYXVsdHMKICAgIHRv
        IEVtYmVyLkhhc2hMb2NhdGlvbi4KCiAgICAjIyMgSGFuZGxpbmcgY3VycmVu
        dCByb3V0ZQogICAgYHt7bGluay10b319YCB3aWxsIGFwcGx5IGEgQ1NTIGNs
        YXNzIG5hbWUgb2YgJ2FjdGl2ZScKICAgIHdoZW4gdGhlIGFwcGxpY2F0aW9u
        J3MgY3VycmVudCByb3V0ZSBtYXRjaGVzCiAgICB0aGUgc3VwcGxpZWQgcm91
        dGVOYW1lLiBGb3IgZXhhbXBsZSwgaWYgdGhlIGFwcGxpY2F0aW9uJ3MKICAg
        IGN1cnJlbnQgcm91dGUgaXMgJ3Bob3RvR2FsbGVyeS5yZWNlbnQnIHRoZSBm
        b2xsb3dpbmcKICAgIHVzZSBvZiBge3tsaW5rLXRvfX1gOgoKICAgIGBgYGhh
        bmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2FsbGVyeS5yZWNlbnQn
        fX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MgZnJvbSB0aGUgbGFzdCB3
        ZWVrCiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIHdpbGwgcmVzdWx0
        IGluCgogICAgYGBgaHRtbAogICAgPGEgaHJlZj0iL2hhbXN0ZXItcGhvdG9z
        L3RoaXMtd2VlayIgY2xhc3M9ImFjdGl2ZSI+CiAgICAgIEdyZWF0IEhhbXN0
        ZXIgUGhvdG9zCiAgICA8L2E+CiAgICBgYGAKCiAgICBUaGUgQ1NTIGNsYXNz
        IG5hbWUgdXNlZCBmb3IgYWN0aXZlIGNsYXNzZXMgY2FuIGJlIGN1c3RvbWl6
        ZWQKICAgIGZvciBhIHNpbmdsZSB1c2Ugb2YgYHt7bGluay10b319YCBieSBw
        YXNzaW5nIGFuIGBhY3RpdmVDbGFzc2AKICAgIG9wdGlvbjoKCiAgICBgYGBo
        YW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90b0dhbGxlcnkucmVjZW50
        JyBhY3RpdmVDbGFzcz0iY3VycmVudC11cmwifX0KICAgICAgR3JlYXQgSGFt
        c3RlciBQaG90b3MgZnJvbSB0aGUgbGFzdCB3ZWVrCiAgICB7ey9saW5rLXRv
        fX0KICAgIGBgYAoKICAgIGBgYGh0bWwKICAgIDxhIGhyZWY9Ii9oYW1zdGVy
        LXBob3Rvcy90aGlzLXdlZWsiIGNsYXNzPSJjdXJyZW50LXVybCI+CiAgICAg
        IEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2E+CiAgICBgYGAKCiAgICBU
        byBvdmVycmlkZSB0aGlzIG9wdGlvbiBmb3IgeW91ciBlbnRpcmUgYXBwbGlj
        YXRpb24sIHNlZQogICAgIk92ZXJyaWRpbmcgQXBwbGljYXRpb24td2lkZSBE
        ZWZhdWx0cyIuCgogICAgIyMjIFN1cHBseWluZyBhIG1vZGVsCiAgICBBbiBv
        cHRpb25hbCBtb2RlbCBhcmd1bWVudCBjYW4gYmUgdXNlZCBmb3Igcm91dGVz
        IHdob3NlCiAgICBwYXRocyBjb250YWluIGR5bmFtaWMgc2VnbWVudHMuIFRo
        aXMgYXJndW1lbnQgd2lsbCBiZWNvbWUKICAgIHRoZSBtb2RlbCBjb250ZXh0
        IG9mIHRoZSBsaW5rZWQgcm91dGU6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        QXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVzb3Vy
        Y2UoInBob3RvR2FsbGVyeSIsIHtwYXRoOiAiaGFtc3Rlci1waG90b3MvOnBo
        b3RvX2lkIn0pOwogICAgfSk7CiAgICBgYGAKCiAgICBgYGBoYW5kbGViYXJz
        CiAgICB7eyNsaW5rLXRvICdwaG90b0dhbGxlcnknIGFQaG90b319CiAgICAg
        IHt7YVBob3RvLnRpdGxlfX0KICAgIHt7L2xpbmstdG99fQogICAgYGBgCgog
        ICAgYGBgaHRtbAogICAgPGEgaHJlZj0iL2hhbXN0ZXItcGhvdG9zLzQyIj4K
        ICAgICAgVG9tc3RlcgogICAgPC9hPgogICAgYGBgCgogICAgIyMjIFN1cHBs
        eWluZyBtdWx0aXBsZSBtb2RlbHMKICAgIEZvciBkZWVwLWxpbmtpbmcgdG8g
        cm91dGUgcGF0aHMgdGhhdCBjb250YWluIG11bHRpcGxlCiAgICBkeW5hbWlj
        IHNlZ21lbnRzLCBtdWx0aXBsZSBtb2RlbCBhcmd1bWVudHMgY2FuIGJlIHVz
        ZWQuCiAgICBBcyB0aGUgcm91dGVyIHRyYW5zaXRpb25zIHRocm91Z2ggdGhl
        IHJvdXRlIHBhdGgsIGVhY2gKICAgIHN1cHBsaWVkIG1vZGVsIGFyZ3VtZW50
        IHdpbGwgYmVjb21lIHRoZSBjb250ZXh0IGZvciB0aGUKICAgIHJvdXRlIHdp
        dGggdGhlIGR5bmFtaWMgc2VnbWVudHM6CgogICAgYGBgamF2YXNjcmlwdAog
        ICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVz
        b3VyY2UoInBob3RvR2FsbGVyeSIsIHtwYXRoOiAiaGFtc3Rlci1waG90b3Mv
        OnBob3RvX2lkIn0sIGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMucm91dGUo
        ImNvbW1lbnQiLCB7cGF0aDogImNvbW1lbnRzLzpjb21tZW50X2lkIn0pOwog
        ICAgICB9KTsKICAgIH0pOwogICAgYGBgCiAgICBUaGlzIGFyZ3VtZW50IHdp
        bGwgYmVjb21lIHRoZSBtb2RlbCBjb250ZXh0IG9mIHRoZSBsaW5rZWQgcm91
        dGU6CgogICAgYGBgaGFuZGxlYmFycwogICAge3sjbGluay10byAncGhvdG9H
        YWxsZXJ5LmNvbW1lbnQnIGFQaG90byBjb21tZW50fX0KICAgICAge3tjb21t
        ZW50LmJvZHl9fQogICAge3svbGluay10b319CiAgICBgYGAKCiAgICBgYGBo
        dG1sCiAgICA8YSBocmVmPSIvaGFtc3Rlci1waG90b3MvNDIvY29tbWVudC83
        MTgiPgogICAgICBBKysrIHdvdWxkIHNudWdnbGUgYWdhaW4uCiAgICA8L2E+
        CiAgICBgYGAKCiAgICAjIyMgU3VwcGx5aW5nIGFuIGV4cGxpY2l0IGR5bmFt
        aWMgc2VnbWVudCB2YWx1ZQogICAgSWYgeW91IGRvbid0IGhhdmUgYSBtb2Rl
        bCBvYmplY3QgYXZhaWxhYmxlIHRvIHBhc3MgdG8gYHt7bGluay10b319YCwK
        ICAgIGFuIG9wdGlvbmFsIHN0cmluZyBvciBpbnRlZ2VyIGFyZ3VtZW50IGNh
        biBiZSBwYXNzZWQgZm9yIHJvdXRlcyB3aG9zZQogICAgcGF0aHMgY29udGFp
        biBkeW5hbWljIHNlZ21lbnRzLiBUaGlzIGFyZ3VtZW50IHdpbGwgYmVjb21l
        IHRoZSB2YWx1ZQogICAgb2YgdGhlIGR5bmFtaWMgc2VnbWVudDoKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsK
        ICAgICAgdGhpcy5yZXNvdXJjZSgicGhvdG9HYWxsZXJ5Iiwge3BhdGg6ICJo
        YW1zdGVyLXBob3Rvcy86cGhvdG9faWQifSk7CiAgICB9KTsKICAgIGBgYAoK
        ICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2FsbGVy
        eScgYVBob3RvSWR9fQogICAgICB7e2FQaG90by50aXRsZX19CiAgICB7ey9s
        aW5rLXRvfX0KICAgIGBgYAoKICAgIGBgYGh0bWwKICAgIDxhIGhyZWY9Ii9o
        YW1zdGVyLXBob3Rvcy80MiI+CiAgICAgIFRvbXN0ZXIKICAgIDwvYT4KICAg
        IGBgYAoKICAgIFdoZW4gdHJhbnNpdGlvbmluZyBpbnRvIHRoZSBsaW5rZWQg
        cm91dGUsIHRoZSBgbW9kZWxgIGhvb2sgd2lsbAogICAgYmUgdHJpZ2dlcmVk
        IHdpdGggcGFyYW1ldGVycyBpbmNsdWRpbmcgdGhpcyBwYXNzZWQgaWRlbnRp
        Zmllci4KCiAgICAjIyMgT3ZlcnJpZGluZyBhdHRyaWJ1dGVzCiAgICBZb3Ug
        Y2FuIG92ZXJyaWRlIGFueSBnaXZlbiBwcm9wZXJ0eSBvZiB0aGUgRW1iZXIu
        TGlua1ZpZXcKICAgIHRoYXQgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBge3tsaW5r
        LXRvfX1gIGhlbHBlciBieSBwYXNzaW5nCiAgICBrZXkvdmFsdWUgcGFpcnMs
        IGxpa2Ugc286CgogICAgYGBgaGFuZGxlYmFycwogICAge3sjbGluay10byAg
        YVBob3RvIHRhZ05hbWU9J2xpJyB0aXRsZT0nRm9sbG93aW5nIHRoaXMgbGlu
        ayB3aWxsIGNoYW5nZSB5b3VyIGxpZmUnIGNsYXNzTmFtZXM9WydwaWMnLCAn
        c3dlZXQnXX19CiAgICAgIFVoLW1hemluZyEKICAgIHt7L2xpbmstdG99fQog
        ICAgYGBgCgogICAgU2VlIFtFbWJlci5MaW5rVmlld10oL2FwaS9jbGFzc2Vz
        L0VtYmVyLkxpbmtWaWV3Lmh0bWwpIGZvciBhCiAgICBjb21wbGV0ZSBsaXN0
        IG9mIG92ZXJyaWRlYWJsZSBwcm9wZXJ0aWVzLiBCZSBzdXJlIHRvIGFsc28K
        ICAgIGNoZWNrIG91dCBpbmhlcml0ZWQgcHJvcGVydGllcyBvZiBgTGlua1Zp
        ZXdgLgoKICAgICMjIyBPdmVycmlkaW5nIEFwcGxpY2F0aW9uLXdpZGUgRGVm
        YXVsdHMKICAgIGBge3tsaW5rLXRvfX1gYCBjcmVhdGVzIGFuIGluc3RhbmNl
        IG9mIEVtYmVyLkxpbmtWaWV3CiAgICBmb3IgcmVuZGVyaW5nLiBUbyBvdmVy
        cmlkZSBvcHRpb25zIGZvciB5b3VyIGVudGlyZQogICAgYXBwbGljYXRpb24s
        IHJlb3BlbiBFbWJlci5MaW5rVmlldyBhbmQgc3VwcGx5IHRoZQogICAgZGVz
        aXJlZCB2YWx1ZXM6CgogICAgYGBgIGphdmFzY3JpcHQKICAgIEVtYmVyLkxp
        bmtWaWV3LnJlb3Blbih7CiAgICAgIGFjdGl2ZUNsYXNzOiAiaXMtYWN0aXZl
        IiwKICAgICAgdGFnTmFtZTogJ2xpJwogICAgfSkKICAgIGBgYAoKICAgIEl0
        IGlzIGFsc28gcG9zc2libGUgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgZXZl
        bnQgaW4KICAgIHRoaXMgbWFubmVyOgoKICAgIGBgYCBqYXZhc2NyaXB0CiAg
        ICBFbWJlci5MaW5rVmlldy5yZW9wZW4oewogICAgICBldmVudE5hbWU6ICdj
        dXN0b21FdmVudE5hbWUnCiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2Qg
        bGluay10bwogICAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICAg
        IEBwYXJhbSB7U3RyaW5nfSByb3V0ZU5hbWUKICAgIEBwYXJhbSB7T2JqZWN0
        fSBbY29udGV4dF0qCiAgICBAcGFyYW0gW29wdGlvbnNdIHtPYmplY3R9IEhh
        bmRsZWJhcnMga2V5L3ZhbHVlIHBhaXJzIG9mIG9wdGlvbnMsIHlvdSBjYW4g
        b3ZlcnJpZGUgYW55IHByb3BlcnR5IG9mIEVtYmVyLkxpbmtWaWV3CiAgICBA
        cmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiAgICBAc2VlIHtFbWJlci5M
        aW5rVmlld30KICAqLwogIEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoJ2xpbmstdG8nLCBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgb3B0aW9u
        cyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAtMSlbMF0sCiAgICAgICAg
        cGFyYW1zID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKSwKICAg
        ICAgICBoYXNoID0gb3B0aW9ucy5oYXNoOwoKICAgIGhhc2guZGlzYWJsZWRC
        aW5kaW5nID0gaGFzaC5kaXNhYmxlZFdoZW47CgogICAgCiAgICAgIGlmICgh
        b3B0aW9ucy5mbikgewogICAgICAgIHZhciBsaW5rVGl0bGUgPSBwYXJhbXMu
        c2hpZnQoKTsKICAgICAgICB2YXIgbGlua1R5cGUgPSBvcHRpb25zLnR5cGVz
        LnNoaWZ0KCk7CiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzOwogICAgICAg
        IGlmIChsaW5rVHlwZSA9PT0gJ0lEJykgewogICAgICAgICAgb3B0aW9ucy5s
        aW5rVGV4dFBhdGggPSBsaW5rVGl0bGU7CiAgICAgICAgICBvcHRpb25zLmZu
        ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBFbWJlci5IYW5k
        bGViYXJzLmdldChjb250ZXh0LCBsaW5rVGl0bGUsIG9wdGlvbnMpOwogICAg
        ICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3B0aW9ucy5m
        biA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gbGlua1RpdGxl
        OwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KICAgIAoKICAgIGhh
        c2gucGFyYW1ldGVycyA9IHsKICAgICAgY29udGV4dDogdGhpcywKICAgICAg
        b3B0aW9uczogb3B0aW9ucywKICAgICAgcGFyYW1zOiBwYXJhbXMKICAgIH07
        CgogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNh
        bGwodGhpcywgTGlua1ZpZXcsIG9wdGlvbnMpOwogIH0pOwoKICAvKioKICAg
        IFNlZSBbbGluay10b10oL2FwaS9jbGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycy5odG1sI21ldGhvZF9saW5rLXRvKQoKICAgIEBtZXRob2QgbGlu
        a1RvCiAgICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogICAgQGRl
        cHJlY2F0ZWQKICAgIEBwYXJhbSB7U3RyaW5nfSByb3V0ZU5hbWUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAgICBAcmV0dXJuIHtTdHJpbmd9
        IEhUTUwgc3RyaW5nCiAgKi8KICBFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKCdsaW5rVG8nLCBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnNbJ2xp
        bmstdG8nXSk7Cn0pOwoKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwpFbWJlci5vbkxv
        YWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5jdGlvbihIYW5kbGViYXJzKSB7
        CiAgLyoqCiAgQG1vZHVsZSBlbWJlcgogIEBzdWJtb2R1bGUgZW1iZXItcm91
        dGluZwogICovCgogIEhhbmRsZWJhcnMuT3V0bGV0VmlldyA9IEVtYmVyLkNv
        bnRhaW5lclZpZXcuZXh0ZW5kKEVtYmVyLl9NZXRhbW9ycGgpOwoKICAvKioK
        ICAgIFRoZSBgb3V0bGV0YCBoZWxwZXIgaXMgYSBwbGFjZWhvbGRlciB0aGF0
        IHRoZSByb3V0ZXIgd2lsbCBmaWxsIGluIHdpdGgKICAgIHRoZSBhcHByb3By
        aWF0ZSB0ZW1wbGF0ZSBiYXNlZCBvbiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0
        aGUgYXBwbGljYXRpb24uCgogICAgYGBgIGhhbmRsZWJhcnMKICAgIHt7b3V0
        bGV0fX0KICAgIGBgYAoKICAgIEJ5IGRlZmF1bHQsIGEgdGVtcGxhdGUgYmFz
        ZWQgb24gRW1iZXIncyBuYW1pbmcgY29udmVudGlvbnMgd2lsbCBiZSByZW5k
        ZXJlZAogICAgaW50byB0aGUgYG91dGxldGAgKGUuZy4gYEFwcC5Qb3N0c1Jv
        dXRlYCB3aWxsIHJlbmRlciB0aGUgYHBvc3RzYCB0ZW1wbGF0ZSkuCgogICAg
        WW91IGNhbiByZW5kZXIgYSBkaWZmZXJlbnQgdGVtcGxhdGUgYnkgdXNpbmcg
        dGhlIGByZW5kZXIoKWAgbWV0aG9kIGluIHRoZQogICAgcm91dGUncyBgcmVu
        ZGVyVGVtcGxhdGVgIGhvb2suIFRoZSBmb2xsb3dpbmcgd2lsbCByZW5kZXIg
        dGhlIGBmYXZvcml0ZVBvc3RgCiAgICB0ZW1wbGF0ZSBpbnRvIHRoZSBgb3V0
        bGV0YC4KCiAgICBgYGAgamF2YXNjcmlwdAogICAgQXBwLlBvc3RzUm91dGUg
        PSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICByZW5kZXJUZW1wbGF0ZTog
        ZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZW5kZXIoJ2Zhdm9yaXRlUG9z
        dCcpOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFlvdSBjYW4gY3Jl
        YXRlIGN1c3RvbSBuYW1lZCBvdXRsZXRzIGZvciBtb3JlIGNvbnRyb2wuCgog
        ICAgYGBgIGhhbmRsZWJhcnMKICAgIHt7b3V0bGV0ICdmYXZvcml0ZVBvc3Qn
        fX0KICAgIHt7b3V0bGV0ICdwb3N0cyd9fQogICAgYGBgCgogICAgVGhlbiB5
        b3UgY2FuIGRlZmluZSB3aGF0IHRlbXBsYXRlIGlzIHJlbmRlcmVkIGludG8g
        ZWFjaCBvdXRsZXQgaW4geW91cgogICAgcm91dGUuCgoKICAgIGBgYCBqYXZh
        c2NyaXB0CiAgICBBcHAuUG9zdHNSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVu
        ZCh7CiAgICAgIHJlbmRlclRlbXBsYXRlOiBmdW5jdGlvbigpIHsKICAgICAg
        ICB0aGlzLnJlbmRlcignZmF2b3JpdGVQb3N0JywgeyBvdXRsZXQ6ICdmYXZv
        cml0ZVBvc3QnIH0pOwogICAgICAgIHRoaXMucmVuZGVyKCdwb3N0cycsIHsg
        b3V0bGV0OiAncG9zdHMnIH0pOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoK
        ICAgIFlvdSBjYW4gc3BlY2lmeSB0aGUgdmlldyBjbGFzcyB0aGF0IHRoZSBv
        dXRsZXQgdXNlcyB0byBjb250YWluIGFuZCBtYW5hZ2UgdGhlCiAgICB0ZW1w
        bGF0ZXMgcmVuZGVyZWQgaW50byBpdC4KCiAgICBgYGAgaGFuZGxlYmFycwog
        ICAge3tvdXRsZXQgdmlld0NsYXNzPUFwcC5TZWN0aW9uQ29udGFpbmVyfX0K
        ICAgIGBgYAoKICAgIGBgYCBqYXZhc2NyaXB0CiAgICBBcHAuU2VjdGlvbkNv
        bnRhaW5lciA9IEVtYmVyLkNvbnRhaW5lclZpZXcuZXh0ZW5kKHsKICAgICAg
        dGFnTmFtZTogJ3NlY3Rpb24nLAogICAgICBjbGFzc05hbWVzOiBbJ3NwZWNp
        YWwnXQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIG91dGxldAogICAg
        QGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICAgIEBwYXJhbSB7U3Ry
        aW5nfSBwcm9wZXJ0eSB0aGUgcHJvcGVydHkgb24gdGhlIGNvbnRyb2xsZXIK
        ICAgICAgdGhhdCBob2xkcyB0aGUgdmlldyBmb3IgdGhpcyBvdXRsZXQKICAg
        IEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKICAqLwogIEhhbmRsZWJh
        cnMucmVnaXN0ZXJIZWxwZXIoJ291dGxldCcsIGZ1bmN0aW9uKHByb3BlcnR5
        LCBvcHRpb25zKSB7CiAgICB2YXIgb3V0bGV0U291cmNlLCBvdXRsZXRDb250
        YWluZXJDbGFzczsKCiAgICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuZGF0
        YSAmJiBwcm9wZXJ0eS5kYXRhLmlzUmVuZGVyRGF0YSkgewogICAgICBvcHRp
        b25zID0gcHJvcGVydHk7CiAgICAgIHByb3BlcnR5ID0gJ21haW4nOwogICAg
        fQoKICAgIG91dGxldFNvdXJjZSA9IG9wdGlvbnMuZGF0YS52aWV3OwogICAg
        d2hpbGUgKCFvdXRsZXRTb3VyY2UuZ2V0KCd0ZW1wbGF0ZS5pc1RvcCcpKSB7
        CiAgICAgIG91dGxldFNvdXJjZSA9IG91dGxldFNvdXJjZS5nZXQoJ19wYXJl
        bnRWaWV3Jyk7CiAgICB9CgogICAgb3V0bGV0Q29udGFpbmVyQ2xhc3MgPSBv
        cHRpb25zLmhhc2gudmlld0NsYXNzIHx8IEhhbmRsZWJhcnMuT3V0bGV0Vmll
        dzsKCiAgICBvcHRpb25zLmRhdGEudmlldy5zZXQoJ291dGxldFNvdXJjZScs
        IG91dGxldFNvdXJjZSk7CiAgICBvcHRpb25zLmhhc2guY3VycmVudFZpZXdC
        aW5kaW5nID0gJ192aWV3Lm91dGxldFNvdXJjZS5fb3V0bGV0cy4nICsgcHJv
        cGVydHk7CgogICAgcmV0dXJuIEhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNh
        bGwodGhpcywgb3V0bGV0Q29udGFpbmVyQ2xhc3MsIG9wdGlvbnMpOwogIH0p
        Owp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CkVtYmVyLm9uTG9hZCgnRW1iZXIu
        SGFuZGxlYmFycycsIGZ1bmN0aW9uKEhhbmRsZWJhcnMpIHsKCiAgLyoqCiAg
        ICBDYWxsaW5nIGBge3tyZW5kZXJ9fWBgIGZyb20gd2l0aGluIGEgdGVtcGxh
        dGUgd2lsbCBpbnNlcnQgYW5vdGhlcgogICAgdGVtcGxhdGUgdGhhdCBtYXRj
        aGVzIHRoZSBwcm92aWRlZCBuYW1lLiBUaGUgaW5zZXJ0ZWQgdGVtcGxhdGUg
        d2lsbAogICAgYWNjZXNzIGl0cyBwcm9wZXJ0aWVzIG9uIGl0cyBvd24gY29u
        dHJvbGxlciAocmF0aGVyIHRoYW4gdGhlIGNvbnRyb2xsZXIKICAgIG9mIHRo
        ZSBwYXJlbnQgdGVtcGxhdGUpLgoKICAgIElmIGEgdmlldyBjbGFzcyB3aXRo
        IHRoZSBzYW1lIG5hbWUgZXhpc3RzLCB0aGUgdmlldyBjbGFzcyBhbHNvIHdp
        bGwgYmUgdXNlZC4KCiAgICBOb3RlOiBBIGdpdmVuIGNvbnRyb2xsZXIgbWF5
        IG9ubHkgYmUgdXNlZCAqb25jZSogaW4geW91ciBhcHAgaW4gdGhpcyBtYW5u
        ZXIuCiAgICBBIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgY29udHJvbGxl
        ciB3aWxsIGJlIGNyZWF0ZWQgZm9yIHlvdS4KCiAgICBFeGFtcGxlOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIEFwcC5OYXZpZ2F0aW9uQ29udHJvbGxlciA9
        IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgICAgd2hvOiAid29ybGQi
        CiAgICB9KTsKICAgIGBgYAoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDwhLS0g
        bmF2aWdhdGlvbi5oYnMgLS0+CiAgICBIZWxsbywge3t3aG99fS4KICAgIGBg
        YAoKICAgIGBgYGhhbmRlbGJhcnMKICAgIDwhLS0gYXBwbGljYXRpb24uaGJz
        IC0tPgogICAgPGgxPk15IGdyZWF0IGFwcDwvaDE+CiAgICB7e3JlbmRlciBu
        YXZpZ2F0aW9ufX0KICAgIGBgYAoKICAgIGBgYGh0bWwKICAgIDxoMT5NeSBn
        cmVhdCBhcHA8L2gxPgogICAgPGRpdiBjbGFzcz0nZW1iZXItdmlldyc+CiAg
        ICAgIEhlbGxvLCB3b3JsZC4KICAgIDwvZGl2PgogICAgYGBgCgogICAgT3B0
        aW9uYWxseSB5b3UgbWF5IHByb3ZpZGUgYSBzZWNvbmQgYXJndW1lbnQ6IGEg
        cHJvcGVydHkgcGF0aAogICAgdGhhdCB3aWxsIGJlIGJvdW5kIHRvIHRoZSBg
        bW9kZWxgIHByb3BlcnR5IG9mIHRoZSBjb250cm9sbGVyLgoKICAgIElmIGEg
        YG1vZGVsYCBwcm9wZXJ0eSBwYXRoIGlzIHNwZWNpZmllZCwgdGhlbiBhIG5l
        dyBpbnN0YW5jZSBvZiB0aGUKICAgIGNvbnRyb2xsZXIgd2lsbCBiZSBjcmVh
        dGVkIGFuZCBge3tyZW5kZXJ9fWAgY2FuIGJlIHVzZWQgbXVsdGlwbGUgdGlt
        ZXMKICAgIHdpdGggdGhlIHNhbWUgbmFtZS4KCiAgIEZvciBleGFtcGxlIGlm
        IHlvdSBoYWQgdGhpcyBgYXV0aG9yYCB0ZW1wbGF0ZS4KCiAgIGBgYGhhbmRs
        ZWJhcnMKPGRpdiBjbGFzcz0iYXV0aG9yIj4KICBXcml0dGVuIGJ5IHt7Zmly
        c3ROYW1lfX0ge3tsYXN0TmFtZX19LgogIFRvdGFsIFBvc3RzOiB7e3Bvc3RD
        b3VudH19CjwvZGl2PgogIGBgYAoKICBZb3UgY291bGQgcmVuZGVyIGl0IGlu
        c2lkZSB0aGUgYHBvc3RgIHRlbXBsYXRlIHVzaW5nIHRoZSBgcmVuZGVyYCBo
        ZWxwZXIuCgogIGBgYGhhbmRsZWJhcnMKPGRpdiBjbGFzcz0icG9zdCI+CiAg
        PGgxPnt7dGl0bGV9fTwvaDE+CiAgPGRpdj57e2JvZHl9fTwvZGl2PgogIHt7
        cmVuZGVyICJhdXRob3IiIGF1dGhvcn19CjwvZGl2PgogICBgYGAKCiAgICBA
        bWV0aG9kIHJlbmRlcgogICAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAgICBAcGFyYW0ge09iamVj
        dD99IGNvbnRleHRTdHJpbmcKICAgIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwog
        ICAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwogICovCiAgRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncmVuZGVyJywgZnVuY3Rpb24o
        bmFtZSwgY29udGV4dFN0cmluZywgb3B0aW9ucykgewogICAgRW1iZXIuYXNz
        ZXJ0KCJZb3UgbXVzdCBwYXNzIGEgdGVtcGxhdGUgdG8gcmVuZGVyIiwgYXJn
        dW1lbnRzLmxlbmd0aCA+PSAyKTsKICAgIHZhciBjb250ZXh0UHJvdmlkZWQg
        PSBhcmd1bWVudHMubGVuZ3RoID09PSAzLAogICAgICAgIGNvbnRhaW5lciwg
        cm91dGVyLCBjb250cm9sbGVyLCB2aWV3LCBjb250ZXh0LCBsb29rdXBPcHRp
        b25zOwoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7CiAgICAg
        IG9wdGlvbnMgPSBjb250ZXh0U3RyaW5nOwogICAgICBjb250ZXh0U3RyaW5n
        ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmICh0eXBlb2YgY29udGV4dFN0
        cmluZyA9PT0gJ3N0cmluZycpIHsKICAgICAgY29udGV4dCA9IEVtYmVyLkhh
        bmRsZWJhcnMuZ2V0KG9wdGlvbnMuY29udGV4dHNbMV0sIGNvbnRleHRTdHJp
        bmcsIG9wdGlvbnMpOwogICAgICBsb29rdXBPcHRpb25zID0geyBzaW5nbGV0
        b246IGZhbHNlIH07CiAgICB9CgogICAgbmFtZSA9IG5hbWUucmVwbGFjZSgv
        XC8vZywgJy4nKTsKICAgIGNvbnRhaW5lciA9IG9wdGlvbnMuZGF0YS5rZXl3
        b3Jkcy5jb250cm9sbGVyLmNvbnRhaW5lcjsKICAgIHJvdXRlciA9IGNvbnRh
        aW5lci5sb29rdXAoJ3JvdXRlcjptYWluJyk7CgogICAgRW1iZXIuYXNzZXJ0
        KCJZb3UgY2FuIG9ubHkgdXNlIHRoZSB7e3JlbmRlcn19IGhlbHBlciBvbmNl
        IHdpdGhvdXQgYSBtb2RlbCBvYmplY3QgYXMgaXRzIHNlY29uZCBhcmd1bWVu
        dCwgYXMgaW4ge3tyZW5kZXIgXCJwb3N0XCIgcG9zdH19LiIsIGNvbnRleHRQ
        cm92aWRlZCB8fCAhcm91dGVyIHx8ICFyb3V0ZXIuX2xvb2t1cEFjdGl2ZVZp
        ZXcobmFtZSkpOwoKICAgIHZpZXcgPSBjb250YWluZXIubG9va3VwKCd2aWV3
        OicgKyBuYW1lKSB8fCBjb250YWluZXIubG9va3VwKCd2aWV3OmRlZmF1bHQn
        KTsKCiAgICB2YXIgY29udHJvbGxlck5hbWUgPSBvcHRpb25zLmhhc2guY29u
        dHJvbGxlcjsKCiAgICAvLyBMb29rIHVwIHRoZSBjb250cm9sbGVyIGJ5IG5h
        bWUsIGlmIHByb3ZpZGVkLgogICAgaWYgKGNvbnRyb2xsZXJOYW1lKSB7CiAg
        ICAgIGNvbnRyb2xsZXIgPSBjb250YWluZXIubG9va3VwKCdjb250cm9sbGVy
        OicgKyBjb250cm9sbGVyTmFtZSwgbG9va3VwT3B0aW9ucyk7CiAgICAgIEVt
        YmVyLmFzc2VydCgiVGhlIGNvbnRyb2xsZXIgbmFtZSB5b3Ugc3VwcGxpZWQg
        JyIgKyBjb250cm9sbGVyTmFtZSArICInIGRpZCBub3QgcmVzb2x2ZSB0byBh
        IGNvbnRyb2xsZXIuIiwgISFjb250cm9sbGVyKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIGNvbnRyb2xsZXIgPSBjb250YWluZXIubG9va3VwKCdjb250cm9sbGVy
        OicgKyBuYW1lLCBsb29rdXBPcHRpb25zKSB8fAogICAgICAgICAgICAgICAg
        ICAgICAgRW1iZXIuZ2VuZXJhdGVDb250cm9sbGVyKGNvbnRhaW5lciwgbmFt
        ZSwgY29udGV4dCk7CiAgICB9CgogICAgaWYgKGNvbnRyb2xsZXIgJiYgY29u
        dGV4dFByb3ZpZGVkKSB7CiAgICAgIGNvbnRyb2xsZXIuc2V0KCdtb2RlbCcs
        IGNvbnRleHQpOwogICAgfQoKICAgIHZhciByb290ID0gb3B0aW9ucy5jb250
        ZXh0c1sxXTsKCiAgICBpZiAocm9vdCkgewogICAgICB2aWV3LnJlZ2lzdGVy
        T2JzZXJ2ZXIocm9vdCwgY29udGV4dFN0cmluZywgZnVuY3Rpb24oKSB7CiAg
        ICAgICAgY29udHJvbGxlci5zZXQoJ21vZGVsJywgRW1iZXIuSGFuZGxlYmFy
        cy5nZXQocm9vdCwgY29udGV4dFN0cmluZywgb3B0aW9ucykpOwogICAgICB9
        KTsKICAgIH0KCiAgICBjb250cm9sbGVyLnNldCgndGFyZ2V0Jywgb3B0aW9u
        cy5kYXRhLmtleXdvcmRzLmNvbnRyb2xsZXIpOwoKICAgIG9wdGlvbnMuaGFz
        aC52aWV3TmFtZSA9IEVtYmVyLlN0cmluZy5jYW1lbGl6ZShuYW1lKTsKICAg
        IG9wdGlvbnMuaGFzaC50ZW1wbGF0ZSA9IGNvbnRhaW5lci5sb29rdXAoJ3Rl
        bXBsYXRlOicgKyBuYW1lKTsKICAgIG9wdGlvbnMuaGFzaC5jb250cm9sbGVy
        ID0gY29udHJvbGxlcjsKCiAgICBpZiAocm91dGVyICYmICFjb250ZXh0KSB7
        CiAgICAgIHJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXcobmFtZSwgdmlldyk7
        CiAgICB9CgogICAgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcuY2Fs
        bCh0aGlzLCB2aWV3LCBvcHRpb25zKTsKICB9KTsKCn0pOwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXJvdXRpbmcKKi8KRW1iZXIub25Mb2FkKCdFbWJlci5IYW5kbGViYXJz
        JywgZnVuY3Rpb24oSGFuZGxlYmFycykgewoKICB2YXIgcmVzb2x2ZVBhcmFt
        cyA9IEVtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zLAogICAgICBpc1NpbXBs
        ZUNsaWNrID0gRW1iZXIuVmlld1V0aWxzLmlzU2ltcGxlQ2xpY2s7CgogIHZh
        ciBFbWJlckhhbmRsZWJhcnMgPSBFbWJlci5IYW5kbGViYXJzLAogICAgICBo
        YW5kbGViYXJzR2V0ID0gRW1iZXJIYW5kbGViYXJzLmdldCwKICAgICAgU2Fm
        ZVN0cmluZyA9IEVtYmVySGFuZGxlYmFycy5TYWZlU3RyaW5nLAogICAgICBm
        b3JFYWNoID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaCwKICAgICAg
        Z2V0ID0gRW1iZXIuZ2V0LAogICAgICBhX3NsaWNlID0gQXJyYXkucHJvdG90
        eXBlLnNsaWNlOwoKICBmdW5jdGlvbiBhcmdzKG9wdGlvbnMsIGFjdGlvbk5h
        bWUpIHsKICAgIHZhciByZXQgPSBbXTsKICAgIGlmIChhY3Rpb25OYW1lKSB7
        IHJldC5wdXNoKGFjdGlvbk5hbWUpOyB9CgogICAgdmFyIHR5cGVzID0gb3B0
        aW9ucy5vcHRpb25zLnR5cGVzLnNsaWNlKDEpLAogICAgICAgIGRhdGEgPSBv
        cHRpb25zLm9wdGlvbnMuZGF0YTsKCiAgICByZXR1cm4gcmV0LmNvbmNhdChy
        ZXNvbHZlUGFyYW1zKG9wdGlvbnMuY29udGV4dCwgb3B0aW9ucy5wYXJhbXMs
        IHsgdHlwZXM6IHR5cGVzLCBkYXRhOiBkYXRhIH0pKTsKICB9CgogIHZhciBB
        Y3Rpb25IZWxwZXIgPSBFbWJlckhhbmRsZWJhcnMuQWN0aW9uSGVscGVyID0g
        ewogICAgcmVnaXN0ZXJlZEFjdGlvbnM6IHt9CiAgfTsKCiAgdmFyIGtleXMg
        PSBbImFsdCIsICJzaGlmdCIsICJtZXRhIiwgImN0cmwiXTsKCiAgdmFyIGlz
        QWxsb3dlZENsaWNrID0gZnVuY3Rpb24oZXZlbnQsIGFsbG93ZWRLZXlzKSB7
        CiAgICBpZiAodHlwZW9mIGFsbG93ZWRLZXlzID09PSAidW5kZWZpbmVkIikg
        ewogICAgICByZXR1cm4gaXNTaW1wbGVDbGljayhldmVudCk7CiAgICB9Cgog
        ICAgaWYgKGFsbG93ZWRLZXlzLmluZGV4T2YoImFueSIpID49IDApIHsKICAg
        ICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgdmFyIGFsbG93ZWQgPSB0cnVl
        OwoKICAgIGZvckVhY2guY2FsbChrZXlzLCBmdW5jdGlvbihrZXkpIHsKICAg
        ICAgaWYgKGV2ZW50W2tleSArICJLZXkiXSAmJiBhbGxvd2VkS2V5cy5pbmRl
        eE9mKGtleSkgPT09IC0xKSB7CiAgICAgICAgYWxsb3dlZCA9IGZhbHNlOwog
        ICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gYWxsb3dlZDsKICB9OwoKICBB
        Y3Rpb25IZWxwZXIucmVnaXN0ZXJBY3Rpb24gPSBmdW5jdGlvbihhY3Rpb25O
        YW1lLCBvcHRpb25zLCBhbGxvd2VkS2V5cykgewogICAgdmFyIGFjdGlvbklk
        ID0gKCsrRW1iZXIudXVpZCkudG9TdHJpbmcoKTsKCiAgICBBY3Rpb25IZWxw
        ZXIucmVnaXN0ZXJlZEFjdGlvbnNbYWN0aW9uSWRdID0gewogICAgICBldmVu
        dE5hbWU6IG9wdGlvbnMuZXZlbnROYW1lLAogICAgICBoYW5kbGVyOiBmdW5j
        dGlvbihldmVudCkgewogICAgICAgIGlmICghaXNBbGxvd2VkQ2xpY2soZXZl
        bnQsIGFsbG93ZWRLZXlzKSkgeyByZXR1cm4gdHJ1ZTsgfQoKICAgICAgICBl
        dmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBpZiAob3B0aW9ucy5i
        dWJibGVzID09PSBmYWxzZSkgewogICAgICAgICAgZXZlbnQuc3RvcFByb3Bh
        Z2F0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdGFyZ2V0ID0gb3B0
        aW9ucy50YXJnZXQ7CgogICAgICAgIGlmICh0YXJnZXQudGFyZ2V0KSB7CiAg
        ICAgICAgICB0YXJnZXQgPSBoYW5kbGViYXJzR2V0KHRhcmdldC5yb290LCB0
        YXJnZXQudGFyZ2V0LCB0YXJnZXQub3B0aW9ucyk7CiAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5yb290OwogICAgICAgIH0K
        CiAgICAgICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYg
        KHRhcmdldC5zZW5kKSB7CiAgICAgICAgICAgIHRhcmdldC5zZW5kLmFwcGx5
        KHRhcmdldCwgYXJncyhvcHRpb25zLnBhcmFtZXRlcnMsIGFjdGlvbk5hbWUp
        KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEVtYmVyLmFzc2Vy
        dCgiVGhlIGFjdGlvbiAnIiArIGFjdGlvbk5hbWUgKyAiJyBkaWQgbm90IGV4
        aXN0IG9uICIgKyB0YXJnZXQsIHR5cGVvZiB0YXJnZXRbYWN0aW9uTmFtZV0g
        PT09ICdmdW5jdGlvbicpOwogICAgICAgICAgICB0YXJnZXRbYWN0aW9uTmFt
        ZV0uYXBwbHkodGFyZ2V0LCBhcmdzKG9wdGlvbnMucGFyYW1ldGVycykpOwog
        ICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9OwoKICAgIG9w
        dGlvbnMudmlldy5vbignd2lsbENsZWFyUmVuZGVyJywgZnVuY3Rpb24oKSB7
        CiAgICAgIGRlbGV0ZSBBY3Rpb25IZWxwZXIucmVnaXN0ZXJlZEFjdGlvbnNb
        YWN0aW9uSWRdOwogICAgfSk7CgogICAgcmV0dXJuIGFjdGlvbklkOwogIH07
        CgogIC8qKgogICAgVGhlIGB7e2FjdGlvbn19YCBoZWxwZXIgcmVnaXN0ZXJz
        IGFuIEhUTUwgZWxlbWVudCB3aXRoaW4gYSB0ZW1wbGF0ZSBmb3IgRE9NCiAg
        ICBldmVudCBoYW5kbGluZyBhbmQgZm9yd2FyZHMgdGhhdCBpbnRlcmFjdGlv
        biB0byB0aGUgdGVtcGxhdGVzJ3MgY29udHJvbGxlcgogICAgb3Igc3VwcGxp
        ZWQgYHRhcmdldGAgb3B0aW9uIChzZWUgJ1NwZWNpZnlpbmcgYSBUYXJnZXQn
        KS4KCiAgICBJZiB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBpbXBsZW1lbnQg
        dGhlIGV2ZW50LCB0aGUgZXZlbnQgaXMgc2VudAogICAgdG8gdGhlIGN1cnJl
        bnQgcm91dGUsIGFuZCBpdCBidWJibGVzIHVwIHRoZSByb3V0ZSBoaWVyYXJj
        aHkgZnJvbSB0aGVyZS4KCiAgICBVc2VyIGludGVyYWN0aW9uIHdpdGggdGhh
        dCBlbGVtZW50IHdpbGwgaW52b2tlIHRoZSBzdXBwbGllZCBhY3Rpb24gbmFt
        ZSBvbgogICAgdGhlIGFwcHJvcHJpYXRlIHRhcmdldC4KCiAgICBHaXZlbiB0
        aGUgZm9sbG93aW5nIGFwcGxpY2F0aW9uIEhhbmRsZWJhcnMgdGVtcGxhdGUg
        b24gdGhlIHBhZ2UKCiAgICBgYGBoYW5kbGViYXJzCiAgICA8ZGl2IHt7YWN0
        aW9uICdhbkFjdGlvbk5hbWUnfX0+CiAgICAgIGNsaWNrIG1lCiAgICA8L2Rp
        dj4KICAgIGBgYAoKICAgIEFuZCBhcHBsaWNhdGlvbiBjb2RlCgogICAgYGBg
        amF2YXNjcmlwdAogICAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVt
        YmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAg
        ICAgIGFuQWN0aW9uTmFtZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAKICAg
        ICAgICB9ICAKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBXaWxsIHJl
        c3VsdCBpbiB0aGUgZm9sbG93aW5nIHJlbmRlcmVkIEhUTUwKCiAgICBgYGBo
        dG1sCiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij4KICAgICAgPGRpdiBk
        YXRhLWVtYmVyLWFjdGlvbj0iMSI+CiAgICAgICAgY2xpY2sgbWUKICAgICAg
        PC9kaXY+CiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIENsaWNraW5nICJjbGlj
        ayBtZSIgd2lsbCB0cmlnZ2VyIHRoZSBgYW5BY3Rpb25OYW1lYCBhY3Rpb24g
        b2YgdGhlCiAgICBgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlcmAuIEluIHRo
        aXMgY2FzZSwgbm8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHdpbGwgYmUgcGFz
        c2VkLgoKICAgIElmIHlvdSBwcm92aWRlIGFkZGl0aW9uYWwgcGFyYW1ldGVy
        cyB0byB0aGUgaGVscGVyOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDxidXR0
        b24ge3thY3Rpb24gJ2VkaXQnIHBvc3R9fT5FZGl0PC9idXR0b24+CiAgICBg
        YGAKCiAgICBUaG9zZSBwYXJhbWV0ZXJzIHdpbGwgYmUgcGFzc2VkIGFsb25n
        IGFzIGFyZ3VtZW50cyB0byB0aGUgSmF2YVNjcmlwdAogICAgZnVuY3Rpb24g
        aW1wbGVtZW50aW5nIHRoZSBhY3Rpb24uCgogICAgIyMjIEV2ZW50IFByb3Bh
        Z2F0aW9uCgogICAgRXZlbnRzIHRyaWdnZXJlZCB0aHJvdWdoIHRoZSBhY3Rp
        b24gaGVscGVyIHdpbGwgYXV0b21hdGljYWxseSBoYXZlCiAgICBgLnByZXZl
        bnREZWZhdWx0KClgIGNhbGxlZCBvbiB0aGVtLiBZb3UgZG8gbm90IG5lZWQg
        dG8gZG8gc28gaW4geW91ciBldmVudAogICAgaGFuZGxlcnMuCgogICAgVG8g
        YWxzbyBkaXNhYmxlIGJ1YmJsaW5nLCBwYXNzIGBidWJibGVzPWZhbHNlYCB0
        byB0aGUgaGVscGVyOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDxidXR0b24g
        e3thY3Rpb24gJ2VkaXQnIHBvc3QgYnViYmxlcz1mYWxzZX19PkVkaXQ8L2J1
        dHRvbj4KICAgIGBgYAoKICAgIElmIHlvdSBuZWVkIHRoZSBkZWZhdWx0IGhh
        bmRsZXIgdG8gdHJpZ2dlciB5b3Ugc2hvdWxkIGVpdGhlciByZWdpc3RlciB5
        b3VyCiAgICBvd24gZXZlbnQgaGFuZGxlciwgb3IgdXNlIGV2ZW50IG1ldGhv
        ZHMgb24geW91ciB2aWV3IGNsYXNzLiBTZWUgW0VtYmVyLlZpZXddKC9hcGkv
        Y2xhc3Nlcy9FbWJlci5WaWV3Lmh0bWwpCiAgICAnUmVzcG9uZGluZyB0byBC
        cm93c2VyIEV2ZW50cycgZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICAgIyMj
        IFNwZWNpZnlpbmcgRE9NIGV2ZW50IHR5cGUKCiAgICBCeSBkZWZhdWx0IHRo
        ZSBge3thY3Rpb259fWAgaGVscGVyIHJlZ2lzdGVycyBmb3IgRE9NIGBjbGlj
        a2AgZXZlbnRzLiBZb3UgY2FuCiAgICBzdXBwbHkgYW4gYG9uYCBvcHRpb24g
        dG8gdGhlIGhlbHBlciB0byBzcGVjaWZ5IGEgZGlmZmVyZW50IERPTSBldmVu
        dCBuYW1lOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDxkaXYge3thY3Rpb24g
        ImFuQWN0aW9uTmFtZSIgb249ImRvdWJsZUNsaWNrIn19PgogICAgICBjbGlj
        ayBtZQogICAgPC9kaXY+CiAgICBgYGAKCiAgICBTZWUgYEVtYmVyLlZpZXdg
        ICdSZXNwb25kaW5nIHRvIEJyb3dzZXIgRXZlbnRzJyBmb3IgYSBsaXN0IG9m
        CiAgICBhY2NlcHRhYmxlIERPTSBldmVudCBuYW1lcy4KCiAgICBOT1RFOiBC
        ZWNhdXNlIGB7e2FjdGlvbn19YCBkZXBlbmRzIG9uIEVtYmVyJ3MgZXZlbnQg
        ZGlzcGF0Y2ggc3lzdGVtIGl0IHdpbGwKICAgIG9ubHkgZnVuY3Rpb24gaWYg
        YW4gYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgaW5zdGFuY2UgaXMgYXZhaWxh
        YmxlLiBBbgogICAgYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgaW5zdGFuY2Ug
        d2lsbCBiZSBjcmVhdGVkIHdoZW4gYSBuZXcgYEVtYmVyLkFwcGxpY2F0aW9u
        YAogICAgaXMgY3JlYXRlZC4gSGF2aW5nIGFuIGluc3RhbmNlIG9mIGBFbWJl
        ci5BcHBsaWNhdGlvbmAgd2lsbCBzYXRpc2Z5IHRoaXMKICAgIHJlcXVpcmVt
        ZW50LgoKICAgICMjIyBTcGVjaWZ5aW5nIHdoaXRlbGlzdGVkIG1vZGlmaWVy
        IGtleXMKCiAgICBCeSBkZWZhdWx0IHRoZSBge3thY3Rpb259fWAgaGVscGVy
        IHdpbGwgaWdub3JlIGNsaWNrIGV2ZW50IHdpdGggcHJlc3NlZCBtb2RpZmll
        cgogICAga2V5cy4gWW91IGNhbiBzdXBwbHkgYW4gYGFsbG93ZWRLZXlzYCBv
        cHRpb24gdG8gc3BlY2lmeSB3aGljaCBrZXlzIHNob3VsZCBub3QgYmUgaWdu
        b3JlZC4KCiAgICBgYGBoYW5kbGViYXJzCiAgICA8ZGl2IHt7YWN0aW9uICJh
        bkFjdGlvbk5hbWUiIGFsbG93ZWRLZXlzPSJhbHQifX0+CiAgICAgIGNsaWNr
        IG1lCiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIFRoaXMgd2F5IHRoZSBge3th
        Y3Rpb259fWAgd2lsbCBmaXJlIHdoZW4gY2xpY2tpbmcgd2l0aCB0aGUgYWx0
        IGtleSBwcmVzc2VkIGRvd24uCgogICAgQWx0ZXJuYXRpdmVseSwgc3VwcGx5
        ICJhbnkiIHRvIHRoZSBgYWxsb3dlZEtleXNgIG9wdGlvbiB0byBhY2NlcHQg
        YW55IGNvbWJpbmF0aW9uIG9mIG1vZGlmaWVyIGtleXMuCgogICAgYGBgaGFu
        ZGxlYmFycwogICAgPGRpdiB7e2FjdGlvbiAiYW5BY3Rpb25OYW1lIiBhbGxv
        d2VkS2V5cz0iYW55In19PgogICAgICBjbGljayBtZSB3aXRoIGFueSBrZXkg
        cHJlc3NlZAogICAgPC9kaXY+CiAgICBgYGAKCiAgICAjIyMgU3BlY2lmeWlu
        ZyBhIFRhcmdldAoKICAgIFRoZXJlIGFyZSBzZXZlcmFsIHBvc3NpYmxlIHRh
        cmdldCBvYmplY3RzIGZvciBge3thY3Rpb259fWAgaGVscGVyczoKCiAgICBJ
        biBhIHR5cGljYWwgRW1iZXIgYXBwbGljYXRpb24sIHdoZXJlIHZpZXdzIGFy
        ZSBtYW5hZ2VkIHRocm91Z2ggdXNlIG9mIHRoZQogICAgYHt7b3V0bGV0fX1g
        IGhlbHBlciwgYWN0aW9ucyB3aWxsIGJ1YmJsZSB0byB0aGUgY3VycmVudCBj
        b250cm9sbGVyLCB0aGVuCiAgICB0byB0aGUgY3VycmVudCByb3V0ZSwgYW5k
        IHRoZW4gdXAgdGhlIHJvdXRlIGhpZXJhcmNoeS4KCiAgICBBbHRlcm5hdGl2
        ZWx5LCBhIGB0YXJnZXRgIG9wdGlvbiBjYW4gYmUgcHJvdmlkZWQgdG8gdGhl
        IGhlbHBlciB0byBjaGFuZ2UKICAgIHdoaWNoIG9iamVjdCB3aWxsIHJlY2Vp
        dmUgdGhlIG1ldGhvZCBjYWxsLiBUaGlzIG9wdGlvbiBtdXN0IGJlIGEgcGF0
        aAogICAgdG8gYW4gb2JqZWN0LCBhY2Nlc3NpYmxlIGluIHRoZSBjdXJyZW50
        IGNvbnRleHQ6CgogICAgYGBgaGFuZGxlYmFycwogICAge3shIHRoZSBhcHBs
        aWNhdGlvbiB0ZW1wbGF0ZSB9fQogICAgPGRpdiB7e2FjdGlvbiAiYW5BY3Rp
        b25OYW1lIiB0YXJnZXQ9dmlld319PgogICAgICBjbGljayBtZQogICAgPC9k
        aXY+CiAgICBgYGAKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGlj
        YXRpb25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgICBhY3Rpb25z
        OiB7CiAgICAgICAgYW5BY3Rpb25OYW1lOiBmdW5jdGlvbigpe30KICAgICAg
        fQogICAgfSk7CgogICAgYGBgCgogICAgIyMjIEFkZGl0aW9uYWwgUGFyYW1l
        dGVycwoKICAgIFlvdSBtYXkgc3BlY2lmeSBhZGRpdGlvbmFsIHBhcmFtZXRl
        cnMgdG8gdGhlIGB7e2FjdGlvbn19YCBoZWxwZXIuIFRoZXNlCiAgICBwYXJh
        bWV0ZXJzIGFyZSBwYXNzZWQgYWxvbmcgYXMgdGhlIGFyZ3VtZW50cyB0byB0
        aGUgSmF2YVNjcmlwdCBmdW5jdGlvbgogICAgaW1wbGVtZW50aW5nIHRoZSBh
        Y3Rpb24uCgogICAgYGBgaGFuZGxlYmFycwogICAge3sjZWFjaCBwZXJzb24g
        aW4gcGVvcGxlfX0KICAgICAgPGRpdiB7e2FjdGlvbiAiZWRpdCIgcGVyc29u
        fX0+CiAgICAgICAgY2xpY2sgbWUKICAgICAgPC9kaXY+CiAgICB7ey9lYWNo
        fX0KICAgIGBgYAoKICAgIENsaWNraW5nICJjbGljayBtZSIgd2lsbCB0cmln
        Z2VyIHRoZSBgZWRpdGAgbWV0aG9kIG9uIHRoZSBjdXJyZW50IGNvbnRyb2xs
        ZXIKICAgIHdpdGggdGhlIHZhbHVlIG9mIGBwZXJzb25gIGFzIGEgcGFyYW1l
        dGVyLgoKICAgIEBtZXRob2QgYWN0aW9uCiAgICBAZm9yIEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycwogICAgQHBhcmFtIHtTdHJpbmd9IGFjdGlvbk5hbWUK
        ICAgIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAgICBAcGFyYW0ge0hh
        c2h9IG9wdGlvbnMKICAqLwogIEVtYmVySGFuZGxlYmFycy5yZWdpc3Rlckhl
        bHBlcignYWN0aW9uJywgZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAgdmFy
        IG9wdGlvbnMgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLAog
        ICAgICAgIGNvbnRleHRzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMSwg
        LTEpOwoKICAgIHZhciBoYXNoID0gb3B0aW9ucy5oYXNoLAogICAgICAgIGNv
        bnRyb2xsZXI7CgogICAgLy8gY3JlYXRlIGEgaGFzaCB0byBwYXNzIGFsb25n
        IHRvIHJlZ2lzdGVyQWN0aW9uCiAgICB2YXIgYWN0aW9uID0gewogICAgICBl
        dmVudE5hbWU6IGhhc2gub24gfHwgImNsaWNrIgogICAgfTsKCiAgICBhY3Rp
        b24ucGFyYW1ldGVycyA9IHsKICAgICAgY29udGV4dDogdGhpcywKICAgICAg
        b3B0aW9uczogb3B0aW9ucywKICAgICAgcGFyYW1zOiBjb250ZXh0cwogICAg
        fTsKCiAgICBhY3Rpb24udmlldyA9IG9wdGlvbnMuZGF0YS52aWV3OwoKICAg
        IHZhciByb290LCB0YXJnZXQ7CgogICAgaWYgKGhhc2gudGFyZ2V0KSB7CiAg
        ICAgIHJvb3QgPSB0aGlzOwogICAgICB0YXJnZXQgPSBoYXNoLnRhcmdldDsK
        ICAgIH0gZWxzZSBpZiAoY29udHJvbGxlciA9IG9wdGlvbnMuZGF0YS5rZXl3
        b3Jkcy5jb250cm9sbGVyKSB7CiAgICAgIHJvb3QgPSBjb250cm9sbGVyOwog
        ICAgfQoKICAgIGFjdGlvbi50YXJnZXQgPSB7IHJvb3Q6IHJvb3QsIHRhcmdl
        dDogdGFyZ2V0LCBvcHRpb25zOiBvcHRpb25zIH07CiAgICBhY3Rpb24uYnVi
        YmxlcyA9IGhhc2guYnViYmxlczsKCiAgICB2YXIgYWN0aW9uSWQgPSBBY3Rp
        b25IZWxwZXIucmVnaXN0ZXJBY3Rpb24oYWN0aW9uTmFtZSwgYWN0aW9uLCBo
        YXNoLmFsbG93ZWRLZXlzKTsKICAgIHJldHVybiBuZXcgU2FmZVN0cmluZygn
        ZGF0YS1lbWJlci1hY3Rpb249IicgKyBhY3Rpb25JZCArICciJyk7CiAgfSk7
        Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1y
        b3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5z
        ZXQ7CgpFbWJlci5Db250cm9sbGVyTWl4aW4ucmVvcGVuKHsKICAvKioKICAg
        IFRyYW5zaXRpb24gdGhlIGFwcGxpY2F0aW9uIGludG8gYW5vdGhlciByb3V0
        ZS4gVGhlIHJvdXRlIG1heQogICAgYmUgZWl0aGVyIGEgc2luZ2xlIHJvdXRl
        IG9yIHJvdXRlIHBhdGg6CgogICAgYGBgamF2YXNjcmlwdAogICAgICBhQ29u
        dHJvbGxlci50cmFuc2l0aW9uVG9Sb3V0ZSgnYmxvZ1Bvc3RzJyk7CiAgICAg
        IGFDb250cm9sbGVyLnRyYW5zaXRpb25Ub1JvdXRlKCdibG9nUG9zdHMucmVj
        ZW50RW50cmllcycpOwogICAgYGBgCgogICAgT3B0aW9uYWxseSBzdXBwbHkg
        YSBtb2RlbCBmb3IgdGhlIHJvdXRlIGluIHF1ZXN0aW9uLiBUaGUgbW9kZWwK
        ICAgIHdpbGwgYmUgc2VyaWFsaXplZCBpbnRvIHRoZSBVUkwgdXNpbmcgdGhl
        IGBzZXJpYWxpemVgIGhvb2sgb2YKICAgIHRoZSByb3V0ZToKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICAgIGFDb250cm9sbGVyLnRyYW5zaXRpb25Ub1JvdXRl
        KCdibG9nUG9zdCcsIGFQb3N0KTsKICAgIGBgYAoKICAgIE11bHRpcGxlIG1v
        ZGVscyB3aWxsIGJlIGFwcGxpZWQgbGFzdCB0byBmaXJzdCByZWN1cnNpdmVs
        eSB1cCB0aGUKICAgIHJlc291cmNlIHRyZWUuCgogICAgYGBgamF2YXNjcmlw
        dAoKICAgICAgdGhpcy5yZXNvdXJjZSgnYmxvZ1Bvc3QnLCB7cGF0aDonOmJs
        b2dQb3N0SWQnfSwgZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLnJlc291cmNl
        KCdibG9nQ29tbWVudCcsIHtwYXRoOiAnOmJsb2dDb21tZW50SWQnfSk7CiAg
        ICAgIH0pOwogICAgICAKICAgICAgYUNvbnRyb2xsZXIudHJhbnNpdGlvblRv
        Um91dGUoJ2Jsb2dDb21tZW50JywgYVBvc3QsIGFDb21tZW50KTsKICAgIGBg
        YAoKICAgIFNlZSBhbHNvICdyZXBsYWNlUm91dGUnLgoKICAgIEBwYXJhbSB7
        U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSByb3V0ZQogICAgQHBhcmFt
        IHsuLi5PYmplY3R9IG1vZGVscyB0aGUgbW9kZWwocykgdG8gYmUgdXNlZCB3
        aGlsZSB0cmFuc2l0aW9uaW5nCiAgICB0byB0aGUgcm91dGUuCiAgICBAZm9y
        IEVtYmVyLkNvbnRyb2xsZXJNaXhpbgogICAgQG1ldGhvZCB0cmFuc2l0aW9u
        VG9Sb3V0ZQogICovCiAgdHJhbnNpdGlvblRvUm91dGU6IGZ1bmN0aW9uKCkg
        ewogICAgLy8gdGFyZ2V0IG1heSBiZSBlaXRoZXIgYW5vdGhlciBjb250cm9s
        bGVyIG9yIGEgcm91dGVyCiAgICB2YXIgdGFyZ2V0ID0gZ2V0KHRoaXMsICd0
        YXJnZXQnKSwKICAgICAgICBtZXRob2QgPSB0YXJnZXQudHJhbnNpdGlvblRv
        Um91dGUgfHwgdGFyZ2V0LnRyYW5zaXRpb25UbzsKICAgIHJldHVybiBtZXRo
        b2QuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAg
        QGRlcHJlY2F0ZWQKICAgIEBmb3IgRW1iZXIuQ29udHJvbGxlck1peGluCiAg
        ICBAbWV0aG9kIHRyYW5zaXRpb25UbwogICovCiAgdHJhbnNpdGlvblRvOiBm
        dW5jdGlvbigpIHsKICAgIEVtYmVyLmRlcHJlY2F0ZSgidHJhbnNpdGlvblRv
        IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdHJhbnNpdGlvblRvUm91dGUu
        Iik7CiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG9Sb3V0ZS5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgVHJhbnNpdGlvbiBp
        bnRvIGFub3RoZXIgcm91dGUgd2hpbGUgcmVwbGFjaW5nIHRoZSBjdXJyZW50
        IFVSTCwgaWYgcG9zc2libGUuCiAgICBUaGlzIHdpbGwgcmVwbGFjZSB0aGUg
        Y3VycmVudCBoaXN0b3J5IGVudHJ5IGluc3RlYWQgb2YgYWRkaW5nIGEgbmV3
        IG9uZS4gCiAgICBCZXNpZGUgdGhhdCwgaXQgaXMgaWRlbnRpY2FsIHRvIGB0
        cmFuc2l0aW9uVG9Sb3V0ZWAgaW4gYWxsIG90aGVyIHJlc3BlY3RzLgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgICAgYUNvbnRyb2xsZXIucmVwbGFjZVJvdXRl
        KCdibG9nUG9zdHMnKTsKICAgICAgYUNvbnRyb2xsZXIucmVwbGFjZVJvdXRl
        KCdibG9nUG9zdHMucmVjZW50RW50cmllcycpOwogICAgYGBgCgogICAgT3B0
        aW9uYWxseSBzdXBwbHkgYSBtb2RlbCBmb3IgdGhlIHJvdXRlIGluIHF1ZXN0
        aW9uLiBUaGUgbW9kZWwKICAgIHdpbGwgYmUgc2VyaWFsaXplZCBpbnRvIHRo
        ZSBVUkwgdXNpbmcgdGhlIGBzZXJpYWxpemVgIGhvb2sgb2YKICAgIHRoZSBy
        b3V0ZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICAgIGFDb250cm9sbGVyLnJl
        cGxhY2VSb3V0ZSgnYmxvZ1Bvc3QnLCBhUG9zdCk7CiAgICBgYGAKCiAgICBN
        dWx0aXBsZSBtb2RlbHMgd2lsbCBiZSBhcHBsaWVkIGxhc3QgdG8gZmlyc3Qg
        cmVjdXJzaXZlbHkgdXAgdGhlCiAgICByZXNvdXJjZSB0cmVlLgoKICAgIGBg
        YGphdmFzY3JpcHQKCiAgICAgIHRoaXMucmVzb3VyY2UoJ2Jsb2dQb3N0Jywg
        e3BhdGg6JzpibG9nUG9zdElkJ30sIGZ1bmN0aW9uKCl7CiAgICAgICAgdGhp
        cy5yZXNvdXJjZSgnYmxvZ0NvbW1lbnQnLCB7cGF0aDogJzpibG9nQ29tbWVu
        dElkJ30pOwogICAgICB9KTsKICAgICAgCiAgICAgIGFDb250cm9sbGVyLnJl
        cGxhY2VSb3V0ZSgnYmxvZ0NvbW1lbnQnLCBhUG9zdCwgYUNvbW1lbnQpOwog
        ICAgYGBgCgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2Yg
        dGhlIHJvdXRlCiAgICBAcGFyYW0gey4uLk9iamVjdH0gbW9kZWxzIHRoZSBt
        b2RlbChzKSB0byBiZSB1c2VkIHdoaWxlIHRyYW5zaXRpb25pbmcKICAgIHRv
        IHRoZSByb3V0ZS4KICAgIEBmb3IgRW1iZXIuQ29udHJvbGxlck1peGluCiAg
        ICBAbWV0aG9kIHJlcGxhY2VSb3V0ZQogICovCiAgcmVwbGFjZVJvdXRlOiBm
        dW5jdGlvbigpIHsKICAgIC8vIHRhcmdldCBtYXkgYmUgZWl0aGVyIGFub3Ro
        ZXIgY29udHJvbGxlciBvciBhIHJvdXRlcgogICAgdmFyIHRhcmdldCA9IGdl
        dCh0aGlzLCAndGFyZ2V0JyksCiAgICAgICAgbWV0aG9kID0gdGFyZ2V0LnJl
        cGxhY2VSb3V0ZSB8fCB0YXJnZXQucmVwbGFjZVdpdGg7CiAgICByZXR1cm4g
        bWV0aG9kLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICB9LAoKICAvKioK
        ICAgIEBkZXByZWNhdGVkCiAgICBAZm9yIEVtYmVyLkNvbnRyb2xsZXJNaXhp
        bgogICAgQG1ldGhvZCByZXBsYWNlV2l0aAogICovCiAgcmVwbGFjZVdpdGg6
        IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuZGVwcmVjYXRlKCJyZXBsYWNlV2l0
        aCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHJlcGxhY2VSb3V0ZS4iKTsK
        ICAgIHJldHVybiB0aGlzLnJlcGxhY2VSb3V0ZS5hcHBseSh0aGlzLCBhcmd1
        bWVudHMpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKRW1iZXIuVmll
        dy5yZW9wZW4oewoKICAvKioKICAgIFNldHMgdGhlIHByaXZhdGUgYF9vdXRs
        ZXRzYCBvYmplY3Qgb24gdGhlIHZpZXcuCgogICAgQG1ldGhvZCBpbml0CiAg
        ICovCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICBzZXQodGhpcywgJ19vdXRs
        ZXRzJywge30pOwogICAgdGhpcy5fc3VwZXIoKTsKICB9LAoKICAvKioKICAg
        IE1hbnVhbGx5IGZpbGwgYW55IG9mIGEgdmlldydzIGB7e291dGxldH19YCBh
        cmVhcyB3aXRoIHRoZQogICAgc3VwcGxpZWQgdmlldy4KCiAgICBFeGFtcGxl
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIE15VmlldyA9IEVtYmVyLlZp
        ZXcuZXh0ZW5kKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMu
        Y29tcGlsZSgnQ2hpbGQgdmlldzoge3tvdXRsZXQgIm1haW4ifX0gJykKICAg
        IH0pOwogICAgdmFyIG15VmlldyA9IE15Vmlldy5jcmVhdGUoKTsKICAgIG15
        Vmlldy5hcHBlbmRUbygnYm9keScpOwogICAgLy8gVGhlIGh0bWwgZm9yIG15
        VmlldyBub3cgbG9va3MgbGlrZToKICAgIC8vIDxkaXYgaWQ9ImVtYmVyMjI4
        IiBjbGFzcz0iZW1iZXItdmlldyI+Q2hpbGQgdmlldzogPC9kaXY+CgogICAg
        bXlWaWV3LmNvbm5lY3RPdXRsZXQoJ21haW4nLCBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUo
        JzxoMT5Gb288L2gxPiAnKQogICAgfSkpOwogICAgLy8gVGhlIGh0bWwgZm9y
        IG15VmlldyBub3cgbG9va3MgbGlrZToKICAgIC8vIDxkaXYgaWQ9ImVtYmVy
        MjI4IiBjbGFzcz0iZW1iZXItdmlldyI+Q2hpbGQgdmlldzoKICAgIC8vICAg
        PGRpdiBpZD0iZW1iZXIyMzQiIGNsYXNzPSJlbWJlci12aWV3Ij48aDE+Rm9v
        PC9oMT4gPC9kaXY+CiAgICAvLyA8L2Rpdj4KICAgIGBgYAogICAgQG1ldGhv
        ZCBjb25uZWN0T3V0bGV0CiAgICBAcGFyYW0gIHtTdHJpbmd9IG91dGxldE5h
        bWUgQSB1bmlxdWUgbmFtZSBmb3IgdGhlIG91dGxldAogICAgQHBhcmFtICB7
        T2JqZWN0fSB2aWV3ICAgICAgIEFuIEVtYmVyLlZpZXcKICAgKi8KICBjb25u
        ZWN0T3V0bGV0OiBmdW5jdGlvbihvdXRsZXROYW1lLCB2aWV3KSB7CiAgICBp
        ZiAodGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zKSB7CiAgICAgIGRlbGV0
        ZSB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnNbb3V0bGV0TmFtZV07CiAg
        ICB9CgogICAgaWYgKHRoaXMuX2hhc0VxdWl2YWxlbnRWaWV3KG91dGxldE5h
        bWUsIHZpZXcpKSB7CiAgICAgIHZpZXcuZGVzdHJveSgpOwogICAgICByZXR1
        cm47CiAgICB9CgogICAgdmFyIG91dGxldHMgPSBnZXQodGhpcywgJ19vdXRs
        ZXRzJyksCiAgICAgICAgY29udGFpbmVyID0gZ2V0KHRoaXMsICdjb250YWlu
        ZXInKSwKICAgICAgICByb3V0ZXIgPSBjb250YWluZXIgJiYgY29udGFpbmVy
        Lmxvb2t1cCgncm91dGVyOm1haW4nKSwKICAgICAgICByZW5kZXJlZE5hbWUg
        PSBnZXQodmlldywgJ3JlbmRlcmVkTmFtZScpOwoKICAgIHNldChvdXRsZXRz
        LCBvdXRsZXROYW1lLCB2aWV3KTsKCiAgICBpZiAocm91dGVyICYmIHJlbmRl
        cmVkTmFtZSkgewogICAgICByb3V0ZXIuX2Nvbm5lY3RBY3RpdmVWaWV3KHJl
        bmRlcmVkTmFtZSwgdmlldyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAcHJp
        dmF0ZQoKICAgIERldGVybWluZXMgaWYgdGhlIHZpZXcgaGFzIGFscmVhZHkg
        YmVlbiBjcmVhdGVkIGJ5IGNoZWNraW5nIGlmCiAgICB0aGUgdmlldyBoYXMg
        dGhlIHNhbWUgY29uc3RydWN0b3IsIHRlbXBsYXRlLCBhbmQgY29udGV4dCBh
        cyB0aGUKICAgIHZpZXcgaW4gdGhlIGBfb3V0bGV0c2Agb2JqZWN0LgoKICAg
        IEBtZXRob2QgX2hhc0VxdWl2YWxlbnRWaWV3CiAgICBAcGFyYW0gIHtTdHJp
        bmd9IG91dGxldE5hbWUgVGhlIG5hbWUgb2YgdGhlIG91dGxldCB3ZSBhcmUg
        Y2hlY2tpbmcKICAgIEBwYXJhbSAge09iamVjdH0gdmlldyAgICAgICBBbiBF
        bWJlci5WaWV3CiAgICBAcmV0dXJuIHtCb29sZWFufQogICAqLwogIF9oYXNF
        cXVpdmFsZW50VmlldzogZnVuY3Rpb24ob3V0bGV0TmFtZSwgdmlldykgewog
        ICAgdmFyIGV4aXN0aW5nVmlldyA9IGdldCh0aGlzLCAnX291dGxldHMuJytv
        dXRsZXROYW1lKTsKICAgIHJldHVybiBleGlzdGluZ1ZpZXcgJiYKICAgICAg
        ZXhpc3RpbmdWaWV3LmNvbnN0cnVjdG9yID09PSB2aWV3LmNvbnN0cnVjdG9y
        ICYmCiAgICAgIGV4aXN0aW5nVmlldy5nZXQoJ3RlbXBsYXRlJykgPT09IHZp
        ZXcuZ2V0KCd0ZW1wbGF0ZScpICYmCiAgICAgIGV4aXN0aW5nVmlldy5nZXQo
        J2NvbnRleHQnKSA9PT0gdmlldy5nZXQoJ2NvbnRleHQnKTsKICB9LAoKICAv
        KioKICAgIFJlbW92ZXMgYW4gb3V0bGV0IGZyb20gdGhlIHZpZXcuCgogICAg
        RXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBNeVZpZXcgPSBF
        bWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5k
        bGViYXJzLmNvbXBpbGUoJ0NoaWxkIHZpZXc6IHt7b3V0bGV0ICJtYWluIn19
        ICcpCiAgICB9KTsKICAgIHZhciBteVZpZXcgPSBNeVZpZXcuY3JlYXRlKCk7
        CiAgICBteVZpZXcuYXBwZW5kVG8oJ2JvZHknKTsKICAgIC8vIG15Vmlldydz
        IGh0bWw6CiAgICAvLyA8ZGl2IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVy
        LXZpZXciPkNoaWxkIHZpZXc6IDwvZGl2PgoKICAgIG15Vmlldy5jb25uZWN0
        T3V0bGV0KCdtYWluJywgRW1iZXIuVmlldy5leHRlbmQoewogICAgICB0ZW1w
        bGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCc8aDE+Rm9vPC9oMT4g
        JykKICAgIH0pKTsKICAgIC8vIG15VmlldydzIGh0bWw6CiAgICAvLyA8ZGl2
        IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6
        CiAgICAvLyAgIDxkaXYgaWQ9ImVtYmVyMjM0IiBjbGFzcz0iZW1iZXItdmll
        dyI+PGgxPkZvbzwvaDE+IDwvZGl2PgogICAgLy8gPC9kaXY+CgogICAgbXlW
        aWV3LmRpc2Nvbm5lY3RPdXRsZXQoJ21haW4nKTsKICAgIC8vIG15Vmlldydz
        IGh0bWw6CiAgICAvLyA8ZGl2IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVy
        LXZpZXciPkNoaWxkIHZpZXc6IDwvZGl2PgogICAgYGBgCgogICAgQG1ldGhv
        ZCBkaXNjb25uZWN0T3V0bGV0CiAgICBAcGFyYW0gIHtTdHJpbmd9IG91dGxl
        dE5hbWUgVGhlIG5hbWUgb2YgdGhlIG91dGxldCB0byBiZSByZW1vdmVkCiAg
        ICovCiAgZGlzY29ubmVjdE91dGxldDogZnVuY3Rpb24ob3V0bGV0TmFtZSkg
        ewogICAgaWYgKCF0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnMpIHsKICAg
        ICAgdGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zID0ge307CiAgICB9CiAg
        ICB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnNbb3V0bGV0TmFtZV0gPSB0
        cnVlOwogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ19maW5pc2hEaXNjb25u
        ZWN0aW9ucycpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBHZXRz
        IGFuIG91dGxldCB0aGF0IGlzIHBlbmRpbmcgZGlzY29ubmVjdGlvbiBhbmQg
        dGhlbgogICAgbnVsbGlmeXMgdGhlIG9iamVjdCBvbiB0aGUgYF9vdXRsZXRg
        IG9iamVjdC4KCiAgICBAbWV0aG9kIF9maW5pc2hEaXNjb25uZWN0aW9ucwog
        ICAqLwogIF9maW5pc2hEaXNjb25uZWN0aW9uczogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgb3V0bGV0cyA9IGdldCh0aGlzLCAnX291dGxldHMnKTsKICAgIHZh
        ciBwZW5kaW5nRGlzY29ubmVjdGlvbnMgPSB0aGlzLl9wZW5kaW5nRGlzY29u
        bmVjdGlvbnM7CiAgICB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnMgPSBu
        dWxsOwoKICAgIGZvciAodmFyIG91dGxldE5hbWUgaW4gcGVuZGluZ0Rpc2Nv
        bm5lY3Rpb25zKSB7CiAgICAgIHNldChvdXRsZXRzLCBvdXRsZXROYW1lLCBu
        dWxsKTsKICAgIH0KICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgov
        LyBBZGQgYSBuZXcgbmFtZWQgcXVldWUgYWZ0ZXIgdGhlICdhY3Rpb25zJyBx
        dWV1ZSAod2hlcmUgUlNWUCBwcm9taXNlcwovLyByZXNvbHZlKSwgd2hpY2gg
        aXMgdXNlZCBpbiByb3V0ZXIgdHJhbnNpdGlvbnMgdG8gcHJldmVudCB1bm5l
        Y2Vzc2FyeQovLyBsb2FkaW5nIHN0YXRlIGVudHJ5IGlmIGFsbCBjb250ZXh0
        IHByb21pc2VzIHJlc29sdmUgb24gdGhlIAovLyAnYWN0aW9ucycgcXVldWUg
        Zmlyc3QuCgp2YXIgcXVldWVzID0gRW1iZXIucnVuLnF1ZXVlcywKICAgIGlu
        ZGV4T2YgPSBFbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mOwpxdWV1ZXMu
        c3BsaWNlKGluZGV4T2YuY2FsbChxdWV1ZXMsICdhY3Rpb25zJykgKyAxLCAw
        LCAncm91dGVyVHJhbnNpdGlvbnMnKTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5n
        CiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7Cgov
        KgogIFRoaXMgZmlsZSBpbXBsZW1lbnRzIHRoZSBgbG9jYXRpb25gIEFQSSB1
        c2VkIGJ5IEVtYmVyJ3Mgcm91dGVyLgoKICBUaGF0IEFQSSBpczoKCiAgZ2V0
        VVJMOiByZXR1cm5zIHRoZSBjdXJyZW50IFVSTAogIHNldFVSTChwYXRoKTog
        c2V0cyB0aGUgY3VycmVudCBVUkwKICByZXBsYWNlVVJMKHBhdGgpOiByZXBs
        YWNlIHRoZSBjdXJyZW50IFVSTCAob3B0aW9uYWwpCiAgb25VcGRhdGVVUkwo
        Y2FsbGJhY2spOiB0cmlnZ2VycyB0aGUgY2FsbGJhY2sgd2hlbiB0aGUgVVJM
        IGNoYW5nZXMKICBmb3JtYXRVUkwodXJsKTogZm9ybWF0cyBgdXJsYCB0byBi
        ZSBwbGFjZWQgaW50byBgaHJlZmAgYXR0cmlidXRlCgogIENhbGxpbmcgc2V0
        VVJMIG9yIHJlcGxhY2VVUkwgd2lsbCBub3QgdHJpZ2dlciBvblVwZGF0ZVVS
        TCBjYWxsYmFja3MuCgogIFRPRE86IFRoaXMgc2hvdWxkIHBlcmhhcHMgYmUg
        bW92ZWQgc28gdGhhdCBpdCdzIHZpc2libGUgaW4gdGhlIGRvYyBvdXRwdXQu
        CiovCgovKioKICBFbWJlci5Mb2NhdGlvbiByZXR1cm5zIGFuIGluc3RhbmNl
        IG9mIHRoZSBjb3JyZWN0IGltcGxlbWVudGF0aW9uIG9mCiAgdGhlIGBsb2Nh
        dGlvbmAgQVBJLgoKICBZb3UgY2FuIHBhc3MgaXQgYSBgaW1wbGVtZW50YXRp
        b25gICgnaGFzaCcsICdoaXN0b3J5JywgJ25vbmUnKSB0byBmb3JjZSBhCiAg
        cGFydGljdWxhciBpbXBsZW1lbnRhdGlvbi4KCiAgQGNsYXNzIExvY2F0aW9u
        CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBzdGF0aWMKKi8KRW1iZXIuTG9jYXRp
        b24gPSB7CiAgLyoqCiAgIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhIGFuIGlt
        cGxlbWVudGF0aW9uIG9mIHRoZSBgbG9jYXRpb25gIEFQSS4gUmVxdWlyZXMK
        ICAgYW4gb3B0aW9ucyBvYmplY3Qgd2l0aCBhbiBgaW1wbGVtZW50YXRpb25g
        IHByb3BlcnR5LgoKICAgRXhhbXBsZQoKICAgYGBgamF2YXNjcmlwdAogICB2
        YXIgaGFzaExvY2F0aW9uID0gRW1iZXIuTG9jYXRpb24uY3JlYXRlKHtpbXBs
        ZW1lbnRhdGlvbjogJ2hhc2gnfSk7CiAgIHZhciBoaXN0b3J5TG9jYXRpb24g
        PSBFbWJlci5Mb2NhdGlvbi5jcmVhdGUoe2ltcGxlbWVudGF0aW9uOiAnaGlz
        dG9yeSd9KTsKICAgdmFyIG5vbmVMb2NhdGlvbiA9IEVtYmVyLkxvY2F0aW9u
        LmNyZWF0ZSh7aW1wbGVtZW50YXRpb246ICdub25lJ30pOwogICBgYGAKCiAg
        ICBAbWV0aG9kIGNyZWF0ZQogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMK
        ICAgIEByZXR1cm4ge09iamVjdH0gYW4gaW5zdGFuY2Ugb2YgYW4gaW1wbGVt
        ZW50YXRpb24gb2YgdGhlIGBsb2NhdGlvbmAgQVBJCiAgKi8KICBjcmVhdGU6
        IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIHZhciBpbXBsZW1lbnRhdGlvbiA9
        IG9wdGlvbnMgJiYgb3B0aW9ucy5pbXBsZW1lbnRhdGlvbjsKICAgIEVtYmVy
        LmFzc2VydCgiRW1iZXIuTG9jYXRpb24uY3JlYXRlOiB5b3UgbXVzdCBzcGVj
        aWZ5IGEgJ2ltcGxlbWVudGF0aW9uJyBvcHRpb24iLCAhIWltcGxlbWVudGF0
        aW9uKTsKCiAgICB2YXIgaW1wbGVtZW50YXRpb25DbGFzcyA9IHRoaXMuaW1w
        bGVtZW50YXRpb25zW2ltcGxlbWVudGF0aW9uXTsKICAgIEVtYmVyLmFzc2Vy
        dCgiRW1iZXIuTG9jYXRpb24uY3JlYXRlOiAiICsgaW1wbGVtZW50YXRpb24g
        KyAiIGlzIG5vdCBhIHZhbGlkIGltcGxlbWVudGF0aW9uIiwgISFpbXBsZW1l
        bnRhdGlvbkNsYXNzKTsKCiAgICByZXR1cm4gaW1wbGVtZW50YXRpb25DbGFz
        cy5jcmVhdGUuYXBwbHkoaW1wbGVtZW50YXRpb25DbGFzcywgYXJndW1lbnRz
        KTsKICB9LAoKICAvKioKICAgUmVnaXN0ZXJzIGEgY2xhc3MgdGhhdCBpbXBs
        ZW1lbnRzIHRoZSBgbG9jYXRpb25gIEFQSSB3aXRoIGFuIGltcGxlbWVudGF0
        aW9uCiAgIG5hbWUuIFRoaXMgaW1wbGVtZW50YXRpb24gbmFtZSBjYW4gdGhl
        biBiZSBzcGVjaWZpZWQgYnkgdGhlIGxvY2F0aW9uIHByb3BlcnR5IG9uCiAg
        IHRoZSBhcHBsaWNhdGlvbidzIHJvdXRlciBjbGFzcy4KCiAgIEV4YW1wbGUK
        CiAgIGBgYGphdmFzY3JpcHQKICAgRW1iZXIuTG9jYXRpb24ucmVnaXN0ZXJJ
        bXBsZW1lbnRhdGlvbignaGlzdG9yeScsIEVtYmVyLkhpc3RvcnlMb2NhdGlv
        bik7CgogICBBcHAuUm91dGVyLnJlb3Blbih7CiAgICAgbG9jYXRpb246ICdo
        aXN0b3J5JwogICB9KTsKICAgYGBgCgogICAgQG1ldGhvZCByZWdpc3Rlcklt
        cGxlbWVudGF0aW9uCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZQogICAgQHBh
        cmFtIHtPYmplY3R9IGltcGxlbWVudGF0aW9uIG9mIHRoZSBgbG9jYXRpb25g
        IEFQSQogICovCiAgcmVnaXN0ZXJJbXBsZW1lbnRhdGlvbjogZnVuY3Rpb24o
        bmFtZSwgaW1wbGVtZW50YXRpb24pIHsKICAgIHRoaXMuaW1wbGVtZW50YXRp
        b25zW25hbWVdID0gaW1wbGVtZW50YXRpb247CiAgfSwKCiAgaW1wbGVtZW50
        YXRpb25zOiB7fQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgogIEVtYmVy
        Lk5vbmVMb2NhdGlvbiBkb2VzIG5vdCBpbnRlcmFjdCB3aXRoIHRoZSBicm93
        c2VyLiBJdCBpcyB1c2VmdWwgZm9yCiAgdGVzdGluZywgb3Igd2hlbiB5b3Ug
        bmVlZCB0byBtYW5hZ2Ugc3RhdGUgd2l0aCB5b3VyIFJvdXRlciwgYnV0IHRl
        bXBvcmFyaWx5CiAgZG9uJ3Qgd2FudCBpdCB0byBtdWNrIHdpdGggdGhlIFVS
        TCAoZm9yIGV4YW1wbGUgd2hlbiB5b3UgZW1iZWQgeW91cgogIGFwcGxpY2F0
        aW9uIGluIGEgbGFyZ2VyIHBhZ2UpLgoKICBAY2xhc3MgTm9uZUxvY2F0aW9u
        CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoq
        LwpFbWJlci5Ob25lTG9jYXRpb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICBwYXRoOiAnJywKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFJldHVybnMg
        dGhlIGN1cnJlbnQgcGF0aC4KCiAgICBAbWV0aG9kIGdldFVSTAogICAgQHJl
        dHVybiB7U3RyaW5nfSBwYXRoCiAgKi8KICBnZXRVUkw6IGZ1bmN0aW9uKCkg
        ewogICAgcmV0dXJuIGdldCh0aGlzLCAncGF0aCcpOwogIH0sCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBTZXQgdGhlIHBhdGggYW5kIHJlbWVtYmVycyB3
        aGF0IHdhcyBzZXQuIFVzaW5nIHRoaXMgbWV0aG9kCiAgICB0byBjaGFuZ2Ug
        dGhlIHBhdGggd2lsbCBub3QgaW52b2tlIHRoZSBgdXBkYXRlVVJMYCBjYWxs
        YmFjay4KCiAgICBAbWV0aG9kIHNldFVSTAogICAgQHBhcmFtIHBhdGgge1N0
        cmluZ30KICAqLwogIHNldFVSTDogZnVuY3Rpb24ocGF0aCkgewogICAgc2V0
        KHRoaXMsICdwYXRoJywgcGF0aCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0
        ZQoKICAgIFJlZ2lzdGVyIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVu
        IHRoZSBwYXRoIGNoYW5nZXMuIFRoZXNlCiAgICBjYWxsYmFja3Mgd2lsbCBl
        eGVjdXRlIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyB0aGUgYmFjayBvciBmb3J3
        YXJkCiAgICBidXR0b24sIGJ1dCBub3QgYWZ0ZXIgYHNldFVSTGAgaXMgaW52
        b2tlZC4KCiAgICBAbWV0aG9kIG9uVXBkYXRlVVJMCiAgICBAcGFyYW0gY2Fs
        bGJhY2sge0Z1bmN0aW9ufQogICovCiAgb25VcGRhdGVVUkw6IGZ1bmN0aW9u
        KGNhbGxiYWNrKSB7CiAgICB0aGlzLnVwZGF0ZUNhbGxiYWNrID0gY2FsbGJh
        Y2s7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFNldHMgdGhlIHBh
        dGggYW5kIGNhbGxzIHRoZSBgdXBkYXRlVVJMYCBjYWxsYmFjay4KCiAgICBA
        bWV0aG9kIGhhbmRsZVVSTAogICAgQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlv
        bn0KICAqLwogIGhhbmRsZVVSTDogZnVuY3Rpb24odXJsKSB7CiAgICBzZXQo
        dGhpcywgJ3BhdGgnLCB1cmwpOwogICAgdGhpcy51cGRhdGVDYWxsYmFjayh1
        cmwpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBHaXZlbiBhIFVS
        TCwgZm9ybWF0cyBpdCB0byBiZSBwbGFjZWQgaW50byB0aGUgcGFnZSBhcyBw
        YXJ0CiAgICBvZiBhbiBlbGVtZW50J3MgYGhyZWZgIGF0dHJpYnV0ZS4KCiAg
        ICBUaGlzIGlzIHVzZWQsIGZvciBleGFtcGxlLCB3aGVuIHVzaW5nIHRoZSB7
        e2FjdGlvbn19IGhlbHBlcgogICAgdG8gZ2VuZXJhdGUgYSBVUkwgYmFzZWQg
        b24gYW4gZXZlbnQuCgogICAgQG1ldGhvZCBmb3JtYXRVUkwKICAgIEBwYXJh
        bSB1cmwge1N0cmluZ30KICAgIEByZXR1cm4ge1N0cmluZ30gdXJsCiAgKi8K
        ICBmb3JtYXRVUkw6IGZ1bmN0aW9uKHVybCkgewogICAgLy8gVGhlIHJldHVy
        biB2YWx1ZSBpcyBub3Qgb3Zlcmx5IG1lYW5pbmdmdWwsIGJ1dCB3ZSBkbyBu
        b3Qgd2FudCB0byB0aHJvdwogICAgLy8gZXJyb3JzIHdoZW4gdGVzdCBjb2Rl
        IHJlbmRlcnMgdGVtcGxhdGVzIGNvbnRhaW5pbmcge3thY3Rpb24gaHJlZj10
        cnVlfX0KICAgIC8vIGhlbHBlcnMuCiAgICByZXR1cm4gdXJsOwogIH0KfSk7
        CgpFbWJlci5Mb2NhdGlvbi5yZWdpc3RlckltcGxlbWVudGF0aW9uKCdub25l
        JywgRW1iZXIuTm9uZUxvY2F0aW9uKTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5n
        CiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7Cgov
        KioKICBFbWJlci5IYXNoTG9jYXRpb24gaW1wbGVtZW50cyB0aGUgbG9jYXRp
        b24gQVBJIHVzaW5nIHRoZSBicm93c2VyJ3MKICBoYXNoLiBBdCBwcmVzZW50
        LCBpdCByZWxpZXMgb24gYSBoYXNoY2hhbmdlIGV2ZW50IGV4aXN0aW5nIGlu
        IHRoZQogIGJyb3dzZXIuCgogIEBjbGFzcyBIYXNoTG9jYXRpb24KICBAbmFt
        ZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVy
        Lkhhc2hMb2NhdGlvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewoKICBpbml0
        OiBmdW5jdGlvbigpIHsKICAgIHNldCh0aGlzLCAnbG9jYXRpb24nLCBnZXQo
        dGhpcywgJ2xvY2F0aW9uJykgfHwgd2luZG93LmxvY2F0aW9uKTsKICB9LAoK
        ICAvKioKICAgIEBwcml2YXRlCgogICAgUmV0dXJucyB0aGUgY3VycmVudCBg
        bG9jYXRpb24uaGFzaGAsIG1pbnVzIHRoZSAnIycgYXQgdGhlIGZyb250LgoK
        ICAgIEBtZXRob2QgZ2V0VVJMCiAgKi8KICBnZXRVUkw6IGZ1bmN0aW9uKCkg
        ewogICAgaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicXVlcnktcGFy
        YW1zIikpIHsKICAgICAgLy8gbG9jYXRpb24uaGFzaCBpcyBub3QgdXNlZCBi
        ZWNhdXNlIGl0IGlzIGluY29uc2lzdGVudGx5CiAgICAgIC8vIFVSTC1kZWNv
        ZGVkIGJldHdlZW4gYnJvd3NlcnMuCiAgICAgIHZhciBocmVmID0gZ2V0KHRo
        aXMsICdsb2NhdGlvbicpLmhyZWYsCiAgICAgICAgaGFzaEluZGV4ID0gaHJl
        Zi5pbmRleE9mKCcjJyk7CgogICAgICBpZiAoIGhhc2hJbmRleCA9PT0gLTEg
        KSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9IGVsc2UgewogICAgICAg
        IHJldHVybiBocmVmLnN1YnN0cihoYXNoSW5kZXggKyAxKTsKICAgICAgfQog
        ICAgfQogICAgLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB3aXRob3V0IGZl
        YXR1cmUgZmxhZyBlbmFibGVkCiAgICByZXR1cm4gZ2V0KHRoaXMsICdsb2Nh
        dGlvbicpLmhhc2guc3Vic3RyKDEpOwogIH0sCgogIC8qKgogICAgQHByaXZh
        dGUKCiAgICBTZXQgdGhlIGBsb2NhdGlvbi5oYXNoYCBhbmQgcmVtZW1iZXJz
        IHdoYXQgd2FzIHNldC4gVGhpcyBwcmV2ZW50cwogICAgYG9uVXBkYXRlVVJM
        YCBjYWxsYmFja3MgZnJvbSB0cmlnZ2VyaW5nIHdoZW4gdGhlIGhhc2ggd2Fz
        IHNldCBieQogICAgYEhhc2hMb2NhdGlvbmAuCgogICAgQG1ldGhvZCBzZXRV
        UkwKICAgIEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgKi8KICBzZXRVUkw6IGZ1
        bmN0aW9uKHBhdGgpIHsKICAgIGdldCh0aGlzLCAnbG9jYXRpb24nKS5oYXNo
        ID0gcGF0aDsKICAgIHNldCh0aGlzLCAnbGFzdFNldFVSTCcsIHBhdGgpOwog
        IH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBVc2VzIGxvY2F0aW9uLnJl
        cGxhY2UgdG8gdXBkYXRlIHRoZSB1cmwgd2l0aG91dCBhIHBhZ2UgcmVsb2Fk
        CiAgICBvciBoaXN0b3J5IG1vZGlmaWNhdGlvbi4KCiAgICBAbWV0aG9kIHJl
        cGxhY2VVUkwKICAgIEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgKi8KICByZXBs
        YWNlVVJMOiBmdW5jdGlvbihwYXRoKSB7CiAgICBnZXQodGhpcywgJ2xvY2F0
        aW9uJykucmVwbGFjZSgnIycgKyBwYXRoKTsKICB9LAoKICAvKioKICAgIEBw
        cml2YXRlCgogICAgUmVnaXN0ZXIgYSBjYWxsYmFjayB0byBiZSBpbnZva2Vk
        IHdoZW4gdGhlIGhhc2ggY2hhbmdlcy4gVGhlc2UKICAgIGNhbGxiYWNrcyB3
        aWxsIGV4ZWN1dGUgd2hlbiB0aGUgdXNlciBwcmVzc2VzIHRoZSBiYWNrIG9y
        IGZvcndhcmQKICAgIGJ1dHRvbiwgYnV0IG5vdCBhZnRlciBgc2V0VVJMYCBp
        cyBpbnZva2VkLgoKICAgIEBtZXRob2Qgb25VcGRhdGVVUkwKICAgIEBwYXJh
        bSBjYWxsYmFjayB7RnVuY3Rpb259CiAgKi8KICBvblVwZGF0ZVVSTDogZnVu
        Y3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZh
        ciBndWlkID0gRW1iZXIuZ3VpZEZvcih0aGlzKTsKCiAgICBFbWJlci4kKHdp
        bmRvdykub24oJ2hhc2hjaGFuZ2UuZW1iZXItbG9jYXRpb24tJytndWlkLCBm
        dW5jdGlvbigpIHsKICAgICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewogICAg
        ICAgIHZhciBwYXRoID0gbG9jYXRpb24uaGFzaC5zdWJzdHIoMSk7CiAgICAg
        ICAgaWYgKGdldChzZWxmLCAnbGFzdFNldFVSTCcpID09PSBwYXRoKSB7IHJl
        dHVybjsgfQoKICAgICAgICBzZXQoc2VsZiwgJ2xhc3RTZXRVUkwnLCBudWxs
        KTsKCiAgICAgICAgY2FsbGJhY2socGF0aCk7CiAgICAgIH0pOwogICAgfSk7
        CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIEdpdmVuIGEgVVJMLCBm
        b3JtYXRzIGl0IHRvIGJlIHBsYWNlZCBpbnRvIHRoZSBwYWdlIGFzIHBhcnQK
        ICAgIG9mIGFuIGVsZW1lbnQncyBgaHJlZmAgYXR0cmlidXRlLgoKICAgIFRo
        aXMgaXMgdXNlZCwgZm9yIGV4YW1wbGUsIHdoZW4gdXNpbmcgdGhlIHt7YWN0
        aW9ufX0gaGVscGVyCiAgICB0byBnZW5lcmF0ZSBhIFVSTCBiYXNlZCBvbiBh
        biBldmVudC4KCiAgICBAbWV0aG9kIGZvcm1hdFVSTAogICAgQHBhcmFtIHVy
        bCB7U3RyaW5nfQogICovCiAgZm9ybWF0VVJMOiBmdW5jdGlvbih1cmwpIHsK
        ICAgIHJldHVybiAnIycrdXJsOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUK
        CiAgICBDbGVhbnMgdXAgdGhlIEhhc2hMb2NhdGlvbiBldmVudCBsaXN0ZW5l
        ci4KCiAgICBAbWV0aG9kIHdpbGxEZXN0cm95CiAgKi8KICB3aWxsRGVzdHJv
        eTogZnVuY3Rpb24oKSB7CiAgICB2YXIgZ3VpZCA9IEVtYmVyLmd1aWRGb3Io
        dGhpcyk7CgogICAgRW1iZXIuJCh3aW5kb3cpLm9mZignaGFzaGNoYW5nZS5l
        bWJlci1sb2NhdGlvbi0nK2d1aWQpOwogIH0KfSk7CgpFbWJlci5Mb2NhdGlv
        bi5yZWdpc3RlckltcGxlbWVudGF0aW9uKCdoYXNoJywgRW1iZXIuSGFzaExv
        Y2F0aW9uKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUg
        ZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0g
        RW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBwb3BzdGF0ZUZpcmVk
        ID0gZmFsc2U7CnZhciBzdXBwb3J0c0hpc3RvcnlTdGF0ZSA9IHdpbmRvdy5o
        aXN0b3J5ICYmICdzdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7CgovKioKICBF
        bWJlci5IaXN0b3J5TG9jYXRpb24gaW1wbGVtZW50cyB0aGUgbG9jYXRpb24g
        QVBJIHVzaW5nIHRoZSBicm93c2VyJ3MKICBoaXN0b3J5LnB1c2hTdGF0ZSBB
        UEkuCgogIEBjbGFzcyBIaXN0b3J5TG9jYXRpb24KICBAbmFtZXNwYWNlIEVt
        YmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkhpc3RvcnlM
        b2NhdGlvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewoKICBpbml0OiBmdW5j
        dGlvbigpIHsKICAgIHNldCh0aGlzLCAnbG9jYXRpb24nLCBnZXQodGhpcywg
        J2xvY2F0aW9uJykgfHwgd2luZG93LmxvY2F0aW9uKTsKICAgIHRoaXMuaW5p
        dFN0YXRlKCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFVzZWQg
        dG8gc2V0IHN0YXRlIG9uIGZpcnN0IGNhbGwgdG8gc2V0VVJMCgogICAgQG1l
        dGhvZCBpbml0U3RhdGUKICAqLwogIGluaXRTdGF0ZTogZnVuY3Rpb24oKSB7
        CiAgICBzZXQodGhpcywgJ2hpc3RvcnknLCBnZXQodGhpcywgJ2hpc3Rvcnkn
        KSB8fCB3aW5kb3cuaGlzdG9yeSk7CiAgICB0aGlzLnJlcGxhY2VTdGF0ZSh0
        aGlzLmZvcm1hdFVSTCh0aGlzLmdldFVSTCgpKSk7CiAgfSwKCiAgLyoqCiAg
        ICBXaWxsIGJlIHByZS1wZW5kZWQgdG8gcGF0aCB1cG9uIHN0YXRlIGNoYW5n
        ZQoKICAgIEBwcm9wZXJ0eSByb290VVJMCiAgICBAZGVmYXVsdCAnLycKICAq
        LwogIHJvb3RVUkw6ICcvJywKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFJl
        dHVybnMgdGhlIGN1cnJlbnQgYGxvY2F0aW9uLnBhdGhuYW1lYCB3aXRob3V0
        IHJvb3RVUkwKCiAgICBAbWV0aG9kIGdldFVSTAogICAgQHJldHVybiB1cmwg
        e1N0cmluZ30KICAqLwogIGdldFVSTDogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        cm9vdFVSTCA9IGdldCh0aGlzLCAncm9vdFVSTCcpLAogICAgICAgIGxvY2F0
        aW9uID0gZ2V0KHRoaXMsICdsb2NhdGlvbicpLAogICAgICAgIHBhdGggPSBs
        b2NhdGlvbi5wYXRobmFtZTsKCiAgICByb290VVJMID0gcm9vdFVSTC5yZXBs
        YWNlKC9cLyQvLCAnJyk7CiAgICB2YXIgdXJsID0gcGF0aC5yZXBsYWNlKHJv
        b3RVUkwsICcnKTsKCiAgICBpZiAoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVk
        KCJxdWVyeS1wYXJhbXMiKSkgewogICAgICB2YXIgc2VhcmNoID0gbG9jYXRp
        b24uc2VhcmNoIHx8ICcnOwogICAgICB1cmwgKz0gc2VhcmNoOwogICAgfQoK
        ICAgIHJldHVybiB1cmw7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAg
        IFVzZXMgYGhpc3RvcnkucHVzaFN0YXRlYCB0byB1cGRhdGUgdGhlIHVybCB3
        aXRob3V0IGEgcGFnZSByZWxvYWQuCgogICAgQG1ldGhvZCBzZXRVUkwKICAg
        IEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgKi8KICBzZXRVUkw6IGZ1bmN0aW9u
        KHBhdGgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKTsKICAg
        IHBhdGggPSB0aGlzLmZvcm1hdFVSTChwYXRoKTsKCiAgICBpZiAoc3RhdGUg
        JiYgc3RhdGUucGF0aCAhPT0gcGF0aCkgewogICAgICB0aGlzLnB1c2hTdGF0
        ZShwYXRoKTsKICAgIH0KICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAg
        VXNlcyBgaGlzdG9yeS5yZXBsYWNlU3RhdGVgIHRvIHVwZGF0ZSB0aGUgdXJs
        IHdpdGhvdXQgYSBwYWdlIHJlbG9hZAogICAgb3IgaGlzdG9yeSBtb2RpZmlj
        YXRpb24uCgogICAgQG1ldGhvZCByZXBsYWNlVVJMCiAgICBAcGFyYW0gcGF0
        aCB7U3RyaW5nfQogICovCiAgcmVwbGFjZVVSTDogZnVuY3Rpb24ocGF0aCkg
        ewogICAgdmFyIHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpOwogICAgcGF0aCA9
        IHRoaXMuZm9ybWF0VVJMKHBhdGgpOwoKICAgIGlmIChzdGF0ZSAmJiBzdGF0
        ZS5wYXRoICE9PSBwYXRoKSB7CiAgICAgIHRoaXMucmVwbGFjZVN0YXRlKHBh
        dGgpOwogICAgfQogIH0sCgogIC8qKgogICBAcHJpdmF0ZQoKICAgR2V0IHRo
        ZSBjdXJyZW50IGBoaXN0b3J5LnN0YXRlYAogICBQb2x5ZmlsbCBjaGVja3Mg
        Zm9yIG5hdGl2ZSBicm93c2VyIHN1cHBvcnQgYW5kIGZhbGxzIGJhY2sgdG8g
        cmV0cmlldmluZwogICBmcm9tIGEgcHJpdmF0ZSBfaGlzdG9yeVN0YXRlIHZh
        cmlhYmxlCgogICBAbWV0aG9kIGdldFN0YXRlCiAgIEByZXR1cm4gc3RhdGUg
        e09iamVjdH0KICAqLwogIGdldFN0YXRlOiBmdW5jdGlvbigpIHsKICAgIHJl
        dHVybiBzdXBwb3J0c0hpc3RvcnlTdGF0ZSA/IGdldCh0aGlzLCAnaGlzdG9y
        eScpLnN0YXRlIDogdGhpcy5faGlzdG9yeVN0YXRlOwogIH0sCgogIC8qKgog
        ICBAcHJpdmF0ZQoKICAgUHVzaGVzIGEgbmV3IHN0YXRlCgogICBAbWV0aG9k
        IHB1c2hTdGF0ZQogICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAgcHVz
        aFN0YXRlOiBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgc3RhdGUgPSB7IHBh
        dGg6IHBhdGggfTsKCiAgICBnZXQodGhpcywgJ2hpc3RvcnknKS5wdXNoU3Rh
        dGUoc3RhdGUsIG51bGwsIHBhdGgpOwoKICAgIC8vIHN0b3JlIHN0YXRlIGlm
        IGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGBoaXN0b3J5LnN0YXRlYAogICAg
        aWYgKCFzdXBwb3J0c0hpc3RvcnlTdGF0ZSkgewogICAgICB0aGlzLl9oaXN0
        b3J5U3RhdGUgPSBzdGF0ZTsKICAgIH0KCiAgICAvLyB1c2VkIGZvciB3ZWJr
        aXQgd29ya2Fyb3VuZAogICAgdGhpcy5fcHJldmlvdXNVUkwgPSB0aGlzLmdl
        dFVSTCgpOwogIH0sCgogIC8qKgogICBAcHJpdmF0ZQoKICAgUmVwbGFjZXMg
        dGhlIGN1cnJlbnQgc3RhdGUKCiAgIEBtZXRob2QgcmVwbGFjZVN0YXRlCiAg
        IEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgKi8KICByZXBsYWNlU3RhdGU6IGZ1
        bmN0aW9uKHBhdGgpIHsKICAgIHZhciBzdGF0ZSA9IHsgcGF0aDogcGF0aCB9
        OwoKICAgIGdldCh0aGlzLCAnaGlzdG9yeScpLnJlcGxhY2VTdGF0ZShzdGF0
        ZSwgbnVsbCwgcGF0aCk7CgogICAgLy8gc3RvcmUgc3RhdGUgaWYgYnJvd3Nl
        ciBkb2Vzbid0IHN1cHBvcnQgYGhpc3Rvcnkuc3RhdGVgCiAgICBpZiAoIXN1
        cHBvcnRzSGlzdG9yeVN0YXRlKSB7CiAgICAgIHRoaXMuX2hpc3RvcnlTdGF0
        ZSA9IHN0YXRlOwogICAgfQoKICAgIC8vIHVzZWQgZm9yIHdlYmtpdCB3b3Jr
        YXJvdW5kCiAgICB0aGlzLl9wcmV2aW91c1VSTCA9IHRoaXMuZ2V0VVJMKCk7
        CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFJlZ2lzdGVyIGEgY2Fs
        bGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuZXZlciB0aGUgYnJvd3NlcgogICAg
        aGlzdG9yeSBjaGFuZ2VzLCBpbmNsdWRpbmcgdXNpbmcgZm9yd2FyZCBhbmQg
        YmFjayBidXR0b25zLgoKICAgIEBtZXRob2Qgb25VcGRhdGVVUkwKICAgIEBw
        YXJhbSBjYWxsYmFjayB7RnVuY3Rpb259CiAgKi8KICBvblVwZGF0ZVVSTDog
        ZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBndWlkID0gRW1iZXIuZ3Vp
        ZEZvcih0aGlzKSwKICAgICAgICBzZWxmID0gdGhpczsKCiAgICBFbWJlci4k
        KHdpbmRvdykub24oJ3BvcHN0YXRlLmVtYmVyLWxvY2F0aW9uLScrZ3VpZCwg
        ZnVuY3Rpb24oZSkgewogICAgICAvLyBJZ25vcmUgaW5pdGlhbCBwYWdlIGxv
        YWQgcG9wc3RhdGUgZXZlbnQgaW4gQ2hyb21lCiAgICAgIGlmICghcG9wc3Rh
        dGVGaXJlZCkgewogICAgICAgIHBvcHN0YXRlRmlyZWQgPSB0cnVlOwogICAg
        ICAgIGlmIChzZWxmLmdldFVSTCgpID09PSBzZWxmLl9wcmV2aW91c1VSTCkg
        eyByZXR1cm47IH0KICAgICAgfQogICAgICBjYWxsYmFjayhzZWxmLmdldFVS
        TCgpKTsKICAgIH0pOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBV
        c2VkIHdoZW4gdXNpbmcgYHt7YWN0aW9ufX1gIGhlbHBlci4gIFRoZSB1cmwg
        aXMgYWx3YXlzIGFwcGVuZGVkIHRvIHRoZSByb290VVJMLgoKICAgIEBtZXRo
        b2QgZm9ybWF0VVJMCiAgICBAcGFyYW0gdXJsIHtTdHJpbmd9CiAgICBAcmV0
        dXJuIGZvcm1hdHRlZCB1cmwge1N0cmluZ30KICAqLwogIGZvcm1hdFVSTDog
        ZnVuY3Rpb24odXJsKSB7CiAgICB2YXIgcm9vdFVSTCA9IGdldCh0aGlzLCAn
        cm9vdFVSTCcpOwoKICAgIGlmICh1cmwgIT09ICcnKSB7CiAgICAgIHJvb3RV
        UkwgPSByb290VVJMLnJlcGxhY2UoL1wvJC8sICcnKTsKICAgIH0KCiAgICBy
        ZXR1cm4gcm9vdFVSTCArIHVybDsKICB9LAoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgQ2xlYW5zIHVwIHRoZSBIaXN0b3J5TG9jYXRpb24gZXZlbnQgbGlz
        dGVuZXIuCgogICAgQG1ldGhvZCB3aWxsRGVzdHJveQogICovCiAgd2lsbERl
        c3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdmFyIGd1aWQgPSBFbWJlci5ndWlk
        Rm9yKHRoaXMpOwoKICAgIEVtYmVyLiQod2luZG93KS5vZmYoJ3BvcHN0YXRl
        LmVtYmVyLWxvY2F0aW9uLScrZ3VpZCk7CiAgfQp9KTsKCkVtYmVyLkxvY2F0
        aW9uLnJlZ2lzdGVySW1wbGVtZW50YXRpb24oJ2hpc3RvcnknLCBFbWJlci5I
        aXN0b3J5TG9jYXRpb24pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKRW1iZXIgUm91dGluZwoKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKQHJlcXVpcmVzIGVt
        YmVyLXZpZXdzCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewpmdW5jdGlvbiB2
        aXNpdCh2ZXJ0ZXgsIGZuLCB2aXNpdGVkLCBwYXRoKSB7CiAgdmFyIG5hbWUg
        PSB2ZXJ0ZXgubmFtZSwKICAgIHZlcnRpY2VzID0gdmVydGV4LmluY29taW5n
        LAogICAgbmFtZXMgPSB2ZXJ0ZXguaW5jb21pbmdOYW1lcywKICAgIGxlbiA9
        IG5hbWVzLmxlbmd0aCwKICAgIGk7CiAgaWYgKCF2aXNpdGVkKSB7CiAgICB2
        aXNpdGVkID0ge307CiAgfQogIGlmICghcGF0aCkgewogICAgcGF0aCA9IFtd
        OwogIH0KICBpZiAodmlzaXRlZC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewog
        ICAgcmV0dXJuOwogIH0KICBwYXRoLnB1c2gobmFtZSk7CiAgdmlzaXRlZFtu
        YW1lXSA9IHRydWU7CiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAg
        ICB2aXNpdCh2ZXJ0aWNlc1tuYW1lc1tpXV0sIGZuLCB2aXNpdGVkLCBwYXRo
        KTsKICB9CiAgZm4odmVydGV4LCBwYXRoKTsKICBwYXRoLnBvcCgpOwp9Cgpm
        dW5jdGlvbiBEQUcoKSB7CiAgdGhpcy5uYW1lcyA9IFtdOwogIHRoaXMudmVy
        dGljZXMgPSB7fTsKfQoKREFHLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihu
        YW1lKSB7CiAgaWYgKCFuYW1lKSB7IHJldHVybjsgfQogIGlmICh0aGlzLnZl
        cnRpY2VzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICByZXR1cm4gdGhp
        cy52ZXJ0aWNlc1tuYW1lXTsKICB9CiAgdmFyIHZlcnRleCA9IHsKICAgIG5h
        bWU6IG5hbWUsIGluY29taW5nOiB7fSwgaW5jb21pbmdOYW1lczogW10sIGhh
        c091dGdvaW5nOiBmYWxzZSwgdmFsdWU6IG51bGwKICB9OwogIHRoaXMudmVy
        dGljZXNbbmFtZV0gPSB2ZXJ0ZXg7CiAgdGhpcy5uYW1lcy5wdXNoKG5hbWUp
        OwogIHJldHVybiB2ZXJ0ZXg7Cn07CgpEQUcucHJvdG90eXBlLm1hcCA9IGZ1
        bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgdGhpcy5hZGQobmFtZSkudmFsdWUg
        PSB2YWx1ZTsKfTsKCkRBRy5wcm90b3R5cGUuYWRkRWRnZSA9IGZ1bmN0aW9u
        KGZyb21OYW1lLCB0b05hbWUpIHsKICBpZiAoIWZyb21OYW1lIHx8ICF0b05h
        bWUgfHwgZnJvbU5hbWUgPT09IHRvTmFtZSkgewogICAgcmV0dXJuOwogIH0K
        ICB2YXIgZnJvbSA9IHRoaXMuYWRkKGZyb21OYW1lKSwgdG8gPSB0aGlzLmFk
        ZCh0b05hbWUpOwogIGlmICh0by5pbmNvbWluZy5oYXNPd25Qcm9wZXJ0eShm
        cm9tTmFtZSkpIHsKICAgIHJldHVybjsKICB9CiAgZnVuY3Rpb24gY2hlY2tD
        eWNsZSh2ZXJ0ZXgsIHBhdGgpIHsKICAgIGlmICh2ZXJ0ZXgubmFtZSA9PT0g
        dG9OYW1lKSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiY3ljbGUg
        ZGV0ZWN0ZWQ6ICIgKyB0b05hbWUgKyAiIDwtICIgKyBwYXRoLmpvaW4oIiA8
        LSAiKSk7CiAgICB9CiAgfQogIHZpc2l0KGZyb20sIGNoZWNrQ3ljbGUpOwog
        IGZyb20uaGFzT3V0Z29pbmcgPSB0cnVlOwogIHRvLmluY29taW5nW2Zyb21O
        YW1lXSA9IGZyb207CiAgdG8uaW5jb21pbmdOYW1lcy5wdXNoKGZyb21OYW1l
        KTsKfTsKCkRBRy5wcm90b3R5cGUudG9wc29ydCA9IGZ1bmN0aW9uKGZuKSB7
        CiAgdmFyIHZpc2l0ZWQgPSB7fSwKICAgIHZlcnRpY2VzID0gdGhpcy52ZXJ0
        aWNlcywKICAgIG5hbWVzID0gdGhpcy5uYW1lcywKICAgIGxlbiA9IG5hbWVz
        Lmxlbmd0aCwKICAgIGksIHZlcnRleDsKICBmb3IgKGkgPSAwOyBpIDwgbGVu
        OyBpKyspIHsKICAgIHZlcnRleCA9IHZlcnRpY2VzW25hbWVzW2ldXTsKICAg
        IGlmICghdmVydGV4Lmhhc091dGdvaW5nKSB7CiAgICAgIHZpc2l0KHZlcnRl
        eCwgZm4sIHZpc2l0ZWQpOwogICAgfQogIH0KfTsKCkRBRy5wcm90b3R5cGUu
        YWRkRWRnZXMgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYmVmb3JlLCBhZnRl
        cikgewogIHZhciBpOwogIHRoaXMubWFwKG5hbWUsIHZhbHVlKTsKICBpZiAo
        YmVmb3JlKSB7CiAgICBpZiAodHlwZW9mIGJlZm9yZSA9PT0gJ3N0cmluZycp
        IHsKICAgICAgdGhpcy5hZGRFZGdlKG5hbWUsIGJlZm9yZSk7CiAgICB9IGVs
        c2UgewogICAgICBmb3IgKGkgPSAwOyBpIDwgYmVmb3JlLmxlbmd0aDsgaSsr
        KSB7CiAgICAgICAgdGhpcy5hZGRFZGdlKG5hbWUsIGJlZm9yZVtpXSk7CiAg
        ICAgIH0KICAgIH0KICB9CiAgaWYgKGFmdGVyKSB7CiAgICBpZiAodHlwZW9m
        IGFmdGVyID09PSAnc3RyaW5nJykgewogICAgICB0aGlzLmFkZEVkZ2UoYWZ0
        ZXIsIG5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgZm9yIChpID0gMDsgaSA8
        IGFmdGVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5hZGRFZGdlKGFm
        dGVyW2ldLCBuYW1lKTsKICAgICAgfQogICAgfQogIH0KfTsKCkVtYmVyLkRB
        RyA9IERBRzsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUg
        ZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1hcHBsaWNhdGlvbgoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwKICAgIGNsYXNzaWZ5ID0gRW1iZXIuU3RyaW5nLmNs
        YXNzaWZ5LAogICAgY2FwaXRhbGl6ZSA9IEVtYmVyLlN0cmluZy5jYXBpdGFs
        aXplLAogICAgZGVjYW1lbGl6ZSA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXpl
        OwoKLyoqCiAgVGhlIERlZmF1bHRSZXNvbHZlciBkZWZpbmVzIHRoZSBkZWZh
        dWx0IGxvb2t1cCBydWxlcyB0byByZXNvbHZlCiAgY29udGFpbmVyIGxvb2t1
        cHMgYmVmb3JlIGNvbnN1bHRpbmcgdGhlIGNvbnRhaW5lciBmb3IgcmVnaXN0
        ZXJlZAogIGl0ZW1zOgoKKiB0ZW1wbGF0ZXMgYXJlIGxvb2tlZCB1cCBvbiBg
        RW1iZXIuVEVNUExBVEVTYAoqIG90aGVyIG5hbWVzIGFyZSBsb29rZWQgdXAg
        b24gdGhlIGFwcGxpY2F0aW9uIGFmdGVyIGNvbnZlcnRpbmcKICB0aGUgbmFt
        ZS4gRm9yIGV4YW1wbGUsIGBjb250cm9sbGVyOnBvc3RgIGxvb2tzIHVwCiAg
        YEFwcC5Qb3N0Q29udHJvbGxlcmAgYnkgZGVmYXVsdC4KKiB0aGVyZSBhcmUg
        c29tZSBudWFuY2VzIChzZWUgZXhhbXBsZXMgYmVsb3cpCgogICMjIyBIb3cg
        UmVzb2x2aW5nIFdvcmtzCgogIFRoZSBjb250YWluZXIgY2FsbHMgdGhpcyBv
        YmplY3QncyBgcmVzb2x2ZWAgbWV0aG9kIHdpdGggdGhlCiAgYGZ1bGxOYW1l
        YCBhcmd1bWVudC4KCiAgSXQgZmlyc3QgcGFyc2VzIHRoZSBmdWxsTmFtZSBp
        bnRvIGFuIG9iamVjdCB1c2luZyBgcGFyc2VOYW1lYC4KCiAgVGhlbiBpdCBj
        aGVja3MgZm9yIHRoZSBwcmVzZW5jZSBvZiBhIHR5cGUtc3BlY2lmaWMgaW5z
        dGFuY2UKICBtZXRob2Qgb2YgdGhlIGZvcm0gYHJlc29sdmVbVHlwZV1gIGFu
        ZCBjYWxscyBpdCBpZiBpdCBleGlzdHMuCiAgRm9yIGV4YW1wbGUgaWYgaXQg
        d2FzIHJlc29sdmluZyAndGVtcGxhdGU6cG9zdCcsIGl0IHdvdWxkIGNhbGwK
        ICB0aGUgYHJlc29sdmVUZW1wbGF0ZWAgbWV0aG9kLgoKICBJdHMgbGFzdCBy
        ZXNvcnQgaXMgdG8gY2FsbCB0aGUgYHJlc29sdmVPdGhlcmAgbWV0aG9kLgoK
        ICBUaGUgbWV0aG9kcyBvZiB0aGlzIG9iamVjdCBhcmUgZGVzaWduZWQgdG8g
        YmUgZWFzeSB0byBvdmVycmlkZQogIGluIGEgc3ViY2xhc3MuIEZvciBleGFt
        cGxlLCB5b3UgY291bGQgZW5oYW5jZSBob3cgYSB0ZW1wbGF0ZQogIGlzIHJl
        c29sdmVkIGxpa2Ugc286CgogIGBgYGphdmFzY3JpcHQKICBBcHAgPSBFbWJl
        ci5BcHBsaWNhdGlvbi5jcmVhdGUoewogICAgUmVzb2x2ZXI6IEVtYmVyLkRl
        ZmF1bHRSZXNvbHZlci5leHRlbmQoewogICAgICByZXNvbHZlVGVtcGxhdGU6
        IGZ1bmN0aW9uKHBhcnNlZE5hbWUpIHsKICAgICAgICB2YXIgcmVzb2x2ZWRU
        ZW1wbGF0ZSA9IHRoaXMuX3N1cGVyKHBhcnNlZE5hbWUpOwogICAgICAgIGlm
        IChyZXNvbHZlZFRlbXBsYXRlKSB7IHJldHVybiByZXNvbHZlZFRlbXBsYXRl
        OyB9CiAgICAgICAgcmV0dXJuIEVtYmVyLlRFTVBMQVRFU1snbm90X2ZvdW5k
        J107CiAgICAgIH0KICAgIH0pCiAgfSk7CiAgYGBgCgogIFNvbWUgZXhhbXBs
        ZXMgb2YgaG93IG5hbWVzIGFyZSByZXNvbHZlZDoKCiAgYGBgCiAgJ3RlbXBs
        YXRlOnBvc3QnIC8vPT4gRW1iZXIuVEVNUExBVEVTWydwb3N0J10KICAndGVt
        cGxhdGU6cG9zdHMvYnlsaW5lJyAvLz0+IEVtYmVyLlRFTVBMQVRFU1sncG9z
        dHMvYnlsaW5lJ10KICAndGVtcGxhdGU6cG9zdHMuYnlsaW5lJyAvLz0+IEVt
        YmVyLlRFTVBMQVRFU1sncG9zdHMvYnlsaW5lJ10KICAndGVtcGxhdGU6Ymxv
        Z1Bvc3QnIC8vPT4gRW1iZXIuVEVNUExBVEVTWydibG9nUG9zdCddCiAgICAg
        ICAgICAgICAgICAgICAgICAvLyAgIE9SCiAgICAgICAgICAgICAgICAgICAg
        ICAvLyAgIEVtYmVyLlRFTVBMQVRFU1snYmxvZ19wb3N0J10KICAnY29udHJv
        bGxlcjpwb3N0JyAvLz0+IEFwcC5Qb3N0Q29udHJvbGxlcgogICdjb250cm9s
        bGVyOnBvc3RzLmluZGV4JyAvLz0+IEFwcC5Qb3N0c0luZGV4Q29udHJvbGxl
        cgogICdjb250cm9sbGVyOmJsb2cvcG9zdCcgLy89PiBCbG9nLlBvc3RDb250
        cm9sbGVyCiAgJ2NvbnRyb2xsZXI6YmFzaWMnIC8vPT4gRW1iZXIuQ29udHJv
        bGxlcgogICdyb3V0ZTpwb3N0JyAvLz0+IEFwcC5Qb3N0Um91dGUKICAncm91
        dGU6cG9zdHMuaW5kZXgnIC8vPT4gQXBwLlBvc3RzSW5kZXhSb3V0ZQogICdy
        b3V0ZTpibG9nL3Bvc3QnIC8vPT4gQmxvZy5Qb3N0Um91dGUKICAncm91dGU6
        YmFzaWMnIC8vPT4gRW1iZXIuUm91dGUKICAndmlldzpwb3N0JyAvLz0+IEFw
        cC5Qb3N0VmlldwogICd2aWV3OnBvc3RzLmluZGV4JyAvLz0+IEFwcC5Qb3N0
        c0luZGV4VmlldwogICd2aWV3OmJsb2cvcG9zdCcgLy89PiBCbG9nLlBvc3RW
        aWV3CiAgJ3ZpZXc6YmFzaWMnIC8vPT4gRW1iZXIuVmlldwogICdmb286cG9z
        dCcgLy89PiBBcHAuUG9zdEZvbwogICdtb2RlbDpwb3N0JyAvLz0+IEFwcC5Q
        b3N0CiAgYGBgCgogIEBjbGFzcyBEZWZhdWx0UmVzb2x2ZXIKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkRl
        ZmF1bHRSZXNvbHZlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogIC8qKgog
        ICAgVGhpcyB3aWxsIGJlIHNldCB0byB0aGUgQXBwbGljYXRpb24gaW5zdGFu
        Y2Ugd2hlbiBpdCBpcwogICAgY3JlYXRlZC4KCiAgICBAcHJvcGVydHkgbmFt
        ZXNwYWNlCiAgKi8KICBuYW1lc3BhY2U6IG51bGwsCgogIG5vcm1hbGl6ZTog
        ZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgIHZhciBzcGxpdCA9IGZ1bGxOYW1l
        LnNwbGl0KCc6JywgMiksCiAgICAgICAgdHlwZSA9IHNwbGl0WzBdLAogICAg
        ICAgIG5hbWUgPSBzcGxpdFsxXTsKCiAgICBFbWJlci5hc3NlcnQoIlRyaWVk
        IHRvIG5vcm1hbGl6ZSBhIGNvbnRhaW5lciBuYW1lIHdpdGhvdXQgYSBjb2xv
        biAoOikgaW4gaXQuIFlvdSBwcm9iYWJseSB0cmllZCB0byBsb29rdXAgYSBu
        YW1lIHRoYXQgZGlkIG5vdCBjb250YWluIGEgdHlwZSwgYSBjb2xvbiwgYW5k
        IGEgbmFtZS4gQSBwcm9wZXIgbG9va3VwIG5hbWUgd291bGQgYmUgYHZpZXc6
        cG9zdGAuIiwgc3BsaXQubGVuZ3RoID09PSAyKTsKCiAgICBpZiAodHlwZSAh
        PT0gJ3RlbXBsYXRlJykgewogICAgICB2YXIgcmVzdWx0ID0gbmFtZTsKCiAg
        ICAgIGlmIChyZXN1bHQuaW5kZXhPZignLicpID4gLTEpIHsKICAgICAgICBy
        ZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXC4oLikvZywgZnVuY3Rpb24obSkg
        eyByZXR1cm4gbS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTsgfSk7CiAgICAg
        IH0KCiAgICAgIGlmIChuYW1lLmluZGV4T2YoJ18nKSA+IC0xKSB7CiAgICAg
        ICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL18oLikvZywgZnVuY3Rpb24o
        bSkgeyByZXR1cm4gbS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTsgfSk7CiAg
        ICAgIH0KCiAgICAgIHJldHVybiB0eXBlICsgJzonICsgcmVzdWx0OwogICAg
        fSBlbHNlIHsKICAgICAgcmV0dXJuIGZ1bGxOYW1lOwogICAgfQogIH0sCgoK
        ICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB2aWEgdGhlIGNvbnRh
        aW5lcidzIHJlc29sdmVyIG1ldGhvZC4KICAgIEl0IHBhcnNlcyB0aGUgcHJv
        dmlkZWQgYGZ1bGxOYW1lYCBhbmQgdGhlbiBsb29rcyB1cCBhbmQKICAgIHJl
        dHVybnMgdGhlIGFwcHJvcHJpYXRlIHRlbXBsYXRlIG9yIGNsYXNzLgoKICAg
        IEBtZXRob2QgcmVzb2x2ZQogICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1l
        IHRoZSBsb29rdXAgc3RyaW5nCiAgICBAcmV0dXJuIHtPYmplY3R9IHRoZSBy
        ZXNvbHZlZCBmYWN0b3J5CiAgKi8KICByZXNvbHZlOiBmdW5jdGlvbihmdWxs
        TmFtZSkgewogICAgdmFyIHBhcnNlZE5hbWUgPSB0aGlzLnBhcnNlTmFtZShm
        dWxsTmFtZSksCiAgICAgICAgdHlwZVNwZWNpZmljUmVzb2x2ZU1ldGhvZCA9
        IHRoaXNbcGFyc2VkTmFtZS5yZXNvbHZlTWV0aG9kTmFtZV07CgogICAgaWYg
        KCFwYXJzZWROYW1lLm5hbWUgfHwgIXBhcnNlZE5hbWUudHlwZSkgewogICAg
        ICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGZ1bGxOYW1lOiBgIiAr
        IGZ1bGxOYW1lICsgImAsIG11c3Qgb2Ygb2YgdGhlIGZvcm0gYHR5cGU6bmFt
        ZWAgIik7CiAgICB9CgogICAgaWYgKHR5cGVTcGVjaWZpY1Jlc29sdmVNZXRo
        b2QpIHsKICAgICAgdmFyIHJlc29sdmVkID0gdHlwZVNwZWNpZmljUmVzb2x2
        ZU1ldGhvZC5jYWxsKHRoaXMsIHBhcnNlZE5hbWUpOwogICAgICBpZiAocmVz
        b2x2ZWQpIHsgcmV0dXJuIHJlc29sdmVkOyB9CiAgICB9CiAgICByZXR1cm4g
        dGhpcy5yZXNvbHZlT3RoZXIocGFyc2VkTmFtZSk7CiAgfSwKICAvKioKICAg
        IENvbnZlcnQgdGhlIHN0cmluZyBuYW1lIG9mIHRoZSBmb3JtICJ0eXBlOm5h
        bWUiIHRvCiAgICBhIEphdmFzY3JpcHQgb2JqZWN0IHdpdGggdGhlIHBhcnNl
        ZCBhc3BlY3RzIG9mIHRoZSBuYW1lCiAgICBicm9rZW4gb3V0LgoKICAgIEBw
        cm90ZWN0ZWQKICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZSB0aGUgbG9v
        a3VwIHN0cmluZwogICAgQG1ldGhvZCBwYXJzZU5hbWUKICAqLwogIHBhcnNl
        TmFtZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgIHZhciBuYW1lUGFydHMg
        PSBmdWxsTmFtZS5zcGxpdCgiOiIpLAogICAgICAgIHR5cGUgPSBuYW1lUGFy
        dHNbMF0sIGZ1bGxOYW1lV2l0aG91dFR5cGUgPSBuYW1lUGFydHNbMV0sCiAg
        ICAgICAgbmFtZSA9IGZ1bGxOYW1lV2l0aG91dFR5cGUsCiAgICAgICAgbmFt
        ZXNwYWNlID0gZ2V0KHRoaXMsICduYW1lc3BhY2UnKSwKICAgICAgICByb290
        ID0gbmFtZXNwYWNlOwoKICAgIGlmICh0eXBlICE9PSAndGVtcGxhdGUnICYm
        IG5hbWUuaW5kZXhPZignLycpICE9PSAtMSkgewogICAgICB2YXIgcGFydHMg
        PSBuYW1lLnNwbGl0KCcvJyk7CiAgICAgIG5hbWUgPSBwYXJ0c1twYXJ0cy5s
        ZW5ndGggLSAxXTsKICAgICAgdmFyIG5hbWVzcGFjZU5hbWUgPSBjYXBpdGFs
        aXplKHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcuJykpOwogICAgICByb290
        ID0gRW1iZXIuTmFtZXNwYWNlLmJ5TmFtZShuYW1lc3BhY2VOYW1lKTsKCiAg
        ICAgIEVtYmVyLmFzc2VydCgnWW91IGFyZSBsb29raW5nIGZvciBhICcgKyBu
        YW1lICsgJyAnICsgdHlwZSArICcgaW4gdGhlICcgKyBuYW1lc3BhY2VOYW1l
        ICsgJyBuYW1lc3BhY2UsIGJ1dCB0aGUgbmFtZXNwYWNlIGNvdWxkIG5vdCBi
        ZSBmb3VuZCcsIHJvb3QpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGZ1
        bGxOYW1lOiBmdWxsTmFtZSwKICAgICAgdHlwZTogdHlwZSwKICAgICAgZnVs
        bE5hbWVXaXRob3V0VHlwZTogZnVsbE5hbWVXaXRob3V0VHlwZSwKICAgICAg
        bmFtZTogbmFtZSwKICAgICAgcm9vdDogcm9vdCwKICAgICAgcmVzb2x2ZU1l
        dGhvZE5hbWU6ICJyZXNvbHZlIiArIGNsYXNzaWZ5KHR5cGUpCiAgICB9Owog
        IH0sCiAgLyoqCiAgICBMb29rIHVwIHRoZSB0ZW1wbGF0ZSBpbiBFbWJlci5U
        RU1QTEFURVMKCiAgICBAcHJvdGVjdGVkCiAgICBAcGFyYW0ge09iamVjdH0g
        cGFyc2VkTmFtZSBhIHBhcnNlTmFtZSBvYmplY3Qgd2l0aCB0aGUgcGFyc2Vk
        CiAgICAgIGZ1bGxOYW1lIGxvb2t1cCBzdHJpbmcKICAgIEBtZXRob2QgcmVz
        b2x2ZVRlbXBsYXRlCiAgKi8KICByZXNvbHZlVGVtcGxhdGU6IGZ1bmN0aW9u
        KHBhcnNlZE5hbWUpIHsKICAgIHZhciB0ZW1wbGF0ZU5hbWUgPSBwYXJzZWRO
        YW1lLmZ1bGxOYW1lV2l0aG91dFR5cGUucmVwbGFjZSgvXC4vZywgJy8nKTsK
        CiAgICBpZiAoRW1iZXIuVEVNUExBVEVTW3RlbXBsYXRlTmFtZV0pIHsKICAg
        ICAgcmV0dXJuIEVtYmVyLlRFTVBMQVRFU1t0ZW1wbGF0ZU5hbWVdOwogICAg
        fQoKICAgIHRlbXBsYXRlTmFtZSA9IGRlY2FtZWxpemUodGVtcGxhdGVOYW1l
        KTsKICAgIGlmIChFbWJlci5URU1QTEFURVNbdGVtcGxhdGVOYW1lXSkgewog
        ICAgICByZXR1cm4gRW1iZXIuVEVNUExBVEVTW3RlbXBsYXRlTmFtZV07CiAg
        ICB9CiAgfSwKICAvKioKICAgIEdpdmVuIGEgcGFyc2VOYW1lIG9iamVjdCAo
        b3V0cHV0IGZyb20gYHBhcnNlTmFtZWApLCBhcHBseQogICAgdGhlIGNvbnZl
        bnRpb25zIGV4cGVjdGVkIGJ5IGBFbWJlci5Sb3V0ZXJgCgogICAgQHByb3Rl
        Y3RlZAogICAgQHBhcmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5h
        bWUgb2JqZWN0IHdpdGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29r
        dXAgc3RyaW5nCiAgICBAbWV0aG9kIHVzZVJvdXRlck5hbWluZwogICovCiAg
        dXNlUm91dGVyTmFtaW5nOiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICBw
        YXJzZWROYW1lLm5hbWUgPSBwYXJzZWROYW1lLm5hbWUucmVwbGFjZSgvXC4v
        ZywgJ18nKTsKICAgIGlmIChwYXJzZWROYW1lLm5hbWUgPT09ICdiYXNpYycp
        IHsKICAgICAgcGFyc2VkTmFtZS5uYW1lID0gJyc7CiAgICB9CiAgfSwKICAv
        KioKICAgIExvb2t1cCB0aGUgY29udHJvbGxlciB1c2luZyBgcmVzb2x2ZU90
        aGVyYAoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJz
        ZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRoZSBwYXJzZWQKICAg
        ICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1ldGhvZCByZXNvbHZl
        Q29udHJvbGxlcgogICovCiAgcmVzb2x2ZUNvbnRyb2xsZXI6IGZ1bmN0aW9u
        KHBhcnNlZE5hbWUpIHsKICAgIHRoaXMudXNlUm91dGVyTmFtaW5nKHBhcnNl
        ZE5hbWUpOwogICAgcmV0dXJuIHRoaXMucmVzb2x2ZU90aGVyKHBhcnNlZE5h
        bWUpOwogIH0sCiAgLyoqCiAgICBMb29rdXAgdGhlIHJvdXRlIHVzaW5nIGBy
        ZXNvbHZlT3RoZXJgCgogICAgQHByb3RlY3RlZAogICAgQHBhcmFtIHtPYmpl
        Y3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2JqZWN0IHdpdGggdGhlIHBh
        cnNlZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3RyaW5nCiAgICBAbWV0aG9k
        IHJlc29sdmVSb3V0ZQogICovCiAgcmVzb2x2ZVJvdXRlOiBmdW5jdGlvbihw
        YXJzZWROYW1lKSB7CiAgICB0aGlzLnVzZVJvdXRlck5hbWluZyhwYXJzZWRO
        YW1lKTsKICAgIHJldHVybiB0aGlzLnJlc29sdmVPdGhlcihwYXJzZWROYW1l
        KTsKICB9LAogIC8qKgogICAgTG9va3VwIHRoZSB2aWV3IHVzaW5nIGByZXNv
        bHZlT3RoZXJgCgogICAgQHByb3RlY3RlZAogICAgQHBhcmFtIHtPYmplY3R9
        IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2JqZWN0IHdpdGggdGhlIHBhcnNl
        ZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3RyaW5nCiAgICBAbWV0aG9kIHJl
        c29sdmVWaWV3CiAgKi8KICByZXNvbHZlVmlldzogZnVuY3Rpb24ocGFyc2Vk
        TmFtZSkgewogICAgdGhpcy51c2VSb3V0ZXJOYW1pbmcocGFyc2VkTmFtZSk7
        CiAgICByZXR1cm4gdGhpcy5yZXNvbHZlT3RoZXIocGFyc2VkTmFtZSk7CiAg
        fSwKCiAgcmVzb2x2ZUhlbHBlcjogZnVuY3Rpb24ocGFyc2VkTmFtZSkgewog
        ICAgcmV0dXJuIHRoaXMucmVzb2x2ZU90aGVyKHBhcnNlZE5hbWUpIHx8IEVt
        YmVyLkhhbmRsZWJhcnMuaGVscGVyc1twYXJzZWROYW1lLmZ1bGxOYW1lV2l0
        aG91dFR5cGVdOwogIH0sCgogIC8qKgogICAgTG9va3VwIHRoZSBtb2RlbCBv
        biB0aGUgQXBwbGljYXRpb24gbmFtZXNwYWNlCgogICAgQHByb3RlY3RlZAog
        ICAgQHBhcmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2Jq
        ZWN0IHdpdGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3Ry
        aW5nCiAgICBAbWV0aG9kIHJlc29sdmVNb2RlbAogICovCiAgcmVzb2x2ZU1v
        ZGVsOiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICB2YXIgY2xhc3NOYW1l
        ID0gY2xhc3NpZnkocGFyc2VkTmFtZS5uYW1lKSwKICAgICAgICBmYWN0b3J5
        ID0gZ2V0KHBhcnNlZE5hbWUucm9vdCwgY2xhc3NOYW1lKTsKCiAgICAgaWYg
        KGZhY3RvcnkpIHsgcmV0dXJuIGZhY3Rvcnk7IH0KICB9LAogIC8qKgogICAg
        TG9vayB1cCB0aGUgc3BlY2lmaWVkIG9iamVjdCAoZnJvbSBwYXJzZWROYW1l
        KSBvbiB0aGUgYXBwcm9wcmlhdGUKICAgIG5hbWVzcGFjZSAodXN1YWxseSBv
        biB0aGUgQXBwbGljYXRpb24pCgogICAgQHByb3RlY3RlZAogICAgQHBhcmFt
        IHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2JqZWN0IHdpdGgg
        dGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3RyaW5nCiAgICBA
        bWV0aG9kIHJlc29sdmVPdGhlcgogICovCiAgcmVzb2x2ZU90aGVyOiBmdW5j
        dGlvbihwYXJzZWROYW1lKSB7CiAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3Np
        ZnkocGFyc2VkTmFtZS5uYW1lKSArIGNsYXNzaWZ5KHBhcnNlZE5hbWUudHlw
        ZSksCiAgICAgICAgZmFjdG9yeSA9IGdldChwYXJzZWROYW1lLnJvb3QsIGNs
        YXNzTmFtZSk7CiAgICBpZiAoZmFjdG9yeSkgeyByZXR1cm4gZmFjdG9yeTsg
        fQogIH0sCgogIC8qKgogICAgUmV0dXJucyBhIGh1bWFuLXJlYWRhYmxlIGRl
        c2NyaXB0aW9uIGZvciBhIGZ1bGxOYW1lLiBVc2VkIGJ5IHRoZQogICAgQXBw
        bGljYXRpb24gbmFtZXNwYWNlIGluIGFzc2VydGlvbnMgdG8gZGVzY3JpYmUg
        dGhlCiAgICBwcmVjaXNlIG5hbWUgb2YgdGhlIGNsYXNzIHRoYXQgRW1iZXIg
        aXMgbG9va2luZyBmb3IsIHJhdGhlciB0aGFuCiAgICBjb250YWluZXIga2V5
        cy4KCiAgICBAcHJvdGVjdGVkCiAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5h
        bWUgdGhlIGxvb2t1cCBzdHJpbmcKICAgIEBtZXRob2QgbG9va3VwRGVzY3Jp
        cHRpb24KICAqLwogIGxvb2t1cERlc2NyaXB0aW9uOiBmdW5jdGlvbihmdWxs
        TmFtZSkgewogICAgdmFyIHBhcnNlZE5hbWUgPSB0aGlzLnBhcnNlTmFtZShm
        dWxsTmFtZSk7CgogICAgaWYgKHBhcnNlZE5hbWUudHlwZSA9PT0gJ3RlbXBs
        YXRlJykgewogICAgICByZXR1cm4gInRlbXBsYXRlIGF0ICIgKyBwYXJzZWRO
        YW1lLmZ1bGxOYW1lV2l0aG91dFR5cGUucmVwbGFjZSgvXC4vZywgJy8nKTsK
        ICAgIH0KCiAgICB2YXIgZGVzY3JpcHRpb24gPSBwYXJzZWROYW1lLnJvb3Qg
        KyAiLiIgKyBjbGFzc2lmeShwYXJzZWROYW1lLm5hbWUpOwogICAgaWYgKHBh
        cnNlZE5hbWUudHlwZSAhPT0gJ21vZGVsJykgeyBkZXNjcmlwdGlvbiArPSBj
        bGFzc2lmeShwYXJzZWROYW1lLnR5cGUpOyB9CgogICAgcmV0dXJuIGRlc2Ny
        aXB0aW9uOwogIH0sCgogIG1ha2VUb1N0cmluZzogZnVuY3Rpb24oZmFjdG9y
        eSwgZnVsbE5hbWUpIHsKICAgIHJldHVybiBmYWN0b3J5LnRvU3RyaW5nKCk7
        CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUg
        ZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1hcHBsaWNhdGlvbgoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKZnVuY3Rpb24gRGVw
        cmVjYXRlZENvbnRhaW5lcihjb250YWluZXIpIHsKICB0aGlzLl9jb250YWlu
        ZXIgPSBjb250YWluZXI7Cn0KCkRlcHJlY2F0ZWRDb250YWluZXIuZGVwcmVj
        YXRlID0gZnVuY3Rpb24obWV0aG9kKSB7CiAgcmV0dXJuIGZ1bmN0aW9uKCkg
        ewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lcjsKCiAgICBF
        bWJlci5kZXByZWNhdGUoJ1VzaW5nIHRoZSBkZWZhdWx0Q29udGFpbmVyIGlz
        IG5vIGxvbmdlciBzdXBwb3J0ZWQuIFtkZWZhdWx0Q29udGFpbmVyIycgKyBt
        ZXRob2QgKyAnXSBzZWU6IGh0dHA6Ly9naXQuaW8vRUtQcG5BJywgZmFsc2Up
        OwogICAgcmV0dXJuIGNvbnRhaW5lclttZXRob2RdLmFwcGx5KGNvbnRhaW5l
        ciwgYXJndW1lbnRzKTsKICB9Owp9OwoKRGVwcmVjYXRlZENvbnRhaW5lci5w
        cm90b3R5cGUgPSB7CiAgX2NvbnRhaW5lcjogbnVsbCwKICBsb29rdXA6IERl
        cHJlY2F0ZWRDb250YWluZXIuZGVwcmVjYXRlKCdsb29rdXAnKSwKICByZXNv
        bHZlOiBEZXByZWNhdGVkQ29udGFpbmVyLmRlcHJlY2F0ZSgncmVzb2x2ZScp
        LAogIHJlZ2lzdGVyOiBEZXByZWNhdGVkQ29udGFpbmVyLmRlcHJlY2F0ZSgn
        cmVnaXN0ZXInKQp9OwoKLyoqCiAgQW4gaW5zdGFuY2Ugb2YgYEVtYmVyLkFw
        cGxpY2F0aW9uYCBpcyB0aGUgc3RhcnRpbmcgcG9pbnQgZm9yIGV2ZXJ5IEVt
        YmVyCiAgYXBwbGljYXRpb24uIEl0IGhlbHBzIHRvIGluc3RhbnRpYXRlLCBp
        bml0aWFsaXplIGFuZCBjb29yZGluYXRlIHRoZSBtYW55CiAgb2JqZWN0cyB0
        aGF0IG1ha2UgdXAgeW91ciBhcHAuCgogIEVhY2ggRW1iZXIgYXBwIGhhcyBv
        bmUgYW5kIG9ubHkgb25lIGBFbWJlci5BcHBsaWNhdGlvbmAgb2JqZWN0LiBJ
        biBmYWN0LCB0aGUKICB2ZXJ5IGZpcnN0IHRoaW5nIHlvdSBzaG91bGQgZG8g
        aW4geW91ciBhcHBsaWNhdGlvbiBpcyBjcmVhdGUgdGhlIGluc3RhbmNlOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgd2luZG93LkFwcCA9IEVtYmVyLkFwcGxpY2F0
        aW9uLmNyZWF0ZSgpOwogIGBgYAoKICBUeXBpY2FsbHksIHRoZSBhcHBsaWNh
        dGlvbiBvYmplY3QgaXMgdGhlIG9ubHkgZ2xvYmFsIHZhcmlhYmxlLiBBbGwg
        b3RoZXIKICBjbGFzc2VzIGluIHlvdXIgYXBwIHNob3VsZCBiZSBwcm9wZXJ0
        aWVzIG9uIHRoZSBgRW1iZXIuQXBwbGljYXRpb25gIGluc3RhbmNlLAogIHdo
        aWNoIGhpZ2hsaWdodHMgaXRzIGZpcnN0IHJvbGU6IGEgZ2xvYmFsIG5hbWVz
        cGFjZS4KCiAgRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmUgYSB2aWV3IGNs
        YXNzLCBpdCBtaWdodCBsb29rIGxpa2UgdGhpczoKCiAgYGBgamF2YXNjcmlw
        dAogIEFwcC5NeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCgpOwogIGBgYAoK
        ICBCeSBkZWZhdWx0LCBjYWxsaW5nIGBFbWJlci5BcHBsaWNhdGlvbi5jcmVh
        dGUoKWAgd2lsbCBhdXRvbWF0aWNhbGx5IGluaXRpYWxpemUKICB5b3VyIGFw
        cGxpY2F0aW9uIGJ5IGNhbGxpbmcgdGhlIGBFbWJlci5BcHBsaWNhdGlvbi5p
        bml0aWFsaXplKClgIG1ldGhvZC4gSWYKICB5b3UgbmVlZCB0byBkZWxheSBp
        bml0aWFsaXphdGlvbiwgeW91IGNhbiBjYWxsIHlvdXIgYXBwJ3MgYGRlZmVy
        UmVhZGluZXNzKClgCiAgbWV0aG9kLiBXaGVuIHlvdSBhcmUgcmVhZHkgZm9y
        IHlvdXIgYXBwIHRvIGJlIGluaXRpYWxpemVkLCBjYWxsIGl0cwogIGBhZHZh
        bmNlUmVhZGluZXNzKClgIG1ldGhvZC4KCiAgWW91IGNhbiBkZWZpbmUgYSBg
        cmVhZHlgIG1ldGhvZCBvbiB0aGUgYEVtYmVyLkFwcGxpY2F0aW9uYCBpbnN0
        YW5jZSwgd2hpY2gKICB3aWxsIGJlIHJ1biBieSBFbWJlciB3aGVuIHRoZSBh
        cHBsaWNhdGlvbiBpcyBpbml0aWFsaXplZC4KCiAgQmVjYXVzZSBgRW1iZXIu
        QXBwbGljYXRpb25gIGluaGVyaXRzIGZyb20gYEVtYmVyLk5hbWVzcGFjZWAs
        IGFueSBjbGFzc2VzCiAgeW91IGNyZWF0ZSB3aWxsIGhhdmUgdXNlZnVsIHN0
        cmluZyByZXByZXNlbnRhdGlvbnMgd2hlbiBjYWxsaW5nIGB0b1N0cmluZygp
        YC4KICBTZWUgdGhlIGBFbWJlci5OYW1lc3BhY2VgIGRvY3VtZW50YXRpb24g
        Zm9yIG1vcmUgaW5mb3JtYXRpb24uCgogIFdoaWxlIHlvdSBjYW4gdGhpbmsg
        b2YgeW91ciBgRW1iZXIuQXBwbGljYXRpb25gIGFzIGEgY29udGFpbmVyIHRo
        YXQgaG9sZHMgdGhlCiAgb3RoZXIgY2xhc3NlcyBpbiB5b3VyIGFwcGxpY2F0
        aW9uLCB0aGVyZSBhcmUgc2V2ZXJhbCBvdGhlciByZXNwb25zaWJpbGl0aWVz
        CiAgZ29pbmcgb24gdW5kZXItdGhlLWhvb2QgdGhhdCB5b3UgbWF5IHdhbnQg
        dG8gdW5kZXJzdGFuZC4KCiAgIyMjIEV2ZW50IERlbGVnYXRpb24KCiAgRW1i
        ZXIgdXNlcyBhIHRlY2huaXF1ZSBjYWxsZWQgX2V2ZW50IGRlbGVnYXRpb25f
        LiBUaGlzIGFsbG93cyB0aGUgZnJhbWV3b3JrCiAgdG8gc2V0IHVwIGEgZ2xv
        YmFsLCBzaGFyZWQgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZCBvZiByZXF1aXJp
        bmcgZWFjaCB2aWV3IHRvCiAgZG8gaXQgbWFudWFsbHkuIEZvciBleGFtcGxl
        LCBpbnN0ZWFkIG9mIGVhY2ggdmlldyByZWdpc3RlcmluZyBpdHMgb3duCiAg
        YG1vdXNlZG93bmAgbGlzdGVuZXIgb24gaXRzIGFzc29jaWF0ZWQgZWxlbWVu
        dCwgRW1iZXIgc2V0cyB1cCBhIGBtb3VzZWRvd25gCiAgbGlzdGVuZXIgb24g
        dGhlIGBib2R5YC4KCiAgSWYgYSBgbW91c2Vkb3duYCBldmVudCBvY2N1cnMs
        IEVtYmVyIHdpbGwgbG9vayBhdCB0aGUgdGFyZ2V0IG9mIHRoZSBldmVudCBh
        bmQKICBzdGFydCB3YWxraW5nIHVwIHRoZSBET00gbm9kZSB0cmVlLCBmaW5k
        aW5nIGNvcnJlc3BvbmRpbmcgdmlld3MgYW5kIGludm9raW5nCiAgdGhlaXIg
        YG1vdXNlRG93bmAgbWV0aG9kIGFzIGl0IGdvZXMuCgogIGBFbWJlci5BcHBs
        aWNhdGlvbmAgaGFzIGEgbnVtYmVyIG9mIGRlZmF1bHQgZXZlbnRzIHRoYXQg
        aXQgbGlzdGVucyBmb3IsIGFzCiAgd2VsbCBhcyBhIG1hcHBpbmcgZnJvbSBs
        b3dlcmNhc2UgZXZlbnRzIHRvIGNhbWVsLWNhc2VkIHZpZXcgbWV0aG9kIG5h
        bWVzLiBGb3IKICBleGFtcGxlLCB0aGUgYGtleXByZXNzYCBldmVudCBjYXVz
        ZXMgdGhlIGBrZXlQcmVzc2AgbWV0aG9kIG9uIHRoZSB2aWV3IHRvIGJlCiAg
        Y2FsbGVkLCB0aGUgYGRibGNsaWNrYCBldmVudCBjYXVzZXMgYGRvdWJsZUNs
        aWNrYCB0byBiZSBjYWxsZWQsIGFuZCBzbyBvbi4KCiAgSWYgdGhlcmUgaXMg
        YSBidWJibGluZyBicm93c2VyIGV2ZW50IHRoYXQgRW1iZXIgZG9lcyBub3Qg
        bGlzdGVuIGZvciBieQogIGRlZmF1bHQsIHlvdSBjYW4gc3BlY2lmeSBjdXN0
        b20gZXZlbnRzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHZpZXcgbWV0aG9k
        CiAgbmFtZXMgYnkgc2V0dGluZyB0aGUgYXBwbGljYXRpb24ncyBgY3VzdG9t
        RXZlbnRzYCBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlwdAogIEFwcCA9IEVt
        YmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7CiAgICBjdXN0b21FdmVudHM6IHsK
        ICAgICAgLy8gYWRkIHN1cHBvcnQgZm9yIHRoZSBwYXN0ZSBldmVudAogICAg
        ICAncGFzdGU6ICJwYXN0ZSIKICAgIH0KICB9KTsKICBgYGAKCiAgQnkgZGVm
        YXVsdCwgdGhlIGFwcGxpY2F0aW9uIHNldHMgdXAgdGhlc2UgZXZlbnQgbGlz
        dGVuZXJzIG9uIHRoZSBkb2N1bWVudAogIGJvZHkuIEhvd2V2ZXIsIGluIGNh
        c2VzIHdoZXJlIHlvdSBhcmUgZW1iZWRkaW5nIGFuIEVtYmVyIGFwcGxpY2F0
        aW9uIGluc2lkZQogIGFuIGV4aXN0aW5nIHBhZ2UsIHlvdSBtYXkgd2FudCBp
        dCB0byBzZXQgdXAgdGhlIGxpc3RlbmVycyBvbiBhbiBlbGVtZW50CiAgaW5z
        aWRlIHRoZSBib2R5LgoKICBGb3IgZXhhbXBsZSwgaWYgb25seSBldmVudHMg
        aW5zaWRlIGEgRE9NIGVsZW1lbnQgd2l0aCB0aGUgSUQgb2YgYGVtYmVyLWFw
        cGAKICBzaG91bGQgYmUgZGVsZWdhdGVkLCBzZXQgeW91ciBhcHBsaWNhdGlv
        bidzIGByb290RWxlbWVudGAgcHJvcGVydHk6CgogIGBgYGphdmFzY3JpcHQK
        ICB3aW5kb3cuQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKHsKICAg
        IHJvb3RFbGVtZW50OiAnI2VtYmVyLWFwcCcKICB9KTsKICBgYGAKCiAgVGhl
        IGByb290RWxlbWVudGAgY2FuIGJlIGVpdGhlciBhIERPTSBlbGVtZW50IG9y
        IGEgalF1ZXJ5LWNvbXBhdGlibGUgc2VsZWN0b3IKICBzdHJpbmcuIE5vdGUg
        dGhhdCAqdmlld3MgYXBwZW5kZWQgdG8gdGhlIERPTSBvdXRzaWRlIHRoZSBy
        b290IGVsZW1lbnQgd2lsbAogIG5vdCByZWNlaXZlIGV2ZW50cy4qIElmIHlv
        dSBzcGVjaWZ5IGEgY3VzdG9tIHJvb3QgZWxlbWVudCwgbWFrZSBzdXJlIHlv
        dSBvbmx5CiAgYXBwZW5kIHZpZXdzIGluc2lkZSBpdCEKCiAgVG8gbGVhcm4g
        bW9yZSBhYm91dCB0aGUgYWR2YW50YWdlcyBvZiBldmVudCBkZWxlZ2F0aW9u
        IGFuZCB0aGUgRW1iZXIgdmlldwogIGxheWVyLCBhbmQgYSBsaXN0IG9mIHRo
        ZSBldmVudCBsaXN0ZW5lcnMgdGhhdCBhcmUgc2V0dXAgYnkgZGVmYXVsdCwg
        dmlzaXQgdGhlCiAgW0VtYmVyIFZpZXcgTGF5ZXIgZ3VpZGVdKGh0dHA6Ly9l
        bWJlcmpzLmNvbS9ndWlkZXMvdW5kZXJzdGFuZGluZy1lbWJlci90aGUtdmll
        dy1sYXllci8jdG9jX2V2ZW50LWRlbGVnYXRpb24pLgoKICAjIyMgSW5pdGlh
        bGl6ZXJzCgogIExpYnJhcmllcyBvbiB0b3Agb2YgRW1iZXIgY2FuIHJlZ2lz
        dGVyIGFkZGl0aW9uYWwgaW5pdGlhbGl6ZXJzLCBsaWtlIHNvOgoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIuQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIoewog
        ICAgbmFtZTogInN0b3JlIiwKCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihj
        b250YWluZXIsIGFwcGxpY2F0aW9uKSB7CiAgICAgIGNvbnRhaW5lci5yZWdp
        c3Rlcignc3RvcmU6bWFpbicsIGFwcGxpY2F0aW9uLlN0b3JlKTsKICAgIH0K
        ICB9KTsKICBgYGAKCiAgIyMjIFJvdXRpbmcKCiAgSW4gYWRkaXRpb24gdG8g
        Y3JlYXRpbmcgeW91ciBhcHBsaWNhdGlvbidzIHJvdXRlciwgYEVtYmVyLkFw
        cGxpY2F0aW9uYCBpcwogIGFsc28gcmVzcG9uc2libGUgZm9yIHRlbGxpbmcg
        dGhlIHJvdXRlciB3aGVuIHRvIHN0YXJ0IHJvdXRpbmcuIFRyYW5zaXRpb25z
        CiAgYmV0d2VlbiByb3V0ZXMgY2FuIGJlIGxvZ2dlZCB3aXRoIHRoZSBgTE9H
        X1RSQU5TSVRJT05TYCBmbGFnLCBhbmQgbW9yZQogIGRldGFpbGVkIGludHJh
        LXRyYW5zaXRpb24gbG9nZ2luZyBjYW4gYmUgbG9nZ2VkIHdpdGgKICB0aGUg
        YExPR19UUkFOU0lUSU9OU19JTlRFUk5BTGAgZmxhZzoKCiAgYGBgamF2YXNj
        cmlwdAogIHdpbmRvdy5BcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUo
        ewogICAgTE9HX1RSQU5TSVRJT05TOiB0cnVlLCAvLyBiYXNpYyBsb2dnaW5n
        IG9mIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbnMKICAgIExPR19UUkFOU0lUSU9O
        U19JTlRFUk5BTDogdHJ1ZSAvLyBkZXRhaWxlZCBsb2dnaW5nIG9mIGFsbCBy
        b3V0aW5nIHN0ZXBzCiAgfSk7CiAgYGBgCgogIEJ5IGRlZmF1bHQsIHRoZSBy
        b3V0ZXIgd2lsbCBiZWdpbiB0cnlpbmcgdG8gdHJhbnNsYXRlIHRoZSBjdXJy
        ZW50IFVSTCBpbnRvCiAgYXBwbGljYXRpb24gc3RhdGUgb25jZSB0aGUgYnJv
        d3NlciBlbWl0cyB0aGUgYERPTUNvbnRlbnRSZWFkeWAgZXZlbnQuIElmIHlv
        dQogIG5lZWQgdG8gZGVmZXIgcm91dGluZywgeW91IGNhbiBjYWxsIHRoZSBh
        cHBsaWNhdGlvbidzIGBkZWZlclJlYWRpbmVzcygpYAogIG1ldGhvZC4gT25j
        ZSByb3V0aW5nIGNhbiBiZWdpbiwgY2FsbCB0aGUgYGFkdmFuY2VSZWFkaW5l
        c3MoKWAgbWV0aG9kLgoKICBJZiB0aGVyZSBpcyBhbnkgc2V0dXAgcmVxdWly
        ZWQgYmVmb3JlIHJvdXRpbmcgYmVnaW5zLCB5b3UgY2FuIGltcGxlbWVudCBh
        CiAgYHJlYWR5KClgIG1ldGhvZCBvbiB5b3VyIGFwcCB0aGF0IHdpbGwgYmUg
        aW52b2tlZCBpbW1lZGlhdGVseSBiZWZvcmUgcm91dGluZwogIGJlZ2lucy4K
        ICBgYGAKCiAgQGNsYXNzIEFwcGxpY2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJl
        cgogIEBleHRlbmRzIEVtYmVyLk5hbWVzcGFjZQoqLwoKdmFyIEFwcGxpY2F0
        aW9uID0gRW1iZXIuQXBwbGljYXRpb24gPSBFbWJlci5OYW1lc3BhY2UuZXh0
        ZW5kKEVtYmVyLkRlZmVycmVkTWl4aW4sIHsKCiAgLyoqCiAgICBUaGUgcm9v
        dCBET00gZWxlbWVudCBvZiB0aGUgQXBwbGljYXRpb24uIFRoaXMgY2FuIGJl
        IHNwZWNpZmllZCBhcyBhbgogICAgZWxlbWVudCBvciBhCiAgICBbalF1ZXJ5
        LWNvbXBhdGlibGUgc2VsZWN0b3Igc3RyaW5nXShodHRwOi8vYXBpLmpxdWVy
        eS5jb20vY2F0ZWdvcnkvc2VsZWN0b3JzLykuCgogICAgVGhpcyBpcyB0aGUg
        ZWxlbWVudCB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBBcHBsaWNhdGlv
        bidzLAogICAgYGV2ZW50RGlzcGF0Y2hlcmAsIHdoaWNoIHNldHMgdXAgdGhl
        IGxpc3RlbmVycyBmb3IgZXZlbnQgZGVsZWdhdGlvbi4gRXZlcnkKICAgIHZp
        ZXcgaW4geW91ciBhcHBsaWNhdGlvbiBzaG91bGQgYmUgYSBjaGlsZCBvZiB0
        aGUgZWxlbWVudCB5b3Ugc3BlY2lmeSBoZXJlLgoKICAgIEBwcm9wZXJ0eSBy
        b290RWxlbWVudAogICAgQHR5cGUgRE9NRWxlbWVudAogICAgQGRlZmF1bHQg
        J2JvZHknCiAgKi8KICByb290RWxlbWVudDogJ2JvZHknLAoKICAvKioKICAg
        IFRoZSBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYCByZXNwb25zaWJsZSBmb3Ig
        ZGVsZWdhdGluZyBldmVudHMgdG8gdGhpcwogICAgYXBwbGljYXRpb24ncyB2
        aWV3cy4KCiAgICBUaGUgZXZlbnQgZGlzcGF0Y2hlciBpcyBjcmVhdGVkIGJ5
        IHRoZSBhcHBsaWNhdGlvbiBhdCBpbml0aWFsaXphdGlvbiB0aW1lCiAgICBh
        bmQgc2V0cyB1cCBldmVudCBsaXN0ZW5lcnMgb24gdGhlIERPTSBlbGVtZW50
        IGRlc2NyaWJlZCBieSB0aGUKICAgIGFwcGxpY2F0aW9uJ3MgYHJvb3RFbGVt
        ZW50YCBwcm9wZXJ0eS4KCiAgICBTZWUgdGhlIGRvY3VtZW50YXRpb24gZm9y
        IGBFbWJlci5FdmVudERpc3BhdGNoZXJgIGZvciBtb3JlIGluZm9ybWF0aW9u
        LgoKICAgIEBwcm9wZXJ0eSBldmVudERpc3BhdGNoZXIKICAgIEB0eXBlIEVt
        YmVyLkV2ZW50RGlzcGF0Y2hlcgogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        ZXZlbnREaXNwYXRjaGVyOiBudWxsLAoKICAvKioKICAgIFRoZSBET00gZXZl
        bnRzIGZvciB3aGljaCB0aGUgZXZlbnQgZGlzcGF0Y2hlciBzaG91bGQgbGlz
        dGVuLgoKICAgIEJ5IGRlZmF1bHQsIHRoZSBhcHBsaWNhdGlvbidzIGBFbWJl
        ci5FdmVudERpc3BhdGNoZXJgIGxpc3RlbnMKICAgIGZvciBhIHNldCBvZiBz
        dGFuZGFyZCBET00gZXZlbnRzLCBzdWNoIGFzIGBtb3VzZWRvd25gIGFuZAog
        ICAgYGtleXVwYCwgYW5kIGRlbGVnYXRlcyB0aGVtIHRvIHlvdXIgYXBwbGlj
        YXRpb24ncyBgRW1iZXIuVmlld2AKICAgIGluc3RhbmNlcy4KCiAgICBJZiB5
        b3Ugd291bGQgbGlrZSBhZGRpdGlvbmFsIGJ1YmJsaW5nIGV2ZW50cyB0byBi
        ZSBkZWxlZ2F0ZWQgdG8geW91cgogICAgdmlld3MsIHNldCB5b3VyIGBFbWJl
        ci5BcHBsaWNhdGlvbmAncyBgY3VzdG9tRXZlbnRzYCBwcm9wZXJ0eQogICAg
        dG8gYSBoYXNoIGNvbnRhaW5pbmcgdGhlIERPTSBldmVudCBuYW1lIGFzIHRo
        ZSBrZXkgYW5kIHRoZQogICAgY29ycmVzcG9uZGluZyB2aWV3IG1ldGhvZCBu
        YW1lIGFzIHRoZSB2YWx1ZS4gRm9yIGV4YW1wbGU6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKHsKICAg
        ICAgY3VzdG9tRXZlbnRzOiB7CiAgICAgICAgLy8gYWRkIHN1cHBvcnQgZm9y
        IHRoZSBwYXN0ZSBldmVudAogICAgICAgICdwYXN0ZTogInBhc3RlIgogICAg
        ICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBjdXN0b21FdmVu
        dHMKICAgIEB0eXBlIE9iamVjdAogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        Y3VzdG9tRXZlbnRzOiBudWxsLAoKICAvLyBTdGFydCBvZmYgdGhlIG51bWJl
        ciBvZiBkZWZlcnJhbHMgYXQgMS4gVGhpcyB3aWxsIGJlCiAgLy8gZGVjcmVt
        ZW50ZWQgYnkgdGhlIEFwcGxpY2F0aW9uJ3Mgb3duIGBpbml0aWFsaXplYCBt
        ZXRob2QuCiAgX3JlYWRpbmVzc0RlZmVycmFsczogMSwKCiAgaW5pdDogZnVu
        Y3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuJCkgeyB0aGlzLiQgPSBFbWJlci4k
        OyB9CiAgICB0aGlzLl9fY29udGFpbmVyX18gPSB0aGlzLmJ1aWxkQ29udGFp
        bmVyKCk7CgogICAgdGhpcy5Sb3V0ZXIgPSB0aGlzLmRlZmF1bHRSb3V0ZXIo
        KTsKCiAgICB0aGlzLl9zdXBlcigpOwoKICAgIHRoaXMuc2NoZWR1bGVJbml0
        aWFsaXplKCk7CgogICAgRW1iZXIubGlicmFyaWVzLnJlZ2lzdGVyQ29yZUxp
        YnJhcnkoJ0hhbmRsZWJhcnMnLCBFbWJlci5IYW5kbGViYXJzLlZFUlNJT04p
        OwogICAgRW1iZXIubGlicmFyaWVzLnJlZ2lzdGVyQ29yZUxpYnJhcnkoJ2pR
        dWVyeScsIEVtYmVyLiQoKS5qcXVlcnkpOwoKICAgIGlmICggRW1iZXIuTE9H
        X1ZFUlNJT04gKSB7CiAgICAgIEVtYmVyLkxPR19WRVJTSU9OID0gZmFsc2U7
        IC8vIHdlIG9ubHkgbmVlZCB0byBzZWUgdGhpcyBvbmNlIHBlciBBcHBsaWNh
        dGlvbiNpbml0CiAgICAgIHZhciBtYXhOYW1lTGVuZ3RoID0gTWF0aC5tYXgu
        YXBwbHkodGhpcywgRW1iZXIuQShFbWJlci5saWJyYXJpZXMpLm1hcEJ5KCJu
        YW1lLmxlbmd0aCIpKTsKCiAgICAgIEVtYmVyLmRlYnVnKCctLS0tLS0tLS0t
        LS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7CiAgICAgIEVtYmVyLmxpYnJhcmll
        cy5lYWNoKGZ1bmN0aW9uKG5hbWUsIHZlcnNpb24pIHsKICAgICAgICB2YXIg
        c3BhY2VzID0gbmV3IEFycmF5KG1heE5hbWVMZW5ndGggLSBuYW1lLmxlbmd0
        aCArIDEpLmpvaW4oIiAiKTsKICAgICAgICBFbWJlci5kZWJ1ZyhbbmFtZSwg
        c3BhY2VzLCAnIDogJywgdmVyc2lvbl0uam9pbigiIikpOwogICAgICB9KTsK
        ICAgICAgRW1iZXIuZGVidWcoJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
        LS0tLS0nKTsKICAgIH0KICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAg
        QnVpbGQgdGhlIGNvbnRhaW5lciBmb3IgdGhlIGN1cnJlbnQgYXBwbGljYXRp
        b24uCgogICAgQWxzbyByZWdpc3RlciBhIGRlZmF1bHQgYXBwbGljYXRpb24g
        dmlldyBpbiBjYXNlIHRoZSBhcHBsaWNhdGlvbgogICAgaXRzZWxmIGRvZXMg
        bm90LgoKICAgIEBtZXRob2QgYnVpbGRDb250YWluZXIKICAgIEByZXR1cm4g
        e0VtYmVyLkNvbnRhaW5lcn0gdGhlIGNvbmZpZ3VyZWQgY29udGFpbmVyCiAg
        Ki8KICBidWlsZENvbnRhaW5lcjogZnVuY3Rpb24oKSB7CiAgICB2YXIgY29u
        dGFpbmVyID0gdGhpcy5fX2NvbnRhaW5lcl9fID0gQXBwbGljYXRpb24uYnVp
        bGRDb250YWluZXIodGhpcyk7CgogICAgcmV0dXJuIGNvbnRhaW5lcjsKICB9
        LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgSWYgdGhlIGFwcGxpY2F0aW9u
        IGhhcyBub3Qgb3B0ZWQgb3V0IG9mIHJvdXRpbmcgYW5kIGhhcyBub3QgZXhw
        bGljaXRseQogICAgZGVmaW5lZCBhIHJvdXRlciwgc3VwcGx5IGEgZGVmYXVs
        dCByb3V0ZXIgZm9yIHRoZSBhcHBsaWNhdGlvbiBhdXRob3IKICAgIHRvIGNv
        bmZpZ3VyZS4KCiAgICBUaGlzIGFsbG93cyBhcHBsaWNhdGlvbiBkZXZlbG9w
        ZXJzIHRvIGRvOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBBcHAgPSBF
        bWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKCiAgICBBcHAuUm91dGVyLm1h
        cChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yZXNvdXJjZSgncG9zdHMnKTsK
        ICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBkZWZhdWx0Um91dGVyCiAg
        ICBAcmV0dXJuIHtFbWJlci5Sb3V0ZXJ9IHRoZSBkZWZhdWx0IHJvdXRlcgog
        ICovCgogIGRlZmF1bHRSb3V0ZXI6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRo
        aXMuUm91dGVyID09PSBmYWxzZSkgeyByZXR1cm47IH0KICAgIHZhciBjb250
        YWluZXIgPSB0aGlzLl9fY29udGFpbmVyX187CgogICAgaWYgKHRoaXMuUm91
        dGVyKSB7CiAgICAgIGNvbnRhaW5lci51bnJlZ2lzdGVyKCdyb3V0ZXI6bWFp
        bicpOwogICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3JvdXRlcjptYWluJywg
        dGhpcy5Sb3V0ZXIpOwogICAgfQoKICAgIHJldHVybiBjb250YWluZXIubG9v
        a3VwRmFjdG9yeSgncm91dGVyOm1haW4nKTsKICB9LAoKICAvKioKICAgIEBw
        cml2YXRlCgogICAgQXV0b21hdGljYWxseSBpbml0aWFsaXplIHRoZSBhcHBs
        aWNhdGlvbiBvbmNlIHRoZSBET00gaGFzCiAgICBiZWNvbWUgcmVhZHkuCgog
        ICAgVGhlIGluaXRpYWxpemF0aW9uIGl0c2VsZiBpcyBzY2hlZHVsZWQgb24g
        dGhlIGFjdGlvbnMgcXVldWUKICAgIHdoaWNoIGVuc3VyZXMgdGhhdCBhcHBs
        aWNhdGlvbiBsb2FkaW5nIGZpbmlzaGVzIGJlZm9yZQogICAgYm9vdGluZy4K
        CiAgICBJZiB5b3UgYXJlIGFzeW5jaHJvbm91c2x5IGxvYWRpbmcgY29kZSwg
        eW91IHNob3VsZCBjYWxsCiAgICBgZGVmZXJSZWFkaW5lc3MoKWAgdG8gZGVm
        ZXIgYm9vdGluZywgYW5kIHRoZW4gY2FsbAogICAgYGFkdmFuY2VSZWFkaW5l
        c3MoKWAgb25jZSBhbGwgb2YgeW91ciBjb2RlIGhhcyBmaW5pc2hlZAogICAg
        bG9hZGluZy4KCiAgICBAbWV0aG9kIHNjaGVkdWxlSW5pdGlhbGl6ZQogICov
        CiAgc2NoZWR1bGVJbml0aWFsaXplOiBmdW5jdGlvbigpIHsKICAgIHZhciBz
        ZWxmID0gdGhpczsKCiAgICBpZiAoIXRoaXMuJCB8fCB0aGlzLiQuaXNSZWFk
        eSkgewogICAgICBFbWJlci5ydW4uc2NoZWR1bGUoJ2FjdGlvbnMnLCBzZWxm
        LCAnX2luaXRpYWxpemUnKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuJCgp
        LnJlYWR5KGZ1bmN0aW9uKCkgewogICAgICAgIEVtYmVyLnJ1bihzZWxmLCAn
        X2luaXRpYWxpemUnKTsKICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAg
        ICBVc2UgdGhpcyB0byBkZWZlciByZWFkaW5lc3MgdW50aWwgc29tZSBjb25k
        aXRpb24gaXMgdHJ1ZS4KCiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwogICAg
        QXBwLmRlZmVyUmVhZGluZXNzKCk7CgogICAgalF1ZXJ5LmdldEpTT04oIi9h
        dXRoLXRva2VuIiwgZnVuY3Rpb24odG9rZW4pIHsKICAgICAgQXBwLnRva2Vu
        ID0gdG9rZW47CiAgICAgIEFwcC5hZHZhbmNlUmVhZGluZXNzKCk7CiAgICB9
        KTsKICAgIGBgYAoKICAgIFRoaXMgYWxsb3dzIHlvdSB0byBwZXJmb3JtIGFz
        eW5jaHJvbm91cyBzZXR1cCBsb2dpYyBhbmQgZGVmZXIKICAgIGJvb3Rpbmcg
        eW91ciBhcHBsaWNhdGlvbiB1bnRpbCB0aGUgc2V0dXAgaGFzIGZpbmlzaGVk
        LgoKICAgIEhvd2V2ZXIsIGlmIHRoZSBzZXR1cCByZXF1aXJlcyBhIGxvYWRp
        bmcgVUksIGl0IG1pZ2h0IGJlIGJldHRlcgogICAgdG8gdXNlIHRoZSByb3V0
        ZXIgZm9yIHRoaXMgcHVycG9zZS4KCiAgICBAbWV0aG9kIGRlZmVyUmVhZGlu
        ZXNzCiAgKi8KICBkZWZlclJlYWRpbmVzczogZnVuY3Rpb24oKSB7CiAgICBF
        bWJlci5hc3NlcnQoIllvdSBtdXN0IGNhbGwgZGVmZXJSZWFkaW5lc3Mgb24g
        YW4gaW5zdGFuY2Ugb2YgRW1iZXIuQXBwbGljYXRpb24iLCB0aGlzIGluc3Rh
        bmNlb2YgRW1iZXIuQXBwbGljYXRpb24pOwogICAgRW1iZXIuYXNzZXJ0KCJZ
        b3UgY2Fubm90IGRlZmVyIHJlYWRpbmVzcyBzaW5jZSB0aGUgYHJlYWR5KClg
        IGhvb2sgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQuIiwgdGhpcy5fcmVhZGlu
        ZXNzRGVmZXJyYWxzID4gMCk7CiAgICB0aGlzLl9yZWFkaW5lc3NEZWZlcnJh
        bHMrKzsKICB9LAoKICAvKioKICAgIENhbGwgYGFkdmFuY2VSZWFkaW5lc3Ng
        IGFmdGVyIGFueSBhc3luY2hyb25vdXMgc2V0dXAgbG9naWMgaGFzIGNvbXBs
        ZXRlZC4KICAgIEVhY2ggY2FsbCB0byBgZGVmZXJSZWFkaW5lc3NgIG11c3Qg
        YmUgbWF0Y2hlZCBieSBhIGNhbGwgdG8gYGFkdmFuY2VSZWFkaW5lc3NgCiAg
        ICBvciB0aGUgYXBwbGljYXRpb24gd2lsbCBuZXZlciBiZWNvbWUgcmVhZHkg
        YW5kIHJvdXRpbmcgd2lsbCBub3QgYmVnaW4uCgogICAgQG1ldGhvZCBhZHZh
        bmNlUmVhZGluZXNzCiAgICBAc2VlIHtFbWJlci5BcHBsaWNhdGlvbiNkZWZl
        clJlYWRpbmVzc30KICAqLwogIGFkdmFuY2VSZWFkaW5lc3M6IGZ1bmN0aW9u
        KCkgewogICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBjYWxsIGFkdmFuY2VS
        ZWFkaW5lc3Mgb24gYW4gaW5zdGFuY2Ugb2YgRW1iZXIuQXBwbGljYXRpb24i
        LCB0aGlzIGluc3RhbmNlb2YgRW1iZXIuQXBwbGljYXRpb24pOwogICAgdGhp
        cy5fcmVhZGluZXNzRGVmZXJyYWxzLS07CgogICAgaWYgKHRoaXMuX3JlYWRp
        bmVzc0RlZmVycmFscyA9PT0gMCkgewogICAgICBFbWJlci5ydW4ub25jZSh0
        aGlzLCB0aGlzLmRpZEJlY29tZVJlYWR5KTsKICAgIH0KICB9LAoKICAvKioK
        ICAgIHJlZ2lzdGVycyBhIGZhY3RvcnkgZm9yIGxhdGVyIGluamVjdGlvbgoK
        ICAgIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwID0gRW1i
        ZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CgogICAgQXBwLlBlcnNvbiAgPSBF
        bWJlci5PYmplY3QuZXh0ZW5kKHt9KTsKICAgIEFwcC5PcmFuZ2UgID0gRW1i
        ZXIuT2JqZWN0LmV4dGVuZCh7fSk7CiAgICBBcHAuRW1haWwgICA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoe30pOwogICAgQXBwLnNlc3Npb24gPSBFbWJlci5P
        YmplY3QuY3JlYXRlKHt9KTsKCiAgICBBcHAucmVnaXN0ZXIoJ21vZGVsOnVz
        ZXInLCBBcHAuUGVyc29uLCB7c2luZ2xldG9uOiBmYWxzZSB9KTsKICAgIEFw
        cC5yZWdpc3RlcignZnJ1aXQ6ZmF2b3JpdGUnLCBBcHAuT3JhbmdlKTsKICAg
        IEFwcC5yZWdpc3RlcignY29tbXVuaWNhdGlvbjptYWluJywgQXBwLkVtYWls
        LCB7c2luZ2xldG9uOiBmYWxzZX0pOwogICAgQXBwLnJlZ2lzdGVyKCdzZXNz
        aW9uJywgQXBwLnNlc3Npb24sIHtpbnN0YW50aWF0ZTogZmFsc2V9KTsKICAg
        IGBgYAoKICAgIEBtZXRob2QgcmVnaXN0ZXIKICAgIEBwYXJhbSAgZnVsbE5h
        bWUge1N0cmluZ30gdHlwZTpuYW1lIChlLmcuLCAnbW9kZWw6dXNlcicpCiAg
        ICBAcGFyYW0gIGZhY3Rvcnkge0Z1bmN0aW9ufSAoZS5nLiwgQXBwLlBlcnNv
        bikKICAgIEBwYXJhbSAgb3B0aW9ucyB7U3RyaW5nfSAob3B0aW9uYWwpCiAg
        KiovCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRhaW5l
        ciA9IHRoaXMuX19jb250YWluZXJfXzsKICAgIGNvbnRhaW5lci5yZWdpc3Rl
        ci5hcHBseShjb250YWluZXIsIGFyZ3VtZW50cyk7CiAgfSwKICAvKioKICAg
        IGRlZmluZXMgYW4gaW5qZWN0aW9uIG9yIHR5cGVJbmplY3Rpb24KCiAgICBF
        eGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5pbmplY3QoPGZ1
        bGxfbmFtZSBvciB0eXBlPiwgPHByb3BlcnR5IG5hbWU+LCA8ZnVsbF9uYW1l
        PikKICAgIEFwcC5pbmplY3QoJ21vZGVsOnVzZXInLCAnZW1haWwnLCAnbW9k
        ZWw6ZW1haWwnKQogICAgQXBwLmluamVjdCgnbW9kZWwnLCAnc291cmNlJywg
        J3NvdXJjZTptYWluJykKICAgIGBgYAoKICAgIEBtZXRob2QgaW5qZWN0CiAg
        ICBAcGFyYW0gIGZhY3RvcnlOYW1lT3JUeXBlIHtTdHJpbmd9CiAgICBAcGFy
        YW0gIHByb3BlcnR5IHtTdHJpbmd9CiAgICBAcGFyYW0gIGluamVjdGlvbk5h
        bWUge1N0cmluZ30KICAqKi8KICBpbmplY3Q6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIGNvbnRhaW5lciA9IHRoaXMuX19jb250YWluZXJfXzsKICAgIGNvbnRh
        aW5lci5pbmplY3Rpb24uYXBwbHkoY29udGFpbmVyLCBhcmd1bWVudHMpOwog
        IH0sCgogIC8qKgogICAgQHByaXZhdGUKICAgIEBkZXByZWNhdGVkCgogICAg
        Q2FsbGluZyBpbml0aWFsaXplIG1hbnVhbGx5IGlzIG5vdCBzdXBwb3J0ZWQu
        CgogICAgUGxlYXNlIHNlZSBFbWJlci5BcHBsaWNhdGlvbiNhZHZhbmNlUmVh
        ZGluZXNzIGFuZAogICAgRW1iZXIuQXBwbGljYXRpb24jZGVmZXJSZWFkaW5l
        c3MuCgogICAgQG1ldGhvZCBpbml0aWFsaXplCiAgICoqLwogIGluaXRpYWxp
        emU6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuZGVwcmVjYXRlKCdDYWxsaW5n
        IGluaXRpYWxpemUgbWFudWFsbHkgaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNl
        IHNlZSBFbWJlci5BcHBsaWNhdGlvbiNhZHZhbmNlUmVhZGluZXNzIGFuZCBF
        bWJlci5BcHBsaWNhdGlvbiNkZWZlclJlYWRpbmVzcycpOwogIH0sCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIEluaXRpYWxpemUgdGhlIGFwcGxpY2F0aW9u
        LiBUaGlzIGhhcHBlbnMgYXV0b21hdGljYWxseS4KCiAgICBSdW4gYW55IGlu
        aXRpYWxpemVycyBhbmQgcnVuIHRoZSBhcHBsaWNhdGlvbiBsb2FkIGhvb2su
        IFRoZXNlIGhvb2tzIG1heQogICAgY2hvb3NlIHRvIGRlZmVyIHJlYWRpbmVz
        cy4gRm9yIGV4YW1wbGUsIGFuIGF1dGhlbnRpY2F0aW9uIGhvb2sgbWlnaHQg
        d2FudAogICAgdG8gZGVmZXIgcmVhZGluZXNzIHVudGlsIHRoZSBhdXRoIHRv
        a2VuIGhhcyBiZWVuIHJldHJpZXZlZC4KCiAgICBAbWV0aG9kIF9pbml0aWFs
        aXplCiAgKi8KICBfaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAo
        dGhpcy5pc0Rlc3Ryb3llZCkgeyByZXR1cm47IH0KCiAgICAvLyBBdCB0aGlz
        IHBvaW50LCB0aGUgQXBwLlJvdXRlciBtdXN0IGFscmVhZHkgYmUgYXNzaWdu
        ZWQKICAgIGlmICh0aGlzLlJvdXRlcikgewogICAgICB2YXIgY29udGFpbmVy
        ID0gdGhpcy5fX2NvbnRhaW5lcl9fOwogICAgICBjb250YWluZXIudW5yZWdp
        c3Rlcigncm91dGVyOm1haW4nKTsKICAgICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdyb3V0ZXI6bWFpbicsIHRoaXMuUm91dGVyKTsKICAgIH0KCiAgICB0aGlz
        LnJ1bkluaXRpYWxpemVycygpOwogICAgRW1iZXIucnVuTG9hZEhvb2tzKCdh
        cHBsaWNhdGlvbicsIHRoaXMpOwoKICAgIC8vIEF0IHRoaXMgcG9pbnQsIGFu
        eSBpbml0aWFsaXplcnMgb3IgbG9hZCBob29rcyB0aGF0IHdvdWxkIGhhdmUg
        d2FudGVkCiAgICAvLyB0byBkZWZlciByZWFkaW5lc3MgaGF2ZSBmaXJlZC4g
        SW4gZ2VuZXJhbCwgYWR2YW5jaW5nIHJlYWRpbmVzcyBoZXJlCiAgICAvLyB3
        aWxsIHByb2NlZWQgdG8gZGlkQmVjb21lUmVhZHkuCiAgICB0aGlzLmFkdmFu
        Y2VSZWFkaW5lc3MoKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioK
        ICAgIFJlc2V0IHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBpcyB0eXBpY2FsbHkg
        dXNlZCBvbmx5IGluIHRlc3RzLiBJdCBjbGVhbnMgdXAKICAgIHRoZSBhcHBs
        aWNhdGlvbiBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOgoKICAgIDEuIERlYWN0
        aXZhdGUgZXhpc3Rpbmcgcm91dGVzCiAgICAyLiBEZXN0cm95IGFsbCBvYmpl
        Y3RzIGluIHRoZSBjb250YWluZXIKICAgIDMuIENyZWF0ZSBhIG5ldyBhcHBs
        aWNhdGlvbiBjb250YWluZXIKICAgIDQuIFJlLXJvdXRlIHRvIHRoZSBleGlz
        dGluZyB1cmwKCiAgICBUeXBpY2FsIEV4YW1wbGU6CgogICAgYGBgamF2YXNj
        cmlwdAoKICAgIHZhciBBcHA7CgogICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkg
        ewogICAgICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICAg
        IH0pOwoKICAgIG1vZHVsZSgiYWNjZXB0YW5jZSB0ZXN0IiwgewogICAgICBz
        ZXR1cDogZnVuY3Rpb24oKSB7CiAgICAgICAgQXBwLnJlc2V0KCk7CiAgICAg
        IH0KICAgIH0pOwoKICAgIHRlc3QoImZpcnN0IHRlc3QiLCBmdW5jdGlvbigp
        IHsKICAgICAgLy8gQXBwIGlzIGZyZXNobHkgcmVzZXQKICAgIH0pOwoKICAg
        IHRlc3QoImZpcnN0IHRlc3QiLCBmdW5jdGlvbigpIHsKICAgICAgLy8gQXBw
        IGlzIGFnYWluIGZyZXNobHkgcmVzZXQKICAgIH0pOwogICAgYGBgCgogICAg
        QWR2YW5jZWQgRXhhbXBsZToKCiAgICBPY2Nhc2lvbmFsbHkgeW91IG1heSB3
        YW50IHRvIHByZXZlbnQgdGhlIGFwcCBmcm9tIGluaXRpYWxpemluZyBkdXJp
        bmcKICAgIHNldHVwLiBUaGlzIGNvdWxkIGVuYWJsZSBleHRyYSBjb25maWd1
        cmF0aW9uLCBvciBlbmFibGUgYXNzZXJ0aW5nIHByaW9yCiAgICB0byB0aGUg
        YXBwIGJlY29taW5nIHJlYWR5LgoKICAgIGBgYGphdmFzY3JpcHQKCiAgICB2
        YXIgQXBwOwoKICAgIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAgQXBw
        ID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CiAgICB9KTsKCiAgICBt
        b2R1bGUoImFjY2VwdGFuY2UgdGVzdCIsIHsKICAgICAgc2V0dXA6IGZ1bmN0
        aW9uKCkgewogICAgICAgIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAg
        ICAgIEFwcC5yZXNldCgpOwogICAgICAgICAgQXBwLmRlZmVyUmVhZGluZXNz
        KCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHRlc3QoImZp
        cnN0IHRlc3QiLCBmdW5jdGlvbigpIHsKICAgICAgb2sodHJ1ZSwgJ3NvbWV0
        aGluZyBiZWZvcmUgYXBwIGlzIGluaXRpYWxpemVkJyk7CgogICAgICBFbWJl
        ci5ydW4oZnVuY3Rpb24oKSB7CiAgICAgICAgQXBwLmFkdmFuY2VSZWFkaW5l
        c3MoKTsKICAgICAgfSk7CiAgICAgIG9rKHRydWUsICdzb21ldGhpbmcgYWZ0
        ZXIgYXBwIGlzIGluaXRpYWxpemVkJyk7CiAgICB9KTsKICAgIGBgYAoKICAg
        IEBtZXRob2QgcmVzZXQKICAqKi8KICByZXNldDogZnVuY3Rpb24oKSB7CiAg
        ICB0aGlzLl9yZWFkaW5lc3NEZWZlcnJhbHMgPSAxOwoKICAgIGZ1bmN0aW9u
        IGhhbmRsZVJlc2V0KCkgewogICAgICB2YXIgcm91dGVyID0gdGhpcy5fX2Nv
        bnRhaW5lcl9fLmxvb2t1cCgncm91dGVyOm1haW4nKTsKICAgICAgcm91dGVy
        LnJlc2V0KCk7CgogICAgICBFbWJlci5ydW4odGhpcy5fX2NvbnRhaW5lcl9f
        LCAnZGVzdHJveScpOwoKICAgICAgdGhpcy5idWlsZENvbnRhaW5lcigpOwoK
        ICAgICAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25zJywgdGhpcywgZnVu
        Y3Rpb24oKSB7CiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZSgpOwogICAgICB9
        KTsKICAgIH0KCiAgICBFbWJlci5ydW4uam9pbih0aGlzLCBoYW5kbGVSZXNl
        dCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBydW5J
        bml0aWFsaXplcnMKICAqLwogIHJ1bkluaXRpYWxpemVyczogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgaW5pdGlhbGl6ZXJzID0gZ2V0KHRoaXMuY29uc3RydWN0
        b3IsICdpbml0aWFsaXplcnMnKSwKICAgICAgICBjb250YWluZXIgPSB0aGlz
        Ll9fY29udGFpbmVyX18sCiAgICAgICAgZ3JhcGggPSBuZXcgRW1iZXIuREFH
        KCksCiAgICAgICAgbmFtZXNwYWNlID0gdGhpcywKICAgICAgICBuYW1lLCBp
        bml0aWFsaXplcjsKCiAgICBmb3IgKG5hbWUgaW4gaW5pdGlhbGl6ZXJzKSB7
        CiAgICAgIGluaXRpYWxpemVyID0gaW5pdGlhbGl6ZXJzW25hbWVdOwogICAg
        ICBncmFwaC5hZGRFZGdlcyhpbml0aWFsaXplci5uYW1lLCBpbml0aWFsaXpl
        ci5pbml0aWFsaXplLCBpbml0aWFsaXplci5iZWZvcmUsIGluaXRpYWxpemVy
        LmFmdGVyKTsKICAgIH0KCiAgICBncmFwaC50b3Bzb3J0KGZ1bmN0aW9uICh2
        ZXJ0ZXgpIHsKICAgICAgdmFyIGluaXRpYWxpemVyID0gdmVydGV4LnZhbHVl
        OwogICAgICBFbWJlci5hc3NlcnQoIk5vIGFwcGxpY2F0aW9uIGluaXRpYWxp
        emVyIG5hbWVkICciK3ZlcnRleC5uYW1lKyInIiwgaW5pdGlhbGl6ZXIpOwog
        ICAgICBpbml0aWFsaXplcihjb250YWluZXIsIG5hbWVzcGFjZSk7CiAgICB9
        KTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGRpZEJl
        Y29tZVJlYWR5CiAgKi8KICBkaWRCZWNvbWVSZWFkeTogZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLnNldHVwRXZlbnREaXNwYXRjaGVyKCk7CiAgICB0aGlzLnJl
        YWR5KCk7IC8vIHVzZXIgaG9vawogICAgdGhpcy5zdGFydFJvdXRpbmcoKTsK
        CiAgICBpZiAoIUVtYmVyLnRlc3RpbmcpIHsKICAgICAgLy8gRWFnZXJseSBu
        YW1lIGFsbCBjbGFzc2VzIHRoYXQgYXJlIGFscmVhZHkgbG9hZGVkCiAgICAg
        IEVtYmVyLk5hbWVzcGFjZS5wcm9jZXNzQWxsKCk7CiAgICAgIEVtYmVyLkJP
        T1RFRCA9IHRydWU7CiAgICB9CgogICAgdGhpcy5yZXNvbHZlKHRoaXMpOwog
        IH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBTZXR1cCB1cCB0aGUgZXZl
        bnQgZGlzcGF0Y2hlciB0byByZWNlaXZlIGV2ZW50cyBvbiB0aGUKICAgIGFw
        cGxpY2F0aW9uJ3MgYHJvb3RFbGVtZW50YCB3aXRoIGFueSByZWdpc3RlcmVk
        CiAgICBgY3VzdG9tRXZlbnRzYC4KCiAgICBAbWV0aG9kIHNldHVwRXZlbnRE
        aXNwYXRjaGVyCiAgKi8KICBzZXR1cEV2ZW50RGlzcGF0Y2hlcjogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgY3VzdG9tRXZlbnRzID0gZ2V0KHRoaXMsICdjdXN0
        b21FdmVudHMnKSwKICAgICAgICByb290RWxlbWVudCA9IGdldCh0aGlzLCAn
        cm9vdEVsZW1lbnQnKSwKICAgICAgICBkaXNwYXRjaGVyID0gdGhpcy5fX2Nv
        bnRhaW5lcl9fLmxvb2t1cCgnZXZlbnRfZGlzcGF0Y2hlcjptYWluJyk7Cgog
        ICAgc2V0KHRoaXMsICdldmVudERpc3BhdGNoZXInLCBkaXNwYXRjaGVyKTsK
        ICAgIGRpc3BhdGNoZXIuc2V0dXAoY3VzdG9tRXZlbnRzLCByb290RWxlbWVu
        dCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIHRyaWdnZXIgYSBu
        ZXcgY2FsbCB0byBgcm91dGVgIHdoZW5ldmVyIHRoZSBVUkwgY2hhbmdlcy4K
        ICAgIElmIHRoZSBhcHBsaWNhdGlvbiBoYXMgYSByb3V0ZXIsIHVzZSBpdCB0
        byByb3V0ZSB0byB0aGUgY3VycmVudCBVUkwsIGFuZAoKICAgIEBtZXRob2Qg
        c3RhcnRSb3V0aW5nCiAgICBAcHJvcGVydHkgcm91dGVyIHtFbWJlci5Sb3V0
        ZXJ9CiAgKi8KICBzdGFydFJvdXRpbmc6IGZ1bmN0aW9uKCkgewogICAgdmFy
        IHJvdXRlciA9IHRoaXMuX19jb250YWluZXJfXy5sb29rdXAoJ3JvdXRlcjpt
        YWluJyk7CiAgICBpZiAoIXJvdXRlcikgeyByZXR1cm47IH0KCiAgICByb3V0
        ZXIuc3RhcnRSb3V0aW5nKCk7CiAgfSwKCiAgaGFuZGxlVVJMOiBmdW5jdGlv
        bih1cmwpIHsKICAgIHZhciByb3V0ZXIgPSB0aGlzLl9fY29udGFpbmVyX18u
        bG9va3VwKCdyb3V0ZXI6bWFpbicpOwoKICAgIHJvdXRlci5oYW5kbGVVUkwo
        dXJsKTsKICB9LAoKICAvKioKICAgIENhbGxlZCB3aGVuIHRoZSBBcHBsaWNh
        dGlvbiBoYXMgYmVjb21lIHJlYWR5LgogICAgVGhlIGNhbGwgd2lsbCBiZSBk
        ZWxheWVkIHVudGlsIHRoZSBET00gaGFzIGJlY29tZSByZWFkeS4KCiAgICBA
        ZXZlbnQgcmVhZHkKICAqLwogIHJlYWR5OiBFbWJlci5LLAoKICAvKioKICAg
        IEBkZXByZWNhdGVkIFVzZSAnUmVzb2x2ZXInIGluc3RlYWQKICAgIFNldCB0
        aGlzIHRvIHByb3ZpZGUgYW4gYWx0ZXJuYXRlIGNsYXNzIHRvIGBFbWJlci5E
        ZWZhdWx0UmVzb2x2ZXJgCgoKICAgIEBwcm9wZXJ0eSByZXNvbHZlcgogICov
        CiAgcmVzb2x2ZXI6IG51bGwsCgogIC8qKgogICAgU2V0IHRoaXMgdG8gcHJv
        dmlkZSBhbiBhbHRlcm5hdGUgY2xhc3MgdG8gYEVtYmVyLkRlZmF1bHRSZXNv
        bHZlcmAKCiAgICBAcHJvcGVydHkgcmVzb2x2ZXIKICAqLwogIFJlc29sdmVy
        OiBudWxsLAoKICB3aWxsRGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICBFbWJl
        ci5CT09URUQgPSBmYWxzZTsKCiAgICB0aGlzLl9fY29udGFpbmVyX18uZGVz
        dHJveSgpOwogIH0sCgogIGluaXRpYWxpemVyOiBmdW5jdGlvbihvcHRpb25z
        KSB7CiAgICB0aGlzLmNvbnN0cnVjdG9yLmluaXRpYWxpemVyKG9wdGlvbnMp
        OwogIH0KfSk7CgpFbWJlci5BcHBsaWNhdGlvbi5yZW9wZW5DbGFzcyh7CiAg
        aW5pdGlhbGl6ZXJzOiB7fSwKICBpbml0aWFsaXplcjogZnVuY3Rpb24oaW5p
        dGlhbGl6ZXIpIHsKICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGluaXRp
        YWxpemVyIGJlaW5nIGFkZGVkIHRvIGEgc3ViY2xhc3MsIHdlIGFyZSBnb2lu
        ZyB0byByZW9wZW4gdGhlIGNsYXNzCiAgICAvLyB0byBtYWtlIHN1cmUgd2Ug
        aGF2ZSBhIG5ldyBgaW5pdGlhbGl6ZXJzYCBvYmplY3QsIHdoaWNoIGV4dGVu
        ZHMgZnJvbSB0aGUgcGFyZW50IGNsYXNzJyB1c2luZwogICAgLy8gcHJvdG90
        eXBhbCBpbmhlcml0YW5jZS4gV2l0aG91dCB0aGlzLCBhdHRlbXB0aW5nIHRv
        IGFkZCBpbml0aWFsaXplcnMgdG8gdGhlIHN1YmNsYXNzIHdvdWxkCiAgICAv
        LyBwb2xsdXRlIHRoZSBwYXJlbnQgY2xhc3MgYXMgd2VsbCBhcyBvdGhlciBz
        dWJjbGFzc2VzLgogICAgaWYgKHRoaXMuc3VwZXJjbGFzcy5pbml0aWFsaXpl
        cnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnN1cGVyY2xhc3MuaW5pdGlhbGl6
        ZXJzID09PSB0aGlzLmluaXRpYWxpemVycykgewogICAgICB0aGlzLnJlb3Bl
        bkNsYXNzKHsKICAgICAgICBpbml0aWFsaXplcnM6IEVtYmVyLmNyZWF0ZSh0
        aGlzLmluaXRpYWxpemVycykKICAgICAgfSk7CiAgICB9CgogICAgRW1iZXIu
        YXNzZXJ0KCJUaGUgaW5pdGlhbGl6ZXIgJyIgKyBpbml0aWFsaXplci5uYW1l
        ICsgIicgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIiwgIXRoaXMuaW5p
        dGlhbGl6ZXJzW2luaXRpYWxpemVyLm5hbWVdKTsKICAgIEVtYmVyLmFzc2Vy
        dCgiQW4gaW5pdGlhbGl6ZXIgY2Fubm90IGJlIHJlZ2lzdGVyZWQgd2l0aCBi
        b3RoIGEgYmVmb3JlIGFuZCBhbiBhZnRlciIsICEoaW5pdGlhbGl6ZXIuYmVm
        b3JlICYmIGluaXRpYWxpemVyLmFmdGVyKSk7CiAgICBFbWJlci5hc3NlcnQo
        IkFuIGluaXRpYWxpemVyIGNhbm5vdCBiZSByZWdpc3RlcmVkIHdpdGhvdXQg
        YW4gaW5pdGlhbGl6ZSBmdW5jdGlvbiIsIEVtYmVyLmNhbkludm9rZShpbml0
        aWFsaXplciwgJ2luaXRpYWxpemUnKSk7CgogICAgdGhpcy5pbml0aWFsaXpl
        cnNbaW5pdGlhbGl6ZXIubmFtZV0gPSBpbml0aWFsaXplcjsKICB9LAoKICAv
        KioKICAgIEBwcml2YXRlCgogICAgVGhpcyBjcmVhdGVzIGEgY29udGFpbmVy
        IHdpdGggdGhlIGRlZmF1bHQgRW1iZXIgbmFtaW5nIGNvbnZlbnRpb25zLgoK
        ICAgIEl0IGFsc28gY29uZmlndXJlcyB0aGUgY29udGFpbmVyOgoKICAgICog
        cmVnaXN0ZXJlZCB2aWV3cyBhcmUgY3JlYXRlZCBldmVyeSB0aW1lIHRoZXkg
        YXJlIGxvb2tlZCB1cCAodGhleSBhcmUKICAgICAgbm90IHNpbmdsZXRvbnMp
        CiAgICAqIHJlZ2lzdGVyZWQgdGVtcGxhdGVzIGFyZSBub3QgZmFjdG9yaWVz
        OyB0aGUgcmVnaXN0ZXJlZCB2YWx1ZSBpcwogICAgICByZXR1cm5lZCBkaXJl
        Y3RseS4KICAgICogdGhlIHJvdXRlciByZWNlaXZlcyB0aGUgYXBwbGljYXRp
        b24gYXMgaXRzIGBuYW1lc3BhY2VgIHByb3BlcnR5CiAgICAqIGFsbCBjb250
        cm9sbGVycyByZWNlaXZlIHRoZSByb3V0ZXIgYXMgdGhlaXIgYHRhcmdldGAg
        YW5kIGBjb250cm9sbGVyc2AKICAgICAgcHJvcGVydGllcwogICAgKiBhbGwg
        Y29udHJvbGxlcnMgcmVjZWl2ZSB0aGUgYXBwbGljYXRpb24gYXMgdGhlaXIg
        YG5hbWVzcGFjZWAgcHJvcGVydHkKICAgICogdGhlIGFwcGxpY2F0aW9uIHZp
        ZXcgcmVjZWl2ZXMgdGhlIGFwcGxpY2F0aW9uIGNvbnRyb2xsZXIgYXMgaXRz
        CiAgICAgIGBjb250cm9sbGVyYCBwcm9wZXJ0eQogICAgKiB0aGUgYXBwbGlj
        YXRpb24gdmlldyByZWNlaXZlcyB0aGUgYXBwbGljYXRpb24gdGVtcGxhdGUg
        YXMgaXRzCiAgICAgIGBkZWZhdWx0VGVtcGxhdGVgIHByb3BlcnR5CgogICAg
        QG1ldGhvZCBidWlsZENvbnRhaW5lcgogICAgQHN0YXRpYwogICAgQHBhcmFt
        IHtFbWJlci5BcHBsaWNhdGlvbn0gbmFtZXNwYWNlIHRoZSBhcHBsaWNhdGlv
        biB0byBidWlsZCB0aGUKICAgICAgY29udGFpbmVyIGZvci4KICAgIEByZXR1
        cm4ge0VtYmVyLkNvbnRhaW5lcn0gdGhlIGJ1aWx0IGNvbnRhaW5lcgogICov
        CiAgYnVpbGRDb250YWluZXI6IGZ1bmN0aW9uKG5hbWVzcGFjZSkgewogICAg
        dmFyIGNvbnRhaW5lciA9IG5ldyBFbWJlci5Db250YWluZXIoKTsKCiAgICBF
        bWJlci5Db250YWluZXIuZGVmYXVsdENvbnRhaW5lciA9IG5ldyBEZXByZWNh
        dGVkQ29udGFpbmVyKGNvbnRhaW5lcik7CgogICAgY29udGFpbmVyLnNldCA9
        IEVtYmVyLnNldDsKICAgIGNvbnRhaW5lci5yZXNvbHZlciAgPSByZXNvbHZl
        ckZvcihuYW1lc3BhY2UpOwogICAgY29udGFpbmVyLm5vcm1hbGl6ZSA9IGNv
        bnRhaW5lci5yZXNvbHZlci5ub3JtYWxpemU7CiAgICBjb250YWluZXIuZGVz
        Y3JpYmUgID0gY29udGFpbmVyLnJlc29sdmVyLmRlc2NyaWJlOwogICAgY29u
        dGFpbmVyLm1ha2VUb1N0cmluZyA9IGNvbnRhaW5lci5yZXNvbHZlci5tYWtl
        VG9TdHJpbmc7CgogICAgY29udGFpbmVyLm9wdGlvbnNGb3JUeXBlKCdjb21w
        b25lbnQnLCB7IHNpbmdsZXRvbjogZmFsc2UgfSk7CiAgICBjb250YWluZXIu
        b3B0aW9uc0ZvclR5cGUoJ3ZpZXcnLCB7IHNpbmdsZXRvbjogZmFsc2UgfSk7
        CiAgICBjb250YWluZXIub3B0aW9uc0ZvclR5cGUoJ3RlbXBsYXRlJywgeyBp
        bnN0YW50aWF0ZTogZmFsc2UgfSk7CgogICAgCiAgICAgIGNvbnRhaW5lci5v
        cHRpb25zRm9yVHlwZSgnaGVscGVyJywgeyBpbnN0YW50aWF0ZTogZmFsc2Ug
        fSk7CiAgICAKCiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2FwcGxpY2F0aW9u
        Om1haW4nLCBuYW1lc3BhY2UsIHsgaW5zdGFudGlhdGU6IGZhbHNlIH0pOwoK
        ICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29udHJvbGxlcjpiYXNpYycsIEVt
        YmVyLkNvbnRyb2xsZXIsIHsgaW5zdGFudGlhdGU6IGZhbHNlIH0pOwogICAg
        Y29udGFpbmVyLnJlZ2lzdGVyKCdjb250cm9sbGVyOm9iamVjdCcsIEVtYmVy
        Lk9iamVjdENvbnRyb2xsZXIsIHsgaW5zdGFudGlhdGU6IGZhbHNlIH0pOwog
        ICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb250cm9sbGVyOmFycmF5JywgRW1i
        ZXIuQXJyYXlDb250cm9sbGVyLCB7IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsK
        ICAgIGNvbnRhaW5lci5yZWdpc3Rlcigncm91dGU6YmFzaWMnLCBFbWJlci5S
        b3V0ZSwgeyBpbnN0YW50aWF0ZTogZmFsc2UgfSk7CiAgICBjb250YWluZXIu
        cmVnaXN0ZXIoJ2V2ZW50X2Rpc3BhdGNoZXI6bWFpbicsIEVtYmVyLkV2ZW50
        RGlzcGF0Y2hlcik7CgogICAgY29udGFpbmVyLnJlZ2lzdGVyKCdyb3V0ZXI6
        bWFpbicsICBFbWJlci5Sb3V0ZXIpOwogICAgY29udGFpbmVyLmluamVjdGlv
        bigncm91dGVyOm1haW4nLCAnbmFtZXNwYWNlJywgJ2FwcGxpY2F0aW9uOm1h
        aW4nKTsKCiAgICBjb250YWluZXIuaW5qZWN0aW9uKCdjb250cm9sbGVyJywg
        J3RhcmdldCcsICdyb3V0ZXI6bWFpbicpOwogICAgY29udGFpbmVyLmluamVj
        dGlvbignY29udHJvbGxlcicsICduYW1lc3BhY2UnLCAnYXBwbGljYXRpb246
        bWFpbicpOwoKICAgIGNvbnRhaW5lci5pbmplY3Rpb24oJ3JvdXRlJywgJ3Jv
        dXRlcicsICdyb3V0ZXI6bWFpbicpOwoKICAgIHJldHVybiBjb250YWluZXI7
        CiAgfQp9KTsKCi8qKgogIEBwcml2YXRlCgogIFRoaXMgZnVuY3Rpb24gZGVm
        aW5lcyB0aGUgZGVmYXVsdCBsb29rdXAgcnVsZXMgZm9yIGNvbnRhaW5lciBs
        b29rdXBzOgoKICAqIHRlbXBsYXRlcyBhcmUgbG9va2VkIHVwIG9uIGBFbWJl
        ci5URU1QTEFURVNgCiAgKiBvdGhlciBuYW1lcyBhcmUgbG9va2VkIHVwIG9u
        IHRoZSBhcHBsaWNhdGlvbiBhZnRlciBjbGFzc2lmeWluZyB0aGUgbmFtZS4K
        ICAgIEZvciBleGFtcGxlLCBgY29udHJvbGxlcjpwb3N0YCBsb29rcyB1cCBg
        QXBwLlBvc3RDb250cm9sbGVyYCBieSBkZWZhdWx0LgogICogaWYgdGhlIGRl
        ZmF1bHQgbG9va3VwIGZhaWxzLCBsb29rIGZvciByZWdpc3RlcmVkIGNsYXNz
        ZXMgb24gdGhlIGNvbnRhaW5lcgoKICBUaGlzIGFsbG93cyB0aGUgYXBwbGlj
        YXRpb24gdG8gcmVnaXN0ZXIgZGVmYXVsdCBpbmplY3Rpb25zIGluIHRoZSBj
        b250YWluZXIKICB0aGF0IGNvdWxkIGJlIG92ZXJyaWRkZW4gYnkgdGhlIG5v
        cm1hbCBuYW1pbmcgY29udmVudGlvbi4KCiAgQG1ldGhvZCByZXNvbHZlckZv
        cgogIEBwYXJhbSB7RW1iZXIuTmFtZXNwYWNlfSBuYW1lc3BhY2UgdGhlIG5h
        bWVzcGFjZSB0byBsb29rIGZvciBjbGFzc2VzCiAgQHJldHVybiB7Kn0gdGhl
        IHJlc29sdmVkIHZhbHVlIGZvciBhIGdpdmVuIGxvb2t1cAoqLwpmdW5jdGlv
        biByZXNvbHZlckZvcihuYW1lc3BhY2UpIHsKICBpZiAobmFtZXNwYWNlLmdl
        dCgncmVzb2x2ZXInKSkgewogICAgRW1iZXIuZGVwcmVjYXRlKCdBcHBsaWNh
        dGlvbi5yZXNvbHZlciBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIEFwcGxp
        Y2F0aW9uLlJlc29sdmVyJywgZmFsc2UpOwogIH0KCiAgdmFyIFJlc29sdmVy
        Q2xhc3MgPSBuYW1lc3BhY2UuZ2V0KCdyZXNvbHZlcicpIHx8IG5hbWVzcGFj
        ZS5nZXQoJ1Jlc29sdmVyJykgfHwgRW1iZXIuRGVmYXVsdFJlc29sdmVyOwog
        IHZhciByZXNvbHZlciA9IFJlc29sdmVyQ2xhc3MuY3JlYXRlKHsKICAgIG5h
        bWVzcGFjZTogbmFtZXNwYWNlCiAgfSk7CgogIGZ1bmN0aW9uIHJlc29sdmUo
        ZnVsbE5hbWUpIHsKICAgIHJldHVybiByZXNvbHZlci5yZXNvbHZlKGZ1bGxO
        YW1lKTsKICB9CgogIHJlc29sdmUuZGVzY3JpYmUgPSBmdW5jdGlvbihmdWxs
        TmFtZSkgewogICAgcmV0dXJuIHJlc29sdmVyLmxvb2t1cERlc2NyaXB0aW9u
        KGZ1bGxOYW1lKTsKICB9OwoKICByZXNvbHZlLm1ha2VUb1N0cmluZyA9IGZ1
        bmN0aW9uKGZhY3RvcnksIGZ1bGxOYW1lKSB7CiAgICByZXR1cm4gcmVzb2x2
        ZXIubWFrZVRvU3RyaW5nKGZhY3RvcnksIGZ1bGxOYW1lKTsKICB9OwoKICBy
        ZXNvbHZlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICBp
        ZiAocmVzb2x2ZXIubm9ybWFsaXplKSB7CiAgICAgIHJldHVybiByZXNvbHZl
        ci5ub3JtYWxpemUoZnVsbE5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgRW1i
        ZXIuZGVwcmVjYXRlKCdUaGUgUmVzb2x2ZXIgc2hvdWxkIG5vdyBwcm92aWRl
        IGEgXCdub3JtYWxpemVcJyBmdW5jdGlvbicsIGZhbHNlKTsKICAgICAgcmV0
        dXJuIGZ1bGxOYW1lOwogICAgfQogIH07CgogIHJldHVybiByZXNvbHZlOwp9
        CgpFbWJlci5ydW5Mb2FkSG9va3MoJ0VtYmVyLkFwcGxpY2F0aW9uJywgRW1i
        ZXIuQXBwbGljYXRpb24pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLWFwcGxpY2F0aW9uCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7CgpmdW5jdGlvbiB2ZXJpZnlOZWVkc0RlcGVu
        ZGVuY2llcyhjb250cm9sbGVyLCBjb250YWluZXIsIG5lZWRzKSB7CiAgdmFy
        IGRlcGVuZGVuY3ksIGksIGw7CgogIGZvciAoaT0wLCBsPW5lZWRzLmxlbmd0
        aDsgaTxsOyBpKyspIHsKICAgIGRlcGVuZGVuY3kgPSBuZWVkc1tpXTsKICAg
        IGlmIChkZXBlbmRlbmN5LmluZGV4T2YoJzonKSA9PT0gLTEpIHsKICAgICAg
        ZGVwZW5kZW5jeSA9ICJjb250cm9sbGVyOiIgKyBkZXBlbmRlbmN5OwogICAg
        fQoKICAgIC8vIFN0cnVjdHVyZSBhc3NlcnQgdG8gc3RpbGwgZG8gdmVyaWZp
        Y2F0aW9uIGJ1dCBub3Qgc3RyaW5nIGNvbmNhdCBpbiBwcm9kdWN0aW9uCiAg
        ICBpZiAoIWNvbnRhaW5lci5oYXMoZGVwZW5kZW5jeSkpIHsKICAgICAgRW1i
        ZXIuYXNzZXJ0KEVtYmVyLmluc3BlY3QoY29udHJvbGxlcikgKyAiIG5lZWRz
        ICIgKyBkZXBlbmRlbmN5ICsgIiBidXQgaXQgZG9lcyBub3QgZXhpc3QiLCBm
        YWxzZSk7CiAgICB9CiAgfQp9CgovKioKICBAY2xhc3MgQ29udHJvbGxlck1p
        eGluCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5Db250cm9sbGVyTWl4
        aW4ucmVvcGVuKHsKICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBbJ25lZWRz
        J10sCgogIC8qKgogICAgQW4gYXJyYXkgb2Ygb3RoZXIgY29udHJvbGxlciBv
        YmplY3RzIGF2YWlsYWJsZSBpbnNpZGUKICAgIGluc3RhbmNlcyBvZiB0aGlz
        IGNvbnRyb2xsZXIgdmlhIHRoZSBgY29udHJvbGxlcnNgCiAgICBwcm9wZXJ0
        eToKCiAgICBGb3IgZXhhbXBsZSwgd2hlbiB5b3UgZGVmaW5lIGEgY29udHJv
        bGxlcjoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuQ29tbWVudHNDb250
        cm9sbGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVyLmV4dGVuZCh7CiAgICAg
        IG5lZWRzOiBbJ3Bvc3QnXQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgYXBw
        bGljYXRpb24ncyBzaW5nbGUgaW5zdGFuY2Ugb2YgdGhlc2Ugb3RoZXIKICAg
        IGNvbnRyb2xsZXJzIGFyZSBhY2Nlc3NpYmxlIGJ5IG5hbWUgdGhyb3VnaCB0
        aGUKICAgIGBjb250cm9sbGVyc2AgcHJvcGVydHk6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgdGhpcy5nZXQoJ2NvbnRyb2xsZXJzLnBvc3QnKTsgLy8gaW5z
        dGFuY2Ugb2YgQXBwLlBvc3RDb250cm9sbGVyCiAgICBgYGAKCiAgICBUaGlz
        IGlzIG9ubHkgYXZhaWxhYmxlIGZvciBzaW5nbGV0b24gY29udHJvbGxlcnMu
        CgogICAgQHByb3BlcnR5IHtBcnJheX0gbmVlZHMKICAgIEBkZWZhdWx0IFtd
        CiAgKi8KICBuZWVkczogW10sCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIG5lZWRzID0gZ2V0KHRoaXMsICduZWVkcycpLAogICAgbGVuZ3RoID0g
        Z2V0KG5lZWRzLCAnbGVuZ3RoJyk7CgogICAgaWYgKGxlbmd0aCA+IDApIHsK
        ICAgICAgRW1iZXIuYXNzZXJ0KCcgYCcgKyBFbWJlci5pbnNwZWN0KHRoaXMp
        ICsgJyBzcGVjaWZpZXMgYG5lZWRzYCwgYnV0IGRvZXMgbm90IGhhdmUgYSBj
        b250YWluZXIuIFBsZWFzZSBlbnN1cmUgdGhpcyBjb250cm9sbGVyIHdhcyBp
        bnN0YW50aWF0ZWQgd2l0aCBhIGNvbnRhaW5lci4nLCB0aGlzLmNvbnRhaW5l
        cik7CgogICAgICB2ZXJpZnlOZWVkc0RlcGVuZGVuY2llcyh0aGlzLCB0aGlz
        LmNvbnRhaW5lciwgbmVlZHMpOwoKICAgICAgLy8gaWYgbmVlZHMgdGhlbiBp
        bml0aWFsaXplIGNvbnRyb2xsZXJzIHByb3h5CiAgICAgIGdldCh0aGlzLCAn
        Y29udHJvbGxlcnMnKTsKICAgIH0KCiAgICB0aGlzLl9zdXBlci5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBjb250
        cm9sbGVyRm9yCiAgICBAc2VlIHtFbWJlci5Sb3V0ZSNjb250cm9sbGVyRm9y
        fQogICAgQGRlcHJlY2F0ZWQgVXNlIGBuZWVkc2AgaW5zdGVhZAogICovCiAg
        Y29udHJvbGxlckZvcjogZnVuY3Rpb24oY29udHJvbGxlck5hbWUpIHsKICAg
        IEVtYmVyLmRlcHJlY2F0ZSgiQ29udHJvbGxlciNjb250cm9sbGVyRm9yIGlz
        IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgQ29udHJvbGxlciNuZWVkcyBpbnN0
        ZWFkIik7CiAgICByZXR1cm4gRW1iZXIuY29udHJvbGxlckZvcihnZXQodGhp
        cywgJ2NvbnRhaW5lcicpLCBjb250cm9sbGVyTmFtZSk7CiAgfSwKCiAgLyoq
        CiAgICBTdG9yZXMgdGhlIGluc3RhbmNlcyBvZiBvdGhlciBjb250cm9sbGVy
        cyBhdmFpbGFibGUgZnJvbSB3aXRoaW4KICAgIHRoaXMgY29udHJvbGxlci4g
        QW55IGNvbnRyb2xsZXIgbGlzdGVkIGJ5IG5hbWUgaW4gdGhlIGBuZWVkc2AK
        ICAgIHByb3BlcnR5IHdpbGwgYmUgYWNjZXNzaWJsZSBieSBuYW1lIHRocm91
        Z2ggdGhpcyBwcm9wZXJ0eS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        Q29tbWVudHNDb250cm9sbGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVyLmV4
        dGVuZCh7CiAgICAgIG5lZWRzOiBbJ3Bvc3QnXSwKICAgICAgcG9zdFRpdGxl
        OiBmdW5jdGlvbigpewogICAgICAgIHZhciBjdXJyZW50UG9zdCA9IHRoaXMu
        Z2V0KCdjb250cm9sbGVycy5wb3N0Jyk7IC8vIGluc3RhbmNlIG9mIEFwcC5Q
        b3N0Q29udHJvbGxlcgogICAgICAgIHJldHVybiBjdXJyZW50UG9zdC5nZXQo
        J3RpdGxlJyk7CiAgICAgIH0ucHJvcGVydHkoJ2NvbnRyb2xsZXJzLnBvc3Qu
        dGl0bGUnKQogICAgfSk7CiAgICBgYGAKCiAgICBAc2VlIHtFbWJlci5Db250
        cm9sbGVyTWl4aW4jbmVlZHN9CiAgICBAcHJvcGVydHkge09iamVjdH0gY29u
        dHJvbGxlcnMKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIGNvbnRyb2xsZXJz
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBjb250cm9s
        bGVyID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBuZWVkczogZ2V0KGNv
        bnRyb2xsZXIsICduZWVkcycpLAogICAgICBjb250YWluZXI6IGdldChjb250
        cm9sbGVyLCAnY29udGFpbmVyJyksCiAgICAgIHVua25vd25Qcm9wZXJ0eTog
        ZnVuY3Rpb24oY29udHJvbGxlck5hbWUpIHsKICAgICAgICB2YXIgbmVlZHMg
        PSB0aGlzLm5lZWRzLAogICAgICAgICAgZGVwZW5kZW5jeSwgaSwgbDsKICAg
        ICAgICBmb3IgKGk9MCwgbD1uZWVkcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAg
        ICAgICAgICBkZXBlbmRlbmN5ID0gbmVlZHNbaV07CiAgICAgICAgICBpZiAo
        ZGVwZW5kZW5jeSA9PT0gY29udHJvbGxlck5hbWUpIHsKICAgICAgICAgICAg
        cmV0dXJuIHRoaXMuY29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjonICsg
        Y29udHJvbGxlck5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAg
        ICAgdmFyIGVycm9yTWVzc2FnZSA9IEVtYmVyLmluc3BlY3QoY29udHJvbGxl
        cikgKyAnI25lZWRzIGRvZXMgbm90IGluY2x1ZGUgYCcgKyBjb250cm9sbGVy
        TmFtZSArICdgLiBUbyBhY2Nlc3MgdGhlICcgKyBjb250cm9sbGVyTmFtZSAr
        ICcgY29udHJvbGxlciBmcm9tICcgKyBFbWJlci5pbnNwZWN0KGNvbnRyb2xs
        ZXIpICsgJywgJyArIEVtYmVyLmluc3BlY3QoY29udHJvbGxlcikgKyAnIHNo
        b3VsZCBoYXZlIGEgYG5lZWRzYCBwcm9wZXJ0eSB0aGF0IGlzIGFuIGFycmF5
        IG9mIHRoZSBjb250cm9sbGVycyBpdCBoYXMgYWNjZXNzIHRvLic7CiAgICAg
        ICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGVycm9yTWVzc2FnZSk7CiAg
        ICAgIH0KICAgIH07CiAgfSkucmVhZE9ubHkoKQp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkVtYmVy
        IEFwcGxpY2F0aW9uCgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXIt
        YXBwbGljYXRpb24KQHJlcXVpcmVzIGVtYmVyLXZpZXdzLCBlbWJlci1yb3V0
        aW5nCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLWV4dGVuc2lvbi1zdXBwb3J0CiovCi8qKgog
        IFRoZSBgRGF0YUFkYXB0ZXJgIGhlbHBzIGEgZGF0YSBwZXJzaXN0ZW5jZSBs
        aWJyYXJ5CiAgaW50ZXJmYWNlIHdpdGggdG9vbHMgdGhhdCBkZWJ1ZyBFbWJl
        ciBzdWNoCiAgYXMgdGhlIENocm9tZSBFbWJlciBFeHRlbnNpb24uCgogIFRo
        aXMgY2xhc3Mgd2lsbCBiZSBleHRlbmRlZCBieSBhIHBlcnNpc3RlbmNlIGxp
        YnJhcnkKICB3aGljaCB3aWxsIG92ZXJyaWRlIHNvbWUgb2YgdGhlIG1ldGhv
        ZHMgd2l0aAogIGxpYnJhcnktc3BlY2lmaWMgY29kZS4KCiAgVGhlIG1ldGhv
        ZHMgbGlrZWx5IHRvIGJlIG92ZXJyaWRlbiBhcmUKICBgZ2V0RmlsdGVyc2As
        IGBkZXRlY3RgLCBgY29sdW1uc0ZvclR5cGVgLAogIGBnZXRSZWNvcmRzYCwg
        YGdldFJlY29yZENvbHVtblZhbHVlc2AsCiAgYGdldFJlY29yZEtleXdvcmRz
        YCwgYGdldFJlY29yZEZpbHRlclZhbHVlc2AsCiAgYGdldFJlY29yZENvbG9y
        YCwgYG9ic2VydmVSZWNvcmRgCgogIFRoZSBhZGFwdGVyIHdpbGwgbmVlZCB0
        byBiZSByZWdpc3RlcmVkCiAgaW4gdGhlIGFwcGxpY2F0aW9uJ3MgY29udGFp
        bmVyIGFzIGBkYXRhQWRhcHRlcjptYWluYAoKICBFeGFtcGxlOgogIGBgYGph
        dmFzY3JpcHQKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7CiAgICBuYW1l
        OiAiZGF0YUFkYXB0ZXIiLAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNv
        bnRhaW5lciwgYXBwbGljYXRpb24pIHsKICAgICAgYXBwbGljYXRpb24ucmVn
        aXN0ZXIoJ2RhdGFBZGFwdGVyOm1haW4nLCBEUy5EYXRhQWRhcHRlcik7CiAg
        ICB9CiAgfSk7CiAgYGBgCgogIEBjbGFzcyBEYXRhQWRhcHRlcgogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8KRW1iZXIu
        RGF0YUFkYXB0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICBpbml0OiBm
        dW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLnJlbGVh
        c2VNZXRob2RzID0gRW1iZXIuQSgpOwogIH0sCgogIC8qKgogICAgVGhlIGNv
        bnRhaW5lciBvZiB0aGUgYXBwbGljYXRpb24gYmVpbmcgZGVidWdnZWQuCiAg
        ICBUaGlzIHByb3BlcnR5IHdpbGwgYmUgaW5qZWN0ZWQKICAgIG9uIGNyZWF0
        aW9uLgogICovCiAgY29udGFpbmVyOiBudWxsLAoKICAvKioKICAgIEBwcml2
        YXRlCgogICAgTnVtYmVyIG9mIGF0dHJpYnV0ZXMgdG8gc2VuZAogICAgYXMg
        Y29sdW1ucy4gKEVub3VnaCB0byBtYWtlIHRoZSByZWNvcmQKICAgIGlkZW50
        aWZpYWJsZSkuCiAgKi8KICBhdHRyaWJ1dGVMaW1pdDogMywKCiAgLyoqCiAg
        ICBAcHJpdmF0ZQoKICAgIFN0b3JlcyBhbGwgbWV0aG9kcyB0aGF0IGNsZWFy
        IG9ic2VydmVycy4KICAgIFRoZXNlIG1ldGhvZHMgd2lsbCBiZSBjYWxsZWQg
        b24gZGVzdHJ1Y3Rpb24uCiAgKi8KICByZWxlYXNlTWV0aG9kczogRW1iZXIu
        QSgpLAoKICAvKioKICAgIEBwdWJsaWMKCiAgICBTcGVjaWZpZXMgaG93IHJl
        Y29yZHMgY2FuIGJlIGZpbHRlcmVkLgogICAgUmVjb3JkcyByZXR1cm5lZCB3
        aWxsIG5lZWQgdG8gaGF2ZSBhIGBmaWx0ZXJWYWx1ZXNgCiAgICBwcm9wZXJ0
        eSB3aXRoIGEga2V5IGZvciBldmVyeSBuYW1lIGluIHRoZSByZXR1cm5lZCBh
        cnJheS4KCiAgICBAbWV0aG9kIGdldEZpbHRlcnMKICAgIEByZXR1cm4ge0Fy
        cmF5fSBMaXN0IG9mIG9iamVjdHMgZGVmaW5pbmcgZmlsdGVycy4KICAgICBU
        aGUgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5hbWVgIGFuZCBgZGVzY2AgcHJv
        cGVydHkuCiAgKi8KICBnZXRGaWx0ZXJzOiBmdW5jdGlvbigpIHsKICAgIHJl
        dHVybiBFbWJlci5BKCk7CiAgfSwKCiAgLyoqCiAgICBAcHVibGljCgogICAg
        RmV0Y2ggdGhlIG1vZGVsIHR5cGVzIGFuZCBvYnNlcnZlIHRoZW0gZm9yIGNo
        YW5nZXMuCgogICAgQG1ldGhvZCB3YXRjaE1vZGVsVHlwZXMKCiAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSB0eXBlc0FkZGVkIENhbGxiYWNrIHRvIGNhbGwgdG8g
        YWRkIHR5cGVzLgogICAgVGFrZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBjb250
        YWluaW5nIHdyYXBwZWQgdHlwZXMgKHJldHVybmVkIGZyb20gYHdyYXBNb2Rl
        bFR5cGVgKS4KCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlc1VwZGF0ZWQg
        Q2FsbGJhY2sgdG8gY2FsbCB3aGVuIGEgdHlwZSBoYXMgY2hhbmdlZC4KICAg
        IFRha2VzIGFuIGFycmF5IG9mIG9iamVjdHMgY29udGFpbmluZyB3cmFwcGVk
        IHR5cGVzLgoKICAgIEByZXR1cm4ge0Z1bmN0aW9ufSBNZXRob2QgdG8gY2Fs
        bCB0byByZW1vdmUgYWxsIG9ic2VydmVycwogICovCiAgd2F0Y2hNb2RlbFR5
        cGVzOiBmdW5jdGlvbih0eXBlc0FkZGVkLCB0eXBlc1VwZGF0ZWQpIHsKICAg
        IHZhciBtb2RlbFR5cGVzID0gdGhpcy5nZXRNb2RlbFR5cGVzKCksCiAgICAg
        ICAgc2VsZiA9IHRoaXMsIHR5cGVzVG9TZW5kLCByZWxlYXNlTWV0aG9kcyA9
        IEVtYmVyLkEoKTsKCiAgICB0eXBlc1RvU2VuZCA9IG1vZGVsVHlwZXMubWFw
        KGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgdmFyIHdyYXBwZWQgPSBzZWxmLndy
        YXBNb2RlbFR5cGUodHlwZSk7CiAgICAgIHJlbGVhc2VNZXRob2RzLnB1c2go
        c2VsZi5vYnNlcnZlTW9kZWxUeXBlKHR5cGUsIHR5cGVzVXBkYXRlZCkpOwog
        ICAgICByZXR1cm4gd3JhcHBlZDsKICAgIH0pOwoKICAgIHR5cGVzQWRkZWQo
        dHlwZXNUb1NlbmQpOwoKICAgIHZhciByZWxlYXNlID0gZnVuY3Rpb24oKSB7
        CiAgICAgIHJlbGVhc2VNZXRob2RzLmZvckVhY2goZnVuY3Rpb24oZm4pIHsg
        Zm4oKTsgfSk7CiAgICAgIHNlbGYucmVsZWFzZU1ldGhvZHMucmVtb3ZlT2Jq
        ZWN0KHJlbGVhc2UpOwogICAgfTsKICAgIHRoaXMucmVsZWFzZU1ldGhvZHMu
        cHVzaE9iamVjdChyZWxlYXNlKTsKICAgIHJldHVybiByZWxlYXNlOwogIH0s
        CgogIC8qKgogICAgQHB1YmxpYwoKICAgIEZldGNoIHRoZSByZWNvcmRzIG9m
        IGEgZ2l2ZW4gdHlwZSBhbmQgb2JzZXJ2ZSB0aGVtIGZvciBjaGFuZ2VzLgoK
        ICAgIEBtZXRob2Qgd2F0Y2hSZWNvcmRzCgogICAgQHBhcmFtIHtGdW5jdGlv
        bn0gcmVjb3Jkc0FkZGVkIENhbGxiYWNrIHRvIGNhbGwgdG8gYWRkIHJlY29y
        ZHMuCiAgICBUYWtlcyBhbiBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcg
        d3JhcHBlZCByZWNvcmRzLgogICAgVGhlIG9iamVjdCBzaG91bGQgaGF2ZSB0
        aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CiAgICAgIGNvbHVtblZhbHVlczog
        e09iamVjdH0ga2V5IGFuZCB2YWx1ZSBvZiBhIHRhYmxlIGNlbGwKICAgICAg
        b2JqZWN0OiB7T2JqZWN0fSB0aGUgYWN0dWFsIHJlY29yZCBvYmplY3QKCiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSByZWNvcmRzVXBkYXRlZCBDYWxsYmFjayB0
        byBjYWxsIHdoZW4gYSByZWNvcmQgaGFzIGNoYW5nZWQuCiAgICBUYWtlcyBh
        biBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcgd3JhcHBlZCByZWNvcmRz
        LgoKICAgIEBwYXJhbSB7RnVuY3Rpb259IHJlY29yZHNSZW1vdmVkIENhbGxi
        YWNrIHRvIGNhbGwgd2hlbiBhIHJlY29yZCBoYXMgcmVtb3ZlZC4KICAgIFRh
        a2VzIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczoKICAgICAgaW5kZXg6IHRo
        ZSBhcnJheSBpbmRleCB3aGVyZSB0aGUgcmVjb3JkcyB3ZXJlIHJlbW92ZWQK
        ICAgICAgY291bnQ6IHRoZSBudW1iZXIgb2YgcmVjb3JkcyByZW1vdmVkCgog
        ICAgQHJldHVybiB7RnVuY3Rpb259IE1ldGhvZCB0byBjYWxsIHRvIHJlbW92
        ZSBhbGwgb2JzZXJ2ZXJzCiAgKi8KICB3YXRjaFJlY29yZHM6IGZ1bmN0aW9u
        KHR5cGUsIHJlY29yZHNBZGRlZCwgcmVjb3Jkc1VwZGF0ZWQsIHJlY29yZHNS
        ZW1vdmVkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsIHJlbGVhc2VNZXRob2Rz
        ID0gRW1iZXIuQSgpLCByZWNvcmRzID0gdGhpcy5nZXRSZWNvcmRzKHR5cGUp
        LCByZWxlYXNlOwoKICAgIHZhciByZWNvcmRVcGRhdGVkID0gZnVuY3Rpb24o
        dXBkYXRlZFJlY29yZCkgewogICAgICByZWNvcmRzVXBkYXRlZChbdXBkYXRl
        ZFJlY29yZF0pOwogICAgfTsKCiAgICB2YXIgcmVjb3Jkc1RvU2VuZCA9IHJl
        Y29yZHMubWFwKGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWxlYXNlTWV0
        aG9kcy5wdXNoKHNlbGYub2JzZXJ2ZVJlY29yZChyZWNvcmQsIHJlY29yZFVw
        ZGF0ZWQpKTsKICAgICAgcmV0dXJuIHNlbGYud3JhcFJlY29yZChyZWNvcmQp
        OwogICAgfSk7CgoKICAgIHZhciBjb250ZW50RGlkQ2hhbmdlID0gZnVuY3Rp
        b24oYXJyYXksIGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KSB7CiAg
        ICAgIGZvciAodmFyIGkgPSBpZHg7IGkgPCBpZHggKyBhZGRlZENvdW50OyBp
        KyspIHsKICAgICAgICB2YXIgcmVjb3JkID0gYXJyYXkub2JqZWN0QXQoaSk7
        CiAgICAgICAgdmFyIHdyYXBwZWQgPSBzZWxmLndyYXBSZWNvcmQocmVjb3Jk
        KTsKICAgICAgICByZWxlYXNlTWV0aG9kcy5wdXNoKHNlbGYub2JzZXJ2ZVJl
        Y29yZChyZWNvcmQsIHJlY29yZFVwZGF0ZWQpKTsKICAgICAgICByZWNvcmRz
        QWRkZWQoW3dyYXBwZWRdKTsKICAgICAgfQoKICAgICAgaWYgKHJlbW92ZWRD
        b3VudCkgewogICAgICAgIHJlY29yZHNSZW1vdmVkKGlkeCwgcmVtb3ZlZENv
        dW50KTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgb2JzZXJ2ZXIgPSB7IGRp
        ZENoYW5nZTogY29udGVudERpZENoYW5nZSwgd2lsbENoYW5nZTogRW1iZXIu
        SyB9OwogICAgcmVjb3Jkcy5hZGRBcnJheU9ic2VydmVyKHNlbGYsIG9ic2Vy
        dmVyKTsKCiAgICByZWxlYXNlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJlbGVh
        c2VNZXRob2RzLmZvckVhY2goZnVuY3Rpb24oZm4pIHsgZm4oKTsgfSk7CiAg
        ICAgIHJlY29yZHMucmVtb3ZlQXJyYXlPYnNlcnZlcihzZWxmLCBvYnNlcnZl
        cik7CiAgICAgIHNlbGYucmVsZWFzZU1ldGhvZHMucmVtb3ZlT2JqZWN0KHJl
        bGVhc2UpOwogICAgfTsKCiAgICByZWNvcmRzQWRkZWQocmVjb3Jkc1RvU2Vu
        ZCk7CgogICAgdGhpcy5yZWxlYXNlTWV0aG9kcy5wdXNoT2JqZWN0KHJlbGVh
        c2UpOwogICAgcmV0dXJuIHJlbGVhc2U7CiAgfSwKCiAgLyoqCiAgICBAcHJp
        dmF0ZQoKICAgIENsZWFyIGFsbCBvYnNlcnZlcnMgYmVmb3JlIGRlc3RydWN0
        aW9uCiAgKi8KICB3aWxsRGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB0aGlz
        Ll9zdXBlcigpOwogICAgdGhpcy5yZWxlYXNlTWV0aG9kcy5mb3JFYWNoKGZ1
        bmN0aW9uKGZuKSB7CiAgICAgIGZuKCk7CiAgICB9KTsKICB9LAoKICAvKioK
        ICAgIEBwcml2YXRlCgogICAgRGV0ZWN0IHdoZXRoZXIgYSBjbGFzcyBpcyBh
        IG1vZGVsLgoKICAgIFRlc3QgdGhhdCBhZ2FpbnN0IHRoZSBtb2RlbCBjbGFz
        cwogICAgb2YgeW91ciBwZXJzaXN0ZW5jZSBsaWJyYXJ5CgogICAgQG1ldGhv
        ZCBkZXRlY3QKICAgIEBwYXJhbSB7Q2xhc3N9IGtsYXNzIFRoZSBjbGFzcyB0
        byB0ZXN0CiAgICBAcmV0dXJuIGJvb2xlYW4gV2hldGhlciB0aGUgY2xhc3Mg
        aXMgYSBtb2RlbCBjbGFzcyBvciBub3QKICAqLwogIGRldGVjdDogZnVuY3Rp
        b24oa2xhc3MpIHsKICAgIHJldHVybiBmYWxzZTsKICB9LAoKICAvKioKICAg
        IEBwcml2YXRlCgogICAgR2V0IHRoZSBjb2x1bW5zIGZvciBhIGdpdmVuIG1v
        ZGVsIHR5cGUuCgogICAgQG1ldGhvZCBjb2x1bW5zRm9yVHlwZQogICAgQHBh
        cmFtIHtDbGFzc30gdHlwZSBUaGUgbW9kZWwgdHlwZQogICAgQHJldHVybiB7
        QXJyYXl9IEFuIGFycmF5IG9mIGNvbHVtbnMgb2YgdGhlIGZvbGxvd2luZyBm
        b3JtYXQ6CiAgICAgbmFtZToge1N0cmluZ30gbmFtZSBvZiB0aGUgY29sdW1u
        CiAgICAgZGVzYzoge1N0cmluZ30gSHVtYW5pemVkIGRlc2NyaXB0aW9uICh3
        aGF0IHdvdWxkIHNob3cgaW4gYSB0YWJsZSBjb2x1bW4gbmFtZSkKICAqLwog
        IGNvbHVtbnNGb3JUeXBlOiBmdW5jdGlvbih0eXBlKSB7CiAgICByZXR1cm4g
        RW1iZXIuQSgpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBBZGRz
        IG9ic2VydmVycyB0byBhIG1vZGVsIHR5cGUgY2xhc3MuCgogICAgQG1ldGhv
        ZCBvYnNlcnZlTW9kZWxUeXBlCiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlIFRo
        ZSBtb2RlbCB0eXBlIGNsYXNzCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBl
        c1VwZGF0ZWQgQ2FsbGVkIHdoZW4gYSB0eXBlIGlzIG1vZGlmaWVkLgogICAg
        QHJldHVybiB7RnVuY3Rpb259IFRoZSBmdW5jdGlvbiB0byBjYWxsIHRvIHJl
        bW92ZSBvYnNlcnZlcnMKICAqLwoKICBvYnNlcnZlTW9kZWxUeXBlOiBmdW5j
        dGlvbih0eXBlLCB0eXBlc1VwZGF0ZWQpIHsKICAgIHZhciBzZWxmID0gdGhp
        cywgcmVjb3JkcyA9IHRoaXMuZ2V0UmVjb3Jkcyh0eXBlKTsKCiAgICB2YXIg
        b25DaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgdHlwZXNVcGRhdGVkKFtz
        ZWxmLndyYXBNb2RlbFR5cGUodHlwZSldKTsKICAgIH07CiAgICB2YXIgb2Jz
        ZXJ2ZXIgPSB7CiAgICAgIGRpZENoYW5nZTogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgRW1iZXIucnVuLnNjaGVkdWxlT25jZSgnYWN0aW9ucycsIHRoaXMsIG9u
        Q2hhbmdlKTsKICAgICAgfSwKICAgICAgd2lsbENoYW5nZTogRW1iZXIuSwog
        ICAgfTsKCiAgICByZWNvcmRzLmFkZEFycmF5T2JzZXJ2ZXIodGhpcywgb2Jz
        ZXJ2ZXIpOwoKICAgIHZhciByZWxlYXNlID0gZnVuY3Rpb24oKSB7CiAgICAg
        IHJlY29yZHMucmVtb3ZlQXJyYXlPYnNlcnZlcihzZWxmLCBvYnNlcnZlcik7
        CiAgICB9OwoKICAgIHJldHVybiByZWxlYXNlOwogIH0sCgoKICAvKioKICAg
        IEBwcml2YXRlCgogICAgV3JhcHMgYSBnaXZlbiBtb2RlbCB0eXBlIGFuZCBv
        YnNlcnZlcyBjaGFuZ2VzIHRvIGl0LgoKICAgIEBtZXRob2Qgd3JhcE1vZGVs
        VHlwZQogICAgQHBhcmFtIHtDbGFzc30gdHlwZSBBIG1vZGVsIGNsYXNzCiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlc1VwZGF0ZWQgY2FsbGJhY2sgdG8g
        Y2FsbCB3aGVuIHRoZSB0eXBlIGNoYW5nZXMKICAgIEByZXR1cm4ge09iamVj
        dH0gY29udGFpbnMgdGhlIHdyYXBwZWQgdHlwZSBhbmQgdGhlIGZ1bmN0aW9u
        IHRvIHJlbW92ZSBvYnNlcnZlcnMKICAgIEZvcm1hdDoKICAgICAgdHlwZTog
        e09iamVjdH0gdGhlIHdyYXBwZWQgdHlwZQogICAgICAgIFRoZSB3cmFwcGVk
        IHR5cGUgaGFzIHRoZSBmb2xsb3dpbmcgZm9ybWF0OgogICAgICAgICAgbmFt
        ZToge1N0cmluZ30gbmFtZSBvZiB0aGUgdHlwZQogICAgICAgICAgY291bnQ6
        IHtJbnRlZ2VyfSBudW1iZXIgb2YgcmVjb3JkcyBhdmFpbGFibGUKICAgICAg
        ICAgIGNvbHVtbnM6IHtDb2x1bW5zfSBhcnJheSBvZiBjb2x1bW5zIHRvIGRl
        c2NyaWJlIHRoZSByZWNvcmQKICAgICAgICAgIG9iamVjdDoge0NsYXNzfSB0
        aGUgYWN0dWFsIE1vZGVsIHR5cGUgY2xhc3MKICAgICAgcmVsZWFzZToge0Z1
        bmN0aW9ufSBUaGUgZnVuY3Rpb24gdG8gcmVtb3ZlIG9ic2VydmVycwogICov
        CiAgd3JhcE1vZGVsVHlwZTogZnVuY3Rpb24odHlwZSwgdHlwZXNVcGRhdGVk
        KSB7CiAgICB2YXIgcmVsZWFzZSwgcmVjb3JkcyA9IHRoaXMuZ2V0UmVjb3Jk
        cyh0eXBlKSwKICAgICAgICB0eXBlVG9TZW5kLCBzZWxmID0gdGhpczsKCiAg
        ICB0eXBlVG9TZW5kID0gewogICAgICBuYW1lOiB0eXBlLnRvU3RyaW5nKCks
        CiAgICAgIGNvdW50OiBFbWJlci5nZXQocmVjb3JkcywgJ2xlbmd0aCcpLAog
        ICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbnNGb3JUeXBlKHR5cGUpLAogICAg
        ICBvYmplY3Q6IHR5cGUKICAgIH07CgoKICAgIHJldHVybiB0eXBlVG9TZW5k
        OwogIH0sCgoKICAvKioKICAgIEBwcml2YXRlCgogICAgRmV0Y2hlcyBhbGwg
        bW9kZWxzIGRlZmluZWQgaW4gdGhlIGFwcGxpY2F0aW9uLgogICAgVE9ETzog
        VXNlIHRoZSByZXNvbHZlciBpbnN0ZWFkIG9mIGxvb3Bpbmcgb3ZlciBuYW1l
        c3BhY2VzLgoKICAgIEBtZXRob2QgZ2V0TW9kZWxUeXBlcwogICAgQHJldHVy
        biB7QXJyYXl9IEFycmF5IG9mIG1vZGVsIHR5cGVzCiAgKi8KICBnZXRNb2Rl
        bFR5cGVzOiBmdW5jdGlvbigpIHsKICAgIHZhciBuYW1lc3BhY2VzID0gRW1i
        ZXIuQShFbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUyksIHR5cGVzID0gRW1i
        ZXIuQSgpLCBzZWxmID0gdGhpczsKCiAgICBuYW1lc3BhY2VzLmZvckVhY2go
        ZnVuY3Rpb24obmFtZXNwYWNlKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBu
        YW1lc3BhY2UpIHsKICAgICAgICBpZiAoIW5hbWVzcGFjZS5oYXNPd25Qcm9w
        ZXJ0eShrZXkpKSB7IGNvbnRpbnVlOyB9CiAgICAgICAgdmFyIGtsYXNzID0g
        bmFtZXNwYWNlW2tleV07CiAgICAgICAgaWYgKHNlbGYuZGV0ZWN0KGtsYXNz
        KSkgewogICAgICAgICAgdHlwZXMucHVzaChrbGFzcyk7CiAgICAgICAgfQog
        ICAgICB9CiAgICB9KTsKICAgIHJldHVybiB0eXBlczsKICB9LAoKICAvKioK
        ICAgIEBwcml2YXRlCgogICAgRmV0Y2hlcyBhbGwgbG9hZGVkIHJlY29yZHMg
        Zm9yIGEgZ2l2ZW4gdHlwZS4KCiAgICBAbWV0aG9kIGdldFJlY29yZHMKICAg
        IEByZXR1cm4ge0FycmF5fSBhcnJheSBvZiByZWNvcmRzLgogICAgIFRoaXMg
        YXJyYXkgd2lsbCBiZSBvYnNlcnZlZCBmb3IgY2hhbmdlcywKICAgICBzbyBp
        dCBzaG91bGQgdXBkYXRlIHdoZW4gbmV3IHJlY29yZHMgYXJlIGFkZGVkL3Jl
        bW92ZWQuCiAgKi8KICBnZXRSZWNvcmRzOiBmdW5jdGlvbih0eXBlKSB7CiAg
        ICByZXR1cm4gRW1iZXIuQSgpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUK
        CiAgICBXcmFwcyBhIHJlY29yZCBhbmQgb2JzZXJ2ZXJzIGNoYW5nZXMgdG8g
        aXQKCiAgICBAbWV0aG9kIHdyYXBSZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0
        fSByZWNvcmQgVGhlIHJlY29yZCBpbnN0YW5jZQogICAgQHJldHVybiB7T2Jq
        ZWN0fSB0aGUgd3JhcHBlZCByZWNvcmQuIEZvcm1hdDoKICAgIGNvbHVtblZh
        bHVlczoge0FycmF5fQogICAgc2VhcmNoS2V5d29yZHM6IHtBcnJheX0KICAq
        LwogIHdyYXBSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgdmFyIHJl
        Y29yZFRvU2VuZCA9IHsgb2JqZWN0OiByZWNvcmQgfSwgY29sdW1uVmFsdWVz
        ID0ge30sIHNlbGYgPSB0aGlzOwoKICAgIHJlY29yZFRvU2VuZC5jb2x1bW5W
        YWx1ZXMgPSB0aGlzLmdldFJlY29yZENvbHVtblZhbHVlcyhyZWNvcmQpOwog
        ICAgcmVjb3JkVG9TZW5kLnNlYXJjaEtleXdvcmRzID0gdGhpcy5nZXRSZWNv
        cmRLZXl3b3JkcyhyZWNvcmQpOwogICAgcmVjb3JkVG9TZW5kLmZpbHRlclZh
        bHVlcyA9IHRoaXMuZ2V0UmVjb3JkRmlsdGVyVmFsdWVzKHJlY29yZCk7CiAg
        ICByZWNvcmRUb1NlbmQuY29sb3IgPSB0aGlzLmdldFJlY29yZENvbG9yKHJl
        Y29yZCk7CgogICAgcmV0dXJuIHJlY29yZFRvU2VuZDsKICB9LAoKICAvKioK
        ICAgIEBwcml2YXRlCgogICAgR2V0cyB0aGUgdmFsdWVzIGZvciBlYWNoIGNv
        bHVtbi4KCiAgICBAbWV0aG9kIGdldFJlY29yZENvbHVtblZhbHVlcwogICAg
        QHJldHVybiB7T2JqZWN0fSBLZXlzIHNob3VsZCBtYXRjaCBjb2x1bW4gbmFt
        ZXMgZGVmaW5lZAogICAgYnkgdGhlIG1vZGVsIHR5cGUuCiAgKi8KICBnZXRS
        ZWNvcmRDb2x1bW5WYWx1ZXM6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgcmV0
        dXJuIHt9OwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBSZXR1cm5z
        IGtleXdvcmRzIHRvIG1hdGNoIHdoZW4gc2VhcmNoaW5nIHJlY29yZHMuCgog
        ICAgQG1ldGhvZCBnZXRSZWNvcmRLZXl3b3JkcwogICAgQHJldHVybiB7QXJy
        YXl9IFJlbGV2YW50IGtleXdvcmRzIGZvciBzZWFyY2guCiAgKi8KICBnZXRS
        ZWNvcmRLZXl3b3JkczogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICByZXR1cm4g
        RW1iZXIuQSgpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBSZXR1
        cm5zIHRoZSB2YWx1ZXMgb2YgZmlsdGVycyBkZWZpbmVkIGJ5IGBnZXRGaWx0
        ZXJzYC4KCiAgICBAbWV0aG9kIGdldFJlY29yZEZpbHRlclZhbHVlcwogICAg
        QHBhcmFtIHtPYmplY3R9IHJlY29yZCBUaGUgcmVjb3JkIGluc3RhbmNlCiAg
        ICBAcmV0dXJuIHtPYmplY3R9IFRoZSBmaWx0ZXIgdmFsdWVzCiAgKi8KICBn
        ZXRSZWNvcmRGaWx0ZXJWYWx1ZXM6IGZ1bmN0aW9uKHJlY29yZCkgewogICAg
        cmV0dXJuIHt9OwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBFYWNo
        IHJlY29yZCBjYW4gaGF2ZSBhIGNvbG9yIHRoYXQgcmVwcmVzZW50cyBpdHMg
        c3RhdGUuCgogICAgQG1ldGhvZCBnZXRSZWNvcmRDb2xvcgogICAgQHBhcmFt
        IHtPYmplY3R9IHJlY29yZCBUaGUgcmVjb3JkIGluc3RhbmNlCiAgICBAcmV0
        dXJuIHtTdHJpbmd9IFRoZSByZWNvcmQncyBjb2xvcgogICAgICBQb3NzaWJs
        ZSBvcHRpb25zOiBibGFjaywgcmVkLCBibHVlLCBncmVlbgogICovCiAgZ2V0
        UmVjb3JkQ29sb3I6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgcmV0dXJuIG51
        bGw7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIE9ic2VydmVzIGFs
        bCByZWxldmFudCBwcm9wZXJ0aWVzIGFuZCByZS1zZW5kcyB0aGUgd3JhcHBl
        ZCByZWNvcmQKICAgIHdoZW4gYSBjaGFuZ2Ugb2NjdXJzLgoKICAgIEBtZXRo
        b2Qgb2JzZXJ2ZXJSZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0fSByZWNvcmQg
        VGhlIHJlY29yZCBpbnN0YW5jZQogICAgQHBhcmFtIHtGdW5jdGlvbn0gcmVj
        b3JkVXBkYXRlZCBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIGEgcmVjb3Jk
        IGlzIHVwZGF0ZWQuCiAgICBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGZ1bmN0
        aW9uIHRvIGNhbGwgdG8gcmVtb3ZlIGFsbCBvYnNlcnZlcnMuCiAgKi8KICBv
        YnNlcnZlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQsIHJlY29yZFVwZGF0ZWQp
        IHsKICAgIHJldHVybiBmdW5jdGlvbigpe307CiAgfQoKfSk7CgoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKRW1iZXIgRXh0ZW5zaW9uIFN1cHBvcnQK
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1leHRlbnNpb24tc3Vw
        cG9ydApAcmVxdWlyZXMgZW1iZXItYXBwbGljYXRpb24KKi8KCn0pKCk7Cgoo
        ZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9kdWxl
        IGVtYmVyLXRlc3RpbmcKICovCnZhciBzbGljZSA9IFtdLnNsaWNlLAogICAg
        aGVscGVycyA9IHt9LAogICAgb3JpZ2luYWxNZXRob2RzID0ge30sCiAgICBp
        bmplY3RIZWxwZXJzQ2FsbGJhY2tzID0gW10sCiAgICBSb3V0ZXIgPSByZXF1
        aXJlTW9kdWxlKCdyb3V0ZXInKTsKCi8qKgogIFRoaXMgaXMgYSBjb250YWlu
        ZXIgZm9yIGFuIGFzc29ydG1lbnQgb2YgdGVzdGluZyByZWxhdGVkIGZ1bmN0
        aW9uYWxpdHk6CgogICogQ2hvb3NlIHlvdXIgZGVmYXVsdCB0ZXN0IGFkYXB0
        ZXIgKGZvciB5b3VyIGZyYW1ld29yayBvZiBjaG9pY2UpLgogICogUmVnaXN0
        ZXIvVW5yZWdpc3RlciBhZGRpdGlvbmFsIHRlc3QgaGVscGVycy4KICAqIFNl
        dHVwIGNhbGxiYWNrcyB0byBiZSBmaXJlZCB3aGVuIHRoZSB0ZXN0IGhlbHBl
        cnMgYXJlIGluamVjdGVkIGludG8KICAgIHlvdXIgYXBwbGljYXRpb24uCgog
        IEBjbGFzcyBUZXN0CiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5UZXN0
        ID0gewoKICAvKioKICAgIGByZWdpc3RlckhlbHBlcmAgaXMgdXNlZCB0byBy
        ZWdpc3RlciBhIHRlc3QgaGVscGVyIHRoYXQgd2lsbCBiZSBpbmplY3RlZAog
        ICAgd2hlbiBgQXBwLmluamVjdFRlc3RIZWxwZXJzYCBpcyBjYWxsZWQuCgog
        ICAgVGhlIGhlbHBlciBtZXRob2Qgd2lsbCBhbHdheXMgYmUgY2FsbGVkIHdp
        dGggdGhlIGN1cnJlbnQgQXBwbGljYXRpb24gYXMKICAgIHRoZSBmaXJzdCBw
        YXJhbWV0ZXIuCgogICAgRm9yIGV4YW1wbGU6CiAgICBgYGBqYXZhc2NyaXB0
        CiAgICAgIEVtYmVyLlRlc3QucmVnaXN0ZXJIZWxwZXIoJ2Jvb3QnLCBmdW5j
        dGlvbihhcHApIHsKICAgICAgICBFbWJlci5ydW4oYXBwLCBhcHAuYWR2YW5j
        ZVJlYWRpbmVzcyk7CiAgICAgIH0pOwogICAgYGBgCgogICAgVGhpcyBoZWxw
        ZXIgY2FuIGxhdGVyIGJlIGNhbGxlZCB3aXRob3V0IGFyZ3VtZW50cyBiZWNh
        dXNlIGl0IHdpbGwgYmUKICAgIGNhbGxlZCB3aXRoIGBhcHBgIGFzIHRoZSBm
        aXJzdCBwYXJhbWV0ZXIuCgogICAgYGBgamF2YXNjcmlwdAogICAgICBBcHAg
        PSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICAgICAgQXBwLmluamVj
        dFRlc3RIZWxwZXJzKCk7CiAgICAgIGJvb3QoKTsKICAgIGBgYAoKICAgIEBw
        dWJsaWMKICAgIEBtZXRob2QgcmVnaXN0ZXJIZWxwZXIKICAgIEBwYXJhbSB7
        U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBoZWxwZXIgbWV0aG9kIHRv
        IGFkZC4KICAgIEBwYXJhbSB7RnVuY3Rpb259IGhlbHBlck1ldGhvZAogICAg
        QHBhcmFtIG9wdGlvbnMge09iamVjdH0KICAqLwogIHJlZ2lzdGVySGVscGVy
        OiBmdW5jdGlvbihuYW1lLCBoZWxwZXJNZXRob2QpIHsKICAgIGhlbHBlcnNb
        bmFtZV0gPSB7CiAgICAgIG1ldGhvZDogaGVscGVyTWV0aG9kLAogICAgICBt
        ZXRhOiB7IHdhaXQ6IGZhbHNlIH0KICAgIH07CiAgfSwKCiAgLyoqCiAgICBg
        cmVnaXN0ZXJBc3luY0hlbHBlcmAgaXMgdXNlZCB0byByZWdpc3RlciBhbiBh
        c3luYyB0ZXN0IGhlbHBlciB0aGF0IHdpbGwgYmUgaW5qZWN0ZWQKICAgIHdo
        ZW4gYEFwcC5pbmplY3RUZXN0SGVscGVyc2AgaXMgY2FsbGVkLgoKICAgIFRo
        ZSBoZWxwZXIgbWV0aG9kIHdpbGwgYWx3YXlzIGJlIGNhbGxlZCB3aXRoIHRo
        ZSBjdXJyZW50IEFwcGxpY2F0aW9uIGFzCiAgICB0aGUgZmlyc3QgcGFyYW1l
        dGVyLgoKICAgIEZvciBleGFtcGxlOgogICAgYGBgamF2YXNjcmlwdAogICAg
        ICBFbWJlci5UZXN0LnJlZ2lzdGVyQXN5bmNIZWxwZXIoJ2Jvb3QnLCBmdW5j
        dGlvbihhcHApIHsKICAgICAgICBFbWJlci5ydW4oYXBwLCBhcHAuYWR2YW5j
        ZVJlYWRpbmVzcyk7CiAgICAgIH0pOwogICAgYGBgCgogICAgVGhlIGFkdmFu
        dGFnZSBvZiBhbiBhc3luYyBoZWxwZXIgaXMgdGhhdCBpdCB3aWxsIG5vdCBy
        dW4KICAgIHVudGlsIHRoZSBsYXN0IGFzeW5jIGhlbHBlciBoYXMgY29tcGxl
        dGVkLiAgQWxsIGFzeW5jIGhlbHBlcnMKICAgIGFmdGVyIGl0IHdpbGwgd2Fp
        dCBmb3IgaXQgY29tcGxldGUgYmVmb3JlIHJ1bm5pbmcuCgoKICAgIEZvciBl
        eGFtcGxlOgogICAgYGBgamF2YXNjcmlwdAogICAgICBFbWJlci5UZXN0LnJl
        Z2lzdGVyQXN5bmNIZWxwZXIoJ2RlbGV0ZVBvc3QnLCBmdW5jdGlvbihhcHAs
        IHBvc3RJZCkgewogICAgICAgIGNsaWNrKCcuZGVsZXRlLScgKyBwb3N0SWQp
        OwogICAgICB9KTsKCiAgICAgIC8vIC4uLiBpbiB5b3VyIHRlc3QKICAgICAg
        dmlzaXQoJy9wb3N0LzInKTsKICAgICAgZGVsZXRlUG9zdCgyKTsKICAgICAg
        dmlzaXQoJy9wb3N0LzMnKTsKICAgICAgZGVsZXRlUG9zdCgzKTsKICAgIGBg
        YAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2QgcmVnaXN0ZXJBc3luY0hlbHBl
        cgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGhl
        bHBlciBtZXRob2QgdG8gYWRkLgogICAgQHBhcmFtIHtGdW5jdGlvbn0gaGVs
        cGVyTWV0aG9kCiAgKi8KICByZWdpc3RlckFzeW5jSGVscGVyOiBmdW5jdGlv
        bihuYW1lLCBoZWxwZXJNZXRob2QpIHsKICAgIGhlbHBlcnNbbmFtZV0gPSB7
        CiAgICAgIG1ldGhvZDogaGVscGVyTWV0aG9kLAogICAgICBtZXRhOiB7IHdh
        aXQ6IHRydWUgfQogICAgfTsKICB9LAoKICAvKioKICAgIFJlbW92ZSBhIHBy
        ZXZpb3VzbHkgYWRkZWQgaGVscGVyIG1ldGhvZC4KCiAgICBFeGFtcGxlOgog
        ICAgYGBgCiAgICBFbWJlci5UZXN0LnVucmVnaXN0ZXJIZWxwZXIoJ3dhaXQn
        KTsKICAgIGBgYAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2QgdW5yZWdpc3Rl
        ckhlbHBlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGhlbHBlciB0
        byByZW1vdmUuCiAgKi8KICB1bnJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihu
        YW1lKSB7CiAgICBkZWxldGUgaGVscGVyc1tuYW1lXTsKICAgIGlmIChvcmln
        aW5hbE1ldGhvZHNbbmFtZV0pIHsKICAgICAgd2luZG93W25hbWVdID0gb3Jp
        Z2luYWxNZXRob2RzW25hbWVdOwogICAgfQogICAgZGVsZXRlIG9yaWdpbmFs
        TWV0aG9kc1tuYW1lXTsKICAgIGRlbGV0ZSBFbWJlci5UZXN0LlByb21pc2Uu
        cHJvdG90eXBlW25hbWVdOwogIH0sCgogIC8qKgogICAgVXNlZCB0byByZWdp
        c3RlciBjYWxsYmFja3MgdG8gYmUgZmlyZWQgd2hlbmV2ZXIgYEFwcC5pbmpl
        Y3RUZXN0SGVscGVyc2AKICAgIGlzIGNhbGxlZC4KCiAgICBUaGUgY2FsbGJh
        Y2sgd2lsbCByZWNlaXZlIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIGFzIGFu
        IGFyZ3VtZW50LgoKICAgIEV4YW1wbGU6CiAgICBgYGAKICAgIEVtYmVyLlRl
        c3Qub25JbmplY3RIZWxwZXJzKGZ1bmN0aW9uKCkgewogICAgICBFbWJlci4k
        KGRvY3VtZW50KS5hamF4U3RhcnQoZnVuY3Rpb24oKSB7CiAgICAgICAgVGVz
        dC5wZW5kaW5nQWpheFJlcXVlc3RzKys7CiAgICAgIH0pOwoKICAgICAgRW1i
        ZXIuJChkb2N1bWVudCkuYWpheFN0b3AoZnVuY3Rpb24oKSB7CiAgICAgICAg
        VGVzdC5wZW5kaW5nQWpheFJlcXVlc3RzLS07CiAgICAgIH0pOwogICAgfSk7
        CiAgICBgYGAKCiAgICBAcHVibGljCiAgICBAbWV0aG9kIG9uSW5qZWN0SGVs
        cGVycwogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0
        aW9uIHRvIGJlIGNhbGxlZC4KICAqLwogIG9uSW5qZWN0SGVscGVyczogZnVu
        Y3Rpb24oY2FsbGJhY2spIHsKICAgIGluamVjdEhlbHBlcnNDYWxsYmFja3Mu
        cHVzaChjYWxsYmFjayk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIHJldHVybnMg
        YSB0aGVuYWJsZSB0YWlsb3JlZCBmb3IgdGVzdGluZy4gIEl0IGNhdGNoZXMg
        ZmFpbGVkCiAgICBgb25TdWNjZXNzYCBjYWxsYmFja3MgYW5kIGludm9rZXMg
        dGhlIGBFbWJlci5UZXN0LmFkYXB0ZXIuZXhjZXB0aW9uYAogICAgY2FsbGJh
        Y2sgaW4gdGhlIGxhc3QgY2hhaW5lZCB0aGVuLgoKICAgIFRoaXMgbWV0aG9k
        IHNob3VsZCBiZSByZXR1cm5lZCBieSBhc3luYyBoZWxwZXJzIHN1Y2ggYXMg
        YHdhaXRgLgoKICAgIEBwdWJsaWMKICAgIEBtZXRob2QgcHJvbWlzZQogICAg
        QHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXIgVGhlIGZ1bmN0aW9uIHVzZWQg
        dG8gcmVzb2x2ZSB0aGUgcHJvbWlzZS4KICAqLwogIHByb21pc2U6IGZ1bmN0
        aW9uKHJlc29sdmVyKSB7CiAgICByZXR1cm4gbmV3IEVtYmVyLlRlc3QuUHJv
        bWlzZShyZXNvbHZlcik7CiAgfSwKCiAgLyoqCiAgIFVzZWQgdG8gYWxsb3cg
        ZW1iZXItdGVzdGluZyB0byBjb21tdW5pY2F0ZSB3aXRoIGEgc3BlY2lmaWMg
        dGVzdGluZwogICBmcmFtZXdvcmsuCgogICBZb3UgY2FuIG1hbnVhbGx5IHNl
        dCBpdCBiZWZvcmUgY2FsbGluZyBgQXBwLnNldHVwRm9yVGVzdGluZygpYC4K
        CiAgIEV4YW1wbGU6CiAgIGBgYAogICBFbWJlci5UZXN0LmFkYXB0ZXIgPSBN
        eUN1c3RvbUFkYXB0ZXIuY3JlYXRlKCkKICAgYGBgCgogICBJZiB5b3UgZG8g
        bm90IHNldCBpdCwgZW1iZXItdGVzdGluZyB3aWxsIGRlZmF1bHQgdG8gYEVt
        YmVyLlRlc3QuUVVuaXRBZGFwdGVyYC4KCiAgIEBwdWJsaWMKICAgQHByb3Bl
        cnR5IGFkYXB0ZXIKICAgQHR5cGUge0NsYXNzfSBUaGUgYWRhcHRlciB0byBi
        ZSB1c2VkLgogICBAZGVmYXVsdCBFbWJlci5UZXN0LlFVbml0QWRhcHRlcgog
        ICovCiAgYWRhcHRlcjogbnVsbCwKCiAgLyoqCiAgICBSZXBsYWNlbWVudCBm
        b3IgYEVtYmVyLlJTVlAucmVzb2x2ZWAKICAgIFRoZSBvbmx5IGRpZmZlcmVu
        Y2UgaXMgdGhpcyB1c2VzCiAgICBhbmQgaW5zdGFuY2Ugb2YgYEVtYmVyLlRl
        c3QuUHJvbWlzZWAKCiAgICBAcHVibGljCiAgICBAbWV0aG9kIHJlc29sdmUK
        ICAgIEBwYXJhbSB7TWl4ZWR9IFRoZSB2YWx1ZSB0byByZXNvbHZlCiAgKi8K
        ICByZXNvbHZlOiBmdW5jdGlvbih2YWwpIHsKICAgIHJldHVybiBFbWJlci5U
        ZXN0LnByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICByZXR1cm4g
        cmVzb2x2ZSh2YWwpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgIEBwdWJsaWMK
        CiAgICAgVGhpcyBhbGxvd3MgZW1iZXItdGVzdGluZyB0byBwbGF5IG5pY2Vs
        eSB3aXRoIG90aGVyIGFzeW5jaHJvbm91cwogICAgIGV2ZW50cywgc3VjaCBh
        cyBhbiBhcHBsaWNhdGlvbiB0aGF0IGlzIHdhaXRpbmcgZm9yIGEgQ1NTMwog
        ICAgIHRyYW5zaXRpb24gb3IgYW4gSW5kZXhEQiB0cmFuc2FjdGlvbi4KCiAg
        ICAgRm9yIGV4YW1wbGU6CiAgICAgYGBgamF2YXNjcmlwdAogICAgIEVtYmVy
        LlRlc3QucmVnaXN0ZXJXYWl0ZXIoZnVuY3Rpb24oKSB7CiAgICAgcmV0dXJu
        IG15UGVuZGluZ1RyYW5zYWN0aW9ucygpID09IDA7CiAgICAgfSk7CiAgICAg
        YGBgCiAgICAgVGhlIGBjb250ZXh0YCBhcmd1bWVudCBhbGxvd3MgeW91IHRv
        IG9wdGlvbmFsbHkgc3BlY2lmeSB0aGUgYHRoaXNgCiAgICAgd2l0aCB3aGlj
        aCB5b3VyIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZC4KCiAgICAgRm9yIGV4
        YW1wbGU6CiAgICAgYGBgamF2YXNjcmlwdAogICAgIEVtYmVyLlRlc3QucmVn
        aXN0ZXJXYWl0ZXIoTXlEQiwgTXlEQi5oYXNQZW5kaW5nVHJhbnNhY3Rpb25z
        KTsKICAgICBgYGAKICAgICBAcHVibGljCiAgICAgQG1ldGhvZCByZWdpc3Rl
        cldhaXRlcgogICAgIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0IChvcHRpb25h
        bCkKICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICovCiAgcmVn
        aXN0ZXJXYWl0ZXI6IGZ1bmN0aW9uKGNvbnRleHQsIGNhbGxiYWNrKSB7CiAg
        ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAgICBjYWxsYmFj
        ayA9IGNvbnRleHQ7CiAgICAgIGNvbnRleHQgPSBudWxsOwogICAgfQogICAg
        aWYgKCF0aGlzLndhaXRlcnMpIHsKICAgICAgdGhpcy53YWl0ZXJzID0gRW1i
        ZXIuQSgpOwogICAgfQogICAgdGhpcy53YWl0ZXJzLnB1c2goW2NvbnRleHQs
        IGNhbGxiYWNrXSk7CiAgfSwKICAvKioKICAgICBgdW5yZWdpc3RlcldhaXRl
        cmAgaXMgdXNlZCB0byB1bnJlZ2lzdGVyIGEgY2FsbGJhY2sgdGhhdCB3YXMK
        ICAgICByZWdpc3RlcmVkIHdpdGggYHJlZ2lzdGVyV2FpdGVyYC4KCiAgICAg
        QHB1YmxpYwogICAgIEBtZXRob2QgdW5yZWdpc3RlcldhaXRlcgogICAgIEBw
        YXJhbSB7T2JqZWN0fSBjb250ZXh0IChvcHRpb25hbCkKICAgICBAcGFyYW0g
        e0Z1bmN0aW9ufSBjYWxsYmFjawogICovCiAgdW5yZWdpc3RlcldhaXRlcjog
        ZnVuY3Rpb24oY29udGV4dCwgY2FsbGJhY2spIHsKICAgIHZhciBwYWlyOwog
        ICAgaWYgKCF0aGlzLndhaXRlcnMpIHsgcmV0dXJuOyB9CiAgICBpZiAoYXJn
        dW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAgICBjYWxsYmFjayA9IGNvbnRl
        eHQ7CiAgICAgIGNvbnRleHQgPSBudWxsOwogICAgfQogICAgcGFpciA9IFtj
        b250ZXh0LCBjYWxsYmFja107CiAgICB0aGlzLndhaXRlcnMgPSBFbWJlci5B
        KHRoaXMud2FpdGVycy5maWx0ZXIoZnVuY3Rpb24oZWx0KSB7CiAgICAgIHJl
        dHVybiBFbWJlci5jb21wYXJlKGVsdCwgcGFpcikhPT0wOwogICAgfSkpOwog
        IH0KfTsKCmZ1bmN0aW9uIGhlbHBlcihhcHAsIG5hbWUpIHsKICB2YXIgZm4g
        PSBoZWxwZXJzW25hbWVdLm1ldGhvZCwKICAgICAgbWV0YSA9IGhlbHBlcnNb
        bmFtZV0ubWV0YTsKCiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgdmFyIGFy
        Z3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyksCiAgICAgICAgbGFzdFByb21p
        c2UgPSBFbWJlci5UZXN0Lmxhc3RQcm9taXNlOwoKICAgIGFyZ3MudW5zaGlm
        dChhcHApOwoKICAgIC8vIHNvbWUgaGVscGVycyBhcmUgbm90IGFzeW5jIGFu
        ZAogICAgLy8gbmVlZCB0byByZXR1cm4gYSB2YWx1ZSBpbW1lZGlhdGVseS4K
        ICAgIC8vIGV4YW1wbGU6IGBmaW5kYAogICAgaWYgKCFtZXRhLndhaXQpIHsK
        ICAgICAgcmV0dXJuIGZuLmFwcGx5KGFwcCwgYXJncyk7CiAgICB9CgogICAg
        aWYgKCFsYXN0UHJvbWlzZSkgewogICAgICAvLyBJdCdzIHRoZSBmaXJzdCBh
        c3luYyBoZWxwZXIgaW4gY3VycmVudCBjb250ZXh0CiAgICAgIGxhc3RQcm9t
        aXNlID0gZm4uYXBwbHkoYXBwLCBhcmdzKTsKICAgIH0gZWxzZSB7CiAgICAg
        IC8vIHdhaXQgZm9yIGxhc3QgaGVscGVyJ3MgcHJvbWlzZSB0byByZXNvbHZl
        CiAgICAgIC8vIGFuZCB0aGVuIGV4ZWN1dGUKICAgICAgcnVuKGZ1bmN0aW9u
        KCkgewogICAgICAgIGxhc3RQcm9taXNlID0gRW1iZXIuVGVzdC5yZXNvbHZl
        KGxhc3RQcm9taXNlKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0
        dXJuIGZuLmFwcGx5KGFwcCwgYXJncyk7CiAgICAgICAgfSk7CiAgICAgIH0p
        OwogICAgfQoKICAgIHJldHVybiBsYXN0UHJvbWlzZTsKICB9Owp9CgpmdW5j
        dGlvbiBydW4oZm4pIHsKICBpZiAoIUVtYmVyLnJ1bi5jdXJyZW50UnVuTG9v
        cCkgewogICAgRW1iZXIucnVuKGZuKTsKICB9IGVsc2UgewogICAgZm4oKTsK
        ICB9Cn0KCkVtYmVyLkFwcGxpY2F0aW9uLnJlb3Blbih7CiAgLyoqCiAgICBA
        cHJvcGVydHkgdGVzdEhlbHBlcnMKICAgIEB0eXBlIHtPYmplY3R9CiAgICBA
        ZGVmYXVsdCB7fQogICovCiAgdGVzdEhlbHBlcnM6IHt9LAoKICAvKioKICAg
        VGhpcyBob29rIGRlZmVycyB0aGUgcmVhZGluZXNzIG9mIHRoZSBhcHBsaWNh
        dGlvbiwgc28gdGhhdCB5b3UgY2FuIHN0YXJ0CiAgIHRoZSBhcHAgd2hlbiB5
        b3VyIHRlc3RzIGFyZSByZWFkeSB0byBydW4uIEl0IGFsc28gc2V0cyB0aGUg
        cm91dGVyJ3MKICAgbG9jYXRpb24gdG8gJ25vbmUnLCBzbyB0aGF0IHRoZSB3
        aW5kb3cncyBsb2NhdGlvbiB3aWxsIG5vdCBiZSBtb2RpZmllZAogICAocHJl
        dmVudGluZyBib3RoIGFjY2lkZW50YWwgbGVha2luZyBvZiBzdGF0ZSBiZXR3
        ZWVuIHRlc3RzIGFuZCBpbnRlcmZlcmVuY2UKICAgd2l0aCB5b3VyIHRlc3Rp
        bmcgZnJhbWV3b3JrKS4KCiAgIEV4YW1wbGU6CiAgYGBgCiAgQXBwLnNldHVw
        Rm9yVGVzdGluZygpOwogIGBgYAoKICAgIEBtZXRob2Qgc2V0dXBGb3JUZXN0
        aW5nCiAgKi8KICBzZXR1cEZvclRlc3Rpbmc6IGZ1bmN0aW9uKCkgewogICAg
        RW1iZXIudGVzdGluZyA9IHRydWU7CgogICAgdGhpcy5kZWZlclJlYWRpbmVz
        cygpOwoKICAgIHRoaXMuUm91dGVyLnJlb3Blbih7CiAgICAgIGxvY2F0aW9u
        OiAnbm9uZScKICAgIH0pOwoKICAgIC8vIGlmIGFkYXB0ZXIgaXMgbm90IG1h
        bnVhbGx5IHNldCBkZWZhdWx0IHRvIFFVbml0CiAgICBpZiAoIUVtYmVyLlRl
        c3QuYWRhcHRlcikgewogICAgICAgRW1iZXIuVGVzdC5hZGFwdGVyID0gRW1i
        ZXIuVGVzdC5RVW5pdEFkYXB0ZXIuY3JlYXRlKCk7CiAgICB9CiAgfSwKCiAg
        LyoqCiAgICBUaGlzIGluamVjdHMgdGhlIHRlc3QgaGVscGVycyBpbnRvIHRo
        ZSB3aW5kb3cncyBzY29wZS4gSWYgYSBmdW5jdGlvbiBvZiB0aGUKICAgIHNh
        bWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQgaXQgd2lsbCBiZSBj
        YWNoZWQgKHNvIHRoYXQgaXQgY2FuIGJlIHJlc2V0CiAgICBpZiB0aGUgaGVs
        cGVyIGlzIHJlbW92ZWQgd2l0aCBgdW5yZWdpc3RlckhlbHBlcmAgb3IgYHJl
        bW92ZVRlc3RIZWxwZXJzYCkuCgogICBBbnkgY2FsbGJhY2tzIHJlZ2lzdGVy
        ZWQgd2l0aCBgb25JbmplY3RIZWxwZXJzYCB3aWxsIGJlIGNhbGxlZCBvbmNl
        IHRoZQogICBoZWxwZXJzIGhhdmUgYmVlbiBpbmplY3RlZC4KCiAgRXhhbXBs
        ZToKICBgYGAKICBBcHAuaW5qZWN0VGVzdEhlbHBlcnMoKTsKICBgYGAKCiAg
        ICBAbWV0aG9kIGluamVjdFRlc3RIZWxwZXJzCiAgKi8KICBpbmplY3RUZXN0
        SGVscGVyczogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnRlc3RIZWxwZXJzID0g
        e307CiAgICBmb3IgKHZhciBuYW1lIGluIGhlbHBlcnMpIHsKICAgICAgb3Jp
        Z2luYWxNZXRob2RzW25hbWVdID0gd2luZG93W25hbWVdOwogICAgICB0aGlz
        LnRlc3RIZWxwZXJzW25hbWVdID0gd2luZG93W25hbWVdID0gaGVscGVyKHRo
        aXMsIG5hbWUpOwogICAgICBwcm90b1dyYXAoRW1iZXIuVGVzdC5Qcm9taXNl
        LnByb3RvdHlwZSwgbmFtZSwgaGVscGVyKHRoaXMsIG5hbWUpLCBoZWxwZXJz
        W25hbWVdLm1ldGEud2FpdCk7CiAgICB9CgogICAgZm9yKHZhciBpID0gMCwg
        bCA9IGluamVjdEhlbHBlcnNDYWxsYmFja3MubGVuZ3RoOyBpIDwgbDsgaSsr
        KSB7CiAgICAgIGluamVjdEhlbHBlcnNDYWxsYmFja3NbaV0odGhpcyk7CiAg
        ICB9CgogICAgRW1iZXIuUlNWUC5jb25maWd1cmUoJ29uZXJyb3InLCBvbmVy
        cm9yKTsKICB9LAoKICAvKioKICAgIFRoaXMgcmVtb3ZlcyBhbGwgaGVscGVy
        cyB0aGF0IGhhdmUgYmVlbiByZWdpc3RlcmVkLCBhbmQgcmVzZXRzIGFuZCBm
        dW5jdGlvbnMKICAgIHRoYXQgd2VyZSBvdmVycmlkZGVuIGJ5IHRoZSBoZWxw
        ZXJzLgoKICAgIEV4YW1wbGU6CiAgICBgYGAKICAgIEFwcC5yZW1vdmVUZXN0
        SGVscGVycygpOwogICAgYGBgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBy
        ZW1vdmVUZXN0SGVscGVycwogICovCiAgcmVtb3ZlVGVzdEhlbHBlcnM6IGZ1
        bmN0aW9uKCkgewogICAgZm9yICh2YXIgbmFtZSBpbiBoZWxwZXJzKSB7CiAg
        ICAgIHdpbmRvd1tuYW1lXSA9IG9yaWdpbmFsTWV0aG9kc1tuYW1lXTsKICAg
        ICAgZGVsZXRlIHRoaXMudGVzdEhlbHBlcnNbbmFtZV07CiAgICAgIGRlbGV0
        ZSBvcmlnaW5hbE1ldGhvZHNbbmFtZV07CiAgICB9CiAgICBFbWJlci5SU1ZQ
        LmNvbmZpZ3VyZSgnb25lcnJvcicsIG51bGwpOwogIH0KCn0pOwoKLy8gVGhp
        cyBtZXRob2QgaXMgbm8gbG9uZ2VyIG5lZWRlZAovLyBCdXQgc3RpbGwgaGVy
        ZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKLy8gb2YgaGVscGVyIGNo
        YWluaW5nCmZ1bmN0aW9uIHByb3RvV3JhcChwcm90bywgbmFtZSwgY2FsbGJh
        Y2ssIGlzQXN5bmMpIHsKICBwcm90b1tuYW1lXSA9IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICBpZiAoaXNBc3luYykgewog
        ICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7CiAgICB9
        IGVsc2UgewogICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCkgewog
        ICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTsKICAg
        ICAgfSk7CiAgICB9CiAgfTsKfQoKRW1iZXIuVGVzdC5Qcm9taXNlID0gZnVu
        Y3Rpb24oKSB7CiAgRW1iZXIuUlNWUC5Qcm9taXNlLmFwcGx5KHRoaXMsIGFy
        Z3VtZW50cyk7CiAgRW1iZXIuVGVzdC5sYXN0UHJvbWlzZSA9IHRoaXM7Cn07
        CgpFbWJlci5UZXN0LlByb21pc2UucHJvdG90eXBlID0gRW1iZXIuY3JlYXRl
        KEVtYmVyLlJTVlAuUHJvbWlzZS5wcm90b3R5cGUpOwpFbWJlci5UZXN0LlBy
        b21pc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRW1iZXIuVGVzdC5Qcm9t
        aXNlOwoKLy8gUGF0Y2ggYHRoZW5gIHRvIGlzb2xhdGUgYXN5bmMgbWV0aG9k
        cwovLyBzcGVjaWZpY2FsbHkgYEVtYmVyLlRlc3QubGFzdFByb21pc2VgCnZh
        ciBvcmlnaW5hbFRoZW4gPSBFbWJlci5SU1ZQLlByb21pc2UucHJvdG90eXBl
        LnRoZW47CkVtYmVyLlRlc3QuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1
        bmN0aW9uKG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7CiAgcmV0dXJuIG9yaWdp
        bmFsVGhlbi5jYWxsKHRoaXMsIGZ1bmN0aW9uKHZhbCkgewogICAgcmV0dXJu
        IGlzb2xhdGUob25TdWNjZXNzLCB2YWwpOwogIH0sIG9uRmFpbHVyZSk7Cn07
        CgovLyBUaGlzIG1ldGhvZCBpc29sYXRlcyBuZXN0ZWQgYXN5bmMgbWV0aG9k
        cwovLyBzbyB0aGF0IHRoZXkgZG9uJ3QgY29uZmxpY3Qgd2l0aCBvdGhlciBs
        YXN0IHByb21pc2VzLgovLwovLyAxLiBTZXQgYEVtYmVyLlRlc3QubGFzdFBy
        b21pc2VgIHRvIG51bGwKLy8gMi4gSW52b2tlIG1ldGhvZAovLyAzLiBSZXR1
        cm4gdGhlIGxhc3QgcHJvbWlzZSBjcmVhdGVkIGR1cmluZyBtZXRob2QKLy8g
        NC4gUmVzdG9yZSBgRW1iZXIuVGVzdC5sYXN0UHJvbWlzZWAgdG8gb3JpZ2lu
        YWwgdmFsdWUKZnVuY3Rpb24gaXNvbGF0ZShmbiwgdmFsKSB7CiAgdmFyIHZh
        bHVlLCBsYXN0UHJvbWlzZTsKCiAgLy8gUmVzZXQgbGFzdFByb21pc2UgZm9y
        IG5lc3RlZCBoZWxwZXJzCiAgRW1iZXIuVGVzdC5sYXN0UHJvbWlzZSA9IG51
        bGw7CgogIHZhbHVlID0gZm4uY2FsbChudWxsLCB2YWwpOwoKICBsYXN0UHJv
        bWlzZSA9IEVtYmVyLlRlc3QubGFzdFByb21pc2U7CgogIC8vIElmIHRoZSBt
        ZXRob2QgcmV0dXJuZWQgYSBwcm9taXNlCiAgLy8gcmV0dXJuIHRoYXQgcHJv
        bWlzZS4gSWYgbm90LAogIC8vIHJldHVybiB0aGUgbGFzdCBhc3luYyBoZWxw
        ZXIncyBwcm9taXNlCiAgaWYgKCh2YWx1ZSAmJiAodmFsdWUgaW5zdGFuY2Vv
        ZiBFbWJlci5UZXN0LlByb21pc2UpKSB8fCAhbGFzdFByb21pc2UpIHsKICAg
        IHJldHVybiB2YWx1ZTsKICB9IGVsc2UgewogICAgcnVuKGZ1bmN0aW9uKCkg
        ewogICAgICBsYXN0UHJvbWlzZSA9IEVtYmVyLlRlc3QucmVzb2x2ZShsYXN0
        UHJvbWlzZSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdmFs
        dWU7CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gbGFzdFByb21pc2U7
        CiAgfQp9CgoKZnVuY3Rpb24gb25lcnJvcihlcnJvcikgewogIGlmICghKGVy
        cm9yIGluc3RhbmNlb2YgUm91dGVyLlRyYW5zaXRpb25BYm9ydGVkKSkgewog
        ICAgRW1iZXIuVGVzdC5hZGFwdGVyLmV4Y2VwdGlvbihlcnJvcik7CiAgfQp9
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXIK
        ICBAc3VibW9kdWxlIGVtYmVyLXRlc3RpbmcKICovCgp2YXIgJCA9IEVtYmVy
        LiQ7CgovKioKICBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgY2hlY2tib3ggYW5k
        IHRyaWdnZXJzIHRoZSBjbGljayBldmVudCB0byBmaXJlIHRoZQogIHBhc3Nl
        ZCBpbiBoYW5kbGVyLiBJdCBpcyB1c2VkIHRvIGNvcnJlY3QgZm9yIGEgYnVn
        IGluIG9sZGVyIHZlcnNpb25zCiAgb2YgalF1ZXJ5IChlLmcgMS44LjMpLgoK
        ICBAcHJpdmF0ZQogIEBtZXRob2QgdGVzdENoZWNrYm94Q2xpY2sKKi8KZnVu
        Y3Rpb24gdGVzdENoZWNrYm94Q2xpY2soaGFuZGxlcikgewogICQoJzxpbnB1
        dCB0eXBlPSJjaGVja2JveCI+JykKICAgIC5jc3MoeyBwb3NpdGlvbjogJ2Fi
        c29sdXRlJywgbGVmdDogJy0xMDAwcHgnLCB0b3A6ICctMTAwMHB4JyB9KQog
        ICAgLmFwcGVuZFRvKCdib2R5JykKICAgIC5vbignY2xpY2snLCBoYW5kbGVy
        KQogICAgLnRyaWdnZXIoJ2NsaWNrJykKICAgIC5yZW1vdmUoKTsKfQoKJChm
        dW5jdGlvbigpIHsKICAvKgogICAgRGV0ZXJtaW5lIHdoZXRoZXIgYSBjaGVj
        a2JveCBjaGVja2VkIHVzaW5nIGpRdWVyeSdzICJjbGljayIgbWV0aG9kIHdp
        bGwgaGF2ZQogICAgdGhlIGNvcnJlY3QgdmFsdWUgZm9yIGl0cyBjaGVja2Vk
        IHByb3BlcnR5LgoKICAgIElmIHdlIGRldGVybWluZSB0aGF0IHRoZSBjdXJy
        ZW50IGpRdWVyeSB2ZXJzaW9uIGV4aGliaXRzIHRoaXMgYmVoYXZpb3IsCiAg
        ICBwYXRjaCBpdCB0byB3b3JrIGNvcnJlY3RseSBhcyBpbiB0aGUgY29tbWl0
        IGZvciB0aGUgYWN0dWFsIGZpeDoKICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9q
        cXVlcnkvanF1ZXJ5L2NvbW1pdC8xZmIyZjkyLgogICovCiAgdGVzdENoZWNr
        Ym94Q2xpY2soZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuY2hlY2tlZCAm
        JiAhJC5ldmVudC5zcGVjaWFsLmNsaWNrKSB7CiAgICAgICQuZXZlbnQuc3Bl
        Y2lhbC5jbGljayA9IHsKICAgICAgICAvLyBGb3IgY2hlY2tib3gsIGZpcmUg
        bmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodAog
        ICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKCQu
        bm9kZU5hbWUoIHRoaXMsICJpbnB1dCIgKSAmJiB0aGlzLnR5cGUgPT09ICJj
        aGVja2JveCIgJiYgdGhpcy5jbGljaykgewogICAgICAgICAgICB0aGlzLmNs
        aWNrKCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0K
        ICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSk7CgogIC8vIFRyeSBhZ2Fp
        biB0byB2ZXJpZnkgdGhhdCB0aGUgcGF0Y2ggdG9vayBlZmZlY3Qgb3IgYmxv
        dyB1cC4KICB0ZXN0Q2hlY2tib3hDbGljayhmdW5jdGlvbigpIHsKICAgIEVt
        YmVyLndhcm4oImNsaWNrZWQgY2hlY2tib3hlcyBzaG91bGQgYmUgY2hlY2tl
        ZCEgdGhlIGpRdWVyeSBwYXRjaCBkaWRuJ3Qgd29yayIsIHRoaXMuY2hlY2tl
        ZCk7CiAgfSk7Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKIEBt
        b2R1bGUgZW1iZXIKIEBzdWJtb2R1bGUgZW1iZXItdGVzdGluZwoqLwoKdmFy
        IFRlc3QgPSBFbWJlci5UZXN0OwoKLyoqCiAgVGhlIHByaW1hcnkgcHVycG9z
        ZSBvZiB0aGlzIGNsYXNzIGlzIHRvIGNyZWF0ZSBob29rcyB0aGF0IGNhbiBi
        ZSBpbXBsZW1lbnRlZAogIGJ5IGFuIGFkYXB0ZXIgZm9yIHZhcmlvdXMgdGVz
        dCBmcmFtZXdvcmtzLgoKICBAY2xhc3MgQWRhcHRlcgogIEBuYW1lc3BhY2Ug
        RW1iZXIuVGVzdAoqLwpUZXN0LkFkYXB0ZXIgPSBFbWJlci5PYmplY3QuZXh0
        ZW5kKHsKICAvKioKICAgIFRoaXMgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQg
        d2hlbmV2ZXIgYW4gYXN5bmMgb3BlcmF0aW9uIGlzIGFib3V0IHRvIHN0YXJ0
        LgoKICAgIE92ZXJyaWRlIHRoaXMgdG8gY2FsbCB5b3VyIGZyYW1ld29yaydz
        IG1ldGhvZHMgdGhhdCBoYW5kbGUgYXN5bmMKICAgIG9wZXJhdGlvbnMuCgog
        ICAgQHB1YmxpYwogICAgQG1ldGhvZCBhc3luY1N0YXJ0CiAgKi8KICBhc3lu
        Y1N0YXJ0OiBFbWJlci5LLAoKICAvKioKICAgIFRoaXMgY2FsbGJhY2sgd2ls
        bCBiZSBjYWxsZWQgd2hlbmV2ZXIgYW4gYXN5bmMgb3BlcmF0aW9uIGhhcyBj
        b21wbGV0ZWQuCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBhc3luY0VuZAog
        ICovCiAgYXN5bmNFbmQ6IEVtYmVyLkssCgogIC8qKgogICAgT3ZlcnJpZGUg
        dGhpcyBtZXRob2Qgd2l0aCB5b3VyIHRlc3RpbmcgZnJhbWV3b3JrJ3MgZmFs
        c2UgYXNzZXJ0aW9uLgogICAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hl
        bmV2ZXIgYW4gZXhjZXB0aW9uIG9jY3VycyBjYXVzaW5nIHRoZSB0ZXN0aW5n
        CiAgICBwcm9taXNlIHRvIGZhaWwuCgogICAgUVVuaXQgZXhhbXBsZToKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgIGV4Y2VwdGlvbjogZnVuY3Rpb24oZXJy
        b3IpIHsKICAgICAgICBvayhmYWxzZSwgZXJyb3IpOwogICAgICB9OwogICAg
        YGBgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBleGNlcHRpb24KICAgIEBw
        YXJhbSB7U3RyaW5nfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIGJlIHJhaXNl
        ZC4KICAqLwogIGV4Y2VwdGlvbjogZnVuY3Rpb24oZXJyb3IpIHsKICAgIHNl
        dFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHRocm93IGVycm9yOwogICAg
        fSk7CiAgfQp9KTsKCi8qKgogIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUg
        bWV0aG9kcyBkZWZpbmVkIGJ5IEVtYmVyLlRlc3QuQWRhcHRlciBmb3IgdGhl
        CiAgUVVuaXQgdGVzdGluZyBmcmFtZXdvcmsuCgogIEBjbGFzcyBRVW5pdEFk
        YXB0ZXIKICBAbmFtZXNwYWNlIEVtYmVyLlRlc3QKICBAZXh0ZW5kcyBFbWJl
        ci5UZXN0LkFkYXB0ZXIKKi8KVGVzdC5RVW5pdEFkYXB0ZXIgPSBUZXN0LkFk
        YXB0ZXIuZXh0ZW5kKHsKICBhc3luY1N0YXJ0OiBmdW5jdGlvbigpIHsKICAg
        IHN0b3AoKTsKICB9LAogIGFzeW5jRW5kOiBmdW5jdGlvbigpIHsKICAgIHN0
        YXJ0KCk7CiAgfSwKICBleGNlcHRpb246IGZ1bmN0aW9uKGVycm9yKSB7CiAg
        ICBvayhmYWxzZSwgRW1iZXIuaW5zcGVjdChlcnJvcikpOwogIH0KfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgoqIEBtb2R1bGUgZW1iZXIKKiBA
        c3VibW9kdWxlIGVtYmVyLXRlc3RpbmcKKi8KCnZhciBnZXQgPSBFbWJlci5n
        ZXQsCiAgICBUZXN0ID0gRW1iZXIuVGVzdCwKICAgIGhlbHBlciA9IFRlc3Qu
        cmVnaXN0ZXJIZWxwZXIsCiAgICBhc3luY0hlbHBlciA9IFRlc3QucmVnaXN0
        ZXJBc3luY0hlbHBlciwKICAgIGNvdW50QXN5bmMgPSAwOwoKVGVzdC5wZW5k
        aW5nQWpheFJlcXVlc3RzID0gMDsKClRlc3Qub25JbmplY3RIZWxwZXJzKGZ1
        bmN0aW9uKCkgewogIEVtYmVyLiQoZG9jdW1lbnQpLmFqYXhTdGFydChmdW5j
        dGlvbigpIHsKICAgIFRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cysrOwogIH0p
        OwoKICBFbWJlci4kKGRvY3VtZW50KS5hamF4U3RvcChmdW5jdGlvbigpIHsK
        ICAgIEVtYmVyLmFzc2VydCgiQW4gYWpheFN0b3AgZXZlbnQgd2hpY2ggd291
        bGQgY2F1c2UgdGhlIG51bWJlciBvZiBwZW5kaW5nIEFKQVggcmVxdWVzdHMg
        dG8gYmUgbmVnYXRpdmUgaGFzIGJlZW4gdHJpZ2dlcmVkLiBUaGlzIGlzIG1v
        c3QgbGlrZWx5IGNhdXNlZCBieSBBSkFYIGV2ZW50cyB0aGF0IHdlcmUgc3Rh
        cnRlZCBiZWZvcmUgY2FsbGluZyBgaW5qZWN0VGVzdEhlbHBlcnMoKWAuIiwg
        VGVzdC5wZW5kaW5nQWpheFJlcXVlc3RzICE9PSAwKTsKICAgIFRlc3QucGVu
        ZGluZ0FqYXhSZXF1ZXN0cy0tOwogIH0pOwp9KTsKCgpmdW5jdGlvbiB2aXNp
        dChhcHAsIHVybCkgewogIGFwcC5fX2NvbnRhaW5lcl9fLmxvb2t1cCgncm91
        dGVyOm1haW4nKS5sb2NhdGlvbi5zZXRVUkwodXJsKTsKICBFbWJlci5ydW4o
        YXBwLCBhcHAuaGFuZGxlVVJMLCB1cmwpOwogIHJldHVybiB3YWl0KGFwcCk7
        Cn0KCmZ1bmN0aW9uIGNsaWNrKGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsK
        ICB2YXIgJGVsID0gZmluZFdpdGhBc3NlcnQoYXBwLCBzZWxlY3RvciwgY29u
        dGV4dCk7CiAgRW1iZXIucnVuKCRlbCwgJ21vdXNlZG93bicpOwoKICBpZiAo
        JGVsLmlzKCc6aW5wdXQnKSkgewogICAgdmFyIHR5cGUgPSAkZWwucHJvcCgn
        dHlwZScpOwogICAgaWYgKHR5cGUgIT09ICdjaGVja2JveCcgJiYgdHlwZSAh
        PT0gJ3JhZGlvJyAmJiB0eXBlICE9PSAnaGlkZGVuJykgewogICAgICBFbWJl
        ci5ydW4oJGVsLCBmdW5jdGlvbigpewogICAgICAgIC8vIEZpcmVmb3ggZG9l
        cyBub3QgdHJpZ2dlciB0aGUgYGZvY3VzaW5gIGV2ZW50IGlmIHRoZSB3aW5k
        b3cKICAgICAgICAvLyBkb2VzIG5vdCBoYXZlIGZvY3VzLiBJZiB0aGUgZG9j
        dW1lbnQgZG9lc24ndCBoYXZlIGZvY3VzIGp1c3QKICAgICAgICAvLyB1c2Ug
        dHJpZ2dlcignZm9jdXNpbicpIGluc3RlYWQuCiAgICAgICAgaWYgKCFkb2N1
        bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSB7CiAgICAg
        ICAgICB0aGlzLmZvY3VzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
        IHRoaXMudHJpZ2dlcignZm9jdXNpbicpOwogICAgICAgIH0KICAgICAgfSk7
        CiAgICB9CiAgfQoKICBFbWJlci5ydW4oJGVsLCAnbW91c2V1cCcpOwogIEVt
        YmVyLnJ1bigkZWwsICdjbGljaycpOwoKICByZXR1cm4gd2FpdChhcHApOwp9
        CgpmdW5jdGlvbiBrZXlFdmVudChhcHAsIHNlbGVjdG9yLCBjb250ZXh0LCB0
        eXBlLCBrZXlDb2RlKSB7CiAgdmFyICRlbDsKICBpZiAodHlwZW9mIGtleUNv
        ZGUgPT09ICd1bmRlZmluZWQnKSB7CiAgICBrZXlDb2RlID0gdHlwZTsKICAg
        IHR5cGUgPSBjb250ZXh0OwogICAgY29udGV4dCA9IG51bGw7CiAgfQogICRl
        bCA9IGZpbmRXaXRoQXNzZXJ0KGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpOwog
        IHZhciBldmVudCA9IEVtYmVyLiQuRXZlbnQodHlwZSwgeyBrZXlDb2RlOiBr
        ZXlDb2RlIH0pOwogIEVtYmVyLnJ1bigkZWwsICd0cmlnZ2VyJywgZXZlbnQp
        OwogIHJldHVybiB3YWl0KGFwcCk7Cn0KCmZ1bmN0aW9uIGZpbGxJbihhcHAs
        IHNlbGVjdG9yLCBjb250ZXh0LCB0ZXh0KSB7CiAgdmFyICRlbDsKICBpZiAo
        dHlwZW9mIHRleHQgPT09ICd1bmRlZmluZWQnKSB7CiAgICB0ZXh0ID0gY29u
        dGV4dDsKICAgIGNvbnRleHQgPSBudWxsOwogIH0KICAkZWwgPSBmaW5kV2l0
        aEFzc2VydChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KTsKICBFbWJlci5ydW4o
        ZnVuY3Rpb24oKSB7CiAgICAkZWwudmFsKHRleHQpLmNoYW5nZSgpOwogIH0p
        OwogIHJldHVybiB3YWl0KGFwcCk7Cn0KCmZ1bmN0aW9uIGZpbmRXaXRoQXNz
        ZXJ0KGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsKICB2YXIgJGVsID0gZmlu
        ZChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KTsKICBpZiAoJGVsLmxlbmd0aCA9
        PT0gMCkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJFbGVtZW50ICIg
        KyBzZWxlY3RvciArICIgbm90IGZvdW5kLiIpOwogIH0KICByZXR1cm4gJGVs
        Owp9CgpmdW5jdGlvbiBmaW5kKGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsK
        ICB2YXIgJGVsOwogIGNvbnRleHQgPSBjb250ZXh0IHx8IGdldChhcHAsICdy
        b290RWxlbWVudCcpOwogICRlbCA9IGFwcC4kKHNlbGVjdG9yLCBjb250ZXh0
        KTsKCiAgcmV0dXJuICRlbDsKfQoKZnVuY3Rpb24gYW5kVGhlbihhcHAsIGNh
        bGxiYWNrKSB7CiAgcmV0dXJuIHdhaXQoYXBwLCBjYWxsYmFjayhhcHApKTsK
        fQoKZnVuY3Rpb24gd2FpdChhcHAsIHZhbHVlKSB7CiAgcmV0dXJuIFRlc3Qu
        cHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAvLyBJZiB0aGlzIGlz
        IHRoZSBmaXJzdCBhc3luYyBwcm9taXNlLCBraWNrIG9mZiB0aGUgYXN5bmMg
        dGVzdAogICAgaWYgKCsrY291bnRBc3luYyA9PT0gMSkgewogICAgICBUZXN0
        LmFkYXB0ZXIuYXN5bmNTdGFydCgpOwogICAgfQoKICAgIC8vIEV2ZXJ5IDEw
        bXMsIHBvbGwgZm9yIHRoZSBhc3luYyB0aGluZyB0byBoYXZlIGZpbmlzaGVk
        CiAgICB2YXIgd2F0Y2hlciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewog
        ICAgICAvLyAxLiBJZiB0aGUgcm91dGVyIGlzIGxvYWRpbmcsIGtlZXAgcG9s
        bGluZwogICAgICB2YXIgcm91dGVySXNMb2FkaW5nID0gYXBwLl9fY29udGFp
        bmVyX18ubG9va3VwKCdyb3V0ZXI6bWFpbicpLnJvdXRlci5pc0xvYWRpbmc7
        CiAgICAgIGlmIChyb3V0ZXJJc0xvYWRpbmcpIHsgcmV0dXJuOyB9CgogICAg
        ICAvLyAyLiBJZiB0aGVyZSBhcmUgcGVuZGluZyBBamF4IHJlcXVlc3RzLCBr
        ZWVwIHBvbGxpbmcKICAgICAgaWYgKFRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0
        cykgeyByZXR1cm47IH0KCiAgICAgIC8vIDMuIElmIHRoZXJlIGFyZSBzY2hl
        ZHVsZWQgdGltZXJzIG9yIHdlIGFyZSBpbnNpZGUgb2YgYSBydW4gbG9vcCwg
        a2VlcCBwb2xsaW5nCiAgICAgIGlmIChFbWJlci5ydW4uaGFzU2NoZWR1bGVk
        VGltZXJzKCkgfHwgRW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wKSB7IHJldHVy
        bjsgfQogICAgICBpZiAoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCJlbWJl
        ci10ZXN0aW5nLXdhaXQtaG9va3MiKSkgewogICAgICAgIGlmIChUZXN0Lndh
        aXRlcnMgJiYgVGVzdC53YWl0ZXJzLmFueShmdW5jdGlvbih3YWl0ZXIpIHsK
        ICAgICAgICAgIHZhciBjb250ZXh0ID0gd2FpdGVyWzBdOwogICAgICAgICAg
        dmFyIGNhbGxiYWNrID0gd2FpdGVyWzFdOwogICAgICAgICAgcmV0dXJuICFj
        YWxsYmFjay5hcHBseShjb250ZXh0KTsKICAgICAgICB9KSkgeyByZXR1cm47
        IH0KICAgICAgfQogICAgICAvLyBTdG9wIHBvbGxpbmcKICAgICAgY2xlYXJJ
        bnRlcnZhbCh3YXRjaGVyKTsKCiAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGxh
        c3QgYXN5bmMgcHJvbWlzZSwgZW5kIHRoZSBhc3luYyB0ZXN0CiAgICAgIGlm
        ICgtLWNvdW50QXN5bmMgPT09IDApIHsKICAgICAgICBUZXN0LmFkYXB0ZXIu
        YXN5bmNFbmQoKTsKICAgICAgfQoKICAgICAgLy8gU3luY2hyb25vdXNseSBy
        ZXNvbHZlIHRoZSBwcm9taXNlCiAgICAgIEVtYmVyLnJ1bihudWxsLCByZXNv
        bHZlLCB2YWx1ZSk7CiAgICB9LCAxMCk7CiAgfSk7Cgp9CgoKLyoqCiogTG9h
        ZHMgYSByb3V0ZSwgc2V0cyB1cCBhbnkgY29udHJvbGxlcnMsIGFuZCByZW5k
        ZXJzIGFueSB0ZW1wbGF0ZXMgYXNzb2NpYXRlZAoqIHdpdGggdGhlIHJvdXRl
        IGFzIHRob3VnaCBhIHJlYWwgdXNlciBoYWQgdHJpZ2dlcmVkIHRoZSByb3V0
        ZSBjaGFuZ2Ugd2hpbGUKKiB1c2luZyB5b3VyIGFwcC4KKgoqIEV4YW1wbGU6
        CioKKiBgYGAKKiB2aXNpdCgncG9zdHMvaW5kZXgnKS50aGVuKGZ1bmN0aW9u
        KCkgewoqICAgLy8gYXNzZXJ0IHNvbWV0aGluZwoqIH0pOwoqIGBgYAoqCiog
        QG1ldGhvZCB2aXNpdAoqIEBwYXJhbSB7U3RyaW5nfSB1cmwgdGhlIG5hbWUg
        b2YgdGhlIHJvdXRlCiogQHJldHVybiB7UlNWUC5Qcm9taXNlfQoqLwphc3lu
        Y0hlbHBlcigndmlzaXQnLCB2aXNpdCk7CgovKioKKiBDbGlja3MgYW4gZWxl
        bWVudCBhbmQgdHJpZ2dlcnMgYW55IGFjdGlvbnMgdHJpZ2dlcmVkIGJ5IHRo
        ZSBlbGVtZW50J3MgYGNsaWNrYAoqIGV2ZW50LgoqCiogRXhhbXBsZToKKgoq
        IGBgYAoqIGNsaWNrKCcuc29tZS1qUXVlcnktc2VsZWN0b3InKS50aGVuKGZ1
        bmN0aW9uKCkgewoqICAvLyBhc3NlcnQgc29tZXRoaW5nCiogfSk7CiogYGBg
        CioKKiBAbWV0aG9kIGNsaWNrCiogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9y
        IGpRdWVyeSBzZWxlY3RvciBmb3IgZmluZGluZyBlbGVtZW50IG9uIHRoZSBE
        T00KKiBAcmV0dXJuIHtSU1ZQLlByb21pc2V9CiovCmFzeW5jSGVscGVyKCdj
        bGljaycsIGNsaWNrKTsKCi8qKgoqIFNpbXVsYXRlcyBhIGtleSBldmVudCwg
        ZS5nLiBga2V5cHJlc3NgLCBga2V5ZG93bmAsIGBrZXl1cGAgd2l0aCB0aGUg
        ZGVzaXJlZCBrZXlDb2RlCioKKiBFeGFtcGxlOgoqCiogYGBgCioga2V5RXZl
        bnQoJy5zb21lLWpRdWVyeS1zZWxlY3RvcicsICdrZXlwcmVzcycsIDEzKS50
        aGVuKGZ1bmN0aW9uKCkgewoqICAvLyBhc3NlcnQgc29tZXRoaW5nCiogfSk7
        CiogYGBgCioKKiBAbWV0aG9kIGtleUV2ZW50CiogQHBhcmFtIHtTdHJpbmd9
        IHNlbGVjdG9yIGpRdWVyeSBzZWxlY3RvciBmb3IgZmluZGluZyBlbGVtZW50
        IG9uIHRoZSBET00KKiBAcGFyYW0ge1N0cmluZ30gdGhlIHR5cGUgb2Yga2V5
        IGV2ZW50LCBlLmcuIGBrZXlwcmVzc2AsIGBrZXlkb3duYCwgYGtleXVwYAoq
        IEBwYXJhbSB7TnVtYmVyfSB0aGUga2V5Q29kZSBvZiB0aGUgc2ltdWxhdGVk
        IGtleSBldmVudAoqIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0KKi8KYXN5bmNI
        ZWxwZXIoJ2tleUV2ZW50Jywga2V5RXZlbnQpOwoKLyoqCiogRmlsbHMgaW4g
        YW4gaW5wdXQgZWxlbWVudCB3aXRoIHNvbWUgdGV4dC4KKgoqIEV4YW1wbGU6
        CioKKiBgYGAKKiBmaWxsSW4oJyNlbWFpbCcsICd5b3VAZXhhbXBsZS5jb20n
        KS50aGVuKGZ1bmN0aW9uKCkgewoqICAgLy8gYXNzZXJ0IHNvbWV0aGluZwoq
        IH0pOwoqIGBgYAoqCiogQG1ldGhvZCBmaWxsSW4KKiBAcGFyYW0ge1N0cmlu
        Z30gc2VsZWN0b3IgalF1ZXJ5IHNlbGVjdG9yIGZpbmRpbmcgYW4gaW5wdXQg
        ZWxlbWVudCBvbiB0aGUgRE9NCiogdG8gZmlsbCB0ZXh0IHdpdGgKKiBAcGFy
        YW0ge1N0cmluZ30gdGV4dCB0ZXh0IHRvIHBsYWNlIGluc2lkZSB0aGUgaW5w
        dXQgZWxlbWVudAoqIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0KKi8KYXN5bmNI
        ZWxwZXIoJ2ZpbGxJbicsIGZpbGxJbik7CgovKioKKiBGaW5kcyBhbiBlbGVt
        ZW50IGluIHRoZSBjb250ZXh0IG9mIHRoZSBhcHAncyBjb250YWluZXIgZWxl
        bWVudC4gQSBzaW1wbGUgYWxpYXMKKiBmb3IgYGFwcC4kKHNlbGVjdG9yKWAu
        CioKKiBFeGFtcGxlOgoqCiogYGBgCiogdmFyICRlbCA9IGZpbmQoJy5teS1z
        ZWxlY3Rvcik7CiogYGBgCioKKiBAbWV0aG9kIGZpbmQKKiBAcGFyYW0ge1N0
        cmluZ30gc2VsZWN0b3IgalF1ZXJ5IHN0cmluZyBzZWxlY3RvciBmb3IgZWxl
        bWVudCBsb29rdXAKKiBAcmV0dXJuIHtPYmplY3R9IGpRdWVyeSBvYmplY3Qg
        cmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeQoqLwpoZWxw
        ZXIoJ2ZpbmQnLCBmaW5kKTsKCi8qKgoqCiogTGlrZSBgZmluZGAsIGJ1dCB0
        aHJvd3MgYW4gZXJyb3IgaWYgdGhlIGVsZW1lbnQgc2VsZWN0b3IgcmV0dXJu
        cyBubyByZXN1bHRzCioKKiBFeGFtcGxlOgoqCiogYGBgCiogdmFyICRlbCA9
        IGZpbmRXaXRoQXNzZXJ0KCcuZG9lc250LWV4aXN0Jyk7IC8vIHRocm93cyBl
        cnJvcgoqIGBgYAoqCiogQG1ldGhvZCBmaW5kV2l0aEFzc2VydAoqIEBwYXJh
        bSB7U3RyaW5nfSBzZWxlY3RvciBqUXVlcnkgc2VsZWN0b3Igc3RyaW5nIGZv
        ciBmaW5kaW5nIGFuIGVsZW1lbnQgd2l0aGluCiogdGhlIERPTQoqIEByZXR1
        cm4ge09iamVjdH0galF1ZXJ5IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJl
        c3VsdHMgb2YgdGhlIHF1ZXJ5CiogQHRocm93cyB7RXJyb3J9IHRocm93cyBl
        cnJvciBpZiBqUXVlcnkgb2JqZWN0IHJldHVybmVkIGhhcyBhIGxlbmd0aCBv
        ZiAwCiovCmhlbHBlcignZmluZFdpdGhBc3NlcnQnLCBmaW5kV2l0aEFzc2Vy
        dCk7CgovKioKICBDYXVzZXMgdGhlIHJ1biBsb29wIHRvIHByb2Nlc3MgYW55
        IHBlbmRpbmcgZXZlbnRzLiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQK
        ICBhbnkgYXN5bmMgb3BlcmF0aW9ucyBmcm9tIG90aGVyIGhlbHBlcnMgKG9y
        IHlvdXIgYXNzZXJ0aW9ucykgaGF2ZSBiZWVuIHByb2Nlc3NlZC4KCiAgVGhp
        cyBpcyBtb3N0IG9mdGVuIHVzZWQgYXMgdGhlIHJldHVybiB2YWx1ZSBmb3Ig
        dGhlIGhlbHBlciBmdW5jdGlvbnMgKHNlZSAnY2xpY2snLAogICdmaWxsSW4n
        LCd2aXNpdCcsZXRjKS4KCiAgRXhhbXBsZToKCiAgYGBgCiAgRW1iZXIuVGVz
        dC5yZWdpc3RlckFzeW5jSGVscGVyKCdsb2dpblVzZXInLCBmdW5jdGlvbihh
        cHAsIHVzZXJuYW1lLCBwYXNzd29yZCkgewogICAgdmlzaXQoJ3NlY3VyZWQv
        cGF0aC9oZXJlJykKICAgIC5maWxsSW4oJyN1c2VybmFtZScsIHVzZXJuYW1l
        KQogICAgLmZpbGxJbignI3Bhc3N3b3JkJywgdXNlcm5hbWUpCiAgICAuY2xp
        Y2soJy5zdWJtaXQnKQoKICAgIHJldHVybiB3YWl0KCk7CiAgfSk7CgogIEBt
        ZXRob2Qgd2FpdAogIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBUaGUgdmFsdWUg
        dG8gYmUgcmV0dXJuZWQuCiAgQHJldHVybiB7UlNWUC5Qcm9taXNlfQogIGBg
        YAoqLwphc3luY0hlbHBlcignd2FpdCcsIHdhaXQpOwphc3luY0hlbHBlcign
        YW5kVGhlbicsIGFuZFRoZW4pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKICBFbWJlciBUZXN0aW5nCgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9k
        dWxlIGVtYmVyLXRlc3RpbmcKICBAcmVxdWlyZXMgZW1iZXItYXBwbGljYXRp
        b24KKi8KCn0pKCk7CgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJlcgoKQG1vZHVs
        ZSBlbWJlcgoqLwoKZnVuY3Rpb24gdGhyb3dXaXRoTWVzc2FnZShtc2cpIHsK
        ICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IobXNnKTsKICB9Owp9CgpmdW5jdGlvbiBnZW5lcmF0ZVJlbW92ZWRDbGFz
        cyhjbGFzc05hbWUpIHsKICB2YXIgbXNnID0gIiBoYXMgYmVlbiBtb3ZlZCBp
        bnRvIGEgcGx1Z2luOiBodHRwczovL2dpdGh1Yi5jb20vZW1iZXJqcy9lbWJl
        ci1zdGF0ZXMiOwoKICByZXR1cm4gewogICAgZXh0ZW5kOiB0aHJvd1dpdGhN
        ZXNzYWdlKGNsYXNzTmFtZSArIG1zZyksCiAgICBjcmVhdGU6IHRocm93V2l0
        aE1lc3NhZ2UoY2xhc3NOYW1lICsgbXNnKQogIH07Cn0KCkVtYmVyLlN0YXRl
        TWFuYWdlciA9IGdlbmVyYXRlUmVtb3ZlZENsYXNzKCJFbWJlci5TdGF0ZU1h
        bmFnZXIiKTsKCi8qKgogIFRoaXMgd2FzIGV4cG9ydGVkIHRvIGVtYmVyLXN0
        YXRlcyBwbHVnaW4gZm9yIHYgMS4wLjAgcmVsZWFzZS4gU2VlOiBodHRwczov
        L2dpdGh1Yi5jb20vZW1iZXJqcy9lbWJlci1zdGF0ZXMKICAKICBAY2xhc3Mg
        U3RhdGVNYW5hZ2VyCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwoKRW1iZXIuU3Rh
        dGUgPSBnZW5lcmF0ZVJlbW92ZWRDbGFzcygiRW1iZXIuU3RhdGUiKTsKCi8q
        KgogIFRoaXMgd2FzIGV4cG9ydGVkIHRvIGVtYmVyLXN0YXRlcyBwbHVnaW4g
        Zm9yIHYgMS4wLjAgcmVsZWFzZS4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20v
        ZW1iZXJqcy9lbWJlci1zdGF0ZXMKICAKICBAY2xhc3MgU3RhdGUKICBAbmFt
        ZXNwYWNlIEVtYmVyCiovCgp9KSgpOwoKCn0pKCk7Cg==
    http_version: 
  recorded_at: Thu, 31 Oct 2013 20:27:50 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/canary/ember.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - ! '*/*'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - +wbc6ikoOHrzOKTashkYrcc+u95XXebK2X0zPdg5Si8tJw1TECMpeJvIBiEM8nNe
      X-Amz-Request-Id:
      - BEF5254E79D7C094
      Date:
      - Thu, 31 Oct 2013 20:27:53 GMT
      Last-Modified:
      - Mon, 28 Oct 2013 16:16:23 GMT
      Etag:
      - ! '"32f7577a377e61bc8d2b9a254e83daba"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '249552'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUHJvamVjdDog
        ICBFbWJlciAtIEphdmFTY3JpcHQgQXBwbGljYXRpb24gRnJhbWV3b3JrCi8v
        IENvcHlyaWdodDogQ29weXJpZ2h0IDIwMTEtMjAxMyBUaWxkZSBJbmMuIGFu
        ZCBjb250cmlidXRvcnMKLy8gICAgICAgICAgICBQb3J0aW9ucyBDb3B5cmln
        aHQgMjAwNi0yMDExIFN0cm9iZSBJbmMuCi8vICAgICAgICAgICAgUG9ydGlv
        bnMgQ29weXJpZ2h0IDIwMDgtMjAxMSBBcHBsZSBJbmMuIEFsbCByaWdodHMg
        cmVzZXJ2ZWQuCi8vIExpY2Vuc2U6ICAgTGljZW5zZWQgdW5kZXIgTUlUIGxp
        Y2Vuc2UKLy8gICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNv
        bS9lbWJlcmpzL2VtYmVyLmpzL21hc3Rlci9MSUNFTlNFCi8vID09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09CgoKIC8vIFZlcnNpb246IDEuMy4wLWJl
        dGEuMStjYW5hcnkuM2Y2MGZhNmUKCi8vIENvcHlyaWdodDogQ29weXJpZ2h0
        IDIwMTEtMjAxMyBUaWxkZSBJbmMuIGFuZCBjb250cmlidXRvcnMKLy8gICAg
        ICAgICAgICBQb3J0aW9ucyBDb3B5cmlnaHQgMjAwNi0yMDExIFN0cm9iZSBJ
        bmMuCi8vICAgICAgICAgICAgUG9ydGlvbnMgQ29weXJpZ2h0IDIwMDgtMjAx
        MSBBcHBsZSBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiFmdW5jdGlvbigp
        e3ZhciBlLHQ7IWZ1bmN0aW9uKCl7dmFyIHI9e30sbj17fTtlPWZ1bmN0aW9u
        KGUsdCxuKXtyW2VdPXtkZXBzOnQsY2FsbGJhY2s6bn19LHQ9ZnVuY3Rpb24o
        ZSl7aWYobltlXSlyZXR1cm4gbltlXTtuW2VdPXt9O3ZhciBpLG8sYSxzLHU7
        aWYoaT1yW2VdLCFpKXRocm93IG5ldyBFcnJvcigiTW9kdWxlICciK2UrIicg
        bm90IGZvdW5kLiIpO289aS5kZXBzLGE9aS5jYWxsYmFjayxzPVtdO2Zvcih2
        YXIgYz0wLGw9by5sZW5ndGg7bD5jO2MrKykiZXhwb3J0cyI9PT1vW2NdP3Mu
        cHVzaCh1PXt9KTpzLnB1c2godChvW2NdKSk7dmFyIGg9YS5hcHBseSh0aGlz
        LHMpO3JldHVybiBuW2VdPXV8fGh9fSgpLGZ1bmN0aW9uKCl7InVuZGVmaW5l
        ZCI9PXR5cGVvZiBFbWJlciYmKEVtYmVyPXt9KSxFbWJlci5pbXBvcnRzPUVt
        YmVyLmltcG9ydHN8fHRoaXM7dmFyIGU9RW1iZXIuZXhwb3J0cz1FbWJlci5l
        eHBvcnRzfHx0aGlzO0VtYmVyLmxvb2t1cD1FbWJlci5sb29rdXB8fHRoaXMs
        ZS5FbT1lLkVtYmVyPUVtPUVtYmVyLEVtYmVyLmlzTmFtZXNwYWNlPSEwLEVt
        YmVyLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkVtYmVyIn0sRW1iZXIu
        VkVSU0lPTj0iMS4zLjAtYmV0YS4xK2NhbmFyeS4zZjYwZmE2ZSIsInVuZGVm
        aW5lZCI9PXR5cGVvZiBFTlYmJihlLkVOVj17fSksInVuZGVmaW5lZCI9PXR5
        cGVvZiBFTlYuRElTQUJMRV9SQU5HRV9BUEkmJihFTlYuRElTQUJMRV9SQU5H
        RV9BUEk9ITApLEVtYmVyLkVOVj1FbWJlci5FTlZ8fEVOVixFbWJlci5jb25m
        aWc9RW1iZXIuY29uZmlnfHx7fSxFbWJlci5GRUFUVVJFUz1FbWJlci5FTlYu
        RkVBVFVSRVN8fHt9LEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZD1mdW5jdGlv
        bihlKXt2YXIgdD1FbWJlci5GRUFUVVJFU1tlXTtyZXR1cm4gRW1iZXIuRU5W
        LkVOQUJMRV9BTExfRkVBVFVSRVM/ITA6dD09PSEwfHx0PT09ITF8fHZvaWQg
        MD09PXQ/dDpFbWJlci5FTlYuRU5BQkxFX09QVElPTkFMX0ZFQVRVUkVTPyEw
        OiExfSxFbWJlci5FWFRFTkRfUFJPVE9UWVBFUz1FbWJlci5FTlYuRVhURU5E
        X1BST1RPVFlQRVMsInVuZGVmaW5lZCI9PXR5cGVvZiBFbWJlci5FWFRFTkRf
        UFJPVE9UWVBFUyYmKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTPSEwKSxFbWJl
        ci5MT0dfU1RBQ0tUUkFDRV9PTl9ERVBSRUNBVElPTj1FbWJlci5FTlYuTE9H
        X1NUQUNLVFJBQ0VfT05fREVQUkVDQVRJT04hPT0hMSxFbWJlci5TSElNX0VT
        NT1FbWJlci5FTlYuU0hJTV9FUzU9PT0hMT8hMTpFbWJlci5FWFRFTkRfUFJP
        VE9UWVBFUyxFbWJlci5MT0dfVkVSU0lPTj1FbWJlci5FTlYuTE9HX1ZFUlNJ
        T049PT0hMT8hMTohMCxFbWJlci5LPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9
        LCJ1bmRlZmluZWQiPT10eXBlb2YgRW1iZXIuYXNzZXJ0JiYoRW1iZXIuYXNz
        ZXJ0PUVtYmVyLkspLCJ1bmRlZmluZWQiPT10eXBlb2YgRW1iZXIud2FybiYm
        KEVtYmVyLndhcm49RW1iZXIuSyksInVuZGVmaW5lZCI9PXR5cGVvZiBFbWJl
        ci5kZWJ1ZyYmKEVtYmVyLmRlYnVnPUVtYmVyLkspLCJ1bmRlZmluZWQiPT10
        eXBlb2YgRW1iZXIuZGVwcmVjYXRlJiYoRW1iZXIuZGVwcmVjYXRlPUVtYmVy
        LkspLCJ1bmRlZmluZWQiPT10eXBlb2YgRW1iZXIuZGVwcmVjYXRlRnVuYyYm
        KEVtYmVyLmRlcHJlY2F0ZUZ1bmM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdH0p
        LEVtYmVyLnV1aWQ9MCxFbWJlci5tZXJnZT1mdW5jdGlvbihlLHQpe2Zvcih2
        YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pO3Jl
        dHVybiBlfSxFbWJlci5pc05vbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9
        PT1lfHx2b2lkIDA9PT1lfSxFbWJlci5ub25lPUVtYmVyLmRlcHJlY2F0ZUZ1
        bmMoIkVtYmVyLm5vbmUgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBFbWJl
        ci5pc05vbmUgaW5zdGVhZC4iLEVtYmVyLmlzTm9uZSksRW1iZXIuaXNFbXB0
        eT1mdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuaXNOb25lKGUpfHwwPT09ZS5s
        ZW5ndGgmJiJmdW5jdGlvbiIhPXR5cGVvZiBlfHwib2JqZWN0Ij09dHlwZW9m
        IGUmJjA9PT1FbWJlci5nZXQoZSwibGVuZ3RoIil9LEVtYmVyLmVtcHR5PUVt
        YmVyLmRlcHJlY2F0ZUZ1bmMoIkVtYmVyLmVtcHR5IGlzIGRlcHJlY2F0ZWQu
        IFBsZWFzZSB1c2UgRW1iZXIuaXNFbXB0eSBpbnN0ZWFkLiIsRW1iZXIuaXNF
        bXB0eSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5wbGF0Zm9ybT17fTtp
        ZihFbWJlci5jcmVhdGU9T2JqZWN0LmNyZWF0ZSxFbWJlci5jcmVhdGUmJjIh
        PT1FbWJlci5jcmVhdGUoe2E6MX0se2E6e3ZhbHVlOjJ9fSkuYSYmKEVtYmVy
        LmNyZWF0ZT1udWxsKSwhRW1iZXIuY3JlYXRlfHxFbWJlci5FTlYuU1RVQl9P
        QkpFQ1RfQ1JFQVRFKXt2YXIgdD1mdW5jdGlvbigpe307RW1iZXIuY3JlYXRl
        PWZ1bmN0aW9uKGUscil7aWYodC5wcm90b3R5cGU9ZSxlPW5ldyB0LHIpe3Qu
        cHJvdG90eXBlPWU7Zm9yKHZhciBuIGluIHIpdC5wcm90b3R5cGVbbl09cltu
        XS52YWx1ZTtlPW5ldyB0fXJldHVybiB0LnByb3RvdHlwZT1udWxsLGV9LEVt
        YmVyLmNyZWF0ZS5pc1NpbXVsYXRlZD0hMH12YXIgcixuLGk9T2JqZWN0LmRl
        ZmluZVByb3BlcnR5O2lmKGkpdHJ5e2koe30sImEiLHtnZXQ6ZnVuY3Rpb24o
        KXt9fSl9Y2F0Y2gobyl7aT1udWxsfWkmJihyPWZ1bmN0aW9uKCl7dmFyIGU9
        e307cmV0dXJuIGkoZSwiYSIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxl
        OiEwLGdldDpmdW5jdGlvbigpe30sc2V0OmZ1bmN0aW9uKCl7fX0pLGkoZSwi
        YSIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHdyaXRhYmxlOiEw
        LHZhbHVlOiEwfSksZS5hPT09ITB9KCksbj1mdW5jdGlvbigpe3RyeXtyZXR1
        cm4gaShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSwiZGVmaW5lUHJv
        cGVydHlPbkRPTSIse30pLCEwfWNhdGNoKGUpe31yZXR1cm4hMX0oKSxyP258
        fChpPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtyZXR1cm4gbj0ib2JqZWN0Ij09
        dHlwZW9mIE5vZGU/ZSBpbnN0YW5jZW9mIE5vZGU6Im9iamVjdCI9PXR5cGVv
        ZiBlJiYibnVtYmVyIj09dHlwZW9mIGUubm9kZVR5cGUmJiJzdHJpbmciPT10
        eXBlb2YgZS5ub2RlTmFtZSxuP2VbdF09ci52YWx1ZTpPYmplY3QuZGVmaW5l
        UHJvcGVydHkoZSx0LHIpfSk6aT1udWxsKSxlLmRlZmluZVByb3BlcnR5PWks
        ZS5oYXNQcm9wZXJ0eUFjY2Vzc29ycz0hMCxlLmRlZmluZVByb3BlcnR5fHwo
        ZS5oYXNQcm9wZXJ0eUFjY2Vzc29ycz0hMSxlLmRlZmluZVByb3BlcnR5PWZ1
        bmN0aW9uKGUsdCxyKXtyLmdldHx8KGVbdF09ci52YWx1ZSl9LGUuZGVmaW5l
        UHJvcGVydHkuaXNTaW11bGF0ZWQ9ITApLEVtYmVyLkVOVi5NQU5EQVRPUllf
        U0VUVEVSJiYhZS5oYXNQcm9wZXJ0eUFjY2Vzc29ycyYmKEVtYmVyLkVOVi5N
        QU5EQVRPUllfU0VUVEVSPSExKX0oKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0
        aW9uKGUpe3JldHVybiBlJiZGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcu
        Y2FsbChlKS5pbmRleE9mKCJbbmF0aXZlIGNvZGVdIik+LTF9LHQ9ZShBcnJh
        eS5wcm90b3R5cGUubWFwKT9BcnJheS5wcm90b3R5cGUubWFwOmZ1bmN0aW9u
        KGUpe2lmKHZvaWQgMD09PXRoaXN8fG51bGw9PT10aGlzKXRocm93IG5ldyBU
        eXBlRXJyb3I7dmFyIHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lm
        KCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3I7Zm9y
        KHZhciBuPW5ldyBBcnJheShyKSxpPWFyZ3VtZW50c1sxXSxvPTA7cj5vO28r
        KylvIGluIHQmJihuW29dPWUuY2FsbChpLHRbb10sbyx0KSk7cmV0dXJuIG59
        LHI9ZShBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk/QXJyYXkucHJvdG90eXBl
        LmZvckVhY2g6ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09dGhpc3x8bnVsbD09
        PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgdD1PYmplY3QodGhpcyks
        cj10Lmxlbmd0aD4+PjA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cg
        bmV3IFR5cGVFcnJvcjtmb3IodmFyIG49YXJndW1lbnRzWzFdLGk9MDtyPmk7
        aSsrKWkgaW4gdCYmZS5jYWxsKG4sdFtpXSxpLHQpfSxuPWUoQXJyYXkucHJv
        dG90eXBlLmluZGV4T2YpP0FycmF5LnByb3RvdHlwZS5pbmRleE9mOmZ1bmN0
        aW9uKGUsdCl7bnVsbD09PXR8fHZvaWQgMD09PXQ/dD0wOjA+dCYmKHQ9TWF0
        aC5tYXgoMCx0aGlzLmxlbmd0aCt0KSk7Zm9yKHZhciByPXQsbj10aGlzLmxl
        bmd0aDtuPnI7cisrKWlmKHRoaXNbcl09PT1lKXJldHVybiByO3JldHVybi0x
        fTtFbWJlci5BcnJheVBvbHlmaWxscz17bWFwOnQsZm9yRWFjaDpyLGluZGV4
        T2Y6bn0sRW1iZXIuU0hJTV9FUzUmJihBcnJheS5wcm90b3R5cGUubWFwfHwo
        QXJyYXkucHJvdG90eXBlLm1hcD10KSxBcnJheS5wcm90b3R5cGUuZm9yRWFj
        aHx8KEFycmF5LnByb3RvdHlwZS5mb3JFYWNoPXIpLEFycmF5LnByb3RvdHlw
        ZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9bikpfSgpLGZ1
        bmN0aW9uKCl7dmFyIGU9WyJkZXNjcmlwdGlvbiIsImZpbGVOYW1lIiwibGlu
        ZU51bWJlciIsIm1lc3NhZ2UiLCJuYW1lIiwibnVtYmVyIiwic3RhY2siXTtF
        bWJlci5FcnJvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1FcnJvci5hcHBseSh0
        aGlzLGFyZ3VtZW50cykscj0wO3I8ZS5sZW5ndGg7cisrKXRoaXNbZVtyXV09
        dFtlW3JdXX0sRW1iZXIuRXJyb3IucHJvdG90eXBlPUVtYmVyLmNyZWF0ZShF
        cnJvci5wcm90b3R5cGUpLEVtYmVyLm9uZXJyb3I9bnVsbCxFbWJlci5oYW5k
        bGVFcnJvcnM9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2Yg
        RW1iZXIub25lcnJvcilyZXR1cm4gZS5jYWxsKHR8fHRoaXMpO3RyeXtyZXR1
        cm4gZS5jYWxsKHR8fHRoaXMpfWNhdGNoKHIpe0VtYmVyLm9uZXJyb3Iocil9
        fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5kZXNjcz17fSx0
        aGlzLndhdGNoaW5nPXt9LHRoaXMuY2FjaGU9e30sdGhpcy5zb3VyY2U9ZX1m
        dW5jdGlvbiB0KGUsdCl7cmV0dXJuISghZXx8ImZ1bmN0aW9uIiE9dHlwZW9m
        IGVbdF0pfUVtYmVyLkdVSURfUFJFRklYPSJlbWJlciI7dmFyIHI9RW1iZXIu
        cGxhdGZvcm0uZGVmaW5lUHJvcGVydHksbj1FbWJlci5jcmVhdGUsaT0iX19l
        bWJlciIrICtuZXcgRGF0ZSxvPTAsYT1bXSxzPXt9LHU9RW1iZXIuRU5WLk1B
        TkRBVE9SWV9TRVRURVI7RW1iZXIuR1VJRF9LRVk9aTt2YXIgYz17d3JpdGFi
        bGU6ITEsY29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITEsdmFsdWU6bnVs
        bH07RW1iZXIuZ2VuZXJhdGVHdWlkPWZ1bmN0aW9uKGUsdCl7dHx8KHQ9RW1i
        ZXIuR1VJRF9QUkVGSVgpO3ZhciBuPXQrbysrO3JldHVybiBlJiYoYy52YWx1
        ZT1uLHIoZSxpLGMpKSxufSxFbWJlci5ndWlkRm9yPWZ1bmN0aW9uKGUpe2lm
        KHZvaWQgMD09PWUpcmV0dXJuIih1bmRlZmluZWQpIjtpZihudWxsPT09ZSly
        ZXR1cm4iKG51bGwpIjt2YXIgdCxuPXR5cGVvZiBlO3N3aXRjaChuKXtjYXNl
        Im51bWJlciI6cmV0dXJuIHQ9YVtlXSx0fHwodD1hW2VdPSJudSIrZSksdDtj
        YXNlInN0cmluZyI6cmV0dXJuIHQ9c1tlXSx0fHwodD1zW2VdPSJzdCIrbysr
        KSx0O2Nhc2UiYm9vbGVhbiI6cmV0dXJuIGU/Iih0cnVlKSI6IihmYWxzZSki
        O2RlZmF1bHQ6cmV0dXJuIGVbaV0/ZVtpXTplPT09T2JqZWN0PyIoT2JqZWN0
        KSI6ZT09PUFycmF5PyIoQXJyYXkpIjoodD0iZW1iZXIiK28rKyxjLnZhbHVl
        PXQscihlLGksYyksdCl9fTt2YXIgbD17d3JpdGFibGU6ITAsY29uZmlndXJh
        YmxlOiExLGVudW1lcmFibGU6ITEsdmFsdWU6bnVsbH0saD1FbWJlci5HVUlE
        X0tFWSsiX21ldGEiO0VtYmVyLk1FVEFfS0VZPWg7dmFyIG09e2Rlc2NzOnt9
        LHdhdGNoaW5nOnt9fTt1JiYobS52YWx1ZXM9e30pLEVtYmVyLkVNUFRZX01F
        VEE9bSxPYmplY3QuZnJlZXplJiZPYmplY3QuZnJlZXplKG0pO3ZhciBmPUVt
        YmVyLnBsYXRmb3JtLmRlZmluZVByb3BlcnR5LmlzU2ltdWxhdGVkO2YmJihl
        LnByb3RvdHlwZS5fX3ByZXZlbnRQbGFpbk9iamVjdF9fPSEwLGUucHJvdG90
        eXBlLnRvSlNPTj1mdW5jdGlvbigpe30pLEVtYmVyLm1ldGE9ZnVuY3Rpb24o
        dCxpKXt2YXIgbz10W2hdO3JldHVybiBpPT09ITE/b3x8bToobz9vLnNvdXJj
        ZSE9PXQmJihmfHxyKHQsaCxsKSxvPW4obyksby5kZXNjcz1uKG8uZGVzY3Mp
        LG8ud2F0Y2hpbmc9bihvLndhdGNoaW5nKSxvLmNhY2hlPXt9LG8uc291cmNl
        PXQsdSYmKG8udmFsdWVzPW4oby52YWx1ZXMpKSx0W2hdPW8pOihmfHxyKHQs
        aCxsKSxvPW5ldyBlKHQpLHUmJihvLnZhbHVlcz17fSksdFtoXT1vLG8uZGVz
        Y3MuY29uc3RydWN0b3I9bnVsbCksbyl9LEVtYmVyLmdldE1ldGE9ZnVuY3Rp
        b24oZSx0KXt2YXIgcj1FbWJlci5tZXRhKGUsITEpO3JldHVybiByW3RdfSxF
        bWJlci5zZXRNZXRhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1FbWJlci5tZXRh
        KGUsITApO3JldHVybiBuW3RdPXIscn0sRW1iZXIubWV0YVBhdGg9ZnVuY3Rp
        b24oZSx0LHIpe2Zvcih2YXIgaSxvLGE9RW1iZXIubWV0YShlLHIpLHM9MCx1
        PXQubGVuZ3RoO3U+cztzKyspe2lmKGk9dFtzXSxvPWFbaV0pe2lmKG8uX19l
        bWJlcl9zb3VyY2VfXyE9PWUpe2lmKCFyKXJldHVybiB2b2lkIDA7bz1hW2ld
        PW4obyksby5fX2VtYmVyX3NvdXJjZV9fPWV9fWVsc2V7aWYoIXIpcmV0dXJu
        IHZvaWQgMDtvPWFbaV09e19fZW1iZXJfc291cmNlX186ZX19YT1vfXJldHVy
        biBvfSxFbWJlci53cmFwPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe31m
        dW5jdGlvbiBuKCl7dmFyIG4saT10aGlzLl9zdXBlcjtyZXR1cm4gdGhpcy5f
        c3VwZXI9dHx8cixuPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX3N1
        cGVyPWksbn1yZXR1cm4gbi53cmFwcGVkRnVuY3Rpb249ZSxuLl9fZW1iZXJf
        b2JzZXJ2ZXNfXz1lLl9fZW1iZXJfb2JzZXJ2ZXNfXyxuLl9fZW1iZXJfb2Jz
        ZXJ2ZXNCZWZvcmVfXz1lLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXyxuLl9f
        ZW1iZXJfbGlzdGVuc19fPWUuX19lbWJlcl9saXN0ZW5zX18sbn0sRW1iZXIu
        aXNBcnJheT1mdW5jdGlvbihlKXtyZXR1cm4hZXx8ZS5zZXRJbnRlcnZhbD8h
        MTpBcnJheS5pc0FycmF5JiZBcnJheS5pc0FycmF5KGUpPyEwOkVtYmVyLkFy
        cmF5JiZFbWJlci5BcnJheS5kZXRlY3QoZSk/ITA6dm9pZCAwIT09ZS5sZW5n
        dGgmJiJvYmplY3QiPT10eXBlb2YgZT8hMDohMX0sRW1iZXIubWFrZUFycmF5
        PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZXx8dm9pZCAwPT09ZT9bXTpF
        bWJlci5pc0FycmF5KGUpP2U6W2VdfSxFbWJlci5jYW5JbnZva2U9dCxFbWJl
        ci50cnlJbnZva2U9ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0KGUscik/ZVty
        XS5hcHBseShlLG58fFtdKTp2b2lkIDB9O3ZhciBwPWZ1bmN0aW9uKCl7dmFy
        IGU9MDt0cnl7dHJ5e31maW5hbGx5e3Rocm93IGUrKyxuZXcgRXJyb3IoIm5l
        ZWRzRmluYWxseUZpeFRlc3QiKX19Y2F0Y2godCl7fXJldHVybiAxIT09ZX0o
        KTtFbWJlci50cnlGaW5hbGx5PXA/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGks
        bztyPXJ8fHRoaXM7dHJ5e249ZS5jYWxsKHIpfWZpbmFsbHl7dHJ5e2k9dC5j
        YWxsKHIpfWNhdGNoKGEpe289YX19aWYobyl0aHJvdyBvO3JldHVybiB2b2lk
        IDA9PT1pP246aX06ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGk7cj1yfHx0aGlz
        O3RyeXtuPWUuY2FsbChyKX1maW5hbGx5e2k9dC5jYWxsKHIpfXJldHVybiB2
        b2lkIDA9PT1pP246aX0sRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5PXA/ZnVuY3Rp
        b24oZSx0LHIsbil7dmFyIGksbyxhO249bnx8dGhpczt0cnl7aT1lLmNhbGwo
        bil9Y2F0Y2gocyl7aT10LmNhbGwobixzKX1maW5hbGx5e3RyeXtvPXIuY2Fs
        bChuKX1jYXRjaCh1KXthPXV9fWlmKGEpdGhyb3cgYTtyZXR1cm4gdm9pZCAw
        PT09bz9pOm99OmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLG87bj1ufHx0aGlz
        O3RyeXtpPWUuY2FsbChuKX1jYXRjaChhKXtpPXQuY2FsbChuLGEpfWZpbmFs
        bHl7bz1yLmNhbGwobil9cmV0dXJuIHZvaWQgMD09PW8/aTpvfTt2YXIgZD17
        fSxiPSJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0
        ZSBSZWdFeHAgT2JqZWN0Ii5zcGxpdCgiICIpO0VtYmVyLkFycmF5UG9seWZp
        bGxzLmZvckVhY2guY2FsbChiLGZ1bmN0aW9uKGUpe2RbIltvYmplY3QgIitl
        KyJdIl09ZS50b0xvd2VyQ2FzZSgpfSk7dmFyIEU9T2JqZWN0LnByb3RvdHlw
        ZS50b1N0cmluZztFbWJlci50eXBlT2Y9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0
        dXJuIHQ9bnVsbD09PWV8fHZvaWQgMD09PWU/U3RyaW5nKGUpOmRbRS5jYWxs
        KGUpXXx8Im9iamVjdCIsImZ1bmN0aW9uIj09PXQ/RW1iZXIuT2JqZWN0JiZF
        bWJlci5PYmplY3QuZGV0ZWN0KGUpJiYodD0iY2xhc3MiKToib2JqZWN0Ij09
        PXQmJih0PWUgaW5zdGFuY2VvZiBFcnJvcj8iZXJyb3IiOkVtYmVyLk9iamVj
        dCYmZSBpbnN0YW5jZW9mIEVtYmVyLk9iamVjdD8iaW5zdGFuY2UiOiJvYmpl
        Y3QiKSx0fX0oKSxmdW5jdGlvbigpe0VtYmVyLkluc3RydW1lbnRhdGlvbj17
        fTt2YXIgZT1bXSx0PXt9LHI9ZnVuY3Rpb24ocil7Zm9yKHZhciBuLGk9W10s
        bz0wLGE9ZS5sZW5ndGg7YT5vO28rKyluPWVbb10sbi5yZWdleC50ZXN0KHIp
        JiZpLnB1c2gobi5vYmplY3QpO3JldHVybiB0W3JdPWksaX0sbj1mdW5jdGlv
        bigpe3ZhciBlPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdy5w
        ZXJmb3JtYW5jZXx8e306e30sdD1lLm5vd3x8ZS5tb3pOb3d8fGUud2Via2l0
        Tm93fHxlLm1zTm93fHxlLm9Ob3c7cmV0dXJuIHQ/dC5iaW5kKGUpOmZ1bmN0
        aW9uKCl7cmV0dXJuK25ldyBEYXRlfX0oKTtFbWJlci5JbnN0cnVtZW50YXRp
        b24uaW5zdHJ1bWVudD1mdW5jdGlvbihlLGksbyxhKXtmdW5jdGlvbiBzKCl7
        Zm9yKHA9MCxkPW0ubGVuZ3RoO2Q+cDtwKyspZj1tW3BdLGJbcF09Zi5iZWZv
        cmUoZSxuKCksaSk7cmV0dXJuIG8uY2FsbChhKX1mdW5jdGlvbiB1KGUpe2k9
        aXx8e30saS5leGNlcHRpb249ZX1mdW5jdGlvbiBjKCl7Zm9yKHA9MCxkPW0u
        bGVuZ3RoO2Q+cDtwKyspZj1tW3BdLGYuYWZ0ZXIoZSxuKCksaSxiW3BdKTtF
        bWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUmJmNvbnNvbGUudGltZUVuZChsKX12
        YXIgbCxoLG09dFtlXTtpZihFbWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUmJihs
        PWUrIjogIitpLm9iamVjdCxjb25zb2xlLnRpbWUobCkpLG18fChtPXIoZSkp
        LDA9PT1tLmxlbmd0aClyZXR1cm4gaD1vLmNhbGwoYSksRW1iZXIuU1RSVUNU
        VVJFRF9QUk9GSUxFJiZjb25zb2xlLnRpbWVFbmQobCksaDt2YXIgZixwLGQs
        Yj1bXTtyZXR1cm4gRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5KHMsdSxjKX0sRW1i
        ZXIuSW5zdHJ1bWVudGF0aW9uLnN1YnNjcmliZT1mdW5jdGlvbihyLG4pe2Zv
        cih2YXIgaSxvPXIuc3BsaXQoIi4iKSxhPVtdLHM9MCx1PW8ubGVuZ3RoO3U+
        cztzKyspaT1vW3NdLCIqIj09PWk/YS5wdXNoKCJbXlxcLl0qIik6YS5wdXNo
        KGkpO2E9YS5qb2luKCJcXC4iKSxhKz0iKFxcLi4qKT8iO3ZhciBjPXtwYXR0
        ZXJuOnIscmVnZXg6bmV3IFJlZ0V4cCgiXiIrYSsiJCIpLG9iamVjdDpufTty
        ZXR1cm4gZS5wdXNoKGMpLHQ9e30sY30sRW1iZXIuSW5zdHJ1bWVudGF0aW9u
        LnVuc3Vic2NyaWJlPWZ1bmN0aW9uKHIpe2Zvcih2YXIgbixpPTAsbz1lLmxl
        bmd0aDtvPmk7aSsrKWVbaV09PT1yJiYobj1pKTtlLnNwbGljZShuLDEpLHQ9
        e319LEVtYmVyLkluc3RydW1lbnRhdGlvbi5yZXNldD1mdW5jdGlvbigpe2U9
        W10sdD17fX0sRW1iZXIuaW5zdHJ1bWVudD1FbWJlci5JbnN0cnVtZW50YXRp
        b24uaW5zdHJ1bWVudCxFbWJlci5zdWJzY3JpYmU9RW1iZXIuSW5zdHJ1bWVu
        dGF0aW9uLnN1YnNjcmliZX0oKSxmdW5jdGlvbigpe3ZhciBlLHQscixuO2U9
        QXJyYXkucHJvdG90eXBlLm1hcHx8RW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFw
        LHQ9QXJyYXkucHJvdG90eXBlLmZvckVhY2h8fEVtYmVyLkFycmF5UG9seWZp
        bGxzLmZvckVhY2gscj1BcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8RW1iZXIu
        QXJyYXlQb2x5ZmlsbHMuaW5kZXhPZixuPUFycmF5LnByb3RvdHlwZS5zcGxp
        Y2U7dmFyIGk9RW1iZXIuRW51bWVyYWJsZVV0aWxzPXttYXA6ZnVuY3Rpb24o
        dCxyLG4pe3JldHVybiB0Lm1hcD90Lm1hcC5jYWxsKHQscixuKTplLmNhbGwo
        dCxyLG4pfSxmb3JFYWNoOmZ1bmN0aW9uKGUscixuKXtyZXR1cm4gZS5mb3JF
        YWNoP2UuZm9yRWFjaC5jYWxsKGUscixuKTp0LmNhbGwoZSxyLG4pfSxpbmRl
        eE9mOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5pbmRleE9mP2UuaW5kZXhP
        Zi5jYWxsKGUsdCxuKTpyLmNhbGwoZSx0LG4pfSxpbmRleGVzT2Y6ZnVuY3Rp
        b24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9bXTppLm1hcCh0LGZ1bmN0aW9u
        KHQpe3JldHVybiBpLmluZGV4T2YoZSx0KX0pfSxhZGRPYmplY3Q6ZnVuY3Rp
        b24oZSx0KXt2YXIgcj1pLmluZGV4T2YoZSx0KTstMT09PXImJmUucHVzaCh0
        KX0scmVtb3ZlT2JqZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5pbmRleE9m
        KGUsdCk7LTEhPT1yJiZlLnNwbGljZShyLDEpfSxfcmVwbGFjZTpmdW5jdGlv
        bihlLHQscixpKXtmb3IodmFyIG8sYSxzPVtdLmNvbmNhdChpKSx1PVtdLGM9
        NmU0LGw9dCxoPXI7cy5sZW5ndGg7KWE9aD5jP2M6aCwwPj1hJiYoYT0wKSxv
        PXMuc3BsaWNlKDAsYyksbz1bbCxhXS5jb25jYXQobyksbCs9YyxoLT1hLHU9
        dS5jb25jYXQobi5hcHBseShlLG8pKTtyZXR1cm4gdX0scmVwbGFjZTpmdW5j
        dGlvbihlLHQscixuKXtyZXR1cm4gZS5yZXBsYWNlP2UucmVwbGFjZSh0LHIs
        bik6aS5fcmVwbGFjZShlLHQscixuKX0saW50ZXJzZWN0aW9uOmZ1bmN0aW9u
        KGUsdCl7dmFyIHI9W107cmV0dXJuIGkuZm9yRWFjaChlLGZ1bmN0aW9uKGUp
        e2kuaW5kZXhPZih0LGUpPj0wJiZyLnB1c2goZSl9KSxyfX19KCksZnVuY3Rp
        b24oKXt2YXIgZSx0PUVtYmVyLk1FVEFfS0VZLHI9RW1iZXIuRU5WLk1BTkRB
        VE9SWV9TRVRURVIsbj0vXihbQS1aJF18KFswLTldW0EtWiRdKSkuKltcLlwq
        XS8saT0vXnRoaXNbXC5cKl0vLG89L14oW15cLlwqXSspLztlPWZ1bmN0aW9u
        KGUsbil7aWYoIiI9PT1uKXJldHVybiBlO2lmKG58fCJzdHJpbmciIT10eXBl
        b2YgZXx8KG49ZSxlPW51bGwpLG51bGw9PT1lfHwtMSE9PW4uaW5kZXhPZigi
        LiIpKXJldHVybiBzKGUsbik7dmFyIGksbz1lW3RdLGE9byYmby5kZXNjc1tu
        XTtyZXR1cm4gYT9hLmdldChlLG4pOihpPXImJm8mJm8ud2F0Y2hpbmdbbl0+
        MD9vLnZhbHVlc1tuXTplW25dLHZvaWQgMCE9PWl8fCJvYmplY3QiIT10eXBl
        b2YgZXx8biBpbiBlfHwiZnVuY3Rpb24iIT10eXBlb2YgZS51bmtub3duUHJv
        cGVydHk/aTplLnVua25vd25Qcm9wZXJ0eShuKSl9LEVtYmVyLmNvbmZpZy5v
        dmVycmlkZUFjY2Vzc29ycyYmKEVtYmVyLmdldD1lLEVtYmVyLmNvbmZpZy5v
        dmVycmlkZUFjY2Vzc29ycygpLGU9RW1iZXIuZ2V0KTt2YXIgYT1FbWJlci5u
        b3JtYWxpemVUdXBsZT1mdW5jdGlvbih0LHIpe3ZhciBhLHM9aS50ZXN0KHIp
        LHU9IXMmJm4udGVzdChyKTtpZigoIXR8fHUpJiYodD1FbWJlci5sb29rdXAp
        LHMmJihyPXIuc2xpY2UoNSkpLHQ9PT1FbWJlci5sb29rdXAmJihhPXIubWF0
        Y2gobylbMF0sdD1lKHQsYSkscj1yLnNsaWNlKGEubGVuZ3RoKzEpKSwhcnx8
        MD09PXIubGVuZ3RoKXRocm93IG5ldyBFbWJlci5FcnJvcigiSW52YWxpZCBQ
        YXRoIik7cmV0dXJuW3Qscl19LHM9RW1iZXIuX2dldFBhdGg9ZnVuY3Rpb24o
        dCxyKXt2YXIgbixvLHMsdSxjO2lmKG51bGw9PT10JiYtMT09PXIuaW5kZXhP
        ZigiLiIpKXJldHVybiBlKEVtYmVyLmxvb2t1cCxyKTtmb3Iobj1pLnRlc3Qo
        ciksKCF0fHxuKSYmKHM9YSh0LHIpLHQ9c1swXSxyPXNbMV0scy5sZW5ndGg9
        MCksbz1yLnNwbGl0KCIuIiksYz1vLmxlbmd0aCx1PTA7bnVsbCE9dCYmYz51
        O3UrKylpZih0PWUodCxvW3VdLCEwKSx0JiZ0LmlzRGVzdHJveWVkKXJldHVy
        biB2b2lkIDA7cmV0dXJuIHR9O0VtYmVyLmdldFdpdGhEZWZhdWx0PWZ1bmN0
        aW9uKHQscixuKXt2YXIgaT1lKHQscik7cmV0dXJuIHZvaWQgMD09PWk/bjpp
        fSxFbWJlci5nZXQ9ZX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIp
        e2Zvcih2YXIgbj0tMSxpPTAsbz1lLmxlbmd0aDtvPmk7aSs9MylpZih0PT09
        ZVtpXSYmcj09PWVbaSsxXSl7bj1pO2JyZWFrfXJldHVybiBufWZ1bmN0aW9u
        IHQoZSx0KXt2YXIgcixuPWYoZSwhMCk7cmV0dXJuIG4ubGlzdGVuZXJzfHwo
        bi5saXN0ZW5lcnM9e30pLG4uaGFzT3duUHJvcGVydHkoImxpc3RlbmVycyIp
        fHwobi5saXN0ZW5lcnM9bShuLmxpc3RlbmVycykpLHI9bi5saXN0ZW5lcnNb
        dF0sciYmIW4ubGlzdGVuZXJzLmhhc093blByb3BlcnR5KHQpP3I9bi5saXN0
        ZW5lcnNbdF09bi5saXN0ZW5lcnNbdF0uc2xpY2UoKTpyfHwocj1uLmxpc3Rl
        bmVyc1t0XT1bXSkscn1mdW5jdGlvbiByKHQscixuKXt2YXIgaT10W3BdLG89
        aSYmaS5saXN0ZW5lcnMmJmkubGlzdGVuZXJzW3JdO2lmKG8pZm9yKHZhciBh
        PW8ubGVuZ3RoLTM7YT49MDthLT0zKXt2YXIgcz1vW2FdLHU9b1thKzFdLGM9
        b1thKzJdLGw9ZShuLHMsdSk7LTE9PT1sJiZuLnB1c2gocyx1LGMpfX1mdW5j
        dGlvbiBuKHQscixuKXt2YXIgaT10W3BdLG89aSYmaS5saXN0ZW5lcnMmJmku
        bGlzdGVuZXJzW3JdLGE9W107aWYobyl7Zm9yKHZhciBzPW8ubGVuZ3RoLTM7
        cz49MDtzLT0zKXt2YXIgdT1vW3NdLGM9b1tzKzFdLGw9b1tzKzJdLGg9ZShu
        LHUsYyk7LTE9PT1oJiYobi5wdXNoKHUsYyxsKSxhLnB1c2godSxjLGwpKX1y
        ZXR1cm4gYX19ZnVuY3Rpb24gaShyLG4saSxvLGEpe298fCJmdW5jdGlvbiIh
        PXR5cGVvZiBpfHwobz1pLGk9bnVsbCk7dmFyIHM9dChyLG4pLHU9ZShzLGks
        byksYz0wO2EmJihjfD1iKSwtMT09PXUmJihzLnB1c2goaSxvLGMpLCJmdW5j
        dGlvbiI9PXR5cGVvZiByLmRpZEFkZExpc3RlbmVyJiZyLmRpZEFkZExpc3Rl
        bmVyKG4saSxvKSl9ZnVuY3Rpb24gbyhyLG4saSxvKXtmdW5jdGlvbiBhKGks
        byl7dmFyIGE9dChyLG4pLHM9ZShhLGksbyk7LTEhPT1zJiYoYS5zcGxpY2Uo
        cywzKSwiZnVuY3Rpb24iPT10eXBlb2Ygci5kaWRSZW1vdmVMaXN0ZW5lciYm
        ci5kaWRSZW1vdmVMaXN0ZW5lcihuLGksbykpfWlmKG98fCJmdW5jdGlvbiIh
        PXR5cGVvZiBpfHwobz1pLGk9bnVsbCksbylhKGksbyk7ZWxzZXt2YXIgcz1y
        W3BdLHU9cyYmcy5saXN0ZW5lcnMmJnMubGlzdGVuZXJzW25dO2lmKCF1KXJl
        dHVybjtmb3IodmFyIGM9dS5sZW5ndGgtMztjPj0wO2MtPTMpYSh1W2NdLHVb
        YysxXSl9fWZ1bmN0aW9uIGEocixuLGksbyxhKXtmdW5jdGlvbiBzKCl7cmV0
        dXJuIGEuY2FsbChpKX1mdW5jdGlvbiB1KCl7LTEhPT1sJiYoY1tsKzJdJj1+
        RSl9b3x8ImZ1bmN0aW9uIiE9dHlwZW9mIGl8fChvPWksaT1udWxsKTt2YXIg
        Yz10KHIsbiksbD1lKGMsaSxvKTtyZXR1cm4tMSE9PWwmJihjW2wrMl18PUUp
        LEVtYmVyLnRyeUZpbmFsbHkocyx1KX1mdW5jdGlvbiBzKHIsbixpLG8sYSl7
        ZnVuY3Rpb24gcygpe3JldHVybiBhLmNhbGwoaSl9ZnVuY3Rpb24gdSgpe2Zv
        cih2YXIgZT0wLHQ9Zi5sZW5ndGg7dD5lO2UrKyl7dmFyIHI9ZltlXTtwW2Vd
        W3IrMl0mPX5FfX1vfHwiZnVuY3Rpb24iIT10eXBlb2YgaXx8KG89aSxpPW51
        bGwpO3ZhciBjLGwsaCxtLGY9W10scD1bXTtmb3IoaD0wLG09bi5sZW5ndGg7
        bT5oO2grKyl7Yz1uW2hdLGw9dChyLGMpO3ZhciBkPWUobCxpLG8pOy0xIT09
        ZCYmKGxbZCsyXXw9RSxmLnB1c2goZCkscC5wdXNoKGwpKX1yZXR1cm4gRW1i
        ZXIudHJ5RmluYWxseShzLHUpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9ZVtwXS5s
        aXN0ZW5lcnMscj1bXTtpZih0KWZvcih2YXIgbiBpbiB0KXRbbl0mJnIucHVz
        aChuKTtyZXR1cm4gcn1mdW5jdGlvbiBjKGUsdCxyLG4pe2lmKGUhPT1FbWJl
        ciYmImZ1bmN0aW9uIj09dHlwZW9mIGUuc2VuZEV2ZW50JiZlLnNlbmRFdmVu
        dCh0LHIpLCFuKXt2YXIgaT1lW3BdO249aSYmaS5saXN0ZW5lcnMmJmkubGlz
        dGVuZXJzW3RdfWlmKG4pe2Zvcih2YXIgYT1uLmxlbmd0aC0zO2E+PTA7YS09
        Myl7dmFyIHM9blthXSx1PW5bYSsxXSxjPW5bYSsyXTt1JiYoYyZFfHwoYyZi
        JiZvKGUsdCxzLHUpLHN8fChzPWUpLCJzdHJpbmciPT10eXBlb2YgdSYmKHU9
        c1t1XSkscj91LmFwcGx5KHMscik6dS5jYWxsKHMpKSl9cmV0dXJuITB9fWZ1
        bmN0aW9uIGwoZSx0KXt2YXIgcj1lW3BdLG49ciYmci5saXN0ZW5lcnMmJnIu
        bGlzdGVuZXJzW3RdO3JldHVybiEoIW58fCFuLmxlbmd0aCl9ZnVuY3Rpb24g
        aChlLHQpe3ZhciByPVtdLG49ZVtwXSxpPW4mJm4ubGlzdGVuZXJzJiZuLmxp
        c3RlbmVyc1t0XTtpZighaSlyZXR1cm4gcjtmb3IodmFyIG89MCxhPWkubGVu
        Z3RoO2E+bztvKz0zKXt2YXIgcz1pW29dLHU9aVtvKzFdO3IucHVzaChbcyx1
        XSl9cmV0dXJuIHJ9dmFyIG09RW1iZXIuY3JlYXRlLGY9RW1iZXIubWV0YSxw
        PUVtYmVyLk1FVEFfS0VZLGQ9W10uc2xpY2UsYj0xLEU9MjtFbWJlci5vbj1m
        dW5jdGlvbigpe3ZhciBlPWQuY2FsbChhcmd1bWVudHMsLTEpWzBdLHQ9ZC5j
        YWxsKGFyZ3VtZW50cywwLC0xKTtyZXR1cm4gZS5fX2VtYmVyX2xpc3RlbnNf
        Xz10LGV9LEVtYmVyLmFkZExpc3RlbmVyPWksRW1iZXIucmVtb3ZlTGlzdGVu
        ZXI9byxFbWJlci5fc3VzcGVuZExpc3RlbmVyPWEsRW1iZXIuX3N1c3BlbmRM
        aXN0ZW5lcnM9cyxFbWJlci5zZW5kRXZlbnQ9YyxFbWJlci5oYXNMaXN0ZW5l
        cnM9bCxFbWJlci53YXRjaGVkRXZlbnRzPXUsRW1iZXIubGlzdGVuZXJzRm9y
        PWgsRW1iZXIubGlzdGVuZXJzRGlmZj1uLEVtYmVyLmxpc3RlbmVyc1VuaW9u
        PXJ9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5ndWlkRm9yLHQ9RW1iZXIu
        c2VuZEV2ZW50LHI9RW1iZXIuX09ic2VydmVyU2V0PWZ1bmN0aW9uKCl7dGhp
        cy5jbGVhcigpfTtyLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxyLG4pe3Zh
        ciBpLG89dGhpcy5vYnNlcnZlclNldCxhPXRoaXMub2JzZXJ2ZXJzLHM9ZSh0
        KSx1PW9bc107cmV0dXJuIHV8fChvW3NdPXU9e30pLGk9dVtyXSx2b2lkIDA9
        PT1pJiYoaT1hLnB1c2goe3NlbmRlcjp0LGtleU5hbWU6cixldmVudE5hbWU6
        bixsaXN0ZW5lcnM6W119KS0xLHVbcl09aSksYVtpXS5saXN0ZW5lcnN9LHIu
        cHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dmFyIGUscixuLGksbz10aGlz
        Lm9ic2VydmVycztmb3IodGhpcy5jbGVhcigpLGU9MCxyPW8ubGVuZ3RoO3I+
        ZTsrK2Upbj1vW2VdLGk9bi5zZW5kZXIsaS5pc0Rlc3Ryb3lpbmd8fGkuaXNE
        ZXN0cm95ZWR8fHQoaSxuLmV2ZW50TmFtZSxbaSxuLmtleU5hbWVdLG4ubGlz
        dGVuZXJzKX0sci5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLm9i
        c2VydmVyU2V0PXt9LHRoaXMub2JzZXJ2ZXJzPVtdfX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSx0KXt2YXIgbj1oKGUsITEpLGk9bi53YXRjaGluZ1t0
        XT4wfHwibGVuZ3RoIj09PXQsYT1uLnByb3RvLHM9bi5kZXNjc1t0XTtpJiZh
        IT09ZSYmKHMmJnMud2lsbENoYW5nZSYmcy53aWxsQ2hhbmdlKGUsdCkscihl
        LHQsbiksbyhlLHQsbiksYyhlLHQpKX1mdW5jdGlvbiB0KGUsdCl7dmFyIHI9
        aChlLCExKSxpPXIud2F0Y2hpbmdbdF0+MHx8Imxlbmd0aCI9PT10LG89ci5w
        cm90byxzPXIuZGVzY3NbdF07byE9PWUmJihzJiZzLmRpZENoYW5nZSYmcy5k
        aWRDaGFuZ2UoZSx0KSwoaXx8Imxlbmd0aCI9PT10KSYmKG4oZSx0LHIpLGEo
        ZSx0LHIsITEpLGwoZSx0KSkpfWZ1bmN0aW9uIHIodCxyLG4pe2lmKCF0Lmlz
        RGVzdHJveWluZyl7dmFyIG89dyxhPSFvO2EmJihvPXc9e30pLGkoZSx0LHIs
        byxuKSxhJiYodz1udWxsKX19ZnVuY3Rpb24gbihlLHIsbil7aWYoIWUuaXNE
        ZXN0cm95aW5nKXt2YXIgbz1fLGE9IW87YSYmKG89Xz17fSksaSh0LGUscixv
        LG4pLGEmJihfPW51bGwpfX1mdW5jdGlvbiBpKGUsdCxyLG4saSl7dmFyIG89
        bSh0KTtpZihuW29dfHwobltvXT17fSksIW5bb11bcl0pe25bb11bcl09ITA7
        dmFyIGE9aS5kZXBzO2lmKGE9YSYmYVtyXSlmb3IodmFyIHMgaW4gYSl7dmFy
        IHU9aS5kZXNjc1tzXTt1JiZ1Ll9zdXNwZW5kZWQ9PT10fHxlKHQscyl9fX1m
        dW5jdGlvbiBvKHQscixuKXtpZihuLmhhc093blByb3BlcnR5KCJjaGFpbldh
        dGNoZXJzIikmJm4uY2hhaW5XYXRjaGVyc1tyXSl7dmFyIGksbyxhPW4uY2hh
        aW5XYXRjaGVyc1tyXSxzPVtdO2ZvcihpPTAsbz1hLmxlbmd0aDtvPmk7aSsr
        KWFbaV0ud2lsbENoYW5nZShzKTtmb3IoaT0wLG89cy5sZW5ndGg7bz5pO2kr
        PTIpZShzW2ldLHNbaSsxXSl9fWZ1bmN0aW9uIGEoZSxyLG4saSl7aWYobi5o
        YXNPd25Qcm9wZXJ0eSgiY2hhaW5XYXRjaGVycyIpJiZuLmNoYWluV2F0Y2hl
        cnNbcl0pe3ZhciBvLGEscz1uLmNoYWluV2F0Y2hlcnNbcl0sdT1pP251bGw6
        W107Zm9yKG89MCxhPXMubGVuZ3RoO2E+bztvKyspc1tvXS5kaWRDaGFuZ2Uo
        dSk7aWYoIWkpZm9yKG89MCxhPXUubGVuZ3RoO2E+bztvKz0yKXQodVtvXSx1
        W28rMV0pfX1mdW5jdGlvbiBzKCl7eSsrfWZ1bmN0aW9uIHUoKXt5LS0sMD49
        eSYmKHYuY2xlYXIoKSxnLmZsdXNoKCkpfWZ1bmN0aW9uIGMoZSx0KXtpZigh
        ZS5pc0Rlc3Ryb3lpbmcpe3ZhciByLG4saT10KyI6YmVmb3JlIjt5PyhyPXYu
        YWRkKGUsdCxpKSxuPWIoZSxpLHIpLHAoZSxpLFtlLHRdLG4pKTpwKGUsaSxb
        ZSx0XSl9fWZ1bmN0aW9uIGwoZSx0KXtpZighZS5pc0Rlc3Ryb3lpbmcpe3Zh
        ciByLG49dCsiOmNoYW5nZSI7eT8ocj1nLmFkZChlLHQsbiksZChlLG4scikp
        OnAoZSxuLFtlLHRdKX19dmFyIGg9RW1iZXIubWV0YSxtPUVtYmVyLmd1aWRG
        b3IsZj1FbWJlci50cnlGaW5hbGx5LHA9RW1iZXIuc2VuZEV2ZW50LGQ9RW1i
        ZXIubGlzdGVuZXJzVW5pb24sYj1FbWJlci5saXN0ZW5lcnNEaWZmLEU9RW1i
        ZXIuX09ic2VydmVyU2V0LHY9bmV3IEUsZz1uZXcgRSx5PTA7RW1iZXIucHJv
        cGVydHlXaWxsQ2hhbmdlPWUsRW1iZXIucHJvcGVydHlEaWRDaGFuZ2U9dDt2
        YXIgdyxfO0VtYmVyLm92ZXJyaWRlQ2hhaW5zPWZ1bmN0aW9uKGUsdCxyKXth
        KGUsdCxyLCEwKX0sRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXM9cyxFbWJl
        ci5lbmRQcm9wZXJ0eUNoYW5nZXM9dSxFbWJlci5jaGFuZ2VQcm9wZXJ0aWVz
        PWZ1bmN0aW9uKGUsdCl7cygpLGYoZSx1LHQpfX0oKSxmdW5jdGlvbigpe2Z1
        bmN0aW9uIGUoZSx0LHIsbyl7dmFyIGE7aWYoYT10LnNsaWNlKHQubGFzdElu
        ZGV4T2YoIi4iKSsxKSx0PXQuc2xpY2UoMCx0Lmxlbmd0aC0oYS5sZW5ndGgr
        MSkpLCJ0aGlzIiE9PXQmJihlPW4oZSx0KSksIWF8fDA9PT1hLmxlbmd0aCl0
        aHJvdyBuZXcgRW1iZXIuRXJyb3IoIllvdSBwYXNzZWQgYW4gZW1wdHkgcGF0
        aCIpO2lmKCFlKXtpZihvKXJldHVybjt0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        Ik9iamVjdCBpbiBwYXRoICIrdCsiIGNvdWxkIG5vdCBiZSBmb3VuZCBvciB3
        YXMgZGVzdHJveWVkLiIpfXJldHVybiBpKGUsYSxyKX12YXIgdD1FbWJlci5N
        RVRBX0tFWSxyPUVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSLG49RW1iZXIu
        X2dldFBhdGgsaT1mdW5jdGlvbihuLGksbyxhKXtpZigic3RyaW5nIj09dHlw
        ZW9mIG4mJihvPWksaT1uLG49bnVsbCksIW58fC0xIT09aS5pbmRleE9mKCIu
        IikpcmV0dXJuIGUobixpLG8sYSk7dmFyIHMsdSxjPW5bdF0sbD1jJiZjLmRl
        c2NzW2ldO3JldHVybiBsP2wuc2V0KG4saSxvKToocz0ib2JqZWN0Ij09dHlw
        ZW9mIG4mJiEoaSBpbiBuKSxzJiYiZnVuY3Rpb24iPT10eXBlb2Ygbi5zZXRV
        bmtub3duUHJvcGVydHk/bi5zZXRVbmtub3duUHJvcGVydHkoaSxvKTpjJiZj
        LndhdGNoaW5nW2ldPjA/KHU9cj9jLnZhbHVlc1tpXTpuW2ldLG8hPT11JiYo
        RW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKG4saSkscj92b2lkIDAhPT11fHxp
        IGluIG4/Yy52YWx1ZXNbaV09bzpFbWJlci5kZWZpbmVQcm9wZXJ0eShuLGks
        bnVsbCxvKTpuW2ldPW8sRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UobixpKSkp
        Om5baV09byksb307RW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3JzJiYo
        RW1iZXIuc2V0PWksRW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3JzKCks
        aT1FbWJlci5zZXQpLEVtYmVyLnNldD1pLEVtYmVyLnRyeVNldD1mdW5jdGlv
        bihlLHQscil7cmV0dXJuIGkoZSx0LHIsITApfX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPUVtYmVyLnNldCx0PUVtYmVyLmd1aWRGb3Iscj1FbWJlci5BcnJheVBv
        bHlmaWxscy5pbmRleE9mLG49ZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZh
        ciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7cmV0
        dXJuIHR9LGk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmtleXMuY29weSgpLGk9
        bihlLnZhbHVlcyk7cmV0dXJuIHQua2V5cz1yLHQudmFsdWVzPWksdC5sZW5n
        dGg9ZS5sZW5ndGgsdH0sbz1FbWJlci5PcmRlcmVkU2V0PWZ1bmN0aW9uKCl7
        dGhpcy5jbGVhcigpfTtvLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcg
        b30sby5wcm90b3R5cGU9e2NsZWFyOmZ1bmN0aW9uKCl7dGhpcy5wcmVzZW5j
        ZVNldD17fSx0aGlzLmxpc3Q9W119LGFkZDpmdW5jdGlvbihlKXt2YXIgcj10
        KGUpLG49dGhpcy5wcmVzZW5jZVNldCxpPXRoaXMubGlzdDtyIGluIG58fChu
        W3JdPSEwLGkucHVzaChlKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgbj10
        KGUpLGk9dGhpcy5wcmVzZW5jZVNldCxvPXRoaXMubGlzdDtkZWxldGUgaVtu
        XTt2YXIgYT1yLmNhbGwobyxlKTthPi0xJiZvLnNwbGljZShhLDEpfSxpc0Vt
        cHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmxpc3QubGVuZ3RofSxo
        YXM6ZnVuY3Rpb24oZSl7dmFyIHI9dChlKSxuPXRoaXMucHJlc2VuY2VTZXQ7
        cmV0dXJuIHIgaW4gbn0sZm9yRWFjaDpmdW5jdGlvbihlLHQpe2Zvcih2YXIg
        cj10aGlzLnRvQXJyYXkoKSxuPTAsaT1yLmxlbmd0aDtpPm47bisrKWUuY2Fs
        bCh0LHJbbl0pfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlz
        dC5zbGljZSgpfSxjb3B5OmZ1bmN0aW9uKCl7dmFyIGU9bmV3IG87cmV0dXJu
        IGUucHJlc2VuY2VTZXQ9bih0aGlzLnByZXNlbmNlU2V0KSxlLmxpc3Q9dGhp
        cy50b0FycmF5KCksZX19O3ZhciBhPUVtYmVyLk1hcD1mdW5jdGlvbigpe3Ro
        aXMua2V5cz1FbWJlci5PcmRlcmVkU2V0LmNyZWF0ZSgpLHRoaXMudmFsdWVz
        PXt9fTthLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgYX0sYS5wcm90
        b3R5cGU9e2xlbmd0aDowLGdldDpmdW5jdGlvbihlKXt2YXIgcj10aGlzLnZh
        bHVlcyxuPXQoZSk7cmV0dXJuIHJbbl19LHNldDpmdW5jdGlvbihyLG4pe3Zh
        ciBpPXRoaXMua2V5cyxvPXRoaXMudmFsdWVzLGE9dChyKTtpLmFkZChyKSxv
        W2FdPW4sZSh0aGlzLCJsZW5ndGgiLGkubGlzdC5sZW5ndGgpfSxyZW1vdmU6
        ZnVuY3Rpb24ocil7dmFyIG49dGhpcy5rZXlzLGk9dGhpcy52YWx1ZXMsbz10
        KHIpO3JldHVybiBpLmhhc093blByb3BlcnR5KG8pPyhuLnJlbW92ZShyKSxk
        ZWxldGUgaVtvXSxlKHRoaXMsImxlbmd0aCIsbi5saXN0Lmxlbmd0aCksITAp
        OiExfSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy52YWx1ZXMsbj10KGUp
        O3JldHVybiByLmhhc093blByb3BlcnR5KG4pfSxmb3JFYWNoOmZ1bmN0aW9u
        KGUscil7dmFyIG49dGhpcy5rZXlzLGk9dGhpcy52YWx1ZXM7bi5mb3JFYWNo
        KGZ1bmN0aW9uKG4pe3ZhciBvPXQobik7ZS5jYWxsKHIsbixpW29dKX0pfSxj
        b3B5OmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcyxuZXcgYSl9fTt2YXIgcz1F
        bWJlci5NYXBXaXRoRGVmYXVsdD1mdW5jdGlvbihlKXthLmNhbGwodGhpcyks
        dGhpcy5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWV9O3MuY3JlYXRlPWZ1
        bmN0aW9uKGUpe3JldHVybiBlP25ldyBzKGUpOm5ldyBhfSxzLnByb3RvdHlw
        ZT1FbWJlci5jcmVhdGUoYS5wcm90b3R5cGUpLHMucHJvdG90eXBlLmdldD1m
        dW5jdGlvbihlKXt2YXIgdD10aGlzLmhhcyhlKTtpZih0KXJldHVybiBhLnBy
        b3RvdHlwZS5nZXQuY2FsbCh0aGlzLGUpO3ZhciByPXRoaXMuZGVmYXVsdFZh
        bHVlKGUpO3JldHVybiB0aGlzLnNldChlLHIpLHJ9LHMucHJvdG90eXBlLmNv
        cHk9ZnVuY3Rpb24oKXtyZXR1cm4gaSh0aGlzLG5ldyBzKHtkZWZhdWx0VmFs
        dWU6dGhpcy5kZWZhdWx0VmFsdWV9KSl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlKXt2YXIgdDtFbWJlci5pbXBvcnRzLmNvbnNvbGU/dD1FbWJlci5p
        bXBvcnRzLmNvbnNvbGU6InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiYo
        dD1jb25zb2xlKTt2YXIgcj0ib2JqZWN0Ij09dHlwZW9mIHQ/dFtlXTpudWxs
        O3JldHVybiByP3IuYXBwbHk/ZnVuY3Rpb24oKXtyLmFwcGx5KHQsYXJndW1l
        bnRzKX06ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuam9pbi5j
        YWxsKGFyZ3VtZW50cywiLCAiKTtyKGUpfTp2b2lkIDB9ZnVuY3Rpb24gdChl
        LHQpe2lmKCFlKXRyeXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImFzc2VydGlv
        biBmYWlsZWQ6ICIrdCl9Y2F0Y2gocil7c2V0VGltZW91dChmdW5jdGlvbigp
        e3Rocm93IHJ9LDApfX1FbWJlci5Mb2dnZXI9e2xvZzplKCJsb2ciKXx8RW1i
        ZXIuSyx3YXJuOmUoIndhcm4iKXx8RW1iZXIuSyxlcnJvcjplKCJlcnJvciIp
        fHxFbWJlci5LLGluZm86ZSgiaW5mbyIpfHxFbWJlci5LLGRlYnVnOmUoImRl
        YnVnIil8fGUoImluZm8iKXx8RW1iZXIuSyxhc3NlcnQ6ZSgiYXNzZXJ0Iil8
        fHR9fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuTUVUQV9LRVksdD1FbWJl
        ci5tZXRhLHI9RW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHksbj1FbWJl
        ci5FTlYuTUFOREFUT1JZX1NFVFRFUjtFbWJlci5EZXNjcmlwdG9yPWZ1bmN0
        aW9uKCl7fTt2YXIgaT1FbWJlci5NQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9O
        PWZ1bmN0aW9uKCl7fSxvPUVtYmVyLkRFRkFVTFRfR0VUVEVSX0ZVTkNUSU9O
        PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciByPXRoaXNbZV07
        cmV0dXJuIHImJnIudmFsdWVzW3RdfX07RW1iZXIuZGVmaW5lUHJvcGVydHk9
        ZnVuY3Rpb24oZSxhLHMsdSxjKXt2YXIgbCxoLG0sZjtyZXR1cm4gY3x8KGM9
        dChlKSksbD1jLmRlc2NzLGg9Yy5kZXNjc1thXSxtPWMud2F0Y2hpbmdbYV0+
        MCxoIGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRvciYmaC50ZWFyZG93bihl
        LGEpLHMgaW5zdGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yPyhmPXMsbFthXT1z
        LG4mJm0/cihlLGEse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHdy
        aXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pOmVbYV09dm9pZCAwKToobFthXT12
        b2lkIDAsbnVsbD09cz8oZj11LG4mJm0/KGMudmFsdWVzW2FdPXUscihlLGEs
        e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHNldDppLGdldDpvKGEp
        fSkpOmVbYV09dSk6KGY9cyxyKGUsYSxzKSkpLG0mJkVtYmVyLm92ZXJyaWRl
        Q2hhaW5zKGUsYSxjKSxlLmRpZERlZmluZVByb3BlcnR5JiZlLmRpZERlZmlu
        ZVByb3BlcnR5KGUsYSxmKSx0aGlzfX0oKSxmdW5jdGlvbigpe3ZhciBlPUVt
        YmVyLmdldDtFbWJlci5nZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKHQpe3ZhciBy
        PXt9LG49YXJndW1lbnRzLGk9MTsyPT09YXJndW1lbnRzLmxlbmd0aCYmImFy
        cmF5Ij09PUVtYmVyLnR5cGVPZihhcmd1bWVudHNbMV0pJiYoaT0wLG49YXJn
        dW1lbnRzWzFdKTtmb3IodmFyIG89bi5sZW5ndGg7bz5pO2krKylyW25baV1d
        PWUodCxuW2ldKTtyZXR1cm4gcn19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJl
        ci5jaGFuZ2VQcm9wZXJ0aWVzLHQ9RW1iZXIuc2V0O0VtYmVyLnNldFByb3Bl
        cnRpZXM9ZnVuY3Rpb24ocixuKXtyZXR1cm4gZShmdW5jdGlvbigpe2Zvcih2
        YXIgZSBpbiBuKW4uaGFzT3duUHJvcGVydHkoZSkmJnQocixlLG5bZV0pfSks
        cn19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5tZXRhLHQ9RW1iZXIudHlw
        ZU9mLHI9RW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIsbj1FbWJlci5wbGF0
        Zm9ybS5kZWZpbmVQcm9wZXJ0eTtFbWJlci53YXRjaEtleT1mdW5jdGlvbihp
        LG8pe2lmKCJsZW5ndGgiIT09b3x8ImFycmF5IiE9PXQoaSkpe3ZhciBhPWUo
        aSkscz1hLndhdGNoaW5nO3Nbb10/c1tvXT0oc1tvXXx8MCkrMTooc1tvXT0x
        LCJmdW5jdGlvbiI9PXR5cGVvZiBpLndpbGxXYXRjaFByb3BlcnR5JiZpLndp
        bGxXYXRjaFByb3BlcnR5KG8pLHImJm8gaW4gaSYmKGEudmFsdWVzW29dPWlb
        b10sbihpLG8se2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHNldDpF
        bWJlci5NQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9OLGdldDpFbWJlci5ERUZB
        VUxUX0dFVFRFUl9GVU5DVElPTihvKX0pKSl9fSxFbWJlci51bndhdGNoS2V5
        PWZ1bmN0aW9uKHQsaSl7dmFyIG89ZSh0KSxhPW8ud2F0Y2hpbmc7MT09PWFb
        aV0/KGFbaV09MCwiZnVuY3Rpb24iPT10eXBlb2YgdC5kaWRVbndhdGNoUHJv
        cGVydHkmJnQuZGlkVW53YXRjaFByb3BlcnR5KGkpLHImJmkgaW4gdCYmKG4o
        dCxpLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZToh
        MCx2YWx1ZTpvLnZhbHVlc1tpXX0pLGRlbGV0ZSBvLnZhbHVlc1tpXSkpOmFb
        aV0+MSYmYVtpXS0tfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0
        dXJuIGUubWF0Y2gobClbMF19ZnVuY3Rpb24gdChlLHQscil7aWYoZSYmIm9i
        amVjdCI9PXR5cGVvZiBlKXt2YXIgaT1uKGUpLG89aS5jaGFpbldhdGNoZXJz
        O2kuaGFzT3duUHJvcGVydHkoImNoYWluV2F0Y2hlcnMiKXx8KG89aS5jaGFp
        bldhdGNoZXJzPXt9KSxvW3RdfHwob1t0XT1bXSksb1t0XS5wdXNoKHIpLHUo
        ZSx0KX19ZnVuY3Rpb24gcihlLHQpe2lmKCFlKXJldHVybiB2b2lkIDA7dmFy
        IHI9bihlLCExKTtpZihyLnByb3RvPT09ZSlyZXR1cm4gdm9pZCAwO2lmKCJA
        ZWFjaCI9PT10KXJldHVybiBpKGUsdCk7dmFyIG89ci5kZXNjc1t0XTtyZXR1
        cm4gbyYmby5fY2FjaGVhYmxlP3QgaW4gci5jYWNoZT9yLmNhY2hlW3RdOnZv
        aWQgMDppKGUsdCl9dmFyIG49RW1iZXIubWV0YSxpPUVtYmVyLmdldCxvPUVt
        YmVyLm5vcm1hbGl6ZVR1cGxlLGE9RW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9y
        RWFjaCxzPUVtYmVyLndhcm4sdT1FbWJlci53YXRjaEtleSxjPUVtYmVyLnVu
        d2F0Y2hLZXksbD0vXihbXlwuXCpdKykvLGg9W107RW1iZXIuZmx1c2hQZW5k
        aW5nQ2hhaW5zPWZ1bmN0aW9uKCl7aWYoMCE9PWgubGVuZ3RoKXt2YXIgZT1o
        O2g9W10sYS5jYWxsKGUsZnVuY3Rpb24oZSl7ZVswXS5hZGQoZVsxXSl9KSxz
        KCJXYXRjaGluZyBhbiB1bmRlZmluZWQgZ2xvYmFsLCBFbWJlciBleHBlY3Rz
        IHdhdGNoZWQgZ2xvYmFscyB0byBiZSBzZXR1cCBieSB0aGUgdGltZSB0aGUg
        cnVuIGxvb3AgaXMgZmx1c2hlZCwgY2hlY2sgZm9yIHR5cG9zIiwwPT09aC5s
        ZW5ndGgpfX07dmFyIG09RW1iZXIucmVtb3ZlQ2hhaW5XYXRjaGVyPWZ1bmN0
        aW9uKGUsdCxyKXtpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUpe3ZhciBpPW4o
        ZSwhMSk7aWYoaS5oYXNPd25Qcm9wZXJ0eSgiY2hhaW5XYXRjaGVycyIpKXt2
        YXIgbz1pLmNoYWluV2F0Y2hlcnM7aWYob1t0XSl7bz1vW3RdO2Zvcih2YXIg
        YT0wLHM9by5sZW5ndGg7cz5hO2ErKylvW2FdPT09ciYmby5zcGxpY2UoYSwx
        KX1jKGUsdCl9fX0sZj1FbWJlci5fQ2hhaW5Ob2RlPWZ1bmN0aW9uKGUscixu
        KXt0aGlzLl9wYXJlbnQ9ZSx0aGlzLl9rZXk9cix0aGlzLl93YXRjaGluZz12
        b2lkIDA9PT1uLHRoaXMuX3ZhbHVlPW4sdGhpcy5fcGF0aHM9e30sdGhpcy5f
        d2F0Y2hpbmcmJih0aGlzLl9vYmplY3Q9ZS52YWx1ZSgpLHRoaXMuX29iamVj
        dCYmdCh0aGlzLl9vYmplY3QsdGhpcy5fa2V5LHRoaXMpKSx0aGlzLl9wYXJl
        bnQmJiJAZWFjaCI9PT10aGlzLl9wYXJlbnQuX2tleSYmdGhpcy52YWx1ZSgp
        fSxwPWYucHJvdG90eXBlO3AudmFsdWU9ZnVuY3Rpb24oKXtpZih2b2lkIDA9
        PT10aGlzLl92YWx1ZSYmdGhpcy5fd2F0Y2hpbmcpe3ZhciBlPXRoaXMuX3Bh
        cmVudC52YWx1ZSgpO3RoaXMuX3ZhbHVlPXIoZSx0aGlzLl9rZXkpfXJldHVy
        biB0aGlzLl92YWx1ZX0scC5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5f
        d2F0Y2hpbmcpe3ZhciBlPXRoaXMuX29iamVjdDtlJiZtKGUsdGhpcy5fa2V5
        LHRoaXMpLHRoaXMuX3dhdGNoaW5nPSExfX0scC5jb3B5PWZ1bmN0aW9uKGUp
        e3ZhciB0LHI9bmV3IGYobnVsbCxudWxsLGUpLG49dGhpcy5fcGF0aHM7Zm9y
        KHQgaW4gbiluW3RdPD0wfHxyLmFkZCh0KTtyZXR1cm4gcn0scC5hZGQ9ZnVu
        Y3Rpb24odCl7dmFyIHIsbixpLGEscztpZihzPXRoaXMuX3BhdGhzLHNbdF09
        KHNbdF18fDApKzEscj10aGlzLnZhbHVlKCksbj1vKHIsdCksblswXSYmblsw
        XT09PXIpdD1uWzFdLGk9ZSh0KSx0PXQuc2xpY2UoaS5sZW5ndGgrMSk7ZWxz
        ZXtpZighblswXSlyZXR1cm4gaC5wdXNoKFt0aGlzLHRdKSxuLmxlbmd0aD0w
        LHZvaWQgMDthPW5bMF0saT10LnNsaWNlKDAsMC0oblsxXS5sZW5ndGgrMSkp
        LHQ9blsxXX1uLmxlbmd0aD0wLHRoaXMuY2hhaW4oaSx0LGEpfSxwLnJlbW92
        ZT1mdW5jdGlvbih0KXt2YXIgcixuLGksYSxzO3M9dGhpcy5fcGF0aHMsc1t0
        XT4wJiZzW3RdLS0scj10aGlzLnZhbHVlKCksbj1vKHIsdCksblswXT09PXI/
        KHQ9blsxXSxpPWUodCksdD10LnNsaWNlKGkubGVuZ3RoKzEpKTooYT1uWzBd
        LGk9dC5zbGljZSgwLDAtKG5bMV0ubGVuZ3RoKzEpKSx0PW5bMV0pLG4ubGVu
        Z3RoPTAsdGhpcy51bmNoYWluKGksdCl9LHAuY291bnQ9MCxwLmNoYWluPWZ1
        bmN0aW9uKHQscixuKXt2YXIgaSxvPXRoaXMuX2NoYWlucztvfHwobz10aGlz
        Ll9jaGFpbnM9e30pLGk9b1t0XSxpfHwoaT1vW3RdPW5ldyBmKHRoaXMsdCxu
        KSksaS5jb3VudCsrLHImJnIubGVuZ3RoPjAmJih0PWUocikscj1yLnNsaWNl
        KHQubGVuZ3RoKzEpLGkuY2hhaW4odCxyKSl9LHAudW5jaGFpbj1mdW5jdGlv
        bih0LHIpe3ZhciBuPXRoaXMuX2NoYWlucyxpPW5bdF07ciYmci5sZW5ndGg+
        MSYmKHQ9ZShyKSxyPXIuc2xpY2UodC5sZW5ndGgrMSksaS51bmNoYWluKHQs
        cikpLGkuY291bnQtLSxpLmNvdW50PD0wJiYoZGVsZXRlIG5baS5fa2V5XSxp
        LmRlc3Ryb3koKSl9LHAud2lsbENoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD10
        aGlzLl9jaGFpbnM7aWYodClmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3Bl
        cnR5KHIpJiZ0W3JdLndpbGxDaGFuZ2UoZSk7dGhpcy5fcGFyZW50JiZ0aGlz
        Ll9wYXJlbnQuY2hhaW5XaWxsQ2hhbmdlKHRoaXMsdGhpcy5fa2V5LDEsZSl9
        LHAuY2hhaW5XaWxsQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMuX2tl
        eSYmKHQ9dGhpcy5fa2V5KyIuIit0KSx0aGlzLl9wYXJlbnQ/dGhpcy5fcGFy
        ZW50LmNoYWluV2lsbENoYW5nZSh0aGlzLHQscisxLG4pOihyPjEmJm4ucHVz
        aCh0aGlzLnZhbHVlKCksdCksdD0idGhpcy4iK3QsdGhpcy5fcGF0aHNbdF0+
        MCYmbi5wdXNoKHRoaXMudmFsdWUoKSx0KSl9LHAuY2hhaW5EaWRDaGFuZ2U9
        ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5fa2V5JiYodD10aGlzLl9rZXkrIi4i
        K3QpLHRoaXMuX3BhcmVudD90aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFuZ2Uo
        dGhpcyx0LHIrMSxuKToocj4xJiZuLnB1c2godGhpcy52YWx1ZSgpLHQpLHQ9
        InRoaXMuIit0LHRoaXMuX3BhdGhzW3RdPjAmJm4ucHVzaCh0aGlzLnZhbHVl
        KCksdCkpfSxwLmRpZENoYW5nZT1mdW5jdGlvbihlKXtpZih0aGlzLl93YXRj
        aGluZyl7dmFyIHI9dGhpcy5fcGFyZW50LnZhbHVlKCk7ciE9PXRoaXMuX29i
        amVjdCYmKG0odGhpcy5fb2JqZWN0LHRoaXMuX2tleSx0aGlzKSx0aGlzLl9v
        YmplY3Q9cix0KHIsdGhpcy5fa2V5LHRoaXMpKSx0aGlzLl92YWx1ZT12b2lk
        IDAsdGhpcy5fcGFyZW50JiYiQGVhY2giPT09dGhpcy5fcGFyZW50Ll9rZXkm
        JnRoaXMudmFsdWUoKX12YXIgbj10aGlzLl9jaGFpbnM7aWYobilmb3IodmFy
        IGkgaW4gbiluLmhhc093blByb3BlcnR5KGkpJiZuW2ldLmRpZENoYW5nZShl
        KTtudWxsIT09ZSYmdGhpcy5fcGFyZW50JiZ0aGlzLl9wYXJlbnQuY2hhaW5E
        aWRDaGFuZ2UodGhpcyx0aGlzLl9rZXksMSxlKX0sRW1iZXIuZmluaXNoQ2hh
        aW5zPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSwhMSkscj10LmNoYWlucztyJiYo
        ci52YWx1ZSgpIT09ZSYmKHQuY2hhaW5zPXI9ci5jb3B5KGUpKSxyLmRpZENo
        YW5nZShudWxsKSl9fSgpLGZ1bmN0aW9uKCl7aWYoRW1iZXIuRkVBVFVSRVMu
        aXNFbmFibGVkKCJwcm9wZXJ0eUJyYWNlRXhwYW5zaW9uIikpe3ZhciBlPUVt
        YmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLHQ9L15ceyhbXi5dKilcfSQv
        O0VtYmVyLmV4cGFuZFByb3BlcnRpZXM9ZnVuY3Rpb24ocixuKXtyZXR1cm4g
        dC50ZXN0KHIpPyhlKHIuc3Vic3RyaW5nKDEsci5sZW5ndGgtMSkuc3BsaXQo
        IiwiKSxuKSx2b2lkIDApOihuKHIpLHZvaWQgMCl9fX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSl7dmFyIHI9dChlKSxpPXIuY2hhaW5zO3JldHVybiBp
        P2kudmFsdWUoKSE9PWUmJihpPXIuY2hhaW5zPWkuY29weShlKSk6aT1yLmNo
        YWlucz1uZXcgbihudWxsLG51bGwsZSksaX12YXIgdD1FbWJlci5tZXRhLHI9
        RW1iZXIudHlwZU9mLG49RW1iZXIuX0NoYWluTm9kZTtFbWJlci53YXRjaFBh
        dGg9ZnVuY3Rpb24obixpKXtpZigibGVuZ3RoIiE9PWl8fCJhcnJheSIhPT1y
        KG4pKXt2YXIgbz10KG4pLGE9by53YXRjaGluZzthW2ldP2FbaV09KGFbaV18
        fDApKzE6KGFbaV09MSxlKG4pLmFkZChpKSl9fSxFbWJlci51bndhdGNoUGF0
        aD1mdW5jdGlvbihyLG4pe3ZhciBpPXQociksbz1pLndhdGNoaW5nOzE9PT1v
        W25dPyhvW25dPTAsZShyKS5yZW1vdmUobikpOm9bbl0+MSYmb1tuXS0tfX0o
        KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIioiPT09ZXx8IWgu
        dGVzdChlKX12YXIgdD1FbWJlci5tZXRhLHI9RW1iZXIuR1VJRF9LRVksbj1F
        bWJlci5NRVRBX0tFWSxpPUVtYmVyLnJlbW92ZUNoYWluV2F0Y2hlcixvPUVt
        YmVyLndhdGNoS2V5LGE9RW1iZXIudW53YXRjaEtleSxzPUVtYmVyLndhdGNo
        UGF0aCx1PUVtYmVyLnVud2F0Y2hQYXRoLGM9RW1iZXIudHlwZU9mLGw9RW1i
        ZXIuZ2VuZXJhdGVHdWlkLGg9L1tcLlwqXS87aWYoRW1iZXIuRkVBVFVSRVMu
        aXNFbmFibGVkKCJwcm9wZXJ0eUJyYWNlRXhwYW5zaW9uIikpdmFyIG09RW1i
        ZXIuZXhwYW5kUHJvcGVydGllcztFbWJlci53YXRjaD1mdW5jdGlvbih0LHIp
        eygibGVuZ3RoIiE9PXJ8fCJhcnJheSIhPT1jKHQpKSYmKEVtYmVyLkZFQVRV
        UkVTLmlzRW5hYmxlZCgicHJvcGVydHlCcmFjZUV4cGFuc2lvbiIpP20ocixm
        dW5jdGlvbihyKXtlKHIpP28odCxyKTpzKHQscil9KTplKHIpP28odCxyKTpz
        KHQscikpfSxFbWJlci5pc1dhdGNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIHI9
        ZVtuXTtyZXR1cm4ociYmci53YXRjaGluZ1t0XSk+MH0sRW1iZXIud2F0Y2gu
        Zmx1c2hQZW5kaW5nPUVtYmVyLmZsdXNoUGVuZGluZ0NoYWlucyxFbWJlci51
        bndhdGNoPWZ1bmN0aW9uKHQscil7KCJsZW5ndGgiIT09cnx8ImFycmF5IiE9
        PWModCkpJiYoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCJwcm9wZXJ0eUJy
        YWNlRXhwYW5zaW9uIik/bShyLGZ1bmN0aW9uKHIpe2Uocik/YSh0LHIpOnUo
        dCxyKX0pOmUocik/YSh0LHIpOnUodCxyKSl9LEVtYmVyLnJld2F0Y2g9ZnVu
        Y3Rpb24oZSl7dmFyIG49dChlLCExKSxpPW4uY2hhaW5zO3IgaW4gZSYmIWUu
        aGFzT3duUHJvcGVydHkocikmJmwoZSksaSYmaS52YWx1ZSgpIT09ZSYmKG4u
        Y2hhaW5zPWkuY29weShlKSl9O3ZhciBmPVtdO0VtYmVyLmRlc3Ryb3k9ZnVu
        Y3Rpb24oZSl7dmFyIHQscixvLGEscz1lW25dO2lmKHMmJihlW25dPW51bGws
        dD1zLmNoYWlucykpZm9yKGYucHVzaCh0KTtmLmxlbmd0aD4wOyl7aWYodD1m
        LnBvcCgpLHI9dC5fY2hhaW5zKWZvcihvIGluIHIpci5oYXNPd25Qcm9wZXJ0
        eShvKSYmZi5wdXNoKHJbb10pO3QuX3dhdGNoaW5nJiYoYT10Ll9vYmplY3Qs
        YSYmaShhLHQuX2tleSx0KSl9fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUo
        ZSx0KXt2YXIgcj1lW3RdO3JldHVybiByP2UuaGFzT3duUHJvcGVydHkodCl8
        fChyPWVbdF09ZihyKSk6cj1lW3RdPXt9LHJ9ZnVuY3Rpb24gdCh0KXtyZXR1
        cm4gZSh0LCJkZXBzIil9ZnVuY3Rpb24gcihyLG4saSxvKXt2YXIgYSxzLHUs
        YyxsLGg9ci5fZGVwZW5kZW50S2V5cztpZihoKWZvcihhPXQobykscz0wLHU9
        aC5sZW5ndGg7dT5zO3MrKyljPWhbc10sbD1lKGEsYyksbFtpXT0obFtpXXx8
        MCkrMSxwKG4sYyl9ZnVuY3Rpb24gbihyLG4saSxvKXt2YXIgYSxzLHUsYyxs
        LGg9ci5fZGVwZW5kZW50S2V5cztpZihoKWZvcihhPXQobykscz0wLHU9aC5s
        ZW5ndGg7dT5zO3MrKyljPWhbc10sbD1lKGEsYyksbFtpXT0obFtpXXx8MCkt
        MSxkKG4sYyl9ZnVuY3Rpb24gaShlLHQpe3RoaXMuZnVuYz1lLHRoaXMuX2Nh
        Y2hlYWJsZT10JiZ2b2lkIDAhPT10LmNhY2hlYWJsZT90LmNhY2hlYWJsZToh
        MCx0aGlzLl9kZXBlbmRlbnRLZXlzPXQmJnQuZGVwZW5kZW50S2V5cyx0aGlz
        Ll9yZWFkT25seT10JiYodm9pZCAwIT09dC5yZWFkT25seXx8ISF0LnJlYWRP
        bmx5KX1mdW5jdGlvbiBvKGUpe2Zvcih2YXIgdD0wLHI9ZS5sZW5ndGg7cj50
        O3QrKyllW3RdLmRpZENoYW5nZShudWxsKX1mdW5jdGlvbiBhKGUsdCl7Zm9y
        KHZhciByPXt9LG49MDtuPHQubGVuZ3RoO24rKylyW3Rbbl1dPWMoZSx0W25d
        KTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUsdCl7RW1iZXIuY29tcHV0ZWRbZV09
        ZnVuY3Rpb24oZSl7dmFyIHI9bS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIEVt
        YmVyLmNvbXB1dGVkKGUsZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlz
        LHIpfSl9fWZ1bmN0aW9uIHUoZSx0KXtFbWJlci5jb21wdXRlZFtlXT1mdW5j
        dGlvbigpe3ZhciBlPW0uY2FsbChhcmd1bWVudHMpLHI9RW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLFthKHRoaXMsZSld
        KX0pO3JldHVybiByLnByb3BlcnR5LmFwcGx5KHIsZSl9fXZhciBjPUVtYmVy
        LmdldCxsPUVtYmVyLnNldCxoPUVtYmVyLm1ldGEsbT1bXS5zbGljZSxmPUVt
        YmVyLmNyZWF0ZSxwPShFbWJlci5NRVRBX0tFWSxFbWJlci53YXRjaCksZD1F
        bWJlci51bndhdGNoO2lmKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicHJv
        cGVydHlCcmFjZUV4cGFuc2lvbiIpKXZhciBiPUVtYmVyLmV4cGFuZFByb3Bl
        cnRpZXM7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eT1pLGkucHJvdG90eXBlPW5l
        dyBFbWJlci5EZXNjcmlwdG9yO3ZhciBFPWkucHJvdG90eXBlO0UuY2FjaGVh
        YmxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYWNoZWFibGU9ZSE9PSEx
        LHRoaXN9LEUudm9sYXRpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYWNo
        ZWFibGUoITEpfSxFLnJlYWRPbmx5PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlz
        Ll9yZWFkT25seT12b2lkIDA9PT1lfHwhIWUsdGhpc30sRS5wcm9wZXJ0eT1m
        dW5jdGlvbigpe3ZhciBlO0VtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicHJv
        cGVydHlCcmFjZUV4cGFuc2lvbiIpJiYoZT1mdW5jdGlvbihlKXt0LnB1c2go
        ZSl9KTtmb3IodmFyIHQ9W10scj0wLG49YXJndW1lbnRzLmxlbmd0aDtuPnI7
        cisrKUVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicHJvcGVydHlCcmFjZUV4
        cGFuc2lvbiIpP2IoYXJndW1lbnRzW3JdLGUpOnQucHVzaChhcmd1bWVudHNb
        cl0pO3JldHVybiB0aGlzLl9kZXBlbmRlbnRLZXlzPXQsdGhpc30sRS5tZXRh
        PWZ1bmN0aW9uKGUpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90aGlz
        Ll9tZXRhfHx7fToodGhpcy5fbWV0YT1lLHRoaXMpfSxFLmRpZENoYW5nZT1m
        dW5jdGlvbihlLHQpe2lmKHRoaXMuX2NhY2hlYWJsZSYmdGhpcy5fc3VzcGVu
        ZGVkIT09ZSl7dmFyIHI9aChlKTt0IGluIHIuY2FjaGUmJihkZWxldGUgci5j
        YWNoZVt0XSxuKHRoaXMsZSx0LHIpKX19LEUuZ2V0PWZ1bmN0aW9uKGUsdCl7
        dmFyIG4saSxhLHM7aWYodGhpcy5fY2FjaGVhYmxlKXtpZihhPWgoZSksaT1h
        LmNhY2hlLHQgaW4gaSlyZXR1cm4gaVt0XTtuPWlbdF09dGhpcy5mdW5jLmNh
        bGwoZSx0KSxzPWEuY2hhaW5XYXRjaGVycyYmYS5jaGFpbldhdGNoZXJzW3Rd
        LHMmJm8ocykscih0aGlzLGUsdCxhKX1lbHNlIG49dGhpcy5mdW5jLmNhbGwo
        ZSx0KTtyZXR1cm4gbn0sRS5zZXQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLG8s
        YSxzPXRoaXMuX2NhY2hlYWJsZSx1PXRoaXMuZnVuYyxjPWgoZSxzKSxsPWMu
        d2F0Y2hpbmdbdF0sbT10aGlzLl9zdXNwZW5kZWQsZj0hMSxwPWMuY2FjaGU7
        aWYodGhpcy5fcmVhZE9ubHkpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDYW5u
        b3QgU2V0OiAiK3QrIiBvbjogIitlLnRvU3RyaW5nKCkpO3RoaXMuX3N1c3Bl
        bmRlZD1lO3RyeXtpZihzJiZwLmhhc093blByb3BlcnR5KHQpJiYobz1wW3Rd
        LGY9ITApLGk9dS53cmFwcGVkRnVuY3Rpb24/dS53cmFwcGVkRnVuY3Rpb24u
        bGVuZ3RoOnUubGVuZ3RoLDM9PT1pKWE9dS5jYWxsKGUsdCxuLG8pO2Vsc2V7
        aWYoMiE9PWkpcmV0dXJuIEVtYmVyLmRlZmluZVByb3BlcnR5KGUsdCxudWxs
        LG8pLEVtYmVyLnNldChlLHQsbiksdm9pZCAwO2E9dS5jYWxsKGUsdCxuKX1p
        ZihmJiZvPT09YSlyZXR1cm47bCYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdl
        KGUsdCksZiYmZGVsZXRlIHBbdF0scyYmKGZ8fHIodGhpcyxlLHQsYykscFt0
        XT1hKSxsJiZFbWJlci5wcm9wZXJ0eURpZENoYW5nZShlLHQpfWZpbmFsbHl7
        dGhpcy5fc3VzcGVuZGVkPW19cmV0dXJuIGF9LEUudGVhcmRvd249ZnVuY3Rp
        b24oZSx0KXt2YXIgcj1oKGUpO3JldHVybiB0IGluIHIuY2FjaGUmJm4odGhp
        cyxlLHQsciksdGhpcy5fY2FjaGVhYmxlJiZkZWxldGUgci5jYWNoZVt0XSxu
        dWxsfSxFbWJlci5jb21wdXRlZD1mdW5jdGlvbihlKXt2YXIgdDtpZihhcmd1
        bWVudHMubGVuZ3RoPjEmJih0PW0uY2FsbChhcmd1bWVudHMsMCwtMSksZT1t
        LmNhbGwoYXJndW1lbnRzLC0xKVswXSksImZ1bmN0aW9uIiE9dHlwZW9mIGUp
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDb21wdXRlZCBQcm9wZXJ0eSBkZWNs
        YXJlZCB3aXRob3V0IGEgcHJvcGVydHkgZnVuY3Rpb24iKTt2YXIgcj1uZXcg
        aShlKTtyZXR1cm4gdCYmci5wcm9wZXJ0eS5hcHBseShyLHQpLHJ9LEVtYmVy
        LmNhY2hlRm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHI9aChlLCExKS5jYWNoZTty
        ZXR1cm4gciYmdCBpbiByP3JbdF06dm9pZCAwfSxzKCJlbXB0eSIsZnVuY3Rp
        b24oZSl7cmV0dXJuIEVtYmVyLmlzRW1wdHkoYyh0aGlzLGUpKX0pLHMoIm5v
        dEVtcHR5IixmdW5jdGlvbihlKXtyZXR1cm4hRW1iZXIuaXNFbXB0eShjKHRo
        aXMsZSkpfSkscygibm9uZSIsZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmlz
        Tm9uZShjKHRoaXMsZSkpfSkscygibm90IixmdW5jdGlvbihlKXtyZXR1cm4h
        Yyh0aGlzLGUpfSkscygiYm9vbCIsZnVuY3Rpb24oZSl7cmV0dXJuISFjKHRo
        aXMsZSl9KSxzKCJtYXRjaCIsZnVuY3Rpb24oZSx0KXt2YXIgcj1jKHRoaXMs
        ZSk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByPyEhci5tYXRjaCh0KTohMX0p
        LHMoImVxdWFsIixmdW5jdGlvbihlLHQpe3JldHVybiBjKHRoaXMsZSk9PT10
        fSkscygiZ3QiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGModGhpcyxlKT50fSks
        cygiZ3RlIixmdW5jdGlvbihlLHQpe3JldHVybiBjKHRoaXMsZSk+PXR9KSxz
        KCJsdCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyh0aGlzLGUpPHR9KSxzKCJs
        dGUiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGModGhpcyxlKTw9dH0pLHUoImFu
        ZCIsZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpaWYoZS5oYXNPd25Qcm9w
        ZXJ0eSh0KSYmIWVbdF0pcmV0dXJuITE7cmV0dXJuITB9KSx1KCJvciIsZnVu
        Y3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0
        KSYmZVt0XSlyZXR1cm4hMDtyZXR1cm4hMX0pLHUoImFueSIsZnVuY3Rpb24o
        ZSl7Zm9yKHZhciB0IGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSYmZVt0
        XSlyZXR1cm4gZVt0XTtyZXR1cm4gbnVsbH0pLHUoImNvbGxlY3QiLGZ1bmN0
        aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVy
        dHkocikmJihFbWJlci5pc05vbmUoZVtyXSk/dC5wdXNoKG51bGwpOnQucHVz
        aChlW3JdKSk7cmV0dXJuIHR9KSxFbWJlci5jb21wdXRlZC5hbGlhcz1mdW5j
        dGlvbihlKXtyZXR1cm4gRW1iZXIuY29tcHV0ZWQoZSxmdW5jdGlvbih0LHIp
        e3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/KGwodGhpcyxlLHIpLHIpOmMo
        dGhpcyxlKX0pfSxFbWJlci5jb21wdXRlZC5vbmVXYXk9ZnVuY3Rpb24oZSl7
        cmV0dXJuIEVtYmVyLmNvbXB1dGVkKGUsZnVuY3Rpb24oKXtyZXR1cm4gYyh0
        aGlzLGUpfSl9LEVtYmVyLmNvbXB1dGVkLmRlZmF1bHRUbz1mdW5jdGlvbihl
        KXtyZXR1cm4gRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24odCxyLG4pe3JldHVy
        biAxPT09YXJndW1lbnRzLmxlbmd0aD9udWxsIT1uP246Yyh0aGlzLGUpOm51
        bGwhPXI/cjpjKHRoaXMsZSl9KX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBl
        KGUpe3JldHVybiBlK3J9ZnVuY3Rpb24gdChlKXtyZXR1cm4gZStufXZhciBy
        PSI6Y2hhbmdlIixuPSI6YmVmb3JlIjtpZihFbWJlci5GRUFUVVJFUy5pc0Vu
        YWJsZWQoInByb3BlcnR5QnJhY2VFeHBhbnNpb24iKSl2YXIgaT1FbWJlci5l
        eHBhbmRQcm9wZXJ0aWVzO0VtYmVyLmFkZE9ic2VydmVyPWZ1bmN0aW9uKHQs
        cixuLG8pe3JldHVybiBFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQoInByb3Bl
        cnR5QnJhY2VFeHBhbnNpb24iKT9pKHIsZnVuY3Rpb24ocil7RW1iZXIuYWRk
        TGlzdGVuZXIodCxlKHIpLG4sbyksRW1iZXIud2F0Y2godCxyKX0pOihFbWJl
        ci5hZGRMaXN0ZW5lcih0LGUociksbixvKSxFbWJlci53YXRjaCh0LHIpKSx0
        aGlzfSxFbWJlci5vYnNlcnZlcnNGb3I9ZnVuY3Rpb24odCxyKXtyZXR1cm4g
        RW1iZXIubGlzdGVuZXJzRm9yKHQsZShyKSl9LEVtYmVyLnJlbW92ZU9ic2Vy
        dmVyPWZ1bmN0aW9uKHQscixuLG8pe3JldHVybiBFbWJlci5GRUFUVVJFUy5p
        c0VuYWJsZWQoInByb3BlcnR5QnJhY2VFeHBhbnNpb24iKT9pKHIsZnVuY3Rp
        b24ocil7RW1iZXIudW53YXRjaCh0LHIpLEVtYmVyLnJlbW92ZUxpc3RlbmVy
        KHQsZShyKSxuLG8pCn0pOihFbWJlci51bndhdGNoKHQsciksRW1iZXIucmVt
        b3ZlTGlzdGVuZXIodCxlKHIpLG4sbykpLHRoaXN9LEVtYmVyLmFkZEJlZm9y
        ZU9ic2VydmVyPWZ1bmN0aW9uKGUscixuLG8pe3JldHVybiBFbWJlci5GRUFU
        VVJFUy5pc0VuYWJsZWQoInByb3BlcnR5QnJhY2VFeHBhbnNpb24iKT9pKHIs
        ZnVuY3Rpb24ocil7RW1iZXIuYWRkTGlzdGVuZXIoZSx0KHIpLG4sbyksRW1i
        ZXIud2F0Y2goZSxyKX0pOihFbWJlci5hZGRMaXN0ZW5lcihlLHQociksbixv
        KSxFbWJlci53YXRjaChlLHIpKSx0aGlzfSxFbWJlci5fc3VzcGVuZEJlZm9y
        ZU9ic2VydmVyPWZ1bmN0aW9uKGUscixuLGksbyl7cmV0dXJuIEVtYmVyLl9z
        dXNwZW5kTGlzdGVuZXIoZSx0KHIpLG4saSxvKX0sRW1iZXIuX3N1c3BlbmRP
        YnNlcnZlcj1mdW5jdGlvbih0LHIsbixpLG8pe3JldHVybiBFbWJlci5fc3Vz
        cGVuZExpc3RlbmVyKHQsZShyKSxuLGksbyl9O3ZhciBvPUVtYmVyLkFycmF5
        UG9seWZpbGxzLm1hcDtFbWJlci5fc3VzcGVuZEJlZm9yZU9ic2VydmVycz1m
        dW5jdGlvbihlLHIsbixpLGEpe3ZhciBzPW8uY2FsbChyLHQpO3JldHVybiBF
        bWJlci5fc3VzcGVuZExpc3RlbmVycyhlLHMsbixpLGEpfSxFbWJlci5fc3Vz
        cGVuZE9ic2VydmVycz1mdW5jdGlvbih0LHIsbixpLGEpe3ZhciBzPW8uY2Fs
        bChyLGUpO3JldHVybiBFbWJlci5fc3VzcGVuZExpc3RlbmVycyh0LHMsbixp
        LGEpfSxFbWJlci5iZWZvcmVPYnNlcnZlcnNGb3I9ZnVuY3Rpb24oZSxyKXty
        ZXR1cm4gRW1iZXIubGlzdGVuZXJzRm9yKGUsdChyKSl9LEVtYmVyLnJlbW92
        ZUJlZm9yZU9ic2VydmVyPWZ1bmN0aW9uKGUscixuLG8pe3JldHVybiBFbWJl
        ci5GRUFUVVJFUy5pc0VuYWJsZWQoInByb3BlcnR5QnJhY2VFeHBhbnNpb24i
        KT9pKHIsZnVuY3Rpb24ocil7RW1iZXIudW53YXRjaChlLHIpLEVtYmVyLnJl
        bW92ZUxpc3RlbmVyKGUsdChyKSxuLG8pfSk6KEVtYmVyLnVud2F0Y2goZSxy
        KSxFbWJlci5yZW1vdmVMaXN0ZW5lcihlLHQociksbixvKSksdGhpc319KCks
        ZnVuY3Rpb24oKXtlKCJiYWNrYnVybmVyL3F1ZXVlIixbImV4cG9ydHMiXSxm
        dW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQscil7dGhp
        cy5kYXE9ZSx0aGlzLm5hbWU9dCx0aGlzLm9wdGlvbnM9cix0aGlzLl9xdWV1
        ZT1bXX10LnByb3RvdHlwZT17ZGFxOm51bGwsbmFtZTpudWxsLG9wdGlvbnM6
        bnVsbCxfcXVldWU6bnVsbCxwdXNoOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBp
        PXRoaXMuX3F1ZXVlO3JldHVybiBpLnB1c2goZSx0LHIsbikse3F1ZXVlOnRo
        aXMsdGFyZ2V0OmUsbWV0aG9kOnR9fSxwdXNoVW5pcXVlOmZ1bmN0aW9uKGUs
        dCxyLG4pe3ZhciBpLG8sYSxzLHU9dGhpcy5fcXVldWU7Zm9yKGE9MCxzPXUu
        bGVuZ3RoO3M+YTthKz00KWlmKGk9dVthXSxvPXVbYSsxXSxpPT09ZSYmbz09
        PXQpcmV0dXJuIHVbYSsyXT1yLHVbYSszXT1uLHtxdWV1ZTp0aGlzLHRhcmdl
        dDplLG1ldGhvZDp0fTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaChlLHQscixu
        KSx7cXVldWU6dGhpcyx0YXJnZXQ6ZSxtZXRob2Q6dH19LGZsdXNoOmZ1bmN0
        aW9uKCl7dmFyIGUsdCxyLG4saSxvPXRoaXMuX3F1ZXVlLGE9dGhpcy5vcHRp
        b25zLHM9YSYmYS5iZWZvcmUsdT1hJiZhLmFmdGVyLGM9by5sZW5ndGg7Zm9y
        KGMmJnMmJnMoKSxpPTA7Yz5pO2krPTQpZT1vW2ldLHQ9b1tpKzFdLHI9b1tp
        KzJdLG49b1tpKzNdLHImJnIubGVuZ3RoPjA/dC5hcHBseShlLHIpOnQuY2Fs
        bChlKTtjJiZ1JiZ1KCksby5sZW5ndGg+Yz8odGhpcy5fcXVldWU9by5zbGlj
        ZShjKSx0aGlzLmZsdXNoKCkpOnRoaXMuX3F1ZXVlLmxlbmd0aD0wfSxjYW5j
        ZWw6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGksbz10aGlzLl9xdWV1ZTtmb3Io
        bj0wLGk9by5sZW5ndGg7aT5uO24rPTQpaWYodD1vW25dLHI9b1tuKzFdLHQ9
        PT1lLnRhcmdldCYmcj09PWUubWV0aG9kKXJldHVybiBvLnNwbGljZShuLDQp
        LCEwO2lmKG89dGhpcy5fcXVldWVCZWluZ0ZsdXNoZWQpZm9yKG49MCxpPW8u
        bGVuZ3RoO2k+bjtuKz00KWlmKHQ9b1tuXSxyPW9bbisxXSx0PT09ZS50YXJn
        ZXQmJnI9PT1lLm1ldGhvZClyZXR1cm4gb1tuKzFdPW51bGwsITB9fSxlLlF1
        ZXVlPXR9KSxlKCJiYWNrYnVybmVyL2RlZmVycmVkX2FjdGlvbl9xdWV1ZXMi
        LFsiYmFja2J1cm5lci9xdWV1ZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQp
        eyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUsdCl7dmFyIHI9dGhpcy5xdWV1
        ZXM9e307dGhpcy5xdWV1ZU5hbWVzPWU9ZXx8W107Zm9yKHZhciBuLG89MCxh
        PWUubGVuZ3RoO2E+bztvKyspbj1lW29dLHJbbl09bmV3IGkodGhpcyxuLHRb
        bl0pfWZ1bmN0aW9uIG4oZSx0KXtmb3IodmFyIHIsbixpPTAsbz10O28+PWk7
        aSsrKWlmKHI9ZS5xdWV1ZU5hbWVzW2ldLG49ZS5xdWV1ZXNbcl0sbi5fcXVl
        dWUubGVuZ3RoKXJldHVybiBpO3JldHVybi0xfXZhciBpPWUuUXVldWU7ci5w
        cm90b3R5cGU9e3F1ZXVlTmFtZXM6bnVsbCxxdWV1ZXM6bnVsbCxzY2hlZHVs
        ZTpmdW5jdGlvbihlLHQscixuLGksbyl7dmFyIGE9dGhpcy5xdWV1ZXMscz1h
        W2VdO2lmKCFzKXRocm93IG5ldyBFcnJvcigiWW91IGF0dGVtcHRlZCB0byBz
        Y2hlZHVsZSBhbiBhY3Rpb24gaW4gYSBxdWV1ZSAoIitlKyIpIHRoYXQgZG9l
        c24ndCBleGlzdCIpO3JldHVybiBpP3MucHVzaFVuaXF1ZSh0LHIsbixvKTpz
        LnB1c2godCxyLG4sbyl9LGZsdXNoOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQs
        cixpLG89dGhpcy5xdWV1ZXMsYT10aGlzLnF1ZXVlTmFtZXMscz0wLHU9YS5s
        ZW5ndGg7dT5zOyl7ZT1hW3NdLHQ9b1tlXSxyPXQuX3F1ZXVlQmVpbmdGbHVz
        aGVkPXQuX3F1ZXVlLnNsaWNlKCksdC5fcXVldWU9W107dmFyIGMsbCxoLG0s
        Zj10Lm9wdGlvbnMscD1mJiZmLmJlZm9yZSxkPWYmJmYuYWZ0ZXIsYj0wLEU9
        ci5sZW5ndGg7Zm9yKEUmJnAmJnAoKTtFPmI7KWM9cltiXSxsPXJbYisxXSxo
        PXJbYisyXSxtPXJbYiszXSwic3RyaW5nIj09dHlwZW9mIGwmJihsPWNbbF0p
        LGwmJihoJiZoLmxlbmd0aD4wP2wuYXBwbHkoYyxoKTpsLmNhbGwoYykpLGIr
        PTQ7dC5fcXVldWVCZWluZ0ZsdXNoZWQ9bnVsbCxFJiZkJiZkKCksLTE9PT0o
        aT1uKHRoaXMscykpP3MrKzpzPWl9fX0sdC5EZWZlcnJlZEFjdGlvblF1ZXVl
        cz1yfSksZSgiYmFja2J1cm5lciIsWyJiYWNrYnVybmVyL2RlZmVycmVkX2Fj
        dGlvbl9xdWV1ZXMiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNlIHN0
        cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGV8
        fEUudGVzdChlKX1mdW5jdGlvbiBuKGUsdCl7dGhpcy5xdWV1ZU5hbWVzPWUs
        dGhpcy5vcHRpb25zPXR8fHt9LHRoaXMub3B0aW9ucy5kZWZhdWx0UXVldWV8
        fCh0aGlzLm9wdGlvbnMuZGVmYXVsdFF1ZXVlPWVbMF0pLHRoaXMuaW5zdGFu
        Y2VTdGFjaz1bXX1mdW5jdGlvbiBpKGUpe2UuYmVnaW4oKSxzPWIuc2V0VGlt
        ZW91dChmdW5jdGlvbigpe3M9bnVsbCxlLmVuZCgpfSl9ZnVuY3Rpb24gbyhl
        KXt2YXIgdCxyLG4saSxhPStuZXcgRGF0ZTtlLnJ1bihmdW5jdGlvbigpe2Zv
        cihuPTAsaT1kLmxlbmd0aDtpPm4mJih0PWRbbl0sISh0PmEpKTtuKz0yKTtm
        b3Iocj1kLnNwbGljZSgwLG4pLG49MSxpPXIubGVuZ3RoO2k+bjtuKz0yKWUu
        c2NoZWR1bGUoZS5vcHRpb25zLmRlZmF1bHRRdWV1ZSxudWxsLHJbbl0pfSks
        ZC5sZW5ndGgmJih1PWIuc2V0VGltZW91dChmdW5jdGlvbigpe28oZSksdT1u
        dWxsLGM9bnVsbH0sZFswXS1hKSxjPWRbMF0pfWZ1bmN0aW9uIGEoZSx0KXtm
        b3IodmFyIHIsbj0tMSxpPTAsbz1wLmxlbmd0aDtvPmk7aSsrKWlmKHI9cFtp
        XSxyWzBdPT09ZSYmclsxXT09PXQpe249aTticmVha31yZXR1cm4gbn12YXIg
        cyx1LGMsbD1lLkRlZmVycmVkQWN0aW9uUXVldWVzLGg9W10uc2xpY2UsbT1b
        XS5wb3AsZj1bXSxwPVtdLGQ9W10sYj10aGlzLEU9L1xkKy87bi5wcm90b3R5
        cGU9e3F1ZXVlTmFtZXM6bnVsbCxvcHRpb25zOm51bGwsY3VycmVudEluc3Rh
        bmNlOm51bGwsaW5zdGFuY2VTdGFjazpudWxsLGJlZ2luOmZ1bmN0aW9uKCl7
        dmFyIGU9dGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMub25CZWdpbix0PXRo
        aXMuY3VycmVudEluc3RhbmNlO3QmJnRoaXMuaW5zdGFuY2VTdGFjay5wdXNo
        KHQpLHRoaXMuY3VycmVudEluc3RhbmNlPW5ldyBsKHRoaXMucXVldWVOYW1l
        cyx0aGlzLm9wdGlvbnMpLGUmJmUodGhpcy5jdXJyZW50SW5zdGFuY2UsdCl9
        LGVuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyYmdGhpcy5vcHRp
        b25zLm9uRW5kLHQ9dGhpcy5jdXJyZW50SW5zdGFuY2Uscj1udWxsO3RyeXt0
        LmZsdXNoKCl9ZmluYWxseXt0aGlzLmN1cnJlbnRJbnN0YW5jZT1udWxsLHRo
        aXMuaW5zdGFuY2VTdGFjay5sZW5ndGgmJihyPXRoaXMuaW5zdGFuY2VTdGFj
        ay5wb3AoKSx0aGlzLmN1cnJlbnRJbnN0YW5jZT1yKSxlJiZlKHQscil9fSxy
        dW46ZnVuY3Rpb24oZSx0KXt2YXIgcjt0aGlzLmJlZ2luKCksdHx8KHQ9ZSxl
        PW51bGwpLCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9ZVt0XSk7dmFyIG49ITE7
        dHJ5e3I9YXJndW1lbnRzLmxlbmd0aD4yP3QuYXBwbHkoZSxoLmNhbGwoYXJn
        dW1lbnRzLDIpKTp0LmNhbGwoZSl9ZmluYWxseXtufHwobj0hMCx0aGlzLmVu
        ZCgpKX1yZXR1cm4gcn0sZGVmZXI6ZnVuY3Rpb24oZSx0LHIpe3J8fChyPXQs
        dD1udWxsKSwic3RyaW5nIj09dHlwZW9mIHImJihyPXRbcl0pO3ZhciBuPXRo
        aXMuREVCVUc/KG5ldyBFcnJvcikuc3RhY2s6dm9pZCAwLG89YXJndW1lbnRz
        Lmxlbmd0aD4zP2guY2FsbChhcmd1bWVudHMsMyk6dm9pZCAwO3JldHVybiB0
        aGlzLmN1cnJlbnRJbnN0YW5jZXx8aSh0aGlzKSx0aGlzLmN1cnJlbnRJbnN0
        YW5jZS5zY2hlZHVsZShlLHQscixvLCExLG4pfSxkZWZlck9uY2U6ZnVuY3Rp
        b24oZSx0LHIpe3J8fChyPXQsdD1udWxsKSwic3RyaW5nIj09dHlwZW9mIHIm
        JihyPXRbcl0pO3ZhciBuPXRoaXMuREVCVUc/KG5ldyBFcnJvcikuc3RhY2s6
        dm9pZCAwLG89YXJndW1lbnRzLmxlbmd0aD4zP2guY2FsbChhcmd1bWVudHMs
        Myk6dm9pZCAwO3JldHVybiB0aGlzLmN1cnJlbnRJbnN0YW5jZXx8aSh0aGlz
        KSx0aGlzLmN1cnJlbnRJbnN0YW5jZS5zY2hlZHVsZShlLHQscixvLCEwLG4p
        fSxzZXRUaW1lb3V0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHko
        aSxtKX12YXIgdCxuLGksYSxzLGwsbT1oLmNhbGwoYXJndW1lbnRzKSxmPW0u
        bGVuZ3RoLHA9dGhpcztpZigwIT09Zil7aWYoMT09PWYpdD1tLnNoaWZ0KCks
        bj0wO2Vsc2UgaWYoMj09PWYpYT1tWzBdLHM9bVsxXSwiZnVuY3Rpb24iPT10
        eXBlb2Ygc3x8ImZ1bmN0aW9uIj09dHlwZW9mIGFbc10/KGk9bS5zaGlmdCgp
        LHQ9bS5zaGlmdCgpLG49MCk6cihzKT8odD1tLnNoaWZ0KCksbj1tLnNoaWZ0
        KCkpOih0PW0uc2hpZnQoKSxuPTApO2Vsc2V7dmFyIEU9bVttLmxlbmd0aC0x
        XTtyKEUpJiYobj1tLnBvcCgpKSxhPW1bMF0sbD1tWzFdLCJmdW5jdGlvbiI9
        PXR5cGVvZiBsfHwic3RyaW5nIj09dHlwZW9mIGwmJm51bGwhPT1hJiZsIGlu
        IGE/KGk9bS5zaGlmdCgpLHQ9bS5zaGlmdCgpKTp0PW0uc2hpZnQoKX12YXIg
        dj0rbmV3IERhdGUrcGFyc2VJbnQobiwxMCk7InN0cmluZyI9PXR5cGVvZiB0
        JiYodD1pW3RdKTt2YXIgZyx5O2ZvcihnPTAseT1kLmxlbmd0aDt5PmcmJiEo
        djxkW2ddKTtnKz0yKTtyZXR1cm4gZC5zcGxpY2UoZywwLHYsZSksdSYmdj5j
        P2U6KHUmJihjbGVhclRpbWVvdXQodSksdT1udWxsKSx1PWIuc2V0VGltZW91
        dChmdW5jdGlvbigpe28ocCksdT1udWxsLGM9bnVsbH0sbiksYz12LGUpfX0s
        dGhyb3R0bGU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsbj10aGlzLGk9YXJn
        dW1lbnRzLG89cGFyc2VJbnQobS5jYWxsKGkpLDEwKSxhPTAscz1mLmxlbmd0
        aDtzPmE7YSsrKWlmKHI9ZlthXSxyWzBdPT09ZSYmclsxXT09PXQpcmV0dXJu
        O3ZhciB1PWIuc2V0VGltZW91dChmdW5jdGlvbigpe24ucnVuLmFwcGx5KG4s
        aSk7Zm9yKHZhciBvPS0xLGE9MCxzPWYubGVuZ3RoO3M+YTthKyspaWYocj1m
        W2FdLHJbMF09PT1lJiZyWzFdPT09dCl7bz1hO2JyZWFrfW8+LTEmJmYuc3Bs
        aWNlKG8sMSl9LG8pO2YucHVzaChbZSx0LHVdKX0sZGVib3VuY2U6ZnVuY3Rp
        b24oZSx0KXt2YXIgcixuLGksbz10aGlzLHM9YXJndW1lbnRzLHU9bS5jYWxs
        KHMpOyJudW1iZXIiPT10eXBlb2YgdXx8InN0cmluZyI9PXR5cGVvZiB1Pyhy
        PXUsdT0hMSk6cj1tLmNhbGwocykscj1wYXJzZUludChyLDEwKSxuPWEoZSx0
        KSwtMSE9PW4mJihpPXBbbl0scC5zcGxpY2UobiwxKSxjbGVhclRpbWVvdXQo
        aVsyXSkpO3ZhciBjPWIuc2V0VGltZW91dChmdW5jdGlvbigpe3V8fG8ucnVu
        LmFwcGx5KG8scyksbj1hKGUsdCksbiYmcC5zcGxpY2UobiwxKX0scik7dSYm
        LTE9PT1uJiZvLnJ1bi5hcHBseShvLHMpLHAucHVzaChbZSx0LGNdKX0sY2Fu
        Y2VsVGltZXJzOmZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IoZT0wLHQ9Zi5sZW5n
        dGg7dD5lO2UrKyljbGVhclRpbWVvdXQoZltlXVsyXSk7Zm9yKGY9W10sZT0w
        LHQ9cC5sZW5ndGg7dD5lO2UrKyljbGVhclRpbWVvdXQocFtlXVsyXSk7cD1b
        XSx1JiYoY2xlYXJUaW1lb3V0KHUpLHU9bnVsbCksZD1bXSxzJiYoY2xlYXJU
        aW1lb3V0KHMpLHM9bnVsbCl9LGhhc1RpbWVyczpmdW5jdGlvbigpe3JldHVy
        biEhZC5sZW5ndGh8fHN9LGNhbmNlbDpmdW5jdGlvbihlKXtpZihlJiYib2Jq
        ZWN0Ij09dHlwZW9mIGUmJmUucXVldWUmJmUubWV0aG9kKXJldHVybiBlLnF1
        ZXVlLmNhbmNlbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgZSlmb3IodmFy
        IHQ9MCxyPWQubGVuZ3RoO3I+dDt0Kz0yKWlmKGRbdCsxXT09PWUpcmV0dXJu
        IGQuc3BsaWNlKHQsMiksITB9fSxuLnByb3RvdHlwZS5zY2hlZHVsZT1uLnBy
        b3RvdHlwZS5kZWZlcixuLnByb3RvdHlwZS5zY2hlZHVsZU9uY2U9bi5wcm90
        b3R5cGUuZGVmZXJPbmNlLG4ucHJvdG90eXBlLmxhdGVyPW4ucHJvdG90eXBl
        LnNldFRpbWVvdXQsdC5CYWNrYnVybmVyPW59KX0oKSxmdW5jdGlvbigpe2Z1
        bmN0aW9uIGUoKXshRW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wfXZhciByPWZ1
        bmN0aW9uKGUpe0VtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcD1lfSxuPWZ1bmN0
        aW9uKGUsdCl7RW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wPXR9LGk9dCgiYmFj
        a2J1cm5lciIpLkJhY2tidXJuZXIsbz1uZXcgaShbInN5bmMiLCJhY3Rpb25z
        IiwiZGVzdHJveSJdLHtzeW5jOntiZWZvcmU6RW1iZXIuYmVnaW5Qcm9wZXJ0
        eUNoYW5nZXMsYWZ0ZXI6RW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzfSxkZWZh
        dWx0UXVldWU6ImFjdGlvbnMiLG9uQmVnaW46cixvbkVuZDpufSksYT1bXS5z
        bGljZTtFbWJlci5ydW49ZnVuY3Rpb24oKXt2YXIgZTtpZihFbWJlci5vbmVy
        cm9yKXRyeXtlPW8ucnVuLmFwcGx5KG8sYXJndW1lbnRzKX1jYXRjaCh0KXtF
        bWJlci5vbmVycm9yKHQpfWVsc2UgZT1vLnJ1bi5hcHBseShvLGFyZ3VtZW50
        cyk7cmV0dXJuIGV9LEVtYmVyLnJ1bi5qb2luPWZ1bmN0aW9uKCl7aWYoIUVt
        YmVyLnJ1bi5jdXJyZW50UnVuTG9vcClyZXR1cm4gRW1iZXIucnVuLmFwcGx5
        KEVtYmVyLnJ1bixhcmd1bWVudHMpO3ZhciBlPWEuY2FsbChhcmd1bWVudHMp
        O2UudW5zaGlmdCgiYWN0aW9ucyIpLEVtYmVyLnJ1bi5zY2hlZHVsZS5hcHBs
        eShFbWJlci5ydW4sZSl9LEVtYmVyLnJ1bi5iYWNrYnVybmVyPW8sRW1iZXIu
        cnVuLEVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcD1udWxsLEVtYmVyLnJ1bi5x
        dWV1ZXM9by5xdWV1ZU5hbWVzLEVtYmVyLnJ1bi5iZWdpbj1mdW5jdGlvbigp
        e28uYmVnaW4oKX0sRW1iZXIucnVuLmVuZD1mdW5jdGlvbigpe28uZW5kKCl9
        LEVtYmVyLnJ1bi5zY2hlZHVsZT1mdW5jdGlvbigpe2UoKSxvLnNjaGVkdWxl
        LmFwcGx5KG8sYXJndW1lbnRzKX0sRW1iZXIucnVuLmhhc1NjaGVkdWxlZFRp
        bWVycz1mdW5jdGlvbigpe3JldHVybiBvLmhhc1RpbWVycygpfSxFbWJlci5y
        dW4uY2FuY2VsVGltZXJzPWZ1bmN0aW9uKCl7by5jYW5jZWxUaW1lcnMoKX0s
        RW1iZXIucnVuLnN5bmM9ZnVuY3Rpb24oKXtvLmN1cnJlbnRJbnN0YW5jZSYm
        by5jdXJyZW50SW5zdGFuY2UucXVldWVzLnN5bmMuZmx1c2goKX0sRW1iZXIu
        cnVuLmxhdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIG8ubGF0ZXIuYXBwbHkobyxh
        cmd1bWVudHMpfSxFbWJlci5ydW4ub25jZT1mdW5jdGlvbigpe2UoKTt2YXIg
        dD1hLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gdC51bnNoaWZ0KCJhY3Rpb25z
        Iiksby5zY2hlZHVsZU9uY2UuYXBwbHkobyx0KX0sRW1iZXIucnVuLnNjaGVk
        dWxlT25jZT1mdW5jdGlvbigpe3JldHVybiBlKCksby5zY2hlZHVsZU9uY2Uu
        YXBwbHkobyxhcmd1bWVudHMpfSxFbWJlci5ydW4ubmV4dD1mdW5jdGlvbigp
        e3ZhciBlPWEuY2FsbChhcmd1bWVudHMpO3JldHVybiBlLnB1c2goMSksby5s
        YXRlci5hcHBseShvLGUpfSxFbWJlci5ydW4uY2FuY2VsPWZ1bmN0aW9uKGUp
        e3JldHVybiBvLmNhbmNlbChlKX0sRW1iZXIucnVuLmRlYm91bmNlPWZ1bmN0
        aW9uKCl7cmV0dXJuIG8uZGVib3VuY2UuYXBwbHkobyxhcmd1bWVudHMpfSxF
        bWJlci5ydW4udGhyb3R0bGU9ZnVuY3Rpb24oKXtyZXR1cm4gby50aHJvdHRs
        ZS5hcHBseShvLGFyZ3VtZW50cyl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24g
        ZShlLHQpe3JldHVybiByKG8odCk/RW1iZXIubG9va3VwOmUsdCl9ZnVuY3Rp
        b24gdChlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikm
        JihlW3JdPXRbcl0pfUVtYmVyLkxPR19CSU5ESU5HUz0hMXx8ISFFbWJlci5F
        TlYuTE9HX0JJTkRJTkdTO3ZhciByPUVtYmVyLmdldCxuPShFbWJlci5zZXQs
        RW1iZXIuZ3VpZEZvciksaT0vXihbQS1aJF18KFswLTldW0EtWiRdKSkvLG89
        RW1iZXIuaXNHbG9iYWxQYXRoPWZ1bmN0aW9uKGUpe3JldHVybiBpLnRlc3Qo
        ZSl9LGE9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kaXJlY3Rpb249ImZ3ZCIsdGhp
        cy5fZnJvbT10LHRoaXMuX3RvPWUsdGhpcy5fZGlyZWN0aW9uTWFwPUVtYmVy
        Lk1hcC5jcmVhdGUoKX07YS5wcm90b3R5cGU9e2NvcHk6ZnVuY3Rpb24oKXt2
        YXIgZT1uZXcgYSh0aGlzLl90byx0aGlzLl9mcm9tKTtyZXR1cm4gdGhpcy5f
        b25lV2F5JiYoZS5fb25lV2F5PSEwKSxlfSxmcm9tOmZ1bmN0aW9uKGUpe3Jl
        dHVybiB0aGlzLl9mcm9tPWUsdGhpc30sdG86ZnVuY3Rpb24oZSl7cmV0dXJu
        IHRoaXMuX3RvPWUsdGhpc30sb25lV2F5OmZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMuX29uZVdheT0hMCx0aGlzfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBl
        PXRoaXMuX29uZVdheT8iW29uZVdheV0iOiIiO3JldHVybiJFbWJlci5CaW5k
        aW5nPCIrbih0aGlzKSsiPigiK3RoaXMuX2Zyb20rIiAtPiAiK3RoaXMuX3Rv
        KyIpIitlfSxjb25uZWN0OmZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX2Zyb20s
        bj10aGlzLl90bztyZXR1cm4gRW1iZXIudHJ5U2V0KHQsbixlKHQscikpLEVt
        YmVyLmFkZE9ic2VydmVyKHQscix0aGlzLHRoaXMuZnJvbURpZENoYW5nZSks
        dGhpcy5fb25lV2F5fHxFbWJlci5hZGRPYnNlcnZlcih0LG4sdGhpcyx0aGlz
        LnRvRGlkQ2hhbmdlKSx0aGlzLl9yZWFkeVRvU3luYz0hMCx0aGlzfSxkaXNj
        b25uZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PSF0aGlzLl9vbmVXYXk7cmV0dXJu
        IEVtYmVyLnJlbW92ZU9ic2VydmVyKGUsdGhpcy5fZnJvbSx0aGlzLHRoaXMu
        ZnJvbURpZENoYW5nZSksdCYmRW1iZXIucmVtb3ZlT2JzZXJ2ZXIoZSx0aGlz
        Ll90byx0aGlzLHRoaXMudG9EaWRDaGFuZ2UpLHRoaXMuX3JlYWR5VG9TeW5j
        PSExLHRoaXN9LGZyb21EaWRDaGFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5fc2No
        ZWR1bGVTeW5jKGUsImZ3ZCIpfSx0b0RpZENoYW5nZTpmdW5jdGlvbihlKXt0
        aGlzLl9zY2hlZHVsZVN5bmMoZSwiYmFjayIpfSxfc2NoZWR1bGVTeW5jOmZ1
        bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZGlyZWN0aW9uTWFwLG49ci5nZXQo
        ZSk7bnx8KEVtYmVyLnJ1bi5zY2hlZHVsZSgic3luYyIsdGhpcyx0aGlzLl9z
        eW5jLGUpLHIuc2V0KGUsdCkpLCJiYWNrIj09PW4mJiJmd2QiPT09dCYmci5z
        ZXQoZSwiZndkIil9LF9zeW5jOmZ1bmN0aW9uKHQpe3ZhciBuPUVtYmVyLkxP
        R19CSU5ESU5HUztpZighdC5pc0Rlc3Ryb3llZCYmdGhpcy5fcmVhZHlUb1N5
        bmMpe3ZhciBpPXRoaXMuX2RpcmVjdGlvbk1hcCxvPWkuZ2V0KHQpLGE9dGhp
        cy5fZnJvbSxzPXRoaXMuX3RvO2lmKGkucmVtb3ZlKHQpLCJmd2QiPT09byl7
        dmFyIHU9ZSh0LHRoaXMuX2Zyb20pO24mJkVtYmVyLkxvZ2dlci5sb2coIiAi
        LHRoaXMudG9TdHJpbmcoKSwiLT4iLHUsdCksdGhpcy5fb25lV2F5P0VtYmVy
        LnRyeVNldCh0LHMsdSk6RW1iZXIuX3N1c3BlbmRPYnNlcnZlcih0LHMsdGhp
        cyx0aGlzLnRvRGlkQ2hhbmdlLGZ1bmN0aW9uKCl7RW1iZXIudHJ5U2V0KHQs
        cyx1KX0pfWVsc2UgaWYoImJhY2siPT09byl7dmFyIGM9cih0LHRoaXMuX3Rv
        KTtuJiZFbWJlci5Mb2dnZXIubG9nKCIgIix0aGlzLnRvU3RyaW5nKCksIjwt
        IixjLHQpLEVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXIodCxhLHRoaXMsdGhpcy5m
        cm9tRGlkQ2hhbmdlLGZ1bmN0aW9uKCl7RW1iZXIudHJ5U2V0KEVtYmVyLmlz
        R2xvYmFsUGF0aChhKT9FbWJlci5sb29rdXA6dCxhLGMpfSl9fX19LHQoYSx7
        ZnJvbTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgZTtyZXR1cm4gdC5m
        cm9tLmFwcGx5KHQsYXJndW1lbnRzKX0sdG86ZnVuY3Rpb24oKXt2YXIgZT10
        aGlzLHQ9bmV3IGU7cmV0dXJuIHQudG8uYXBwbHkodCxhcmd1bWVudHMpfSxv
        bmVXYXk6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IHIobnVsbCxl
        KTtyZXR1cm4gbi5vbmVXYXkodCl9fSksRW1iZXIuQmluZGluZz1hLEVtYmVy
        LmJpbmQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgRW1iZXIuQmluZGlu
        Zyh0LHIpLmNvbm5lY3QoZSl9LEVtYmVyLm9uZVdheT1mdW5jdGlvbihlLHQs
        cil7cmV0dXJuIG5ldyBFbWJlci5CaW5kaW5nKHQscikub25lV2F5KCkuY29u
        bmVjdChlKX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PUVt
        YmVyLm1ldGEoZSwhMCkscj10Lm1peGlucztyZXR1cm4gcj90Lmhhc093blBy
        b3BlcnR5KCJtaXhpbnMiKXx8KHI9dC5taXhpbnM9eChyKSk6cj10Lm1peGlu
        cz17fSxyfWZ1bmN0aW9uIHQoZSx0KXtyZXR1cm4gdCYmdC5sZW5ndGg+MCYm
        KGUubWl4aW5zPUMuY2FsbCh0LGZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2Vv
        ZiB5KXJldHVybiBlO3ZhciB0PW5ldyB5O3JldHVybiB0LnByb3BlcnRpZXM9
        ZSx0fSkpLGV9ZnVuY3Rpb24gcihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBl
        b2YgZSYmZS5pc01ldGhvZCE9PSExJiZlIT09Qm9vbGVhbiYmZSE9PU9iamVj
        dCYmZSE9PU51bWJlciYmZSE9PUFycmF5JiZlIT09RGF0ZSYmZSE9PVN0cmlu
        Z31mdW5jdGlvbiBuKGUsdCl7dmFyIHI7cmV0dXJuIHQgaW5zdGFuY2VvZiB5
        PyhyPVYodCksZVtyXT9TOihlW3JdPXQsdC5wcm9wZXJ0aWVzKSk6dH1mdW5j
        dGlvbiBpKGUsdCxyLG4pe3ZhciBpO3JldHVybiBpPXJbZV18fG5bZV0sdFtl
        XSYmKGk9aT9pLmNvbmNhdCh0W2VdKTp0W2VdKSxpfWZ1bmN0aW9uIG8oZSx0
        LHIsbixpKXt2YXIgbztyZXR1cm4gdm9pZCAwPT09blt0XSYmKG89aVt0XSks
        bz1vfHxlLmRlc2NzW3RdLG8mJm8gaW5zdGFuY2VvZiBFbWJlci5Db21wdXRl
        ZFByb3BlcnR5PyhyPXgociksci5mdW5jPUVtYmVyLndyYXAoci5mdW5jLG8u
        ZnVuYykscik6cn1mdW5jdGlvbiBhKGUsdCxyLG4saSl7dmFyIG87cmV0dXJu
        IHZvaWQgMD09PWlbdF0mJihvPW5bdF0pLG89b3x8ZVt0XSwiZnVuY3Rpb24i
        IT10eXBlb2Ygbz9yOkVtYmVyLndyYXAocixvKX1mdW5jdGlvbiBzKGUsdCxy
        LG4pe3ZhciBpPW5bdF18fGVbdF07cmV0dXJuIGk/ImZ1bmN0aW9uIj09dHlw
        ZW9mIGkuY29uY2F0P2kuY29uY2F0KHIpOkVtYmVyLm1ha2VBcnJheShpKS5j
        b25jYXQocik6RW1iZXIubWFrZUFycmF5KHIpfWZ1bmN0aW9uIHUoZSx0LG4s
        aSl7dmFyIG89aVt0XXx8ZVt0XTtpZighbylyZXR1cm4gbjt2YXIgcz1FbWJl
        ci5tZXJnZSh7fSxvKTtmb3IodmFyIHUgaW4gbilpZihuLmhhc093blByb3Bl
        cnR5KHUpKXt2YXIgYz1uW3VdO3NbdV09cihjKT9hKGUsdSxjLG8se30pOmN9
        cmV0dXJuIHN9ZnVuY3Rpb24gYyhlLHQsbixpLGMsbCxoLG0pe2lmKG4gaW5z
        dGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yKXtpZihuPT09dyYmY1t0XSlyZXR1
        cm4gUztuLmZ1bmMmJihuPW8oaSx0LG4sbCxjKSksY1t0XT1uLGxbdF09dm9p
        ZCAwfWVsc2UgaCYmTy5jYWxsKGgsdCk+PTB8fCJjb25jYXRlbmF0ZWRQcm9w
        ZXJ0aWVzIj09PXR8fCJtZXJnZWRQcm9wZXJ0aWVzIj09PXQ/bj1zKGUsdCxu
        LGwpOm0mJk8uY2FsbChtLHQpPj0wP249dShlLHQsbixsKTpyKG4pJiYobj1h
        KGUsdCxuLGwsYykpLGNbdF09dm9pZCAwLGxbdF09bn1mdW5jdGlvbiBsKGUs
        dCxyLG8sYSxzKXtmdW5jdGlvbiB1KGUpe2RlbGV0ZSByW2VdLGRlbGV0ZSBv
        W2VdfWZvcih2YXIgaCxtLGYscCxkLGIsRT0wLHY9ZS5sZW5ndGg7dj5FO0Ur
        KylpZihoPWVbRV0sbT1uKHQsaCksbSE9PVMpaWYobSl7Yj1FbWJlci5tZXRh
        KGEpLGEud2lsbE1lcmdlTWl4aW4mJmEud2lsbE1lcmdlTWl4aW4obSkscD1p
        KCJjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzIixtLG8sYSksZD1pKCJtZXJnZWRQ
        cm9wZXJ0aWVzIixtLG8sYSk7Zm9yKGYgaW4gbSltLmhhc093blByb3BlcnR5
        KGYpJiYocy5wdXNoKGYpLGMoYSxmLG1bZl0sYixyLG8scCxkKSk7bS5oYXNP
        d25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKGEudG9TdHJpbmc9bS50b1N0cmlu
        Zyl9ZWxzZSBoLm1peGlucyYmKGwoaC5taXhpbnMsdCxyLG8sYSxzKSxoLl93
        aXRob3V0JiZBLmNhbGwoaC5fd2l0aG91dCx1KSl9ZnVuY3Rpb24gaChlLHQs
        cixuKXtpZihOLnRlc3QodCkpe3ZhciBpPW4uYmluZGluZ3M7aT9uLmhhc093
        blByb3BlcnR5KCJiaW5kaW5ncyIpfHwoaT1uLmJpbmRpbmdzPXgobi5iaW5k
        aW5ncykpOmk9bi5iaW5kaW5ncz17fSxpW3RdPXJ9fWZ1bmN0aW9uIG0oZSx0
        KXt2YXIgcixuLGksbz10LmJpbmRpbmdzO2lmKG8pe2ZvcihyIGluIG8pbj1v
        W3JdLG4mJihpPXIuc2xpY2UoMCwtNyksbiBpbnN0YW5jZW9mIEVtYmVyLkJp
        bmRpbmc/KG49bi5jb3B5KCksbi50byhpKSk6bj1uZXcgRW1iZXIuQmluZGlu
        ZyhpLG4pLG4uY29ubmVjdChlKSxlW3JdPW4pO3QuYmluZGluZ3M9e319fWZ1
        bmN0aW9uIGYoZSx0KXtyZXR1cm4gbShlLHR8fEVtYmVyLm1ldGEoZSkpLGV9
        ZnVuY3Rpb24gcChlLHQscixuLGkpe3ZhciBvLGE9dC5tZXRob2ROYW1lO3Jl
        dHVybiBuW2FdfHxpW2FdPyhvPWlbYV0sdD1uW2FdKTpyLmRlc2NzW2FdPyh0
        PXIuZGVzY3NbYV0sbz12b2lkIDApOih0PXZvaWQgMCxvPWVbYV0pLHtkZXNj
        OnQsdmFsdWU6b319ZnVuY3Rpb24gZChlLHQscixuLGkpe3ZhciBvPXJbbl07
        aWYobylmb3IodmFyIGE9MCxzPW8ubGVuZ3RoO3M+YTthKyspRW1iZXJbaV0o
        ZSxvW2FdLG51bGwsdCl9ZnVuY3Rpb24gYihlLHQscil7dmFyIG49ZVt0XTsi
        ZnVuY3Rpb24iPT10eXBlb2YgbiYmKGQoZSx0LG4sIl9fZW1iZXJfb2JzZXJ2
        ZXNCZWZvcmVfXyIsInJlbW92ZUJlZm9yZU9ic2VydmVyIiksZChlLHQsbiwi
        X19lbWJlcl9vYnNlcnZlc19fIiwicmVtb3ZlT2JzZXJ2ZXIiKSxkKGUsdCxu
        LCJfX2VtYmVyX2xpc3RlbnNfXyIsInJlbW92ZUxpc3RlbmVyIikpLCJmdW5j
        dGlvbiI9PXR5cGVvZiByJiYoZChlLHQsciwiX19lbWJlcl9vYnNlcnZlc0Jl
        Zm9yZV9fIiwiYWRkQmVmb3JlT2JzZXJ2ZXIiKSxkKGUsdCxyLCJfX2VtYmVy
        X29ic2VydmVzX18iLCJhZGRPYnNlcnZlciIpLGQoZSx0LHIsIl9fZW1iZXJf
        bGlzdGVuc19fIiwiYWRkTGlzdGVuZXIiKSl9ZnVuY3Rpb24gRSh0LHIsbil7
        dmFyIGksbyxhLHM9e30sdT17fSxjPUVtYmVyLm1ldGEodCksbT1bXTtsKHIs
        ZSh0KSxzLHUsdCxtKTtmb3IodmFyIGQ9MCxFPW0ubGVuZ3RoO0U+ZDtkKysp
        aWYoaT1tW2RdLCJjb25zdHJ1Y3RvciIhPT1pJiZ1Lmhhc093blByb3BlcnR5
        KGkpJiYoYT1zW2ldLG89dVtpXSxhIT09dykpe2Zvcig7YSYmYSBpbnN0YW5j
        ZW9mIF87KXt2YXIgdj1wKHQsYSxjLHMsdSk7YT12LmRlc2Msbz12LnZhbHVl
        fSh2b2lkIDAhPT1hfHx2b2lkIDAhPT1vKSYmKGIodCxpLG8pLGgodCxpLG8s
        YyksVCh0LGksYSxvLGMpKX1yZXR1cm4gbnx8Zih0LGMpLHR9ZnVuY3Rpb24g
        dihlLHQscil7dmFyIG49VihlKTtpZihyW25dKXJldHVybiExO2lmKHJbbl09
        ITAsZT09PXQpcmV0dXJuITA7Zm9yKHZhciBpPWUubWl4aW5zLG89aT9pLmxl
        bmd0aDowOy0tbz49MDspaWYodihpW29dLHQscikpcmV0dXJuITA7cmV0dXJu
        ITF9ZnVuY3Rpb24gZyhlLHQscil7aWYoIXJbVih0KV0paWYocltWKHQpXT0h
        MCx0LnByb3BlcnRpZXMpe3ZhciBuPXQucHJvcGVydGllcztmb3IodmFyIGkg
        aW4gbiluLmhhc093blByb3BlcnR5KGkpJiYoZVtpXT0hMCl9ZWxzZSB0Lm1p
        eGlucyYmQS5jYWxsKHQubWl4aW5zLGZ1bmN0aW9uKHQpe2coZSx0LHIpfSl9
        dmFyIHksdyxfLEM9RW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLE89RW1iZXIu
        QXJyYXlQb2x5ZmlsbHMuaW5kZXhPZixBPUVtYmVyLkFycmF5UG9seWZpbGxz
        LmZvckVhY2gsUD1bXS5zbGljZSx4PUVtYmVyLmNyZWF0ZSxUPUVtYmVyLmRl
        ZmluZVByb3BlcnR5LFY9RW1iZXIuZ3VpZEZvcixTPXt9LE49RW1iZXIuSVNf
        QklORElORz0vXi4rQmluZGluZyQvO0VtYmVyLm1peGluPWZ1bmN0aW9uKGUp
        e3ZhciB0PVAuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIEUoZSx0LCExKSxl
        fSxFbWJlci5NaXhpbj1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1l
        bnRzKX0seT1FbWJlci5NaXhpbix5LnByb3RvdHlwZT17cHJvcGVydGllczpu
        dWxsLG1peGluczpudWxsLG93bmVyQ29uc3RydWN0b3I6bnVsbH0seS5fYXBw
        bHk9RSx5LmFwcGx5UGFydGlhbD1mdW5jdGlvbihlKXt2YXIgdD1QLmNhbGwo
        YXJndW1lbnRzLDEpO3JldHVybiBFKGUsdCwhMCl9LHkuZmluaXNoUGFydGlh
        bD1mLEVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zPSExLHkuY3JlYXRlPWZ1
        bmN0aW9uKCl7RW1iZXIuYW55VW5wcm9jZXNzZWRNaXhpbnM9ITA7dmFyIGU9
        dGhpcztyZXR1cm4gdChuZXcgZSxhcmd1bWVudHMpfTt2YXIgUj15LnByb3Rv
        dHlwZTtSLnJlb3Blbj1mdW5jdGlvbigpe3ZhciBlLHQ7dGhpcy5wcm9wZXJ0
        aWVzPyhlPXkuY3JlYXRlKCksZS5wcm9wZXJ0aWVzPXRoaXMucHJvcGVydGll
        cyxkZWxldGUgdGhpcy5wcm9wZXJ0aWVzLHRoaXMubWl4aW5zPVtlXSk6dGhp
        cy5taXhpbnN8fCh0aGlzLm1peGlucz1bXSk7dmFyIHIsbj1hcmd1bWVudHMu
        bGVuZ3RoLGk9dGhpcy5taXhpbnM7Zm9yKHI9MDtuPnI7cisrKWU9YXJndW1l
        bnRzW3JdLGUgaW5zdGFuY2VvZiB5P2kucHVzaChlKToodD15LmNyZWF0ZSgp
        LHQucHJvcGVydGllcz1lLGkucHVzaCh0KSk7cmV0dXJuIHRoaXN9LFIuYXBw
        bHk9ZnVuY3Rpb24oZSl7cmV0dXJuIEUoZSxbdGhpc10sITEpfSxSLmFwcGx5
        UGFydGlhbD1mdW5jdGlvbihlKXtyZXR1cm4gRShlLFt0aGlzXSwhMCl9LFIu
        ZGV0ZWN0PWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiExO2lmKGUgaW5zdGFu
        Y2VvZiB5KXJldHVybiB2KGUsdGhpcyx7fSk7dmFyIHQ9RW1iZXIubWV0YShl
        LCExKS5taXhpbnM7cmV0dXJuIHQ/ISF0W1YodGhpcyldOiExfSxSLndpdGhv
        dXQ9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgeSh0aGlzKTtyZXR1cm4gZS5fd2l0
        aG91dD1QLmNhbGwoYXJndW1lbnRzKSxlfSxSLmtleXM9ZnVuY3Rpb24oKXt2
        YXIgZT17fSx0PXt9LHI9W107ZyhlLHRoaXMsdCk7Zm9yKHZhciBuIGluIGUp
        ZS5oYXNPd25Qcm9wZXJ0eShuKSYmci5wdXNoKG4pO3JldHVybiByfSx5Lm1p
        eGlucz1mdW5jdGlvbihlKXt2YXIgdD1FbWJlci5tZXRhKGUsITEpLm1peGlu
        cyxyPVtdO2lmKCF0KXJldHVybiByO2Zvcih2YXIgbiBpbiB0KXt2YXIgaT10
        W25dO2kucHJvcGVydGllc3x8ci5wdXNoKGkpfXJldHVybiByfSx3PW5ldyBF
        bWJlci5EZXNjcmlwdG9yLHcudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4i
        KFJlcXVpcmVkIFByb3BlcnR5KSJ9LEVtYmVyLnJlcXVpcmVkPWZ1bmN0aW9u
        KCl7cmV0dXJuIHd9LF89ZnVuY3Rpb24oZSl7dGhpcy5tZXRob2ROYW1lPWV9
        LF8ucHJvdG90eXBlPW5ldyBFbWJlci5EZXNjcmlwdG9yLEVtYmVyLmFsaWFz
        PWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgXyhlKX0sRW1iZXIuYWxpYXNNZXRo
        b2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBfKGUpfSxFbWJlci5vYnNlcnZl
        cj1mdW5jdGlvbigpe3ZhciBlPVAuY2FsbChhcmd1bWVudHMsLTEpWzBdLHQ9
        UC5jYWxsKGFyZ3VtZW50cywwLC0xKTtpZigiZnVuY3Rpb24iIT10eXBlb2Yg
        ZSYmKGU9YXJndW1lbnRzWzBdLHQ9UC5jYWxsKGFyZ3VtZW50cywxKSksImZ1
        bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJFbWJl
        ci5vYnNlcnZlciBjYWxsZWQgd2l0aG91dCBhIGZ1bmN0aW9uIik7cmV0dXJu
        IGUuX19lbWJlcl9vYnNlcnZlc19fPXQsZX0sRW1iZXIuaW1tZWRpYXRlT2Jz
        ZXJ2ZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3VtZW50cy5sZW5n
        dGg7dD5lO2UrKylhcmd1bWVudHNbZV07cmV0dXJuIEVtYmVyLm9ic2VydmVy
        LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sRW1iZXIuYmVmb3JlT2JzZXJ2ZXI9
        ZnVuY3Rpb24oKXt2YXIgZT1QLmNhbGwoYXJndW1lbnRzLC0xKVswXSx0PVAu
        Y2FsbChhcmd1bWVudHMsMCwtMSk7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUm
        JihlPWFyZ3VtZW50c1swXSx0PVAuY2FsbChhcmd1bWVudHMsMSkpLCJmdW5j
        dGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBFbWJlci5FcnJvcigiRW1iZXIu
        YmVmb3JlT2JzZXJ2ZXIgY2FsbGVkIHdpdGhvdXQgYSBmdW5jdGlvbiIpO3Jl
        dHVybiBlLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXz10LGV9fSgpLGZ1bmN0
        aW9uKCl7dmFyIGU9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsdD1F
        bWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjtFbWJlci5saWJyYXJpZXM9
        ZnVuY3Rpb24oKXt2YXIgcj1bXSxuPTAsaT1mdW5jdGlvbihlKXtmb3IodmFy
        IHQ9MDt0PHIubGVuZ3RoO3QrKylpZihyW3RdLm5hbWU9PT1lKXJldHVybiBy
        W3RdfTtyZXR1cm4gci5yZWdpc3Rlcj1mdW5jdGlvbihlLHQpe2koZSl8fHIu
        cHVzaCh7bmFtZTplLHZlcnNpb246dH0pfSxyLnJlZ2lzdGVyQ29yZUxpYnJh
        cnk9ZnVuY3Rpb24oZSx0KXtpKGUpfHxyLnNwbGljZShuKyssMCx7bmFtZTpl
        LHZlcnNpb246dH0pfSxyLmRlUmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dmFyIG49
        aShlKTtuJiZyLnNwbGljZSh0KHIsbiksMSl9LHIuZWFjaD1mdW5jdGlvbih0
        KXtlKHIsZnVuY3Rpb24oZSl7dChlLm5hbWUsZS52ZXJzaW9uKX0pfSxyfSgp
        LEVtYmVyLmxpYnJhcmllcy5yZWdpc3RlckNvcmVMaWJyYXJ5KCJFbWJlciIs
        RW1iZXIuVkVSU0lPTil9KCksZnVuY3Rpb24oKXtlKCJyc3ZwL2FsbCIsWyJy
        c3ZwL3Byb21pc2UiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNlIHN0
        cmljdCI7ZnVuY3Rpb24gcihlKXtpZigiW29iamVjdCBBcnJheV0iIT09T2Jq
        ZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXRocm93IG5ldyBUeXBl
        RXJyb3IoIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gYWxsLiIpO3JldHVy
        biBuZXcgbihmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGZ1
        bmN0aW9uKHQpe2koZSx0KX19ZnVuY3Rpb24gaShlLHIpe2FbZV09ciwwPT09
        LS1zJiZ0KGEpfXZhciBvLGE9W10scz1lLmxlbmd0aDswPT09cyYmdChbXSk7
        Zm9yKHZhciB1PTA7dTxlLmxlbmd0aDt1Kyspbz1lW3VdLG8mJiJmdW5jdGlv
        biI9PXR5cGVvZiBvLnRoZW4/by50aGVuKG4odSkscik6aSh1LG8pfSl9dmFy
        IG49ZS5Qcm9taXNlO3QuYWxsPXJ9KSxlKCJyc3ZwL2FzeW5jIixbImV4cG9y
        dHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdCgpe3Jl
        dHVybiBmdW5jdGlvbihlLHQpe3Byb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24o
        KXtlKHQpfSl9fWZ1bmN0aW9uIHIoKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtz
        ZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtlKHQpfSl9fWZ1bmN0aW9uIG4oKXt2
        YXIgZT1bXSx0PW5ldyBzKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5zbGljZSgpO2U9
        W10sdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3Qo
        cil9KX0pLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJu
        IHQub2JzZXJ2ZShyLHthdHRyaWJ1dGVzOiEwfSksd2luZG93LmFkZEV2ZW50
        TGlzdGVuZXIoInVubG9hZCIsZnVuY3Rpb24oKXt0LmRpc2Nvbm5lY3QoKSx0
        PW51bGx9LCExKSxmdW5jdGlvbih0LG4pe2UucHVzaChbdCxuXSksci5zZXRB
        dHRyaWJ1dGUoImRyYWluUXVldWUiLCJkcmFpblF1ZXVlIil9fWZ1bmN0aW9u
        IGkoKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXt1LnNldFRpbWVvdXQoZnVuY3Rp
        b24oKXtlKHQpfSwxKX19dmFyIG8sYT0idW5kZWZpbmVkIiE9dHlwZW9mIHdp
        bmRvdz93aW5kb3c6e30scz1hLk11dGF0aW9uT2JzZXJ2ZXJ8fGEuV2ViS2l0
        TXV0YXRpb25PYnNlcnZlcix1PSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFs
        P2dsb2JhbDp0aGlzO289ImZ1bmN0aW9uIj09dHlwZW9mIHNldEltbWVkaWF0
        ZT9yKCk6InVuZGVmaW5lZCIhPXR5cGVvZiBwcm9jZXNzJiYiW29iamVjdCBw
        cm9jZXNzXSI9PT17fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpP3QoKTpzP24o
        KTppKCksZS5hc3luYz1vfSksZSgicnN2cC9jb25maWciLFsicnN2cC9hc3lu
        YyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIg
        cj1lLmFzeW5jLG49e307bi5hc3luYz1yLHQuY29uZmlnPW59KSxlKCJyc3Zw
        L2RlZmVyIixbInJzdnAvcHJvbWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihl
        LHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKCl7dmFyIGU9e3Jlc29sdmU6
        dm9pZCAwLHJlamVjdDp2b2lkIDAscHJvbWlzZTp2b2lkIDB9O3JldHVybiBl
        LnByb21pc2U9bmV3IG4oZnVuY3Rpb24odCxyKXtlLnJlc29sdmU9dCxlLnJl
        amVjdD1yfSksZX12YXIgbj1lLlByb21pc2U7dC5kZWZlcj1yfSksZSgicnN2
        cC9ldmVudHMiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0
        Ijt2YXIgdD1mdW5jdGlvbihlLHQpe3RoaXMudHlwZT1lO2Zvcih2YXIgciBp
        biB0KXQuaGFzT3duUHJvcGVydHkocikmJih0aGlzW3JdPXRbcl0pfSxyPWZ1
        bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsbj1lLmxlbmd0aDtuPnI7cisrKWlm
        KGVbcl1bMF09PT10KXJldHVybiByO3JldHVybi0xfSxuPWZ1bmN0aW9uKGUp
        e3ZhciB0PWUuX3Byb21pc2VDYWxsYmFja3M7cmV0dXJuIHR8fCh0PWUuX3By
        b21pc2VDYWxsYmFja3M9e30pLHR9LGk9e21peGluOmZ1bmN0aW9uKGUpe3Jl
        dHVybiBlLm9uPXRoaXMub24sZS5vZmY9dGhpcy5vZmYsZS50cmlnZ2VyPXRo
        aXMudHJpZ2dlcixlfSxvbjpmdW5jdGlvbihlLHQsaSl7dmFyIG8sYSxzPW4o
        dGhpcyk7Zm9yKGU9ZS5zcGxpdCgvXHMrLyksaT1pfHx0aGlzO2E9ZS5zaGlm
        dCgpOylvPXNbYV0sb3x8KG89c1thXT1bXSksLTE9PT1yKG8sdCkmJm8ucHVz
        aChbdCxpXSl9LG9mZjpmdW5jdGlvbihlLHQpe3ZhciBpLG8sYSxzPW4odGhp
        cyk7Zm9yKGU9ZS5zcGxpdCgvXHMrLyk7bz1lLnNoaWZ0KCk7KXQ/KGk9c1tv
        XSxhPXIoaSx0KSwtMSE9PWEmJmkuc3BsaWNlKGEsMSkpOnNbb109W119LHRy
        aWdnZXI6ZnVuY3Rpb24oZSxyKXt2YXIgaSxvLGEscyx1LGM9bih0aGlzKTtp
        ZihpPWNbZV0pZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspbz1pW2xdLGE9
        b1swXSxzPW9bMV0sIm9iamVjdCIhPXR5cGVvZiByJiYocj17ZGV0YWlsOnJ9
        KSx1PW5ldyB0KGUsciksYS5jYWxsKHMsdSl9fTtlLkV2ZW50VGFyZ2V0PWl9
        KSxlKCJyc3ZwL2hhc2giLFsicnN2cC9kZWZlciIsImV4cG9ydHMiXSxmdW5j
        dGlvbihlLHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3ZhciB0PTA7
        Zm9yKHZhciByIGluIGUpdCsrO3JldHVybiB0fWZ1bmN0aW9uIG4oZSl7dmFy
        IHQ9e30sbj1pKCksbz1yKGUpOzA9PT1vJiZuLnJlc29sdmUoe30pO3ZhciBh
        PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtzKGUsdCl9fSxzPWZ1
        bmN0aW9uKGUscil7dFtlXT1yLDA9PT0tLW8mJm4ucmVzb2x2ZSh0KX0sdT1m
        dW5jdGlvbihlKXtuLnJlamVjdChlKX07Zm9yKHZhciBjIGluIGUpZVtjXSYm
        ImZ1bmN0aW9uIj09dHlwZW9mIGVbY10udGhlbj9lW2NdLnRoZW4oYShjKSx1
        KTpzKGMsZVtjXSk7cmV0dXJuIG4ucHJvbWlzZX12YXIgaT1lLmRlZmVyO3Qu
        aGFzaD1ufSksZSgicnN2cC9ub2RlIixbInJzdnAvcHJvbWlzZSIsInJzdnAv
        YWxsIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7
        ZnVuY3Rpb24gbihlLHQpe3JldHVybiBmdW5jdGlvbihyLG4pe3I/dChyKTph
        cmd1bWVudHMubGVuZ3RoPjI/ZShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2Fs
        bChhcmd1bWVudHMsMSkpOmUobil9fWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGZ1
        bmN0aW9uKCl7dmFyIHQscixpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxs
        KGFyZ3VtZW50cykscz10aGlzLHU9bmV3IG8oZnVuY3Rpb24oZSxuKXt0PWUs
        cj1ufSk7cmV0dXJuIGEoaSkudGhlbihmdW5jdGlvbihpKXtpLnB1c2gobih0
        LHIpKTt0cnl7ZS5hcHBseShzLGkpfWNhdGNoKG8pe3Iobyl9fSksdX19dmFy
        IG89ZS5Qcm9taXNlLGE9dC5hbGw7ci5kZW5vZGVpZnk9aX0pLGUoInJzdnAv
        cHJvbWlzZSIsWyJyc3ZwL2NvbmZpZyIsInJzdnAvZXZlbnRzIiwiZXhwb3J0
        cyJdLGZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihl
        KXtyZXR1cm4gaShlKXx8Im9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZX1m
        dW5jdGlvbiBpKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlfWZ1bmN0
        aW9uIG8oZSl7bC5vbmVycm9yJiZsLm9uZXJyb3IoZS5kZXRhaWwpfWZ1bmN0
        aW9uIGEoZSx0KXtlPT09dD91KGUsdCk6cyhlLHQpfHx1KGUsdCl9ZnVuY3Rp
        b24gcyhlLHQpe3ZhciByLG89bnVsbDt0cnl7aWYoZT09PXQpdGhyb3cgbmV3
        IFR5cGVFcnJvcigiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJu
        IHRoYXQgc2FtZSBwcm9taXNlLiIpO2lmKG4odCkmJihvPXQudGhlbixpKG8p
        KSlyZXR1cm4gby5jYWxsKHQsZnVuY3Rpb24obil7cmV0dXJuIHI/ITA6KHI9
        ITAsdCE9PW4/YShlLG4pOnUoZSxuKSx2b2lkIDApfSxmdW5jdGlvbih0KXty
        ZXR1cm4gcj8hMDoocj0hMCxjKGUsdCksdm9pZCAwKX0pLCEwfWNhdGNoKHMp
        e3JldHVybiBjKGUscyksITB9cmV0dXJuITF9ZnVuY3Rpb24gdShlLHQpe2wu
        YXN5bmMoZnVuY3Rpb24oKXtlLnRyaWdnZXIoInByb21pc2U6cmVzb2x2ZWQi
        LHtkZXRhaWw6dH0pLGUuaXNGdWxmaWxsZWQ9ITAsZS5mdWxmaWxsbWVudFZh
        bHVlPXR9KX1mdW5jdGlvbiBjKGUsdCl7bC5hc3luYyhmdW5jdGlvbigpe2Uu
        dHJpZ2dlcigicHJvbWlzZTpmYWlsZWQiLHtkZXRhaWw6dH0pLGUuaXNSZWpl
        Y3RlZD0hMCxlLnJlamVjdGVkUmVhc29uPXR9KX12YXIgbD1lLmNvbmZpZyxo
        PXQuRXZlbnRUYXJnZXQsbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ITE7
        aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigi
        WW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBzb2xl
        IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yIik7aWYoISh0
        IGluc3RhbmNlb2YgbSkpcmV0dXJuIG5ldyBtKGUpO3ZhciBuPWZ1bmN0aW9u
        KGUpe3J8fChyPSEwLGEodCxlKSl9LGk9ZnVuY3Rpb24oZSl7cnx8KHI9ITAs
        Yyh0LGUpKX07dGhpcy5vbigicHJvbWlzZTpyZXNvbHZlZCIsZnVuY3Rpb24o
        ZSl7dGhpcy50cmlnZ2VyKCJzdWNjZXNzIix7ZGV0YWlsOmUuZGV0YWlsfSl9
        LHRoaXMpLHRoaXMub24oInByb21pc2U6ZmFpbGVkIixmdW5jdGlvbihlKXt0
        aGlzLnRyaWdnZXIoImVycm9yIix7ZGV0YWlsOmUuZGV0YWlsfSl9LHRoaXMp
        LHRoaXMub24oImVycm9yIixvKTt0cnl7ZShuLGkpfWNhdGNoKHMpe2kocyl9
        fSxmPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvLHUsbCxoLG09aShyKTtpZiht
        KXRyeXtvPXIobi5kZXRhaWwpLGw9ITB9Y2F0Y2goZil7aD0hMCx1PWZ9ZWxz
        ZSBvPW4uZGV0YWlsLGw9ITA7cyh0LG8pfHwobSYmbD9hKHQsbyk6aD9jKHQs
        dSk6InJlc29sdmUiPT09ZT9hKHQsbyk6InJlamVjdCI9PT1lJiZjKHQsbykp
        fTttLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bSxpc1JlamVjdGVkOnZvaWQg
        MCxpc0Z1bGZpbGxlZDp2b2lkIDAscmVqZWN0ZWRSZWFzb246dm9pZCAwLGZ1
        bGZpbGxtZW50VmFsdWU6dm9pZCAwLHRoZW46ZnVuY3Rpb24oZSx0KXt0aGlz
        Lm9mZigiZXJyb3IiLG8pO3ZhciByPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGZ1
        bmN0aW9uKCl7fSk7cmV0dXJuIHRoaXMuaXNGdWxmaWxsZWQmJmwuYXN5bmMo
        ZnVuY3Rpb24odCl7ZigicmVzb2x2ZSIscixlLHtkZXRhaWw6dC5mdWxmaWxs
        bWVudFZhbHVlfSl9LHRoaXMpLHRoaXMuaXNSZWplY3RlZCYmbC5hc3luYyhm
        dW5jdGlvbihlKXtmKCJyZWplY3QiLHIsdCx7ZGV0YWlsOmUucmVqZWN0ZWRS
        ZWFzb259KX0sdGhpcyksdGhpcy5vbigicHJvbWlzZTpyZXNvbHZlZCIsZnVu
        Y3Rpb24odCl7ZigicmVzb2x2ZSIscixlLHQpfSksdGhpcy5vbigicHJvbWlz
        ZTpmYWlsZWQiLGZ1bmN0aW9uKGUpe2YoInJlamVjdCIscix0LGUpfSkscn0s
        ZmFpbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsZSl9fSxo
        Lm1peGluKG0ucHJvdG90eXBlKSxyLlByb21pc2U9bX0pLGUoInJzdnAvcmVq
        ZWN0IixbInJzdnAvcHJvbWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQp
        eyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBuZXcgbihmdW5j
        dGlvbih0LHIpe3IoZSl9KX12YXIgbj1lLlByb21pc2U7dC5yZWplY3Q9cn0p
        LGUoInJzdnAvcmVzb2x2ZSIsWyJyc3ZwL3Byb21pc2UiLCJleHBvcnRzIl0s
        ZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1
        cm4gbmV3IG4oZnVuY3Rpb24odCl7dChlKX0pfXZhciBuPWUuUHJvbWlzZTt0
        LnJlc29sdmU9cn0pLGUoInJzdnAvcmV0aHJvdyIsWyJleHBvcnRzIl0sZnVu
        Y3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7dGhyb3cgci5z
        ZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0pLGV9dmFyIHI9InVuZGVm
        aW5lZCI9PXR5cGVvZiBnbG9iYWw/dGhpczpnbG9iYWw7ZS5yZXRocm93PXR9
        KSxlKCJyc3ZwIixbInJzdnAvZXZlbnRzIiwicnN2cC9wcm9taXNlIiwicnN2
        cC9ub2RlIiwicnN2cC9hbGwiLCJyc3ZwL2hhc2giLCJyc3ZwL3JldGhyb3ci
        LCJyc3ZwL2RlZmVyIiwicnN2cC9jb25maWciLCJyc3ZwL3Jlc29sdmUiLCJy
        c3ZwL3JlamVjdCIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQscixuLGksbyxh
        LHMsdSxjLGwpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBoKGUsdCl7Z1tlXT10
        fXZhciBtPWUuRXZlbnRUYXJnZXQsZj10LlByb21pc2UscD1yLmRlbm9kZWlm
        eSxkPW4uYWxsLGI9aS5oYXNoLEU9by5yZXRocm93LHY9YS5kZWZlcixnPXMu
        Y29uZmlnLHk9dS5yZXNvbHZlLHc9Yy5yZWplY3Q7bC5Qcm9taXNlPWYsbC5F
        dmVudFRhcmdldD1tLGwuYWxsPWQsbC5oYXNoPWIsbC5yZXRocm93PUUsbC5k
        ZWZlcj12LGwuZGVub2RlaWZ5PXAsbC5jb25maWd1cmU9aCxsLnJlc29sdmU9
        eSxsLnJlamVjdD13fSl9KCksZnVuY3Rpb24oKXtFbWJlci5NT0RFTF9GQUNU
        T1JZX0lOSkVDVElPTlM9ITF8fCEhRW1iZXIuRU5WLk1PREVMX0ZBQ1RPUllf
        SU5KRUNUSU9OUyxlKCJjb250YWluZXIiLFtdLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlKXt0aGlzLnBhcmVudD1lLHRoaXMuZGljdD17fX1mdW5jdGlvbiB0
        KHQpe3RoaXMucGFyZW50PXQsdGhpcy5jaGlsZHJlbj1bXSx0aGlzLnJlc29s
        dmVyPXQmJnQucmVzb2x2ZXJ8fGZ1bmN0aW9uKCl7fSx0aGlzLnJlZ2lzdHJ5
        PW5ldyBlKHQmJnQucmVnaXN0cnkpLHRoaXMuY2FjaGU9bmV3IGUodCYmdC5j
        YWNoZSksdGhpcy5mYWN0b3J5Q2FjaGU9bmV3IGUodCYmdC5jYWNoZSksdGhp
        cy50eXBlSW5qZWN0aW9ucz1uZXcgZSh0JiZ0LnR5cGVJbmplY3Rpb25zKSx0
        aGlzLmluamVjdGlvbnM9e30sdGhpcy5mYWN0b3J5VHlwZUluamVjdGlvbnM9
        bmV3IGUodCYmdC5mYWN0b3J5VHlwZUluamVjdGlvbnMpLHRoaXMuZmFjdG9y
        eUluamVjdGlvbnM9e30sdGhpcy5fb3B0aW9ucz1uZXcgZSh0JiZ0Ll9vcHRp
        b25zKSx0aGlzLl90eXBlT3B0aW9ucz1uZXcgZSh0JiZ0Ll90eXBlT3B0aW9u
        cyl9ZnVuY3Rpb24gcihlKXt0aHJvdyBuZXcgRXJyb3IoZSsiIGlzIG5vdCBj
        dXJyZW50bHkgc3VwcG9ydGVkIG9uIGNoaWxkIGNvbnRhaW5lcnMiKX1mdW5j
        dGlvbiBuKGUsdCl7dmFyIHI9byhlLHQsInNpbmdsZXRvbiIpO3JldHVybiBy
        IT09ITF9ZnVuY3Rpb24gaShlLHQpe3ZhciByPXt9O2lmKCF0KXJldHVybiBy
        O2Zvcih2YXIgbixpLG89MCxhPXQubGVuZ3RoO2E+bztvKyspe2lmKG49dFtv
        XSxpPWUubG9va3VwKG4uZnVsbE5hbWUpLHZvaWQgMD09PWkpdGhyb3cgbmV3
        IEVycm9yKCJBdHRlbXB0aW5nIHRvIGluamVjdCBhbiB1bmtub3duIGluamVj
        dGlvbjogYCIrbi5mdWxsTmFtZSsiYCIpO3Jbbi5wcm9wZXJ0eV09aX1yZXR1
        cm4gcn1mdW5jdGlvbiBvKGUsdCxyKXt2YXIgbj1lLl9vcHRpb25zLmdldCh0
        KTtpZihuJiZ2b2lkIDAhPT1uW3JdKXJldHVybiBuW3JdO3ZhciBpPXQuc3Bs
        aXQoIjoiKVswXTtyZXR1cm4gbj1lLl90eXBlT3B0aW9ucy5nZXQoaSksbj9u
        W3JdOnZvaWQgMH1mdW5jdGlvbiBhKGUsdCl7dmFyIHIsbj1lLm5vcm1hbGl6
        ZSh0KSxpPWUucmVzb2x2ZShuKSxvPWUuZmFjdG9yeUNhY2hlLGE9dC5zcGxp
        dCgiOiIpWzBdO2lmKHZvaWQgMCE9PWkpe2lmKG8uaGFzKHQpKXJldHVybiBv
        LmdldCh0KTtpZighaXx8ImZ1bmN0aW9uIiE9dHlwZW9mIGkuZXh0ZW5kfHwh
        RW1iZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJT05TJiYibW9kZWwiPT09YSly
        ZXR1cm4gaTt2YXIgYz1zKGUsdCksbD11KGUsdCk7cmV0dXJuIGwuX3RvU3Ry
        aW5nPWUubWFrZVRvU3RyaW5nKGksdCkscj1pLmV4dGVuZChjKSxyLnJlb3Bl
        bkNsYXNzKGwpLG8uc2V0KHQscikscn19ZnVuY3Rpb24gcyhlLHQpe3ZhciBy
        PXQuc3BsaXQoIjoiKSxuPXJbMF0sbz1bXTtyZXR1cm4gbz1vLmNvbmNhdChl
        LnR5cGVJbmplY3Rpb25zLmdldChuKXx8W10pLG89by5jb25jYXQoZS5pbmpl
        Y3Rpb25zW3RdfHxbXSksbz1pKGUsbyksby5fZGVidWdDb250YWluZXJLZXk9
        dCxvLmNvbnRhaW5lcj1lLG99ZnVuY3Rpb24gdShlLHQpe3ZhciByPXQuc3Bs
        aXQoIjoiKSxuPXJbMF0sbz1bXTtyZXR1cm4gbz1vLmNvbmNhdChlLmZhY3Rv
        cnlUeXBlSW5qZWN0aW9ucy5nZXQobil8fFtdKSxvPW8uY29uY2F0KGUuZmFj
        dG9yeUluamVjdGlvbnNbdF18fFtdKSxvPWkoZSxvKSxvLl9kZWJ1Z0NvbnRh
        aW5lcktleT10LG99ZnVuY3Rpb24gYyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1
        cm4gbyhlLHQsImluc3RhbnRpYXRlIik9PT0hMT9yOnI/ImZ1bmN0aW9uIj09
        dHlwZW9mIHIuZXh0ZW5kP3IuY3JlYXRlKCk6ci5jcmVhdGUocyhlLHQpKTp2
        b2lkIDB9ZnVuY3Rpb24gbChlLHQpe2UuY2FjaGUuZWFjaExvY2FsKGZ1bmN0
        aW9uKHIsbil7byhlLHIsImluc3RhbnRpYXRlIikhPT0hMSYmdChuKX0pfWZ1
        bmN0aW9uIGgoZSl7ZS5jYWNoZS5lYWNoTG9jYWwoZnVuY3Rpb24odCxyKXtv
        KGUsdCwiaW5zdGFudGlhdGUiKSE9PSExJiZyLmRlc3Ryb3koKX0pLGUuY2Fj
        aGUuZGljdD17fX1mdW5jdGlvbiBtKGUsdCxyLG4pe3ZhciBpPWUuZ2V0KHQp
        O2l8fChpPVtdLGUuc2V0KHQsaSkpLGkucHVzaCh7cHJvcGVydHk6cixmdWxs
        TmFtZTpufSl9ZnVuY3Rpb24gZihlLHQscixuKXt2YXIgaT1lW3RdPWVbdF18
        fFtdO2kucHVzaCh7cHJvcGVydHk6cixmdWxsTmFtZTpufSl9cmV0dXJuIGUu
        cHJvdG90eXBlPXtwYXJlbnQ6bnVsbCxkaWN0Om51bGwsZ2V0OmZ1bmN0aW9u
        KGUpe3ZhciB0PXRoaXMuZGljdDtyZXR1cm4gdC5oYXNPd25Qcm9wZXJ0eShl
        KT90W2VdOnRoaXMucGFyZW50P3RoaXMucGFyZW50LmdldChlKTp2b2lkIDB9
        LHNldDpmdW5jdGlvbihlLHQpe3RoaXMuZGljdFtlXT10fSxyZW1vdmU6ZnVu
        Y3Rpb24oZSl7ZGVsZXRlIHRoaXMuZGljdFtlXX0saGFzOmZ1bmN0aW9uKGUp
        e3ZhciB0PXRoaXMuZGljdDtyZXR1cm4gdC5oYXNPd25Qcm9wZXJ0eShlKT8h
        MDp0aGlzLnBhcmVudD90aGlzLnBhcmVudC5oYXMoZSk6ITF9LGVhY2hMb2Nh
        bDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZGljdDtmb3IodmFyIG4gaW4g
        cilyLmhhc093blByb3BlcnR5KG4pJiZlLmNhbGwodCxuLHJbbl0pfX0sdC5w
        cm90b3R5cGU9e3BhcmVudDpudWxsLGNoaWxkcmVuOm51bGwscmVzb2x2ZXI6
        bnVsbCxyZWdpc3RyeTpudWxsLGNhY2hlOm51bGwsdHlwZUluamVjdGlvbnM6
        bnVsbCxpbmplY3Rpb25zOm51bGwsX29wdGlvbnM6bnVsbCxfdHlwZU9wdGlv
        bnM6bnVsbCxjaGlsZDpmdW5jdGlvbigpe3ZhciBlPW5ldyB0KHRoaXMpO3Jl
        dHVybiB0aGlzLmNoaWxkcmVuLnB1c2goZSksZX0sc2V0OmZ1bmN0aW9uKGUs
        dCxyKXtlW3RdPXJ9LHJlZ2lzdGVyOmZ1bmN0aW9uKGUsdCxyKXtpZigtMT09
        PWUuaW5kZXhPZigiOiIpKXRocm93IG5ldyBUeXBlRXJyb3IoIm1hbGZvcm1l
        ZCBmdWxsTmFtZSwgZXhwZWN0ZWQ6IGB0eXBlOm5hbWVgIGdvdDogIitlKTtp
        Zih2b2lkIDA9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkF0dGVtcHRpbmcg
        dG8gcmVnaXN0ZXIgYW4gdW5rbm93biBmYWN0b3J5OiBgIitlKyJgIik7dmFy
        IG49dGhpcy5ub3JtYWxpemUoZSk7aWYodGhpcy5jYWNoZS5oYXMobikpdGhy
        b3cgbmV3IEVycm9yKCJDYW5ub3QgcmUtcmVnaXN0ZXI6IGAiK2UrImAsIGFz
        IGl0IGhhcyBhbHJlYWR5IGJlZW4gbG9va2VkIHVwLiIpO3RoaXMucmVnaXN0
        cnkuc2V0KG4sdCksdGhpcy5fb3B0aW9ucy5zZXQobixyfHx7fSl9LHVucmVn
        aXN0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ub3JtYWxpemUoZSk7dGhp
        cy5yZWdpc3RyeS5yZW1vdmUodCksdGhpcy5jYWNoZS5yZW1vdmUodCksdGhp
        cy5mYWN0b3J5Q2FjaGUucmVtb3ZlKHQpLHRoaXMuX29wdGlvbnMucmVtb3Zl
        KHQpfSxyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlc29sdmVy
        KGUpfHx0aGlzLnJlZ2lzdHJ5LmdldChlKX0sZGVzY3JpYmU6ZnVuY3Rpb24o
        ZSl7cmV0dXJuIGV9LG5vcm1hbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZX0s
        bWFrZVRvU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRvU3RyaW5nKCl9
        LGxvb2t1cDpmdW5jdGlvbihlLHQpe2lmKGU9dGhpcy5ub3JtYWxpemUoZSks
        dD10fHx7fSx0aGlzLmNhY2hlLmhhcyhlKSYmdC5zaW5nbGV0b24hPT0hMSly
        ZXR1cm4gdGhpcy5jYWNoZS5nZXQoZSk7dmFyIHI9Yyh0aGlzLGUpO3JldHVy
        biB2b2lkIDAhPT1yPyhuKHRoaXMsZSkmJnQuc2luZ2xldG9uIT09ITEmJnRo
        aXMuY2FjaGUuc2V0KGUscikscik6dm9pZCAwfSxsb29rdXBGYWN0b3J5OmZ1
        bmN0aW9uKGUpe3JldHVybiBhKHRoaXMsZSl9LGhhczpmdW5jdGlvbihlKXty
        ZXR1cm4gdGhpcy5jYWNoZS5oYXMoZSk/ITA6ISFhKHRoaXMsZSl9LG9wdGlv
        bnNGb3JUeXBlOmZ1bmN0aW9uKGUsdCl7dGhpcy5wYXJlbnQmJnIoIm9wdGlv
        bnNGb3JUeXBlIiksdGhpcy5fdHlwZU9wdGlvbnMuc2V0KGUsdCl9LG9wdGlv
        bnM6ZnVuY3Rpb24oZSx0KXt0aGlzLm9wdGlvbnNGb3JUeXBlKGUsdCl9LHR5
        cGVJbmplY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3RoaXMucGFyZW50JiZyKCJ0
        eXBlSW5qZWN0aW9uIiksbSh0aGlzLnR5cGVJbmplY3Rpb25zLGUsdCxuKX0s
        aW5qZWN0aW9uOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5wYXJlbnQm
        JnIoImluamVjdGlvbiIpLC0xPT09ZS5pbmRleE9mKCI6Iik/dGhpcy50eXBl
        SW5qZWN0aW9uKGUsdCxuKTooZih0aGlzLmluamVjdGlvbnMsZSx0LG4pLHZv
        aWQgMCl9LGZhY3RvcnlUeXBlSW5qZWN0aW9uOmZ1bmN0aW9uKGUsdCxuKXt0
        aGlzLnBhcmVudCYmcigiZmFjdG9yeVR5cGVJbmplY3Rpb24iKSxtKHRoaXMu
        ZmFjdG9yeVR5cGVJbmplY3Rpb25zLGUsdCxuKX0sZmFjdG9yeUluamVjdGlv
        bjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMucGFyZW50JiZyKCJpbmpl
        Y3Rpb24iKSwtMT09PWUuaW5kZXhPZigiOiIpP3RoaXMuZmFjdG9yeVR5cGVJ
        bmplY3Rpb24oZSx0LG4pOihmKHRoaXMuZmFjdG9yeUluamVjdGlvbnMsZSx0
        LG4pLHZvaWQgMCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmlzRGVzdHJv
        eWVkPSEwO2Zvcih2YXIgZT0wLHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7dD5l
        O2UrKyl0aGlzLmNoaWxkcmVuW2VdLmRlc3Ryb3koKTt0aGlzLmNoaWxkcmVu
        PVtdLGwodGhpcyxmdW5jdGlvbihlKXtlLmRlc3Ryb3koKX0pLHRoaXMucGFy
        ZW50PXZvaWQgMCx0aGlzLmlzRGVzdHJveWVkPSEwfSxyZXNldDpmdW5jdGlv
        bigpe2Zvcih2YXIgZT0wLHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7dD5lO2Ur
        KyloKHRoaXMuY2hpbGRyZW5bZV0pO2godGhpcyl9fSx0fSl9KCksZnVuY3Rp
        b24oKXtmdW5jdGlvbiBlKHIsbixpLG8pe3ZhciBhLHMsdTtpZigib2JqZWN0
        IiE9dHlwZW9mIHJ8fG51bGw9PT1yKXJldHVybiByO2lmKG4mJihzPXQoaSxy
        KSk+PTApcmV0dXJuIG9bc107aWYoImFycmF5Ij09PUVtYmVyLnR5cGVPZihy
        KSl7aWYoYT1yLnNsaWNlKCksbilmb3Iocz1hLmxlbmd0aDstLXM+PTA7KWFb
        c109ZShhW3NdLG4saSxvKX1lbHNlIGlmKEVtYmVyLkNvcHlhYmxlJiZFbWJl
        ci5Db3B5YWJsZS5kZXRlY3QocikpYT1yLmNvcHkobixpLG8pO2Vsc2V7YT17
        fTtmb3IodSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJiJfXyIhPT11LnN1
        YnN0cmluZygwLDIpJiYoYVt1XT1uP2Uoclt1XSxuLGksbyk6clt1XSl9cmV0
        dXJuIG4mJihpLnB1c2gociksby5wdXNoKGEpKSxhfXZhciB0PUVtYmVyLkVu
        dW1lcmFibGVVdGlscy5pbmRleE9mO2lmKEVtYmVyLmNvbXBhcmU9ZnVuY3Rp
        b24gaShlLHQpe2lmKGU9PT10KXJldHVybiAwO3ZhciByPUVtYmVyLnR5cGVP
        ZihlKSxuPUVtYmVyLnR5cGVPZih0KSxvPUVtYmVyLkNvbXBhcmFibGU7aWYo
        byl7aWYoImluc3RhbmNlIj09PXImJm8uZGV0ZWN0KGUuY29uc3RydWN0b3Ip
        KXJldHVybiBlLmNvbnN0cnVjdG9yLmNvbXBhcmUoZSx0KTtpZigiaW5zdGFu
        Y2UiPT09biYmby5kZXRlY3QodC5jb25zdHJ1Y3RvcikpcmV0dXJuIDEtdC5j
        b25zdHJ1Y3Rvci5jb21wYXJlKHQsZSl9dmFyIGE9RW1iZXIuT1JERVJfREVG
        SU5JVElPTl9NQVBQSU5HO2lmKCFhKXt2YXIgcz1FbWJlci5PUkRFUl9ERUZJ
        TklUSU9OO2E9RW1iZXIuT1JERVJfREVGSU5JVElPTl9NQVBQSU5HPXt9O3Zh
        ciB1LGM7Zm9yKHU9MCxjPXMubGVuZ3RoO2M+dTsrK3UpYVtzW3VdXT11O2Rl
        bGV0ZSBFbWJlci5PUkRFUl9ERUZJTklUSU9OfXZhciBsPWFbcl0saD1hW25d
        O2lmKGg+bClyZXR1cm4tMTtpZihsPmgpcmV0dXJuIDE7c3dpdGNoKHIpe2Nh
        c2UiYm9vbGVhbiI6Y2FzZSJudW1iZXIiOnJldHVybiB0PmU/LTE6ZT50PzE6
        MDtjYXNlInN0cmluZyI6dmFyIG09ZS5sb2NhbGVDb21wYXJlKHQpO3JldHVy
        biAwPm0/LTE6bT4wPzE6MDtjYXNlImFycmF5Ijpmb3IodmFyIGY9ZS5sZW5n
        dGgscD10Lmxlbmd0aCxkPU1hdGgubWluKGYscCksYj0wLEU9MDswPT09YiYm
        ZD5FOyliPWkoZVtFXSx0W0VdKSxFKys7cmV0dXJuIDAhPT1iP2I6cD5mPy0x
        OmY+cD8xOjA7Y2FzZSJpbnN0YW5jZSI6cmV0dXJuIEVtYmVyLkNvbXBhcmFi
        bGUmJkVtYmVyLkNvbXBhcmFibGUuZGV0ZWN0KGUpP2UuY29tcGFyZShlLHQp
        OjA7Y2FzZSJkYXRlIjp2YXIgdj1lLmdldFRpbWUoKSxnPXQuZ2V0VGltZSgp
        O3JldHVybiBnPnY/LTE6dj5nPzE6MDtkZWZhdWx0OnJldHVybiAwfX0sRW1i
        ZXIuY29weT1mdW5jdGlvbih0LHIpe3JldHVybiJvYmplY3QiIT10eXBlb2Yg
        dHx8bnVsbD09PXQ/dDpFbWJlci5Db3B5YWJsZSYmRW1iZXIuQ29weWFibGUu
        ZGV0ZWN0KHQpP3QuY29weShyKTplKHQscixyP1tdOm51bGwscj9bXTpudWxs
        KX0sRW1iZXIuaW5zcGVjdD1mdW5jdGlvbihlKXt2YXIgdD1FbWJlci50eXBl
        T2YoZSk7aWYoImFycmF5Ij09PXQpcmV0dXJuIlsiK2UrIl0iO2lmKCJvYmpl
        Y3QiIT09dClyZXR1cm4gZSsiIjt2YXIgcixuPVtdO2Zvcih2YXIgaSBpbiBl
        KWlmKGUuaGFzT3duUHJvcGVydHkoaSkpe2lmKHI9ZVtpXSwidG9TdHJpbmci
        PT09ciljb250aW51ZTsiZnVuY3Rpb24iPT09RW1iZXIudHlwZU9mKHIpJiYo
        cj0iZnVuY3Rpb24oKSB7IC4uLiB9Iiksbi5wdXNoKGkrIjogIityKX1yZXR1
        cm4ieyIrbi5qb2luKCIsICIpKyJ9In0sRW1iZXIuaXNFcXVhbD1mdW5jdGlv
        bihlLHQpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5pc0VxdWFs
        P2UuaXNFcXVhbCh0KTplPT09dH0sRW1iZXIuT1JERVJfREVGSU5JVElPTj1F
        bWJlci5FTlYuT1JERVJfREVGSU5JVElPTnx8WyJ1bmRlZmluZWQiLCJudWxs
        IiwiYm9vbGVhbiIsIm51bWJlciIsInN0cmluZyIsImFycmF5Iiwib2JqZWN0
        IiwiaW5zdGFuY2UiLCJmdW5jdGlvbiIsImNsYXNzIiwiZGF0ZSJdLEVtYmVy
        LmtleXM9T2JqZWN0LmtleXMsIUVtYmVyLmtleXN8fEVtYmVyLmNyZWF0ZS5p
        c1NpbXVsYXRlZCl7dmFyIHI9WyJjb25zdHJ1Y3RvciIsImhhc093blByb3Bl
        cnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwi
        dmFsdWVPZiIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciXSxuPWZ1bmN0
        aW9uKGUscixuKXsiX18iIT09bi5zdWJzdHJpbmcoMCwyKSYmIl9zdXBlciIh
        PT1uJiYodChyLG4pPj0wfHxlLmhhc093blByb3BlcnR5KG4pJiZyLnB1c2go
        bikpfTtFbWJlci5rZXlzPWZ1bmN0aW9uKGUpe3ZhciB0LGk9W107Zm9yKHQg
        aW4gZSluKGUsaSx0KTtmb3IodmFyIG89MCxhPXIubGVuZ3RoO2E+bztvKysp
        dD1yW29dLG4oZSxpLHQpO3JldHVybiBpfX19KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKCl7cmV0dXJuIDA9PT1zLmxlbmd0aD97fTpzLnBvcCgpfWZ1bmN0
        aW9uIHQoZSl7cmV0dXJuIHMucHVzaChlKSxudWxsfWZ1bmN0aW9uIHIoZSx0
        KXtmdW5jdGlvbiByKHIpe3ZhciBvPW4ocixlKTtyZXR1cm4gaT90PT09bzoh
        IW99dmFyIGk9Mj09PWFyZ3VtZW50cy5sZW5ndGg7cmV0dXJuIHJ9dmFyIG49
        RW1iZXIuZ2V0LGk9RW1iZXIuc2V0LG89QXJyYXkucHJvdG90eXBlLnNsaWNl
        LGE9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Yscz1bXTtFbWJlci5F
        bnVtZXJhYmxlPUVtYmVyLk1peGluLmNyZWF0ZSh7bmV4dE9iamVjdDpFbWJl
        ci5yZXF1aXJlZChGdW5jdGlvbiksZmlyc3RPYmplY3Q6RW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKXtpZigwPT09bih0aGlzLCJsZW5ndGgiKSlyZXR1cm4g
        dm9pZCAwO3ZhciByLGk9ZSgpO3JldHVybiByPXRoaXMubmV4dE9iamVjdCgw
        LG51bGwsaSksdChpKSxyfSkucHJvcGVydHkoIltdIiksbGFzdE9iamVjdDpF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciByPW4odGhpcywibGVuZ3Ro
        Iik7aWYoMD09PXIpcmV0dXJuIHZvaWQgMDt2YXIgaSxvPWUoKSxhPTAscz1u
        dWxsO2RvIHM9aSxpPXRoaXMubmV4dE9iamVjdChhKysscyxvKTt3aGlsZSh2
        b2lkIDAhPT1pKTtyZXR1cm4gdChvKSxzfSkucHJvcGVydHkoIltdIiksY29u
        dGFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmluZChm
        dW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KX0sZm9yRWFjaDpmdW5jdGlvbihy
        LGkpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJy
        b3I7dmFyIG89bih0aGlzLCJsZW5ndGgiKSxhPW51bGwscz1lKCk7dm9pZCAw
        PT09aSYmKGk9bnVsbCk7Zm9yKHZhciB1PTA7bz51O3UrKyl7dmFyIGM9dGhp
        cy5uZXh0T2JqZWN0KHUsYSxzKTtyLmNhbGwoaSxjLHUsdGhpcyksYT1jfXJl
        dHVybiBhPW51bGwscz10KHMpLHRoaXN9LGdldEVhY2g6ZnVuY3Rpb24oZSl7
        cmV0dXJuIHRoaXMubWFwQnkoZSl9LHNldEVhY2g6ZnVuY3Rpb24oZSx0KXty
        ZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2kocixlLHQpfSl9LG1h
        cDpmdW5jdGlvbihlLHQpe3ZhciByPUVtYmVyLkEoKTtyZXR1cm4gdGhpcy5m
        b3JFYWNoKGZ1bmN0aW9uKG4saSxvKXtyW2ldPWUuY2FsbCh0LG4saSxvKX0p
        LHJ9LG1hcEJ5OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcChmdW5jdGlv
        bih0KXtyZXR1cm4gbih0LGUpfSl9LG1hcFByb3BlcnR5OkVtYmVyLmFsaWFz
        TWV0aG9kKCJtYXBCeSIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3ZhciByPUVt
        YmVyLkEoKTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKG4saSxvKXtl
        LmNhbGwodCxuLGksbykmJnIucHVzaChuKX0pLHJ9LHJlamVjdDpmdW5jdGlv
        bihlLHQpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiFl
        LmFwcGx5KHQsYXJndW1lbnRzKX0pfSxmaWx0ZXJCeTpmdW5jdGlvbigpe3Jl
        dHVybiB0aGlzLmZpbHRlcihyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZp
        bHRlclByb3BlcnR5OkVtYmVyLmFsaWFzTWV0aG9kKCJmaWx0ZXJCeSIpLHJl
        amVjdEJ5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZnVuY3Rpb24ocil7cmV0dXJu
        IG4ocixlKT09PXR9LGk9ZnVuY3Rpb24odCl7cmV0dXJuISFuKHQsZSl9LG89
        Mj09PWFyZ3VtZW50cy5sZW5ndGg/cjppO3JldHVybiB0aGlzLnJlamVjdChv
        KX0scmVqZWN0UHJvcGVydHk6RW1iZXIuYWxpYXNNZXRob2QoInJlamVjdEJ5
        IiksZmluZDpmdW5jdGlvbihyLGkpe3ZhciBvPW4odGhpcywibGVuZ3RoIik7
        CnZvaWQgMD09PWkmJihpPW51bGwpO2Zvcih2YXIgYSxzLHU9bnVsbCxjPSEx
        LGw9ZSgpLGg9MDtvPmgmJiFjO2grKylhPXRoaXMubmV4dE9iamVjdChoLHUs
        bCksKGM9ci5jYWxsKGksYSxoLHRoaXMpKSYmKHM9YSksdT1hO3JldHVybiBh
        PXU9bnVsbCxsPXQobCksc30sZmluZEJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMuZmluZChyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpbmRQcm9wZXJ0
        eTpFbWJlci5hbGlhc01ldGhvZCgiZmluZEJ5IiksZXZlcnk6ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4hdGhpcy5maW5kKGZ1bmN0aW9uKHIsbixpKXtyZXR1cm4h
        ZS5jYWxsKHQscixuLGkpfSl9LGV2ZXJ5Qnk6ZnVuY3Rpb24oKXtyZXR1cm4g
        dGhpcy5ldmVyeShyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGV2ZXJ5UHJv
        cGVydHk6RW1iZXIuYWxpYXNNZXRob2QoImV2ZXJ5QnkiKSxhbnk6ZnVuY3Rp
        b24oZSx0KXtyZXR1cm4hIXRoaXMuZmluZChmdW5jdGlvbihyLG4saSl7cmV0
        dXJuISFlLmNhbGwodCxyLG4saSl9KX0sc29tZTpFbWJlci5hbGlhc01ldGhv
        ZCgiYW55IiksYW55Qnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbnkoci5h
        cHBseSh0aGlzLGFyZ3VtZW50cykpfSxzb21lUHJvcGVydHk6RW1iZXIuYWxp
        YXNNZXRob2QoImFueUJ5IikscmVkdWNlOmZ1bmN0aW9uKGUsdCxyKXtpZigi
        ZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciBu
        PXQ7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbih0LGkpe249ZS5jYWxs
        KG51bGwsbix0LGksdGhpcyxyKX0sdGhpcyksbn0saW52b2tlOmZ1bmN0aW9u
        KGUpe3ZhciB0LHI9RW1iZXIuQSgpO3JldHVybiBhcmd1bWVudHMubGVuZ3Ro
        PjEmJih0PW8uY2FsbChhcmd1bWVudHMsMSkpLHRoaXMuZm9yRWFjaChmdW5j
        dGlvbihuLGkpe3ZhciBvPW4mJm5bZV07ImZ1bmN0aW9uIj09dHlwZW9mIG8m
        JihyW2ldPXQ/by5hcHBseShuLHQpOm8uY2FsbChuKSl9LHRoaXMpLHJ9LHRv
        QXJyYXk6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5BKCk7cmV0dXJuIHRoaXMu
        Zm9yRWFjaChmdW5jdGlvbih0LHIpe2Vbcl09dH0pLGV9LGNvbXBhY3Q6ZnVu
        Y3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJu
        IG51bGwhPWV9KX0sd2l0aG91dDpmdW5jdGlvbihlKXtpZighdGhpcy5jb250
        YWlucyhlKSlyZXR1cm4gdGhpczt2YXIgdD1FbWJlci5BKCk7cmV0dXJuIHRo
        aXMuZm9yRWFjaChmdW5jdGlvbihyKXtyIT09ZSYmKHRbdC5sZW5ndGhdPXIp
        fSksdH0sdW5pcTpmdW5jdGlvbigpe3ZhciBlPUVtYmVyLkEoKTtyZXR1cm4g
        dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2EoZSx0KTwwJiZlLnB1c2godCl9
        KSxlfSwiW10iOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXN9KSxhZGRFbnVtZXJhYmxlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSx0KXt2YXIg
        cj10JiZ0LndpbGxDaGFuZ2V8fCJlbnVtZXJhYmxlV2lsbENoYW5nZSIsaT10
        JiZ0LmRpZENoYW5nZXx8ImVudW1lcmFibGVEaWRDaGFuZ2UiLG89bih0aGlz
        LCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIik7cmV0dXJuIG98fEVtYmVyLnBy
        b3BlcnR5V2lsbENoYW5nZSh0aGlzLCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJz
        IiksRW1iZXIuYWRkTGlzdGVuZXIodGhpcywiQGVudW1lcmFibGU6YmVmb3Jl
        IixlLHIpLEVtYmVyLmFkZExpc3RlbmVyKHRoaXMsIkBlbnVtZXJhYmxlOmNo
        YW5nZSIsZSxpKSxvfHxFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJo
        YXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIiksdGhpc30scmVtb3ZlRW51bWVyYWJs
        ZU9ic2VydmVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dCYmdC53aWxsQ2hhbmdl
        fHwiZW51bWVyYWJsZVdpbGxDaGFuZ2UiLGk9dCYmdC5kaWRDaGFuZ2V8fCJl
        bnVtZXJhYmxlRGlkQ2hhbmdlIixvPW4odGhpcywiaGFzRW51bWVyYWJsZU9i
        c2VydmVycyIpO3JldHVybiBvJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        dGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIpLEVtYmVyLnJlbW92ZUxp
        c3RlbmVyKHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIsZSxyKSxFbWJlci5y
        ZW1vdmVMaXN0ZW5lcih0aGlzLCJAZW51bWVyYWJsZTpjaGFuZ2UiLGUsaSks
        byYmRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywiaGFzRW51bWVyYWJs
        ZU9ic2VydmVycyIpLHRoaXN9LGhhc0VudW1lcmFibGVPYnNlcnZlcnM6RW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuaGFzTGlzdGVu
        ZXJzKHRoaXMsIkBlbnVtZXJhYmxlOmNoYW5nZSIpfHxFbWJlci5oYXNMaXN0
        ZW5lcnModGhpcywiQGVudW1lcmFibGU6YmVmb3JlIil9KSxlbnVtZXJhYmxl
        Q29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG87cmV0
        dXJuIHI9Im51bWJlciI9PXR5cGVvZiBlP2U6ZT9uKGUsImxlbmd0aCIpOmU9
        LTEsaT0ibnVtYmVyIj09dHlwZW9mIHQ/dDp0P24odCwibGVuZ3RoIik6dD0t
        MSxvPTA+aXx8MD5yfHwwIT09aS1yLC0xPT09ZSYmKGU9bnVsbCksLTE9PT10
        JiYodD1udWxsKSxFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywiW10i
        KSxvJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGVuZ3RoIiks
        RW1iZXIuc2VuZEV2ZW50KHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIsW3Ro
        aXMsZSx0XSksdGhpc30sZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2U6ZnVu
        Y3Rpb24oZSx0KXt2YXIgcixpLG87cmV0dXJuIHI9Im51bWJlciI9PXR5cGVv
        ZiBlP2U6ZT9uKGUsImxlbmd0aCIpOmU9LTEsaT0ibnVtYmVyIj09dHlwZW9m
        IHQ/dDp0P24odCwibGVuZ3RoIik6dD0tMSxvPTA+aXx8MD5yfHwwIT09aS1y
        LC0xPT09ZSYmKGU9bnVsbCksLTE9PT10JiYodD1udWxsKSxFbWJlci5zZW5k
        RXZlbnQodGhpcywiQGVudW1lcmFibGU6Y2hhbmdlIixbdGhpcyxlLHRdKSxv
        JiZFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJsZW5ndGgiKSxFbWJl
        ci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJbXSIpLHRoaXN9fSksRW1iZXIu
        RW51bWVyYWJsZS5yZW9wZW4oe3NvcnRCeTpmdW5jdGlvbigpe3ZhciBlPWFy
        Z3VtZW50cztyZXR1cm4gdGhpcy50b0FycmF5KCkuc29ydChmdW5jdGlvbih0
        LHIpe2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbz1lW2ldLGE9
        bih0LG8pLHM9bihyLG8pLHU9RW1iZXIuY29tcGFyZShhLHMpO2lmKHUpcmV0
        dXJuIHV9cmV0dXJuIDB9KX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVy
        LmdldCx0PShFbWJlci5zZXQsRW1iZXIuaXNOb25lKSxyPUVtYmVyLkVudW1l
        cmFibGVVdGlscy5tYXAsbj1FbWJlci5jYWNoZUZvcjtFbWJlci5BcnJheT1F
        bWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuRW51bWVyYWJsZSx7bGVuZ3RoOkVt
        YmVyLnJlcXVpcmVkKCksb2JqZWN0QXQ6ZnVuY3Rpb24odCl7cmV0dXJuIDA+
        dHx8dD49ZSh0aGlzLCJsZW5ndGgiKT92b2lkIDA6ZSh0aGlzLHQpfSxvYmpl
        Y3RzQXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gcihlLGZ1bmN0
        aW9uKGUpe3JldHVybiB0Lm9iamVjdEF0KGUpfSl9LG5leHRPYmplY3Q6ZnVu
        Y3Rpb24oZSl7cmV0dXJuIHRoaXMub2JqZWN0QXQoZSl9LCJbXSI6RW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24odCxyKXtyZXR1cm4gdm9pZCAwIT09ciYmdGhp
        cy5yZXBsYWNlKDAsZSh0aGlzLCJsZW5ndGgiKSxyKSx0aGlzfSksZmlyc3RP
        YmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5v
        YmplY3RBdCgwKX0pLGxhc3RPYmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oKXtyZXR1cm4gdGhpcy5vYmplY3RBdChlKHRoaXMsImxlbmd0aCIpLTEp
        fSksY29udGFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5kZXhPZihl
        KT49MH0sc2xpY2U6ZnVuY3Rpb24ocixuKXt2YXIgaT1FbWJlci5BKCksbz1l
        KHRoaXMsImxlbmd0aCIpO2Zvcih0KHIpJiYocj0wKSwodChuKXx8bj5vKSYm
        KG49byksMD5yJiYocj1vK3IpLDA+biYmKG49bytuKTtuPnI7KWlbaS5sZW5n
        dGhdPXRoaXMub2JqZWN0QXQocisrKTtyZXR1cm4gaX0saW5kZXhPZjpmdW5j
        dGlvbih0LHIpe3ZhciBuLGk9ZSh0aGlzLCJsZW5ndGgiKTtmb3Iodm9pZCAw
        PT09ciYmKHI9MCksMD5yJiYocis9aSksbj1yO2k+bjtuKyspaWYodGhpcy5v
        YmplY3RBdChuKT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LGxhc3RJbmRleE9m
        OmZ1bmN0aW9uKHQscil7dmFyIG4saT1lKHRoaXMsImxlbmd0aCIpO2Zvcigo
        dm9pZCAwPT09cnx8cj49aSkmJihyPWktMSksMD5yJiYocis9aSksbj1yO24+
        PTA7bi0tKWlmKHRoaXMub2JqZWN0QXQobik9PT10KXJldHVybiBuO3JldHVy
        bi0xfSxhZGRBcnJheU9ic2VydmVyOmZ1bmN0aW9uKHQscil7dmFyIG49ciYm
        ci53aWxsQ2hhbmdlfHwiYXJyYXlXaWxsQ2hhbmdlIixpPXImJnIuZGlkQ2hh
        bmdlfHwiYXJyYXlEaWRDaGFuZ2UiLG89ZSh0aGlzLCJoYXNBcnJheU9ic2Vy
        dmVycyIpO3JldHVybiBvfHxFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhp
        cywiaGFzQXJyYXlPYnNlcnZlcnMiKSxFbWJlci5hZGRMaXN0ZW5lcih0aGlz
        LCJAYXJyYXk6YmVmb3JlIix0LG4pLEVtYmVyLmFkZExpc3RlbmVyKHRoaXMs
        IkBhcnJheTpjaGFuZ2UiLHQsaSksb3x8RW1iZXIucHJvcGVydHlEaWRDaGFu
        Z2UodGhpcywiaGFzQXJyYXlPYnNlcnZlcnMiKSx0aGlzfSxyZW1vdmVBcnJh
        eU9ic2VydmVyOmZ1bmN0aW9uKHQscil7dmFyIG49ciYmci53aWxsQ2hhbmdl
        fHwiYXJyYXlXaWxsQ2hhbmdlIixpPXImJnIuZGlkQ2hhbmdlfHwiYXJyYXlE
        aWRDaGFuZ2UiLG89ZSh0aGlzLCJoYXNBcnJheU9ic2VydmVycyIpO3JldHVy
        biBvJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywiaGFzQXJyYXlP
        YnNlcnZlcnMiKSxFbWJlci5yZW1vdmVMaXN0ZW5lcih0aGlzLCJAYXJyYXk6
        YmVmb3JlIix0LG4pLEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMsIkBhcnJh
        eTpjaGFuZ2UiLHQsaSksbyYmRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhp
        cywiaGFzQXJyYXlPYnNlcnZlcnMiKSx0aGlzfSxoYXNBcnJheU9ic2VydmVy
        czpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiBFbWJlci5oYXNM
        aXN0ZW5lcnModGhpcywiQGFycmF5OmNoYW5nZSIpfHxFbWJlci5oYXNMaXN0
        ZW5lcnModGhpcywiQGFycmF5OmJlZm9yZSIpfSksYXJyYXlDb250ZW50V2ls
        bENoYW5nZTpmdW5jdGlvbih0LHIsbil7dm9pZCAwPT09dD8odD0wLHI9bj0t
        MSk6KHZvaWQgMD09PXImJihyPS0xKSx2b2lkIDA9PT1uJiYobj0tMSkpLEVt
        YmVyLmlzV2F0Y2hpbmcodGhpcywiQGVhY2giKSYmZSh0aGlzLCJAZWFjaCIp
        LEVtYmVyLnNlbmRFdmVudCh0aGlzLCJAYXJyYXk6YmVmb3JlIixbdGhpcyx0
        LHIsbl0pO3ZhciBpLG87aWYodD49MCYmcj49MCYmZSh0aGlzLCJoYXNFbnVt
        ZXJhYmxlT2JzZXJ2ZXJzIikpe2k9W10sbz10K3I7Zm9yKHZhciBhPXQ7bz5h
        O2ErKylpLnB1c2godGhpcy5vYmplY3RBdChhKSl9ZWxzZSBpPXI7cmV0dXJu
        IHRoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlKGksbiksdGhpc30s
        YXJyYXlDb250ZW50RGlkQ2hhbmdlOmZ1bmN0aW9uKHQscixpKXt2b2lkIDA9
        PT10Pyh0PTAscj1pPS0xKToodm9pZCAwPT09ciYmKHI9LTEpLHZvaWQgMD09
        PWkmJihpPS0xKSk7dmFyIG8sYTtpZih0Pj0wJiZpPj0wJiZlKHRoaXMsImhh
        c0VudW1lcmFibGVPYnNlcnZlcnMiKSl7bz1bXSxhPXQraTtmb3IodmFyIHM9
        dDthPnM7cysrKW8ucHVzaCh0aGlzLm9iamVjdEF0KHMpKX1lbHNlIG89aTt0
        aGlzLmVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKHIsbyksRW1iZXIuc2Vu
        ZEV2ZW50KHRoaXMsIkBhcnJheTpjaGFuZ2UiLFt0aGlzLHQscixpXSk7dmFy
        IHU9ZSh0aGlzLCJsZW5ndGgiKSxjPW4odGhpcywiZmlyc3RPYmplY3QiKSxs
        PW4odGhpcywibGFzdE9iamVjdCIpO3JldHVybiB0aGlzLm9iamVjdEF0KDAp
        IT09YyYmKEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCJmaXJzdE9i
        amVjdCIpLEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImZpcnN0T2Jq
        ZWN0IikpLHRoaXMub2JqZWN0QXQodS0xKSE9PWwmJihFbWJlci5wcm9wZXJ0
        eVdpbGxDaGFuZ2UodGhpcywibGFzdE9iamVjdCIpLEVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKHRoaXMsImxhc3RPYmplY3QiKSksdGhpc30sIkBlYWNoIjpF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZWFjaHx8
        KHRoaXMuX19lYWNoPW5ldyBFbWJlci5FYWNoUHJveHkodGhpcykpLHRoaXMu
        X19lYWNofSl9KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1
        cm4iQHRoaXMiPT09dD9lOmgoZSx0KX1mdW5jdGlvbiB0KGUsdCxyKXt0aGlz
        LmNhbGxiYWNrcz1lLHRoaXMuY3A9dCx0aGlzLmluc3RhbmNlTWV0YT1yLHRo
        aXMuZGVwZW5kZW50S2V5c0J5R3VpZD17fSx0aGlzLnRyYWNrZWRBcnJheXNC
        eUd1aWQ9e30sdGhpcy5zdXNwZW5kZWQ9ITEsdGhpcy5jaGFuZ2VkSXRlbXM9
        e319ZnVuY3Rpb24gcihlLHQscil7dGhpcy5kZXBlbmRlbnRBcnJheT1lLHRo
        aXMuaW5kZXg9dCx0aGlzLml0ZW09ZS5vYmplY3RBdCh0KSx0aGlzLnRyYWNr
        ZWRBcnJheT1yLHRoaXMuYmVmb3JlT2JzZXJ2ZXI9bnVsbCx0aGlzLm9ic2Vy
        dmVyPW51bGwsdGhpcy5kZXN0cm95ZWQ9ITF9ZnVuY3Rpb24gbihlLHQscil7
        cmV0dXJuIDA+ZT9NYXRoLm1heCgwLHQrZSk6dD5lP2U6TWF0aC5taW4odC1y
        LGUpfWZ1bmN0aW9uIGkoZSx0LHIpe3JldHVybiBNYXRoLm1pbihyLHQtZSl9
        ZnVuY3Rpb24gbyhlLHQscixuLGksbyl7dmFyIGE9e2FycmF5Q2hhbmdlZDpl
        LGluZGV4OnIsaXRlbTp0LHByb3BlcnR5TmFtZTpuLHByb3BlcnR5Oml9O3Jl
        dHVybiBvJiYoYS5wcmV2aW91c1ZhbHVlcz1vKSxhfWZ1bmN0aW9uIGEoZSx0
        LHIsbixpKXtDKGUsZnVuY3Rpb24oYSxzKXtpLnNldFZhbHVlKHQuYWRkZWRJ
        dGVtLmNhbGwodGhpcyxpLmdldFZhbHVlKCksYSxvKGUsYSxzLG4sciksaS5z
        dWdhck1ldGEpKX0sdGhpcyl9ZnVuY3Rpb24gcyhlLHQpe3ZhciByO2UuX2Nh
        bGxiYWNrcygpLGUuX2hhc0luc3RhbmNlTWV0YSh0aGlzLHQpPyhyPWUuX2lu
        c3RhbmNlTWV0YSh0aGlzLHQpLHIuc2V0VmFsdWUoZS5yZXNldFZhbHVlKHIu
        Z2V0VmFsdWUoKSkpKTpyPWUuX2luc3RhbmNlTWV0YSh0aGlzLHQpLGUub3B0
        aW9ucy5pbml0aWFsaXplJiZlLm9wdGlvbnMuaW5pdGlhbGl6ZS5jYWxsKHRo
        aXMsci5nZXRWYWx1ZSgpLHtwcm9wZXJ0eTplLHByb3BlcnR5TmFtZTp0fSxy
        LnN1Z2FyTWV0YSl9ZnVuY3Rpb24gdShlLHQscil7dGhpcy5jb250ZXh0PWUs
        dGhpcy5wcm9wZXJ0eU5hbWU9dCx0aGlzLmNhY2hlPWYoZSkuY2FjaGUsdGhp
        cy5kZXBlbmRlbnRBcnJheXM9e30sdGhpcy5zdWdhck1ldGE9e30sdGhpcy5p
        bml0aWFsVmFsdWU9cn1mdW5jdGlvbiBjKHQpe3ZhciByPXRoaXM7dGhpcy5v
        cHRpb25zPXQsdGhpcy5faW5zdGFuY2VNZXRhcz17fSx0aGlzLl9kZXBlbmRl
        bnRLZXlzPW51bGwsdGhpcy5faXRlbVByb3BlcnR5S2V5cz17fSx0aGlzLl9w
        cmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXM9e30sdGhpcy5yZWFkT25seSgpLHRo
        aXMuY2FjaGVhYmxlKCksdGhpcy5yZWNvbXB1dGVPbmNlPWZ1bmN0aW9uKGUp
        e0VtYmVyLnJ1bi5vbmNlKHRoaXMsbixlKX07dmFyIG49ZnVuY3Rpb24odCl7
        dmFyIG49KHIuX2RlcGVuZGVudEtleXMsci5faW5zdGFuY2VNZXRhKHRoaXMs
        dCkpLGk9ci5fY2FsbGJhY2tzKCk7cy5jYWxsKHRoaXMscix0KSxuLmRlcGVu
        ZGVudEFycmF5c09ic2VydmVyLnN1c3BlbmRBcnJheU9ic2VydmVycyhmdW5j
        dGlvbigpe0Moci5fZGVwZW5kZW50S2V5cyxmdW5jdGlvbih0KXt2YXIgaT1l
        KHRoaXMsdCksbz1uLmRlcGVuZGVudEFycmF5c1t0XTtpPT09bz9yLl9wcmV2
        aW91c0l0ZW1Qcm9wZXJ0eUtleXNbdF0mJihkZWxldGUgci5fcHJldmlvdXNJ
        dGVtUHJvcGVydHlLZXlzW3RdLG4uZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIu
        c2V0dXBQcm9wZXJ0eU9ic2VydmVycyh0LHIuX2l0ZW1Qcm9wZXJ0eUtleXNb
        dF0pKToobi5kZXBlbmRlbnRBcnJheXNbdF09aSxvJiZuLmRlcGVuZGVudEFy
        cmF5c09ic2VydmVyLnRlYXJkb3duT2JzZXJ2ZXJzKG8sdCksaSYmbi5kZXBl
        bmRlbnRBcnJheXNPYnNlcnZlci5zZXR1cE9ic2VydmVycyhpLHQpKX0sdGhp
        cyl9LHRoaXMpLEMoci5fZGVwZW5kZW50S2V5cyxmdW5jdGlvbihvKXt2YXIg
        cz1lKHRoaXMsbyk7cyYmYS5jYWxsKHRoaXMscyxpLHIsdCxuKX0sdGhpcyl9
        O3RoaXMuZnVuYz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKHRoaXMsZSks
        ci5faW5zdGFuY2VNZXRhKHRoaXMsZSkuZ2V0VmFsdWUoKX19ZnVuY3Rpb24g
        bChlKXtyZXR1cm4gZX12YXIgaD1FbWJlci5nZXQsbT0oRW1iZXIuc2V0LEVt
        YmVyLmd1aWRGb3IpLGY9RW1iZXIubWV0YSxwPUVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZSxkPUVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlLGI9RW1iZXIuYWRk
        QmVmb3JlT2JzZXJ2ZXIsRT1FbWJlci5yZW1vdmVCZWZvcmVPYnNlcnZlcix2
        PUVtYmVyLmFkZE9ic2VydmVyLGc9RW1iZXIucmVtb3ZlT2JzZXJ2ZXIseT1F
        bWJlci5Db21wdXRlZFByb3BlcnR5LHc9W10uc2xpY2UsXz1FbWJlci5jcmVh
        dGUsQz1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxPPS9eKC4qKVwu
        QGVhY2hcLiguKikvLEE9LyguKlwuQGVhY2gpezIsfS87dC5wcm90b3R5cGU9
        e3NldFZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaW5zdGFuY2VNZXRhLnNldFZh
        bHVlKGUsITApfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlu
        c3RhbmNlTWV0YS5nZXRWYWx1ZSgpfSxzZXR1cE9ic2VydmVyczpmdW5jdGlv
        bihlLHQpe3RoaXMuZGVwZW5kZW50S2V5c0J5R3VpZFttKGUpXT10LGUuYWRk
        QXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJkZXBlbmRlbnRBcnJh
        eVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiZGVwZW5kZW50QXJyYXlEaWRDaGFu
        Z2UifSksdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1t0XSYmdGhpcy5zZXR1
        cFByb3BlcnR5T2JzZXJ2ZXJzKHQsdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5
        c1t0XSl9LHRlYXJkb3duT2JzZXJ2ZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9
        dGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1t0XXx8W107ZGVsZXRlIHRoaXMu
        ZGVwZW5kZW50S2V5c0J5R3VpZFttKGUpXSx0aGlzLnRlYXJkb3duUHJvcGVy
        dHlPYnNlcnZlcnModCxyKSxlLnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcyx7
        d2lsbENoYW5nZToiZGVwZW5kZW50QXJyYXlXaWxsQ2hhbmdlIixkaWRDaGFu
        Z2U6ImRlcGVuZGVudEFycmF5RGlkQ2hhbmdlIn0pfSxzdXNwZW5kQXJyYXlP
        YnNlcnZlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnN1c3BlbmRlZDt0
        aGlzLnN1c3BlbmRlZD0hMCxlLmNhbGwodCksdGhpcy5zdXNwZW5kZWQ9cn0s
        c2V0dXBQcm9wZXJ0eU9ic2VydmVyczpmdW5jdGlvbih0LHIpe3ZhciBuPWUo
        dGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCx0KSxpPWUobiwibGVuZ3RoIiks
        bz1uZXcgQXJyYXkoaSk7dGhpcy5yZXNldFRyYW5zZm9ybWF0aW9ucyh0LG8p
        LEMobixmdW5jdGlvbihlLGkpe3ZhciBhPXRoaXMuY3JlYXRlUHJvcGVydHlP
        YnNlcnZlckNvbnRleHQobixpLHRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFt0
        XSk7b1tpXT1hLEMocixmdW5jdGlvbih0KXtiKGUsdCx0aGlzLGEuYmVmb3Jl
        T2JzZXJ2ZXIpLHYoZSx0LHRoaXMsYS5vYnNlcnZlcil9LHRoaXMpfSx0aGlz
        KX0sdGVhcmRvd25Qcm9wZXJ0eU9ic2VydmVyczpmdW5jdGlvbihlLHQpe3Zh
        ciByLG4saSxvPXRoaXMsYT10aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZV07
        YSYmYS5hcHBseShmdW5jdGlvbihlLGEscyl7cyE9PUVtYmVyLlRyYWNrZWRB
        cnJheS5ERUxFVEUmJkMoZSxmdW5jdGlvbihlKXtlLmRlc3Ryb3llZD0hMCxy
        PWUuYmVmb3JlT2JzZXJ2ZXIsbj1lLm9ic2VydmVyLGk9ZS5pdGVtLEModCxm
        dW5jdGlvbihlKXtFKGksZSxvLHIpLGcoaSxlLG8sbil9KX0pfSl9LGNyZWF0
        ZVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0OmZ1bmN0aW9uKGUsdCxuKXt2YXIg
        aT1uZXcgcihlLHQsbik7cmV0dXJuIHRoaXMuY3JlYXRlUHJvcGVydHlPYnNl
        cnZlcihpKSxpfSxjcmVhdGVQcm9wZXJ0eU9ic2VydmVyOmZ1bmN0aW9uKGUp
        e3ZhciB0PXRoaXM7ZS5iZWZvcmVPYnNlcnZlcj1mdW5jdGlvbihyLG4pe3Jl
        dHVybiB0Lml0ZW1Qcm9wZXJ0eVdpbGxDaGFuZ2UocixuLGUuZGVwZW5kZW50
        QXJyYXksZSl9LGUub2JzZXJ2ZXI9ZnVuY3Rpb24ocixuKXtyZXR1cm4gdC5p
        dGVtUHJvcGVydHlEaWRDaGFuZ2UocixuLGUuZGVwZW5kZW50QXJyYXksZSl9
        fSxyZXNldFRyYW5zZm9ybWF0aW9uczpmdW5jdGlvbihlLHQpe3RoaXMudHJh
        Y2tlZEFycmF5c0J5R3VpZFtlXT1uZXcgRW1iZXIuVHJhY2tlZEFycmF5KHQp
        fSx0cmFja0FkZDpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy50cmFja2Vk
        QXJyYXlzQnlHdWlkW2VdO24mJm4uYWRkSXRlbXModCxyKX0sdHJhY2tSZW1v
        dmU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMudHJhY2tlZEFycmF5c0J5
        R3VpZFtlXTtyZXR1cm4gbj9uLnJlbW92ZUl0ZW1zKHQscik6W119LHVwZGF0
        ZUluZGV4ZXM6ZnVuY3Rpb24odCxyKXt2YXIgbj1lKHIsImxlbmd0aCIpO3Qu
        YXBwbHkoZnVuY3Rpb24oZSx0LHIpe3IhPT1FbWJlci5UcmFja2VkQXJyYXku
        REVMRVRFJiYociE9PUVtYmVyLlRyYWNrZWRBcnJheS5SRVRBSU58fGUubGVu
        Z3RoIT09bnx8MCE9PXQpJiZDKGUsZnVuY3Rpb24oZSxyKXtlLmluZGV4PXIr
        dH0pfSl9LGRlcGVuZGVudEFycmF5V2lsbENoYW5nZTpmdW5jdGlvbih0LHIs
        YSl7ZnVuY3Rpb24gcyhlKXtmW2hdLmRlc3Ryb3llZD0hMCxFKGMsZSx0aGlz
        LGZbaF0uYmVmb3JlT2JzZXJ2ZXIpLGcoYyxlLHRoaXMsZltoXS5vYnNlcnZl
        cil9aWYoIXRoaXMuc3VzcGVuZGVkKXt2YXIgdSxjLGwsaCxmLHA9dGhpcy5j
        YWxsYmFja3MucmVtb3ZlZEl0ZW0sZD1tKHQpLGI9dGhpcy5kZXBlbmRlbnRL
        ZXlzQnlHdWlkW2RdLHY9dGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1tiXXx8
        W10seT1lKHQsImxlbmd0aCIpLHc9bihyLHksMCksXz1pKHcseSxhKTtmb3Io
        Zj10aGlzLnRyYWNrUmVtb3ZlKGIsdyxfKSxoPV8tMTtoPj0wJiYobD13K2gs
        IShsPj15KSk7LS1oKWM9dC5vYmplY3RBdChsKSxDKHYscyx0aGlzKSx1PW8o
        dCxjLGwsdGhpcy5pbnN0YW5jZU1ldGEucHJvcGVydHlOYW1lLHRoaXMuY3Ap
        LHRoaXMuc2V0VmFsdWUocC5jYWxsKHRoaXMuaW5zdGFuY2VNZXRhLmNvbnRl
        eHQsdGhpcy5nZXRWYWx1ZSgpLGMsdSx0aGlzLmluc3RhbmNlTWV0YS5zdWdh
        ck1ldGEpKX19LGRlcGVuZGVudEFycmF5RGlkQ2hhbmdlOmZ1bmN0aW9uKHQs
        cixpLGEpe2lmKCF0aGlzLnN1c3BlbmRlZCl7dmFyIHMsdSxjPXRoaXMuY2Fs
        bGJhY2tzLmFkZGVkSXRlbSxsPW0odCksaD10aGlzLmRlcGVuZGVudEtleXNC
        eUd1aWRbbF0sZj1uZXcgQXJyYXkoYSkscD10aGlzLmNwLl9pdGVtUHJvcGVy
        dHlLZXlzW2hdLGQ9ZSh0LCJsZW5ndGgiKSxFPW4ocixkLGEpO0ModC5zbGlj
        ZShFLEUrYSksZnVuY3Rpb24oZSxyKXtwJiYodT1mW3JdPXRoaXMuY3JlYXRl
        UHJvcGVydHlPYnNlcnZlckNvbnRleHQodCxFK3IsdGhpcy50cmFja2VkQXJy
        YXlzQnlHdWlkW2hdKSxDKHAsZnVuY3Rpb24odCl7YihlLHQsdGhpcyx1LmJl
        Zm9yZU9ic2VydmVyKSx2KGUsdCx0aGlzLHUub2JzZXJ2ZXIpfSx0aGlzKSks
        cz1vKHQsZSxFK3IsdGhpcy5pbnN0YW5jZU1ldGEucHJvcGVydHlOYW1lLHRo
        aXMuY3ApLHRoaXMuc2V0VmFsdWUoYy5jYWxsKHRoaXMuaW5zdGFuY2VNZXRh
        LmNvbnRleHQsdGhpcy5nZXRWYWx1ZSgpLGUscyx0aGlzLmluc3RhbmNlTWV0
        YS5zdWdhck1ldGEpKX0sdGhpcyksdGhpcy50cmFja0FkZChoLEUsZil9fSxp
        dGVtUHJvcGVydHlXaWxsQ2hhbmdlOmZ1bmN0aW9uKHQscixuLGkpe3ZhciBv
        PW0odCk7dGhpcy5jaGFuZ2VkSXRlbXNbb118fCh0aGlzLmNoYW5nZWRJdGVt
        c1tvXT17YXJyYXk6bixvYnNlcnZlckNvbnRleHQ6aSxvYmo6dCxwcmV2aW91
        c1ZhbHVlczp7fX0pLHRoaXMuY2hhbmdlZEl0ZW1zW29dLnByZXZpb3VzVmFs
        dWVzW3JdPWUodCxyKX0saXRlbVByb3BlcnR5RGlkQ2hhbmdlOmZ1bmN0aW9u
        KCl7dGhpcy5mbHVzaENoYW5nZXMoKX0sZmx1c2hDaGFuZ2VzOmZ1bmN0aW9u
        KCl7dmFyIGUsdCxyLG49dGhpcy5jaGFuZ2VkSXRlbXM7Zm9yKGUgaW4gbil0
        PW5bZV0sdC5vYnNlcnZlckNvbnRleHQuZGVzdHJveWVkfHwodGhpcy51cGRh
        dGVJbmRleGVzKHQub2JzZXJ2ZXJDb250ZXh0LnRyYWNrZWRBcnJheSx0Lm9i
        c2VydmVyQ29udGV4dC5kZXBlbmRlbnRBcnJheSkscj1vKHQuYXJyYXksdC5v
        YmosdC5vYnNlcnZlckNvbnRleHQuaW5kZXgsdGhpcy5pbnN0YW5jZU1ldGEu
        cHJvcGVydHlOYW1lLHRoaXMuY3AsdC5wcmV2aW91c1ZhbHVlcyksdGhpcy5z
        ZXRWYWx1ZSh0aGlzLmNhbGxiYWNrcy5yZW1vdmVkSXRlbS5jYWxsKHRoaXMu
        aW5zdGFuY2VNZXRhLmNvbnRleHQsdGhpcy5nZXRWYWx1ZSgpLHQub2JqLHIs
        dGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRhKSksdGhpcy5zZXRWYWx1ZSh0
        aGlzLmNhbGxiYWNrcy5hZGRlZEl0ZW0uY2FsbCh0aGlzLmluc3RhbmNlTWV0
        YS5jb250ZXh0LHRoaXMuZ2V0VmFsdWUoKSx0Lm9iaixyLHRoaXMuaW5zdGFu
        Y2VNZXRhLnN1Z2FyTWV0YSkpKTt0aGlzLmNoYW5nZWRJdGVtcz17fX19LHUu
        cHJvdG90eXBlPXtnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBy
        b3BlcnR5TmFtZSBpbiB0aGlzLmNhY2hlP3RoaXMuY2FjaGVbdGhpcy5wcm9w
        ZXJ0eU5hbWVdOnRoaXMuaW5pdGlhbFZhbHVlfSxzZXRWYWx1ZTpmdW5jdGlv
        bihlLHQpe2lmKHZvaWQgMCE9PWUpe3ZhciByPXQmJmUhPT10aGlzLmNhY2hl
        W3RoaXMucHJvcGVydHlOYW1lXTtyJiZwKHRoaXMuY29udGV4dCx0aGlzLnBy
        b3BlcnR5TmFtZSksdGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV09ZSxy
        JiZkKHRoaXMuY29udGV4dCx0aGlzLnByb3BlcnR5TmFtZSl9ZWxzZSBkZWxl
        dGUgdGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV19fSxFbWJlci5SZWR1
        Y2VDb21wdXRlZFByb3BlcnR5PWMsYy5wcm90b3R5cGU9Xyh5LnByb3RvdHlw
        ZSksYy5wcm90b3R5cGUuX2NhbGxiYWNrcz1mdW5jdGlvbigpe2lmKCF0aGlz
        LmNhbGxiYWNrcyl7dmFyIGU9dGhpcy5vcHRpb25zO3RoaXMuY2FsbGJhY2tz
        PXtyZW1vdmVkSXRlbTplLnJlbW92ZWRJdGVtfHxsLGFkZGVkSXRlbTplLmFk
        ZGVkSXRlbXx8bH19cmV0dXJuIHRoaXMuY2FsbGJhY2tzfSxjLnByb3RvdHlw
        ZS5faGFzSW5zdGFuY2VNZXRhPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bShlKSxu
        PXIrIjoiK3Q7cmV0dXJuISF0aGlzLl9pbnN0YW5jZU1ldGFzW25dfSxjLnBy
        b3RvdHlwZS5faW5zdGFuY2VNZXRhPWZ1bmN0aW9uKGUscil7dmFyIG49bShl
        KSxpPW4rIjoiK3Isbz10aGlzLl9pbnN0YW5jZU1ldGFzW2ldO3JldHVybiBv
        fHwobz10aGlzLl9pbnN0YW5jZU1ldGFzW2ldPW5ldyB1KGUscix0aGlzLmlu
        aXRpYWxWYWx1ZSgpKSxvLmRlcGVuZGVudEFycmF5c09ic2VydmVyPW5ldyB0
        KHRoaXMuX2NhbGxiYWNrcygpLHRoaXMsbyxlLHIsby5zdWdhck1ldGEpKSxv
        fSxjLnByb3RvdHlwZS5pbml0aWFsVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4i
        ZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5vcHRpb25zLmluaXRpYWxWYWx1ZT90
        aGlzLm9wdGlvbnMuaW5pdGlhbFZhbHVlKCk6dGhpcy5vcHRpb25zLmluaXRp
        YWxWYWx1ZX0sYy5wcm90b3R5cGUucmVzZXRWYWx1ZT1mdW5jdGlvbigpe3Jl
        dHVybiB0aGlzLmluaXRpYWxWYWx1ZSgpfSxjLnByb3RvdHlwZS5pdGVtUHJv
        cGVydHlLZXk9ZnVuY3Rpb24oZSx0KXt0aGlzLl9pdGVtUHJvcGVydHlLZXlz
        W2VdPXRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZV18fFtdLHRoaXMuX2l0ZW1Q
        cm9wZXJ0eUtleXNbZV0ucHVzaCh0KX0sYy5wcm90b3R5cGUuY2xlYXJJdGVt
        UHJvcGVydHlLZXlzPWZ1bmN0aW9uKGUpe3RoaXMuX2l0ZW1Qcm9wZXJ0eUtl
        eXNbZV0mJih0aGlzLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXNbZV09dGhp
        cy5faXRlbVByb3BlcnR5S2V5c1tlXSx0aGlzLl9pdGVtUHJvcGVydHlLZXlz
        W2VdPVtdKX0sYy5wcm90b3R5cGUucHJvcGVydHk9ZnVuY3Rpb24oKXt2YXIg
        ZSx0LHIsbj10aGlzLGk9KHcuY2FsbChhcmd1bWVudHMpLG5ldyBFbWJlci5T
        ZXQpO3JldHVybiBDKHcuY2FsbChhcmd1bWVudHMpLGZ1bmN0aW9uKG8pe2lm
        KEEudGVzdChvKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIk5lc3RlZCBAZWFj
        aCBwcm9wZXJ0aWVzIG5vdCBzdXBwb3J0ZWQ6ICIrbyk7KGU9Ty5leGVjKG8p
        KT8odD1lWzFdLHI9ZVsyXSxuLml0ZW1Qcm9wZXJ0eUtleSh0LHIpLGkuYWRk
        KHQpKTppLmFkZChvKX0pLHkucHJvdG90eXBlLnByb3BlcnR5LmFwcGx5KHRo
        aXMsaS50b0FycmF5KCkpfSxFbWJlci5yZWR1Y2VDb21wdXRlZD1mdW5jdGlv
        bihlKXt2YXIgdDtpZihhcmd1bWVudHMubGVuZ3RoPjEmJih0PXcuY2FsbChh
        cmd1bWVudHMsMCwtMSksZT13LmNhbGwoYXJndW1lbnRzLC0xKVswXSksIm9i
        amVjdCIhPXR5cGVvZiBlKXRocm93IG5ldyBFbWJlci5FcnJvcigiUmVkdWNl
        IENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdpdGhvdXQgYW4gb3B0aW9u
        cyBoYXNoIik7aWYoISgiaW5pdGlhbFZhbHVlImluIGUpKXRocm93IG5ldyBF
        bWJlci5FcnJvcigiUmVkdWNlIENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVk
        IHdpdGhvdXQgYW4gaW5pdGlhbCB2YWx1ZSIpO3ZhciByPW5ldyBjKGUpO3Jl
        dHVybiB0JiZyLnByb3BlcnR5LmFwcGx5KHIsdCkscn19KCksZnVuY3Rpb24o
        KXtmdW5jdGlvbiBlKCl7dmFyIGU9dGhpcztyZXR1cm4gdC5hcHBseSh0aGlz
        LGFyZ3VtZW50cyksdGhpcy5mdW5jPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5j
        dGlvbihyKXtyZXR1cm4gZS5faGFzSW5zdGFuY2VNZXRhKHRoaXMscil8fGko
        ZS5fZGVwZW5kZW50S2V5cyxmdW5jdGlvbih0KXtFbWJlci5hZGRPYnNlcnZl
        cih0aGlzLHQsZnVuY3Rpb24oKXtlLnJlY29tcHV0ZU9uY2UuY2FsbCh0aGlz
        LHIpfSl9LHRoaXMpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0odGhpcy5m
        dW5jKSx0aGlzfXZhciB0PUVtYmVyLlJlZHVjZUNvbXB1dGVkUHJvcGVydHks
        cj1bXS5zbGljZSxuPUVtYmVyLmNyZWF0ZSxpPUVtYmVyLkVudW1lcmFibGVV
        dGlscy5mb3JFYWNoO0VtYmVyLkFycmF5Q29tcHV0ZWRQcm9wZXJ0eT1lLGUu
        cHJvdG90eXBlPW4odC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmluaXRpYWxW
        YWx1ZT1mdW5jdGlvbigpe3JldHVybiBFbWJlci5BKCl9LGUucHJvdG90eXBl
        LnJlc2V0VmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xlYXIoKSxlfSxF
        bWJlci5hcnJheUNvbXB1dGVkPWZ1bmN0aW9uKHQpe3ZhciBuO2lmKGFyZ3Vt
        ZW50cy5sZW5ndGg+MSYmKG49ci5jYWxsKGFyZ3VtZW50cywwLC0xKSx0PXIu
        Y2FsbChhcmd1bWVudHMsLTEpWzBdKSwib2JqZWN0IiE9dHlwZW9mIHQpdGhy
        b3cgbmV3IEVtYmVyLkVycm9yKCJBcnJheSBDb21wdXRlZCBQcm9wZXJ0eSBk
        ZWNsYXJlZCB3aXRob3V0IGFuIG9wdGlvbnMgaGFzaCIpO3ZhciBpPW5ldyBl
        KHQpO3JldHVybiBuJiZpLnByb3BlcnR5LmFwcGx5KGksbiksaX19KCksZnVu
        Y3Rpb24oKXtmdW5jdGlvbiBlKGUsbixpLG8pe2Z1bmN0aW9uIGEoZSl7cmV0
        dXJuIEVtYmVyLk9iamVjdFByb3h5LmRldGVjdEluc3RhbmNlKGUpP3IodChl
        LCJjb250ZW50IikpOnIoZSl9dmFyIHMsdSxjLGwsaDtyZXR1cm4gYXJndW1l
        bnRzLmxlbmd0aDw0JiYobz10KGUsImxlbmd0aCIpKSxhcmd1bWVudHMubGVu
        Z3RoPDMmJihpPTApLGk9PT1vP2k6KHM9aStNYXRoLmZsb29yKChvLWkpLzIp
        LHU9ZS5vYmplY3RBdChzKSxsPWEodSksaD1hKG4pLGw9PT1oP3M6KGM9dGhp
        cy5vcmRlcih1LG4pLDA9PT1jJiYoYz1oPmw/LTE6MSksMD5jP3RoaXMuYmlu
        YXJ5U2VhcmNoKGUsbixzKzEsbyk6Yz4wP3RoaXMuYmluYXJ5U2VhcmNoKGUs
        bixpLHMpOnMpKX12YXIgdD1FbWJlci5nZXQscj0oRW1iZXIuc2V0LEVtYmVy
        Lmd1aWRGb3IpLG49RW1iZXIubWVyZ2UsaT1bXS5zbGljZSxvPUVtYmVyLkVu
        dW1lcmFibGVVdGlscy5mb3JFYWNoLGE9RW1iZXIuRW51bWVyYWJsZVV0aWxz
        Lm1hcDtFbWJlci5jb21wdXRlZC5tYXg9ZnVuY3Rpb24oZSl7cmV0dXJuIEVt
        YmVyLnJlZHVjZUNvbXB1dGVkLmNhbGwobnVsbCxlLHtpbml0aWFsVmFsdWU6
        LTEvMCxhZGRlZEl0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5tYXgo
        ZSx0KX0scmVtb3ZlZEl0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT50P2U6
        dm9pZCAwfX0pfSxFbWJlci5jb21wdXRlZC5taW49ZnVuY3Rpb24oZSl7cmV0
        dXJuIEVtYmVyLnJlZHVjZUNvbXB1dGVkLmNhbGwobnVsbCxlLHtpbml0aWFs
        VmFsdWU6MS8wLGFkZGVkSXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBNYXRo
        Lm1pbihlLHQpfSxyZW1vdmVkSXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiB0
        PmU/ZTp2b2lkIDB9fSl9LEVtYmVyLmNvbXB1dGVkLm1hcD1mdW5jdGlvbihl
        LHQpe3ZhciByPXthZGRlZEl0ZW06ZnVuY3Rpb24oZSxyLG4pe3ZhciBpPXQu
        Y2FsbCh0aGlzLHIpO3JldHVybiBlLmluc2VydEF0KG4uaW5kZXgsaSksZX0s
        cmVtb3ZlZEl0ZW06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLnJlbW92ZUF0
        KHIuaW5kZXgsMSksZX19O3JldHVybiBFbWJlci5hcnJheUNvbXB1dGVkKGUs
        cil9LEVtYmVyLmNvbXB1dGVkLm1hcEJ5PWZ1bmN0aW9uKGUscil7dmFyIG49
        ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSxyKX07cmV0dXJuIEVtYmVyLmNvbXB1
        dGVkLm1hcChlKyIuQGVhY2guIityLG4pfSxFbWJlci5jb21wdXRlZC5tYXBQ
        cm9wZXJ0eT1FbWJlci5jb21wdXRlZC5tYXBCeSxFbWJlci5jb21wdXRlZC5m
        aWx0ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17aW5pdGlhbGl6ZTpmdW5jdGlv
        bihlLHQscil7ci5maWx0ZXJlZEFycmF5SW5kZXhlcz1uZXcgRW1iZXIuU3Vi
        QXJyYXl9LGFkZGVkSXRlbTpmdW5jdGlvbihlLHIsbixpKXt2YXIgbz0hIXQu
        Y2FsbCh0aGlzLHIpLGE9aS5maWx0ZXJlZEFycmF5SW5kZXhlcy5hZGRJdGVt
        KG4uaW5kZXgsbyk7cmV0dXJuIG8mJmUuaW5zZXJ0QXQoYSxyKSxlfSxyZW1v
        dmVkSXRlbTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT1uLmZpbHRlcmVkQXJy
        YXlJbmRleGVzLnJlbW92ZUl0ZW0oci5pbmRleCk7cmV0dXJuIGk+LTEmJmUu
        cmVtb3ZlQXQoaSksZX19O3JldHVybiBFbWJlci5hcnJheUNvbXB1dGVkKGUs
        cil9LEVtYmVyLmNvbXB1dGVkLmZpbHRlckJ5PWZ1bmN0aW9uKGUscixuKXt2
        YXIgaTtyZXR1cm4gaT0yPT09YXJndW1lbnRzLmxlbmd0aD9mdW5jdGlvbihl
        KXtyZXR1cm4gdChlLHIpfTpmdW5jdGlvbihlKXtyZXR1cm4gdChlLHIpPT09
        bn0sRW1iZXIuY29tcHV0ZWQuZmlsdGVyKGUrIi5AZWFjaC4iK3IsaSl9LEVt
        YmVyLmNvbXB1dGVkLmZpbHRlclByb3BlcnR5PUVtYmVyLmNvbXB1dGVkLmZp
        bHRlckJ5LEVtYmVyLmNvbXB1dGVkLnVuaXE9ZnVuY3Rpb24oKXt2YXIgZT1p
        LmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gZS5wdXNoKHtpbml0aWFsaXplOmZ1
        bmN0aW9uKGUsdCxyKXtyLml0ZW1Db3VudHM9e319LGFkZGVkSXRlbTpmdW5j
        dGlvbihlLHQsbixpKXt2YXIgbz1yKHQpO3JldHVybiBpLml0ZW1Db3VudHNb
        b10/KytpLml0ZW1Db3VudHNbb106aS5pdGVtQ291bnRzW29dPTEsZS5hZGRP
        YmplY3QodCksZX0scmVtb3ZlZEl0ZW06ZnVuY3Rpb24oZSx0LG4saSl7dmFy
        IG89cih0KSxhPWkuaXRlbUNvdW50cztyZXR1cm4gMD09PS0tYVtvXSYmZS5y
        ZW1vdmVPYmplY3QodCksZX19KSxFbWJlci5hcnJheUNvbXB1dGVkLmFwcGx5
        KG51bGwsZSl9LEVtYmVyLmNvbXB1dGVkLnVuaW9uPUVtYmVyLmNvbXB1dGVk
        LnVuaXEsRW1iZXIuY29tcHV0ZWQuaW50ZXJzZWN0PWZ1bmN0aW9uKCl7dmFy
        IGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZS5wcm9wZXJ0eS5fZGVwZW5kZW50
        S2V5cyxmdW5jdGlvbihlKXtyZXR1cm4gcihlKX0pfSx0PWkuY2FsbChhcmd1
        bWVudHMpO3JldHVybiB0LnB1c2goe2luaXRpYWxpemU6ZnVuY3Rpb24oZSx0
        LHIpe3IuaXRlbUNvdW50cz17fX0sYWRkZWRJdGVtOmZ1bmN0aW9uKHQsbixp
        LG8pe3ZhciBhPXIobikscz0oZShpKSxyKGkuYXJyYXlDaGFuZ2VkKSksdT1p
        LnByb3BlcnR5Ll9kZXBlbmRlbnRLZXlzLmxlbmd0aCxjPW8uaXRlbUNvdW50
        cztyZXR1cm4gY1thXXx8KGNbYV09e30pLHZvaWQgMD09PWNbYV1bc10mJihj
        W2FdW3NdPTApLDE9PT0rK2NbYV1bc10mJnU9PT1FbWJlci5rZXlzKGNbYV0p
        Lmxlbmd0aCYmdC5hZGRPYmplY3QobiksdH0scmVtb3ZlZEl0ZW06ZnVuY3Rp
        b24odCxuLGksbyl7dmFyIGEscz1yKG4pLHU9KGUoaSkscihpLmFycmF5Q2hh
        bmdlZCkpLGM9KGkucHJvcGVydHkuX2RlcGVuZGVudEtleXMubGVuZ3RoLG8u
        aXRlbUNvdW50cyk7cmV0dXJuIHZvaWQgMD09PWNbc11bdV0mJihjW3NdW3Vd
        PTApLDA9PT0tLWNbc11bdV0mJihkZWxldGUgY1tzXVt1XSxhPUVtYmVyLmtl
        eXMoY1tzXSkubGVuZ3RoLDA9PT1hJiZkZWxldGUgY1tzXSx0LnJlbW92ZU9i
        amVjdChuKSksdH19KSxFbWJlci5hcnJheUNvbXB1dGVkLmFwcGx5KG51bGws
        dCl9LEVtYmVyLmNvbXB1dGVkLnNldERpZmY9ZnVuY3Rpb24oZSxyKXtpZigy
        IT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoInNl
        dERpZmYgcmVxdWlyZXMgZXhhY3RseSB0d28gZGVwZW5kZW50IGFycmF5cy4i
        KTtyZXR1cm4gRW1iZXIuYXJyYXlDb21wdXRlZC5jYWxsKG51bGwsZSxyLHth
        ZGRlZEl0ZW06ZnVuY3Rpb24obixpLG8pe3ZhciBhPXQodGhpcyxlKSxzPXQo
        dGhpcyxyKTtyZXR1cm4gby5hcnJheUNoYW5nZWQ9PT1hP3MuY29udGFpbnMo
        aSl8fG4uYWRkT2JqZWN0KGkpOm4ucmVtb3ZlT2JqZWN0KGkpLG59LHJlbW92
        ZWRJdGVtOmZ1bmN0aW9uKG4saSxvKXt2YXIgYT10KHRoaXMsZSkscz10KHRo
        aXMscik7cmV0dXJuIG8uYXJyYXlDaGFuZ2VkPT09cz9hLmNvbnRhaW5zKGkp
        JiZuLmFkZE9iamVjdChpKTpuLnJlbW92ZU9iamVjdChpKSxufX0pfSxFbWJl
        ci5jb21wdXRlZC5zb3J0PWZ1bmN0aW9uKHIsaSl7dmFyIGEscztyZXR1cm4i
        ZnVuY3Rpb24iPT10eXBlb2YgaT9hPWZ1bmN0aW9uKHQscixuKXtuLm9yZGVy
        PWksbi5iaW5hcnlTZWFyY2g9ZX06KHM9aSxhPWZ1bmN0aW9uKG4saSxhKXtm
        dW5jdGlvbiB1KCl7dmFyIGUsbix1LGw9dCh0aGlzLHMpLGg9YS5zb3J0UHJv
        cGVydGllcz1bXSxtPWEuc29ydFByb3BlcnR5QXNjZW5kaW5nPXt9O2kucHJv
        cGVydHkuY2xlYXJJdGVtUHJvcGVydHlLZXlzKHIpLG8obCxmdW5jdGlvbih0
        KXstMSE9PShuPXQuaW5kZXhPZigiOiIpKT8oZT10LnN1YnN0cmluZygwLG4p
        LHU9ImRlc2MiIT09dC5zdWJzdHJpbmcobisxKS50b0xvd2VyQ2FzZSgpKToo
        ZT10LHU9ITApLGgucHVzaChlKSxtW2VdPXUsaS5wcm9wZXJ0eS5pdGVtUHJv
        cGVydHlLZXkocixlKX0pLGwuYWRkT2JzZXJ2ZXIoIkBlYWNoIix0aGlzLGMp
        fWZ1bmN0aW9uIGMoKXtFbWJlci5ydW4ub25jZSh0aGlzLGwsaS5wcm9wZXJ0
        eU5hbWUpfWZ1bmN0aW9uIGwoZSl7dS5jYWxsKHRoaXMpLGkucHJvcGVydHku
        cmVjb21wdXRlT25jZS5jYWxsKHRoaXMsZSl9RW1iZXIuYWRkT2JzZXJ2ZXIo
        dGhpcyxzLGMpLHUuY2FsbCh0aGlzKSxhLm9yZGVyPWZ1bmN0aW9uKGUscil7
        Zm9yKHZhciBuLGksbyxhPTA7YTx0aGlzLnNvcnRQcm9wZXJ0aWVzLmxlbmd0
        aDsrK2EpaWYobj10aGlzLnNvcnRQcm9wZXJ0aWVzW2FdLGk9RW1iZXIuY29t
        cGFyZSh0KGUsbiksdChyLG4pKSwwIT09aSlyZXR1cm4gbz10aGlzLnNvcnRQ
        cm9wZXJ0eUFzY2VuZGluZ1tuXSxvP2k6LTEqaTtyZXR1cm4gMH0sYS5iaW5h
        cnlTZWFyY2g9ZX0pLEVtYmVyLmFycmF5Q29tcHV0ZWQuY2FsbChudWxsLHIs
        e2luaXRpYWxpemU6YSxhZGRlZEl0ZW06ZnVuY3Rpb24oZSx0LHIsbil7dmFy
        IGk9bi5iaW5hcnlTZWFyY2goZSx0KTtyZXR1cm4gZS5pbnNlcnRBdChpLHQp
        LGV9LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBvLGEsczty
        ZXR1cm4gci5wcmV2aW91c1ZhbHVlcz8obz1uKHtjb250ZW50OnR9LHIucHJl
        dmlvdXNWYWx1ZXMpLHM9RW1iZXIuT2JqZWN0UHJveHkuY3JlYXRlKG8pKTpz
        PXQsYT1pLmJpbmFyeVNlYXJjaChlLHMpLGUucmVtb3ZlQXQoYSksZX19KX19
        KCksZnVuY3Rpb24oKXtFbWJlci5SU1ZQPXQoInJzdnAiKX0oKSxmdW5jdGlv
        bigpe3ZhciBlPS9bIF9dL2csdD17fSxyPS8oW2EtelxkXSkoW0EtWl0pL2cs
        bj0vKFwtfF98XC58XHMpKyguKT8vZyxpPS8oW2EtelxkXSkoW0EtWl0rKS9n
        LG89L1wtfFxzKy9nO0VtYmVyLlNUUklOR1M9e30sRW1iZXIuU3RyaW5nPXtm
        bXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj0wO3JldHVybiBlLnJlcGxhY2UoLyVA
        KFswLTldKyk/L2csZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj1uP3BhcnNlSW50
        KG4sMTApLTE6cisrLGU9dFtuXSxudWxsPT09ZT8iKG51bGwpIjp2b2lkIDA9
        PT1lPyIiOkVtYmVyLmluc3BlY3QoZSl9KX0sbG9jOmZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIGU9RW1iZXIuU1RSSU5HU1tlXXx8ZSxFbWJlci5TdHJpbmcuZm10
        KGUsdCl9LHc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoL1xzKy8pfSxk
        ZWNhbWVsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UociwiJDFf
        JDIiKS50b0xvd2VyQ2FzZSgpfSxkYXNoZXJpemU6ZnVuY3Rpb24ocil7dmFy
        IG4saT10LG89aS5oYXNPd25Qcm9wZXJ0eShyKTtyZXR1cm4gbz9pW3JdOihu
        PUVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHIpLnJlcGxhY2UoZSwiLSIpLGlb
        cl09bixuKX0sY2FtZWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFj
        ZShuLGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gcj9yLnRvVXBwZXJDYXNlKCk6
        IiJ9KS5yZXBsYWNlKC9eKFtBLVpdKS8sZnVuY3Rpb24oZSl7cmV0dXJuIGUu
        dG9Mb3dlckNhc2UoKX0pfSxjbGFzc2lmeTpmdW5jdGlvbihlKXtmb3IodmFy
        IHQ9ZS5zcGxpdCgiLiIpLHI9W10sbj0wLGk9dC5sZW5ndGg7aT5uO24rKyl7
        dmFyIG89RW1iZXIuU3RyaW5nLmNhbWVsaXplKHRbbl0pO3IucHVzaChvLmNo
        YXJBdCgwKS50b1VwcGVyQ2FzZSgpK28uc3Vic3RyKDEpKX1yZXR1cm4gci5q
        b2luKCIuIil9LHVuZGVyc2NvcmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVw
        bGFjZShpLCIkMV8kMiIpLnJlcGxhY2UobywiXyIpLnRvTG93ZXJDYXNlKCl9
        LGNhcGl0YWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRv
        VXBwZXJDYXNlKCkrZS5zdWJzdHIoMSl9fSxFbWJlci5GRUFUVVJFUy5pc0Vu
        YWJsZWQoInN0cmluZy1odW1hbml6ZSIpJiYoRW1iZXIuU3RyaW5nLmh1bWFu
        aXplPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL19pZCQvLCIiKS5y
        ZXBsYWNlKC9fL2csIiAiKS5yZXBsYWNlKC9eXHcvZyxmdW5jdGlvbihlKXty
        ZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSl9KX0oKSxmdW5jdGlvbigpe3ZhciBl
        PUVtYmVyLlN0cmluZy5mbXQsdD1FbWJlci5TdHJpbmcudyxyPUVtYmVyLlN0
        cmluZy5sb2Msbj1FbWJlci5TdHJpbmcuY2FtZWxpemUsaT1FbWJlci5TdHJp
        bmcuZGVjYW1lbGl6ZSxvPUVtYmVyLlN0cmluZy5kYXNoZXJpemUsYT1FbWJl
        ci5TdHJpbmcudW5kZXJzY29yZSxzPUVtYmVyLlN0cmluZy5jYXBpdGFsaXpl
        LHU9RW1iZXIuU3RyaW5nLmNsYXNzaWZ5O2lmKEVtYmVyLkZFQVRVUkVTLmlz
        RW5hYmxlZCgic3RyaW5nLWh1bWFuaXplIikpdmFyIGM9RW1iZXIuU3RyaW5n
        Lmh1bWFuaXplOyhFbWJlci5FWFRFTkRfUFJPVE9UWVBFUz09PSEwfHxFbWJl
        ci5FWFRFTkRfUFJPVE9UWVBFUy5TdHJpbmcpJiYoU3RyaW5nLnByb3RvdHlw
        ZS5mbXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cyl9LFN0
        cmluZy5wcm90b3R5cGUudz1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMpfSxT
        dHJpbmcucHJvdG90eXBlLmxvYz1mdW5jdGlvbigpe3JldHVybiByKHRoaXMs
        YXJndW1lbnRzKX0sU3RyaW5nLnByb3RvdHlwZS5jYW1lbGl6ZT1mdW5jdGlv
        bigpe3JldHVybiBuKHRoaXMpfSxTdHJpbmcucHJvdG90eXBlLmRlY2FtZWxp
        emU9ZnVuY3Rpb24oKXtyZXR1cm4gaSh0aGlzKX0sU3RyaW5nLnByb3RvdHlw
        ZS5kYXNoZXJpemU9ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzKX0sU3RyaW5n
        LnByb3RvdHlwZS51bmRlcnNjb3JlPWZ1bmN0aW9uKCl7cmV0dXJuIGEodGhp
        cyl9LFN0cmluZy5wcm90b3R5cGUuY2xhc3NpZnk9ZnVuY3Rpb24oKXtyZXR1
        cm4gdSh0aGlzKX0sU3RyaW5nLnByb3RvdHlwZS5jYXBpdGFsaXplPWZ1bmN0
        aW9uKCl7cmV0dXJuIHModGhpcyl9LEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxl
        ZCgic3RyaW5nLWh1bWFuaXplIikmJihTdHJpbmcucHJvdG90eXBlLmh1bWFu
        aXplPWZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcyl9KSl9KCksZnVuY3Rpb24o
        KXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7KEVtYmVyLkVYVEVORF9Q
        Uk9UT1RZUEVTPT09ITB8fEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0
        aW9uKSYmKEZ1bmN0aW9uLnByb3RvdHlwZS5wcm9wZXJ0eT1mdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLmNvbXB1dGVkKHRoaXMpO3JldHVybiBlLnByb3BlcnR5
        LmFwcGx5KGUsYXJndW1lbnRzKX0sRnVuY3Rpb24ucHJvdG90eXBlLm9ic2Vy
        dmVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19lbWJlcl9vYnNlcnZlc19f
        PWUuY2FsbChhcmd1bWVudHMpLHRoaXN9LEZ1bmN0aW9uLnByb3RvdHlwZS5v
        YnNlcnZlc0ltbWVkaWF0ZWx5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1h
        cmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspYXJndW1lbnRzW2VdO3JldHVybiB0
        aGlzLm9ic2VydmVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sRnVuY3Rpb24u
        cHJvdG90eXBlLm9ic2VydmVzQmVmb3JlPWZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMuX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fPWUuY2FsbChhcmd1bWVudHMp
        LHRoaXN9LEZ1bmN0aW9uLnByb3RvdHlwZS5vbj1mdW5jdGlvbigpe3ZhciB0
        PWUuY2FsbChhcmd1bWVudHMpO3JldHVybiB0aGlzLl9fZW1iZXJfbGlzdGVu
        c19fPXQsdGhpc30pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuQ29tcGFyYWJsZT1F
        bWJlci5NaXhpbi5jcmVhdGUoe2NvbXBhcmU6RW1iZXIucmVxdWlyZWQoRnVu
        Y3Rpb24pfSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQ7RW1iZXIu
        c2V0LEVtYmVyLkNvcHlhYmxlPUVtYmVyLk1peGluLmNyZWF0ZSh7Y29weTpF
        bWJlci5yZXF1aXJlZChGdW5jdGlvbiksZnJvemVuQ29weTpmdW5jdGlvbigp
        e2lmKEVtYmVyLkZyZWV6YWJsZSYmRW1iZXIuRnJlZXphYmxlLmRldGVjdCh0
        aGlzKSlyZXR1cm4gZSh0aGlzLCJpc0Zyb3plbiIpP3RoaXM6dGhpcy5jb3B5
        KCkuZnJlZXplKCk7dGhyb3cgbmV3IEVtYmVyLkVycm9yKEVtYmVyLlN0cmlu
        Zy5mbXQoIiVAIGRvZXMgbm90IHN1cHBvcnQgZnJlZXppbmciLFt0aGlzXSkp
        fX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0
        O0VtYmVyLkZyZWV6YWJsZT1FbWJlci5NaXhpbi5jcmVhdGUoe2lzRnJvemVu
        OiExLGZyZWV6ZTpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImlzRnJvemVu
        Iik/dGhpczoodCh0aGlzLCJpc0Zyb3plbiIsITApLHRoaXMpfX0pLEVtYmVy
        LkZST1pFTl9FUlJPUj0iRnJvemVuIG9iamVjdCBjYW5ub3QgYmUgbW9kaWZp
        ZWQuIn0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLkVudW1lcmFibGVVdGls
        cy5mb3JFYWNoO0VtYmVyLk11dGFibGVFbnVtZXJhYmxlPUVtYmVyLk1peGlu
        LmNyZWF0ZShFbWJlci5FbnVtZXJhYmxlLHthZGRPYmplY3Q6RW1iZXIucmVx
        dWlyZWQoRnVuY3Rpb24pLGFkZE9iamVjdHM6ZnVuY3Rpb24odCl7cmV0dXJu
        IEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRoaXMpLGUodCxmdW5jdGlv
        bihlKXt0aGlzLmFkZE9iamVjdChlKX0sdGhpcyksRW1iZXIuZW5kUHJvcGVy
        dHlDaGFuZ2VzKHRoaXMpLHRoaXN9LHJlbW92ZU9iamVjdDpFbWJlci5yZXF1
        aXJlZChGdW5jdGlvbikscmVtb3ZlT2JqZWN0czpmdW5jdGlvbih0KXtyZXR1
        cm4gRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXModGhpcyksZSh0LGZ1bmN0
        aW9uKGUpe3RoaXMucmVtb3ZlT2JqZWN0KGUpfSx0aGlzKSxFbWJlci5lbmRQ
        cm9wZXJ0eUNoYW5nZXModGhpcyksdGhpc319KX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPSJJbmRleCBvdXQgb2YgcmFuZ2UiLHQ9W10scj1FbWJlci5nZXQ7RW1i
        ZXIuc2V0LEVtYmVyLk11dGFibGVBcnJheT1FbWJlci5NaXhpbi5jcmVhdGUo
        RW1iZXIuQXJyYXksRW1iZXIuTXV0YWJsZUVudW1lcmFibGUse3JlcGxhY2U6
        RW1iZXIucmVxdWlyZWQoKSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlPXIodGhp
        cywibGVuZ3RoIik7cmV0dXJuIDA9PT1lP3RoaXM6KHRoaXMucmVwbGFjZSgw
        LGUsdCksdGhpcyl9LGluc2VydEF0OmZ1bmN0aW9uKHQsbil7aWYodD5yKHRo
        aXMsImxlbmd0aCIpKXRocm93IG5ldyBFbWJlci5FcnJvcihlKTtyZXR1cm4g
        dGhpcy5yZXBsYWNlKHQsMCxbbl0pLHRoaXN9LHJlbW92ZUF0OmZ1bmN0aW9u
        KG4saSl7aWYoIm51bWJlciI9PXR5cGVvZiBuKXtpZigwPm58fG4+PXIodGhp
        cywibGVuZ3RoIikpdGhyb3cgbmV3IEVtYmVyLkVycm9yKGUpO3ZvaWQgMD09
        PWkmJihpPTEpLHRoaXMucmVwbGFjZShuLGksdCl9cmV0dXJuIHRoaXN9LHB1
        c2hPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5zZXJ0QXQocih0
        aGlzLCJsZW5ndGgiKSxlKSxlfSxwdXNoT2JqZWN0czpmdW5jdGlvbihlKXtp
        ZighRW1iZXIuRW51bWVyYWJsZS5kZXRlY3QoZSkmJiFFbWJlci5pc0FycmF5
        KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIk11c3QgcGFzcyBFbWJlci5FbnVt
        ZXJhYmxlIHRvIEVtYmVyLk11dGFibGVBcnJheSNwdXNoT2JqZWN0cyIpO3Jl
        dHVybiB0aGlzLnJlcGxhY2Uocih0aGlzLCJsZW5ndGgiKSwwLGUpLHRoaXN9
        LHBvcE9iamVjdDpmdW5jdGlvbigpe3ZhciBlPXIodGhpcywibGVuZ3RoIik7
        aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5vYmplY3RBdChlLTEp
        O3JldHVybiB0aGlzLnJlbW92ZUF0KGUtMSwxKSx0fSxzaGlmdE9iamVjdDpm
        dW5jdGlvbigpe2lmKDA9PT1yKHRoaXMsImxlbmd0aCIpKXJldHVybiBudWxs
        O3ZhciBlPXRoaXMub2JqZWN0QXQoMCk7cmV0dXJuIHRoaXMucmVtb3ZlQXQo
        MCksZX0sdW5zaGlmdE9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5p
        bnNlcnRBdCgwLGUpLGV9LHVuc2hpZnRPYmplY3RzOmZ1bmN0aW9uKGUpe3Jl
        dHVybiB0aGlzLnJlcGxhY2UoMCwwLGUpLHRoaXN9LHJldmVyc2VPYmplY3Rz
        OmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJsZW5ndGgiKTtpZigwPT09ZSly
        ZXR1cm4gdGhpczt2YXIgdD10aGlzLnRvQXJyYXkoKS5yZXZlcnNlKCk7cmV0
        dXJuIHRoaXMucmVwbGFjZSgwLGUsdCksdGhpc30sc2V0T2JqZWN0czpmdW5j
        dGlvbihlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIHRoaXMuY2xlYXIoKTt2
        YXIgdD1yKHRoaXMsImxlbmd0aCIpO3JldHVybiB0aGlzLnJlcGxhY2UoMCx0
        LGUpLHRoaXN9LHJlbW92ZU9iamVjdDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9
        cih0aGlzLCJsZW5ndGgiKXx8MDstLXQ+PTA7KXt2YXIgbj10aGlzLm9iamVj
        dEF0KHQpO249PT1lJiZ0aGlzLnJlbW92ZUF0KHQpfXJldHVybiB0aGlzfSxh
        ZGRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udGFpbnMoZSl8
        fHRoaXMucHVzaE9iamVjdChlKSx0aGlzfX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0LHI9QXJyYXkucHJvdG90eXBlLnNs
        aWNlLG49RW1iZXIuZ2V0UHJvcGVydGllcztFbWJlci5PYnNlcnZhYmxlPUVt
        YmVyLk1peGluLmNyZWF0ZSh7Z2V0OmZ1bmN0aW9uKHQpe3JldHVybiBlKHRo
        aXMsdCl9LGdldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBs
        eShudWxsLFt0aGlzXS5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX0sc2V0
        OmZ1bmN0aW9uKGUscil7cmV0dXJuIHQodGhpcyxlLHIpLHRoaXN9LHNldFBy
        b3BlcnRpZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLnNldFByb3BlcnRp
        ZXModGhpcyxlKX0sYmVnaW5Qcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oKXty
        ZXR1cm4gRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXMoKSx0aGlzfSxlbmRQ
        cm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuZW5kUHJv
        cGVydHlDaGFuZ2VzKCksdGhpc30scHJvcGVydHlXaWxsQ2hhbmdlOmZ1bmN0
        aW9uKGUpe3JldHVybiBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcyxl
        KSx0aGlzfSxwcm9wZXJ0eURpZENoYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4g
        RW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcyxlKSx0aGlzfSxub3RpZnlQ
        cm9wZXJ0eUNoYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wZXJ0
        eVdpbGxDaGFuZ2UoZSksdGhpcy5wcm9wZXJ0eURpZENoYW5nZShlKSx0aGlz
        fSxhZGRCZWZvcmVPYnNlcnZlcjpmdW5jdGlvbihlLHQscil7RW1iZXIuYWRk
        QmVmb3JlT2JzZXJ2ZXIodGhpcyxlLHQscil9LGFkZE9ic2VydmVyOmZ1bmN0
        aW9uKGUsdCxyKXtFbWJlci5hZGRPYnNlcnZlcih0aGlzLGUsdCxyKX0scmVt
        b3ZlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSx0LHIpe0VtYmVyLnJlbW92ZU9ic2Vy
        dmVyKHRoaXMsZSx0LHIpfSxoYXNPYnNlcnZlckZvcjpmdW5jdGlvbihlKXty
        ZXR1cm4gRW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsZSsiOmNoYW5nZSIpfSxn
        ZXRXaXRoRGVmYXVsdDpmdW5jdGlvbihlLHQpe3JldHVybiBFbWJlci5nZXRX
        aXRoRGVmYXVsdCh0aGlzLGUsdCl9LGluY3JlbWVudFByb3BlcnR5OmZ1bmN0
        aW9uKHIsbil7cmV0dXJuIEVtYmVyLmlzTm9uZShuKSYmKG49MSksdCh0aGlz
        LHIsKGUodGhpcyxyKXx8MCkrbiksZSh0aGlzLHIpfSxkZWNyZW1lbnRQcm9w
        ZXJ0eTpmdW5jdGlvbihyLG4pe3JldHVybiBFbWJlci5pc05vbmUobikmJihu
        PTEpLHQodGhpcyxyLChlKHRoaXMscil8fDApLW4pLGUodGhpcyxyKX0sdG9n
        Z2xlUHJvcGVydHk6ZnVuY3Rpb24ocil7cmV0dXJuIHQodGhpcyxyLCFlKHRo
        aXMscikpLGUodGhpcyxyKX0sY2FjaGVGb3I6ZnVuY3Rpb24oZSl7cmV0dXJu
        IEVtYmVyLmNhY2hlRm9yKHRoaXMsZSl9LG9ic2VydmVyc0ZvcktleTpmdW5j
        dGlvbihlKXtyZXR1cm4gRW1iZXIub2JzZXJ2ZXJzRm9yKHRoaXMsZSl9fSl9
        KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQ7RW1iZXIuc2V0LEVtYmVy
        LlRhcmdldEFjdGlvblN1cHBvcnQ9RW1iZXIuTWl4aW4uY3JlYXRlKHt0YXJn
        ZXQ6bnVsbCxhY3Rpb246bnVsbCxhY3Rpb25Db250ZXh0Om51bGwsdGFyZ2V0
        T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlz
        LCJ0YXJnZXQiKTtpZigic3RyaW5nIj09PUVtYmVyLnR5cGVPZih0KSl7dmFy
        IHI9ZSh0aGlzLHQpO3JldHVybiB2b2lkIDA9PT1yJiYocj1lKEVtYmVyLmxv
        b2t1cCx0KSkscn1yZXR1cm4gdH0pLnByb3BlcnR5KCJ0YXJnZXQiKSxhY3Rp
        b25Db250ZXh0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFy
        IHQ9ZSh0aGlzLCJhY3Rpb25Db250ZXh0Iik7aWYoInN0cmluZyI9PT1FbWJl
        ci50eXBlT2YodCkpe3ZhciByPWUodGhpcyx0KTtyZXR1cm4gdm9pZCAwPT09
        ciYmKHI9ZShFbWJlci5sb29rdXAsdCkpLHJ9cmV0dXJuIHR9KS5wcm9wZXJ0
        eSgiYWN0aW9uQ29udGV4dCIpLHRyaWdnZXJBY3Rpb246ZnVuY3Rpb24odCl7
        ZnVuY3Rpb24gcihlLHQpe3ZhciByPVtdO3JldHVybiB0JiZyLnB1c2godCks
        ci5jb25jYXQoZSl9dD10fHx7fTt2YXIgbj10LmFjdGlvbnx8ZSh0aGlzLCJh
        Y3Rpb24iKSxpPXQudGFyZ2V0fHxlKHRoaXMsInRhcmdldE9iamVjdCIpLG89
        dC5hY3Rpb25Db250ZXh0O2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgbyYmKG89
        ZSh0aGlzLCJhY3Rpb25Db250ZXh0T2JqZWN0Iil8fHRoaXMpLGkmJm4pe3Zh
        ciBhO3JldHVybiBhPWkuc2VuZD9pLnNlbmQuYXBwbHkoaSxyKG8sbikpOmlb
        bl0uYXBwbHkoaSxyKG8pKSxhIT09ITEmJihhPSEwKSxhfXJldHVybiExfX0p
        fSgpLGZ1bmN0aW9uKCl7RW1iZXIuRXZlbnRlZD1FbWJlci5NaXhpbi5jcmVh
        dGUoe29uOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gRW1iZXIuYWRkTGlzdGVu
        ZXIodGhpcyxlLHQsciksdGhpc30sb25lOmZ1bmN0aW9uKGUsdCxyKXtyZXR1
        cm4gcnx8KHI9dCx0PW51bGwpLEVtYmVyLmFkZExpc3RlbmVyKHRoaXMsZSx0
        LHIsITApLHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7dmFyIHQscixuPVtd
        O2Zvcih0PTEscj1hcmd1bWVudHMubGVuZ3RoO3I+dDt0Kyspbi5wdXNoKGFy
        Z3VtZW50c1t0XSk7RW1iZXIuc2VuZEV2ZW50KHRoaXMsZSxuKX0sb2ZmOmZ1
        bmN0aW9uKGUsdCxyKXtyZXR1cm4gRW1iZXIucmVtb3ZlTGlzdGVuZXIodGhp
        cyxlLHQsciksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5o
        YXNMaXN0ZW5lcnModGhpcyxlKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPXQo
        InJzdnAiKTtlLmNvbmZpZ3VyZSgiYXN5bmMiLGZ1bmN0aW9uKGUsdCl7RW1i
        ZXIucnVuLnNjaGVkdWxlKCJhY3Rpb25zIix0LGUsdCl9KTt2YXIgcj1FbWJl
        ci5nZXQ7RW1iZXIuRGVmZXJyZWRNaXhpbj1FbWJlci5NaXhpbi5jcmVhdGUo
        e3RoZW46ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQpe3JldHVybiB0PT09
        bz9lKGEpOmUodCl9dmFyIGksbyxhO3JldHVybiBhPXRoaXMsaT1yKHRoaXMs
        Il9kZWZlcnJlZCIpLG89aS5wcm9taXNlLG8udGhlbihlJiZuLHQpfSxyZXNv
        bHZlOmZ1bmN0aW9uKGUpe3ZhciB0LG47dD1yKHRoaXMsIl9kZWZlcnJlZCIp
        LG49dC5wcm9taXNlLGU9PT10aGlzP3QucmVzb2x2ZShuKTp0LnJlc29sdmUo
        ZSl9LHJlamVjdDpmdW5jdGlvbihlKXtyKHRoaXMsIl9kZWZlcnJlZCIpLnJl
        amVjdChlKX0sX2RlZmVycmVkOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        cmV0dXJuIGUuZGVmZXIoKX0pfSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJl
        ci5nZXQsdD1FbWJlci50eXBlT2Y7RW1iZXIuQWN0aW9uSGFuZGxlcj1FbWJl
        ci5NaXhpbi5jcmVhdGUoe21lcmdlZFByb3BlcnRpZXM6WyJfYWN0aW9ucyJd
        LHdpbGxNZXJnZU1peGluOmZ1bmN0aW9uKGUpe3ZhciByO2UuX2FjdGlvbnN8
        fCgib2JqZWN0Ij09PXQoZS5hY3Rpb25zKT9yPSJhY3Rpb25zIjoib2JqZWN0
        Ij09PXQoZS5ldmVudHMpJiYocj0iZXZlbnRzIiksciYmKGUuX2FjdGlvbnM9
        RW1iZXIubWVyZ2UoZS5fYWN0aW9uc3x8e30sZVtyXSkpLGRlbGV0ZSBlW3Jd
        KX0sc2VuZDpmdW5jdGlvbih0KXt2YXIgcixuPVtdLnNsaWNlLmNhbGwoYXJn
        dW1lbnRzLDEpO2lmKHRoaXMuX2FjdGlvbnMmJnRoaXMuX2FjdGlvbnNbdF0p
        e2lmKHRoaXMuX2FjdGlvbnNbdF0uYXBwbHkodGhpcyxuKSE9PSEwKXJldHVy
        bn1lbHNlIGlmKHRoaXMuZGVwcmVjYXRlZFNlbmQmJnRoaXMuZGVwcmVjYXRl
        ZFNlbmRIYW5kbGVzJiZ0aGlzLmRlcHJlY2F0ZWRTZW5kSGFuZGxlcyh0KSYm
        dGhpcy5kZXByZWNhdGVkU2VuZC5hcHBseSh0aGlzLFtdLnNsaWNlLmNhbGwo
        YXJndW1lbnRzKSkhPT0hMClyZXR1cm47KHI9ZSh0aGlzLCJ0YXJnZXQiKSkm
        JnIuc2VuZC5hcHBseShyLGFyZ3VtZW50cyl9fSl9KCksZnVuY3Rpb24oKXtm
        dW5jdGlvbiBlKGUscil7ci50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiB0KGUs
        ImlzRnVsZmlsbGVkIiwhMCksdChlLCJjb250ZW50IixyKSxyfSxmdW5jdGlv
        bihyKXt0KGUsImlzUmVqZWN0ZWQiLCEwKSx0KGUsInJlYXNvbiIscil9KS5m
        YWlsKGkpfXZhciB0PUVtYmVyLnNldCxyPUVtYmVyLmdldCxuPUVtYmVyLlJT
        VlAucmVzb2x2ZSxpPUVtYmVyLlJTVlAucmV0aHJvdyxvPUVtYmVyLmNvbXB1
        dGVkLm5vdCxhPUVtYmVyLmNvbXB1dGVkLm9yO0VtYmVyLlByb21pc2VQcm94
        eU1peGluPUVtYmVyLk1peGluLmNyZWF0ZSh7cmVhc29uOm51bGwsaXNQZW5k
        aW5nOm8oImlzU2V0dGxlZCIpLnJlYWRPbmx5KCksaXNTZXR0bGVkOmEoImlz
        UmVqZWN0ZWQiLCJpc0Z1bGZpbGxlZCIpLnJlYWRPbmx5KCksaXNSZWplY3Rl
        ZDohMSxpc0Z1bGZpbGxlZDohMSxwcm9taXNlOkVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKHQscil7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI9
        bihyKSxlKHRoaXMscikscjt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlByb21p
        c2VQcm94eSdzIHByb21pc2UgbXVzdCBiZSBzZXQiKX0pLHRoZW46ZnVuY3Rp
        b24oZSx0KXtyZXR1cm4gcih0aGlzLCJwcm9taXNlIikudGhlbihlLHQpfX0p
        fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy50eXBlPWUs
        dGhpcy5jb3VudD10LHRoaXMuaXRlbXM9cn1mdW5jdGlvbiB0KGUsdCxyLG4p
        e3RoaXMub3BlcmF0aW9uPWUsdGhpcy5pbmRleD10LHRoaXMuc3BsaXQ9cix0
        aGlzLnJhbmdlU3RhcnQ9bn12YXIgcj1FbWJlci5nZXQsbj1FbWJlci5FbnVt
        ZXJhYmxlVXRpbHMuZm9yRWFjaCxpPSJyIixvPSJpIixhPSJkIjtFbWJlci5U
        cmFja2VkQXJyYXk9ZnVuY3Rpb24odCl7YXJndW1lbnRzLmxlbmd0aDwxJiYo
        dD1bXSk7dmFyIG49cih0LCJsZW5ndGgiKTt0aGlzLl9vcGVyYXRpb25zPW4/
        W25ldyBlKGksbix0KV06W119LEVtYmVyLlRyYWNrZWRBcnJheS5SRVRBSU49
        aSxFbWJlci5UcmFja2VkQXJyYXkuSU5TRVJUPW8sRW1iZXIuVHJhY2tlZEFy
        cmF5LkRFTEVURT1hLEVtYmVyLlRyYWNrZWRBcnJheS5wcm90b3R5cGU9e2Fk
        ZEl0ZW1zOmZ1bmN0aW9uKHQsbil7dmFyIGk9cihuLCJsZW5ndGgiKTtpZigh
        KDE+aSkpe3ZhciBhLHMsdT10aGlzLl9maW5kQXJyYXlPcGVyYXRpb24odCks
        Yz11Lm9wZXJhdGlvbixsPXUuaW5kZXgsaD11LnJhbmdlU3RhcnQ7cz1uZXcg
        ZShvLGksbiksYz91LnNwbGl0Pyh0aGlzLl9zcGxpdChsLHQtaCxzKSxhPWwr
        MSk6KHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGwsMCxzKSxhPWwpOih0aGlz
        Ll9vcGVyYXRpb25zLnB1c2gocyksYT1sKSx0aGlzLl9jb21wb3NlSW5zZXJ0
        KGEpfX0scmVtb3ZlSXRlbXM6ZnVuY3Rpb24odCxyKXtpZighKDE+cikpe3Zh
        ciBuLGksbz10aGlzLl9maW5kQXJyYXlPcGVyYXRpb24odCkscz0oby5vcGVy
        YXRpb24sby5pbmRleCksdT1vLnJhbmdlU3RhcnQ7cmV0dXJuIG49bmV3IGUo
        YSxyKSxvLnNwbGl0Pyh0aGlzLl9zcGxpdChzLHQtdSxuKSxpPXMrMSk6KHRo
        aXMuX29wZXJhdGlvbnMuc3BsaWNlKHMsMCxuKSxpPXMpLHRoaXMuX2NvbXBv
        c2VEZWxldGUoaSl9fSxhcHBseTpmdW5jdGlvbih0KXt2YXIgcj1bXSxvPTA7
        bih0aGlzLl9vcGVyYXRpb25zLGZ1bmN0aW9uKGUpe3QoZS5pdGVtcyxvLGUu
        dHlwZSksZS50eXBlIT09YSYmKG8rPWUuY291bnQscj1yLmNvbmNhdChlLml0
        ZW1zKSl9KSx0aGlzLl9vcGVyYXRpb25zPVtuZXcgZShpLHIubGVuZ3RoLHIp
        XX0sX2ZpbmRBcnJheU9wZXJhdGlvbjpmdW5jdGlvbihlKXt2YXIgcixuLGks
        byxzLHU9ITE7Zm9yKHI9bz0wLG49dGhpcy5fb3BlcmF0aW9ucy5sZW5ndGg7
        bj5yOysrcilpZihpPXRoaXMuX29wZXJhdGlvbnNbcl0saS50eXBlIT09YSl7
        aWYocz1vK2kuY291bnQtMSxlPT09bylicmVhaztpZihlPm8mJnM+PWUpe3U9
        ITA7YnJlYWt9bz1zKzF9cmV0dXJuIG5ldyB0KGkscix1LG8pfSxfc3BsaXQ6
        ZnVuY3Rpb24odCxyLG4pe3ZhciBpPXRoaXMuX29wZXJhdGlvbnNbdF0sbz1p
        Lml0ZW1zLnNsaWNlKHIpLGE9bmV3IGUoaS50eXBlLG8ubGVuZ3RoLG8pO2ku
        Y291bnQ9cixpLml0ZW1zPWkuaXRlbXMuc2xpY2UoMCxyKSx0aGlzLl9vcGVy
        YXRpb25zLnNwbGljZSh0KzEsMCxuLGEpfSxfY29tcG9zZUluc2VydDpmdW5j
        dGlvbihlKXt2YXIgdD10aGlzLl9vcGVyYXRpb25zW2VdLHI9dGhpcy5fb3Bl
        cmF0aW9uc1tlLTFdLG49dGhpcy5fb3BlcmF0aW9uc1tlKzFdLGk9ciYmci50
        eXBlLGE9biYmbi50eXBlO2k9PT1vPyhyLmNvdW50Kz10LmNvdW50LHIuaXRl
        bXM9ci5pdGVtcy5jb25jYXQodC5pdGVtcyksYT09PW8/KHIuY291bnQrPW4u
        Y291bnQsci5pdGVtcz1yLml0ZW1zLmNvbmNhdChuLml0ZW1zKSx0aGlzLl9v
        cGVyYXRpb25zLnNwbGljZShlLDIpKTp0aGlzLl9vcGVyYXRpb25zLnNwbGlj
        ZShlLDEpKTphPT09byYmKHQuY291bnQrPW4uY291bnQsdC5pdGVtcz10Lml0
        ZW1zLmNvbmNhdChuLml0ZW1zKSx0aGlzLl9vcGVyYXRpb25zLnNwbGljZShl
        KzEsMSkpfSxfY29tcG9zZURlbGV0ZTpmdW5jdGlvbihlKXt2YXIgdCxyLG4s
        aT10aGlzLl9vcGVyYXRpb25zW2VdLHM9aS5jb3VudCx1PXRoaXMuX29wZXJh
        dGlvbnNbZS0xXSxjPXUmJnUudHlwZSxsPSExLGg9W107Yz09PWEmJihpPXUs
        ZS09MSk7Zm9yKHZhciBtPWUrMTtzPjA7KyttKXQ9dGhpcy5fb3BlcmF0aW9u
        c1ttXSxyPXQudHlwZSxuPXQuY291bnQsciE9PWE/KG4+cz8oaD1oLmNvbmNh
        dCh0Lml0ZW1zLnNwbGljZSgwLHMpKSx0LmNvdW50LT1zLG0tPTEsbj1zLHM9
        MCk6KG49PT1zJiYobD0hMCksaD1oLmNvbmNhdCh0Lml0ZW1zKSxzLT1uKSxy
        PT09byYmKGkuY291bnQtPW4pKTppLmNvdW50Kz1uO3JldHVybiBpLmNvdW50
        PjA/dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoZSsxLG0tMS1lKTp0aGlzLl9v
        cGVyYXRpb25zLnNwbGljZShlLGw/MjoxKSxofSx0b1N0cmluZzpmdW5jdGlv
        bigpe3ZhciBlPSIiO3JldHVybiBuKHRoaXMuX29wZXJhdGlvbnMsZnVuY3Rp
        b24odCl7ZSs9IiAiK3QudHlwZSsiOiIrdC5jb3VudH0pLGUuc3Vic3RyaW5n
        KDEpfX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy50eXBl
        PWUsdGhpcy5jb3VudD10fXZhciB0PShFbWJlci5nZXQsRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2gpLHI9InIiLG49ImYiOwpFbWJlci5TdWJBcnJh
        eT1mdW5jdGlvbih0KXthcmd1bWVudHMubGVuZ3RoPDEmJih0PTApLHRoaXMu
        X29wZXJhdGlvbnM9dD4wP1tuZXcgZShyLHQpXTpbXX0sRW1iZXIuU3ViQXJy
        YXkucHJvdG90eXBlPXthZGRJdGVtOmZ1bmN0aW9uKHQsaSl7dmFyIG89LTEs
        YT1pP3I6bixzPXRoaXM7cmV0dXJuIHRoaXMuX2ZpbmRPcGVyYXRpb24odCxm
        dW5jdGlvbihuLHUsYyxsLGgpe3ZhciBtLGY7YT09PW4udHlwZT8rK24uY291
        bnQ6dD09PWM/cy5fb3BlcmF0aW9ucy5zcGxpY2UodSwwLG5ldyBlKGEsMSkp
        OihtPW5ldyBlKGEsMSksZj1uZXcgZShuLnR5cGUsbC10KzEpLG4uY291bnQ9
        dC1jLHMuX29wZXJhdGlvbnMuc3BsaWNlKHUrMSwwLG0sZikpLGkmJihvPW4u
        dHlwZT09PXI/aCsodC1jKTpoKSxzLl9jb21wb3NlQXQodSl9LGZ1bmN0aW9u
        KHQpe3MuX29wZXJhdGlvbnMucHVzaChuZXcgZShhLDEpKSxpJiYobz10KSxz
        Ll9jb21wb3NlQXQocy5fb3BlcmF0aW9ucy5sZW5ndGgtMSl9KSxvfSxyZW1v
        dmVJdGVtOmZ1bmN0aW9uKGUpe3ZhciB0PS0xLG49dGhpcztyZXR1cm4gdGhp
        cy5fZmluZE9wZXJhdGlvbihlLGZ1bmN0aW9uKGksbyxhLHMsdSl7aS50eXBl
        PT09ciYmKHQ9dSsoZS1hKSksaS5jb3VudD4xPy0taS5jb3VudDoobi5fb3Bl
        cmF0aW9ucy5zcGxpY2UobywxKSxuLl9jb21wb3NlQXQobykpfSxmdW5jdGlv
        bigpe3Rocm93IG5ldyBFbWJlci5FcnJvcigiQ2FuJ3QgcmVtb3ZlIGFuIGl0
        ZW0gdGhhdCBoYXMgbmV2ZXIgYmVlbiBhZGRlZC4iKX0pLHR9LF9maW5kT3Bl
        cmF0aW9uOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxvLGEscyx1LGM9MDtmb3Io
        aT1zPTAsbz10aGlzLl9vcGVyYXRpb25zLmxlbmd0aDtvPmk7cz11KzEsKytp
        KXtpZihhPXRoaXMuX29wZXJhdGlvbnNbaV0sdT1zK2EuY291bnQtMSxlPj1z
        JiZ1Pj1lKXJldHVybiB0KGEsaSxzLHUsYyksdm9pZCAwO2EudHlwZT09PXIm
        JihjKz1hLmNvdW50KX1uKGMpfSxfY29tcG9zZUF0OmZ1bmN0aW9uKGUpe3Zh
        ciB0LHI9dGhpcy5fb3BlcmF0aW9uc1tlXTtyJiYoZT4wJiYodD10aGlzLl9v
        cGVyYXRpb25zW2UtMV0sdC50eXBlPT09ci50eXBlJiYoci5jb3VudCs9dC5j
        b3VudCx0aGlzLl9vcGVyYXRpb25zLnNwbGljZShlLTEsMSksLS1lKSksZTx0
        aGlzLl9vcGVyYXRpb25zLmxlbmd0aC0xJiYodD10aGlzLl9vcGVyYXRpb25z
        W2UrMV0sdC50eXBlPT09ci50eXBlJiYoci5jb3VudCs9dC5jb3VudCx0aGlz
        Ll9vcGVyYXRpb25zLnNwbGljZShlKzEsMSkpKSl9LHRvU3RyaW5nOmZ1bmN0
        aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHQodGhpcy5fb3BlcmF0aW9ucyxmdW5j
        dGlvbih0KXtlKz0iICIrdC50eXBlKyI6Iit0LmNvdW50fSksZS5zdWJzdHJp
        bmcoMSl9fX0oKSxmdW5jdGlvbigpe0VtYmVyLkNvbnRhaW5lcj10KCJjb250
        YWluZXIiKSxFbWJlci5Db250YWluZXIuc2V0PUVtYmVyLnNldH0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgZSx0LG89ITEsYT1mdW5jdGlvbigp
        e298fGEucHJvdG8oKSxuKHRoaXMsaSxnKSxuKHRoaXMsIl9zdXBlciIsZyk7
        dmFyIHU9cyh0aGlzKSxoPXUucHJvdG87aWYodS5wcm90bz10aGlzLGUpe3Zh
        ciBtPWU7ZT1udWxsLHRoaXMucmVvcGVuLmFwcGx5KHRoaXMsbSl9aWYodCl7
        dmFyIGY9dDt0PW51bGw7Zm9yKHZhciBwPXRoaXMuY29uY2F0ZW5hdGVkUHJv
        cGVydGllcyxiPTAseT1mLmxlbmd0aDt5PmI7YisrKXt2YXIgdz1mW2JdO2lm
        KG51bGwhPT13JiYib2JqZWN0Ij09dHlwZW9mIHcpZm9yKHZhciBfPUVtYmVy
        LmtleXModyksQz0wLE89Xy5sZW5ndGg7Tz5DO0MrKyl7dmFyIEE9X1tDXTtp
        Zih3Lmhhc093blByb3BlcnR5KEEpKXt2YXIgUD13W0FdLHg9RW1iZXIuSVNf
        QklORElORztpZih4LnRlc3QoQSkpe3ZhciBUPXUuYmluZGluZ3M7VD91Lmhh
        c093blByb3BlcnR5KCJiaW5kaW5ncyIpfHwoVD11LmJpbmRpbmdzPXIodS5i
        aW5kaW5ncykpOlQ9dS5iaW5kaW5ncz17fSxUW0FdPVB9dmFyIFY9dS5kZXNj
        c1tBXTtpZihwJiZ2KHAsQSk+PTApe3ZhciBTPXRoaXNbQV07UD1TPyJmdW5j
        dGlvbiI9PXR5cGVvZiBTLmNvbmNhdD9TLmNvbmNhdChQKTpFbWJlci5tYWtl
        QXJyYXkoUykuY29uY2F0KFApOkVtYmVyLm1ha2VBcnJheShQKX1WP1Yuc2V0
        KHRoaXMsQSxQKToiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5zZXRVbmtub3du
        UHJvcGVydHl8fEEgaW4gdGhpcz9FP0VtYmVyLmRlZmluZVByb3BlcnR5KHRo
        aXMsQSxudWxsLFApOnRoaXNbQV09UDp0aGlzLnNldFVua25vd25Qcm9wZXJ0
        eShBLFApfX19fWQodGhpcyx1KSx0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1
        bWVudHMpLHUucHJvdG89aCxjKHRoaXMpLGwodGhpcywiaW5pdCIpfTtyZXR1
        cm4gYS50b1N0cmluZz1mLnByb3RvdHlwZS50b1N0cmluZyxhLndpbGxSZW9w
        ZW49ZnVuY3Rpb24oKXtvJiYoYS5Qcm90b3R5cGVNaXhpbj1mLmNyZWF0ZShh
        LlByb3RvdHlwZU1peGluKSksbz0hMX0sYS5faW5pdE1peGlucz1mdW5jdGlv
        bih0KXtlPXR9LGEuX2luaXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUpe3Q9ZX0s
        YS5wcm90bz1mdW5jdGlvbigpe3ZhciBlPWEuc3VwZXJjbGFzcztyZXR1cm4g
        ZSYmZS5wcm90bygpLG98fChvPSEwLGEuUHJvdG90eXBlTWl4aW4uYXBwbHlQ
        YXJ0aWFsKGEucHJvdG90eXBlKSx1KGEucHJvdG90eXBlKSksdGhpcy5wcm90
        b3R5cGV9LGF9ZnVuY3Rpb24gdChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1
        cm4gZX19dmFyIHI9KEVtYmVyLnNldCxFbWJlci5nZXQsRW1iZXIuY3JlYXRl
        KSxuPUVtYmVyLnBsYXRmb3JtLmRlZmluZVByb3BlcnR5LGk9RW1iZXIuR1VJ
        RF9LRVksbz1FbWJlci5ndWlkRm9yLGE9RW1iZXIuZ2VuZXJhdGVHdWlkLHM9
        RW1iZXIubWV0YSx1PUVtYmVyLnJld2F0Y2gsYz1FbWJlci5maW5pc2hDaGFp
        bnMsbD1FbWJlci5zZW5kRXZlbnQsaD1FbWJlci5kZXN0cm95LG09RW1iZXIu
        cnVuLnNjaGVkdWxlLGY9RW1iZXIuTWl4aW4scD1mLl9hcHBseSxkPWYuZmlu
        aXNoUGFydGlhbCxiPWYucHJvdG90eXBlLnJlb3BlbixFPUVtYmVyLkVOVi5N
        QU5EQVRPUllfU0VUVEVSLHY9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4
        T2YsZz17Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6
        ITEsdmFsdWU6dm9pZCAwfSx5PWUoKTt5LnRvU3RyaW5nPWZ1bmN0aW9uKCl7
        cmV0dXJuIkVtYmVyLkNvcmVPYmplY3QifSx5LlByb3RvdHlwZU1peGluPWYu
        Y3JlYXRlKHtyZW9wZW46ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzLGFyZ3Vt
        ZW50cywhMCksdGhpc30saW5pdDpmdW5jdGlvbigpe30sY29uY2F0ZW5hdGVk
        UHJvcGVydGllczpudWxsLGlzRGVzdHJveWVkOiExLGlzRGVzdHJveWluZzoh
        MSxkZXN0cm95OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEZXN0cm95aW5n
        P3ZvaWQgMDoodGhpcy5pc0Rlc3Ryb3lpbmc9ITAsbSgiYWN0aW9ucyIsdGhp
        cyx0aGlzLndpbGxEZXN0cm95KSxtKCJkZXN0cm95Iix0aGlzLHRoaXMuX3Nj
        aGVkdWxlZERlc3Ryb3kpLHRoaXMpfSx3aWxsRGVzdHJveTpFbWJlci5LLF9z
        Y2hlZHVsZWREZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5pc0Rlc3Ryb3llZHx8
        KGgodGhpcyksdGhpcy5pc0Rlc3Ryb3llZD0hMCl9LGJpbmQ6ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEVtYmVyLkJpbmRpbmd8fCh0PUVt
        YmVyLkJpbmRpbmcuZnJvbSh0KSksdC50byhlKS5jb25uZWN0KHRoaXMpLHR9
        LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9m
        IHRoaXMudG9TdHJpbmdFeHRlbnNpb24scj1lPyI6Iit0aGlzLnRvU3RyaW5n
        RXh0ZW5zaW9uKCk6IiIsbj0iPCIrdGhpcy5jb25zdHJ1Y3Rvci50b1N0cmlu
        ZygpKyI6IitvKHRoaXMpK3IrIj4iO3JldHVybiB0aGlzLnRvU3RyaW5nPXQo
        biksbn19KSx5LlByb3RvdHlwZU1peGluLm93bmVyQ29uc3RydWN0b3I9eSxF
        bWJlci5jb25maWcub3ZlcnJpZGVQcm90b3R5cGVNaXhpbiYmRW1iZXIuY29u
        ZmlnLm92ZXJyaWRlUHJvdG90eXBlTWl4aW4oeS5Qcm90b3R5cGVNaXhpbiks
        eS5fX3N1cGVyX189bnVsbDt2YXIgdz1mLmNyZWF0ZSh7Q2xhc3NNaXhpbjpF
        bWJlci5yZXF1aXJlZCgpLFByb3RvdHlwZU1peGluOkVtYmVyLnJlcXVpcmVk
        KCksaXNDbGFzczohMCxpc01ldGhvZDohMSxleHRlbmQ6ZnVuY3Rpb24oKXt2
        YXIgdCxuPWUoKTtyZXR1cm4gbi5DbGFzc01peGluPWYuY3JlYXRlKHRoaXMu
        Q2xhc3NNaXhpbiksbi5Qcm90b3R5cGVNaXhpbj1mLmNyZWF0ZSh0aGlzLlBy
        b3RvdHlwZU1peGluKSxuLkNsYXNzTWl4aW4ub3duZXJDb25zdHJ1Y3Rvcj1u
        LG4uUHJvdG90eXBlTWl4aW4ub3duZXJDb25zdHJ1Y3Rvcj1uLGIuYXBwbHko
        bi5Qcm90b3R5cGVNaXhpbixhcmd1bWVudHMpLG4uc3VwZXJjbGFzcz10aGlz
        LG4uX19zdXBlcl9fPXRoaXMucHJvdG90eXBlLHQ9bi5wcm90b3R5cGU9cih0
        aGlzLnByb3RvdHlwZSksdC5jb25zdHJ1Y3Rvcj1uLGEodCkscyh0KS5wcm90
        bz10LG4uQ2xhc3NNaXhpbi5hcHBseShuKSxufSxjcmVhdGVXaXRoTWl4aW5z
        OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gYXJndW1lbnRzLmxlbmd0
        aD4wJiZ0aGlzLl9pbml0TWl4aW5zKGFyZ3VtZW50cyksbmV3IGV9LGNyZWF0
        ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGFyZ3VtZW50cy5sZW5n
        dGg+MCYmdGhpcy5faW5pdFByb3BlcnRpZXMoYXJndW1lbnRzKSxuZXcgZX0s
        cmVvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lsbFJlb3BlbigpLGIu
        YXBwbHkodGhpcy5Qcm90b3R5cGVNaXhpbixhcmd1bWVudHMpLHRoaXN9LHJl
        b3BlbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGIuYXBwbHkodGhpcy5DbGFz
        c01peGluLGFyZ3VtZW50cykscCh0aGlzLGFyZ3VtZW50cywhMSksdGhpc30s
        ZGV0ZWN0OmZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXJl
        dHVybiExO2Zvcig7ZTspe2lmKGU9PT10aGlzKXJldHVybiEwO2U9ZS5zdXBl
        cmNsYXNzfXJldHVybiExfSxkZXRlY3RJbnN0YW5jZTpmdW5jdGlvbihlKXty
        ZXR1cm4gZSBpbnN0YW5jZW9mIHRoaXN9LG1ldGFGb3JQcm9wZXJ0eTpmdW5j
        dGlvbihlKXt2YXIgdD1zKHRoaXMucHJvdG8oKSwhMSkuZGVzY3NbZV07cmV0
        dXJuIHQuX21ldGF8fHt9fSxlYWNoQ29tcHV0ZWRQcm9wZXJ0eTpmdW5jdGlv
        bihlLHQpe3ZhciByLG49dGhpcy5wcm90bygpLGk9cyhuKS5kZXNjcyxvPXt9
        O2Zvcih2YXIgYSBpbiBpKXI9aVthXSxyIGluc3RhbmNlb2YgRW1iZXIuQ29t
        cHV0ZWRQcm9wZXJ0eSYmZS5jYWxsKHR8fHRoaXMsYSxyLl9tZXRhfHxvKX19
        KTt3Lm93bmVyQ29uc3RydWN0b3I9eSxFbWJlci5jb25maWcub3ZlcnJpZGVD
        bGFzc01peGluJiZFbWJlci5jb25maWcub3ZlcnJpZGVDbGFzc01peGluKHcp
        LHkuQ2xhc3NNaXhpbj13LHcuYXBwbHkoeSksRW1iZXIuQ29yZU9iamVjdD15
        fSgpLGZ1bmN0aW9uKCl7RW1iZXIuT2JqZWN0PUVtYmVyLkNvcmVPYmplY3Qu
        ZXh0ZW5kKEVtYmVyLk9ic2VydmFibGUpLEVtYmVyLk9iamVjdC50b1N0cmlu
        Zz1mdW5jdGlvbigpe3JldHVybiJFbWJlci5PYmplY3QifX0oKSxmdW5jdGlv
        bigpe2Z1bmN0aW9uIGUodCxyLGkpe3ZhciBhPXQubGVuZ3RoO2NbdC5qb2lu
        KCIuIildPXI7Zm9yKHZhciBzIGluIHIpaWYobC5jYWxsKHIscykpe3ZhciB1
        PXJbc107aWYodFthXT1zLHUmJnUudG9TdHJpbmc9PT1uKXUudG9TdHJpbmc9
        byh0LmpvaW4oIi4iKSksdVttXT10LmpvaW4oIi4iKTtlbHNlIGlmKHUmJnUu
        aXNOYW1lc3BhY2Upe2lmKGlbaCh1KV0pY29udGludWU7aVtoKHUpXT0hMCxl
        KHQsdSxpKX19dC5sZW5ndGg9YX1mdW5jdGlvbiB0KCl7dmFyIGUsdCxyPUVt
        YmVyLk5hbWVzcGFjZSxuPUVtYmVyLmxvb2t1cDtpZighci5QUk9DRVNTRUQp
        Zm9yKHZhciBpIGluIG4paWYoInBhcmVudCIhPT1pJiYidG9wIiE9PWkmJiJm
        cmFtZUVsZW1lbnQiIT09aSYmIndlYmtpdFN0b3JhZ2VJbmZvIiE9PWkmJiEo
        Imdsb2JhbFN0b3JhZ2UiPT09aSYmbi5TdG9yYWdlTGlzdCYmbi5nbG9iYWxT
        dG9yYWdlIGluc3RhbmNlb2Ygbi5TdG9yYWdlTGlzdHx8bi5oYXNPd25Qcm9w
        ZXJ0eSYmIW4uaGFzT3duUHJvcGVydHkoaSkpKXt0cnl7ZT1FbWJlci5sb29r
        dXBbaV0sdD1lJiZlLmlzTmFtZXNwYWNlfWNhdGNoKG8pe2NvbnRpbnVlfXQm
        JihlW21dPWkpfX1mdW5jdGlvbiByKGUpe3ZhciB0PWUuc3VwZXJjbGFzczty
        ZXR1cm4gdD90W21dP3RbbV06cih0KTp2b2lkIDB9ZnVuY3Rpb24gbigpe0Vt
        YmVyLkJPT1RFRHx8dGhpc1ttXXx8aSgpO3ZhciBlO2lmKHRoaXNbbV0pZT10
        aGlzW21dO2Vsc2UgaWYodGhpcy5fdG9TdHJpbmcpZT10aGlzLl90b1N0cmlu
        ZztlbHNle3ZhciB0PXIodGhpcyk7ZT10PyIoc3ViY2xhc3Mgb2YgIit0KyIp
        IjoiKHVua25vd24gbWl4aW4pIix0aGlzLnRvU3RyaW5nPW8oZSl9cmV0dXJu
        IGV9ZnVuY3Rpb24gaSgpe3ZhciByPSF1LlBST0NFU1NFRCxuPUVtYmVyLmFu
        eVVucHJvY2Vzc2VkTWl4aW5zO2lmKHImJih0KCksdS5QUk9DRVNTRUQ9ITAp
        LHJ8fG4pe2Zvcih2YXIgaSxvPXUuTkFNRVNQQUNFUyxhPTAscz1vLmxlbmd0
        aDtzPmE7YSsrKWk9b1thXSxlKFtpLnRvU3RyaW5nKCldLGkse30pO0VtYmVy
        LmFueVVucHJvY2Vzc2VkTWl4aW5zPSExfX1mdW5jdGlvbiBvKGUpe3JldHVy
        biBmdW5jdGlvbigpe3JldHVybiBlfX12YXIgYT1FbWJlci5nZXQscz1FbWJl
        ci5BcnJheVBvbHlmaWxscy5pbmRleE9mLHU9RW1iZXIuTmFtZXNwYWNlPUVt
        YmVyLk9iamVjdC5leHRlbmQoe2lzTmFtZXNwYWNlOiEwLGluaXQ6ZnVuY3Rp
        b24oKXtFbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUy5wdXNoKHRoaXMpLEVt
        YmVyLk5hbWVzcGFjZS5QUk9DRVNTRUQ9ITF9LHRvU3RyaW5nOmZ1bmN0aW9u
        KCl7dmFyIGU9YSh0aGlzLCJuYW1lIik7cmV0dXJuIGU/ZToodCgpLHRoaXNb
        RW1iZXIuR1VJRF9LRVkrIl9uYW1lIl0pfSxuYW1lQ2xhc3NlczpmdW5jdGlv
        bigpe2UoW3RoaXMudG9TdHJpbmcoKV0sdGhpcyx7fSl9LGRlc3Ryb3k6ZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUztFbWJl
        ci5sb29rdXBbdGhpcy50b1N0cmluZygpXT12b2lkIDAsZS5zcGxpY2Uocy5j
        YWxsKGUsdGhpcyksMSksdGhpcy5fc3VwZXIoKX19KTt1LnJlb3BlbkNsYXNz
        KHtOQU1FU1BBQ0VTOltFbWJlcl0sTkFNRVNQQUNFU19CWV9JRDp7fSxQUk9D
        RVNTRUQ6ITEscHJvY2Vzc0FsbDppLGJ5TmFtZTpmdW5jdGlvbihlKXtyZXR1
        cm4gRW1iZXIuQk9PVEVEfHxpKCksY1tlXX19KTt2YXIgYz11Lk5BTUVTUEFD
        RVNfQllfSUQsbD17fS5oYXNPd25Qcm9wZXJ0eSxoPUVtYmVyLmd1aWRGb3Is
        bT1FbWJlci5OQU1FX0tFWT1FbWJlci5HVUlEX0tFWSsiX25hbWUiO0VtYmVy
        Lk1peGluLnByb3RvdHlwZS50b1N0cmluZz1ufSgpLGZ1bmN0aW9uKCl7RW1i
        ZXIuQXBwbGljYXRpb249RW1iZXIuTmFtZXNwYWNlLmV4dGVuZCgpfSgpLGZ1
        bmN0aW9uKCl7dmFyIGU9IkluZGV4IG91dCBvZiByYW5nZSIsdD1bXSxyPUVt
        YmVyLmdldDtFbWJlci5zZXQsRW1iZXIuQXJyYXlQcm94eT1FbWJlci5PYmpl
        Y3QuZXh0ZW5kKEVtYmVyLk11dGFibGVBcnJheSx7Y29udGVudDpudWxsLGFy
        cmFuZ2VkQ29udGVudDpFbWJlci5jb21wdXRlZC5hbGlhcygiY29udGVudCIp
        LG9iamVjdEF0Q29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gcih0aGlzLCJh
        cnJhbmdlZENvbnRlbnQiKS5vYmplY3RBdChlKX0scmVwbGFjZUNvbnRlbnQ6
        ZnVuY3Rpb24oZSx0LG4pe3IodGhpcywiY29udGVudCIpLnJlcGxhY2UoZSx0
        LG4pfSxfY29udGVudFdpbGxDaGFuZ2U6RW1iZXIuYmVmb3JlT2JzZXJ2ZXIo
        ImNvbnRlbnQiLGZ1bmN0aW9uKCl7dGhpcy5fdGVhcmRvd25Db250ZW50KCl9
        KSxfdGVhcmRvd25Db250ZW50OmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJj
        b250ZW50Iik7ZSYmZS5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMse3dpbGxD
        aGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiY29u
        dGVudEFycmF5RGlkQ2hhbmdlIn0pfSxjb250ZW50QXJyYXlXaWxsQ2hhbmdl
        OkVtYmVyLkssY29udGVudEFycmF5RGlkQ2hhbmdlOkVtYmVyLkssX2NvbnRl
        bnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9u
        KCl7cih0aGlzLCJjb250ZW50IiksdGhpcy5fc2V0dXBDb250ZW50KCl9KSxf
        c2V0dXBDb250ZW50OmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJjb250ZW50
        Iik7ZSYmZS5hZGRBcnJheU9ic2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6ImNv
        bnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiY29udGVudEFycmF5
        RGlkQ2hhbmdlIn0pfSxfYXJyYW5nZWRDb250ZW50V2lsbENoYW5nZTpFbWJl
        ci5iZWZvcmVPYnNlcnZlcigiYXJyYW5nZWRDb250ZW50IixmdW5jdGlvbigp
        e3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250ZW50IiksdD1lP3IoZSwibGVu
        Z3RoIik6MDt0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5V2lsbENoYW5nZSh0
        aGlzLDAsdCx2b2lkIDApLHRoaXMuYXJyYW5nZWRDb250ZW50V2lsbENoYW5n
        ZSh0aGlzKSx0aGlzLl90ZWFyZG93bkFycmFuZ2VkQ29udGVudChlKX0pLF9h
        cnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImFycmFu
        Z2VkQ29udGVudCIsZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImFycmFuZ2Vk
        Q29udGVudCIpLHQ9ZT9yKGUsImxlbmd0aCIpOjA7dGhpcy5fc2V0dXBBcnJh
        bmdlZENvbnRlbnQoKSx0aGlzLmFycmFuZ2VkQ29udGVudERpZENoYW5nZSh0
        aGlzKSx0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdlKHRoaXMs
        MCx2b2lkIDAsdCl9KSxfc2V0dXBBcnJhbmdlZENvbnRlbnQ6ZnVuY3Rpb24o
        KXt2YXIgZT1yKHRoaXMsImFycmFuZ2VkQ29udGVudCIpO2UmJmUuYWRkQXJy
        YXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJhcnJhbmdlZENvbnRlbnRB
        cnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiYXJyYW5nZWRDb250ZW50QXJy
        YXlEaWRDaGFuZ2UifSl9LF90ZWFyZG93bkFycmFuZ2VkQ29udGVudDpmdW5j
        dGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250ZW50Iik7ZSYmZS5y
        ZW1vdmVBcnJheU9ic2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6ImFycmFuZ2Vk
        Q29udGVudEFycmF5V2lsbENoYW5nZSIsZGlkQ2hhbmdlOiJhcnJhbmdlZENv
        bnRlbnRBcnJheURpZENoYW5nZSJ9KX0sYXJyYW5nZWRDb250ZW50V2lsbENo
        YW5nZTpFbWJlci5LLGFycmFuZ2VkQ29udGVudERpZENoYW5nZTpFbWJlci5L
        LG9iamVjdEF0OmZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsImNvbnRlbnQi
        KSYmdGhpcy5vYmplY3RBdENvbnRlbnQoZSl9LGxlbmd0aDpFbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250ZW50
        Iik7cmV0dXJuIGU/cihlLCJsZW5ndGgiKTowfSksX3JlcGxhY2U6ZnVuY3Rp
        b24oZSx0LG4pe3ZhciBpPXIodGhpcywiY29udGVudCIpO3JldHVybiBpJiZ0
        aGlzLnJlcGxhY2VDb250ZW50KGUsdCxuKSx0aGlzfSxyZXBsYWNlOmZ1bmN0
        aW9uKCl7aWYocih0aGlzLCJhcnJhbmdlZENvbnRlbnQiKSE9PXIodGhpcywi
        Y29udGVudCIpKXRocm93IG5ldyBFbWJlci5FcnJvcigiVXNpbmcgcmVwbGFj
        ZSBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBhbGxvd2VkLiIp
        O3RoaXMuX3JlcGxhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxfaW5zZXJ0
        QXQ6ZnVuY3Rpb24odCxuKXtpZih0PnIodGhpcywiY29udGVudC5sZW5ndGgi
        KSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoZSk7cmV0dXJuIHRoaXMuX3JlcGxh
        Y2UodCwwLFtuXSksdGhpc30saW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0KXtpZihy
        KHRoaXMsImFycmFuZ2VkQ29udGVudCIpPT09cih0aGlzLCJjb250ZW50Iikp
        cmV0dXJuIHRoaXMuX2luc2VydEF0KGUsdCk7dGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJVc2luZyBpbnNlcnRBdCBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5
        IGlzIG5vdCBhbGxvd2VkLiIpfSxyZW1vdmVBdDpmdW5jdGlvbihuLGkpe2lm
        KCJudW1iZXIiPT10eXBlb2Ygbil7dmFyIG8sYT1yKHRoaXMsImNvbnRlbnQi
        KSxzPXIodGhpcywiYXJyYW5nZWRDb250ZW50IiksdT1bXTtpZigwPm58fG4+
        PXIodGhpcywibGVuZ3RoIikpdGhyb3cgbmV3IEVtYmVyLkVycm9yKGUpO2Zv
        cih2b2lkIDA9PT1pJiYoaT0xKSxvPW47bitpPm87bysrKXUucHVzaChhLmlu
        ZGV4T2Yocy5vYmplY3RBdChvKSkpO2Zvcih1LnNvcnQoZnVuY3Rpb24oZSx0
        KXtyZXR1cm4gdC1lfSksRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXMoKSxv
        PTA7bzx1Lmxlbmd0aDtvKyspdGhpcy5fcmVwbGFjZSh1W29dLDEsdCk7RW1i
        ZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCl9cmV0dXJuIHRoaXN9LHB1c2hPYmpl
        Y3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc2VydEF0KHIodGhpcywi
        Y29udGVudC5sZW5ndGgiKSxlKSxlfSxwdXNoT2JqZWN0czpmdW5jdGlvbihl
        KXtpZighRW1iZXIuRW51bWVyYWJsZS5kZXRlY3QoZSkmJiFFbWJlci5pc0Fy
        cmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIk11c3QgcGFzcyBFbWJlci5F
        bnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVBcnJheSNwdXNoT2JqZWN0cyIp
        O3JldHVybiB0aGlzLl9yZXBsYWNlKHIodGhpcywibGVuZ3RoIiksMCxlKSx0
        aGlzfSxzZXRPYmplY3RzOmZ1bmN0aW9uKGUpe2lmKDA9PT1lLmxlbmd0aCly
        ZXR1cm4gdGhpcy5jbGVhcigpO3ZhciB0PXIodGhpcywibGVuZ3RoIik7cmV0
        dXJuIHRoaXMuX3JlcGxhY2UoMCx0LGUpLHRoaXN9LHVuc2hpZnRPYmplY3Q6
        ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc2VydEF0KDAsZSksZX0sdW5z
        aGlmdE9iamVjdHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcGxhY2Uo
        MCwwLGUpLHRoaXN9LHNsaWNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50b0Fy
        cmF5KCk7cmV0dXJuIGUuc2xpY2UuYXBwbHkoZSxhcmd1bWVudHMpfSxhcnJh
        bmdlZENvbnRlbnRBcnJheVdpbGxDaGFuZ2U6ZnVuY3Rpb24oZSx0LHIsbil7
        dGhpcy5hcnJheUNvbnRlbnRXaWxsQ2hhbmdlKHQscixuKX0sYXJyYW5nZWRD
        b250ZW50QXJyYXlEaWRDaGFuZ2U6ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5h
        cnJheUNvbnRlbnREaWRDaGFuZ2UodCxyLG4pfSxpbml0OmZ1bmN0aW9uKCl7
        dGhpcy5fc3VwZXIoKSx0aGlzLl9zZXR1cENvbnRlbnQoKSx0aGlzLl9zZXR1
        cEFycmFuZ2VkQ29udGVudCgpfSx3aWxsRGVzdHJveTpmdW5jdGlvbigpe3Ro
        aXMuX3RlYXJkb3duQXJyYW5nZWRDb250ZW50KCksdGhpcy5fdGVhcmRvd25D
        b250ZW50KCl9fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFy
        IHI9dC5zbGljZSg4KTtyIGluIHRoaXN8fHUodGhpcyxyKX1mdW5jdGlvbiB0
        KGUsdCl7dmFyIHI9dC5zbGljZSg4KTtyIGluIHRoaXN8fGModGhpcyxyKX12
        YXIgcj1FbWJlci5nZXQsbj1FbWJlci5zZXQsaT0oRW1iZXIuU3RyaW5nLmZt
        dCxFbWJlci5hZGRCZWZvcmVPYnNlcnZlciksbz1FbWJlci5hZGRPYnNlcnZl
        cixhPUVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyLHM9RW1iZXIucmVtb3Zl
        T2JzZXJ2ZXIsdT1FbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UsYz1FbWJlci5w
        cm9wZXJ0eURpZENoYW5nZSxsPUVtYmVyLm1ldGEsaD1FbWJlci5kZWZpbmVQ
        cm9wZXJ0eTtFbWJlci5PYmplY3RQcm94eT1FbWJlci5PYmplY3QuZXh0ZW5k
        KHtjb250ZW50Om51bGwsX2NvbnRlbnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2
        ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7fSksaXNUcnV0aHk6RW1iZXIuY29t
        cHV0ZWQuYm9vbCgiY29udGVudCIpLF9kZWJ1Z0NvbnRhaW5lcktleTpudWxs
        LHdpbGxXYXRjaFByb3BlcnR5OmZ1bmN0aW9uKHIpe3ZhciBuPSJjb250ZW50
        LiIrcjtpKHRoaXMsbixudWxsLGUpLG8odGhpcyxuLG51bGwsdCl9LGRpZFVu
        d2F0Y2hQcm9wZXJ0eTpmdW5jdGlvbihyKXt2YXIgbj0iY29udGVudC4iK3I7
        YSh0aGlzLG4sbnVsbCxlKSxzKHRoaXMsbixudWxsLHQpfSx1bmtub3duUHJv
        cGVydHk6ZnVuY3Rpb24oZSl7dmFyIHQ9cih0aGlzLCJjb250ZW50Iik7cmV0
        dXJuIHQ/cih0LGUpOnZvaWQgMH0sc2V0VW5rbm93blByb3BlcnR5OmZ1bmN0
        aW9uKGUsdCl7dmFyIGk9bCh0aGlzKTtpZihpLnByb3RvPT09dGhpcylyZXR1
        cm4gaCh0aGlzLGUsbnVsbCx0KSx0O3ZhciBvPXIodGhpcywiY29udGVudCIp
        O3JldHVybiBuKG8sZSx0KX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUo
        ZSx0LHIsaSxvKXt2YXIgYSxzPXIuX29iamVjdHM7Zm9yKHN8fChzPXIuX29i
        amVjdHM9e30pOy0tbz49aTspe3ZhciB1PWUub2JqZWN0QXQobyk7dSYmKEVt
        YmVyLmFkZEJlZm9yZU9ic2VydmVyKHUsdCxyLCJjb250ZW50S2V5V2lsbENo
        YW5nZSIpLEVtYmVyLmFkZE9ic2VydmVyKHUsdCxyLCJjb250ZW50S2V5RGlk
        Q2hhbmdlIiksYT1uKHUpLHNbYV18fChzW2FdPVtdKSxzW2FdLnB1c2gobykp
        fX1mdW5jdGlvbiB0KGUsdCxyLGksYSl7dmFyIHM9ci5fb2JqZWN0cztzfHwo
        cz1yLl9vYmplY3RzPXt9KTtmb3IodmFyIHUsYzstLWE+PWk7KXt2YXIgbD1l
        Lm9iamVjdEF0KGEpO2wmJihFbWJlci5yZW1vdmVCZWZvcmVPYnNlcnZlcihs
        LHQsciwiY29udGVudEtleVdpbGxDaGFuZ2UiKSxFbWJlci5yZW1vdmVPYnNl
        cnZlcihsLHQsciwiY29udGVudEtleURpZENoYW5nZSIpLGM9bihsKSx1PXNb
        Y10sdVtvLmNhbGwodSxhKV09bnVsbCl9fXZhciByPShFbWJlci5zZXQsRW1i
        ZXIuZ2V0KSxuPUVtYmVyLmd1aWRGb3IsaT1FbWJlci5FbnVtZXJhYmxlVXRp
        bHMuZm9yRWFjaCxvPUVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2YsYT1F
        bWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkFycmF5LHtpbml0OmZ1bmN0aW9u
        KGUsdCxyKXt0aGlzLl9zdXBlcigpLHRoaXMuX2tleU5hbWU9dCx0aGlzLl9v
        d25lcj1yLHRoaXMuX2NvbnRlbnQ9ZX0sb2JqZWN0QXQ6ZnVuY3Rpb24oZSl7
        dmFyIHQ9dGhpcy5fY29udGVudC5vYmplY3RBdChlKTtyZXR1cm4gdCYmcih0
        LHRoaXMuX2tleU5hbWUpfSxsZW5ndGg6RW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oKXt2YXIgZT10aGlzLl9jb250ZW50O3JldHVybiBlP3IoZSwibGVuZ3Ro
        Iik6MH0pfSkscz0vXi4rOihiZWZvcmV8Y2hhbmdlKSQvO0VtYmVyLkVhY2hQ
        cm94eT1FbWJlci5PYmplY3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3Ro
        aXMuX3N1cGVyKCksdGhpcy5fY29udGVudD1lLGUuYWRkQXJyYXlPYnNlcnZl
        cih0aGlzKSxpKEVtYmVyLndhdGNoZWRFdmVudHModGhpcyksZnVuY3Rpb24o
        ZSl7dGhpcy5kaWRBZGRMaXN0ZW5lcihlKX0sdGhpcyl9LHVua25vd25Qcm9w
        ZXJ0eTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD1uZXcgYSh0aGlzLl9j
        b250ZW50LGUsdGhpcyksRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcyxlLG51
        bGwsdCksdGhpcy5iZWdpbk9ic2VydmluZ0NvbnRlbnRLZXkoZSksdH0sYXJy
        YXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUscixuKXt2YXIgaSxvLGE9dGhpcy5f
        a2V5cztvPW4+MD9yK246LTEsRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXMo
        dGhpcyk7Zm9yKGkgaW4gYSlhLmhhc093blByb3BlcnR5KGkpJiYobz4wJiZ0
        KGUsaSx0aGlzLHIsbyksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMs
        aSkpO0VtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLl9jb250ZW50LCJA
        ZWFjaCIpLEVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcyh0aGlzKX0sYXJyYXlE
        aWRDaGFuZ2U6ZnVuY3Rpb24odCxyLG4saSl7dmFyIG8sYT10aGlzLl9rZXlz
        O289aT4wP3IraTotMSxFbWJlci5jaGFuZ2VQcm9wZXJ0aWVzKGZ1bmN0aW9u
        KCl7Zm9yKHZhciBuIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShuKSYmKG8+MCYm
        ZSh0LG4sdGhpcyxyLG8pLEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMs
        bikpO0VtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMuX2NvbnRlbnQsIkBl
        YWNoIil9LHRoaXMpfSxkaWRBZGRMaXN0ZW5lcjpmdW5jdGlvbihlKXtzLnRl
        c3QoZSkmJnRoaXMuYmVnaW5PYnNlcnZpbmdDb250ZW50S2V5KGUuc2xpY2Uo
        MCwtNykpfSxkaWRSZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihlKXtzLnRlc3Qo
        ZSkmJnRoaXMuc3RvcE9ic2VydmluZ0NvbnRlbnRLZXkoZS5zbGljZSgwLC03
        KSl9LGJlZ2luT2JzZXJ2aW5nQ29udGVudEtleTpmdW5jdGlvbih0KXt2YXIg
        bj10aGlzLl9rZXlzO2lmKG58fChuPXRoaXMuX2tleXM9e30pLG5bdF0pblt0
        XSsrO2Vsc2V7blt0XT0xO3ZhciBpPXRoaXMuX2NvbnRlbnQsbz1yKGksImxl
        bmd0aCIpO2UoaSx0LHRoaXMsMCxvKX19LHN0b3BPYnNlcnZpbmdDb250ZW50
        S2V5OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuX2tleXM7aWYobiYmbltlXT4w
        JiYtLW5bZV08PTApe3ZhciBpPXRoaXMuX2NvbnRlbnQsbz1yKGksImxlbmd0
        aCIpO3QoaSxlLHRoaXMsMCxvKX19LGNvbnRlbnRLZXlXaWxsQ2hhbmdlOmZ1
        bmN0aW9uKGUsdCl7RW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsdCl9
        LGNvbnRlbnRLZXlEaWRDaGFuZ2U6ZnVuY3Rpb24oZSx0KXtFbWJlci5wcm9w
        ZXJ0eURpZENoYW5nZSh0aGlzLHQpfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9
        RW1iZXIuZ2V0LHQ9KEVtYmVyLnNldCxFbWJlci5FbnVtZXJhYmxlVXRpbHMu
        X3JlcGxhY2UpLHI9RW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLk11dGFibGVB
        cnJheSxFbWJlci5PYnNlcnZhYmxlLEVtYmVyLkNvcHlhYmxlLHtnZXQ6ZnVu
        Y3Rpb24oZSl7cmV0dXJuImxlbmd0aCI9PT1lP3RoaXMubGVuZ3RoOiJudW1i
        ZXIiPT10eXBlb2YgZT90aGlzW2VdOnRoaXMuX3N1cGVyKGUpfSxvYmplY3RB
        dDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tlXX0scmVwbGFjZTpmdW5jdGlv
        bihyLG4saSl7aWYodGhpcy5pc0Zyb3plbil0aHJvdyBFbWJlci5GUk9aRU5f
        RVJST1I7dmFyIG89aT9lKGksImxlbmd0aCIpOjA7cmV0dXJuIHRoaXMuYXJy
        YXlDb250ZW50V2lsbENoYW5nZShyLG4sbyksMD09PW8/dGhpcy5zcGxpY2Uo
        cixuKTp0KHRoaXMscixuLGkpLHRoaXMuYXJyYXlDb250ZW50RGlkQ2hhbmdl
        KHIsbixvKSx0aGlzfSx1bmtub3duUHJvcGVydHk6ZnVuY3Rpb24oZSx0KXt2
        YXIgcjtyZXR1cm4gdm9pZCAwIT09dCYmdm9pZCAwPT09ciYmKHI9dGhpc1tl
        XT10KSxyfSxpbmRleE9mOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbj10aGlzLmxl
        bmd0aDtmb3IodD12b2lkIDA9PT10PzA6MD50P01hdGguY2VpbCh0KTpNYXRo
        LmZsb29yKHQpLDA+dCYmKHQrPW4pLHI9dDtuPnI7cisrKWlmKHRoaXNbcl09
        PT1lKXJldHVybiByO3JldHVybi0xfSxsYXN0SW5kZXhPZjpmdW5jdGlvbihl
        LHQpe3ZhciByLG49dGhpcy5sZW5ndGg7Zm9yKHQ9dm9pZCAwPT09dD9uLTE6
        MD50P01hdGguY2VpbCh0KTpNYXRoLmZsb29yKHQpLDA+dCYmKHQrPW4pLHI9
        dDtyPj0wO3ItLSlpZih0aGlzW3JdPT09ZSlyZXR1cm4gcjtyZXR1cm4tMX0s
        Y29weTpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLm1hcChmdW5jdGlvbihl
        KXtyZXR1cm4gRW1iZXIuY29weShlLCEwKX0pOnRoaXMuc2xpY2UoKX19KSxu
        PVsibGVuZ3RoIl07RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2goci5r
        ZXlzKCksZnVuY3Rpb24oZSl7QXJyYXkucHJvdG90eXBlW2VdJiZuLnB1c2go
        ZSl9KSxuLmxlbmd0aD4wJiYocj1yLndpdGhvdXQuYXBwbHkocixuKSksRW1i
        ZXIuTmF0aXZlQXJyYXk9cixFbWJlci5BPWZ1bmN0aW9uKGUpe3JldHVybiB2
        b2lkIDA9PT1lJiYoZT1bXSksRW1iZXIuQXJyYXkuZGV0ZWN0KGUpP2U6RW1i
        ZXIuTmF0aXZlQXJyYXkuYXBwbHkoZSl9LEVtYmVyLk5hdGl2ZUFycmF5LmFj
        dGl2YXRlPWZ1bmN0aW9uKCl7ci5hcHBseShBcnJheS5wcm90b3R5cGUpLEVt
        YmVyLkE9ZnVuY3Rpb24oZSl7cmV0dXJuIGV8fFtdfX0sKEVtYmVyLkVYVEVO
        RF9QUk9UT1RZUEVTPT09ITB8fEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkFy
        cmF5KSYmRW1iZXIuTmF0aXZlQXJyYXkuYWN0aXZhdGUoKX0oKSxmdW5jdGlv
        bigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldCxyPUVtYmVyLmd1aWRG
        b3Isbj1FbWJlci5pc05vbmUsaT1FbWJlci5TdHJpbmcuZm10O0VtYmVyLlNl
        dD1FbWJlci5Db3JlT2JqZWN0LmV4dGVuZChFbWJlci5NdXRhYmxlRW51bWVy
        YWJsZSxFbWJlci5Db3B5YWJsZSxFbWJlci5GcmVlemFibGUse2xlbmd0aDow
        LGNsZWFyOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0Zyb3plbil0aHJvdyBuZXcg
        RW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VSUk9SKTt2YXIgbj1lKHRoaXMs
        Imxlbmd0aCIpO2lmKDA9PT1uKXJldHVybiB0aGlzO3ZhciBpO3RoaXMuZW51
        bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlKG4sMCksRW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMsImZpcnN0T2JqZWN0IiksRW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMsImxhc3RPYmplY3QiKTtmb3IodmFyIG89MDtuPm87
        bysrKWk9cih0aGlzW29dKSxkZWxldGUgdGhpc1tpXSxkZWxldGUgdGhpc1tv
        XTtyZXR1cm4gdCh0aGlzLCJsZW5ndGgiLDApLEVtYmVyLnByb3BlcnR5RGlk
        Q2hhbmdlKHRoaXMsImZpcnN0T2JqZWN0IiksRW1iZXIucHJvcGVydHlEaWRD
        aGFuZ2UodGhpcywibGFzdE9iamVjdCIpLHRoaXMuZW51bWVyYWJsZUNvbnRl
        bnREaWRDaGFuZ2UobiwwKSx0aGlzfSxpc0VxdWFsOmZ1bmN0aW9uKHQpe2lm
        KCFFbWJlci5FbnVtZXJhYmxlLmRldGVjdCh0KSlyZXR1cm4hMTt2YXIgcj1l
        KHRoaXMsImxlbmd0aCIpO2lmKGUodCwibGVuZ3RoIikhPT1yKXJldHVybiEx
        O2Zvcig7LS1yPj0wOylpZighdC5jb250YWlucyh0aGlzW3JdKSlyZXR1cm4h
        MTtyZXR1cm4hMH0sYWRkOkVtYmVyLmFsaWFzTWV0aG9kKCJhZGRPYmplY3Qi
        KSxyZW1vdmU6RW1iZXIuYWxpYXNNZXRob2QoInJlbW92ZU9iamVjdCIpLHBv
        cDpmdW5jdGlvbigpe2lmKGUodGhpcywiaXNGcm96ZW4iKSl0aHJvdyBuZXcg
        RW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VSUk9SKTt2YXIgdD10aGlzLmxl
        bmd0aD4wP3RoaXNbdGhpcy5sZW5ndGgtMV06bnVsbDtyZXR1cm4gdGhpcy5y
        ZW1vdmUodCksdH0scHVzaDpFbWJlci5hbGlhc01ldGhvZCgiYWRkT2JqZWN0
        Iiksc2hpZnQ6RW1iZXIuYWxpYXNNZXRob2QoInBvcCIpLHVuc2hpZnQ6RW1i
        ZXIuYWxpYXNNZXRob2QoInB1c2giKSxhZGRFYWNoOkVtYmVyLmFsaWFzTWV0
        aG9kKCJhZGRPYmplY3RzIikscmVtb3ZlRWFjaDpFbWJlci5hbGlhc01ldGhv
        ZCgicmVtb3ZlT2JqZWN0cyIpLGluaXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3Vw
        ZXIoKSxlJiZ0aGlzLmFkZE9iamVjdHMoZSl9LG5leHRPYmplY3Q6ZnVuY3Rp
        b24oZSl7cmV0dXJuIHRoaXNbZV19LGZpcnN0T2JqZWN0OkVtYmVyLmNvbXB1
        dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPjA/dGhpc1swXTp2
        b2lkIDB9KSxsYXN0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        cmV0dXJuIHRoaXMubGVuZ3RoPjA/dGhpc1t0aGlzLmxlbmd0aC0xXTp2b2lk
        IDB9KSxhZGRPYmplY3Q6ZnVuY3Rpb24oaSl7aWYoZSh0aGlzLCJpc0Zyb3pl
        biIpKXRocm93IG5ldyBFbWJlci5FcnJvcihFbWJlci5GUk9aRU5fRVJST1Ip
        O2lmKG4oaSkpcmV0dXJuIHRoaXM7dmFyIG8sYT1yKGkpLHM9dGhpc1thXSx1
        PWUodGhpcywibGVuZ3RoIik7cmV0dXJuIHM+PTAmJnU+cyYmdGhpc1tzXT09
        PWk/dGhpczoobz1baV0sdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFu
        Z2UobnVsbCxvKSxFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGFz
        dE9iamVjdCIpLHU9ZSh0aGlzLCJsZW5ndGgiKSx0aGlzW2FdPXUsdGhpc1t1
        XT1pLHQodGhpcywibGVuZ3RoIix1KzEpLEVtYmVyLnByb3BlcnR5RGlkQ2hh
        bmdlKHRoaXMsImxhc3RPYmplY3QiKSx0aGlzLmVudW1lcmFibGVDb250ZW50
        RGlkQ2hhbmdlKG51bGwsbyksdGhpcyl9LHJlbW92ZU9iamVjdDpmdW5jdGlv
        bihpKXtpZihlKHRoaXMsImlzRnJvemVuIikpdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKEVtYmVyLkZST1pFTl9FUlJPUik7aWYobihpKSlyZXR1cm4gdGhpczt2
        YXIgbyxhLHM9cihpKSx1PXRoaXNbc10sYz1lKHRoaXMsImxlbmd0aCIpLGw9
        MD09PXUsaD11PT09Yy0xO3JldHVybiB1Pj0wJiZjPnUmJnRoaXNbdV09PT1p
        JiYoYT1baV0sdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UoYSxu
        dWxsKSxsJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywiZmlyc3RP
        YmplY3QiKSxoJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGFz
        dE9iamVjdCIpLGMtMT51JiYobz10aGlzW2MtMV0sdGhpc1t1XT1vLHRoaXNb
        cihvKV09dSksZGVsZXRlIHRoaXNbc10sZGVsZXRlIHRoaXNbYy0xXSx0KHRo
        aXMsImxlbmd0aCIsYy0xKSxsJiZFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLCJmaXJzdE9iamVjdCIpLGgmJkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdl
        KHRoaXMsImxhc3RPYmplY3QiKSx0aGlzLmVudW1lcmFibGVDb250ZW50RGlk
        Q2hhbmdlKGEsbnVsbCkpLHRoaXN9LGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3Jl
        dHVybiB0aGlzW3IoZSldPj0wfSxjb3B5OmZ1bmN0aW9uKCl7dmFyIG49dGhp
        cy5jb25zdHJ1Y3RvcixpPW5ldyBuLG89ZSh0aGlzLCJsZW5ndGgiKTtmb3Io
        dChpLCJsZW5ndGgiLG8pOy0tbz49MDspaVtvXT10aGlzW29dLGlbcih0aGlz
        W29dKV09bztyZXR1cm4gaX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZSx0
        PXRoaXMubGVuZ3RoLHI9W107Zm9yKGU9MDt0PmU7ZSsrKXJbZV09dGhpc1tl
        XTtyZXR1cm4gaSgiRW1iZXIuU2V0PCVAPiIsW3Iuam9pbigiLCIpXSl9fSl9
        KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5EZWZlcnJlZE1peGluO0VtYmVy
        LmdldDt2YXIgdD1FbWJlci5PYmplY3QuZXh0ZW5kKGUpO3QucmVvcGVuQ2xh
        c3Moe3Byb21pc2U6ZnVuY3Rpb24oZSxyKXt2YXIgbj10LmNyZWF0ZSgpO3Jl
        dHVybiBlLmNhbGwocixuKSxufX0pLEVtYmVyLkRlZmVycmVkPXR9KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5BcnJheVBvbHlmaWxscy5mb3JFYWNoLHQ9
        RW1iZXIuRU5WLkVNQkVSX0xPQURfSE9PS1N8fHt9LHI9e307RW1iZXIub25M
        b2FkPWZ1bmN0aW9uKGUsbil7dmFyIGk7dFtlXT10W2VdfHxFbWJlci5BKCks
        dFtlXS5wdXNoT2JqZWN0KG4pLChpPXJbZV0pJiZuKGkpfSxFbWJlci5ydW5M
        b2FkSG9va3M9ZnVuY3Rpb24obixpKXtyW25dPWksdFtuXSYmZS5jYWxsKHRb
        bl0sZnVuY3Rpb24oZSl7ZShpKX0pfX0oKSxmdW5jdGlvbigpe0VtYmVyLmdl
        dCxFbWJlci5Db250cm9sbGVyTWl4aW49RW1iZXIuTWl4aW4uY3JlYXRlKEVt
        YmVyLkFjdGlvbkhhbmRsZXIse2lzQ29udHJvbGxlcjohMCx0YXJnZXQ6bnVs
        bCxjb250YWluZXI6bnVsbCxwYXJlbnRDb250cm9sbGVyOm51bGwsc3RvcmU6
        bnVsbCxtb2RlbDpFbWJlci5jb21wdXRlZC5hbGlhcygiY29udGVudCIpLGRl
        cHJlY2F0ZWRTZW5kSGFuZGxlczpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXNb
        ZV19LGRlcHJlY2F0ZWRTZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLnNsaWNl
        LmNhbGwoYXJndW1lbnRzLDEpO3RoaXNbZV0uYXBwbHkodGhpcyx0KX19KSxF
        bWJlci5Db250cm9sbGVyPUVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuQ29u
        dHJvbGxlck1peGluKX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0
        PShFbWJlci5zZXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gpO0Vt
        YmVyLlNvcnRhYmxlTWl4aW49RW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLk11
        dGFibGVFbnVtZXJhYmxlLHtzb3J0UHJvcGVydGllczpudWxsLHNvcnRBc2Nl
        bmRpbmc6ITAsc29ydEZ1bmN0aW9uOkVtYmVyLmNvbXBhcmUsb3JkZXJCeTpm
        dW5jdGlvbihyLG4pe3ZhciBpPTAsbz1lKHRoaXMsInNvcnRQcm9wZXJ0aWVz
        IiksYT1lKHRoaXMsInNvcnRBc2NlbmRpbmciKSxzPWUodGhpcywic29ydEZ1
        bmN0aW9uIik7cmV0dXJuIHQobyxmdW5jdGlvbih0KXswPT09aSYmKGk9cyhl
        KHIsdCksZShuLHQpKSwwPT09aXx8YXx8KGk9LTEqaSkpfSksaX0sZGVzdHJv
        eTpmdW5jdGlvbigpe3ZhciByPWUodGhpcywiY29udGVudCIpLG49ZSh0aGlz
        LCJzb3J0UHJvcGVydGllcyIpO3JldHVybiByJiZuJiZ0KHIsZnVuY3Rpb24o
        ZSl7dChuLGZ1bmN0aW9uKHQpe0VtYmVyLnJlbW92ZU9ic2VydmVyKGUsdCx0
        aGlzLCJjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZSIpfSx0aGlz
        KX0sdGhpcyksdGhpcy5fc3VwZXIoKX0saXNTb3J0ZWQ6RW1iZXIuY29tcHV0
        ZWQuYm9vbCgic29ydFByb3BlcnRpZXMiKSxhcnJhbmdlZENvbnRlbnQ6RW1i
        ZXIuY29tcHV0ZWQoImNvbnRlbnQiLCJzb3J0UHJvcGVydGllcy5AZWFjaCIs
        ZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsImNvbnRlbnQiKSxuPWUodGhpcywi
        aXNTb3J0ZWQiKSxpPWUodGhpcywic29ydFByb3BlcnRpZXMiKSxvPXRoaXM7
        cmV0dXJuIHImJm4/KHI9ci5zbGljZSgpLHIuc29ydChmdW5jdGlvbihlLHQp
        e3JldHVybiBvLm9yZGVyQnkoZSx0KX0pLHQocixmdW5jdGlvbihlKXt0KGks
        ZnVuY3Rpb24odCl7RW1iZXIuYWRkT2JzZXJ2ZXIoZSx0LHRoaXMsImNvbnRl
        bnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdlIil9LHRoaXMpfSx0aGlzKSxF
        bWJlci5BKHIpKTpyfSksX2NvbnRlbnRXaWxsQ2hhbmdlOkVtYmVyLmJlZm9y
        ZU9ic2VydmVyKCJjb250ZW50IixmdW5jdGlvbigpe3ZhciByPWUodGhpcywi
        Y29udGVudCIpLG49ZSh0aGlzLCJzb3J0UHJvcGVydGllcyIpO3ImJm4mJnQo
        cixmdW5jdGlvbihlKXt0KG4sZnVuY3Rpb24odCl7RW1iZXIucmVtb3ZlT2Jz
        ZXJ2ZXIoZSx0LHRoaXMsImNvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hh
        bmdlIil9LHRoaXMpfSx0aGlzKSx0aGlzLl9zdXBlcigpfSksc29ydEFzY2Vu
        ZGluZ1dpbGxDaGFuZ2U6RW1iZXIuYmVmb3JlT2JzZXJ2ZXIoInNvcnRBc2Nl
        bmRpbmciLGZ1bmN0aW9uKCl7dGhpcy5fbGFzdFNvcnRBc2NlbmRpbmc9ZSh0
        aGlzLCJzb3J0QXNjZW5kaW5nIil9KSxzb3J0QXNjZW5kaW5nRGlkQ2hhbmdl
        OkVtYmVyLm9ic2VydmVyKCJzb3J0QXNjZW5kaW5nIixmdW5jdGlvbigpe2lm
        KGUodGhpcywic29ydEFzY2VuZGluZyIpIT09dGhpcy5fbGFzdFNvcnRBc2Nl
        bmRpbmcpe3ZhciB0PWUodGhpcywiYXJyYW5nZWRDb250ZW50Iik7dC5yZXZl
        cnNlT2JqZWN0cygpfX0pLGNvbnRlbnRBcnJheVdpbGxDaGFuZ2U6ZnVuY3Rp
        b24ocixuLGksbyl7dmFyIGE9ZSh0aGlzLCJpc1NvcnRlZCIpO2lmKGEpe3Zh
        ciBzPWUodGhpcywiYXJyYW5nZWRDb250ZW50IiksdT1yLnNsaWNlKG4sbitp
        KSxjPWUodGhpcywic29ydFByb3BlcnRpZXMiKTt0KHUsZnVuY3Rpb24oZSl7
        cy5yZW1vdmVPYmplY3QoZSksdChjLGZ1bmN0aW9uKHQpe0VtYmVyLnJlbW92
        ZU9ic2VydmVyKGUsdCx0aGlzLCJjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURp
        ZENoYW5nZSIpfSx0aGlzKX0sdGhpcyl9cmV0dXJuIHRoaXMuX3N1cGVyKHIs
        bixpLG8pfSxjb250ZW50QXJyYXlEaWRDaGFuZ2U6ZnVuY3Rpb24ocixuLGks
        byl7dmFyIGE9ZSh0aGlzLCJpc1NvcnRlZCIpLHM9ZSh0aGlzLCJzb3J0UHJv
        cGVydGllcyIpO2lmKGEpe3ZhciB1PXIuc2xpY2UobixuK28pO3QodSxmdW5j
        dGlvbihlKXt0aGlzLmluc2VydEl0ZW1Tb3J0ZWQoZSksdChzLGZ1bmN0aW9u
        KHQpe0VtYmVyLmFkZE9ic2VydmVyKGUsdCx0aGlzLCJjb250ZW50SXRlbVNv
        cnRQcm9wZXJ0eURpZENoYW5nZSIpfSx0aGlzKX0sdGhpcyl9cmV0dXJuIHRo
        aXMuX3N1cGVyKHIsbixpLG8pfSxpbnNlcnRJdGVtU29ydGVkOmZ1bmN0aW9u
        KHQpe3ZhciByPWUodGhpcywiYXJyYW5nZWRDb250ZW50Iiksbj1lKHIsImxl
        bmd0aCIpLGk9dGhpcy5fYmluYXJ5U2VhcmNoKHQsMCxuKTtyLmluc2VydEF0
        KGksdCl9LGNvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdlOmZ1bmN0
        aW9uKHQpe3ZhciByPWUodGhpcywiYXJyYW5nZWRDb250ZW50Iiksbj1yLmlu
        ZGV4T2YodCksaT1yLm9iamVjdEF0KG4tMSksbz1yLm9iamVjdEF0KG4rMSks
        YT1pJiZ0aGlzLm9yZGVyQnkodCxpKSxzPW8mJnRoaXMub3JkZXJCeSh0LG8p
        OygwPmF8fHM+MCkmJihyLnJlbW92ZU9iamVjdCh0KSx0aGlzLmluc2VydEl0
        ZW1Tb3J0ZWQodCkpfSxfYmluYXJ5U2VhcmNoOmZ1bmN0aW9uKHQscixuKXt2
        YXIgaSxvLGEscztyZXR1cm4gcj09PW4/cjoocz1lKHRoaXMsImFycmFuZ2Vk
        Q29udGVudCIpLGk9citNYXRoLmZsb29yKChuLXIpLzIpLG89cy5vYmplY3RB
        dChpKSxhPXRoaXMub3JkZXJCeShvLHQpLDA+YT90aGlzLl9iaW5hcnlTZWFy
        Y2godCxpKzEsbik6YT4wP3RoaXMuX2JpbmFyeVNlYXJjaCh0LHIsaSk6aSl9
        fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD0oRW1iZXIuc2V0
        LEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoKSxyPUVtYmVyLkVudW1l
        cmFibGVVdGlscy5yZXBsYWNlO0VtYmVyLkFycmF5Q29udHJvbGxlcj1FbWJl
        ci5BcnJheVByb3h5LmV4dGVuZChFbWJlci5Db250cm9sbGVyTWl4aW4sRW1i
        ZXIuU29ydGFibGVNaXhpbix7aXRlbUNvbnRyb2xsZXI6bnVsbCxsb29rdXBJ
        dGVtQ29udHJvbGxlcjpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsIml0ZW1D
        b250cm9sbGVyIil9LG9iamVjdEF0Q29udGVudDpmdW5jdGlvbih0KXt2YXIg
        cj1lKHRoaXMsImxlbmd0aCIpLG49ZSh0aGlzLCJhcnJhbmdlZENvbnRlbnQi
        KSxpPW4mJm4ub2JqZWN0QXQodCk7aWYodD49MCYmcj50KXt2YXIgbz10aGlz
        Lmxvb2t1cEl0ZW1Db250cm9sbGVyKGkpO2lmKG8pcmV0dXJuIHRoaXMuY29u
        dHJvbGxlckF0KHQsaSxvKX1yZXR1cm4gaX0sYXJyYW5nZWRDb250ZW50RGlk
        Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLl9yZXNldFN1
        YkNvbnRyb2xsZXJzKCl9LGFycmF5Q29udGVudERpZENoYW5nZTpmdW5jdGlv
        bihuLGksbyl7dmFyIGE9ZSh0aGlzLCJfc3ViQ29udHJvbGxlcnMiKSxzPWEu
        c2xpY2UobixuK2kpO3QocyxmdW5jdGlvbihlKXtlJiZlLmRlc3Ryb3koKX0p
        LHIoYSxuLGksbmV3IEFycmF5KG8pKSx0aGlzLl9zdXBlcihuLGksbyl9LGlu
        aXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMuc2V0KCJfc3ViQ29u
        dHJvbGxlcnMiLEVtYmVyLkEoKSl9LGNvbnRlbnQ6RW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgpfSksY29udHJvbGxlckF0OmZ1
        bmN0aW9uKHQscixuKXt2YXIgaSxvPWUodGhpcywiY29udGFpbmVyIiksYT1l
        KHRoaXMsIl9zdWJDb250cm9sbGVycyIpLHM9YVt0XTtpZihzKXJldHVybiBz
        O2lmKGk9ImNvbnRyb2xsZXI6IituLCFvLmhhcyhpKSl0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoJ0NvdWxkIG5vdCByZXNvbHZlIGl0ZW1Db250cm9sbGVyOiAi
        JytuKyciJyk7cmV0dXJuIHM9by5sb29rdXBGYWN0b3J5KGkpLmNyZWF0ZSh7
        dGFyZ2V0OnRoaXMscGFyZW50Q29udHJvbGxlcjplKHRoaXMsInBhcmVudENv
        bnRyb2xsZXIiKXx8dGhpcyxjb250ZW50OnJ9KSxhW3RdPXMsc30sX3N1YkNv
        bnRyb2xsZXJzOm51bGwsX3Jlc2V0U3ViQ29udHJvbGxlcnM6ZnVuY3Rpb24o
        KXt2YXIgcj1lKHRoaXMsIl9zdWJDb250cm9sbGVycyIpO3ImJnQocixmdW5j
        dGlvbihlKXtlJiZlLmRlc3Ryb3koKX0pLHRoaXMuc2V0KCJfc3ViQ29udHJv
        bGxlcnMiLEVtYmVyLkEoKSl9fSl9KCksZnVuY3Rpb24oKXtFbWJlci5PYmpl
        Y3RDb250cm9sbGVyPUVtYmVyLk9iamVjdFByb3h5LmV4dGVuZChFbWJlci5D
        b250cm9sbGVyTWl4aW4pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5qUXVl
        cnl8fEVtYmVyLmltcG9ydHMmJkVtYmVyLmltcG9ydHMualF1ZXJ5O2V8fCJm
        dW5jdGlvbiIhPXR5cGVvZiByZXF1aXJlfHwoZT1yZXF1aXJlKCJqcXVlcnki
        KSksRW1iZXIuJD1lfSgpLGZ1bmN0aW9uKCl7aWYoRW1iZXIuJCl7dmFyIGU9
        RW1iZXIuU3RyaW5nLncoImRyYWdzdGFydCBkcmFnIGRyYWdlbnRlciBkcmFn
        bGVhdmUgZHJhZ292ZXIgZHJvcCBkcmFnZW5kIik7RW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmZvckVhY2goZSxmdW5jdGlvbihlKXtFbWJlci4kLmV2ZW50LmZp
        eEhvb2tzW2VdPXtwcm9wczpbImRhdGFUcmFuc2ZlciJdfX0pfX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ZS5zaGlmdEtleXx8ZS5tZXRh
        S2V5fHxlLmFsdEtleXx8ZS5jdHJsS2V5LHI9ZS53aGljaD4xO3JldHVybiF0
        JiYhcn12YXIgdD10aGlzLmRvY3VtZW50JiZmdW5jdGlvbigpe3ZhciBlPWRv
        Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmlubmVySFRN
        TD0iPGRpdj48L2Rpdj4iLGUuZmlyc3RDaGlsZC5pbm5lckhUTUw9IjxzY3Jp
        cHQ+PC9zY3JpcHQ+IiwiIj09PWUuZmlyc3RDaGlsZC5pbm5lckhUTUx9KCks
        cj10aGlzLmRvY3VtZW50JiZmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNy
        ZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmlubmVySFRNTD0iVGVzdDog
        PHNjcmlwdCB0eXBlPSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PlZh
        bHVlIiwiVGVzdDoiPT09ZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSYmIiBW
        YWx1ZSI9PT1lLmNoaWxkTm9kZXNbMl0ubm9kZVZhbHVlfSgpLG49ZnVuY3Rp
        b24oZSx0KXtpZihlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXQpcmV0dXJuIGU7
        dmFyIHIsaSxvLGE9ZS5jaGlsZE5vZGVzLmxlbmd0aDtmb3Iocj0wO2E+cjty
        KyspaWYoaT1lLmNoaWxkTm9kZXNbcl0sbz0xPT09aS5ub2RlVHlwZSYmbihp
        LHQpKXJldHVybiBvfSxpPWZ1bmN0aW9uKGUsaSl7dCYmKGk9IiZzaHk7Iitp
        KTt2YXIgbz1bXTtpZihyJiYoaT1pLnJlcGxhY2UoLyhccyspKDxzY3JpcHQg
        aWQ9JyhbXiddKyknKS9nLGZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiBvLnB1
        c2goW24sdF0pLHJ9KSksZS5pbm5lckhUTUw9aSxvLmxlbmd0aD4wKXt2YXIg
        YSxzPW8ubGVuZ3RoO2ZvcihhPTA7cz5hO2ErKyl7dmFyIHU9bihlLG9bYV1b
        MF0pLGM9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob1thXVsxXSk7dS5wYXJl
        bnROb2RlLmluc2VydEJlZm9yZShjLHUpfX1pZih0KXtmb3IodmFyIGw9ZS5m
        aXJzdENoaWxkOzE9PT1sLm5vZGVUeXBlJiYhbC5ub2RlTmFtZTspbD1sLmZp
        cnN0Q2hpbGQ7Mz09PWwubm9kZVR5cGUmJiLCrSI9PT1sLm5vZGVWYWx1ZS5j
        aGFyQXQoMCkmJihsLm5vZGVWYWx1ZT1sLm5vZGVWYWx1ZS5zbGljZSgxKSl9
        fSxvPXt9LGE9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09b1tlXSlyZXR1cm4g
        b1tlXTt2YXIgdD0hMDtpZigic2VsZWN0Ij09PWUudG9Mb3dlckNhc2UoKSl7
        dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7aShyLCc8
        b3B0aW9uIHZhbHVlPSJ0ZXN0Ij5UZXN0PC9vcHRpb24+JyksdD0xPT09ci5v
        cHRpb25zLmxlbmd0aH1yZXR1cm4gb1tlXT10LHR9LHM9ZnVuY3Rpb24oZSx0
        KXt2YXIgcj1lLnRhZ05hbWU7aWYoYShyKSlpKGUsdCk7ZWxzZXt2YXIgbj1l
        Lm91dGVySFRNTHx8KG5ldyBYTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0
        cmluZyhlKSxvPW4ubWF0Y2gobmV3IFJlZ0V4cCgiPCIrcisiKFtePl0qKT4i
        LCJpIikpWzBdLHM9IjwvIityKyI+Iix1PWRvY3VtZW50LmNyZWF0ZUVsZW1l
        bnQoImRpdiIpO2ZvcihpKHUsbyt0K3MpLGU9dS5maXJzdENoaWxkO2UudGFn
        TmFtZSE9PXI7KWU9ZS5uZXh0U2libGluZ31yZXR1cm4gZX07RW1iZXIuVmll
        d1V0aWxzPXtzZXRJbm5lckhUTUw6cyxpc1NpbXBsZUNsaWNrOmV9fSgpLGZ1
        bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZT9uLnRlc3QoZSk/ZS5y
        ZXBsYWNlKGksIiIpOmU6ZX1mdW5jdGlvbiB0KGUpe3ZhciB0PXsiPCI6IiZs
        dDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiN4Mjc7IiwiYCI6
        IiYjeDYwOyJ9LHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV18fCImYW1wOyJ9
        LG49ZS50b1N0cmluZygpO3JldHVybiBhLnRlc3Qobik/bi5yZXBsYWNlKG8s
        cik6bn1FbWJlci5nZXQsRW1iZXIuc2V0O3ZhciByPWZ1bmN0aW9uKCl7dGhp
        cy5zZWVuPXt9LHRoaXMubGlzdD1bXX07ci5wcm90b3R5cGU9e2FkZDpmdW5j
        dGlvbihlKXtlIGluIHRoaXMuc2Vlbnx8KHRoaXMuc2VlbltlXT0hMCx0aGlz
        Lmxpc3QucHVzaChlKSl9LHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMu
        bGlzdC5qb2luKCIgIil9fTt2YXIgbj0vW15hLXpBLVowLTlcLV0vLGk9L1te
        YS16QS1aMC05XC1dL2csbz0vJig/IVx3KzspfFs8PiInYF0vZyxhPS9bJjw+
        IidgXS8scz1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1l
        bnQoImRpdiIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTty
        ZXR1cm4gdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJmb28iKSxlLmFwcGVuZENo
        aWxkKHQpLCEhZS5pbm5lckhUTUwubWF0Y2goImZvbyIpfSgpO0VtYmVyLlJl
        bmRlckJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEVtYmVyLl9SZW5k
        ZXJCdWZmZXIoZSl9LEVtYmVyLl9SZW5kZXJCdWZmZXI9ZnVuY3Rpb24oZSl7
        dGhpcy50YWdOYW1lcz1bZXx8bnVsbF0sdGhpcy5idWZmZXI9IiJ9LEVtYmVy
        Ll9SZW5kZXJCdWZmZXIucHJvdG90eXBlPXtfZWxlbWVudDpudWxsLF9oYXNF
        bGVtZW50OiEwLGVsZW1lbnRDbGFzc2VzOm51bGwsY2xhc3NlczpudWxsLGVs
        ZW1lbnRJZDpudWxsLGVsZW1lbnRBdHRyaWJ1dGVzOm51bGwsZWxlbWVudFBy
        b3BlcnRpZXM6bnVsbCxlbGVtZW50VGFnOm51bGwsZWxlbWVudFN0eWxlOm51
        bGwscGFyZW50QnVmZmVyOm51bGwscHVzaDpmdW5jdGlvbihlKXtyZXR1cm4g
        dGhpcy5idWZmZXIrPWUsdGhpc30sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRoaXMuZWxlbWVudENsYXNzZXM9dGhpcy5lbGVtZW50Q2xhc3Nlc3x8
        bmV3IHIsdGhpcy5lbGVtZW50Q2xhc3Nlcy5hZGQoZSksdGhpcy5jbGFzc2Vz
        PXRoaXMuZWxlbWVudENsYXNzZXMubGlzdCx0aGlzfSxzZXRDbGFzc2VzOmZ1
        bmN0aW9uKGUpe3RoaXMuY2xhc3Nlcz1lfSxpZDpmdW5jdGlvbihlKXtyZXR1
        cm4gdGhpcy5lbGVtZW50SWQ9ZSx0aGlzfSxhdHRyOmZ1bmN0aW9uKGUsdCl7
        dmFyIHI9dGhpcy5lbGVtZW50QXR0cmlidXRlcz10aGlzLmVsZW1lbnRBdHRy
        aWJ1dGVzfHx7fTtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/cltlXToo
        cltlXT10LHRoaXMpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3ZhciB0PXRo
        aXMuZWxlbWVudEF0dHJpYnV0ZXM7cmV0dXJuIHQmJmRlbGV0ZSB0W2VdLHRo
        aXN9LHByb3A6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmVsZW1lbnRQcm9w
        ZXJ0aWVzPXRoaXMuZWxlbWVudFByb3BlcnRpZXN8fHt9O3JldHVybiAxPT09
        YXJndW1lbnRzLmxlbmd0aD9yW2VdOihyW2VdPXQsdGhpcyl9LHJlbW92ZVBy
        b3A6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50UHJvcGVydGllczty
        ZXR1cm4gdCYmZGVsZXRlIHRbZV0sdGhpc30sc3R5bGU6ZnVuY3Rpb24oZSx0
        KXtyZXR1cm4gdGhpcy5lbGVtZW50U3R5bGU9dGhpcy5lbGVtZW50U3R5bGV8
        fHt9LHRoaXMuZWxlbWVudFN0eWxlW2VdPXQsdGhpc30sYmVnaW46ZnVuY3Rp
        b24oZSl7cmV0dXJuIHRoaXMudGFnTmFtZXMucHVzaChlfHxudWxsKSx0aGlz
        fSxwdXNoT3BlbmluZ1RhZzpmdW5jdGlvbigpe3ZhciByPXRoaXMuY3VycmVu
        dFRhZ05hbWUoKTtpZihyKXtpZih0aGlzLl9oYXNFbGVtZW50JiYhdGhpcy5f
        ZWxlbWVudCYmMD09PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gdGhpcy5f
        ZWxlbWVudD10aGlzLmdlbmVyYXRlRWxlbWVudCgpLHZvaWQgMDt2YXIgbixp
        LG89dGhpcy5idWZmZXIsYT10aGlzLmVsZW1lbnRJZCxzPXRoaXMuY2xhc3Nl
        cyx1PXRoaXMuZWxlbWVudEF0dHJpYnV0ZXMsYz10aGlzLmVsZW1lbnRQcm9w
        ZXJ0aWVzLGw9dGhpcy5lbGVtZW50U3R5bGU7aWYobys9IjwiK2UociksYSYm
        KG8rPScgaWQ9IicrdChhKSsnIicsdGhpcy5lbGVtZW50SWQ9bnVsbCkscyYm
        KG8rPScgY2xhc3M9IicrdChzLmpvaW4oIiAiKSkrJyInLHRoaXMuY2xhc3Nl
        cz1udWxsKSxsKXtvKz0nIHN0eWxlPSInO2ZvcihpIGluIGwpbC5oYXNPd25Q
        cm9wZXJ0eShpKSYmKG8rPWkrIjoiK3QobFtpXSkrIjsiKTtvKz0nIicsdGhp
        cy5lbGVtZW50U3R5bGU9bnVsbH1pZih1KXtmb3IobiBpbiB1KXUuaGFzT3du
        UHJvcGVydHkobikmJihvKz0iICIrbisnPSInK3QodVtuXSkrJyInKTt0aGlz
        LmVsZW1lbnRBdHRyaWJ1dGVzPW51bGx9aWYoYyl7Zm9yKGkgaW4gYylpZihj
        Lmhhc093blByb3BlcnR5KGkpKXt2YXIgaD1jW2ldOyhofHwibnVtYmVyIj09
        dHlwZW9mIGgpJiYobys9aD09PSEwPyIgIitpKyc9IicraSsnIic6IiAiK2kr
        Jz0iJyt0KGNbaV0pKyciJyl9dGhpcy5lbGVtZW50UHJvcGVydGllcz1udWxs
        fW8rPSI+Iix0aGlzLmJ1ZmZlcj1vfX0scHVzaENsb3NpbmdUYWc6ZnVuY3Rp
        b24oKXt2YXIgdD10aGlzLnRhZ05hbWVzLnBvcCgpO3QmJih0aGlzLmJ1ZmZl
        cis9IjwvIitlKHQpKyI+Iil9LGN1cnJlbnRUYWdOYW1lOmZ1bmN0aW9uKCl7
        cmV0dXJuIHRoaXMudGFnTmFtZXNbdGhpcy50YWdOYW1lcy5sZW5ndGgtMV19
        LGdlbmVyYXRlRWxlbWVudDpmdW5jdGlvbigpe3ZhciByLG4saSxvPXRoaXMu
        dGFnTmFtZXMucG9wKCksYT10aGlzLmVsZW1lbnRJZCx1PXRoaXMuY2xhc3Nl
        cyxjPXRoaXMuZWxlbWVudEF0dHJpYnV0ZXMsbD10aGlzLmVsZW1lbnRQcm9w
        ZXJ0aWVzLGg9dGhpcy5lbGVtZW50U3R5bGUsbT0iIjtpPWMmJmMubmFtZSYm
        IXM/IjwiK2UobykrJyBuYW1lPSInK3QoYy5uYW1lKSsnIj4nOm87dmFyIGY9
        ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpKSxwPUVtYmVyLiQoZik7aWYoYSYm
        KHAuYXR0cigiaWQiLGEpLHRoaXMuZWxlbWVudElkPW51bGwpLHUmJihwLmF0
        dHIoImNsYXNzIix1LmpvaW4oIiAiKSksdGhpcy5jbGFzc2VzPW51bGwpLGgp
        e2ZvcihuIGluIGgpaC5oYXNPd25Qcm9wZXJ0eShuKSYmKG0rPW4rIjoiK2hb
        bl0rIjsiKTtwLmF0dHIoInN0eWxlIixtKSx0aGlzLmVsZW1lbnRTdHlsZT1u
        dWxsfWlmKGMpe2ZvcihyIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShyKSYmcC5h
        dHRyKHIsY1tyXSk7dGhpcy5lbGVtZW50QXR0cmlidXRlcz1udWxsfWlmKGwp
        e2ZvcihuIGluIGwpbC5oYXNPd25Qcm9wZXJ0eShuKSYmcC5wcm9wKG4sbFtu
        XSk7dGhpcy5lbGVtZW50UHJvcGVydGllcz1udWxsfXJldHVybiBmfSxlbGVt
        ZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pbm5lclN0cmluZygpO3JldHVy
        biBlJiYodGhpcy5fZWxlbWVudD1FbWJlci5WaWV3VXRpbHMuc2V0SW5uZXJI
        VE1MKHRoaXMuX2VsZW1lbnQsZSkpLHRoaXMuX2VsZW1lbnR9LHN0cmluZzpm
        dW5jdGlvbigpe2lmKHRoaXMuX2hhc0VsZW1lbnQmJnRoaXMuX2VsZW1lbnQp
        e3ZhciBlPXRoaXMuZWxlbWVudCgpLHQ9ZS5vdXRlckhUTUw7cmV0dXJuInVu
        ZGVmaW5lZCI9PXR5cGVvZiB0P0VtYmVyLiQoIjxkaXYvPiIpLmFwcGVuZChl
        KS5odG1sKCk6dH1yZXR1cm4gdGhpcy5pbm5lclN0cmluZygpfSxpbm5lclN0
        cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlcn19fSgpLGZ1bmN0
        aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLlN0cmlu
        Zy5mbXQsRW1iZXIuRXZlbnREaXNwYXRjaGVyPUVtYmVyLk9iamVjdC5leHRl
        bmQoe2V2ZW50czp7dG91Y2hzdGFydDoidG91Y2hTdGFydCIsdG91Y2htb3Zl
        OiJ0b3VjaE1vdmUiLHRvdWNoZW5kOiJ0b3VjaEVuZCIsdG91Y2hjYW5jZWw6
        InRvdWNoQ2FuY2VsIixrZXlkb3duOiJrZXlEb3duIixrZXl1cDoia2V5VXAi
        LGtleXByZXNzOiJrZXlQcmVzcyIsbW91c2Vkb3duOiJtb3VzZURvd24iLG1v
        dXNldXA6Im1vdXNlVXAiLGNvbnRleHRtZW51OiJjb250ZXh0TWVudSIsY2xp
        Y2s6ImNsaWNrIixkYmxjbGljazoiZG91YmxlQ2xpY2siLG1vdXNlbW92ZToi
        bW91c2VNb3ZlIixmb2N1c2luOiJmb2N1c0luIixmb2N1c291dDoiZm9jdXNP
        dXQiLG1vdXNlZW50ZXI6Im1vdXNlRW50ZXIiLG1vdXNlbGVhdmU6Im1vdXNl
        TGVhdmUiLHN1Ym1pdDoic3VibWl0IixpbnB1dDoiaW5wdXQiLGNoYW5nZToi
        Y2hhbmdlIixkcmFnc3RhcnQ6ImRyYWdTdGFydCIsZHJhZzoiZHJhZyIsZHJh
        Z2VudGVyOiJkcmFnRW50ZXIiLGRyYWdsZWF2ZToiZHJhZ0xlYXZlIixkcmFn
        b3ZlcjoiZHJhZ092ZXIiLGRyb3A6ImRyb3AiLGRyYWdlbmQ6ImRyYWdFbmQi
        fSxyb290RWxlbWVudDoiYm9keSIsc2V0dXA6ZnVuY3Rpb24ocixuKXt2YXIg
        aSxvPWUodGhpcywiZXZlbnRzIik7RW1iZXIuJC5leHRlbmQobyxyfHx7fSks
        RW1iZXIuaXNOb25lKG4pfHx0KHRoaXMsInJvb3RFbGVtZW50IixuKSxuPUVt
        YmVyLiQoZSh0aGlzLCJyb290RWxlbWVudCIpKSxuLmFkZENsYXNzKCJlbWJl
        ci1hcHBsaWNhdGlvbiIpO2ZvcihpIGluIG8pby5oYXNPd25Qcm9wZXJ0eShp
        KSYmdGhpcy5zZXR1cEhhbmRsZXIobixpLG9baV0pfSxzZXR1cEhhbmRsZXI6
        ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7ZS5vbih0KyIuZW1iZXIiLCIu
        ZW1iZXItdmlldyIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gRW1iZXIuaGFuZGxl
        RXJyb3JzKGZ1bmN0aW9uKCl7dmFyIGk9RW1iZXIuVmlldy52aWV3c1t0aGlz
        LmlkXSxvPSEwLGE9bnVsbDtyZXR1cm4gYT1uLl9maW5kTmVhcmVzdEV2ZW50
        TWFuYWdlcihpLHIpLGEmJmEhPT10P289bi5fZGlzcGF0Y2hFdmVudChhLGUs
        cixpKTppP289bi5fYnViYmxlRXZlbnQoaSxlLHIpOmUuc3RvcFByb3BhZ2F0
        aW9uKCksb30sdGhpcyl9KSxlLm9uKHQrIi5lbWJlciIsIltkYXRhLWVtYmVy
        LWFjdGlvbl0iLGZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5oYW5kbGVFcnJv
        cnMoZnVuY3Rpb24oKXt2YXIgdD1FbWJlci4kKGUuY3VycmVudFRhcmdldCku
        YXR0cigiZGF0YS1lbWJlci1hY3Rpb24iKSxuPUVtYmVyLkhhbmRsZWJhcnMu
        QWN0aW9uSGVscGVyLnJlZ2lzdGVyZWRBY3Rpb25zW3RdO3JldHVybiBuJiZu
        LmV2ZW50TmFtZT09PXI/bi5oYW5kbGVyKGUpOnZvaWQgMH0sdGhpcyl9KX0s
        X2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyOmZ1bmN0aW9uKHQscil7Zm9yKHZh
        ciBuPW51bGw7dCYmKG49ZSh0LCJldmVudE1hbmFnZXIiKSwhbnx8IW5bcl0p
        Oyl0PWUodCwicGFyZW50VmlldyIpO3JldHVybiBufSxfZGlzcGF0Y2hFdmVu
        dDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT0hMCxvPWVbcl07cmV0dXJuImZ1
        bmN0aW9uIj09PUVtYmVyLnR5cGVPZihvKT8oaT1FbWJlci5ydW4oZnVuY3Rp
        b24oKXtyZXR1cm4gby5jYWxsKGUsdCxuKX0pLHQuc3RvcFByb3BhZ2F0aW9u
        KCkpOmk9dGhpcy5fYnViYmxlRXZlbnQobix0LHIpLGl9LF9idWJibGVFdmVu
        dDpmdW5jdGlvbihlLHQscil7cmV0dXJuIEVtYmVyLnJ1bihmdW5jdGlvbigp
        e3JldHVybiBlLmhhbmRsZUV2ZW50KHIsdCl9KX0sZGVzdHJveTpmdW5jdGlv
        bigpe3ZhciB0PWUodGhpcywicm9vdEVsZW1lbnQiKTtyZXR1cm4gRW1iZXIu
        JCh0KS5vZmYoIi5lbWJlciIsIioqIikucmVtb3ZlQ2xhc3MoImVtYmVyLWFw
        cGxpY2F0aW9uIiksdGhpcy5fc3VwZXIoKX19KX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPUVtYmVyLnJ1bi5xdWV1ZXMsdD1FbWJlci5BcnJheVBvbHlmaWxscy5p
        bmRleE9mO2Uuc3BsaWNlKHQuY2FsbChlLCJhY3Rpb25zIikrMSwwLCJyZW5k
        ZXIiLCJhZnRlclJlbmRlciIpfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIu
        Z2V0LHQ9RW1iZXIuc2V0O0VtYmVyLkNvbnRyb2xsZXJNaXhpbi5yZW9wZW4o
        e3RhcmdldDpudWxsLG5hbWVzcGFjZTpudWxsLHZpZXc6bnVsbCxjb250YWlu
        ZXI6bnVsbCxfY2hpbGRDb250YWluZXJzOm51bGwsaW5pdDpmdW5jdGlvbigp
        e3RoaXMuX3N1cGVyKCksdCh0aGlzLCJfY2hpbGRDb250YWluZXJzIix7fSl9
        LF9tb2RlbERpZENoYW5nZTpFbWJlci5vYnNlcnZlcigibW9kZWwiLGZ1bmN0
        aW9uKCl7dmFyIHI9ZSh0aGlzLCJfY2hpbGRDb250YWluZXJzIik7Zm9yKHZh
        ciBuIGluIHIpci5oYXNPd25Qcm9wZXJ0eShuKSYmcltuXS5kZXN0cm95KCk7
        dCh0aGlzLCJfY2hpbGRDb250YWluZXJzIix7fSl9KX0pfSgpLGZ1bmN0aW9u
        KCl7ZnVuY3Rpb24gZSgpe0VtYmVyLnJ1bi5vbmNlKEVtYmVyLlZpZXcsIm5v
        dGlmeU11dGF0aW9uTGlzdGVuZXJzIil9dmFyIHQ9e30scj1FbWJlci5nZXQs
        bj1FbWJlci5zZXQsaT1FbWJlci5ndWlkRm9yLG89RW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmZvckVhY2gsYT1FbWJlci5FbnVtZXJhYmxlVXRpbHMuYWRkT2Jq
        ZWN0LHM9RW1iZXIubWV0YSx1PUVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        dmFyIGU9dGhpcy5fY2hpbGRWaWV3cyx0PUVtYmVyLkEoKSxuPXRoaXM7cmV0
        dXJuIG8oZSxmdW5jdGlvbihlKXt2YXIgbjtlLmlzVmlydHVhbD8obj1yKGUs
        ImNoaWxkVmlld3MiKSkmJnQucHVzaE9iamVjdHMobik6dC5wdXNoKGUpfSks
        dC5yZXBsYWNlPWZ1bmN0aW9uKGUsdCxyKXtpZihuIGluc3RhbmNlb2YgRW1i
        ZXIuQ29udGFpbmVyVmlldylyZXR1cm4gbi5yZXBsYWNlKGUsdCxyKTt0aHJv
        dyBuZXcgRW1iZXIuRXJyb3IoImNoaWxkVmlld3MgaXMgaW1tdXRhYmxlIil9
        LHR9KTtFbWJlci5URU1QTEFURVM9e30sRW1iZXIuQ29yZVZpZXc9RW1iZXIu
        T2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLEVtYmVyLkFjdGlvbkhhbmRs
        ZXIse2lzVmlldzohMCxzdGF0ZXM6dCxpbml0OmZ1bmN0aW9uKCl7dGhpcy5f
        c3VwZXIoKSx0aGlzLnRyYW5zaXRpb25UbygicHJlUmVuZGVyIil9LHBhcmVu
        dFZpZXc6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9w
        YXJlbnRWaWV3O3JldHVybiBlJiZlLmlzVmlydHVhbD9yKGUsInBhcmVudFZp
        ZXciKTplfSkucHJvcGVydHkoIl9wYXJlbnRWaWV3Iiksc3RhdGU6bnVsbCxf
        cGFyZW50VmlldzpudWxsLGNvbmNyZXRlVmlldzpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlydHVhbD9yKHRoaXMsInBhcmVu
        dFZpZXciKTp0aGlzCn0pLnByb3BlcnR5KCJwYXJlbnRWaWV3IiksaW5zdHJ1
        bWVudE5hbWU6ImNvcmVfdmlldyIsaW5zdHJ1bWVudERldGFpbHM6ZnVuY3Rp
        b24oZSl7ZS5vYmplY3Q9dGhpcy50b1N0cmluZygpfSxyZW5kZXJUb0J1ZmZl
        cjpmdW5jdGlvbihlLHQpe3ZhciByPSJyZW5kZXIuIit0aGlzLmluc3RydW1l
        bnROYW1lLG49e307cmV0dXJuIHRoaXMuaW5zdHJ1bWVudERldGFpbHMobiks
        RW1iZXIuaW5zdHJ1bWVudChyLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5f
        cmVuZGVyVG9CdWZmZXIoZSx0KX0sdGhpcyl9LF9yZW5kZXJUb0J1ZmZlcjpm
        dW5jdGlvbihlKXt2YXIgdD10aGlzLnRhZ05hbWU7KG51bGw9PT10fHx2b2lk
        IDA9PT10KSYmKHQ9ImRpdiIpO3ZhciByPXRoaXMuYnVmZmVyPWUmJmUuYmVn
        aW4odCl8fEVtYmVyLlJlbmRlckJ1ZmZlcih0KTtyZXR1cm4gdGhpcy50cmFu
        c2l0aW9uVG8oImluQnVmZmVyIiwhMSksdGhpcy5iZWZvcmVSZW5kZXIociks
        dGhpcy5yZW5kZXIociksdGhpcy5hZnRlclJlbmRlcihyKSxyfSx0cmlnZ2Vy
        OmZ1bmN0aW9uKGUpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRz
        KTt2YXIgdD10aGlzW2VdO2lmKHQpe3ZhciByLG4saT1bXTtmb3Iocj0xLG49
        YXJndW1lbnRzLmxlbmd0aDtuPnI7cisrKWkucHVzaChhcmd1bWVudHNbcl0p
        O3JldHVybiB0LmFwcGx5KHRoaXMsaSl9fSxkZXByZWNhdGVkU2VuZEhhbmRs
        ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzW2VdfSxkZXByZWNhdGVkU2Vu
        ZDpmdW5jdGlvbihlKXt2YXIgdD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywx
        KTt0aGlzW2VdLmFwcGx5KHRoaXMsdCl9LGhhczpmdW5jdGlvbihlKXtyZXR1
        cm4iZnVuY3Rpb24iPT09RW1iZXIudHlwZU9mKHRoaXNbZV0pfHx0aGlzLl9z
        dXBlcihlKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BhcmVu
        dFZpZXc7aWYodGhpcy5fc3VwZXIoKSlyZXR1cm4gdGhpcy5yZW1vdmVkRnJv
        bURPTXx8dGhpcy5kZXN0cm95RWxlbWVudCgpLGUmJmUucmVtb3ZlQ2hpbGQo
        dGhpcyksdGhpcy50cmFuc2l0aW9uVG8oImRlc3Ryb3lpbmciLCExKSx0aGlz
        fSxjbGVhclJlbmRlcmVkQ2hpbGRyZW46RW1iZXIuSyx0cmlnZ2VyUmVjdXJz
        aXZlbHk6RW1iZXIuSyxpbnZva2VSZWN1cnNpdmVseTpFbWJlci5LLHRyYW5z
        aXRpb25UbzpFbWJlci5LLGRlc3Ryb3lFbGVtZW50OkVtYmVyLkt9KTt2YXIg
        Yz1FbWJlci5fVmlld0NvbGxlY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhp
        cy52aWV3cz1lfHxbXTt0aGlzLmxlbmd0aD10Lmxlbmd0aH07Yy5wcm90b3R5
        cGU9e2xlbmd0aDowLHRyaWdnZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9
        dGhpcy52aWV3cyxuPTAsaT1yLmxlbmd0aDtpPm47bisrKXQ9cltuXSx0LnRy
        aWdnZXImJnQudHJpZ2dlcihlKX0sdHJpZ2dlclJlY3Vyc2l2ZWx5OmZ1bmN0
        aW9uKGUpe2Zvcih2YXIgdD10aGlzLnZpZXdzLHI9MCxuPXQubGVuZ3RoO24+
        cjtyKyspdFtyXS50cmlnZ2VyUmVjdXJzaXZlbHkoZSl9LGludm9rZVJlY3Vy
        c2l2ZWx5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXRoaXMudmlld3Msbj0w
        LGk9ci5sZW5ndGg7aT5uO24rKyl0PXJbbl0sZSh0KX0sdHJhbnNpdGlvblRv
        OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMudmlld3Msbj0wLGk9ci5s
        ZW5ndGg7aT5uO24rKylyW25dLnRyYW5zaXRpb25UbyhlLHQpfSxwdXNoOmZ1
        bmN0aW9uKCl7dGhpcy5sZW5ndGgrPWFyZ3VtZW50cy5sZW5ndGg7dmFyIGU9
        dGhpcy52aWV3cztyZXR1cm4gZS5wdXNoLmFwcGx5KGUsYXJndW1lbnRzKX0s
        b2JqZWN0QXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudmlld3NbZV19LGZv
        ckVhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52aWV3cztyZXR1cm4gbyh0
        LGUpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubGVuZ3RoPTAsdGhpcy52aWV3
        cy5sZW5ndGg9MH19O3ZhciBsPVtdO0VtYmVyLlZpZXc9RW1iZXIuQ29yZVZp
        ZXcuZXh0ZW5kKHtjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOlsiY2xhc3NOYW1l
        cyIsImNsYXNzTmFtZUJpbmRpbmdzIiwiYXR0cmlidXRlQmluZGluZ3MiXSxp
        c1ZpZXc6ITAsdGVtcGxhdGVOYW1lOm51bGwsbGF5b3V0TmFtZTpudWxsLHRl
        bXBsYXRlczpFbWJlci5URU1QTEFURVMsdGVtcGxhdGU6RW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10KXJldHVybiB0O3ZhciBu
        PXIodGhpcywidGVtcGxhdGVOYW1lIiksaT10aGlzLnRlbXBsYXRlRm9yTmFt
        ZShuLCJ0ZW1wbGF0ZSIpO3JldHVybiBpfHxyKHRoaXMsImRlZmF1bHRUZW1w
        bGF0ZSIpfSkucHJvcGVydHkoInRlbXBsYXRlTmFtZSIpLGNvbnRyb2xsZXI6
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsIl9wYXJl
        bnRWaWV3Iik7cmV0dXJuIGU/cihlLCJjb250cm9sbGVyIik6bnVsbH0pLnBy
        b3BlcnR5KCJfcGFyZW50VmlldyIpLGxheW91dDpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe3ZhciBlPXIodGhpcywibGF5b3V0TmFtZSIpLHQ9dGhpcy50
        ZW1wbGF0ZUZvck5hbWUoZSwibGF5b3V0Iik7cmV0dXJuIHR8fHIodGhpcywi
        ZGVmYXVsdExheW91dCIpfSkucHJvcGVydHkoImxheW91dE5hbWUiKSxfeWll
        bGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1yKHRoaXMsInRlbXBsYXRlIik7biYm
        bihlLHQpfSx0ZW1wbGF0ZUZvck5hbWU6ZnVuY3Rpb24oZSl7aWYoZSl7dmFy
        IHQ9dGhpcy5jb250YWluZXJ8fEVtYmVyLkNvbnRhaW5lciYmRW1iZXIuQ29u
        dGFpbmVyLmRlZmF1bHRDb250YWluZXI7cmV0dXJuIHQmJnQubG9va3VwKCJ0
        ZW1wbGF0ZToiK2UpfX0sY29udGV4dDpFbWJlci5jb21wdXRlZChmdW5jdGlv
        bihlLHQpe3JldHVybiAyPT09YXJndW1lbnRzLmxlbmd0aD8obih0aGlzLCJf
        Y29udGV4dCIsdCksdCk6cih0aGlzLCJfY29udGV4dCIpfSkudm9sYXRpbGUo
        KSxfY29udGV4dDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciBlLHQ7
        cmV0dXJuKHQ9cih0aGlzLCJjb250cm9sbGVyIikpP3Q6KGU9dGhpcy5fcGFy
        ZW50VmlldyxlP3IoZSwiX2NvbnRleHQiKTpudWxsKX0pLF9jb250ZXh0RGlk
        Q2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjb250ZXh0IixmdW5jdGlvbigpe3Ro
        aXMucmVyZW5kZXIoKX0pLGlzVmlzaWJsZTohMCxjaGlsZFZpZXdzOnUsX2No
        aWxkVmlld3M6bCxfY2hpbGRWaWV3c1dpbGxDaGFuZ2U6RW1iZXIuYmVmb3Jl
        T2JzZXJ2ZXIoImNoaWxkVmlld3MiLGZ1bmN0aW9uKCl7aWYodGhpcy5pc1Zp
        cnR1YWwpe3ZhciBlPXIodGhpcywicGFyZW50VmlldyIpO2UmJkVtYmVyLnBy
        b3BlcnR5V2lsbENoYW5nZShlLCJjaGlsZFZpZXdzIil9fSksX2NoaWxkVmll
        d3NEaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNoaWxkVmlld3MiLGZ1bmN0
        aW9uKCl7aWYodGhpcy5pc1ZpcnR1YWwpe3ZhciBlPXIodGhpcywicGFyZW50
        VmlldyIpO2UmJkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKGUsImNoaWxkVmll
        d3MiKX19KSxuZWFyZXN0SW5zdGFuY2VPZjpmdW5jdGlvbihlKXtmb3IodmFy
        IHQ9cih0aGlzLCJwYXJlbnRWaWV3Iik7dDspe2lmKHQgaW5zdGFuY2VvZiBl
        KXJldHVybiB0O3Q9cih0LCJwYXJlbnRWaWV3Iil9fSxuZWFyZXN0T2ZUeXBl
        OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1yKHRoaXMsInBhcmVudFZpZXciKSxu
        PWUgaW5zdGFuY2VvZiBFbWJlci5NaXhpbj9mdW5jdGlvbih0KXtyZXR1cm4g
        ZS5kZXRlY3QodCl9OmZ1bmN0aW9uKHQpe3JldHVybiBlLmRldGVjdCh0LmNv
        bnN0cnVjdG9yKX07dDspe2lmKG4odCkpcmV0dXJuIHQ7dD1yKHQsInBhcmVu
        dFZpZXciKX19LG5lYXJlc3RXaXRoUHJvcGVydHk6ZnVuY3Rpb24oZSl7Zm9y
        KHZhciB0PXIodGhpcywicGFyZW50VmlldyIpO3Q7KXtpZihlIGluIHQpcmV0
        dXJuIHQ7dD1yKHQsInBhcmVudFZpZXciKX19LG5lYXJlc3RDaGlsZE9mOmZ1
        bmN0aW9uKGUpe2Zvcih2YXIgdD1yKHRoaXMsInBhcmVudFZpZXciKTt0Oyl7
        aWYocih0LCJwYXJlbnRWaWV3IilpbnN0YW5jZW9mIGUpcmV0dXJuIHQ7dD1y
        KHQsInBhcmVudFZpZXciKX19LF9wYXJlbnRWaWV3RGlkQ2hhbmdlOkVtYmVy
        Lm9ic2VydmVyKCJfcGFyZW50VmlldyIsZnVuY3Rpb24oKXt0aGlzLmlzRGVz
        dHJveWluZ3x8KHRoaXMudHJpZ2dlcigicGFyZW50Vmlld0RpZENoYW5nZSIp
        LHIodGhpcywicGFyZW50Vmlldy5jb250cm9sbGVyIikmJiFyKHRoaXMsImNv
        bnRyb2xsZXIiKSYmdGhpcy5ub3RpZnlQcm9wZXJ0eUNoYW5nZSgiY29udHJv
        bGxlciIpKX0pLF9jb250cm9sbGVyRGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVy
        KCJjb250cm9sbGVyIixmdW5jdGlvbigpe3RoaXMuaXNEZXN0cm95aW5nfHwo
        dGhpcy5yZXJlbmRlcigpLHRoaXMuZm9yRWFjaENoaWxkVmlldyhmdW5jdGlv
        bihlKXtlLnByb3BlcnR5RGlkQ2hhbmdlKCJjb250cm9sbGVyIil9KSl9KSxj
        bG9uZUtleXdvcmRzOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJ0ZW1wbGF0
        ZURhdGEiKSx0PWU/RW1iZXIuY29weShlLmtleXdvcmRzKTp7fTtyZXR1cm4g
        bih0LCJ2aWV3IixyKHRoaXMsImNvbmNyZXRlVmlldyIpKSxuKHQsIl92aWV3
        Iix0aGlzKSxuKHQsImNvbnRyb2xsZXIiLHIodGhpcywiY29udHJvbGxlciIp
        KSx0fSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9cih0aGlzLCJsYXlvdXQi
        KXx8cih0aGlzLCJ0ZW1wbGF0ZSIpO2lmKHQpe3ZhciBuLGk9cih0aGlzLCJj
        b250ZXh0Iiksbz10aGlzLmNsb25lS2V5d29yZHMoKSxhPXt2aWV3OnRoaXMs
        YnVmZmVyOmUsaXNSZW5kZXJEYXRhOiEwLGtleXdvcmRzOm8saW5zaWRlR3Jv
        dXA6cih0aGlzLCJ0ZW1wbGF0ZURhdGEuaW5zaWRlR3JvdXAiKX07bj10KGks
        e2RhdGE6YX0pLHZvaWQgMCE9PW4mJmUucHVzaChuKX19LHJlcmVuZGVyOmZ1
        bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLnJlcmVuZGVyKHRo
        aXMpfSxjbGVhclJlbmRlcmVkQ2hpbGRyZW46ZnVuY3Rpb24oKXtmb3IodmFy
        IGU9dGhpcy5sZW5ndGhCZWZvcmVSZW5kZXIsdD10aGlzLmxlbmd0aEFmdGVy
        UmVuZGVyLHI9dGhpcy5fY2hpbGRWaWV3cyxuPXQtMTtuPj1lO24tLSlyW25d
        JiZyW25dLmRlc3Ryb3koKX0sX2FwcGx5Q2xhc3NOYW1lQmluZGluZ3M6ZnVu
        Y3Rpb24oZSl7dmFyIHQscixuLGk9dGhpcy5jbGFzc05hbWVzO28oZSxmdW5j
        dGlvbihlKXt2YXIgbyxzPUVtYmVyLlZpZXcuX3BhcnNlUHJvcGVydHlQYXRo
        KGUpLHU9ZnVuY3Rpb24oKXtyPXRoaXMuX2NsYXNzU3RyaW5nRm9yUHJvcGVy
        dHkoZSksdD10aGlzLiQoKSxvJiYodC5yZW1vdmVDbGFzcyhvKSxpLnJlbW92
        ZU9iamVjdChvKSkscj8odC5hZGRDbGFzcyhyKSxvPXIpOm89bnVsbH07bj10
        aGlzLl9jbGFzc1N0cmluZ0ZvclByb3BlcnR5KGUpLG4mJihhKGksbiksbz1u
        KSx0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIodGhpcyxzLnBhdGgsdSksdGhpcy5v
        bmUoIndpbGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtvJiYoaS5yZW1vdmVP
        YmplY3Qobyksbz1udWxsKX0pfSx0aGlzKX0sX2FwcGx5QXR0cmlidXRlQmlu
        ZGluZ3M6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO28odCxmdW5jdGlvbih0KXt2
        YXIgbz10LnNwbGl0KCI6IiksYT1vWzBdLHM9b1sxXXx8YSx1PWZ1bmN0aW9u
        KCl7aT10aGlzLiQoKSxuPXIodGhpcyxhKSxFbWJlci5WaWV3LmFwcGx5QXR0
        cmlidXRlQmluZGluZ3MoaSxzLG4pfTt0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIo
        dGhpcyxhLHUpLG49cih0aGlzLGEpLEVtYmVyLlZpZXcuYXBwbHlBdHRyaWJ1
        dGVCaW5kaW5ncyhlLHMsbil9LHRoaXMpfSxfY2xhc3NTdHJpbmdGb3JQcm9w
        ZXJ0eTpmdW5jdGlvbihlKXt2YXIgdD1FbWJlci5WaWV3Ll9wYXJzZVByb3Bl
        cnR5UGF0aChlKSxuPXQucGF0aCxpPXIodGhpcyxuKTtyZXR1cm4gdm9pZCAw
        PT09aSYmRW1iZXIuaXNHbG9iYWxQYXRoKG4pJiYoaT1yKEVtYmVyLmxvb2t1
        cCxuKSksRW1iZXIuVmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShuLGksdC5j
        bGFzc05hbWUsdC5mYWxzeUNsYXNzTmFtZSl9LGVsZW1lbnQ6RW1iZXIuY29t
        cHV0ZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwIT09dD90aGlzLmN1
        cnJlbnRTdGF0ZS5zZXRFbGVtZW50KHRoaXMsdCk6dGhpcy5jdXJyZW50U3Rh
        dGUuZ2V0RWxlbWVudCh0aGlzKX0pLnByb3BlcnR5KCJfcGFyZW50VmlldyIp
        LCQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLiQodGhp
        cyxlKX0sbXV0YXRlQ2hpbGRWaWV3czpmdW5jdGlvbihlKXtmb3IodmFyIHQs
        cj10aGlzLl9jaGlsZFZpZXdzLG49ci5sZW5ndGg7LS1uPj0wOyl0PXJbbl0s
        ZSh0aGlzLHQsbik7cmV0dXJuIHRoaXN9LGZvckVhY2hDaGlsZFZpZXc6ZnVu
        Y3Rpb24oZSl7dmFyIHQ9dGhpcy5fY2hpbGRWaWV3cztpZighdClyZXR1cm4g
        dGhpczt2YXIgcixuLGk9dC5sZW5ndGg7Zm9yKG49MDtpPm47bisrKXI9dFtu
        XSxlKHIpO3JldHVybiB0aGlzfSxhcHBlbmRUbzpmdW5jdGlvbihlKXtyZXR1
        cm4gdGhpcy5faW5zZXJ0RWxlbWVudExhdGVyKGZ1bmN0aW9uKCl7dGhpcy4k
        KCkuYXBwZW5kVG8oZSl9KSx0aGlzfSxyZXBsYWNlSW46ZnVuY3Rpb24oZSl7
        cmV0dXJuIHRoaXMuX2luc2VydEVsZW1lbnRMYXRlcihmdW5jdGlvbigpe0Vt
        YmVyLiQoZSkuZW1wdHkoKSx0aGlzLiQoKS5hcHBlbmRUbyhlKX0pLHRoaXN9
        LF9pbnNlcnRFbGVtZW50TGF0ZXI6ZnVuY3Rpb24oZSl7dGhpcy5fc2NoZWR1
        bGVkSW5zZXJ0PUVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRlciIsdGhp
        cywiX2luc2VydEVsZW1lbnQiLGUpfSxfaW5zZXJ0RWxlbWVudDpmdW5jdGlv
        bihlKXt0aGlzLl9zY2hlZHVsZWRJbnNlcnQ9bnVsbCx0aGlzLmN1cnJlbnRT
        dGF0ZS5pbnNlcnRFbGVtZW50KHRoaXMsZSl9LGFwcGVuZDpmdW5jdGlvbigp
        e3JldHVybiB0aGlzLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpfSxyZW1vdmU6
        ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZWRGcm9tRE9NfHx0aGlzLmRlc3Ryb3lF
        bGVtZW50KCksdGhpcy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlvbihlKXtl
        LmNsZWFyUmVuZGVyZWRDaGlsZHJlbiYmZS5jbGVhclJlbmRlcmVkQ2hpbGRy
        ZW4oKX0pfSxlbGVtZW50SWQ6bnVsbCxmaW5kRWxlbWVudEluUGFyZW50RWxl
        bWVudDpmdW5jdGlvbihlKXt2YXIgdD0iIyIrdGhpcy5lbGVtZW50SWQ7cmV0
        dXJuIEVtYmVyLiQodClbMF18fEVtYmVyLiQodCxlKVswXX0sY3JlYXRlRWxl
        bWVudDpmdW5jdGlvbigpe2lmKHIodGhpcywiZWxlbWVudCIpKXJldHVybiB0
        aGlzO3ZhciBlPXRoaXMucmVuZGVyVG9CdWZmZXIoKTtyZXR1cm4gbih0aGlz
        LCJlbGVtZW50IixlLmVsZW1lbnQoKSksdGhpc30sd2lsbEluc2VydEVsZW1l
        bnQ6RW1iZXIuSyxkaWRJbnNlcnRFbGVtZW50OkVtYmVyLkssd2lsbENsZWFy
        UmVuZGVyOkVtYmVyLkssaW52b2tlUmVjdXJzaXZlbHk6ZnVuY3Rpb24oZSx0
        KXtmb3IodmFyIHIsbixpLG89dD09PSExP3RoaXMuX2NoaWxkVmlld3M6W3Ro
        aXNdO28ubGVuZ3RoOyl7cj1vLnNsaWNlKCksbz1bXTtmb3IodmFyIGE9MCxz
        PXIubGVuZ3RoO3M+YTthKyspbj1yW2FdLGk9bi5fY2hpbGRWaWV3cz9uLl9j
        aGlsZFZpZXdzLnNsaWNlKDApOm51bGwsZShuKSxpJiZvLnB1c2guYXBwbHko
        byxpKX19LHRyaWdnZXJSZWN1cnNpdmVseTpmdW5jdGlvbihlKXtmb3IodmFy
        IHQscixuLGk9W3RoaXNdO2kubGVuZ3RoOyl7dD1pLnNsaWNlKCksaT1bXTtm
        b3IodmFyIG89MCxhPXQubGVuZ3RoO2E+bztvKyspcj10W29dLG49ci5fY2hp
        bGRWaWV3cz9yLl9jaGlsZFZpZXdzLnNsaWNlKDApOm51bGwsci50cmlnZ2Vy
        JiZyLnRyaWdnZXIoZSksbiYmaS5wdXNoLmFwcGx5KGksbil9fSx2aWV3SGll
        cmFyY2h5Q29sbGVjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PW5ldyBj
        KFt0aGlzXSkscj0wO3I8dC5sZW5ndGg7cisrKWU9dC5vYmplY3RBdChyKSxl
        Ll9jaGlsZFZpZXdzJiZ0LnB1c2guYXBwbHkodCxlLl9jaGlsZFZpZXdzKTty
        ZXR1cm4gdH0sZGVzdHJveUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhp
        cy5jdXJyZW50U3RhdGUuZGVzdHJveUVsZW1lbnQodGhpcyl9LHdpbGxEZXN0
        cm95RWxlbWVudDpFbWJlci5LLF9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQ6
        ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZpZXdIaWVyYXJjaHlDb2xsZWN0aW9u
        KCk7cmV0dXJuIGUudHJpZ2dlcigid2lsbENsZWFyUmVuZGVyIiksZS50cmln
        Z2VyKCJ3aWxsRGVzdHJveUVsZW1lbnQiKSxlfSxfZWxlbWVudERpZENoYW5n
        ZTpFbWJlci5vYnNlcnZlcigiZWxlbWVudCIsZnVuY3Rpb24oKXt0aGlzLmZv
        ckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24oZSl7ZGVsZXRlIHMoZSkuY2FjaGUu
        ZWxlbWVudH0pfSkscGFyZW50Vmlld0RpZENoYW5nZTpFbWJlci5LLGluc3Ry
        dW1lbnROYW1lOiJ2aWV3IixpbnN0cnVtZW50RGV0YWlsczpmdW5jdGlvbihl
        KXtlLnRlbXBsYXRlPXIodGhpcywidGVtcGxhdGVOYW1lIiksdGhpcy5fc3Vw
        ZXIoZSl9LF9yZW5kZXJUb0J1ZmZlcjpmdW5jdGlvbihlLHQpe3RoaXMubGVu
        Z3RoQmVmb3JlUmVuZGVyPXRoaXMuX2NoaWxkVmlld3MubGVuZ3RoO3ZhciBy
        PXRoaXMuX3N1cGVyKGUsdCk7cmV0dXJuIHRoaXMubGVuZ3RoQWZ0ZXJSZW5k
        ZXI9dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGgscn0scmVuZGVyVG9CdWZmZXJJ
        Zk5lZWRlZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdXJyZW50U3RhdGUu
        cmVuZGVyVG9CdWZmZXJJZk5lZWRlZCh0aGlzLGUpfSxiZWZvcmVSZW5kZXI6
        ZnVuY3Rpb24oZSl7dGhpcy5hcHBseUF0dHJpYnV0ZXNUb0J1ZmZlcihlKSxl
        LnB1c2hPcGVuaW5nVGFnKCl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKGUpe2Uu
        cHVzaENsb3NpbmdUYWcoKX0sYXBwbHlBdHRyaWJ1dGVzVG9CdWZmZXI6ZnVu
        Y3Rpb24oZSl7dmFyIHQ9cih0aGlzLCJjbGFzc05hbWVCaW5kaW5ncyIpO3Qu
        bGVuZ3RoJiZ0aGlzLl9hcHBseUNsYXNzTmFtZUJpbmRpbmdzKHQpO3ZhciBu
        PXIodGhpcywiYXR0cmlidXRlQmluZGluZ3MiKTtuLmxlbmd0aCYmdGhpcy5f
        YXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhlLG4pLGUuc2V0Q2xhc3Nlcyh0aGlz
        LmNsYXNzTmFtZXMpLGUuaWQodGhpcy5lbGVtZW50SWQpO3ZhciBpPXIodGhp
        cywiYXJpYVJvbGUiKTtpJiZlLmF0dHIoInJvbGUiLGkpLHIodGhpcywiaXNW
        aXNpYmxlIik9PT0hMSYmZS5zdHlsZSgiZGlzcGxheSIsIm5vbmUiKX0sdGFn
        TmFtZTpudWxsLGFyaWFSb2xlOm51bGwsY2xhc3NOYW1lczpbImVtYmVyLXZp
        ZXciXSxjbGFzc05hbWVCaW5kaW5nczpsLGF0dHJpYnV0ZUJpbmRpbmdzOmws
        aW5pdDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudElkPXRoaXMuZWxlbWVudElk
        fHxpKHRoaXMpLHRoaXMuX3N1cGVyKCksdGhpcy5fY2hpbGRWaWV3cz10aGlz
        Ll9jaGlsZFZpZXdzLnNsaWNlKCksdGhpcy5jbGFzc05hbWVCaW5kaW5ncz1F
        bWJlci5BKHRoaXMuY2xhc3NOYW1lQmluZGluZ3Muc2xpY2UoKSksdGhpcy5j
        bGFzc05hbWVzPUVtYmVyLkEodGhpcy5jbGFzc05hbWVzLnNsaWNlKCkpfSxh
        cHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmN1cnJlbnRT
        dGF0ZS5hcHBlbmRDaGlsZCh0aGlzLGUsdCl9LHJlbW92ZUNoaWxkOmZ1bmN0
        aW9uKGUpe2lmKCF0aGlzLmlzRGVzdHJveWluZyl7bihlLCJfcGFyZW50Vmll
        dyIsbnVsbCk7dmFyIHQ9dGhpcy5fY2hpbGRWaWV3cztyZXR1cm4gRW1iZXIu
        RW51bWVyYWJsZVV0aWxzLnJlbW92ZU9iamVjdCh0LGUpLHRoaXMucHJvcGVy
        dHlEaWRDaGFuZ2UoImNoaWxkVmlld3MiKSx0aGlzfX0scmVtb3ZlQWxsQ2hp
        bGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdXRhdGVDaGlsZFZpZXdz
        KGZ1bmN0aW9uKGUsdCl7ZS5yZW1vdmVDaGlsZCh0KX0pfSxkZXN0cm95QWxs
        Q2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdXRhdGVDaGlsZFZp
        ZXdzKGZ1bmN0aW9uKGUsdCl7dC5kZXN0cm95KCl9KX0scmVtb3ZlRnJvbVBh
        cmVudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BhcmVudFZpZXc7cmV0dXJu
        IHRoaXMucmVtb3ZlKCksZSYmZS5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzfSxk
        ZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuX2NoaWxkVmlld3Ms
        aT1yKHRoaXMsInBhcmVudFZpZXciKSxvPXRoaXMudmlld05hbWU7aWYodGhp
        cy5fc3VwZXIoKSl7Zm9yKGU9bi5sZW5ndGgsdD1lLTE7dD49MDt0LS0pblt0
        XS5yZW1vdmVkRnJvbURPTT0hMDtmb3IobyYmaSYmaS5zZXQobyxudWxsKSxl
        PW4ubGVuZ3RoLHQ9ZS0xO3Q+PTA7dC0tKW5bdF0uZGVzdHJveSgpO3JldHVy
        biB0aGlzfX0sY3JlYXRlQ2hpbGRWaWV3OmZ1bmN0aW9uKGUsdCl7aWYoIWUp
        dGhyb3cgbmV3IFR5cGVFcnJvcigiY3JlYXRlQ2hpbGRWaWV3cyBmaXJzdCBh
        cmd1bWVudCBtdXN0IGV4aXN0Iik7aWYoZS5pc1ZpZXcmJmUuX3BhcmVudFZp
        ZXc9PT10aGlzJiZlLmNvbnRhaW5lcj09PXRoaXMuY29udGFpbmVyKXJldHVy
        biBlO2lmKHQ9dHx8e30sdC5fcGFyZW50Vmlldz10aGlzLEVtYmVyLkNvcmVW
        aWV3LmRldGVjdChlKSl0LnRlbXBsYXRlRGF0YT10LnRlbXBsYXRlRGF0YXx8
        cih0aGlzLCJ0ZW1wbGF0ZURhdGEiKSx0LmNvbnRhaW5lcj10aGlzLmNvbnRh
        aW5lcixlPWUuY3JlYXRlKHQpLGUudmlld05hbWUmJm4ocih0aGlzLCJjb25j
        cmV0ZVZpZXciKSxlLnZpZXdOYW1lLGUpO2Vsc2UgaWYoInN0cmluZyI9PXR5
        cGVvZiBlKXt2YXIgaT0idmlldzoiK2Usbz10aGlzLmNvbnRhaW5lci5sb29r
        dXBGYWN0b3J5KGkpO3QudGVtcGxhdGVEYXRhPXIodGhpcywidGVtcGxhdGVE
        YXRhIiksZT1vLmNyZWF0ZSh0KX1lbHNlIHQuY29udGFpbmVyPXRoaXMuY29u
        dGFpbmVyLHIoZSwidGVtcGxhdGVEYXRhIil8fCh0LnRlbXBsYXRlRGF0YT1y
        KHRoaXMsInRlbXBsYXRlRGF0YSIpKSxFbWJlci5zZXRQcm9wZXJ0aWVzKGUs
        dCk7cmV0dXJuIGV9LGJlY2FtZVZpc2libGU6RW1iZXIuSyxiZWNhbWVIaWRk
        ZW46RW1iZXIuSyxfaXNWaXNpYmxlRGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVy
        KCJpc1Zpc2libGUiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kKCk7aWYoZSl7
        dmFyIHQ9cih0aGlzLCJpc1Zpc2libGUiKTtlLnRvZ2dsZSh0KSx0aGlzLl9p
        c0FuY2VzdG9ySGlkZGVuKCl8fCh0P3RoaXMuX25vdGlmeUJlY2FtZVZpc2li
        bGUoKTp0aGlzLl9ub3RpZnlCZWNhbWVIaWRkZW4oKSl9fSksX25vdGlmeUJl
        Y2FtZVZpc2libGU6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoImJlY2FtZVZp
        c2libGUiKSx0aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24oZSl7dmFy
        IHQ9cihlLCJpc1Zpc2libGUiKTsodHx8bnVsbD09PXQpJiZlLl9ub3RpZnlC
        ZWNhbWVWaXNpYmxlKCl9KX0sX25vdGlmeUJlY2FtZUhpZGRlbjpmdW5jdGlv
        bigpe3RoaXMudHJpZ2dlcigiYmVjYW1lSGlkZGVuIiksdGhpcy5mb3JFYWNo
        Q2hpbGRWaWV3KGZ1bmN0aW9uKGUpe3ZhciB0PXIoZSwiaXNWaXNpYmxlIik7
        KHR8fG51bGw9PT10KSYmZS5fbm90aWZ5QmVjYW1lSGlkZGVuKCl9KX0sX2lz
        QW5jZXN0b3JIaWRkZW46ZnVuY3Rpb24oKXtmb3IodmFyIGU9cih0aGlzLCJw
        YXJlbnRWaWV3Iik7ZTspe2lmKHIoZSwiaXNWaXNpYmxlIik9PT0hMSlyZXR1
        cm4hMDtlPXIoZSwicGFyZW50VmlldyIpfXJldHVybiExfSxjbGVhckJ1ZmZl
        cjpmdW5jdGlvbigpe3RoaXMuaW52b2tlUmVjdXJzaXZlbHkoZnVuY3Rpb24o
        ZSl7ZS5idWZmZXI9bnVsbH0pfSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oZSx0
        KXt2YXIgcj10aGlzLmN1cnJlbnRTdGF0ZSxuPXRoaXMuY3VycmVudFN0YXRl
        PXRoaXMuc3RhdGVzW2VdO3RoaXMuc3RhdGU9ZSxyJiZyLmV4aXQmJnIuZXhp
        dCh0aGlzKSxuLmVudGVyJiZuLmVudGVyKHRoaXMpLCJpbkRPTSI9PT1lJiZk
        ZWxldGUgRW1iZXIubWV0YSh0aGlzKS5jYWNoZS5lbGVtZW50LHQhPT0hMSYm
        dGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHQpe3QudHJhbnNpdGlv
        blRvKGUpfSl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRo
        aXMuY3VycmVudFN0YXRlLmhhbmRsZUV2ZW50KHRoaXMsZSx0KX0scmVnaXN0
        ZXJPYnNlcnZlcjpmdW5jdGlvbihlLHQscixuKXtpZihufHwiZnVuY3Rpb24i
        IT10eXBlb2Ygcnx8KG49cixyPW51bGwpLGUmJiJvYmplY3QiPT10eXBlb2Yg
        ZSl7dmFyIGk9dGhpcyxvPWZ1bmN0aW9uKCl7aS5jdXJyZW50U3RhdGUuaW52
        b2tlT2JzZXJ2ZXIodGhpcyxuKX0sYT1mdW5jdGlvbigpe0VtYmVyLnJ1bi5z
        Y2hlZHVsZU9uY2UoInJlbmRlciIsdGhpcyxvKX07RW1iZXIuYWRkT2JzZXJ2
        ZXIoZSx0LHIsYSksdGhpcy5vbmUoIndpbGxDbGVhclJlbmRlciIsZnVuY3Rp
        b24oKXtFbWJlci5yZW1vdmVPYnNlcnZlcihlLHQscixhKX0pfX19KTt2YXIg
        aD17cHJlcGVuZDpmdW5jdGlvbih0LHIpe3QuJCgpLnByZXBlbmQociksZSgp
        fSxhZnRlcjpmdW5jdGlvbih0LHIpe3QuJCgpLmFmdGVyKHIpLGUoKX0saHRt
        bDpmdW5jdGlvbih0LHIpe3QuJCgpLmh0bWwociksZSgpfSxyZXBsYWNlOmZ1
        bmN0aW9uKHQpe3ZhciBpPXIodCwiZWxlbWVudCIpO24odCwiZWxlbWVudCIs
        bnVsbCksdC5faW5zZXJ0RWxlbWVudExhdGVyKGZ1bmN0aW9uKCl7RW1iZXIu
        JChpKS5yZXBsYWNlV2l0aChyKHQsImVsZW1lbnQiKSksZSgpfSl9LHJlbW92
        ZTpmdW5jdGlvbih0KXt0LiQoKS5yZW1vdmUoKSxlKCl9LGVtcHR5OmZ1bmN0
        aW9uKHQpe3QuJCgpLmVtcHR5KCksZSgpfX07RW1iZXIuVmlldy5yZW9wZW4o
        e2RvbU1hbmFnZXI6aH0pLEVtYmVyLlZpZXcucmVvcGVuQ2xhc3Moe19wYXJz
        ZVByb3BlcnR5UGF0aDpmdW5jdGlvbihlKXt2YXIgdCxyLG49ZS5zcGxpdCgi
        OiIpLGk9blswXSxvPSIiO3JldHVybiBuLmxlbmd0aD4xJiYodD1uWzFdLDM9
        PT1uLmxlbmd0aCYmKHI9blsyXSksbz0iOiIrdCxyJiYobys9IjoiK3IpKSx7
        cGF0aDppLGNsYXNzTmFtZXM6byxjbGFzc05hbWU6IiI9PT10P3ZvaWQgMDp0
        LGZhbHN5Q2xhc3NOYW1lOnJ9fSxfY2xhc3NTdHJpbmdGb3JWYWx1ZTpmdW5j
        dGlvbihlLHQscixuKXtpZihyfHxuKXJldHVybiByJiZ0P3I6biYmIXQ/bjpu
        dWxsO2lmKHQ9PT0hMCl7dmFyIGk9ZS5zcGxpdCgiLiIpO3JldHVybiBFbWJl
        ci5TdHJpbmcuZGFzaGVyaXplKGlbaS5sZW5ndGgtMV0pfXJldHVybiB0IT09
        ITEmJm51bGwhPXQ/dDpudWxsfX0pO3ZhciBtPUVtYmVyLk9iamVjdC5leHRl
        bmQoRW1iZXIuRXZlbnRlZCkuY3JlYXRlKCk7RW1iZXIuVmlldy5hZGRNdXRh
        dGlvbkxpc3RlbmVyPWZ1bmN0aW9uKGUpe20ub24oImNoYW5nZSIsZSl9LEVt
        YmVyLlZpZXcucmVtb3ZlTXV0YXRpb25MaXN0ZW5lcj1mdW5jdGlvbihlKXtt
        Lm9mZigiY2hhbmdlIixlKX0sRW1iZXIuVmlldy5ub3RpZnlNdXRhdGlvbkxp
        c3RlbmVycz1mdW5jdGlvbigpe20udHJpZ2dlcigiY2hhbmdlIil9LEVtYmVy
        LlZpZXcudmlld3M9e30sRW1iZXIuVmlldy5jaGlsZFZpZXdzUHJvcGVydHk9
        dSxFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3M9ZnVuY3Rpb24o
        ZSx0LHIpe3ZhciBuPUVtYmVyLnR5cGVPZihyKTsidmFsdWUiPT09dHx8InN0
        cmluZyIhPT1uJiYoIm51bWJlciIhPT1ufHxpc05hTihyKSk/InZhbHVlIj09
        PXR8fCJib29sZWFuIj09PW4/KEVtYmVyLmlzTm9uZShyKSYmKHI9IiIpLHIh
        PT1lLnByb3AodCkmJmUucHJvcCh0LHIpKTpyfHxlLnJlbW92ZUF0dHIodCk6
        ciE9PWUuYXR0cih0KSYmZS5hdHRyKHQscil9LEVtYmVyLlZpZXcuc3RhdGVz
        PXR9KCksZnVuY3Rpb24oKXt2YXIgZT0oRW1iZXIuZ2V0LEVtYmVyLnNldCk7
        RW1iZXIuVmlldy5zdGF0ZXMuX2RlZmF1bHQ9e2FwcGVuZENoaWxkOmZ1bmN0
        aW9uKCl7dGhyb3ciWW91IGNhbid0IHVzZSBhcHBlbmRDaGlsZCBvdXRzaWRl
        IG9mIHRoZSByZW5kZXJpbmcgcHJvY2VzcyJ9LCQ6ZnVuY3Rpb24oKXtyZXR1
        cm4gdm9pZCAwfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9
        LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuITB9LGRlc3Ryb3lFbGVt
        ZW50OmZ1bmN0aW9uKHQpe3JldHVybiBlKHQsImVsZW1lbnQiLG51bGwpLHQu
        X3NjaGVkdWxlZEluc2VydCYmKEVtYmVyLnJ1bi5jYW5jZWwodC5fc2NoZWR1
        bGVkSW5zZXJ0KSx0Ll9zY2hlZHVsZWRJbnNlcnQ9bnVsbCksdH0scmVuZGVy
        VG9CdWZmZXJJZk5lZWRlZDpmdW5jdGlvbigpe3JldHVybiExfSxyZXJlbmRl
        cjpFbWJlci5LLGludm9rZU9ic2VydmVyOkVtYmVyLkt9fSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9RW1iZXIuVmlldy5zdGF0ZXMucHJlUmVuZGVyPUVtYmVyLmNy
        ZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVsdCk7RW1iZXIubWVyZ2Uo
        ZSx7aW5zZXJ0RWxlbWVudDpmdW5jdGlvbihlLHQpe2UuY3JlYXRlRWxlbWVu
        dCgpO3ZhciByPWUudmlld0hpZXJhcmNoeUNvbGxlY3Rpb24oKTtyLnRyaWdn
        ZXIoIndpbGxJbnNlcnRFbGVtZW50IiksdC5jYWxsKGUpO2Zvcih2YXIgbj1l
        LmdldCgiZWxlbWVudCIpO249bi5wYXJlbnROb2RlOyluPT09ZG9jdW1lbnQm
        JihyLnRyYW5zaXRpb25UbygiaW5ET00iLCExKSxyLnRyaWdnZXIoImRpZElu
        c2VydEVsZW1lbnQiKSl9LHJlbmRlclRvQnVmZmVySWZOZWVkZWQ6ZnVuY3Rp
        b24oZSx0KXtyZXR1cm4gZS5yZW5kZXJUb0J1ZmZlcih0KSwhMH0sZW1wdHk6
        RW1iZXIuSyxzZXRFbGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGwh
        PT10JiZlLnRyYW5zaXRpb25UbygiaGFzRWxlbWVudCIpLHR9fSl9KCksZnVu
        Y3Rpb24oKXtFbWJlci5nZXQsRW1iZXIuc2V0O3ZhciBlPUVtYmVyLlZpZXcu
        c3RhdGVzLmluQnVmZmVyPUVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRl
        cy5fZGVmYXVsdCk7RW1iZXIubWVyZ2UoZSx7JDpmdW5jdGlvbihlKXtyZXR1
        cm4gZS5yZXJlbmRlcigpLEVtYmVyLiQoKX0scmVyZW5kZXI6ZnVuY3Rpb24o
        KXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlNvbWV0aGluZyB5b3UgZGlkIGNh
        dXNlZCBhIHZpZXcgdG8gcmUtcmVuZGVyIGFmdGVyIGl0IHJlbmRlcmVkIGJ1
        dCBiZWZvcmUgaXQgd2FzIGluc2VydGVkIGludG8gdGhlIERPTS4iKX0sYXBw
        ZW5kQ2hpbGQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUuYnVmZmVyLGk9ZS5f
        Y2hpbGRWaWV3cztyZXR1cm4gdD1lLmNyZWF0ZUNoaWxkVmlldyh0LHIpLGku
        bGVuZ3RofHwoaT1lLl9jaGlsZFZpZXdzPWkuc2xpY2UoKSksaS5wdXNoKHQp
        LHQucmVuZGVyVG9CdWZmZXIobiksZS5wcm9wZXJ0eURpZENoYW5nZSgiY2hp
        bGRWaWV3cyIpLHR9LGRlc3Ryb3lFbGVtZW50OmZ1bmN0aW9uKGUpe2UuY2xl
        YXJCdWZmZXIoKTt2YXIgdD1lLl9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQo
        KTtyZXR1cm4gdC50cmFuc2l0aW9uVG8oInByZVJlbmRlciIsITEpLGV9LGVt
        cHR5OmZ1bmN0aW9uKCl7fSxyZW5kZXJUb0J1ZmZlcklmTmVlZGVkOmZ1bmN0
        aW9uKCl7cmV0dXJuITF9LGluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oKXt0aHJv
        dyJZb3UgY2FuJ3QgaW5zZXJ0IGFuIGVsZW1lbnQgdGhhdCBoYXMgYWxyZWFk
        eSBiZWVuIHJlbmRlcmVkIn0sc2V0RWxlbWVudDpmdW5jdGlvbihlLHQpe3Jl
        dHVybiBudWxsPT09dD9lLnRyYW5zaXRpb25UbygicHJlUmVuZGVyIik6KGUu
        Y2xlYXJCdWZmZXIoKSxlLnRyYW5zaXRpb25UbygiaGFzRWxlbWVudCIpKSx0
        fSxpbnZva2VPYnNlcnZlcjpmdW5jdGlvbihlLHQpe3QuY2FsbChlKX19KX0o
        KSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldCxyPUVt
        YmVyLlZpZXcuc3RhdGVzLmhhc0VsZW1lbnQ9RW1iZXIuY3JlYXRlKEVtYmVy
        LlZpZXcuc3RhdGVzLl9kZWZhdWx0KTtFbWJlci5tZXJnZShyLHskOmZ1bmN0
        aW9uKHQscil7dmFyIG49ZSh0LCJlbGVtZW50Iik7cmV0dXJuIHI/RW1iZXIu
        JChyLG4pOkVtYmVyLiQobil9LGdldEVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFy
        IHI9ZSh0LCJwYXJlbnRWaWV3Iik7cmV0dXJuIHImJihyPWUociwiZWxlbWVu
        dCIpKSxyP3QuZmluZEVsZW1lbnRJblBhcmVudEVsZW1lbnQocik6RW1iZXIu
        JCgiIyIrZSh0LCJlbGVtZW50SWQiKSlbMF19LHNldEVsZW1lbnQ6ZnVuY3Rp
        b24oZSx0KXtpZihudWxsIT09dCl0aHJvdyJZb3UgY2Fubm90IHNldCBhbiBl
        bGVtZW50IHRvIGEgbm9uLW51bGwgdmFsdWUgd2hlbiB0aGUgZWxlbWVudCBp
        cyBhbHJlYWR5IGluIHRoZSBET00uIjtyZXR1cm4gZS50cmFuc2l0aW9uVG8o
        InByZVJlbmRlciIpLHR9LHJlcmVuZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBl
        LnRyaWdnZXJSZWN1cnNpdmVseSgid2lsbENsZWFyUmVuZGVyIiksZS5jbGVh
        clJlbmRlcmVkQ2hpbGRyZW4oKSxlLmRvbU1hbmFnZXIucmVwbGFjZShlKSxl
        fSxkZXN0cm95RWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm4gZS5fbm90aWZ5
        V2lsbERlc3Ryb3lFbGVtZW50KCksZS5kb21NYW5hZ2VyLnJlbW92ZShlKSx0
        KGUsImVsZW1lbnQiLG51bGwpLGUuX3NjaGVkdWxlZEluc2VydCYmKEVtYmVy
        LnJ1bi5jYW5jZWwoZS5fc2NoZWR1bGVkSW5zZXJ0KSxlLl9zY2hlZHVsZWRJ
        bnNlcnQ9bnVsbCksZX0sZW1wdHk6ZnVuY3Rpb24oZSl7dmFyIHQscixuPWUu
        X2NoaWxkVmlld3M7aWYobilmb3IodD1uLmxlbmd0aCxyPTA7dD5yO3IrKylu
        W3JdLl9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQoKTtlLmRvbU1hbmFnZXIu
        ZW1wdHkoZSl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4g
        ZS5oYXModCk/ZS50cmlnZ2VyKHQscik6ITB9LGludm9rZU9ic2VydmVyOmZ1
        bmN0aW9uKGUsdCl7dC5jYWxsKGUpfX0pO3ZhciBuPUVtYmVyLlZpZXcuc3Rh
        dGVzLmluRE9NPUVtYmVyLmNyZWF0ZShyKTtFbWJlci5tZXJnZShuLHtlbnRl
        cjpmdW5jdGlvbihlKXtlLmlzVmlydHVhbHx8KEVtYmVyLlZpZXcudmlld3Nb
        ZS5lbGVtZW50SWRdPWUpLGUuYWRkQmVmb3JlT2JzZXJ2ZXIoImVsZW1lbnRJ
        ZCIsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNoYW5naW5n
        IGEgdmlldydzIGVsZW1lbnRJZCBhZnRlciBjcmVhdGlvbiBpcyBub3QgYWxs
        b3dlZCIpfSl9LGV4aXQ6ZnVuY3Rpb24oZSl7dGhpcy5pc1ZpcnR1YWx8fGRl
        bGV0ZSBFbWJlci5WaWV3LnZpZXdzW2UuZWxlbWVudElkXX0saW5zZXJ0RWxl
        bWVudDpmdW5jdGlvbigpe3Rocm93IllvdSBjYW4ndCBpbnNlcnQgYW4gZWxl
        bWVudCBpbnRvIHRoZSBET00gdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGluc2Vy
        dGVkIn19KX0oKSxmdW5jdGlvbigpe3ZhciBlPSJZb3UgY2FuJ3QgY2FsbCAl
        QCBvbiBhIHZpZXcgYmVpbmcgZGVzdHJveWVkIix0PUVtYmVyLlN0cmluZy5m
        bXQscj1FbWJlci5WaWV3LnN0YXRlcy5kZXN0cm95aW5nPUVtYmVyLmNyZWF0
        ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVsdCk7RW1iZXIubWVyZ2Uocix7
        YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJhcHBlbmRDaGls
        ZCJdKX0scmVyZW5kZXI6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJyZXJlbmRl
        ciJdKX0sZGVzdHJveUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJk
        ZXN0cm95RWxlbWVudCJdKX0sZW1wdHk6ZnVuY3Rpb24oKXt0aHJvdyB0KGUs
        WyJlbXB0eSJdKX0sc2V0RWxlbWVudDpmdW5jdGlvbigpe3Rocm93IHQoZSxb
        InNldCgnZWxlbWVudCcsIC4uLikiXSl9LHJlbmRlclRvQnVmZmVySWZOZWVk
        ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0saW5zZXJ0RWxlbWVudDpFbWJlci5L
        fSl9KCksZnVuY3Rpb24oKXtFbWJlci5WaWV3LmNsb25lU3RhdGVzPWZ1bmN0
        aW9uKGUpe3ZhciB0PXt9O3QuX2RlZmF1bHQ9e30sdC5wcmVSZW5kZXI9RW1i
        ZXIuY3JlYXRlKHQuX2RlZmF1bHQpLHQuZGVzdHJveWluZz1FbWJlci5jcmVh
        dGUodC5fZGVmYXVsdCksdC5pbkJ1ZmZlcj1FbWJlci5jcmVhdGUodC5fZGVm
        YXVsdCksdC5oYXNFbGVtZW50PUVtYmVyLmNyZWF0ZSh0Ll9kZWZhdWx0KSx0
        LmluRE9NPUVtYmVyLmNyZWF0ZSh0Lmhhc0VsZW1lbnQpO2Zvcih2YXIgciBp
        biBlKWUuaGFzT3duUHJvcGVydHkocikmJkVtYmVyLm1lcmdlKHRbcl0sZVty
        XSk7cmV0dXJuIHR9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixu
        KXt0LnRyaWdnZXJSZWN1cnNpdmVseSgid2lsbEluc2VydEVsZW1lbnQiKSxy
        P3IuZG9tTWFuYWdlci5hZnRlcihyLG4uc3RyaW5nKCkpOmUuZG9tTWFuYWdl
        ci5wcmVwZW5kKGUsbi5zdHJpbmcoKSksdC5mb3JFYWNoKGZ1bmN0aW9uKGUp
        e2UudHJhbnNpdGlvblRvKCJpbkRPTSIpLGUucHJvcGVydHlEaWRDaGFuZ2Uo
        ImVsZW1lbnQiKSxlLnRyaWdnZXJSZWN1cnNpdmVseSgiZGlkSW5zZXJ0RWxl
        bWVudCIpfSl9dmFyIHQ9RW1iZXIuVmlldy5jbG9uZVN0YXRlcyhFbWJlci5W
        aWV3LnN0YXRlcykscj1FbWJlci5nZXQsbj1FbWJlci5zZXQsaT1FbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxvPUVtYmVyLl9WaWV3Q29sbGVjdGlv
        bjtFbWJlci5Db250YWluZXJWaWV3PUVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVy
        Lk11dGFibGVBcnJheSx7c3RhdGVzOnQsaW5pdDpmdW5jdGlvbigpe3RoaXMu
        X3N1cGVyKCk7dmFyIGU9cih0aGlzLCJjaGlsZFZpZXdzIik7RW1iZXIuZGVm
        aW5lUHJvcGVydHkodGhpcywiY2hpbGRWaWV3cyIsRW1iZXIuVmlldy5jaGls
        ZFZpZXdzUHJvcGVydHkpO3ZhciB0PXRoaXMuX2NoaWxkVmlld3M7aShlLGZ1
        bmN0aW9uKGUsaSl7dmFyIG87InN0cmluZyI9PXR5cGVvZiBlPyhvPXIodGhp
        cyxlKSxvPXRoaXMuY3JlYXRlQ2hpbGRWaWV3KG8pLG4odGhpcyxlLG8pKTpv
        PXRoaXMuY3JlYXRlQ2hpbGRWaWV3KGUpLHRbaV09b30sdGhpcyk7dmFyIG89
        cih0aGlzLCJjdXJyZW50VmlldyIpO28mJih0Lmxlbmd0aHx8KHQ9dGhpcy5f
        Y2hpbGRWaWV3cz10aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCkpLHQucHVzaCh0
        aGlzLmNyZWF0ZUNoaWxkVmlldyhvKSkpfSxyZXBsYWNlOmZ1bmN0aW9uKGUs
        dCxuKXt2YXIgaT1uP3IobiwibGVuZ3RoIik6MDtpZih0aGlzLmFycmF5Q29u
        dGVudFdpbGxDaGFuZ2UoZSx0LGkpLHRoaXMuY2hpbGRWaWV3c1dpbGxDaGFu
        Z2UodGhpcy5fY2hpbGRWaWV3cyxlLHQpLDA9PT1pKXRoaXMuX2NoaWxkVmll
        d3Muc3BsaWNlKGUsdCk7ZWxzZXt2YXIgbz1bZSx0XS5jb25jYXQobik7bi5s
        ZW5ndGgmJiF0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aCYmKHRoaXMuX2NoaWxk
        Vmlld3M9dGhpcy5fY2hpbGRWaWV3cy5zbGljZSgpKSx0aGlzLl9jaGlsZFZp
        ZXdzLnNwbGljZS5hcHBseSh0aGlzLl9jaGlsZFZpZXdzLG8pfXJldHVybiB0
        aGlzLmFycmF5Q29udGVudERpZENoYW5nZShlLHQsaSksdGhpcy5jaGlsZFZp
        ZXdzRGlkQ2hhbmdlKHRoaXMuX2NoaWxkVmlld3MsZSx0LGkpLHRoaXN9LG9i
        amVjdEF0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGlsZFZpZXdzW2Vd
        fSxsZW5ndGg6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdGhp
        cy5fY2hpbGRWaWV3cy5sZW5ndGh9KS52b2xhdGlsZSgpLHJlbmRlcjpmdW5j
        dGlvbihlKXt0aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24odCl7dC5y
        ZW5kZXJUb0J1ZmZlcihlKX0pfSxpbnN0cnVtZW50TmFtZToiY29udGFpbmVy
        IixjaGlsZFZpZXdzV2lsbENoYW5nZTpmdW5jdGlvbihlLHQscil7aWYodGhp
        cy5wcm9wZXJ0eVdpbGxDaGFuZ2UoImNoaWxkVmlld3MiKSxyPjApe3ZhciBu
        PWUuc2xpY2UodCx0K3IpO3RoaXMuY3VycmVudFN0YXRlLmNoaWxkVmlld3NX
        aWxsQ2hhbmdlKHRoaXMsZSx0LHIpLHRoaXMuaW5pdGlhbGl6ZVZpZXdzKG4s
        bnVsbCxudWxsKX19LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGUpe3JldHVybiB0
        aGlzLnJlbW92ZU9iamVjdChlKSx0aGlzfSxjaGlsZFZpZXdzRGlkQ2hhbmdl
        OmZ1bmN0aW9uKGUsdCxuLGkpe2lmKGk+MCl7dmFyIG89ZS5zbGljZSh0LHQr
        aSk7dGhpcy5pbml0aWFsaXplVmlld3Mobyx0aGlzLHIodGhpcywidGVtcGxh
        dGVEYXRhIikpLHRoaXMuY3VycmVudFN0YXRlLmNoaWxkVmlld3NEaWRDaGFu
        Z2UodGhpcyxlLHQsaSl9dGhpcy5wcm9wZXJ0eURpZENoYW5nZSgiY2hpbGRW
        aWV3cyIpfSxpbml0aWFsaXplVmlld3M6ZnVuY3Rpb24oZSx0LG8pe2koZSxm
        dW5jdGlvbihlKXtuKGUsIl9wYXJlbnRWaWV3Iix0KSwhZS5jb250YWluZXIm
        JnQmJm4oZSwiY29udGFpbmVyIix0LmNvbnRhaW5lcikscihlLCJ0ZW1wbGF0
        ZURhdGEiKXx8bihlLCJ0ZW1wbGF0ZURhdGEiLG8pfSl9LGN1cnJlbnRWaWV3
        Om51bGwsX2N1cnJlbnRWaWV3V2lsbENoYW5nZTpFbWJlci5iZWZvcmVPYnNl
        cnZlcigiY3VycmVudFZpZXciLGZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJj
        dXJyZW50VmlldyIpO2UmJmUuZGVzdHJveSgpfSksX2N1cnJlbnRWaWV3RGlk
        Q2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjdXJyZW50VmlldyIsZnVuY3Rpb24o
        KXt2YXIgZT1yKHRoaXMsImN1cnJlbnRWaWV3Iik7ZSYmdGhpcy5wdXNoT2Jq
        ZWN0KGUpfSksX2Vuc3VyZUNoaWxkcmVuQXJlSW5ET006ZnVuY3Rpb24oKXt0
        aGlzLmN1cnJlbnRTdGF0ZS5lbnN1cmVDaGlsZHJlbkFyZUluRE9NKHRoaXMp
        fX0pLEVtYmVyLm1lcmdlKHQuX2RlZmF1bHQse2NoaWxkVmlld3NXaWxsQ2hh
        bmdlOkVtYmVyLkssY2hpbGRWaWV3c0RpZENoYW5nZTpFbWJlci5LLGVuc3Vy
        ZUNoaWxkcmVuQXJlSW5ET006RW1iZXIuS30pLEVtYmVyLm1lcmdlKHQuaW5C
        dWZmZXIse2NoaWxkVmlld3NEaWRDaGFuZ2U6ZnVuY3Rpb24oKXt0aHJvdyBu
        ZXcgRW1iZXIuRXJyb3IoIllvdSBjYW5ub3QgbW9kaWZ5IGNoaWxkIHZpZXdz
        IHdoaWxlIGluIHRoZSBpbkJ1ZmZlciBzdGF0ZSIpfX0pLEVtYmVyLm1lcmdl
        KHQuaGFzRWxlbWVudCx7Y2hpbGRWaWV3c1dpbGxDaGFuZ2U6ZnVuY3Rpb24o
        ZSx0LHIsbil7Zm9yKHZhciBpPXI7cituPmk7aSsrKXRbaV0ucmVtb3ZlKCl9
        LGNoaWxkVmlld3NEaWRDaGFuZ2U6ZnVuY3Rpb24oZSl7RW1iZXIucnVuLnNj
        aGVkdWxlT25jZSgicmVuZGVyIixlLCJfZW5zdXJlQ2hpbGRyZW5BcmVJbkRP
        TSIpfSxlbnN1cmVDaGlsZHJlbkFyZUluRE9NOmZ1bmN0aW9uKHQpe3ZhciBy
        LG4saSxhLHMsdT10Ll9jaGlsZFZpZXdzLGM9bmV3IG87Zm9yKHI9MCxuPXUu
        bGVuZ3RoO24+cjtyKyspaT11W3JdLHN8fChzPUVtYmVyLlJlbmRlckJ1ZmZl
        cigpLHMuX2hhc0VsZW1lbnQ9ITEpLGkucmVuZGVyVG9CdWZmZXJJZk5lZWRl
        ZChzKT9jLnB1c2goaSk6Yy5sZW5ndGg/KGUodCxjLGEscykscz1udWxsLGE9
        aSxjLmNsZWFyKCkpOmE9aTtjLmxlbmd0aCYmZSh0LGMsYSxzKX19KX0oKSxm
        dW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJlci5T
        dHJpbmcuZm10LEVtYmVyLkNvbGxlY3Rpb25WaWV3PUVtYmVyLkNvbnRhaW5l
        clZpZXcuZXh0ZW5kKHtjb250ZW50Om51bGwsZW1wdHlWaWV3Q2xhc3M6RW1i
        ZXIuVmlldyxlbXB0eVZpZXc6bnVsbCxpdGVtVmlld0NsYXNzOkVtYmVyLlZp
        ZXcsaW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N1cGVyKCk7cmV0dXJu
        IHRoaXMuX2NvbnRlbnREaWRDaGFuZ2UoKSxlfSxfY29udGVudFdpbGxDaGFu
        Z2U6RW1iZXIuYmVmb3JlT2JzZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7
        dmFyIHQ9dGhpcy5nZXQoImNvbnRlbnQiKTt0JiZ0LnJlbW92ZUFycmF5T2Jz
        ZXJ2ZXIodGhpcyk7dmFyIHI9dD9lKHQsImxlbmd0aCIpOjA7dGhpcy5hcnJh
        eVdpbGxDaGFuZ2UodCwwLHIpfSksX2NvbnRlbnREaWRDaGFuZ2U6RW1iZXIu
        b2JzZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJj
        b250ZW50Iik7dCYmKHRoaXMuX2Fzc2VydEFycmF5TGlrZSh0KSx0LmFkZEFy
        cmF5T2JzZXJ2ZXIodGhpcykpO3ZhciByPXQ/ZSh0LCJsZW5ndGgiKTowO3Ro
        aXMuYXJyYXlEaWRDaGFuZ2UodCwwLG51bGwscil9KSxfYXNzZXJ0QXJyYXlM
        aWtlOmZ1bmN0aW9uKCl7fSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5f
        c3VwZXIoKSl7dmFyIHQ9ZSh0aGlzLCJjb250ZW50Iik7cmV0dXJuIHQmJnQu
        cmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlzKSx0aGlzLl9jcmVhdGVkRW1wdHlW
        aWV3JiZ0aGlzLl9jcmVhdGVkRW1wdHlWaWV3LmRlc3Ryb3koKSx0aGlzfX0s
        YXJyYXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKHQscixuKXt2YXIgaT1lKHRoaXMs
        ImVtcHR5VmlldyIpO2kmJmkgaW5zdGFuY2VvZiBFbWJlci5WaWV3JiZpLnJl
        bW92ZUZyb21QYXJlbnQoKTt2YXIgbyxhLHMsdT10aGlzLl9jaGlsZFZpZXdz
        O3M9dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGg7dmFyIGM9bj09PXM7Zm9yKGMm
        Jih0aGlzLmN1cnJlbnRTdGF0ZS5lbXB0eSh0aGlzKSx0aGlzLmludm9rZVJl
        Y3Vyc2l2ZWx5KGZ1bmN0aW9uKGUpe2UucmVtb3ZlZEZyb21ET009ITB9LCEx
        KSksYT1yK24tMTthPj1yO2EtLSlvPXVbYV0sby5kZXN0cm95KCl9LGFycmF5
        RGlkQ2hhbmdlOmZ1bmN0aW9uKHIsbixpLG8pe3ZhciBhLHMsdSxjLGwsaCxt
        PVtdO2lmKGM9cj9lKHIsImxlbmd0aCIpOjApZm9yKGw9ZSh0aGlzLCJpdGVt
        Vmlld0NsYXNzIiksInN0cmluZyI9PXR5cGVvZiBsJiYobD1lKGwpfHxsKSx1
        PW47bitvPnU7dSsrKXM9ci5vYmplY3RBdCh1KSxhPXRoaXMuY3JlYXRlQ2hp
        bGRWaWV3KGwse2NvbnRlbnQ6cyxjb250ZW50SW5kZXg6dX0pLG0ucHVzaChh
        KTtlbHNle2lmKGg9ZSh0aGlzLCJlbXB0eVZpZXciKSwhaClyZXR1cm47InN0
        cmluZyI9PXR5cGVvZiBoJiYoaD1lKGgpfHxoKSxoPXRoaXMuY3JlYXRlQ2hp
        bGRWaWV3KGgpLG0ucHVzaChoKSx0KHRoaXMsImVtcHR5VmlldyIsaCksRW1i
        ZXIuQ29yZVZpZXcuZGV0ZWN0KGgpJiYodGhpcy5fY3JlYXRlZEVtcHR5Vmll
        dz1oKX10aGlzLnJlcGxhY2UobiwwLG0pfSxjcmVhdGVDaGlsZFZpZXc6ZnVu
        Y3Rpb24ocixuKXtyPXRoaXMuX3N1cGVyKHIsbik7dmFyIGk9ZShyLCJ0YWdO
        YW1lIik7cmV0dXJuKG51bGw9PT1pfHx2b2lkIDA9PT1pKSYmKGk9RW1iZXIu
        Q29sbGVjdGlvblZpZXcuQ09OVEFJTkVSX01BUFtlKHRoaXMsInRhZ05hbWUi
        KV0sdChyLCJ0YWdOYW1lIixpKSkscn19KSxFbWJlci5Db2xsZWN0aW9uVmll
        dy5DT05UQUlORVJfTUFQPXt1bDoibGkiLG9sOiJsaSIsdGFibGU6InRyIix0
        aGVhZDoidHIiLHRib2R5OiJ0ciIsdGZvb3Q6InRyIix0cjoidGQiLHNlbGVj
        dDoib3B0aW9uIn19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD1F
        bWJlci5zZXQscj0oRW1iZXIuaXNOb25lLEFycmF5LnByb3RvdHlwZS5zbGlj
        ZSk7RW1iZXIuQ29tcG9uZW50PUVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVyLlRh
        cmdldEFjdGlvblN1cHBvcnQse2luaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBl
        cigpLHQodGhpcywiY29udGV4dCIsdGhpcyksdCh0aGlzLCJjb250cm9sbGVy
        Iix0aGlzKX0sY2xvbmVLZXl3b3JkczpmdW5jdGlvbigpe3JldHVybnt2aWV3
        OnRoaXMsY29udHJvbGxlcjp0aGlzfX0sX3lpZWxkOmZ1bmN0aW9uKHQscil7
        dmFyIG49ci5kYXRhLnZpZXcsaT10aGlzLl9wYXJlbnRWaWV3LG89ZSh0aGlz
        LCJ0ZW1wbGF0ZSIpO28mJm4uYXBwZW5kQ2hpbGQoRW1iZXIuVmlldyx7aXNW
        aXJ0dWFsOiEwLHRhZ05hbWU6IiIsX2NvbnRleHRWaWV3OmksdGVtcGxhdGU6
        byxjb250ZXh0OmUoaSwiY29udGV4dCIpLGNvbnRyb2xsZXI6ZShpLCJjb250
        cm9sbGVyIiksdGVtcGxhdGVEYXRhOntrZXl3b3JkczppLmNsb25lS2V5d29y
        ZHMoKX19KX0sdGFyZ2V0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCl7dmFyIHQ9ZSh0aGlzLCJfcGFyZW50VmlldyIpO3JldHVybiB0P2UodCwi
        Y29udHJvbGxlciIpOm51bGx9KS5wcm9wZXJ0eSgiX3BhcmVudFZpZXciKSxz
        ZW5kQWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ci5jYWxsKGFyZ3VtZW50
        cywxKTtuPXZvaWQgMD09PXQ/ZSh0aGlzLCJhY3Rpb24iKTplKHRoaXMsdCks
        dm9pZCAwIT09biYmdGhpcy50cmlnZ2VyQWN0aW9uKHthY3Rpb246bixhY3Rp
        b25Db250ZXh0Oml9KX19KX0oKSxmdW5jdGlvbigpe0VtYmVyLlZpZXdUYXJn
        ZXRBY3Rpb25TdXBwb3J0PUVtYmVyLk1peGluLmNyZWF0ZShFbWJlci5UYXJn
        ZXRBY3Rpb25TdXBwb3J0LHt0YXJnZXQ6RW1iZXIuY29tcHV0ZWQuYWxpYXMo
        ImNvbnRyb2xsZXIiKSxhY3Rpb25Db250ZXh0OkVtYmVyLmNvbXB1dGVkLmFs
        aWFzKCJjb250ZXh0Iil9KX0oKSxmdW5jdGlvbigpe2UoIm1ldGFtb3JwaCIs
        W10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ly8gQ29weXJpZ2h0OiDCqTIw
        MTEgTXkgQ29tcGFueSBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCnZhciBl
        PWZ1bmN0aW9uKCl7fSx0PTAscj10aGlzLmRvY3VtZW50LG49KCJ1bmRlZmlu
        ZWQiPT10eXBlb2YgRU5WP3t9OkVOVikuRElTQUJMRV9SQU5HRV9BUEksaT0h
        biYmciYmImNyZWF0ZVJhbmdlImluIHImJiJ1bmRlZmluZWQiIT10eXBlb2Yg
        UmFuZ2UmJlJhbmdlLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21l
        bnQsbz1yJiZmdW5jdGlvbigpe3ZhciBlPXIuY3JlYXRlRWxlbWVudCgiZGl2
        Iik7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2PjwvZGl2PiIsZS5maXJzdENo
        aWxkLmlubmVySFRNTD0iPHNjcmlwdD48L3NjcmlwdD4iLCIiPT09ZS5maXJz
        dENoaWxkLmlubmVySFRNTH0oKSxhPXImJmZ1bmN0aW9uKCl7dmFyIGU9ci5j
        cmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5pbm5lckhUTUw9IlRlc3Q6
        IDxzY3JpcHQgdHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz48L3NjcmlwdD5W
        YWx1ZSIsIlRlc3Q6Ij09PWUuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUmJiIg
        VmFsdWUiPT09ZS5jaGlsZE5vZGVzWzJdLm5vZGVWYWx1ZX0oKSxzPWZ1bmN0
        aW9uKHIpe3ZhciBuO249dGhpcyBpbnN0YW5jZW9mIHM/dGhpczpuZXcgZSxu
        LmlubmVySFRNTD1yO3ZhciBpPSJtZXRhbW9ycGgtIit0Kys7cmV0dXJuIG4u
        c3RhcnQ9aSsiLXN0YXJ0IixuLmVuZD1pKyItZW5kIixufTtlLnByb3RvdHlw
        ZT1zLnByb3RvdHlwZTt2YXIgdSxjLGwsaCxtLGYscCxkLGI7aWYoaD1mdW5j
        dGlvbigpe3JldHVybiB0aGlzLnN0YXJ0VGFnKCkrdGhpcy5pbm5lckhUTUwr
        dGhpcy5lbmRUYWcoKX0sZD1mdW5jdGlvbigpe3JldHVybiI8c2NyaXB0IGlk
        PSciK3RoaXMuc3RhcnQrIicgdHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz48
        L3NjcmlwdD4ifSxiPWZ1bmN0aW9uKCl7cmV0dXJuIjxzY3JpcHQgaWQ9JyIr
        dGhpcy5lbmQrIicgdHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz48L3Njcmlw
        dD4ifSxpKXU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1yLmNyZWF0ZVJhbmdlKCks
        aT1yLmdldEVsZW1lbnRCeUlkKGUuc3RhcnQpLG89ci5nZXRFbGVtZW50QnlJ
        ZChlLmVuZCk7cmV0dXJuIHQ/KG4uc2V0U3RhcnRCZWZvcmUoaSksbi5zZXRF
        bmRBZnRlcihvKSk6KG4uc2V0U3RhcnRBZnRlcihpKSxuLnNldEVuZEJlZm9y
        ZShvKSksbn0sYz1mdW5jdGlvbihlLHQpe3ZhciByPXUodGhpcyx0KTtyLmRl
        bGV0ZUNvbnRlbnRzKCk7dmFyIG49ci5jcmVhdGVDb250ZXh0dWFsRnJhZ21l
        bnQoZSk7ci5pbnNlcnROb2RlKG4pfSxsPWZ1bmN0aW9uKCl7dmFyIGU9dSh0
        aGlzLCEwKTtlLmRlbGV0ZUNvbnRlbnRzKCl9LG09ZnVuY3Rpb24oZSl7dmFy
        IHQ9ci5jcmVhdGVSYW5nZSgpO3Quc2V0U3RhcnQoZSksdC5jb2xsYXBzZSgh
        MSk7dmFyIG49dC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQodGhpcy5vdXRl
        ckhUTUwoKSk7ZS5hcHBlbmRDaGlsZChuKX0sZj1mdW5jdGlvbihlKXt2YXIg
        dD1yLmNyZWF0ZVJhbmdlKCksbj1yLmdldEVsZW1lbnRCeUlkKHRoaXMuZW5k
        KTt0LnNldFN0YXJ0QWZ0ZXIobiksdC5zZXRFbmRBZnRlcihuKTt2YXIgaT10
        LmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChlKTt0Lmluc2VydE5vZGUoaSl9
        LHA9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5jcmVhdGVSYW5nZSgpLG49ci5nZXRF
        bGVtZW50QnlJZCh0aGlzLnN0YXJ0KTt0LnNldFN0YXJ0QWZ0ZXIobiksdC5z
        ZXRFbmRBZnRlcihuKTt2YXIgaT10LmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVu
        dChlKTt0Lmluc2VydE5vZGUoaSl9O2Vsc2V7dmFyIEU9e3NlbGVjdDpbMSwi
        PHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLGZp
        ZWxkc2V0OlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSx0YWJsZTpb
        MSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdGJvZHk6WzIsIjx0YWJsZT48dGJv
        ZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRyOlszLCI8dGFibGU+PHRib2R5
        Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxjb2xncm91cDpbMiwi
        PHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCI8L2NvbGdyb3Vw
        PjwvdGFibGU+Il0sbWFwOlsxLCI8bWFwPiIsIjwvbWFwPiJdLF9kZWZhdWx0
        OlswLCIiLCIiXX0sdj1mdW5jdGlvbihlLHQpe2lmKGUuZ2V0QXR0cmlidXRl
        KCJpZCIpPT09dClyZXR1cm4gZTt2YXIgcixuLGksbz1lLmNoaWxkTm9kZXMu
        bGVuZ3RoO2ZvcihyPTA7bz5yO3IrKylpZihuPWUuY2hpbGROb2Rlc1tyXSxp
        PTE9PT1uLm5vZGVUeXBlJiZ2KG4sdCkpcmV0dXJuIGl9LGc9ZnVuY3Rpb24o
        ZSx0KXt2YXIgbj1bXTtpZihhJiYodD10LnJlcGxhY2UoLyhccyspKDxzY3Jp
        cHQgaWQ9JyhbXiddKyknKS9nLGZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBu
        LnB1c2goW2ksdF0pLHJ9KSksZS5pbm5lckhUTUw9dCxuLmxlbmd0aD4wKXt2
        YXIgaSxvPW4ubGVuZ3RoO2ZvcihpPTA7bz5pO2krKyl7dmFyIHM9dihlLG5b
        aV1bMF0pLHU9ci5jcmVhdGVUZXh0Tm9kZShuW2ldWzFdKTtzLnBhcmVudE5v
        ZGUuaW5zZXJ0QmVmb3JlKHUscyl9fX0seT1mdW5jdGlvbihlLHQpe3ZhciBu
        PUVbZS50YWdOYW1lLnRvTG93ZXJDYXNlKCldfHxFLl9kZWZhdWx0LGk9blsw
        XSxhPW5bMV0scz1uWzJdO28mJih0PSImc2h5OyIrdCk7dmFyIHU9ci5jcmVh
        dGVFbGVtZW50KCJkaXYiKTtnKHUsYSt0K3MpO2Zvcih2YXIgYz0wO2k+PWM7
        YysrKXU9dS5maXJzdENoaWxkO2lmKG8pe2Zvcih2YXIgbD11OzE9PT1sLm5v
        ZGVUeXBlJiYhbC5ub2RlTmFtZTspbD1sLmZpcnN0Q2hpbGQ7Mz09PWwubm9k
        ZVR5cGUmJiLCrSI9PT1sLm5vZGVWYWx1ZS5jaGFyQXQoMCkmJihsLm5vZGVW
        YWx1ZT1sLm5vZGVWYWx1ZS5zbGljZSgxKSl9cmV0dXJuIHV9LHc9ZnVuY3Rp
        b24oZSl7Zm9yKDsiIj09PWUucGFyZW50Tm9kZS50YWdOYW1lOyllPWUucGFy
        ZW50Tm9kZTtyZXR1cm4gZX0sXz1mdW5jdGlvbihlLHQpe2UucGFyZW50Tm9k
        ZSE9PXQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShl
        LHQucGFyZW50Tm9kZS5maXJzdENoaWxkKX07Yz1mdW5jdGlvbihlLHQpe3Zh
        ciBuLGksbyxhPXcoci5nZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0KSkscz1y
        LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKSx1PXMucGFyZW50Tm9kZTtmb3Io
        XyhhLHMpLG49YS5uZXh0U2libGluZztuOyl7aWYoaT1uLm5leHRTaWJsaW5n
        LG89bj09PXMpe2lmKCF0KWJyZWFrO3M9bi5uZXh0U2libGluZ31pZihuLnBh
        cmVudE5vZGUucmVtb3ZlQ2hpbGQobiksbylicmVhaztuPWl9Zm9yKG49eShh
        LnBhcmVudE5vZGUsZSk7bjspaT1uLm5leHRTaWJsaW5nLHUuaW5zZXJ0QmVm
        b3JlKG4scyksbj1pfSxsPWZ1bmN0aW9uKCl7dmFyIGU9dyhyLmdldEVsZW1l
        bnRCeUlkKHRoaXMuc3RhcnQpKSx0PXIuZ2V0RWxlbWVudEJ5SWQodGhpcy5l
        bmQpO3RoaXMuaHRtbCgiIiksZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUp
        LHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX0sbT1mdW5jdGlvbihlKXtm
        b3IodmFyIHQscj15KGUsdGhpcy5vdXRlckhUTUwoKSk7cjspdD1yLm5leHRT
        aWJsaW5nLGUuYXBwZW5kQ2hpbGQocikscj10fSxmPWZ1bmN0aW9uKGUpe3Zh
        ciB0LG4saT1yLmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKSxvPWkubmV4dFNp
        YmxpbmcsYT1pLnBhcmVudE5vZGU7Zm9yKG49eShhLGUpO247KXQ9bi5uZXh0
        U2libGluZyxhLmluc2VydEJlZm9yZShuLG8pLG49dH0scD1mdW5jdGlvbihl
        KXt2YXIgdCxuLGk9ci5nZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0KSxvPWku
        cGFyZW50Tm9kZTtuPXkobyxlKTtmb3IodmFyIGE9aS5uZXh0U2libGluZztu
        Oyl0PW4ubmV4dFNpYmxpbmcsby5pbnNlcnRCZWZvcmUobixhKSxuPXR9fXJl
        dHVybiBzLnByb3RvdHlwZS5odG1sPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlz
        LmNoZWNrUmVtb3ZlZCgpLHZvaWQgMD09PWU/dGhpcy5pbm5lckhUTUw6KGMu
        Y2FsbCh0aGlzLGUpLHRoaXMuaW5uZXJIVE1MPWUsdm9pZCAwKX0scy5wcm90
        b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24oZSl7dGhpcy5jaGVja1JlbW92
        ZWQoKSxjLmNhbGwodGhpcyxlLCEwKX0scy5wcm90b3R5cGUucmVtb3ZlPWws
        cy5wcm90b3R5cGUub3V0ZXJIVE1MPWgscy5wcm90b3R5cGUuYXBwZW5kVG89
        bSxzLnByb3RvdHlwZS5hZnRlcj1mLHMucHJvdG90eXBlLnByZXBlbmQ9cCxz
        LnByb3RvdHlwZS5zdGFydFRhZz1kLHMucHJvdG90eXBlLmVuZFRhZz1iLHMu
        cHJvdG90eXBlLmlzUmVtb3ZlZD1mdW5jdGlvbigpe3ZhciBlPXIuZ2V0RWxl
        bWVudEJ5SWQodGhpcy5zdGFydCksdD1yLmdldEVsZW1lbnRCeUlkKHRoaXMu
        ZW5kKTtyZXR1cm4hZXx8IXR9LHMucHJvdG90eXBlLmNoZWNrUmVtb3ZlZD1m
        dW5jdGlvbigpe2lmKHRoaXMuaXNSZW1vdmVkKCkpdGhyb3cgbmV3IEVycm9y
        KCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb25zIG9uIGEgTWV0YW1vcnBoIHRo
        YXQgaXMgbm90IGluIHRoZSBET00uIil9LHN9KX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt9
        cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9LHQ9dGhpcy5IYW5kbGViYXJz
        fHxFbWJlci5pbXBvcnRzJiZFbWJlci5pbXBvcnRzLkhhbmRsZWJhcnM7dHx8
        ImZ1bmN0aW9uIiE9dHlwZW9mIHJlcXVpcmV8fCh0PXJlcXVpcmUoImhhbmRs
        ZWJhcnMiKSksRW1iZXIuSGFuZGxlYmFycz1lKHQpLEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyPWZ1bmN0aW9uKGUsdCl7RW1iZXIuVmlldy5kZXRlY3QodCk/
        RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihlLEVtYmVyLkhhbmRs
        ZWJhcnMubWFrZVZpZXdIZWxwZXIodCkpOkVtYmVyLkhhbmRsZWJhcnMucmVn
        aXN0ZXJCb3VuZEhlbHBlci5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVtYmVy
        LkhhbmRsZWJhcnMubWFrZVZpZXdIZWxwZXI9ZnVuY3Rpb24oZSl7cmV0dXJu
        IGZ1bmN0aW9uKHQpe3JldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMu
        dmlldy5jYWxsKHRoaXMsZSx0KX19LEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cz1lKHQuaGVscGVycyksRW1iZXIuSGFuZGxlYmFycy5Db21waWxlcj1mdW5j
        dGlvbigpe30sdC5Db21waWxlciYmKEVtYmVyLkhhbmRsZWJhcnMuQ29tcGls
        ZXIucHJvdG90eXBlPWUodC5Db21waWxlci5wcm90b3R5cGUpKSxFbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZS5jb21waWxlcj1FbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyPWZ1bmN0aW9uKCl7fSx0LkphdmFTY3JpcHRDb21waWxlciYm
        KEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlw
        ZT1lKHQuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZSksRW1iZXIuSGFu
        ZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGVy
        PUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyKSxFbWJlci5I
        YW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUubmFtZXNw
        YWNlPSJFbWJlci5IYW5kbGViYXJzIixFbWJlci5IYW5kbGViYXJzLkphdmFT
        Y3JpcHRDb21waWxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUJ1ZmZlcj1mdW5j
        dGlvbigpe3JldHVybiInJyJ9LEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyLnByb3RvdHlwZS5hcHBlbmRUb0J1ZmZlcj1mdW5jdGlvbihl
        KXtyZXR1cm4iZGF0YS5idWZmZXIucHVzaCgiK2UrIik7In07dmFyIHI9L2hl
        bHBlcnNcLiguKj8pXCkvLG49L2hlbHBlcnNcWycoLio/KScvLGk9LyguKmJs
        b2NrSGVscGVyTWlzc2luZ1wuY2FsbFwoLiopKHN0YWNrWzAtOV0rKSgsLiop
        LztFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5zdHJpbmdp
        ZnlMYXN0QmxvY2tIZWxwZXJNaXNzaW5nSW52b2NhdGlvbj1mdW5jdGlvbihl
        KXt2YXIgdD1lW2UubGVuZ3RoLTFdLG89KHIuZXhlYyh0KXx8bi5leGVjKHQp
        KVsxXSxhPWkuZXhlYyh0KTtlW2UubGVuZ3RoLTFdPWFbMV0rIiciK28rIici
        K2FbM119O3ZhciBvPUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBp
        bGVyLnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9u
        LGE9RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90
        eXBlLmJsb2NrVmFsdWU7RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmJsb2NrVmFsdWU9ZnVuY3Rpb24oKXthLmFwcGx5
        KHRoaXMsYXJndW1lbnRzKSxvKHRoaXMuc291cmNlKX07dmFyIHM9RW1iZXIu
        SGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmFtYmln
        dW91c0Jsb2NrVmFsdWU7RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU9ZnVuY3Rpb24o
        KXtzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxvKHRoaXMuc291cmNlKX07dmFy
        IHU9ImVtYmVyIisgK25ldyBEYXRlLGM9MTtFbWJlci5IYW5kbGViYXJzLkNv
        bXBpbGVyLnByb3RvdHlwZS5tdXN0YWNoZT1mdW5jdGlvbihlKXtpZihlLmlz
        SGVscGVyJiYiY29udHJvbCI9PT1lLmlkLnN0cmluZyllLmhhc2g9ZS5oYXNo
        fHxuZXcgdC5BU1QuSGFzaE5vZGUoW10pLGUuaGFzaC5wYWlycy5wdXNoKFsi
        Y29udHJvbElEIixuZXcgdC5BU1QuU3RyaW5nTm9kZSh1K2MrKyldKTtlbHNl
        IGlmKGUucGFyYW1zLmxlbmd0aHx8ZS5oYXNoKTtlbHNle3ZhciByPW5ldyB0
        LkFTVC5JZE5vZGUoW3twYXJ0OiJfdHJpYWdlTXVzdGFjaGUifV0pO2UuZXNj
        YXBlZHx8KGUuaGFzaD1lLmhhc2h8fG5ldyB0LkFTVC5IYXNoTm9kZShbXSks
        ZS5oYXNoLnBhaXJzLnB1c2goWyJ1bmVzY2FwZWQiLG5ldyB0LkFTVC5TdHJp
        bmdOb2RlKCJ0cnVlIildKSksZT1uZXcgdC5BU1QuTXVzdGFjaGVOb2RlKFty
        XS5jb25jYXQoW2UuaWRdKSxlLmhhc2gsIWUuZXNjYXBlZCl9cmV0dXJuIHQu
        Q29tcGlsZXIucHJvdG90eXBlLm11c3RhY2hlLmNhbGwodGhpcyxlKX0sRW1i
        ZXIuSGFuZGxlYmFycy5wcmVjb21waWxlPWZ1bmN0aW9uKGUpe3ZhciByPXQu
        cGFyc2UoZSksbj17a25vd25IZWxwZXJzOnthY3Rpb246ITAsdW5ib3VuZDoh
        MCxiaW5kQXR0cjohMCx0ZW1wbGF0ZTohMCx2aWV3OiEwLF90cmlhZ2VNdXN0
        YWNoZTohMH0sZGF0YTohMCxzdHJpbmdQYXJhbXM6ITB9LGk9KG5ldyBFbWJl
        ci5IYW5kbGViYXJzLkNvbXBpbGVyKS5jb21waWxlKHIsbik7cmV0dXJuKG5l
        dyBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlcikuY29tcGls
        ZShpLG4sdm9pZCAwLCEwKX0sdC5jb21waWxlJiYoRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlPWZ1bmN0aW9uKGUpe3ZhciByPXQucGFyc2UoZSksbj17ZGF0
        YTohMCxzdHJpbmdQYXJhbXM6ITB9LGk9KG5ldyBFbWJlci5IYW5kbGViYXJz
        LkNvbXBpbGVyKS5jb21waWxlKHIsbiksbz0obmV3IEVtYmVyLkhhbmRsZWJh
        cnMuSmF2YVNjcmlwdENvbXBpbGVyKS5jb21waWxlKGksbix2b2lkIDAsITAp
        LGE9RW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZShvKTtyZXR1cm4gYS5pc01l
        dGhvZD0hMSxhfSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG4p
        e3ZhciBpLG8sYSxzLHU9W10sYz1uLmhhc2gsbD1jLmJvdW5kT3B0aW9ucztm
        b3IocyBpbiBsKWwuaGFzT3duUHJvcGVydHkocykmJihjW3NdPUVtYmVyLkhh
        bmRsZWJhcnMuZ2V0KGUsbFtzXSxuKSk7Zm9yKGk9MCxvPXIubGVuZ3RoO28+
        aTsrK2kpYT1yW2ldLHUucHVzaChFbWJlci5IYW5kbGViYXJzLmdldChhLnJv
        b3QsYS5wYXRoLG4pKTtyZXR1cm4gdS5wdXNoKG4pLHQuYXBwbHkoZSx1KX12
        YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2Uscj1FbWJlci5IYW5kbGViYXJz
        LnRlbXBsYXRlLG49RW1iZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoPWZ1
        bmN0aW9uKGUsdCxyKXt2YXIgbixpLG89ciYmci5rZXl3b3Jkc3x8e307cmV0
        dXJuIG49dC5zcGxpdCgiLiIsMSlbMF0sby5oYXNPd25Qcm9wZXJ0eShuKSYm
        KGU9b1tuXSxpPSEwLHQ9dD09PW4/IiI6dC5zdWJzdHIobi5sZW5ndGgrMSkp
        LHtyb290OmUscGF0aDp0LGlzS2V5d29yZDppfX0saT1FbWJlci5IYW5kbGVi
        YXJzLmdldD1mdW5jdGlvbihlLHQscil7dmFyIGksbz1yJiZyLmRhdGEsYT1u
        KGUsdCxvKTtyZXR1cm4gZT1hLnJvb3QsdD1hLnBhdGgsaT1FbWJlci5nZXQo
        ZSx0KSx2b2lkIDA9PT1pJiZlIT09RW1iZXIubG9va3VwJiZFbWJlci5pc0ds
        b2JhbFBhdGgodCkmJihpPUVtYmVyLmdldChFbWJlci5sb29rdXAsdCkpLGl9
        O0VtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBhcmFtcz1mdW5jdGlvbihlLHQs
        cil7Zm9yKHZhciBuLG8sYT1bXSxzPXIudHlwZXMsdT0wLGM9dC5sZW5ndGg7
        Yz51O3UrKyluPXRbdV0sbz1zW3VdLCJJRCI9PT1vP2EucHVzaChpKGUsbixy
        KSk6YS5wdXNoKG4pO3JldHVybiBhfSxFbWJlci5IYW5kbGViYXJzLnJlc29s
        dmVIYXNoPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvPXt9LGE9ci5oYXNoVHlw
        ZXM7Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKG49YVtz
        XSxvW3NdPSJJRCI9PT1uP2koZSx0W3NdLHIpOnRbc10pO3JldHVybiBvfSxF
        bWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJoZWxwZXJNaXNzaW5n
        IixmdW5jdGlvbihlKXt2YXIgcixuPSIiLGk9YXJndW1lbnRzW2FyZ3VtZW50
        cy5sZW5ndGgtMV0sbz1FbWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxwZXIo
        aS5kYXRhLnZpZXcuY29udGFpbmVyLGUpO2lmKG8pcmV0dXJuIG8uYXBwbHko
        dGhpcyx0LmNhbGwoYXJndW1lbnRzLDEpKTt0aHJvdyByPSIlQCBIYW5kbGVi
        YXJzIGVycm9yOiBDb3VsZCBub3QgZmluZCBwcm9wZXJ0eSAnJUAnIG9uIG9i
        amVjdCAlQC4iLGkuZGF0YSYmKG49aS5kYXRhLnZpZXcpLG5ldyBFbWJlci5F
        cnJvcihFbWJlci5TdHJpbmcuZm10KHIsW24sZSx0aGlzXSkpfSksRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigiYmxvY2tIZWxwZXJNaXNzaW5n
        IixmdW5jdGlvbihlKXt2YXIgcj1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0
        aC0xXSxuPUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhlbHBlcihyLmRhdGEu
        dmlldy5jb250YWluZXIsZSk7cmV0dXJuIG4/bi5hcHBseSh0aGlzLHQuY2Fs
        bChhcmd1bWVudHMsMSkpOkhhbmRsZWJhcnMuaGVscGVycy5ibG9ja0hlbHBl
        ck1pc3NpbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksRW1iZXIuSGFuZGxl
        YmFycy5yZWdpc3RlckJvdW5kSGVscGVyPWZ1bmN0aW9uKGUpe3ZhciByPXQu
        Y2FsbChhcmd1bWVudHMsMSksbj1FbWJlci5IYW5kbGViYXJzLm1ha2VCb3Vu
        ZEhlbHBlci5hcHBseSh0aGlzLHIpO0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0
        ZXJIZWxwZXIoZSxuKX0sRW1iZXIuSGFuZGxlYmFycy5tYWtlQm91bmRIZWxw
        ZXI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gaSgpe3ZhciBpLGEscyx1LGMsbD10
        LmNhbGwoYXJndW1lbnRzLDAsLTEpLGg9bC5sZW5ndGgsbT1hcmd1bWVudHNb
        YXJndW1lbnRzLmxlbmd0aC0xXSxmPVtdLHA9bS50eXBlcyxkPW0uZGF0YSxi
        PW0uaGFzaCxFPWQudmlldyx2PW0uY29udGV4dHMsZz12JiZ2Lmxlbmd0aD92
        WzBdOnRoaXMseT0iIix3PUVtYmVyLl9TaW1wbGVIYW5kbGViYXJzVmlldy5w
        cm90b3R5cGUubm9ybWFsaXplZFZhbHVlLF89Yi5ib3VuZE9wdGlvbnM9e307
        Zm9yKHMgaW4gYilFbWJlci5JU19CSU5ESU5HLnRlc3QocykmJihfW3Muc2xp
        Y2UoMCwtNyldPWJbc10pO3ZhciBDPVtdO2ZvcihkLnByb3BlcnRpZXM9W10s
        aT0wO2g+aTsrK2kpaWYoZC5wcm9wZXJ0aWVzLnB1c2gobFtpXSksIklEIj09
        PXBbaV0pe3ZhciBPPW4oZyxsW2ldLGQpO2YucHVzaChPKSxDLnB1c2goTyl9
        ZWxzZSBmLnB1c2gobnVsbCk7aWYoZC5pc1VuYm91bmQpcmV0dXJuIGUodGhp
        cyxyLGYsbSk7dmFyIEE9bmV3IEVtYmVyLl9TaW1wbGVIYW5kbGViYXJzVmll
        dyhudWxsLG51bGwsIW0uaGFzaC51bmVzY2FwZWQsbS5kYXRhKTtBLm5vcm1h
        bGl6ZWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBlLHQ9W107Zm9yKGUgaW4gXylf
        Lmhhc093blByb3BlcnR5KGUpJiYoYz1uKGcsX1tlXSxkKSxBLnBhdGg9Yy5w
        YXRoLEEucGF0aFJvb3Q9Yy5yb290LGJbZV09dy5jYWxsKEEpKTtmb3IoaT0w
        O2g+aTsrK2kpYz1mW2ldLGM/KEEucGF0aD1jLnBhdGgsQS5wYXRoUm9vdD1j
        LnJvb3QsdC5wdXNoKHcuY2FsbChBKSkpOnQucHVzaChsW2ldKTtyZXR1cm4g
        dC5wdXNoKG0pLHIuYXBwbHkoZyx0KX0sRS5hcHBlbmRDaGlsZChBKTtmb3Io
        dSBpbiBfKV8uaGFzT3duUHJvcGVydHkodSkmJkMucHVzaChuKGcsX1t1XSxk
        KSk7Zm9yKGk9MCxhPUMubGVuZ3RoO2E+aTsrK2kpYz1DW2ldLEUucmVnaXN0
        ZXJPYnNlcnZlcihjLnJvb3QsYy5wYXRoLEEsQS5yZXJlbmRlcik7aWYoIklE
        Ij09PXBbMF0mJjAhPT1mLmxlbmd0aCl7dmFyIFA9ZlswXSx4PVAucm9vdCxU
        PVAucGF0aDtFbWJlci5pc0VtcHR5KFQpfHwoeT1UKyIuIik7Zm9yKHZhciBW
        PTAsUz1vLmxlbmd0aDtTPlY7VisrKUUucmVnaXN0ZXJPYnNlcnZlcih4LHkr
        b1tWXSxBLEEucmVyZW5kZXIpfX12YXIgbz10LmNhbGwoYXJndW1lbnRzLDEp
        O3JldHVybiBpLl9yYXdGdW5jdGlvbj1yLGl9LEVtYmVyLkhhbmRsZWJhcnMu
        dGVtcGxhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9cihlKTtyZXR1cm4gdC5pc1Rv
        cD0hMCx0fX0oKSxmdW5jdGlvbigpe0VtYmVyLlN0cmluZy5odG1sU2FmZT1m
        dW5jdGlvbihlKXtyZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhl
        KX07dmFyIGU9RW1iZXIuU3RyaW5nLmh0bWxTYWZlOyhFbWJlci5FWFRFTkRf
        UFJPVE9UWVBFUz09PSEwfHxFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5TdHJp
        bmcpJiYoU3RyaW5nLnByb3RvdHlwZS5odG1sU2FmZT1mdW5jdGlvbigpe3Jl
        dHVybiBlKHRoaXMpfSl9KCksZnVuY3Rpb24oKXtFbWJlci5IYW5kbGViYXJz
        LnJlc29sdmVQYXRocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj1lLmNv
        bnRleHRzLG49ZS5yb290cyxpPWUuZGF0YSxvPTAsYT1yLmxlbmd0aDthPm87
        bysrKXQucHVzaChFbWJlci5IYW5kbGViYXJzLmdldChuW29dLHJbb10se2Rh
        dGE6aX0pKTtyZXR1cm4gdH19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7
        RW1iZXIucnVuLm9uY2UoRW1iZXIuVmlldywibm90aWZ5TXV0YXRpb25MaXN0
        ZW5lcnMiKX1FbWJlci5zZXQsRW1iZXIuZ2V0O3ZhciByPXQoIm1ldGFtb3Jw
        aCIpLG49e3JlbW92ZTpmdW5jdGlvbih0KXt0Lm1vcnBoLnJlbW92ZSgpLGUo
        KX0scHJlcGVuZDpmdW5jdGlvbih0LHIpe3QubW9ycGgucHJlcGVuZChyKSxl
        KCl9LGFmdGVyOmZ1bmN0aW9uKHQscil7dC5tb3JwaC5hZnRlcihyKSxlKCl9
        LGh0bWw6ZnVuY3Rpb24odCxyKXt0Lm1vcnBoLmh0bWwociksZSgpfSxyZXBs
        YWNlOmZ1bmN0aW9uKHQpe3ZhciByPXQubW9ycGg7dC50cmFuc2l0aW9uVG8o
        InByZVJlbmRlciIpLEVtYmVyLnJ1bi5zY2hlZHVsZSgicmVuZGVyIix0aGlz
        LGZ1bmN0aW9uKCl7aWYoIXQuaXNEZXN0cm95aW5nKXt0LmNsZWFyUmVuZGVy
        ZWRDaGlsZHJlbigpO3ZhciBuPXQucmVuZGVyVG9CdWZmZXIoKTt0Lmludm9r
        ZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKGUpe2UucHJvcGVydHlXaWxsQ2hhbmdl
        KCJlbGVtZW50Iil9KSx0LnRyaWdnZXJSZWN1cnNpdmVseSgid2lsbEluc2Vy
        dEVsZW1lbnQiKSxyLnJlcGxhY2VXaXRoKG4uc3RyaW5nKCkpLHQudHJhbnNp
        dGlvblRvKCJpbkRPTSIpLHQuaW52b2tlUmVjdXJzaXZlbHkoZnVuY3Rpb24o
        ZSl7ZS5wcm9wZXJ0eURpZENoYW5nZSgiZWxlbWVudCIpfSksdC50cmlnZ2Vy
        UmVjdXJzaXZlbHkoImRpZEluc2VydEVsZW1lbnQiKSxlKCl9fSl9LGVtcHR5
        OmZ1bmN0aW9uKHQpe3QubW9ycGguaHRtbCgiIiksZSgpfX07RW1iZXIuX01l
        dGFtb3JwaD1FbWJlci5NaXhpbi5jcmVhdGUoe2lzVmlydHVhbDohMCx0YWdO
        YW1lOiIiLGluc3RydW1lbnROYW1lOiJtZXRhbW9ycGgiLGluaXQ6ZnVuY3Rp
        b24oKXt0aGlzLl9zdXBlcigpLHRoaXMubW9ycGg9cigpfSxiZWZvcmVSZW5k
        ZXI6ZnVuY3Rpb24oZSl7ZS5wdXNoKHRoaXMubW9ycGguc3RhcnRUYWcoKSks
        ZS5wdXNoT3BlbmluZ1RhZygpfSxhZnRlclJlbmRlcjpmdW5jdGlvbihlKXtl
        LnB1c2hDbG9zaW5nVGFnKCksZS5wdXNoKHRoaXMubW9ycGguZW5kVGFnKCkp
        fSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZW5kZXJU
        b0J1ZmZlcigpO3RoaXMub3V0ZXJIVE1MPWUuc3RyaW5nKCksdGhpcy5jbGVh
        ckJ1ZmZlcigpfSxkb21NYW5hZ2VyOm59KSxFbWJlci5fTWV0YW1vcnBoVmll
        dz1FbWJlci5WaWV3LmV4dGVuZChFbWJlci5fTWV0YW1vcnBoKSxFbWJlci5f
        U2ltcGxlTWV0YW1vcnBoVmlldz1FbWJlci5Db3JlVmlldy5leHRlbmQoRW1i
        ZXIuX01ldGFtb3JwaCl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxy
        LG4pe3RoaXMucGF0aD1lLHRoaXMucGF0aFJvb3Q9dCx0aGlzLmlzRXNjYXBl
        ZD1yLHRoaXMudGVtcGxhdGVEYXRhPW4sdGhpcy5tb3JwaD1vKCksdGhpcy5z
        dGF0ZT0icHJlUmVuZGVyIix0aGlzLnVwZGF0ZUlkPW51bGwsdGhpcy5fcGFy
        ZW50Vmlldz1udWxsLHRoaXMuYnVmZmVyPW51bGx9dmFyIHI9RW1iZXIuZ2V0
        LG49RW1iZXIuc2V0LGk9RW1iZXIuSGFuZGxlYmFycy5nZXQsbz10KCJtZXRh
        bW9ycGgiKTtFbWJlci5fU2ltcGxlSGFuZGxlYmFyc1ZpZXc9ZSxlLnByb3Rv
        dHlwZT17aXNWaXJ0dWFsOiEwLGlzVmlldzohMCxkZXN0cm95OmZ1bmN0aW9u
        KCl7dGhpcy51cGRhdGVJZCYmKEVtYmVyLnJ1bi5jYW5jZWwodGhpcy51cGRh
        dGVJZCksdGhpcy51cGRhdGVJZD1udWxsKSx0aGlzLl9wYXJlbnRWaWV3JiZ0
        aGlzLl9wYXJlbnRWaWV3LnJlbW92ZUNoaWxkKHRoaXMpLHRoaXMubW9ycGg9
        bnVsbCx0aGlzLnN0YXRlPSJkZXN0cm95ZWQifSxwcm9wZXJ0eVdpbGxDaGFu
        Z2U6RW1iZXIuSyxwcm9wZXJ0eURpZENoYW5nZTpFbWJlci5LLG5vcm1hbGl6
        ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQscj10aGlzLnBhdGgsbj10aGlz
        LnBhdGhSb290O3JldHVybiIiPT09cj9lPW46KHQ9dGhpcy50ZW1wbGF0ZURh
        dGEsZT1pKG4scix7ZGF0YTp0fSkpLGV9LHJlbmRlclRvQnVmZmVyOmZ1bmN0
        aW9uKGUpe3ZhciB0PSIiO3QrPXRoaXMubW9ycGguc3RhcnRUYWcoKSx0Kz10
        aGlzLnJlbmRlcigpLHQrPXRoaXMubW9ycGguZW5kVGFnKCksZS5wdXNoKHQp
        fSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlzRXNjYXBlZCx0PXRo
        aXMubm9ybWFsaXplZFZhbHVlKCk7cmV0dXJuIG51bGw9PT10fHx2b2lkIDA9
        PT10P3Q9IiI6dCBpbnN0YW5jZW9mIEhhbmRsZWJhcnMuU2FmZVN0cmluZ3x8
        KHQ9U3RyaW5nKHQpKSxlJiYodD1IYW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4
        cHJlc3Npb24odCkpLHR9LHJlcmVuZGVyOmZ1bmN0aW9uKCl7c3dpdGNoKHRo
        aXMuc3RhdGUpe2Nhc2UicHJlUmVuZGVyIjpjYXNlImRlc3Ryb3llZCI6YnJl
        YWs7Y2FzZSJpbkJ1ZmZlciI6dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJTb21l
        dGhpbmcgeW91IGRpZCB0cmllZCB0byByZXBsYWNlIGFuIHt7ZXhwcmVzc2lv
        bn19IGJlZm9yZSBpdCB3YXMgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLiIpO2Nh
        c2UiaGFzRWxlbWVudCI6Y2FzZSJpbkRPTSI6dGhpcy51cGRhdGVJZD1FbWJl
        ci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHRoaXMsInVwZGF0ZSIpfXJl
        dHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUlkPW51
        bGwsdGhpcy5tb3JwaC5odG1sKHRoaXMucmVuZGVyKCkpfSx0cmFuc2l0aW9u
        VG86ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lfX07dmFyIGE9RW1iZXIuVmll
        dy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0YXRlcykscz1FbWJlci5tZXJn
        ZTtzKGEuX2RlZmF1bHQse3JlcmVuZGVySWZOZWVkZWQ6RW1iZXIuS30pLHMo
        YS5pbkRPTSx7cmVyZW5kZXJJZk5lZWRlZDpmdW5jdGlvbihlKXtlLm5vcm1h
        bGl6ZWRWYWx1ZSgpIT09ZS5fbGFzdE5vcm1hbGl6ZWRWYWx1ZSYmZS5yZXJl
        bmRlcigpfX0pLEVtYmVyLl9IYW5kbGViYXJzQm91bmRWaWV3PUVtYmVyLl9N
        ZXRhbW9ycGhWaWV3LmV4dGVuZCh7aW5zdHJ1bWVudE5hbWU6ImJvdW5kSGFu
        ZGxlYmFycyIsc3RhdGVzOmEsc2hvdWxkRGlzcGxheUZ1bmM6bnVsbCxwcmVz
        ZXJ2ZUNvbnRleHQ6ITEscHJldmlvdXNDb250ZXh0Om51bGwsZGlzcGxheVRl
        bXBsYXRlOm51bGwsaW52ZXJzZVRlbXBsYXRlOm51bGwscGF0aDpudWxsLHBh
        dGhSb290Om51bGwsbm9ybWFsaXplZFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUs
        dCxuPXIodGhpcywicGF0aCIpLG89cih0aGlzLCJwYXRoUm9vdCIpLGE9cih0
        aGlzLCJ2YWx1ZU5vcm1hbGl6ZXJGdW5jIik7cmV0dXJuIiI9PT1uP2U9bzoo
        dD1yKHRoaXMsInRlbXBsYXRlRGF0YSIpLGU9aShvLG4se2RhdGE6dH0pKSxh
        P2EoZSk6ZX0scmVyZW5kZXJJZk5lZWRlZDpmdW5jdGlvbigpe3RoaXMuY3Vy
        cmVudFN0YXRlLnJlcmVuZGVySWZOZWVkZWQodGhpcyl9LHJlbmRlcjpmdW5j
        dGlvbihlKXt2YXIgdD1yKHRoaXMsImlzRXNjYXBlZCIpLGk9cih0aGlzLCJz
        aG91bGREaXNwbGF5RnVuYyIpLG89cih0aGlzLCJwcmVzZXJ2ZUNvbnRleHQi
        KSxhPXIodGhpcywicHJldmlvdXNDb250ZXh0Iikscz1yKHRoaXMsImludmVy
        c2VUZW1wbGF0ZSIpLHU9cih0aGlzLCJkaXNwbGF5VGVtcGxhdGUiKSxjPXRo
        aXMubm9ybWFsaXplZFZhbHVlKCk7aWYodGhpcy5fbGFzdE5vcm1hbGl6ZWRW
        YWx1ZT1jLGkoYykpaWYobih0aGlzLCJ0ZW1wbGF0ZSIsdSksbyluKHRoaXMs
        Il9jb250ZXh0IixhKTtlbHNle2lmKCF1KXJldHVybiBudWxsPT09Y3x8dm9p
        ZCAwPT09Yz9jPSIiOmMgaW5zdGFuY2VvZiBIYW5kbGViYXJzLlNhZmVTdHJp
        bmd8fChjPVN0cmluZyhjKSksdCYmKGM9SGFuZGxlYmFycy5VdGlscy5lc2Nh
        cGVFeHByZXNzaW9uKGMpKSxlLnB1c2goYyksdm9pZCAwO24odGhpcywiX2Nv
        bnRleHQiLGMpfWVsc2Ugcz8obih0aGlzLCJ0ZW1wbGF0ZSIscyksbz9uKHRo
        aXMsIl9jb250ZXh0IixhKTpuKHRoaXMsIl9jb250ZXh0IixjKSk6bih0aGlz
        LCJ0ZW1wbGF0ZSIsZnVuY3Rpb24oKXtyZXR1cm4iIn0pO3JldHVybiB0aGlz
        Ll9zdXBlcihlKX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0
        dXJuIUVtYmVyLmlzTm9uZShlKX1mdW5jdGlvbiB0KGUsdCxyLG4sYSxzKXt2
        YXIgdSxjLGwsaD10LmRhdGEsbT10LmZuLGY9dC5pbnZlcnNlLHA9aC52aWV3
        LGQ9dGhpcztpZih1PW8oZCxlLGgpLCJvYmplY3QiPT10eXBlb2YgdGhpcyl7
        aWYoaC5pbnNpZGVHcm91cCl7Yz1mdW5jdGlvbigpe0VtYmVyLnJ1bi5vbmNl
        KHAsInJlcmVuZGVyIil9O3ZhciBiLEUsdj1pKGQsZSx0KTt2PWE/YSh2KTp2
        LEU9cj9kOnYsbih2KT9iPW06ZiYmKGI9ZiksYihFLHtkYXRhOnQuZGF0YX0p
        fWVsc2V7dmFyIGc9cC5jcmVhdGVDaGlsZFZpZXcoRW1iZXIuX0hhbmRsZWJh
        cnNCb3VuZFZpZXcse3ByZXNlcnZlQ29udGV4dDpyLHNob3VsZERpc3BsYXlG
        dW5jOm4sdmFsdWVOb3JtYWxpemVyRnVuYzphLGRpc3BsYXlUZW1wbGF0ZTpt
        LGludmVyc2VUZW1wbGF0ZTpmLHBhdGg6ZSxwYXRoUm9vdDpkLHByZXZpb3Vz
        Q29udGV4dDpkLGlzRXNjYXBlZDohdC5oYXNoLnVuZXNjYXBlZCx0ZW1wbGF0
        ZURhdGE6dC5kYXRhfSk7cC5hcHBlbmRDaGlsZChnKSxjPWZ1bmN0aW9uKCl7
        RW1iZXIucnVuLnNjaGVkdWxlT25jZSgicmVuZGVyIixnLCJyZXJlbmRlcklm
        TmVlZGVkIil9fWlmKCIiIT09dS5wYXRoJiYocC5yZWdpc3Rlck9ic2VydmVy
        KHUucm9vdCx1LnBhdGgsYykscykpZm9yKGw9MDtsPHMubGVuZ3RoO2wrKylw
        LnJlZ2lzdGVyT2JzZXJ2ZXIodS5yb290LHUucGF0aCsiLiIrc1tsXSxjKX1l
        bHNlIGguYnVmZmVyLnB1c2goaShkLGUsdCkpfWZ1bmN0aW9uIHIoZSx0LHIp
        e3ZhciBuLGEscyx1LGM9ci5kYXRhLGw9Yy52aWV3O2lmKG49byhlLHQsYyks
        cz1uLnJvb3QscyYmIm9iamVjdCI9PXR5cGVvZiBzKXtpZihjLmluc2lkZUdy
        b3VwKXthPWZ1bmN0aW9uKCl7RW1iZXIucnVuLm9uY2UobCwicmVyZW5kZXIi
        KX07dmFyIGg9aShlLHQscik7KG51bGw9PT1ofHx2b2lkIDA9PT1oKSYmKGg9
        IiIpLGMuYnVmZmVyLnB1c2goaCl9ZWxzZXt2YXIgbT1uZXcgRW1iZXIuX1Np
        bXBsZUhhbmRsZWJhcnNWaWV3KHQsZSwhci5oYXNoLnVuZXNjYXBlZCxyLmRh
        dGEpO20uX3BhcmVudFZpZXc9bCxsLmFwcGVuZENoaWxkKG0pLGE9ZnVuY3Rp
        b24oKXtFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLG0sInJlcmVu
        ZGVyIil9fSIiIT09bi5wYXRoJiZsLnJlZ2lzdGVyT2JzZXJ2ZXIobi5yb290
        LG4ucGF0aCxhKX1lbHNlIHU9aShlLHQsciksYy5idWZmZXIucHVzaChudWxs
        PT09dXx8InVuZGVmaW5lZCI9PXR5cGVvZiB1PyIiOnUpfXZhciBuPUVtYmVy
        LmdldDtFbWJlci5zZXQsRW1iZXIuU3RyaW5nLmZtdDt2YXIgaT1FbWJlci5I
        YW5kbGViYXJzLmdldCxvPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0
        aCxhPUVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gscz1FbWJlci5IYW5k
        bGViYXJzLHU9cy5oZWxwZXJzO3MucmVnaXN0ZXJIZWxwZXIoIl90cmlhZ2VN
        dXN0YWNoZSIsZnVuY3Rpb24oZSx0KXtpZih1W2VdKXJldHVybiB1W2VdLmNh
        bGwodGhpcyx0KTt2YXIgcj1FbWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxw
        ZXIodC5kYXRhLnZpZXcuY29udGFpbmVyLGUpO3JldHVybiByP3IuY2FsbCh0
        aGlzLHQpOnUuYmluZC5jYWxsKHRoaXMsZSx0KX0pLEVtYmVyLkhhbmRsZWJh
        cnMucmVzb2x2ZUhlbHBlcj1mdW5jdGlvbihlLHQpe2lmKGUmJi0xIT09dC5p
        bmRleE9mKCItIikpe3ZhciByPWUubG9va3VwKCJoZWxwZXI6Iit0KTtpZigh
        cil7dmFyIG49ZS5sb29rdXAoImNvbXBvbmVudC1sb29rdXA6bWFpbiIpLGk9
        bi5sb29rdXBGYWN0b3J5KHQsZSk7aSYmKHI9cy5tYWtlVmlld0hlbHBlcihp
        KSxlLnJlZ2lzdGVyKCJoZWxwZXI6Iit0LHIpKX1yZXR1cm4gcn19LHMucmVn
        aXN0ZXJIZWxwZXIoImJpbmQiLGZ1bmN0aW9uKG4saSl7dmFyIG89aS5jb250
        ZXh0cyYmaS5jb250ZXh0cy5sZW5ndGg/aS5jb250ZXh0c1swXTp0aGlzO3Jl
        dHVybiBpLmZuP3QuY2FsbChvLG4saSwhMSxlKTpyKG8sbixpKX0pLHMucmVn
        aXN0ZXJIZWxwZXIoImJvdW5kSWYiLGZ1bmN0aW9uKGUscil7dmFyIGk9ci5j
        b250ZXh0cyYmci5jb250ZXh0cy5sZW5ndGg/ci5jb250ZXh0c1swXTp0aGlz
        LG89ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmbihlLCJpc1RydXRoeSIpO3JldHVy
        biJib29sZWFuIj09dHlwZW9mIHQ/dDpFbWJlci5pc0FycmF5KGUpPzAhPT1u
        KGUsImxlbmd0aCIpOiEhZX07cmV0dXJuIHQuY2FsbChpLGUsciwhMCxvLG8s
        WyJpc1RydXRoeSIsImxlbmd0aCJdKX0pLHMucmVnaXN0ZXJIZWxwZXIoIndp
        dGgiLGZ1bmN0aW9uKHIsbil7aWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3Zh
        ciBpLGEscyxjO2lmKG49YXJndW1lbnRzWzNdLGk9YXJndW1lbnRzWzJdLGE9
        YXJndW1lbnRzWzBdLEVtYmVyLmlzR2xvYmFsUGF0aChhKSlFbWJlci5iaW5k
        KG4uZGF0YS5rZXl3b3JkcyxpLGEpO2Vsc2V7Yz1vKHRoaXMsYSxuLmRhdGEp
        LGE9Yy5wYXRoLHM9Yy5yb290O3ZhciBsPUVtYmVyLiQuZXhwYW5kbytFbWJl
        ci5ndWlkRm9yKHMpO24uZGF0YS5rZXl3b3Jkc1tsXT1zO3ZhciBoPWE/bCsi
        LiIrYTpsO0VtYmVyLmJpbmQobi5kYXRhLmtleXdvcmRzLGksaCl9cmV0dXJu
        IHQuY2FsbCh0aGlzLGEsbiwhMCxlKX1yZXR1cm4gdS5iaW5kLmNhbGwobi5j
        b250ZXh0c1swXSxyLG4pfSkscy5yZWdpc3RlckhlbHBlcigiaWYiLGZ1bmN0
        aW9uKGUsdCl7cmV0dXJuIHUuYm91bmRJZi5jYWxsKHQuY29udGV4dHNbMF0s
        ZSx0KX0pLHMucmVnaXN0ZXJIZWxwZXIoInVubGVzcyIsZnVuY3Rpb24oZSx0
        KXt2YXIgcj10LmZuLG49dC5pbnZlcnNlO3JldHVybiB0LmZuPW4sdC5pbnZl
        cnNlPXIsdS5ib3VuZElmLmNhbGwodC5jb250ZXh0c1swXSxlLHQpfSkscy5y
        ZWdpc3RlckhlbHBlcigiYmluZC1hdHRyIixmdW5jdGlvbihlKXt2YXIgdD1l
        Lmhhc2gscj1lLmRhdGEudmlldyxuPVtdLHU9dGhpcyxjPSsrRW1iZXIudXVp
        ZCxsPXRbImNsYXNzIl07aWYobnVsbCE9bCl7dmFyIGg9cy5iaW5kQ2xhc3Nl
        cyh0aGlzLGwscixjLGUpO24ucHVzaCgnY2xhc3M9IicrSGFuZGxlYmFycy5V
        dGlscy5lc2NhcGVFeHByZXNzaW9uKGguam9pbigiICIpKSsnIicpLGRlbGV0
        ZSB0WyJjbGFzcyJdfXZhciBtPUVtYmVyLmtleXModCk7cmV0dXJuIGEuY2Fs
        bChtLGZ1bmN0aW9uKGEpe3ZhciBzLGw9dFthXTtzPW8odSxsLGUuZGF0YSk7
        dmFyIGgsbSxmPSJ0aGlzIj09PWw/cy5yb290OmkodSxsLGUpLHA9RW1iZXIu
        dHlwZU9mKGYpO2g9ZnVuY3Rpb24oKXt2YXIgdD1pKHUsbCxlKSxuPXIuJCgi
        W2RhdGEtYmluZGF0dHItIitjKyI9JyIrYysiJ10iKTtyZXR1cm4gbiYmMCE9
        PW4ubGVuZ3RoPyhFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3Mo
        bixhLHQpLHZvaWQgMCk6KEVtYmVyLnJlbW92ZU9ic2VydmVyKHMucm9vdCxz
        LnBhdGgsbSksdm9pZCAwKX0sInRoaXMiPT09bHx8cy5pc0tleXdvcmQmJiIi
        PT09cy5wYXRofHxyLnJlZ2lzdGVyT2JzZXJ2ZXIocy5yb290LHMucGF0aCxo
        KSwic3RyaW5nIj09PXB8fCJudW1iZXIiPT09cCYmIWlzTmFOKGYpP24ucHVz
        aChhKyc9IicrSGFuZGxlYmFycy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKGYp
        KyciJyk6ZiYmImJvb2xlYW4iPT09cCYmbi5wdXNoKGErJz0iJythKyciJyl9
        LHRoaXMpLG4ucHVzaCgiZGF0YS1iaW5kYXR0ci0iK2MrJz0iJytjKyciJyks
        bmV3IHMuU2FmZVN0cmluZyhuLmpvaW4oIiAiKSl9KSxzLnJlZ2lzdGVySGVs
        cGVyKCJiaW5kQXR0ciIscy5oZWxwZXJzWyJiaW5kLWF0dHIiXSkscy5iaW5k
        Q2xhc3Nlcz1mdW5jdGlvbihlLHQscixuLHMpe3ZhciB1LGMsbCxoPVtdLG09
        ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG89dC5wYXRoO3JldHVybiBuPSJ0aGlz
        Ij09PW8/ZToiIj09PW8/ITA6aShlLG8sciksRW1iZXIuVmlldy5fY2xhc3NT
        dHJpbmdGb3JWYWx1ZShvLG4sdC5jbGFzc05hbWUsdC5mYWxzeUNsYXNzTmFt
        ZSl9O3JldHVybiBhLmNhbGwodC5zcGxpdCgiICIpLGZ1bmN0aW9uKHQpe3Zh
        ciBpLGEsZixwLGQ9RW1iZXIuVmlldy5fcGFyc2VQcm9wZXJ0eVBhdGgodCks
        Yj1kLnBhdGgsRT1lOyIiIT09YiYmInRoaXMiIT09YiYmKHA9byhlLGIscy5k
        YXRhKSxFPXAucm9vdCxiPXAucGF0aCksYT1mdW5jdGlvbigpe3U9bShlLGQs
        cyksbD1uP3IuJCgiW2RhdGEtYmluZGF0dHItIituKyI9JyIrbisiJ10iKTpy
        LiQoKSxsJiYwIT09bC5sZW5ndGg/KGkmJmwucmVtb3ZlQ2xhc3MoaSksdT8o
        bC5hZGRDbGFzcyh1KSxpPXUpOmk9bnVsbCk6RW1iZXIucmVtb3ZlT2JzZXJ2
        ZXIoRSxiLGYpfSwiIiE9PWImJiJ0aGlzIiE9PWImJnIucmVnaXN0ZXJPYnNl
        cnZlcihFLGIsYSksYz1tKGUsZCxzKSxjJiYoaC5wdXNoKGMpLGk9Yyl9KSxo
        fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj1yLmhhc2gs
        aT1yLmhhc2hUeXBlcztmb3IodmFyIG8gaW4gbilpZigiSUQiPT09aVtvXSl7
        dmFyIGE9bltvXTtFbWJlci5JU19CSU5ESU5HLnRlc3Qobyl8fChuW28rIkJp
        bmRpbmciXT1hLGlbbysiQmluZGluZyJdPSJTVFJJTkciLGRlbGV0ZSBuW29d
        LGRlbGV0ZSBpW29dKX1uLmhhc093blByb3BlcnR5KCJpZEJpbmRpbmciKSYm
        KG4uaWQ9dC5nZXQoZSxuLmlkQmluZGluZyxyKSxpLmlkPSJTVFJJTkciLGRl
        bGV0ZSBuLmlkQmluZGluZyxkZWxldGUgaS5pZEJpbmRpbmcpfUVtYmVyLmdl
        dCxFbWJlci5zZXQ7dmFyIHQ9RW1iZXIuSGFuZGxlYmFycyxyPS9eW2Etel0v
        LG49L152aWV3XC4vO3QuVmlld0hlbHBlcj1FbWJlci5PYmplY3QuY3JlYXRl
        KHtwcm9wZXJ0aWVzRnJvbUhUTUxPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0
        PWUuaGFzaCxyPWUuZGF0YSxuPXt9LGk9dFsiY2xhc3MiXSxvPSExO3QuaWQm
        JihuLmVsZW1lbnRJZD10LmlkLG89ITApLHQudGFnJiYobi50YWdOYW1lPXQu
        dGFnLG89ITApLGkmJihpPWkuc3BsaXQoIiAiKSxuLmNsYXNzTmFtZXM9aSxv
        PSEwKSx0LmNsYXNzQmluZGluZyYmKG4uY2xhc3NOYW1lQmluZGluZ3M9dC5j
        bGFzc0JpbmRpbmcuc3BsaXQoIiAiKSxvPSEwKSx0LmNsYXNzTmFtZUJpbmRp
        bmdzJiYodm9pZCAwPT09bi5jbGFzc05hbWVCaW5kaW5ncyYmKG4uY2xhc3NO
        YW1lQmluZGluZ3M9W10pLG4uY2xhc3NOYW1lQmluZGluZ3M9bi5jbGFzc05h
        bWVCaW5kaW5ncy5jb25jYXQodC5jbGFzc05hbWVCaW5kaW5ncy5zcGxpdCgi
        ICIpKSxvPSEwKSx0LmF0dHJpYnV0ZUJpbmRpbmdzJiYobi5hdHRyaWJ1dGVC
        aW5kaW5ncz1udWxsLG89ITApLG8mJih0PUVtYmVyLiQuZXh0ZW5kKHt9LHQp
        LGRlbGV0ZSB0LmlkLGRlbGV0ZSB0LnRhZyxkZWxldGUgdFsiY2xhc3MiXSxk
        ZWxldGUgdC5jbGFzc0JpbmRpbmcpO3ZhciBhO2Zvcih2YXIgcyBpbiB0KXQu
        aGFzT3duUHJvcGVydHkocykmJkVtYmVyLklTX0JJTkRJTkcudGVzdChzKSYm
        InN0cmluZyI9PXR5cGVvZiB0W3NdJiYoYT10aGlzLmNvbnRleHR1YWxpemVC
        aW5kaW5nUGF0aCh0W3NdLHIpLGEmJih0W3NdPWEpKTtpZihuLmNsYXNzTmFt
        ZUJpbmRpbmdzKWZvcih2YXIgdSBpbiBuLmNsYXNzTmFtZUJpbmRpbmdzKXt2
        YXIgYz1uLmNsYXNzTmFtZUJpbmRpbmdzW3VdO2lmKCJzdHJpbmciPT10eXBl
        b2YgYyl7dmFyIGw9RW1iZXIuVmlldy5fcGFyc2VQcm9wZXJ0eVBhdGgoYyk7
        YT10aGlzLmNvbnRleHR1YWxpemVCaW5kaW5nUGF0aChsLnBhdGgsciksYSYm
        KG4uY2xhc3NOYW1lQmluZGluZ3NbdV09YStsLmNsYXNzTmFtZXMpfX1yZXR1
        cm4gRW1iZXIuJC5leHRlbmQodCxuKX0sY29udGV4dHVhbGl6ZUJpbmRpbmdQ
        YXRoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9RW1iZXIuSGFuZGxlYmFycy5ub3Jt
        YWxpemVQYXRoKG51bGwsZSx0KTtyZXR1cm4gci5pc0tleXdvcmQ/InRlbXBs
        YXRlRGF0YS5rZXl3b3Jkcy4iK2U6RW1iZXIuaXNHbG9iYWxQYXRoKGUpP251
        bGw6InRoaXMiPT09ZT8iX3BhcmVudFZpZXcuY29udGV4dCI6Il9wYXJlbnRW
        aWV3LmNvbnRleHQuIitlfSxoZWxwZXI6ZnVuY3Rpb24oaSxvLGEpe3ZhciBz
        LHU9YS5kYXRhLGM9YS5mbjtlKGksYSkscz0ic3RyaW5nIj09dHlwZW9mIG8/
        IlNUUklORyI9PT1hLnR5cGVzWzBdJiZyLnRlc3QobykmJiFuLnRlc3Qobyk/
        dS52aWV3LmNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCJ2aWV3OiIrbyk6dC5n
        ZXQoaSxvLGEpOm87dmFyIGw9dGhpcy5wcm9wZXJ0aWVzRnJvbUhUTUxPcHRp
        b25zKGEsaSksaD11LnZpZXc7bC50ZW1wbGF0ZURhdGE9dTt2YXIgbT1zLnBy
        b3RvP3MucHJvdG8oKTpzO2MmJihsLnRlbXBsYXRlPWMpLG0uY29udHJvbGxl
        cnx8bS5jb250cm9sbGVyQmluZGluZ3x8bC5jb250cm9sbGVyfHxsLmNvbnRy
        b2xsZXJCaW5kaW5nfHwobC5fY29udGV4dD1pKSxoLmFwcGVuZENoaWxkKHMs
        bCl9fSksdC5yZWdpc3RlckhlbHBlcigidmlldyIsZnVuY3Rpb24oZSxyKXty
        ZXR1cm4gZSYmZS5kYXRhJiZlLmRhdGEuaXNSZW5kZXJEYXRhJiYocj1lLGU9
        IkVtYmVyLlZpZXciKSx0LlZpZXdIZWxwZXIuaGVscGVyKHRoaXMsZSxyKX0p
        fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuSGFuZGxl
        YmFycy5nZXQ7RW1iZXIuU3RyaW5nLmZtdCxFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVySGVscGVyKCJjb2xsZWN0aW9uIixmdW5jdGlvbihyLG4pe3ImJnIu
        ZGF0YSYmci5kYXRhLmlzUmVuZGVyRGF0YSYmKG49cixyPXZvaWQgMCk7dmFy
        IGk9bi5mbixvPW4uZGF0YSxhPW4uaW52ZXJzZTtuLmRhdGEudmlldzt2YXIg
        cztzPXI/dCh0aGlzLHIsbik6RW1iZXIuQ29sbGVjdGlvblZpZXc7dmFyIHUs
        YyxsPW4uaGFzaCxoPXt9LG09cy5wcm90bygpO2lmKGwuaXRlbVZpZXcpe3Zh
        ciBmPW8ua2V5d29yZHMuY29udHJvbGxlcixwPWYuY29udGFpbmVyO2M9cC5y
        ZXNvbHZlKCJ2aWV3OiIrbC5pdGVtVmlldyl9ZWxzZSBjPWwuaXRlbVZpZXdD
        bGFzcz90KG0sbC5pdGVtVmlld0NsYXNzLG4pOm0uaXRlbVZpZXdDbGFzcztk
        ZWxldGUgbC5pdGVtVmlld0NsYXNzLGRlbGV0ZSBsLml0ZW1WaWV3O2Zvcih2
        YXIgZCBpbiBsKWwuaGFzT3duUHJvcGVydHkoZCkmJih1PWQubWF0Y2goL15p
        dGVtKC4pKC4qKSQvKSx1JiYiaXRlbUNvbnRyb2xsZXIiIT09ZCYmKGhbdVsx
        XS50b0xvd2VyQ2FzZSgpK3VbMl1dPWxbZF0sZGVsZXRlIGxbZF0pKTtpJiYo
        aC50ZW1wbGF0ZT1pLGRlbGV0ZSBuLmZuKTt2YXIgYjthJiZhIT09SGFuZGxl
        YmFycy5WTS5ub29wPyhiPWUobSwiZW1wdHlWaWV3Q2xhc3MiKSxiPWIuZXh0
        ZW5kKHt0ZW1wbGF0ZTphLHRhZ05hbWU6aC50YWdOYW1lfSkpOmwuZW1wdHlW
        aWV3Q2xhc3MmJihiPXQodGhpcyxsLmVtcHR5Vmlld0NsYXNzLG4pKSxiJiYo
        bC5lbXB0eVZpZXc9YiksbC5rZXl3b3JkfHwoaC5fY29udGV4dD1FbWJlci5j
        b21wdXRlZC5hbGlhcygiY29udGVudCIpKTt2YXIgRT1FbWJlci5IYW5kbGVi
        YXJzLlZpZXdIZWxwZXIucHJvcGVydGllc0Zyb21IVE1MT3B0aW9ucyh7ZGF0
        YTpvLGhhc2g6aH0sdGhpcyk7cmV0dXJuIGwuaXRlbVZpZXdDbGFzcz1jLmV4
        dGVuZChFKSxFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRo
        aXMscyxuKX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuSGFuZGxlYmFy
        cy5nZXQ7RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigidW5ib3Vu
        ZCIsZnVuY3Rpb24odCxyKXt2YXIgbixpLG8sYT1hcmd1bWVudHNbYXJndW1l
        bnRzLmxlbmd0aC0xXTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4yPyhhLmRh
        dGEuaXNVbmJvdW5kPSEwLG49RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzW2Fy
        Z3VtZW50c1swXV18fEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyTWlzc2luZyxv
        PW4uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1
        bWVudHMsMSkpLGRlbGV0ZSBhLmRhdGEuaXNVbmJvdW5kLG8pOihpPXIuY29u
        dGV4dHMmJnIuY29udGV4dHMubGVuZ3RoP3IuY29udGV4dHNbMF06dGhpcyxl
        KGksdCxyKSl9KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLkhhbmRsZWJh
        cnMuZ2V0LHQ9RW1iZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoO0VtYmVy
        LkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoImxvZyIsZnVuY3Rpb24ocixu
        KXt2YXIgaT1uLmNvbnRleHRzJiZuLmNvbnRleHRzLmxlbmd0aD9uLmNvbnRl
        eHRzWzBdOnRoaXMsbz10KGkscixuLmRhdGEpLGE9by5yb290LHM9by5wYXRo
        LHU9InRoaXMiPT09cz9hOmUoYSxzLG4pO0VtYmVyLkxvZ2dlci5sb2codSl9
        KSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJkZWJ1Z2dlciIs
        ZnVuY3Rpb24oKXt9KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0
        PUVtYmVyLnNldDtFbWJlci5IYW5kbGViYXJzLkVhY2hWaWV3PUVtYmVyLkNv
        bGxlY3Rpb25WaWV3LmV4dGVuZChFbWJlci5fTWV0YW1vcnBoLHtpbml0OmZ1
        bmN0aW9uKCl7dmFyIHIsbj1lKHRoaXMsIml0ZW1Db250cm9sbGVyIik7aWYo
        bil7dmFyIGk9ZSh0aGlzLCJjb250cm9sbGVyLmNvbnRhaW5lciIpLmxvb2t1
        cEZhY3RvcnkoImNvbnRyb2xsZXI6YXJyYXkiKS5jcmVhdGUoe3BhcmVudENv
        bnRyb2xsZXI6ZSh0aGlzLCJjb250cm9sbGVyIiksaXRlbUNvbnRyb2xsZXI6
        bix0YXJnZXQ6ZSh0aGlzLCJjb250cm9sbGVyIiksX2VhY2hWaWV3OnRoaXN9
        KTt0aGlzLmRpc2FibGVDb250ZW50T2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7dCh0
        aGlzLCJjb250ZW50IixpKSxyPW5ldyBFbWJlci5CaW5kaW5nKCJjb250ZW50
        IiwiX2VhY2hWaWV3LmRhdGFTb3VyY2UiKS5vbmVXYXkoKSxyLmNvbm5lY3Qo
        aSl9KSx0KHRoaXMsIl9hcnJheUNvbnRyb2xsZXIiLGkpfWVsc2UgdGhpcy5k
        aXNhYmxlQ29udGVudE9ic2VydmVycyhmdW5jdGlvbigpe3I9bmV3IEVtYmVy
        LkJpbmRpbmcoImNvbnRlbnQiLCJkYXRhU291cmNlIikub25lV2F5KCksci5j
        b25uZWN0KHRoaXMpfSk7cmV0dXJuIHRoaXMuX3N1cGVyKCl9LF9hc3NlcnRB
        cnJheUxpa2U6ZnVuY3Rpb24oKXt9LGRpc2FibGVDb250ZW50T2JzZXJ2ZXJz
        OmZ1bmN0aW9uKGUpe0VtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRoaXMs
        ImNvbnRlbnQiLG51bGwsIl9jb250ZW50V2lsbENoYW5nZSIpLEVtYmVyLnJl
        bW92ZU9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250ZW50RGlk
        Q2hhbmdlIiksZS5jYWxsKHRoaXMpLEVtYmVyLmFkZEJlZm9yZU9ic2VydmVy
        KHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250ZW50V2lsbENoYW5nZSIpLEVt
        YmVyLmFkZE9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250ZW50
        RGlkQ2hhbmdlIil9LGl0ZW1WaWV3Q2xhc3M6RW1iZXIuX01ldGFtb3JwaFZp
        ZXcsZW1wdHlWaWV3Q2xhc3M6RW1iZXIuX01ldGFtb3JwaFZpZXcsY3JlYXRl
        Q2hpbGRWaWV3OmZ1bmN0aW9uKHIsbil7cj10aGlzLl9zdXBlcihyLG4pO3Zh
        ciBpPWUodGhpcywia2V5d29yZCIpLG89ZShyLCJjb250ZW50Iik7aWYoaSl7
        dmFyIGE9ZShyLCJ0ZW1wbGF0ZURhdGEiKTthPUVtYmVyLmNvcHkoYSksYS5r
        ZXl3b3Jkcz1yLmNsb25lS2V5d29yZHMoKSx0KHIsInRlbXBsYXRlRGF0YSIs
        YSksYS5rZXl3b3Jkc1tpXT1vfXJldHVybiBvJiZlKG8sImlzQ29udHJvbGxl
        ciIpJiZ0KHIsImNvbnRyb2xsZXIiLG8pLHJ9LGRlc3Ryb3k6ZnVuY3Rpb24o
        KXtpZih0aGlzLl9zdXBlcigpKXt2YXIgdD1lKHRoaXMsIl9hcnJheUNvbnRy
        b2xsZXIiKTtyZXR1cm4gdCYmdC5kZXN0cm95KCksdGhpc319fSk7dmFyIHI9
        RW1iZXIuSGFuZGxlYmFycy5Hcm91cGVkRWFjaD1mdW5jdGlvbihlLHQscil7
        dmFyIG49dGhpcyxpPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChl
        LHQsci5kYXRhKTt0aGlzLmNvbnRleHQ9ZSx0aGlzLnBhdGg9dCx0aGlzLm9w
        dGlvbnM9cix0aGlzLnRlbXBsYXRlPXIuZm4sdGhpcy5jb250YWluaW5nVmll
        dz1yLmRhdGEudmlldyx0aGlzLm5vcm1hbGl6ZWRSb290PWkucm9vdCx0aGlz
        Lm5vcm1hbGl6ZWRQYXRoPWkucGF0aCx0aGlzLmNvbnRlbnQ9dGhpcy5sb29r
        dXBDb250ZW50KCksdGhpcy5hZGRDb250ZW50T2JzZXJ2ZXJzKCksdGhpcy5h
        ZGRBcnJheU9ic2VydmVycygpLHRoaXMuY29udGFpbmluZ1ZpZXcub24oIndp
        bGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtuLmRlc3Ryb3koKX0pfTtyLnBy
        b3RvdHlwZT17Y29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnJl
        bW92ZUFycmF5T2JzZXJ2ZXJzKCl9LGNvbnRlbnREaWRDaGFuZ2U6ZnVuY3Rp
        b24oKXt0aGlzLmNvbnRlbnQ9dGhpcy5sb29rdXBDb250ZW50KCksdGhpcy5h
        ZGRBcnJheU9ic2VydmVycygpLHRoaXMucmVyZW5kZXJDb250YWluaW5nVmll
        dygpfSxjb250ZW50QXJyYXlXaWxsQ2hhbmdlOkVtYmVyLkssY29udGVudEFy
        cmF5RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZXJlbmRlckNvbnRhaW5p
        bmdWaWV3KCl9LGxvb2t1cENvbnRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gRW1i
        ZXIuSGFuZGxlYmFycy5nZXQodGhpcy5ub3JtYWxpemVkUm9vdCx0aGlzLm5v
        cm1hbGl6ZWRQYXRoLHRoaXMub3B0aW9ucyl9LGFkZEFycmF5T2JzZXJ2ZXJz
        OmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50JiZ0aGlzLmNvbnRlbnQuYWRkQXJy
        YXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJjb250ZW50QXJyYXlXaWxs
        Q2hhbmdlIixkaWRDaGFuZ2U6ImNvbnRlbnRBcnJheURpZENoYW5nZSJ9KX0s
        cmVtb3ZlQXJyYXlPYnNlcnZlcnM6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQm
        JnRoaXMuY29udGVudC5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMse3dpbGxD
        aGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiY29u
        dGVudEFycmF5RGlkQ2hhbmdlIn0pfSxhZGRDb250ZW50T2JzZXJ2ZXJzOmZ1
        bmN0aW9uKCl7RW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIodGhpcy5ub3JtYWxp
        emVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMsdGhpcy5jb250ZW50
        V2lsbENoYW5nZSksRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcy5ub3JtYWxpemVk
        Um9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMsdGhpcy5jb250ZW50RGlk
        Q2hhbmdlKX0scmVtb3ZlQ29udGVudE9ic2VydmVyczpmdW5jdGlvbigpe0Vt
        YmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRoaXMubm9ybWFsaXplZFJvb3Qs
        dGhpcy5ub3JtYWxpemVkUGF0aCx0aGlzLmNvbnRlbnRXaWxsQ2hhbmdlKSxF
        bWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLm5vcm1hbGl6ZWRSb290LHRoaXMu
        bm9ybWFsaXplZFBhdGgsdGhpcy5jb250ZW50RGlkQ2hhbmdlKX0scmVuZGVy
        OmZ1bmN0aW9uKCl7aWYodGhpcy5jb250ZW50KXt2YXIgdD10aGlzLmNvbnRl
        bnQscj1lKHQsImxlbmd0aCIpLG49dGhpcy5vcHRpb25zLmRhdGEsaT10aGlz
        LnRlbXBsYXRlO24uaW5zaWRlRWFjaD0hMDtmb3IodmFyIG89MDtyPm87bysr
        KWkodC5vYmplY3RBdChvKSx7ZGF0YTpufSl9fSxyZXJlbmRlckNvbnRhaW5p
        bmdWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztFbWJlci5ydW4uc2NoZWR1
        bGVPbmNlKCJyZW5kZXIiLHRoaXMsZnVuY3Rpb24oKXtlLmRlc3Ryb3llZHx8
        ZS5jb250YWluaW5nVmlldy5yZXJlbmRlcigpfSl9LGRlc3Ryb3k6ZnVuY3Rp
        b24oKXt0aGlzLnJlbW92ZUNvbnRlbnRPYnNlcnZlcnMoKSx0aGlzLmNvbnRl
        bnQmJnRoaXMucmVtb3ZlQXJyYXlPYnNlcnZlcnMoKSx0aGlzLmRlc3Ryb3ll
        ZD0hMH19LEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoImVhY2gi
        LGZ1bmN0aW9uKGUsdCl7aWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBy
        PWFyZ3VtZW50c1swXTt0PWFyZ3VtZW50c1szXSxlPWFyZ3VtZW50c1syXSwi
        Ij09PWUmJihlPSJ0aGlzIiksdC5oYXNoLmtleXdvcmQ9cn1yZXR1cm4gMT09
        PWFyZ3VtZW50cy5sZW5ndGgmJih0PWUsZT0idGhpcyIpLHQuaGFzaC5kYXRh
        U291cmNlQmluZGluZz1lLCF0LmRhdGEuaW5zaWRlR3JvdXB8fHQuaGFzaC5n
        cm91cGVkUm93c3x8dC5oYXNoLml0ZW1WaWV3Q2xhc3M/RW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzLmNvbGxlY3Rpb24uY2FsbCh0aGlzLCJFbWJlci5IYW5k
        bGViYXJzLkVhY2hWaWV3Iix0KToobmV3IEVtYmVyLkhhbmRsZWJhcnMuR3Jv
        dXBlZEVhY2godGhpcyxlLHQpLnJlbmRlcigpLHZvaWQgMCl9KX0oKSxmdW5j
        dGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoInRlbXBs
        YXRlIixmdW5jdGlvbigpe3JldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMucGFydGlhbC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0oKSxmdW5jdGlv
        bigpe0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoInBhcnRpYWwi
        LGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5zcGxpdCgiLyIpLG49cltyLmxlbmd0
        aC0xXTtyW3IubGVuZ3RoLTFdPSJfIituO3ZhciBpPXQuZGF0YS52aWV3LG89
        ci5qb2luKCIvIiksYT1pLnRlbXBsYXRlRm9yTmFtZShvKSxzPSFhJiZpLnRl
        bXBsYXRlRm9yTmFtZShlKTthPWF8fHMsYSh0aGlzLHtkYXRhOnQuZGF0YX0p
        fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQ7RW1iZXIuc2V0LEVt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoInlpZWxkIixmdW5jdGlv
        bih0KXtmb3IodmFyIHI9dC5kYXRhLnZpZXc7ciYmIWUociwibGF5b3V0Iik7
        KXI9ci5fY29udGV4dFZpZXc/ci5fY29udGV4dFZpZXc6ZShyLCJwYXJlbnRW
        aWV3Iik7ci5feWllbGQodGhpcyx0KX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigibG9jIixmdW5jdGlvbihlKXty
        ZXR1cm4gRW1iZXIuU3RyaW5nLmxvYyhlKX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9RW1iZXIuc2V0O0VtYmVyLmdldCxFbWJlci5DaGVja2JveD1FbWJlci5W
        aWV3LmV4dGVuZCh7Y2xhc3NOYW1lczpbImVtYmVyLWNoZWNrYm94Il0sdGFn
        TmFtZToiaW5wdXQiLGF0dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIsImNoZWNr
        ZWQiLCJpbmRldGVybWluYXRlIiwiZGlzYWJsZWQiLCJ0YWJpbmRleCIsIm5h
        bWUiXSx0eXBlOiJjaGVja2JveCIsY2hlY2tlZDohMSxkaXNhYmxlZDohMSxp
        bmRldGVybWluYXRlOiExLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigp
        LHRoaXMub24oImNoYW5nZSIsdGhpcyx0aGlzLl91cGRhdGVFbGVtZW50VmFs
        dWUpfSxkaWRJbnNlcnRFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIo
        KSx0aGlzLmdldCgiZWxlbWVudCIpLmluZGV0ZXJtaW5hdGU9ISF0aGlzLmdl
        dCgiaW5kZXRlcm1pbmF0ZSIpfSxfdXBkYXRlRWxlbWVudFZhbHVlOmZ1bmN0
        aW9uKCl7ZSh0aGlzLCJjaGVja2VkIix0aGlzLiQoKS5wcm9wKCJjaGVja2Vk
        IikpfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIsbil7dmFyIGk9
        dChyLGUpLG89dChyLCJvbkV2ZW50IiksYT10KHIsInZhbHVlIik7KG89PT1l
        fHwia2V5UHJlc3MiPT09byYmImtleS1wcmVzcyI9PT1lKSYmci5zZW5kQWN0
        aW9uKCJhY3Rpb24iLGEpLHIuc2VuZEFjdGlvbihlLGEpLChpfHxvPT09ZSkm
        Jih0KHIsImJ1YmJsZXMiKXx8bi5zdG9wUHJvcGFnYXRpb24oKSl9dmFyIHQ9
        RW1iZXIuZ2V0LHI9RW1iZXIuc2V0O0VtYmVyLlRleHRTdXBwb3J0PUVtYmVy
        Lk1peGluLmNyZWF0ZSh7dmFsdWU6IiIsYXR0cmlidXRlQmluZGluZ3M6WyJw
        bGFjZWhvbGRlciIsImRpc2FibGVkIiwibWF4bGVuZ3RoIiwidGFiaW5kZXgi
        LCJyZWFkb25seSJdLHBsYWNlaG9sZGVyOm51bGwsZGlzYWJsZWQ6ITEsbWF4
        bGVuZ3RoOm51bGwsaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhp
        cy5vbigiZm9jdXNPdXQiLHRoaXMsdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hh
        bmdlKSx0aGlzLm9uKCJjaGFuZ2UiLHRoaXMsdGhpcy5fZWxlbWVudFZhbHVl
        RGlkQ2hhbmdlKSx0aGlzLm9uKCJwYXN0ZSIsdGhpcyx0aGlzLl9lbGVtZW50
        VmFsdWVEaWRDaGFuZ2UpLHRoaXMub24oImN1dCIsdGhpcyx0aGlzLl9lbGVt
        ZW50VmFsdWVEaWRDaGFuZ2UpLHRoaXMub24oImlucHV0Iix0aGlzLHRoaXMu
        X2VsZW1lbnRWYWx1ZURpZENoYW5nZSksdGhpcy5vbigia2V5VXAiLHRoaXMs
        dGhpcy5pbnRlcnByZXRLZXlFdmVudHMpfSxhY3Rpb246bnVsbCxvbkV2ZW50
        OiJlbnRlciIsYnViYmxlczohMSxpbnRlcnByZXRLZXlFdmVudHM6ZnVuY3Rp
        b24oZSl7dmFyIHQ9RW1iZXIuVGV4dFN1cHBvcnQuS0VZX0VWRU5UUyxyPXRb
        ZS5rZXlDb2RlXTtyZXR1cm4gdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdl
        KCkscj90aGlzW3JdKGUpOnZvaWQgMH0sX2VsZW1lbnRWYWx1ZURpZENoYW5n
        ZTpmdW5jdGlvbigpe3IodGhpcywidmFsdWUiLHRoaXMuJCgpLnZhbCgpKX0s
        aW5zZXJ0TmV3bGluZTpmdW5jdGlvbih0KXtlKCJlbnRlciIsdGhpcyx0KSxl
        KCJpbnNlcnQtbmV3bGluZSIsdGhpcyx0KX0sY2FuY2VsOmZ1bmN0aW9uKHQp
        e2UoImVzY2FwZS1wcmVzcyIsdGhpcyx0KX0sZm9jdXNJbjpmdW5jdGlvbih0
        KXtlKCJmb2N1cy1pbiIsdGhpcyx0KX0sZm9jdXNPdXQ6ZnVuY3Rpb24odCl7
        ZSgiZm9jdXMtb3V0Iix0aGlzLHQpfSxrZXlQcmVzczpmdW5jdGlvbih0KXtl
        KCJrZXktcHJlc3MiLHRoaXMsdCl9fSksRW1iZXIuVGV4dFN1cHBvcnQuS0VZ
        X0VWRU5UUz17MTM6Imluc2VydE5ld2xpbmUiLDI3OiJjYW5jZWwifX0oKSxm
        dW5jdGlvbigpe0VtYmVyLmdldCxFbWJlci5zZXQsRW1iZXIuVGV4dEZpZWxk
        PUVtYmVyLkNvbXBvbmVudC5leHRlbmQoRW1iZXIuVGV4dFN1cHBvcnQse2Ns
        YXNzTmFtZXM6WyJlbWJlci10ZXh0LWZpZWxkIl0sdGFnTmFtZToiaW5wdXQi
        LGF0dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIsInZhbHVlIiwic2l6ZSIsInBh
        dHRlcm4iLCJuYW1lIl0sdmFsdWU6IiIsdHlwZToidGV4dCIsc2l6ZTpudWxs
        LHBhdHRlcm46bnVsbH0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0
        LHQ9RW1iZXIuc2V0O0VtYmVyLkJ1dHRvbj1FbWJlci5WaWV3LmV4dGVuZChF
        bWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LHtjbGFzc05hbWVzOlsiZW1iZXIt
        YnV0dG9uIl0sY2xhc3NOYW1lQmluZGluZ3M6WyJpc0FjdGl2ZSJdLHRhZ05h
        bWU6ImJ1dHRvbiIscHJvcGFnYXRlRXZlbnRzOiExLGF0dHJpYnV0ZUJpbmRp
        bmdzOlsidHlwZSIsImRpc2FibGVkIiwiaHJlZiIsInRhYmluZGV4Il0sdGFy
        Z2V0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0
        aGlzLCJ0YXJnZXQiKSxyPWUodGhpcywiY29udGV4dCIpLG49ZSh0aGlzLCJ0
        ZW1wbGF0ZURhdGEiKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIHQ/dDpFbWJl
        ci5IYW5kbGViYXJzLmdldChyLHQse2RhdGE6bn0pfSkucHJvcGVydHkoInRh
        cmdldCIpLHR5cGU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10
        aGlzLnRhZ05hbWU7cmV0dXJuImlucHV0Ij09PWV8fCJidXR0b24iPT09ZT8i
        YnV0dG9uIjp2b2lkIDB9KSxkaXNhYmxlZDohMSxocmVmOkVtYmVyLmNvbXB1
        dGVkKGZ1bmN0aW9uKCl7cmV0dXJuImEiPT09dGhpcy50YWdOYW1lPyIjIjpu
        dWxsfSksbW91c2VEb3duOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiZGlz
        YWJsZWQiKXx8KHQodGhpcywiaXNBY3RpdmUiLCEwKSx0aGlzLl9tb3VzZURv
        d249ITAsdGhpcy5fbW91c2VFbnRlcmVkPSEwKSxlKHRoaXMsInByb3BhZ2F0
        ZUV2ZW50cyIpfSxtb3VzZUxlYXZlOmZ1bmN0aW9uKCl7dGhpcy5fbW91c2VE
        b3duJiYodCh0aGlzLCJpc0FjdGl2ZSIsITEpLHRoaXMuX21vdXNlRW50ZXJl
        ZD0hMSl9LG1vdXNlRW50ZXI6ZnVuY3Rpb24oKXt0aGlzLl9tb3VzZURvd24m
        Jih0KHRoaXMsImlzQWN0aXZlIiwhMCksdGhpcy5fbW91c2VFbnRlcmVkPSEw
        KX0sbW91c2VVcDpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImlzQWN0aXZl
        IikmJih0aGlzLnRyaWdnZXJBY3Rpb24oKSx0KHRoaXMsImlzQWN0aXZlIiwh
        MSkpLHRoaXMuX21vdXNlRG93bj0hMSx0aGlzLl9tb3VzZUVudGVyZWQ9ITEs
        ZSh0aGlzLCJwcm9wYWdhdGVFdmVudHMiKX0sa2V5RG93bjpmdW5jdGlvbihl
        KXsoMTM9PT1lLmtleUNvZGV8fDMyPT09ZS5rZXlDb2RlKSYmdGhpcy5tb3Vz
        ZURvd24oKX0sa2V5VXA6ZnVuY3Rpb24oZSl7KDEzPT09ZS5rZXlDb2RlfHwz
        Mj09PWUua2V5Q29kZSkmJnRoaXMubW91c2VVcCgpfSx0b3VjaFN0YXJ0OmZ1
        bmN0aW9uKGUpe3JldHVybiB0aGlzLm1vdXNlRG93bihlKX0sdG91Y2hFbmQ6
        ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubW91c2VVcChlKX0saW5pdDpmdW5j
        dGlvbigpe3RoaXMuX3N1cGVyKCl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1F
        bWJlci5nZXQ7RW1iZXIuc2V0LEVtYmVyLlRleHRBcmVhPUVtYmVyLkNvbXBv
        bmVudC5leHRlbmQoRW1iZXIuVGV4dFN1cHBvcnQse2NsYXNzTmFtZXM6WyJl
        bWJlci10ZXh0LWFyZWEiXSx0YWdOYW1lOiJ0ZXh0YXJlYSIsYXR0cmlidXRl
        QmluZGluZ3M6WyJyb3dzIiwiY29scyIsIm5hbWUiXSxyb3dzOm51bGwsY29s
        czpudWxsLF91cGRhdGVFbGVtZW50VmFsdWU6RW1iZXIub2JzZXJ2ZXIoInZh
        bHVlIixmdW5jdGlvbigpe3ZhciB0PWUodGhpcywidmFsdWUiKSxyPXRoaXMu
        JCgpO3ImJnQhPT1yLnZhbCgpJiZyLnZhbCh0KX0pLGluaXQ6ZnVuY3Rpb24o
        KXt0aGlzLl9zdXBlcigpLHRoaXMub24oImRpZEluc2VydEVsZW1lbnQiLHRo
        aXMsdGhpcy5fdXBkYXRlRWxlbWVudFZhbHVlKX19KX0oKSxmdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLnNldCx0PUVtYmVyLmdldCxyPUVtYmVyLkVudW1lcmFi
        bGVVdGlscy5pbmRleE9mLG49RW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4
        ZXNPZixpPUVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLG89RW1iZXIu
        RW51bWVyYWJsZVV0aWxzLnJlcGxhY2UsYT1FbWJlci5pc0FycmF5O0VtYmVy
        LkhhbmRsZWJhcnMuY29tcGlsZSxFbWJlci5TZWxlY3RPcHRpb249RW1iZXIu
        Vmlldy5leHRlbmQoe3RhZ05hbWU6Im9wdGlvbiIsYXR0cmlidXRlQmluZGlu
        Z3M6WyJ2YWx1ZSIsInNlbGVjdGVkIl0sZGVmYXVsdFRlbXBsYXRlOmZ1bmN0
        aW9uKGUsdCl7dD17ZGF0YTp0LmRhdGEsaGFzaDp7fX0sRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzLmJpbmQuY2FsbChlLCJ2aWV3LmxhYmVsIix0KX0saW5p
        dDpmdW5jdGlvbigpe3RoaXMubGFiZWxQYXRoRGlkQ2hhbmdlKCksdGhpcy52
        YWx1ZVBhdGhEaWRDaGFuZ2UoKSx0aGlzLl9zdXBlcigpfSxzZWxlY3RlZDpF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciBlPXQodGhpcywiY29udGVu
        dCIpLG49dCh0aGlzLCJwYXJlbnRWaWV3LnNlbGVjdGlvbiIpO3JldHVybiB0
        KHRoaXMsInBhcmVudFZpZXcubXVsdGlwbGUiKT9uJiZyKG4sZS52YWx1ZU9m
        KCkpPi0xOmU9PW59KS5wcm9wZXJ0eSgiY29udGVudCIsInBhcmVudFZpZXcu
        c2VsZWN0aW9uIiksbGFiZWxQYXRoRGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVy
        KCJwYXJlbnRWaWV3Lm9wdGlvbkxhYmVsUGF0aCIsZnVuY3Rpb24oKXt2YXIg
        ZT10KHRoaXMsInBhcmVudFZpZXcub3B0aW9uTGFiZWxQYXRoIik7ZSYmRW1i
        ZXIuZGVmaW5lUHJvcGVydHkodGhpcywibGFiZWwiLEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxlKX0pLnByb3BlcnR5KGUpKX0p
        LHZhbHVlUGF0aERpZENoYW5nZTpFbWJlci5vYnNlcnZlcigicGFyZW50Vmll
        dy5vcHRpb25WYWx1ZVBhdGgiLGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzLCJw
        YXJlbnRWaWV3Lm9wdGlvblZhbHVlUGF0aCIpO2UmJkVtYmVyLmRlZmluZVBy
        b3BlcnR5KHRoaXMsInZhbHVlIixFbWJlci5jb21wdXRlZChmdW5jdGlvbigp
        e3JldHVybiB0KHRoaXMsZSl9KS5wcm9wZXJ0eShlKSl9KX0pLEVtYmVyLlNl
        bGVjdE9wdGdyb3VwPUVtYmVyLkNvbGxlY3Rpb25WaWV3LmV4dGVuZCh7dGFn
        TmFtZToib3B0Z3JvdXAiLGF0dHJpYnV0ZUJpbmRpbmdzOlsibGFiZWwiXSxz
        ZWxlY3Rpb25CaW5kaW5nOiJwYXJlbnRWaWV3LnNlbGVjdGlvbiIsbXVsdGlw
        bGVCaW5kaW5nOiJwYXJlbnRWaWV3Lm11bHRpcGxlIixvcHRpb25MYWJlbFBh
        dGhCaW5kaW5nOiJwYXJlbnRWaWV3Lm9wdGlvbkxhYmVsUGF0aCIsb3B0aW9u
        VmFsdWVQYXRoQmluZGluZzoicGFyZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgi
        LGl0ZW1WaWV3Q2xhc3NCaW5kaW5nOiJwYXJlbnRWaWV3Lm9wdGlvblZpZXci
        fSksRW1iZXIuU2VsZWN0PUVtYmVyLlZpZXcuZXh0ZW5kKHt0YWdOYW1lOiJz
        ZWxlY3QiLGNsYXNzTmFtZXM6WyJlbWJlci1zZWxlY3QiXSxkZWZhdWx0VGVt
        cGxhdGU6RW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbihlLHQs
        cixuLGkpe2Z1bmN0aW9uIG8oZSx0KXt2YXIgbixpLG89IiI7CnJldHVybiB0
        LmJ1ZmZlci5wdXNoKCc8b3B0aW9uIHZhbHVlPSIiPicpLG49e30saT17fSx0
        LmJ1ZmZlci5wdXNoKHAoci5fdHJpYWdlTXVzdGFjaGUuY2FsbChlLCJ2aWV3
        LnByb21wdCIse2hhc2g6e30sY29udGV4dHM6W2VdLHR5cGVzOlsiSUQiXSxo
        YXNoQ29udGV4dHM6aSxoYXNoVHlwZXM6bixkYXRhOnR9KSkpLHQuYnVmZmVy
        LnB1c2goIjwvb3B0aW9uPiIpLG99ZnVuY3Rpb24gYShlLHQpe3ZhciBuLGks
        bztpPXt9LG89e30sbj1yLmVhY2guY2FsbChlLCJ2aWV3Lmdyb3VwZWRDb250
        ZW50Iix7aGFzaDp7fSxpbnZlcnNlOmQubm9vcCxmbjpkLnByb2dyYW0oNCxz
        LHQpLGNvbnRleHRzOltlXSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOm8s
        aGFzaFR5cGVzOmksZGF0YTp0fSksbnx8MD09PW4/dC5idWZmZXIucHVzaChu
        KTp0LmJ1ZmZlci5wdXNoKCIiKX1mdW5jdGlvbiBzKGUsdCl7dmFyIG4saTtu
        PXtjb250ZW50OmUsbGFiZWw6ZX0saT17Y29udGVudDoiSUQiLGxhYmVsOiJJ
        RCJ9LHQuYnVmZmVyLnB1c2gocChyLnZpZXcuY2FsbChlLCJ2aWV3Lmdyb3Vw
        VmlldyIse2hhc2g6e2NvbnRlbnQ6ImNvbnRlbnQiLGxhYmVsOiJsYWJlbCJ9
        LGNvbnRleHRzOltlXSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOm4saGFz
        aFR5cGVzOmksZGF0YTp0fSkpKX1mdW5jdGlvbiB1KGUsdCl7dmFyIG4saSxv
        O2k9e30sbz17fSxuPXIuZWFjaC5jYWxsKGUsInZpZXcuY29udGVudCIse2hh
        c2g6e30saW52ZXJzZTpkLm5vb3AsZm46ZC5wcm9ncmFtKDcsYyx0KSxjb250
        ZXh0czpbZV0sdHlwZXM6WyJJRCJdLGhhc2hDb250ZXh0czpvLGhhc2hUeXBl
        czppLGRhdGE6dH0pLG58fDA9PT1uP3QuYnVmZmVyLnB1c2gobik6dC5idWZm
        ZXIucHVzaCgiIil9ZnVuY3Rpb24gYyhlLHQpe3ZhciBuLGk7bj17Y29udGVu
        dDplfSxpPXtjb250ZW50OiJJRCJ9LHQuYnVmZmVyLnB1c2gocChyLnZpZXcu
        Y2FsbChlLCJ2aWV3Lm9wdGlvblZpZXciLHtoYXNoOntjb250ZW50OiIifSxj
        b250ZXh0czpbZV0sdHlwZXM6WyJJRCJdLGhhc2hDb250ZXh0czpuLGhhc2hU
        eXBlczppLGRhdGE6dH0pKSl9dGhpcy5jb21waWxlckluZm89WzQsIj49IDEu
        MC4wIl0scj10aGlzLm1lcmdlKHIsRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJz
        KSxpPWl8fHt9O3ZhciBsLGgsbSxmPSIiLHA9dGhpcy5lc2NhcGVFeHByZXNz
        aW9uLGQ9dGhpcztyZXR1cm4gaD17fSxtPXt9LGw9clsiaWYiXS5jYWxsKHQs
        InZpZXcucHJvbXB0Iix7aGFzaDp7fSxpbnZlcnNlOmQubm9vcCxmbjpkLnBy
        b2dyYW0oMSxvLGkpLGNvbnRleHRzOlt0XSx0eXBlczpbIklEIl0saGFzaENv
        bnRleHRzOm0saGFzaFR5cGVzOmgsZGF0YTppfSksKGx8fDA9PT1sKSYmaS5i
        dWZmZXIucHVzaChsKSxoPXt9LG09e30sbD1yWyJpZiJdLmNhbGwodCwidmll
        dy5vcHRpb25Hcm91cFBhdGgiLHtoYXNoOnt9LGludmVyc2U6ZC5wcm9ncmFt
        KDYsdSxpKSxmbjpkLnByb2dyYW0oMyxhLGkpLGNvbnRleHRzOlt0XSx0eXBl
        czpbIklEIl0saGFzaENvbnRleHRzOm0saGFzaFR5cGVzOmgsZGF0YTppfSks
        KGx8fDA9PT1sKSYmaS5idWZmZXIucHVzaChsKSxmfSksYXR0cmlidXRlQmlu
        ZGluZ3M6WyJtdWx0aXBsZSIsImRpc2FibGVkIiwidGFiaW5kZXgiLCJuYW1l
        Il0sbXVsdGlwbGU6ITEsZGlzYWJsZWQ6ITEsY29udGVudDpudWxsLHNlbGVj
        dGlvbjpudWxsLHZhbHVlOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGUscil7
        aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI7dmFyIG49dCh0aGlz
        LCJvcHRpb25WYWx1ZVBhdGgiKS5yZXBsYWNlKC9eY29udGVudFwuPy8sIiIp
        O3JldHVybiBuP3QodGhpcywic2VsZWN0aW9uLiIrbik6dCh0aGlzLCJzZWxl
        Y3Rpb24iKX0pLnByb3BlcnR5KCJzZWxlY3Rpb24iKSxwcm9tcHQ6bnVsbCxv
        cHRpb25MYWJlbFBhdGg6ImNvbnRlbnQiLG9wdGlvblZhbHVlUGF0aDoiY29u
        dGVudCIsb3B0aW9uR3JvdXBQYXRoOm51bGwsZ3JvdXBWaWV3OkVtYmVyLlNl
        bGVjdE9wdGdyb3VwLGdyb3VwZWRDb250ZW50OkVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKCl7dmFyIGU9dCh0aGlzLCJvcHRpb25Hcm91cFBhdGgiKSxyPUVt
        YmVyLkEoKSxuPXQodGhpcywiY29udGVudCIpfHxbXTtyZXR1cm4gaShuLGZ1
        bmN0aW9uKG4pe3ZhciBpPXQobixlKTt0KHIsImxhc3RPYmplY3QubGFiZWwi
        KSE9PWkmJnIucHVzaE9iamVjdCh7bGFiZWw6aSxjb250ZW50OkVtYmVyLkEo
        KX0pLHQociwibGFzdE9iamVjdC5jb250ZW50IikucHVzaChuKX0pLHJ9KS5w
        cm9wZXJ0eSgib3B0aW9uR3JvdXBQYXRoIiwiY29udGVudC5AZWFjaCIpLG9w
        dGlvblZpZXc6RW1iZXIuU2VsZWN0T3B0aW9uLF9jaGFuZ2U6ZnVuY3Rpb24o
        KXt0KHRoaXMsIm11bHRpcGxlIik/dGhpcy5fY2hhbmdlTXVsdGlwbGUoKTp0
        aGlzLl9jaGFuZ2VTaW5nbGUoKX0sc2VsZWN0aW9uRGlkQ2hhbmdlOkVtYmVy
        Lm9ic2VydmVyKCJzZWxlY3Rpb24uQGVhY2giLGZ1bmN0aW9uKCl7dmFyIHI9
        dCh0aGlzLCJzZWxlY3Rpb24iKTtpZih0KHRoaXMsIm11bHRpcGxlIikpe2lm
        KCFhKHIpKXJldHVybiBlKHRoaXMsInNlbGVjdGlvbiIsRW1iZXIuQShbcl0p
        KSx2b2lkIDA7dGhpcy5fc2VsZWN0aW9uRGlkQ2hhbmdlTXVsdGlwbGUoKX1l
        bHNlIHRoaXMuX3NlbGVjdGlvbkRpZENoYW5nZVNpbmdsZSgpfSksdmFsdWVE
        aWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoInZhbHVlIixmdW5jdGlvbigpe3Zh
        ciBlLHI9dCh0aGlzLCJjb250ZW50Iiksbj10KHRoaXMsInZhbHVlIiksaT10
        KHRoaXMsIm9wdGlvblZhbHVlUGF0aCIpLnJlcGxhY2UoL15jb250ZW50XC4/
        LywiIiksbz1pP3QodGhpcywic2VsZWN0aW9uLiIraSk6dCh0aGlzLCJzZWxl
        Y3Rpb24iKTtuIT09byYmKGU9cj9yLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJu
        IG49PT0oaT90KGUsaSk6ZSl9KTpudWxsLHRoaXMuc2V0KCJzZWxlY3Rpb24i
        LGUpKX0pLF90cmlnZ2VyQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlz
        LCJzZWxlY3Rpb24iKSxyPXQodGhpcywidmFsdWUiKTtFbWJlci5pc05vbmUo
        ZSl8fHRoaXMuc2VsZWN0aW9uRGlkQ2hhbmdlKCksRW1iZXIuaXNOb25lKHIp
        fHx0aGlzLnZhbHVlRGlkQ2hhbmdlKCksdGhpcy5fY2hhbmdlKCl9LF9jaGFu
        Z2VTaW5nbGU6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLiQoKVswXS5zZWxlY3Rl
        ZEluZGV4LG49dCh0aGlzLCJjb250ZW50IiksaT10KHRoaXMsInByb21wdCIp
        O2lmKG4mJnQobiwibGVuZ3RoIikpe2lmKGkmJjA9PT1yKXJldHVybiBlKHRo
        aXMsInNlbGVjdGlvbiIsbnVsbCksdm9pZCAwO2kmJihyLT0xKSxlKHRoaXMs
        InNlbGVjdGlvbiIsbi5vYmplY3RBdChyKSl9fSxfY2hhbmdlTXVsdGlwbGU6
        ZnVuY3Rpb24oKXt2YXIgcj10aGlzLiQoIm9wdGlvbjpzZWxlY3RlZCIpLG49
        dCh0aGlzLCJwcm9tcHQiKSxpPW4/MTowLHM9dCh0aGlzLCJjb250ZW50Iiks
        dT10KHRoaXMsInNlbGVjdGlvbiIpO2lmKHMmJnIpe3ZhciBjPXIubWFwKGZ1
        bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXgtaX0pLnRvQXJyYXkoKSxsPXMu
        b2JqZWN0c0F0KGMpO2EodSk/byh1LDAsdCh1LCJsZW5ndGgiKSxsKTplKHRo
        aXMsInNlbGVjdGlvbiIsbCl9fSxfc2VsZWN0aW9uRGlkQ2hhbmdlU2luZ2xl
        OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXQoImVsZW1lbnQiKTtpZihlKXt2
        YXIgbj10KHRoaXMsImNvbnRlbnQiKSxpPXQodGhpcywic2VsZWN0aW9uIiks
        bz1uP3IobixpKTotMSxhPXQodGhpcywicHJvbXB0Iik7YSYmKG8rPTEpLGUm
        JihlLnNlbGVjdGVkSW5kZXg9byl9fSxfc2VsZWN0aW9uRGlkQ2hhbmdlTXVs
        dGlwbGU6ZnVuY3Rpb24oKXt2YXIgZSxpPXQodGhpcywiY29udGVudCIpLG89
        dCh0aGlzLCJzZWxlY3Rpb24iKSxhPWk/bihpLG8pOlstMV0scz10KHRoaXMs
        InByb21wdCIpLHU9cz8xOjAsYz10aGlzLiQoIm9wdGlvbiIpO2MmJmMuZWFj
        aChmdW5jdGlvbigpe2U9dGhpcy5pbmRleD4tMT90aGlzLmluZGV4LXU6LTEs
        dGhpcy5zZWxlY3RlZD1yKGEsZSk+LTF9KX0saW5pdDpmdW5jdGlvbigpe3Ro
        aXMuX3N1cGVyKCksdGhpcy5vbigiZGlkSW5zZXJ0RWxlbWVudCIsdGhpcyx0
        aGlzLl90cmlnZ2VyQ2hhbmdlKSx0aGlzLm9uKCJjaGFuZ2UiLHRoaXMsdGhp
        cy5fY2hhbmdlKX19KX0oKSxmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMu
        cmVnaXN0ZXJIZWxwZXIoImlucHV0IixmdW5jdGlvbihlKXt2YXIgdD1lLmhh
        c2gscj0oZS5oYXNoVHlwZXMsdC50eXBlKSxuPXQub247cmV0dXJuIGRlbGV0
        ZSB0LnR5cGUsZGVsZXRlIHQub24sImNoZWNrYm94Ij09PXI/RW1iZXIuSGFu
        ZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLEVtYmVyLkNoZWNrYm94
        LGUpOihyJiYodC50eXBlPXIpLHQub25FdmVudD1ufHwiZW50ZXIiLEVtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNhbGwodGhpcyxFbWJlci5UZXh0
        RmllbGQsZSkpfSksRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigi
        dGV4dGFyZWEiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc2gsZS5oYXNoVHlw
        ZXMsRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLEVt
        YmVyLlRleHRBcmVhLGUpfSl9KCksZnVuY3Rpb24oKXtFbWJlci5Db21wb25l
        bnRMb29rdXA9RW1iZXIuT2JqZWN0LmV4dGVuZCh7bG9va3VwRmFjdG9yeTpm
        dW5jdGlvbihlLHQpe3Q9dHx8dGhpcy5jb250YWluZXI7dmFyIHI9ImNvbXBv
        bmVudDoiK2Usbj0idGVtcGxhdGU6Y29tcG9uZW50cy8iK2UsaT10JiZ0Lmhh
        cyhuKTtpJiZ0LmluamVjdGlvbihyLCJsYXlvdXQiLG4pO3ZhciBvPXQubG9v
        a3VwRmFjdG9yeShyKTtyZXR1cm4gaXx8bz8ob3x8KHQucmVnaXN0ZXIocixF
        bWJlci5Db21wb25lbnQpLG89dC5sb29rdXBGYWN0b3J5KHIpKSxvKTp2b2lk
        IDB9fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7RW1iZXIuSGFuZGxl
        YmFycy5ib290c3RyYXAoRW1iZXIuJChkb2N1bWVudCkpfWZ1bmN0aW9uIHQo
        ZSl7ZS5yZWdpc3RlcigiY29tcG9uZW50LWxvb2t1cDptYWluIixFbWJlci5D
        b21wb25lbnRMb29rdXApfUVtYmVyLkhhbmRsZWJhcnMuYm9vdHN0cmFwPWZ1
        bmN0aW9uKGUpe3ZhciB0PSdzY3JpcHRbdHlwZT0idGV4dC94LWhhbmRsZWJh
        cnMiXSwgc2NyaXB0W3R5cGU9InRleHQveC1yYXctaGFuZGxlYmFycyJdJztF
        bWJlci4kKHQsZSkuZWFjaChmdW5jdGlvbigpe3ZhciBlPUVtYmVyLiQodGhp
        cyksdD0idGV4dC94LXJhdy1oYW5kbGViYXJzIj09PWUuYXR0cigidHlwZSIp
        P0VtYmVyLiQucHJveHkoSGFuZGxlYmFycy5jb21waWxlLEhhbmRsZWJhcnMp
        OkVtYmVyLiQucHJveHkoRW1iZXIuSGFuZGxlYmFycy5jb21waWxlLEVtYmVy
        LkhhbmRsZWJhcnMpLHI9ZS5hdHRyKCJkYXRhLXRlbXBsYXRlLW5hbWUiKXx8
        ZS5hdHRyKCJpZCIpfHwiYXBwbGljYXRpb24iLG49dChlLmh0bWwoKSk7aWYo
        dm9pZCAwIT09RW1iZXIuVEVNUExBVEVTW3JdKXRocm93IG5ldyBFbWJlci5F
        cnJvcignVGVtcGxhdGUgbmFtZWQgIicrcisnIiBhbHJlYWR5IGV4aXN0cy4n
        KTtFbWJlci5URU1QTEFURVNbcl09bixlLnJlbW92ZSgpfSl9LEVtYmVyLm9u
        TG9hZCgiRW1iZXIuQXBwbGljYXRpb24iLGZ1bmN0aW9uKHIpe3IuaW5pdGlh
        bGl6ZXIoe25hbWU6ImRvbVRlbXBsYXRlcyIsaW5pdGlhbGl6ZTplfSksci5p
        bml0aWFsaXplcih7bmFtZToicmVnaXN0ZXJDb21wb25lbnRMb29rdXAiLGFm
        dGVyOiJkb21UZW1wbGF0ZXMiLGluaXRpYWxpemU6dH0pfSl9KCksZnVuY3Rp
        b24oKXtFbWJlci5ydW5Mb2FkSG9va3MoIkVtYmVyLkhhbmRsZWJhcnMiLEVt
        YmVyLkhhbmRsZWJhcnMpfSgpLGZ1bmN0aW9uKCl7ZSgicm91dGUtcmVjb2du
        aXplciIsW10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShl
        KXt0aGlzLnN0cmluZz1lfWZ1bmN0aW9uIHQoZSl7dGhpcy5uYW1lPWV9ZnVu
        Y3Rpb24gcihlKXt0aGlzLm5hbWU9ZX1mdW5jdGlvbiBuKCl7fWZ1bmN0aW9u
        IGkoaSxvLGEpeyIvIj09PWkuY2hhckF0KDApJiYoaT1pLnN1YnN0cigxKSk7
        Zm9yKHZhciBzPWkuc3BsaXQoIi8iKSx1PVtdLGM9MCxsPXMubGVuZ3RoO2w+
        YztjKyspe3ZhciBoLG09c1tjXTsoaD1tLm1hdGNoKC9eOihbXlwvXSspJC8p
        KT8odS5wdXNoKG5ldyB0KGhbMV0pKSxvLnB1c2goaFsxXSksYS5keW5hbWlj
        cysrKTooaD1tLm1hdGNoKC9eXCooW15cL10rKSQvKSk/KHUucHVzaChuZXcg
        cihoWzFdKSksby5wdXNoKGhbMV0pLGEuc3RhcnMrKyk6IiI9PT1tP3UucHVz
        aChuZXcgbik6KHUucHVzaChuZXcgZShtKSksYS5zdGF0aWNzKyspfXJldHVy
        biB1fWZ1bmN0aW9uIG8oZSl7dGhpcy5jaGFyU3BlYz1lLHRoaXMubmV4dFN0
        YXRlcz1bXX1mdW5jdGlvbiBhKGUpe3JldHVybiBlLnNvcnQoZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gZS50eXBlcy5zdGFycyE9PXQudHlwZXMuc3RhcnM/ZS50
        eXBlcy5zdGFycy10LnR5cGVzLnN0YXJzOmUudHlwZXMuZHluYW1pY3MhPT10
        LnR5cGVzLmR5bmFtaWNzP2UudHlwZXMuZHluYW1pY3MtdC50eXBlcy5keW5h
        bWljczplLnR5cGVzLnN0YXRpY3MhPT10LnR5cGVzLnN0YXRpY3M/dC50eXBl
        cy5zdGF0aWNzLWUudHlwZXMuc3RhdGljczowfSl9ZnVuY3Rpb24gcyhlLHQp
        e2Zvcih2YXIgcj1bXSxuPTAsaT1lLmxlbmd0aDtpPm47bisrKXt2YXIgbz1l
        W25dO3I9ci5jb25jYXQoby5tYXRjaCh0KSl9cmV0dXJuIHJ9ZnVuY3Rpb24g
        dShlLHQscil7Zm9yKHZhciBuPWUuaGFuZGxlcnMsaT1lLnJlZ2V4LG89dC5t
        YXRjaChpKSxhPTEscz1bXSx1PTAsYz1uLmxlbmd0aDtjPnU7dSsrKXt2YXIg
        bCxoLG09blt1XSxmPW0ubmFtZXMscD17fSxkPW0ucXVlcnlQYXJhbXN8fFtd
        LGI9e307Zm9yKGw9MCxoPWYubGVuZ3RoO2g+bDtsKyspcFtmW2xdXT1vW2Er
        K107Zm9yKGw9MCxoPWQubGVuZ3RoO2g+bDtsKyspe3ZhciBFPWRbbF07cltF
        XSYmKGJbRV09cltFXSl9dmFyIHY9e2hhbmRsZXI6bS5oYW5kbGVyLHBhcmFt
        czpwLGlzRHluYW1pYzohIWYubGVuZ3RofTtkJiZkLmxlbmd0aD4wJiYodi5x
        dWVyeVBhcmFtcz1iKSxzLnB1c2godil9cmV0dXJuIHN9ZnVuY3Rpb24gYyhl
        LHQpe3JldHVybiB0LmVhY2hDaGFyKGZ1bmN0aW9uKHQpe2U9ZS5wdXQodCl9
        KSxlfWZ1bmN0aW9uIGwoZSx0LHIpe3RoaXMucGF0aD1lLHRoaXMubWF0Y2hl
        cj10LHRoaXMuZGVsZWdhdGU9cn1mdW5jdGlvbiBoKGUpe3RoaXMucm91dGVz
        PXt9LHRoaXMuY2hpbGRyZW49e30sdGhpcy5xdWVyeVBhcmFtcz17fSx0aGlz
        LnRhcmdldD1lfWZ1bmN0aW9uIG0oZSx0LHIpe3JldHVybiBmdW5jdGlvbihu
        LGkpe3ZhciBvPWUrbjtyZXR1cm4gaT8oaShtKG8sdCxyKSksdm9pZCAwKTpu
        ZXcgbChlK24sdCxyKX19ZnVuY3Rpb24gZihlLHQscixuKXtmb3IodmFyIGk9
        MCxvPTAsYT1lLmxlbmd0aDthPm87bysrKWkrPWVbb10ucGF0aC5sZW5ndGg7
        dD10LnN1YnN0cihpKTt2YXIgcz17cGF0aDp0LGhhbmRsZXI6cn07biYmKHMu
        cXVlcnlQYXJhbXM9biksZS5wdXNoKHMpfWZ1bmN0aW9uIHAoZSx0LHIsbil7
        dmFyIGk9dC5yb3V0ZXMsbz10LnF1ZXJ5UGFyYW1zO2Zvcih2YXIgYSBpbiBp
        KWlmKGkuaGFzT3duUHJvcGVydHkoYSkpe3ZhciBzPWUuc2xpY2UoKTtmKHMs
        YSxpW2FdLG9bYV0pLHQuY2hpbGRyZW5bYV0/cChzLHQuY2hpbGRyZW5bYV0s
        cixuKTpyLmNhbGwobixzKX19dmFyIGQ9WyIvIiwiLiIsIioiLCIrIiwiPyIs
        InwiLCIoIiwiKSIsIlsiLCJdIiwieyIsIn0iLCJcXCJdLGI9bmV3IFJlZ0V4
        cCgiKFxcIitkLmpvaW4oInxcXCIpKyIpIiwiZyIpO2UucHJvdG90eXBlPXtl
        YWNoQ2hhcjpmdW5jdGlvbihlKXtmb3IodmFyIHQscj10aGlzLnN0cmluZyxu
        PTAsaT1yLmxlbmd0aDtpPm47bisrKXQ9ci5jaGFyQXQobiksZSh7dmFsaWRD
        aGFyczp0fSl9LHJlZ2V4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyaW5n
        LnJlcGxhY2UoYiwiXFwkMSIpfSxnZW5lcmF0ZTpmdW5jdGlvbigpe3JldHVy
        biB0aGlzLnN0cmluZ319LHQucHJvdG90eXBlPXtlYWNoQ2hhcjpmdW5jdGlv
        bihlKXtlKHtpbnZhbGlkQ2hhcnM6Ii8iLHJlcGVhdDohMH0pfSxyZWdleDpm
        dW5jdGlvbigpe3JldHVybiIoW14vXSspIn0sZ2VuZXJhdGU6ZnVuY3Rpb24o
        ZSl7cmV0dXJuIGVbdGhpcy5uYW1lXX19LHIucHJvdG90eXBlPXtlYWNoQ2hh
        cjpmdW5jdGlvbihlKXtlKHtpbnZhbGlkQ2hhcnM6IiIscmVwZWF0OiEwfSl9
        LHJlZ2V4OmZ1bmN0aW9uKCl7cmV0dXJuIiguKykifSxnZW5lcmF0ZTpmdW5j
        dGlvbihlKXtyZXR1cm4gZVt0aGlzLm5hbWVdfX0sbi5wcm90b3R5cGU9e2Vh
        Y2hDaGFyOmZ1bmN0aW9uKCl7fSxyZWdleDpmdW5jdGlvbigpe3JldHVybiIi
        fSxnZW5lcmF0ZTpmdW5jdGlvbigpe3JldHVybiIifX0sby5wcm90b3R5cGU9
        e2dldDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5uZXh0U3RhdGVzLHI9
        MCxuPXQubGVuZ3RoO24+cjtyKyspe3ZhciBpPXRbcl0sbz1pLmNoYXJTcGVj
        LnZhbGlkQ2hhcnM9PT1lLnZhbGlkQ2hhcnM7aWYobz1vJiZpLmNoYXJTcGVj
        LmludmFsaWRDaGFycz09PWUuaW52YWxpZENoYXJzKXJldHVybiBpfX0scHV0
        OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybih0PXRoaXMuZ2V0KGUpKT90Oih0
        PW5ldyBvKGUpLHRoaXMubmV4dFN0YXRlcy5wdXNoKHQpLGUucmVwZWF0JiZ0
        Lm5leHRTdGF0ZXMucHVzaCh0KSx0KX0sbWF0Y2g6ZnVuY3Rpb24oZSl7Zm9y
        KHZhciB0LHIsbixpPXRoaXMubmV4dFN0YXRlcyxvPVtdLGE9MCxzPWkubGVu
        Z3RoO3M+YTthKyspdD1pW2FdLHI9dC5jaGFyU3BlYywidW5kZWZpbmVkIiE9
        dHlwZW9mKG49ci52YWxpZENoYXJzKT8tMSE9PW4uaW5kZXhPZihlKSYmby5w
        dXNoKHQpOiJ1bmRlZmluZWQiIT10eXBlb2Yobj1yLmludmFsaWRDaGFycykm
        Ji0xPT09bi5pbmRleE9mKGUpJiZvLnB1c2godCk7cmV0dXJuIG99fTt2YXIg
        RT1mdW5jdGlvbigpe3RoaXMucm9vdFN0YXRlPW5ldyBvLHRoaXMubmFtZXM9
        e319O3JldHVybiBFLnByb3RvdHlwZT17YWRkOmZ1bmN0aW9uKGUsdCl7Zm9y
        KHZhciByLG89dGhpcy5yb290U3RhdGUsYT0iXiIscz17c3RhdGljczowLGR5
        bmFtaWNzOjAsc3RhcnM6MH0sdT1bXSxsPVtdLGg9ITAsbT0wLGY9ZS5sZW5n
        dGg7Zj5tO20rKyl7dmFyIHA9ZVttXSxkPVtdLGI9aShwLnBhdGgsZCxzKTts
        PWwuY29uY2F0KGIpO2Zvcih2YXIgRT0wLHY9Yi5sZW5ndGg7dj5FO0UrKyl7
        dmFyIGc9YltFXTtnIGluc3RhbmNlb2Ygbnx8KGg9ITEsbz1vLnB1dCh7dmFs
        aWRDaGFyczoiLyJ9KSxhKz0iLyIsbz1jKG8sZyksYSs9Zy5yZWdleCgpKX12
        YXIgeT17aGFuZGxlcjpwLmhhbmRsZXIsbmFtZXM6ZH07cC5xdWVyeVBhcmFt
        cyYmKHkucXVlcnlQYXJhbXM9cC5xdWVyeVBhcmFtcyksdS5wdXNoKHkpfWgm
        JihvPW8ucHV0KHt2YWxpZENoYXJzOiIvIn0pLGErPSIvIiksby5oYW5kbGVy
        cz11LG8ucmVnZXg9bmV3IFJlZ0V4cChhKyIkIiksby50eXBlcz1zLChyPXQm
        JnQuYXMpJiYodGhpcy5uYW1lc1tyXT17c2VnbWVudHM6bCxoYW5kbGVyczp1
        fSl9LGhhbmRsZXJzRm9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubmFtZXNb
        ZV0scj1bXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIlRoZXJlIGlzIG5vIHJv
        dXRlIG5hbWVkICIrZSk7Zm9yKHZhciBuPTAsaT10LmhhbmRsZXJzLmxlbmd0
        aDtpPm47bisrKXIucHVzaCh0LmhhbmRsZXJzW25dKTtyZXR1cm4gcn0saGFz
        Um91dGU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLm5hbWVzW2VdfSxnZW5l
        cmF0ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMubmFtZXNbZV0saT0iIjtp
        Zighcil0aHJvdyBuZXcgRXJyb3IoIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVk
        ICIrZSk7Zm9yKHZhciBvPXIuc2VnbWVudHMsYT0wLHM9by5sZW5ndGg7cz5h
        O2ErKyl7dmFyIHU9b1thXTt1IGluc3RhbmNlb2Ygbnx8KGkrPSIvIixpKz11
        LmdlbmVyYXRlKHQpKX1yZXR1cm4iLyIhPT1pLmNoYXJBdCgwKSYmKGk9Ii8i
        K2kpLHQmJnQucXVlcnlQYXJhbXMmJihpKz10aGlzLmdlbmVyYXRlUXVlcnlT
        dHJpbmcodC5xdWVyeVBhcmFtcyxyLmhhbmRsZXJzKSksaX0sZ2VuZXJhdGVR
        dWVyeVN0cmluZzpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxuPVtdLGk9
        MDtpPHQubGVuZ3RoO2krKyl7dmFyIG89dFtpXS5xdWVyeVBhcmFtcztvJiZu
        LnB1c2guYXBwbHkobixvKX1mb3IodmFyIGEgaW4gZSlpZihlLmhhc093blBy
        b3BlcnR5KGEpKXtpZigtMT09PW4uaW5kZXhPZihhKSl0aHJvdydRdWVyeSBw
        YXJhbSAiJythKyciIGlzIG5vdCBzcGVjaWZpZWQgYXMgYSB2YWxpZCBwYXJh
        bSBmb3IgdGhpcyByb3V0ZSc7dmFyIHM9ZVthXSx1PWVuY29kZVVSSUNvbXBv
        bmVudChhKTtzIT09ITAmJih1Kz0iPSIrZW5jb2RlVVJJQ29tcG9uZW50KHMp
        KSxyLnB1c2godSl9cmV0dXJuIDA9PT1yLmxlbmd0aD8iIjoiPyIrci5qb2lu
        KCImIil9LHBhcnNlUXVlcnlTdHJpbmc6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0
        PWUuc3BsaXQoIiYiKSxyPXt9LG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9
        dFtuXS5zcGxpdCgiPSIpLG89ZGVjb2RlVVJJQ29tcG9uZW50KGlbMF0pLGE9
        aVsxXT9kZWNvZGVVUklDb21wb25lbnQoaVsxXSk6ITA7cltvXT1hfXJldHVy
        biByfSxyZWNvZ25pemU6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGksbz1bdGhp
        cy5yb290U3RhdGVdLGM9e307aWYoaT1lLmluZGV4T2YoIj8iKSwtMSE9PWkp
        e3ZhciBsPWUuc3Vic3RyKGkrMSxlLmxlbmd0aCk7ZT1lLnN1YnN0cigwLGkp
        LGM9dGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKGwpfWZvcigiLyIhPT1lLmNoYXJB
        dCgwKSYmKGU9Ii8iK2UpLHQ9ZS5sZW5ndGgsdD4xJiYiLyI9PT1lLmNoYXJB
        dCh0LTEpJiYoZT1lLnN1YnN0cigwLHQtMSkpLHI9MCxuPWUubGVuZ3RoO24+
        ciYmKG89cyhvLGUuY2hhckF0KHIpKSxvLmxlbmd0aCk7cisrKTt2YXIgaD1b
        XTtmb3Iocj0wLG49by5sZW5ndGg7bj5yO3IrKylvW3JdLmhhbmRsZXJzJiZo
        LnB1c2gob1tyXSk7bz1hKGgpO3ZhciBtPWhbMF07cmV0dXJuIG0mJm0uaGFu
        ZGxlcnM/dShtLGUsYyk6dm9pZCAwfX0sbC5wcm90b3R5cGU9e3RvOmZ1bmN0
        aW9uKGUsdCl7dmFyIHI9dGhpcy5kZWxlZ2F0ZTtpZihyJiZyLndpbGxBZGRS
        b3V0ZSYmKGU9ci53aWxsQWRkUm91dGUodGhpcy5tYXRjaGVyLnRhcmdldCxl
        KSksdGhpcy5tYXRjaGVyLmFkZCh0aGlzLnBhdGgsZSksdCl7aWYoMD09PXQu
        bGVuZ3RoKXRocm93IG5ldyBFcnJvcigiWW91IG11c3QgaGF2ZSBhbiBhcmd1
        bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2VkIHRvIGB0b2AiKTt0aGlzLm1h
        dGNoZXIuYWRkQ2hpbGQodGhpcy5wYXRoLGUsdCx0aGlzLmRlbGVnYXRlKX1y
        ZXR1cm4gdGhpc30sd2l0aFF1ZXJ5UGFyYW1zOmZ1bmN0aW9uKCl7aWYoMD09
        PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJ5b3UgbXVzdCBw
        cm92aWRlIGFyZ3VtZW50cyB0byB0aGUgd2l0aFF1ZXJ5UGFyYW1zIG1ldGhv
        ZCIpO2Zvcih2YXIgZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspaWYoInN0
        cmluZyIhPXR5cGVvZiBhcmd1bWVudHNbZV0pdGhyb3cgbmV3IEVycm9yKCd5
        b3Ugc2hvdWxkIGNhbGwgd2l0aFF1ZXJ5UGFyYW1zIHdpdGggYSBsaXN0IG9m
        IHN0cmluZ3MsIGUuZy4gd2l0aFF1ZXJ5UGFyYW1zKCJmb28iLCAiYmFyIikn
        KTt2YXIgdD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dGhpcy5tYXRjaGVy
        LmFkZFF1ZXJ5UGFyYW1zKHRoaXMucGF0aCx0KX19LGgucHJvdG90eXBlPXth
        ZGQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnJvdXRlc1tlXT10fSxhZGRRdWVyeVBh
        cmFtczpmdW5jdGlvbihlLHQpe3RoaXMucXVlcnlQYXJhbXNbZV09dH0sYWRk
        Q2hpbGQ6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9bmV3IGgodCk7dGhpcy5j
        aGlsZHJlbltlXT1pO3ZhciBvPW0oZSxpLG4pO24mJm4uY29udGV4dEVudGVy
        ZWQmJm4uY29udGV4dEVudGVyZWQodCxvKSxyKG8pfX0sRS5wcm90b3R5cGUu
        bWFwPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGg7ZShtKCIiLHIsdGhpcy5k
        ZWxlZ2F0ZSkpLHAoW10scixmdW5jdGlvbihlKXt0P3QodGhpcyxlKTp0aGlz
        LmFkZChlKX0sdGhpcyl9LEV9KX0oKSxmdW5jdGlvbigpe2UoInJvdXRlciIs
        WyJyb3V0ZS1yZWNvZ25pemVyIiwicnN2cCIsImV4cG9ydHMiXSxmdW5jdGlv
        bihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSx0KXt0aGlzLnJv
        dXRlcj1lLHRoaXMucHJvbWlzZT10LHRoaXMuZGF0YT17fSx0aGlzLnJlc29s
        dmVkTW9kZWxzPXt9LHRoaXMucHJvdmlkZWRNb2RlbHM9e30sdGhpcy5wcm92
        aWRlZE1vZGVsc0FycmF5PVtdLHRoaXMuc2VxdWVuY2U9KytuLmN1cnJlbnRT
        ZXF1ZW5jZSx0aGlzLnBhcmFtcz17fX1mdW5jdGlvbiBpKCl7dGhpcy5yZWNv
        Z25pemVyPW5ldyBrfWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gbmV3IG4oZSxM
        LnJlamVjdCh0KSl9ZnVuY3Rpb24gYShlLHQscixuKXt2YXIgaSxvLGE9dC5s
        ZW5ndGgsdT17fSxjPWUuY3VycmVudEhhbmRsZXJJbmZvc3x8W10sbD17fSxt
        PWUuY3VycmVudFBhcmFtc3x8e30sZj1lLmFjdGl2ZVRyYW5zaXRpb24scD17
        fTtmb3Iocj1ILmNhbGwociksaChsLG4pLGk9dC5sZW5ndGgtMTtpPj0wO2kt
        LSl7dmFyIGQ9dFtpXSxiPWQuaGFuZGxlcixFPWNbaV0sdj0hMTtpZihFJiZF
        Lm5hbWU9PT1kLmhhbmRsZXJ8fCh2PSEwKSxkLmlzRHluYW1pYylpZihvPXMo
        cixiLGYsITAsbCkpdj0hMCx1W2JdPW87ZWxzZXtwW2JdPXt9O2Zvcih2YXIg
        ZyBpbiBkLnBhcmFtcylpZihkLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eShnKSl7
        dmFyIHc9ZC5wYXJhbXNbZ107bVtnXSE9PXcmJih2PSEwKSxwW2JdW2ddPWxb
        Z109d319ZWxzZSBpZihkLmhhc093blByb3BlcnR5KCJuYW1lcyIpKWlmKHIu
        bGVuZ3RoJiYodj0hMCksbz1zKHIsYixmLGQubmFtZXNbMF0sbCkpdVtiXT1v
        O2Vsc2V7dmFyIF89ZC5uYW1lcztwW2JdPXt9O2Zvcih2YXIgQz0wLE89Xy5s
        ZW5ndGg7Tz5DOysrQyl7dmFyIEE9X1tDXTtwW2JdW0FdPWxbQV09bFtBXXx8
        bVtBXX19RSYmIXkoRS5xdWVyeVBhcmFtcyxkLnF1ZXJ5UGFyYW1zKSYmKHY9
        ITApLHYmJihhPWkpfWlmKHIubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKCJN
        b3JlIGNvbnRleHQgb2JqZWN0cyB3ZXJlIHBhc3NlZCB0aGFuIHRoZXJlIGFy
        ZSBkeW5hbWljIHNlZ21lbnRzIGZvciB0aGUgcm91dGU6ICIrdFt0Lmxlbmd0
        aC0xXS5oYW5kbGVyKTt2YXIgUD1jW2EtMV0seD1QJiZQLmhhbmRsZXI7cmV0
        dXJue21hdGNoUG9pbnQ6YSxwcm92aWRlZE1vZGVsczp1LHBhcmFtczpsLGhh
        bmRsZXJQYXJhbXM6cCxwaXZvdEhhbmRsZXI6eH19ZnVuY3Rpb24gcyhlLHQs
        cixuLGkpe2lmKGUubGVuZ3RoJiZuKXt2YXIgbz1lLnBvcCgpO2lmKCF1KG8p
        KXJldHVybiBvO2lbbl09by50b1N0cmluZygpfWVsc2UgaWYocilyZXR1cm4g
        ci5yZXNvbHZlZE1vZGVsc1t0XXx8biYmci5wcm92aWRlZE1vZGVsc1t0XX1m
        dW5jdGlvbiB1KGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZXx8ZSBpbnN0
        YW5jZW9mIFN0cmluZ3x8Im51bWJlciI9PXR5cGVvZiBlfHxlIGluc3RhbmNl
        b2YgTnVtYmVyfWZ1bmN0aW9uIGMoZSx0KXtmb3IodmFyIHI9ZS5yZWNvZ25p
        emVyLmhhbmRsZXJzRm9yKHQpLG49W10saT0wO2k8ci5sZW5ndGg7aSsrKW4u
        cHVzaC5hcHBseShuLHJbaV0ucXVlcnlQYXJhbXN8fFtdKTtyZXR1cm4gbn1m
        dW5jdGlvbiBsKGUsdCxyLG4pe3ZhciBpLG8scyx1LGMsbD1lLnJlY29nbml6
        ZXIuaGFuZGxlcnNGb3IodCkscD17fSxkPWYoZSxsLG4pLGI9YShlLGQsciku
        bWF0Y2hQb2ludDtmb3IocC5xdWVyeVBhcmFtcz17fSxjPTA7YzxsLmxlbmd0
        aDtjKyspbz1sW2NdLHM9ZS5nZXRIYW5kbGVyKG8uaGFuZGxlciksdT1vLm5h
        bWVzLHUubGVuZ3RoJiYoaT1jPj1iP3Iuc2hpZnQoKTpzLmNvbnRleHQsaChw
        LGoocyxpLHUpKSksbiE9PSExJiYobShwLnF1ZXJ5UGFyYW1zLGUuY3VycmVu
        dFF1ZXJ5UGFyYW1zLG8ucXVlcnlQYXJhbXMpLG0ocC5xdWVyeVBhcmFtcyxu
        LG8ucXVlcnlQYXJhbXMpKTtyZXR1cm4geShwLnF1ZXJ5UGFyYW1zLHt9KSYm
        ZGVsZXRlIHAucXVlcnlQYXJhbXMscH1mdW5jdGlvbiBoKGUsdCl7Zm9yKHZh
        ciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9ZnVu
        Y3Rpb24gbShlLHQscil7aWYodCYmcilmb3IodmFyIG49MDtuPHIubGVuZ3Ro
        O24rKyl7dmFyIGksbz1yW25dO3QuaGFzT3duUHJvcGVydHkobykmJihpPXRb
        b10sbnVsbD09PWl8fGk9PT0hMXx8InVuZGVmaW5lZCI9PXR5cGVvZiBpP2Rl
        bGV0ZSBlW29dOmVbb109dFtvXSl9fWZ1bmN0aW9uIGYoZSx0LHIpe2Zvcih2
        YXIgbj1bXSxpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBvPXRbaV0sYT17aGFu
        ZGxlcjpvLmhhbmRsZXIsbmFtZXM6by5uYW1lcyxjb250ZXh0Om8uY29udGV4
        dCxpc0R5bmFtaWM6by5pc0R5bmFtaWN9LHM9e307ciE9PSExJiYobShzLGUu
        Y3VycmVudFF1ZXJ5UGFyYW1zLG8ucXVlcnlQYXJhbXMpLG0ocyxyLG8ucXVl
        cnlQYXJhbXMpKSxvLnF1ZXJ5UGFyYW1zJiZvLnF1ZXJ5UGFyYW1zLmxlbmd0
        aD4wJiYoYS5xdWVyeVBhcmFtcz1zKSxuLnB1c2goYSl9cmV0dXJuIG59ZnVu
        Y3Rpb24gcChlLHQscil7dmFyIG49ZS5jdXJyZW50SGFuZGxlckluZm9zLGk9
        bltuLmxlbmd0aC0xXSxvPWkubmFtZTtyZXR1cm4gSShlLCJBdHRlbXB0aW5n
        IHF1ZXJ5IHBhcmFtIHRyYW5zaXRpb24iKSxkKGUsW28sdF0scil9ZnVuY3Rp
        b24gZChlLHQscil7dmFyIG49QSh0KSxpPW5bMF0sbz1uWzFdLGE9ZS5yZWNv
        Z25pemVyLmhhbmRsZXJzRm9yKGlbMF0pLHM9ZihlLGEsbyk7cmV0dXJuIEko
        ZSwiQXR0ZW1wdGluZyB0cmFuc2l0aW9uIHRvICIraVswXSkseChlLHMsSC5j
        YWxsKGksMSksZS5jdXJyZW50UGFyYW1zLG8sbnVsbCxyKX1mdW5jdGlvbiBi
        KGUsdCxyKXt2YXIgbixhLHM9ZS5yZWNvZ25pemVyLnJlY29nbml6ZSh0KSx1
        PShlLmN1cnJlbnRIYW5kbGVySW5mb3Mse30pO2lmKEkoZSwiQXR0ZW1wdGlu
        ZyBVUkwgdHJhbnNpdGlvbiB0byAiK3QpLHMpZm9yKG49MCxhPXMubGVuZ3Ro
        O2E+bjsrK24paWYoZS5nZXRIYW5kbGVyKHNbbl0uaGFuZGxlcikuaW5hY2Nl
        c3NpYmxlQnlVUkwpe3M9bnVsbDticmVha31pZighcylyZXR1cm4gbyhlLG5l
        dyBpLlVucmVjb2duaXplZFVSTEVycm9yKHQpKTtmb3Iobj0wLGE9cy5sZW5n
        dGg7YT5uO24rKyloKHUsc1tuXS5xdWVyeVBhcmFtcyk7cmV0dXJuIHgoZSxz
        LFtdLHt9LHUsbnVsbCxyKX1mdW5jdGlvbiBFKGUsdCl7dmFyIHI9ZS5yb3V0
        ZXIsbj13KHIuY3VycmVudEhhbmRsZXJJbmZvc3x8W10sdCk7ci50YXJnZXRI
        YW5kbGVySW5mb3M9dCxnKG4uZXhpdGVkLGZ1bmN0aW9uKGUpe3ZhciB0PWUu
        aGFuZGxlcjtkZWxldGUgdC5jb250ZXh0LHQuZXhpdCYmdC5leGl0KCl9KTt2
        YXIgaT1uLnVuY2hhbmdlZC5zbGljZSgpO3IuY3VycmVudEhhbmRsZXJJbmZv
        cz1pLGcobi51cGRhdGVkQ29udGV4dCxmdW5jdGlvbih0KXt2KGUsaSx0LCEx
        KX0pLGcobi5lbnRlcmVkLGZ1bmN0aW9uKHQpe3YoZSxpLHQsITApfSl9ZnVu
        Y3Rpb24gdihlLHQscixuKXt2YXIgbz1yLmhhbmRsZXIsYT1yLmNvbnRleHQ7
        dHJ5e24mJm8uZW50ZXImJm8uZW50ZXIoKSxSKGUpLEMobyxhKSxPKG8sci5x
        dWVyeVBhcmFtcyksby5zZXR1cCYmby5zZXR1cChhLHIucXVlcnlQYXJhbXMp
        LFIoZSl9Y2F0Y2gocyl7dGhyb3cgcyBpbnN0YW5jZW9mIGkuVHJhbnNpdGlv
        bkFib3J0ZWR8fGUudHJpZ2dlcighMCwiZXJyb3IiLHMsZSxvKSxzfXQucHVz
        aChyKX1mdW5jdGlvbiBnKGUsdCl7Zm9yKHZhciByPTAsbj1lLmxlbmd0aDtu
        PnI7cisrKXQoZVtyXSl9ZnVuY3Rpb24geShlLHQpe2U9ZXx8e30sdD10fHx7
        fTt2YXIgcixuPVtdO2ZvcihyIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShy
        KSl7aWYodFtyXSE9PWVbcl0pcmV0dXJuITE7bi5wdXNoKHIpfWZvcihyIGlu
        IHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSYmIX5uLmluZGV4T2YocikpcmV0
        dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gdyhlLHQpe3ZhciByLG4saSxvLGEs
        cz17dXBkYXRlZENvbnRleHQ6W10sZXhpdGVkOltdLGVudGVyZWQ6W10sdW5j
        aGFuZ2VkOltdfTtmb3Iobz0wLGE9dC5sZW5ndGg7YT5vO28rKyl7dmFyIHU9
        ZVtvXSxjPXRbb107dSYmdS5oYW5kbGVyPT09Yy5oYW5kbGVyP3kodS5xdWVy
        eVBhcmFtcyxjLnF1ZXJ5UGFyYW1zKXx8KGk9ITApOnI9ITAscj8ocy5lbnRl
        cmVkLnB1c2goYyksdSYmcy5leGl0ZWQudW5zaGlmdCh1KSk6bnx8dS5jb250
        ZXh0IT09Yy5jb250ZXh0fHxpPyhuPSEwLHMudXBkYXRlZENvbnRleHQucHVz
        aChjKSk6cy51bmNoYW5nZWQucHVzaCh1KX1mb3Iobz10Lmxlbmd0aCxhPWUu
        bGVuZ3RoO2E+bztvKyspcy5leGl0ZWQudW5zaGlmdChlW29dKTtyZXR1cm4g
        c31mdW5jdGlvbiBfKGUsdCxyLG4pe2lmKGUudHJpZ2dlckV2ZW50KXJldHVy
        biBlLnRyaWdnZXJFdmVudCh0LHIsbiksdm9pZCAwO3ZhciBpPW4uc2hpZnQo
        KTtpZighdCl7aWYocilyZXR1cm47dGhyb3cgbmV3IEVycm9yKCJDb3VsZCBu
        b3QgdHJpZ2dlciBldmVudCAnIitpKyInLiBUaGVyZSBhcmUgbm8gYWN0aXZl
        IGhhbmRsZXJzIil9Zm9yKHZhciBvPSExLGE9dC5sZW5ndGgtMTthPj0wO2Et
        LSl7dmFyIHM9dFthXSx1PXMuaGFuZGxlcjtpZih1LmV2ZW50cyYmdS5ldmVu
        dHNbaV0pe2lmKHUuZXZlbnRzW2ldLmFwcGx5KHUsbikhPT0hMClyZXR1cm47
        bz0hMH19aWYoIW8mJiFyKXRocm93IG5ldyBFcnJvcigiTm90aGluZyBoYW5k
        bGVkIHRoZSBldmVudCAnIitpKyInLiIpfWZ1bmN0aW9uIEMoZSx0KXtlLmNv
        bnRleHQ9dCxlLmNvbnRleHREaWRDaGFuZ2UmJmUuY29udGV4dERpZENoYW5n
        ZSgpfWZ1bmN0aW9uIE8oZSx0KXtlLnF1ZXJ5UGFyYW1zPXQsZS5xdWVyeVBh
        cmFtc0RpZENoYW5nZSYmZS5xdWVyeVBhcmFtc0RpZENoYW5nZSgpfWZ1bmN0
        aW9uIEEoZSl7dmFyIHQscixuPWUmJmUubGVuZ3RoO3JldHVybiBuJiZuPjAm
        JmVbbi0xXSYmZVtuLTFdLmhhc093blByb3BlcnR5KCJxdWVyeVBhcmFtcyIp
        PyhyPWVbbi0xXS5xdWVyeVBhcmFtcyx0PUguY2FsbChlLDAsbi0xKSxbdCxy
        XSk6W2UsbnVsbF19ZnVuY3Rpb24gUChlLHQscil7Zm9yKHZhciBuPVQoZSx0
        KSxpPTA7aTxuLmxlbmd0aDsrK2kpe3ZhciBvPW5baV07by5jb250ZXh0PXIu
        cHJvdmlkZWRNb2RlbHNbby5uYW1lXX12YXIgYT17cm91dGVyOmUsaXNBYm9y
        dGVkOiExfTtFKGEsbil9ZnVuY3Rpb24geChlLHQscixpLG8scyx1KXtmdW5j
        dGlvbiBjKCl7UihiKTt0cnl7UyhiLEUpLF8oZSxlLmN1cnJlbnRIYW5kbGVy
        SW5mb3MsITAsWyJkaWRUcmFuc2l0aW9uIl0pLGUuZGlkVHJhbnNpdGlvbiYm
        ZS5kaWRUcmFuc2l0aW9uKEUpLEkoZSxiLnNlcXVlbmNlLCJUUkFOU0lUSU9O
        IENPTVBMRVRFLiIpLGIuaXNBY3RpdmU9ITEsZC5yZXNvbHZlKEVbRS5sZW5n
        dGgtMV0uaGFuZGxlcil9Y2F0Y2godCl7ZC5yZWplY3QodCl9Yi5pc0Fib3J0
        ZWR8fChlLmFjdGl2ZVRyYW5zaXRpb249bnVsbCl9ZnVuY3Rpb24gbChlKXtk
        LnJlamVjdChlKX12YXIgaD1hKGUsdCxyLGksbyksbT10W3QubGVuZ3RoLTFd
        LmhhbmRsZXIsZj0hMSxwPWUuY3VycmVudEhhbmRsZXJJbmZvcztpZih1KXJl
        dHVybiBQKGUsdCxoKTtpZihlLmFjdGl2ZVRyYW5zaXRpb24pe2lmKFYoZS5h
        Y3RpdmVUcmFuc2l0aW9uLG0scixvKSlyZXR1cm4gZS5hY3RpdmVUcmFuc2l0
        aW9uO2UuYWN0aXZlVHJhbnNpdGlvbi5hYm9ydCgpLGY9ITB9dmFyIGQ9TC5k
        ZWZlcigpLGI9bmV3IG4oZSxkLnByb21pc2UpO2IudGFyZ2V0TmFtZT1tLGIu
        cHJvdmlkZWRNb2RlbHM9aC5wcm92aWRlZE1vZGVscyxiLnByb3ZpZGVkTW9k
        ZWxzQXJyYXk9cixiLnBhcmFtcz1oLnBhcmFtcyxiLmRhdGE9c3x8e30sYi5x
        dWVyeVBhcmFtcz1vLGIucGl2b3RIYW5kbGVyPWgucGl2b3RIYW5kbGVyLGUu
        YWN0aXZlVHJhbnNpdGlvbj1iO3ZhciBFPVQoZSx0KTtyZXR1cm4gYi5oYW5k
        bGVySW5mb3M9RSxmfHxfKGUscCwhMCxbIndpbGxUcmFuc2l0aW9uIixiXSks
        SShlLGIuc2VxdWVuY2UsIkJlZ2lubmluZyB2YWxpZGF0aW9uIGZvciB0cmFu
        c2l0aW9uIHRvICIrYi50YXJnZXROYW1lKSxOKGIsaC5tYXRjaFBvaW50LGgu
        aGFuZGxlclBhcmFtcykudGhlbihjLGwpLGJ9ZnVuY3Rpb24gVChlLHQpe2Zv
        cih2YXIgcj1bXSxuPTAsaT10Lmxlbmd0aDtpPm47KytuKXt2YXIgbz10W25d
        LGE9by5pc0R5bmFtaWN8fG8ubmFtZXMmJm8ubmFtZXMubGVuZ3RoLHM9e2lz
        RHluYW1pYzohIWEsbmFtZTpvLmhhbmRsZXIsaGFuZGxlcjplLmdldEhhbmRs
        ZXIoby5oYW5kbGVyKX07by5xdWVyeVBhcmFtcyYmKHMucXVlcnlQYXJhbXM9
        by5xdWVyeVBhcmFtcyksci5wdXNoKHMpfXJldHVybiByfWZ1bmN0aW9uIFYo
        ZSx0LHIsbil7aWYoZS50YXJnZXROYW1lIT09dClyZXR1cm4hMTt2YXIgaT1l
        LnByb3ZpZGVkTW9kZWxzQXJyYXk7aWYoaS5sZW5ndGghPT1yLmxlbmd0aCly
        ZXR1cm4hMTtmb3IodmFyIG89MCxhPWkubGVuZ3RoO2E+bzsrK28paWYoaVtv
        XSE9PXJbb10pcmV0dXJuITE7cmV0dXJuIHkoZS5xdWVyeVBhcmFtcyxuKT8h
        MDohMX1mdW5jdGlvbiBTKGUsdCl7SShlLnJvdXRlcixlLnNlcXVlbmNlLCJW
        YWxpZGF0aW9uIHN1Y2NlZWRlZCwgZmluYWxpemluZyB0cmFuc2l0aW9uOyIp
        O3ZhciByLG49ZS5yb3V0ZXIsaT0oZS5zZXF1ZW5jZSx0W3QubGVuZ3RoLTFd
        Lm5hbWUpLG89ZS51cmxNZXRob2QsYT1bXSxzPWUucHJvdmlkZWRNb2RlbHNB
        cnJheS5zbGljZSgpO2ZvcihyPXQubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBj
        PXRbcl07aWYoYy5pc0R5bmFtaWMpe3ZhciBtPXMucG9wKCk7YS51bnNoaWZ0
        KHUobSk/bS50b1N0cmluZygpOmMuY29udGV4dCl9Yy5oYW5kbGVyLmluYWNj
        ZXNzaWJsZUJ5VVJMJiYobz1udWxsKX12YXIgZj17fTtmb3Iocj10Lmxlbmd0
        aC0xO3I+PTA7LS1yKWgoZix0W3JdLnF1ZXJ5UGFyYW1zKTtuLmN1cnJlbnRR
        dWVyeVBhcmFtcz1mO3ZhciBwPWwobixpLGEsZS5xdWVyeVBhcmFtcyk7aWYo
        bi5jdXJyZW50UGFyYW1zPXAsbyl7dmFyIGQ9bi5yZWNvZ25pemVyLmdlbmVy
        YXRlKGkscCk7InJlcGxhY2UiPT09bz9uLnJlcGxhY2VVUkwoZCk6bi51cGRh
        dGVVUkwoZCl9RShlLHQpfWZ1bmN0aW9uIE4oZSx0LHIpe2Z1bmN0aW9uIG8o
        dCl7cmV0dXJuIGUuaXNBYm9ydGVkPyhJKGUucm91dGVyLGUuc2VxdWVuY2Us
        ImRldGVjdGVkIGFib3J0LiIpLEwucmVqZWN0KG5ldyBpLlRyYW5zaXRpb25B
        Ym9ydGVkKSk6dH1mdW5jdGlvbiBhKHQpe3JldHVybiB0IGluc3RhbmNlb2Yg
        aS5UcmFuc2l0aW9uQWJvcnRlZHx8ZS5pc0Fib3J0ZWQ/TC5yZWplY3QodCk6
        KGUuYWJvcnQoKSxJKGYsRSxiKyI6IGhhbmRsaW5nIGVycm9yOiAiK3QpLGUu
        dHJpZ2dlcighMCwiZXJyb3IiLHQsZSxwLmhhbmRsZXIpLEwucmVqZWN0KHQp
        KX1mdW5jdGlvbiBzKCl7SShmLEUsYisiOiBjYWxsaW5nIGJlZm9yZU1vZGVs
        IGhvb2siKTt2YXIgdDt0PXAucXVlcnlQYXJhbXM/W3AucXVlcnlQYXJhbXMs
        ZV06W2VdO3ZhciByPWQuYmVmb3JlTW9kZWwmJmQuYmVmb3JlTW9kZWwuYXBw
        bHkoZCx0KTtyZXR1cm4gciBpbnN0YW5jZW9mIG4/bnVsbDpyfWZ1bmN0aW9u
        IHUoKXtJKGYsRSxiKyI6IHJlc29sdmluZyBtb2RlbCIpO3ZhciBpPUQocCxl
        LHJbYl0sbT49dCk7cmV0dXJuIGkgaW5zdGFuY2VvZiBuP251bGw6aX1mdW5j
        dGlvbiBjKHQpe0koZixFLGIrIjogY2FsbGluZyBhZnRlck1vZGVsIGhvb2si
        KSxlLnJlc29sdmVkTW9kZWxzW3AubmFtZV09dDt2YXIgcjtyPXAucXVlcnlQ
        YXJhbXM/W3QscC5xdWVyeVBhcmFtcyxlXTpbdCxlXTt2YXIgaT1kLmFmdGVy
        TW9kZWwmJmQuYWZ0ZXJNb2RlbC5hcHBseShkLHIpO3JldHVybiBpIGluc3Rh
        bmNlb2Ygbj9udWxsOml9ZnVuY3Rpb24gbCgpe3JldHVybiBJKGYsRSxiKyI6
        IHZhbGlkYXRpb24gc3VjY2VlZGVkLCBwcm9jZWVkaW5nIikscC5jb250ZXh0
        PWUucmVzb2x2ZWRNb2RlbHNbcC5uYW1lXSxlLnJlc29sdmVJbmRleCsrLE4o
        ZSx0LHIpfXZhciBoPWUuaGFuZGxlckluZm9zLG09ZS5yZXNvbHZlSW5kZXg7
        aWYobT09PWgubGVuZ3RoKXJldHVybiBMLnJlc29sdmUoZS5yZXNvbHZlZE1v
        ZGVscyk7dmFyIGY9ZS5yb3V0ZXIscD1oW21dLGQ9cC5oYW5kbGVyLGI9cC5u
        YW1lLEU9ZS5zZXF1ZW5jZTtyZXR1cm4gdD5tPyhJKGYsRSxiKyI6IHVzaW5n
        IGNvbnRleHQgZnJvbSBhbHJlYWR5LWFjdGl2ZSBoYW5kbGVyIiksZS5yZXNv
        bHZlZE1vZGVsc1twLm5hbWVdPWUucHJvdmlkZWRNb2RlbHNbcC5uYW1lXXx8
        cC5oYW5kbGVyLmNvbnRleHQsbCgpKTooZS50cmlnZ2VyKCEwLCJ3aWxsUmVz
        b2x2ZU1vZGVsIixlLGQpLEwucmVzb2x2ZSgpLnRoZW4obykudGhlbihzKS50
        aGVuKG8pLnRoZW4odSkudGhlbihvKS50aGVuKGMpLnRoZW4obykudGhlbihu
        dWxsLGEpLnRoZW4obCkpfWZ1bmN0aW9uIFIoZSl7aWYoZS5pc0Fib3J0ZWQp
        dGhyb3cgSShlLnJvdXRlcixlLnNlcXVlbmNlLCJkZXRlY3RlZCBhYm9ydC4i
        KSxuZXcgaS5UcmFuc2l0aW9uQWJvcnRlZH1mdW5jdGlvbiBEKGUsdCxyLG4p
        e3ZhciBpLG89ZS5oYW5kbGVyLGE9ZS5uYW1lO2lmKCFuJiZvLmhhc093blBy
        b3BlcnR5KCJjb250ZXh0IikpcmV0dXJuIG8uY29udGV4dDtpZih0LnByb3Zp
        ZGVkTW9kZWxzLmhhc093blByb3BlcnR5KGEpKXt2YXIgcz10LnByb3ZpZGVk
        TW9kZWxzW2FdO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBzP3MoKTpzfXJl
        dHVybiBpPWUucXVlcnlQYXJhbXM/W3J8fHt9LGUucXVlcnlQYXJhbXMsdF06
        W3J8fHt9LHQsZS5xdWVyeVBhcmFtc10sby5tb2RlbCYmby5tb2RlbC5hcHBs
        eShvLGkpfWZ1bmN0aW9uIEkoZSx0LHIpe2UubG9nJiYoMz09PWFyZ3VtZW50
        cy5sZW5ndGg/ZS5sb2coIlRyYW5zaXRpb24gIyIrdCsiOiAiK3IpOihyPXQs
        ZS5sb2cocikpKX1mdW5jdGlvbiBNKGUsdCxyKXt2YXIgbj10WzBdfHwiLyI7
        cmV0dXJuIDE9PT10Lmxlbmd0aCYmdFswXS5oYXNPd25Qcm9wZXJ0eSgicXVl
        cnlQYXJhbXMiKT9wKGUsdFswXSxyKToiLyI9PT1uLmNoYXJBdCgwKT9iKGUs
        bixyKTpkKGUsSC5jYWxsKHQpLHIpfWZ1bmN0aW9uIGooZSx0LHIpe3ZhciBu
        PXt9O2lmKHUodCkpcmV0dXJuIG5bclswXV09dCxuO2lmKGUuc2VyaWFsaXpl
        KXJldHVybiBlLnNlcmlhbGl6ZSh0LHIpO2lmKDE9PT1yLmxlbmd0aCl7dmFy
        IGk9clswXTtyZXR1cm4gbltpXT0vX2lkJC8udGVzdChpKT90LmlkOnQsbn19
        dmFyIGs9ZSxMPXQsSD1BcnJheS5wcm90b3R5cGUuc2xpY2U7bi5jdXJyZW50
        U2VxdWVuY2U9MCxuLnByb3RvdHlwZT17dGFyZ2V0TmFtZTpudWxsLHVybE1l
        dGhvZDoidXBkYXRlIixwcm92aWRlZE1vZGVsczpudWxsLHJlc29sdmVkTW9k
        ZWxzOm51bGwscGFyYW1zOm51bGwscGl2b3RIYW5kbGVyOm51bGwscmVzb2x2
        ZUluZGV4OjAsaGFuZGxlckluZm9zOm51bGwsaXNBY3RpdmU6ITAscHJvbWlz
        ZTpudWxsLGRhdGE6bnVsbCx0aGVuOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRo
        aXMucHJvbWlzZS50aGVuKGUsdCl9LGFib3J0OmZ1bmN0aW9uKCl7cmV0dXJu
        IHRoaXMuaXNBYm9ydGVkP3RoaXM6KEkodGhpcy5yb3V0ZXIsdGhpcy5zZXF1
        ZW5jZSx0aGlzLnRhcmdldE5hbWUrIjogdHJhbnNpdGlvbiB3YXMgYWJvcnRl
        ZCIpLHRoaXMuaXNBYm9ydGVkPSEwLHRoaXMuaXNBY3RpdmU9ITEsdGhpcy5y
        b3V0ZXIuYWN0aXZlVHJhbnNpdGlvbj1udWxsLHRoaXMpfSxyZXRyeTpmdW5j
        dGlvbigpe3RoaXMuYWJvcnQoKTt2YXIgZT10aGlzLnJvdXRlci5yZWNvZ25p
        emVyLmhhbmRsZXJzRm9yKHRoaXMudGFyZ2V0TmFtZSksdD1mKHRoaXMucm91
        dGVyLGUsdGhpcy5xdWVyeVBhcmFtcykscj14KHRoaXMucm91dGVyLHQsdGhp
        cy5wcm92aWRlZE1vZGVsc0FycmF5LHRoaXMucGFyYW1zLHRoaXMucXVlcnlQ
        YXJhbXMsdGhpcy5kYXRhKTtyZXR1cm4gcn0sbWV0aG9kOmZ1bmN0aW9uKGUp
        e3JldHVybiB0aGlzLnVybE1ldGhvZD1lLHRoaXN9LHRyaWdnZXI6ZnVuY3Rp
        b24oZSl7dmFyIHQ9SC5jYWxsKGFyZ3VtZW50cyk7ImJvb2xlYW4iPT10eXBl
        b2YgZT90LnNoaWZ0KCk6ZT0hMSxfKHRoaXMucm91dGVyLHRoaXMuaGFuZGxl
        ckluZm9zLnNsaWNlKDAsdGhpcy5yZXNvbHZlSW5kZXgrMSksZSx0KX0sdG9T
        dHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iVHJhbnNpdGlvbiAoc2VxdWVuY2Ug
        Iit0aGlzLnNlcXVlbmNlKyIpIn19LGkuVHJhbnNpdGlvbj1uLHJbImRlZmF1
        bHQiXT1pLGkuVW5yZWNvZ25pemVkVVJMRXJyb3I9ZnVuY3Rpb24oZSl7dGhp
        cy5tZXNzYWdlPWV8fCJVbnJlY29nbml6ZWRVUkxFcnJvciIsdGhpcy5uYW1l
        PSJVbnJlY29nbml6ZWRVUkxFcnJvciJ9LGkuVHJhbnNpdGlvbkFib3J0ZWQ9
        ZnVuY3Rpb24oZSl7dGhpcy5tZXNzYWdlPWV8fCJUcmFuc2l0aW9uQWJvcnRl
        ZCIsdGhpcy5uYW1lPSJUcmFuc2l0aW9uQWJvcnRlZCJ9LGkucHJvdG90eXBl
        PXttYXA6ZnVuY3Rpb24oZSl7dGhpcy5yZWNvZ25pemVyLmRlbGVnYXRlPXRo
        aXMuZGVsZWdhdGUsdGhpcy5yZWNvZ25pemVyLm1hcChlLGZ1bmN0aW9uKGUs
        dCl7dmFyIHI9dFt0Lmxlbmd0aC0xXS5oYW5kbGVyLG49W3Qse2FzOnJ9XTtl
        LmFkZC5hcHBseShlLG4pfSl9LGhhc1JvdXRlOmZ1bmN0aW9uKGUpe3JldHVy
        biB0aGlzLnJlY29nbml6ZXIuaGFzUm91dGUoZSl9LHJlc2V0OmZ1bmN0aW9u
        KCl7Zyh0aGlzLmN1cnJlbnRIYW5kbGVySW5mb3N8fFtdLGZ1bmN0aW9uKGUp
        e3ZhciB0PWUuaGFuZGxlcjt0LmV4aXQmJnQuZXhpdCgpfSksdGhpcy5jdXJy
        ZW50SGFuZGxlckluZm9zPW51bGwsdGhpcy50YXJnZXRIYW5kbGVySW5mb3M9
        bnVsbH0sYWN0aXZlVHJhbnNpdGlvbjpudWxsLGhhbmRsZVVSTDpmdW5jdGlv
        bihlKXt2YXIgdD1ILmNhbGwoYXJndW1lbnRzKTtyZXR1cm4iLyIhPT1lLmNo
        YXJBdCgwKSYmKHRbMF09Ii8iK2UpLE0odGhpcyx0KS5tZXRob2QobnVsbCl9
        LHVwZGF0ZVVSTDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigidXBkYXRl
        VVJMIGlzIG5vdCBpbXBsZW1lbnRlZCIpfSxyZXBsYWNlVVJMOmZ1bmN0aW9u
        KGUpe3RoaXMudXBkYXRlVVJMKGUpfSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24o
        KXtyZXR1cm4gTSh0aGlzLGFyZ3VtZW50cyl9LGludGVybWVkaWF0ZVRyYW5z
        aXRpb25UbzpmdW5jdGlvbigpe00odGhpcyxhcmd1bWVudHMsITApfSxyZXBs
        YWNlV2l0aDpmdW5jdGlvbigpe3JldHVybiBNKHRoaXMsYXJndW1lbnRzKS5t
        ZXRob2QoInJlcGxhY2UiKX0scGFyYW1zRm9ySGFuZGxlcjpmdW5jdGlvbihl
        KXt2YXIgdD1BKEguY2FsbChhcmd1bWVudHMsMSkpO3JldHVybiBsKHRoaXMs
        ZSx0WzBdLHRbMV0pfSxxdWVyeVBhcmFtc0ZvckhhbmRsZXI6ZnVuY3Rpb24o
        ZSl7cmV0dXJuIGModGhpcyxlKX0sZ2VuZXJhdGU6ZnVuY3Rpb24oZSl7dmFy
        IHQ9QShILmNhbGwoYXJndW1lbnRzLDEpKSxyPXRbMF0sbj10WzFdLGk9bCh0
        aGlzLGUscixuKSxvPWModGhpcyxlKSxhPVtdO2Zvcih2YXIgcyBpbiBuKW4u
        aGFzT3duUHJvcGVydHkocykmJiF+by5pbmRleE9mKHMpJiZhLnB1c2gocyk7
        aWYoYS5sZW5ndGg+MCl7dmFyIHU9IllvdSBzdXBwbGllZCB0aGUgcGFyYW1z
        ICI7dGhyb3cgdSs9YS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuJyInK2UrIj0i
        K25bZV0rJyInfSkuam9pbigiIGFuZCAiKSx1Kz0nIHdoaWNoIGFyZSBub3Qg
        dmFsaWQgZm9yIHRoZSAiJytlKyciIGhhbmRsZXIgb3IgaXRzIHBhcmVudHMn
        LG5ldyBFcnJvcih1KX1yZXR1cm4gdGhpcy5yZWNvZ25pemVyLmdlbmVyYXRl
        KGUsaSl9LGlzQWN0aXZlOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1BKEguY2Fs
        bChhcmd1bWVudHMsMSkpLGk9blswXSxvPW5bMV0sYT17fSxzPXt9LGM9dGhp
        cy50YXJnZXRIYW5kbGVySW5mb3MsbD0hMTtpZighYylyZXR1cm4hMTtmb3Io
        dmFyIGY9dGhpcy5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKGNbYy5sZW5ndGgt
        MV0ubmFtZSkscD1jLmxlbmd0aC0xO3A+PTA7cC0tKWlmKHI9Y1twXSxyLm5h
        bWU9PT1lJiYobD0hMCksbCl7dmFyIGQ9ZltwXTtpZihoKGEsci5xdWVyeVBh
        cmFtcyksbyE9PSExJiYoaChzLHIucXVlcnlQYXJhbXMpLG0ocyxvLGQucXVl
        cnlQYXJhbXMpKSxyLmlzRHluYW1pYyYmaS5sZW5ndGg+MClpZih0PWkucG9w
        KCksdSh0KSl7dmFyIGI9ZC5uYW1lc1swXTtpZigiIit0IT09dGhpcy5jdXJy
        ZW50UGFyYW1zW2JdKXJldHVybiExfWVsc2UgaWYoci5jb250ZXh0IT09dCly
        ZXR1cm4hMX1yZXR1cm4gMD09PWkubGVuZ3RoJiZsJiZ5KGEscyl9LHRyaWdn
        ZXI6ZnVuY3Rpb24oKXt2YXIgZT1ILmNhbGwoYXJndW1lbnRzKTtfKHRoaXMs
        dGhpcy5jdXJyZW50SGFuZGxlckluZm9zLCExLGUpfSxsb2c6bnVsbH19KX0o
        KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5wYXJlbnQ9ZSx0aGlz
        Lm1hdGNoZXM9W119ZS5wcm90b3R5cGU9e3Jlc291cmNlOmZ1bmN0aW9uKHQs
        cixuKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCYmImZ1bmN0aW9uIj09dHlw
        ZW9mIHImJihuPXIscj17fSksMT09PWFyZ3VtZW50cy5sZW5ndGgmJihyPXt9
        KSwic3RyaW5nIiE9dHlwZW9mIHIucGF0aCYmKHIucGF0aD0iLyIrdCksbil7
        dmFyIGk9bmV3IGUodCk7aS5yb3V0ZSgibG9hZGluZyIpLGkucm91dGUoImVy
        cm9yIix7cGF0aDoiL191bnVzZWRfZHVtbXlfZXJyb3JfcGF0aC86ZXJyb3Ii
        fSksbi5jYWxsKGkpLHRoaXMucHVzaChyLnBhdGgsdCxpLmdlbmVyYXRlKCks
        ci5xdWVyeVBhcmFtcyl9ZWxzZSB0aGlzLnB1c2goci5wYXRoLHQsbnVsbCxy
        LnF1ZXJ5UGFyYW1zKX0scHVzaDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10
        LnNwbGl0KCIuIik7KCIiPT09ZXx8Ii8iPT09ZXx8ImluZGV4Ij09PWlbaS5s
        ZW5ndGgtMV0pJiYodGhpcy5leHBsaWNpdEluZGV4PSEwKSx0aGlzLm1hdGNo
        ZXMucHVzaChbZSx0LHIsbl0pfSxyb3V0ZTpmdW5jdGlvbihlLHQpe3Q9dHx8
        e30sInN0cmluZyIhPXR5cGVvZiB0LnBhdGgmJih0LnBhdGg9Ii8iK2UpLHRo
        aXMucGFyZW50JiYiYXBwbGljYXRpb24iIT09dGhpcy5wYXJlbnQmJihlPXRo
        aXMucGFyZW50KyIuIitlKSx0aGlzLnB1c2godC5wYXRoLGUsbnVsbCx0LnF1
        ZXJ5UGFyYW1zKX0sZ2VuZXJhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1h
        dGNoZXM7cmV0dXJuIHRoaXMuZXhwbGljaXRJbmRleHx8dGhpcy5yb3V0ZSgi
        aW5kZXgiLHtwYXRoOiIvIn0pLGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0wLG49
        ZS5sZW5ndGg7bj5yO3IrKyl7dmFyIGk9ZVtyXSxvPXQoaVswXSkudG8oaVsx
        XSxpWzJdKTtFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQoInF1ZXJ5LXBhcmFt
        cyIpJiZpWzNdJiZvLndpdGhRdWVyeVBhcmFtcy5hcHBseShvLGlbM10pfX19
        fSxlLm1hcD1mdW5jdGlvbih0KXt2YXIgcj1uZXcgZTtyZXR1cm4gdC5jYWxs
        KHIpLHJ9LEVtYmVyLlJvdXRlckRTTD1lfSgpLGZ1bmN0aW9uKCl7dmFyIGU9
        RW1iZXIuZ2V0O0VtYmVyLmNvbnRyb2xsZXJGb3I9ZnVuY3Rpb24oZSx0LHIp
        e3JldHVybiBlLmxvb2t1cCgiY29udHJvbGxlcjoiK3Qscil9LEVtYmVyLmdl
        bmVyYXRlQ29udHJvbGxlcj1mdW5jdGlvbih0LHIsbil7dmFyIGksbyxhLHMs
        dTtyZXR1cm4gdT1uJiZFbWJlci5pc0FycmF5KG4pPyJhcnJheSI6bj8ib2Jq
        ZWN0IjoiYmFzaWMiLHM9ImNvbnRyb2xsZXI6Iit1LGk9dC5sb29rdXBGYWN0
        b3J5KHMpLmV4dGVuZCh7aXNHZW5lcmF0ZWQ6ITAsdG9TdHJpbmc6ZnVuY3Rp
        b24oKXtyZXR1cm4iKGdlbmVyYXRlZCAiK3IrIiBjb250cm9sbGVyKSJ9fSks
        bz0iY29udHJvbGxlcjoiK3IsdC5yZWdpc3RlcihvLGkpLGE9dC5sb29rdXAo
        byksZShhLCJuYW1lc3BhY2UuTE9HX0FDVElWRV9HRU5FUkFUSU9OIikmJkVt
        YmVyLkxvZ2dlci5pbmZvKCJnZW5lcmF0ZWQgLT4gIitvLHtmdWxsTmFtZTpv
        fSksYX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1y
        LnNoaWZ0KCk7aWYoIWUpe2lmKHQpcmV0dXJuO3Rocm93IG5ldyBFbWJlci5F
        cnJvcigiQ291bGQgbm90IHRyaWdnZXIgZXZlbnQgJyIrbisiJy4gVGhlcmUg
        YXJlIG5vIGFjdGl2ZSBoYW5kbGVycyIpfWZvcih2YXIgaT0hMSxvPWUubGVu
        Z3RoLTE7bz49MDtvLS0pe3ZhciBhPWVbb10scz1hLmhhbmRsZXI7aWYocy5f
        YWN0aW9ucyYmcy5fYWN0aW9uc1tuXSl7aWYocy5fYWN0aW9uc1tuXS5hcHBs
        eShzLHIpIT09ITApcmV0dXJuO2k9ITB9fWlmKCFpJiYhdCl0aHJvdyBuZXcg
        RW1iZXIuRXJyb3IoIk5vdGhpbmcgaGFuZGxlZCB0aGUgYWN0aW9uICciK24r
        IicuIElmIHlvdSBkaWQgaGFuZGxlIHRoZSBhY3Rpb24sIHRoaXMgZXJyb3Ig
        Y2FuIGJlIGNhdXNlZCBieSByZXR1cm5pbmcgdHJ1ZSBmcm9tIGFuIGFjdGlv
        biBoYW5kbGVyLCBjYXVzaW5nIHRoZSBhY3Rpb24gdG8gYnViYmxlLiIpfWZ1
        bmN0aW9uIHIoZSl7dmFyIHQ9ZS5jb250YWluZXIubG9va3VwKCJjb250cm9s
        bGVyOmFwcGxpY2F0aW9uIikscj1lLnJvdXRlci5jdXJyZW50SGFuZGxlcklu
        Zm9zLG49RW1iZXIuUm91dGVyLl9yb3V0ZVBhdGgocik7ImN1cnJlbnRQYXRo
        ImluIHR8fGEodCwiY3VycmVudFBhdGgiKSxvKHQsImN1cnJlbnRQYXRoIixu
        KSwiY3VycmVudFJvdXRlTmFtZSJpbiB0fHxhKHQsImN1cnJlbnRSb3V0ZU5h
        bWUiKSxvKHQsImN1cnJlbnRSb3V0ZU5hbWUiLHJbci5sZW5ndGgtMV0ubmFt
        ZSl9dmFyIG49dCgicm91dGVyIilbImRlZmF1bHQiXSxpPUVtYmVyLmdldCxv
        PUVtYmVyLnNldCxhPUVtYmVyLmRlZmluZVByb3BlcnR5LHM9RW1iZXIuX01l
        dGFtb3JwaFZpZXc7RW1iZXIuUm91dGVyPUVtYmVyLk9iamVjdC5leHRlbmQo
        RW1iZXIuRXZlbnRlZCx7bG9jYXRpb246Imhhc2giLGluaXQ6ZnVuY3Rpb24o
        KXt0aGlzLnJvdXRlcj10aGlzLmNvbnN0cnVjdG9yLnJvdXRlcnx8dGhpcy5j
        b25zdHJ1Y3Rvci5tYXAoRW1iZXIuSyksdGhpcy5fYWN0aXZlVmlld3M9e30s
        dGhpcy5fc2V0dXBMb2NhdGlvbigpfSx1cmw6RW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oKXtyZXR1cm4gaSh0aGlzLCJsb2NhdGlvbiIpLmdldFVSTCgpfSks
        c3RhcnRSb3V0aW5nOmZ1bmN0aW9uKCl7dGhpcy5yb3V0ZXI9dGhpcy5yb3V0
        ZXJ8fHRoaXMuY29uc3RydWN0b3IubWFwKEVtYmVyLkspO3ZhciBlPXRoaXMu
        cm91dGVyLHQ9aSh0aGlzLCJsb2NhdGlvbiIpLHI9dGhpcy5jb250YWluZXIs
        bj10aGlzO3RoaXMuX3NldHVwUm91dGVyKGUsdCksci5yZWdpc3Rlcigidmll
        dzpkZWZhdWx0IixzKSxyLnJlZ2lzdGVyKCJ2aWV3OnRvcGxldmVsIixFbWJl
        ci5WaWV3LmV4dGVuZCgpKSx0Lm9uVXBkYXRlVVJMKGZ1bmN0aW9uKGUpe24u
        aGFuZGxlVVJMKGUpfSksdGhpcy5oYW5kbGVVUkwodC5nZXRVUkwoKSl9LGRp
        ZFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7cih0aGlzKSx0aGlzLl9jYW5jZWxM
        b2FkaW5nRXZlbnQoKSx0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCJ1cmwi
        KSxFbWJlci5ydW4ub25jZSh0aGlzLHRoaXMudHJpZ2dlciwiZGlkVHJhbnNp
        dGlvbiIpLGkodGhpcywibmFtZXNwYWNlIikuTE9HX1RSQU5TSVRJT05TJiZF
        bWJlci5Mb2dnZXIubG9nKCJUcmFuc2l0aW9uZWQgaW50byAnIitFbWJlci5S
        b3V0ZXIuX3JvdXRlUGF0aChlKSsiJyIpfSxoYW5kbGVVUkw6ZnVuY3Rpb24o
        ZSl7cmV0dXJuIHRoaXMuX2RvVHJhbnNpdGlvbigiaGFuZGxlVVJMIixbZV0p
        fSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9UcmFu
        c2l0aW9uKCJ0cmFuc2l0aW9uVG8iLGFyZ3VtZW50cyl9LGludGVybWVkaWF0
        ZVRyYW5zaXRpb25UbzpmdW5jdGlvbigpe3RoaXMucm91dGVyLmludGVybWVk
        aWF0ZVRyYW5zaXRpb25Uby5hcHBseSh0aGlzLnJvdXRlcixhcmd1bWVudHMp
        LHIodGhpcyk7dmFyIGU9dGhpcy5yb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZv
        cztpKHRoaXMsIm5hbWVzcGFjZSIpLkxPR19UUkFOU0lUSU9OUyYmRW1iZXIu
        TG9nZ2VyLmxvZygiSW50ZXJtZWRpYXRlLXRyYW5zaXRpb25lZCBpbnRvICci
        K0VtYmVyLlJvdXRlci5fcm91dGVQYXRoKGUpKyInIil9LHJlcGxhY2VXaXRo
        OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvVHJhbnNpdGlvbigicmVwbGFj
        ZVdpdGgiLGFyZ3VtZW50cyl9LGdlbmVyYXRlOmZ1bmN0aW9uKCl7dmFyIGU9
        dGhpcy5yb3V0ZXIuZ2VuZXJhdGUuYXBwbHkodGhpcy5yb3V0ZXIsYXJndW1l
        bnRzKTtyZXR1cm4gdGhpcy5sb2NhdGlvbi5mb3JtYXRVUkwoZSl9LGlzQWN0
        aXZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yb3V0ZXI7cmV0dXJuIGUuaXNB
        Y3RpdmUuYXBwbHkoZSxhcmd1bWVudHMpfSxzZW5kOmZ1bmN0aW9uKCl7dGhp
        cy5yb3V0ZXIudHJpZ2dlci5hcHBseSh0aGlzLnJvdXRlcixhcmd1bWVudHMp
        fSxoYXNSb3V0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yb3V0ZXIuaGFz
        Um91dGUoZSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5yb3V0ZXIucmVzZXQo
        KX0sX2xvb2t1cEFjdGl2ZVZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5f
        YWN0aXZlVmlld3NbZV07cmV0dXJuIHQmJnRbMF19LF9jb25uZWN0QWN0aXZl
        VmlldzpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2FjdGl2ZVZpZXdzW2Vd
        O3ImJnJbMF0ub2ZmKCJ3aWxsRGVzdHJveUVsZW1lbnQiLHRoaXMsclsxXSk7
        dmFyIG49ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fYWN0aXZlVmlld3NbZV19
        O3RoaXMuX2FjdGl2ZVZpZXdzW2VdPVt0LG5dLHQub25lKCJ3aWxsRGVzdHJv
        eUVsZW1lbnQiLHRoaXMsbil9LF9zZXR1cExvY2F0aW9uOmZ1bmN0aW9uKCl7
        dmFyIGU9aSh0aGlzLCJsb2NhdGlvbiIpLHQ9aSh0aGlzLCJyb290VVJMIiks
        cj17fTsic3RyaW5nIj09dHlwZW9mIHQmJihyLnJvb3RVUkw9dCksInN0cmlu
        ZyI9PXR5cGVvZiBlJiYoci5pbXBsZW1lbnRhdGlvbj1lLGU9byh0aGlzLCJs
        b2NhdGlvbiIsRW1iZXIuTG9jYXRpb24uY3JlYXRlKHIpKSl9LF9nZXRIYW5k
        bGVyRnVuY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT17fSx0PXRoaXMuY29udGFp
        bmVyLHI9dC5sb29rdXBGYWN0b3J5KCJyb3V0ZTpiYXNpYyIpLG49dGhpczty
        ZXR1cm4gZnVuY3Rpb24obyl7dmFyIGE9InJvdXRlOiIrbyxzPXQubG9va3Vw
        KGEpO3JldHVybiBlW29dP3M6KGVbb109ITAsc3x8KHQucmVnaXN0ZXIoYSxy
        LmV4dGVuZCgpKSxzPXQubG9va3VwKGEpLGkobiwibmFtZXNwYWNlLkxPR19B
        Q1RJVkVfR0VORVJBVElPTiIpJiZFbWJlci5Mb2dnZXIuaW5mbygiZ2VuZXJh
        dGVkIC0+ICIrYSx7ZnVsbE5hbWU6YX0pKSxzLnJvdXRlTmFtZT1vLHMpfX0s
        X3NldHVwUm91dGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbj10aGlzO2UuZ2V0
        SGFuZGxlcj10aGlzLl9nZXRIYW5kbGVyRnVuY3Rpb24oKTt2YXIgaT1mdW5j
        dGlvbigpe3Quc2V0VVJMKHIpfTtpZihlLnVwZGF0ZVVSTD1mdW5jdGlvbihl
        KXtyPWUsRW1iZXIucnVuLm9uY2UoaSl9LHQucmVwbGFjZVVSTCl7dmFyIG89
        ZnVuY3Rpb24oKXt0LnJlcGxhY2VVUkwocil9O2UucmVwbGFjZVVSTD1mdW5j
        dGlvbihlKXtyPWUsRW1iZXIucnVuLm9uY2Uobyl9fWUuZGlkVHJhbnNpdGlv
        bj1mdW5jdGlvbihlKXtuLmRpZFRyYW5zaXRpb24oZSl9fSxfZG9UcmFuc2l0
        aW9uOmZ1bmN0aW9uKGUsdCl7dD1bXS5zbGljZS5jYWxsKHQpLHRbMF09dFsw
        XXx8Ii8iO3ZhciByLG49dFswXSxpPSExO0VtYmVyLkZFQVRVUkVTLmlzRW5h
        YmxlZCgicXVlcnktcGFyYW1zIikmJihpPTE9PT10Lmxlbmd0aCYmdFswXS5o
        YXNPd25Qcm9wZXJ0eSgicXVlcnlQYXJhbXMiKSksaXx8Ii8iIT09bi5jaGFy
        QXQoMCk/aXx8KHI9dGhpcy5yb3V0ZXIuaGFzUm91dGUobik/bjp0WzBdPW4r
        Ii5pbmRleCIpOnI9bjt2YXIgbz10aGlzLnJvdXRlcltlXS5hcHBseSh0aGlz
        LnJvdXRlcix0KTtyZXR1cm4gby50aGVuKG51bGwsZnVuY3Rpb24oZSl7IlVu
        cmVjb2duaXplZFVSTEVycm9yIj09PWUubmFtZX0pLG99LF9zY2hlZHVsZUxv
        YWRpbmdFdmVudDpmdW5jdGlvbihlLHQpe3RoaXMuX2NhbmNlbExvYWRpbmdF
        dmVudCgpLHRoaXMuX2xvYWRpbmdTdGF0ZVRpbWVyPUVtYmVyLnJ1bi5zY2hl
        ZHVsZU9uY2UoInJvdXRlclRyYW5zaXRpb25zIix0aGlzLCJfZmlyZUxvYWRp
        bmdFdmVudCIsZSx0KX0sX2ZpcmVMb2FkaW5nRXZlbnQ6ZnVuY3Rpb24oZSx0
        KXt0aGlzLnJvdXRlci5hY3RpdmVUcmFuc2l0aW9uJiZlLnRyaWdnZXIoITAs
        ImxvYWRpbmciLGUsdCl9LF9jYW5jZWxMb2FkaW5nRXZlbnQ6ZnVuY3Rpb24o
        KXt0aGlzLl9sb2FkaW5nU3RhdGVUaW1lciYmRW1iZXIucnVuLmNhbmNlbCh0
        aGlzLl9sb2FkaW5nU3RhdGVUaW1lciksdGhpcy5fbG9hZGluZ1N0YXRlVGlt
        ZXI9bnVsbH19KSxFbWJlci5Sb3V0ZXIucmVvcGVuQ2xhc3Moe3JvdXRlcjpu
        dWxsLG1hcDpmdW5jdGlvbih0KXt2YXIgcj10aGlzLnJvdXRlcjtyfHwocj1u
        ZXcgbixyLmNhbGxiYWNrcz1bXSxyLnRyaWdnZXJFdmVudD1lLHRoaXMucmVv
        cGVuQ2xhc3Moe3JvdXRlcjpyfSkpLGkodGhpcywibmFtZXNwYWNlLkxPR19U
        UkFOU0lUSU9OU19JTlRFUk5BTCIpJiYoci5sb2c9RW1iZXIuTG9nZ2VyLmRl
        YnVnKTt2YXIgbz1FbWJlci5Sb3V0ZXJEU0wubWFwKGZ1bmN0aW9uKCl7dGhp
        cy5yZXNvdXJjZSgiYXBwbGljYXRpb24iLHtwYXRoOiIvIn0sZnVuY3Rpb24o
        KXtmb3IodmFyIGU9MDtlPHIuY2FsbGJhY2tzLmxlbmd0aDtlKyspci5jYWxs
        YmFja3NbZV0uY2FsbCh0aGlzKTt0LmNhbGwodGhpcyl9KX0pO3JldHVybiBy
        LmNhbGxiYWNrcy5wdXNoKHQpLHIubWFwKG8uZ2VuZXJhdGUoKSkscn0sX3Jv
        dXRlUGF0aDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xLG49ZS5sZW5n
        dGg7bj5yO3IrKyl7dmFyIGk9ZVtyXS5uYW1lLG89aS5zcGxpdCgiLiIpO3Qu
        cHVzaChvW28ubGVuZ3RoLTFdKX1yZXR1cm4gdC5qb2luKCIuIil9fSksbi5U
        cmFuc2l0aW9uLnByb3RvdHlwZS5zZW5kPW4uVHJhbnNpdGlvbi5wcm90b3R5
        cGUudHJpZ2dlcn0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9
        ZS5yb3V0ZXIucm91dGVyLnRhcmdldEhhbmRsZXJJbmZvcztpZih0KWZvcih2
        YXIgcixuLGk9MCxvPXQubGVuZ3RoO28+aTtpKyspe2lmKG49dFtpXS5oYW5k
        bGVyLG49PT1lKXJldHVybiByO3I9bn19ZnVuY3Rpb24gdChyKXt2YXIgbixp
        PWUocik7aWYoaSlyZXR1cm4obj1pLmxhc3RSZW5kZXJlZFRlbXBsYXRlKT9u
        OnQoaSl9ZnVuY3Rpb24gcihlLHIsbixpKXtpPWl8fHt9LGkuaW50bz1pLmlu
        dG8/aS5pbnRvLnJlcGxhY2UoL1wvL2csIi4iKTp0KGUpLGkub3V0bGV0PWku
        b3V0bGV0fHwibWFpbiIsaS5uYW1lPXIsaS50ZW1wbGF0ZT1uLGkuTE9HX1ZJ
        RVdfTE9PS1VQUz11KGUucm91dGVyLCJuYW1lc3BhY2UuTE9HX1ZJRVdfTE9P
        S1VQUyIpO3ZhciBvLGE9aS5jb250cm9sbGVyO3JldHVybiBhPWkuY29udHJv
        bGxlcj9pLmNvbnRyb2xsZXI6KG89ZS5jb250YWluZXIubG9va3VwKCJjb250
        cm9sbGVyOiIrcikpP286ZS5jb250cm9sbGVyTmFtZXx8ZS5yb3V0ZU5hbWUs
        InN0cmluZyI9PXR5cGVvZiBhJiYoYT1lLmNvbnRhaW5lci5sb29rdXAoImNv
        bnRyb2xsZXI6IithKSksaS5jb250cm9sbGVyPWEsaX1mdW5jdGlvbiBuKGUs
        dCxyKXtpZihlKXIuTE9HX1ZJRVdfTE9PS1VQUyYmRW1iZXIuTG9nZ2VyLmlu
        Zm8oIlJlbmRlcmluZyAiK3IubmFtZSsiIHdpdGggIitlLHtmdWxsTmFtZToi
        dmlldzoiK3IubmFtZX0pO2Vsc2V7dmFyIG49ci5pbnRvPyJ2aWV3OmRlZmF1
        bHQiOiJ2aWV3OnRvcGxldmVsIjtlPXQubG9va3VwKG4pLHIuTE9HX1ZJRVdf
        TE9PS1VQUyYmRW1iZXIuTG9nZ2VyLmluZm8oIlJlbmRlcmluZyAiK3IubmFt
        ZSsiIHdpdGggZGVmYXVsdCB2aWV3ICIrZSx7ZnVsbE5hbWU6InZpZXc6Iity
        Lm5hbWV9KX1yZXR1cm4gdShlLCJ0ZW1wbGF0ZU5hbWUiKXx8KGMoZSwidGVt
        cGxhdGUiLHIudGVtcGxhdGUpLGMoZSwiX2RlYnVnVGVtcGxhdGVOYW1lIixy
        Lm5hbWUpKSxjKGUsInJlbmRlcmVkTmFtZSIsci5uYW1lKSxjKGUsImNvbnRy
        b2xsZXIiLHIuY29udHJvbGxlciksZX1mdW5jdGlvbiBpKGUsdCxyKXtpZihy
        LmludG8pe3ZhciBuPWUucm91dGVyLl9sb29rdXBBY3RpdmVWaWV3KHIuaW50
        byksaT1hKG4sci5vdXRsZXQpO2UudGVhcmRvd25PdXRsZXRWaWV3c3x8KGUu
        dGVhcmRvd25PdXRsZXRWaWV3cz1bXSksbShlLnRlYXJkb3duT3V0bGV0Vmll
        d3MsMCwwLFtpXSksbi5jb25uZWN0T3V0bGV0KHIub3V0bGV0LHQpfWVsc2V7
        dmFyIHM9dShlLCJyb3V0ZXIubmFtZXNwYWNlLnJvb3RFbGVtZW50Iik7ZS50
        ZWFyZG93blRvcExldmVsVmlldyYmZS50ZWFyZG93blRvcExldmVsVmlldygp
        LGUucm91dGVyLl9jb25uZWN0QWN0aXZlVmlldyhyLm5hbWUsdCksZS50ZWFy
        ZG93blRvcExldmVsVmlldz1vKHQpLHQuYXBwZW5kVG8ocyl9fWZ1bmN0aW9u
        IG8oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZS5kZXN0cm95KCl9fWZ1bmN0aW9u
        IGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtlLmRpc2Nvbm5lY3RPdXRsZXQo
        dCl9fWZ1bmN0aW9uIHMoZSx0KXt2YXIgcj1lLmNvbnRhaW5lcixuPSJhcHBs
        aWNhdGlvbiI9PT1lLnJvdXRlTmFtZT90OmUucm91dGVOYW1lKyIuIit0LGk9
        ZS5yb3V0ZXIuaGFzUm91dGUobikmJihyLmhhcygidGVtcGxhdGU6IituKXx8
        ci5oYXMoInJvdXRlOiIrbikpO3JldHVybiBpJiZufXZhciB1PUVtYmVyLmdl
        dCxjPUVtYmVyLnNldCxsPUVtYmVyLmdldFByb3BlcnRpZXMsaD0oRW1iZXIu
        U3RyaW5nLmNsYXNzaWZ5LEVtYmVyLlN0cmluZy5mbXQsRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2gpLG09RW1iZXIuRW51bWVyYWJsZVV0aWxzLnJl
        cGxhY2UsZj17d2lsbFJlc29sdmVNb2RlbDpmdW5jdGlvbihlLHQpe3RoaXMu
        cm91dGVyLl9zY2hlZHVsZUxvYWRpbmdFdmVudChlLHQpfSxlcnJvcjpmdW5j
        dGlvbihlLHQscil7aWYodGhpcyE9PXIpe3ZhciBuPXModGhpcywiZXJyb3Ii
        KTtpZihuKXJldHVybiB0aGlzLmludGVybWVkaWF0ZVRyYW5zaXRpb25Ubyhu
        LGUpLHZvaWQgMAp9cmV0dXJuImFwcGxpY2F0aW9uIj09PXRoaXMucm91dGVO
        YW1lJiZFbWJlci5Mb2dnZXIuYXNzZXJ0KCExLCJFcnJvciB3aGlsZSBsb2Fk
        aW5nIHJvdXRlOiAiK0VtYmVyLmluc3BlY3QoZSkpLCEwfSxsb2FkaW5nOmZ1
        bmN0aW9uKGUsdCl7aWYodGhpcz09PXQpcmV0dXJuITA7dmFyIHI9cyh0aGlz
        LCJsb2FkaW5nIik7aWYocil0aGlzLmludGVybWVkaWF0ZVRyYW5zaXRpb25U
        byhyKTtlbHNlIGlmKGUucGl2b3RIYW5kbGVyIT09dGhpcylyZXR1cm4hMH19
        O0VtYmVyLlJvdXRlPUVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuQWN0aW9u
        SGFuZGxlcix7ZXhpdDpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpLHRo
        aXMudGVhcmRvd25WaWV3cygpfSxlbnRlcjpmdW5jdGlvbigpe3RoaXMuYWN0
        aXZhdGUoKX0sYWN0aW9uczpudWxsLF9hY3Rpb25zOmYsZXZlbnRzOmYsbWVy
        Z2VkUHJvcGVydGllczpbImV2ZW50cyJdLGRlYWN0aXZhdGU6RW1iZXIuSyxh
        Y3RpdmF0ZTpFbWJlci5LLHRyYW5zaXRpb25UbzpmdW5jdGlvbigpe3ZhciBl
        PXRoaXMucm91dGVyO3JldHVybiBlLnRyYW5zaXRpb25Uby5hcHBseShlLGFy
        Z3VtZW50cyl9LGludGVybWVkaWF0ZVRyYW5zaXRpb25UbzpmdW5jdGlvbigp
        e3ZhciBlPXRoaXMucm91dGVyO2UuaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRv
        LmFwcGx5KGUsYXJndW1lbnRzKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2
        YXIgZT10aGlzLnJvdXRlcjtyZXR1cm4gZS5yZXBsYWNlV2l0aC5hcHBseShl
        LGFyZ3VtZW50cyl9LHNlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3V0
        ZXIuc2VuZC5hcHBseSh0aGlzLnJvdXRlcixhcmd1bWVudHMpfSxzZXR1cDpm
        dW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29udHJvbGxlck5hbWV8fHRoaXMu
        cm91dGVOYW1lLG49dGhpcy5jb250cm9sbGVyRm9yKHIsITApO258fChuPXRo
        aXMuZ2VuZXJhdGVDb250cm9sbGVyKHIsZSkpLHRoaXMuY29udHJvbGxlcj1u
        O3ZhciBpPVtuLGVdO0VtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicXVlcnkt
        cGFyYW1zIikmJmkucHVzaCh0KSx0aGlzLnNldHVwQ29udHJvbGxlcnM/dGhp
        cy5zZXR1cENvbnRyb2xsZXJzKG4sZSk6dGhpcy5zZXR1cENvbnRyb2xsZXIu
        YXBwbHkodGhpcyxpKSx0aGlzLnJlbmRlclRlbXBsYXRlcz90aGlzLnJlbmRl
        clRlbXBsYXRlcyhlKTp0aGlzLnJlbmRlclRlbXBsYXRlLmFwcGx5KHRoaXMs
        aSl9LHJlZGlyZWN0OkVtYmVyLkssYmVmb3JlTW9kZWw6RW1iZXIuSyxhZnRl
        ck1vZGVsOmZ1bmN0aW9uKGUsdCl7dGhpcy5yZWRpcmVjdChlLHQpfSxjb250
        ZXh0RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50TW9kZWw9dGhp
        cy5jb250ZXh0fSxtb2RlbDpmdW5jdGlvbihlKXt2YXIgdCxyLG4saTtmb3Io
        dmFyIG8gaW4gZSkodD1vLm1hdGNoKC9eKC4qKV9pZCQvKSkmJihyPXRbMV0s
        aT1lW29dKSxuPSEwO2lmKCFyJiZuKXJldHVybiBlO2lmKHIpcmV0dXJuIHRo
        aXMuZmluZE1vZGVsKHIsaSl9LGZpbmRNb2RlbDpmdW5jdGlvbigpe3ZhciBl
        PXUodGhpcywic3RvcmUiKTtyZXR1cm4gZS5maW5kLmFwcGx5KGUsYXJndW1l
        bnRzKX0sc3RvcmU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10
        aGlzLmNvbnRhaW5lcjtyZXR1cm4gdGhpcy5yb3V0ZU5hbWUsdSh0aGlzLCJy
        b3V0ZXIubmFtZXNwYWNlIikse2ZpbmQ6ZnVuY3Rpb24odCxyKXt2YXIgbj1l
        Lmxvb2t1cEZhY3RvcnkoIm1vZGVsOiIrdCk7cmV0dXJuIG4uZmluZChyKX19
        fSksc2VyaWFsaXplOmZ1bmN0aW9uKGUsdCl7aWYoISh0Lmxlbmd0aDwxKSl7
        dmFyIHI9dFswXSxuPXt9O3JldHVybi9faWQkLy50ZXN0KHIpJiYxPT09dC5s
        ZW5ndGg/bltyXT11KGUsImlkIik6bj1sKGUsdCksbn19LHNldHVwQ29udHJv
        bGxlcjpmdW5jdGlvbihlLHQpe2UmJnZvaWQgMCE9PXQmJmMoZSwibW9kZWwi
        LHQpfSxjb250cm9sbGVyRm9yOmZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcy5j
        b250YWluZXIsbj1yLmxvb2t1cCgicm91dGU6IitlKTtyZXR1cm4gbiYmbi5j
        b250cm9sbGVyTmFtZSYmKGU9bi5jb250cm9sbGVyTmFtZSksdD1yLmxvb2t1
        cCgiY29udHJvbGxlcjoiK2UpfSxnZW5lcmF0ZUNvbnRyb2xsZXI6ZnVuY3Rp
        b24oZSx0KXt2YXIgcj10aGlzLmNvbnRhaW5lcjtyZXR1cm4gdD10fHx0aGlz
        Lm1vZGVsRm9yKGUpLEVtYmVyLmdlbmVyYXRlQ29udHJvbGxlcihyLGUsdCl9
        LG1vZGVsRm9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGFpbmVyLmxv
        b2t1cCgicm91dGU6IitlKSxyPXRoaXMucm91dGVyLnJvdXRlci5hY3RpdmVU
        cmFuc2l0aW9uO2lmKHIpe3ZhciBuPXQmJnQucm91dGVOYW1lfHxlO2lmKHIu
        cmVzb2x2ZWRNb2RlbHMuaGFzT3duUHJvcGVydHkobikpcmV0dXJuIHIucmVz
        b2x2ZWRNb2RlbHNbbl19cmV0dXJuIHQmJnQuY3VycmVudE1vZGVsfSxyZW5k
        ZXJUZW1wbGF0ZTpmdW5jdGlvbigpe3RoaXMucmVuZGVyKCl9LHJlbmRlcjpm
        dW5jdGlvbihlLHQpeyJvYmplY3QiIT10eXBlb2YgZXx8dHx8KHQ9ZSxlPXRo
        aXMucm91dGVOYW1lKSx0PXR8fHt9LGU9ZT9lLnJlcGxhY2UoL1wvL2csIi4i
        KTp0aGlzLnJvdXRlTmFtZTt2YXIgbz10LnZpZXd8fHRoaXMudmlld05hbWV8
        fGUsYT10aGlzLnRlbXBsYXRlTmFtZXx8ZSxzPXRoaXMuY29udGFpbmVyLGM9
        cy5sb29rdXAoInZpZXc6IitvKSxsPWM/Yy5nZXQoInRlbXBsYXRlIik6bnVs
        bDtyZXR1cm4gbHx8KGw9cy5sb29rdXAoInRlbXBsYXRlOiIrYSkpLGN8fGw/
        KHQ9cih0aGlzLGUsbCx0KSxjPW4oYyxzLHQpLCJtYWluIj09PXQub3V0bGV0
        JiYodGhpcy5sYXN0UmVuZGVyZWRUZW1wbGF0ZT1lKSxpKHRoaXMsYyx0KSx2
        b2lkIDApOih1KHRoaXMucm91dGVyLCJuYW1lc3BhY2UuTE9HX1ZJRVdfTE9P
        S1VQUyIpJiZFbWJlci5Mb2dnZXIuaW5mbygnQ291bGQgbm90IGZpbmQgIicr
        ZSsnIiB0ZW1wbGF0ZSBvciB2aWV3LiBOb3RoaW5nIHdpbGwgYmUgcmVuZGVy
        ZWQnLHtmdWxsTmFtZToidGVtcGxhdGU6IitlfSksdm9pZCAwKX0sZGlzY29u
        bmVjdE91dGxldDpmdW5jdGlvbihlKXtlPWV8fHt9LGUucGFyZW50Vmlldz1l
        LnBhcmVudFZpZXc/ZS5wYXJlbnRWaWV3LnJlcGxhY2UoL1wvL2csIi4iKTp0
        KHRoaXMpLGUub3V0bGV0PWUub3V0bGV0fHwibWFpbiI7dmFyIHI9dGhpcy5y
        b3V0ZXIuX2xvb2t1cEFjdGl2ZVZpZXcoZS5wYXJlbnRWaWV3KTtyLmRpc2Nv
        bm5lY3RPdXRsZXQoZS5vdXRsZXQpfSx3aWxsRGVzdHJveTpmdW5jdGlvbigp
        e3RoaXMudGVhcmRvd25WaWV3cygpfSx0ZWFyZG93blZpZXdzOmZ1bmN0aW9u
        KCl7dGhpcy50ZWFyZG93blRvcExldmVsVmlldyYmdGhpcy50ZWFyZG93blRv
        cExldmVsVmlldygpO3ZhciBlPXRoaXMudGVhcmRvd25PdXRsZXRWaWV3c3x8
        W107aChlLGZ1bmN0aW9uKGUpe2UoKX0pLGRlbGV0ZSB0aGlzLnRlYXJkb3du
        VG9wTGV2ZWxWaWV3LGRlbGV0ZSB0aGlzLnRlYXJkb3duT3V0bGV0Vmlld3Ms
        ZGVsZXRlIHRoaXMubGFzdFJlbmRlcmVkVGVtcGxhdGV9fSl9KCksZnVuY3Rp
        b24oKXtFbWJlci5vbkxvYWQoIkVtYmVyLkhhbmRsZWJhcnMiLGZ1bmN0aW9u
        KCl7ZnVuY3Rpb24gZShlLHIsaSl7cmV0dXJuIG4uY2FsbCh0KGUscixpKSxm
        dW5jdGlvbih0LG4pe3JldHVybiBudWxsPT09dD9yW25dOm8oZSx0LGkpfSl9
        ZnVuY3Rpb24gdChlLHQsbyl7ZnVuY3Rpb24gYShlLHQpe3JldHVybiJjb250
        cm9sbGVyIj09PXQ/dDpFbWJlci5Db250cm9sbGVyTWl4aW4uZGV0ZWN0KGUp
        P2EoaShlLCJtb2RlbCIpLHQ/dCsiLm1vZGVsIjoibW9kZWwiKTp0fXZhciBz
        PXIoZSx0LG8pLHU9by50eXBlcztyZXR1cm4gbi5jYWxsKHMsZnVuY3Rpb24o
        ZSxyKXtyZXR1cm4iSUQiPT09dVtyXT9hKGUsdFtyXSk6bnVsbH0pfXZhciBy
        PUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBhcmFtcyxuPUVtYmVyLkFycmF5
        UG9seWZpbGxzLm1hcCxpPUVtYmVyLmdldCxvPUVtYmVyLkhhbmRsZWJhcnMu
        Z2V0O0VtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zPWUsRW1iZXIuUm91dGVy
        LnJlc29sdmVQYXRocz10fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5n
        ZXQ7RW1iZXIuc2V0LEVtYmVyLlN0cmluZy5mbXQsRW1iZXIub25Mb2FkKCJF
        bWJlci5IYW5kbGViYXJzIixmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSx0KXty
        ZXR1cm4gZS5oYXNSb3V0ZSh0KXx8KHQrPSIuaW5kZXgiKSx0fWZ1bmN0aW9u
        IHIoZSl7dmFyIHQ9ZS5vcHRpb25zLnR5cGVzLHI9ZS5vcHRpb25zLmRhdGE7
        cmV0dXJuIGkoZS5jb250ZXh0LGUucGFyYW1zLHt0eXBlczp0LGRhdGE6cn0p
        fXZhciBuPUVtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zLGk9RW1iZXIuUm91
        dGVyLnJlc29sdmVQYXRocyxvPUVtYmVyLlZpZXdVdGlscy5pc1NpbXBsZUNs
        aWNrLGE9RW1iZXIuTGlua1ZpZXc9RW1iZXIuVmlldy5leHRlbmQoe3RhZ05h
        bWU6ImEiLGN1cnJlbnRXaGVuOm51bGwsdGl0bGU6bnVsbCxyZWw6bnVsbCxh
        Y3RpdmVDbGFzczoiYWN0aXZlIixsb2FkaW5nQ2xhc3M6ImxvYWRpbmciLGRp
        c2FibGVkQ2xhc3M6ImRpc2FibGVkIixfaXNEaXNhYmxlZDohMSxyZXBsYWNl
        OiExLGF0dHJpYnV0ZUJpbmRpbmdzOlsiaHJlZiIsInRpdGxlIiwicmVsIl0s
        Y2xhc3NOYW1lQmluZGluZ3M6WyJhY3RpdmUiLCJsb2FkaW5nIiwiZGlzYWJs
        ZWQiXSxldmVudE5hbWU6ImNsaWNrIixpbml0OmZ1bmN0aW9uKCl7dGhpcy5f
        c3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWUodGhpcywiZXZl
        bnROYW1lIik7dGhpcy5vbih0LHRoaXMsdGhpcy5faW52b2tlKTt2YXIgbixp
        LG8sYT10aGlzLnBhcmFtZXRlcnMscz1hLmNvbnRleHQsdT1yKGEpLGM9dS5s
        ZW5ndGgsbD1hLm9wdGlvbnMubGlua1RleHRQYXRoO2ZvcihsJiYobz1FbWJl
        ci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgocyxsLGEub3B0aW9ucy5kYXRh
        KSx0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIoby5yb290LG8ucGF0aCx0aGlzLHRo
        aXMucmVyZW5kZXIpKSxpPTA7Yz5pO2krKyluPXVbaV0sbnVsbCE9PW4mJihv
        PUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChzLG4sYS5vcHRpb25z
        LmRhdGEpLHRoaXMucmVnaXN0ZXJPYnNlcnZlcihvLnJvb3Qsby5wYXRoLHRo
        aXMsdGhpcy5fcGFyYW1zQ2hhbmdlZCkpO2lmKEVtYmVyLkZFQVRVUkVTLmlz
        RW5hYmxlZCgicXVlcnktcGFyYW1zIikpe3ZhciBoPWUodGhpcywiX3BvdGVu
        dGlhbFF1ZXJ5UGFyYW1zIil8fFtdO2ZvcihpPTA7aTxoLmxlbmd0aDtpKysp
        dGhpcy5yZWdpc3Rlck9ic2VydmVyKHRoaXMsaFtpXSx0aGlzLHRoaXMuX3F1
        ZXJ5UGFyYW1zQ2hhbmdlZCl9fSxfcGFyYW1zQ2hhbmdlZDpmdW5jdGlvbigp
        e3RoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoInJlc29sdmVkUGFyYW1zIil9
        LF9xdWVyeVBhcmFtc0NoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLm5vdGlmeVBy
        b3BlcnR5Q2hhbmdlKCJxdWVyeVBhcmFtcyIpfSxjb25jcmV0ZVZpZXc6RW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJwYXJlbnRW
        aWV3Iil9KS5wcm9wZXJ0eSgicGFyZW50VmlldyIpLGRpc2FibGVkOkVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7cmV0dXJuIHZvaWQgMCE9PXImJnRo
        aXMuc2V0KCJfaXNEaXNhYmxlZCIscikscj9lKHRoaXMsImRpc2FibGVkQ2xh
        c3MiKTohMX0pLGFjdGl2ZTpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe2lm
        KGUodGhpcywibG9hZGluZyIpKXJldHVybiExO3ZhciB0PWUodGhpcywicm91
        dGVyIikscj1lKHRoaXMsInJvdXRlQXJncyIpLG49ci5zbGljZSgxKSxpPWUo
        dGhpcywicmVzb2x2ZWRQYXJhbXMiKSxvPXRoaXMuY3VycmVudFdoZW58fGlb
        MF0sYT1vKyIuaW5kZXgiLHM9dC5pc0FjdGl2ZS5hcHBseSh0LFtvXS5jb25j
        YXQobikpfHx0LmlzQWN0aXZlLmFwcGx5KHQsW2FdLmNvbmNhdChuKSk7cmV0
        dXJuIHM/ZSh0aGlzLCJhY3RpdmVDbGFzcyIpOnZvaWQgMH0pLnByb3BlcnR5
        KCJyZXNvbHZlZFBhcmFtcyIsInJvdXRlQXJncyIsInJvdXRlci51cmwiKSxs
        b2FkaW5nOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhp
        cywicm91dGVBcmdzIik/dm9pZCAwOmUodGhpcywibG9hZGluZ0NsYXNzIil9
        KS5wcm9wZXJ0eSgicm91dGVBcmdzIikscm91dGVyOkVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiY29udHJvbGxlciIpLmNvbnRh
        aW5lci5sb29rdXAoInJvdXRlcjptYWluIil9KSxfaW52b2tlOmZ1bmN0aW9u
        KHQpe2lmKCFvKHQpKXJldHVybiEwO2lmKHQucHJldmVudERlZmF1bHQoKSx0
        aGlzLmJ1YmJsZXM9PT0hMSYmdC5zdG9wUHJvcGFnYXRpb24oKSxlKHRoaXMs
        Il9pc0Rpc2FibGVkIikpcmV0dXJuITE7aWYoZSh0aGlzLCJsb2FkaW5nIikp
        cmV0dXJuIEVtYmVyLkxvZ2dlci53YXJuKCJUaGlzIGxpbmstdG8gaXMgaW4g
        YW4gaW5hY3RpdmUgbG9hZGluZyBzdGF0ZSBiZWNhdXNlIGF0IGxlYXN0IG9u
        ZSBvZiBpdHMgcGFyYW1ldGVycyBwcmVzZW50bHkgaGFzIGEgbnVsbC91bmRl
        ZmluZWQgdmFsdWUsIG9yIHRoZSBwcm92aWRlZCByb3V0ZSBuYW1lIGlzIGlu
        dmFsaWQuIiksITE7dmFyIHI9ZSh0aGlzLCJyb3V0ZXIiKSxuPWUodGhpcywi
        cm91dGVBcmdzIik7ZSh0aGlzLCJyZXBsYWNlIik/ci5yZXBsYWNlV2l0aC5h
        cHBseShyLG4pOnIudHJhbnNpdGlvblRvLmFwcGx5KHIsbil9LHJlc29sdmVk
        UGFyYW1zOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5w
        YXJhbWV0ZXJzLHI9dC5vcHRpb25zLGk9ci50eXBlcyxvPXIuZGF0YTtpZihF
        bWJlci5GRUFUVVJFUy5pc0VuYWJsZWQoInF1ZXJ5LXBhcmFtcyIpKXtpZigw
        PT09dC5wYXJhbXMubGVuZ3RoKXt2YXIgYT10aGlzLmNvbnRhaW5lci5sb29r
        dXAoImNvbnRyb2xsZXI6YXBwbGljYXRpb24iKTtyZXR1cm5bZShhLCJjdXJy
        ZW50Um91dGVOYW1lIildfXJldHVybiBuKHQuY29udGV4dCx0LnBhcmFtcyx7
        dHlwZXM6aSxkYXRhOm99KX1yZXR1cm4gbih0LmNvbnRleHQsdC5wYXJhbXMs
        e3R5cGVzOmksZGF0YTpvfSl9KS5wcm9wZXJ0eSgpLHJvdXRlQXJnczpFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciByPWUodGhpcywicmVzb2x2ZWRQ
        YXJhbXMiKS5zbGljZSgwKSxuPWUodGhpcywicm91dGVyIiksaT1yWzBdO2lm
        KGkpe2k9dChuLGkpLHJbMF09aTtmb3IodmFyIG89MSxhPXIubGVuZ3RoO2E+
        bzsrK28pe3ZhciBzPXJbb107aWYobnVsbD09PXN8fCJ1bmRlZmluZWQiPT10
        eXBlb2YgcylyZXR1cm59aWYoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCJx
        dWVyeS1wYXJhbXMiKSl7dmFyIHU9ZSh0aGlzLCJxdWVyeVBhcmFtcyIpOyh1
        fHx1PT09ITEpJiZyLnB1c2goe3F1ZXJ5UGFyYW1zOnV9KX1yZXR1cm4gcn19
        KS5wcm9wZXJ0eSgicmVzb2x2ZWRQYXJhbXMiLCJxdWVyeVBhcmFtcyIsInJv
        dXRlci51cmwiKSxfcG90ZW50aWFsUXVlcnlQYXJhbXM6RW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsInJlc29sdmVkUGFyYW1zIilb
        MF07aWYoIXIpcmV0dXJuIG51bGw7dmFyIG49ZSh0aGlzLCJyb3V0ZXIiKTty
        ZXR1cm4gcj10KG4sciksbi5yb3V0ZXIucXVlcnlQYXJhbXNGb3JIYW5kbGVy
        KHIpfSkucHJvcGVydHkoInJlc29sdmVkUGFyYW1zIikscXVlcnlQYXJhbXM6
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9bnVsbCxu
        PWUodGhpcywiX3BvdGVudGlhbFF1ZXJ5UGFyYW1zIik7cmV0dXJuIG4/KG4u
        Zm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaT1lKHQsbik7InVuZGVmaW5lZCIh
        PXR5cGVvZiBpJiYocj1yfHx7fSxyW25dPWkpfSkscik6bnVsbH0pLnByb3Bl
        cnR5KCJfcG90ZW50aWFsUXVlcnlQYXJhbXMuW10iKSxocmVmOkVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCl7aWYoImEiPT09ZSh0aGlzLCJ0YWdOYW1lIikp
        e3ZhciB0PWUodGhpcywicm91dGVyIikscj1lKHRoaXMsInJvdXRlQXJncyIp
        O3JldHVybiByP3QuZ2VuZXJhdGUuYXBwbHkodCxyKTplKHRoaXMsImxvYWRp
        bmdIcmVmIil9fSkucHJvcGVydHkoInJvdXRlQXJncyIpLGxvYWRpbmdIcmVm
        OiIjIn0pO2EudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iTGlua1ZpZXci
        fSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJsaW5rLXRvIixm
        dW5jdGlvbigpe3ZhciBlPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLC0xKVsw
        XSx0PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDAsLTEpLHI9ZS5oYXNoO2lm
        KHIuZGlzYWJsZWRCaW5kaW5nPXIuZGlzYWJsZWRXaGVuLCFlLmZuKXt2YXIg
        bj10LnNoaWZ0KCksaT1lLnR5cGVzLnNoaWZ0KCksbz10aGlzOyJJRCI9PT1p
        PyhlLmxpbmtUZXh0UGF0aD1uLGUuZm49ZnVuY3Rpb24oKXtyZXR1cm4gRW1i
        ZXIuSGFuZGxlYmFycy5nZXQobyxuLGUpfSk6ZS5mbj1mdW5jdGlvbigpe3Jl
        dHVybiBufX1yZXR1cm4gci5wYXJhbWV0ZXJzPXtjb250ZXh0OnRoaXMsb3B0
        aW9uczplLHBhcmFtczp0fSxFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmll
        dy5jYWxsKHRoaXMsYSxlKX0pLEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJI
        ZWxwZXIoImxpbmtUbyIsRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzWyJsaW5r
        LXRvIl0pfSl9KCksZnVuY3Rpb24oKXtFbWJlci5nZXQsRW1iZXIuc2V0LEVt
        YmVyLm9uTG9hZCgiRW1iZXIuSGFuZGxlYmFycyIsZnVuY3Rpb24oZSl7ZS5P
        dXRsZXRWaWV3PUVtYmVyLkNvbnRhaW5lclZpZXcuZXh0ZW5kKEVtYmVyLl9N
        ZXRhbW9ycGgpLGUucmVnaXN0ZXJIZWxwZXIoIm91dGxldCIsZnVuY3Rpb24o
        dCxyKXt2YXIgbixpO2Zvcih0JiZ0LmRhdGEmJnQuZGF0YS5pc1JlbmRlckRh
        dGEmJihyPXQsdD0ibWFpbiIpLG49ci5kYXRhLnZpZXc7IW4uZ2V0KCJ0ZW1w
        bGF0ZS5pc1RvcCIpOyluPW4uZ2V0KCJfcGFyZW50VmlldyIpO3JldHVybiBp
        PXIuaGFzaC52aWV3Q2xhc3N8fGUuT3V0bGV0VmlldyxyLmRhdGEudmlldy5z
        ZXQoIm91dGxldFNvdXJjZSIsbiksci5oYXNoLmN1cnJlbnRWaWV3QmluZGlu
        Zz0iX3ZpZXcub3V0bGV0U291cmNlLl9vdXRsZXRzLiIrdCxlLmhlbHBlcnMu
        dmlldy5jYWxsKHRoaXMsaSxyKX0pfSl9KCksZnVuY3Rpb24oKXtFbWJlci5n
        ZXQsRW1iZXIuc2V0LEVtYmVyLm9uTG9hZCgiRW1iZXIuSGFuZGxlYmFycyIs
        ZnVuY3Rpb24oKXtFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJy
        ZW5kZXIiLGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYSxzLHUsYz0zPT09
        YXJndW1lbnRzLmxlbmd0aDsyPT09YXJndW1lbnRzLmxlbmd0aCYmKHI9dCx0
        PXZvaWQgMCksInN0cmluZyI9PXR5cGVvZiB0JiYocz1FbWJlci5IYW5kbGVi
        YXJzLmdldChyLmNvbnRleHRzWzFdLHQsciksdT17c2luZ2xldG9uOiExfSks
        ZT1lLnJlcGxhY2UoL1wvL2csIi4iKSxuPXIuZGF0YS5rZXl3b3Jkcy5jb250
        cm9sbGVyLmNvbnRhaW5lcixpPW4ubG9va3VwKCJyb3V0ZXI6bWFpbiIpLGE9
        bi5sb29rdXAoInZpZXc6IitlKXx8bi5sb29rdXAoInZpZXc6ZGVmYXVsdCIp
        O3ZhciBsPXIuaGFzaC5jb250cm9sbGVyO289bD9uLmxvb2t1cCgiY29udHJv
        bGxlcjoiK2wsdSk6bi5sb29rdXAoImNvbnRyb2xsZXI6IitlLHUpfHxFbWJl
        ci5nZW5lcmF0ZUNvbnRyb2xsZXIobixlLHMpLG8mJmMmJm8uc2V0KCJtb2Rl
        bCIscyk7dmFyIGg9ci5jb250ZXh0c1sxXTtoJiZhLnJlZ2lzdGVyT2JzZXJ2
        ZXIoaCx0LGZ1bmN0aW9uKCl7by5zZXQoIm1vZGVsIixFbWJlci5IYW5kbGVi
        YXJzLmdldChoLHQscikpfSksby5zZXQoInRhcmdldCIsci5kYXRhLmtleXdv
        cmRzLmNvbnRyb2xsZXIpLHIuaGFzaC52aWV3TmFtZT1FbWJlci5TdHJpbmcu
        Y2FtZWxpemUoZSksci5oYXNoLnRlbXBsYXRlPW4ubG9va3VwKCJ0ZW1wbGF0
        ZToiK2UpLHIuaGFzaC5jb250cm9sbGVyPW8saSYmIXMmJmkuX2Nvbm5lY3RB
        Y3RpdmVWaWV3KGUsYSksRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcu
        Y2FsbCh0aGlzLGEscil9KX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIub25Mb2Fk
        KCJFbWJlci5IYW5kbGViYXJzIixmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxy
        KXt2YXIgbj1bXTtyJiZuLnB1c2gocik7dmFyIGk9ZS5vcHRpb25zLnR5cGVz
        LnNsaWNlKDEpLG89ZS5vcHRpb25zLmRhdGE7cmV0dXJuIG4uY29uY2F0KHQo
        ZS5jb250ZXh0LGUucGFyYW1zLHt0eXBlczppLGRhdGE6b30pKX12YXIgdD1F
        bWJlci5Sb3V0ZXIucmVzb2x2ZVBhcmFtcyxyPUVtYmVyLlZpZXdVdGlscy5p
        c1NpbXBsZUNsaWNrLG49RW1iZXIuSGFuZGxlYmFycyxpPW4uZ2V0LG89bi5T
        YWZlU3RyaW5nLGE9RW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaCxzPShF
        bWJlci5nZXQsQXJyYXkucHJvdG90eXBlLnNsaWNlKSx1PW4uQWN0aW9uSGVs
        cGVyPXtyZWdpc3RlcmVkQWN0aW9uczp7fX0sYz1bImFsdCIsInNoaWZ0Iiwi
        bWV0YSIsImN0cmwiXSxsPWZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCI9
        PXR5cGVvZiB0KXJldHVybiByKGUpO2lmKHQuaW5kZXhPZigiYW55Iik+PTAp
        cmV0dXJuITA7dmFyIG49ITA7cmV0dXJuIGEuY2FsbChjLGZ1bmN0aW9uKHIp
        e2VbcisiS2V5Il0mJi0xPT09dC5pbmRleE9mKHIpJiYobj0hMSl9KSxufTt1
        LnJlZ2lzdGVyQWN0aW9uPWZ1bmN0aW9uKHQscixuKXt2YXIgbz0oKytFbWJl
        ci51dWlkKS50b1N0cmluZygpO3JldHVybiB1LnJlZ2lzdGVyZWRBY3Rpb25z
        W29dPXtldmVudE5hbWU6ci5ldmVudE5hbWUsaGFuZGxlcjpmdW5jdGlvbihv
        KXtpZighbChvLG4pKXJldHVybiEwO28ucHJldmVudERlZmF1bHQoKSxyLmJ1
        YmJsZXM9PT0hMSYmby5zdG9wUHJvcGFnYXRpb24oKTt2YXIgYT1yLnRhcmdl
        dDthPWEudGFyZ2V0P2koYS5yb290LGEudGFyZ2V0LGEub3B0aW9ucyk6YS5y
        b290LEVtYmVyLnJ1bihmdW5jdGlvbigpe2Euc2VuZD9hLnNlbmQuYXBwbHko
        YSxlKHIucGFyYW1ldGVycyx0KSk6YVt0XS5hcHBseShhLGUoci5wYXJhbWV0
        ZXJzKSl9KX19LHIudmlldy5vbigid2lsbENsZWFyUmVuZGVyIixmdW5jdGlv
        bigpe2RlbGV0ZSB1LnJlZ2lzdGVyZWRBY3Rpb25zW29dfSksb30sbi5yZWdp
        c3RlckhlbHBlcigiYWN0aW9uIixmdW5jdGlvbihlKXt2YXIgdCxyPWFyZ3Vt
        ZW50c1thcmd1bWVudHMubGVuZ3RoLTFdLG49cy5jYWxsKGFyZ3VtZW50cywx
        LC0xKSxpPXIuaGFzaCxhPXtldmVudE5hbWU6aS5vbnx8ImNsaWNrIn07YS5w
        YXJhbWV0ZXJzPXtjb250ZXh0OnRoaXMsb3B0aW9uczpyLHBhcmFtczpufSxh
        LnZpZXc9ci5kYXRhLnZpZXc7dmFyIGMsbDtpLnRhcmdldD8oYz10aGlzLGw9
        aS50YXJnZXQpOih0PXIuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyKSYmKGM9
        dCksYS50YXJnZXQ9e3Jvb3Q6Yyx0YXJnZXQ6bCxvcHRpb25zOnJ9LGEuYnVi
        Ymxlcz1pLmJ1YmJsZXM7dmFyIGg9dS5yZWdpc3RlckFjdGlvbihlLGEsaS5h
        bGxvd2VkS2V5cyk7cmV0dXJuIG5ldyBvKCdkYXRhLWVtYmVyLWFjdGlvbj0i
        JytoKyciJyl9KX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0O0Vt
        YmVyLnNldCxFbWJlci5Db250cm9sbGVyTWl4aW4ucmVvcGVuKHt0cmFuc2l0
        aW9uVG9Sb3V0ZTpmdW5jdGlvbigpe3ZhciB0PWUodGhpcywidGFyZ2V0Iiks
        cj10LnRyYW5zaXRpb25Ub1JvdXRlfHx0LnRyYW5zaXRpb25UbztyZXR1cm4g
        ci5hcHBseSh0LGFyZ3VtZW50cyl9LHRyYW5zaXRpb25UbzpmdW5jdGlvbigp
        e3JldHVybiB0aGlzLnRyYW5zaXRpb25Ub1JvdXRlLmFwcGx5KHRoaXMsYXJn
        dW1lbnRzKX0scmVwbGFjZVJvdXRlOmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlz
        LCJ0YXJnZXQiKSxyPXQucmVwbGFjZVJvdXRlfHx0LnJlcGxhY2VXaXRoO3Jl
        dHVybiByLmFwcGx5KHQsYXJndW1lbnRzKX0scmVwbGFjZVdpdGg6ZnVuY3Rp
        b24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlUm91dGUuYXBwbHkodGhpcyxhcmd1
        bWVudHMpfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1i
        ZXIuc2V0O0VtYmVyLlZpZXcucmVvcGVuKHtpbml0OmZ1bmN0aW9uKCl7dCh0
        aGlzLCJfb3V0bGV0cyIse30pLHRoaXMuX3N1cGVyKCl9LGNvbm5lY3RPdXRs
        ZXQ6ZnVuY3Rpb24ocixuKXtpZih0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlv
        bnMmJmRlbGV0ZSB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnNbcl0sdGhp
        cy5faGFzRXF1aXZhbGVudFZpZXcocixuKSlyZXR1cm4gbi5kZXN0cm95KCks
        dm9pZCAwO3ZhciBpPWUodGhpcywiX291dGxldHMiKSxvPWUodGhpcywiY29u
        dGFpbmVyIiksYT1vJiZvLmxvb2t1cCgicm91dGVyOm1haW4iKSxzPWUobiwi
        cmVuZGVyZWROYW1lIik7dChpLHIsbiksYSYmcyYmYS5fY29ubmVjdEFjdGl2
        ZVZpZXcocyxuKX0sX2hhc0VxdWl2YWxlbnRWaWV3OmZ1bmN0aW9uKHQscil7
        dmFyIG49ZSh0aGlzLCJfb3V0bGV0cy4iK3QpO3JldHVybiBuJiZuLmNvbnN0
        cnVjdG9yPT09ci5jb25zdHJ1Y3RvciYmbi5nZXQoInRlbXBsYXRlIik9PT1y
        LmdldCgidGVtcGxhdGUiKSYmbi5nZXQoImNvbnRleHQiKT09PXIuZ2V0KCJj
        b250ZXh0Iil9LGRpc2Nvbm5lY3RPdXRsZXQ6ZnVuY3Rpb24oZSl7dGhpcy5f
        cGVuZGluZ0Rpc2Nvbm5lY3Rpb25zfHwodGhpcy5fcGVuZGluZ0Rpc2Nvbm5l
        Y3Rpb25zPXt9KSx0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnNbZV09ITAs
        RW1iZXIucnVuLm9uY2UodGhpcywiX2ZpbmlzaERpc2Nvbm5lY3Rpb25zIil9
        LF9maW5pc2hEaXNjb25uZWN0aW9uczpmdW5jdGlvbigpe3ZhciByPWUodGhp
        cywiX291dGxldHMiKSxuPXRoaXMuX3BlbmRpbmdEaXNjb25uZWN0aW9uczt0
        aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnM9bnVsbDtmb3IodmFyIGkgaW4g
        bil0KHIsaSxudWxsKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLnJ1
        bi5xdWV1ZXMsdD1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mO2Uuc3Bs
        aWNlKHQuY2FsbChlLCJhY3Rpb25zIikrMSwwLCJyb3V0ZXJUcmFuc2l0aW9u
        cyIpfSgpLGZ1bmN0aW9uKCl7RW1iZXIuZ2V0LEVtYmVyLnNldCxFbWJlci5M
        b2NhdGlvbj17Y3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuaW1wbGVt
        ZW50YXRpb24scj10aGlzLmltcGxlbWVudGF0aW9uc1t0XTtyZXR1cm4gci5j
        cmVhdGUuYXBwbHkocixhcmd1bWVudHMpfSxyZWdpc3RlckltcGxlbWVudGF0
        aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy5pbXBsZW1lbnRhdGlvbnNbZV09dH0s
        aW1wbGVtZW50YXRpb25zOnt9fX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVy
        LmdldCx0PUVtYmVyLnNldDtFbWJlci5Ob25lTG9jYXRpb249RW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7cGF0aDoiIixnZXRVUkw6ZnVuY3Rpb24oKXtyZXR1cm4g
        ZSh0aGlzLCJwYXRoIil9LHNldFVSTDpmdW5jdGlvbihlKXt0KHRoaXMsInBh
        dGgiLGUpfSxvblVwZGF0ZVVSTDpmdW5jdGlvbihlKXt0aGlzLnVwZGF0ZUNh
        bGxiYWNrPWV9LGhhbmRsZVVSTDpmdW5jdGlvbihlKXt0KHRoaXMsInBhdGgi
        LGUpLHRoaXMudXBkYXRlQ2FsbGJhY2soZSl9LGZvcm1hdFVSTDpmdW5jdGlv
        bihlKXtyZXR1cm4gZX19KSxFbWJlci5Mb2NhdGlvbi5yZWdpc3RlckltcGxl
        bWVudGF0aW9uKCJub25lIixFbWJlci5Ob25lTG9jYXRpb24pfSgpLGZ1bmN0
        aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLkhhc2hM
        b2NhdGlvbj1FbWJlci5PYmplY3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7
        dCh0aGlzLCJsb2NhdGlvbiIsZSh0aGlzLCJsb2NhdGlvbiIpfHx3aW5kb3cu
        bG9jYXRpb24pfSxnZXRVUkw6ZnVuY3Rpb24oKXtpZihFbWJlci5GRUFUVVJF
        Uy5pc0VuYWJsZWQoInF1ZXJ5LXBhcmFtcyIpKXt2YXIgdD1lKHRoaXMsImxv
        Y2F0aW9uIikuaHJlZixyPXQuaW5kZXhPZigiIyIpO3JldHVybi0xPT09cj8i
        Ijp0LnN1YnN0cihyKzEpfXJldHVybiBlKHRoaXMsImxvY2F0aW9uIikuaGFz
        aC5zdWJzdHIoMSl9LHNldFVSTDpmdW5jdGlvbihyKXtlKHRoaXMsImxvY2F0
        aW9uIikuaGFzaD1yLHQodGhpcywibGFzdFNldFVSTCIscil9LHJlcGxhY2VV
        Ukw6ZnVuY3Rpb24odCl7ZSh0aGlzLCJsb2NhdGlvbiIpLnJlcGxhY2UoIiMi
        K3QpfSxvblVwZGF0ZVVSTDpmdW5jdGlvbihyKXt2YXIgbj10aGlzLGk9RW1i
        ZXIuZ3VpZEZvcih0aGlzKTtFbWJlci4kKHdpbmRvdykub24oImhhc2hjaGFu
        Z2UuZW1iZXItbG9jYXRpb24tIitpLGZ1bmN0aW9uKCl7RW1iZXIucnVuKGZ1
        bmN0aW9uKCl7dmFyIGk9bG9jYXRpb24uaGFzaC5zdWJzdHIoMSk7ZShuLCJs
        YXN0U2V0VVJMIikhPT1pJiYodChuLCJsYXN0U2V0VVJMIixudWxsKSxyKGkp
        KX0pfSl9LGZvcm1hdFVSTDpmdW5jdGlvbihlKXtyZXR1cm4iIyIrZX0sd2ls
        bERlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5ndWlkRm9yKHRoaXMp
        O0VtYmVyLiQod2luZG93KS5vZmYoImhhc2hjaGFuZ2UuZW1iZXItbG9jYXRp
        b24tIitlKX19KSxFbWJlci5Mb2NhdGlvbi5yZWdpc3RlckltcGxlbWVudGF0
        aW9uKCJoYXNoIixFbWJlci5IYXNoTG9jYXRpb24pfSgpLGZ1bmN0aW9uKCl7
        dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0LHI9ITEsbj13aW5kb3cuaGlz
        dG9yeSYmInN0YXRlImluIHdpbmRvdy5oaXN0b3J5O0VtYmVyLkhpc3RvcnlM
        b2NhdGlvbj1FbWJlci5PYmplY3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7
        dCh0aGlzLCJsb2NhdGlvbiIsZSh0aGlzLCJsb2NhdGlvbiIpfHx3aW5kb3cu
        bG9jYXRpb24pLHRoaXMuaW5pdFN0YXRlKCl9LGluaXRTdGF0ZTpmdW5jdGlv
        bigpe3QodGhpcywiaGlzdG9yeSIsZSh0aGlzLCJoaXN0b3J5Iil8fHdpbmRv
        dy5oaXN0b3J5KSx0aGlzLnJlcGxhY2VTdGF0ZSh0aGlzLmZvcm1hdFVSTCh0
        aGlzLmdldFVSTCgpKSl9LHJvb3RVUkw6Ii8iLGdldFVSTDpmdW5jdGlvbigp
        e3ZhciB0PWUodGhpcywicm9vdFVSTCIpLHI9ZSh0aGlzLCJsb2NhdGlvbiIp
        LG49ci5wYXRobmFtZTt0PXQucmVwbGFjZSgvXC8kLywiIik7dmFyIGk9bi5y
        ZXBsYWNlKHQsIiIpO2lmKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgicXVl
        cnktcGFyYW1zIikpe3ZhciBvPXIuc2VhcmNofHwiIjtpKz1vfXJldHVybiBp
        fSxzZXRVUkw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRTdGF0ZSgpO2U9
        dGhpcy5mb3JtYXRVUkwoZSksdCYmdC5wYXRoIT09ZSYmdGhpcy5wdXNoU3Rh
        dGUoZSl9LHJlcGxhY2VVUkw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRT
        dGF0ZSgpO2U9dGhpcy5mb3JtYXRVUkwoZSksdCYmdC5wYXRoIT09ZSYmdGhp
        cy5yZXBsYWNlU3RhdGUoZSl9LGdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJu
        IG4/ZSh0aGlzLCJoaXN0b3J5Iikuc3RhdGU6dGhpcy5faGlzdG9yeVN0YXRl
        fSxwdXNoU3RhdGU6ZnVuY3Rpb24odCl7dmFyIHI9e3BhdGg6dH07ZSh0aGlz
        LCJoaXN0b3J5IikucHVzaFN0YXRlKHIsbnVsbCx0KSxufHwodGhpcy5faGlz
        dG9yeVN0YXRlPXIpLHRoaXMuX3ByZXZpb3VzVVJMPXRoaXMuZ2V0VVJMKCl9
        LHJlcGxhY2VTdGF0ZTpmdW5jdGlvbih0KXt2YXIgcj17cGF0aDp0fTtlKHRo
        aXMsImhpc3RvcnkiKS5yZXBsYWNlU3RhdGUocixudWxsLHQpLG58fCh0aGlz
        Ll9oaXN0b3J5U3RhdGU9ciksdGhpcy5fcHJldmlvdXNVUkw9dGhpcy5nZXRV
        UkwoKX0sb25VcGRhdGVVUkw6ZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIuZ3Vp
        ZEZvcih0aGlzKSxuPXRoaXM7RW1iZXIuJCh3aW5kb3cpLm9uKCJwb3BzdGF0
        ZS5lbWJlci1sb2NhdGlvbi0iK3QsZnVuY3Rpb24oKXsocnx8KHI9ITAsbi5n
        ZXRVUkwoKSE9PW4uX3ByZXZpb3VzVVJMKSkmJmUobi5nZXRVUkwoKSl9KX0s
        Zm9ybWF0VVJMOmZ1bmN0aW9uKHQpe3ZhciByPWUodGhpcywicm9vdFVSTCIp
        O3JldHVybiIiIT09dCYmKHI9ci5yZXBsYWNlKC9cLyQvLCIiKSkscit0fSx3
        aWxsRGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmd1aWRGb3IodGhp
        cyk7RW1iZXIuJCh3aW5kb3cpLm9mZigicG9wc3RhdGUuZW1iZXItbG9jYXRp
        b24tIitlKX19KSxFbWJlci5Mb2NhdGlvbi5yZWdpc3RlckltcGxlbWVudGF0
        aW9uKCJoaXN0b3J5IixFbWJlci5IaXN0b3J5TG9jYXRpb24pfSgpLGZ1bmN0
        aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpKXt2YXIgbyxhPXQubmFtZSxzPXQu
        aW5jb21pbmcsdT10LmluY29taW5nTmFtZXMsYz11Lmxlbmd0aDtpZihufHwo
        bj17fSksaXx8KGk9W10pLCFuLmhhc093blByb3BlcnR5KGEpKXtmb3IoaS5w
        dXNoKGEpLG5bYV09ITAsbz0wO2M+bztvKyspZShzW3Vbb11dLHIsbixpKTty
        KHQsaSksaS5wb3AoKX19ZnVuY3Rpb24gdCgpe3RoaXMubmFtZXM9W10sdGhp
        cy52ZXJ0aWNlcz17fX10LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7aWYo
        ZSl7aWYodGhpcy52ZXJ0aWNlcy5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4g
        dGhpcy52ZXJ0aWNlc1tlXTt2YXIgdD17bmFtZTplLGluY29taW5nOnt9LGlu
        Y29taW5nTmFtZXM6W10saGFzT3V0Z29pbmc6ITEsdmFsdWU6bnVsbH07cmV0
        dXJuIHRoaXMudmVydGljZXNbZV09dCx0aGlzLm5hbWVzLnB1c2goZSksdH19
        LHQucHJvdG90eXBlLm1hcD1mdW5jdGlvbihlLHQpe3RoaXMuYWRkKGUpLnZh
        bHVlPXR9LHQucHJvdG90eXBlLmFkZEVkZ2U9ZnVuY3Rpb24odCxyKXtmdW5j
        dGlvbiBuKGUsdCl7aWYoZS5uYW1lPT09cil0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoImN5Y2xlIGRldGVjdGVkOiAiK3IrIiA8LSAiK3Quam9pbigiIDwtICIp
        KX1pZih0JiZyJiZ0IT09cil7dmFyIGk9dGhpcy5hZGQodCksbz10aGlzLmFk
        ZChyKTtvLmluY29taW5nLmhhc093blByb3BlcnR5KHQpfHwoZShpLG4pLGku
        aGFzT3V0Z29pbmc9ITAsby5pbmNvbWluZ1t0XT1pLG8uaW5jb21pbmdOYW1l
        cy5wdXNoKHQpKX19LHQucHJvdG90eXBlLnRvcHNvcnQ9ZnVuY3Rpb24odCl7
        dmFyIHIsbixpPXt9LG89dGhpcy52ZXJ0aWNlcyxhPXRoaXMubmFtZXMscz1h
        Lmxlbmd0aDtmb3Iocj0wO3M+cjtyKyspbj1vW2Fbcl1dLG4uaGFzT3V0Z29p
        bmd8fGUobix0LGkpfSx0LnByb3RvdHlwZS5hZGRFZGdlcz1mdW5jdGlvbihl
        LHQscixuKXt2YXIgaTtpZih0aGlzLm1hcChlLHQpLHIpaWYoInN0cmluZyI9
        PXR5cGVvZiByKXRoaXMuYWRkRWRnZShlLHIpO2Vsc2UgZm9yKGk9MDtpPHIu
        bGVuZ3RoO2krKyl0aGlzLmFkZEVkZ2UoZSxyW2ldKTtpZihuKWlmKCJzdHJp
        bmciPT10eXBlb2Ygbil0aGlzLmFkZEVkZ2UobixlKTtlbHNlIGZvcihpPTA7
        aTxuLmxlbmd0aDtpKyspdGhpcy5hZGRFZGdlKG5baV0sZSl9LEVtYmVyLkRB
        Rz10fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuU3Ry
        aW5nLmNsYXNzaWZ5LHI9RW1iZXIuU3RyaW5nLmNhcGl0YWxpemUsbj1FbWJl
        ci5TdHJpbmcuZGVjYW1lbGl6ZTtFbWJlci5EZWZhdWx0UmVzb2x2ZXI9RW1i
        ZXIuT2JqZWN0LmV4dGVuZCh7bmFtZXNwYWNlOm51bGwsbm9ybWFsaXplOmZ1
        bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIjoiLDIpLHI9dFswXSxuPXRbMV07
        aWYoInRlbXBsYXRlIiE9PXIpe3ZhciBpPW47cmV0dXJuIGkuaW5kZXhPZigi
        LiIpPi0xJiYoaT1pLnJlcGxhY2UoL1wuKC4pL2csZnVuY3Rpb24oZSl7cmV0
        dXJuIGUuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCl9KSksbi5pbmRleE9mKCJf
        Iik+LTEmJihpPWkucmVwbGFjZSgvXyguKS9nLGZ1bmN0aW9uKGUpe3JldHVy
        biBlLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSkpLHIrIjoiK2l9cmV0dXJu
        IGV9LHJlc29sdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJzZU5hbWUo
        ZSkscj10aGlzW3QucmVzb2x2ZU1ldGhvZE5hbWVdO2lmKCF0Lm5hbWV8fCF0
        LnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBmdWxsTmFtZTog
        YCIrZSsiYCwgbXVzdCBvZiBvZiB0aGUgZm9ybSBgdHlwZTpuYW1lYCAiKTtp
        ZihyKXt2YXIgbj1yLmNhbGwodGhpcyx0KTtpZihuKXJldHVybiBufXJldHVy
        biB0aGlzLnJlc29sdmVPdGhlcih0KX0scGFyc2VOYW1lOmZ1bmN0aW9uKG4p
        e3ZhciBpPW4uc3BsaXQoIjoiKSxvPWlbMF0sYT1pWzFdLHM9YSx1PWUodGhp
        cywibmFtZXNwYWNlIiksYz11O2lmKCJ0ZW1wbGF0ZSIhPT1vJiYtMSE9PXMu
        aW5kZXhPZigiLyIpKXt2YXIgbD1zLnNwbGl0KCIvIik7cz1sW2wubGVuZ3Ro
        LTFdO3ZhciBoPXIobC5zbGljZSgwLC0xKS5qb2luKCIuIikpO2M9RW1iZXIu
        TmFtZXNwYWNlLmJ5TmFtZShoKX1yZXR1cm57ZnVsbE5hbWU6bix0eXBlOm8s
        ZnVsbE5hbWVXaXRob3V0VHlwZTphLG5hbWU6cyxyb290OmMscmVzb2x2ZU1l
        dGhvZE5hbWU6InJlc29sdmUiK3Qobyl9fSxyZXNvbHZlVGVtcGxhdGU6ZnVu
        Y3Rpb24oZSl7dmFyIHQ9ZS5mdWxsTmFtZVdpdGhvdXRUeXBlLnJlcGxhY2Uo
        L1wuL2csIi8iKTtyZXR1cm4gRW1iZXIuVEVNUExBVEVTW3RdP0VtYmVyLlRF
        TVBMQVRFU1t0XToodD1uKHQpLEVtYmVyLlRFTVBMQVRFU1t0XT9FbWJlci5U
        RU1QTEFURVNbdF06dm9pZCAwKX0sdXNlUm91dGVyTmFtaW5nOmZ1bmN0aW9u
        KGUpe2UubmFtZT1lLm5hbWUucmVwbGFjZSgvXC4vZywiXyIpLCJiYXNpYyI9
        PT1lLm5hbWUmJihlLm5hbWU9IiIpfSxyZXNvbHZlQ29udHJvbGxlcjpmdW5j
        dGlvbihlKXtyZXR1cm4gdGhpcy51c2VSb3V0ZXJOYW1pbmcoZSksdGhpcy5y
        ZXNvbHZlT3RoZXIoZSl9LHJlc29sdmVSb3V0ZTpmdW5jdGlvbihlKXtyZXR1
        cm4gdGhpcy51c2VSb3V0ZXJOYW1pbmcoZSksdGhpcy5yZXNvbHZlT3RoZXIo
        ZSl9LHJlc29sdmVWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVzZVJv
        dXRlck5hbWluZyhlKSx0aGlzLnJlc29sdmVPdGhlcihlKX0scmVzb2x2ZUhl
        bHBlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXNvbHZlT3RoZXIoZSl8
        fEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyc1tlLmZ1bGxOYW1lV2l0aG91dFR5
        cGVdfSxyZXNvbHZlTW9kZWw6ZnVuY3Rpb24ocil7dmFyIG49dChyLm5hbWUp
        LGk9ZShyLnJvb3Qsbik7cmV0dXJuIGk/aTp2b2lkIDB9LHJlc29sdmVPdGhl
        cjpmdW5jdGlvbihyKXt2YXIgbj10KHIubmFtZSkrdChyLnR5cGUpLGk9ZShy
        LnJvb3Qsbik7cmV0dXJuIGk/aTp2b2lkIDB9LGxvb2t1cERlc2NyaXB0aW9u
        OmZ1bmN0aW9uKGUpe3ZhciByPXRoaXMucGFyc2VOYW1lKGUpO2lmKCJ0ZW1w
        bGF0ZSI9PT1yLnR5cGUpcmV0dXJuInRlbXBsYXRlIGF0ICIrci5mdWxsTmFt
        ZVdpdGhvdXRUeXBlLnJlcGxhY2UoL1wuL2csIi8iKTt2YXIgbj1yLnJvb3Qr
        Ii4iK3Qoci5uYW1lKTtyZXR1cm4ibW9kZWwiIT09ci50eXBlJiYobis9dChy
        LnR5cGUpKSxufSxtYWtlVG9TdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUu
        dG9TdHJpbmcoKX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhp
        cy5fY29udGFpbmVyPWV9ZnVuY3Rpb24gdChlKXtmdW5jdGlvbiB0KGUpe3Jl
        dHVybiBuLnJlc29sdmUoZSl9ZS5nZXQoInJlc29sdmVyIik7dmFyIHI9ZS5n
        ZXQoInJlc29sdmVyIil8fGUuZ2V0KCJSZXNvbHZlciIpfHxFbWJlci5EZWZh
        dWx0UmVzb2x2ZXIsbj1yLmNyZWF0ZSh7bmFtZXNwYWNlOmV9KTtyZXR1cm4g
        dC5kZXNjcmliZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5sb29rdXBEZXNjcmlw
        dGlvbihlKX0sdC5tYWtlVG9TdHJpbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4g
        bi5tYWtlVG9TdHJpbmcoZSx0KX0sdC5ub3JtYWxpemU9ZnVuY3Rpb24oZSl7
        cmV0dXJuIG4ubm9ybWFsaXplP24ubm9ybWFsaXplKGUpOmV9LHR9dmFyIHI9
        RW1iZXIuZ2V0LG49RW1iZXIuc2V0O2UuZGVwcmVjYXRlPWZ1bmN0aW9uKGUp
        e3JldHVybiBmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcjtyZXR1
        cm4gdFtlXS5hcHBseSh0LGFyZ3VtZW50cyl9fSxlLnByb3RvdHlwZT17X2Nv
        bnRhaW5lcjpudWxsLGxvb2t1cDplLmRlcHJlY2F0ZSgibG9va3VwIikscmVz
        b2x2ZTplLmRlcHJlY2F0ZSgicmVzb2x2ZSIpLHJlZ2lzdGVyOmUuZGVwcmVj
        YXRlKCJyZWdpc3RlciIpfTt2YXIgaT1FbWJlci5BcHBsaWNhdGlvbj1FbWJl
        ci5OYW1lc3BhY2UuZXh0ZW5kKEVtYmVyLkRlZmVycmVkTWl4aW4se3Jvb3RF
        bGVtZW50OiJib2R5IixldmVudERpc3BhdGNoZXI6bnVsbCxjdXN0b21FdmVu
        dHM6bnVsbCxfcmVhZGluZXNzRGVmZXJyYWxzOjEsaW5pdDpmdW5jdGlvbigp
        e2lmKHRoaXMuJHx8KHRoaXMuJD1FbWJlci4kKSx0aGlzLl9fY29udGFpbmVy
        X189dGhpcy5idWlsZENvbnRhaW5lcigpLHRoaXMuUm91dGVyPXRoaXMuZGVm
        YXVsdFJvdXRlcigpLHRoaXMuX3N1cGVyKCksdGhpcy5zY2hlZHVsZUluaXRp
        YWxpemUoKSxFbWJlci5saWJyYXJpZXMucmVnaXN0ZXJDb3JlTGlicmFyeSgi
        SGFuZGxlYmFycyIsRW1iZXIuSGFuZGxlYmFycy5WRVJTSU9OKSxFbWJlci5s
        aWJyYXJpZXMucmVnaXN0ZXJDb3JlTGlicmFyeSgialF1ZXJ5IixFbWJlci4k
        KCkuanF1ZXJ5KSxFbWJlci5MT0dfVkVSU0lPTil7RW1iZXIuTE9HX1ZFUlNJ
        T049ITE7dmFyIGU9TWF0aC5tYXguYXBwbHkodGhpcyxFbWJlci5BKEVtYmVy
        LmxpYnJhcmllcykubWFwQnkoIm5hbWUubGVuZ3RoIikpO0VtYmVyLmxpYnJh
        cmllcy5lYWNoKGZ1bmN0aW9uKHQpe25ldyBBcnJheShlLXQubGVuZ3RoKzEp
        LmpvaW4oIiAiKX0pfX0sYnVpbGRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIg
        ZT10aGlzLl9fY29udGFpbmVyX189aS5idWlsZENvbnRhaW5lcih0aGlzKTty
        ZXR1cm4gZX0sZGVmYXVsdFJvdXRlcjpmdW5jdGlvbigpe2lmKHRoaXMuUm91
        dGVyIT09ITEpe3ZhciBlPXRoaXMuX19jb250YWluZXJfXztyZXR1cm4gdGhp
        cy5Sb3V0ZXImJihlLnVucmVnaXN0ZXIoInJvdXRlcjptYWluIiksZS5yZWdp
        c3Rlcigicm91dGVyOm1haW4iLHRoaXMuUm91dGVyKSksZS5sb29rdXBGYWN0
        b3J5KCJyb3V0ZXI6bWFpbiIpfX0sc2NoZWR1bGVJbml0aWFsaXplOmZ1bmN0
        aW9uKCl7dmFyIGU9dGhpczshdGhpcy4kfHx0aGlzLiQuaXNSZWFkeT9FbWJl
        ci5ydW4uc2NoZWR1bGUoImFjdGlvbnMiLGUsIl9pbml0aWFsaXplIik6dGhp
        cy4kKCkucmVhZHkoZnVuY3Rpb24oKXtFbWJlci5ydW4oZSwiX2luaXRpYWxp
        emUiKX0pfSxkZWZlclJlYWRpbmVzczpmdW5jdGlvbigpe3RoaXMuX3JlYWRp
        bmVzc0RlZmVycmFscysrfSxhZHZhbmNlUmVhZGluZXNzOmZ1bmN0aW9uKCl7
        dGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzLS0sMD09PXRoaXMuX3JlYWRpbmVz
        c0RlZmVycmFscyYmRW1iZXIucnVuLm9uY2UodGhpcyx0aGlzLmRpZEJlY29t
        ZVJlYWR5KX0scmVnaXN0ZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY29u
        dGFpbmVyX187ZS5yZWdpc3Rlci5hcHBseShlLGFyZ3VtZW50cyl9LGluamVj
        dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX19jb250YWluZXJfXztlLmluamVj
        dGlvbi5hcHBseShlLGFyZ3VtZW50cyl9LGluaXRpYWxpemU6ZnVuY3Rpb24o
        KXt9LF9pbml0aWFsaXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNEZXN0cm95
        ZWQpe2lmKHRoaXMuUm91dGVyKXt2YXIgZT10aGlzLl9fY29udGFpbmVyX187
        ZS51bnJlZ2lzdGVyKCJyb3V0ZXI6bWFpbiIpLGUucmVnaXN0ZXIoInJvdXRl
        cjptYWluIix0aGlzLlJvdXRlcil9cmV0dXJuIHRoaXMucnVuSW5pdGlhbGl6
        ZXJzKCksRW1iZXIucnVuTG9hZEhvb2tzKCJhcHBsaWNhdGlvbiIsdGhpcyks
        dGhpcy5hZHZhbmNlUmVhZGluZXNzKCksdGhpc319LHJlc2V0OmZ1bmN0aW9u
        KCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXRoaXMuX19jb250YWluZXJfXy5sb29r
        dXAoInJvdXRlcjptYWluIik7ZS5yZXNldCgpLEVtYmVyLnJ1bih0aGlzLl9f
        Y29udGFpbmVyX18sImRlc3Ryb3kiKSx0aGlzLmJ1aWxkQ29udGFpbmVyKCks
        RW1iZXIucnVuLnNjaGVkdWxlKCJhY3Rpb25zIix0aGlzLGZ1bmN0aW9uKCl7
        dGhpcy5faW5pdGlhbGl6ZSgpfSl9dGhpcy5fcmVhZGluZXNzRGVmZXJyYWxz
        PTEsRW1iZXIucnVuLmpvaW4odGhpcyxlKX0scnVuSW5pdGlhbGl6ZXJzOmZ1
        bmN0aW9uKCl7dmFyIGUsdCxuPXIodGhpcy5jb25zdHJ1Y3RvciwiaW5pdGlh
        bGl6ZXJzIiksaT10aGlzLl9fY29udGFpbmVyX18sbz1uZXcgRW1iZXIuREFH
        LGE9dGhpcztmb3IoZSBpbiBuKXQ9bltlXSxvLmFkZEVkZ2VzKHQubmFtZSx0
        LmluaXRpYWxpemUsdC5iZWZvcmUsdC5hZnRlcik7by50b3Bzb3J0KGZ1bmN0
        aW9uKGUpe3ZhciB0PWUudmFsdWU7dChpLGEpfSl9LGRpZEJlY29tZVJlYWR5
        OmZ1bmN0aW9uKCl7dGhpcy5zZXR1cEV2ZW50RGlzcGF0Y2hlcigpLHRoaXMu
        cmVhZHkoKSx0aGlzLnN0YXJ0Um91dGluZygpLEVtYmVyLnRlc3Rpbmd8fChF
        bWJlci5OYW1lc3BhY2UucHJvY2Vzc0FsbCgpLEVtYmVyLkJPT1RFRD0hMCks
        dGhpcy5yZXNvbHZlKHRoaXMpfSxzZXR1cEV2ZW50RGlzcGF0Y2hlcjpmdW5j
        dGlvbigpe3ZhciBlPXIodGhpcywiY3VzdG9tRXZlbnRzIiksdD1yKHRoaXMs
        InJvb3RFbGVtZW50IiksaT10aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCJl
        dmVudF9kaXNwYXRjaGVyOm1haW4iKTtuKHRoaXMsImV2ZW50RGlzcGF0Y2hl
        ciIsaSksaS5zZXR1cChlLHQpfSxzdGFydFJvdXRpbmc6ZnVuY3Rpb24oKXt2
        YXIgZT10aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIp
        O2UmJmUuc3RhcnRSb3V0aW5nKCl9LGhhbmRsZVVSTDpmdW5jdGlvbihlKXt2
        YXIgdD10aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIp
        O3QuaGFuZGxlVVJMKGUpfSxyZWFkeTpFbWJlci5LLHJlc29sdmVyOm51bGws
        UmVzb2x2ZXI6bnVsbCx3aWxsRGVzdHJveTpmdW5jdGlvbigpe0VtYmVyLkJP
        T1RFRD0hMSx0aGlzLl9fY29udGFpbmVyX18uZGVzdHJveSgpfSxpbml0aWFs
        aXplcjpmdW5jdGlvbihlKXt0aGlzLmNvbnN0cnVjdG9yLmluaXRpYWxpemVy
        KGUpfX0pO0VtYmVyLkFwcGxpY2F0aW9uLnJlb3BlbkNsYXNzKHtpbml0aWFs
        aXplcnM6e30saW5pdGlhbGl6ZXI6ZnVuY3Rpb24oZSl7dm9pZCAwIT09dGhp
        cy5zdXBlcmNsYXNzLmluaXRpYWxpemVycyYmdGhpcy5zdXBlcmNsYXNzLmlu
        aXRpYWxpemVycz09PXRoaXMuaW5pdGlhbGl6ZXJzJiZ0aGlzLnJlb3BlbkNs
        YXNzKHtpbml0aWFsaXplcnM6RW1iZXIuY3JlYXRlKHRoaXMuaW5pdGlhbGl6
        ZXJzKX0pLHRoaXMuaW5pdGlhbGl6ZXJzW2UubmFtZV09ZX0sYnVpbGRDb250
        YWluZXI6ZnVuY3Rpb24ocil7dmFyIG49bmV3IEVtYmVyLkNvbnRhaW5lcjty
        ZXR1cm4gRW1iZXIuQ29udGFpbmVyLmRlZmF1bHRDb250YWluZXI9bmV3IGUo
        biksbi5zZXQ9RW1iZXIuc2V0LG4ucmVzb2x2ZXI9dChyKSxuLm5vcm1hbGl6
        ZT1uLnJlc29sdmVyLm5vcm1hbGl6ZSxuLmRlc2NyaWJlPW4ucmVzb2x2ZXIu
        ZGVzY3JpYmUsbi5tYWtlVG9TdHJpbmc9bi5yZXNvbHZlci5tYWtlVG9TdHJp
        bmcsbi5vcHRpb25zRm9yVHlwZSgiY29tcG9uZW50Iix7c2luZ2xldG9uOiEx
        fSksbi5vcHRpb25zRm9yVHlwZSgidmlldyIse3NpbmdsZXRvbjohMX0pLG4u
        b3B0aW9uc0ZvclR5cGUoInRlbXBsYXRlIix7aW5zdGFudGlhdGU6ITF9KSxu
        Lm9wdGlvbnNGb3JUeXBlKCJoZWxwZXIiLHtpbnN0YW50aWF0ZTohMX0pLG4u
        cmVnaXN0ZXIoImFwcGxpY2F0aW9uOm1haW4iLHIse2luc3RhbnRpYXRlOiEx
        fSksbi5yZWdpc3RlcigiY29udHJvbGxlcjpiYXNpYyIsRW1iZXIuQ29udHJv
        bGxlcix7aW5zdGFudGlhdGU6ITF9KSxuLnJlZ2lzdGVyKCJjb250cm9sbGVy
        Om9iamVjdCIsRW1iZXIuT2JqZWN0Q29udHJvbGxlcix7aW5zdGFudGlhdGU6
        ITF9KSxuLnJlZ2lzdGVyKCJjb250cm9sbGVyOmFycmF5IixFbWJlci5BcnJh
        eUNvbnRyb2xsZXIse2luc3RhbnRpYXRlOiExfSksbi5yZWdpc3Rlcigicm91
        dGU6YmFzaWMiLEVtYmVyLlJvdXRlLHtpbnN0YW50aWF0ZTohMX0pLG4ucmVn
        aXN0ZXIoImV2ZW50X2Rpc3BhdGNoZXI6bWFpbiIsRW1iZXIuRXZlbnREaXNw
        YXRjaGVyKSxuLnJlZ2lzdGVyKCJyb3V0ZXI6bWFpbiIsRW1iZXIuUm91dGVy
        KSxuLmluamVjdGlvbigicm91dGVyOm1haW4iLCJuYW1lc3BhY2UiLCJhcHBs
        aWNhdGlvbjptYWluIiksbi5pbmplY3Rpb24oImNvbnRyb2xsZXIiLCJ0YXJn
        ZXQiLCJyb3V0ZXI6bWFpbiIpLG4uaW5qZWN0aW9uKCJjb250cm9sbGVyIiwi
        bmFtZXNwYWNlIiwiYXBwbGljYXRpb246bWFpbiIpLG4uaW5qZWN0aW9uKCJy
        b3V0ZSIsInJvdXRlciIsInJvdXRlcjptYWluIiksbn19KSxFbWJlci5ydW5M
        b2FkSG9va3MoIkVtYmVyLkFwcGxpY2F0aW9uIixFbWJlci5BcHBsaWNhdGlv
        bil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbixpLG87
        Zm9yKGk9MCxvPXIubGVuZ3RoO28+aTtpKyspbj1yW2ldLC0xPT09bi5pbmRl
        eE9mKCI6IikmJihuPSJjb250cm9sbGVyOiIrbiksIXQuaGFzKG4pfXZhciB0
        PUVtYmVyLmdldDtFbWJlci5zZXQsRW1iZXIuQ29udHJvbGxlck1peGluLnJl
        b3Blbih7Y29uY2F0ZW5hdGVkUHJvcGVydGllczpbIm5lZWRzIl0sbmVlZHM6
        W10saW5pdDpmdW5jdGlvbigpe3ZhciByPXQodGhpcywibmVlZHMiKSxuPXQo
        ciwibGVuZ3RoIik7bj4wJiYoZSh0aGlzLHRoaXMuY29udGFpbmVyLHIpLHQo
        dGhpcywiY29udHJvbGxlcnMiKSksdGhpcy5fc3VwZXIuYXBwbHkodGhpcyxh
        cmd1bWVudHMpfSxjb250cm9sbGVyRm9yOmZ1bmN0aW9uKGUpe3JldHVybiBF
        bWJlci5jb250cm9sbGVyRm9yKHQodGhpcywiY29udGFpbmVyIiksZSl9LGNv
        bnRyb2xsZXJzOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIGU9dGhp
        cztyZXR1cm57bmVlZHM6dChlLCJuZWVkcyIpLGNvbnRhaW5lcjp0KGUsImNv
        bnRhaW5lciIpLHVua25vd25Qcm9wZXJ0eTpmdW5jdGlvbih0KXt2YXIgcixu
        LGksbz10aGlzLm5lZWRzO2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWlm
        KHI9b1tuXSxyPT09dClyZXR1cm4gdGhpcy5jb250YWluZXIubG9va3VwKCJj
        b250cm9sbGVyOiIrdCk7dmFyIGE9RW1iZXIuaW5zcGVjdChlKSsiI25lZWRz
        IGRvZXMgbm90IGluY2x1ZGUgYCIrdCsiYC4gVG8gYWNjZXNzIHRoZSAiK3Qr
        IiBjb250cm9sbGVyIGZyb20gIitFbWJlci5pbnNwZWN0KGUpKyIsICIrRW1i
        ZXIuaW5zcGVjdChlKSsiIHNob3VsZCBoYXZlIGEgYG5lZWRzYCBwcm9wZXJ0
        eSB0aGF0IGlzIGFuIGFycmF5IG9mIHRoZSBjb250cm9sbGVycyBpdCBoYXMg
        YWNjZXNzIHRvLiI7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGEpfX19KS5y
        ZWFkT25seSgpfSl9KCksZnVuY3Rpb24oKXtFbWJlci5EYXRhQWRhcHRlcj1F
        bWJlci5PYmplY3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3Vw
        ZXIoKSx0aGlzLnJlbGVhc2VNZXRob2RzPUVtYmVyLkEoKX0sY29udGFpbmVy
        Om51bGwsYXR0cmlidXRlTGltaXQ6MyxyZWxlYXNlTWV0aG9kczpFbWJlci5B
        KCksZ2V0RmlsdGVyczpmdW5jdGlvbigpe3JldHVybiBFbWJlci5BKCl9LHdh
        dGNoTW9kZWxUeXBlczpmdW5jdGlvbihlLHQpe3ZhciByLG49dGhpcy5nZXRN
        b2RlbFR5cGVzKCksaT10aGlzLG89RW1iZXIuQSgpO3I9bi5tYXAoZnVuY3Rp
        b24oZSl7dmFyIHI9aS53cmFwTW9kZWxUeXBlKGUpO3JldHVybiBvLnB1c2go
        aS5vYnNlcnZlTW9kZWxUeXBlKGUsdCkpLHJ9KSxlKHIpO3ZhciBhPWZ1bmN0
        aW9uKCl7by5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pLGkucmVsZWFzZU1l
        dGhvZHMucmVtb3ZlT2JqZWN0KGEpfTtyZXR1cm4gdGhpcy5yZWxlYXNlTWV0
        aG9kcy5wdXNoT2JqZWN0KGEpLGF9LHdhdGNoUmVjb3JkczpmdW5jdGlvbihl
        LHQscixuKXt2YXIgaSxvPXRoaXMsYT1FbWJlci5BKCkscz10aGlzLmdldFJl
        Y29yZHMoZSksdT1mdW5jdGlvbihlKXtyKFtlXSl9LGM9cy5tYXAoZnVuY3Rp
        b24oZSl7cmV0dXJuIGEucHVzaChvLm9ic2VydmVSZWNvcmQoZSx1KSksby53
        cmFwUmVjb3JkKGUpfSksbD1mdW5jdGlvbihlLHIsaSxzKXtmb3IodmFyIGM9
        cjtyK3M+YztjKyspe3ZhciBsPWUub2JqZWN0QXQoYyksaD1vLndyYXBSZWNv
        cmQobCk7YS5wdXNoKG8ub2JzZXJ2ZVJlY29yZChsLHUpKSx0KFtoXSl9aSYm
        bihyLGkpfSxoPXtkaWRDaGFuZ2U6bCx3aWxsQ2hhbmdlOkVtYmVyLkt9O3Jl
        dHVybiBzLmFkZEFycmF5T2JzZXJ2ZXIobyxoKSxpPWZ1bmN0aW9uKCl7YS5m
        b3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pLHMucmVtb3ZlQXJyYXlPYnNlcnZl
        cihvLGgpLG8ucmVsZWFzZU1ldGhvZHMucmVtb3ZlT2JqZWN0KGkpfSx0KGMp
        LHRoaXMucmVsZWFzZU1ldGhvZHMucHVzaE9iamVjdChpKSxpfSx3aWxsRGVz
        dHJveTpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy5yZWxlYXNlTWV0
        aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pfSxkZXRlY3Q6ZnVuY3Rp
        b24oKXtyZXR1cm4hMX0sY29sdW1uc0ZvclR5cGU6ZnVuY3Rpb24oKXtyZXR1
        cm4gRW1iZXIuQSgpfSxvYnNlcnZlTW9kZWxUeXBlOmZ1bmN0aW9uKGUsdCl7
        dmFyIHI9dGhpcyxuPXRoaXMuZ2V0UmVjb3JkcyhlKSxpPWZ1bmN0aW9uKCl7
        dChbci53cmFwTW9kZWxUeXBlKGUpXSl9LG89e2RpZENoYW5nZTpmdW5jdGlv
        bigpe0VtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoImFjdGlvbnMiLHRoaXMsaSl9
        LHdpbGxDaGFuZ2U6RW1iZXIuS307bi5hZGRBcnJheU9ic2VydmVyKHRoaXMs
        byk7dmFyIGE9ZnVuY3Rpb24oKXtuLnJlbW92ZUFycmF5T2JzZXJ2ZXIocixv
        KX07cmV0dXJuIGF9LHdyYXBNb2RlbFR5cGU6ZnVuY3Rpb24oZSl7dmFyIHQs
        cj10aGlzLmdldFJlY29yZHMoZSk7cmV0dXJuIHQ9e25hbWU6ZS50b1N0cmlu
        ZygpLGNvdW50OkVtYmVyLmdldChyLCJsZW5ndGgiKSxjb2x1bW5zOnRoaXMu
        Y29sdW1uc0ZvclR5cGUoZSksb2JqZWN0OmV9fSxnZXRNb2RlbFR5cGVzOmZ1
        bmN0aW9uKCl7dmFyIGU9RW1iZXIuQShFbWJlci5OYW1lc3BhY2UuTkFNRVNQ
        QUNFUyksdD1FbWJlci5BKCkscj10aGlzO3JldHVybiBlLmZvckVhY2goZnVu
        Y3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShu
        KSl7dmFyIGk9ZVtuXTtyLmRldGVjdChpKSYmdC5wdXNoKGkpfX0pLHR9LGdl
        dFJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgpfSx3cmFwUmVj
        b3JkOmZ1bmN0aW9uKGUpe3ZhciB0PXtvYmplY3Q6ZX07cmV0dXJuIHQuY29s
        dW1uVmFsdWVzPXRoaXMuZ2V0UmVjb3JkQ29sdW1uVmFsdWVzKGUpLHQuc2Vh
        cmNoS2V5d29yZHM9dGhpcy5nZXRSZWNvcmRLZXl3b3JkcyhlKSx0LmZpbHRl
        clZhbHVlcz10aGlzLmdldFJlY29yZEZpbHRlclZhbHVlcyhlKSx0LmNvbG9y
        PXRoaXMuZ2V0UmVjb3JkQ29sb3IoZSksdH0sZ2V0UmVjb3JkQ29sdW1uVmFs
        dWVzOmZ1bmN0aW9uKCl7cmV0dXJue319LGdldFJlY29yZEtleXdvcmRzOmZ1
        bmN0aW9uKCl7cmV0dXJuIEVtYmVyLkEoKX0sZ2V0UmVjb3JkRmlsdGVyVmFs
        dWVzOmZ1bmN0aW9uKCl7cmV0dXJue319LGdldFJlY29yZENvbG9yOmZ1bmN0
        aW9uKCl7cmV0dXJuIG51bGx9LG9ic2VydmVSZWNvcmQ6ZnVuY3Rpb24oKXty
        ZXR1cm4gZnVuY3Rpb24oKXt9fX0pfSgpfSgpLCJ1bmRlZmluZWQiPT10eXBl
        b2YgbG9jYXRpb258fCJsb2NhbGhvc3QiIT09bG9jYXRpb24uaG9zdG5hbWUm
        JiIxMjcuMC4wLjEiIT09bG9jYXRpb24uaG9zdG5hbWV8fEVtYmVyLkxvZ2dl
        ci53YXJuKCJZb3UgYXJlIHJ1bm5pbmcgYSBwcm9kdWN0aW9uIGJ1aWxkIG9m
        IEVtYmVyIG9uIGxvY2FsaG9zdCBhbmQgd29uJ3QgcmVjZWl2ZSBkZXRhaWxl
        ZCBlcnJvciBtZXNzYWdlcy4gSWYgeW91IHdhbnQgZnVsbCBlcnJvciBtZXNz
        YWdlcyBwbGVhc2UgdXNlIHRoZSBub24tbWluaWZpZWQgYnVpbGQgcHJvdmlk
        ZWQgb24gdGhlIEVtYmVyIHdlYnNpdGUuIik7
    http_version: 
  recorded_at: Thu, 31 Oct 2013 20:27:57 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/canary/ember-data.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - ! '*/*'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - r55XmCx6G/yfDWElXUTr78t3pxLkVloLad/DyYnSO0Xc2XWbtBniH14vHQZw+LzG
      X-Amz-Request-Id:
      - B04EDCAB08845814
      Date:
      - Thu, 31 Oct 2013 20:28:05 GMT
      Last-Modified:
      - Tue, 22 Oct 2013 16:41:40 GMT
      Etag:
      - ! '"92c5996c4658f25ddae3f191ce9b6ce7"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '217456'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUHJvamVjdDog
        ICBFbWJlciBEYXRhCi8vIENvcHlyaWdodDogQ29weXJpZ2h0IDIwMTEtMjAx
        MyBUaWxkZSBJbmMuIGFuZCBjb250cmlidXRvcnMuCi8vICAgICAgICAgICAg
        UG9ydGlvbnMgQ29weXJpZ2h0IDIwMTEgTGl2aW5nU29jaWFsIEluYy4KLy8g
        TGljZW5zZTogICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZSAoc2VlIGxp
        Y2Vuc2UuanMpCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoK
        CiAvLyBWZXJzaW9uOiAxLjAuMC1iZXRhLjQrY2FuYXJ5LmMxNWI4ZjgwCgoo
        ZnVuY3Rpb24oKSB7CnZhciBkZWZpbmUsIHJlcXVpcmVNb2R1bGU7CgooZnVu
        Y3Rpb24oKSB7CiAgdmFyIHJlZ2lzdHJ5ID0ge30sIHNlZW4gPSB7fTsKCiAg
        ZGVmaW5lID0gZnVuY3Rpb24obmFtZSwgZGVwcywgY2FsbGJhY2spIHsKICAg
        IHJlZ2lzdHJ5W25hbWVdID0geyBkZXBzOiBkZXBzLCBjYWxsYmFjazogY2Fs
        bGJhY2sgfTsKICB9OwoKICByZXF1aXJlTW9kdWxlID0gZnVuY3Rpb24obmFt
        ZSkgewogICAgaWYgKHNlZW5bbmFtZV0pIHsgcmV0dXJuIHNlZW5bbmFtZV07
        IH0KICAgIHNlZW5bbmFtZV0gPSB7fTsKCiAgICB2YXIgbW9kLCBkZXBzLCBj
        YWxsYmFjaywgcmVpZmllZCAsIGV4cG9ydHM7CgogICAgbW9kID0gcmVnaXN0
        cnlbbmFtZV07CgogICAgaWYgKCFtb2QpIHsKICAgICAgdGhyb3cgbmV3IEVy
        cm9yKCJNb2R1bGUgJyIgKyBuYW1lICsgIicgbm90IGZvdW5kLiIpOwogICAg
        fQoKICAgIGRlcHMgPSBtb2QuZGVwczsKICAgIGNhbGxiYWNrID0gbW9kLmNh
        bGxiYWNrOwogICAgcmVpZmllZCA9IFtdOwogICAgZXhwb3J0czsKCiAgICBm
        b3IgKHZhciBpPTAsIGw9ZGVwcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAg
        IGlmIChkZXBzW2ldID09PSAnZXhwb3J0cycpIHsKICAgICAgICByZWlmaWVk
        LnB1c2goZXhwb3J0cyA9IHt9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBy
        ZWlmaWVkLnB1c2gocmVxdWlyZU1vZHVsZShkZXBzW2ldKSk7CiAgICAgIH0K
        ICAgIH0KCiAgICB2YXIgdmFsdWUgPSBjYWxsYmFjay5hcHBseSh0aGlzLCBy
        ZWlmaWVkKTsKICAgIHJldHVybiBzZWVuW25hbWVdID0gZXhwb3J0cyB8fCB2
        YWx1ZTsKICB9Owp9KSgpOwooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUg
        ZW1iZXItZGF0YQoqLwoKLyoqCiAgQWxsIEVtYmVyIERhdGEgbWV0aG9kcyBh
        bmQgZnVuY3Rpb25zIGFyZSBkZWZpbmVkIGluc2lkZSBvZiB0aGlzIG5hbWVz
        cGFjZS4KCiAgQGNsYXNzIERTCiAgQHN0YXRpYwoqLwp2YXIgRFM7CmlmICgn
        dW5kZWZpbmVkJyA9PT0gdHlwZW9mIERTKSB7CiAgRFMgPSBFbWJlci5OYW1l
        c3BhY2UuY3JlYXRlKHsKICAgIFZFUlNJT046ICcxLjAuMC1iZXRhLjQrY2Fu
        YXJ5LmMxNWI4ZjgwJwogIH0pOwoKICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5
        cGVvZiB3aW5kb3cpIHsKICAgIHdpbmRvdy5EUyA9IERTOwogIH0KCiAgaWYg
        KEVtYmVyLmxpYnJhcmllcykgewogICAgRW1iZXIubGlicmFyaWVzLnJlZ2lz
        dGVyQ29yZUxpYnJhcnkoJ0VtYmVyIERhdGEnLCBEUy5WRVJTSU9OKTsKICB9
        Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0LCBpc05vbmUgPSBFbWJlci5pc05vbmU7Cgov
        LyBTaW1wbGUgZGlzcGF0Y2hlciB0byBzdXBwb3J0IG92ZXJyaWRpbmcgdGhl
        IGFsaWFzZWQKLy8gbWV0aG9kIGluIHN1YmNsYXNzZXMuCmZ1bmN0aW9uIGFs
        aWFzTWV0aG9kKG1ldGhvZE5hbWUpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7
        CiAgICByZXR1cm4gdGhpc1ttZXRob2ROYW1lXS5hcHBseSh0aGlzLCBhcmd1
        bWVudHMpOwogIH07Cn0KCkRTLkpTT05TZXJpYWxpemVyID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgcHJpbWFyeUtleTogJ2lkJywKCiAgYXBwbHlUcmFu
        c2Zvcm1zOiBmdW5jdGlvbih0eXBlLCBkYXRhKSB7CiAgICB0eXBlLmVhY2hU
        cmFuc2Zvcm1lZEF0dHJpYnV0ZShmdW5jdGlvbihrZXksIHR5cGUpIHsKICAg
        ICAgdmFyIHRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtRm9yKHR5cGUpOwog
        ICAgICBkYXRhW2tleV0gPSB0cmFuc2Zvcm0uZGVzZXJpYWxpemUoZGF0YVtr
        ZXldKTsKICAgIH0sIHRoaXMpOwoKICAgIHJldHVybiBkYXRhOwogIH0sCgog
        IG5vcm1hbGl6ZTogZnVuY3Rpb24odHlwZSwgaGFzaCkgewogICAgaWYgKCFo
        YXNoKSB7IHJldHVybiBoYXNoOyB9CgogICAgdGhpcy5hcHBseVRyYW5zZm9y
        bXModHlwZSwgaGFzaCk7CiAgICByZXR1cm4gaGFzaDsKICB9LAoKICAvLyBT
        RVJJQUxJWkUKCiAgc2VyaWFsaXplOiBmdW5jdGlvbihyZWNvcmQsIG9wdGlv
        bnMpIHsKICAgIHZhciBqc29uID0ge307CgogICAgaWYgKG9wdGlvbnMgJiYg
        b3B0aW9ucy5pbmNsdWRlSWQpIHsKICAgICAgdmFyIGlkID0gZ2V0KHJlY29y
        ZCwgJ2lkJyk7CgogICAgICBpZiAoaWQpIHsKICAgICAgICBqc29uW2dldCh0
        aGlzLCAncHJpbWFyeUtleScpXSA9IGdldChyZWNvcmQsICdpZCcpOwogICAg
        ICB9CiAgICB9CgogICAgcmVjb3JkLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24o
        a2V5LCBhdHRyaWJ1dGUpIHsKICAgICAgdGhpcy5zZXJpYWxpemVBdHRyaWJ1
        dGUocmVjb3JkLCBqc29uLCBrZXksIGF0dHJpYnV0ZSk7CiAgICB9LCB0aGlz
        KTsKCiAgICByZWNvcmQuZWFjaFJlbGF0aW9uc2hpcChmdW5jdGlvbihrZXks
        IHJlbGF0aW9uc2hpcCkgewogICAgICBpZiAocmVsYXRpb25zaGlwLmtpbmQg
        PT09ICdiZWxvbmdzVG8nKSB7CiAgICAgICAgdGhpcy5zZXJpYWxpemVCZWxv
        bmdzVG8ocmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApOwogICAgICB9IGVs
        c2UgaWYgKHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAg
        ICAgICB0aGlzLnNlcmlhbGl6ZUhhc01hbnkocmVjb3JkLCBqc29uLCByZWxh
        dGlvbnNoaXApOwogICAgICB9CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4g
        anNvbjsKICB9LAoKICBzZXJpYWxpemVBdHRyaWJ1dGU6IGZ1bmN0aW9uKHJl
        Y29yZCwganNvbiwga2V5LCBhdHRyaWJ1dGUpIHsKICAgIHZhciBhdHRycyA9
        IGdldCh0aGlzLCAnYXR0cnMnKTsKICAgIHZhciB2YWx1ZSA9IGdldChyZWNv
        cmQsIGtleSksIHR5cGUgPSBhdHRyaWJ1dGUudHlwZTsKCiAgICBpZiAodHlw
        ZSkgewogICAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm1Gb3Io
        dHlwZSk7CiAgICAgIHZhbHVlID0gdHJhbnNmb3JtLnNlcmlhbGl6ZSh2YWx1
        ZSk7CiAgICB9CgogICAgLy8gaWYgcHJvdmlkZWQsIHVzZSB0aGUgbWFwcGlu
        ZyBwcm92aWRlZCBieSBgYXR0cnNgIGluCiAgICAvLyB0aGUgc2VyaWFsaXpl
        cgogICAga2V5ID0gYXR0cnMgJiYgYXR0cnNba2V5XSB8fCAodGhpcy5rZXlG
        b3JBdHRyaWJ1dGUgPyB0aGlzLmtleUZvckF0dHJpYnV0ZShrZXkpIDoga2V5
        KTsKCiAgICBqc29uW2tleV0gPSB2YWx1ZTsKICB9LAoKICBzZXJpYWxpemVC
        ZWxvbmdzVG86IGZ1bmN0aW9uKHJlY29yZCwganNvbiwgcmVsYXRpb25zaGlw
        KSB7CiAgICB2YXIga2V5ID0gcmVsYXRpb25zaGlwLmtleTsKCiAgICB2YXIg
        YmVsb25nc1RvID0gZ2V0KHJlY29yZCwga2V5KTsKCiAgICBrZXkgPSB0aGlz
        LmtleUZvclJlbGF0aW9uc2hpcCA/IHRoaXMua2V5Rm9yUmVsYXRpb25zaGlw
        KGtleSwgImJlbG9uZ3NUbyIpIDoga2V5OwoKICAgIGlmIChpc05vbmUoYmVs
        b25nc1RvKSkgewogICAgICBqc29uW2tleV0gPSBiZWxvbmdzVG87CiAgICB9
        IGVsc2UgewogICAgICBqc29uW2tleV0gPSBnZXQoYmVsb25nc1RvLCAnaWQn
        KTsKICAgIH0KCiAgICBpZiAocmVsYXRpb25zaGlwLm9wdGlvbnMucG9seW1v
        cnBoaWMpIHsKICAgICAgdGhpcy5zZXJpYWxpemVQb2x5bW9ycGhpY1R5cGUo
        cmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApOwogICAgfQogIH0sCgogIHNl
        cmlhbGl6ZUhhc01hbnk6IGZ1bmN0aW9uKHJlY29yZCwganNvbiwgcmVsYXRp
        b25zaGlwKSB7CiAgICB2YXIga2V5ID0gcmVsYXRpb25zaGlwLmtleTsKCiAg
        ICB2YXIgcmVsYXRpb25zaGlwVHlwZSA9IERTLlJlbGF0aW9uc2hpcENoYW5n
        ZS5kZXRlcm1pbmVSZWxhdGlvbnNoaXBUeXBlKHJlY29yZC5jb25zdHJ1Y3Rv
        ciwgcmVsYXRpb25zaGlwKTsKCiAgICBpZiAocmVsYXRpb25zaGlwVHlwZSA9
        PT0gJ21hbnlUb05vbmUnIHx8IHJlbGF0aW9uc2hpcFR5cGUgPT09ICdtYW55
        VG9NYW55JykgewogICAgICBqc29uW2tleV0gPSBnZXQocmVjb3JkLCBrZXkp
        Lm1hcEJ5KCdpZCcpOwogICAgICAvLyBUT0RPIHN1cHBvcnQgZm9yIHBvbHlt
        b3JwaGljIG1hbnlUb05vbmUgYW5kIG1hbnlUb01hbnkgcmVsYXRpb25zaGlw
        cwogICAgfQogIH0sCgogIC8qKgogICAgWW91IGNhbiB1c2UgdGhpcyBtZXRo
        b2QgdG8gY3VzdG9taXplIGhvdyBwb2x5bW9ycGhpYyBvYmplY3RzIGFyZSBz
        ZXJpYWxpemVkLgoKICAgIEBtZXRob2Qgc2VyaWFsaXplUG9seW1vcnBoaWNU
        eXBlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAgIEBwYXJhbSB7
        T2JqZWN0fSBqc29uCiAgICBAcGFyYW0gcmVsYXRpb25zaGlwCiAgKi8KICBz
        ZXJpYWxpemVQb2x5bW9ycGhpY1R5cGU6IEVtYmVyLkssCgogIC8vIEVYVFJB
        Q1QKCiAgZXh0cmFjdDogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQs
        IGlkLCByZXF1ZXN0VHlwZSkgewogICAgdGhpcy5leHRyYWN0TWV0YShzdG9y
        ZSwgdHlwZSwgcGF5bG9hZCk7CgogICAgdmFyIHNwZWNpZmljRXh0cmFjdCA9
        ICJleHRyYWN0IiArIHJlcXVlc3RUeXBlLmNoYXJBdCgwKS50b1VwcGVyQ2Fz
        ZSgpICsgcmVxdWVzdFR5cGUuc3Vic3RyKDEpOwogICAgcmV0dXJuIHRoaXNb
        c3BlY2lmaWNFeHRyYWN0XShzdG9yZSwgdHlwZSwgcGF5bG9hZCwgaWQsIHJl
        cXVlc3RUeXBlKTsKICB9LAoKICBleHRyYWN0RmluZEFsbDogYWxpYXNNZXRo
        b2QoJ2V4dHJhY3RBcnJheScpLAogIGV4dHJhY3RGaW5kUXVlcnk6IGFsaWFz
        TWV0aG9kKCdleHRyYWN0QXJyYXknKSwKICBleHRyYWN0RmluZE1hbnk6IGFs
        aWFzTWV0aG9kKCdleHRyYWN0QXJyYXknKSwKICBleHRyYWN0RmluZEhhc01h
        bnk6IGFsaWFzTWV0aG9kKCdleHRyYWN0QXJyYXknKSwKCiAgZXh0cmFjdENy
        ZWF0ZVJlY29yZDogYWxpYXNNZXRob2QoJ2V4dHJhY3RTYXZlJyksCiAgZXh0
        cmFjdFVwZGF0ZVJlY29yZDogYWxpYXNNZXRob2QoJ2V4dHJhY3RTYXZlJyks
        CiAgZXh0cmFjdERlbGV0ZVJlY29yZDogYWxpYXNNZXRob2QoJ2V4dHJhY3RT
        YXZlJyksCgogIGV4dHJhY3RGaW5kOiBhbGlhc01ldGhvZCgnZXh0cmFjdFNp
        bmdsZScpLAogIGV4dHJhY3RGaW5kQmVsb25nc1RvOiBhbGlhc01ldGhvZCgn
        ZXh0cmFjdFNpbmdsZScpLAogIGV4dHJhY3RTYXZlOiBhbGlhc01ldGhvZCgn
        ZXh0cmFjdFNpbmdsZScpLAoKICBleHRyYWN0U2luZ2xlOiBmdW5jdGlvbihz
        dG9yZSwgdHlwZSwgcGF5bG9hZCkgewogICAgcmV0dXJuIHRoaXMubm9ybWFs
        aXplKHR5cGUsIHBheWxvYWQpOwogIH0sCgogIGV4dHJhY3RBcnJheTogZnVu
        Y3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQpIHsKICAgIHJldHVybiB0aGlz
        Lm5vcm1hbGl6ZSh0eXBlLCBwYXlsb2FkKTsKICB9LAoKICBleHRyYWN0TWV0
        YTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQpIHsKICAgIGlmIChw
        YXlsb2FkICYmIHBheWxvYWQubWV0YSkgewogICAgICBzdG9yZS5tZXRhRm9y
        VHlwZSh0eXBlLCBwYXlsb2FkLm1ldGEpOwogICAgICBkZWxldGUgcGF5bG9h
        ZC5tZXRhOwogICAgfQogIH0sCgogIC8vIEhFTFBFUlMKCiAgdHJhbnNmb3Jt
        Rm9yOiBmdW5jdGlvbihhdHRyaWJ1dGVUeXBlLCBza2lwQXNzZXJ0aW9uKSB7
        CiAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5jb250YWluZXIubG9va3VwKCd0
        cmFuc2Zvcm06JyArIGF0dHJpYnV0ZVR5cGUpOwogICAgRW1iZXIuYXNzZXJ0
        KCJVbmFibGUgdG8gZmluZCB0cmFuc2Zvcm0gZm9yICciICsgYXR0cmlidXRl
        VHlwZSArICInIiwgc2tpcEFzc2VydGlvbiB8fCAhIXRyYW5zZm9ybSk7CiAg
        ICByZXR1cm4gdHJhbnNmb3JtOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwp2YXIgZ2V0ID0g
        RW1iZXIuZ2V0LCBjYXBpdGFsaXplID0gRW1iZXIuU3RyaW5nLmNhcGl0YWxp
        emUsIHVuZGVyc2NvcmUgPSBFbWJlci5TdHJpbmcudW5kZXJzY29yZSwgRFMg
        PSB3aW5kb3cuRFMgOwoKLyoqCiAgRXh0ZW5kIGBFbWJlci5EYXRhQWRhcHRl
        cmAgd2l0aCBFRCBzcGVjaWZpYyBjb2RlLgoKICBAY2xhc3MgRGVidWdBZGFw
        dGVyCiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRzIEVtYmVyLkRhdGFBZGFw
        dGVyCiAgQHByaXZhdGUKKi8KRFMuRGVidWdBZGFwdGVyID0gRW1iZXIuRGF0
        YUFkYXB0ZXIuZXh0ZW5kKHsKICBnZXRGaWx0ZXJzOiBmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiBbCiAgICAgIHsgbmFtZTogJ2lzTmV3JywgZGVzYzogJ05l
        dycgfSwKICAgICAgeyBuYW1lOiAnaXNNb2RpZmllZCcsIGRlc2M6ICdNb2Rp
        ZmllZCcgfSwKICAgICAgeyBuYW1lOiAnaXNDbGVhbicsIGRlc2M6ICdDbGVh
        bicgfQogICAgXTsKICB9LAoKICBkZXRlY3Q6IGZ1bmN0aW9uKGtsYXNzKSB7
        CiAgICByZXR1cm4ga2xhc3MgIT09IERTLk1vZGVsICYmIERTLk1vZGVsLmRl
        dGVjdChrbGFzcyk7CiAgfSwKCiAgY29sdW1uc0ZvclR5cGU6IGZ1bmN0aW9u
        KHR5cGUpIHsKICAgIHZhciBjb2x1bW5zID0gW3sgbmFtZTogJ2lkJywgZGVz
        YzogJ0lkJyB9XSwgY291bnQgPSAwLCBzZWxmID0gdGhpczsKICAgIGdldCh0
        eXBlLCAnYXR0cmlidXRlcycpLmZvckVhY2goZnVuY3Rpb24obmFtZSwgbWV0
        YSkgewogICAgICAgIGlmIChjb3VudCsrID4gc2VsZi5hdHRyaWJ1dGVMaW1p
        dCkgeyByZXR1cm4gZmFsc2U7IH0KICAgICAgICB2YXIgZGVzYyA9IGNhcGl0
        YWxpemUodW5kZXJzY29yZShuYW1lKS5yZXBsYWNlKCdfJywgJyAnKSk7CiAg
        ICAgICAgY29sdW1ucy5wdXNoKHsgbmFtZTogbmFtZSwgZGVzYzogZGVzYyB9
        KTsKICAgIH0pOwogICAgcmV0dXJuIGNvbHVtbnM7CiAgfSwKCiAgZ2V0UmVj
        b3JkczogZnVuY3Rpb24odHlwZSkgewogICAgcmV0dXJuIHRoaXMuZ2V0KCdz
        dG9yZScpLmFsbCh0eXBlKTsKICB9LAoKICBnZXRSZWNvcmRDb2x1bW5WYWx1
        ZXM6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgdmFyIHNlbGYgPSB0aGlzLCBj
        b3VudCA9IDAsCiAgICAgICAgY29sdW1uVmFsdWVzID0geyBpZDogZ2V0KHJl
        Y29yZCwgJ2lkJykgfTsKCiAgICByZWNvcmQuZWFjaEF0dHJpYnV0ZShmdW5j
        dGlvbihrZXkpIHsKICAgICAgaWYgKGNvdW50KysgPiBzZWxmLmF0dHJpYnV0
        ZUxpbWl0KSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAg
        IHZhciB2YWx1ZSA9IGdldChyZWNvcmQsIGtleSk7CiAgICAgIGNvbHVtblZh
        bHVlc1trZXldID0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiBjb2x1bW5W
        YWx1ZXM7CiAgfSwKCiAgZ2V0UmVjb3JkS2V5d29yZHM6IGZ1bmN0aW9uKHJl
        Y29yZCkgewogICAgdmFyIGtleXdvcmRzID0gW10sIGtleXMgPSBFbWJlci5B
        KFsnaWQnXSk7CiAgICByZWNvcmQuZWFjaEF0dHJpYnV0ZShmdW5jdGlvbihr
        ZXkpIHsKICAgICAga2V5cy5wdXNoKGtleSk7CiAgICB9KTsKICAgIGtleXMu
        Zm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAga2V5d29yZHMucHVzaChn
        ZXQocmVjb3JkLCBrZXkpKTsKICAgIH0pOwogICAgcmV0dXJuIGtleXdvcmRz
        OwogIH0sCgogIGdldFJlY29yZEZpbHRlclZhbHVlczogZnVuY3Rpb24ocmVj
        b3JkKSB7CiAgICByZXR1cm4gewogICAgICBpc05ldzogcmVjb3JkLmdldCgn
        aXNOZXcnKSwKICAgICAgaXNNb2RpZmllZDogcmVjb3JkLmdldCgnaXNEaXJ0
        eScpICYmICFyZWNvcmQuZ2V0KCdpc05ldycpLAogICAgICBpc0NsZWFuOiAh
        cmVjb3JkLmdldCgnaXNEaXJ0eScpCiAgICB9OwogIH0sCgogIGdldFJlY29y
        ZENvbG9yOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHZhciBjb2xvciA9ICdi
        bGFjayc7CiAgICBpZiAocmVjb3JkLmdldCgnaXNOZXcnKSkgewogICAgICBj
        b2xvciA9ICdncmVlbic7CiAgICB9IGVsc2UgaWYgKHJlY29yZC5nZXQoJ2lz
        RGlydHknKSkgewogICAgICBjb2xvciA9ICdibHVlJzsKICAgIH0KICAgIHJl
        dHVybiBjb2xvcjsKICB9LAoKICBvYnNlcnZlUmVjb3JkOiBmdW5jdGlvbihy
        ZWNvcmQsIHJlY29yZFVwZGF0ZWQpIHsKICAgIHZhciByZWxlYXNlTWV0aG9k
        cyA9IEVtYmVyLkEoKSwgc2VsZiA9IHRoaXMsCiAgICAgICAga2V5c1RvT2Jz
        ZXJ2ZSA9IEVtYmVyLkEoWydpZCcsICdpc05ldycsICdpc0RpcnR5J10pOwoK
        ICAgIHJlY29yZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKGtleSkgewogICAg
        ICBrZXlzVG9PYnNlcnZlLnB1c2goa2V5KTsKICAgIH0pOwoKICAgIGtleXNU
        b09ic2VydmUuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGhh
        bmRsZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICByZWNvcmRVcGRhdGVkKHNl
        bGYud3JhcFJlY29yZChyZWNvcmQpKTsKICAgICAgfTsKICAgICAgRW1iZXIu
        YWRkT2JzZXJ2ZXIocmVjb3JkLCBrZXksIGhhbmRsZXIpOwogICAgICByZWxl
        YXNlTWV0aG9kcy5wdXNoKGZ1bmN0aW9uKCkgewogICAgICAgIEVtYmVyLnJl
        bW92ZU9ic2VydmVyKHJlY29yZCwga2V5LCBoYW5kbGVyKTsKICAgICAgfSk7
        CiAgICB9KTsKCiAgICB2YXIgcmVsZWFzZSA9IGZ1bmN0aW9uKCkgewogICAg
        ICByZWxlYXNlTWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7IGZuKCk7
        IH0gKTsKICAgIH07CgogICAgcmV0dXJuIHJlbGVhc2U7CiAgfQoKfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7CkRTLlRyYW5zZm9ybSA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewoKICBzZXJpYWxpemU6IEVtYmVyLnJlcXVpcmVkKCks
        CiAgCiAgZGVzZXJpYWxpemU6IEVtYmVyLnJlcXVpcmVkKCkKCn0pOwp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7CgpEUy5Cb29sZWFuVHJhbnNmb3JtID0gRFMu
        VHJhbnNmb3JtLmV4dGVuZCh7CiAgZGVzZXJpYWxpemU6IGZ1bmN0aW9uKHNl
        cmlhbGl6ZWQpIHsKICAgIHZhciB0eXBlID0gdHlwZW9mIHNlcmlhbGl6ZWQ7
        CgogICAgaWYgKHR5cGUgPT09ICJib29sZWFuIikgewogICAgICByZXR1cm4g
        c2VyaWFsaXplZDsKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInN0cmluZyIp
        IHsKICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQubWF0Y2goL150cnVlJHxedCR8
        XjEkL2kpICE9PSBudWxsOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAibnVt
        YmVyIikgewogICAgICByZXR1cm4gc2VyaWFsaXplZCA9PT0gMTsKICAgIH0g
        ZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAoKICBzZXJp
        YWxpemU6IGZ1bmN0aW9uKGRlc2VyaWFsaXplZCkgewogICAgcmV0dXJuIEJv
        b2xlYW4oZGVzZXJpYWxpemVkKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewpEUy5EYXRlVHJhbnNmb3JtID0gRFMuVHJhbnNmb3JtLmV4dGVu
        ZCh7CgogIGRlc2VyaWFsaXplOiBmdW5jdGlvbihzZXJpYWxpemVkKSB7CiAg
        ICB2YXIgdHlwZSA9IHR5cGVvZiBzZXJpYWxpemVkOwoKICAgIGlmICh0eXBl
        ID09PSAic3RyaW5nIikgewogICAgICByZXR1cm4gbmV3IERhdGUoRW1iZXIu
        RGF0ZS5wYXJzZShzZXJpYWxpemVkKSk7CiAgICB9IGVsc2UgaWYgKHR5cGUg
        PT09ICJudW1iZXIiKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShzZXJpYWxp
        emVkKTsKICAgIH0gZWxzZSBpZiAoc2VyaWFsaXplZCA9PT0gbnVsbCB8fCBz
        ZXJpYWxpemVkID09PSB1bmRlZmluZWQpIHsKICAgICAgLy8gaWYgdGhlIHZh
        bHVlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBkYXRhLAogICAgICAvLyByZXR1
        cm4gdW5kZWZpbmVkLCBub3QgbnVsbC4KICAgICAgcmV0dXJuIHNlcmlhbGl6
        ZWQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9
        LAoKICBzZXJpYWxpemU6IGZ1bmN0aW9uKGRhdGUpIHsKICAgIGlmIChkYXRl
        IGluc3RhbmNlb2YgRGF0ZSkgewogICAgICB2YXIgZGF5cyA9IFsiU3VuIiwg
        Ik1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il07CiAg
        ICAgIHZhciBtb250aHMgPSBbIkphbiIsICJGZWIiLCAiTWFyIiwgIkFwciIs
        ICJNYXkiLCAiSnVuIiwgIkp1bCIsICJBdWciLCAiU2VwIiwgIk9jdCIsICJO
        b3YiLCAiRGVjIl07CgogICAgICB2YXIgcGFkID0gZnVuY3Rpb24obnVtKSB7
        CiAgICAgICAgcmV0dXJuIG51bSA8IDEwID8gIjAiK251bSA6ICIiK251bTsK
        ICAgICAgfTsKCiAgICAgIHZhciB1dGNZZWFyID0gZGF0ZS5nZXRVVENGdWxs
        WWVhcigpLAogICAgICAgICAgdXRjTW9udGggPSBkYXRlLmdldFVUQ01vbnRo
        KCksCiAgICAgICAgICB1dGNEYXlPZk1vbnRoID0gZGF0ZS5nZXRVVENEYXRl
        KCksCiAgICAgICAgICB1dGNEYXkgPSBkYXRlLmdldFVUQ0RheSgpLAogICAg
        ICAgICAgdXRjSG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCksCiAgICAgICAg
        ICB1dGNNaW51dGVzID0gZGF0ZS5nZXRVVENNaW51dGVzKCksCiAgICAgICAg
        ICB1dGNTZWNvbmRzID0gZGF0ZS5nZXRVVENTZWNvbmRzKCk7CgoKICAgICAg
        dmFyIGRheU9mV2VlayA9IGRheXNbdXRjRGF5XTsKICAgICAgdmFyIGRheU9m
        TW9udGggPSBwYWQodXRjRGF5T2ZNb250aCk7CiAgICAgIHZhciBtb250aCA9
        IG1vbnRoc1t1dGNNb250aF07CgogICAgICByZXR1cm4gZGF5T2ZXZWVrICsg
        IiwgIiArIGRheU9mTW9udGggKyAiICIgKyBtb250aCArICIgIiArIHV0Y1ll
        YXIgKyAiICIgKwogICAgICAgICAgICAgcGFkKHV0Y0hvdXJzKSArICI6IiAr
        IHBhZCh1dGNNaW51dGVzKSArICI6IiArIHBhZCh1dGNTZWNvbmRzKSArICIg
        R01UIjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQog
        IH0gCgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGVtcHR5ID0g
        RW1iZXIuaXNFbXB0eTsKCkRTLk51bWJlclRyYW5zZm9ybSA9IERTLlRyYW5z
        Zm9ybS5leHRlbmQoewoKICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24oc2VyaWFs
        aXplZCkgewogICAgcmV0dXJuIGVtcHR5KHNlcmlhbGl6ZWQpID8gbnVsbCA6
        IE51bWJlcihzZXJpYWxpemVkKTsKICB9LAoKICBzZXJpYWxpemU6IGZ1bmN0
        aW9uKGRlc2VyaWFsaXplZCkgewogICAgcmV0dXJuIGVtcHR5KGRlc2VyaWFs
        aXplZCkgPyBudWxsIDogTnVtYmVyKGRlc2VyaWFsaXplZCk7CiAgfQp9KTsK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgbm9uZSA9IEVtYmVyLmlzTm9u
        ZTsKCkRTLlN0cmluZ1RyYW5zZm9ybSA9IERTLlRyYW5zZm9ybS5leHRlbmQo
        ewoKICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24oc2VyaWFsaXplZCkgewogICAg
        cmV0dXJuIG5vbmUoc2VyaWFsaXplZCkgPyBudWxsIDogU3RyaW5nKHNlcmlh
        bGl6ZWQpOwogIH0sCgogIHNlcmlhbGl6ZTogZnVuY3Rpb24oZGVzZXJpYWxp
        emVkKSB7CiAgICByZXR1cm4gbm9uZShkZXNlcmlhbGl6ZWQpID8gbnVsbCA6
        IFN0cmluZyhkZXNlcmlhbGl6ZWQpOwogIH0KCn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9k
        dWxlIGVtYmVyLWRhdGEKKi8KCnZhciBzZXQgPSBFbWJlci5zZXQ7CgovKgog
        IFRoaXMgY29kZSByZWdpc3RlcnMgYW4gaW5qZWN0aW9uIGZvciBFbWJlci5B
        cHBsaWNhdGlvbi4KCiAgSWYgYW4gRW1iZXIuanMgZGV2ZWxvcGVyIGRlZmlu
        ZXMgYSBzdWJjbGFzcyBvZiBEUy5TdG9yZSBvbiB0aGVpciBhcHBsaWNhdGlv
        biwKICB0aGlzIGNvZGUgd2lsbCBhdXRvbWF0aWNhbGx5IGluc3RhbnRpYXRl
        IGl0IGFuZCBtYWtlIGl0IGF2YWlsYWJsZSBvbiB0aGUKICByb3V0ZXIuCgog
        IEFkZGl0aW9uYWxseSwgYWZ0ZXIgYW4gYXBwbGljYXRpb24ncyBjb250cm9s
        bGVycyBoYXZlIGJlZW4gaW5qZWN0ZWQsIHRoZXkgd2lsbAogIGVhY2ggaGF2
        ZSB0aGUgc3RvcmUgbWFkZSBhdmFpbGFibGUgdG8gdGhlbS4KCiAgRm9yIGV4
        YW1wbGUsIGltYWdpbmUgYW4gRW1iZXIuanMgYXBwbGljYXRpb24gd2l0aCB0
        aGUgZm9sbG93aW5nIGNsYXNzZXM6CgogIEFwcC5TdG9yZSA9IERTLlN0b3Jl
        LmV4dGVuZCh7CiAgICBhZGFwdGVyOiAnY3VzdG9tJwogIH0pOwoKICBBcHAu
        UG9zdHNDb250cm9sbGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVyLmV4dGVu
        ZCh7CiAgICAvLyAuLi4KICB9KTsKCiAgV2hlbiB0aGUgYXBwbGljYXRpb24g
        aXMgaW5pdGlhbGl6ZWQsIGBBcHAuU3RvcmVgIHdpbGwgYXV0b21hdGljYWxs
        eSBiZQogIGluc3RhbnRpYXRlZCwgYW5kIHRoZSBpbnN0YW5jZSBvZiBgQXBw
        LlBvc3RzQ29udHJvbGxlcmAgd2lsbCBoYXZlIGl0cyBgc3RvcmVgCiAgcHJv
        cGVydHkgc2V0IHRvIHRoYXQgaW5zdGFuY2UuCgogIE5vdGUgdGhhdCB0aGlz
        IGNvZGUgd2lsbCBvbmx5IGJlIHJ1biBpZiB0aGUgYGVtYmVyLWFwcGxpY2F0
        aW9uYCBwYWNrYWdlIGlzCiAgbG9hZGVkLiBJZiBFbWJlciBEYXRhIGlzIGJl
        aW5nIHVzZWQgaW4gYW4gZW52aXJvbm1lbnQgb3RoZXIgdGhhbiBhCiAgdHlw
        aWNhbCBhcHBsaWNhdGlvbiAoZS5nLiwgbm9kZS5qcyB3aGVyZSBvbmx5IGBl
        bWJlci1ydW50aW1lYCBpcyBhdmFpbGFibGUpLAogIHRoaXMgY29kZSB3aWxs
        IGJlIGlnbm9yZWQuCiovCgpFbWJlci5vbkxvYWQoJ0VtYmVyLkFwcGxpY2F0
        aW9uJywgZnVuY3Rpb24oQXBwbGljYXRpb24pIHsKICBBcHBsaWNhdGlvbi5p
        bml0aWFsaXplcih7CiAgICBuYW1lOiAic3RvcmUiLAoKICAgIGluaXRpYWxp
        emU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXBwbGljYXRpb24pIHsKICAgICAg
        YXBwbGljYXRpb24ucmVnaXN0ZXIoJ3N0b3JlOm1haW4nLCBhcHBsaWNhdGlv
        bi5TdG9yZSB8fCBEUy5TdG9yZSk7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lz
        dGVyKCdzZXJpYWxpemVyOl9kZWZhdWx0JywgRFMuSlNPTlNlcmlhbGl6ZXIp
        OwogICAgICBhcHBsaWNhdGlvbi5yZWdpc3Rlcignc2VyaWFsaXplcjpfcmVz
        dCcsIERTLlJFU1RTZXJpYWxpemVyKTsKICAgICAgYXBwbGljYXRpb24ucmVn
        aXN0ZXIoJ2FkYXB0ZXI6X3Jlc3QnLCBEUy5SRVNUQWRhcHRlcik7CgogICAg
        ICAvLyBFYWdlcmx5IGdlbmVyYXRlIHRoZSBzdG9yZSBzbyBkZWZhdWx0U3Rv
        cmUgaXMgcG9wdWxhdGVkLgogICAgICAvLyBUT0RPOiBEbyB0aGlzIGluIGEg
        ZmluaXNoZXIgaG9vawogICAgICBjb250YWluZXIubG9va3VwKCdzdG9yZTpt
        YWluJyk7CiAgICB9CiAgfSk7CgogIEFwcGxpY2F0aW9uLmluaXRpYWxpemVy
        KHsKICAgIG5hbWU6ICJ0cmFuc2Zvcm1zIiwKCiAgICBpbml0aWFsaXplOiBm
        dW5jdGlvbihjb250YWluZXIsIGFwcGxpY2F0aW9uKSB7CiAgICAgIGFwcGxp
        Y2F0aW9uLnJlZ2lzdGVyKCd0cmFuc2Zvcm06Ym9vbGVhbicsIERTLkJvb2xl
        YW5UcmFuc2Zvcm0pOwogICAgICBhcHBsaWNhdGlvbi5yZWdpc3RlcigndHJh
        bnNmb3JtOmRhdGUnLCBEUy5EYXRlVHJhbnNmb3JtKTsKICAgICAgYXBwbGlj
        YXRpb24ucmVnaXN0ZXIoJ3RyYW5zZm9ybTpudW1iZXInLCBEUy5OdW1iZXJU
        cmFuc2Zvcm0pOwogICAgICBhcHBsaWNhdGlvbi5yZWdpc3RlcigndHJhbnNm
        b3JtOnN0cmluZycsIERTLlN0cmluZ1RyYW5zZm9ybSk7CiAgICB9CiAgfSk7
        CgogIEFwcGxpY2F0aW9uLmluaXRpYWxpemVyKHsKICAgIG5hbWU6ICJkYXRh
        QWRhcHRlciIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY29udGFpbmVy
        LCBhcHBsaWNhdGlvbikgewogICAgICBhcHBsaWNhdGlvbi5yZWdpc3Rlcign
        ZGF0YUFkYXB0ZXI6bWFpbicsIERTLkRlYnVnQWRhcHRlcik7CiAgICB9CiAg
        fSk7CgogIEFwcGxpY2F0aW9uLmluaXRpYWxpemVyKHsKICAgIG5hbWU6ICJp
        bmplY3RTdG9yZSIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY29udGFp
        bmVyLCBhcHBsaWNhdGlvbikgewogICAgICBhcHBsaWNhdGlvbi5pbmplY3Qo
        J2NvbnRyb2xsZXInLCAnc3RvcmUnLCAnc3RvcmU6bWFpbicpOwogICAgICBh
        cHBsaWNhdGlvbi5pbmplY3QoJ3JvdXRlJywgJ3N0b3JlJywgJ3N0b3JlOm1h
        aW4nKTsKICAgICAgYXBwbGljYXRpb24uaW5qZWN0KCdzZXJpYWxpemVyJywg
        J3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKICAgICAgYXBwbGljYXRpb24uaW5q
        ZWN0KCdkYXRhQWRhcHRlcicsICdzdG9yZScsICdzdG9yZTptYWluJyk7CiAg
        ICB9CiAgfSk7Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAg
        QG1vZHVsZSBlbWJlci1kYXRhCiovCgovKioKICBEYXRlLnBhcnNlIHdpdGgg
        cHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQgZm9yIElTTyA4NjAxIDxodHRwczov
        L2dpdGh1Yi5jb20vY3Nub3Zlci9qcy1pc284NjAxPgoKICDCqSAyMDExIENv
        bGluIFNub3ZlciA8aHR0cDovL3pldGFmbGVldC5jb20+CgogIFJlbGVhc2Vk
        IHVuZGVyIE1JVCBsaWNlbnNlLgoKICBAY2xhc3MgRGF0ZQogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAc3RhdGljCiovCkVtYmVyLkRhdGUgPSBFbWJlci5EYXRl
        IHx8IHt9OwoKdmFyIG9yaWdQYXJzZSA9IERhdGUucGFyc2UsIG51bWVyaWNL
        ZXlzID0gWyAxLCA0LCA1LCA2LCA3LCAxMCwgMTEgXTsKCi8qKgogIEBtZXRo
        b2QgcGFyc2UKICBAcGFyYW0gZGF0ZQoqLwpFbWJlci5EYXRlLnBhcnNlID0g
        ZnVuY3Rpb24gKGRhdGUpIHsKICAgIHZhciB0aW1lc3RhbXAsIHN0cnVjdCwg
        bWludXRlc09mZnNldCA9IDA7CgogICAgLy8gRVM1IMKnMTUuOS40LjIgc3Rh
        dGVzIHRoYXQgdGhlIHN0cmluZyBzaG91bGQgYXR0ZW1wdCB0byBiZSBwYXJz
        ZWQgYXMgYSBEYXRlIFRpbWUgU3RyaW5nIEZvcm1hdCBzdHJpbmcKICAgIC8v
        IGJlZm9yZSBmYWxsaW5nIGJhY2sgdG8gYW55IGltcGxlbWVudGF0aW9uLXNw
        ZWNpZmljIGRhdGUgcGFyc2luZywgc28gdGhhdOKAmXMgd2hhdCB3ZSBkbywg
        ZXZlbiBpZiBuYXRpdmUKICAgIC8vIGltcGxlbWVudGF0aW9ucyBjb3VsZCBi
        ZSBmYXN0ZXIKICAgIC8vICAgICAgICAgICAgICAxIFlZWVkgICAgICAgICAg
        ICAgICAgMiBNTSAgICAgICAzIEREICAgICAgICAgICA0IEhIICAgIDUgbW0g
        ICAgICAgNiBzcyAgICAgICAgNyBtc2VjICAgICAgICA4IFogOSDCsSAgICAx
        MCB0ekhIICAgIDExIHR6bW0KICAgIGlmICgoc3RydWN0ID0gL14oXGR7NH18
        WytcLV1cZHs2fSkoPzotKFxkezJ9KSg/Oi0oXGR7Mn0pKT8pPyg/OlQoXGR7
        Mn0pOihcZHsyfSkoPzo6KFxkezJ9KSg/OlwuKFxkezN9KSk/KT8oPzooWil8
        KFsrXC1dKShcZHsyfSkoPzo6KFxkezJ9KSk/KT8pPyQvLmV4ZWMoZGF0ZSkp
        KSB7CiAgICAgICAgLy8gYXZvaWQgTmFOIHRpbWVzdGFtcHMgY2F1c2VkIGJ5
        IOKAnHVuZGVmaW5lZOKAnSB2YWx1ZXMgYmVpbmcgcGFzc2VkIHRvIERhdGUu
        VVRDCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGs7IChrID0gbnVtZXJpY0tl
        eXNbaV0pOyArK2kpIHsKICAgICAgICAgICAgc3RydWN0W2tdID0gK3N0cnVj
        dFtrXSB8fCAwOwogICAgICAgIH0KCiAgICAgICAgLy8gYWxsb3cgdW5kZWZp
        bmVkIGRheXMgYW5kIG1vbnRocwogICAgICAgIHN0cnVjdFsyXSA9ICgrc3Ry
        dWN0WzJdIHx8IDEpIC0gMTsKICAgICAgICBzdHJ1Y3RbM10gPSArc3RydWN0
        WzNdIHx8IDE7CgogICAgICAgIGlmIChzdHJ1Y3RbOF0gIT09ICdaJyAmJiBz
        dHJ1Y3RbOV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBtaW51dGVz
        T2Zmc2V0ID0gc3RydWN0WzEwXSAqIDYwICsgc3RydWN0WzExXTsKCiAgICAg
        ICAgICAgIGlmIChzdHJ1Y3RbOV0gPT09ICcrJykgewogICAgICAgICAgICAg
        ICAgbWludXRlc09mZnNldCA9IDAgLSBtaW51dGVzT2Zmc2V0OwogICAgICAg
        ICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLlVU
        QyhzdHJ1Y3RbMV0sIHN0cnVjdFsyXSwgc3RydWN0WzNdLCBzdHJ1Y3RbNF0s
        IHN0cnVjdFs1XSArIG1pbnV0ZXNPZmZzZXQsIHN0cnVjdFs2XSwgc3RydWN0
        WzddKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHRpbWVzdGFtcCA9IG9y
        aWdQYXJzZSA/IG9yaWdQYXJzZShkYXRlKSA6IE5hTjsKICAgIH0KCiAgICBy
        ZXR1cm4gdGltZXN0YW1wOwp9OwoKaWYgKEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTID09PSB0cnVlIHx8IEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkRhdGUp
        IHsKICBEYXRlLnBhcnNlID0gRW1iZXIuRGF0ZS5wYXJzZTsKfQoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        ICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQs
        IHNldCA9IEVtYmVyLnNldDsKCi8qKgogIEEgcmVjb3JkIGFycmF5IGlzIGFu
        IGFycmF5IHRoYXQgY29udGFpbnMgcmVjb3JkcyBvZiBhIGNlcnRhaW4gdHlw
        ZS4gVGhlIHJlY29yZAogIGFycmF5IG1hdGVyaWFsaXplcyByZWNvcmRzIGFz
        IG5lZWRlZCB3aGVuIHRoZXkgYXJlIHJldHJpZXZlZCBmb3IgdGhlIGZpcnN0
        CiAgdGltZS4gWW91IHNob3VsZCBub3QgY3JlYXRlIHJlY29yZCBhcnJheXMg
        eW91cnNlbGYuIEluc3RlYWQsIGFuIGluc3RhbmNlIG9mCiAgRFMuUmVjb3Jk
        QXJyYXkgb3IgaXRzIHN1YmNsYXNzZXMgd2lsbCBiZSByZXR1cm5lZCBieSB5
        b3VyIGFwcGxpY2F0aW9uJ3Mgc3RvcmUKICBpbiByZXNwb25zZSB0byBxdWVy
        aWVzLgoKICBAY2xhc3MgUmVjb3JkQXJyYXkKICBAbmFtZXNwYWNlIERTCiAg
        QGV4dGVuZHMgRW1iZXIuQXJyYXlQcm94eQogIEB1c2VzIEVtYmVyLkV2ZW50
        ZWQKKi8KCkRTLlJlY29yZEFycmF5ID0gRW1iZXIuQXJyYXlQcm94eS5leHRl
        bmQoRW1iZXIuRXZlbnRlZCwgewogIC8qKgogICAgVGhlIG1vZGVsIHR5cGUg
        Y29udGFpbmVkIGJ5IHRoaXMgcmVjb3JkIGFycmF5LgoKICAgIEBwcm9wZXJ0
        eSB0eXBlCiAgICBAdHlwZSBEUy5Nb2RlbAogICovCiAgdHlwZTogbnVsbCwK
        CiAgLy8gVGhlIGFycmF5IG9mIGNsaWVudCBpZHMgYmFja2luZyB0aGUgcmVj
        b3JkIGFycmF5LiBXaGVuIGEKICAvLyByZWNvcmQgaXMgcmVxdWVzdGVkIGZy
        b20gdGhlIHJlY29yZCBhcnJheSwgdGhlIHJlY29yZAogIC8vIGZvciB0aGUg
        Y2xpZW50IGlkIGF0IHRoZSBzYW1lIGluZGV4IGlzIG1hdGVyaWFsaXplZCwg
        aWYKICAvLyBuZWNlc3NhcnksIGJ5IHRoZSBzdG9yZS4KICBjb250ZW50OiBu
        dWxsLAoKICBpc0xvYWRlZDogZmFsc2UsCiAgaXNVcGRhdGluZzogZmFsc2Us
        CgogIC8vIFRoZSBzdG9yZSB0aGF0IGNyZWF0ZWQgdGhpcyByZWNvcmQgYXJy
        YXkuCiAgc3RvcmU6IG51bGwsCgogIG9iamVjdEF0Q29udGVudDogZnVuY3Rp
        b24oaW5kZXgpIHsKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250
        ZW50Jyk7CgogICAgcmV0dXJuIGNvbnRlbnQub2JqZWN0QXQoaW5kZXgpOwog
        IH0sCgogIHVwZGF0ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0KHRoaXMs
        ICdpc1VwZGF0aW5nJykpIHsgcmV0dXJuOyB9CgogICAgdmFyIHN0b3JlID0g
        Z2V0KHRoaXMsICdzdG9yZScpLAogICAgICAgIHR5cGUgPSBnZXQodGhpcywg
        J3R5cGUnKTsKCiAgICBzdG9yZS5mZXRjaEFsbCh0eXBlLCB0aGlzKTsKICB9
        LAoKICBhZGRSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgZ2V0KHRo
        aXMsICdjb250ZW50JykuYWRkT2JqZWN0KHJlY29yZCk7CiAgfSwKCiAgcmVt
        b3ZlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIGdldCh0aGlzLCAn
        Y29udGVudCcpLnJlbW92ZU9iamVjdChyZWNvcmQpOwogIH0sCgogIHNhdmU6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIHByb21pc2UgPSBFbWJlci5SU1ZQLmFs
        bCh0aGlzLmludm9rZSgic2F2ZSIpKS50aGVuKGZ1bmN0aW9uKGFycmF5KSB7
        CiAgICAgIHJldHVybiBFbWJlci5BKGFycmF5KTsKICAgIH0pOwoKICAgIHJl
        dHVybiBEUy5Qcm9taXNlQXJyYXkuY3JlYXRlKHsgcHJvbWlzZTogcHJvbWlz
        ZSB9KTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBA
        bW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQ7Cgov
        KioKICBAY2xhc3MgRmlsdGVyZWRSZWNvcmRBcnJheQogIEBuYW1lc3BhY2Ug
        RFMKICBAZXh0ZW5kcyBEUy5SZWNvcmRBcnJheQoqLwpEUy5GaWx0ZXJlZFJl
        Y29yZEFycmF5ID0gRFMuUmVjb3JkQXJyYXkuZXh0ZW5kKHsKICBmaWx0ZXJG
        dW5jdGlvbjogbnVsbCwKICBpc0xvYWRlZDogdHJ1ZSwKCiAgcmVwbGFjZTog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgdHlwZSA9IGdldCh0aGlzLCAndHlwZScp
        LnRvU3RyaW5nKCk7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlRoZSByZXN1bHQg
        b2YgYSBjbGllbnQtc2lkZSBmaWx0ZXIgKG9uICIgKyB0eXBlICsgIikgaXMg
        aW1tdXRhYmxlLiIpOwogIH0sCgogIHVwZGF0ZUZpbHRlcjogRW1iZXIub2Jz
        ZXJ2ZXIoZnVuY3Rpb24oKSB7CiAgICB2YXIgbWFuYWdlciA9IGdldCh0aGlz
        LCAnbWFuYWdlcicpOwogICAgbWFuYWdlci51cGRhdGVGaWx0ZXIodGhpcywg
        Z2V0KHRoaXMsICd0eXBlJyksIGdldCh0aGlzLCAnZmlsdGVyRnVuY3Rpb24n
        KSk7CiAgfSwgJ2ZpbHRlckZ1bmN0aW9uJykKfSk7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgQGNsYXNz
        IEFkYXB0ZXJQb3B1bGF0ZWRSZWNvcmRBcnJheQogIEBuYW1lc3BhY2UgRFMK
        ICBAZXh0ZW5kcyBEUy5SZWNvcmRBcnJheQoqLwpEUy5BZGFwdGVyUG9wdWxh
        dGVkUmVjb3JkQXJyYXkgPSBEUy5SZWNvcmRBcnJheS5leHRlbmQoewogIHF1
        ZXJ5OiBudWxsLAoKICByZXBsYWNlOiBmdW5jdGlvbigpIHsKICAgIHZhciB0
        eXBlID0gZ2V0KHRoaXMsICd0eXBlJykudG9TdHJpbmcoKTsKICAgIHRocm93
        IG5ldyBFcnJvcigiVGhlIHJlc3VsdCBvZiBhIHNlcnZlciBxdWVyeSAob24g
        IiArIHR5cGUgKyAiKSBpcyBpbW11dGFibGUuIik7CiAgfSwKCiAgbG9hZDog
        ZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIHN0b3JlID0gZ2V0KHRoaXMsICdz
        dG9yZScpLAogICAgICAgIHR5cGUgPSBnZXQodGhpcywgJ3R5cGUnKSwKICAg
        ICAgICByZWNvcmRzID0gc3RvcmUucHVzaE1hbnkodHlwZSwgZGF0YSksCiAg
        ICAgICAgbWV0YSA9IHN0b3JlLm1ldGFkYXRhRm9yKHR5cGUpOwoKICAgIHRo
        aXMuc2V0UHJvcGVydGllcyh7CiAgICAgIGNvbnRlbnQ6IEVtYmVyLkEocmVj
        b3JkcyksCiAgICAgIGlzTG9hZGVkOiB0cnVlLAogICAgICBtZXRhOiBtZXRh
        CiAgICB9KTsKCiAgICAvLyBUT0RPOiBkb2VzIHRyaWdnZXJpbmcgZGlkTG9h
        ZCBldmVudCBzaG91bGQgYmUgdGhlIGxhc3QgYWN0aW9uIG9mIHRoZSBydW5M
        b29wPwogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ3RyaWdnZXInLCAnZGlk
        TG9hZCcpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgog
        IEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0Owp2YXIgbWFwID0gRW1iZXIuRW51bWVyYWJsZVV0
        aWxzLm1hcDsKCi8qKgogIEEgTWFueUFycmF5IGlzIGEgUmVjb3JkQXJyYXkg
        dGhhdCByZXByZXNlbnRzIHRoZSBjb250ZW50cyBvZiBhIGhhcy1tYW55CiAg
        cmVsYXRpb25zaGlwLgoKICBUaGUgTWFueUFycmF5IGlzIGluc3RhbnRpYXRl
        ZCBsYXppbHkgdGhlIGZpcnN0IHRpbWUgdGhlIHJlbGF0aW9uc2hpcCBpcwog
        IHJlcXVlc3RlZC4KCiAgIyMjIEludmVyc2VzCgogIE9mdGVuLCB0aGUgcmVs
        YXRpb25zaGlwcyBpbiBFbWJlciBEYXRhIGFwcGxpY2F0aW9ucyB3aWxsIGhh
        dmUKICBhbiBpbnZlcnNlLiBGb3IgZXhhbXBsZSwgaW1hZ2luZSB0aGUgZm9s
        bG93aW5nIG1vZGVscyBhcmUKICBkZWZpbmVkOgoKICAgICAgQXBwLlBvc3Qg
        PSBEUy5Nb2RlbC5leHRlbmQoewogICAgICAgIGNvbW1lbnRzOiBEUy5oYXNN
        YW55KCdjb21tZW50JykKICAgICAgfSk7CgogICAgICBBcHAuQ29tbWVudCA9
        IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgICAgcG9zdDogRFMuYmVsb25nc1Rv
        KCdwb3N0JykKICAgICAgfSk7CgogIElmIHlvdSBjcmVhdGVkIGEgbmV3IGlu
        c3RhbmNlIG9mIGBBcHAuUG9zdGAgYW5kIGFkZGVkCiAgYSBgQXBwLkNvbW1l
        bnRgIHJlY29yZCB0byBpdHMgYGNvbW1lbnRzYCBoYXMtbWFueQogIHJlbGF0
        aW9uc2hpcCwgeW91IHdvdWxkIGV4cGVjdCB0aGUgY29tbWVudCdzIGBwb3N0
        YAogIHByb3BlcnR5IHRvIGJlIHNldCB0byB0aGUgcG9zdCB0aGF0IGNvbnRh
        aW5lZAogIHRoZSBoYXMtbWFueS4KCiAgV2UgY2FsbCB0aGUgcmVjb3JkIHRv
        IHdoaWNoIGEgcmVsYXRpb25zaGlwIGJlbG9uZ3MgdGhlCiAgcmVsYXRpb25z
        aGlwJ3MgX293bmVyXy4KCiAgQGNsYXNzIE1hbnlBcnJheQogIEBuYW1lc3Bh
        Y2UgRFMKICBAZXh0ZW5kcyBEUy5SZWNvcmRBcnJheQoqLwpEUy5NYW55QXJy
        YXkgPSBEUy5SZWNvcmRBcnJheS5leHRlbmQoewogIGluaXQ6IGZ1bmN0aW9u
        KCkgewogICAgdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsK
        ICAgIHRoaXMuX2NoYW5nZXNUb1N5bmMgPSBFbWJlci5PcmRlcmVkU2V0LmNy
        ZWF0ZSgpOwogIH0sCgogIC8qKgogICAgVGhlIHJlY29yZCB0byB3aGljaCB0
        aGlzIHJlbGF0aW9uc2hpcCBiZWxvbmdzLgoKICAgIEBwcm9wZXJ0eSB7RFMu
        TW9kZWx9CiAgICBAcHJpdmF0ZQogICovCiAgb3duZXI6IG51bGwsCgogIC8q
        KgogICAgYHRydWVgIGlmIHRoZSByZWxhdGlvbnNoaXAgaXMgcG9seW1vcnBo
        aWMsIGBmYWxzZWAgb3RoZXJ3aXNlLgoKICAgIEBwcm9wZXJ0eSB7Qm9vbGVh
        bn0KICAgIEBwcml2YXRlCiAgKi8KICBpc1BvbHltb3JwaGljOiBmYWxzZSwK
        CiAgLy8gTE9BRElORyBTVEFURQoKICBpc0xvYWRlZDogZmFsc2UsCgogIGxv
        YWRpbmdSZWNvcmRzQ291bnQ6IGZ1bmN0aW9uKGNvdW50KSB7CiAgICB0aGlz
        LmxvYWRpbmdSZWNvcmRzQ291bnQgPSBjb3VudDsKICB9LAoKICBsb2FkZWRS
        ZWNvcmQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2FkaW5nUmVjb3Jkc0Nv
        dW50LS07CiAgICBpZiAodGhpcy5sb2FkaW5nUmVjb3Jkc0NvdW50ID09PSAw
        KSB7CiAgICAgIHNldCh0aGlzLCAnaXNMb2FkZWQnLCB0cnVlKTsKICAgICAg
        dGhpcy50cmlnZ2VyKCdkaWRMb2FkJyk7CiAgICB9CiAgfSwKCiAgZmV0Y2g6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlY29yZHMgPSBnZXQodGhpcywgJ2Nv
        bnRlbnQnKSwKICAgICAgICBzdG9yZSA9IGdldCh0aGlzLCAnc3RvcmUnKSwK
        ICAgICAgICBvd25lciA9IGdldCh0aGlzLCAnb3duZXInKSwKICAgICAgICBy
        ZXNvbHZlciA9IEVtYmVyLlJTVlAuZGVmZXIoKTsKCiAgICB2YXIgdW5sb2Fk
        ZWRSZWNvcmRzID0gcmVjb3Jkcy5maWx0ZXJQcm9wZXJ0eSgnaXNFbXB0eScs
        IHRydWUpOwogICAgc3RvcmUuZmV0Y2hNYW55KHVubG9hZGVkUmVjb3Jkcywg
        b3duZXIsIHJlc29sdmVyKTsKICB9LAoKICAvLyBPdmVycmlkZXMgRW1iZXIu
        QXJyYXkncyByZXBsYWNlIG1ldGhvZCB0byBpbXBsZW1lbnQKICByZXBsYWNl
        Q29udGVudDogZnVuY3Rpb24oaW5kZXgsIHJlbW92ZWQsIGFkZGVkKSB7CiAg
        ICAvLyBNYXAgdGhlIGFycmF5IG9mIHJlY29yZCBvYmplY3RzIGludG8gYW4g
        YXJyYXkgb2YgIGNsaWVudCBpZHMuCiAgICBhZGRlZCA9IG1hcChhZGRlZCwg
        ZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGNh
        bm5vdCBhZGQgJyIgKyByZWNvcmQuY29uc3RydWN0b3IudHlwZUtleSArICIn
        IHJlY29yZHMgdG8gdGhpcyByZWxhdGlvbnNoaXAgKG9ubHkgJyIgKyB0aGlz
        LnR5cGUudHlwZUtleSArICInIGFsbG93ZWQpIiwgIXRoaXMudHlwZSB8fCBy
        ZWNvcmQgaW5zdGFuY2VvZiB0aGlzLnR5cGUpOwogICAgICByZXR1cm4gcmVj
        b3JkOwogICAgfSwgdGhpcyk7CgogICAgdGhpcy5fc3VwZXIoaW5kZXgsIHJl
        bW92ZWQsIGFkZGVkKTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnREaWRDaGFu
        Z2U6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ2Zl
        dGNoJyk7CiAgfSwKCiAgYXJyYXlDb250ZW50V2lsbENoYW5nZTogZnVuY3Rp
        b24oaW5kZXgsIHJlbW92ZWQsIGFkZGVkKSB7CiAgICB2YXIgb3duZXIgPSBn
        ZXQodGhpcywgJ293bmVyJyksCiAgICAgICAgbmFtZSA9IGdldCh0aGlzLCAn
        bmFtZScpOwoKICAgIGlmICghb3duZXIuX3N1c3BlbmRlZFJlbGF0aW9uc2hp
        cHMpIHsKICAgICAgLy8gVGhpcyBjb2RlIGlzIHRoZSBmaXJzdCBoYWxmIG9m
        IGNvZGUgdGhhdCBjb250aW51ZXMgaW5zaWRlCiAgICAgIC8vIG9mIGFycmF5
        Q29udGVudERpZENoYW5nZS4gSXQgZ2V0cyBvciBjcmVhdGVzIGEgY2hhbmdl
        IGZyb20KICAgICAgLy8gdGhlIGNoaWxkIG9iamVjdCwgYWRkcyB0aGUgY3Vy
        cmVudCBvd25lciBhcyB0aGUgb2xkCiAgICAgIC8vIHBhcmVudCBpZiB0aGlz
        IGlzIHRoZSBmaXJzdCB0aW1lIHRoZSBvYmplY3Qgd2FzIHJlbW92ZWQKICAg
        ICAgLy8gZnJvbSBhIE1hbnlBcnJheSwgYW5kIHNldHMgYG5ld1BhcmVudGAg
        dG8gbnVsbC4KICAgICAgLy8KICAgICAgLy8gTGF0ZXIsIGlmIHRoZSBvYmpl
        Y3QgaXMgYWRkZWQgdG8gYW5vdGhlciBNYW55QXJyYXksCiAgICAgIC8vIHRo
        ZSBgYXJyYXlDb250ZW50RGlkQ2hhbmdlYCB3aWxsIHNldCBgbmV3UGFyZW50
        YCBvbgogICAgICAvLyB0aGUgY2hhbmdlLgogICAgICBmb3IgKHZhciBpPWlu
        ZGV4OyBpPGluZGV4K3JlbW92ZWQ7IGkrKykgewogICAgICAgIHZhciByZWNv
        cmQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKS5vYmplY3RBdChpKTsKCiAgICAg
        ICAgdmFyIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVD
        aGFuZ2Uob3duZXIsIHJlY29yZCwgZ2V0KHRoaXMsICdzdG9yZScpLCB7CiAg
        ICAgICAgICBwYXJlbnRUeXBlOiBvd25lci5jb25zdHJ1Y3RvciwKICAgICAg
        ICAgIGNoYW5nZVR5cGU6ICJyZW1vdmUiLAogICAgICAgICAga2luZDogImhh
        c01hbnkiLAogICAgICAgICAga2V5OiBuYW1lCiAgICAgICAgfSk7CgogICAg
        ICAgIHRoaXMuX2NoYW5nZXNUb1N5bmMuYWRkKGNoYW5nZSk7CiAgICAgIH0K
        ICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJn
        dW1lbnRzKTsKICB9LAoKICBhcnJheUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0
        aW9uKGluZGV4LCByZW1vdmVkLCBhZGRlZCkgewogICAgdGhpcy5fc3VwZXIu
        YXBwbHkodGhpcywgYXJndW1lbnRzKTsKCiAgICB2YXIgb3duZXIgPSBnZXQo
        dGhpcywgJ293bmVyJyksCiAgICAgICAgbmFtZSA9IGdldCh0aGlzLCAnbmFt
        ZScpLAogICAgICAgIHN0b3JlID0gZ2V0KHRoaXMsICdzdG9yZScpOwoKICAg
        IGlmICghb3duZXIuX3N1c3BlbmRlZFJlbGF0aW9uc2hpcHMpIHsKICAgICAg
        Ly8gVGhpcyBjb2RlIGlzIHRoZSBzZWNvbmQgaGFsZiBvZiBjb2RlIHRoYXQg
        c3RhcnRlZCBpbgogICAgICAvLyBgYXJyYXlDb250ZW50V2lsbENoYW5nZWAu
        IEl0IGdldHMgb3IgY3JlYXRlcyBhIGNoYW5nZQogICAgICAvLyBmcm9tIHRo
        ZSBjaGlsZCBvYmplY3QsIGFuZCBhZGRzIHRoZSBjdXJyZW50IG93bmVyIGFz
        CiAgICAgIC8vIHRoZSBuZXcgcGFyZW50LgogICAgICBmb3IgKHZhciBpPWlu
        ZGV4OyBpPGluZGV4K2FkZGVkOyBpKyspIHsKICAgICAgICB2YXIgcmVjb3Jk
        ID0gZ2V0KHRoaXMsICdjb250ZW50Jykub2JqZWN0QXQoaSk7CgogICAgICAg
        IHZhciBjaGFuZ2UgPSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuY3JlYXRlQ2hh
        bmdlKG93bmVyLCByZWNvcmQsIHN0b3JlLCB7CiAgICAgICAgICBwYXJlbnRU
        eXBlOiBvd25lci5jb25zdHJ1Y3RvciwKICAgICAgICAgIGNoYW5nZVR5cGU6
        ICJhZGQiLAogICAgICAgICAga2luZDoiaGFzTWFueSIsCiAgICAgICAgICBr
        ZXk6IG5hbWUKICAgICAgICB9KTsKICAgICAgICBjaGFuZ2UuaGFzTWFueU5h
        bWUgPSBuYW1lOwoKICAgICAgICB0aGlzLl9jaGFuZ2VzVG9TeW5jLmFkZChj
        aGFuZ2UpOwogICAgICB9CgogICAgICAvLyBXZSB3YWl0IHVudGlsIHRoZSBh
        cnJheSBoYXMgZmluaXNoZWQgYmVpbmcKICAgICAgLy8gbXV0YXRlZCBiZWZv
        cmUgc3luY2luZyB0aGUgT25lVG9NYW55Q2hhbmdlcyBjcmVhdGVkCiAgICAg
        IC8vIGluIGFycmF5Q29udGVudFdpbGxDaGFuZ2UsIHNvIHRoYXQgdGhlIGFy
        cmF5CiAgICAgIC8vIG1lbWJlcnNoaXAgdGVzdCBpbiB0aGUgc3luYygpIGxv
        Z2ljIG9wZXJhdGVzCiAgICAgIC8vIG9uIHRoZSBmaW5hbCByZXN1bHRzLgog
        ICAgICB0aGlzLl9jaGFuZ2VzVG9TeW5jLmZvckVhY2goZnVuY3Rpb24oY2hh
        bmdlKSB7CiAgICAgICAgY2hhbmdlLnN5bmMoKTsKICAgICAgfSk7CgogICAg
        ICB0aGlzLl9jaGFuZ2VzVG9TeW5jLmNsZWFyKCk7CiAgICB9CiAgfSwKCiAg
        Ly8gQ3JlYXRlIGEgY2hpbGQgcmVjb3JkIHdpdGhpbiB0aGUgb3duZXIKICBj
        cmVhdGVSZWNvcmQ6IGZ1bmN0aW9uKGhhc2gpIHsKICAgIHZhciBvd25lciA9
        IGdldCh0aGlzLCAnb3duZXInKSwKICAgICAgICBzdG9yZSA9IGdldChvd25l
        ciwgJ3N0b3JlJyksCiAgICAgICAgdHlwZSA9IGdldCh0aGlzLCAndHlwZScp
        LAogICAgICAgIHJlY29yZDsKCiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW5u
        b3QgYWRkICciICsgdHlwZS50eXBlS2V5ICsgIicgcmVjb3JkcyB0byB0aGlz
        IHBvbHltb3JwaGljIHJlbGF0aW9uc2hpcC4iLCAhZ2V0KHRoaXMsICdpc1Bv
        bHltb3JwaGljJykpOwoKICAgIHJlY29yZCA9IHN0b3JlLmNyZWF0ZVJlY29y
        ZC5jYWxsKHN0b3JlLCB0eXBlLCBoYXNoKTsKICAgIHRoaXMucHVzaE9iamVj
        dChyZWNvcmQpOwoKICAgIHJldHVybiByZWNvcmQ7CiAgfQoKfSk7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoq
        LwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVy
        LWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQ7CnZhciBmb3JFYWNoID0g
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaDsKCnZhciByZXNvbHZlTWFw
        Q29uZmxpY3QgPSBmdW5jdGlvbihvbGRWYWx1ZSwgbmV3VmFsdWUpIHsKICBy
        ZXR1cm4gb2xkVmFsdWU7Cn07Cgp2YXIgdHJhbnNmb3JtTWFwS2V5ID0gZnVu
        Y3Rpb24oa2V5LCB2YWx1ZSkgewogIHJldHVybiBrZXk7Cn07Cgp2YXIgdHJh
        bnNmb3JtTWFwVmFsdWUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgcmV0
        dXJuIHZhbHVlOwp9OwoKLyoqCiAgVGhlIE1hcHBhYmxlIG1peGluIGlzIGRl
        c2lnbmVkIGZvciBjbGFzc2VzIHRoYXQgd291bGQgbGlrZSB0bwogIGJlaGF2
        ZSBhcyBhIG1hcCBmb3IgY29uZmlndXJhdGlvbiBwdXJwb3Nlcy4KCiAgRm9y
        IGV4YW1wbGUsIHRoZSBEUy5BZGFwdGVyIGNsYXNzIGNhbiBiZWhhdmUgbGlr
        ZSBhIG1hcCwgd2l0aAogIG1vcmUgc2VtYW50aWMgQVBJLCB2aWEgdGhlIGBt
        YXBgIEFQSToKCiAgICBEUy5BZGFwdGVyLm1hcCgnQXBwLlBlcnNvbicsIHsg
        Zmlyc3ROYW1lOiB7IGtleTogJ0ZJUlNUJyB9IH0pOwoKICBDbGFzcyBjb25m
        aWd1cmF0aW9uIHZpYSBhIG1hcC1saWtlIEFQSSBoYXMgYSBmZXcgY29tbW9u
        IHJlcXVpcmVtZW50cwogIHRoYXQgZGlmZmVyZW50aWF0ZSBpdCBmcm9tIHRo
        ZSBzdGFuZGFyZCBFbWJlci5NYXAgaW1wbGVtZW50YXRpb24uCgogIEZpcnN0
        LCB2YWx1ZXMgb2Z0ZW4gYXJlIHByb3ZpZGVkIGFzIHN0cmluZ3MgdGhhdCBz
        aG91bGQgYmUgbm9ybWFsaXplZAogIGludG8gY2xhc3NlcyB0aGUgZmlyc3Qg
        dGltZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSB1c2VkLgoKICBT
        ZWNvbmQsIHRoZSB2YWx1ZXMgY29uZmlndXJlZCBvbiBwYXJlbnQgY2xhc3Nl
        cyBzaG91bGQgYWxzbyBiZSB0YWtlbgogIGludG8gYWNjb3VudC4KCiAgRmlu
        YWxseSwgc2V0dGluZyB0aGUgdmFsdWUgb2YgYSBrZXkgc29tZXRpbWVzIHNo
        b3VsZCBtZXJnZSB3aXRoIHRoZQogIHByZXZpb3VzIHZhbHVlLCByYXRoZXIg
        dGhhbiByZXBsYWNpbmcgaXQuCgogIFRoaXMgbWl4aW4gcHJvdmlkZXMgYSBp
        bnN0YW5jZSBtZXRob2QsIGBjcmVhdGVJbnN0YW5jZU1hcEZvcmAsIHRoYXQK
        ICB3aWxsIHJlaWZ5IGFsbCBvZiB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25z
        IHNldCBvbiBhbiBpbnN0YW5jZSdzCiAgY29uc3RydWN0b3IgYW5kIHByb3Zp
        ZGUgaXQgZm9yIHRoZSBpbnN0YW5jZSB0byB1c2UuCgogIENsYXNzZXMgY2Fu
        IGltcGxlbWVudCBjZXJ0YWluIGhvb2tzIHRoYXQgYWxsb3cgdGhlbSB0byBj
        dXN0b21pemUKICB0aGUgcmVxdWlyZW1lbnRzIGxpc3RlZCBhYm92ZToKCiAg
        KiBgcmVzb2x2ZU1hcENvbmZsaWN0YCAtIGNhbGxlZCB3aGVuIGEgdmFsdWUg
        aXMgc2V0IGZvciBhbiBleGlzdGluZwogICAgdmFsdWUKICAqIGB0cmFuc2Zv
        cm1NYXBLZXlgIC0gYWxsb3dzIGEga2V5IG5hbWUgKGZvciBleGFtcGxlLCBh
        IGdsb2JhbCBwYXRoCiAgICB0byBhIGNsYXNzKSB0byBiZSBub3JtYWxpemVk
        CiAgKiBgdHJhbnNmb3JtTWFwVmFsdWVgIC0gYWxsb3dzIGEgdmFsdWUgKGZv
        ciBleGFtcGxlLCBhIGNsYXNzIHRoYXQKICAgIHNob3VsZCBiZSBpbnN0YW50
        aWF0ZWQpIHRvIGJlIG5vcm1hbGl6ZWQKCiAgQ2xhc3NlcyB0aGF0IGltcGxl
        bWVudCB0aGlzIG1peGluIHNob3VsZCBhbHNvIGltcGxlbWVudCBhIGNsYXNz
        CiAgbWV0aG9kIGJ1aWx0IHVzaW5nIHRoZSBgZ2VuZXJhdGVNYXBGdW5jdGlv
        bkZvcmAgbWV0aG9kOgoKICAgIERTLkFkYXB0ZXIucmVvcGVuQ2xhc3Moewog
        ICAgICBtYXA6IERTLk1hcHBhYmxlLmdlbmVyYXRlTWFwRnVuY3Rpb25Gb3Io
        J2F0dHJpYnV0ZXMnLCBmdW5jdGlvbihrZXksIG5ld1ZhbHVlLCBtYXApIHsK
        ICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IG1hcC5nZXQoa2V5KTsKCiAg
        ICAgICAgZm9yICh2YXIgcHJvcCBpbiBuZXdWYWx1ZSkgewogICAgICAgICAg
        aWYgKCFuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBjb250aW51
        ZTsgfQogICAgICAgICAgZXhpc3RpbmdWYWx1ZVtwcm9wXSA9IG5ld1ZhbHVl
        W3Byb3BdOwogICAgICAgIH0KICAgICAgfSkKICAgIH0pOwoKICBUaGUgZnVu
        Y3Rpb24gcGFzc2VkIHRvIGBnZW5lcmF0ZU1hcEZ1bmN0aW9uRm9yYCBpcyBp
        bnZva2VkIGV2ZXJ5IHRpbWUgYQogIG5ldyB2YWx1ZSBpcyBhZGRlZCB0byB0
        aGUgbWFwLgoKICBAY2xhc3MgX01hcHBhYmxlCiAgQHByaXZhdGUKICBAbmFt
        ZXNwYWNlIERTCioqLwpEUy5fTWFwcGFibGUgPSBFbWJlci5NaXhpbi5jcmVh
        dGUoewogIGNyZWF0ZUluc3RhbmNlTWFwRm9yOiBmdW5jdGlvbihtYXBOYW1l
        KSB7CiAgICB2YXIgaW5zdGFuY2VNZXRhID0gZ2V0TWFwcGFibGVNZXRhKHRo
        aXMpOwoKICAgIGluc3RhbmNlTWV0YS52YWx1ZXMgPSBpbnN0YW5jZU1ldGEu
        dmFsdWVzIHx8IHt9OwoKICAgIGlmIChpbnN0YW5jZU1ldGEudmFsdWVzW21h
        cE5hbWVdKSB7IHJldHVybiBpbnN0YW5jZU1ldGEudmFsdWVzW21hcE5hbWVd
        OyB9CgogICAgdmFyIGluc3RhbmNlTWFwID0gaW5zdGFuY2VNZXRhLnZhbHVl
        c1ttYXBOYW1lXSA9IG5ldyBFbWJlci5NYXAoKTsKCiAgICB2YXIga2xhc3Mg
        PSB0aGlzLmNvbnN0cnVjdG9yOwoKICAgIHdoaWxlIChrbGFzcyAmJiBrbGFz
        cyAhPT0gRFMuU3RvcmUpIHsKICAgICAgdGhpcy5fY29weU1hcChtYXBOYW1l
        LCBrbGFzcywgaW5zdGFuY2VNYXApOwogICAgICBrbGFzcyA9IGtsYXNzLnN1
        cGVyY2xhc3M7CiAgICB9CgogICAgaW5zdGFuY2VNZXRhLnZhbHVlc1ttYXBO
        YW1lXSA9IGluc3RhbmNlTWFwOwogICAgcmV0dXJuIGluc3RhbmNlTWFwOwog
        IH0sCgogIF9jb3B5TWFwOiBmdW5jdGlvbihtYXBOYW1lLCBrbGFzcywgaW5z
        dGFuY2VNYXApIHsKICAgIHZhciBjbGFzc01ldGEgPSBnZXRNYXBwYWJsZU1l
        dGEoa2xhc3MpOwoKICAgIHZhciBjbGFzc01hcCA9IGNsYXNzTWV0YVttYXBO
        YW1lXTsKICAgIGlmIChjbGFzc01hcCkgewogICAgICBmb3JFYWNoLmNhbGwo
        Y2xhc3NNYXAsIGVhY2hNYXAsIHRoaXMpOwogICAgfQoKICAgIGZ1bmN0aW9u
        IGVhY2hNYXAoa2V5LCB2YWx1ZSkgewogICAgICB2YXIgdHJhbnNmb3JtZWRL
        ZXkgPSAoa2xhc3MudHJhbnNmb3JtTWFwS2V5IHx8IHRyYW5zZm9ybU1hcEtl
        eSkoa2V5LCB2YWx1ZSk7CiAgICAgIHZhciB0cmFuc2Zvcm1lZFZhbHVlID0g
        KGtsYXNzLnRyYW5zZm9ybU1hcFZhbHVlIHx8IHRyYW5zZm9ybU1hcFZhbHVl
        KShrZXksIHZhbHVlKTsKCiAgICAgIHZhciBvbGRWYWx1ZSA9IGluc3RhbmNl
        TWFwLmdldCh0cmFuc2Zvcm1lZEtleSk7CiAgICAgIHZhciBuZXdWYWx1ZSA9
        IHRyYW5zZm9ybWVkVmFsdWU7CgogICAgICBpZiAob2xkVmFsdWUpIHsKICAg
        ICAgICBuZXdWYWx1ZSA9ICh0aGlzLmNvbnN0cnVjdG9yLnJlc29sdmVNYXBD
        b25mbGljdCB8fCByZXNvbHZlTWFwQ29uZmxpY3QpKG9sZFZhbHVlLCBuZXdW
        YWx1ZSk7CiAgICAgIH0KCiAgICAgIGluc3RhbmNlTWFwLnNldCh0cmFuc2Zv
        cm1lZEtleSwgbmV3VmFsdWUpOwogICAgfQogIH0KCn0pOwoKRFMuX01hcHBh
        YmxlLmdlbmVyYXRlTWFwRnVuY3Rpb25Gb3IgPSBmdW5jdGlvbihtYXBOYW1l
        LCB0cmFuc2Zvcm0pIHsKICByZXR1cm4gZnVuY3Rpb24oa2V5LCB2YWx1ZSkg
        ewogICAgdmFyIG1ldGEgPSBnZXRNYXBwYWJsZU1ldGEodGhpcyk7CgogICAg
        dmFyIG1hcCA9IG1ldGFbbWFwTmFtZV0gfHwgRW1iZXIuTWFwV2l0aERlZmF1
        bHQuY3JlYXRlKHsKICAgICAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbigpIHsg
        cmV0dXJuIHt9OyB9CiAgICB9KTsKCiAgICB0cmFuc2Zvcm0uY2FsbCh0aGlz
        LCBrZXksIHZhbHVlLCBtYXApOwoKICAgIG1ldGFbbWFwTmFtZV0gPSBtYXA7
        CiAgfTsKfTsKCmZ1bmN0aW9uIGdldE1hcHBhYmxlTWV0YShvYmopIHsKICB2
        YXIgbWV0YSA9IEVtYmVyLm1ldGEob2JqLCB0cnVlKSwKICAgICAga2V5TmFt
        ZSA9ICdEUy5NYXBwYWJsZScsCiAgICAgIHZhbHVlID0gbWV0YVtrZXlOYW1l
        XTsKCiAgaWYgKCF2YWx1ZSkgeyBtZXRhW2tleU5hbWVdID0ge307IH0KCiAg
        aWYgKCFtZXRhLmhhc093blByb3BlcnR5KGtleU5hbWUpKSB7CiAgICBtZXRh
        W2tleU5hbWVdID0gRW1iZXIuY3JlYXRlKG1ldGFba2V5TmFtZV0pOwogIH0K
        CiAgcmV0dXJuIG1ldGFba2V5TmFtZV07Cn0KCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKLypnbG9iYWxzIEVtYmVyKi8KLypqc2hpbnQgZXFudWxsOnRydWUq
        LwovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJl
        ci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIG9uY2UgPSBFbWJlci5ydW4u
        b25jZTsKdmFyIGlzTm9uZSA9IEVtYmVyLmlzTm9uZTsKdmFyIGZvckVhY2gg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaDsKdmFyIGluZGV4T2Yg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKdmFyIG1hcCA9IEVt
        YmVyLkVudW1lcmFibGVVdGlscy5tYXA7CnZhciByZXNvbHZlID0gRW1iZXIu
        UlNWUC5yZXNvbHZlOwoKLy8gSW1wbGVtZW50b3JzIE5vdGU6Ci8vCi8vICAg
        VGhlIHZhcmlhYmxlcyBpbiB0aGlzIGZpbGUgYXJlIGNvbnNpc3RlbnRseSBu
        YW1lZCBhY2NvcmRpbmcgdG8gdGhlIGZvbGxvd2luZwovLyAgIHNjaGVtZToK
        Ly8KLy8gICAqICtpZCsgbWVhbnMgYW4gaWRlbnRpZmllciBtYW5hZ2VkIGJ5
        IGFuIGV4dGVybmFsIHNvdXJjZSwgcHJvdmlkZWQgaW5zaWRlCi8vICAgICB0
        aGUgZGF0YSBwcm92aWRlZCBieSB0aGF0IHNvdXJjZS4gVGhlc2UgYXJlIGFs
        d2F5cyBjb2VyY2VkIHRvIGJlIHN0cmluZ3MKLy8gICAgIGJlZm9yZSBiZWlu
        ZyB1c2VkIGludGVybmFsbHkuCi8vICAgKiArY2xpZW50SWQrIG1lYW5zIGEg
        dHJhbnNpZW50IG51bWVyaWNhbCBpZGVudGlmaWVyIGdlbmVyYXRlZCBhdCBy
        dW50aW1lIGJ5Ci8vICAgICB0aGUgZGF0YSBzdG9yZS4gSXQgaXMgaW1wb3J0
        YW50IHByaW1hcmlseSBiZWNhdXNlIG5ld2x5IGNyZWF0ZWQgb2JqZWN0cyBt
        YXkKLy8gICAgIG5vdCB5ZXQgaGF2ZSBhbiBleHRlcm5hbGx5IGdlbmVyYXRl
        ZCBpZC4KLy8gICAqICtyZWZlcmVuY2UrIG1lYW5zIGEgcmVjb3JkIHJlZmVy
        ZW5jZSBvYmplY3QsIHdoaWNoIGhvbGRzIG1ldGFkYXRhIGFib3V0IGEKLy8g
        ICAgIHJlY29yZCwgZXZlbiBpZiBpdCBoYXMgbm90IHlldCBiZWVuIGZ1bGx5
        IG1hdGVyaWFsaXplZC4KLy8gICAqICt0eXBlKyBtZWFucyBhIHN1YmNsYXNz
        IG9mIERTLk1vZGVsLgoKLy8gVXNlZCBieSB0aGUgc3RvcmUgdG8gbm9ybWFs
        aXplIElEcyBlbnRlcmluZyB0aGUgc3RvcmUuICBEZXNwaXRlIHRoZSBmYWN0
        Ci8vIHRoYXQgZGV2ZWxvcGVycyBtYXkgcHJvdmlkZSBJRHMgYXMgbnVtYmVy
        cyAoZS5nLiwgYHN0b3JlLmZpbmQoUGVyc29uLCAxKWApLAovLyBpdCBpcyBp
        bXBvcnRhbnQgdGhhdCBpbnRlcm5hbGx5IHdlIHVzZSBzdHJpbmdzLCBzaW5j
        ZSBJRHMgbWF5IGJlIHNlcmlhbGl6ZWQKLy8gYW5kIGxvc2UgdHlwZSBpbmZv
        cm1hdGlvbi4gIEZvciBleGFtcGxlLCBFbWJlcidzIHJvdXRlciBtYXkgcHV0
        IGEgcmVjb3JkJ3MKLy8gSUQgaW50byB0aGUgVVJMLCBhbmQgaWYgd2UgbGF0
        ZXIgdHJ5IHRvIGRlc2VyaWFsaXplIHRoYXQgVVJMIGFuZCBmaW5kIHRoZQov
        LyBjb3JyZXNwb25kaW5nIHJlY29yZCwgd2Ugd2lsbCBub3Qga25vdyBpZiBp
        dCBpcyBhIHN0cmluZyBvciBhIG51bWJlci4KdmFyIGNvZXJjZUlkID0gZnVu
        Y3Rpb24oaWQpIHsKICByZXR1cm4gaWQgPT0gbnVsbCA/IG51bGwgOiBpZCsn
        JzsKfTsKCi8qKgogIFRoZSBzdG9yZSBjb250YWlucyBhbGwgb2YgdGhlIGRh
        dGEgZm9yIHJlY29yZHMgbG9hZGVkIGZyb20gdGhlIHNlcnZlci4KICBJdCBp
        cyBhbHNvIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBpbnN0YW5jZXMgb2Yg
        RFMuTW9kZWwgdGhhdCB3cmFwCiAgdGhlIGluZGl2aWR1YWwgZGF0YSBmb3Ig
        YSByZWNvcmQsIHNvIHRoYXQgdGhleSBjYW4gYmUgYm91bmQgdG8gaW4geW91
        cgogIEhhbmRsZWJhcnMgdGVtcGxhdGVzLgoKICBEZWZpbmUgeW91ciBhcHBs
        aWNhdGlvbidzIHN0b3JlIGxpa2UgdGhpczoKCiAgICAgICBNeUFwcC5TdG9y
        ZSA9IERTLlN0b3JlLmV4dGVuZCgpOwoKICBNb3N0IEVtYmVyLmpzIGFwcGxp
        Y2F0aW9ucyB3aWxsIG9ubHkgaGF2ZSBhIHNpbmdsZSBgRFMuU3RvcmVgIHRo
        YXQgaXMKICBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYnkgdGhlaXIgYEVtYmVy
        LkFwcGxpY2F0aW9uYC4KCiAgWW91IGNhbiByZXRyaWV2ZSBtb2RlbHMgZnJv
        bSB0aGUgc3RvcmUgaW4gc2V2ZXJhbCB3YXlzLiBUbyByZXRyaWV2ZSBhIHJl
        Y29yZAogIGZvciBhIHNwZWNpZmljIGlkLCB1c2UgYERTLk1vZGVsYCdzIGBm
        aW5kKClgIG1ldGhvZDoKCiAgICAgICB2YXIgcGVyc29uID0gQXBwLlBlcnNv
        bi5maW5kKDEyMyk7CgogIElmIHlvdXIgYXBwbGljYXRpb24gaGFzIG11bHRp
        cGxlIGBEUy5TdG9yZWAgaW5zdGFuY2VzIChhbiB1bnVzdWFsIGNhc2UpLCB5
        b3UgY2FuCiAgc3BlY2lmeSB3aGljaCBzdG9yZSBzaG91bGQgYmUgdXNlZDoK
        CiAgICAgIHZhciBwZXJzb24gPSBzdG9yZS5maW5kKEFwcC5QZXJzb24sIDEy
        Myk7CgogIEluIGdlbmVyYWwsIHlvdSBzaG91bGQgcmV0cmlldmUgbW9kZWxz
        IHVzaW5nIHRoZSBtZXRob2RzIG9uIGBEUy5Nb2RlbGA7IHlvdSBzaG91bGQK
        ICByYXJlbHkgbmVlZCB0byBpbnRlcmFjdCB3aXRoIHRoZSBzdG9yZSBkaXJl
        Y3RseS4KCiAgQnkgZGVmYXVsdCwgdGhlIHN0b3JlIHdpbGwgdGFsayB0byB5
        b3VyIGJhY2tlbmQgdXNpbmcgYSBzdGFuZGFyZCBSRVNUIG1lY2hhbmlzbS4K
        ICBZb3UgY2FuIGN1c3RvbWl6ZSBob3cgdGhlIHN0b3JlIHRhbGtzIHRvIHlv
        dXIgYmFja2VuZCBieSBzcGVjaWZ5aW5nIGEgY3VzdG9tIGFkYXB0ZXI6Cgog
        ICAgICAgTXlBcHAuc3RvcmUgPSBEUy5TdG9yZS5jcmVhdGUoewogICAgICAg
        ICBhZGFwdGVyOiAnTXlBcHAuQ3VzdG9tQWRhcHRlcicKICAgICAgIH0pOwoK
        ICBZb3UgY2FuIGxlYXJuIG1vcmUgYWJvdXQgd3JpdGluZyBhIGN1c3RvbSBh
        ZGFwdGVyIGJ5IHJlYWRpbmcgdGhlIGBEUy5BZGFwdGVyYAogIGRvY3VtZW50
        YXRpb24uCgogIEBjbGFzcyBTdG9yZQogIEBuYW1lc3BhY2UgRFMKICBAZXh0
        ZW5kcyBFbWJlci5PYmplY3QKICBAdXNlcyBEUy5fTWFwcGFibGUKKi8KRFMu
        U3RvcmUgPSBFbWJlci5PYmplY3QuZXh0ZW5kKERTLl9NYXBwYWJsZSwgewoK
        ICAvKioKICAgIEBtZXRob2QgaW5pdAogICAgQHByaXZhdGUKICAqLwogIGlu
        aXQ6IGZ1bmN0aW9uKCkgewogICAgLy8gaW50ZXJuYWwgYm9va2tlZXBpbmc7
        IG5vdCBvYnNlcnZhYmxlCiAgICB0aGlzLnR5cGVNYXBzID0ge307CiAgICB0
        aGlzLnJlY29yZEFycmF5TWFuYWdlciA9IERTLlJlY29yZEFycmF5TWFuYWdl
        ci5jcmVhdGUoewogICAgICBzdG9yZTogdGhpcwogICAgfSk7CiAgICB0aGlz
        Ll9yZWxhdGlvbnNoaXBDaGFuZ2VzID0ge307CiAgICB0aGlzLl9wZW5kaW5n
        U2F2ZSA9IFtdOwogIH0sCgogIC8qKgogICAgVGhlIGFkYXB0ZXIgdG8gdXNl
        IHRvIGNvbW11bmljYXRlIHRvIGEgYmFja2VuZCBzZXJ2ZXIgb3Igb3RoZXIg
        cGVyc2lzdGVuY2UgbGF5ZXIuCgogICAgVGhpcyBjYW4gYmUgc3BlY2lmaWVk
        IGFzIGFuIGluc3RhbmNlLCBjbGFzcywgb3Igc3RyaW5nLgoKICAgIElmIHlv
        dSB3YW50IHRvIHNwZWNpZnkgYEFwcC5DdXN0b21BZGFwdGVyYCBhcyBhIHN0
        cmluZywgZG86CgogICAgYGBganMKICAgIGFkYXB0ZXI6ICdjdXN0b20nCiAg
        ICBgYGAKCiAgICBAcHJvcGVydHkgYWRhcHRlcgogICAgQGRlZmF1bHQgRFMu
        UkVTVEFkYXB0ZXIKICAgIEB0eXBlIHtEUy5BZGFwdGVyfFN0cmluZ30KICAq
        LwogIGFkYXB0ZXI6ICdfcmVzdCcsCgogIC8qKgogICAgUmV0dXJucyBhIEpT
        T04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlY29yZCB1c2luZyBhIGN1c3Rv
        bQogICAgdHlwZS1zcGVjaWZpYyBzZXJpYWxpemVyLCBpZiBvbmUgZXhpc3Rz
        LgoKICAgIFRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmU6CgogICAgKiBgaW5j
        bHVkZUlkYDogYHRydWVgIGlmIHRoZSByZWNvcmQncyBJRCBzaG91bGQgYmUg
        aW5jbHVkZWQgaW4KICAgICAgdGhlIEpTT04gcmVwcmVzZW50YXRpb24KCiAg
        ICBAbWV0aG9kIHNlcmlhbGl6ZQogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7
        RFMuTW9kZWx9IHJlY29yZCB0aGUgcmVjb3JkIHRvIHNlcmlhbGl6ZQogICAg
        QHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgYW4gb3B0aW9ucyBoYXNoCiAgKi8K
        ICBzZXJpYWxpemU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykgewogICAg
        cmV0dXJuIHRoaXMuc2VyaWFsaXplckZvcihyZWNvcmQuY29uc3RydWN0b3Iu
        dHlwZUtleSkuc2VyaWFsaXplKHJlY29yZCwgb3B0aW9ucyk7CiAgfSwKCiAg
        LyoqCiAgICBUaGlzIHByb3BlcnR5IHJldHVybnMgdGhlIGFkYXB0ZXIsIGFm
        dGVyIHJlc29sdmluZyBhIHBvc3NpYmxlCiAgICBzdHJpbmcga2V5LgoKICAg
        IElmIHRoZSBzdXBwbGllZCBgYWRhcHRlcmAgd2FzIGEgY2xhc3MsIG9yIGEg
        U3RyaW5nIHByb3BlcnR5CiAgICBwYXRoIHJlc29sdmVkIHRvIGEgY2xhc3Ms
        IHRoaXMgcHJvcGVydHkgd2lsbCBpbnN0YW50aWF0ZSB0aGUKICAgIGNsYXNz
        LgoKICAgIFRoaXMgcHJvcGVydHkgaXMgY2FjaGVhYmxlLCBzbyB0aGUgc2Ft
        ZSBpbnN0YW5jZSBvZiBhIHNwZWNpZmllZAogICAgYWRhcHRlciBjbGFzcyBz
        aG91bGQgYmUgdXNlZCBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzdG9yZS4K
        CiAgICBAcHJvcGVydHkgZGVmYXVsdEFkYXB0ZXIKICAgIEBwcml2YXRlCiAg
        ICBAcmV0dXJucyBEUy5BZGFwdGVyCiAgKi8KICBkZWZhdWx0QWRhcHRlcjog
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgYWRhcHRlciA9
        IGdldCh0aGlzLCAnYWRhcHRlcicpOwoKICAgIEVtYmVyLmFzc2VydCgnWW91
        IHRyaWVkIHRvIHNldCBgYWRhcHRlcmAgcHJvcGVydHkgdG8gYW4gaW5zdGFu
        Y2Ugb2YgYERTLkFkYXB0ZXJgLCB3aGVyZSBpdCBzaG91bGQgYmUgYSBuYW1l
        IG9yIGEgZmFjdG9yeScsICEoYWRhcHRlciBpbnN0YW5jZW9mIERTLkFkYXB0
        ZXIpKTsKCiAgICBpZiAodHlwZW9mIGFkYXB0ZXIgPT09ICdzdHJpbmcnKSB7
        CiAgICAgIGFkYXB0ZXIgPSB0aGlzLmNvbnRhaW5lci5sb29rdXAoJ2FkYXB0
        ZXI6JyArIGFkYXB0ZXIpIHx8IHRoaXMuY29udGFpbmVyLmxvb2t1cCgnYWRh
        cHRlcjphcHBsaWNhdGlvbicpIHx8IHRoaXMuY29udGFpbmVyLmxvb2t1cCgn
        YWRhcHRlcjpfcmVzdCcpOwogICAgfQoKICAgIGlmIChEUy5BZGFwdGVyLmRl
        dGVjdChhZGFwdGVyKSkgewogICAgICBhZGFwdGVyID0gYWRhcHRlci5jcmVh
        dGUoeyBjb250YWluZXI6IHRoaXMuY29udGFpbmVyIH0pOwogICAgfQoKICAg
        IHJldHVybiBhZGFwdGVyOwogIH0pLnByb3BlcnR5KCdhZGFwdGVyJyksCgog
        IC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIC4gQ1JFQVRFIE5FVyBS
        RUNPUkQgLgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLgoKICAvKioKICAg
        IENyZWF0ZSBhIG5ldyByZWNvcmQgaW4gdGhlIGN1cnJlbnQgc3RvcmUuIFRo
        ZSBwcm9wZXJ0aWVzIHBhc3NlZAogICAgdG8gdGhpcyBtZXRob2QgYXJlIHNl
        dCBvbiB0aGUgbmV3bHkgY3JlYXRlZCByZWNvcmQuCgogICAgVG8gY3JlYXRl
        IGEgbmV3IGluc3RhbmNlIG9mIGBBcHAuUG9zdGA6CgogICAgYGBganMKICAg
        IHN0b3JlLmNyZWF0ZVJlY29yZCgncG9zdCcsIHsKICAgICAgdGl0bGU6ICJS
        YWlscyBpcyBvbWFrYXNlIgogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IGNyZWF0ZVJlY29yZAogICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIGEgaGFzaCBvZiBwcm9wZXJ0aWVz
        IHRvIHNldCBvbiB0aGUKICAgICAgbmV3bHkgY3JlYXRlZCByZWNvcmQuCiAg
        ICBAcmV0dXJucyBEUy5Nb2RlbAogICovCiAgY3JlYXRlUmVjb3JkOiBmdW5j
        dGlvbih0eXBlLCBwcm9wZXJ0aWVzKSB7CiAgICB0eXBlID0gdGhpcy5tb2Rl
        bEZvcih0eXBlKTsKCiAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCB7
        fTsKCiAgICAvLyBJZiB0aGUgcGFzc2VkIHByb3BlcnRpZXMgZG8gbm90IGlu
        Y2x1ZGUgYSBwcmltYXJ5IGtleSwKICAgIC8vIGdpdmUgdGhlIGFkYXB0ZXIg
        YW4gb3Bwb3J0dW5pdHkgdG8gZ2VuZXJhdGUgb25lLiBUeXBpY2FsbHksCiAg
        ICAvLyBjbGllbnQtc2lkZSBJRCBnZW5lcmF0b3JzIHdpbGwgdXNlIHNvbWV0
        aGluZyBsaWtlIHV1aWQuanMKICAgIC8vIHRvIGF2b2lkIGNvbmZsaWN0cy4K
        CiAgICBpZiAoaXNOb25lKHByb3BlcnRpZXMuaWQpKSB7CiAgICAgIHByb3Bl
        cnRpZXMuaWQgPSB0aGlzLl9nZW5lcmF0ZUlkKHR5cGUpOwogICAgfQoKICAg
        IC8vIENvZXJjZSBJRCB0byBhIHN0cmluZwogICAgcHJvcGVydGllcy5pZCA9
        IGNvZXJjZUlkKHByb3BlcnRpZXMuaWQpOwoKICAgIHZhciByZWNvcmQgPSB0
        aGlzLmJ1aWxkUmVjb3JkKHR5cGUsIHByb3BlcnRpZXMuaWQpOwoKICAgIC8v
        IE1vdmUgdGhlIHJlY29yZCBvdXQgb2YgaXRzIGluaXRpYWwgYGVtcHR5YCBz
        dGF0ZSBpbnRvCiAgICAvLyB0aGUgYGxvYWRlZGAgc3RhdGUuCiAgICByZWNv
        cmQubG9hZGVkRGF0YSgpOwoKICAgIC8vIFNldCB0aGUgcHJvcGVydGllcyBz
        cGVjaWZpZWQgb24gdGhlIHJlY29yZC4KICAgIHJlY29yZC5zZXRQcm9wZXJ0
        aWVzKHByb3BlcnRpZXMpOwoKICAgIHJldHVybiByZWNvcmQ7CiAgfSwKCiAg
        LyoqCiAgICBJZiBwb3NzaWJsZSwgdGhpcyBtZXRob2QgYXNrcyB0aGUgYWRh
        cHRlciB0byBnZW5lcmF0ZSBhbiBJRCBmb3IKICAgIGEgbmV3bHkgY3JlYXRl
        ZCByZWNvcmQuCgogICAgQG1ldGhvZCBnZW5lcmF0ZUlkCiAgICBAcGFyYW0g
        e1N0cmluZ30gdHlwZQogICAgQHJldHVybnMgU3RyaW5nIGlmIHRoZSBhZGFw
        dGVyIGNhbiBnZW5lcmF0ZSBvbmUsIGFuIElECiAgKi8KICBfZ2VuZXJhdGVJ
        ZDogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGFkYXB0ZXIgPSB0aGlzLmFk
        YXB0ZXJGb3IodHlwZSk7CgogICAgaWYgKGFkYXB0ZXIgJiYgYWRhcHRlci5n
        ZW5lcmF0ZUlkRm9yUmVjb3JkKSB7CiAgICAgIHJldHVybiBhZGFwdGVyLmdl
        bmVyYXRlSWRGb3JSZWNvcmQodGhpcyk7CiAgICB9CgogICAgcmV0dXJuIG51
        bGw7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4KICAvLyAuIERFTEVU
        RSBSRUNPUkQgLgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uCgogIC8qKgogICAg
        Rm9yIHN5bW1ldHJ5LCBhIHJlY29yZCBjYW4gYmUgZGVsZXRlZCB2aWEgdGhl
        IHN0b3JlLgoKICAgIEBtZXRob2QgZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0g
        e0RTLk1vZGVsfSByZWNvcmQKICAqLwogIGRlbGV0ZVJlY29yZDogZnVuY3Rp
        b24ocmVjb3JkKSB7CiAgICByZWNvcmQuZGVsZXRlUmVjb3JkKCk7CiAgfSwK
        CiAgLyoqCiAgICBGb3Igc3ltbWV0cnksIGEgcmVjb3JkIGNhbiBiZSB1bmxv
        YWRlZCB2aWEgdGhlIHN0b3JlLgoKICAgIEBtZXRob2QgdW5sb2FkUmVjb3Jk
        CiAgICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAqLwogIHVubG9hZFJl
        Y29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICByZWNvcmQudW5sb2FkUmVj
        b3JkKCk7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLgogIC8vIC4gRklO
        RCBSRUNPUkRTIC4KICAvLyAuLi4uLi4uLi4uLi4uLi4uCgogIC8qKgogICAg
        VGhpcyBpcyB0aGUgbWFpbiBlbnRyeSBwb2ludCBpbnRvIGZpbmRpbmcgcmVj
        b3Jkcy4gVGhlIGZpcnN0IHBhcmFtZXRlciB0bwogICAgdGhpcyBtZXRob2Qg
        aXMgdGhlIG1vZGVsJ3MgbmFtZSBhcyBhIHN0cmluZy4KCiAgICAtLS0KCiAg
        ICBUbyBmaW5kIGEgcmVjb3JkIGJ5IElELCBwYXNzIHRoZSBgaWRgIGFzIHRo
        ZSBzZWNvbmQgcGFyYW1ldGVyOgoKICAgICAgICBzdG9yZS5maW5kKCdwZXJz
        b24nLCAxKTsKCiAgICBUaGUgYGZpbmRgIG1ldGhvZCB3aWxsIGFsd2F5cyBy
        ZXR1cm4gYSAqKnByb21pc2UqKiB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQKICAg
        IHdpdGggdGhlIHJlY29yZC4gSWYgdGhlIHJlY29yZCB3YXMgYWxyZWFkeSBp
        biB0aGUgc3RvcmUsIHRoZSBwcm9taXNlIHdpbGwKICAgIGJlIHJlc29sdmVk
        IGltbWVkaWF0ZWx5LiBPdGhlcndpc2UsIHRoZSBzdG9yZSB3aWxsIGFzayB0
        aGUgYWRhcHRlcidzIGBmaW5kYAogICAgbWV0aG9kIHRvIGZpbmQgdGhlIG5l
        Y2Vzc2FyeSBkYXRhLgoKICAgIFRoZSBgZmluZGAgbWV0aG9kIHdpbGwgYWx3
        YXlzIHJlc29sdmUgaXRzIHByb21pc2Ugd2l0aCB0aGUgc2FtZSBvYmplY3Qg
        Zm9yCiAgICBhIGdpdmVuIHR5cGUgYW5kIGBpZGAuCgogICAgLS0tCgogICAg
        VG8gZmluZCBhbGwgcmVjb3JkcyBmb3IgYSB0eXBlLCBjYWxsIGBmaW5kYCB3
        aXRoIG5vIGFkZGl0aW9uYWwgcGFyYW1ldGVyczoKCiAgICAgICAgc3RvcmUu
        ZmluZCgncGVyc29uJyk7CgogICAgVGhpcyB3aWxsIGFzayB0aGUgYWRhcHRl
        cidzIGBmaW5kQWxsYCBtZXRob2QgdG8gZmluZCB0aGUgcmVjb3JkcyBmb3Ig
        dGhlCiAgICBnaXZlbiB0eXBlLCBhbmQgcmV0dXJuIGEgcHJvbWlzZSB0aGF0
        IHdpbGwgYmUgcmVzb2x2ZWQgb25jZSB0aGUgc2VydmVyCiAgICByZXR1cm5z
        IHRoZSB2YWx1ZXMuCgogICAgLS0tCgogICAgVG8gZmluZCBhIHJlY29yZCBi
        eSBhIHF1ZXJ5LCBjYWxsIGBmaW5kYCB3aXRoIGEgaGFzaCBhcyB0aGUgc2Vj
        b25kCiAgICBwYXJhbWV0ZXI6CgogICAgICAgIHN0b3JlLmZpbmQoQXBwLlBl
        cnNvbiwgeyBwYWdlOiAxIH0pOwoKICAgIFRoaXMgd2lsbCBhc2sgdGhlIGFk
        YXB0ZXIncyBgZmluZFF1ZXJ5YCBtZXRob2QgdG8gZmluZCB0aGUgcmVjb3Jk
        cyBmb3IKICAgIHRoZSBxdWVyeSwgYW5kIHJldHVybiBhIHByb21pc2UgdGhh
        dCB3aWxsIGJlIHJlc29sdmVkIG9uY2UgdGhlIHNlcnZlcgogICAgcmVzcG9u
        ZHMuCgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0ge0RTLk1vZGVsfSB0
        eXBlCiAgICBAcGFyYW0ge09iamVjdHxTdHJpbmd8SW50ZWdlcnxudWxsfSBp
        ZAogICovCiAgZmluZDogZnVuY3Rpb24odHlwZSwgaWQpIHsKICAgIGlmIChp
        ZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbmRBbGwo
        dHlwZSk7CiAgICB9CgogICAgLy8gV2UgYXJlIHBhc3NlZCBhIHF1ZXJ5IGlu
        c3RlYWQgb2YgYW4gaWQuCiAgICBpZiAoRW1iZXIudHlwZU9mKGlkKSA9PT0g
        J29iamVjdCcpIHsKICAgICAgcmV0dXJuIHRoaXMuZmluZFF1ZXJ5KHR5cGUs
        IGlkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5maW5kQnlJZCh0eXBlLCBj
        b2VyY2VJZChpZCkpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgcmV0
        dXJucyBhIHJlY29yZCBmb3IgYSBnaXZlbiB0eXBlIGFuZCBpZCBjb21iaW5h
        dGlvbi4KCiAgICBAbWV0aG9kIGZpbmRCeUlkCiAgICBAcHJpdmF0ZQogICAg
        QHBhcmFtIHR5cGUKICAgIEBwYXJhbSBpZAogICovCiAgZmluZEJ5SWQ6IGZ1
        bmN0aW9uKHR5cGUsIGlkKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0
        eXBlKTsKCiAgICB2YXIgcmVjb3JkID0gdGhpcy5yZWNvcmRGb3JJZCh0eXBl
        LCBpZCk7CgogICAgdmFyIHByb21pc2UgPSB0aGlzLmZldGNoUmVjb3JkKHJl
        Y29yZCkgfHwgcmVzb2x2ZShyZWNvcmQpOwogICAgcmV0dXJuIHByb21pc2VP
        YmplY3QocHJvbWlzZSk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCBt
        YWtlcyBhIHNlcmllcyBvZiByZXF1ZXN0cyB0byB0aGUgYWRhcHRlcidzIGBm
        aW5kYCBtZXRob2QKICAgIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJl
        c29sdmVzIG9uY2UgdGhleSBhcmUgYWxsIGxvYWRlZC4KCiAgICBAbWV0aG9k
        IGZpbmRCeUlkcwogICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEBwYXJh
        bSB7QXJyYXl9IGlkcwogICAgQHJldHVybnMgUHJvbWlzZQogICovCiAgZmlu
        ZEJ5SWRzOiBmdW5jdGlvbih0eXBlLCBpZHMpIHsKICAgIHZhciBzdG9yZSA9
        IHRoaXM7CgogICAgcmV0dXJuIHByb21pc2VBcnJheShFbWJlci5SU1ZQLmFs
        bChtYXAoaWRzLCBmdW5jdGlvbihpZCkgewogICAgICByZXR1cm4gc3RvcmUu
        ZmluZEJ5SWQodHlwZSwgaWQpOwogICAgfSkpLnRoZW4oZnVuY3Rpb24oYXJy
        YXkpIHsKICAgICAgcmV0dXJuIEVtYmVyLkEoYXJyYXkpOwogICAgfSkpOwog
        IH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IGBmaW5k
        QnlJZGAgaWYgaXQgZGlzY292ZXJzIHRoYXQgYSBwYXJ0aWN1bGFyCiAgICB0
        eXBlL2lkIHBhaXIgaGFzbid0IGJlZW4gbG9hZGVkIHlldCB0byBraWNrIG9m
        ZiBhIHJlcXVlc3QgdG8gdGhlCiAgICBhZGFwdGVyLgoKICAgIEBtZXRob2Qg
        ZmV0Y2hSZWNvcmQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RTLk1vZGVs
        fSByZWNvcmQKICAgIEByZXR1cm5zIFByb21pc2UKICAqLwogIGZldGNoUmVj
        b3JkOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIGlmIChpc05vbmUocmVjb3Jk
        KSkgeyByZXR1cm4gbnVsbDsgfQogICAgaWYgKHJlY29yZC5fbG9hZGluZ1By
        b21pc2UpIHsgcmV0dXJuIHJlY29yZC5fbG9hZGluZ1Byb21pc2U7IH0KICAg
        IGlmICghZ2V0KHJlY29yZCwgJ2lzRW1wdHknKSkgeyByZXR1cm4gbnVsbDsg
        fQoKICAgIHZhciB0eXBlID0gcmVjb3JkLmNvbnN0cnVjdG9yLAogICAgICAg
        IGlkID0gZ2V0KHJlY29yZCwgJ2lkJyksCiAgICAgICAgcmVzb2x2ZXIgPSBF
        bWJlci5SU1ZQLmRlZmVyKCk7CgogICAgcmVjb3JkLmxvYWRpbmdEYXRhKHJl
        c29sdmVyLnByb21pc2UpOwoKICAgIHZhciBhZGFwdGVyID0gdGhpcy5hZGFw
        dGVyRm9yKHR5cGUpOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRv
        IGZpbmQgYSByZWNvcmQgYnV0IHlvdSBoYXZlIG5vIGFkYXB0ZXIgKGZvciAi
        ICsgdHlwZSArICIpIiwgYWRhcHRlcik7CiAgICBFbWJlci5hc3NlcnQoIllv
        dSB0cmllZCB0byBmaW5kIGEgcmVjb3JkIGJ1dCB5b3VyIGFkYXB0ZXIgKGZv
        ciAiICsgdHlwZSArICIpIGRvZXMgbm90IGltcGxlbWVudCAnZmluZCciLCBh
        ZGFwdGVyLmZpbmQpOwoKICAgIF9maW5kKGFkYXB0ZXIsIHRoaXMsIHR5cGUs
        IGlkLCByZXNvbHZlcik7CgogICAgcmV0dXJuIHJlc29sdmVyLnByb21pc2U7
        CiAgfSwKCiAgLyoqCiAgICBHZXQgYSByZWNvcmQgYnkgYSBnaXZlbiB0eXBl
        IGFuZCBJRCB3aXRob3V0IHRyaWdnZXJpbmcgYSBmZXRjaC4KCiAgICBUaGlz
        IG1ldGhvZCB3aWxsIHN5bmNocm9ub3VzbHkgcmV0dXJuIHRoZSByZWNvcmQg
        aWYgaXQncyBhdmFpbGFibGUuCiAgICBPdGhlcndpc2UsIGl0IHdpbGwgcmV0
        dXJuIG51bGwuCgogICAgYGBganMKICAgIHZhciBwb3N0ID0gc3RvcmUuZ2V0
        QnlJZCgncG9zdCcsIDEpOwogICAgYGBgCgogICAgQG1ldGhvZCBnZXRCeUlk
        CiAgICBAcGFyYW0gdHlwZQogICAgQHBhcmFtIGlkCiAgKi8KICBnZXRCeUlk
        OiBmdW5jdGlvbih0eXBlLCBpZCkgewogICAgdHlwZSA9IHRoaXMubW9kZWxG
        b3IodHlwZSk7CgogICAgaWYgKHRoaXMuaGFzUmVjb3JkRm9ySWQodHlwZSwg
        aWQpKSB7CiAgICAgIHJldHVybiB0aGlzLnJlY29yZEZvcklkKHR5cGUsIGlk
        KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0s
        CgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IHRoZSByZWNv
        cmQncyBgcmVsb2FkYCBtZXRob2QuIFRoZSByZWNvcmQncyBgcmVsb2FkYAog
        ICAgcGFzc2VzIGluIGEgcmVzb2x2ZXIgZm9yIHRoZSBwcm9taXNlIGl0IHJl
        dHVybnMuCgogICAgVGhpcyBtZXRob2QgY2FsbHMgdGhlIGFkYXB0ZXIncyBg
        ZmluZGAgbWV0aG9kLCB3aGljaCByZXR1cm5zIGEgcHJvbWlzZS4gV2hlbgog
        ICAgKip0aGF0KiogcHJvbWlzZSByZXNvbHZlcywgYHJlbG9hZFJlY29yZGAg
        d2lsbCByZXNvbHZlIHRoZSBwcm9taXNlIHJldHVybmVkCiAgICBieSB0aGUg
        cmVjb3JkJ3MgYHJlbG9hZGAuCgogICAgQG1ldGhvZCByZWxvYWRSZWNvcmQK
        ICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAg
        IEBwYXJhbSB7UmVzb2x2ZXJ9IHJlc29sdmVyCiAgKi8KICByZWxvYWRSZWNv
        cmQ6IGZ1bmN0aW9uKHJlY29yZCwgcmVzb2x2ZXIpIHsKICAgIHZhciB0eXBl
        ID0gcmVjb3JkLmNvbnN0cnVjdG9yLAogICAgICAgIGFkYXB0ZXIgPSB0aGlz
        LmFkYXB0ZXJGb3IodHlwZSksCiAgICAgICAgaWQgPSBnZXQocmVjb3JkLCAn
        aWQnKTsKCiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW5ub3QgcmVsb2FkIGEg
        cmVjb3JkIHdpdGhvdXQgYW4gSUQiLCBpZCk7CiAgICBFbWJlci5hc3NlcnQo
        IllvdSB0cmllZCB0byByZWxvYWQgYSByZWNvcmQgYnV0IHlvdSBoYXZlIG5v
        IGFkYXB0ZXIgKGZvciAiICsgdHlwZSArICIpIiwgYWRhcHRlcik7CiAgICBF
        bWJlci5hc3NlcnQoIllvdSB0cmllZCB0byByZWxvYWQgYSByZWNvcmQgYnV0
        IHlvdXIgYWRhcHRlciBkb2VzIG5vdCBpbXBsZW1lbnQgYGZpbmRgIiwgYWRh
        cHRlci5maW5kKTsKCiAgICByZXR1cm4gX2ZpbmQoYWRhcHRlciwgdGhpcywg
        dHlwZSwgaWQsIHJlc29sdmVyKTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0
        aG9kIHRha2VzIGEgbGlzdCBvZiByZWNvcmRzLCBncm91cHMgdGhlIHJlY29y
        ZHMgYnkgdHlwZSwKICAgIGNvbnZlcnRzIHRoZSByZWNvcmRzIGludG8gSURz
        LCBhbmQgdGhlbiBpbnZva2VzIHRoZSBhZGFwdGVyJ3MgYGZpbmRNYW55YAog
        ICAgbWV0aG9kLgoKICAgIFRoZSByZWNvcmRzIGFyZSBncm91cGVkIGJ5IHR5
        cGUgdG8gaW52b2tlIGBmaW5kTWFueWAgb24gYWRhcHRlcnMKICAgIGZvciBl
        YWNoIHVuaXF1ZSB0eXBlIGluIHJlY29yZHMuCgogICAgSXQgaXMgdXNlZCBi
        b3RoIGJ5IGEgYnJhbmQgbmV3IHJlbGF0aW9uc2hpcCAodmlhIHRoZSBgZmlu
        ZE1hbnlgCiAgICBtZXRob2QpIG9yIHdoZW4gdGhlIGRhdGEgdW5kZXJseWlu
        ZyBhbiBleGlzdGluZyByZWxhdGlvbnNoaXAKICAgIGNoYW5nZXMuCgogICAg
        QG1ldGhvZCBmZXRjaE1hbnkKICAgIEBwcml2YXRlCiAgICBAcGFyYW0gcmVj
        b3JkcwogICAgQHBhcmFtIG93bmVyCiAgKi8KICBmZXRjaE1hbnk6IGZ1bmN0
        aW9uKHJlY29yZHMsIG93bmVyLCByZXNvbHZlcikgewogICAgaWYgKCFyZWNv
        cmRzLmxlbmd0aCkgeyByZXR1cm47IH0KCiAgICAvLyBHcm91cCBCeSBUeXBl
        CiAgICB2YXIgcmVjb3Jkc0J5VHlwZU1hcCA9IEVtYmVyLk1hcFdpdGhEZWZh
        dWx0LmNyZWF0ZSh7CiAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24oKSB7
        IHJldHVybiBFbWJlci5BKCk7IH0KICAgIH0pOwoKICAgIGZvckVhY2gocmVj
        b3JkcywgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZHNCeVR5cGVN
        YXAuZ2V0KHJlY29yZC5jb25zdHJ1Y3RvcikucHVzaChyZWNvcmQpOwogICAg
        fSk7CgogICAgZm9yRWFjaChyZWNvcmRzQnlUeXBlTWFwLCBmdW5jdGlvbih0
        eXBlLCByZWNvcmRzKSB7CiAgICAgIHZhciBpZHMgPSByZWNvcmRzLm1hcFBy
        b3BlcnR5KCdpZCcpLAogICAgICAgICAgYWRhcHRlciA9IHRoaXMuYWRhcHRl
        ckZvcih0eXBlKTsKCiAgICAgIEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRv
        IGxvYWQgbWFueSByZWNvcmRzIGJ1dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChm
        b3IgIiArIHR5cGUgKyAiKSIsIGFkYXB0ZXIpOwogICAgICBFbWJlci5hc3Nl
        cnQoIllvdSB0cmllZCB0byBsb2FkIG1hbnkgcmVjb3JkcyBidXQgeW91ciBh
        ZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZE1hbnlgIiwgYWRhcHRl
        ci5maW5kTWFueSk7CgogICAgICBfZmluZE1hbnkoYWRhcHRlciwgdGhpcywg
        dHlwZSwgaWRzLCBvd25lciwgcmVzb2x2ZXIpOwogICAgfSwgdGhpcyk7CiAg
        fSwKCiAgLyoqCiAgICBSZXR1cm5zIHRydWUgaWYgYSByZWNvcmQgZm9yIGEg
        Z2l2ZW4gdHlwZSBhbmQgSUQgaXMgYWxyZWFkeSBsb2FkZWQuCgogICAgQG1l
        dGhvZCBoYXNSZWNvcmRGb3JJZAogICAgQHBhcmFtIHtEUy5Nb2RlbH0gdHlw
        ZQogICAgQHBhcmFtIHtTdHJpbmd8SW50ZWdlcn0gaWQKICAgIEByZXR1cm5z
        IEJvb2xlYW4KICAqLwogIGhhc1JlY29yZEZvcklkOiBmdW5jdGlvbih0eXBl
        LCBpZCkgewogICAgaWQgPSBjb2VyY2VJZChpZCk7CgogICAgcmV0dXJuICEh
        dGhpcy50eXBlTWFwRm9yKHR5cGUpLmlkVG9SZWNvcmRbaWRdOwogIH0sCgog
        IC8qKgogICAgUmV0dXJucyBpZCByZWNvcmQgZm9yIGEgZ2l2ZW4gdHlwZSBh
        bmQgSUQuIElmIG9uZSBpc24ndCBhbHJlYWR5IGxvYWRlZCwKICAgIGl0IGJ1
        aWxkcyBhIG5ldyByZWNvcmQgYW5kIGxlYXZlcyBpdCBpbiB0aGUgYGVtcHR5
        YCBzdGF0ZS4KCiAgICBAbWV0aG9kIHJlY29yZEZvcklkCiAgICBAcGFyYW0g
        e1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtTdHJpbmd8SW50ZWdlcn0gaWQK
        ICAgIEByZXR1cm5zIERTLk1vZGVsCiAgKi8KICByZWNvcmRGb3JJZDogZnVu
        Y3Rpb24odHlwZSwgaWQpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5
        cGUpOwoKICAgIGlkID0gY29lcmNlSWQoaWQpOwoKICAgIHZhciByZWNvcmQg
        PSB0aGlzLnR5cGVNYXBGb3IodHlwZSkuaWRUb1JlY29yZFtpZF07CgogICAg
        aWYgKCFyZWNvcmQpIHsKICAgICAgcmVjb3JkID0gdGhpcy5idWlsZFJlY29y
        ZCh0eXBlLCBpZCk7CiAgICB9CgogICAgcmV0dXJuIHJlY29yZDsKICB9LAoK
        ICAvKioKICAgIEBtZXRob2QgZmluZE1hbnkKICAgIEBwcml2YXRlCiAgICBA
        cGFyYW0ge0RTLk1vZGVsfSBvd25lcgogICAgQHBhcmFtIHtBcnJheTxEUy5N
        b2RlbD59IHJlY29yZHMKICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICBA
        cGFyYW0ge1Jlc29sdmVyfSByZXNvbHZlcgogICAgQHJldHVybiBEUy5NYW55
        QXJyYXkKICAqLwogIGZpbmRNYW55OiBmdW5jdGlvbihvd25lciwgcmVjb3Jk
        cywgdHlwZSwgcmVzb2x2ZXIpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9y
        KHR5cGUpOwoKICAgIHJlY29yZHMgPSBFbWJlci5BKHJlY29yZHMpOwoKICAg
        IHZhciB1bmxvYWRlZFJlY29yZHMgPSByZWNvcmRzLmZpbHRlclByb3BlcnR5
        KCdpc0VtcHR5JywgdHJ1ZSksCiAgICAgICAgbWFueUFycmF5ID0gdGhpcy5y
        ZWNvcmRBcnJheU1hbmFnZXIuY3JlYXRlTWFueUFycmF5KHR5cGUsIHJlY29y
        ZHMpOwoKICAgIGZvckVhY2godW5sb2FkZWRSZWNvcmRzLCBmdW5jdGlvbihy
        ZWNvcmQpIHsKICAgICAgcmVjb3JkLmxvYWRpbmdEYXRhKCk7CiAgICB9KTsK
        CiAgICBtYW55QXJyYXkubG9hZGluZ1JlY29yZHNDb3VudCA9IHVubG9hZGVk
        UmVjb3Jkcy5sZW5ndGg7CgogICAgaWYgKHVubG9hZGVkUmVjb3Jkcy5sZW5n
        dGgpIHsKICAgICAgZm9yRWFjaCh1bmxvYWRlZFJlY29yZHMsIGZ1bmN0aW9u
        KHJlY29yZCkgewogICAgICAgIHRoaXMucmVjb3JkQXJyYXlNYW5hZ2VyLnJl
        Z2lzdGVyV2FpdGluZ1JlY29yZEFycmF5KHJlY29yZCwgbWFueUFycmF5KTsK
        ICAgICAgfSwgdGhpcyk7CgogICAgICB0aGlzLmZldGNoTWFueSh1bmxvYWRl
        ZFJlY29yZHMsIG93bmVyLCByZXNvbHZlcik7CiAgICB9IGVsc2UgewogICAg
        ICBpZiAocmVzb2x2ZXIpIHsgcmVzb2x2ZXIucmVzb2x2ZSgpOyB9CiAgICAg
        IG1hbnlBcnJheS5zZXQoJ2lzTG9hZGVkJywgdHJ1ZSk7CiAgICAgIEVtYmVy
        LnJ1bi5vbmNlKG1hbnlBcnJheSwgJ3RyaWdnZXInLCAnZGlkTG9hZCcpOwog
        ICAgfQoKICAgIHJldHVybiBtYW55QXJyYXk7CiAgfSwKCiAgLyoqCiAgICBJ
        ZiBhIHJlbGF0aW9uc2hpcCB3YXMgb3JpZ2luYWxseSBwb3B1bGF0ZWQgYnkg
        dGhlIGFkYXB0ZXIgYXMgYSBsaW5rCiAgICAoYXMgb3Bwb3NlZCB0byBhIGxp
        c3Qgb2YgSURzKSwgdGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlCiAg
        ICByZWxhdGlvbnNoaXAgaXMgZmV0Y2hlZC4KCiAgICBUaGUgbGluayAod2hp
        Y2ggaXMgdXN1YWxseSBhIFVSTCkgaXMgcGFzc2VkIHRocm91Z2ggdW5jaGFu
        Z2VkLCBzbyB0aGUKICAgIGFkYXB0ZXIgY2FuIG1ha2Ugd2hhdGV2ZXIgcmVx
        dWVzdCBpdCB3YW50cy4KCiAgICBUaGUgdXN1YWwgdXNlLWNhc2UgaXMgZm9y
        IHRoZSBzZXJ2ZXIgdG8gcmVnaXN0ZXIgYSBVUkwgYXMgYSBsaW5rLCBhbmQK
        ICAgIHRoZW4gdXNlIHRoYXQgVVJMIGluIHRoZSBmdXR1cmUgdG8gbWFrZSBh
        IHJlcXVlc3QgZm9yIHRoZSByZWxhdGlvbnNoaXAuCgogICAgQG1ldGhvZCBm
        aW5kSGFzTWFueQogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9
        IG93bmVyCiAgICBAcGFyYW0ge2FueX0gbGluawogICAgQHBhcmFtIHtTdHJp
        bmd9IHR5cGUKICAgIEBwYXJhbSB7UmVzb2x2ZXJ9IHJlc29sdmVyCiAgICBA
        cmV0dXJuIERTLk1hbnlBcnJheQogICovCiAgZmluZEhhc01hbnk6IGZ1bmN0
        aW9uKG93bmVyLCBsaW5rLCByZWxhdGlvbnNoaXAsIHJlc29sdmVyKSB7CiAg
        ICB2YXIgYWRhcHRlciA9IHRoaXMuYWRhcHRlckZvcihvd25lci5jb25zdHJ1
        Y3Rvcik7CgogICAgRW1iZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gbG9hZCBh
        IGhhc01hbnkgcmVsYXRpb25zaGlwIGJ1dCB5b3UgaGF2ZSBubyBhZGFwdGVy
        IChmb3IgIiArIG93bmVyLmNvbnN0cnVjdG9yICsgIikiLCBhZGFwdGVyKTsK
        ICAgIEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGxvYWQgYSBoYXNNYW55
        IHJlbGF0aW9uc2hpcCBmcm9tIGEgc3BlY2lmaWVkIGBsaW5rYCBpbiB0aGUg
        b3JpZ2luYWwgcGF5bG9hZCBidXQgeW91ciBhZGFwdGVyIGRvZXMgbm90IGlt
        cGxlbWVudCBgZmluZEhhc01hbnlgIiwgYWRhcHRlci5maW5kSGFzTWFueSk7
        CgogICAgdmFyIHJlY29yZHMgPSB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5j
        cmVhdGVNYW55QXJyYXkocmVsYXRpb25zaGlwLnR5cGUsIEVtYmVyLkEoW10p
        KTsKICAgIF9maW5kSGFzTWFueShhZGFwdGVyLCB0aGlzLCBvd25lciwgbGlu
        aywgcmVsYXRpb25zaGlwLCByZXNvbHZlcik7CiAgICByZXR1cm4gcmVjb3Jk
        czsKICB9LAoKICBmaW5kQmVsb25nc1RvOiBmdW5jdGlvbihvd25lciwgbGlu
        aywgcmVsYXRpb25zaGlwLCByZXNvbHZlcikgewogICAgdmFyIGFkYXB0ZXIg
        PSB0aGlzLmFkYXB0ZXJGb3Iob3duZXIuY29uc3RydWN0b3IpOwoKICAgIEVt
        YmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGxvYWQgYSBiZWxvbmdzVG8gcmVs
        YXRpb25zaGlwIGJ1dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3IgIiArIG93
        bmVyLmNvbnN0cnVjdG9yICsgIikiLCBhZGFwdGVyKTsKICAgIEVtYmVyLmFz
        c2VydCgiWW91IHRyaWVkIHRvIGxvYWQgYSBiZWxvbmdzVG8gcmVsYXRpb25z
        aGlwIGZyb20gYSBzcGVjaWZpZWQgYGxpbmtgIGluIHRoZSBvcmlnaW5hbCBw
        YXlsb2FkIGJ1dCB5b3VyIGFkYXB0ZXIgZG9lcyBub3QgaW1wbGVtZW50IGBm
        aW5kQmVsb25nc1RvYCIsIGFkYXB0ZXIuZmluZEJlbG9uZ3NUbyk7CgogICAg
        X2ZpbmRCZWxvbmdzVG8oYWRhcHRlciwgdGhpcywgb3duZXIsIGxpbmssIHJl
        bGF0aW9uc2hpcCwgcmVzb2x2ZXIpOwogIH0sCgogIC8qKgogICAgVGhpcyBt
        ZXRob2QgZGVsZWdhdGVzIGEgcXVlcnkgdG8gdGhlIGFkYXB0ZXIuIFRoaXMg
        aXMgdGhlIG9uZSBwbGFjZSB3aGVyZQogICAgYWRhcHRlci1sZXZlbCBzZW1h
        bnRpY3MgYXJlIGV4cG9zZWQgdG8gdGhlIGFwcGxpY2F0aW9uLgoKICAgIEV4
        cG9zaW5nIHF1ZXJpZXMgdGhpcyB3YXkgc2VlbXMgcHJlZmVyYWJsZSB0byBj
        cmVhdGluZyBhbiBhYnN0cmFjdCBxdWVyeQogICAgbGFuZ3VhZ2UgZm9yIGFs
        bCBzZXJ2ZXItc2lkZSBxdWVyaWVzLCBhbmQgdGhlbiByZXF1aXJlIGFsbCBh
        ZGFwdGVycyB0bwogICAgaW1wbGVtZW50IHRoZW0uCgogICAgVGhpcyBtZXRo
        b2QgcmV0dXJucyBhIHByb21pc2UsIHdoaWNoIGlzIHJlc29sdmVkIHdpdGgg
        YSBgUmVjb3JkQXJyYXlgCiAgICBvbmNlIHRoZSBzZXJ2ZXIgcmV0dXJucy4K
        CiAgICBAbWV0aG9kIGZpbmRRdWVyeQogICAgQHByaXZhdGUKICAgIEBwYXJh
        bSB7U3RyaW5nfSB0eXBlCiAgICBAcGFyYW0ge2FueX0gcXVlcnkgYW4gb3Bh
        cXVlIHF1ZXJ5IHRvIGJlIHVzZWQgYnkgdGhlIGFkYXB0ZXIKICAgIEByZXR1
        cm4gUHJvbWlzZQogICovCiAgZmluZFF1ZXJ5OiBmdW5jdGlvbih0eXBlLCBx
        dWVyeSkgewogICAgdHlwZSA9IHRoaXMubW9kZWxGb3IodHlwZSk7CgogICAg
        dmFyIGFycmF5ID0gRFMuQWRhcHRlclBvcHVsYXRlZFJlY29yZEFycmF5LmNy
        ZWF0ZSh7CiAgICAgIHR5cGU6IHR5cGUsCiAgICAgIHF1ZXJ5OiBxdWVyeSwK
        ICAgICAgY29udGVudDogRW1iZXIuQSgpLAogICAgICBzdG9yZTogdGhpcwog
        ICAgfSk7CgogICAgdmFyIGFkYXB0ZXIgPSB0aGlzLmFkYXB0ZXJGb3IodHlw
        ZSksCiAgICAgICAgcmVzb2x2ZXIgPSBFbWJlci5SU1ZQLmRlZmVyKCk7Cgog
        ICAgRW1iZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gbG9hZCBhIHF1ZXJ5IGJ1
        dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3IgIiArIHR5cGUgKyAiKSIsIGFk
        YXB0ZXIpOwogICAgRW1iZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gbG9hZCBh
        IHF1ZXJ5IGJ1dCB5b3VyIGFkYXB0ZXIgZG9lcyBub3QgaW1wbGVtZW50IGBm
        aW5kUXVlcnlgIiwgYWRhcHRlci5maW5kUXVlcnkpOwoKICAgIF9maW5kUXVl
        cnkoYWRhcHRlciwgdGhpcywgdHlwZSwgcXVlcnksIGFycmF5LCByZXNvbHZl
        cik7CgogICAgcmV0dXJuIHByb21pc2VBcnJheShyZXNvbHZlci5wcm9taXNl
        KTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgYW4gYXJy
        YXkgb2YgYWxsIHJlY29yZHMgYWRhcHRlciBjYW4gZmluZC4KICAgIEl0IHRy
        aWdnZXJzIHRoZSBhZGFwdGVyJ3MgYGZpbmRBbGxgIG1ldGhvZCB0byBnaXZl
        IGl0IGFuIG9wcG9ydHVuaXR5IHRvIHBvcHVsYXRlCiAgICB0aGUgYXJyYXkg
        d2l0aCByZWNvcmRzIG9mIHRoYXQgdHlwZS4KCiAgICBAbWV0aG9kIGZpbmRB
        bGwKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlCiAgICBA
        cmV0dXJuIHtEUy5BZGFwdGVyUG9wdWxhdGVkUmVjb3JkQXJyYXl9CiAgKi8K
        ICBmaW5kQWxsOiBmdW5jdGlvbih0eXBlKSB7CiAgICB0eXBlID0gdGhpcy5t
        b2RlbEZvcih0eXBlKTsKCiAgICByZXR1cm4gdGhpcy5mZXRjaEFsbCh0eXBl
        LCB0aGlzLmFsbCh0eXBlKSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGZl
        dGNoQWxsCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHR5cGUKICAgIEBwYXJh
        bSBhcnJheQogICAgQHJldHVybnMgUHJvbWlzZQogICovCiAgZmV0Y2hBbGw6
        IGZ1bmN0aW9uKHR5cGUsIGFycmF5KSB7CiAgICB2YXIgYWRhcHRlciA9IHRo
        aXMuYWRhcHRlckZvcih0eXBlKSwKICAgICAgICBzaW5jZVRva2VuID0gdGhp
        cy50eXBlTWFwRm9yKHR5cGUpLm1ldGFkYXRhLnNpbmNlLAogICAgICAgIHJl
        c29sdmVyID0gRW1iZXIuUlNWUC5kZWZlcigpOwoKICAgIHNldChhcnJheSwg
        J2lzVXBkYXRpbmcnLCB0cnVlKTsKCiAgICBFbWJlci5hc3NlcnQoIllvdSB0
        cmllZCB0byBsb2FkIGFsbCByZWNvcmRzIGJ1dCB5b3UgaGF2ZSBubyBhZGFw
        dGVyIChmb3IgIiArIHR5cGUgKyAiKSIsIGFkYXB0ZXIpOwogICAgRW1iZXIu
        YXNzZXJ0KCJZb3UgdHJpZWQgdG8gbG9hZCBhbGwgcmVjb3JkcyBidXQgeW91
        ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZEFsbGAiLCBhZGFw
        dGVyLmZpbmRBbGwpOwoKICAgIF9maW5kQWxsKGFkYXB0ZXIsIHRoaXMsIHR5
        cGUsIHNpbmNlVG9rZW4sIHJlc29sdmVyKTsKCiAgICByZXR1cm4gcHJvbWlz
        ZUFycmF5KHJlc29sdmVyLnByb21pc2UpOwogIH0sCgogIC8qKgogICAgQG1l
        dGhvZCBkaWRVcGRhdGVBbGwKICAgIEBwYXJhbSB0eXBlCiAgKi8KICBkaWRV
        cGRhdGVBbGw6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHZhciBmaW5kQWxsQ2Fj
        aGUgPSB0aGlzLnR5cGVNYXBGb3IodHlwZSkuZmluZEFsbENhY2hlOwogICAg
        c2V0KGZpbmRBbGxDYWNoZSwgJ2lzVXBkYXRpbmcnLCBmYWxzZSk7CiAgfSwK
        CiAgLyoqCiAgICBUaGlzIG1ldGhvZCByZXR1cm5zIGEgZmlsdGVyZWQgYXJy
        YXkgdGhhdCBjb250YWlucyBhbGwgb2YgdGhlIGtub3duIHJlY29yZHMKICAg
        IGZvciBhIGdpdmVuIHR5cGUuCgogICAgTm90ZSB0aGF0IGJlY2F1c2UgaXQn
        cyBqdXN0IGEgZmlsdGVyLCBpdCB3aWxsIGhhdmUgYW55IGxvY2FsbHkKICAg
        IGNyZWF0ZWQgcmVjb3JkcyBvZiB0aGUgdHlwZS4KCiAgICBBbHNvIG5vdGUg
        dGhhdCBtdWx0aXBsZSBjYWxscyB0byBgYWxsYCBmb3IgYSBnaXZlbiB0eXBl
        IHdpbGwgYWx3YXlzCiAgICByZXR1cm4gdGhlIHNhbWUgUmVjb3JkQXJyYXku
        CgogICAgQG1ldGhvZCBhbGwKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAg
        IEByZXR1cm4ge0RTLlJlY29yZEFycmF5fQogICovCiAgYWxsOiBmdW5jdGlv
        bih0eXBlKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0eXBlKTsKCiAg
        ICB2YXIgdHlwZU1hcCA9IHRoaXMudHlwZU1hcEZvcih0eXBlKSwKICAgICAg
        ICBmaW5kQWxsQ2FjaGUgPSB0eXBlTWFwLmZpbmRBbGxDYWNoZTsKCiAgICBp
        ZiAoZmluZEFsbENhY2hlKSB7IHJldHVybiBmaW5kQWxsQ2FjaGU7IH0KCiAg
        ICB2YXIgYXJyYXkgPSBEUy5SZWNvcmRBcnJheS5jcmVhdGUoewogICAgICB0
        eXBlOiB0eXBlLAogICAgICBjb250ZW50OiBFbWJlci5BKCksCiAgICAgIHN0
        b3JlOiB0aGlzLAogICAgICBpc0xvYWRlZDogdHJ1ZQogICAgfSk7CgogICAg
        dGhpcy5yZWNvcmRBcnJheU1hbmFnZXIucmVnaXN0ZXJGaWx0ZXJlZFJlY29y
        ZEFycmF5KGFycmF5LCB0eXBlKTsKCiAgICB0eXBlTWFwLmZpbmRBbGxDYWNo
        ZSA9IGFycmF5OwogICAgcmV0dXJuIGFycmF5OwogIH0sCgoKICAvKioKICAg
        IFRoaXMgbWV0aG9kIHVubG9hZHMgYWxsIG9mIHRoZSBrbm93biByZWNvcmRz
        IGZvciBhIGdpdmVuIHR5cGUuCgogICAgQG1ldGhvZCB1bmxvYWRBbGwKICAg
        IEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAqLwogIHVubG9hZEFsbDogZnVuY3Rp
        b24odHlwZSkgewogICAgdHlwZSA9IHRoaXMubW9kZWxGb3IodHlwZSk7Cgog
        ICAgdmFyIHR5cGVNYXAgPSB0aGlzLnR5cGVNYXBGb3IodHlwZSksCiAgICAg
        ICAgcmVjb3JkcyA9IHR5cGVNYXAucmVjb3JkcywgcmVjb3JkOwoKICAgIHdo
        aWxlKHJlY29yZCA9IHJlY29yZHMucG9wKCkpIHsKICAgICAgcmVjb3JkLnVu
        bG9hZFJlY29yZCgpOwogICAgfQogIH0sCgogIC8qKgogICAgVGFrZXMgYSB0
        eXBlIGFuZCBmaWx0ZXIgZnVuY3Rpb24sIGFuZCByZXR1cm5zIGEgbGl2ZSBS
        ZWNvcmRBcnJheSB0aGF0CiAgICByZW1haW5zIHVwIHRvIGRhdGUgYXMgbmV3
        IHJlY29yZHMgYXJlIGxvYWRlZCBpbnRvIHRoZSBzdG9yZSBvciBjcmVhdGVk
        CiAgICBsb2NhbGx5LgoKICAgIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0YWtl
        cyBhIG1hdGVyaWFsaXplZCByZWNvcmQsIGFuZCByZXR1cm5zIHRydWUKICAg
        IGlmIHRoZSByZWNvcmQgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBmaWx0
        ZXIgYW5kIGZhbHNlIGlmIGl0IHNob3VsZAogICAgbm90LgoKICAgIFRoZSBm
        aWx0ZXIgZnVuY3Rpb24gaXMgY2FsbGVkIG9uY2Ugb24gYWxsIHJlY29yZHMg
        Zm9yIHRoZSB0eXBlIHdoZW4KICAgIGl0IGlzIGNyZWF0ZWQsIGFuZCB0aGVu
        IG9uY2Ugb24gZWFjaCBuZXdseSBsb2FkZWQgb3IgY3JlYXRlZCByZWNvcmQu
        CgogICAgSWYgYW55IG9mIGEgcmVjb3JkJ3MgcHJvcGVydGllcyBjaGFuZ2Us
        IG9yIGlmIGl0IGNoYW5nZXMgc3RhdGUsIHRoZQogICAgZmlsdGVyIGZ1bmN0
        aW9uIHdpbGwgYmUgaW52b2tlZCBhZ2FpbiB0byBkZXRlcm1pbmUgd2hldGhl
        ciBpdCBzaG91bGQKICAgIHN0aWxsIGJlIGluIHRoZSBhcnJheS4KICAgIAog
        ICAgT3B0aW9uYWxseSB5b3UgY2FuIHBhc3MgYSBxdWVyeSB3aGljaCB3aWxs
        IGJlIHRyaWdnZXJlZCBhdCBmaXJzdC4gVGhlCiAgICByZXN1bHRzIHJldHVy
        bmVkIGJ5IHRoZSBzZXJ2ZXIgY291bGQgdGhlbiBhcHBlYXIgaW4gdGhlIGZp
        bHRlciBpZiB0aGV5CiAgICBtYXRjaCB0aGUgZmlsdGVyIGZ1bmN0aW9uLgoK
        ICAgIEBtZXRob2QgZmlsdGVyCiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlCiAg
        ICBAcGFyYW0ge09iamVjdH0gcXVlcnkgb3B0aW9uYWwgcXVlcnkKICAgIEBw
        YXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICAgQHJldHVybiB7RFMuRmlsdGVy
        ZWRSZWNvcmRBcnJheX0KICAqLwogIGZpbHRlcjogZnVuY3Rpb24odHlwZSwg
        cXVlcnksIGZpbHRlcikgewogICAgdmFyIHByb21pc2U7CgogICAgLy8gYWxs
        b3cgYW4gb3B0aW9uYWwgc2VydmVyIHF1ZXJ5CiAgICBpZiAoYXJndW1lbnRz
        Lmxlbmd0aCA9PT0gMykgewogICAgICBwcm9taXNlID0gdGhpcy5maW5kUXVl
        cnkodHlwZSwgcXVlcnkpOwogICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVu
        Z3RoID09PSAyKSB7CiAgICAgIGZpbHRlciA9IHF1ZXJ5OwogICAgfQoKICAg
        IHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUpOwoKICAgIHZhciBhcnJheSA9
        IERTLkZpbHRlcmVkUmVjb3JkQXJyYXkuY3JlYXRlKHsKICAgICAgdHlwZTog
        dHlwZSwKICAgICAgY29udGVudDogRW1iZXIuQSgpLAogICAgICBzdG9yZTog
        dGhpcywKICAgICAgbWFuYWdlcjogdGhpcy5yZWNvcmRBcnJheU1hbmFnZXIs
        CiAgICAgIGZpbHRlckZ1bmN0aW9uOiBmaWx0ZXIKICAgIH0pOwoKICAgIHRo
        aXMucmVjb3JkQXJyYXlNYW5hZ2VyLnJlZ2lzdGVyRmlsdGVyZWRSZWNvcmRB
        cnJheShhcnJheSwgdHlwZSwgZmlsdGVyKTsKCiAgICBpZiAocHJvbWlzZSkg
        ewogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkgeyByZXR1
        cm4gYXJyYXk7IH0pOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGFycmF5
        OwogICAgfQogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgcmV0dXJucyBp
        ZiBhIGNlcnRhaW4gcmVjb3JkIGlzIGFscmVhZHkgbG9hZGVkCiAgICBpbiB0
        aGUgc3RvcmUuIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIGtub3cgYmVmb3JlaGFu
        ZCBpZiBhIGZpbmQoKQogICAgd2lsbCByZXN1bHQgaW4gYSByZXF1ZXN0IG9y
        IHRoYXQgaXQgd2lsbCBiZSBhIGNhY2hlIGhpdC4KCiAgICBAbWV0aG9kIHJl
        Y29yZElzTG9hZGVkCiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlCiAgICBAcGFy
        YW0ge3N0cmluZ30gaWQKICAgIEByZXR1cm4ge2Jvb2xlYW59CiAgKi8KICBy
        ZWNvcmRJc0xvYWRlZDogZnVuY3Rpb24odHlwZSwgaWQpIHsKICAgIGlmICgh
        dGhpcy5oYXNSZWNvcmRGb3JJZCh0eXBlLCBpZCkpIHsgcmV0dXJuIGZhbHNl
        OyB9CiAgICByZXR1cm4gIWdldCh0aGlzLnJlY29yZEZvcklkKHR5cGUsIGlk
        KSwgJ2lzRW1wdHknKTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIHJl
        dHVybnMgdGhlIG1ldGFkYXRhIGZvciBhIHNwZWNpZmljIHR5cGUuCgogICAg
        QG1ldGhvZCBtZXRhZGF0YUZvcgogICAgQHBhcmFtIHtzdHJpbmd9IHR5cGUK
        ICAgIEByZXR1cm4ge29iamVjdH0KICAqLwogIG1ldGFkYXRhRm9yOiBmdW5j
        dGlvbih0eXBlKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0eXBlKTsK
        ICAgIHJldHVybiB0aGlzLnR5cGVNYXBGb3IodHlwZSkubWV0YWRhdGE7CiAg
        fSwKCiAgLy8gLi4uLi4uLi4uLi4uCiAgLy8gLiBVUERBVElORyAuCiAgLy8g
        Li4uLi4uLi4uLi4uCgogIC8qKgogICAgSWYgdGhlIGFkYXB0ZXIgdXBkYXRl
        cyBhdHRyaWJ1dGVzIG9yIGFja25vd2xlZGdlcyBjcmVhdGlvbgogICAgb3Ig
        ZGVsZXRpb24sIHRoZSByZWNvcmQgd2lsbCBub3RpZnkgdGhlIHN0b3JlIHRv
        IHVwZGF0ZSBpdHMKICAgIG1lbWJlcnNoaXAgaW4gYW55IGZpbHRlcnMuCgog
        ICAgVG8gYXZvaWQgdGhyYXNoaW5nLCB0aGlzIG1ldGhvZCBpcyBpbnZva2Vk
        IG9ubHkgb25jZSBwZXIKICAgIHJ1biBsb29wIHBlciByZWNvcmQuCgogICAg
        QG1ldGhvZCBkYXRhV2FzVXBkYXRlZAogICAgQHByaXZhdGUKICAgIEBwYXJh
        bSB7Q2xhc3N9IHR5cGUKICAgIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gY2xp
        ZW50SWQKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICovCiAgZGF0
        YVdhc1VwZGF0ZWQ6IGZ1bmN0aW9uKHR5cGUsIHJlY29yZCkgewogICAgLy8g
        QmVjYXVzZSBkYXRhIHVwZGF0ZXMgYXJlIGludm9rZWQgYXQgdGhlIGVuZCBv
        ZiB0aGUgcnVuIGxvb3AsCiAgICAvLyBpdCBpcyBwb3NzaWJsZSB0aGF0IGEg
        cmVjb3JkIG1pZ2h0IGJlIGRlbGV0ZWQgYWZ0ZXIgaXRzIGRhdGEKICAgIC8v
        IGhhcyBiZWVuIG1vZGlmaWVkIGFuZCB0aGlzIG1ldGhvZCB3YXMgc2NoZWR1
        bGVkIHRvIGJlIGNhbGxlZC4KICAgIC8vCiAgICAvLyBJZiB0aGF0J3MgdGhl
        IGNhc2UsIHRoZSByZWNvcmQgd291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gcmVt
        b3ZlZAogICAgLy8gZnJvbSBhbGwgcmVjb3JkIGFycmF5czsgY2FsbGluZyB1
        cGRhdGVSZWNvcmRBcnJheXMgd291bGQganVzdAogICAgLy8gYWRkIGl0IGJh
        Y2suIElmIHRoZSByZWNvcmQgaXMgZGVsZXRlZCwganVzdCBiYWlsLiBJdCBz
        aG91bGRuJ3QKICAgIC8vIGdpdmUgdXMgYW55IG1vcmUgdHJvdWJsZSBhZnRl
        ciB0aGlzLgoKICAgIGlmIChnZXQocmVjb3JkLCAnaXNEZWxldGVkJykpIHsg
        cmV0dXJuOyB9CgogICAgaWYgKGdldChyZWNvcmQsICdpc0xvYWRlZCcpKSB7
        CiAgICAgIHRoaXMucmVjb3JkQXJyYXlNYW5hZ2VyLnJlY29yZERpZENoYW5n
        ZShyZWNvcmQpOwogICAgfQogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uCiAg
        Ly8gLiBQRVJTSVNUSU5HIC4KICAvLyAuLi4uLi4uLi4uLi4uLgoKICAvKioK
        ICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBgcmVjb3JkLnNhdmVgLCBh
        bmQgZ2V0cyBwYXNzZWQgYQogICAgcmVzb2x2ZXIgZm9yIHRoZSBwcm9taXNl
        IHRoYXQgYHJlY29yZC5zYXZlYCByZXR1cm5zLgoKICAgIEl0IHNjaGVkdWxl
        cyBzYXZpbmcgdG8gaGFwcGVuIGF0IHRoZSBlbmQgb2YgdGhlIHJ1biBsb29w
        LgoKICAgIEBtZXRob2Qgc2NoZWR1bGVTYXZlCiAgICBAcHJpdmF0ZQogICAg
        QHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFyYW0ge1Jlc29sdmVy
        fSByZXNvbHZlcgogICovCiAgc2NoZWR1bGVTYXZlOiBmdW5jdGlvbihyZWNv
        cmQsIHJlc29sdmVyKSB7CiAgICByZWNvcmQuYWRhcHRlcldpbGxDb21taXQo
        KTsKICAgIHRoaXMuX3BlbmRpbmdTYXZlLnB1c2goW3JlY29yZCwgcmVzb2x2
        ZXJdKTsKICAgIG9uY2UodGhpcywgJ2ZsdXNoUGVuZGluZ1NhdmUnKTsKICB9
        LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhdCB0aGUgZW5k
        IG9mIHRoZSBydW4gbG9vcCwgYW5kCiAgICBmbHVzaGVzIGFueSByZWNvcmRz
        IHBhc3NlZCBpbnRvIGBzY2hlZHVsZVNhdmVgCgogICAgQG1ldGhvZCBmbHVz
        aFBlbmRpbmdTYXZlCiAgICBAcHJpdmF0ZQogICovCiAgZmx1c2hQZW5kaW5n
        U2F2ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcGVuZGluZyA9IHRoaXMuX3Bl
        bmRpbmdTYXZlLnNsaWNlKCk7CiAgICB0aGlzLl9wZW5kaW5nU2F2ZSA9IFtd
        OwoKICAgIGZvckVhY2gocGVuZGluZywgZnVuY3Rpb24odHVwbGUpIHsKICAg
        ICAgdmFyIHJlY29yZCA9IHR1cGxlWzBdLCByZXNvbHZlciA9IHR1cGxlWzFd
        LAogICAgICAgICAgYWRhcHRlciA9IHRoaXMuYWRhcHRlckZvcihyZWNvcmQu
        Y29uc3RydWN0b3IpLAogICAgICAgICAgb3BlcmF0aW9uOwoKICAgICAgaWYg
        KGdldChyZWNvcmQsICdpc05ldycpKSB7CiAgICAgICAgb3BlcmF0aW9uID0g
        J2NyZWF0ZVJlY29yZCc7CiAgICAgIH0gZWxzZSBpZiAoZ2V0KHJlY29yZCwg
        J2lzRGVsZXRlZCcpKSB7CiAgICAgICAgb3BlcmF0aW9uID0gJ2RlbGV0ZVJl
        Y29yZCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3BlcmF0aW9uID0gJ3Vw
        ZGF0ZVJlY29yZCc7CiAgICAgIH0KCiAgICAgIF9jb21taXQoYWRhcHRlciwg
        dGhpcywgb3BlcmF0aW9uLCByZWNvcmQsIHJlc29sdmVyKTsKICAgIH0sIHRo
        aXMpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIG9u
        Y2UgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYW4KICAgIGFkYXB0ZXIncyBg
        Y3JlYXRlUmVjb3JkYCwgYHVwZGF0ZVJlY29yZGAgb3IgYGRlbGV0ZVJlY29y
        ZGAKICAgIGlzIHJlc29sdmVkLgoKICAgIElmIHRoZSBkYXRhIHByb3ZpZGVz
        IGEgc2VydmVyLWdlbmVyYXRlZCBJRCwgaXQgd2lsbAogICAgdXBkYXRlIHRo
        ZSByZWNvcmQgYW5kIHRoZSBzdG9yZSdzIGluZGV4ZXMuCgogICAgQG1ldGhv
        ZCBkaWRTYXZlUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5N
        b2RlbH0gcmVjb3JkIHRoZSBpbi1mbGlnaHQgcmVjb3JkCiAgICBAcGFyYW0g
        e09iamVjdH0gZGF0YSBvcHRpb25hbCBkYXRhIChzZWUgYWJvdmUpCiAgKi8K
        ICBkaWRTYXZlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQsIGRhdGEpIHsKICAg
        IGlmIChkYXRhKSB7CiAgICAgIC8vIG5vcm1hbGl6ZSByZWxhdGlvbnNoaXAg
        SURzIGludG8gcmVjb3JkcwogICAgICBkYXRhID0gbm9ybWFsaXplUmVsYXRp
        b25zaGlwcyh0aGlzLCByZWNvcmQuY29uc3RydWN0b3IsIGRhdGEsIHJlY29y
        ZCk7CgogICAgICB0aGlzLnVwZGF0ZUlkKHJlY29yZCwgZGF0YSk7CiAgICB9
        CgogICAgcmVjb3JkLmFkYXB0ZXJEaWRDb21taXQoZGF0YSk7CiAgfSwKCiAg
        LyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb25jZSB0aGUgcHJvbWlz
        ZSByZXR1cm5lZCBieSBhbgogICAgYWRhcHRlcidzIGBjcmVhdGVSZWNvcmRg
        LCBgdXBkYXRlUmVjb3JkYCBvciBgZGVsZXRlUmVjb3JkYAogICAgaXMgcmVq
        ZWN0ZWQgd2l0aCBhIGBEUy5JbnZhbGlkRXJyb3JgLgoKICAgIEBtZXRob2Qg
        cmVjb3JkV2FzSW52YWxpZAogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7RFMu
        TW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtPYmplY3R9IGVycm9ycwogICov
        CiAgcmVjb3JkV2FzSW52YWxpZDogZnVuY3Rpb24ocmVjb3JkLCBlcnJvcnMp
        IHsKICAgIHJlY29yZC5hZGFwdGVyRGlkSW52YWxpZGF0ZShlcnJvcnMpOwog
        IH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uY2UgdGhl
        IHByb21pc2UgcmV0dXJuZWQgYnkgYW4KICAgIGFkYXB0ZXIncyBgY3JlYXRl
        UmVjb3JkYCwgYHVwZGF0ZVJlY29yZGAgb3IgYGRlbGV0ZVJlY29yZGAKICAg
        IGlzIHJlamVjdGVkICh3aXRoIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRFMu
        SW52YWxpZEVycm9yYCkuCgogICAgQG1ldGhvZCByZWNvcmRXYXNFcnJvcgog
        ICAgQHByaXZhdGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICov
        CiAgcmVjb3JkV2FzRXJyb3I6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgcmVj
        b3JkLmFkYXB0ZXJEaWRFcnJvcigpOwogIH0sCgogIC8qKgogICAgV2hlbiBh
        biBhZGFwdGVyJ3MgYGNyZWF0ZVJlY29yZGAsIGB1cGRhdGVSZWNvcmRgIG9y
        IGBkZWxldGVSZWNvcmRgCiAgICByZXNvbHZlcyB3aXRoIGRhdGEsIHRoaXMg
        bWV0aG9kIGV4dHJhY3RzIHRoZSBJRCBmcm9tIHRoZSBzdXBwbGllZAogICAg
        ZGF0YS4KCiAgICBAbWV0aG9kIHVwZGF0ZUlkCiAgICBAcHJpdmF0ZQogICAg
        QHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFyYW0ge09iamVjdH0g
        ZGF0YQogICovCiAgdXBkYXRlSWQ6IGZ1bmN0aW9uKHJlY29yZCwgZGF0YSkg
        ewogICAgdmFyIG9sZElkID0gZ2V0KHJlY29yZCwgJ2lkJyksCiAgICAgICAg
        aWQgPSBjb2VyY2VJZChkYXRhLmlkKTsKCiAgICBFbWJlci5hc3NlcnQoIkFu
        IGFkYXB0ZXIgY2Fubm90IGFzc2lnbiBhIG5ldyBpZCB0byBhIHJlY29yZCB0
        aGF0IGFscmVhZHkgaGFzIGFuIGlkLiAiICsgcmVjb3JkICsgIiBoYWQgaWQ6
        ICIgKyBvbGRJZCArICIgYW5kIHlvdSB0cmllZCB0byB1cGRhdGUgaXQgd2l0
        aCAiICsgaWQgKyAiLiBUaGlzIGxpa2VseSBoYXBwZW5lZCBiZWNhdXNlIHlv
        dXIgc2VydmVyIHJldHVybmVkIGRhdGEgaW4gcmVzcG9uc2UgdG8gYSBmaW5k
        IG9yIHVwZGF0ZSB0aGF0IGhhZCBhIGRpZmZlcmVudCBpZCB0aGFuIHRoZSBv
        bmUgeW91IHNlbnQuIiwgb2xkSWQgPT09IG51bGwgfHwgaWQgPT09IG9sZElk
        KTsKCiAgICB0aGlzLnR5cGVNYXBGb3IocmVjb3JkLmNvbnN0cnVjdG9yKS5p
        ZFRvUmVjb3JkW2lkXSA9IHJlY29yZDsKCiAgICBzZXQocmVjb3JkLCAnaWQn
        LCBpZCk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGEgbWFwIG9mIElEcyB0
        byBjbGllbnQgSURzIGZvciBhIGdpdmVuIHR5cGUuCgogICAgQG1ldGhvZCB0
        eXBlTWFwRm9yCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHR5cGUKICAqLwog
        IHR5cGVNYXBGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHZhciB0eXBlTWFw
        cyA9IGdldCh0aGlzLCAndHlwZU1hcHMnKSwKICAgICAgICBndWlkID0gRW1i
        ZXIuZ3VpZEZvcih0eXBlKSwKICAgICAgICB0eXBlTWFwOwoKICAgIHR5cGVN
        YXAgPSB0eXBlTWFwc1tndWlkXTsKCiAgICBpZiAodHlwZU1hcCkgeyByZXR1
        cm4gdHlwZU1hcDsgfQoKICAgIHR5cGVNYXAgPSB7CiAgICAgIGlkVG9SZWNv
        cmQ6IHt9LAogICAgICByZWNvcmRzOiBbXSwKICAgICAgbWV0YWRhdGE6IHt9
        CiAgICB9OwoKICAgIHR5cGVNYXBzW2d1aWRdID0gdHlwZU1hcDsKCiAgICBy
        ZXR1cm4gdHlwZU1hcDsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uCiAg
        Ly8gLiBMT0FESU5HIERBVEEgLgogIC8vIC4uLi4uLi4uLi4uLi4uLi4KCiAg
        LyoqCiAgICBUaGlzIGludGVybmFsIG1ldGhvZCBpcyB1c2VkIGJ5IGBwdXNo
        YC4KCiAgICBAbWV0aG9kIF9sb2FkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFt
        IHtEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IGRhdGEKICAg
        IEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbCB0aGUgZGF0YSBzaG91bGQgYmUg
        bWVyZ2VkIGludG8KICAgICAgdGhlIGV4aXN0aW5nIGRhdGEsIG5vdCByZXBs
        YWNlIGl0LgogICovCiAgX2xvYWQ6IGZ1bmN0aW9uKHR5cGUsIGRhdGEsIHBh
        cnRpYWwpIHsKICAgIHZhciBpZCA9IGNvZXJjZUlkKGRhdGEuaWQpLAogICAg
        ICAgIHJlY29yZCA9IHRoaXMucmVjb3JkRm9ySWQodHlwZSwgaWQpOwoKICAg
        IHJlY29yZC5zZXR1cERhdGEoZGF0YSwgcGFydGlhbCk7CiAgICB0aGlzLnJl
        Y29yZEFycmF5TWFuYWdlci5yZWNvcmREaWRDaGFuZ2UocmVjb3JkKTsKCiAg
        ICByZXR1cm4gcmVjb3JkOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBhIG1v
        ZGVsIGNsYXNzIGZvciBhIHBhcnRpY3VsYXIga2V5LiBVc2VkIGJ5CiAgICBt
        ZXRob2RzIHRoYXQgdGFrZSBhIHR5cGUga2V5IChsaWtlIGBmaW5kYCwgYGNy
        ZWF0ZVJlY29yZGAsCiAgICBldGMuKQoKICAgIEBtZXRob2QgbW9kZWxGb3IK
        ICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNsYXNzIG9mIERTLk1vZGVsfSBr
        ZXkKICAgIEByZXR1cm5zIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0KICAqLwog
        IG1vZGVsRm9yOiBmdW5jdGlvbihrZXkpIHsKICAgIHZhciBmYWN0b3J5OwoK
        ICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgewogICAgICBmYWN0
        b3J5ID0gdGhpcy5jb250YWluZXIubG9va3VwRmFjdG9yeSgnbW9kZWw6JyAr
        IGtleSk7CiAgICAgIEVtYmVyLmFzc2VydCgiTm8gbW9kZWwgd2FzIGZvdW5k
        IGZvciAnIiArIGtleSArICInIiwgZmFjdG9yeSk7CiAgICAgIGZhY3Rvcnku
        dHlwZUtleSA9IGtleTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEEgZmFjdG9y
        eSBhbHJlYWR5IHN1cHBsaWVkLgogICAgICBmYWN0b3J5ID0ga2V5OwogICAg
        fQoKICAgIGZhY3Rvcnkuc3RvcmUgPSB0aGlzOwogICAgcmV0dXJuIGZhY3Rv
        cnk7CiAgfSwKCiAgLyoqCiAgICBQdXNoIHNvbWUgZGF0YSBmb3IgYSBnaXZl
        biB0eXBlIGludG8gdGhlIHN0b3JlLgoKICAgIFRoaXMgbWV0aG9kIGV4cGVj
        dHMgbm9ybWFsaXplZCBkYXRhOgoKICAgICogVGhlIElEIGlzIGEga2V5IG5h
        bWVkIGBpZGAgKGFuIElEIGlzIG1hbmRhdG9yeSkKICAgICogVGhlIG5hbWVz
        IG9mIGF0dHJpYnV0ZXMgYXJlIHRoZSBvbmVzIHlvdSB1c2VkIGluCiAgICAg
        IHlvdXIgbW9kZWwncyBgRFMuYXR0cmBzLgogICAgKiBZb3VyIHJlbGF0aW9u
        c2hpcHMgbXVzdCBiZToKICAgICAgKiByZXByZXNlbnRlZCBhcyBJRHMgb3Ig
        QXJyYXlzIG9mIElEcwogICAgICAqIHJlcHJlc2VudGVkIGFzIG1vZGVsIGlu
        c3RhbmNlcwogICAgICAqIHJlcHJlc2VudGVkIGFzIFVSTHMsIHVuZGVyIHRo
        ZSBgbGlua3NgIGtleQoKICAgIEZvciB0aGlzIG1vZGVsOgoKICAgIGBgYGpz
        CiAgICBBcHAuUGVyc29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgZmly
        c3ROYW1lOiBEUy5hdHRyKCksCiAgICAgIGxhc3ROYW1lOiBEUy5hdHRyKCks
        CgogICAgICBjaGlsZHJlbjogRFMuaGFzTWFueSgncGVyc29uJykKICAgIH0p
        OwogICAgYGBgCgogICAgVG8gcmVwcmVzZW50IHRoZSBjaGlsZHJlbiBhcyBJ
        RHM6CgogICAgYGBganMKICAgIHsKICAgICAgaWQ6IDEsCiAgICAgIGZpcnN0
        TmFtZTogIlRvbSIsCiAgICAgIGxhc3ROYW1lOiAiRGFsZSIsCiAgICAgIGNo
        aWxkcmVuOiBbMSwgMiwgM10KICAgIH0KICAgIGBgYAoKICAgIFRvIHJlcHJl
        c2VudCB0aGUgY2hpbGRyZW4gcmVsYXRpb25zaGlwIGFzIGEgVVJMOgoKICAg
        IGBgYGpzCiAgICB7CiAgICAgIGlkOiAxLAogICAgICBmaXJzdE5hbWU6ICJU
        b20iLAogICAgICBsYXN0TmFtZTogIkRhbGUiLAogICAgICBsaW5rczogewog
        ICAgICAgIGNoaWxkcmVuOiAiL3Blb3BsZS8xL2NoaWxkcmVuIgogICAgICB9
        CiAgICB9CiAgICBgYGAKCiAgICBJZiB5b3UncmUgc3RyZWFtaW5nIGRhdGEg
        b3IgaW1wbGVtZW50aW5nIGFuIGFkYXB0ZXIsCiAgICBtYWtlIHN1cmUgdGhh
        dCB5b3UgaGF2ZSBjb252ZXJ0ZWQgdGhlIGluY29taW5nIGRhdGEKICAgIGlu
        dG8gdGhpcyBmb3JtLgoKICAgIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGJv
        dGggdG8gcHVzaCBpbiBicmFuZCBuZXcKICAgIHJlY29yZHMsIGFzIHdlbGwg
        YXMgdG8gdXBkYXRlIGV4aXN0aW5nIHJlY29yZHMuCgogICAgQG1ldGhvZCBw
        dXNoCiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtPYmpl
        Y3R9IGRhdGEKICAgIEByZXR1cm5zIERTLk1vZGVsIHRoZSByZWNvcmQgdGhh
        dCB3YXMgY3JlYXRlZCBvcgogICAgICB1cGRhdGVkLgogICovCiAgcHVzaDog
        ZnVuY3Rpb24odHlwZSwgZGF0YSwgX3BhcnRpYWwpIHsKICAgIC8vIF9wYXJ0
        aWFsIGlzIGFuIGludGVybmFsIHBhcmFtIHVzZWQgYnkgYHVwZGF0ZWAuCiAg
        ICAvLyBJZiBwYXNzZWQsIGl0IG1lYW5zIHRoYXQgdGhlIGRhdGEgc2hvdWxk
        IGJlCiAgICAvLyBtZXJnZWQgaW50byB0aGUgZXhpc3RpbmcgZGF0YSwgbm90
        IHJlcGxhY2UgaXQuCgogICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBpbmNs
        dWRlIGFuIGBpZGAgaW4gYSBoYXNoIHBhc3NlZCB0byBgcHVzaGAiLCBkYXRh
        LmlkICE9IG51bGwpOwoKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwoKICAgIC8vIG5vcm1hbGl6ZSByZWxhdGlvbnNoaXAgSURzIGludG8gcmVj
        b3JkcwogICAgZGF0YSA9IG5vcm1hbGl6ZVJlbGF0aW9uc2hpcHModGhpcywg
        dHlwZSwgZGF0YSk7CgogICAgdGhpcy5fbG9hZCh0eXBlLCBkYXRhLCBfcGFy
        dGlhbCk7CgogICAgcmV0dXJuIHRoaXMucmVjb3JkRm9ySWQodHlwZSwgZGF0
        YS5pZCk7CiAgfSwKCiAgLyoqCiAgICBQdXNoIHNvbWUgcmF3IGRhdGEgaW50
        byB0aGUgc3RvcmUuCgogICAgVGhlIGRhdGEgd2lsbCBiZSBhdXRvbWF0aWNh
        bGx5IGRlc2VyaWFsaXplZCB1c2luZyB0aGUKICAgIHNlcmlhbGl6ZXIgZm9y
        IHRoZSBgdHlwZWAgcGFyYW0uCgogICAgVGhpcyBtZXRob2QgY2FuIGJlIHVz
        ZWQgYm90aCB0byBwdXNoIGluIGJyYW5kIG5ldwogICAgcmVjb3JkcywgYXMg
        d2VsbCBhcyB0byB1cGRhdGUgZXhpc3RpbmcgcmVjb3Jkcy4KCiAgICBZb3Ug
        Y2FuIHB1c2ggaW4gbW9yZSB0aGFuIG9uZSB0eXBlIG9mIG9iamVjdCBhdCBv
        bmNlLgogICAgQWxsIG9iamVjdHMgc2hvdWxkIGJlIGluIHRoZSBmb3JtYXQg
        ZXhwZWN0ZWQgYnkgdGhlCiAgICBzZXJpYWxpemVyLgoKICAgIGBgYGpzCiAg
        ICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0gRFMuQWN0aXZlTW9kZWxT
        ZXJpYWxpemVyOwoKICAgIHZhciBwdXNoRGF0YSA9IHsKICAgICAgcG9zdHM6
        IFsKICAgICAgICB7aWQ6IDEsIHBvc3RfdGl0bGU6ICJHcmVhdCBwb3N0Iiwg
        Y29tbWVudF9pZHM6IFsyXX0KICAgICAgXSwKICAgICAgY29tbWVudHM6IFsK
        ICAgICAgICB7aWQ6IDIsIGNvbW1lbnRfYm9keTogIkluc2lnaHRmdWwgY29t
        bWVudCJ9CiAgICAgIF0KICAgIH0KCiAgICBzdG9yZS5wdXNoUGF5bG9hZCgn
        cG9zdCcsIHB1c2hEYXRhKTsKICAgIGBgYAoKICAgIEBtZXRob2QgcHVzaAog
        ICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBw
        YXlsb2FkCiAgKi8KCiAgcHVzaFBheWxvYWQ6IGZ1bmN0aW9uICh0eXBlLCBw
        YXlsb2FkKSB7CiAgICB2YXIgc2VyaWFsaXplciA9IHRoaXMuc2VyaWFsaXpl
        ckZvcih0eXBlKTsKICAgIHNlcmlhbGl6ZXIucHVzaFBheWxvYWQodGhpcywg
        cGF5bG9hZCk7CiAgfSwKCiAgdXBkYXRlOiBmdW5jdGlvbih0eXBlLCBkYXRh
        KSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IGluY2x1ZGUgYW4gYGlk
        YCBpbiBhIGhhc2ggcGFzc2VkIHRvIGB1cGRhdGVgIiwgZGF0YS5pZCAhPSBu
        dWxsKTsKCiAgICByZXR1cm4gdGhpcy5wdXNoKHR5cGUsIGRhdGEsIHRydWUp
        OwogIH0sCgogIC8qKgogICAgSWYgeW91IGhhdmUgYW4gQXJyYXkgb2Ygbm9y
        bWFsaXplZCBkYXRhIHRvIHB1c2gsCiAgICB5b3UgY2FuIGNhbGwgYHB1c2hN
        YW55YCB3aXRoIHRoZSBBcnJheSwgYW5kIGl0IHdpbGwKICAgIGNhbGwgYHB1
        c2hgIHJlcGVhdGVkbHkgZm9yIHlvdS4KCiAgICBAbWV0aG9kIHB1c2hNYW55
        CiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtBcnJheX0g
        ZGF0YXMKICAgIEByZXR1cm4ge0FycmF5PERTLk1vZGVsPn0KICAqLwogIHB1
        c2hNYW55OiBmdW5jdGlvbih0eXBlLCBkYXRhcykgewogICAgcmV0dXJuIG1h
        cChkYXRhcywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gdGhpcy5w
        dXNoKHR5cGUsIGRhdGEpOwogICAgfSwgdGhpcyk7CiAgfSwKCiAgLyoqCiAg
        ICBJZiB5b3UgaGF2ZSBzb21lIG1ldGFkYXRhIHRvIHNldCBmb3IgYSB0eXBl
        CiAgICB5b3UgY2FuIGNhbGwgYG1ldGFGb3JUeXBlYC4KCiAgICBAbWV0aG9k
        IG1ldGFGb3JUeXBlCiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBh
        cmFtIHtPYmplY3R9IG1ldGFkYXRhCiAgKi8KICBtZXRhRm9yVHlwZTogZnVu
        Y3Rpb24odHlwZSwgbWV0YWRhdGEpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwoKICAgIEVtYmVyLm1lcmdlKHRoaXMudHlwZU1hcEZvcih0
        eXBlKS5tZXRhZGF0YSwgbWV0YWRhdGEpOwogIH0sCgogIC8qKgogICAgQnVp
        bGQgYSBicmFuZCBuZXcgcmVjb3JkIGZvciBhIGdpdmVuIHR5cGUsIElELCBh
        bmQKICAgIGluaXRpYWwgZGF0YS4KCiAgICBAbWV0aG9kIGJ1aWxkUmVjb3Jk
        CiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2Rl
        bH0gdHlwZQogICAgQHBhcmFtIHtTdHJpbmd9IGlkCiAgICBAcGFyYW0ge09i
        amVjdH0gZGF0YQogICAgQHJldHVybnMgRFMuTW9kZWwKICAqLwogIGJ1aWxk
        UmVjb3JkOiBmdW5jdGlvbih0eXBlLCBpZCwgZGF0YSkgewogICAgdmFyIHR5
        cGVNYXAgPSB0aGlzLnR5cGVNYXBGb3IodHlwZSksCiAgICAgICAgaWRUb1Jl
        Y29yZCA9IHR5cGVNYXAuaWRUb1JlY29yZDsKCiAgICBFbWJlci5hc3NlcnQo
        J1RoZSBpZCAnICsgaWQgKyAnIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB3aXRo
        IGFub3RoZXIgcmVjb3JkIG9mIHR5cGUgJyArIHR5cGUudG9TdHJpbmcoKSAr
        ICcuJywgIWlkIHx8ICFpZFRvUmVjb3JkW2lkXSk7CgogICAgLy8gbG9va3Vw
        RmFjdG9yeSBzaG91bGQgcmVhbGx5IHJldHVybiBhbiBvYmplY3QgdGhhdCBj
        cmVhdGVzCiAgICAvLyBpbnN0YW5jZXMgd2l0aCB0aGUgaW5qZWN0aW9ucyBh
        cHBsaWVkCiAgICB2YXIgcmVjb3JkID0gdHlwZS5fY3JlYXRlKHsKICAgICAg
        aWQ6IGlkLAogICAgICBzdG9yZTogdGhpcywKICAgICAgY29udGFpbmVyOiB0
        aGlzLmNvbnRhaW5lcgogICAgfSk7CgogICAgaWYgKGRhdGEpIHsKICAgICAg
        cmVjb3JkLnNldHVwRGF0YShkYXRhKTsKICAgIH0KCiAgICAvLyBpZiB3ZSdy
        ZSBjcmVhdGluZyBhbiBpdGVtLCB0aGlzIHByb2Nlc3Mgd2lsbCBiZSBkb25l
        CiAgICAvLyBsYXRlciwgb25jZSB0aGUgb2JqZWN0IGhhcyBiZWVuIHBlcnNp
        c3RlZC4KICAgIGlmIChpZCkgewogICAgICBpZFRvUmVjb3JkW2lkXSA9IHJl
        Y29yZDsKICAgIH0KCiAgICB0eXBlTWFwLnJlY29yZHMucHVzaChyZWNvcmQp
        OwoKICAgIHJldHVybiByZWNvcmQ7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4u
        Li4uCiAgLy8gLiBERVNUUlVDVElPTiAuCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        CgogIC8qKgogICAgV2hlbiBhIHJlY29yZCBpcyBkZXN0cm95ZWQsIHRoaXMg
        dW4taW5kZXhlcyBpdCBhbmQKICAgIHJlbW92ZXMgaXQgZnJvbSBhbnkgcmVj
        b3JkIGFycmF5cyBzbyBpdCBjYW4gYmUgR0NlZC4KCiAgICBAbWV0aG9kIGRl
        bWF0ZXJpYWxpemVSZWNvcmQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RT
        Lk1vZGVsfSByZWNvcmQKICAqLwogIGRlbWF0ZXJpYWxpemVSZWNvcmQ6IGZ1
        bmN0aW9uKHJlY29yZCkgewogICAgdmFyIHR5cGUgPSByZWNvcmQuY29uc3Ry
        dWN0b3IsCiAgICAgICAgdHlwZU1hcCA9IHRoaXMudHlwZU1hcEZvcih0eXBl
        KSwKICAgICAgICBpZCA9IGdldChyZWNvcmQsICdpZCcpOwoKICAgIHJlY29y
        ZC51cGRhdGVSZWNvcmRBcnJheXMoKTsKCiAgICBpZiAoaWQpIHsKICAgICAg
        ZGVsZXRlIHR5cGVNYXAuaWRUb1JlY29yZFtpZF07CiAgICB9CgogICAgdmFy
        IGxvYyA9IGluZGV4T2YodHlwZU1hcC5yZWNvcmRzLCByZWNvcmQpOwogICAg
        dHlwZU1hcC5yZWNvcmRzLnNwbGljZShsb2MsIDEpOwogIH0sCgogIC8vIC4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIC4gUkVMQVRJT05TSElQIENI
        QU5HRVMgLgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgoKICBhZGRS
        ZWxhdGlvbnNoaXBDaGFuZ2VGb3I6IGZ1bmN0aW9uKGNoaWxkUmVjb3JkLCBj
        aGlsZEtleSwgcGFyZW50UmVjb3JkLCBwYXJlbnRLZXksIGNoYW5nZSkgewog
        ICAgdmFyIGNsaWVudElkID0gY2hpbGRSZWNvcmQuY2xpZW50SWQsCiAgICAg
        ICAgcGFyZW50Q2xpZW50SWQgPSBwYXJlbnRSZWNvcmQgPyBwYXJlbnRSZWNv
        cmQgOiBwYXJlbnRSZWNvcmQ7CiAgICB2YXIga2V5ID0gY2hpbGRLZXkgKyBw
        YXJlbnRLZXk7CiAgICB2YXIgY2hhbmdlcyA9IHRoaXMuX3JlbGF0aW9uc2hp
        cENoYW5nZXM7CiAgICBpZiAoIShjbGllbnRJZCBpbiBjaGFuZ2VzKSkgewog
        ICAgICBjaGFuZ2VzW2NsaWVudElkXSA9IHt9OwogICAgfQogICAgaWYgKCEo
        cGFyZW50Q2xpZW50SWQgaW4gY2hhbmdlc1tjbGllbnRJZF0pKSB7CiAgICAg
        IGNoYW5nZXNbY2xpZW50SWRdW3BhcmVudENsaWVudElkXSA9IHt9OwogICAg
        fQogICAgaWYgKCEoa2V5IGluIGNoYW5nZXNbY2xpZW50SWRdW3BhcmVudENs
        aWVudElkXSkpIHsKICAgICAgY2hhbmdlc1tjbGllbnRJZF1bcGFyZW50Q2xp
        ZW50SWRdW2tleV0gPSB7fTsKICAgIH0KICAgIGNoYW5nZXNbY2xpZW50SWRd
        W3BhcmVudENsaWVudElkXVtrZXldW2NoYW5nZS5jaGFuZ2VUeXBlXSA9IGNo
        YW5nZTsKICB9LAoKICByZW1vdmVSZWxhdGlvbnNoaXBDaGFuZ2VGb3I6IGZ1
        bmN0aW9uKGNsaWVudFJlY29yZCwgY2hpbGRLZXksIHBhcmVudFJlY29yZCwg
        cGFyZW50S2V5LCB0eXBlKSB7CiAgICB2YXIgY2xpZW50SWQgPSBjbGllbnRS
        ZWNvcmQuY2xpZW50SWQsCiAgICAgICAgcGFyZW50Q2xpZW50SWQgPSBwYXJl
        bnRSZWNvcmQgPyBwYXJlbnRSZWNvcmQuY2xpZW50SWQgOiBwYXJlbnRSZWNv
        cmQ7CiAgICB2YXIgY2hhbmdlcyA9IHRoaXMuX3JlbGF0aW9uc2hpcENoYW5n
        ZXM7CiAgICB2YXIga2V5ID0gY2hpbGRLZXkgKyBwYXJlbnRLZXk7CiAgICBp
        ZiAoIShjbGllbnRJZCBpbiBjaGFuZ2VzKSB8fCAhKHBhcmVudENsaWVudElk
        IGluIGNoYW5nZXNbY2xpZW50SWRdKSB8fCAhKGtleSBpbiBjaGFuZ2VzW2Ns
        aWVudElkXVtwYXJlbnRDbGllbnRJZF0pKXsKICAgICAgcmV0dXJuOwogICAg
        fQogICAgZGVsZXRlIGNoYW5nZXNbY2xpZW50SWRdW3BhcmVudENsaWVudElk
        XVtrZXldW3R5cGVdOwogIH0sCgogIHJlbGF0aW9uc2hpcENoYW5nZVBhaXJz
        Rm9yOiBmdW5jdGlvbihyZWNvcmQpewogICAgdmFyIHRvUmV0dXJuID0gW107
        CgogICAgaWYoICFyZWNvcmQgKSB7IHJldHVybiB0b1JldHVybjsgfQoKICAg
        IC8vVE9ETyhJZ29yKSBXaGF0IGFib3V0IHRoZSBvdGhlciBzaWRlCiAgICB2
        YXIgY2hhbmdlc09iamVjdCA9IHRoaXMuX3JlbGF0aW9uc2hpcENoYW5nZXNb
        cmVjb3JkLmNsaWVudElkXTsKICAgIGZvciAodmFyIG9iaktleSBpbiBjaGFu
        Z2VzT2JqZWN0KXsKICAgICAgaWYoY2hhbmdlc09iamVjdC5oYXNPd25Qcm9w
        ZXJ0eShvYmpLZXkpKXsKICAgICAgICBmb3IgKHZhciBjaGFuZ2VLZXkgaW4g
        Y2hhbmdlc09iamVjdFtvYmpLZXldKXsKICAgICAgICAgIGlmKGNoYW5nZXNP
        YmplY3Rbb2JqS2V5XS5oYXNPd25Qcm9wZXJ0eShjaGFuZ2VLZXkpKXsKICAg
        ICAgICAgICAgdG9SZXR1cm4ucHVzaChjaGFuZ2VzT2JqZWN0W29iaktleV1b
        Y2hhbmdlS2V5XSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg
        ICB9CiAgICByZXR1cm4gdG9SZXR1cm47CiAgfSwKCiAgLy8gLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLgogIC8vIC4gUEVSLVRZUEUgQURBUFRFUlMKICAvLyAu
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uCgogIC8qKgogICAgUmV0dXJucyB0aGUg
        YWRhcHRlciBmb3IgYSBnaXZlbiB0eXBlLgoKICAgIEBtZXRob2QgYWRhcHRl
        ckZvcgogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMu
        TW9kZWx9IHR5cGUKICAgIEByZXR1cm5zIERTLkFkYXB0ZXIKICAqLwogIGFk
        YXB0ZXJGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHZhciBjb250YWluZXIg
        PSB0aGlzLmNvbnRhaW5lciwgYWRhcHRlcjsKCiAgICBpZiAoY29udGFpbmVy
        KSB7CiAgICAgIGFkYXB0ZXIgPSBjb250YWluZXIubG9va3VwKCdhZGFwdGVy
        OicgKyB0eXBlLnR5cGVLZXkpIHx8IGNvbnRhaW5lci5sb29rdXAoJ2FkYXB0
        ZXI6YXBwbGljYXRpb24nKTsKICAgIH0KCiAgICByZXR1cm4gYWRhcHRlciB8
        fCBnZXQodGhpcywgJ2RlZmF1bHRBZGFwdGVyJyk7CiAgfSwKCiAgLy8gLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gLiBSRUNPUkQgQ0hB
        TkdFIE5PVElGSUNBVElPTiAuCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uCgogIC8qKgogICAgUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB0
        aGUgc2VyaWFsaXplciBmb3IgYSBnaXZlbiB0eXBlLiBGb3IKICAgIGV4YW1w
        bGUsIGBzZXJpYWxpemVyRm9yKCdwZXJzb24nKWAgd2lsbCByZXR1cm4gYW4g
        aW5zdGFuY2Ugb2YKICAgIGBBcHAuUGVyc29uU2VyaWFsaXplcmAuCgogICAg
        SWYgbm8gYEFwcC5QZXJzb25TZXJpYWxpemVyYCBpcyBmb3VuZCwgdGhpcyBt
        ZXRob2Qgd2lsbCBsb29rCiAgICBmb3IgYW4gYEFwcC5BcHBsaWNhdGlvblNl
        cmlhbGl6ZXJgICh0aGUgZGVmYXVsdCBzZXJpYWxpemVyIGZvcgogICAgeW91
        ciBlbnRpcmUgYXBwbGljYXRpb24pLgoKICAgIElmIG5vIGBBcHAuQXBwbGlj
        YXRpb25TZXJpYWxpemVyYCBpcyBmb3VuZCwgaXQgd2lsbCBmYWxsIGJhY2sK
        ICAgIHRvIGFuIGluc3RhbmNlIG9mIGBEUy5KU09OU2VyaWFsaXplcmAuCgog
        ICAgQG1ldGhvZCBzZXJpYWxpemVyRm9yCiAgICBAcHJpdmF0ZQogICAgQHBh
        cmFtIHtTdHJpbmd9IHR5cGUgdGhlIHJlY29yZCB0byBzZXJpYWxpemUKICAq
        LwogIHNlcmlhbGl6ZXJGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUg
        PSB0aGlzLm1vZGVsRm9yKHR5cGUpOwogICAgdmFyIGFkYXB0ZXIgPSB0aGlz
        LmFkYXB0ZXJGb3IodHlwZSk7CgogICAgcmV0dXJuIHNlcmlhbGl6ZXJGb3Io
        dGhpcy5jb250YWluZXIsIHR5cGUudHlwZUtleSwgYWRhcHRlciAmJiBhZGFw
        dGVyLmRlZmF1bHRTZXJpYWxpemVyKTsKICB9Cn0pOwoKZnVuY3Rpb24gbm9y
        bWFsaXplUmVsYXRpb25zaGlwcyhzdG9yZSwgdHlwZSwgZGF0YSwgcmVjb3Jk
        KSB7CiAgdHlwZS5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVs
        YXRpb25zaGlwKSB7CiAgICAvLyBBIGxpbmsgKHVzdWFsbHkgYSBVUkwpIHdh
        cyBhbHJlYWR5IHByb3ZpZGVkIGluCiAgICAvLyBub3JtYWxpemVkIGZvcm0K
        ICAgIGlmIChkYXRhLmxpbmtzICYmIGRhdGEubGlua3Nba2V5XSkgewogICAg
        ICBpZiAocmVjb3JkICYmIHJlbGF0aW9uc2hpcC5vcHRpb25zLmFzeW5jKSB7
        IHJlY29yZC5fcmVsYXRpb25zaGlwc1trZXldID0gbnVsbDsgfQogICAgICBy
        ZXR1cm47CiAgICB9CgogICAgdmFyIGtpbmQgPSByZWxhdGlvbnNoaXAua2lu
        ZCwKICAgICAgICB2YWx1ZSA9IGRhdGFba2V5XTsKCiAgICBpZiAodmFsdWUg
        PT0gbnVsbCkgeyByZXR1cm47IH0KCiAgICBpZiAoa2luZCA9PT0gJ2JlbG9u
        Z3NUbycpIHsKICAgICAgZGVzZXJpYWxpemVSZWNvcmRJZChzdG9yZSwgZGF0
        YSwga2V5LCByZWxhdGlvbnNoaXAsIHZhbHVlKTsKICAgIH0gZWxzZSBpZiAo
        a2luZCA9PT0gJ2hhc01hbnknKSB7CiAgICAgIGRlc2VyaWFsaXplUmVjb3Jk
        SWRzKHN0b3JlLCBkYXRhLCBrZXksIHJlbGF0aW9uc2hpcCwgdmFsdWUpOwog
        ICAgICBhZGRVbnNhdmVkUmVjb3JkcyhyZWNvcmQsIGtleSwgdmFsdWUpOwog
        ICAgfQogIH0pOwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gZGVzZXJp
        YWxpemVSZWNvcmRJZChzdG9yZSwgZGF0YSwga2V5LCByZWxhdGlvbnNoaXAs
        IGlkKSB7CiAgaWYgKGlzTm9uZShpZCkgfHwgaWQgaW5zdGFuY2VvZiBEUy5N
        b2RlbCkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIHR5cGU7CgogIGlmICh0
        eXBlb2YgaWQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpZCA9PT0gJ3N0cmlu
        ZycpIHsKICAgIHR5cGUgPSB0eXBlRm9yKHJlbGF0aW9uc2hpcCwga2V5LCBk
        YXRhKTsKICAgIGRhdGFba2V5XSA9IHN0b3JlLnJlY29yZEZvcklkKHR5cGUs
        IGlkKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBpZCA9PT0gJ29iamVjdCcpIHsK
        ICAgIC8vIHBvbHltb3JwaGljCiAgICBkYXRhW2tleV0gPSBzdG9yZS5yZWNv
        cmRGb3JJZChpZC50eXBlLCBpZC5pZCk7CiAgfQp9CgpmdW5jdGlvbiB0eXBl
        Rm9yKHJlbGF0aW9uc2hpcCwga2V5LCBkYXRhKSB7CiAgaWYgKHJlbGF0aW9u
        c2hpcC5vcHRpb25zLnBvbHltb3JwaGljKSB7CiAgICByZXR1cm4gZGF0YVtr
        ZXkgKyAiVHlwZSJdOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVsYXRpb25z
        aGlwLnR5cGU7CiAgfQp9CgpmdW5jdGlvbiBkZXNlcmlhbGl6ZVJlY29yZElk
        cyhzdG9yZSwgZGF0YSwga2V5LCByZWxhdGlvbnNoaXAsIGlkcykgewogIGZv
        ciAodmFyIGk9MCwgbD1pZHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgZGVz
        ZXJpYWxpemVSZWNvcmRJZChzdG9yZSwgaWRzLCBpLCByZWxhdGlvbnNoaXAs
        IGlkc1tpXSk7CiAgfQp9CgovLyBJZiB0aGVyZSBhcmUgYW55IHVuc2F2ZWQg
        cmVjb3JkcyB0aGF0IGFyZSBpbiBhIGhhc01hbnkgdGhleSB3b24ndCBiZQov
        LyBpbiB0aGUgcGF5bG9hZCwgc28gYWRkIHRoZW0gYmFjayBpbiBtYW51YWxs
        eS4KZnVuY3Rpb24gYWRkVW5zYXZlZFJlY29yZHMocmVjb3JkLCBrZXksIGRh
        dGEpIHsKICBpZihyZWNvcmQpIHsKICAgIGRhdGEucHVzaE9iamVjdHMocmVj
        b3JkLmdldChrZXkpLmZpbHRlckJ5KCdpc05ldycpKTsKICB9Cn0KCi8vIERl
        bGVnYXRpb24gdG8gdGhlIGFkYXB0ZXIgYW5kIHByb21pc2UgbWFuYWdlbWVu
        dAoKRFMuUHJvbWlzZUFycmF5ID0gRW1iZXIuQXJyYXlQcm94eS5leHRlbmQo
        RW1iZXIuUHJvbWlzZVByb3h5TWl4aW4pOwpEUy5Qcm9taXNlT2JqZWN0ID0g
        RW1iZXIuT2JqZWN0UHJveHkuZXh0ZW5kKEVtYmVyLlByb21pc2VQcm94eU1p
        eGluKTsKCmZ1bmN0aW9uIHByb21pc2VPYmplY3QocHJvbWlzZSkgewogIHJl
        dHVybiBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7IHByb21pc2U6IHByb21p
        c2UgfSk7Cn0KCmZ1bmN0aW9uIHByb21pc2VBcnJheShwcm9taXNlKSB7CiAg
        cmV0dXJuIERTLlByb21pc2VBcnJheS5jcmVhdGUoeyBwcm9taXNlOiBwcm9t
        aXNlIH0pOwp9CgpmdW5jdGlvbiBpc1RoZW5hYmxlKG9iamVjdCkgewogIHJl
        dHVybiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdC50aGVuID09PSAnZnVuY3Rp
        b24nOwp9CgpmdW5jdGlvbiBzZXJpYWxpemVyRm9yKGNvbnRhaW5lciwgdHlw
        ZSwgZGVmYXVsdFNlcmlhbGl6ZXIpIHsKICByZXR1cm4gY29udGFpbmVyLmxv
        b2t1cCgnc2VyaWFsaXplcjonK3R5cGUpIHx8CiAgICAgICAgICAgICAgICAg
        Y29udGFpbmVyLmxvb2t1cCgnc2VyaWFsaXplcjphcHBsaWNhdGlvbicpIHx8
        CiAgICAgICAgICAgICAgICAgY29udGFpbmVyLmxvb2t1cCgnc2VyaWFsaXpl
        cjonICsgZGVmYXVsdFNlcmlhbGl6ZXIpIHx8CiAgICAgICAgICAgICAgICAg
        Y29udGFpbmVyLmxvb2t1cCgnc2VyaWFsaXplcjpfZGVmYXVsdCcpOwp9Cgpm
        dW5jdGlvbiBzZXJpYWxpemVyRm9yQWRhcHRlcihhZGFwdGVyLCB0eXBlKSB7
        CiAgdmFyIHNlcmlhbGl6ZXIgPSBhZGFwdGVyLnNlcmlhbGl6ZXIsCiAgICAg
        IGRlZmF1bHRTZXJpYWxpemVyID0gYWRhcHRlci5kZWZhdWx0U2VyaWFsaXpl
        ciwKICAgICAgY29udGFpbmVyID0gYWRhcHRlci5jb250YWluZXI7CgogIGlm
        IChjb250YWluZXIgJiYgc2VyaWFsaXplciA9PT0gdW5kZWZpbmVkKSB7CiAg
        ICBzZXJpYWxpemVyID0gc2VyaWFsaXplckZvcihjb250YWluZXIsIHR5cGUu
        dHlwZUtleSwgZGVmYXVsdFNlcmlhbGl6ZXIpOwogIH0KCiAgaWYgKHNlcmlh
        bGl6ZXIgPT09IG51bGwgfHwgc2VyaWFsaXplciA9PT0gdW5kZWZpbmVkKSB7
        CiAgICBzZXJpYWxpemVyID0gewogICAgICBleHRyYWN0OiBmdW5jdGlvbihz
        dG9yZSwgdHlwZSwgcGF5bG9hZCkgeyByZXR1cm4gcGF5bG9hZDsgfQogICAg
        fTsKICB9CgogIHJldHVybiBzZXJpYWxpemVyOwp9CgpmdW5jdGlvbiBfZmlu
        ZChhZGFwdGVyLCBzdG9yZSwgdHlwZSwgaWQsIHJlc29sdmVyKSB7CiAgdmFy
        IHByb21pc2UgPSBhZGFwdGVyLmZpbmQoc3RvcmUsIHR5cGUsIGlkKSwKICAg
        ICAgc2VyaWFsaXplciA9IHNlcmlhbGl6ZXJGb3JBZGFwdGVyKGFkYXB0ZXIs
        IHR5cGUpOwoKICByZXR1cm4gcmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0
        aW9uKHBheWxvYWQpIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IG1hZGUgYSBy
        ZXF1ZXN0IGZvciBhICIgKyB0eXBlLnR5cGVLZXkgKyAiIHdpdGggaWQgIiAr
        IGlkICsgIiwgYnV0IHRoZSBhZGFwdGVyJ3MgcmVzcG9uc2UgZGlkIG5vdCBo
        YXZlIGFueSBkYXRhIiwgcGF5bG9hZCk7CiAgICBwYXlsb2FkID0gc2VyaWFs
        aXplci5leHRyYWN0KHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBpZCwgJ2ZpbmQn
        KTsKCiAgICByZXR1cm4gc3RvcmUucHVzaCh0eXBlLCBwYXlsb2FkKTsKICB9
        LCBmdW5jdGlvbihlcnJvcikgewogICAgdmFyIHJlY29yZCA9IHN0b3JlLmdl
        dEJ5SWQodHlwZSwgaWQpOwogICAgcmVjb3JkLm5vdEZvdW5kKCk7CiAgICB0
        aHJvdyBlcnJvcjsKICB9KS50aGVuKHJlc29sdmVyLnJlc29sdmUsIHJlc29s
        dmVyLnJlamVjdCk7Cn0KCmZ1bmN0aW9uIF9maW5kTWFueShhZGFwdGVyLCBz
        dG9yZSwgdHlwZSwgaWRzLCBvd25lciwgcmVzb2x2ZXIpIHsKICB2YXIgcHJv
        bWlzZSA9IGFkYXB0ZXIuZmluZE1hbnkoc3RvcmUsIHR5cGUsIGlkcywgb3du
        ZXIpLAogICAgICBzZXJpYWxpemVyID0gc2VyaWFsaXplckZvckFkYXB0ZXIo
        YWRhcHRlciwgdHlwZSk7CgogIHJldHVybiByZXNvbHZlKHByb21pc2UpLnRo
        ZW4oZnVuY3Rpb24ocGF5bG9hZCkgewogICAgcGF5bG9hZCA9IHNlcmlhbGl6
        ZXIuZXh0cmFjdChzdG9yZSwgdHlwZSwgcGF5bG9hZCwgbnVsbCwgJ2ZpbmRN
        YW55Jyk7CgogICAgRW1iZXIuYXNzZXJ0KCJUaGUgcmVzcG9uc2UgZnJvbSBh
        IGZpbmRNYW55IG11c3QgYmUgYW4gQXJyYXksIG5vdCAiICsgRW1iZXIuaW5z
        cGVjdChwYXlsb2FkKSwgRW1iZXIudHlwZU9mKHBheWxvYWQpID09PSAnYXJy
        YXknKTsKCiAgICBzdG9yZS5wdXNoTWFueSh0eXBlLCBwYXlsb2FkKTsKICB9
        KS50aGVuKHJlc29sdmVyLnJlc29sdmUsIHJlc29sdmVyLnJlamVjdCk7Cn0K
        CmZ1bmN0aW9uIF9maW5kSGFzTWFueShhZGFwdGVyLCBzdG9yZSwgcmVjb3Jk
        LCBsaW5rLCByZWxhdGlvbnNoaXAsIHJlc29sdmVyKSB7CiAgdmFyIHByb21p
        c2UgPSBhZGFwdGVyLmZpbmRIYXNNYW55KHN0b3JlLCByZWNvcmQsIGxpbmss
        IHJlbGF0aW9uc2hpcCksCiAgICAgIHNlcmlhbGl6ZXIgPSBzZXJpYWxpemVy
        Rm9yQWRhcHRlcihhZGFwdGVyLCByZWxhdGlvbnNoaXAudHlwZSk7CgogIHJl
        dHVybiByZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkg
        ewogICAgcGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgcmVs
        YXRpb25zaGlwLnR5cGUsIHBheWxvYWQsIG51bGwsICdmaW5kSGFzTWFueScp
        OwoKICAgIEVtYmVyLmFzc2VydCgiVGhlIHJlc3BvbnNlIGZyb20gYSBmaW5k
        SGFzTWFueSBtdXN0IGJlIGFuIEFycmF5LCBub3QgIiArIEVtYmVyLmluc3Bl
        Y3QocGF5bG9hZCksIEVtYmVyLnR5cGVPZihwYXlsb2FkKSA9PT0gJ2FycmF5
        Jyk7CgogICAgdmFyIHJlY29yZHMgPSBzdG9yZS5wdXNoTWFueShyZWxhdGlv
        bnNoaXAudHlwZSwgcGF5bG9hZCk7CiAgICByZWNvcmQudXBkYXRlSGFzTWFu
        eShyZWxhdGlvbnNoaXAua2V5LCByZWNvcmRzKTsKICB9KS50aGVuKHJlc29s
        dmVyLnJlc29sdmUsIHJlc29sdmVyLnJlamVjdCk7Cn0KCmZ1bmN0aW9uIF9m
        aW5kQmVsb25nc1RvKGFkYXB0ZXIsIHN0b3JlLCByZWNvcmQsIGxpbmssIHJl
        bGF0aW9uc2hpcCwgcmVzb2x2ZXIpIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0
        ZXIuZmluZEJlbG9uZ3NUbyhzdG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlv
        bnNoaXApLAogICAgICBzZXJpYWxpemVyID0gc2VyaWFsaXplckZvckFkYXB0
        ZXIoYWRhcHRlciwgcmVsYXRpb25zaGlwLnR5cGUpOwoKICByZXR1cm4gcmVz
        b2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHsKICAgIHBh
        eWxvYWQgPSBzZXJpYWxpemVyLmV4dHJhY3Qoc3RvcmUsIHJlbGF0aW9uc2hp
        cC50eXBlLCBwYXlsb2FkLCBudWxsLCAnZmluZEJlbG9uZ3NUbycpOwoKICAg
        IHZhciByZWNvcmQgPSBzdG9yZS5wdXNoKHJlbGF0aW9uc2hpcC50eXBlLCBw
        YXlsb2FkKTsKICAgIHJlY29yZC51cGRhdGVCZWxvbmdzVG8ocmVsYXRpb25z
        aGlwLmtleSwgcmVjb3JkKTsKICAgIHJldHVybiByZWNvcmQ7CiAgfSkudGhl
        bihyZXNvbHZlci5yZXNvbHZlLCByZXNvbHZlci5yZWplY3QpOwp9CgpmdW5j
        dGlvbiBfZmluZEFsbChhZGFwdGVyLCBzdG9yZSwgdHlwZSwgc2luY2VUb2tl
        biwgcmVzb2x2ZXIpIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmluZEFs
        bChzdG9yZSwgdHlwZSwgc2luY2VUb2tlbiksCiAgICAgIHNlcmlhbGl6ZXIg
        PSBzZXJpYWxpemVyRm9yQWRhcHRlcihhZGFwdGVyLCB0eXBlKTsKCiAgcmV0
        dXJuIHJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7
        CiAgICBwYXlsb2FkID0gc2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCB0eXBl
        LCBwYXlsb2FkLCBudWxsLCAnZmluZEFsbCcpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiVGhlIHJlc3BvbnNlIGZyb20gYSBmaW5kQWxsIG11c3QgYmUgYW4gQXJy
        YXksIG5vdCAiICsgRW1iZXIuaW5zcGVjdChwYXlsb2FkKSwgRW1iZXIudHlw
        ZU9mKHBheWxvYWQpID09PSAnYXJyYXknKTsKCiAgICBzdG9yZS5wdXNoTWFu
        eSh0eXBlLCBwYXlsb2FkKTsKICAgIHN0b3JlLmRpZFVwZGF0ZUFsbCh0eXBl
        KTsKICAgIHJldHVybiBzdG9yZS5hbGwodHlwZSk7CiAgfSkudGhlbihyZXNv
        bHZlci5yZXNvbHZlLCByZXNvbHZlci5yZWplY3QpOwp9CgpmdW5jdGlvbiBf
        ZmluZFF1ZXJ5KGFkYXB0ZXIsIHN0b3JlLCB0eXBlLCBxdWVyeSwgcmVjb3Jk
        QXJyYXksIHJlc29sdmVyKSB7CiAgdmFyIHByb21pc2UgPSBhZGFwdGVyLmZp
        bmRRdWVyeShzdG9yZSwgdHlwZSwgcXVlcnksIHJlY29yZEFycmF5KSwKICAg
        ICAgc2VyaWFsaXplciA9IHNlcmlhbGl6ZXJGb3JBZGFwdGVyKGFkYXB0ZXIs
        IHR5cGUpOwoKICByZXR1cm4gcmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0
        aW9uKHBheWxvYWQpIHsKICAgIHBheWxvYWQgPSBzZXJpYWxpemVyLmV4dHJh
        Y3Qoc3RvcmUsIHR5cGUsIHBheWxvYWQsIG51bGwsICdmaW5kQWxsJyk7Cgog
        ICAgRW1iZXIuYXNzZXJ0KCJUaGUgcmVzcG9uc2UgZnJvbSBhIGZpbmRRdWVy
        eSBtdXN0IGJlIGFuIEFycmF5LCBub3QgIiArIEVtYmVyLmluc3BlY3QocGF5
        bG9hZCksIEVtYmVyLnR5cGVPZihwYXlsb2FkKSA9PT0gJ2FycmF5Jyk7Cgog
        ICAgcmVjb3JkQXJyYXkubG9hZChwYXlsb2FkKTsKICAgIHJldHVybiByZWNv
        cmRBcnJheTsKICB9KS50aGVuKHJlc29sdmVyLnJlc29sdmUsIHJlc29sdmVy
        LnJlamVjdCk7Cn0KCmZ1bmN0aW9uIF9jb21taXQoYWRhcHRlciwgc3RvcmUs
        IG9wZXJhdGlvbiwgcmVjb3JkLCByZXNvbHZlcikgewogIHZhciB0eXBlID0g
        cmVjb3JkLmNvbnN0cnVjdG9yLAogICAgICBwcm9taXNlID0gYWRhcHRlcltv
        cGVyYXRpb25dKHN0b3JlLCB0eXBlLCByZWNvcmQpLAogICAgICBzZXJpYWxp
        emVyID0gc2VyaWFsaXplckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7Cgog
        IEVtYmVyLmFzc2VydCgiWW91ciBhZGFwdGVyJ3MgJyIgKyBvcGVyYXRpb24g
        KyAiJyBtZXRob2QgbXVzdCByZXR1cm4gYSBwcm9taXNlLCBidXQgaXQgcmV0
        dXJuZWQgIiArIHByb21pc2UsIGlzVGhlbmFibGUocHJvbWlzZSkpOwoKICBy
        ZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHsKICAgIGlm
        IChwYXlsb2FkKSB7IHBheWxvYWQgPSBzZXJpYWxpemVyLmV4dHJhY3Qoc3Rv
        cmUsIHR5cGUsIHBheWxvYWQsIGdldChyZWNvcmQsICdpZCcpLCBvcGVyYXRp
        b24pOyB9CiAgICBzdG9yZS5kaWRTYXZlUmVjb3JkKHJlY29yZCwgcGF5bG9h
        ZCk7CiAgICByZXR1cm4gcmVjb3JkOwogIH0sIGZ1bmN0aW9uKHJlYXNvbikg
        ewogICAgaWYgKHJlYXNvbiBpbnN0YW5jZW9mIERTLkludmFsaWRFcnJvcikg
        ewogICAgICBzdG9yZS5yZWNvcmRXYXNJbnZhbGlkKHJlY29yZCwgcmVhc29u
        LmVycm9ycyk7CiAgICB9IGVsc2UgewogICAgICBzdG9yZS5yZWNvcmRXYXNF
        cnJvcihyZWNvcmQsIHJlYXNvbik7CiAgICB9CgogICAgdGhyb3cgcmVhc29u
        OwogIH0pLnRoZW4ocmVzb2x2ZXIucmVzb2x2ZSwgcmVzb2x2ZXIucmVqZWN0
        KTsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVt
        YmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKCi8qCiAgV0FSTklORzogTXVjaCBvZiB0aGVzZSBkb2NzIGFyZSBp
        bmFjY3VyYXRlIGFzIG9mIGJmODQ5Ny4KCiAgVGhpcyBmaWxlIGVuY2Fwc3Vs
        YXRlcyB0aGUgdmFyaW91cyBzdGF0ZXMgdGhhdCBhIHJlY29yZCBjYW4gdHJh
        bnNpdGlvbgogIHRocm91Z2ggZHVyaW5nIGl0cyBsaWZlY3ljbGUuCgogICMj
        IyBTdGF0ZSBNYW5hZ2VyCgogIEEgcmVjb3JkJ3Mgc3RhdGUgbWFuYWdlciBl
        eHBsaWNpdGx5IHRyYWNrcyB3aGF0IHN0YXRlIGEgcmVjb3JkIGlzIGluCiAg
        YXQgYW55IGdpdmVuIHRpbWUuIEZvciBpbnN0YW5jZSwgaWYgYSByZWNvcmQg
        aXMgbmV3bHkgY3JlYXRlZCBhbmQgaGFzCiAgbm90IHlldCBiZWVuIHNlbnQg
        dG8gdGhlIGFkYXB0ZXIgdG8gYmUgc2F2ZWQsIGl0IHdvdWxkIGJlIGluIHRo
        ZQogIGBjcmVhdGVkLnVuY29tbWl0dGVkYCBzdGF0ZS4gIElmIGEgcmVjb3Jk
        IGhhcyBoYWQgbG9jYWwgbW9kaWZpY2F0aW9ucwogIG1hZGUgdG8gaXQgdGhh
        dCBhcmUgaW4gdGhlIHByb2Nlc3Mgb2YgYmVpbmcgc2F2ZWQsIHRoZSByZWNv
        cmQgd291bGQgYmUKICBpbiB0aGUgYHVwZGF0ZWQuaW5GbGlnaHRgIHN0YXRl
        LiAoVGhlc2Ugc3RhdGUgcGF0aHMgd2lsbCBiZSBleHBsYWluZWQKICBpbiBt
        b3JlIGRldGFpbCBiZWxvdy4pCgogIEV2ZW50cyBhcmUgc2VudCBieSB0aGUg
        cmVjb3JkIG9yIGl0cyBzdG9yZSB0byB0aGUgcmVjb3JkJ3Mgc3RhdGUgbWFu
        YWdlci4KICBIb3cgdGhlIHN0YXRlIG1hbmFnZXIgcmVhY3RzIHRvIHRoZXNl
        IGV2ZW50cyBpcyBkZXBlbmRlbnQgb24gd2hpY2ggc3RhdGUKICBpdCBpcyBp
        bi4gSW4gc29tZSBzdGF0ZXMsIGNlcnRhaW4gZXZlbnRzIHdpbGwgYmUgaW52
        YWxpZCBhbmQgd2lsbCBjYXVzZQogIGFuIGV4Y2VwdGlvbiB0byBiZSByYWlz
        ZWQuCgogIFN0YXRlcyBhcmUgaGllcmFyY2hpY2FsLiBGb3IgZXhhbXBsZSwg
        YSByZWNvcmQgY2FuIGJlIGluIHRoZQogIGBkZWxldGVkLnN0YXJ0YCBzdGF0
        ZSwgdGhlbiB0cmFuc2l0aW9uIGludG8gdGhlIGBkZWxldGVkLmluRmxpZ2h0
        YCBzdGF0ZS4KICBJZiBhIGNoaWxkIHN0YXRlIGRvZXMgbm90IGltcGxlbWVu
        dCBhbiBldmVudCBoYW5kbGVyLCB0aGUgc3RhdGUgbWFuYWdlcgogIHdpbGwg
        YXR0ZW1wdCB0byBpbnZva2UgdGhlIGV2ZW50IG9uIGFsbCBwYXJlbnQgc3Rh
        dGVzIHVudGlsIHRoZSByb290IHN0YXRlIGlzCiAgcmVhY2hlZC4gVGhlIHN0
        YXRlIGhpZXJhcmNoeSBvZiBhIHJlY29yZCBpcyBkZXNjcmliZWQgaW4gdGVy
        bXMgb2YgYSBwYXRoCiAgc3RyaW5nLiBZb3UgY2FuIGRldGVybWluZSBhIHJl
        Y29yZCdzIGN1cnJlbnQgc3RhdGUgYnkgZ2V0dGluZyBpdHMgbWFuYWdlcidz
        CiAgY3VycmVudCBzdGF0ZSBwYXRoOgoKICAgICAgcmVjb3JkLmdldCgnc3Rh
        dGVNYW5hZ2VyLmN1cnJlbnRQYXRoJyk7CiAgICAgIC8vPT4gImNyZWF0ZWQu
        dW5jb21taXR0ZWQiCgogIFRoZSBgRFMuTW9kZWxgIHN0YXRlcyBhcmUgdGhl
        bXNlbHZlcyBzdGF0ZWxlc3MuIFdoYXQgd2UgbWVhbiBpcyB0aGF0LAogIHRo
        b3VnaCBlYWNoIGluc3RhbmNlIG9mIGEgcmVjb3JkIGFsc28gaGFzIGEgdW5p
        cXVlIGluc3RhbmNlIG9mIGEKICBgRFMuU3RhdGVNYW5hZ2VyYCwgdGhlIGhp
        ZXJhcmNoaWNhbCBzdGF0ZXMgdGhhdCBlYWNoIG9mICp0aG9zZSogcG9pbnRz
        CiAgdG8gaXMgYSBzaGFyZWQgZGF0YSBzdHJ1Y3R1cmUuIEZvciBwZXJmb3Jt
        YW5jZSByZWFzb25zLCBpbnN0ZWFkIG9mIGVhY2gKICByZWNvcmQgZ2V0dGlu
        ZyBpdHMgb3duIGNvcHkgb2YgdGhlIGhpZXJhcmNoeSBvZiBzdGF0ZXMsIGVh
        Y2ggc3RhdGUKICBtYW5hZ2VyIHBvaW50cyB0byB0aGlzIGdsb2JhbCwgaW1t
        dXRhYmxlIHNoYXJlZCBpbnN0YW5jZS4gSG93IGRvZXMgYQogIHN0YXRlIGtu
        b3cgd2hpY2ggcmVjb3JkIGl0IHNob3VsZCBiZSBhY3Rpbmcgb24/ICBXZSBw
        YXNzIGEgcmVmZXJlbmNlIHRvCiAgdGhlIGN1cnJlbnQgc3RhdGUgbWFuYWdl
        ciBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyIHRvIGV2ZXJ5IG1ldGhvZCBpbnZv
        a2VkCiAgb24gYSBzdGF0ZS4KCiAgVGhlIHN0YXRlIG1hbmFnZXIgcGFzc2Vk
        IGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgd2hlcmUgeW91IHNob3VsZCBz
        dGFzaAogIHN0YXRlIGFib3V0IHRoZSByZWNvcmQgaWYgbmVlZGVkOyB5b3Ug
        c2hvdWxkIG5ldmVyIHN0b3JlIGRhdGEgb24gdGhlIHN0YXRlCiAgb2JqZWN0
        IGl0c2VsZi4gSWYgeW91IG5lZWQgYWNjZXNzIHRvIHRoZSByZWNvcmQgYmVp
        bmcgYWN0ZWQgb24sIHlvdSBjYW4KICByZXRyaWV2ZSB0aGUgc3RhdGUgbWFu
        YWdlcidzIGByZWNvcmRgIHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgaWYgeW91
        IGhhZAogIGFuIGV2ZW50IGhhbmRsZXIgYG15RXZlbnRgOgoKICAgICAgbXlF
        dmVudDogZnVuY3Rpb24obWFuYWdlcikgewogICAgICAgIHZhciByZWNvcmQg
        PSBtYW5hZ2VyLmdldCgncmVjb3JkJyk7CiAgICAgICAgcmVjb3JkLmRvU29t
        ZXRoaW5nKCk7CiAgICAgIH0KCiAgRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJv
        dXQgc3RhdGUgbWFuYWdlcnMgaW4gZ2VuZXJhbCwgc2VlIHRoZSBFbWJlci5q
        cwogIGRvY3VtZW50YXRpb24gb24gYEVtYmVyLlN0YXRlTWFuYWdlcmAuCgog
        ICMjIyBFdmVudHMsIEZsYWdzLCBhbmQgVHJhbnNpdGlvbnMKCiAgQSBzdGF0
        ZSBtYXkgaW1wbGVtZW50IHplcm8gb3IgbW9yZSBldmVudHMsIGZsYWdzLCBv
        ciB0cmFuc2l0aW9ucy4KCiAgIyMjIyBFdmVudHMKCiAgRXZlbnRzIGFyZSBu
        YW1lZCBmdW5jdGlvbnMgdGhhdCBhcmUgaW52b2tlZCB3aGVuIHNlbnQgdG8g
        YSByZWNvcmQuIFRoZQogIHN0YXRlIG1hbmFnZXIgd2lsbCBmaXJzdCBsb29r
        IGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIG9uIHRoZQogIGN1
        cnJlbnQgc3RhdGUuIElmIG5vIG1ldGhvZCBpcyBmb3VuZCwgaXQgd2lsbCBz
        ZWFyY2ggdGhlIGN1cnJlbnQgc3RhdGUncwogIHBhcmVudCwgYW5kIHRoZW4g
        aXRzIGdyYW5kcGFyZW50LCBhbmQgc28gb24gdW50aWwgcmVhY2hpbmcgdGhl
        IHRvcCBvZgogIHRoZSBoaWVyYXJjaHkuIElmIHRoZSByb290IGlzIHJlYWNo
        ZWQgd2l0aG91dCBhbiBldmVudCBoYW5kbGVyIGJlaW5nIGZvdW5kLAogIGFu
        IGV4Y2VwdGlvbiB3aWxsIGJlIHJhaXNlZC4gVGhpcyBjYW4gYmUgdmVyeSBo
        ZWxwZnVsIHdoZW4gZGVidWdnaW5nIG5ldwogIGZlYXR1cmVzLgoKICBIZXJl
        J3MgYW4gZXhhbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBhIHN0YXRlIHdpdGgg
        YSBgbXlFdmVudGAgZXZlbnQgaGFuZGxlcjoKCiAgICAgIGFTdGF0ZTogRFMu
        U3RhdGUuY3JlYXRlKHsKICAgICAgICBteUV2ZW50OiBmdW5jdGlvbihtYW5h
        Z2VyLCBwYXJhbSkgewogICAgICAgICAgY29uc29sZS5sb2coIlJlY2VpdmVk
        IG15RXZlbnQgd2l0aCAiK3BhcmFtKTsKICAgICAgICB9CiAgICAgIH0pCgog
        IFRvIHRyaWdnZXIgdGhpcyBldmVudDoKCiAgICAgIHJlY29yZC5zZW5kKCdt
        eUV2ZW50JywgJ2ZvbycpOwogICAgICAvLz0+ICJSZWNlaXZlZCBteUV2ZW50
        IHdpdGggZm9vIgoKICBOb3RlIHRoYXQgYW4gb3B0aW9uYWwgcGFyYW1ldGVy
        IGNhbiBiZSBzZW50IHRvIGEgcmVjb3JkJ3MgYHNlbmQoKWAgbWV0aG9kLAog
        IHdoaWNoIHdpbGwgYmUgcGFzc2VkIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVy
        IHRvIHRoZSBldmVudCBoYW5kbGVyLgoKICBFdmVudHMgc2hvdWxkIHRyYW5z
        aXRpb24gdG8gYSBkaWZmZXJlbnQgc3RhdGUgaWYgYXBwcm9wcmlhdGUuIFRo
        aXMgY2FuIGJlCiAgZG9uZSBieSBjYWxsaW5nIHRoZSBzdGF0ZSBtYW5hZ2Vy
        J3MgYHRyYW5zaXRpb25UbygpYCBtZXRob2Qgd2l0aCBhIHBhdGggdG8gdGhl
        CiAgZGVzaXJlZCBzdGF0ZS4gVGhlIHN0YXRlIG1hbmFnZXIgd2lsbCBhdHRl
        bXB0IHRvIHJlc29sdmUgdGhlIHN0YXRlIHBhdGgKICByZWxhdGl2ZSB0byB0
        aGUgY3VycmVudCBzdGF0ZS4gSWYgbm8gc3RhdGUgaXMgZm91bmQgYXQgdGhh
        dCBwYXRoLCBpdCB3aWxsCiAgYXR0ZW1wdCB0byByZXNvbHZlIGl0IHJlbGF0
        aXZlIHRvIHRoZSBjdXJyZW50IHN0YXRlJ3MgcGFyZW50LCBhbmQgdGhlbiBp
        dHMKICBwYXJlbnQsIGFuZCBzbyBvbiB1bnRpbCB0aGUgcm9vdCBpcyByZWFj
        aGVkLiBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIGhpZXJhcmNoeQogIGxpa2Ug
        dGhpczoKCiAgICAgICogY3JlYXRlZAogICAgICAgICogc3RhcnQgPC0tIGN1
        cnJlbnRTdGF0ZQogICAgICAgICogaW5GbGlnaHQKICAgICAgKiB1cGRhdGVk
        CiAgICAgICAgKiBpbkZsaWdodAoKICBJZiB3ZSBhcmUgY3VycmVudGx5IGlu
        IHRoZSBgc3RhcnRgIHN0YXRlLCBjYWxsaW5nCiAgYHRyYW5zaXRpb25Ubygn
        aW5GbGlnaHQnKWAgd291bGQgdHJhbnNpdGlvbiB0byB0aGUgYGNyZWF0ZWQu
        aW5GbGlnaHRgIHN0YXRlLAogIHdoaWxlIGNhbGxpbmcgYHRyYW5zaXRpb25U
        bygndXBkYXRlZC5pbkZsaWdodCcpYCB3b3VsZCB0cmFuc2l0aW9uIHRvCiAg
        dGhlIGB1cGRhdGVkLmluRmxpZ2h0YCBzdGF0ZS4KCiAgUmVtZW1iZXIgdGhh
        dCAqb25seSBldmVudHMqIHNob3VsZCBldmVyIGNhdXNlIGEgc3RhdGUgdHJh
        bnNpdGlvbi4gWW91IHNob3VsZAogIG5ldmVyIGNhbGwgYHRyYW5zaXRpb25U
        bygpYCBmcm9tIG91dHNpZGUgYSBzdGF0ZSdzIGV2ZW50IGhhbmRsZXIuIElm
        IHlvdSBhcmUKICB0ZW1wdGVkIHRvIGRvIHNvLCBjcmVhdGUgYSBuZXcgZXZl
        bnQgYW5kIHNlbmQgdGhhdCB0byB0aGUgc3RhdGUgbWFuYWdlci4KCiAgIyMj
        IyBGbGFncwoKICBGbGFncyBhcmUgQm9vbGVhbiB2YWx1ZXMgdGhhdCBjYW4g
        YmUgdXNlZCB0byBpbnRyb3NwZWN0IGEgcmVjb3JkJ3MgY3VycmVudAogIHN0
        YXRlIGluIGEgbW9yZSB1c2VyLWZyaWVuZGx5IHdheSB0aGFuIGV4YW1pbmlu
        ZyBpdHMgc3RhdGUgcGF0aC4gRm9yIGV4YW1wbGUsCiAgaW5zdGVhZCBvZiBk
        b2luZyB0aGlzOgoKICAgICAgdmFyIHN0YXRlUGF0aCA9IHJlY29yZC5nZXQo
        J3N0YXRlTWFuYWdlci5jdXJyZW50UGF0aCcpOwogICAgICBpZiAoc3RhdGVQ
        YXRoID09PSAnY3JlYXRlZC5pbkZsaWdodCcpIHsKICAgICAgICBkb1NvbWV0
        aGluZygpOwogICAgICB9CgogIFlvdSBjYW4gc2F5OgoKICAgICAgaWYgKHJl
        Y29yZC5nZXQoJ2lzTmV3JykgJiYgcmVjb3JkLmdldCgnaXNTYXZpbmcnKSkg
        ewogICAgICAgIGRvU29tZXRoaW5nKCk7CiAgICAgIH0KCiAgSWYgeW91ciBz
        dGF0ZSBkb2VzIG5vdCBzZXQgYSB2YWx1ZSBmb3IgYSBnaXZlbiBmbGFnLCB0
        aGUgdmFsdWUgd2lsbAogIGJlIGluaGVyaXRlZCBmcm9tIGl0cyBwYXJlbnQg
        KG9yIHRoZSBmaXJzdCBwbGFjZSBpbiB0aGUgc3RhdGUgaGllcmFyY2h5CiAg
        d2hlcmUgaXQgaXMgZGVmaW5lZCkuCgogIFRoZSBjdXJyZW50IHNldCBvZiBm
        bGFncyBhcmUgZGVmaW5lZCBiZWxvdy4gSWYgeW91IHdhbnQgdG8gYWRkIGEg
        bmV3IGZsYWcsCiAgaW4gYWRkaXRpb24gdG8gdGhlIGFyZWEgYmVsb3csIHlv
        dSB3aWxsIGFsc28gbmVlZCB0byBkZWNsYXJlIGl0IGluIHRoZQogIGBEUy5N
        b2RlbGAgY2xhc3MuCgogICMjIyMgVHJhbnNpdGlvbnMKCiAgVHJhbnNpdGlv
        bnMgYXJlIGxpa2UgZXZlbnQgaGFuZGxlcnMgYnV0IGFyZSBjYWxsZWQgYXV0
        b21hdGljYWxseSB1cG9uCiAgZW50ZXJpbmcgb3IgZXhpdGluZyBhIHN0YXRl
        LiBUbyBpbXBsZW1lbnQgYSB0cmFuc2l0aW9uLCBqdXN0IGNhbGwgYSBtZXRo
        b2QKICBlaXRoZXIgYGVudGVyYCBvciBgZXhpdGA6CgogICAgICBteVN0YXRl
        OiBEUy5TdGF0ZS5jcmVhdGUoewogICAgICAgIC8vIEdldHMgY2FsbGVkIGF1
        dG9tYXRpY2FsbHkgd2hlbiBlbnRlcmluZwogICAgICAgIC8vIHRoaXMgc3Rh
        dGUuCiAgICAgICAgZW50ZXI6IGZ1bmN0aW9uKG1hbmFnZXIpIHsKICAgICAg
        ICAgIGNvbnNvbGUubG9nKCJFbnRlcmVkIG15U3RhdGUiKTsKICAgICAgICB9
        CiAgICAgIH0pCgogIE5vdGUgdGhhdCBlbnRlciBhbmQgZXhpdCBldmVudHMg
        YXJlIGNhbGxlZCBvbmNlIHBlciB0cmFuc2l0aW9uLiBJZiB0aGUKICBjdXJy
        ZW50IHN0YXRlIGNoYW5nZXMsIGJ1dCBjaGFuZ2VzIHRvIGFub3RoZXIgY2hp
        bGQgc3RhdGUgb2YgdGhlIHBhcmVudCwKICB0aGUgdHJhbnNpdGlvbiBldmVu
        dCBvbiB0aGUgcGFyZW50IHdpbGwgbm90IGJlIHRyaWdnZXJlZC4KKi8KCnZh
        ciBoYXNEZWZpbmVkUHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iamVjdCkgewog
        IC8vIElnbm9yZSBpbnRlcm5hbCBwcm9wZXJ0eSBkZWZpbmVkIGJ5IHNpbXVs
        YXRlZCBgRW1iZXIuY3JlYXRlYC4KICB2YXIgbmFtZXMgPSBFbWJlci5rZXlz
        KG9iamVjdCk7CiAgdmFyIGksIGwsIG5hbWU7CiAgZm9yIChpID0gMCwgbCA9
        IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHsKICAgIG5hbWUgPSBuYW1l
        c1tpXTsKICAgIGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkobmFtZSkgJiYg
        b2JqZWN0W25hbWVdKSB7IHJldHVybiB0cnVlOyB9CiAgfQoKICByZXR1cm4g
        ZmFsc2U7Cn07Cgp2YXIgZGlkU2V0UHJvcGVydHkgPSBmdW5jdGlvbihyZWNv
        cmQsIGNvbnRleHQpIHsKICBpZiAoY29udGV4dC52YWx1ZSA9PT0gY29udGV4
        dC5vcmlnaW5hbFZhbHVlKSB7CiAgICBkZWxldGUgcmVjb3JkLl9hdHRyaWJ1
        dGVzW2NvbnRleHQubmFtZV07CiAgICByZWNvcmQuc2VuZCgncHJvcGVydHlX
        YXNSZXNldCcsIGNvbnRleHQubmFtZSk7CiAgfSBlbHNlIGlmIChjb250ZXh0
        LnZhbHVlICE9PSBjb250ZXh0Lm9sZFZhbHVlKSB7CiAgICByZWNvcmQuc2Vu
        ZCgnYmVjb21lRGlydHknKTsKICB9CgogIHJlY29yZC51cGRhdGVSZWNvcmRB
        cnJheXNMYXRlcigpOwp9OwoKLy8gSW1wbGVtZW50YXRpb24gbm90ZXM6Ci8v
        Ci8vIEVhY2ggc3RhdGUgaGFzIGEgYm9vbGVhbiB2YWx1ZSBmb3IgYWxsIG9m
        IHRoZSBmb2xsb3dpbmcgZmxhZ3M6Ci8vCi8vICogaXNMb2FkZWQ6IFRoZSBy
        ZWNvcmQgaGFzIGEgcG9wdWxhdGVkIGBkYXRhYCBwcm9wZXJ0eS4gV2hlbiBh
        Ci8vICAgcmVjb3JkIGlzIGxvYWRlZCB2aWEgYHN0b3JlLmZpbmRgLCBgaXNM
        b2FkZWRgIGlzIGZhbHNlCi8vICAgdW50aWwgdGhlIGFkYXB0ZXIgc2V0cyBp
        dC4gV2hlbiBhIHJlY29yZCBpcyBjcmVhdGVkIGxvY2FsbHksCi8vICAgaXRz
        IGBpc0xvYWRlZGAgcHJvcGVydHkgaXMgYWx3YXlzIHRydWUuCi8vICogaXNE
        aXJ0eTogVGhlIHJlY29yZCBoYXMgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUg
        bm90IHlldCBiZWVuCi8vICAgc2F2ZWQgYnkgdGhlIGFkYXB0ZXIuIFRoaXMg
        aW5jbHVkZXMgcmVjb3JkcyB0aGF0IGhhdmUgYmVlbgovLyAgIGNyZWF0ZWQg
        KGJ1dCBub3QgeWV0IHNhdmVkKSBvciBkZWxldGVkLgovLyAqIGlzU2F2aW5n
        OiBUaGUgcmVjb3JkIGhhcyBiZWVuIGNvbW1pdHRlZCwgYnV0Ci8vICAgdGhl
        IGFkYXB0ZXIgaGFzIG5vdCB5ZXQgYWNrbm93bGVkZ2VkIHRoYXQgdGhlIGNo
        YW5nZXMgaGF2ZQovLyAgIGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBiYWNrZW5k
        LgovLyAqIGlzRGVsZXRlZDogVGhlIHJlY29yZCB3YXMgbWFya2VkIGZvciBk
        ZWxldGlvbi4gV2hlbiBgaXNEZWxldGVkYAovLyAgIGlzIHRydWUgYW5kIGBp
        c0RpcnR5YCBpcyB0cnVlLCB0aGUgcmVjb3JkIGlzIGRlbGV0ZWQgbG9jYWxs
        eQovLyAgIGJ1dCB0aGUgZGVsZXRpb24gd2FzIG5vdCB5ZXQgcGVyc2lzdGVk
        LiBXaGVuIGBpc1NhdmluZ2AgaXMKLy8gICB0cnVlLCB0aGUgY2hhbmdlIGlz
        IGluLWZsaWdodC4gV2hlbiBib3RoIGBpc0RpcnR5YCBhbmQKLy8gICBgaXNT
        YXZpbmdgIGFyZSBmYWxzZSwgdGhlIGNoYW5nZSBoYXMgcGVyc2lzdGVkLgov
        LyAqIGlzRXJyb3I6IFRoZSBhZGFwdGVyIHJlcG9ydGVkIHRoYXQgaXQgd2Fz
        IHVuYWJsZSB0byBzYXZlCi8vICAgbG9jYWwgY2hhbmdlcyB0byB0aGUgYmFj
        a2VuZC4gVGhpcyBtYXkgYWxzbyByZXN1bHQgaW4gdGhlCi8vICAgcmVjb3Jk
        IGhhdmluZyBpdHMgYGlzVmFsaWRgIHByb3BlcnR5IGJlY29tZSBmYWxzZSBp
        ZiB0aGUKLy8gICBhZGFwdGVyIHJlcG9ydGVkIHRoYXQgc2VydmVyLXNpZGUg
        dmFsaWRhdGlvbnMgZmFpbGVkLgovLyAqIGlzTmV3OiBUaGUgcmVjb3JkIHdh
        cyBjcmVhdGVkIG9uIHRoZSBjbGllbnQgYW5kIHRoZSBhZGFwdGVyCi8vICAg
        ZGlkIG5vdCB5ZXQgcmVwb3J0IHRoYXQgaXQgd2FzIHN1Y2Nlc3NmdWxseSBz
        YXZlZC4KLy8gKiBpc1ZhbGlkOiBObyBjbGllbnQtc2lkZSB2YWxpZGF0aW9u
        cyBoYXZlIGZhaWxlZCBhbmQgdGhlCi8vICAgYWRhcHRlciBkaWQgbm90IHJl
        cG9ydCBhbnkgc2VydmVyLXNpZGUgdmFsaWRhdGlvbiBmYWlsdXJlcy4KCi8v
        IFRoZSBkaXJ0eSBzdGF0ZSBpcyBhIGFic3RyYWN0IHN0YXRlIHdob3NlIGZ1
        bmN0aW9uYWxpdHkgaXMKLy8gc2hhcmVkIGJldHdlZW4gdGhlIGBjcmVhdGVk
        YCBhbmQgYHVwZGF0ZWRgIHN0YXRlcy4KLy8KLy8gVGhlIGRlbGV0ZWQgc3Rh
        dGUgc2hhcmVzIHRoZSBgaXNEaXJ0eWAgZmxhZyB3aXRoIHRoZQovLyBzdWJj
        bGFzc2VzIG9mIGBEaXJ0eVN0YXRlYCwgYnV0IHdpdGggYSB2ZXJ5IGRpZmZl
        cmVudAovLyBpbXBsZW1lbnRhdGlvbi4KLy8KLy8gRGlydHkgc3RhdGVzIGhh
        dmUgdGhyZWUgY2hpbGQgc3RhdGVzOgovLwovLyBgdW5jb21taXR0ZWRgOiB0
        aGUgc3RvcmUgaGFzIG5vdCB5ZXQgaGFuZGVkIG9mZiB0aGUgcmVjb3JkCi8v
        ICAgdG8gYmUgc2F2ZWQuCi8vIGBpbkZsaWdodGA6IHRoZSBzdG9yZSBoYXMg
        aGFuZGVkIG9mZiB0aGUgcmVjb3JkIHRvIGJlIHNhdmVkLAovLyAgIGJ1dCB0
        aGUgYWRhcHRlciBoYXMgbm90IHlldCBhY2tub3dsZWRnZWQgc3VjY2Vzcy4K
        Ly8gYGludmFsaWRgOiB0aGUgcmVjb3JkIGhhcyBpbnZhbGlkIGluZm9ybWF0
        aW9uIGFuZCBjYW5ub3QgYmUKLy8gICBzZW5kIHRvIHRoZSBhZGFwdGVyIHll
        dC4KdmFyIERpcnR5U3RhdGUgPSB7CiAgaW5pdGlhbFN0YXRlOiAndW5jb21t
        aXR0ZWQnLAoKICAvLyBGTEFHUwogIGlzRGlydHk6IHRydWUsCgogIC8vIFNV
        QlNUQVRFUwoKICAvLyBXaGVuIGEgcmVjb3JkIGZpcnN0IGJlY29tZXMgZGly
        dHksIGl0IGlzIGB1bmNvbW1pdHRlZGAuCiAgLy8gVGhpcyBtZWFucyB0aGF0
        IHRoZXJlIGFyZSBsb2NhbCBwZW5kaW5nIGNoYW5nZXMsIGJ1dCB0aGV5CiAg
        Ly8gaGF2ZSBub3QgeWV0IGJlZ3VuIHRvIGJlIHNhdmVkLCBhbmQgYXJlIG5v
        dCBpbnZhbGlkLgogIHVuY29tbWl0dGVkOiB7CiAgICAvLyBFVkVOVFMKICAg
        IGRpZFNldFByb3BlcnR5OiBkaWRTZXRQcm9wZXJ0eSwKCiAgICBwcm9wZXJ0
        eVdhc1Jlc2V0OiBmdW5jdGlvbihyZWNvcmQsIG5hbWUpIHsKICAgICAgdmFy
        IHN0aWxsRGlydHkgPSBmYWxzZTsKCiAgICAgIGZvciAodmFyIHByb3AgaW4g
        cmVjb3JkLl9hdHRyaWJ1dGVzKSB7CiAgICAgICAgc3RpbGxEaXJ0eSA9IHRy
        dWU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGlmICghc3RpbGxE
        aXJ0eSkgeyByZWNvcmQuc2VuZCgncm9sbGVkQmFjaycpOyB9CiAgICB9LAoK
        ICAgIHB1c2hlZERhdGE6IEVtYmVyLkssCgogICAgYmVjb21lRGlydHk6IEVt
        YmVyLkssCgogICAgd2lsbENvbW1pdDogZnVuY3Rpb24ocmVjb3JkKSB7CiAg
        ICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ2luRmxpZ2h0Jyk7CiAgICB9LAoK
        ICAgIHJlbG9hZFJlY29yZDogZnVuY3Rpb24ocmVjb3JkLCByZXNvbHZlcikg
        ewogICAgICBnZXQocmVjb3JkLCAnc3RvcmUnKS5yZWxvYWRSZWNvcmQocmVj
        b3JkLCByZXNvbHZlcik7CiAgICB9LAoKICAgIHJvbGxlZEJhY2s6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCdsb2Fk
        ZWQuc2F2ZWQnKTsKICAgIH0sCgogICAgYmVjYW1lSW52YWxpZDogZnVuY3Rp
        b24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ2ludmFs
        aWQnKTsKICAgIH0sCgogICAgcm9sbGJhY2s6IGZ1bmN0aW9uKHJlY29yZCkg
        ewogICAgICByZWNvcmQucm9sbGJhY2soKTsKICAgIH0KICB9LAoKICAvLyBP
        bmNlIGEgcmVjb3JkIGhhcyBiZWVuIGhhbmRlZCBvZmYgdG8gdGhlIGFkYXB0
        ZXIgdG8gYmUKICAvLyBzYXZlZCwgaXQgaXMgaW4gdGhlICdpbiBmbGlnaHQn
        IHN0YXRlLiBDaGFuZ2VzIHRvIHRoZQogIC8vIHJlY29yZCBjYW5ub3QgYmUg
        bWFkZSBkdXJpbmcgdGhpcyB3aW5kb3cuCiAgaW5GbGlnaHQ6IHsKICAgIC8v
        IEZMQUdTCiAgICBpc1NhdmluZzogdHJ1ZSwKCiAgICAvLyBFVkVOVFMKICAg
        IGRpZFNldFByb3BlcnR5OiBkaWRTZXRQcm9wZXJ0eSwKICAgIGJlY29tZURp
        cnR5OiBFbWJlci5LLAogICAgcHVzaGVkRGF0YTogRW1iZXIuSywKCiAgICAv
        LyBUT0RPOiBNb3JlIHJvYnVzdCBzZW1hbnRpY3MgYXJvdW5kIHNhdmUtd2hp
        bGUtaW4tZmxpZ2h0CiAgICB3aWxsQ29tbWl0OiBFbWJlci5LLAoKICAgIGRp
        ZENvbW1pdDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHZhciBkaXJ0eVR5
        cGUgPSBnZXQodGhpcywgJ2RpcnR5VHlwZScpOwoKICAgICAgcmVjb3JkLnRy
        YW5zaXRpb25Ubygnc2F2ZWQnKTsKICAgICAgcmVjb3JkLnNlbmQoJ2ludm9r
        ZUxpZmVjeWNsZUNhbGxiYWNrcycsIGRpcnR5VHlwZSk7CiAgICB9LAoKICAg
        IGJlY2FtZUludmFsaWQ6IGZ1bmN0aW9uKHJlY29yZCwgZXJyb3JzKSB7CiAg
        ICAgIHNldChyZWNvcmQsICdlcnJvcnMnLCBlcnJvcnMpOwoKICAgICAgcmVj
        b3JkLnRyYW5zaXRpb25UbygnaW52YWxpZCcpOwogICAgICByZWNvcmQuc2Vu
        ZCgnaW52b2tlTGlmZWN5Y2xlQ2FsbGJhY2tzJyk7CiAgICB9LAoKICAgIGJl
        Y2FtZUVycm9yOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3JkLnRy
        YW5zaXRpb25UbygndW5jb21taXR0ZWQnKTsKICAgICAgcmVjb3JkLnRyaWdn
        ZXJMYXRlcignYmVjYW1lRXJyb3InLCByZWNvcmQpOwogICAgfQogIH0sCgog
        IC8vIEEgcmVjb3JkIGlzIGluIHRoZSBgaW52YWxpZGAgc3RhdGUgd2hlbiBp
        dHMgY2xpZW50LXNpZGUKICAvLyBpbnZhbGlkYXRpb25zIGhhdmUgZmFpbGVk
        LCBvciBpZiB0aGUgYWRhcHRlciBoYXMgaW5kaWNhdGVkCiAgLy8gdGhlIHRo
        ZSByZWNvcmQgZmFpbGVkIHNlcnZlci1zaWRlIGludmFsaWRhdGlvbnMuCiAg
        aW52YWxpZDogewogICAgLy8gRkxBR1MKICAgIGlzVmFsaWQ6IGZhbHNlLAoK
        ICAgIC8vIEVWRU5UUwogICAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbihyZWNv
        cmQpIHsKICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC51bmNv
        bW1pdHRlZCcpOwogICAgICByZWNvcmQuY2xlYXJSZWxhdGlvbnNoaXBzKCk7
        CiAgICB9LAoKICAgIGRpZFNldFByb3BlcnR5OiBmdW5jdGlvbihyZWNvcmQs
        IGNvbnRleHQpIHsKICAgICAgdmFyIGVycm9ycyA9IGdldChyZWNvcmQsICdl
        cnJvcnMnKSwKICAgICAgICAgIGtleSA9IGNvbnRleHQubmFtZTsKCiAgICAg
        IHNldChlcnJvcnMsIGtleSwgbnVsbCk7CgogICAgICBpZiAoIWhhc0RlZmlu
        ZWRQcm9wZXJ0aWVzKGVycm9ycykpIHsKICAgICAgICByZWNvcmQuc2VuZCgn
        YmVjYW1lVmFsaWQnKTsKICAgICAgfQoKICAgICAgZGlkU2V0UHJvcGVydHko
        cmVjb3JkLCBjb250ZXh0KTsKICAgIH0sCgogICAgYmVjb21lRGlydHk6IEVt
        YmVyLkssCgogICAgcm9sbGJhY2s6IGZ1bmN0aW9uKHJlY29yZCkgewogICAg
        ICByZWNvcmQuc2VuZCgnYmVjYW1lVmFsaWQnKTsKICAgICAgcmVjb3JkLnNl
        bmQoJ3JvbGxiYWNrJyk7CiAgICB9LAoKICAgIGJlY2FtZVZhbGlkOiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygndW5j
        b21taXR0ZWQnKTsKICAgIH0sCgogICAgaW52b2tlTGlmZWN5Y2xlQ2FsbGJh
        Y2tzOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3JkLnRyaWdnZXJM
        YXRlcignYmVjYW1lSW52YWxpZCcsIHJlY29yZCk7CiAgICB9CiAgfQp9OwoK
        Ly8gVGhlIGNyZWF0ZWQgYW5kIHVwZGF0ZWQgc3RhdGVzIGFyZSBjcmVhdGVk
        IG91dHNpZGUgdGhlIHN0YXRlCi8vIGNoYXJ0IHNvIHdlIGNhbiByZW9wZW4g
        dGhlaXIgc3Vic3RhdGVzIGFuZCBhZGQgbWl4aW5zIGFzCi8vIG5lY2Vzc2Fy
        eS4KCmZ1bmN0aW9uIGRlZXBDbG9uZShvYmplY3QpIHsKICB2YXIgY2xvbmUg
        PSB7fSwgdmFsdWU7CgogIGZvciAodmFyIHByb3AgaW4gb2JqZWN0KSB7CiAg
        ICB2YWx1ZSA9IG9iamVjdFtwcm9wXTsKICAgIGlmICh2YWx1ZSAmJiB0eXBl
        b2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGNsb25lW3Byb3BdID0g
        ZGVlcENsb25lKHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIGNsb25lW3By
        b3BdID0gdmFsdWU7CiAgICB9CiAgfQoKICByZXR1cm4gY2xvbmU7Cn0KCmZ1
        bmN0aW9uIG1peGluKG9yaWdpbmFsLCBoYXNoKSB7CiAgZm9yICh2YXIgcHJv
        cCBpbiBoYXNoKSB7CiAgICBvcmlnaW5hbFtwcm9wXSA9IGhhc2hbcHJvcF07
        CiAgfQoKICByZXR1cm4gb3JpZ2luYWw7Cn0KCmZ1bmN0aW9uIGRpcnR5U3Rh
        dGUob3B0aW9ucykgewogIHZhciBuZXdTdGF0ZSA9IGRlZXBDbG9uZShEaXJ0
        eVN0YXRlKTsKICByZXR1cm4gbWl4aW4obmV3U3RhdGUsIG9wdGlvbnMpOwp9
        Cgp2YXIgY3JlYXRlZFN0YXRlID0gZGlydHlTdGF0ZSh7CiAgZGlydHlUeXBl
        OiAnY3JlYXRlZCcsCgogIC8vIEZMQUdTCiAgaXNOZXc6IHRydWUKfSk7Cgpj
        cmVhdGVkU3RhdGUudW5jb21taXR0ZWQucm9sbGVkQmFjayA9IGZ1bmN0aW9u
        KHJlY29yZCkgewogIHJlY29yZC50cmFuc2l0aW9uVG8oJ2RlbGV0ZWQuc2F2
        ZWQnKTsKfTsKCnZhciB1cGRhdGVkU3RhdGUgPSBkaXJ0eVN0YXRlKHsKICBk
        aXJ0eVR5cGU6ICd1cGRhdGVkJwp9KTsKCmNyZWF0ZWRTdGF0ZS51bmNvbW1p
        dHRlZC5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbihyZWNvcmQpIHsKICByZWNv
        cmQuY2xlYXJSZWxhdGlvbnNoaXBzKCk7CiAgcmVjb3JkLnRyYW5zaXRpb25U
        bygnZGVsZXRlZC5zYXZlZCcpOwp9OwoKY3JlYXRlZFN0YXRlLnVuY29tbWl0
        dGVkLnJvbGxiYWNrID0gZnVuY3Rpb24ocmVjb3JkKSB7CiAgRGlydHlTdGF0
        ZS51bmNvbW1pdHRlZC5yb2xsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMp
        OwogIHJlY29yZC50cmFuc2l0aW9uVG8oJ2RlbGV0ZWQuc2F2ZWQnKTsKfTsK
        CnVwZGF0ZWRTdGF0ZS51bmNvbW1pdHRlZC5kZWxldGVSZWNvcmQgPSBmdW5j
        dGlvbihyZWNvcmQpIHsKICByZWNvcmQudHJhbnNpdGlvblRvKCdkZWxldGVk
        LnVuY29tbWl0dGVkJyk7CiAgcmVjb3JkLmNsZWFyUmVsYXRpb25zaGlwcygp
        Owp9OwoKdmFyIFJvb3RTdGF0ZSA9IHsKICAvLyBGTEFHUwogIGlzRW1wdHk6
        IGZhbHNlLAogIGlzTG9hZGluZzogZmFsc2UsCiAgaXNMb2FkZWQ6IGZhbHNl
        LAogIGlzRGlydHk6IGZhbHNlLAogIGlzU2F2aW5nOiBmYWxzZSwKICBpc0Rl
        bGV0ZWQ6IGZhbHNlLAogIGlzTmV3OiBmYWxzZSwKICBpc1ZhbGlkOiB0cnVl
        LAoKICAvLyBERUZBVUxUIEVWRU5UUwoKICAvLyBUcnlpbmcgdG8gcm9sbCBi
        YWNrIGlmIHlvdSdyZSBub3QgaW4gdGhlIGRpcnR5IHN0YXRlCiAgLy8gZG9l
        c24ndCBjaGFuZ2UgeW91ciBzdGF0ZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSdy
        ZSBpbiB0aGUKICAvLyBpbi1mbGlnaHQgc3RhdGUsIHJvbGxpbmcgYmFjayB0
        aGUgcmVjb3JkIGRvZXNuJ3QgbW92ZQogIC8vIHlvdSBvdXQgb2YgdGhlIGlu
        LWZsaWdodCBzdGF0ZS4KICByb2xsZWRCYWNrOiBFbWJlci5LLAoKICBwcm9w
        ZXJ0eVdhc1Jlc2V0OiBFbWJlci5LLAoKICAvLyBTVUJTVEFURVMKCiAgLy8g
        QSByZWNvcmQgYmVnaW5zIGl0cyBsaWZlY3ljbGUgaW4gdGhlIGBlbXB0eWAg
        c3RhdGUuCiAgLy8gSWYgaXRzIGRhdGEgd2lsbCBjb21lIGZyb20gdGhlIGFk
        YXB0ZXIsIGl0IHdpbGwKICAvLyB0cmFuc2l0aW9uIGludG8gdGhlIGBsb2Fk
        aW5nYCBzdGF0ZS4gT3RoZXJ3aXNlLCBpZgogIC8vIHRoZSByZWNvcmQgaXMg
        YmVpbmcgY3JlYXRlZCBvbiB0aGUgY2xpZW50LCBpdCB3aWxsCiAgLy8gdHJh
        bnNpdGlvbiBpbnRvIHRoZSBgY3JlYXRlZGAgc3RhdGUuCiAgZW1wdHk6IHsK
        ICAgIGlzRW1wdHk6IHRydWUsCgogICAgLy8gRVZFTlRTCiAgICBsb2FkaW5n
        RGF0YTogZnVuY3Rpb24ocmVjb3JkLCBwcm9taXNlKSB7CiAgICAgIHJlY29y
        ZC5fbG9hZGluZ1Byb21pc2UgPSBwcm9taXNlOwogICAgICByZWNvcmQudHJh
        bnNpdGlvblRvKCdsb2FkaW5nJyk7CiAgICB9LAoKICAgIGxvYWRlZERhdGE6
        IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRv
        KCdsb2FkZWQuY3JlYXRlZC51bmNvbW1pdHRlZCcpOwoKICAgICAgcmVjb3Jk
        LnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKSB7CiAg
        ICAgICAgcmVjb3JkLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCdkYXRhJyk7CiAg
        ICAgIH0pOwogICAgfSwKCiAgICBwdXNoZWREYXRhOiBmdW5jdGlvbihyZWNv
        cmQpIHsKICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnbG9hZGVkLnNhdmVk
        Jyk7CiAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIoJ2RpZExvYWQnKTsKICAg
        IH0KICB9LAoKICAvLyBBIHJlY29yZCBlbnRlcnMgdGhpcyBzdGF0ZSB3aGVu
        IHRoZSBzdG9yZSBhc2tlcwogIC8vIHRoZSBhZGFwdGVyIGZvciBpdHMgZGF0
        YS4gSXQgcmVtYWlucyBpbiB0aGlzIHN0YXRlCiAgLy8gdW50aWwgdGhlIGFk
        YXB0ZXIgcHJvdmlkZXMgdGhlIHJlcXVlc3RlZCBkYXRhLgogIC8vCiAgLy8g
        VXN1YWxseSwgdGhpcyBwcm9jZXNzIGlzIGFzeW5jaHJvbm91cywgdXNpbmcg
        YW4KICAvLyBYSFIgdG8gcmV0cmlldmUgdGhlIGRhdGEuCiAgbG9hZGluZzog
        ewogICAgLy8gRkxBR1MKICAgIGlzTG9hZGluZzogdHJ1ZSwKCiAgICBleGl0
        OiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3JkLl9sb2FkaW5nUHJv
        bWlzZSA9IG51bGw7CiAgICB9LAoKICAgIC8vIEVWRU5UUwogICAgcHVzaGVk
        RGF0YTogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFuc2l0
        aW9uVG8oJ2xvYWRlZC5zYXZlZCcpOwogICAgICByZWNvcmQudHJpZ2dlckxh
        dGVyKCdkaWRMb2FkJyk7CiAgICAgIHNldChyZWNvcmQsICdpc0Vycm9yJywg
        ZmFsc2UpOwogICAgfSwKCiAgICBiZWNhbWVFcnJvcjogZnVuY3Rpb24ocmVj
        b3JkKSB7CiAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIoJ2JlY2FtZUVycm9y
        JywgcmVjb3JkKTsKICAgIH0sCgogICAgbm90Rm91bmQ6IGZ1bmN0aW9uKHJl
        Y29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCdlbXB0eScpOwog
        ICAgfQogIH0sCgogIC8vIEEgcmVjb3JkIGVudGVycyB0aGlzIHN0YXRlIHdo
        ZW4gaXRzIGRhdGEgaXMgcG9wdWxhdGVkLgogIC8vIE1vc3Qgb2YgYSByZWNv
        cmQncyBsaWZlY3ljbGUgaXMgc3BlbnQgaW5zaWRlIHN1YnN0YXRlcwogIC8v
        IG9mIHRoZSBgbG9hZGVkYCBzdGF0ZS4KICBsb2FkZWQ6IHsKICAgIGluaXRp
        YWxTdGF0ZTogJ3NhdmVkJywKCiAgICAvLyBGTEFHUwogICAgaXNMb2FkZWQ6
        IHRydWUsCgogICAgLy8gU1VCU1RBVEVTCgogICAgLy8gSWYgdGhlcmUgYXJl
        IG5vIGxvY2FsIGNoYW5nZXMgdG8gYSByZWNvcmQsIGl0IHJlbWFpbnMKICAg
        IC8vIGluIHRoZSBgc2F2ZWRgIHN0YXRlLgogICAgc2F2ZWQ6IHsKICAgICAg
        c2V0dXA6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHZhciBhdHRycyA9
        IHJlY29yZC5fYXR0cmlidXRlcywKICAgICAgICAgICAgaXNEaXJ0eSA9IGZh
        bHNlOwoKICAgICAgICBmb3IgKHZhciBwcm9wIGluIGF0dHJzKSB7CiAgICAg
        ICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAg
        ICAgICAgaXNEaXJ0eSA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAg
        ICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGlzRGlydHkpIHsKICAg
        ICAgICAgIHJlY29yZC5hZGFwdGVyRGlkRGlydHkoKTsKICAgICAgICB9CiAg
        ICAgIH0sCgogICAgICAvLyBFVkVOVFMKICAgICAgZGlkU2V0UHJvcGVydHk6
        IGRpZFNldFByb3BlcnR5LAoKICAgICAgcHVzaGVkRGF0YTogRW1iZXIuSywK
        CiAgICAgIGJlY29tZURpcnR5OiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAg
        ICByZWNvcmQudHJhbnNpdGlvblRvKCd1cGRhdGVkLnVuY29tbWl0dGVkJyk7
        CiAgICAgIH0sCgogICAgICB3aWxsQ29tbWl0OiBmdW5jdGlvbihyZWNvcmQp
        IHsKICAgICAgICByZWNvcmQudHJhbnNpdGlvblRvKCd1cGRhdGVkLmluRmxp
        Z2h0Jyk7CiAgICAgIH0sCgogICAgICByZWxvYWRSZWNvcmQ6IGZ1bmN0aW9u
        KHJlY29yZCwgcmVzb2x2ZXIpIHsKICAgICAgICBnZXQocmVjb3JkLCAnc3Rv
        cmUnKS5yZWxvYWRSZWNvcmQocmVjb3JkLCByZXNvbHZlcik7CiAgICAgIH0s
        CgogICAgICBkZWxldGVSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAg
        ICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ2RlbGV0ZWQudW5jb21taXR0ZWQn
        KTsKICAgICAgICByZWNvcmQuY2xlYXJSZWxhdGlvbnNoaXBzKCk7CiAgICAg
        IH0sCgogICAgICB1bmxvYWRSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewog
        ICAgICAgIC8vIGNsZWFyIHJlbGF0aW9uc2hpcHMgYmVmb3JlIG1vdmluZyB0
        byBkZWxldGVkIHN0YXRlCiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0IGZhaWxz
        CiAgICAgICAgcmVjb3JkLmNsZWFyUmVsYXRpb25zaGlwcygpOwogICAgICAg
        IHJlY29yZC50cmFuc2l0aW9uVG8oJ2RlbGV0ZWQuc2F2ZWQnKTsKICAgICAg
        fSwKCiAgICAgIGRpZENvbW1pdDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAg
        ICAgcmVjb3JkLnNlbmQoJ2ludm9rZUxpZmVjeWNsZUNhbGxiYWNrcycsIGdl
        dChyZWNvcmQsICdsYXN0RGlydHlUeXBlJykpOwogICAgICB9CgogICAgfSwK
        CiAgICAvLyBBIHJlY29yZCBpcyBpbiB0aGlzIHN0YXRlIGFmdGVyIGl0IGhh
        cyBiZWVuIGxvY2FsbHkKICAgIC8vIGNyZWF0ZWQgYnV0IGJlZm9yZSB0aGUg
        YWRhcHRlciBoYXMgaW5kaWNhdGVkIHRoYXQKICAgIC8vIGl0IGhhcyBiZWVu
        IHNhdmVkLgogICAgY3JlYXRlZDogY3JlYXRlZFN0YXRlLAoKICAgIC8vIEEg
        cmVjb3JkIGlzIGluIHRoaXMgc3RhdGUgaWYgaXQgaGFzIGFscmVhZHkgYmVl
        bgogICAgLy8gc2F2ZWQgdG8gdGhlIHNlcnZlciwgYnV0IHRoZXJlIGFyZSBu
        ZXcgbG9jYWwgY2hhbmdlcwogICAgLy8gdGhhdCBoYXZlIG5vdCB5ZXQgYmVl
        biBzYXZlZC4KICAgIHVwZGF0ZWQ6IHVwZGF0ZWRTdGF0ZQogIH0sCgogIC8v
        IEEgcmVjb3JkIGlzIGluIHRoaXMgc3RhdGUgaWYgaXQgd2FzIGRlbGV0ZWQg
        ZnJvbSB0aGUgc3RvcmUuCiAgZGVsZXRlZDogewogICAgaW5pdGlhbFN0YXRl
        OiAndW5jb21taXR0ZWQnLAogICAgZGlydHlUeXBlOiAnZGVsZXRlZCcsCgog
        ICAgLy8gRkxBR1MKICAgIGlzRGVsZXRlZDogdHJ1ZSwKICAgIGlzTG9hZGVk
        OiB0cnVlLAogICAgaXNEaXJ0eTogdHJ1ZSwKCiAgICAvLyBUUkFOU0lUSU9O
        UwogICAgc2V0dXA6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICB2YXIgc3Rv
        cmUgPSBnZXQocmVjb3JkLCAnc3RvcmUnKTsKCiAgICAgIHN0b3JlLnJlY29y
        ZEFycmF5TWFuYWdlci5yZW1vdmUocmVjb3JkKTsKICAgIH0sCgogICAgLy8g
        U1VCU1RBVEVTCgogICAgLy8gV2hlbiBhIHJlY29yZCBpcyBkZWxldGVkLCBp
        dCBlbnRlcnMgdGhlIGBzdGFydGAKICAgIC8vIHN0YXRlLiBJdCB3aWxsIGV4
        aXQgdGhpcyBzdGF0ZSB3aGVuIHRoZSByZWNvcmQKICAgIC8vIHN0YXJ0cyB0
        byBjb21taXQuCiAgICB1bmNvbW1pdHRlZDogewoKICAgICAgLy8gRVZFTlRT
        CgogICAgICB3aWxsQ29tbWl0OiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAg
        ICByZWNvcmQudHJhbnNpdGlvblRvKCdpbkZsaWdodCcpOwogICAgICB9LAoK
        ICAgICAgcm9sbGJhY2s6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHJl
        Y29yZC5yb2xsYmFjaygpOwogICAgICB9LAoKICAgICAgYmVjb21lRGlydHk6
        IEVtYmVyLkssCiAgICAgIGRlbGV0ZVJlY29yZDogRW1iZXIuSywKCiAgICAg
        IHJvbGxlZEJhY2s6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHJlY29y
        ZC50cmFuc2l0aW9uVG8oJ2xvYWRlZC5zYXZlZCcpOwogICAgICB9CiAgICB9
        LAoKICAgIC8vIEFmdGVyIGEgcmVjb3JkIHN0YXJ0cyBjb21taXR0aW5nLCBi
        dXQKICAgIC8vIGJlZm9yZSB0aGUgYWRhcHRlciBpbmRpY2F0ZXMgdGhhdCB0
        aGUgZGVsZXRpb24KICAgIC8vIGhhcyBzYXZlZCB0byB0aGUgc2VydmVyLCBh
        IHJlY29yZCBpcyBpbiB0aGUKICAgIC8vIGBpbkZsaWdodGAgc3Vic3RhdGUg
        b2YgYGRlbGV0ZWRgLgogICAgaW5GbGlnaHQ6IHsKICAgICAgLy8gRkxBR1MK
        ICAgICAgaXNTYXZpbmc6IHRydWUsCgogICAgICAvLyBFVkVOVFMKCiAgICAg
        IC8vIFRPRE86IE1vcmUgcm9idXN0IHNlbWFudGljcyBhcm91bmQgc2F2ZS13
        aGlsZS1pbi1mbGlnaHQKICAgICAgd2lsbENvbW1pdDogRW1iZXIuSywKICAg
        ICAgZGlkQ29tbWl0OiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgICByZWNv
        cmQudHJhbnNpdGlvblRvKCdzYXZlZCcpOwoKICAgICAgICByZWNvcmQuc2Vu
        ZCgnaW52b2tlTGlmZWN5Y2xlQ2FsbGJhY2tzJyk7CiAgICAgIH0sCgogICAg
        ICBiZWNhbWVFcnJvcjogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgcmVj
        b3JkLnRyYW5zaXRpb25UbygndW5jb21taXR0ZWQnKTsKICAgICAgICByZWNv
        cmQudHJpZ2dlckxhdGVyKCdiZWNhbWVFcnJvcicsIHJlY29yZCk7CiAgICAg
        IH0KICAgIH0sCgogICAgLy8gT25jZSB0aGUgYWRhcHRlciBpbmRpY2F0ZXMg
        dGhhdCB0aGUgZGVsZXRpb24gaGFzCiAgICAvLyBiZWVuIHNhdmVkLCB0aGUg
        cmVjb3JkIGVudGVycyB0aGUgYHNhdmVkYCBzdWJzdGF0ZQogICAgLy8gb2Yg
        YGRlbGV0ZWRgLgogICAgc2F2ZWQ6IHsKICAgICAgLy8gRkxBR1MKICAgICAg
        aXNEaXJ0eTogZmFsc2UsCgogICAgICBzZXR1cDogZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICAgICAgdmFyIHN0b3JlID0gZ2V0KHJlY29yZCwgJ3N0b3JlJyk7
        CiAgICAgICAgc3RvcmUuZGVtYXRlcmlhbGl6ZVJlY29yZChyZWNvcmQpOwog
        ICAgICB9LAoKICAgICAgaW52b2tlTGlmZWN5Y2xlQ2FsbGJhY2tzOiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgICAgICByZWNvcmQudHJpZ2dlckxhdGVyKCdk
        aWREZWxldGUnLCByZWNvcmQpOwogICAgICAgIHJlY29yZC50cmlnZ2VyTGF0
        ZXIoJ2RpZENvbW1pdCcsIHJlY29yZCk7CiAgICAgIH0KICAgIH0KICB9LAoK
        ICBpbnZva2VMaWZlY3ljbGVDYWxsYmFja3M6IGZ1bmN0aW9uKHJlY29yZCwg
        ZGlydHlUeXBlKSB7CiAgICBpZiAoZGlydHlUeXBlID09PSAnY3JlYXRlZCcp
        IHsKICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlkQ3JlYXRlJywgcmVj
        b3JkKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIo
        J2RpZFVwZGF0ZScsIHJlY29yZCk7CiAgICB9CgogICAgcmVjb3JkLnRyaWdn
        ZXJMYXRlcignZGlkQ29tbWl0JywgcmVjb3JkKTsKICB9Cn07CgpmdW5jdGlv
        biB3aXJlU3RhdGUob2JqZWN0LCBwYXJlbnQsIG5hbWUpIHsKICAvKmpzaGlu
        dCBwcm90bzp0cnVlKi8KICAvLyBUT0RPOiBVc2UgT2JqZWN0LmNyZWF0ZSBh
        bmQgY29weSBpbnN0ZWFkCiAgb2JqZWN0ID0gbWl4aW4ocGFyZW50ID8gRW1i
        ZXIuY3JlYXRlKHBhcmVudCkgOiB7fSwgb2JqZWN0KTsKICBvYmplY3QucGFy
        ZW50U3RhdGUgPSBwYXJlbnQ7CiAgb2JqZWN0LnN0YXRlTmFtZSA9IG5hbWU7
        CgogIGZvciAodmFyIHByb3AgaW4gb2JqZWN0KSB7CiAgICBpZiAoIW9iamVj
        dC5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCBwcm9wID09PSAncGFyZW50U3Rh
        dGUnIHx8IHByb3AgPT09ICdzdGF0ZU5hbWUnKSB7IGNvbnRpbnVlOyB9CiAg
        ICBpZiAodHlwZW9mIG9iamVjdFtwcm9wXSA9PT0gJ29iamVjdCcpIHsKICAg
        ICAgb2JqZWN0W3Byb3BdID0gd2lyZVN0YXRlKG9iamVjdFtwcm9wXSwgb2Jq
        ZWN0LCBuYW1lICsgIi4iICsgcHJvcCk7CiAgICB9CiAgfQoKICByZXR1cm4g
        b2JqZWN0Owp9CgpSb290U3RhdGUgPSB3aXJlU3RhdGUoUm9vdFN0YXRlLCBu
        dWxsLCAicm9vdCIpOwoKRFMuUm9vdFN0YXRlID0gUm9vdFN0YXRlOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAg
        IG1lcmdlID0gRW1iZXIubWVyZ2UsIG9uY2UgPSBFbWJlci5ydW4ub25jZTsK
        CnZhciByZXRyaWV2ZUZyb21DdXJyZW50U3RhdGUgPSBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgcmV0dXJuIGdldChnZXQodGhp
        cywgJ2N1cnJlbnRTdGF0ZScpLCBrZXkpOwp9KS5wcm9wZXJ0eSgnY3VycmVu
        dFN0YXRlJykucmVhZE9ubHkoKTsKCi8qKgoKICBUaGUgbW9kZWwgY2xhc3Mg
        dGhhdCBhbGwgRW1iZXIgRGF0YSByZWNvcmRzIGRlc2NlbmQgZnJvbS4KCiAg
        QGNsYXNzIE1vZGVsCiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRzIEVtYmVy
        Lk9iamVjdAogIEB1c2VzIEVtYmVyLkV2ZW50ZWQKKi8KRFMuTW9kZWwgPSBF
        bWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkV2ZW50ZWQsIHsKICBpc0VtcHR5
        OiByZXRyaWV2ZUZyb21DdXJyZW50U3RhdGUsCiAgaXNMb2FkaW5nOiByZXRy
        aWV2ZUZyb21DdXJyZW50U3RhdGUsCiAgaXNMb2FkZWQ6IHJldHJpZXZlRnJv
        bUN1cnJlbnRTdGF0ZSwKICBpc0RpcnR5OiByZXRyaWV2ZUZyb21DdXJyZW50
        U3RhdGUsCiAgaXNTYXZpbmc6IHJldHJpZXZlRnJvbUN1cnJlbnRTdGF0ZSwK
        ICBpc0RlbGV0ZWQ6IHJldHJpZXZlRnJvbUN1cnJlbnRTdGF0ZSwKICBpc05l
        dzogcmV0cmlldmVGcm9tQ3VycmVudFN0YXRlLAogIGlzVmFsaWQ6IHJldHJp
        ZXZlRnJvbUN1cnJlbnRTdGF0ZSwKICBkaXJ0eVR5cGU6IHJldHJpZXZlRnJv
        bUN1cnJlbnRTdGF0ZSwKCiAgaXNFcnJvcjogZmFsc2UsCiAgaXNSZWxvYWRp
        bmc6IGZhbHNlLAoKICBjbGllbnRJZDogbnVsbCwKICBpZDogbnVsbCwKICB0
        cmFuc2FjdGlvbjogbnVsbCwKICBjdXJyZW50U3RhdGU6IG51bGwsCiAgZXJy
        b3JzOiBudWxsLAoKICAvKioKICAgIENyZWF0ZSBhIEpTT04gcmVwcmVzZW50
        YXRpb24gb2YgdGhlIHJlY29yZCwgdXNpbmcgdGhlIHNlcmlhbGl6YXRpb24K
        ICAgIHN0cmF0ZWd5IG9mIHRoZSBzdG9yZSdzIGFkYXB0ZXIuCgogICAgQG1l
        dGhvZCBzZXJpYWxpemUKICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEF2
        YWlsYWJsZSBvcHRpb25zOgoKICAgICogYGluY2x1ZGVJZGA6IGB0cnVlYCBp
        ZiB0aGUgcmVjb3JkJ3MgSUQgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZQog
        ICAgICBKU09OIHJlcHJlc2VudGF0aW9uLgoKICAgIEByZXR1cm5zIHtPYmpl
        Y3R9IGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIHByaW1pdGl2ZSBKU09O
        IHZhbHVlcyBvbmx5CiAgKi8KICBzZXJpYWxpemU6IGZ1bmN0aW9uKG9wdGlv
        bnMpIHsKICAgIHZhciBzdG9yZSA9IGdldCh0aGlzLCAnc3RvcmUnKTsKICAg
        IHJldHVybiBzdG9yZS5zZXJpYWxpemUodGhpcywgb3B0aW9ucyk7CiAgfSwK
        CiAgLyoqCiAgICBVc2Uge3sjY3Jvc3NMaW5rICJEUy5KU09OU2VyaWFsaXpl
        ciJ9fURTLkpTT05TZXJpYWxpemVye3svY3Jvc3NMaW5rfX0gdG8KICAgIGdl
        dCB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIHJlY29yZC4KCiAgICBA
        bWV0aG9kIHRvSlNPTgogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQXZh
        aWxhYmxlIG9wdGlvbnM6CgogICAgKiBgaW5jbHVkZUlkYDogYHRydWVgIGlm
        IHRoZSByZWNvcmQncyBJRCBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlCiAg
        ICAgIEpTT04gcmVwcmVzZW50YXRpb24uCgogICAgQHJldHVybnMge09iamVj
        dH0gQSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuCiAgKi8K
        ICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIC8vIGNvbnRhaW5l
        ciBpcyBmb3IgbGF6eSB0cmFuc2Zvcm0gbG9va3VwcwogICAgdmFyIHNlcmlh
        bGl6ZXIgPSBEUy5KU09OU2VyaWFsaXplci5jcmVhdGUoeyBjb250YWluZXI6
        IHRoaXMuY29udGFpbmVyIH0pOwogICAgcmV0dXJuIHNlcmlhbGl6ZXIuc2Vy
        aWFsaXplKHRoaXMsIG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAgRmlyZWQg
        d2hlbiB0aGUgcmVjb3JkIGlzIGxvYWRlZCBmcm9tIHRoZSBzZXJ2ZXIuCgog
        ICAgQGV2ZW50IGRpZExvYWQKICAqLwogIGRpZExvYWQ6IEVtYmVyLkssCgog
        IC8qKgogICAgRmlyZWQgd2hlbiB0aGUgcmVjb3JkIGlzIHJlbG9hZGVkIGZy
        b20gdGhlIHNlcnZlci4KCiAgICBAZXZlbnQgZGlkUmVsb2FkCiAgKi8KICBk
        aWRSZWxvYWQ6IEVtYmVyLkssCgogIC8qKgogICAgRmlyZWQgd2hlbiB0aGUg
        cmVjb3JkIGlzIHVwZGF0ZWQuCgogICAgQGV2ZW50IGRpZFVwZGF0ZQogICov
        CiAgZGlkVXBkYXRlOiBFbWJlci5LLAoKICAvKioKICAgIEZpcmVkIHdoZW4g
        dGhlIHJlY29yZCBpcyBjcmVhdGVkLgoKICAgIEBldmVudCBkaWRDcmVhdGUK
        ICAqLwogIGRpZENyZWF0ZTogRW1iZXIuSywKCiAgLyoqCiAgICBGaXJlZCB3
        aGVuIHRoZSByZWNvcmQgaXMgZGVsZXRlZC4KCiAgICBAZXZlbnQgZGlkRGVs
        ZXRlCiAgKi8KICBkaWREZWxldGU6IEVtYmVyLkssCgogIC8qKgogICAgRmly
        ZWQgd2hlbiB0aGUgcmVjb3JkIGJlY29tZXMgaW52YWxpZC4KCiAgICBAZXZl
        bnQgYmVjYW1lSW52YWxpZAogICovCiAgYmVjYW1lSW52YWxpZDogRW1iZXIu
        SywKCiAgLyoqCiAgICBGaXJlZCB3aGVuIHRoZSByZWNvcmQgZW50ZXJzIHRo
        ZSBlcnJvciBzdGF0ZS4KCiAgICBAZXZlbnQgYmVjYW1lRXJyb3IKICAqLwog
        IGJlY2FtZUVycm9yOiBFbWJlci5LLAoKICBkYXRhOiBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpIHsKICAgIHRoaXMuX2RhdGEgPSB0aGlzLl9kYXRhIHx8
        IHt9OwogICAgcmV0dXJuIHRoaXMuX2RhdGE7CiAgfSkucHJvcGVydHkoKSwK
        CiAgX2RhdGE6IG51bGwsCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgc2V0
        KHRoaXMsICdjdXJyZW50U3RhdGUnLCBEUy5Sb290U3RhdGUuZW1wdHkpOwog
        ICAgdGhpcy5fc3VwZXIoKTsKICAgIHRoaXMuX3NldHVwKCk7CiAgfSwKCiAg
        X3NldHVwOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX2NoYW5nZXNUb1N5bmMg
        PSB7fTsKICAgIHRoaXMuX2RlZmVycmVkVHJpZ2dlcnMgPSBbXTsKICAgIHRo
        aXMuX2RhdGEgPSB7fTsKICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSB7fTsKICAg
        IHRoaXMuX2luRmxpZ2h0QXR0cmlidXRlcyA9IHt9OwogICAgdGhpcy5fcmVs
        YXRpb25zaGlwcyA9IHt9OwogIH0sCgogIHNlbmQ6IGZ1bmN0aW9uKG5hbWUs
        IGNvbnRleHQpIHsKICAgIHZhciBjdXJyZW50U3RhdGUgPSBnZXQodGhpcywg
        J2N1cnJlbnRTdGF0ZScpOwoKICAgIGlmICghY3VycmVudFN0YXRlW25hbWVd
        KSB7CiAgICAgIHRoaXMuX3VuaGFuZGxlZEV2ZW50KGN1cnJlbnRTdGF0ZSwg
        bmFtZSwgY29udGV4dCk7CiAgICB9CgogICAgcmV0dXJuIGN1cnJlbnRTdGF0
        ZVtuYW1lXSh0aGlzLCBjb250ZXh0KTsKICB9LAoKICB0cmFuc2l0aW9uVG86
        IGZ1bmN0aW9uKG5hbWUpIHsKICAgIC8vIFBPU1NJQkxFIFRPRE86IFJlbW92
        ZSB0aGlzIGNvZGUgYW5kIHJlcGxhY2Ugd2l0aAogICAgLy8gYWx3YXlzIGhh
        dmluZyBkaXJlY3QgcmVmZXJlbmNlcyB0byBzdGF0ZSBvYmplY3RzCgogICAg
        dmFyIHBpdm90TmFtZSA9IG5hbWUuc3BsaXQoIi4iLCAxKSwKICAgICAgICBj
        dXJyZW50U3RhdGUgPSBnZXQodGhpcywgJ2N1cnJlbnRTdGF0ZScpLAogICAg
        ICAgIHN0YXRlID0gY3VycmVudFN0YXRlOwoKICAgIGRvIHsKICAgICAgaWYg
        KHN0YXRlLmV4aXQpIHsgc3RhdGUuZXhpdCh0aGlzKTsgfQogICAgICBzdGF0
        ZSA9IHN0YXRlLnBhcmVudFN0YXRlOwogICAgfSB3aGlsZSAoIXN0YXRlLmhh
        c093blByb3BlcnR5KHBpdm90TmFtZSkpOwoKICAgIHZhciBwYXRoID0gbmFt
        ZS5zcGxpdCgiLiIpOwoKICAgIHZhciBzZXR1cHMgPSBbXSwgZW50ZXJzID0g
        W10sIGksIGw7CgogICAgZm9yIChpPTAsIGw9cGF0aC5sZW5ndGg7IGk8bDsg
        aSsrKSB7CiAgICAgIHN0YXRlID0gc3RhdGVbcGF0aFtpXV07CgogICAgICBp
        ZiAoc3RhdGUuZW50ZXIpIHsgZW50ZXJzLnB1c2goc3RhdGUpOyB9CiAgICAg
        IGlmIChzdGF0ZS5zZXR1cCkgeyBzZXR1cHMucHVzaChzdGF0ZSk7IH0KICAg
        IH0KCiAgICBmb3IgKGk9MCwgbD1lbnRlcnMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgICBlbnRlcnNbaV0uZW50ZXIodGhpcyk7CiAgICB9CgogICAgc2V0
        KHRoaXMsICdjdXJyZW50U3RhdGUnLCBzdGF0ZSk7CgogICAgZm9yIChpPTAs
        IGw9c2V0dXBzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgc2V0dXBzW2ld
        LnNldHVwKHRoaXMpOwogICAgfQoKICAgIHRoaXMudXBkYXRlUmVjb3JkQXJy
        YXlzTGF0ZXIoKTsKICB9LAoKICBfdW5oYW5kbGVkRXZlbnQ6IGZ1bmN0aW9u
        KHN0YXRlLCBuYW1lLCBjb250ZXh0KSB7CiAgICB2YXIgZXJyb3JNZXNzYWdl
        ID0gIkF0dGVtcHRlZCB0byBoYW5kbGUgZXZlbnQgYCIgKyBuYW1lICsgImAg
        IjsKICAgIGVycm9yTWVzc2FnZSAgICArPSAib24gIiArIFN0cmluZyh0aGlz
        KSArICIgd2hpbGUgaW4gc3RhdGUgIjsKICAgIGVycm9yTWVzc2FnZSAgICAr
        PSBzdGF0ZS5zdGF0ZU5hbWUgKyAiLiAiOwoKICAgIGlmIChjb250ZXh0ICE9
        PSB1bmRlZmluZWQpIHsKICAgICAgZXJyb3JNZXNzYWdlICArPSAiQ2FsbGVk
        IHdpdGggIiArIEVtYmVyLmluc3BlY3QoY29udGV4dCkgKyAiLiI7CiAgICB9
        CgogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKGVycm9yTWVzc2FnZSk7CiAg
        fSwKCiAgd2l0aFRyYW5zYWN0aW9uOiBmdW5jdGlvbihmbikgewogICAgdmFy
        IHRyYW5zYWN0aW9uID0gZ2V0KHRoaXMsICd0cmFuc2FjdGlvbicpOwogICAg
        aWYgKHRyYW5zYWN0aW9uKSB7IGZuKHRyYW5zYWN0aW9uKTsgfQogIH0sCgog
        IGxvYWRpbmdEYXRhOiBmdW5jdGlvbihwcm9taXNlKSB7CiAgICB0aGlzLnNl
        bmQoJ2xvYWRpbmdEYXRhJywgcHJvbWlzZSk7CiAgfSwKCiAgbG9hZGVkRGF0
        YTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ2xvYWRlZERhdGEnKTsK
        ICB9LAoKICBub3RGb3VuZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQo
        J25vdEZvdW5kJyk7CiAgfSwKCiAgcHVzaGVkRGF0YTogZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLnNlbmQoJ3B1c2hlZERhdGEnKTsKICB9LAoKICAvKioKICAg
        IE1hcmtzIHRoZSByZWNvcmQgYXMgZGVsZXRlZCBidXQgZG9lcyBub3Qgc2F2
        ZSBpdC4gWW91IG11c3QgY2FsbAogICAgYHNhdmVgIGFmdGVyd2FyZHMgaWYg
        eW91IHdhbnQgdG8gcGVyc2lzdCBpdC4gWW91IG1pZ2h0IHVzZSB0aGlzCiAg
        ICBtZXRob2QgaWYgeW91IHdhbnQgdG8gYWxsb3cgdGhlIHVzZXIgdG8gc3Rp
        bGwgYHJvbGxiYWNrKClgIGEKICAgIGRlbGV0ZSBhZnRlciBpdCB3YXMgbWFk
        ZS4KCiAgICBAbWV0aG9kIGRlbGV0ZVJlY29yZAogICovCiAgZGVsZXRlUmVj
        b3JkOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuc2VuZCgnZGVsZXRlUmVjb3Jk
        Jyk7CiAgfSwKCiAgLyoqCiAgICBTYW1lIGFzIGBkZWxldGVSZWNvcmRgLCBi
        dXQgc2F2ZXMgdGhlIHJlY29yZCBpbW1lZGlhdGVseS4KCiAgICBAbWV0aG9k
        IGRlc3Ryb3lSZWNvcmQKICAgIEByZXR1cm5zIFByb21pc2UKICAqLwogIGRl
        c3Ryb3lSZWNvcmQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5kZWxldGVSZWNv
        cmQoKTsKICAgIHJldHVybiB0aGlzLnNhdmUoKTsKICB9LAoKICB1bmxvYWRS
        ZWNvcmQ6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fu
        IG9ubHkgdW5sb2FkIGEgbG9hZGVkLCBub24tZGlydHkgcmVjb3JkLiIsICFn
        ZXQodGhpcywgJ2lzRGlydHknKSk7CgogICAgdGhpcy5zZW5kKCd1bmxvYWRS
        ZWNvcmQnKTsKICB9LAoKICBjbGVhclJlbGF0aW9uc2hpcHM6IGZ1bmN0aW9u
        KCkgewogICAgdGhpcy5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKG5hbWUs
        IHJlbGF0aW9uc2hpcCkgewogICAgICBpZiAocmVsYXRpb25zaGlwLmtpbmQg
        PT09ICdiZWxvbmdzVG8nKSB7CiAgICAgICAgc2V0KHRoaXMsIG5hbWUsIG51
        bGwpOwogICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uc2hpcC5raW5kID09PSAn
        aGFzTWFueScpIHsKICAgICAgICB2YXIgaGFzTWFueSA9IHRoaXMuX3JlbGF0
        aW9uc2hpcHNbcmVsYXRpb25zaGlwLm5hbWVdOwogICAgICAgIGlmIChoYXNN
        YW55KSB7IGhhc01hbnkuY2xlYXIoKTsgfQogICAgICB9CiAgICB9LCB0aGlz
        KTsKICB9LAoKICB1cGRhdGVSZWNvcmRBcnJheXM6IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIHN0b3JlID0gZ2V0KHRoaXMsICdzdG9yZScpOwogICAgaWYgKHN0
        b3JlKSB7CiAgICAgIHN0b3JlLmRhdGFXYXNVcGRhdGVkKHRoaXMuY29uc3Ry
        dWN0b3IsIHRoaXMpOwogICAgfQogIH0sCgogIC8qKgogICAgR2V0cyB0aGUg
        ZGlmZiBmb3IgdGhlIGN1cnJlbnQgbW9kZWwuCgogICAgQG1ldGhvZCBjaGFu
        Z2VkQXR0cmlidXRlcwoKICAgIEByZXR1cm5zIHtPYmplY3R9IGFuIG9iamVj
        dCwgd2hvc2Uga2V5cyBhcmUgY2hhbmdlZCBwcm9wZXJ0aWVzLAogICAgICBh
        bmQgdmFsdWUgaXMgYW4gW29sZFByb3AsIG5ld1Byb3BdIGFycmF5LgogICov
        CiAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkgewogICAgdmFyIG9s
        ZERhdGEgPSBnZXQodGhpcywgJ19kYXRhJyksCiAgICAgICAgbmV3RGF0YSA9
        IGdldCh0aGlzLCAnX2F0dHJpYnV0ZXMnKSwKICAgICAgICBkaWZmRGF0YSA9
        IHt9LAogICAgICAgIHByb3A7CgogICAgZm9yIChwcm9wIGluIG5ld0RhdGEp
        IHsKICAgICAgZGlmZkRhdGFbcHJvcF0gPSBbb2xkRGF0YVtwcm9wXSwgbmV3
        RGF0YVtwcm9wXV07CiAgICB9CgogICAgcmV0dXJuIGRpZmZEYXRhOwogIH0s
        CgogIGFkYXB0ZXJXaWxsQ29tbWl0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMu
        c2VuZCgnd2lsbENvbW1pdCcpOwogIH0sCgogIC8qKgogICAgSWYgdGhlIGFk
        YXB0ZXIgZGlkIG5vdCByZXR1cm4gYSBoYXNoIGluIHJlc3BvbnNlIHRvIGEg
        Y29tbWl0LAogICAgbWVyZ2UgdGhlIGNoYW5nZWQgYXR0cmlidXRlcyBhbmQg
        cmVsYXRpb25zaGlwcyBpbnRvIHRoZSBleGlzdGluZwogICAgc2F2ZWQgZGF0
        YS4KCiAgICBAbWV0aG9kIGFkYXB0ZXJEaWRDb21taXQKICAqLwogIGFkYXB0
        ZXJEaWRDb21taXQ6IGZ1bmN0aW9uKGRhdGEpIHsKICAgIHNldCh0aGlzLCAn
        aXNFcnJvcicsIGZhbHNlKTsKCiAgICBpZiAoZGF0YSkgewogICAgICB0aGlz
        Ll9kYXRhID0gZGF0YTsKICAgIH0gZWxzZSB7CiAgICAgIEVtYmVyLm1peGlu
        KHRoaXMuX2RhdGEsIHRoaXMuX2luRmxpZ2h0QXR0cmlidXRlcyk7CiAgICB9
        CgogICAgdGhpcy5faW5GbGlnaHRBdHRyaWJ1dGVzID0ge307CgogICAgdGhp
        cy5zZW5kKCdkaWRDb21taXQnKTsKICAgIHRoaXMudXBkYXRlUmVjb3JkQXJy
        YXlzTGF0ZXIoKTsKCiAgICBpZiAoIWRhdGEpIHsgcmV0dXJuOyB9CgogICAg
        dGhpcy5zdXNwZW5kUmVsYXRpb25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCkg
        ewogICAgICB0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCdkYXRhJyk7CiAg
        ICB9KTsKICB9LAoKICBhZGFwdGVyRGlkRGlydHk6IGZ1bmN0aW9uKCkgewog
        ICAgdGhpcy5zZW5kKCdiZWNvbWVEaXJ0eScpOwogICAgdGhpcy51cGRhdGVS
        ZWNvcmRBcnJheXNMYXRlcigpOwogIH0sCgogIGRhdGFEaWRDaGFuZ2U6IEVt
        YmVyLm9ic2VydmVyKGZ1bmN0aW9uKCkgewogICAgdGhpcy5yZWxvYWRIYXNN
        YW55cygpOwogIH0sICdkYXRhJyksCgogIHJlbG9hZEhhc01hbnlzOiBmdW5j
        dGlvbigpIHsKICAgIHZhciByZWxhdGlvbnNoaXBzID0gZ2V0KHRoaXMuY29u
        c3RydWN0b3IsICdyZWxhdGlvbnNoaXBzQnlOYW1lJyk7CiAgICB0aGlzLnVw
        ZGF0ZVJlY29yZEFycmF5c0xhdGVyKCk7CiAgICByZWxhdGlvbnNoaXBzLmZv
        ckVhY2goZnVuY3Rpb24obmFtZSwgcmVsYXRpb25zaGlwKSB7CiAgICAgIGlm
        ICh0aGlzLl9kYXRhLmxpbmtzICYmIHRoaXMuX2RhdGEubGlua3NbbmFtZV0p
        IHsgcmV0dXJuOyB9CiAgICAgIGlmIChyZWxhdGlvbnNoaXAua2luZCA9PT0g
        J2hhc01hbnknKSB7CiAgICAgICAgdGhpcy5oYXNNYW55RGlkQ2hhbmdlKHJl
        bGF0aW9uc2hpcC5rZXkpOwogICAgICB9CiAgICB9LCB0aGlzKTsKICB9LAoK
        ICBoYXNNYW55RGlkQ2hhbmdlOiBmdW5jdGlvbihrZXkpIHsKICAgIHZhciBo
        YXNNYW55ID0gdGhpcy5fcmVsYXRpb25zaGlwc1trZXldOwoKICAgIGlmICho
        YXNNYW55KSB7CiAgICAgIHZhciByZWNvcmRzID0gdGhpcy5fZGF0YVtrZXld
        IHx8IFtdOwoKICAgICAgc2V0KGhhc01hbnksICdjb250ZW50JywgRW1iZXIu
        QShyZWNvcmRzKSk7CiAgICAgIHNldChoYXNNYW55LCAnaXNMb2FkZWQnLCB0
        cnVlKTsKICAgICAgaGFzTWFueS50cmlnZ2VyKCdkaWRMb2FkJyk7CiAgICB9
        CiAgfSwKCiAgdXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXI6IGZ1bmN0aW9uKCkg
        ewogICAgRW1iZXIucnVuLm9uY2UodGhpcywgdGhpcy51cGRhdGVSZWNvcmRB
        cnJheXMpOwogIH0sCgogIHNldHVwRGF0YTogZnVuY3Rpb24oZGF0YSwgcGFy
        dGlhbCkgewogICAgaWYgKHBhcnRpYWwpIHsKICAgICAgRW1iZXIubWVyZ2Uo
        dGhpcy5fZGF0YSwgZGF0YSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9k
        YXRhID0gZGF0YTsKICAgIH0KCiAgICB2YXIgcmVsYXRpb25zaGlwcyA9IHRo
        aXMuX3JlbGF0aW9uc2hpcHM7CgogICAgdGhpcy5lYWNoUmVsYXRpb25zaGlw
        KGZ1bmN0aW9uKG5hbWUsIHJlbCkgewogICAgICBpZiAoZGF0YS5saW5rcyAm
        JiBkYXRhLmxpbmtzW25hbWVdKSB7IHJldHVybjsgfQogICAgICBpZiAocmVs
        Lm9wdGlvbnMuYXN5bmMpIHsgcmVsYXRpb25zaGlwc1tuYW1lXSA9IG51bGw7
        IH0KICAgIH0pOwoKICAgIGlmIChkYXRhKSB7IHRoaXMucHVzaGVkRGF0YSgp
        OyB9CgogICAgdGhpcy5zdXNwZW5kUmVsYXRpb25zaGlwT2JzZXJ2ZXJzKGZ1
        bmN0aW9uKCkgewogICAgICB0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCdk
        YXRhJyk7CiAgICB9KTsKICB9LAoKICBtYXRlcmlhbGl6ZUlkOiBmdW5jdGlv
        bihpZCkgewogICAgc2V0KHRoaXMsICdpZCcsIGlkKTsKICB9LAoKICBtYXRl
        cmlhbGl6ZUF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGF0dHJpYnV0ZXMpIHsKICAg
        IEVtYmVyLmFzc2VydCgiTXVzdCBwYXNzIGEgaGFzaCBvZiBhdHRyaWJ1dGVz
        IHRvIG1hdGVyaWFsaXplQXR0cmlidXRlcyIsICEhYXR0cmlidXRlcyk7CiAg
        ICBtZXJnZSh0aGlzLl9kYXRhLCBhdHRyaWJ1dGVzKTsKICB9LAoKICBtYXRl
        cmlhbGl6ZUF0dHJpYnV0ZTogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAg
        IHRoaXMuX2RhdGFbbmFtZV0gPSB2YWx1ZTsKICB9LAoKICB1cGRhdGVIYXNN
        YW55OiBmdW5jdGlvbihuYW1lLCByZWNvcmRzKSB7CiAgICB0aGlzLl9kYXRh
        W25hbWVdID0gcmVjb3JkczsKICAgIHRoaXMuaGFzTWFueURpZENoYW5nZShu
        YW1lKTsKICB9LAoKICB1cGRhdGVCZWxvbmdzVG86IGZ1bmN0aW9uKG5hbWUs
        IHJlY29yZCkgewogICAgdGhpcy5fZGF0YVtuYW1lXSA9IHJlY29yZDsKICB9
        LAoKICByb2xsYmFjazogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9hdHRyaWJ1
        dGVzID0ge307CgogICAgaWYgKGdldCh0aGlzLCAnaXNFcnJvcicpKSB7CiAg
        ICAgIHRoaXMuX2luRmxpZ2h0QXR0cmlidXRlcyA9IHt9OwogICAgICBzZXQo
        dGhpcywgJ2lzRXJyb3InLCBmYWxzZSk7CiAgICB9CgogICAgdGhpcy5zZW5k
        KCdyb2xsZWRCYWNrJyk7CgogICAgdGhpcy5zdXNwZW5kUmVsYXRpb25zaGlw
        T2JzZXJ2ZXJzKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLm5vdGlmeVByb3Bl
        cnR5Q2hhbmdlKCdkYXRhJyk7CiAgICB9KTsKICB9LAoKICB0b1N0cmluZ0V4
        dGVuc2lvbjogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZ2V0KHRoaXMsICdp
        ZCcpOwogIH0sCgogIC8qKgogICAgVGhlIGdvYWwgb2YgdGhpcyBtZXRob2Qg
        aXMgdG8gdGVtcG9yYXJpbHkgZGlzYWJsZSBzcGVjaWZpYyBvYnNlcnZlcnMK
        ICAgIHRoYXQgdGFrZSBhY3Rpb24gaW4gcmVzcG9uc2UgdG8gYXBwbGljYXRp
        b24gY2hhbmdlcy4KCiAgICBUaGlzIGFsbG93cyB0aGUgc3lzdGVtIHRvIG1h
        a2UgY2hhbmdlcyAoc3VjaCBhcyBtYXRlcmlhbGl6YXRpb24gYW5kCiAgICBy
        b2xsYmFjaykgdGhhdCBzaG91bGQgbm90IHRyaWdnZXIgc2Vjb25kYXJ5IGJl
        aGF2aW9yIChzdWNoIGFzIHNldHRpbmcgYW4KICAgIGludmVyc2UgcmVsYXRp
        b25zaGlwIG9yIG1hcmtpbmcgcmVjb3JkcyBhcyBkaXJ0eSkuCgogICAgVGhl
        IHNwZWNpZmljIGltcGxlbWVudGF0aW9uIHdpbGwgbGlrZWx5IGNoYW5nZSBh
        cyBFbWJlciBwcm9wZXIgcHJvdmlkZXMKICAgIGJldHRlciBpbmZyYXN0cnVj
        dHVyZSBmb3Igc3VzcGVuZGluZyBncm91cHMgb2Ygb2JzZXJ2ZXJzLCBhbmQg
        aWYgQXJyYXkKICAgIG9ic2VydmF0aW9uIGJlY29tZXMgbW9yZSB1bmlmaWVk
        IHdpdGggcmVndWxhciBvYnNlcnZlcnMuCgogICAgQG1ldGhvZCBzdXNwZW5k
        UmVsYXRpb25zaGlwT2JzZXJ2ZXJzCiAgICBAcHJpdmF0ZQogICAgQHBhcmFt
        IGNhbGxiYWNrCiAgICBAcGFyYW0gYmluZGluZwogICovCiAgc3VzcGVuZFJl
        bGF0aW9uc2hpcE9ic2VydmVyczogZnVuY3Rpb24oY2FsbGJhY2ssIGJpbmRp
        bmcpIHsKICAgIHZhciBvYnNlcnZlcnMgPSBnZXQodGhpcy5jb25zdHJ1Y3Rv
        ciwgJ3JlbGF0aW9uc2hpcE5hbWVzJykuYmVsb25nc1RvOwogICAgdmFyIHNl
        bGYgPSB0aGlzOwoKICAgIHRyeSB7CiAgICAgIHRoaXMuX3N1c3BlbmRlZFJl
        bGF0aW9uc2hpcHMgPSB0cnVlOwogICAgICBFbWJlci5fc3VzcGVuZE9ic2Vy
        dmVycyhzZWxmLCBvYnNlcnZlcnMsIG51bGwsICdiZWxvbmdzVG9EaWRDaGFu
        Z2UnLCBmdW5jdGlvbigpIHsKICAgICAgICBFbWJlci5fc3VzcGVuZEJlZm9y
        ZU9ic2VydmVycyhzZWxmLCBvYnNlcnZlcnMsIG51bGwsICdiZWxvbmdzVG9X
        aWxsQ2hhbmdlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICBjYWxsYmFjay5j
        YWxsKGJpbmRpbmcgfHwgc2VsZik7CiAgICAgICAgfSk7CiAgICAgIH0pOwog
        ICAgfSBmaW5hbGx5IHsKICAgICAgdGhpcy5fc3VzcGVuZGVkUmVsYXRpb25z
        aGlwcyA9IGZhbHNlOwogICAgfQogIH0sCgogIC8qKgogICAgU2F2ZSB0aGUg
        cmVjb3JkLgoKICAgIEBtZXRob2Qgc2F2ZQogICovCiAgc2F2ZTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgcmVzb2x2ZXIgPSBFbWJlci5SU1ZQLmRlZmVyKCk7
        CgogICAgdGhpcy5nZXQoJ3N0b3JlJykuc2NoZWR1bGVTYXZlKHRoaXMsIHJl
        c29sdmVyKTsKICAgIHRoaXMuX2luRmxpZ2h0QXR0cmlidXRlcyA9IHRoaXMu
        X2F0dHJpYnV0ZXM7CiAgICB0aGlzLl9hdHRyaWJ1dGVzID0ge307CgogICAg
        cmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTogcmVz
        b2x2ZXIucHJvbWlzZSB9KTsKICB9LAoKICAvKioKICAgIFJlbG9hZCB0aGUg
        cmVjb3JkIGZyb20gdGhlIGFkYXB0ZXIuCgogICAgVGhpcyB3aWxsIG9ubHkg
        d29yayBpZiB0aGUgcmVjb3JkIGhhcyBhbHJlYWR5IGZpbmlzaGVkIGxvYWRp
        bmcKICAgIGFuZCBoYXMgbm90IHlldCBiZWVuIG1vZGlmaWVkIChgaXNMb2Fk
        ZWRgIGJ1dCBub3QgYGlzRGlydHlgLAogICAgb3IgYGlzU2F2aW5nYCkuCgog
        ICAgQG1ldGhvZCByZWxvYWQKICAqLwogIHJlbG9hZDogZnVuY3Rpb24oKSB7
        CiAgICBzZXQodGhpcywgJ2lzUmVsb2FkaW5nJywgdHJ1ZSk7CgogICAgdmFy
        IHJlc29sdmVyID0gRW1iZXIuUlNWUC5kZWZlcigpLCByZWNvcmQgPSB0aGlz
        OwoKICAgIHJlc29sdmVyLnByb21pc2UgPSByZXNvbHZlci5wcm9taXNlLnRo
        ZW4oZnVuY3Rpb24oKSB7CiAgICAgIHJlY29yZC5zZXQoJ2lzUmVsb2FkaW5n
        JywgZmFsc2UpOwogICAgICByZWNvcmQuc2V0KCdpc0Vycm9yJywgZmFsc2Up
        OwogICAgICByZXR1cm4gcmVjb3JkOwogICAgfSwgZnVuY3Rpb24ocmVhc29u
        KSB7CiAgICAgIHJlY29yZC5zZXQoJ2lzRXJyb3InLCB0cnVlKTsKICAgICAg
        dGhyb3cgcmVhc29uOwogICAgfSk7CgogICAgdGhpcy5zZW5kKCdyZWxvYWRS
        ZWNvcmQnLCByZXNvbHZlcik7CgogICAgcmV0dXJuIERTLlByb21pc2VPYmpl
        Y3QuY3JlYXRlKHsgcHJvbWlzZTogcmVzb2x2ZXIucHJvbWlzZSB9KTsKICB9
        LAoKICAvLyBGT1IgVVNFIERVUklORyBDT01NSVQgUFJPQ0VTUwoKICBhZGFw
        dGVyRGlkVXBkYXRlQXR0cmlidXRlOiBmdW5jdGlvbihhdHRyaWJ1dGVOYW1l
        LCB2YWx1ZSkgewoKICAgIC8vIElmIGEgdmFsdWUgaXMgcGFzc2VkIGluLCB1
        cGRhdGUgdGhlIGludGVybmFsIGF0dHJpYnV0ZXMgYW5kIGNsZWFyCiAgICAv
        LyB0aGUgYXR0cmlidXRlIGNhY2hlIHNvIGl0IHBpY2tzIHVwIHRoZSBuZXcg
        dmFsdWUuIE90aGVyd2lzZSwKICAgIC8vIGNvbGxhcHNlIHRoZSBjdXJyZW50
        IHZhbHVlIGludG8gdGhlIGludGVybmFsIGF0dHJpYnV0ZXMgYmVjYXVzZQog
        ICAgLy8gdGhlIGFkYXB0ZXIgaGFzIGFja25vd2xlZGdlZCBpdC4KICAgIGlm
        ICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMuX2RhdGFbYXR0
        cmlidXRlTmFtZV0gPSB2YWx1ZTsKICAgICAgdGhpcy5ub3RpZnlQcm9wZXJ0
        eUNoYW5nZShhdHRyaWJ1dGVOYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIHRo
        aXMuX2RhdGFbYXR0cmlidXRlTmFtZV0gPSB0aGlzLl9pbkZsaWdodEF0dHJp
        YnV0ZXNbYXR0cmlidXRlTmFtZV07CiAgICB9CgogICAgdGhpcy51cGRhdGVS
        ZWNvcmRBcnJheXNMYXRlcigpOwogIH0sCgogIGFkYXB0ZXJEaWRJbnZhbGlk
        YXRlOiBmdW5jdGlvbihlcnJvcnMpIHsKICAgIHRoaXMuc2VuZCgnYmVjYW1l
        SW52YWxpZCcsIGVycm9ycyk7CiAgfSwKCiAgYWRhcHRlckRpZEVycm9yOiBm
        dW5jdGlvbigpIHsKICAgIHRoaXMuc2VuZCgnYmVjYW1lRXJyb3InKTsKICAg
        IHNldCh0aGlzLCAnaXNFcnJvcicsIHRydWUpOwogIH0sCgogIC8qKgogICAg
        T3ZlcnJpZGUgdGhlIGRlZmF1bHQgZXZlbnQgZmlyaW5nIGZyb20gRW1iZXIu
        RXZlbnRlZCB0bwogICAgYWxzbyBjYWxsIG1ldGhvZHMgd2l0aCB0aGUgZ2l2
        ZW4gbmFtZS4KCiAgICBAbWV0aG9kIHRyaWdnZXIKICAgIEBwcml2YXRlCiAg
        ICBAcGFyYW0gbmFtZQogICovCiAgdHJpZ2dlcjogZnVuY3Rpb24obmFtZSkg
        ewogICAgRW1iZXIudHJ5SW52b2tlKHRoaXMsIG5hbWUsIFtdLnNsaWNlLmNh
        bGwoYXJndW1lbnRzLCAxKSk7CiAgICB0aGlzLl9zdXBlci5hcHBseSh0aGlz
        LCBhcmd1bWVudHMpOwogIH0sCgogIHRyaWdnZXJMYXRlcjogZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzLnB1c2goYXJndW1lbnRz
        KTsKICAgIG9uY2UodGhpcywgJ190cmlnZ2VyRGVmZXJyZWRUcmlnZ2Vycycp
        OwogIH0sCgogIF90cmlnZ2VyRGVmZXJyZWRUcmlnZ2VyczogZnVuY3Rpb24o
        KSB7CiAgICBmb3IgKHZhciBpPTAsIGw9dGhpcy5fZGVmZXJyZWRUcmlnZ2Vy
        cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHRoaXMudHJpZ2dlci5hcHBs
        eSh0aGlzLCB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzW2ldKTsKICAgIH0KCiAg
        ICB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzID0gW107CiAgfQp9KTsKCkRTLk1v
        ZGVsLnJlb3BlbkNsYXNzKHsKCiAgLyoqCiAgICBBbGlhcyBEUy5Nb2RlbCdz
        IGBjcmVhdGVgIG1ldGhvZCB0byBgX2NyZWF0ZWAuIFRoaXMgYWxsb3dzIHVz
        IHRvIGNyZWF0ZSBEUy5Nb2RlbAogICAgaW5zdGFuY2VzIGZyb20gd2l0aGlu
        IHRoZSBzdG9yZSwgYnV0IGlmIGVuZCB1c2VycyBhY2NpZGVudGFsbHkgY2Fs
        bCBgY3JlYXRlKClgCiAgICAoaW5zdGVhZCBvZiBgY3JlYXRlUmVjb3JkKClg
        KSwgd2UgY2FuIHJhaXNlIGFuIGVycm9yLgoKICAgIEBtZXRob2QgX2NyZWF0
        ZQogICAgQHByaXZhdGUKICAgIEBzdGF0aWMKICAqLwogIF9jcmVhdGU6IERT
        Lk1vZGVsLmNyZWF0ZSwKCiAgLyoqCiAgICBPdmVycmlkZSB0aGUgY2xhc3Mn
        IGBjcmVhdGUoKWAgbWV0aG9kIHRvIHJhaXNlIGFuIGVycm9yLiBUaGlzIHBy
        ZXZlbnRzIGVuZCB1c2VycwogICAgZnJvbSBpbmFkdmVydGVudGx5IGNhbGxp
        bmcgYGNyZWF0ZSgpYCBpbnN0ZWFkIG9mIGBjcmVhdGVSZWNvcmQoKWAuIFRo
        ZSBzdG9yZSBpcwogICAgc3RpbGwgYWJsZSB0byBjcmVhdGUgaW5zdGFuY2Vz
        IGJ5IGNhbGxpbmcgdGhlIGBfY3JlYXRlKClgIG1ldGhvZC4KCiAgICBAbWV0
        aG9kIGNyZWF0ZQogICAgQHByaXZhdGUKICAgIEBzdGF0aWMKICAqLwogIGNy
        ZWF0ZTogZnVuY3Rpb24oKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        IllvdSBzaG91bGQgbm90IGNhbGwgYGNyZWF0ZWAgb24gYSBtb2RlbC4gSW5z
        dGVhZCwgY2FsbCBgc3RvcmUuY3JlYXRlUmVjb3JkYCB3aXRoIHRoZSBhdHRy
        aWJ1dGVzIHlvdSB3b3VsZCBsaWtlIHRvIHNldC4iKTsKICB9Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQ7CgovKioKICBAY2xhc3MgTW9kZWwK
        ICBAbmFtZXNwYWNlIERTCiovCkRTLk1vZGVsLnJlb3BlbkNsYXNzKHsKICBh
        dHRyaWJ1dGVzOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZh
        ciBtYXAgPSBFbWJlci5NYXAuY3JlYXRlKCk7CgogICAgdGhpcy5lYWNoQ29t
        cHV0ZWRQcm9wZXJ0eShmdW5jdGlvbihuYW1lLCBtZXRhKSB7CiAgICAgIGlm
        IChtZXRhLmlzQXR0cmlidXRlKSB7CiAgICAgICAgRW1iZXIuYXNzZXJ0KCJZ
        b3UgbWF5IG5vdCBzZXQgYGlkYCBhcyBhbiBhdHRyaWJ1dGUgb24geW91ciBt
        b2RlbC4gUGxlYXNlIHJlbW92ZSBhbnkgbGluZXMgdGhhdCBsb29rIGxpa2U6
        IGBpZDogRFMuYXR0cignPHR5cGU+JylgIGZyb20gIiArIHRoaXMudG9TdHJp
        bmcoKSwgbmFtZSAhPT0gJ2lkJyk7CgogICAgICAgIG1ldGEubmFtZSA9IG5h
        bWU7CiAgICAgICAgbWFwLnNldChuYW1lLCBtZXRhKTsKICAgICAgfQogICAg
        fSk7CgogICAgcmV0dXJuIG1hcDsKICB9KSwKCiAgdHJhbnNmb3JtZWRBdHRy
        aWJ1dGVzOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBt
        YXAgPSBFbWJlci5NYXAuY3JlYXRlKCk7CgogICAgdGhpcy5lYWNoQXR0cmli
        dXRlKGZ1bmN0aW9uKGtleSwgbWV0YSkgewogICAgICBpZiAobWV0YS50eXBl
        KSB7CiAgICAgICAgbWFwLnNldChrZXksIG1ldGEudHlwZSk7CiAgICAgIH0K
        ICAgIH0pOwoKICAgIHJldHVybiBtYXA7CiAgfSksCgogIGVhY2hBdHRyaWJ1
        dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICBnZXQodGhp
        cywgJ2F0dHJpYnV0ZXMnKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUsIG1ldGEp
        IHsKICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCBuYW1lLCBtZXRhKTsK
        ICAgIH0sIGJpbmRpbmcpOwogIH0sCgogIGVhY2hUcmFuc2Zvcm1lZEF0dHJp
        YnV0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGJpbmRpbmcpIHsKICAgIGdldCh0
        aGlzLCAndHJhbnNmb3JtZWRBdHRyaWJ1dGVzJykuZm9yRWFjaChmdW5jdGlv
        bihuYW1lLCB0eXBlKSB7CiAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywg
        bmFtZSwgdHlwZSk7CiAgICB9KTsKICB9Cn0pOwoKCkRTLk1vZGVsLnJlb3Bl
        bih7CiAgZWFjaEF0dHJpYnV0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGJpbmRp
        bmcpIHsKICAgIHRoaXMuY29uc3RydWN0b3IuZWFjaEF0dHJpYnV0ZShjYWxs
        YmFjaywgYmluZGluZyk7CiAgfQp9KTsKCmZ1bmN0aW9uIGdldERlZmF1bHRW
        YWx1ZShyZWNvcmQsIG9wdGlvbnMsIGtleSkgewogIGlmICh0eXBlb2Ygb3B0
        aW9ucy5kZWZhdWx0VmFsdWUgPT09ICJmdW5jdGlvbiIpIHsKICAgIHJldHVy
        biBvcHRpb25zLmRlZmF1bHRWYWx1ZSgpOwogIH0gZWxzZSB7CiAgICByZXR1
        cm4gb3B0aW9ucy5kZWZhdWx0VmFsdWU7CiAgfQp9CgpmdW5jdGlvbiBoYXNW
        YWx1ZShyZWNvcmQsIGtleSkgewogIHJldHVybiByZWNvcmQuX2F0dHJpYnV0
        ZXMuaGFzT3duUHJvcGVydHkoa2V5KSB8fAogICAgICAgICByZWNvcmQuX2lu
        RmxpZ2h0QXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpIHx8CiAgICAg
        ICAgIHJlY29yZC5fZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpOwp9CgpmdW5j
        dGlvbiBnZXRWYWx1ZShyZWNvcmQsIGtleSkgewogIGlmIChyZWNvcmQuX2F0
        dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgcmV0dXJuIHJl
        Y29yZC5fYXR0cmlidXRlc1trZXldOwogIH0gZWxzZSBpZiAocmVjb3JkLl9p
        bkZsaWdodEF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAg
        cmV0dXJuIHJlY29yZC5faW5GbGlnaHRBdHRyaWJ1dGVzW2tleV07CiAgfSBl
        bHNlIHsKICAgIHJldHVybiByZWNvcmQuX2RhdGFba2V5XTsKICB9Cn0KCi8q
        KgogIGBEUy5hdHRyYCBkZWZpbmVzIGFuIGF0dHJpYnV0ZSBvbiBhIERTLk1v
        ZGVsLgogIEJ5IGRlZmF1bHQsIGF0dHJpYnV0ZXMgYXJlIHBhc3NlZCB0aHJv
        dWdoIGFzLWlzLCBob3dldmVyIHlvdSBjYW4gc3BlY2lmeSBhbgogIG9wdGlv
        bmFsIHR5cGUgdG8gaGF2ZSB0aGUgdmFsdWUgYXV0b21hdGljYWxseSB0cmFu
        c2Zvcm1lZC4KICBFbWJlciBEYXRhIHNoaXBzIHdpdGggZm91ciBiYXNpYyB0
        cmFuc2Zvcm0gdHlwZXM6CiAgICAnc3RyaW5nJywgJ251bWJlcicsICdib29s
        ZWFuJyBhbmQgJ2RhdGUnLgogIFlvdSBjYW4gZGVmaW5lIHlvdXIgb3duIHRy
        YW5zZm9ybXMgYnkgc3ViY2xhc3NpbmcgRFMuVHJhbnNmb3JtLgoKICBEUy5h
        dHRyIHRha2VzIGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBzZWNvbmQgcGFyYW1l
        dGVyLCBjdXJyZW50bHkKICBzdXBwb3J0ZWQgb3B0aW9ucyBhcmU6CiAgICAn
        ZGVmYXVsdFZhbHVlJzogUGFzcyBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRv
        IGJlIGNhbGxlZCB0byBzZXQgdGhlIGF0dHJpYnV0ZQogICAgICAgICAgICAg
        ICAgICAgIHRvIGEgZGVmYXVsdCB2YWx1ZSBpZiBub25lIGlzIHN1cHBsaWVk
        LgoKICBAbWV0aG9kIGF0dHIKICBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUg
        YXR0cmlidXRlIHR5cGUKICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBhIGhh
        c2ggb2Ygb3B0aW9ucwoqLwoKRFMuYXR0ciA9IGZ1bmN0aW9uKHR5cGUsIG9w
        dGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgdmFyIG1l
        dGEgPSB7CiAgICB0eXBlOiB0eXBlLAogICAgaXNBdHRyaWJ1dGU6IHRydWUs
        CiAgICBvcHRpb25zOiBvcHRpb25zCiAgfTsKCiAgcmV0dXJuIEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmIChhcmd1bWVu
        dHMubGVuZ3RoID4gMSkgewogICAgICBFbWJlci5hc3NlcnQoIllvdSBtYXkg
        bm90IHNldCBgaWRgIGFzIGFuIGF0dHJpYnV0ZSBvbiB5b3VyIG1vZGVsLiBQ
        bGVhc2UgcmVtb3ZlIGFueSBsaW5lcyB0aGF0IGxvb2sgbGlrZTogYGlkOiBE
        Uy5hdHRyKCc8dHlwZT4nKWAgZnJvbSAiICsgdGhpcy5jb25zdHJ1Y3Rvci50
        b1N0cmluZygpLCBrZXkgIT09ICdpZCcpOwogICAgICB2YXIgb2xkVmFsdWUg
        PSB0aGlzLl9hdHRyaWJ1dGVzW2tleV0gfHwgdGhpcy5faW5GbGlnaHRBdHRy
        aWJ1dGVzW2tleV0gfHwgdGhpcy5fZGF0YVtrZXldOwogICAgICB0aGlzLnNl
        bmQoJ2RpZFNldFByb3BlcnR5JywgeyBuYW1lOiBrZXksIG9sZFZhbHVlOiBv
        bGRWYWx1ZSwgb3JpZ2luYWxWYWx1ZTogdGhpcy5fZGF0YVtrZXldLCB2YWx1
        ZTogdmFsdWUgfSk7CiAgICAgIHRoaXMuX2F0dHJpYnV0ZXNba2V5XSA9IHZh
        bHVlOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9IGVsc2UgaWYgKGhhc1Zh
        bHVlKHRoaXMsIGtleSkpIHsKICAgICAgcmV0dXJuIGdldFZhbHVlKHRoaXMs
        IGtleSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZ2V0RGVmYXVsdFZh
        bHVlKHRoaXMsIG9wdGlvbnMsIGtleSk7CiAgICB9CgogIC8vIGBkYXRhYCBp
        cyBuZXZlciBzZXQgZGlyZWN0bHkuIEhvd2V2ZXIsIGl0IG1heSBiZQogIC8v
        IGludmFsaWRhdGVkIGZyb20gdGhlIHN0YXRlIG1hbmFnZXIncyBzZXREYXRh
        CiAgLy8gZXZlbnQuCiAgfSkucHJvcGVydHkoJ2RhdGEnKS5tZXRhKG1ldGEp
        Owp9OwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBl
        bWJlci1kYXRhCiovCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBt
        b2R1bGUgZW1iZXItZGF0YQoqLwoKLyoqCiAgQW4gQXR0cmlidXRlQ2hhbmdl
        IG9iamVjdCBpcyBjcmVhdGVkIHdoZW5ldmVyIGEgcmVjb3JkJ3MKICBhdHRy
        aWJ1dGUgY2hhbmdlcyB2YWx1ZS4gSXQgaXMgdXNlZCB0byB0cmFjayBjaGFu
        Z2VzIHRvIGEKICByZWNvcmQgYmV0d2VlbiB0cmFuc2FjdGlvbiBjb21taXRz
        LgoKICBAY2xhc3MgQXR0cmlidXRlQ2hhbmdlCiAgQG5hbWVzcGFjZSBEUwog
        IEBwcml2YXRlCiAgQGNvbnN0cnVjdG9yCiovCnZhciBBdHRyaWJ1dGVDaGFu
        Z2UgPSBEUy5BdHRyaWJ1dGVDaGFuZ2UgPSBmdW5jdGlvbihvcHRpb25zKSB7
        CiAgdGhpcy5yZWNvcmQgPSBvcHRpb25zLnJlY29yZDsKICB0aGlzLnN0b3Jl
        ID0gb3B0aW9ucy5zdG9yZTsKICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWU7
        CiAgdGhpcy52YWx1ZSA9IG9wdGlvbnMudmFsdWU7CiAgdGhpcy5vbGRWYWx1
        ZSA9IG9wdGlvbnMub2xkVmFsdWU7Cn07CgpBdHRyaWJ1dGVDaGFuZ2UuY3Jl
        YXRlQ2hhbmdlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHJldHVybiBuZXcg
        QXR0cmlidXRlQ2hhbmdlKG9wdGlvbnMpOwp9OwoKQXR0cmlidXRlQ2hhbmdl
        LnByb3RvdHlwZSA9IHsKICBzeW5jOiBmdW5jdGlvbigpIHsKICAgIGlmICh0
        aGlzLnZhbHVlICE9PSB0aGlzLm9sZFZhbHVlKSB7CiAgICAgIHRoaXMucmVj
        b3JkLnNlbmQoJ2JlY29tZURpcnR5Jyk7CiAgICAgIHRoaXMucmVjb3JkLnVw
        ZGF0ZVJlY29yZEFycmF5c0xhdGVyKCk7CiAgICB9CgogICAgLy8gVE9ETzog
        VXNlIHRoaXMgb2JqZWN0IGluIHRoZSBjb21taXQgcHJvY2VzcwogICAgdGhp
        cy5kZXN0cm95KCk7CiAgfSwKCiAgLyoqCiAgICBJZiB0aGUgQXR0cmlidXRl
        Q2hhbmdlIGlzIGRlc3Ryb3llZCAoZWl0aGVyIGJ5IGJlaW5nIHJvbGxlZCBi
        YWNrCiAgICBvciBiZWluZyBjb21taXR0ZWQpLCByZW1vdmUgaXQgZnJvbSB0
        aGUgbGlzdCBvZiBwZW5kaW5nIGNoYW5nZXMKICAgIG9uIHRoZSByZWNvcmQu
        CgogICAgQG1ldGhvZCBkZXN0cm95CiAgKi8KICBkZXN0cm95OiBmdW5jdGlv
        bigpIHsKICAgIGRlbGV0ZSB0aGlzLnJlY29yZC5fY2hhbmdlc1RvU3luY1t0
        aGlzLm5hbWVdOwogIH0KfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBmb3JFYWNoID0gRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2g7CgovKioKICBAY2xhc3MgUmVsYXRpb25zaGlw
        Q2hhbmdlCiAgQG5hbWVzcGFjZSBEUwogIEBwcml2YXRlCiAgQGNvbnN0cnV0
        b3IKKi8KRFMuUmVsYXRpb25zaGlwQ2hhbmdlID0gZnVuY3Rpb24ob3B0aW9u
        cykgewogIHRoaXMucGFyZW50UmVjb3JkID0gb3B0aW9ucy5wYXJlbnRSZWNv
        cmQ7CiAgdGhpcy5jaGlsZFJlY29yZCA9IG9wdGlvbnMuY2hpbGRSZWNvcmQ7
        CiAgdGhpcy5maXJzdFJlY29yZCA9IG9wdGlvbnMuZmlyc3RSZWNvcmQ7CiAg
        dGhpcy5maXJzdFJlY29yZEtpbmQgPSBvcHRpb25zLmZpcnN0UmVjb3JkS2lu
        ZDsKICB0aGlzLmZpcnN0UmVjb3JkTmFtZSA9IG9wdGlvbnMuZmlyc3RSZWNv
        cmROYW1lOwogIHRoaXMuc2Vjb25kUmVjb3JkID0gb3B0aW9ucy5zZWNvbmRS
        ZWNvcmQ7CiAgdGhpcy5zZWNvbmRSZWNvcmRLaW5kID0gb3B0aW9ucy5zZWNv
        bmRSZWNvcmRLaW5kOwogIHRoaXMuc2Vjb25kUmVjb3JkTmFtZSA9IG9wdGlv
        bnMuc2Vjb25kUmVjb3JkTmFtZTsKICB0aGlzLmNoYW5nZVR5cGUgPSBvcHRp
        b25zLmNoYW5nZVR5cGU7CiAgdGhpcy5zdG9yZSA9IG9wdGlvbnMuc3RvcmU7
        CgogIHRoaXMuY29tbWl0dGVkID0ge307Cn07CgovKioKICBAY2xhc3MgUmVs
        YXRpb25zaGlwQ2hhbmdlQWRkCiAgQG5hbWVzcGFjZSBEUwogIEBwcml2YXRl
        CiAgQGNvbnN0cnV0b3IKKi8KRFMuUmVsYXRpb25zaGlwQ2hhbmdlQWRkID0g
        ZnVuY3Rpb24ob3B0aW9ucyl7CiAgRFMuUmVsYXRpb25zaGlwQ2hhbmdlLmNh
        bGwodGhpcywgb3B0aW9ucyk7Cn07CgovKioKICBAY2xhc3MgUmVsYXRpb25z
        aGlwQ2hhbmdlUmVtb3ZlCiAgQG5hbWVzcGFjZSBEUwogIEBwcml2YXRlCiAg
        QGNvbnN0cnV0b3IKKi8KRFMuUmVsYXRpb25zaGlwQ2hhbmdlUmVtb3ZlID0g
        ZnVuY3Rpb24ob3B0aW9ucyl7CiAgRFMuUmVsYXRpb25zaGlwQ2hhbmdlLmNh
        bGwodGhpcywgb3B0aW9ucyk7Cn07CgpEUy5SZWxhdGlvbnNoaXBDaGFuZ2Uu
        Y3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHJldHVybiBuZXcgRFMu
        UmVsYXRpb25zaGlwQ2hhbmdlKG9wdGlvbnMpOwp9OwoKRFMuUmVsYXRpb25z
        aGlwQ2hhbmdlQWRkLmNyZWF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICBy
        ZXR1cm4gbmV3IERTLlJlbGF0aW9uc2hpcENoYW5nZUFkZChvcHRpb25zKTsK
        fTsKCkRTLlJlbGF0aW9uc2hpcENoYW5nZVJlbW92ZS5jcmVhdGUgPSBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBEUy5SZWxhdGlvbnNoaXBD
        aGFuZ2VSZW1vdmUob3B0aW9ucyk7Cn07CgpEUy5PbmVUb01hbnlDaGFuZ2Ug
        PSB7fTsKRFMuT25lVG9Ob25lQ2hhbmdlID0ge307CkRTLk1hbnlUb05vbmVD
        aGFuZ2UgPSB7fTsKRFMuT25lVG9PbmVDaGFuZ2UgPSB7fTsKRFMuTWFueVRv
        TWFueUNoYW5nZSA9IHt9OwoKRFMuUmVsYXRpb25zaGlwQ2hhbmdlLl9jcmVh
        dGVDaGFuZ2UgPSBmdW5jdGlvbihvcHRpb25zKXsKICBpZihvcHRpb25zLmNo
        YW5nZVR5cGUgPT09ICJhZGQiKXsKICAgIHJldHVybiBEUy5SZWxhdGlvbnNo
        aXBDaGFuZ2VBZGQuY3JlYXRlKG9wdGlvbnMpOwogIH0KICBpZihvcHRpb25z
        LmNoYW5nZVR5cGUgPT09ICJyZW1vdmUiKXsKICAgIHJldHVybiBEUy5SZWxh
        dGlvbnNoaXBDaGFuZ2VSZW1vdmUuY3JlYXRlKG9wdGlvbnMpOwogIH0KfTsK
        CgpEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuZGV0ZXJtaW5lUmVsYXRpb25zaGlw
        VHlwZSA9IGZ1bmN0aW9uKHJlY29yZFR5cGUsIGtub3duU2lkZSl7CiAgdmFy
        IGtub3duS2V5ID0ga25vd25TaWRlLmtleSwga2V5LCBvdGhlcktpbmQ7CiAg
        dmFyIGtub3duS2luZCA9IGtub3duU2lkZS5raW5kOwoKICB2YXIgaW52ZXJz
        ZSA9IHJlY29yZFR5cGUuaW52ZXJzZUZvcihrbm93bktleSk7CgogIGlmIChp
        bnZlcnNlKXsKICAgIGtleSA9IGludmVyc2UubmFtZTsKICAgIG90aGVyS2lu
        ZCA9IGludmVyc2Uua2luZDsKICB9CgogIGlmICghaW52ZXJzZSl7CiAgICBy
        ZXR1cm4ga25vd25LaW5kID09PSAiYmVsb25nc1RvIiA/ICJvbmVUb05vbmUi
        IDogIm1hbnlUb05vbmUiOwogIH0KICBlbHNlewogICAgaWYob3RoZXJLaW5k
        ID09PSAiYmVsb25nc1RvIil7CiAgICAgIHJldHVybiBrbm93bktpbmQgPT09
        ICJiZWxvbmdzVG8iID8gIm9uZVRvT25lIiA6ICJtYW55VG9PbmUiOwogICAg
        fQogICAgZWxzZXsKICAgICAgcmV0dXJuIGtub3duS2luZCA9PT0gImJlbG9u
        Z3NUbyIgPyAib25lVG9NYW55IiA6ICJtYW55VG9NYW55IjsKICAgIH0KICB9
        Cgp9OwoKRFMuUmVsYXRpb25zaGlwQ2hhbmdlLmNyZWF0ZUNoYW5nZSA9IGZ1
        bmN0aW9uKGZpcnN0UmVjb3JkLCBzZWNvbmRSZWNvcmQsIHN0b3JlLCBvcHRp
        b25zKXsKICAvLyBHZXQgdGhlIHR5cGUgb2YgdGhlIGNoaWxkIGJhc2VkIG9u
        IHRoZSBjaGlsZCdzIGNsaWVudCBJRAogIHZhciBmaXJzdFJlY29yZFR5cGUg
        PSBmaXJzdFJlY29yZC5jb25zdHJ1Y3RvciwgY2hhbmdlVHlwZTsKICBjaGFu
        Z2VUeXBlID0gRFMuUmVsYXRpb25zaGlwQ2hhbmdlLmRldGVybWluZVJlbGF0
        aW9uc2hpcFR5cGUoZmlyc3RSZWNvcmRUeXBlLCBvcHRpb25zKTsKICBpZiAo
        Y2hhbmdlVHlwZSA9PT0gIm9uZVRvTWFueSIpewogICAgcmV0dXJuIERTLk9u
        ZVRvTWFueUNoYW5nZS5jcmVhdGVDaGFuZ2UoZmlyc3RSZWNvcmQsIHNlY29u
        ZFJlY29yZCwgc3RvcmUsIG9wdGlvbnMpOwogIH0KICBlbHNlIGlmIChjaGFu
        Z2VUeXBlID09PSAibWFueVRvT25lIil7CiAgICByZXR1cm4gRFMuT25lVG9N
        YW55Q2hhbmdlLmNyZWF0ZUNoYW5nZShzZWNvbmRSZWNvcmQsIGZpcnN0UmVj
        b3JkLCBzdG9yZSwgb3B0aW9ucyk7CiAgfQogIGVsc2UgaWYgKGNoYW5nZVR5
        cGUgPT09ICJvbmVUb05vbmUiKXsKICAgIHJldHVybiBEUy5PbmVUb05vbmVD
        aGFuZ2UuY3JlYXRlQ2hhbmdlKGZpcnN0UmVjb3JkLCBzZWNvbmRSZWNvcmQs
        IHN0b3JlLCBvcHRpb25zKTsKICB9CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9
        PT0gIm1hbnlUb05vbmUiKXsKICAgIHJldHVybiBEUy5NYW55VG9Ob25lQ2hh
        bmdlLmNyZWF0ZUNoYW5nZShmaXJzdFJlY29yZCwgc2Vjb25kUmVjb3JkLCBz
        dG9yZSwgb3B0aW9ucyk7CiAgfQogIGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09
        ICJvbmVUb09uZSIpewogICAgcmV0dXJuIERTLk9uZVRvT25lQ2hhbmdlLmNy
        ZWF0ZUNoYW5nZShmaXJzdFJlY29yZCwgc2Vjb25kUmVjb3JkLCBzdG9yZSwg
        b3B0aW9ucyk7CiAgfQogIGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09ICJtYW55
        VG9NYW55Iil7CiAgICByZXR1cm4gRFMuTWFueVRvTWFueUNoYW5nZS5jcmVh
        dGVDaGFuZ2UoZmlyc3RSZWNvcmQsIHNlY29uZFJlY29yZCwgc3RvcmUsIG9w
        dGlvbnMpOwogIH0KfTsKCkRTLk9uZVRvTm9uZUNoYW5nZS5jcmVhdGVDaGFu
        Z2UgPSBmdW5jdGlvbihjaGlsZFJlY29yZCwgcGFyZW50UmVjb3JkLCBzdG9y
        ZSwgb3B0aW9ucykgewogIHZhciBrZXkgPSBvcHRpb25zLmtleTsKICB2YXIg
        Y2hhbmdlID0gRFMuUmVsYXRpb25zaGlwQ2hhbmdlLl9jcmVhdGVDaGFuZ2Uo
        ewogICAgICBwYXJlbnRSZWNvcmQ6IHBhcmVudFJlY29yZCwKICAgICAgY2hp
        bGRSZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBmaXJzdFJlY29yZDogY2hp
        bGRSZWNvcmQsCiAgICAgIHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlw
        ZTogb3B0aW9ucy5jaGFuZ2VUeXBlLAogICAgICBmaXJzdFJlY29yZE5hbWU6
        IGtleSwKICAgICAgZmlyc3RSZWNvcmRLaW5kOiAiYmVsb25nc1RvIgogIH0p
        OwoKICBzdG9yZS5hZGRSZWxhdGlvbnNoaXBDaGFuZ2VGb3IoY2hpbGRSZWNv
        cmQsIGtleSwgcGFyZW50UmVjb3JkLCBudWxsLCBjaGFuZ2UpOwoKICByZXR1
        cm4gY2hhbmdlOwp9OwoKRFMuTWFueVRvTm9uZUNoYW5nZS5jcmVhdGVDaGFu
        Z2UgPSBmdW5jdGlvbihjaGlsZFJlY29yZCwgcGFyZW50UmVjb3JkLCBzdG9y
        ZSwgb3B0aW9ucykgewogIHZhciBrZXkgPSBvcHRpb25zLmtleTsKICB2YXIg
        Y2hhbmdlID0gRFMuUmVsYXRpb25zaGlwQ2hhbmdlLl9jcmVhdGVDaGFuZ2Uo
        ewogICAgICBwYXJlbnRSZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBjaGls
        ZFJlY29yZDogcGFyZW50UmVjb3JkLAogICAgICBzZWNvbmRSZWNvcmQ6IGNo
        aWxkUmVjb3JkLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAgIGNoYW5nZVR5
        cGU6IG9wdGlvbnMuY2hhbmdlVHlwZSwKICAgICAgc2Vjb25kUmVjb3JkTmFt
        ZTogb3B0aW9ucy5rZXksCiAgICAgIHNlY29uZFJlY29yZEtpbmQ6ICJoYXNN
        YW55IgogIH0pOwoKICBzdG9yZS5hZGRSZWxhdGlvbnNoaXBDaGFuZ2VGb3Io
        Y2hpbGRSZWNvcmQsIGtleSwgcGFyZW50UmVjb3JkLCBudWxsLCBjaGFuZ2Up
        OwogIHJldHVybiBjaGFuZ2U7Cn07CgoKRFMuTWFueVRvTWFueUNoYW5nZS5j
        cmVhdGVDaGFuZ2UgPSBmdW5jdGlvbihjaGlsZFJlY29yZCwgcGFyZW50UmVj
        b3JkLCBzdG9yZSwgb3B0aW9ucykgewogIC8vIElmIHRoZSBuYW1lIG9mIHRo
        ZSBiZWxvbmdzVG8gc2lkZSBvZiB0aGUgcmVsYXRpb25zaGlwIGlzIHNwZWNp
        ZmllZCwKICAvLyB1c2UgdGhhdAogIC8vIElmIHRoZSB0eXBlIG9mIHRoZSBw
        YXJlbnQgaXMgc3BlY2lmaWVkLCBsb29rIGl0IHVwIG9uIHRoZSBjaGlsZCdz
        IHR5cGUKICAvLyBkZWZpbml0aW9uLgogIHZhciBrZXkgPSBvcHRpb25zLmtl
        eTsKCiAgdmFyIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5fY3Jl
        YXRlQ2hhbmdlKHsKICAgICAgcGFyZW50UmVjb3JkOiBwYXJlbnRSZWNvcmQs
        CiAgICAgIGNoaWxkUmVjb3JkOiBjaGlsZFJlY29yZCwKICAgICAgZmlyc3RS
        ZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBzZWNvbmRSZWNvcmQ6IHBhcmVu
        dFJlY29yZCwKICAgICAgZmlyc3RSZWNvcmRLaW5kOiAiaGFzTWFueSIsCiAg
        ICAgIHNlY29uZFJlY29yZEtpbmQ6ICJoYXNNYW55IiwKICAgICAgc3RvcmU6
        IHN0b3JlLAogICAgICBjaGFuZ2VUeXBlOiBvcHRpb25zLmNoYW5nZVR5cGUs
        CiAgICAgIGZpcnN0UmVjb3JkTmFtZTogIGtleQogIH0pOwoKICBzdG9yZS5h
        ZGRSZWxhdGlvbnNoaXBDaGFuZ2VGb3IoY2hpbGRSZWNvcmQsIGtleSwgcGFy
        ZW50UmVjb3JkLCBudWxsLCBjaGFuZ2UpOwoKCiAgcmV0dXJuIGNoYW5nZTsK
        fTsKCkRTLk9uZVRvT25lQ2hhbmdlLmNyZWF0ZUNoYW5nZSA9IGZ1bmN0aW9u
        KGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKSB7
        CiAgdmFyIGtleTsKCiAgLy8gSWYgdGhlIG5hbWUgb2YgdGhlIGJlbG9uZ3NU
        byBzaWRlIG9mIHRoZSByZWxhdGlvbnNoaXAgaXMgc3BlY2lmaWVkLAogIC8v
        IHVzZSB0aGF0CiAgLy8gSWYgdGhlIHR5cGUgb2YgdGhlIHBhcmVudCBpcyBz
        cGVjaWZpZWQsIGxvb2sgaXQgdXAgb24gdGhlIGNoaWxkJ3MgdHlwZQogIC8v
        IGRlZmluaXRpb24uCiAgaWYgKG9wdGlvbnMucGFyZW50VHlwZSkgewogICAg
        a2V5ID0gb3B0aW9ucy5wYXJlbnRUeXBlLmludmVyc2VGb3Iob3B0aW9ucy5r
        ZXkpLm5hbWU7CiAgfSBlbHNlIGlmIChvcHRpb25zLmtleSkgewogICAga2V5
        ID0gb3B0aW9ucy5rZXk7CiAgfSBlbHNlIHsKICAgIEVtYmVyLmFzc2VydCgi
        WW91IG11c3QgcGFzcyBlaXRoZXIgYSBwYXJlbnRUeXBlIG9yIGJlbG9uZ3NU
        b05hbWUgb3B0aW9uIHRvIE9uZVRvTWFueUNoYW5nZS5mb3JDaGlsZEFuZFBh
        cmVudCIsIGZhbHNlKTsKICB9CgogIHZhciBjaGFuZ2UgPSBEUy5SZWxhdGlv
        bnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSh7CiAgICAgIHBhcmVudFJlY29y
        ZDogcGFyZW50UmVjb3JkLAogICAgICBjaGlsZFJlY29yZDogY2hpbGRSZWNv
        cmQsCiAgICAgIGZpcnN0UmVjb3JkOiBjaGlsZFJlY29yZCwKICAgICAgc2Vj
        b25kUmVjb3JkOiBwYXJlbnRSZWNvcmQsCiAgICAgIGZpcnN0UmVjb3JkS2lu
        ZDogImJlbG9uZ3NUbyIsCiAgICAgIHNlY29uZFJlY29yZEtpbmQ6ICJiZWxv
        bmdzVG8iLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAgIGNoYW5nZVR5cGU6
        IG9wdGlvbnMuY2hhbmdlVHlwZSwKICAgICAgZmlyc3RSZWNvcmROYW1lOiAg
        a2V5CiAgfSk7CgogIHN0b3JlLmFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcihj
        aGlsZFJlY29yZCwga2V5LCBwYXJlbnRSZWNvcmQsIG51bGwsIGNoYW5nZSk7
        CgoKICByZXR1cm4gY2hhbmdlOwp9OwoKRFMuT25lVG9PbmVDaGFuZ2UubWFp
        bnRhaW5JbnZhcmlhbnQgPSBmdW5jdGlvbihvcHRpb25zLCBzdG9yZSwgY2hp
        bGRSZWNvcmQsIGtleSl7CiAgaWYgKG9wdGlvbnMuY2hhbmdlVHlwZSA9PT0g
        ImFkZCIgJiYgc3RvcmUucmVjb3JkSXNNYXRlcmlhbGl6ZWQoY2hpbGRSZWNv
        cmQpKSB7CiAgICB2YXIgb2xkUGFyZW50ID0gZ2V0KGNoaWxkUmVjb3JkLCBr
        ZXkpOwogICAgaWYgKG9sZFBhcmVudCl7CiAgICAgIHZhciBjb3JyZXNwb25k
        aW5nQ2hhbmdlID0gRFMuT25lVG9PbmVDaGFuZ2UuY3JlYXRlQ2hhbmdlKGNo
        aWxkUmVjb3JkLCBvbGRQYXJlbnQsIHN0b3JlLCB7CiAgICAgICAgICBwYXJl
        bnRUeXBlOiBvcHRpb25zLnBhcmVudFR5cGUsCiAgICAgICAgICBoYXNNYW55
        TmFtZTogb3B0aW9ucy5oYXNNYW55TmFtZSwKICAgICAgICAgIGNoYW5nZVR5
        cGU6ICJyZW1vdmUiLAogICAgICAgICAga2V5OiBvcHRpb25zLmtleQogICAg
        ICAgIH0pOwogICAgICBzdG9yZS5hZGRSZWxhdGlvbnNoaXBDaGFuZ2VGb3Io
        Y2hpbGRSZWNvcmQsIGtleSwgb3B0aW9ucy5wYXJlbnRSZWNvcmQgLCBudWxs
        LCBjb3JyZXNwb25kaW5nQ2hhbmdlKTsKICAgICBjb3JyZXNwb25kaW5nQ2hh
        bmdlLnN5bmMoKTsKICAgIH0KICB9Cn07CgpEUy5PbmVUb01hbnlDaGFuZ2Uu
        Y3JlYXRlQ2hhbmdlID0gZnVuY3Rpb24oY2hpbGRSZWNvcmQsIHBhcmVudFJl
        Y29yZCwgc3RvcmUsIG9wdGlvbnMpIHsKICB2YXIga2V5OwoKICAvLyBJZiB0
        aGUgbmFtZSBvZiB0aGUgYmVsb25nc1RvIHNpZGUgb2YgdGhlIHJlbGF0aW9u
        c2hpcCBpcyBzcGVjaWZpZWQsCiAgLy8gdXNlIHRoYXQKICAvLyBJZiB0aGUg
        dHlwZSBvZiB0aGUgcGFyZW50IGlzIHNwZWNpZmllZCwgbG9vayBpdCB1cCBv
        biB0aGUgY2hpbGQncyB0eXBlCiAgLy8gZGVmaW5pdGlvbi4KICBpZiAob3B0
        aW9ucy5wYXJlbnRUeXBlKSB7CiAgICBrZXkgPSBvcHRpb25zLnBhcmVudFR5
        cGUuaW52ZXJzZUZvcihvcHRpb25zLmtleSkubmFtZTsKICAgIERTLk9uZVRv
        TWFueUNoYW5nZS5tYWludGFpbkludmFyaWFudCggb3B0aW9ucywgc3RvcmUs
        IGNoaWxkUmVjb3JkLCBrZXkgKTsKICB9IGVsc2UgaWYgKG9wdGlvbnMua2V5
        KSB7CiAgICBrZXkgPSBvcHRpb25zLmtleTsKICB9IGVsc2UgewogICAgRW1i
        ZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGVpdGhlciBhIHBhcmVudFR5cGUg
        b3IgYmVsb25nc1RvTmFtZSBvcHRpb24gdG8gT25lVG9NYW55Q2hhbmdlLmZv
        ckNoaWxkQW5kUGFyZW50IiwgZmFsc2UpOwogIH0KCiAgdmFyIGNoYW5nZSA9
        IERTLlJlbGF0aW9uc2hpcENoYW5nZS5fY3JlYXRlQ2hhbmdlKHsKICAgICAg
        cGFyZW50UmVjb3JkOiBwYXJlbnRSZWNvcmQsCiAgICAgIGNoaWxkUmVjb3Jk
        OiBjaGlsZFJlY29yZCwKICAgICAgZmlyc3RSZWNvcmQ6IGNoaWxkUmVjb3Jk
        LAogICAgICBzZWNvbmRSZWNvcmQ6IHBhcmVudFJlY29yZCwKICAgICAgZmly
        c3RSZWNvcmRLaW5kOiAiYmVsb25nc1RvIiwKICAgICAgc2Vjb25kUmVjb3Jk
        S2luZDogImhhc01hbnkiLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAgIGNo
        YW5nZVR5cGU6IG9wdGlvbnMuY2hhbmdlVHlwZSwKICAgICAgZmlyc3RSZWNv
        cmROYW1lOiAga2V5CiAgfSk7CgogIHN0b3JlLmFkZFJlbGF0aW9uc2hpcENo
        YW5nZUZvcihjaGlsZFJlY29yZCwga2V5LCBwYXJlbnRSZWNvcmQsIGNoYW5n
        ZS5nZXRTZWNvbmRSZWNvcmROYW1lKCksIGNoYW5nZSk7CgoKICByZXR1cm4g
        Y2hhbmdlOwp9OwoKCkRTLk9uZVRvTWFueUNoYW5nZS5tYWludGFpbkludmFy
        aWFudCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHN0b3JlLCBjaGlsZFJlY29yZCwg
        a2V5KXsKICBpZiAob3B0aW9ucy5jaGFuZ2VUeXBlID09PSAiYWRkIiAmJiBj
        aGlsZFJlY29yZCkgewogICAgdmFyIG9sZFBhcmVudCA9IGdldChjaGlsZFJl
        Y29yZCwga2V5KTsKICAgIGlmIChvbGRQYXJlbnQpewogICAgICB2YXIgY29y
        cmVzcG9uZGluZ0NoYW5nZSA9IERTLk9uZVRvTWFueUNoYW5nZS5jcmVhdGVD
        aGFuZ2UoY2hpbGRSZWNvcmQsIG9sZFBhcmVudCwgc3RvcmUsIHsKICAgICAg
        ICAgIHBhcmVudFR5cGU6IG9wdGlvbnMucGFyZW50VHlwZSwKICAgICAgICAg
        IGhhc01hbnlOYW1lOiBvcHRpb25zLmhhc01hbnlOYW1lLAogICAgICAgICAg
        Y2hhbmdlVHlwZTogInJlbW92ZSIsCiAgICAgICAgICBrZXk6IG9wdGlvbnMu
        a2V5CiAgICAgICAgfSk7CiAgICAgIHN0b3JlLmFkZFJlbGF0aW9uc2hpcENo
        YW5nZUZvcihjaGlsZFJlY29yZCwga2V5LCBvcHRpb25zLnBhcmVudFJlY29y
        ZCwgY29ycmVzcG9uZGluZ0NoYW5nZS5nZXRTZWNvbmRSZWNvcmROYW1lKCks
        IGNvcnJlc3BvbmRpbmdDaGFuZ2UpOwogICAgICBjb3JyZXNwb25kaW5nQ2hh
        bmdlLnN5bmMoKTsKICAgIH0KICB9Cn07CgovKioKICBAY2xhc3MgUmVsYXRp
        b25zaGlwQ2hhbmdlCiAgQG5hbWVzcGFjZSBEUwoqLwpEUy5SZWxhdGlvbnNo
        aXBDaGFuZ2UucHJvdG90eXBlID0gewoKICBnZXRTZWNvbmRSZWNvcmROYW1l
        OiBmdW5jdGlvbigpIHsKICAgIHZhciBuYW1lID0gdGhpcy5zZWNvbmRSZWNv
        cmROYW1lLCBwYXJlbnQ7CgogICAgaWYgKCFuYW1lKSB7CiAgICAgIHBhcmVu
        dCA9IHRoaXMuc2Vjb25kUmVjb3JkOwogICAgICBpZiAoIXBhcmVudCkgeyBy
        ZXR1cm47IH0KCiAgICAgIHZhciBjaGlsZFR5cGUgPSB0aGlzLmZpcnN0UmVj
        b3JkLmNvbnN0cnVjdG9yOwogICAgICB2YXIgaW52ZXJzZSA9IGNoaWxkVHlw
        ZS5pbnZlcnNlRm9yKHRoaXMuZmlyc3RSZWNvcmROYW1lKTsKICAgICAgdGhp
        cy5zZWNvbmRSZWNvcmROYW1lID0gaW52ZXJzZS5uYW1lOwogICAgfQoKICAg
        IHJldHVybiB0aGlzLnNlY29uZFJlY29yZE5hbWU7CiAgfSwKCiAgLyoqCiAg
        ICBHZXQgdGhlIG5hbWUgb2YgdGhlIHJlbGF0aW9uc2hpcCBvbiB0aGUgYmVs
        b25nc1RvIHNpZGUuCgogICAgQG1ldGhvZCBnZXRGaXJzdFJlY29yZE5hbWUK
        ICAgIEByZXR1cm4ge1N0cmluZ30KICAqLwogIGdldEZpcnN0UmVjb3JkTmFt
        ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgbmFtZSA9IHRoaXMuZmlyc3RSZWNv
        cmROYW1lOwogICAgcmV0dXJuIG5hbWU7CiAgfSwKCiAgLyoqCiAgICBAbWV0
        aG9kIGRlc3Ryb3kKICAgIEBwcml2YXRlCiAgKi8KICBkZXN0cm95OiBmdW5j
        dGlvbigpIHsKICAgIHZhciBjaGlsZFJlY29yZCA9IHRoaXMuY2hpbGRSZWNv
        cmQsCiAgICAgICAgYmVsb25nc1RvTmFtZSA9IHRoaXMuZ2V0Rmlyc3RSZWNv
        cmROYW1lKCksCiAgICAgICAgaGFzTWFueU5hbWUgPSB0aGlzLmdldFNlY29u
        ZFJlY29yZE5hbWUoKSwKICAgICAgICBzdG9yZSA9IHRoaXMuc3RvcmU7Cgog
        ICAgc3RvcmUucmVtb3ZlUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxkUmVj
        b3JkLCBiZWxvbmdzVG9OYW1lLCB0aGlzLnBhcmVudFJlY29yZCwgaGFzTWFu
        eU5hbWUsIHRoaXMuY2hhbmdlVHlwZSk7CiAgfSwKCiAgZ2V0U2Vjb25kUmVj
        b3JkOiBmdW5jdGlvbigpewogICAgcmV0dXJuIHRoaXMuc2Vjb25kUmVjb3Jk
        OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBnZXRGaXJzdFJlY29yZAogICAg
        QHByaXZhdGUKICAqLwogIGdldEZpcnN0UmVjb3JkOiBmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiB0aGlzLmZpcnN0UmVjb3JkOwogIH0sCgogIGNvYWxlc2Nl
        OiBmdW5jdGlvbigpewogICAgdmFyIHJlbGF0aW9uc2hpcFBhaXJzID0gdGhp
        cy5zdG9yZS5yZWxhdGlvbnNoaXBDaGFuZ2VQYWlyc0Zvcih0aGlzLmZpcnN0
        UmVjb3JkKTsKICAgIGZvckVhY2gocmVsYXRpb25zaGlwUGFpcnMsIGZ1bmN0
        aW9uKHBhaXIpewogICAgICB2YXIgYWRkZWRDaGFuZ2UgPSBwYWlyWyJhZGQi
        XTsKICAgICAgdmFyIHJlbW92ZWRDaGFuZ2UgPSBwYWlyWyJyZW1vdmUiXTsK
        ICAgICAgaWYoYWRkZWRDaGFuZ2UgJiYgcmVtb3ZlZENoYW5nZSkgewogICAg
        ICAgIGFkZGVkQ2hhbmdlLmRlc3Ryb3koKTsKICAgICAgICByZW1vdmVkQ2hh
        bmdlLmRlc3Ryb3koKTsKICAgICAgfQogICAgfSk7CiAgfQp9OwoKRFMuUmVs
        YXRpb25zaGlwQ2hhbmdlQWRkLnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0ZShE
        Uy5SZWxhdGlvbnNoaXBDaGFuZ2UuY3JlYXRlKHt9KSk7CkRTLlJlbGF0aW9u
        c2hpcENoYW5nZVJlbW92ZS5wcm90b3R5cGUgPSBFbWJlci5jcmVhdGUoRFMu
        UmVsYXRpb25zaGlwQ2hhbmdlLmNyZWF0ZSh7fSkpOwoKLy8gdGhlIG9iamVj
        dCBpcyBhIHZhbHVlLCBhbmQgbm90IGEgcHJvbWlzZQpmdW5jdGlvbiBpc1Zh
        bHVlKG9iamVjdCkgewogIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAnb2Jq
        ZWN0JyAmJiAoIW9iamVjdC50aGVuIHx8IHR5cGVvZiBvYmplY3QudGhlbiAh
        PT0gJ2Z1bmN0aW9uJyk7Cn0KCkRTLlJlbGF0aW9uc2hpcENoYW5nZUFkZC5w
        cm90b3R5cGUuY2hhbmdlVHlwZSA9ICJhZGQiOwpEUy5SZWxhdGlvbnNoaXBD
        aGFuZ2VBZGQucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbigpIHsKICB2YXIg
        c2Vjb25kUmVjb3JkTmFtZSA9IHRoaXMuZ2V0U2Vjb25kUmVjb3JkTmFtZSgp
        LAogICAgICBmaXJzdFJlY29yZE5hbWUgPSB0aGlzLmdldEZpcnN0UmVjb3Jk
        TmFtZSgpLAogICAgICBmaXJzdFJlY29yZCA9IHRoaXMuZ2V0Rmlyc3RSZWNv
        cmQoKSwKICAgICAgc2Vjb25kUmVjb3JkID0gdGhpcy5nZXRTZWNvbmRSZWNv
        cmQoKTsKCiAgLy9FbWJlci5hc3NlcnQoIllvdSBzcGVjaWZpZWQgYSBoYXNN
        YW55ICgiICsgaGFzTWFueU5hbWUgKyAiKSBvbiAiICsgKCFiZWxvbmdzVG9O
        YW1lICYmIChuZXdQYXJlbnQgfHwgb2xkUGFyZW50IHx8IHRoaXMubGFzdFBh
        cmVudCkuY29uc3RydWN0b3IpICsgIiBidXQgZGlkIG5vdCBzcGVjaWZ5IGFu
        IGludmVyc2UgYmVsb25nc1RvIG9uICIgKyBjaGlsZC5jb25zdHJ1Y3Rvciwg
        YmVsb25nc1RvTmFtZSk7CiAgLy9FbWJlci5hc3NlcnQoIllvdSBzcGVjaWZp
        ZWQgYSBiZWxvbmdzVG8gKCIgKyBiZWxvbmdzVG9OYW1lICsgIikgb24gIiAr
        IGNoaWxkLmNvbnN0cnVjdG9yICsgIiBidXQgZGlkIG5vdCBzcGVjaWZ5IGFu
        IGludmVyc2UgaGFzTWFueSBvbiAiICsgKCFoYXNNYW55TmFtZSAmJiAobmV3
        UGFyZW50IHx8IG9sZFBhcmVudCB8fCB0aGlzLmxhc3RQYXJlbnRSZWNvcmQp
        LmNvbnN0cnVjdG9yKSwgaGFzTWFueU5hbWUpOwoKICBpZiAoc2Vjb25kUmVj
        b3JkIGluc3RhbmNlb2YgRFMuTW9kZWwgJiYgZmlyc3RSZWNvcmQgaW5zdGFu
        Y2VvZiBEUy5Nb2RlbCkgewogICAgaWYodGhpcy5zZWNvbmRSZWNvcmRLaW5k
        ID09PSAiYmVsb25nc1RvIil7CiAgICAgIHNlY29uZFJlY29yZC5zdXNwZW5k
        UmVsYXRpb25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgc2V0
        KHNlY29uZFJlY29yZCwgc2Vjb25kUmVjb3JkTmFtZSwgZmlyc3RSZWNvcmQp
        OwogICAgICB9KTsKCiAgICAgfQogICAgIGVsc2UgaWYodGhpcy5zZWNvbmRS
        ZWNvcmRLaW5kID09PSAiaGFzTWFueSIpewogICAgICBzZWNvbmRSZWNvcmQu
        c3VzcGVuZFJlbGF0aW9uc2hpcE9ic2VydmVycyhmdW5jdGlvbigpewogICAg
        ICAgIHZhciByZWxhdGlvbnNoaXAgPSBnZXQoc2Vjb25kUmVjb3JkLCBzZWNv
        bmRSZWNvcmROYW1lKTsKICAgICAgICBpZiAoaXNWYWx1ZShyZWxhdGlvbnNo
        aXApKSB7IHJlbGF0aW9uc2hpcC5hZGRPYmplY3QoZmlyc3RSZWNvcmQpOyB9
        CiAgICAgIH0pOwogICAgfQogIH0KCiAgaWYgKGZpcnN0UmVjb3JkIGluc3Rh
        bmNlb2YgRFMuTW9kZWwgJiYgc2Vjb25kUmVjb3JkIGluc3RhbmNlb2YgRFMu
        TW9kZWwgJiYgZ2V0KGZpcnN0UmVjb3JkLCBmaXJzdFJlY29yZE5hbWUpICE9
        PSBzZWNvbmRSZWNvcmQpIHsKICAgIGlmKHRoaXMuZmlyc3RSZWNvcmRLaW5k
        ID09PSAiYmVsb25nc1RvIil7CiAgICAgIGZpcnN0UmVjb3JkLnN1c3BlbmRS
        ZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKXsKICAgICAgICBzZXQo
        Zmlyc3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSwgc2Vjb25kUmVjb3JkKTsK
        ICAgICAgfSk7CiAgICB9CiAgICBlbHNlIGlmKHRoaXMuZmlyc3RSZWNvcmRL
        aW5kID09PSAiaGFzTWFueSIpewogICAgICBmaXJzdFJlY29yZC5zdXNwZW5k
        UmVsYXRpb25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFy
        IHJlbGF0aW9uc2hpcCA9IGdldChmaXJzdFJlY29yZCwgZmlyc3RSZWNvcmRO
        YW1lKTsKICAgICAgICBpZiAoaXNWYWx1ZShyZWxhdGlvbnNoaXApKSB7IHJl
        bGF0aW9uc2hpcC5hZGRPYmplY3Qoc2Vjb25kUmVjb3JkKTsgfQogICAgICB9
        KTsKICAgIH0KICB9CgogIHRoaXMuY29hbGVzY2UoKTsKfTsKCkRTLlJlbGF0
        aW9uc2hpcENoYW5nZVJlbW92ZS5wcm90b3R5cGUuY2hhbmdlVHlwZSA9ICJy
        ZW1vdmUiOwpEUy5SZWxhdGlvbnNoaXBDaGFuZ2VSZW1vdmUucHJvdG90eXBl
        LnN5bmMgPSBmdW5jdGlvbigpIHsKICB2YXIgc2Vjb25kUmVjb3JkTmFtZSA9
        IHRoaXMuZ2V0U2Vjb25kUmVjb3JkTmFtZSgpLAogICAgICBmaXJzdFJlY29y
        ZE5hbWUgPSB0aGlzLmdldEZpcnN0UmVjb3JkTmFtZSgpLAogICAgICBmaXJz
        dFJlY29yZCA9IHRoaXMuZ2V0Rmlyc3RSZWNvcmQoKSwKICAgICAgc2Vjb25k
        UmVjb3JkID0gdGhpcy5nZXRTZWNvbmRSZWNvcmQoKTsKCiAgLy9FbWJlci5h
        c3NlcnQoIllvdSBzcGVjaWZpZWQgYSBoYXNNYW55ICgiICsgaGFzTWFueU5h
        bWUgKyAiKSBvbiAiICsgKCFiZWxvbmdzVG9OYW1lICYmIChuZXdQYXJlbnQg
        fHwgb2xkUGFyZW50IHx8IHRoaXMubGFzdFBhcmVudCkuY29uc3RydWN0b3Ip
        ICsgIiBidXQgZGlkIG5vdCBzcGVjaWZ5IGFuIGludmVyc2UgYmVsb25nc1Rv
        IG9uICIgKyBjaGlsZC5jb25zdHJ1Y3RvciwgYmVsb25nc1RvTmFtZSk7CiAg
        Ly9FbWJlci5hc3NlcnQoIllvdSBzcGVjaWZpZWQgYSBiZWxvbmdzVG8gKCIg
        KyBiZWxvbmdzVG9OYW1lICsgIikgb24gIiArIGNoaWxkLmNvbnN0cnVjdG9y
        ICsgIiBidXQgZGlkIG5vdCBzcGVjaWZ5IGFuIGludmVyc2UgaGFzTWFueSBv
        biAiICsgKCFoYXNNYW55TmFtZSAmJiAobmV3UGFyZW50IHx8IG9sZFBhcmVu
        dCB8fCB0aGlzLmxhc3RQYXJlbnRSZWNvcmQpLmNvbnN0cnVjdG9yKSwgaGFz
        TWFueU5hbWUpOwoKICBpZiAoc2Vjb25kUmVjb3JkIGluc3RhbmNlb2YgRFMu
        TW9kZWwgJiYgZmlyc3RSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2RlbCkgewog
        ICAgaWYodGhpcy5zZWNvbmRSZWNvcmRLaW5kID09PSAiYmVsb25nc1RvIil7
        CiAgICAgIHNlY29uZFJlY29yZC5zdXNwZW5kUmVsYXRpb25zaGlwT2JzZXJ2
        ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgc2V0KHNlY29uZFJlY29yZCwgc2Vj
        b25kUmVjb3JkTmFtZSwgbnVsbCk7CiAgICAgIH0pOwogICAgfQogICAgZWxz
        ZSBpZih0aGlzLnNlY29uZFJlY29yZEtpbmQgPT09ICJoYXNNYW55Iil7CiAg
        ICAgIHNlY29uZFJlY29yZC5zdXNwZW5kUmVsYXRpb25zaGlwT2JzZXJ2ZXJz
        KGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHJlbGF0aW9uc2hpcCA9IGdldChz
        ZWNvbmRSZWNvcmQsIHNlY29uZFJlY29yZE5hbWUpOwogICAgICAgIGlmIChp
        c1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRpb25zaGlwLnJlbW92ZU9i
        amVjdChmaXJzdFJlY29yZCk7IH0KICAgICAgfSk7CiAgICB9CiAgfQoKICBp
        ZiAoZmlyc3RSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2RlbCAmJiBnZXQoZmly
        c3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSkpIHsKICAgIGlmKHRoaXMuZmly
        c3RSZWNvcmRLaW5kID09PSAiYmVsb25nc1RvIil7CiAgICAgIGZpcnN0UmVj
        b3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKXsK
        ICAgICAgICBzZXQoZmlyc3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSwgbnVs
        bCk7CiAgICAgIH0pOwogICAgIH0KICAgICBlbHNlIGlmKHRoaXMuZmlyc3RS
        ZWNvcmRLaW5kID09PSAiaGFzTWFueSIpewogICAgICAgZmlyc3RSZWNvcmQu
        c3VzcGVuZFJlbGF0aW9uc2hpcE9ic2VydmVycyhmdW5jdGlvbigpewogICAg
        ICAgICB2YXIgcmVsYXRpb25zaGlwID0gZ2V0KGZpcnN0UmVjb3JkLCBmaXJz
        dFJlY29yZE5hbWUpOwogICAgICAgICBpZiAoaXNWYWx1ZShyZWxhdGlvbnNo
        aXApKSB7IHJlbGF0aW9uc2hpcC5yZW1vdmVPYmplY3Qoc2Vjb25kUmVjb3Jk
        KTsgfQogICAgICB9KTsKICAgIH0KICB9CgogIHRoaXMuY29hbGVzY2UoKTsK
        fTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJl
        ci1kYXRhCiovCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBnZXQgPSBF
        bWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAgIGlzTm9uZSA9IEVtYmVy
        LmlzTm9uZTsKCi8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKZnVuY3Rp
        b24gYXN5bmNCZWxvbmdzVG8odHlwZSwgb3B0aW9ucywgbWV0YSkgewogIHJl
        dHVybiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAg
        ICB2YXIgZGF0YSA9IGdldCh0aGlzLCAnZGF0YScpLAogICAgICAgIHN0b3Jl
        ID0gZ2V0KHRoaXMsICdzdG9yZScpOwoKICAgIGlmIChhcmd1bWVudHMubGVu
        Z3RoID09PSAyKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbiBvbmx5
        IGFkZCBhICciICsgdHlwZSArICInIHJlY29yZCB0byB0aGlzIHJlbGF0aW9u
        c2hpcCIsICF2YWx1ZSB8fCB2YWx1ZSBpbnN0YW5jZW9mIHN0b3JlLm1vZGVs
        Rm9yKHR5cGUpKTsKICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQg
        PyBudWxsIDogRFMuUHJvbWlzZU9iamVjdC5jcmVhdGUoeyBwcm9taXNlOiBF
        bWJlci5SU1ZQLnJlc29sdmUodmFsdWUpIH0pOwogICAgfQoKICAgIHZhciBs
        aW5rID0gZGF0YS5saW5rcyAmJiBkYXRhLmxpbmtzW2tleV0sCiAgICAgICAg
        YmVsb25nc1RvID0gZGF0YVtrZXldOwoKICAgIGlmKCFpc05vbmUoYmVsb25n
        c1RvKSkgewogICAgICB2YXIgcHJvbWlzZSA9IHN0b3JlLmZldGNoUmVjb3Jk
        KGJlbG9uZ3NUbykgfHwgRW1iZXIuUlNWUC5yZXNvbHZlKGJlbG9uZ3NUbyk7
        CiAgICAgIHJldHVybiBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7cHJvbWlz
        ZTogcHJvbWlzZX0pOwogICAgfSBlbHNlIGlmIChsaW5rKSB7CiAgICAgIHZh
        ciByZXNvbHZlciA9IEVtYmVyLlJTVlAuZGVmZXIoKTsKICAgICAgc3RvcmUu
        ZmluZEJlbG9uZ3NUbyh0aGlzLCBsaW5rLCBtZXRhLCByZXNvbHZlcik7CiAg
        ICAgIHJldHVybiBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7IHByb21pc2U6
        IHJlc29sdmVyLnByb21pc2UgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1
        cm4gbnVsbDsKICAgIH0KICB9KS5wcm9wZXJ0eSgnZGF0YScpLm1ldGEobWV0
        YSk7Cn0KCkRTLmJlbG9uZ3NUbyA9IGZ1bmN0aW9uKHR5cGUsIG9wdGlvbnMp
        IHsKICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7CiAgICBvcHRp
        b25zID0gdHlwZTsKICAgIHR5cGUgPSB1bmRlZmluZWQ7CiAgfSBlbHNlIHsK
        ICAgIEVtYmVyLmFzc2VydCgiVGhlIGZpcnN0IGFyZ3VtZW50IERTLmJlbG9u
        Z3NUbyBtdXN0IGJlIGEgbW9kZWwgdHlwZSBvciBzdHJpbmcsIGxpa2UgRFMu
        YmVsb25nc1RvKEFwcC5QZXJzb24pIiwgISF0eXBlICYmICh0eXBlb2YgdHlw
        ZSA9PT0gJ3N0cmluZycgfHwgRFMuTW9kZWwuZGV0ZWN0KHR5cGUpKSk7CiAg
        fQoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgdmFyIG1ldGEgPSB7
        IHR5cGU6IHR5cGUsIGlzUmVsYXRpb25zaGlwOiB0cnVlLCBvcHRpb25zOiBv
        cHRpb25zLCBraW5kOiAnYmVsb25nc1RvJyB9OwoKICBpZiAob3B0aW9ucy5h
        c3luYykgewogICAgcmV0dXJuIGFzeW5jQmVsb25nc1RvKHR5cGUsIG9wdGlv
        bnMsIG1ldGEpOwogIH0KCiAgcmV0dXJuIEVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBkYXRhID0gZ2V0KHRoaXMsICdk
        YXRhJyksCiAgICAgICAgc3RvcmUgPSBnZXQodGhpcywgJ3N0b3JlJyksIGJl
        bG9uZ3NUbywgdHlwZUNsYXNzOwoKICAgIGlmICh0eXBlb2YgdHlwZSA9PT0g
        J3N0cmluZycpIHsKICAgICAgdHlwZUNsYXNzID0gc3RvcmUubW9kZWxGb3Io
        dHlwZSk7CiAgICB9IGVsc2UgewogICAgICB0eXBlQ2xhc3MgPSB0eXBlOwog
        ICAgfQoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7CiAgICAg
        IEVtYmVyLmFzc2VydCgiWW91IGNhbiBvbmx5IGFkZCBhICciICsgdHlwZSAr
        ICInIHJlY29yZCB0byB0aGlzIHJlbGF0aW9uc2hpcCIsICF2YWx1ZSB8fCB2
        YWx1ZSBpbnN0YW5jZW9mIHR5cGVDbGFzcyk7CiAgICAgIHJldHVybiB2YWx1
        ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlOwogICAgfQoKICAgIGJl
        bG9uZ3NUbyA9IGRhdGFba2V5XTsKCiAgICBpZiAoaXNOb25lKGJlbG9uZ3NU
        bykpIHsgcmV0dXJuIG51bGw7IH0KCiAgICBzdG9yZS5mZXRjaFJlY29yZChi
        ZWxvbmdzVG8pOwoKICAgIHJldHVybiBiZWxvbmdzVG87CiAgfSkucHJvcGVy
        dHkoJ2RhdGEnKS5tZXRhKG1ldGEpOwp9OwoKLyoKICBUaGVzZSBvYnNlcnZl
        cnMgb2JzZXJ2ZSBhbGwgYGJlbG9uZ3NUb2AgcmVsYXRpb25zaGlwcyBvbiB0
        aGUgcmVjb3JkLiBTZWUKICBgcmVsYXRpb25zaGlwcy9leHRgIHRvIHNlZSBo
        b3cgdGhlc2Ugb2JzZXJ2ZXJzIGdldCB0aGVpciBkZXBlbmRlbmNpZXMuCgog
        IEBjbGFzcyBNb2RlbAogIEBuYW1lc3BhY2UgRFMKKi8KRFMuTW9kZWwucmVv
        cGVuKHsKCiAgLyoqCiAgICBAbWV0aG9kIGJlbG9uZ3NUb1dpbGxDaGFuZ2UK
        ICAgIEBwcml2YXRlCiAgICBAc3RhdGljCiAgICBAcGFyYW0gcmVjb3JkCiAg
        ICBAcGFyYW0ga2V5CiAgKi8KICBiZWxvbmdzVG9XaWxsQ2hhbmdlOiBFbWJl
        ci5iZWZvcmVPYnNlcnZlcihmdW5jdGlvbihyZWNvcmQsIGtleSkgewogICAg
        aWYgKGdldChyZWNvcmQsICdpc0xvYWRlZCcpKSB7CiAgICAgIHZhciBvbGRQ
        YXJlbnQgPSBnZXQocmVjb3JkLCBrZXkpOwoKICAgICAgaWYgKG9sZFBhcmVu
        dCkgewogICAgICAgIHZhciBzdG9yZSA9IGdldChyZWNvcmQsICdzdG9yZScp
        LAogICAgICAgICAgICBjaGFuZ2UgPSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2Uu
        Y3JlYXRlQ2hhbmdlKHJlY29yZCwgb2xkUGFyZW50LCBzdG9yZSwgeyBrZXk6
        IGtleSwga2luZDogImJlbG9uZ3NUbyIsIGNoYW5nZVR5cGU6ICJyZW1vdmUi
        IH0pOwoKICAgICAgICBjaGFuZ2Uuc3luYygpOwogICAgICAgIHRoaXMuX2No
        YW5nZXNUb1N5bmNba2V5XSA9IGNoYW5nZTsKICAgICAgfQogICAgfQogIH0p
        LAoKICAvKioKICAgIEBtZXRob2QgYmVsb25nc1RvRGlkQ2hhbmdlCiAgICBA
        cHJpdmF0ZQogICAgQHN0YXRpYwogICAgQHBhcmFtIHJlY29yZAogICAgQHBh
        cmFtIGtleQogICovCiAgYmVsb25nc1RvRGlkQ2hhbmdlOiBFbWJlci5pbW1l
        ZGlhdGVPYnNlcnZlcihmdW5jdGlvbihyZWNvcmQsIGtleSkgewogICAgaWYg
        KGdldChyZWNvcmQsICdpc0xvYWRlZCcpKSB7CiAgICAgIHZhciBuZXdQYXJl
        bnQgPSBnZXQocmVjb3JkLCBrZXkpOwoKICAgICAgaWYgKG5ld1BhcmVudCkg
        ewogICAgICAgIHZhciBzdG9yZSA9IGdldChyZWNvcmQsICdzdG9yZScpLAog
        ICAgICAgICAgICBjaGFuZ2UgPSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuY3Jl
        YXRlQ2hhbmdlKHJlY29yZCwgbmV3UGFyZW50LCBzdG9yZSwgeyBrZXk6IGtl
        eSwga2luZDogImJlbG9uZ3NUbyIsIGNoYW5nZVR5cGU6ICJhZGQiIH0pOwoK
        ICAgICAgICBjaGFuZ2Uuc3luYygpOwogICAgICB9CiAgICB9CgogICAgZGVs
        ZXRlIHRoaXMuX2NoYW5nZXNUb1N5bmNba2V5XTsKICB9KQp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIHNldFBy
        b3BlcnRpZXMgPSBFbWJlci5zZXRQcm9wZXJ0aWVzOwoKZnVuY3Rpb24gYXN5
        bmNIYXNNYW55KHR5cGUsIG9wdGlvbnMsIG1ldGEpIHsKICByZXR1cm4gRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKHRo
        aXMuX3JlbGF0aW9uc2hpcHNba2V5XSkgeyByZXR1cm4gdGhpcy5fcmVsYXRp
        b25zaGlwc1trZXldOyB9CgogICAgdmFyIHJlc29sdmVyID0gRW1iZXIuUlNW
        UC5kZWZlcigpOwoKICAgIHZhciByZWxhdGlvbnNoaXAgPSBidWlsZFJlbGF0
        aW9uc2hpcCh0aGlzLCBrZXksIG9wdGlvbnMsIGZ1bmN0aW9uKHN0b3JlLCBk
        YXRhKSB7CiAgICAgIHZhciBsaW5rID0gZGF0YS5saW5rcyAmJiBkYXRhLmxp
        bmtzW2tleV07CgogICAgICBpZiAobGluaykgewogICAgICAgIHJldHVybiBz
        dG9yZS5maW5kSGFzTWFueSh0aGlzLCBsaW5rLCBtZXRhLCByZXNvbHZlcik7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHN0b3JlLmZpbmRNYW55
        KHRoaXMsIGRhdGFba2V5XSwgbWV0YS50eXBlLCByZXNvbHZlcik7CiAgICAg
        IH0KICAgIH0pOwoKICAgIHZhciBwcm9taXNlID0gcmVzb2x2ZXIucHJvbWlz
        ZS50aGVuKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gcmVsYXRpb25zaGlw
        OwogICAgfSk7CgogICAgcmV0dXJuIERTLlByb21pc2VBcnJheS5jcmVhdGUo
        eyBwcm9taXNlOiBwcm9taXNlIH0pOwogIH0pLnByb3BlcnR5KCdkYXRhJyku
        bWV0YShtZXRhKTsKfQoKZnVuY3Rpb24gYnVpbGRSZWxhdGlvbnNoaXAocmVj
        b3JkLCBrZXksIG9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgdmFyIHJlbHMgPSBy
        ZWNvcmQuX3JlbGF0aW9uc2hpcHM7CgogIGlmIChyZWxzW2tleV0pIHsgcmV0
        dXJuIHJlbHNba2V5XTsgfQoKICB2YXIgZGF0YSA9IGdldChyZWNvcmQsICdk
        YXRhJyksCiAgICAgIHN0b3JlID0gZ2V0KHJlY29yZCwgJ3N0b3JlJyk7Cgog
        IHZhciByZWxhdGlvbnNoaXAgPSByZWxzW2tleV0gPSBjYWxsYmFjay5jYWxs
        KHJlY29yZCwgc3RvcmUsIGRhdGEpOwoKICByZXR1cm4gc2V0UHJvcGVydGll
        cyhyZWxhdGlvbnNoaXAsIHsKICAgIG93bmVyOiByZWNvcmQsIG5hbWU6IGtl
        eSwgaXNQb2x5bW9ycGhpYzogb3B0aW9ucy5wb2x5bW9ycGhpYwogIH0pOwp9
        CgpmdW5jdGlvbiBoYXNSZWxhdGlvbnNoaXAodHlwZSwgb3B0aW9ucykgewog
        IG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICB2YXIgbWV0YSA9IHsgdHlw
        ZTogdHlwZSwgaXNSZWxhdGlvbnNoaXA6IHRydWUsIG9wdGlvbnM6IG9wdGlv
        bnMsIGtpbmQ6ICdoYXNNYW55JyB9OwoKICBpZiAob3B0aW9ucy5hc3luYykg
        ewogICAgcmV0dXJuIGFzeW5jSGFzTWFueSh0eXBlLCBvcHRpb25zLCBtZXRh
        KTsKICB9CgogIHJldHVybiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXks
        IHZhbHVlKSB7CiAgICByZXR1cm4gYnVpbGRSZWxhdGlvbnNoaXAodGhpcywg
        a2V5LCBvcHRpb25zLCBmdW5jdGlvbihzdG9yZSwgZGF0YSkgewogICAgICB2
        YXIgcmVjb3JkcyA9IGRhdGFba2V5XTsKICAgICAgRW1iZXIuYXNzZXJ0KCJZ
        b3UgbG9va2VkIHVwIHRoZSAnIiArIGtleSArICInIHJlbGF0aW9uc2hpcCBv
        biAnIiArIHRoaXMgKyAiJyBidXQgc29tZSBvZiB0aGUgYXNzb2NpYXRlZCBy
        ZWNvcmRzIHdlcmUgbm90IGxvYWRlZC4gRWl0aGVyIG1ha2Ugc3VyZSB0aGV5
        IGFyZSBhbGwgbG9hZGVkIHRvZ2V0aGVyIHdpdGggdGhlIHBhcmVudCByZWNv
        cmQsIG9yIHNwZWNpZnkgdGhhdCB0aGUgcmVsYXRpb25zaGlwIGlzIGFzeW5j
        IChgRFMuaGFzTWFueSh7IGFzeW5jOiB0cnVlIH0pYCkiLCBFbWJlci5BKHJl
        Y29yZHMpLmV2ZXJ5UHJvcGVydHkoJ2lzRW1wdHknLCBmYWxzZSkpOwogICAg
        ICByZXR1cm4gc3RvcmUuZmluZE1hbnkodGhpcywgZGF0YVtrZXldLCBtZXRh
        LnR5cGUpOwogICAgfSk7CiAgfSkucHJvcGVydHkoJ2RhdGEnKS5tZXRhKG1l
        dGEpOwp9CgpEUy5oYXNNYW55ID0gZnVuY3Rpb24odHlwZSwgb3B0aW9ucykg
        ewogIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHsKICAgIG9wdGlv
        bnMgPSB0eXBlOwogICAgdHlwZSA9IHVuZGVmaW5lZDsKICB9CiAgcmV0dXJu
        IGhhc1JlbGF0aW9uc2hpcCh0eXBlLCBvcHRpb25zKTsKfTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwoKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgovKgogIFRo
        aXMgZmlsZSBkZWZpbmVzIHNldmVyYWwgZXh0ZW5zaW9ucyB0byB0aGUgYmFz
        ZSBgRFMuTW9kZWxgIGNsYXNzIHRoYXQKICBhZGQgc3VwcG9ydCBmb3Igb25l
        LXRvLW1hbnkgcmVsYXRpb25zaGlwcy4KKi8KCi8qKgogIEBjbGFzcyBNb2Rl
        bAogIEBuYW1lc3BhY2UgRFMKKi8KRFMuTW9kZWwucmVvcGVuKHsKCiAgLyoq
        CiAgICBUaGlzIEVtYmVyLmpzIGhvb2sgYWxsb3dzIGFuIG9iamVjdCB0byBi
        ZSBub3RpZmllZCB3aGVuIGEgcHJvcGVydHkKICAgIGlzIGRlZmluZWQuCgog
        ICAgSW4gdGhpcyBjYXNlLCB3ZSB1c2UgaXQgdG8gYmUgbm90aWZpZWQgd2hl
        biBhbiBFbWJlciBEYXRhIHVzZXIgZGVmaW5lcyBhCiAgICBiZWxvbmdzLXRv
        IHJlbGF0aW9uc2hpcC4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHNldCB1
        cCBvYnNlcnZlcnMgZm9yCiAgICBlYWNoIG9uZSwgYWxsb3dpbmcgdXMgdG8g
        dHJhY2sgcmVsYXRpb25zaGlwIGNoYW5nZXMgYW5kIGF1dG9tYXRpY2FsbHkK
        ICAgIHJlZmxlY3QgY2hhbmdlcyBpbiB0aGUgaW52ZXJzZSBoYXMtbWFueSBh
        cnJheS4KCiAgICBUaGlzIGhvb2sgcGFzc2VzIHRoZSBjbGFzcyBiZWluZyBz
        ZXQgdXAsIGFzIHdlbGwgYXMgdGhlIGtleSBhbmQgdmFsdWUKICAgIGJlaW5n
        IGRlZmluZWQuIFNvLCBmb3IgZXhhbXBsZSwgd2hlbiB0aGUgdXNlciBkb2Vz
        IHRoaXM6CgogICAgICBEUy5Nb2RlbC5leHRlbmQoewogICAgICAgIHBhcmVu
        dDogRFMuYmVsb25nc1RvKCd1c2VyJykKICAgICAgfSk7CgogICAgVGhpcyBo
        b29rIHdvdWxkIGJlIGNhbGxlZCB3aXRoICJwYXJlbnQiIGFzIHRoZSBrZXkg
        YW5kIHRoZSBjb21wdXRlZAogICAgcHJvcGVydHkgcmV0dXJuZWQgYnkgYERT
        LmJlbG9uZ3NUb2AgYXMgdGhlIHZhbHVlLgoKICAgIEBtZXRob2QgZGlkRGVm
        aW5lUHJvcGVydHkKICAgIEBwYXJhbSBwcm90bwogICAgQHBhcmFtIGtleQog
        ICAgQHBhcmFtIHZhbHVlCiAgKi8KICBkaWREZWZpbmVQcm9wZXJ0eTogZnVu
        Y3Rpb24ocHJvdG8sIGtleSwgdmFsdWUpIHsKICAgIC8vIENoZWNrIGlmIHRo
        ZSB2YWx1ZSBiZWluZyBzZXQgaXMgYSBjb21wdXRlZCBwcm9wZXJ0eS4KICAg
        IGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVtYmVyLkRlc2NyaXB0b3IpIHsKCiAg
        ICAgIC8vIElmIGl0IGlzLCBnZXQgdGhlIG1ldGFkYXRhIGZvciB0aGUgcmVs
        YXRpb25zaGlwLiBUaGlzIGlzCiAgICAgIC8vIHBvcHVsYXRlZCBieSB0aGUg
        YERTLmJlbG9uZ3NUb2AgaGVscGVyIHdoZW4gaXQgaXMgY3JlYXRpbmcKICAg
        ICAgLy8gdGhlIGNvbXB1dGVkIHByb3BlcnR5LgogICAgICB2YXIgbWV0YSA9
        IHZhbHVlLm1ldGEoKTsKCiAgICAgIGlmIChtZXRhLmlzUmVsYXRpb25zaGlw
        ICYmIG1ldGEua2luZCA9PT0gJ2JlbG9uZ3NUbycpIHsKICAgICAgICBFbWJl
        ci5hZGRPYnNlcnZlcihwcm90bywga2V5LCBudWxsLCAnYmVsb25nc1RvRGlk
        Q2hhbmdlJyk7CiAgICAgICAgRW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIocHJv
        dG8sIGtleSwgbnVsbCwgJ2JlbG9uZ3NUb1dpbGxDaGFuZ2UnKTsKICAgICAg
        fQoKICAgICAgbWV0YS5wYXJlbnRUeXBlID0gcHJvdG8uY29uc3RydWN0b3I7
        CiAgICB9CiAgfQp9KTsKCi8qCiAgVGhlc2UgRFMuTW9kZWwgZXh0ZW5zaW9u
        cyBhZGQgY2xhc3MgbWV0aG9kcyB0aGF0IHByb3ZpZGUgcmVsYXRpb25zaGlw
        CiAgaW50cm9zcGVjdGlvbiBhYmlsaXRpZXMgYWJvdXQgcmVsYXRpb25zaGlw
        cy4KCiAgQSBub3RlIGFib3V0IHRoZSBjb21wdXRlZCBwcm9wZXJ0aWVzIGNv
        bnRhaW5lZCBoZXJlOgoKICAqKlRoZXNlIHByb3BlcnRpZXMgYXJlIGVmZmVj
        dGl2ZWx5IHNlYWxlZCBvbmNlIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUu
        KioKICBUbyBhdm9pZCByZXBlYXRlZGx5IGRvaW5nIGV4cGVuc2l2ZSBpdGVy
        YXRpb24gb3ZlciBhIG1vZGVsJ3MgZmllbGRzLCB0aGVzZQogIHZhbHVlcyBh
        cmUgY29tcHV0ZWQgb25jZSBhbmQgdGhlbiBjYWNoZWQgZm9yIHRoZSByZW1h
        aW5kZXIgb2YgdGhlIHJ1bnRpbWUgb2YKICB5b3VyIGFwcGxpY2F0aW9uLgoK
        ICBJZiB5b3VyIGFwcGxpY2F0aW9uIG5lZWRzIHRvIG1vZGlmeSBhIGNsYXNz
        IGFmdGVyIGl0cyBpbml0aWFsIGRlZmluaXRpb24KICAoZm9yIGV4YW1wbGUs
        IHVzaW5nIGByZW9wZW4oKWAgdG8gYWRkIGFkZGl0aW9uYWwgYXR0cmlidXRl
        cyksIG1ha2Ugc3VyZSB5b3UKICBkbyBpdCBiZWZvcmUgdXNpbmcgeW91ciBt
        b2RlbCB3aXRoIHRoZSBzdG9yZSwgd2hpY2ggdXNlcyB0aGVzZSBwcm9wZXJ0
        aWVzCiAgZXh0ZW5zaXZlbHkuCiovCgpEUy5Nb2RlbC5yZW9wZW5DbGFzcyh7
        CiAgLyoqCiAgICBGb3IgYSBnaXZlbiByZWxhdGlvbnNoaXAgbmFtZSwgcmV0
        dXJucyB0aGUgbW9kZWwgdHlwZSBvZiB0aGUgcmVsYXRpb25zaGlwLgoKICAg
        IEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lIGEgbW9kZWwgbGlrZSB0aGlz
        OgoKICAgICAgICBBcHAuUG9zdCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAg
        ICAgICBjb21tZW50czogRFMuaGFzTWFueSgnY29tbWVudCcpCiAgICAgICAg
        fSk7CgogICAgQ2FsbGluZyBgQXBwLlBvc3QudHlwZUZvclJlbGF0aW9uc2hp
        cCgnY29tbWVudHMnKWAgd2lsbCByZXR1cm4gYEFwcC5Db21tZW50YC4KCiAg
        ICBAbWV0aG9kIHR5cGVGb3JSZWxhdGlvbnNoaXAKICAgIEBzdGF0aWMKICAg
        IEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSByZWxhdGlv
        bnNoaXAKICAgIEByZXR1cm4ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0aGUg
        dHlwZSBvZiB0aGUgcmVsYXRpb25zaGlwLCBvciB1bmRlZmluZWQKICAqLwog
        IHR5cGVGb3JSZWxhdGlvbnNoaXA6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZh
        ciByZWxhdGlvbnNoaXAgPSBnZXQodGhpcywgJ3JlbGF0aW9uc2hpcHNCeU5h
        bWUnKS5nZXQobmFtZSk7CiAgICByZXR1cm4gcmVsYXRpb25zaGlwICYmIHJl
        bGF0aW9uc2hpcC50eXBlOwogIH0sCgogIGludmVyc2VGb3I6IGZ1bmN0aW9u
        KG5hbWUpIHsKICAgIHZhciBpbnZlcnNlVHlwZSA9IHRoaXMudHlwZUZvclJl
        bGF0aW9uc2hpcChuYW1lKTsKCiAgICBpZiAoIWludmVyc2VUeXBlKSB7IHJl
        dHVybiBudWxsOyB9CgogICAgdmFyIG9wdGlvbnMgPSB0aGlzLm1ldGFGb3JQ
        cm9wZXJ0eShuYW1lKS5vcHRpb25zOwoKICAgIGlmIChvcHRpb25zLmludmVy
        c2UgPT09IG51bGwpIHsgcmV0dXJuIG51bGw7IH0KICAgIAogICAgdmFyIGlu
        dmVyc2VOYW1lLCBpbnZlcnNlS2luZDsKCiAgICBpZiAob3B0aW9ucy5pbnZl
        cnNlKSB7CiAgICAgIGludmVyc2VOYW1lID0gb3B0aW9ucy5pbnZlcnNlOwog
        ICAgICBpbnZlcnNlS2luZCA9IEVtYmVyLmdldChpbnZlcnNlVHlwZSwgJ3Jl
        bGF0aW9uc2hpcHNCeU5hbWUnKS5nZXQoaW52ZXJzZU5hbWUpLmtpbmQ7CiAg
        ICB9IGVsc2UgewogICAgICB2YXIgcG9zc2libGVSZWxhdGlvbnNoaXBzID0g
        ZmluZFBvc3NpYmxlSW52ZXJzZXModGhpcywgaW52ZXJzZVR5cGUpOwoKICAg
        ICAgaWYgKHBvc3NpYmxlUmVsYXRpb25zaGlwcy5sZW5ndGggPT09IDApIHsg
        cmV0dXJuIG51bGw7IH0KCiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGRlZmlu
        ZWQgdGhlICciICsgbmFtZSArICInIHJlbGF0aW9uc2hpcCBvbiAiICsgdGhp
        cyArICIsIGJ1dCBtdWx0aXBsZSBwb3NzaWJsZSBpbnZlcnNlIHJlbGF0aW9u
        c2hpcHMgb2YgdHlwZSAiICsgdGhpcyArICIgd2VyZSBmb3VuZCBvbiAiICsg
        aW52ZXJzZVR5cGUgKyAiLiIsIHBvc3NpYmxlUmVsYXRpb25zaGlwcy5sZW5n
        dGggPT09IDEpOwoKICAgICAgaW52ZXJzZU5hbWUgPSBwb3NzaWJsZVJlbGF0
        aW9uc2hpcHNbMF0ubmFtZTsKICAgICAgaW52ZXJzZUtpbmQgPSBwb3NzaWJs
        ZVJlbGF0aW9uc2hpcHNbMF0ua2luZDsKICAgIH0KCiAgICBmdW5jdGlvbiBm
        aW5kUG9zc2libGVJbnZlcnNlcyh0eXBlLCBpbnZlcnNlVHlwZSwgcG9zc2li
        bGVSZWxhdGlvbnNoaXBzKSB7CiAgICAgIHBvc3NpYmxlUmVsYXRpb25zaGlw
        cyA9IHBvc3NpYmxlUmVsYXRpb25zaGlwcyB8fCBbXTsKCiAgICAgIHZhciBy
        ZWxhdGlvbnNoaXBNYXAgPSBnZXQoaW52ZXJzZVR5cGUsICdyZWxhdGlvbnNo
        aXBzJyk7CiAgICAgIGlmICghcmVsYXRpb25zaGlwTWFwKSB7IHJldHVybjsg
        fQoKICAgICAgdmFyIHJlbGF0aW9uc2hpcHMgPSByZWxhdGlvbnNoaXBNYXAu
        Z2V0KHR5cGUpOwogICAgICBpZiAocmVsYXRpb25zaGlwcykgewogICAgICAg
        IHBvc3NpYmxlUmVsYXRpb25zaGlwcy5wdXNoLmFwcGx5KHBvc3NpYmxlUmVs
        YXRpb25zaGlwcywgcmVsYXRpb25zaGlwTWFwLmdldCh0eXBlKSk7CiAgICAg
        IH0KCiAgICAgIGlmICh0eXBlLnN1cGVyY2xhc3MpIHsKICAgICAgICBmaW5k
        UG9zc2libGVJbnZlcnNlcyh0eXBlLnN1cGVyY2xhc3MsIGludmVyc2VUeXBl
        LCBwb3NzaWJsZVJlbGF0aW9uc2hpcHMpOwogICAgICB9CgogICAgICByZXR1
        cm4gcG9zc2libGVSZWxhdGlvbnNoaXBzOwogICAgfQoKICAgIHJldHVybiB7
        CiAgICAgIHR5cGU6IGludmVyc2VUeXBlLAogICAgICBuYW1lOiBpbnZlcnNl
        TmFtZSwKICAgICAga2luZDogaW52ZXJzZUtpbmQKICAgIH07CiAgfSwKCiAg
        LyoqCiAgICBUaGUgbW9kZWwncyByZWxhdGlvbnNoaXBzIGFzIGEgbWFwLCBr
        ZXllZCBvbiB0aGUgdHlwZSBvZiB0aGUKICAgIHJlbGF0aW9uc2hpcC4gVGhl
        IHZhbHVlIG9mIGVhY2ggZW50cnkgaXMgYW4gYXJyYXkgY29udGFpbmluZyBh
        IGRlc2NyaXB0b3IKICAgIGZvciBlYWNoIHJlbGF0aW9uc2hpcCB3aXRoIHRo
        YXQgdHlwZSwgZGVzY3JpYmluZyB0aGUgbmFtZSBvZiB0aGUgcmVsYXRpb25z
        aGlwCiAgICBhcyB3ZWxsIGFzIHRoZSB0eXBlLgoKICAgIEZvciBleGFtcGxl
        LCBnaXZlbiB0aGUgZm9sbG93aW5nIG1vZGVsIGRlZmluaXRpb246CgogICAg
        ICAgIEFwcC5CbG9nID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgICAgIHVz
        ZXJzOiBEUy5oYXNNYW55KCd1c2VyJyksCiAgICAgICAgICBvd25lcjogRFMu
        YmVsb25nc1RvKCd1c2VyJyksCiAgICAgICAgICBwb3N0czogRFMuaGFzTWFu
        eSgncG9zdCcpCiAgICAgICAgfSk7CgogICAgVGhpcyBjb21wdXRlZCBwcm9w
        ZXJ0eSB3b3VsZCByZXR1cm4gYSBtYXAgZGVzY3JpYmluZyB0aGVzZQogICAg
        cmVsYXRpb25zaGlwcywgbGlrZSB0aGlzOgoKICAgICAgICB2YXIgcmVsYXRp
        b25zaGlwcyA9IEVtYmVyLmdldChBcHAuQmxvZywgJ3JlbGF0aW9uc2hpcHMn
        KTsKICAgICAgICByZWxhdGlvbnNoaXBzLmdldChBcHAuVXNlcik7CiAgICAg
        ICAgLy89PiBbIHsgbmFtZTogJ3VzZXJzJywga2luZDogJ2hhc01hbnknIH0s
        CiAgICAgICAgLy8gICAgIHsgbmFtZTogJ293bmVyJywga2luZDogJ2JlbG9u
        Z3NUbycgfSBdCiAgICAgICAgcmVsYXRpb25zaGlwcy5nZXQoQXBwLlBvc3Qp
        OwogICAgICAgIC8vPT4gWyB7IG5hbWU6ICdwb3N0cycsIGtpbmQ6ICdoYXNN
        YW55JyB9IF0KCiAgICBAcHJvcGVydHkgcmVsYXRpb25zaGlwcwogICAgQHN0
        YXRpYwogICAgQHR5cGUgRW1iZXIuTWFwCiAgICBAcmVhZE9ubHkKICAqLwog
        IHJlbGF0aW9uc2hpcHM6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewog
        ICAgdmFyIG1hcCA9IG5ldyBFbWJlci5NYXBXaXRoRGVmYXVsdCh7CiAgICAg
        IGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24oKSB7IHJldHVybiBbXTsgfQogICAg
        fSk7CgogICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggY29tcHV0ZWQgcHJvcGVy
        dHkgb24gdGhlIGNsYXNzCiAgICB0aGlzLmVhY2hDb21wdXRlZFByb3BlcnR5
        KGZ1bmN0aW9uKG5hbWUsIG1ldGEpIHsKCiAgICAgIC8vIElmIHRoZSBjb21w
        dXRlZCBwcm9wZXJ0eSBpcyBhIHJlbGF0aW9uc2hpcCwgYWRkCiAgICAgIC8v
        IGl0IHRvIHRoZSBtYXAuCiAgICAgIGlmIChtZXRhLmlzUmVsYXRpb25zaGlw
        KSB7CiAgICAgICAgaWYgKHR5cGVvZiBtZXRhLnR5cGUgPT09ICdzdHJpbmcn
        KSB7CiAgICAgICAgICBtZXRhLnR5cGUgPSB0aGlzLnN0b3JlLm1vZGVsRm9y
        KG1ldGEudHlwZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVsYXRpb25z
        aGlwc0ZvclR5cGUgPSBtYXAuZ2V0KG1ldGEudHlwZSk7CgogICAgICAgIHJl
        bGF0aW9uc2hpcHNGb3JUeXBlLnB1c2goeyBuYW1lOiBuYW1lLCBraW5kOiBt
        ZXRhLmtpbmQgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBtYXA7
        CiAgfSksCgogIC8qKgogICAgQSBoYXNoIGNvbnRhaW5pbmcgbGlzdHMgb2Yg
        dGhlIG1vZGVsJ3MgcmVsYXRpb25zaGlwcywgZ3JvdXBlZAogICAgYnkgdGhl
        IHJlbGF0aW9uc2hpcCBraW5kLiBGb3IgZXhhbXBsZSwgZ2l2ZW4gYSBtb2Rl
        bCB3aXRoIHRoaXMKICAgIGRlZmluaXRpb246CgogICAgICAgIEFwcC5CbG9n
        ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgICAgIHVzZXJzOiBEUy5oYXNN
        YW55KCd1c2VyJyksCiAgICAgICAgICBvd25lcjogRFMuYmVsb25nc1RvKCd1
        c2VyJyksCgogICAgICAgICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bvc3QnKQog
        ICAgICAgIH0pOwoKICAgIFRoaXMgcHJvcGVydHkgd291bGQgY29udGFpbiB0
        aGUgZm9sbG93aW5nOgoKICAgICAgIHZhciByZWxhdGlvbnNoaXBOYW1lcyA9
        IEVtYmVyLmdldChBcHAuQmxvZywgJ3JlbGF0aW9uc2hpcE5hbWVzJyk7CiAg
        ICAgICByZWxhdGlvbnNoaXBOYW1lcy5oYXNNYW55OwogICAgICAgLy89PiBb
        J3VzZXJzJywgJ3Bvc3RzJ10KICAgICAgIHJlbGF0aW9uc2hpcE5hbWVzLmJl
        bG9uZ3NUbzsKICAgICAgIC8vPT4gWydvd25lciddCgogICAgQHByb3BlcnR5
        IHJlbGF0aW9uc2hpcE5hbWVzCiAgICBAc3RhdGljCiAgICBAdHlwZSBPYmpl
        Y3QKICAgIEByZWFkT25seQogICovCiAgcmVsYXRpb25zaGlwTmFtZXM6IEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWVzID0geyBo
        YXNNYW55OiBbXSwgYmVsb25nc1RvOiBbXSB9OwoKICAgIHRoaXMuZWFjaENv
        bXB1dGVkUHJvcGVydHkoZnVuY3Rpb24obmFtZSwgbWV0YSkgewogICAgICBp
        ZiAobWV0YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIG5hbWVzW21ldGEu
        a2luZF0ucHVzaChuYW1lKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJu
        IG5hbWVzOwogIH0pLAoKICAvKioKICAgIEFuIGFycmF5IG9mIHR5cGVzIGRp
        cmVjdGx5IHJlbGF0ZWQgdG8gYSBtb2RlbC4gRWFjaCB0eXBlIHdpbGwgYmUK
        ICAgIGluY2x1ZGVkIG9uY2UsIHJlZ2FyZGxlc3Mgb2YgdGhlIG51bWJlciBv
        ZiByZWxhdGlvbnNoaXBzIGl0IGhhcyB3aXRoCiAgICB0aGUgbW9kZWwuCgog
        ICAgRm9yIGV4YW1wbGUsIGdpdmVuIGEgbW9kZWwgd2l0aCB0aGlzIGRlZmlu
        aXRpb246CgogICAgICAgIEFwcC5CbG9nID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgICAgICAgIHVzZXJzOiBEUy5oYXNNYW55KCd1c2VyJyksCiAgICAgICAg
        ICBvd25lcjogRFMuYmVsb25nc1RvKCd1c2VyJyksCiAgCiAgICAgICAgICBw
        b3N0czogRFMuaGFzTWFueSgncG9zdCcpCiAgICAgICAgfSk7CgogICAgVGhp
        cyBwcm9wZXJ0eSB3b3VsZCBjb250YWluIHRoZSBmb2xsb3dpbmc6CgogICAg
        ICAgdmFyIHJlbGF0ZWRUeXBlcyA9IEVtYmVyLmdldChBcHAuQmxvZywgJ3Jl
        bGF0ZWRUeXBlcycpOwogICAgICAgLy89PiBbIEFwcC5Vc2VyLCBBcHAuUG9z
        dCBdCgogICAgQHByb3BlcnR5IHJlbGF0ZWRUeXBlcwogICAgQHN0YXRpYwog
        ICAgQHR5cGUgRW1iZXIuQXJyYXkKICAgIEByZWFkT25seQogICovCiAgcmVs
        YXRlZFR5cGVzOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZh
        ciB0eXBlLAogICAgICAgIHR5cGVzID0gRW1iZXIuQSgpOwoKICAgIC8vIExv
        b3AgdGhyb3VnaCBlYWNoIGNvbXB1dGVkIHByb3BlcnR5IG9uIHRoZSBjbGFz
        cywKICAgIC8vIGFuZCBjcmVhdGUgYW4gYXJyYXkgb2YgdGhlIHVuaXF1ZSB0
        eXBlcyBpbnZvbHZlZAogICAgLy8gaW4gcmVsYXRpb25zaGlwcwogICAgdGhp
        cy5lYWNoQ29tcHV0ZWRQcm9wZXJ0eShmdW5jdGlvbihuYW1lLCBtZXRhKSB7
        CiAgICAgIGlmIChtZXRhLmlzUmVsYXRpb25zaGlwKSB7CiAgICAgICAgdHlw
        ZSA9IG1ldGEudHlwZTsKCiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09PSAn
        c3RyaW5nJykgewogICAgICAgICAgdHlwZSA9IGdldCh0aGlzLCB0eXBlLCBm
        YWxzZSkgfHwgdGhpcy5zdG9yZS5tb2RlbEZvcih0eXBlKTsKICAgICAgICB9
        CgogICAgICAgIEVtYmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCBhIGhhc01h
        bnkgKCIgKyBtZXRhLnR5cGUgKyAiKSBvbiAiICsgbWV0YS5wYXJlbnRUeXBl
        ICsgIiBidXQgIiArIG1ldGEudHlwZSArICIgd2FzIG5vdCBmb3VuZC4iLCAg
        dHlwZSk7CgogICAgICAgIGlmICghdHlwZXMuY29udGFpbnModHlwZSkpIHsK
        ICAgICAgICAgIEVtYmVyLmFzc2VydCgiVHJ5aW5nIHRvIHNpZGVsb2FkICIg
        KyBuYW1lICsgIiBvbiAiICsgdGhpcy50b1N0cmluZygpICsgIiBidXQgdGhl
        IHR5cGUgZG9lc24ndCBleGlzdC4iLCAhIXR5cGUpOwogICAgICAgICAgdHlw
        ZXMucHVzaCh0eXBlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAg
        IHJldHVybiB0eXBlczsKICB9KSwKCiAgLyoqCiAgICBBIG1hcCB3aG9zZSBr
        ZXlzIGFyZSB0aGUgcmVsYXRpb25zaGlwcyBvZiBhIG1vZGVsIGFuZCB3aG9z
        ZSB2YWx1ZXMgYXJlCiAgICByZWxhdGlvbnNoaXAgZGVzY3JpcHRvcnMuCgog
        ICAgRm9yIGV4YW1wbGUsIGdpdmVuIGEgbW9kZWwgd2l0aCB0aGlzCiAgICBk
        ZWZpbml0aW9uOgoKICAgICAgICBBcHAuQmxvZyA9IERTLk1vZGVsLmV4dGVu
        ZCh7CiAgICAgICAgICB1c2VyczogRFMuaGFzTWFueSgndXNlcicpLAogICAg
        ICAgICAgb3duZXI6IERTLmJlbG9uZ3NUbygndXNlcicpLAoKICAgICAgICAg
        IHBvc3RzOiBEUy5oYXNNYW55KCdwb3N0JykKICAgICAgICB9KTsKCiAgICBU
        aGlzIHByb3BlcnR5IHdvdWxkIGNvbnRhaW4gdGhlIGZvbGxvd2luZzoKCiAg
        ICAgICB2YXIgcmVsYXRpb25zaGlwc0J5TmFtZSA9IEVtYmVyLmdldChBcHAu
        QmxvZywgJ3JlbGF0aW9uc2hpcHNCeU5hbWUnKTsKICAgICAgIHJlbGF0aW9u
        c2hpcHNCeU5hbWUuZ2V0KCd1c2VycycpOwogICAgICAgLy89PiB7IGtleTog
        J3VzZXJzJywga2luZDogJ2hhc01hbnknLCB0eXBlOiBBcHAuVXNlciB9CiAg
        ICAgICByZWxhdGlvbnNoaXBzQnlOYW1lLmdldCgnb3duZXInKTsKICAgICAg
        IC8vPT4geyBrZXk6ICdvd25lcicsIGtpbmQ6ICdiZWxvbmdzVG8nLCB0eXBl
        OiBBcHAuVXNlciB9CgogICAgQHByb3BlcnR5IHJlbGF0aW9uc2hpcHNCeU5h
        bWUKICAgIEBzdGF0aWMKICAgIEB0eXBlIEVtYmVyLk1hcAogICAgQHJlYWRP
        bmx5CiAgKi8KICByZWxhdGlvbnNoaXBzQnlOYW1lOiBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpIHsKICAgIHZhciBtYXAgPSBFbWJlci5NYXAuY3JlYXRl
        KCksIHR5cGU7CgogICAgdGhpcy5lYWNoQ29tcHV0ZWRQcm9wZXJ0eShmdW5j
        dGlvbihuYW1lLCBtZXRhKSB7CiAgICAgIGlmIChtZXRhLmlzUmVsYXRpb25z
        aGlwKSB7CiAgICAgICAgbWV0YS5rZXkgPSBuYW1lOwogICAgICAgIHR5cGUg
        PSBtZXRhLnR5cGU7CgogICAgICAgIGlmICghdHlwZSAmJiBtZXRhLmtpbmQg
        PT09ICdoYXNNYW55JykgewogICAgICAgICAgdHlwZSA9IEVtYmVyLlN0cmlu
        Zy5zaW5ndWxhcml6ZShuYW1lKTsKICAgICAgICB9IGVsc2UgaWYgKCF0eXBl
        KSB7CiAgICAgICAgICB0eXBlID0gbmFtZTsKICAgICAgICB9CgogICAgICAg
        IGlmICh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG1l
        dGEudHlwZSA9IHRoaXMuc3RvcmUubW9kZWxGb3IodHlwZSk7CiAgICAgICAg
        fQoKICAgICAgICBtYXAuc2V0KG5hbWUsIG1ldGEpOwogICAgICB9CiAgICB9
        KTsKCiAgICByZXR1cm4gbWFwOwogIH0pLAoKICAvKioKICAgIEEgbWFwIHdo
        b3NlIGtleXMgYXJlIHRoZSBmaWVsZHMgb2YgdGhlIG1vZGVsIGFuZCB3aG9z
        ZSB2YWx1ZXMgYXJlIHN0cmluZ3MKICAgIGRlc2NyaWJpbmcgdGhlIGtpbmQg
        b2YgdGhlIGZpZWxkLiBBIG1vZGVsJ3MgZmllbGRzIGFyZSB0aGUgdW5pb24g
        b2YgYWxsIG9mIGl0cwogICAgYXR0cmlidXRlcyBhbmQgcmVsYXRpb25zaGlw
        cy4KCiAgICBGb3IgZXhhbXBsZToKCiAgICAgICAgQXBwLkJsb2cgPSBEUy5N
        b2RlbC5leHRlbmQoewogICAgICAgICAgdXNlcnM6IERTLmhhc01hbnkoJ3Vz
        ZXInKSwKICAgICAgICAgIG93bmVyOiBEUy5iZWxvbmdzVG8oJ3VzZXInKSwK
        CiAgICAgICAgICBwb3N0czogRFMuaGFzTWFueSgncG9zdCcpLAoKICAgICAg
        ICAgIHRpdGxlOiBEUy5hdHRyKCdzdHJpbmcnKQogICAgICAgIH0pOwoKICAg
        ICAgICB2YXIgZmllbGRzID0gRW1iZXIuZ2V0KEFwcC5CbG9nLCAnZmllbGRz
        Jyk7CiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQsIGtp
        bmQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGZpZWxkLCBraW5kKTsKICAg
        ICAgICB9KTsKCiAgICAgICAgLy8gcHJpbnRzOgogICAgICAgIC8vIHVzZXJz
        LCBoYXNNYW55CiAgICAgICAgLy8gb3duZXIsIGJlbG9uZ3NUbwogICAgICAg
        IC8vIHBvc3RzLCBoYXNNYW55CiAgICAgICAgLy8gdGl0bGUsIGF0dHJpYnV0
        ZQoKICAgIEBwcm9wZXJ0eSBmaWVsZHMKICAgIEBzdGF0aWMKICAgIEB0eXBl
        IEVtYmVyLk1hcAogICAgQHJlYWRPbmx5CiAgKi8KICBmaWVsZHM6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1h
        cC5jcmVhdGUoKTsKCiAgICB0aGlzLmVhY2hDb21wdXRlZFByb3BlcnR5KGZ1
        bmN0aW9uKG5hbWUsIG1ldGEpIHsKICAgICAgaWYgKG1ldGEuaXNSZWxhdGlv
        bnNoaXApIHsKICAgICAgICBtYXAuc2V0KG5hbWUsIG1ldGEua2luZCk7CiAg
        ICAgIH0gZWxzZSBpZiAobWV0YS5pc0F0dHJpYnV0ZSkgewogICAgICAgIG1h
        cC5zZXQobmFtZSwgJ2F0dHJpYnV0ZScpOwogICAgICB9CiAgICB9KTsKCiAg
        ICByZXR1cm4gbWFwOwogIH0pLAoKICAvKioKICAgIEdpdmVuIGEgY2FsbGJh
        Y2ssIGl0ZXJhdGVzIG92ZXIgZWFjaCBvZiB0aGUgcmVsYXRpb25zaGlwcyBp
        biB0aGUgbW9kZWwsCiAgICBpbnZva2luZyB0aGUgY2FsbGJhY2sgd2l0aCB0
        aGUgbmFtZSBvZiBlYWNoIHJlbGF0aW9uc2hpcCBhbmQgaXRzIHJlbGF0aW9u
        c2hpcAogICAgZGVzY3JpcHRvci4KCiAgICBAbWV0aG9kIGVhY2hSZWxhdGlv
        bnNoaXAKICAgIEBzdGF0aWMKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxi
        YWNrIHRoZSBjYWxsYmFjayB0byBpbnZva2UKICAgIEBwYXJhbSB7YW55fSBi
        aW5kaW5nIHRoZSB2YWx1ZSB0byB3aGljaCB0aGUgY2FsbGJhY2sncyBgdGhp
        c2Agc2hvdWxkIGJlIGJvdW5kCiAgKi8KICBlYWNoUmVsYXRpb25zaGlwOiBm
        dW5jdGlvbihjYWxsYmFjaywgYmluZGluZykgewogICAgZ2V0KHRoaXMsICdy
        ZWxhdGlvbnNoaXBzQnlOYW1lJykuZm9yRWFjaChmdW5jdGlvbihuYW1lLCBy
        ZWxhdGlvbnNoaXApIHsKICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCBu
        YW1lLCByZWxhdGlvbnNoaXApOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBH
        aXZlbiBhIGNhbGxiYWNrLCBpdGVyYXRlcyBvdmVyIGVhY2ggb2YgdGhlIHR5
        cGVzIHJlbGF0ZWQgdG8gYSBtb2RlbCwKICAgIGludm9raW5nIHRoZSBjYWxs
        YmFjayB3aXRoIHRoZSByZWxhdGVkIHR5cGUncyBjbGFzcy4gRWFjaCB0eXBl
        IHdpbGwgYmUKICAgIHJldHVybmVkIGp1c3Qgb25jZSwgcmVnYXJkbGVzcyBv
        ZiBob3cgbWFueSBkaWZmZXJlbnQgcmVsYXRpb25zaGlwcyBpdCBoYXMKICAg
        IHdpdGggYSBtb2RlbC4KCiAgICBAbWV0aG9kIGVhY2hSZWxhdGVkVHlwZQog
        ICAgQHN0YXRpYwogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhl
        IGNhbGxiYWNrIHRvIGludm9rZQogICAgQHBhcmFtIHthbnl9IGJpbmRpbmcg
        dGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBjYWxsYmFjaydzIGB0aGlzYCBzaG91
        bGQgYmUgYm91bmQKICAqLwogIGVhY2hSZWxhdGVkVHlwZTogZnVuY3Rpb24o
        Y2FsbGJhY2ssIGJpbmRpbmcpIHsKICAgIGdldCh0aGlzLCAncmVsYXRlZFR5
        cGVzJykuZm9yRWFjaChmdW5jdGlvbih0eXBlKSB7CiAgICAgIGNhbGxiYWNr
        LmNhbGwoYmluZGluZywgdHlwZSk7CiAgICB9KTsKICB9Cn0pOwoKRFMuTW9k
        ZWwucmVvcGVuKHsKICAvKioKICAgIEdpdmVuIGEgY2FsbGJhY2ssIGl0ZXJh
        dGVzIG92ZXIgZWFjaCBvZiB0aGUgcmVsYXRpb25zaGlwcyBpbiB0aGUgbW9k
        ZWwsCiAgICBpbnZva2luZyB0aGUgY2FsbGJhY2sgd2l0aCB0aGUgbmFtZSBv
        ZiBlYWNoIHJlbGF0aW9uc2hpcCBhbmQgaXRzIHJlbGF0aW9uc2hpcAogICAg
        ZGVzY3JpcHRvci4KCiAgICBAbWV0aG9kIGVhY2hSZWxhdGlvbnNoaXAKICAg
        IEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBp
        bnZva2UKICAgIEBwYXJhbSB7YW55fSBiaW5kaW5nIHRoZSB2YWx1ZSB0byB3
        aGljaCB0aGUgY2FsbGJhY2sncyBgdGhpc2Agc2hvdWxkIGJlIGJvdW5kCiAg
        Ki8KICBlYWNoUmVsYXRpb25zaGlwOiBmdW5jdGlvbihjYWxsYmFjaywgYmlu
        ZGluZykgewogICAgdGhpcy5jb25zdHJ1Y3Rvci5lYWNoUmVsYXRpb25zaGlw
        KGNhbGxiYWNrLCBiaW5kaW5nKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBvbmNl
        ID0gRW1iZXIucnVuLm9uY2U7CnZhciBmb3JFYWNoID0gRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2g7CgovKioKICBAY2xhc3MgUmVjb3JkQXJyYXlN
        YW5hZ2VyCiAgQG5hbWVzcGFjZSBEUwogIEBwcml2YXRlCiAgQGV4dGVuZHMg
        RW1iZXIuT2JqZWN0CiovCkRTLlJlY29yZEFycmF5TWFuYWdlciA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdGhp
        cy5maWx0ZXJlZFJlY29yZEFycmF5cyA9IEVtYmVyLk1hcFdpdGhEZWZhdWx0
        LmNyZWF0ZSh7CiAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24oKSB7IHJl
        dHVybiBbXTsgfQogICAgfSk7CgogICAgdGhpcy5jaGFuZ2VkUmVjb3JkcyA9
        IFtdOwogIH0sCgogIHJlY29yZERpZENoYW5nZTogZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICB0aGlzLmNoYW5nZWRSZWNvcmRzLnB1c2gocmVjb3JkKTsKICAg
        IG9uY2UodGhpcywgdGhpcy51cGRhdGVSZWNvcmRBcnJheXMpOwogIH0sCgog
        IHJlY29yZEFycmF5c0ZvclJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAg
        ICByZWNvcmQuX3JlY29yZEFycmF5cyA9IHJlY29yZC5fcmVjb3JkQXJyYXlz
        IHx8IEVtYmVyLk9yZGVyZWRTZXQuY3JlYXRlKCk7CiAgICByZXR1cm4gcmVj
        b3JkLl9yZWNvcmRBcnJheXM7CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhv
        ZCBpcyBpbnZva2VkIHdoZW5ldmVyIGRhdGEgaXMgbG9hZGVkIGludG8gdGhl
        IHN0b3JlCiAgICBieSB0aGUgYWRhcHRlciBvciB1cGRhdGVkIGJ5IHRoZSBh
        ZGFwdGVyLCBvciB3aGVuIGFuIGF0dHJpYnV0ZQogICAgY2hhbmdlcyBvbiBh
        IHJlY29yZC4KCiAgICBJdCB1cGRhdGVzIGFsbCBmaWx0ZXJzIHRoYXQgYSBy
        ZWNvcmQgYmVsb25ncyB0by4KCiAgICBUbyBhdm9pZCB0aHJhc2hpbmcsIGl0
        IG9ubHkgcnVucyBvbmNlIHBlciBydW4gbG9vcCBwZXIgcmVjb3JkLgoKICAg
        IEBtZXRob2QgdXBkYXRlUmVjb3JkQXJyYXlzCiAgICBAcGFyYW0ge0NsYXNz
        fSB0eXBlCiAgICBAcGFyYW0ge051bWJlcnxTdHJpbmd9IGNsaWVudElkCiAg
        Ki8KICB1cGRhdGVSZWNvcmRBcnJheXM6IGZ1bmN0aW9uKCkgewogICAgZm9y
        RWFjaCh0aGlzLmNoYW5nZWRSZWNvcmRzLCBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgICAgdmFyIHR5cGUgPSByZWNvcmQuY29uc3RydWN0b3IsCiAgICAgICAg
        ICByZWNvcmRBcnJheXMgPSB0aGlzLmZpbHRlcmVkUmVjb3JkQXJyYXlzLmdl
        dCh0eXBlKSwKICAgICAgICAgIGZpbHRlcjsKCiAgICAgIGZvckVhY2gocmVj
        b3JkQXJyYXlzLCBmdW5jdGlvbihhcnJheSkgewogICAgICAgIGZpbHRlciA9
        IGdldChhcnJheSwgJ2ZpbHRlckZ1bmN0aW9uJyk7CiAgICAgICAgdGhpcy51
        cGRhdGVSZWNvcmRBcnJheShhcnJheSwgZmlsdGVyLCB0eXBlLCByZWNvcmQp
        OwogICAgICB9LCB0aGlzKTsKCiAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwg
        bWFueUFycmF5cyBjb250YWluaW5nIGFuIHVubG9hZGVkIGNvcHkgb2YgdGhp
        cwogICAgICAvLyBjbGllbnRJZCBhbmQgbm90aWZ5IHRoZW0gdGhhdCB0aGUg
        cmVjb3JkIHdhcyBsb2FkZWQuCiAgICAgIHZhciBtYW55QXJyYXlzID0gcmVj
        b3JkLl9sb2FkaW5nUmVjb3JkQXJyYXlzOwoKICAgICAgaWYgKG1hbnlBcnJh
        eXMpIHsKICAgICAgICBmb3IgKHZhciBpPTAsIGw9bWFueUFycmF5cy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICBtYW55QXJyYXlzW2ldLmxvYWRl
        ZFJlY29yZCgpOwogICAgICAgIH0KCiAgICAgICAgcmVjb3JkLl9sb2FkaW5n
        UmVjb3JkQXJyYXlzID0gW107CiAgICAgIH0KICAgIH0sIHRoaXMpOwoKICAg
        IHRoaXMuY2hhbmdlZFJlY29yZHMgPSBbXTsKICB9LAoKICAvKioKICAgIFVw
        ZGF0ZSBhbiBpbmRpdmlkdWFsIGZpbHRlci4KCiAgICBAbWV0aG9kIHVwZGF0
        ZVJlY29yZEFycmF5CiAgICBAcGFyYW0ge0RTLkZpbHRlcmVkUmVjb3JkQXJy
        YXl9IGFycmF5CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXIKICAgIEBw
        YXJhbSB7Q2xhc3N9IHR5cGUKICAgIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30g
        Y2xpZW50SWQKICAqLwogIHVwZGF0ZVJlY29yZEFycmF5OiBmdW5jdGlvbihh
        cnJheSwgZmlsdGVyLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBzaG91bGRC
        ZUluQXJyYXk7CgogICAgaWYgKCFmaWx0ZXIpIHsKICAgICAgc2hvdWxkQmVJ
        bkFycmF5ID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHNob3VsZEJlSW5B
        cnJheSA9IGZpbHRlcihyZWNvcmQpOwogICAgfQoKICAgIHZhciByZWNvcmRB
        cnJheXMgPSB0aGlzLnJlY29yZEFycmF5c0ZvclJlY29yZChyZWNvcmQpOwoK
        ICAgIGlmIChzaG91bGRCZUluQXJyYXkpIHsKICAgICAgcmVjb3JkQXJyYXlz
        LmFkZChhcnJheSk7CiAgICAgIGFycmF5LmFkZFJlY29yZChyZWNvcmQpOwog
        ICAgfSBlbHNlIGlmICghc2hvdWxkQmVJbkFycmF5KSB7CiAgICAgIHJlY29y
        ZEFycmF5cy5yZW1vdmUoYXJyYXkpOwogICAgICBhcnJheS5yZW1vdmVSZWNv
        cmQocmVjb3JkKTsKICAgIH0KICB9LAoKICAvKioKICAgIFdoZW4gYSByZWNv
        cmQgaXMgZGVsZXRlZCwgaXQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBpdHMKICAg
        IHJlY29yZCBhcnJheXMuCgogICAgQG1ldGhvZCByZW1vdmUKICAgIEBwYXJh
        bSB7RFMuTW9kZWx9IHJlY29yZAogICovCiAgcmVtb3ZlOiBmdW5jdGlvbihy
        ZWNvcmQpIHsKICAgIHZhciByZWNvcmRBcnJheXMgPSByZWNvcmQuX3JlY29y
        ZEFycmF5czsKCiAgICBpZiAoIXJlY29yZEFycmF5cykgeyByZXR1cm47IH0K
        CiAgICBmb3JFYWNoKHJlY29yZEFycmF5cywgZnVuY3Rpb24oYXJyYXkpIHsK
        ICAgICAgYXJyYXkucmVtb3ZlUmVjb3JkKHJlY29yZCk7CiAgICB9KTsKICB9
        LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgaWYgdGhlIGBm
        aWx0ZXJGdW5jdGlvbmAgcHJvcGVydHkgaXMKICAgIGNoYW5nZWQgb24gYSBg
        RFMuRmlsdGVyZWRSZWNvcmRBcnJheWAuCgogICAgSXQgZXNzZW50aWFsbHkg
        cmUtcnVucyB0aGUgZmlsdGVyIGZyb20gc2NyYXRjaC4gVGhpcyBzYW1lCiAg
        ICBtZXRob2QgaXMgaW52b2tlZCB3aGVuIHRoZSBmaWx0ZXIgaXMgY3JlYXRl
        ZCBpbiB0aCBmaXJzdCBwbGFjZS4KCiAgICBAbWV0aG9kIHVwZGF0ZUZpbHRl
        cgogICAgQHBhcmFtIGFycmF5CiAgICBAcGFyYW0gdHlwZQogICAgQHBhcmFt
        IGZpbHRlcgogICovCiAgdXBkYXRlRmlsdGVyOiBmdW5jdGlvbihhcnJheSwg
        dHlwZSwgZmlsdGVyKSB7CiAgICB2YXIgdHlwZU1hcCA9IHRoaXMuc3RvcmUu
        dHlwZU1hcEZvcih0eXBlKSwKICAgICAgICByZWNvcmRzID0gdHlwZU1hcC5y
        ZWNvcmRzLCByZWNvcmQ7CgogICAgZm9yICh2YXIgaT0wLCBsPXJlY29yZHMu
        bGVuZ3RoOyBpPGw7IGkrKykgewogICAgICByZWNvcmQgPSByZWNvcmRzW2ld
        OwoKICAgICAgaWYgKCFnZXQocmVjb3JkLCAnaXNEZWxldGVkJykgJiYgIWdl
        dChyZWNvcmQsICdpc0VtcHR5JykpIHsKICAgICAgICB0aGlzLnVwZGF0ZVJl
        Y29yZEFycmF5KGFycmF5LCBmaWx0ZXIsIHR5cGUsIHJlY29yZCk7CiAgICAg
        IH0KICAgIH0KICB9LAoKICAvKioKICAgIENyZWF0ZSBhIGBEUy5NYW55QXJy
        YXlgIGZvciBhIHR5cGUgYW5kIGxpc3Qgb2YgcmVjb3JkIHJlZmVyZW5jZXMs
        IGFuZCBpbmRleAogICAgdGhlIGBNYW55QXJyYXlgIHVuZGVyIGVhY2ggcmVm
        ZXJlbmNlLiBUaGlzIGFsbG93cyB1cyB0byBlZmZpY2llbnRseSByZW1vdmUK
        ICAgIHJlY29yZHMgZnJvbSBgTWFueUFycmF5YHMgd2hlbiB0aGV5IGFyZSBk
        ZWxldGVkLgoKICAgIEBtZXRob2QgY3JlYXRlTWFueUFycmF5CiAgICBAcGFy
        YW0ge0NsYXNzfSB0eXBlCiAgICBAcGFyYW0ge0FycmF5fSByZWZlcmVuY2Vz
        CiAgICBAcmV0dXJuIHtEUy5NYW55QXJyYXl9CiAgKi8KICBjcmVhdGVNYW55
        QXJyYXk6IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHMpIHsKICAgIHZhciBtYW55
        QXJyYXkgPSBEUy5NYW55QXJyYXkuY3JlYXRlKHsKICAgICAgdHlwZTogdHlw
        ZSwKICAgICAgY29udGVudDogcmVjb3JkcywKICAgICAgc3RvcmU6IHRoaXMu
        c3RvcmUKICAgIH0pOwoKICAgIGZvckVhY2gocmVjb3JkcywgZnVuY3Rpb24o
        cmVjb3JkKSB7CiAgICAgIHZhciBhcnJheXMgPSB0aGlzLnJlY29yZEFycmF5
        c0ZvclJlY29yZChyZWNvcmQpOwogICAgICBhcnJheXMuYWRkKG1hbnlBcnJh
        eSk7CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4gbWFueUFycmF5OwogIH0s
        CgogIC8qKgogICAgUmVnaXN0ZXIgYSBSZWNvcmRBcnJheSBmb3IgYSBnaXZl
        biB0eXBlIHRvIGJlIGJhY2tlZCBieQogICAgYSBmaWx0ZXIgZnVuY3Rpb24u
        IFRoaXMgd2lsbCBjYXVzZSB0aGUgYXJyYXkgdG8gdXBkYXRlCiAgICBhdXRv
        bWF0aWNhbGx5IHdoZW4gcmVjb3JkcyBvZiB0aGF0IHR5cGUgY2hhbmdlIGF0
        dHJpYnV0ZQogICAgdmFsdWVzIG9yIHN0YXRlcy4KCiAgICBAbWV0aG9kIHJl
        Z2lzdGVyRmlsdGVyZWRSZWNvcmRBcnJheQogICAgQHBhcmFtIHtEUy5SZWNv
        cmRBcnJheX0gYXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAgIEBw
        YXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICovCiAgcmVnaXN0ZXJGaWx0ZXJl
        ZFJlY29yZEFycmF5OiBmdW5jdGlvbihhcnJheSwgdHlwZSwgZmlsdGVyKSB7
        CiAgICB2YXIgcmVjb3JkQXJyYXlzID0gdGhpcy5maWx0ZXJlZFJlY29yZEFy
        cmF5cy5nZXQodHlwZSk7CiAgICByZWNvcmRBcnJheXMucHVzaChhcnJheSk7
        CgogICAgdGhpcy51cGRhdGVGaWx0ZXIoYXJyYXksIHR5cGUsIGZpbHRlcik7
        CiAgfSwKCiAgLy8gSW50ZXJuYWxseSwgd2UgbWFpbnRhaW4gYSBtYXAgb2Yg
        YWxsIHVubG9hZGVkIElEcyByZXF1ZXN0ZWQgYnkKICAvLyBhIE1hbnlBcnJh
        eS4gQXMgdGhlIGFkYXB0ZXIgbG9hZHMgZGF0YSBpbnRvIHRoZSBzdG9yZSwg
        dGhlCiAgLy8gc3RvcmUgbm90aWZpZXMgYW55IGludGVyZXN0ZWQgTWFueUFy
        cmF5cy4gV2hlbiB0aGUgTWFueUFycmF5J3MKICAvLyB0b3RhbCBudW1iZXIg
        b2YgbG9hZGluZyByZWNvcmRzIGRyb3BzIHRvIHplcm8sIGl0IGJlY29tZXMK
        ICAvLyBgaXNMb2FkZWRgIGFuZCBmaXJlcyBhIGBkaWRMb2FkYCBldmVudC4K
        ICByZWdpc3RlcldhaXRpbmdSZWNvcmRBcnJheTogZnVuY3Rpb24ocmVjb3Jk
        LCBhcnJheSkgewogICAgdmFyIGxvYWRpbmdSZWNvcmRBcnJheXMgPSByZWNv
        cmQuX2xvYWRpbmdSZWNvcmRBcnJheXMgfHwgW107CiAgICBsb2FkaW5nUmVj
        b3JkQXJyYXlzLnB1c2goYXJyYXkpOwogICAgcmVjb3JkLl9sb2FkaW5nUmVj
        b3JkQXJyYXlzID0gbG9hZGluZ1JlY29yZEFycmF5czsKICB9Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFy
        IG1hcCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLm1hcDsKCnZhciBlcnJvclBy
        b3BzID0gWydkZXNjcmlwdGlvbicsICdmaWxlTmFtZScsICdsaW5lTnVtYmVy
        JywgJ21lc3NhZ2UnLCAnbmFtZScsICdudW1iZXInLCAnc3RhY2snXTsKCkRT
        LkludmFsaWRFcnJvciA9IGZ1bmN0aW9uKGVycm9ycykgewogIHZhciB0bXAg
        PSBFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCAiVGhl
        IGJhY2tlbmQgcmVqZWN0ZWQgdGhlIGNvbW1pdCBiZWNhdXNlIGl0IHdhcyBp
        bnZhbGlkOiAiICsgRW1iZXIuaW5zcGVjdChlcnJvcnMpKTsKICB0aGlzLmVy
        cm9ycyA9IGVycm9yczsKCiAgZm9yICh2YXIgaT0wLCBsPWVycm9yUHJvcHMu
        bGVuZ3RoOyBpPGw7IGkrKykgewogICAgdGhpc1tlcnJvclByb3BzW2ldXSA9
        IHRtcFtlcnJvclByb3BzW2ldXTsKICB9Cn07CkRTLkludmFsaWRFcnJvci5w
        cm90b3R5cGUgPSBFbWJlci5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTsKCi8q
        KgogIEFuIGFkYXB0ZXIgaXMgYW4gb2JqZWN0IHRoYXQgcmVjZWl2ZXMgcmVx
        dWVzdHMgZnJvbSBhIHN0b3JlIGFuZAogIHRyYW5zbGF0ZXMgdGhlbSBpbnRv
        IHRoZSBhcHByb3ByaWF0ZSBhY3Rpb24gdG8gdGFrZSBhZ2FpbnN0IHlvdXIK
        ICBwZXJzaXN0ZW5jZSBsYXllci4gVGhlIHBlcnNpc3RlbmNlIGxheWVyIGlz
        IHVzdWFsbHkgYW4gSFRUUCBBUEksIGJ1dCBtYXkKICBiZSBhbnl0aGluZywg
        c3VjaCBhcyB0aGUgYnJvd3NlcidzIGxvY2FsIHN0b3JhZ2UuCgogICMjIyBD
        cmVhdGluZyBhbiBBZGFwdGVyCgogIEZpcnN0LCBjcmVhdGUgYSBuZXcgc3Vi
        Y2xhc3Mgb2YgYERTLkFkYXB0ZXJgOgoKICAgICAgQXBwLk15QWRhcHRlciA9
        IERTLkFkYXB0ZXIuZXh0ZW5kKHsKICAgICAgICAvLyAuLi55b3VyIGNvZGUg
        aGVyZQogICAgICB9KTsKCiAgVG8gdGVsbCB5b3VyIHN0b3JlIHdoaWNoIGFk
        YXB0ZXIgdG8gdXNlLCBzZXQgaXRzIGBhZGFwdGVyYCBwcm9wZXJ0eToKCiAg
        ICAgIEFwcC5zdG9yZSA9IERTLlN0b3JlLmNyZWF0ZSh7CiAgICAgICAgYWRh
        cHRlcjogQXBwLk15QWRhcHRlci5jcmVhdGUoKQogICAgICB9KTsKCiAgYERT
        LkFkYXB0ZXJgIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCB5b3Ug
        c2hvdWxkIG92ZXJyaWRlIGluIHlvdXIKICBhcHBsaWNhdGlvbiB0byBjdXN0
        b21pemUgaXQgZm9yIHlvdXIgYmFja2VuZC4gVGhlIG1pbmltdW0gc2V0IG9m
        IG1ldGhvZHMKICB0aGF0IHlvdSBzaG91bGQgaW1wbGVtZW50IGlzOgoKICAg
        ICogYGZpbmQoKWAKICAgICogYGNyZWF0ZVJlY29yZCgpYAogICAgKiBgdXBk
        YXRlUmVjb3JkKClgCiAgICAqIGBkZWxldGVSZWNvcmQoKWAKCiAgVG8gaW1w
        cm92ZSB0aGUgbmV0d29yayBwZXJmb3JtYW5jZSBvZiB5b3VyIGFwcGxpY2F0
        aW9uLCB5b3UgY2FuIG9wdGltaXplCiAgeW91ciBhZGFwdGVyIGJ5IG92ZXJy
        aWRpbmcgdGhlc2UgbG93ZXItbGV2ZWwgbWV0aG9kczoKCiAgICAqIGBmaW5k
        TWFueSgpYAogICAgKiBgY3JlYXRlUmVjb3JkcygpYAogICAgKiBgdXBkYXRl
        UmVjb3JkcygpYAogICAgKiBgZGVsZXRlUmVjb3JkcygpYAogICAgKiBgY29t
        bWl0KClgCgogIEZvciBhbiBleGFtcGxlIGltcGxlbWVudGF0aW9uLCBzZWUg
        YERTLlJFU1RBZGFwdGVyYCwgdGhlCiAgaW5jbHVkZWQgUkVTVCBhZGFwdGVy
        LgoKICBAY2xhc3MgQWRhcHRlcgogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5k
        cyBFbWJlci5PYmplY3QKICBAdXNlcyBEUy5fTWFwcGFibGUKKi8KCkRTLkFk
        YXB0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKERTLl9NYXBwYWJsZSwgewoK
        ICAvKioKICAgIFRoZSBgZmluZCgpYCBtZXRob2QgaXMgaW52b2tlZCB3aGVu
        IHRoZSBzdG9yZSBpcyBhc2tlZCBmb3IgYSByZWNvcmQgdGhhdAogICAgaGFz
        IG5vdCBwcmV2aW91c2x5IGJlZW4gbG9hZGVkLiBJbiByZXNwb25zZSB0byBg
        ZmluZCgpYCBiZWluZyBjYWxsZWQsIHlvdQogICAgc2hvdWxkIHF1ZXJ5IHlv
        dXIgcGVyc2lzdGVuY2UgbGF5ZXIgZm9yIGEgcmVjb3JkIHdpdGggdGhlIGdp
        dmVuIElELiBPbmNlCiAgICBmb3VuZCwgeW91IGNhbiBhc3luY2hyb25vdXNs
        eSBjYWxsIHRoZSBzdG9yZSdzIGBwdXNoKClgIG1ldGhvZCB0byBwdXNoCiAg
        ICB0aGUgcmVjb3JkIGludG8gdGhlIHN0b3JlLgoKICAgIEhlcmUgaXMgYW4g
        ZXhhbXBsZSBgZmluZGAgaW1wbGVtZW50YXRpb246CgogICAgICAgIGZpbmQ6
        IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBpZCkgewogICAgICAgICAgdmFyIHVy
        bCA9IHR5cGUudXJsOwogICAgICAgICAgdXJsID0gdXJsLmZtdChpZCk7Cgog
        ICAgICAgICAgalF1ZXJ5LmdldEpTT04odXJsLCBmdW5jdGlvbihkYXRhKSB7
        CiAgICAgICAgICAgICAgLy8gZGF0YSBpcyBhIGhhc2ggb2Yga2V5L3ZhbHVl
        IHBhaXJzLiBJZiB5b3VyIHNlcnZlciByZXR1cm5zIGEKICAgICAgICAgICAg
        ICAvLyByb290LCBzaW1wbHkgZG8gc29tZXRoaW5nIGxpa2U6CiAgICAgICAg
        ICAgICAgLy8gc3RvcmUucHVzaCh0eXBlLCBpZCwgZGF0YS5wZXJzb24pCiAg
        ICAgICAgICAgICAgc3RvcmUucHVzaCh0eXBlLCBpZCwgZGF0YSk7CiAgICAg
        ICAgICB9KTsKICAgICAgICB9CgogICAgQG1ldGhvZCBmaW5kCiAgKi8KICBm
        aW5kOiBFbWJlci5yZXF1aXJlZChGdW5jdGlvbiksCgogIC8qKgogICAgT3B0
        aW9uYWwKCiAgICBAbWV0aG9kIGZpbmRBbGwKICAgIEBwYXJhbSAgc3RvcmUK
        ICAgIEBwYXJhbSAgdHlwZQogICAgQHBhcmFtICBzaW5jZQogICovCiAgZmlu
        ZEFsbDogbnVsbCwKCiAgLyoqCiAgICBPcHRpb25hbAoKICAgIEBtZXRob2Qg
        ZmluZFF1ZXJ5CiAgICBAcGFyYW0gIHN0b3JlCiAgICBAcGFyYW0gIHR5cGUK
        ICAgIEBwYXJhbSAgcXVlcnkKICAgIEBwYXJhbSAgcmVjb3JkQXJyYXkKICAq
        LwogIGZpbmRRdWVyeTogbnVsbCwKCiAgLyoqCiAgICBJZiB0aGUgZ2xvYmFs
        bHkgdW5pcXVlIElEcyBmb3IgeW91ciByZWNvcmRzIHNob3VsZCBiZSBnZW5l
        cmF0ZWQgb24gdGhlIGNsaWVudCwKICAgIGltcGxlbWVudCB0aGUgYGdlbmVy
        YXRlSWRGb3JSZWNvcmQoKWAgbWV0aG9kLiBUaGlzIG1ldGhvZCB3aWxsIGJl
        IGludm9rZWQKICAgIGVhY2ggdGltZSB5b3UgY3JlYXRlIGEgbmV3IHJlY29y
        ZCwgYW5kIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIGl0IHdpbGwgYmUKICAg
        IGFzc2lnbmVkIHRvIHRoZSByZWNvcmQncyBgcHJpbWFyeUtleWAuCgogICAg
        TW9zdCB0cmFkaXRpb25hbCBSRVNULWxpa2UgSFRUUCBBUElzIHdpbGwgbm90
        IHVzZSB0aGlzIG1ldGhvZC4gSW5zdGVhZCwgdGhlIElECiAgICBvZiB0aGUg
        cmVjb3JkIHdpbGwgYmUgc2V0IGJ5IHRoZSBzZXJ2ZXIsIGFuZCB5b3VyIGFk
        YXB0ZXIgd2lsbCB1cGRhdGUgdGhlIHN0b3JlCiAgICB3aXRoIHRoZSBuZXcg
        SUQgd2hlbiBpdCBjYWxscyBgZGlkQ3JlYXRlUmVjb3JkKClgLiBPbmx5IGlt
        cGxlbWVudCB0aGlzIG1ldGhvZCBpZgogICAgeW91IGludGVuZCB0byBnZW5l
        cmF0ZSByZWNvcmQgSURzIG9uIHRoZSBjbGllbnQtc2lkZS4KCiAgICBUaGUg
        YGdlbmVyYXRlSWRGb3JSZWNvcmQoKWAgbWV0aG9kIHdpbGwgYmUgaW52b2tl
        ZCB3aXRoIHRoZSByZXF1ZXN0aW5nIHN0b3JlIGFzCiAgICB0aGUgZmlyc3Qg
        cGFyYW1ldGVyIGFuZCB0aGUgbmV3bHkgY3JlYXRlZCByZWNvcmQgYXMgdGhl
        IHNlY29uZCBwYXJhbWV0ZXI6CgogICAgICAgIGdlbmVyYXRlSWRGb3JSZWNv
        cmQ6IGZ1bmN0aW9uKHN0b3JlLCByZWNvcmQpIHsKICAgICAgICAgIHZhciB1
        dWlkID0gQXBwLmdlbmVyYXRlVVVJRFdpdGhTdGF0aXN0aWNhbGx5TG93T2Rk
        c09mQ29sbGlzaW9uKCk7CiAgICAgICAgICByZXR1cm4gdXVpZDsKICAgICAg
        ICB9CgogICAgQG1ldGhvZCBnZW5lcmF0ZUlkRm9yUmVjb3JkCiAgICBAcGFy
        YW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVj
        b3JkCiAgKi8KICBnZW5lcmF0ZUlkRm9yUmVjb3JkOiBudWxsLAoKICAvKioK
        ICAgIFByb3hpZXMgdG8gdGhlIHNlcmlhbGl6ZXIncyBgc2VyaWFsaXplYCBt
        ZXRob2QuCgogICAgQG1ldGhvZCBzZXJpYWxpemUKICAgIEBwYXJhbSB7RFMu
        TW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9ucwog
        ICovCiAgc2VyaWFsaXplOiBmdW5jdGlvbihyZWNvcmQsIG9wdGlvbnMpIHsK
        ICAgIHJldHVybiBnZXQocmVjb3JkLCAnc3RvcmUnKS5zZXJpYWxpemVyRm9y
        KHJlY29yZC5jb25zdHJ1Y3Rvci50eXBlS2V5KS5zZXJpYWxpemUocmVjb3Jk
        LCBvcHRpb25zKTsKICB9LAoKICAvKioKICAgIEltcGxlbWVudCB0aGlzIG1l
        dGhvZCBpbiBhIHN1YmNsYXNzIHRvIGhhbmRsZSB0aGUgY3JlYXRpb24gb2YK
        ICAgIG5ldyByZWNvcmRzLgoKICAgIFNlcmlhbGl6ZXMgdGhlIHJlY29yZCBh
        bmQgc2VuZCBpdCB0byB0aGUgc2VydmVyLgoKICAgIFRoaXMgaW1wbGVtZW50
        YXRpb24gc2hvdWxkIGNhbGwgdGhlIGFkYXB0ZXIncyBgZGlkQ3JlYXRlUmVj
        b3JkYAogICAgbWV0aG9kIG9uIHN1Y2Nlc3Mgb3IgYGRpZEVycm9yYCBtZXRo
        b2Qgb24gZmFpbHVyZS4KCiAgICBAbWV0aG9kIGNyZWF0ZVJlY29yZAogICAg
        QHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mg
        b2YgRFMuTW9kZWx9IHR5cGUgICB0aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhl
        IHJlY29yZAogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICBj
        cmVhdGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSwKCiAgLyoq
        CiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4gYSBzdWJjbGFzcyB0byBo
        YW5kbGUgdGhlIHVwZGF0aW5nIG9mCiAgICBhIHJlY29yZC4KCiAgICBTZXJp
        YWxpemVzIHRoZSByZWNvcmQgdXBkYXRlIGFuZCBzZW5kIGl0IHRvIHRoZSBz
        ZXJ2ZXIuCgogICAgQG1ldGhvZCB1cGRhdGVSZWNvcmQKICAgIEBwYXJhbSB7
        RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1v
        ZGVsfSB0eXBlICAgdGhlIERTLk1vZGVsIGNsYXNzIG9mIHRoZSByZWNvcmQK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICovCiAgdXBkYXRlUmVj
        b3JkOiBFbWJlci5yZXF1aXJlZChGdW5jdGlvbiksCgogIC8qKgogICAgSW1w
        bGVtZW50IHRoaXMgbWV0aG9kIGluIGEgc3ViY2xhc3MgdG8gaGFuZGxlIHRo
        ZSBkZWxldGlvbiBvZgogICAgYSByZWNvcmQuCgogICAgU2VuZHMgYSBkZWxl
        dGUgcmVxdWVzdCBmb3IgdGhlIHJlY29yZCB0byB0aGUgc2VydmVyLgoKICAg
        IEBtZXRob2QgZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBz
        dG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZSAg
        IHRoZSBEUy5Nb2RlbCBjbGFzcyBvZiB0aGUgcmVjb3JkCiAgICBAcGFyYW0g
        e0RTLk1vZGVsfSByZWNvcmQKICAqLwogIGRlbGV0ZVJlY29yZDogRW1iZXIu
        cmVxdWlyZWQoRnVuY3Rpb24pLAoKICAvKioKICAgIEZpbmQgbXVsdGlwbGUg
        cmVjb3JkcyBhdCBvbmNlLgoKICAgIEJ5IGRlZmF1bHQsIGl0IGxvb3BzIG92
        ZXIgdGhlIHByb3ZpZGVkIGlkcyBhbmQgY2FsbHMgYGZpbmRgIG9uIGVhY2gu
        CiAgICBNYXkgYmUgb3ZlcndyaXR0ZW4gdG8gaW1wcm92ZSBwZXJmb3JtYW5j
        ZSBhbmQgcmVkdWNlIHRoZSBudW1iZXIgb2YKICAgIHNlcnZlciByZXF1ZXN0
        cy4KCiAgICBAbWV0aG9kIGZpbmRNYW55CiAgICBAcGFyYW0ge0RTLlN0b3Jl
        fSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlw
        ZSAgIHRoZSBEUy5Nb2RlbCBjbGFzcyBvZiB0aGUgcmVjb3JkcwogICAgQHBh
        cmFtIHtBcnJheX0gICAgaWRzCiAgKi8KICBmaW5kTWFueTogZnVuY3Rpb24o
        c3RvcmUsIHR5cGUsIGlkcykgewogICAgdmFyIHByb21pc2VzID0gbWFwLmNh
        bGwoaWRzLCBmdW5jdGlvbihpZCkgewogICAgICByZXR1cm4gdGhpcy5maW5k
        KHN0b3JlLCB0eXBlLCBpZCk7CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4g
        RW1iZXIuUlNWUC5hbGwocHJvbWlzZXMpOwogIH0KfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgZm10ID0gRW1iZXIuU3RyaW5nLmZtdCwKICAg
        IGluZGV4T2YgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKCnZh
        ciBjb3VudGVyID0gMDsKCi8qKgogIGBEUy5GaXh0dXJlQWRhcHRlcmAgaXMg
        YW4gYWRhcHRlciB0aGF0IGxvYWRzIHJlY29yZHMgZnJvbSBtZW1vcnkuCiAg
        SXRzIHByaW1hcmlseSB1c2VkIGZvciBkZXZlbG9wbWVudCBhbmQgdGVzdGlu
        Zy4gWW91IGNhbiBhbHNvIHVzZQogIGBEUy5GaXh0dXJlQWRhcHRlcmAgd2hp
        bGUgd29ya2luZyBvbiB0aGUgQVBJIGJ1dCBhcmUgbm90IHJlYWR5IHRvCiAg
        aW50ZWdyYXRlIHlldC4gSXQgaXMgYSBmdWxseSBmdW5jdGlvbmluZyBhZGFw
        dGVyLiBBbGwgQ1JVRCBtZXRob2RzCiAgYXJlIGltcGxlbWVudGVkLiBZb3Ug
        Y2FuIGFsc28gaW1wbGVtZW50IHF1ZXJ5IGxvZ2ljIHRoYXQgYSByZW1vdGUK
        ICBzeXN0ZW0gd291bGQgZG8uIEl0cyBwb3NzaWJsZSB0byBkbyBkZXZlbG9w
        IHlvdXIgZW50aXJlIGFwcGxpY2F0aW9uCiAgd2l0aCBgRFMuRml4dHVyZUFk
        YXB0ZXJgLgoKICBAY2xhc3MgRml4dHVyZUFkYXB0ZXIKICBAbmFtZXNwYWNl
        IERTCiAgQGV4dGVuZHMgRFMuQWRhcHRlcgoqLwpEUy5GaXh0dXJlQWRhcHRl
        ciA9IERTLkFkYXB0ZXIuZXh0ZW5kKHsKICAvLyBieSBkZWZhdWx0LCBmaXh0
        dXJlcyBhcmUgYWxyZWFkeSBpbiBub3JtYWxpemVkIGZvcm0KICBzZXJpYWxp
        emVyOiBudWxsLAoKICBzaW11bGF0ZVJlbW90ZVJlc3BvbnNlOiB0cnVlLAoK
        ICBsYXRlbmN5OiA1MCwKCiAgLyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRo
        b2QgaW4gb3JkZXIgdG8gcHJvdmlkZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCBh
        IHR5cGUKCiAgICBAbWV0aG9kIGZpeHR1cmVzRm9yVHlwZQogICAgQHBhcmFt
        ICB0eXBlCiAgKi8KICBmaXh0dXJlc0ZvclR5cGU6IGZ1bmN0aW9uKHR5cGUp
        IHsKICAgIGlmICh0eXBlLkZJWFRVUkVTKSB7CiAgICAgIHZhciBmaXh0dXJl
        cyA9IEVtYmVyLkEodHlwZS5GSVhUVVJFUyk7CiAgICAgIHJldHVybiBmaXh0
        dXJlcy5tYXAoZnVuY3Rpb24oZml4dHVyZSl7CiAgICAgICAgdmFyIGZpeHR1
        cmVJZFR5cGUgPSB0eXBlb2YgZml4dHVyZS5pZDsKICAgICAgICBpZihmaXh0
        dXJlSWRUeXBlICE9PSAibnVtYmVyIiAmJiBmaXh0dXJlSWRUeXBlICE9PSAi
        c3RyaW5nIil7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZm10KCd0aGUg
        aWQgcHJvcGVydHkgbXVzdCBiZSBkZWZpbmVkIGFzIGEgbnVtYmVyIG9yIHN0
        cmluZyBmb3IgZml4dHVyZSAlQCcsIFtmaXh0dXJlXSkpOwogICAgICAgIH0K
        ICAgICAgICBmaXh0dXJlLmlkID0gZml4dHVyZS5pZCArICcnOwogICAgICAg
        IHJldHVybiBmaXh0dXJlOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBu
        dWxsOwogIH0sCgogIC8qKgogICAgSW1wbGVtZW50IHRoaXMgbWV0aG9kIGlu
        IG9yZGVyIHRvIHF1ZXJ5IGZpeHR1cmVzIGRhdGEKCiAgICBAbWV0aG9kIHF1
        ZXJ5Rml4dHVyZXMKICAgIEBwYXJhbSAgZml4dHVyZQogICAgQHBhcmFtICBx
        dWVyeQogICAgQHBhcmFtICB0eXBlCiAgKi8KICBxdWVyeUZpeHR1cmVzOiBm
        dW5jdGlvbihmaXh0dXJlcywgcXVlcnksIHR5cGUpIHsKICAgIEVtYmVyLmFz
        c2VydCgnTm90IGltcGxlbWVudGVkOiBZb3UgbXVzdCBvdmVycmlkZSB0aGUg
        RFMuRml4dHVyZUFkYXB0ZXI6OnF1ZXJ5Rml4dHVyZXMgbWV0aG9kIHRvIHN1
        cHBvcnQgcXVlcnlpbmcgdGhlIGZpeHR1cmUgc3RvcmUuJyk7CiAgfSwKCiAg
        LyoqCiAgICBAbWV0aG9kIHVwZGF0ZUZpeHR1cmVzCiAgICBAcGFyYW0gIHR5
        cGUKICAgIEBwYXJhbSAgZml4dHVyZQogICovCiAgdXBkYXRlRml4dHVyZXM6
        IGZ1bmN0aW9uKHR5cGUsIGZpeHR1cmUpIHsKICAgIGlmKCF0eXBlLkZJWFRV
        UkVTKSB7CiAgICAgIHR5cGUuRklYVFVSRVMgPSBbXTsKICAgIH0KCiAgICB2
        YXIgZml4dHVyZXMgPSB0eXBlLkZJWFRVUkVTOwoKICAgIHRoaXMuZGVsZXRl
        TG9hZGVkRml4dHVyZSh0eXBlLCBmaXh0dXJlKTsKCiAgICBmaXh0dXJlcy5w
        dXNoKGZpeHR1cmUpOwogIH0sCgogIC8qKgogICAgSW1wbGVtZW50IHRoaXMg
        bWV0aG9kIGluIG9yZGVyIHRvIHByb3ZpZGUganNvbiBmb3IgQ1JVRCBtZXRo
        b2RzCgogICAgQG1ldGhvZCBtb2NrSlNPTgogICAgQHBhcmFtICB0eXBlCiAg
        ICBAcGFyYW0gIHJlY29yZAogICovCiAgbW9ja0pTT046IGZ1bmN0aW9uKHN0
        b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgIHJldHVybiBzdG9yZS5zZXJpYWxp
        emVyRm9yKHR5cGUpLnNlcmlhbGl6ZShyZWNvcmQsIHsgaW5jbHVkZUlkOiB0
        cnVlIH0pOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBnZW5lcmF0ZUlkRm9y
        UmVjb3JkCiAgICBAcGFyYW0gIHN0b3JlCiAgICBAcGFyYW0gIHJlY29yZAog
        ICovCiAgZ2VuZXJhdGVJZEZvclJlY29yZDogZnVuY3Rpb24oc3RvcmUpIHsK
        ICAgIHJldHVybiAiZml4dHVyZS0iICsgY291bnRlcisrOwogIH0sCgogIC8q
        KgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0gIHN0b3JlCiAgICBAcGFy
        YW0gIHR5cGUKICAgIEBwYXJhbSAgaWQKICAqLwogIGZpbmQ6IGZ1bmN0aW9u
        KHN0b3JlLCB0eXBlLCBpZCkgewogICAgdmFyIGZpeHR1cmVzID0gdGhpcy5m
        aXh0dXJlc0ZvclR5cGUodHlwZSksCiAgICAgICAgZml4dHVyZTsKCiAgICBF
        bWJlci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIGZpeHR1cmVzIGZvciBtb2Rl
        bCB0eXBlICIrdHlwZS50b1N0cmluZygpLCBmaXh0dXJlcyk7CgogICAgaWYg
        KGZpeHR1cmVzKSB7CiAgICAgIGZpeHR1cmUgPSBFbWJlci5BKGZpeHR1cmVz
        KS5maW5kUHJvcGVydHkoJ2lkJywgaWQpOwogICAgfQoKICAgIGlmIChmaXh0
        dXJlKSB7CiAgICAgIHJldHVybiB0aGlzLnNpbXVsYXRlUmVtb3RlQ2FsbChm
        dW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZml4dHVyZTsKICAgICAgfSwg
        dGhpcyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGZpbmRNYW55
        CiAgICBAcGFyYW0gIHN0b3JlCiAgICBAcGFyYW0gIHR5cGUKICAgIEBwYXJh
        bSAgaWRzCiAgKi8KICBmaW5kTWFueTogZnVuY3Rpb24oc3RvcmUsIHR5cGUs
        IGlkcykgewogICAgdmFyIGZpeHR1cmVzID0gdGhpcy5maXh0dXJlc0ZvclR5
        cGUodHlwZSk7CgogICAgRW1iZXIuYXNzZXJ0KCJVbmFibGUgdG8gZmluZCBm
        aXh0dXJlcyBmb3IgbW9kZWwgdHlwZSAiK3R5cGUudG9TdHJpbmcoKSwgZml4
        dHVyZXMpOwoKICAgIGlmIChmaXh0dXJlcykgewogICAgICBmaXh0dXJlcyA9
        IGZpeHR1cmVzLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgcmV0
        dXJuIGluZGV4T2YoaWRzLCBpdGVtLmlkKSAhPT0gLTE7CiAgICAgIH0pOwog
        ICAgfQoKICAgIGlmIChmaXh0dXJlcykgewogICAgICByZXR1cm4gdGhpcy5z
        aW11bGF0ZVJlbW90ZUNhbGwoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJu
        IGZpeHR1cmVzOwogICAgICB9LCB0aGlzKTsKICAgIH0KICB9LAoKICAvKioK
        ICAgIEBtZXRob2QgZmluZEFsbAogICAgQHBhcmFtICBzdG9yZQogICAgQHBh
        cmFtICB0eXBlCiAgKi8KICBmaW5kQWxsOiBmdW5jdGlvbihzdG9yZSwgdHlw
        ZSkgewogICAgdmFyIGZpeHR1cmVzID0gdGhpcy5maXh0dXJlc0ZvclR5cGUo
        dHlwZSk7CgogICAgRW1iZXIuYXNzZXJ0KCJVbmFibGUgdG8gZmluZCBmaXh0
        dXJlcyBmb3IgbW9kZWwgdHlwZSAiK3R5cGUudG9TdHJpbmcoKSwgZml4dHVy
        ZXMpOwoKICAgIHJldHVybiB0aGlzLnNpbXVsYXRlUmVtb3RlQ2FsbChmdW5j
        dGlvbigpIHsKICAgICAgcmV0dXJuIGZpeHR1cmVzOwogICAgfSwgdGhpcyk7
        CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGZpbmRRdWVyeQogICAgQHBhcmFt
        ICBzdG9yZQogICAgQHBhcmFtICB0eXBlCiAgICBAcGFyYW0gIHF1ZXJ5CiAg
        ICBAcGFyYW0gIGFycmF5CiAgKi8KICBmaW5kUXVlcnk6IGZ1bmN0aW9uKHN0
        b3JlLCB0eXBlLCBxdWVyeSwgYXJyYXkpIHsKICAgIHZhciBmaXh0dXJlcyA9
        IHRoaXMuZml4dHVyZXNGb3JUeXBlKHR5cGUpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiVW5hYmxlIHRvIGZpbmQgZml4dHVyZXMgZm9yIG1vZGVsIHR5cGUgIit0
        eXBlLnRvU3RyaW5nKCksIGZpeHR1cmVzKTsKCiAgICBmaXh0dXJlcyA9IHRo
        aXMucXVlcnlGaXh0dXJlcyhmaXh0dXJlcywgcXVlcnksIHR5cGUpOwoKICAg
        IGlmIChmaXh0dXJlcykgewogICAgICByZXR1cm4gdGhpcy5zaW11bGF0ZVJl
        bW90ZUNhbGwoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGZpeHR1cmVz
        OwogICAgICB9LCB0aGlzKTsKICAgIH0KICB9LAoKICAvKioKICAgIEBtZXRo
        b2QgY3JlYXRlUmVjb3JkCiAgICBAcGFyYW0gIHN0b3JlCiAgICBAcGFyYW0g
        IHR5cGUKICAgIEBwYXJhbSAgcmVjb3JkCiAgKi8KICBjcmVhdGVSZWNvcmQ6
        IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBmaXh0
        dXJlID0gdGhpcy5tb2NrSlNPTihzdG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAg
        ICB0aGlzLnVwZGF0ZUZpeHR1cmVzKHR5cGUsIGZpeHR1cmUpOwoKICAgIHJl
        dHVybiB0aGlzLnNpbXVsYXRlUmVtb3RlQ2FsbChmdW5jdGlvbigpIHsKICAg
        ICAgcmV0dXJuIGZpeHR1cmU7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioK
        ICAgIEBtZXRob2QgdXBkYXRlUmVjb3JkCiAgICBAcGFyYW0gIHN0b3JlCiAg
        ICBAcGFyYW0gIHR5cGUKICAgIEBwYXJhbSAgcmVjb3JkCiAgKi8KICB1cGRh
        dGVSZWNvcmQ6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCByZWNvcmQpIHsKICAg
        IHZhciBmaXh0dXJlID0gdGhpcy5tb2NrSlNPTihzdG9yZSwgdHlwZSwgcmVj
        b3JkKTsKCiAgICB0aGlzLnVwZGF0ZUZpeHR1cmVzKHR5cGUsIGZpeHR1cmUp
        OwoKICAgIHJldHVybiB0aGlzLnNpbXVsYXRlUmVtb3RlQ2FsbChmdW5jdGlv
        bigpIHsKICAgICAgcmV0dXJuIGZpeHR1cmU7CiAgICB9LCB0aGlzKTsKICB9
        LAoKICAvKioKICAgIEBtZXRob2QgZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0g
        IHN0b3JlCiAgICBAcGFyYW0gIHR5cGUKICAgIEBwYXJhbSAgcmVjb3JkCiAg
        Ki8KICBkZWxldGVSZWNvcmQ6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCByZWNv
        cmQpIHsKICAgIHZhciBmaXh0dXJlID0gdGhpcy5tb2NrSlNPTihzdG9yZSwg
        dHlwZSwgcmVjb3JkKTsKCiAgICB0aGlzLmRlbGV0ZUxvYWRlZEZpeHR1cmUo
        dHlwZSwgZml4dHVyZSk7CgogICAgcmV0dXJuIHRoaXMuc2ltdWxhdGVSZW1v
        dGVDYWxsKGZ1bmN0aW9uKCkgewogICAgICAvLyBubyBwYXlsb2FkIGluIGEg
        ZGVsZXRpb24KICAgICAgcmV0dXJuIG51bGw7CiAgICB9KTsKICB9LAoKICAv
        KgogICAgQG1ldGhvZCBkZWxldGVMb2FkZWRGaXh0dXJlCiAgICBAcHJpdmF0
        ZQogICAgQHBhcmFtIHR5cGUKICAgIEBwYXJhbSByZWNvcmQKICAqLwogIGRl
        bGV0ZUxvYWRlZEZpeHR1cmU6IGZ1bmN0aW9uKHR5cGUsIHJlY29yZCkgewog
        ICAgdmFyIGV4aXN0aW5nRml4dHVyZSA9IHRoaXMuZmluZEV4aXN0aW5nRml4
        dHVyZSh0eXBlLCByZWNvcmQpOwoKICAgIGlmKGV4aXN0aW5nRml4dHVyZSkg
        ewogICAgICB2YXIgaW5kZXggPSBpbmRleE9mKHR5cGUuRklYVFVSRVMsIGV4
        aXN0aW5nRml4dHVyZSk7CiAgICAgIHR5cGUuRklYVFVSRVMuc3BsaWNlKGlu
        ZGV4LCAxKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwKCiAgLyoK
        ICAgIEBtZXRob2QgZmluZEV4aXN0aW5nRml4dHVyZQogICAgQHByaXZhdGUK
        ICAgIEBwYXJhbSB0eXBlCiAgICBAcGFyYW0gcmVjb3JkCiAgKi8KICBmaW5k
        RXhpc3RpbmdGaXh0dXJlOiBmdW5jdGlvbih0eXBlLCByZWNvcmQpIHsKICAg
        IHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JUeXBlKHR5cGUpOwog
        ICAgdmFyIGlkID0gZ2V0KHJlY29yZCwgJ2lkJyk7CgogICAgcmV0dXJuIHRo
        aXMuZmluZEZpeHR1cmVCeUlkKGZpeHR1cmVzLCBpZCk7CiAgfSwKCiAgLyoK
        ICAgIEBtZXRob2QgZmluZEZpeHR1cmVCeUlkCiAgICBAcHJpdmF0ZQogICAg
        QHBhcmFtIHR5cGUKICAgIEBwYXJhbSByZWNvcmQKICAqLwogIGZpbmRGaXh0
        dXJlQnlJZDogZnVuY3Rpb24oZml4dHVyZXMsIGlkKSB7CiAgICByZXR1cm4g
        RW1iZXIuQShmaXh0dXJlcykuZmluZChmdW5jdGlvbihyKSB7CiAgICAgIGlm
        KCcnK2dldChyLCAnaWQnKSA9PT0gJycraWQpIHsKICAgICAgICByZXR1cm4g
        dHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAg
        ICAgIH0KICAgIH0pOwogIH0sCgogIC8qCiAgICBAbWV0aG9kIHNpbXVsYXRl
        UmVtb3RlQ2FsbAogICAgQHByaXZhdGUKICAgIEBwYXJhbSBjYWxsYmFjawog
        ICAgQHBhcmFtIGNvbnRleHQKICAqLwogIHNpbXVsYXRlUmVtb3RlQ2FsbDog
        ZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHsKICAgIHZhciBhZGFwdGVy
        ID0gdGhpczsKCiAgICByZXR1cm4gbmV3IEVtYmVyLlJTVlAuUHJvbWlzZShm
        dW5jdGlvbihyZXNvbHZlKSB7CiAgICAgIGlmIChnZXQoYWRhcHRlciwgJ3Np
        bXVsYXRlUmVtb3RlUmVzcG9uc2UnKSkgewogICAgICAgIC8vIFNjaGVkdWxl
        IHdpdGggc2V0VGltZW91dAogICAgICAgIEVtYmVyLnJ1bi5sYXRlcihmdW5j
        dGlvbigpIHsKICAgICAgICAgIHJlc29sdmUoY2FsbGJhY2suY2FsbChjb250
        ZXh0KSk7CiAgICAgICAgfSwgZ2V0KGFkYXB0ZXIsICdsYXRlbmN5JykpOwog
        ICAgICB9IGVsc2UgewogICAgICAgIC8vIEFzeW5jaHJvbm91cywgYnV0IGF0
        IHRoZSBvZiB0aGUgcnVubG9vcCB3aXRoIHplcm8gbGF0ZW5jeQogICAgICAg
        IEVtYmVyLnJ1bi5vbmNlKGZ1bmN0aW9uKCkgewogICAgICAgICAgcmVzb2x2
        ZShjYWxsYmFjay5jYWxsKGNvbnRleHQpKTsKICAgICAgICB9KTsKICAgICAg
        fQogICAgfSk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBmb3JFYWNoID0gRW1iZXIuQXJyYXlQ
        b2x5ZmlsbHMuZm9yRWFjaDsKdmFyIG1hcCA9IEVtYmVyLkFycmF5UG9seWZp
        bGxzLm1hcDsKCmZ1bmN0aW9uIGNvZXJjZUlkKGlkKSB7CiAgcmV0dXJuIGlk
        ID09IG51bGwgPyBudWxsIDogaWQrJyc7Cn0KCi8qKgogIE5vcm1hbGx5LCBh
        cHBsaWNhdGlvbnMgd2lsbCB1c2UgdGhlIGBSRVNUU2VyaWFsaXplcmAgYnkg
        aW1wbGVtZW50aW5nCiAgdGhlIGBub3JtYWxpemVgIG1ldGhvZCBhbmQgaW5k
        aXZpZHVhbCBub3JtYWxpemF0aW9ucyB1bmRlcgogIGBub3JtYWxpemVIYXNo
        YC4KCiAgVGhpcyBhbGxvd3MgeW91IHRvIGRvIHdoYXRldmVyIGtpbmQgb2Yg
        bXVuZ2luZyB5b3UgbmVlZCwgYW5kIGlzCiAgZXNwZWNpYWxseSB1c2VmdWwg
        aWYgeW91ciBzZXJ2ZXIgaXMgaW5jb25zaXN0ZW50IGFuZCB5b3UgbmVlZCB0
        bwogIGRvIG11bmdpbmcgZGlmZmVyZW50bHkgZm9yIG1hbnkgZGlmZmVyZW50
        IGtpbmRzIG9mIHJlc3BvbnNlcy4KCiAgU2VlIHRoZSBgbm9ybWFsaXplYCBk
        b2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAjIyBBY3Jv
        c3MgdGhlIEJvYXJkIE5vcm1hbGl6YXRpb24KCiAgVGhlcmUgYXJlIGFsc28g
        YSBudW1iZXIgb2YgaG9va3MgdGhhdCB5b3UgbWlnaHQgZmluZCB1c2VmdWwg
        dG8gZGVmaW5lZAogIGFjcm9zcy10aGUtYm9hcmQgcnVsZXMgZm9yIHlvdXIg
        cGF5bG9hZC4gVGhlc2UgcnVsZXMgd2lsbCBiZSB1c2VmdWwKICBpZiB5b3Vy
        IHNlcnZlciBpcyBjb25zaXN0ZW50LCBvciBpZiB5b3UncmUgYnVpbGRpbmcg
        YW4gYWRhcHRlciBmb3IKICBhbiBpbmZyYXN0cnVjdHVyZSBzZXJ2aWNlLCBs
        aWtlIFBhcnNlLCBhbmQgd2FudCB0byBlbmNvZGUgc2VydmljZQogIGNvbnZl
        bnRpb25zLgoKICBGb3IgZXhhbXBsZSwgaWYgYWxsIG9mIHlvdXIga2V5cyBh
        cmUgdW5kZXJzY29yZWQgYW5kIGFsbC1jYXBzLCBidXQKICBvdGhlcndpc2Ug
        Y29uc2lzdGVudCB3aXRoIHRoZSBuYW1lcyB5b3UgdXNlIGluIHlvdXIgbW9k
        ZWxzLCB5b3UKICBjYW4gaW1wbGVtZW50IGFjcm9zcy10aGUtYm9hcmQgcnVs
        ZXMgZm9yIGhvdyB0byBjb252ZXJ0IGFuIGF0dHJpYnV0ZQogIG5hbWUgaW4g
        eW91ciBtb2RlbCB0byBhIGtleSBpbiB5b3VyIEpTT04uCgogIGBgYGpzCiAg
        QXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVy
        LmV4dGVuZCh7CiAgICBrZXlGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uKGF0dHIp
        IHsKICAgICAgcmV0dXJuIEVtYmVyLlN0cmluZy51bmRlcnNjb3JlKGF0dHIp
        LnRvVXBwZXJDYXNlKCk7CiAgICB9CiAgfSk7CiAgYGBgCgogIFlvdSBjYW4g
        YWxzbyBpbXBsZW1lbnQgYGtleUZvclJlbGF0aW9uc2hpcGAsIHdoaWNoIHRh
        a2VzIHRoZSBuYW1lCiAgb2YgdGhlIHJlbGF0aW9uc2hpcCBhcyB0aGUgZmly
        c3QgcGFyYW1ldGVyLCBhbmQgdGhlIGtpbmQgb2YKICByZWxhdGlvbnNoaXAg
        KGBoYXNNYW55YCBvciBgYmVsb25nc1RvYCkgYXMgdGhlIHNlY29uZCBwYXJh
        bWV0ZXIuCgogIEBjbGFzcyBSRVNUU2VyaWFsaXplcgogIEBuYW1lc3BhY2Ug
        RFMKICBAZXh0ZW5kcyBEUy5KU09OU2VyaWFsaXplcgoqLwpEUy5SRVNUU2Vy
        aWFsaXplciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgLyoqCiAg
        ICBOb3JtYWxpemVzIGEgcGFydCBvZiB0aGUgSlNPTiBwYXlsb2FkIHJldHVy
        bmVkIGJ5CiAgICB0aGUgc2VydmVyLiBZb3Ugc2hvdWxkIG92ZXJyaWRlIHRo
        aXMgbWV0aG9kLCBtdW5nZSB0aGUgaGFzaAogICAgYW5kIGNhbGwgc3VwZXIg
        aWYgeW91IGhhdmUgZ2VuZXJpYyBub3JtYWxpemF0aW9uIHRvIGRvLgoKICAg
        IEl0IHRha2VzIHRoZSB0eXBlIG9mIHRoZSByZWNvcmQgdGhhdCBpcyBiZWlu
        ZyBub3JtYWxpemVkCiAgICAoYXMgYSBEUy5Nb2RlbCBjbGFzcyksIHRoZSBw
        cm9wZXJ0eSB3aGVyZSB0aGUgaGFzaCB3YXMKICAgIG9yaWdpbmFsbHkgZm91
        bmQsIGFuZCB0aGUgaGFzaCB0byBub3JtYWxpemUuCgogICAgRm9yIGV4YW1w
        bGUsIGlmIHlvdSBoYXZlIGEgcGF5bG9hZCB0aGF0IGxvb2tzIGxpa2UgdGhp
        czoKCiAgICBgYGBqcwogICAgewogICAgICAicG9zdCI6IHsKICAgICAgICAi
        aWQiOiAxLAogICAgICAgICJ0aXRsZSI6ICJSYWlscyBpcyBvbWFrYXNlIiwK
        ICAgICAgICAiY29tbWVudHMiOiBbIDEsIDIgXQogICAgICB9LAogICAgICAi
        Y29tbWVudHMiOiBbewogICAgICAgICJpZCI6IDEsCiAgICAgICAgImJvZHki
        OiAiRklSU1QiCiAgICAgIH0sIHsKICAgICAgICAiaWQiOiAyLAogICAgICAg
        ICJib2R5IjogIlJhaWxzIGlzIHVuYWdpIgogICAgICB9XQogICAgfQogICAg
        YGBgCgogICAgVGhlIGBub3JtYWxpemVgIG1ldGhvZCB3aWxsIGJlIGNhbGxl
        ZCB0aHJlZSB0aW1lczoKCiAgICAqIFdpdGggYEFwcC5Qb3N0YCwgYCJwb3N0
        cyJgIGFuZCBgeyBpZDogMSwgdGl0bGU6ICJSYWlscyBpcyBvbWFrYXNlIiwg
        Li4uIH1gCiAgICAqIFdpdGggYEFwcC5Db21tZW50YCwgYCJjb21tZW50cyJg
        IGFuZCBgeyBpZDogMSwgYm9keTogIkZJUlNUIiB9YAogICAgKiBXaXRoIGBB
        cHAuQ29tbWVudGAsIGAiY29tbWVudHMiYCBhbmQgYHsgaWQ6IDIsIGJvZHk6
        ICJSYWlscyBpcyB1bmFnaSIgfWAKCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1l
        dGhvZCwgZm9yIGV4YW1wbGUsIHRvIG5vcm1hbGl6ZSB1bmRlcnNjb3JlZCBr
        ZXlzIHRvIGNhbWVsaXplZAogICAgb3Igb3RoZXIgZ2VuZXJhbC1wdXJwb3Nl
        IG5vcm1hbGl6YXRpb25zLgoKICAgIElmIHlvdSB3YW50IHRvIGRvIG5vcm1h
        bGl6YXRpb25zIHNwZWNpZmljIHRvIHNvbWUgcGFydCBvZiB0aGUgcGF5bG9h
        ZCwgeW91CiAgICBjYW4gc3BlY2lmeSB0aG9zZSB1bmRlciBgbm9ybWFsaXpl
        SGFzaGAuCgogICAgRm9yIGV4YW1wbGUsIGlmIHRoZSBgSURzYCB1bmRlciBg
        ImNvbW1lbnRzImAgYXJlIHByb3ZpZGVkIGFzIGBfaWRgIGluc3RlYWQgb2YK
        ICAgIGBpZGAsIHlvdSBjYW4gc3BlY2lmeSBob3cgdG8gbm9ybWFsaXplIGp1
        c3QgdGhlIGNvbW1lbnRzOgoKICAgIGBgYGpzCiAgICBBcHAuUG9zdFNlcmlh
        bGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5leHRlbmQoewogICAgICBub3Jt
        YWxpemVIYXNoOiB7CiAgICAgICAgY29tbWVudHM6IGZ1bmN0aW9uKGhhc2gp
        IHsKICAgICAgICAgIGhhc2guaWQgPSBoYXNoLl9pZDsKICAgICAgICAgIGRl
        bGV0ZSBoYXNoLl9pZDsKICAgICAgICAgIHJldHVybiBoYXNoOwogICAgICAg
        IH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUga2V5IHVuZGVy
        IGBub3JtYWxpemVIYXNoYCBpcyBqdXN0IHRoZSBvcmlnaW5hbCBrZXkgdGhh
        dCB3YXMgaW4gdGhlIG9yaWdpbmFsCiAgICBwYXlsb2FkLgoKICAgIEBtZXRo
        b2Qgbm9ybWFsaXplCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVs
        fSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ30gcHJvcAogICAgQHBhcmFtIHtP
        YmplY3R9IGhhc2gKICAgIEByZXR1cm5zIE9iamVjdAogICovCiAgbm9ybWFs
        aXplOiBmdW5jdGlvbih0eXBlLCBoYXNoLCBwcm9wKSB7CiAgICB0aGlzLm5v
        cm1hbGl6ZUlkKGhhc2gpOwogICAgdGhpcy5ub3JtYWxpemVVc2luZ0RlY2xh
        cmVkTWFwcGluZyh0eXBlLCBoYXNoKTsKICAgIHRoaXMubm9ybWFsaXplQXR0
        cmlidXRlcyh0eXBlLCBoYXNoKTsKICAgIHRoaXMubm9ybWFsaXplUmVsYXRp
        b25zaGlwcyh0eXBlLCBoYXNoKTsKCiAgICBpZiAodGhpcy5ub3JtYWxpemVI
        YXNoICYmIHRoaXMubm9ybWFsaXplSGFzaFtwcm9wXSkgewogICAgICByZXR1
        cm4gdGhpcy5ub3JtYWxpemVIYXNoW3Byb3BdKGhhc2gpOwogICAgfQoKICAg
        IHJldHVybiB0aGlzLl9zdXBlcih0eXBlLCBoYXNoLCBwcm9wKTsKICB9LAoK
        ICAvKioKICAgIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIG5vcm1hbGl6
        ZSBhbGwgcGF5bG9hZHMsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGV5CiAg
        ICByZXByZXNlbnQgc2luZ2xlIHJlY29yZHMgb3IgYW4gYXJyYXkuCgogICAg
        Rm9yIGV4YW1wbGUsIHlvdSBtaWdodCB3YW50IHRvIHJlbW92ZSBzb21lIGV4
        dHJhbmVvdXMgZGF0YSBmcm9tIHRoZSBwYXlsb2FkOgoKICAgIGBgYGpzCiAg
        ICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0gRFMuUkVTVFNlcmlhbGl6
        ZXIuZXh0ZW5kKHsKICAgICAgbm9ybWFsaXplUGF5bG9hZDogZnVuY3Rpb24o
        dHlwZSwgcGF5bG9hZCkgewogICAgICAgIGRlbGV0ZSBwYXlsb2FkLnZlcnNp
        b247CiAgICAgICAgZGVsZXRlIHBheWxvYWQuc3RhdHVzOwogICAgICAgIHJl
        dHVybiBwYXlsb2FkOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBt
        ZXRob2Qgbm9ybWFsaXplUGF5bG9hZAogICAgQHBhcmFtIHtzdWJjbGFzcyBv
        ZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IGhhc2gKICAg
        IEByZXR1cm5zIE9iamVjdCB0aGUgbm9ybWFsaXplZCBwYXlsb2FkCiAgKi8K
        ICBub3JtYWxpemVQYXlsb2FkOiBmdW5jdGlvbih0eXBlLCBwYXlsb2FkKSB7
        CiAgICByZXR1cm4gcGF5bG9hZDsKICB9LAoKICAvKioKICAgIEBtZXRob2Qg
        bm9ybWFsaXplSWQKICAgIEBwcml2YXRlCiAgKi8KICBub3JtYWxpemVJZDog
        ZnVuY3Rpb24oaGFzaCkgewogICAgdmFyIHByaW1hcnlLZXkgPSBnZXQodGhp
        cywgJ3ByaW1hcnlLZXknKTsKCiAgICBpZiAocHJpbWFyeUtleSA9PT0gJ2lk
        JykgeyByZXR1cm47IH0KCiAgICBoYXNoLmlkID0gaGFzaFtwcmltYXJ5S2V5
        XTsKICAgIGRlbGV0ZSBoYXNoW3ByaW1hcnlLZXldOwogIH0sCgogIC8qKgog
        ICAgQG1ldGhvZCBub3JtYWxpemVVc2luZ0RlY2xhcmVkTWFwcGluZwogICAg
        QHByaXZhdGUKICAqLwogIG5vcm1hbGl6ZVVzaW5nRGVjbGFyZWRNYXBwaW5n
        OiBmdW5jdGlvbih0eXBlLCBoYXNoKSB7CiAgICB2YXIgYXR0cnMgPSBnZXQo
        dGhpcywgJ2F0dHJzJyksIHBheWxvYWRLZXksIGtleTsKCiAgICBpZiAoYXR0
        cnMpIHsKICAgICAgZm9yIChrZXkgaW4gYXR0cnMpIHsKICAgICAgICBwYXls
        b2FkS2V5ID0gYXR0cnNba2V5XTsKCiAgICAgICAgaGFzaFtrZXldID0gaGFz
        aFtwYXlsb2FkS2V5XTsKICAgICAgICBkZWxldGUgaGFzaFtwYXlsb2FkS2V5
        XTsKICAgICAgfQogICAgfQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBub3Jt
        YWxpemVBdHRyaWJ1dGVzCiAgICBAcHJpdmF0ZQogICovCiAgbm9ybWFsaXpl
        QXR0cmlidXRlczogZnVuY3Rpb24odHlwZSwgaGFzaCkgewogICAgdmFyIHBh
        eWxvYWRLZXksIGtleTsKCiAgICBpZiAodGhpcy5rZXlGb3JBdHRyaWJ1dGUp
        IHsKICAgICAgdHlwZS5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKGtleSkgewog
        ICAgICAgIHBheWxvYWRLZXkgPSB0aGlzLmtleUZvckF0dHJpYnV0ZShrZXkp
        OwogICAgICAgIGlmIChrZXkgPT09IHBheWxvYWRLZXkpIHsgcmV0dXJuOyB9
        CgogICAgICAgIGhhc2hba2V5XSA9IGhhc2hbcGF5bG9hZEtleV07CiAgICAg
        ICAgZGVsZXRlIGhhc2hbcGF5bG9hZEtleV07CiAgICAgIH0sIHRoaXMpOwog
        ICAgfQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBub3JtYWxpemVSZWxhdGlv
        bnNoaXBzCiAgICBAcHJpdmF0ZQogICovCiAgbm9ybWFsaXplUmVsYXRpb25z
        aGlwczogZnVuY3Rpb24odHlwZSwgaGFzaCkgewogICAgdmFyIHBheWxvYWRL
        ZXksIGtleTsKCiAgICBpZiAodGhpcy5rZXlGb3JSZWxhdGlvbnNoaXApIHsK
        ICAgICAgdHlwZS5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVs
        YXRpb25zaGlwKSB7CiAgICAgICAgcGF5bG9hZEtleSA9IHRoaXMua2V5Rm9y
        UmVsYXRpb25zaGlwKGtleSwgcmVsYXRpb25zaGlwLmtpbmQpOwogICAgICAg
        IGlmIChrZXkgPT09IHBheWxvYWRLZXkpIHsgcmV0dXJuOyB9CgogICAgICAg
        IGhhc2hba2V5XSA9IGhhc2hbcGF5bG9hZEtleV07CiAgICAgICAgZGVsZXRl
        IGhhc2hbcGF5bG9hZEtleV07CiAgICAgIH0sIHRoaXMpOwogICAgfQogIH0s
        CgogIC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIHNlcnZlciBoYXMgcmV0dXJu
        ZWQgYSBwYXlsb2FkIHJlcHJlc2VudGluZwogICAgYSBzaW5nbGUgcmVjb3Jk
        LCBzdWNoIGFzIGluIHJlc3BvbnNlIHRvIGEgYGZpbmRgIG9yIGBzYXZlYC4K
        CiAgICBJdCBpcyB5b3VyIG9wcG9ydHVuaXR5IHRvIGNsZWFuIHVwIHRoZSBz
        ZXJ2ZXIncyByZXNwb25zZSBpbnRvIHRoZSBub3JtYWxpemVkCiAgICBmb3Jt
        IGV4cGVjdGVkIGJ5IEVtYmVyIERhdGEuCgogICAgSWYgeW91IHdhbnQsIHlv
        dSBjYW4ganVzdCByZXN0cnVjdHVyZSB0aGUgdG9wLWxldmVsIG9mIHlvdXIg
        cGF5bG9hZCwgYW5kCiAgICBkbyBtb3JlIGZpbmUtZ3JhaW5lZCBub3JtYWxp
        emF0aW9uIGluIHRoZSBgbm9ybWFsaXplYCBtZXRob2QuCgogICAgRm9yIGV4
        YW1wbGUsIGlmIHlvdSBoYXZlIGEgcGF5bG9hZCBsaWtlIHRoaXMgaW4gcmVz
        cG9uc2UgdG8gYSByZXF1ZXN0IGZvcgogICAgcG9zdCAxOgoKICAgIGBgYGpz
        CiAgICB7CiAgICAgICJpZCI6IDEsCiAgICAgICJ0aXRsZSI6ICJSYWlscyBp
        cyBvbWFrYXNlIiwKCiAgICAgICJfZW1iZWRkZWQiOiB7CiAgICAgICAgImNv
        bW1lbnQiOiBbewogICAgICAgICAgIl9pZCI6IDEsCiAgICAgICAgICAiY29t
        bWVudF90aXRsZSI6ICJGSVJTVCIKICAgICAgICB9LCB7CiAgICAgICAgICAi
        X2lkIjogMiwKICAgICAgICAgICJjb21tZW50X3RpdGxlIjogIlJhaWxzIGlz
        IHVuYWdpIgogICAgICAgIH1dCiAgICAgIH0KICAgIH0KICAgIGBgYAoKICAg
        IFlvdSBjb3VsZCBpbXBsZW1lbnQgYSBzZXJpYWxpemVyIHRoYXQgbG9va3Mg
        bGlrZSB0aGlzIHRvIGdldCB5b3VyIHBheWxvYWQKICAgIGludG8gc2hhcGU6
        CgogICAgYGBganMKICAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RT
        ZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIC8vIEZpcnN0LCByZXN0cnVjdHVy
        ZSB0aGUgdG9wLWxldmVsIHNvIGl0J3Mgb3JnYW5pemVkIGJ5IHR5cGUKICAg
        ICAgZXh0cmFjdFNpbmdsZTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxv
        YWQsIGlkLCByZXF1ZXN0VHlwZSkgewogICAgICAgIHZhciBjb21tZW50cyA9
        IHBheWxvYWQuX2VtYmVkZGVkLmNvbW1lbnQ7CiAgICAgICAgZGVsZXRlIHBh
        eWxvYWQuX2VtYmVkZGVkOwoKICAgICAgICBwYXlsb2FkID0geyBjb21tZW50
        czogY29tbWVudHMsIHBvc3Q6IHBheWxvYWQgfTsKICAgICAgICByZXR1cm4g
        dGhpcy5fc3VwZXIoc3RvcmUsIHR5cGUsIHBheWxvYWQsIGlkLCByZXF1ZXN0
        VHlwZSk7CiAgICAgIH0sCgogICAgICBub3JtYWxpemVIYXNoOiB7CiAgICAg
        ICAgLy8gTmV4dCwgbm9ybWFsaXplIGluZGl2aWR1YWwgY29tbWVudHMsIHdo
        aWNoIChhZnRlciBgZXh0cmFjdGApCiAgICAgICAgLy8gYXJlIG5vdyBsb2Nh
        dGVkIHVuZGVyIGBjb21tZW50c2AKICAgICAgICBjb21tZW50czogZnVuY3Rp
        b24oaGFzaCkgewogICAgICAgICAgaGFzaC5pZCA9IGhhc2guX2lkOwogICAg
        ICAgICAgaGFzaC50aXRsZSA9IGhhc2guY29tbWVudF90aXRsZTsKICAgICAg
        ICAgIGRlbGV0ZSBoYXNoLl9pZDsKICAgICAgICAgIGRlbGV0ZSBoYXNoLmNv
        bW1lbnRfdGl0bGU7CiAgICAgICAgICByZXR1cm4gaGFzaDsKICAgICAgICB9
        CiAgICAgIH0KICAgIH0pCiAgICBgYGAKCiAgICBXaGVuIHlvdSBjYWxsIHN1
        cGVyIGZyb20geW91ciBvd24gaW1wbGVtZW50YXRpb24gb2YgYGV4dHJhY3RT
        aW5nbGVgLCB0aGUKICAgIGJ1aWx0LWluIGltcGxlbWVudGF0aW9uIHdpbGwg
        ZmluZCB0aGUgcHJpbWFyeSByZWNvcmQgaW4geW91ciBub3JtYWxpemVkCiAg
        ICBwYXlsb2FkIGFuZCBwdXNoIHRoZSByZW1haW5pbmcgcmVjb3JkcyBpbnRv
        IHRoZSBzdG9yZS4KCiAgICBUaGUgcHJpbWFyeSByZWNvcmQgaXMgdGhlIHNp
        bmdsZSBoYXNoIGZvdW5kIHVuZGVyIGBwb3N0YCBvciB0aGUgZmlyc3QKICAg
        IGVsZW1lbnQgb2YgdGhlIGBwb3N0c2AgYXJyYXkuCgogICAgVGhlIHByaW1h
        cnkgcmVjb3JkIGhhcyBzcGVjaWFsIG1lYW5pbmcgd2hlbiB0aGUgcmVjb3Jk
        IGlzIGJlaW5nIGNyZWF0ZWQKICAgIGZvciB0aGUgZmlyc3QgdGltZSBvciB1
        cGRhdGVkIChgY3JlYXRlUmVjb3JkYCBvciBgdXBkYXRlUmVjb3JkYCkuIElu
        CiAgICBwYXJ0aWN1bGFyLCBpdCB3aWxsIHVwZGF0ZSB0aGUgcHJvcGVydGll
        cyBvZiB0aGUgcmVjb3JkIHRoYXQgd2FzIHNhdmVkLgoKICAgIEBtZXRob2Qg
        ZXh0cmFjdFNpbmdsZQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcGFyYW0ge1N0cmluZ30gaWQKICAg
        IEBwYXJhbSB7J2ZpbmQnfCdjcmVhdGVSZWNvcmQnfCd1cGRhdGVSZWNvcmQn
        fCdkZWxldGVSZWNvcmQnfSByZXF1ZXN0VHlwZQogICAgQHJldHVybnMgT2Jq
        ZWN0IHRoZSBwcmltYXJ5IHJlc3BvbnNlIHRvIHRoZSBvcmlnaW5hbCByZXF1
        ZXN0CiAgKi8KICBleHRyYWN0U2luZ2xlOiBmdW5jdGlvbihzdG9yZSwgcHJp
        bWFyeVR5cGUsIHBheWxvYWQsIHJlY29yZElkLCByZXF1ZXN0VHlwZSkgewog
        ICAgcGF5bG9hZCA9IHRoaXMubm9ybWFsaXplUGF5bG9hZChwcmltYXJ5VHlw
        ZSwgcGF5bG9hZCk7CgogICAgdmFyIHByaW1hcnlUeXBlTmFtZSA9IHByaW1h
        cnlUeXBlLnR5cGVLZXksCiAgICAgICAgcHJpbWFyeVJlY29yZDsKCiAgICBm
        b3IgKHZhciBwcm9wIGluIHBheWxvYWQpIHsKICAgICAgdmFyIHR5cGVOYW1l
        ICA9IHRoaXMudHlwZUZvclJvb3QocHJvcCksCiAgICAgICAgICBpc1ByaW1h
        cnkgPSB0eXBlTmFtZSA9PT0gcHJpbWFyeVR5cGVOYW1lOwoKICAgICAgLy8g
        bGVnYWN5IHN1cHBvcnQgZm9yIHNpbmd1bGFyIHJlc291cmNlcwogICAgICBp
        ZiAoaXNQcmltYXJ5ICYmIEVtYmVyLnR5cGVPZihwYXlsb2FkW3Byb3BdKSAh
        PT0gImFycmF5IiApIHsKICAgICAgICBwcmltYXJ5UmVjb3JkID0gdGhpcy5u
        b3JtYWxpemUocHJpbWFyeVR5cGUsIHBheWxvYWRbcHJvcF0sIHByb3ApOwog
        ICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICB2YXIgdHlwZSA9IHN0
        b3JlLm1vZGVsRm9yKHR5cGVOYW1lKTsKCiAgICAgIC8qanNoaW50IGxvb3Bm
        dW5jOnRydWUqLwogICAgICBmb3JFYWNoLmNhbGwocGF5bG9hZFtwcm9wXSwg
        ZnVuY3Rpb24oaGFzaCkgewogICAgICAgIHZhciB0eXBlTmFtZSA9IHRoaXMu
        dHlwZUZvclJvb3QocHJvcCksCiAgICAgICAgICAgIHR5cGUgPSBzdG9yZS5t
        b2RlbEZvcih0eXBlTmFtZSksCiAgICAgICAgICAgIHR5cGVTZXJpYWxpemVy
        ID0gc3RvcmUuc2VyaWFsaXplckZvcih0eXBlKTsKCiAgICAgICAgaGFzaCA9
        IHR5cGVTZXJpYWxpemVyLm5vcm1hbGl6ZSh0eXBlLCBoYXNoLCBwcm9wKTsK
        CiAgICAgICAgdmFyIGlzRmlyc3RDcmVhdGVkUmVjb3JkID0gaXNQcmltYXJ5
        ICYmICFyZWNvcmRJZCAmJiAhcHJpbWFyeVJlY29yZCwKICAgICAgICAgICAg
        aXNVcGRhdGVkUmVjb3JkID0gaXNQcmltYXJ5ICYmIGNvZXJjZUlkKGhhc2gu
        aWQpID09PSByZWNvcmRJZDsKCiAgICAgICAgLy8gZmluZCB0aGUgcHJpbWFy
        eSByZWNvcmQuCiAgICAgICAgLy8KICAgICAgICAvLyBJdCdzIGVpdGhlcjoK
        ICAgICAgICAvLyAqIHRoZSByZWNvcmQgd2l0aCB0aGUgc2FtZSBJRCBhcyB0
        aGUgb3JpZ2luYWwgcmVxdWVzdAogICAgICAgIC8vICogaW4gdGhlIGNhc2Ug
        b2YgYSBuZXdseSBjcmVhdGVkIHJlY29yZCB0aGF0IGRpZG4ndCBoYXZlIGFu
        IElELCB0aGUgZmlyc3QKICAgICAgICAvLyAgIHJlY29yZCBpbiB0aGUgQXJy
        YXkKICAgICAgICBpZiAoaXNGaXJzdENyZWF0ZWRSZWNvcmQgfHwgaXNVcGRh
        dGVkUmVjb3JkKSB7CiAgICAgICAgICBwcmltYXJ5UmVjb3JkID0gaGFzaDsK
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RvcmUucHVzaCh0eXBlTmFt
        ZSwgaGFzaCk7CiAgICAgICAgfQogICAgICB9LCB0aGlzKTsKICAgIH0KCiAg
        ICByZXR1cm4gcHJpbWFyeVJlY29yZDsKICB9LAoKICAvKioKICAgIENhbGxl
        ZCB3aGVuIHRoZSBzZXJ2ZXIgaGFzIHJldHVybmVkIGEgcGF5bG9hZCByZXBy
        ZXNlbnRpbmcKICAgIG11bHRpcGxlIHJlY29yZHMsIHN1Y2ggYXMgaW4gcmVz
        cG9uc2UgdG8gYSBgZmluZEFsbGAgb3IgYGZpbmRRdWVyeWAuCgogICAgSXQg
        aXMgeW91ciBvcHBvcnR1bml0eSB0byBjbGVhbiB1cCB0aGUgc2VydmVyJ3Mg
        cmVzcG9uc2UgaW50byB0aGUgbm9ybWFsaXplZAogICAgZm9ybSBleHBlY3Rl
        ZCBieSBFbWJlciBEYXRhLgoKICAgIElmIHlvdSB3YW50LCB5b3UgY2FuIGp1
        c3QgcmVzdHJ1Y3R1cmUgdGhlIHRvcC1sZXZlbCBvZiB5b3VyIHBheWxvYWQs
        IGFuZAogICAgZG8gbW9yZSBmaW5lLWdyYWluZWQgbm9ybWFsaXphdGlvbiBp
        biB0aGUgYG5vcm1hbGl6ZWAgbWV0aG9kLgoKICAgIEZvciBleGFtcGxlLCBp
        ZiB5b3UgaGF2ZSBhIHBheWxvYWQgbGlrZSB0aGlzIGluIHJlc3BvbnNlIHRv
        IGEgcmVxdWVzdCBmb3IKICAgIGFsbCBwb3N0czoKCiAgICBgYGBqcwogICAg
        ewogICAgICAiX2VtYmVkZGVkIjogewogICAgICAgICJwb3N0IjogW3sKICAg
        ICAgICAgICJpZCI6IDEsCiAgICAgICAgICAidGl0bGUiOiAiUmFpbHMgaXMg
        b21ha2FzZSIKICAgICAgICB9LCB7CiAgICAgICAgICAiaWQiOiAyLAogICAg
        ICAgICAgInRpdGxlIjogIlRoZSBQYXJsZXkgTGV0dGVyIgogICAgICAgIH1d
        LAogICAgICAgICJjb21tZW50IjogW3sKICAgICAgICAgICJfaWQiOiAxLAog
        ICAgICAgICAgImNvbW1lbnRfdGl0bGUiOiAiUmFpbHMgaXMgdW5hZ2kiCiAg
        ICAgICAgICAicG9zdF9pZCI6IDEKICAgICAgICB9LCB7CiAgICAgICAgICAi
        X2lkIjogMiwKICAgICAgICAgICJjb21tZW50X3RpdGxlIjogIkRvbid0IHRy
        ZWFkIG9uIG1lIiwKICAgICAgICAgICJwb3N0X2lkIjogMgogICAgICAgIH1d
        CiAgICAgIH0KICAgIH0KICAgIGBgYAoKICAgIFlvdSBjb3VsZCBpbXBsZW1l
        bnQgYSBzZXJpYWxpemVyIHRoYXQgbG9va3MgbGlrZSB0aGlzIHRvIGdldCB5
        b3VyIHBheWxvYWQKICAgIGludG8gc2hhcGU6CgogICAgYGBganMKICAgIEFw
        cC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVyLmV4dGVuZCh7
        CiAgICAgIC8vIEZpcnN0LCByZXN0cnVjdHVyZSB0aGUgdG9wLWxldmVsIHNv
        IGl0J3Mgb3JnYW5pemVkIGJ5IHR5cGUKICAgICAgLy8gYW5kIHRoZSBjb21t
        ZW50cyBhcmUgbGlzdGVkIHVuZGVyIGEgcG9zdCdzIGBjb21tZW50c2Aga2V5
        LgogICAgICBleHRyYWN0QXJyYXk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBw
        YXlsb2FkLCBpZCwgcmVxdWVzdFR5cGUpIHsKICAgICAgICB2YXIgcG9zdHMg
        PSBwYXlsb2FkLl9lbWJlZGRlZC5wb3N0OwogICAgICAgIHZhciBjb21tZW50
        cyA9IFtdOwogICAgICAgIHZhciBwb3N0Q2FjaGUgPSB7fTsKCiAgICAgICAg
        cG9zdHMuZm9yRWFjaChmdW5jdGlvbihwb3N0KSB7CiAgICAgICAgICBwb3N0
        LmNvbW1lbnRzID0gW107CiAgICAgICAgICBwb3N0Q2FjaGVbcG9zdC5pZF0g
        PSBwb3N0OwogICAgICAgIH0pOwoKICAgICAgICBwYXlsb2FkLl9lbWJlZGRl
        ZC5jb21tZW50LmZvckVhY2goZnVuY3Rpb24oY29tbWVudCkgewogICAgICAg
        ICAgY29tbWVudHMucHVzaChjb21tZW50KTsKICAgICAgICAgIHBvc3RDYWNo
        ZVtjb21tZW50LnBvc3RfaWRdLmNvbW1lbnRzLnB1c2goY29tbWVudCk7CiAg
        ICAgICAgICBkZWxldGUgY29tbWVudC5wb3N0X2lkOwogICAgICAgIH0KCiAg
        ICAgICAgcGF5bG9hZCA9IHsgY29tbWVudHM6IGNvbW1lbnRzLCBwb3N0czog
        cGF5bG9hZCB9OwoKICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoc3RvcmUs
        IHR5cGUsIHBheWxvYWQsIGlkLCByZXF1ZXN0VHlwZSk7CiAgICAgIH0sCgog
        ICAgICBub3JtYWxpemVIYXNoOiB7CiAgICAgICAgLy8gTmV4dCwgbm9ybWFs
        aXplIGluZGl2aWR1YWwgY29tbWVudHMsIHdoaWNoIChhZnRlciBgZXh0cmFj
        dGApCiAgICAgICAgLy8gYXJlIG5vdyBsb2NhdGVkIHVuZGVyIGBjb21tZW50
        c2AKICAgICAgICBjb21tZW50czogZnVuY3Rpb24oaGFzaCkgewogICAgICAg
        ICAgaGFzaC5pZCA9IGhhc2guX2lkOwogICAgICAgICAgaGFzaC50aXRsZSA9
        IGhhc2guY29tbWVudF90aXRsZTsKICAgICAgICAgIGRlbGV0ZSBoYXNoLl9p
        ZDsKICAgICAgICAgIGRlbGV0ZSBoYXNoLmNvbW1lbnRfdGl0bGU7CiAgICAg
        ICAgICByZXR1cm4gaGFzaDsKICAgICAgICB9CiAgICAgIH0KICAgIH0pCiAg
        ICBgYGAKCiAgICBXaGVuIHlvdSBjYWxsIHN1cGVyIGZyb20geW91ciBvd24g
        aW1wbGVtZW50YXRpb24gb2YgYGV4dHJhY3RBcnJheWAsIHRoZQogICAgYnVp
        bHQtaW4gaW1wbGVtZW50YXRpb24gd2lsbCBmaW5kIHRoZSBwcmltYXJ5IGFy
        cmF5IGluIHlvdXIgbm9ybWFsaXplZAogICAgcGF5bG9hZCBhbmQgcHVzaCB0
        aGUgcmVtYWluaW5nIHJlY29yZHMgaW50byB0aGUgc3RvcmUuCgogICAgVGhl
        IHByaW1hcnkgYXJyYXkgaXMgdGhlIGFycmF5IGZvdW5kIHVuZGVyIGBwb3N0
        c2AuCgogICAgVGhlIHByaW1hcnkgcmVjb3JkIGhhcyBzcGVjaWFsIG1lYW5p
        bmcgd2hlbiByZXNwb25kaW5nIHRvIGBmaW5kUXVlcnlgCiAgICBvciBgZmlu
        ZEhhc01hbnlgLiBJbiBwYXJ0aWN1bGFyLCB0aGUgcHJpbWFyeSBhcnJheSB3
        aWxsIGJlY29tZSB0aGUKICAgIGxpc3Qgb2YgcmVjb3JkcyBpbiB0aGUgcmVj
        b3JkIGFycmF5IHRoYXQga2lja2VkIG9mZiB0aGUgcmVxdWVzdC4KCiAgICBJ
        ZiB5b3VyIHByaW1hcnkgYXJyYXkgY29udGFpbnMgc2Vjb25kYXJ5IChlbWJl
        ZGRlZCkgcmVjb3JkcyBvZiB0aGUgc2FtZSB0eXBlLAogICAgeW91IGNhbm5v
        dCBwbGFjZSB0aGVzZSBpbnRvIHRoZSBwcmltYXJ5IGFycmF5IGBwb3N0c2Au
        IEluc3RlYWQsIHBsYWNlIHRoZQogICAgc2Vjb25kYXJ5IGl0ZW1zIGludG8g
        YW4gdW5kZXJzY29yZSBwcmVmaXhlZCBwcm9wZXJ0eSBgX3Bvc3RzYCwgd2hp
        Y2ggd2lsbAogICAgcHVzaCB0aGVzZSBpdGVtcyBpbnRvIHRoZSBzdG9yZSBh
        bmQgd2lsbCBub3QgYWZmZWN0IHRoZSByZXN1bHRpbmcgcXVlcnkuCgogICAg
        QG1ldGhvZCBleHRyYWN0QXJyYXkKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0
        b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAg
        ICBAcGFyYW0ge09iamVjdH0gcGF5bG9hZAogICAgQHBhcmFtIHsnZmluZEFs
        bCd8J2ZpbmRNYW55J3wnZmluZEhhc01hbnknfCdmaW5kUXVlcnknfSByZXF1
        ZXN0VHlwZQogICAgQHJldHVybnMge0FycmF5PE9iamVjdD59IFRoZSBwcmlt
        YXJ5IGFycmF5IHRoYXQgd2FzIHJldHVybmVkIGluIHJlc3BvbnNlCiAgICAg
        IHRvIHRoZSBvcmlnaW5hbCBxdWVyeS4KICAqLwogIGV4dHJhY3RBcnJheTog
        ZnVuY3Rpb24oc3RvcmUsIHByaW1hcnlUeXBlLCBwYXlsb2FkKSB7CiAgICBw
        YXlsb2FkID0gdGhpcy5ub3JtYWxpemVQYXlsb2FkKHByaW1hcnlUeXBlLCBw
        YXlsb2FkKTsKCiAgICB2YXIgcHJpbWFyeVR5cGVOYW1lID0gcHJpbWFyeVR5
        cGUudHlwZUtleSwKICAgICAgICBwcmltYXJ5QXJyYXk7CgogICAgZm9yICh2
        YXIgcHJvcCBpbiBwYXlsb2FkKSB7CiAgICAgIHZhciB0eXBlS2V5ID0gcHJv
        cCwKICAgICAgICAgIGZvcmNlZFNlY29uZGFyeSA9IGZhbHNlOwoKICAgICAg
        aWYgKHByb3AuY2hhckF0KDApID09PSAnXycpIHsKICAgICAgICBmb3JjZWRT
        ZWNvbmRhcnkgPSB0cnVlOwogICAgICAgIHR5cGVLZXkgPSBwcm9wLnN1YnN0
        cigxKTsKICAgICAgfQoKICAgICAgdmFyIHR5cGVOYW1lID0gdGhpcy50eXBl
        Rm9yUm9vdCh0eXBlS2V5KSwKICAgICAgICAgIHR5cGUgPSBzdG9yZS5tb2Rl
        bEZvcih0eXBlTmFtZSksCiAgICAgICAgICB0eXBlU2VyaWFsaXplciA9IHN0
        b3JlLnNlcmlhbGl6ZXJGb3IodHlwZSksCiAgICAgICAgICBpc1ByaW1hcnkg
        PSAoIWZvcmNlZFNlY29uZGFyeSAmJiAodHlwZU5hbWUgPT09IHByaW1hcnlU
        eXBlTmFtZSkpOwoKICAgICAgLypqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSovCiAg
        ICAgIHZhciBub3JtYWxpemVkQXJyYXkgPSBtYXAuY2FsbChwYXlsb2FkW3By
        b3BdLCBmdW5jdGlvbihoYXNoKSB7CiAgICAgICAgcmV0dXJuIHR5cGVTZXJp
        YWxpemVyLm5vcm1hbGl6ZSh0eXBlLCBoYXNoLCBwcm9wKTsKICAgICAgfSwg
        dGhpcyk7CgogICAgICBpZiAoaXNQcmltYXJ5KSB7CiAgICAgICAgcHJpbWFy
        eUFycmF5ID0gbm9ybWFsaXplZEFycmF5OwogICAgICB9IGVsc2UgewogICAg
        ICAgIHN0b3JlLnB1c2hNYW55KHR5cGVOYW1lLCBub3JtYWxpemVkQXJyYXkp
        OwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHByaW1hcnlBcnJheTsKICB9
        LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGFsbG93cyB5b3UgdG8gcHVzaCBh
        IHBheWxvYWQgY29udGFpbmluZyB0b3AtbGV2ZWwKICAgIGNvbGxlY3Rpb25z
        IG9mIHJlY29yZHMgb3JnYW5pemVkIHBlciB0eXBlLgoKICAgIGBgYGpzCiAg
        ICB7CiAgICAgICJwb3N0cyI6IFt7CiAgICAgICAgImlkIjogIjEiLAogICAg
        ICAgICJ0aXRsZSI6ICJSYWlscyBpcyBvbWFrYXNlIiwKICAgICAgICAiYXV0
        aG9yIiwgIjEiLAogICAgICAgICJjb21tZW50cyI6IFsgIjEiIF0KICAgICAg
        fV0sCiAgICAgICJjb21tZW50cyI6IFt7CiAgICAgICAgImlkIjogIjEiLAog
        ICAgICAgICJib2R5IjogIkZJUlNUCiAgICAgIH1dLAogICAgICAidXNlcnMi
        OiBbewogICAgICAgICJpZCI6ICIxIiwKICAgICAgICAibmFtZSI6ICJAZDJo
        IgogICAgICB9XQogICAgfQogICAgYGBgCgogICAgSXQgd2lsbCBmaXJzdCBu
        b3JtYWxpemUgdGhlIHBheWxvYWQsIHNvIHlvdSBjYW4gdXNlIHRoaXMgdG8g
        cHVzaAogICAgaW4gZGF0YSBzdHJlYW1pbmcgaW4gZnJvbSB5b3VyIHNlcnZl
        ciBzdHJ1Y3R1cmVkIHRoZSBzYW1lIHdheQogICAgdGhhdCBmZXRjaGVzIGFu
        ZCBzYXZlcyBhcmUgc3RydWN0dXJlZC4KCiAgICBAbWV0aG9kIHB1c2hQYXls
        b2FkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtP
        YmplY3R9IHBheWxvYWQKICAqLwogIHB1c2hQYXlsb2FkOiBmdW5jdGlvbihz
        dG9yZSwgcGF5bG9hZCkgewogICAgcGF5bG9hZCA9IHRoaXMubm9ybWFsaXpl
        UGF5bG9hZChudWxsLCBwYXlsb2FkKTsKCiAgICBmb3IgKHZhciBwcm9wIGlu
        IHBheWxvYWQpIHsKICAgICAgdmFyIHR5cGVOYW1lID0gdGhpcy50eXBlRm9y
        Um9vdChwcm9wKSwKICAgICAgICAgIHR5cGUgPSBzdG9yZS5tb2RlbEZvcih0
        eXBlTmFtZSk7CgogICAgICAvKmpzaGludCBsb29wZnVuYzp0cnVlKi8KICAg
        ICAgdmFyIG5vcm1hbGl6ZWRBcnJheSA9IG1hcC5jYWxsKHBheWxvYWRbcHJv
        cF0sIGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICByZXR1cm4gdGhpcy5ub3Jt
        YWxpemUodHlwZSwgaGFzaCwgcHJvcCk7CiAgICAgIH0sIHRoaXMpOwoKICAg
        ICAgc3RvcmUucHVzaE1hbnkodHlwZU5hbWUsIG5vcm1hbGl6ZWRBcnJheSk7
        CiAgICB9CiAgfSwKCiAgLyoqCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhv
        ZCB0byBub3JtYWxpemUgdGhlIEpTT04gcm9vdCBrZXlzIHJldHVybmVkCiAg
        ICBpbnRvIHRoZSBtb2RlbCB0eXBlIGV4cGVjdGVkIGJ5IHlvdXIgc3RvcmUu
        CgogICAgRm9yIGV4YW1wbGUsIHlvdXIgc2VydmVyIG1heSByZXR1cm4gdW5k
        ZXJzY29yZWQgcm9vdCBrZXlzIHJhdGhlciB0aGFuCiAgICB0aGUgZXhwZWN0
        ZWQgY2FtZWxjYXNlZCB2ZXJzaW9ucy4KCiAgICBgYGBqcwogICAgQXBwLkFw
        cGxpY2F0aW9uU2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVyLmV4dGVu
        ZCh7CiAgICAgIHR5cGVGb3JSb290OiBmdW5jdGlvbihyb290KSB7CiAgICAg
        ICAgdmFyIGNhbWVsaXplZCA9IEVtYmVyLlN0cmluZy5jYW1lbGl6ZShyb290
        KTsKICAgICAgICByZXR1cm4gRW1iZXIuU3RyaW5nLnNpbmd1bGFyaXplKGNh
        bWVsaXplZCk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhv
        ZCB0eXBlRm9yUm9vdAogICAgQHBhcmFtIHtTdHJpbmd9IHJvb3QKICAgIEBy
        ZXR1cm5zIFN0cmluZyB0aGUgbW9kZWwncyB0eXBlS2V5CiAgKi8KICB0eXBl
        Rm9yUm9vdDogZnVuY3Rpb24ocm9vdCkgewogICAgcmV0dXJuIEVtYmVyLlN0
        cmluZy5zaW5ndWxhcml6ZShyb290KTsKICB9LAoKICAvLyBTRVJJQUxJWkUK
        CiAgLyoqCiAgICBDYWxsZWQgd2hlbiBhIHJlY29yZCBpcyBzYXZlZCBpbiBv
        cmRlciB0byBjb252ZXJ0IHRoZQogICAgcmVjb3JkIGludG8gSlNPTi4KCiAg
        ICBCeSBkZWZhdWx0LCBpdCBjcmVhdGVzIGEgSlNPTiBvYmplY3Qgd2l0aCBh
        IGtleSBmb3IKICAgIGVhY2ggYXR0cmlidXRlIGFuZCBiZWxvbmdzVG8gcmVs
        YXRpb25zaGlwLgoKICAgIEZvciBleGFtcGxlLCBjb25zaWRlciB0aGlzIG1v
        ZGVsOgoKICAgIGBgYGpzCiAgICBBcHAuQ29tbWVudCA9IERTLk1vZGVsLmV4
        dGVuZCh7CiAgICAgIHRpdGxlOiBEUy5hdHRyKCksCiAgICAgIGJvZHk6IERT
        LmF0dHIoKSwKCiAgICAgIGF1dGhvcjogRFMuYmVsb25nc1RvKCd1c2VyJykK
        ICAgIH0pOwogICAgYGBgCgogICAgVGhlIGRlZmF1bHQgc2VyaWFsaXphdGlv
        biB3b3VsZCBjcmVhdGUgYSBKU09OIG9iamVjdCBsaWtlOgoKICAgIGBgYGpz
        CiAgICB7CiAgICAgICJ0aXRsZSI6ICJSYWlscyBpcyB1bmFnaSIsCiAgICAg
        ICJib2R5IjogIlJhaWxzPyBPbWFrYXNlPyBPX08iLAogICAgICAiYXV0aG9y
        IjogMTIKICAgIH0KICAgIGBgYAoKICAgIEJ5IGRlZmF1bHQsIGF0dHJpYnV0
        ZXMgYXJlIHBhc3NlZCB0aHJvdWdoIGFzLWlzLCB1bmxlc3MKICAgIHlvdSBz
        cGVjaWZpZWQgYW4gYXR0cmlidXRlIHR5cGUgKGBEUy5hdHRyKCdkYXRlJylg
        KS4gSWYKICAgIHlvdSBzcGVjaWZ5IGEgdHJhbnNmb3JtLCB0aGUgSmF2YVNj
        cmlwdCB2YWx1ZSB3aWxsIGJlCiAgICBzZXJpYWxpemVkIHdoZW4gaW5zZXJ0
        ZWQgaW50byB0aGUgSlNPTiBoYXNoLgoKICAgIEJ5IGRlZmF1bHQsIGJlbG9u
        Z3MtdG8gcmVsYXRpb25zaGlwcyBhcmUgY29udmVydGVkIGludG8KICAgIElE
        cyB3aGVuIGluc2VydGVkIGludG8gdGhlIEpTT04gaGFzaC4KCiAgICAjIyBJ
        RHMKCiAgICBgc2VyaWFsaXplYCB0YWtlcyBhbiBvcHRpb25zIGhhc2ggd2l0
        aCBhIHNpbmdsZSBvcHRpb246CiAgICBgaW5jbHVkZUlkYC4gSWYgdGhpcyBv
        cHRpb24gaXMgYHRydWVgLCBgc2VyaWFsaXplYCB3aWxsLAogICAgYnkgZGVm
        YXVsdCBpbmNsdWRlIHRoZSBJRCBpbiB0aGUgSlNPTiBvYmplY3QgaXQgYnVp
        bGRzLgoKICAgIFRoZSBhZGFwdGVyIHBhc3NlcyBpbiBgaW5jbHVkZUlkOiB0
        cnVlYCB3aGVuIHNlcmlhbGl6aW5nCiAgICBhIHJlY29yZCBmb3IgYGNyZWF0
        ZVJlY29yZGAsIGJ1dCBub3QgZm9yIGB1cGRhdGVSZWNvcmRgLgoKICAgICMj
        IEN1c3RvbWl6YXRpb24KCiAgICBZb3VyIHNlcnZlciBtYXkgZXhwZWN0IGEg
        ZGlmZmVyZW50IEpTT04gZm9ybWF0IHRoYW4gdGhlCiAgICBidWlsdC1pbiBz
        ZXJpYWxpemF0aW9uIGZvcm1hdC4KCiAgICBJbiB0aGF0IGNhc2UsIHlvdSBj
        YW4gaW1wbGVtZW50IGBzZXJpYWxpemVgIHlvdXJzZWxmIGFuZAogICAgcmV0
        dXJuIGEgSlNPTiBoYXNoIG9mIHlvdXIgY2hvb3NpbmcuCgogICAgYGBganMK
        ICAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVyLmV4
        dGVuZCh7CiAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24ocG9zdCwgb3B0aW9u
        cykgewogICAgICAgIHZhciBqc29uID0gewogICAgICAgICAgUE9TVF9UVEw6
        IHBvc3QuZ2V0KCd0aXRsZScpLAogICAgICAgICAgUE9TVF9CRFk6IHBvc3Qu
        Z2V0KCdib2R5JyksCiAgICAgICAgICBQT1NUX0NNUzogcG9zdC5nZXQoJ2Nv
        bW1lbnRzJykubWFwUHJvcGVydHkoJ2lkJykKICAgICAgICB9CgogICAgICAg
        IGlmIChvcHRpb25zLmluY2x1ZGVJZCkgewogICAgICAgICAganNvbi5QT1NU
        X0lEXyA9IHBvc3QuZ2V0KCdpZCcpOwogICAgICAgIH0KCiAgICAgICAgcmV0
        dXJuIGpzb247CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgIyMgQ3Vz
        dG9taXppbmcgYW4gQXBwLVdpZGUgU2VyaWFsaXplcgoKICAgIElmIHlvdSB3
        YW50IHRvIGRlZmluZSBhIHNlcmlhbGl6ZXIgZm9yIHlvdXIgZW50aXJlCiAg
        ICBhcHBsaWNhdGlvbiwgeW91J2xsIHByb2JhYmx5IHdhbnQgdG8gdXNlIGBl
        YWNoQXR0cmlidXRlYAogICAgYW5kIGBlYWNoUmVsYXRpb25zaGlwYCBvbiB0
        aGUgcmVjb3JkLgoKICAgIGBgYGpzCiAgICBBcHAuQXBwbGljYXRpb25TZXJp
        YWxpemVyID0gRFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2Vy
        aWFsaXplOiBmdW5jdGlvbihyZWNvcmQsIG9wdGlvbnMpIHsKICAgICAgICB2
        YXIganNvbiA9IHt9OwoKICAgICAgICByZWNvcmQuZWFjaEF0dHJpYnV0ZShm
        dW5jdGlvbihuYW1lKSB7CiAgICAgICAgICBqc29uW3NlcnZlckF0dHJpYnV0
        ZU5hbWUobmFtZSldID0gcmVjb3JkLmdldChuYW1lKTsKICAgICAgICB9KQoK
        ICAgICAgICByZWNvcmQuZWFjaFJlbGF0aW9uc2hpcChmdW5jdGlvbihuYW1l
        LCByZWxhdGlvbnNoaXApIHsKICAgICAgICAgIGlmIChyZWxhdGlvbnNoaXAu
        a2luZCA9PT0gJ2hhc01hbnknKSB7CiAgICAgICAgICAgIGpzb25bc2VydmVy
        SGFzTWFueU5hbWUobmFtZSldID0gcmVjb3JkLmdldChuYW1lKS5tYXBCeSgn
        aWQnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKG9w
        dGlvbnMuaW5jbHVkZUlkKSB7CiAgICAgICAgICBqc29uLklEXyA9IHJlY29y
        ZC5nZXQoJ2lkJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4ganNvbjsK
        ICAgICAgfQogICAgfSk7CgogICAgZnVuY3Rpb24gc2VydmVyQXR0cmlidXRl
        TmFtZShhdHRyaWJ1dGUpIHsKICAgICAgcmV0dXJuIGF0dHJpYnV0ZS51bmRl
        cnNjb3JlKCkudG9VcHBlckNhc2UoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBz
        ZXJ2ZXJIYXNNYW55TmFtZShuYW1lKSB7CiAgICAgIHJldHVybiBzZXJ2ZXJB
        dHRyaWJ1dGVOYW1lKG5hbWUuc2luZ3VsYXJpemUoKSkgKyAiX0lEUyI7CiAg
        ICB9CiAgICBgYGAKCiAgICBUaGlzIHNlcmlhbGl6ZXIgd2lsbCBnZW5lcmF0
        ZSBKU09OIHRoYXQgbG9va3MgbGlrZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7
        CiAgICAgICJUSVRMRSI6ICJSYWlscyBpcyBvbWFrYXNlIiwKICAgICAgIkJP
        RFkiOiAiWWVwLiBPbWFrYXNlLiIsCiAgICAgICJDT01NRU5UX0lEUyI6IFsg
        MSwgMiwgMyBdCiAgICB9CiAgICBgYGAKCiAgICAjIyBUd2Vha2luZyB0aGUg
        RGVmYXVsdCBKU09OCgogICAgSWYgeW91IGp1c3Qgd2FudCB0byBkbyBzb21l
        IHNtYWxsIHR3ZWFrcyBvbiB0aGUgZGVmYXVsdCBKU09OLAogICAgeW91IGNh
        biBjYWxsIHN1cGVyIGZpcnN0IGFuZCBtYWtlIHRoZSB0d2Vha3Mgb24gdGhl
        IHJldHVybmVkCiAgICBKU09OLgoKICAgIGBgYGpzCiAgICBBcHAuUG9zdFNl
        cmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5leHRlbmQoewogICAgICBz
        ZXJpYWxpemU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykgewogICAgICAg
        IHZhciBqc29uID0gdGhpcy5fc3VwZXIocmVjb3JkLCBvcHRpb25zKTsKCiAg
        ICAgICAganNvbi5zdWJqZWN0ID0ganNvbi50aXRsZTsKICAgICAgICBkZWxl
        dGUganNvbi50aXRsZTsKCiAgICAgICAgcmV0dXJuIGpzb247CiAgICAgIH0K
        ICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBzZXJpYWxpemUKICAgIEBw
        YXJhbSByZWNvcmQKICAgIEBwYXJhbSBvcHRpb25zCiAgKi8KICBzZXJpYWxp
        emU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykgewogICAgcmV0dXJuIHRo
        aXMuX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoq
        CiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0byBjdXN0b21pemUgdGhl
        IHJvb3Qga2V5cyBzZXJpYWxpemVkIGludG8gdGhlIEpTT04uCiAgICBCeSBk
        ZWZhdWx0IHRoZSBSRVNUIFNlcmlhbGl6ZXIgc2VuZHMgY2FtZWxpemVkIHJv
        b3Qga2V5cy4KICAgIEZvciBleGFtcGxlLCB5b3VyIHNlcnZlciBtYXkgZXhw
        ZWN0IHVuZGVyc2NvcmVkIHJvb3Qgb2JqZWN0cy4KCiAgICBgYGBqcwogICAg
        QXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVy
        LmV4dGVuZCh7CiAgICAgIHNlcmlhbGl6ZUludG9IYXNoOiBmdW5jdGlvbihk
        YXRhLCB0eXBlLCByZWNvcmQsIG9wdGlvbnMpIHsKICAgICAgICB2YXIgcm9v
        dCA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHR5cGUudHlwZUtleSk7CiAg
        ICAgICAgZGF0YVtyb290XSA9IHRoaXMuc2VyaWFsaXplKHJlY29yZCwgb3B0
        aW9ucyk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBz
        ZXJpYWxpemVJbnRvSGFzaAogICAgQHBhcmFtIHtPYmplY3R9IGhhc2gKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlv
        bnMKICAqLwogIHNlcmlhbGl6ZUludG9IYXNoOiBmdW5jdGlvbihoYXNoLCB0
        eXBlLCByZWNvcmQsIG9wdGlvbnMpIHsKICAgIGhhc2hbdHlwZS50eXBlS2V5
        XSA9IHRoaXMuc2VyaWFsaXplKHJlY29yZCwgb3B0aW9ucyk7CiAgfSwKCiAg
        LyoqCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0byBjdXN0b21pemUg
        aG93IHBvbHltb3JwaGljIG9iamVjdHMgYXJlIHNlcmlhbGl6ZWQuCiAgICBC
        eSBkZWZhdWx0IHRoZSBKU09OIFNlcmlhbGl6ZXIgY3JlYXRlcyB0aGUga2V5
        IGJ5IGFwcGVuZGluZyBgVHlwZWAgdG8KICAgIHRoZSBhdHRyaWJ1dGUgYW5k
        IHZhbHVlIGZyb20gdGhlIG1vZGVsJ3MgY2FtZWxjYXNlZCBtb2RlbCBuYW1l
        LgoKICAgIEBtZXRob2Qgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBlCiAgICBA
        cGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0fSBq
        c29uCiAgICBAcGFyYW0gcmVsYXRpb25zaGlwCiAgKi8KICBzZXJpYWxpemVQ
        b2x5bW9ycGhpY1R5cGU6IGZ1bmN0aW9uKHJlY29yZCwganNvbiwgcmVsYXRp
        b25zaGlwKSB7CiAgICB2YXIga2V5ID0gcmVsYXRpb25zaGlwLmtleSwKICAg
        ICAgICBiZWxvbmdzVG8gPSBnZXQocmVjb3JkLCBrZXkpOwogICAga2V5ID0g
        dGhpcy5rZXlGb3JBdHRyaWJ1dGUgPyB0aGlzLmtleUZvckF0dHJpYnV0ZShr
        ZXkpIDoga2V5OwogICAganNvbltrZXkgKyAiVHlwZSJdID0gYmVsb25nc1Rv
        LmNvbnN0cnVjdG9yLnR5cGVLZXk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBmb3JFYWNoID0g
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaDsKCi8qKgogIFRoZSBSRVNU
        IGFkYXB0ZXIgYWxsb3dzIHlvdXIgc3RvcmUgdG8gY29tbXVuaWNhdGUgd2l0
        aCBhbiBIVFRQIHNlcnZlciBieQogIHRyYW5zbWl0dGluZyBKU09OIHZpYSBY
        SFIuIE1vc3QgRW1iZXIuanMgYXBwcyB0aGF0IGNvbnN1bWUgYSBKU09OIEFQ
        SQogIHNob3VsZCB1c2UgdGhlIFJFU1QgYWRhcHRlci4KCiAgVGhpcyBhZGFw
        dGVyIGlzIGRlc2lnbmVkIGFyb3VuZCB0aGUgaWRlYSB0aGF0IHRoZSBKU09O
        IGV4Y2hhbmdlZCB3aXRoCiAgdGhlIHNlcnZlciBzaG91bGQgYmUgY29udmVu
        dGlvbmFsLgoKICAjIyBKU09OIFN0cnVjdHVyZQoKICBUaGUgUkVTVCBhZGFw
        dGVyIGV4cGVjdHMgdGhlIEpTT04gcmV0dXJuZWQgZnJvbSB5b3VyIHNlcnZl
        ciB0byBmb2xsb3cKICB0aGVzZSBjb252ZW50aW9ucy4KCiAgIyMjIE9iamVj
        dCBSb290CgogIFRoZSBKU09OIHBheWxvYWQgc2hvdWxkIGJlIGFuIG9iamVj
        dCB0aGF0IGNvbnRhaW5zIHRoZSByZWNvcmQgaW5zaWRlIGEKICByb290IHBy
        b3BlcnR5LiBGb3IgZXhhbXBsZSwgaW4gcmVzcG9uc2UgdG8gYSBgR0VUYCBy
        ZXF1ZXN0IGZvcgogIGAvcG9zdHMvMWAsIHRoZSBKU09OIHNob3VsZCBsb29r
        IGxpa2UgdGhpczoKCiAgYGBganMKICB7CiAgICAicG9zdCI6IHsKICAgICAg
        dGl0bGU6ICJJJ20gUnVubmluZyB0byBSZWZvcm0gdGhlIFczQydzIFRhZyIs
        CiAgICAgIGF1dGhvcjogIlllaHVkYSBLYXR6IgogICAgfQogIH0KICBgYGAK
        CiAgIyMjIENvbnZlbnRpb25hbCBOYW1lcwoKICBBdHRyaWJ1dGUgbmFtZXMg
        aW4geW91ciBKU09OIHBheWxvYWQgc2hvdWxkIGJlIHRoZSBjYW1lbENhc2Vk
        IHZlcnNpb25zIG9mCiAgdGhlIGF0dHJpYnV0ZXMgaW4geW91ciBFbWJlci5q
        cyBtb2RlbHMuCgogIEZvciBleGFtcGxlLCBpZiB5b3UgaGF2ZSBhIGBQZXJz
        b25gIG1vZGVsOgoKICBgYGBqcwogIEFwcC5QZXJzb24gPSBEUy5Nb2RlbC5l
        eHRlbmQoewogICAgZmlyc3ROYW1lOiBEUy5hdHRyKCdzdHJpbmcnKSwKICAg
        IGxhc3ROYW1lOiBEUy5hdHRyKCdzdHJpbmcnKSwKICAgIG9jY3VwYXRpb246
        IERTLmF0dHIoJ3N0cmluZycpCiAgfSk7CiAgYGBgCgogIFRoZSBKU09OIHJl
        dHVybmVkIHNob3VsZCBsb29rIGxpa2UgdGhpczoKCiAgYGBganMKICB7CiAg
        ICAicGVyc29uIjogewogICAgICAiZmlyc3ROYW1lIjogIkJhcmFjayIsCiAg
        ICAgICJsYXN0TmFtZSI6ICJPYmFtYSIsCiAgICAgICJvY2N1cGF0aW9uIjog
        IlByZXNpZGVudCIKICAgIH0KICB9CiAgYGBgCgogICMjIEN1c3RvbWl6YXRp
        b24KCiAgIyMjIEVuZHBvaW50IHBhdGggY3VzdG9taXphdGlvbgoKICBFbmRw
        b2ludCBwYXRocyBjYW4gYmUgcHJlZml4ZWQgd2l0aCBhIGBuYW1lc3BhY2Vg
        IGJ5IHNldHRpbmcgdGhlIG5hbWVzcGFjZQogIHByb3BlcnR5IG9uIHRoZSBh
        ZGFwdGVyOgoKICBgYGBqcwogIERTLlJFU1RBZGFwdGVyLnJlb3Blbih7CiAg
        ICBuYW1lc3BhY2U6ICdhcGkvMScKICB9KTsKICBgYGAKICBSZXF1ZXN0cyBm
        b3IgYEFwcC5QZXJzb25gIHdvdWxkIG5vdyB0YXJnZXQgYC9hcGkvMS9wZW9w
        bGUvMWAuCgogICMjIyBIb3N0IGN1c3RvbWl6YXRpb24KCiAgQW4gYWRhcHRl
        ciBjYW4gdGFyZ2V0IG90aGVyIGhvc3RzIGJ5IHNldHRpbmcgdGhlIGBob3N0
        YCBwcm9wZXJ0eS4KCiAgYGBganMKICBEUy5SRVNUQWRhcHRlci5yZW9wZW4o
        ewogICAgaG9zdDogJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tJwogIH0pOwog
        IGBgYAoKICAjIyMgSGVhZGVycyBjdXN0b21pemF0aW9uCgogIFNvbWUgQVBJ
        cyByZXF1aXJlIEhUVFAgaGVhZGVycywgZS5nLiB0byBwcm92aWRlIGFuIEFQ
        SSBrZXkuIEFuIGFycmF5IG9mCiAgaGVhZGVycyBjYW4gYmUgYWRkZWQgdG8g
        dGhlIGFkYXB0ZXIgd2hpY2ggYXJlIHBhc3NlZCB3aXRoIGV2ZXJ5IHJlcXVl
        c3Q6CgogIGBgYGpzCiAgRFMuUkVTVEFkYXB0ZXIucmVvcGVuKHsKICAgIGhl
        YWRlcnM6IHsKICAgICAgIkFQSV9LRVkiOiAic2VjcmV0IGtleSIsCiAgICAg
        ICJBTk9USEVSX0hFQURFUiI6ICJTb21lIGhlYWRlciB2YWx1ZSIKICAgIH0K
        ICB9KTsKICBgYGAKCiAgQGNsYXNzIFJFU1RBZGFwdGVyCiAgQGNvbnN0cnVj
        dG9yCiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRzIERTLkFkYXB0ZXIKKi8K
        RFMuUkVTVEFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVuZCh7CiAgZGVmYXVs
        dFNlcmlhbGl6ZXI6ICdfcmVzdCcsCgogIC8qKgogICAgQ2FsbGVkIGJ5IHRo
        ZSBzdG9yZSBpbiBvcmRlciB0byBmZXRjaCB0aGUgSlNPTiBmb3IgYSBnaXZl
        bgogICAgdHlwZSBhbmQgSUQuCgogICAgVGhlIGBmaW5kYCBtZXRob2QgbWFr
        ZXMgYW4gQWpheCByZXF1ZXN0IHRvIGEgVVJMIGNvbXB1dGVkIGJ5IGBidWls
        ZFVSTGAsIGFuZCByZXR1cm5zIGEKICAgIHByb21pc2UgZm9yIHRoZSByZXN1
        bHRpbmcgcGF5bG9hZC4KCiAgICBUaGlzIG1ldGhvZCBwZXJmb3JtcyBhbiBI
        VFRQIGBHRVRgIHJlcXVlc3Qgd2l0aCB0aGUgaWQgcHJvdmlkZWQgYXMgcGFy
        dCBvZiB0aGUgcXVlcnlzdHJpbmcuIAoKICAgIEBtZXRob2QgZmluZAogICAg
        QHNlZSBSRVNUQWRhcHRlci9idWlsZFVSTAogICAgQHNlZSBSRVNUQWRhcHRl
        ci9hamF4CiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFt
        IHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtTdHJp
        bmd9IGlkCiAgICBAcmV0dXJucyBQcm9taXNlCiAgKi8KICBmaW5kOiBmdW5j
        dGlvbihzdG9yZSwgdHlwZSwgaWQpIHsKICAgIHJldHVybiB0aGlzLmFqYXgo
        dGhpcy5idWlsZFVSTCh0eXBlLnR5cGVLZXksIGlkKSwgJ0dFVCcpOwogIH0s
        CgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSBpbiBvcmRlciB0byBm
        ZXRjaCBhIEpTT04gYXJyYXkgZm9yIGFsbAogICAgb2YgdGhlIHJlY29yZHMg
        Zm9yIGEgZ2l2ZW4gdHlwZS4KCiAgICBUaGUgYGZpbmRBbGxgIG1ldGhvZCBt
        YWtlcyBhbiBBamF4IChIVFRQIEdFVCkgcmVxdWVzdCB0byBhIFVSTCBjb21w
        dXRlZCBieSBgYnVpbGRVUkxgLCBhbmQgcmV0dXJucyBhCiAgICBwcm9taXNl
        IGZvciB0aGUgcmVzdWx0aW5nIHBheWxvYWQuCgogICAgQG1ldGhvZCBmaW5k
        QWxsCiAgICBAc2VlIFJFU1RBZGFwdGVyL2J1aWxkVVJMCiAgICBAc2VlIFJF
        U1RBZGFwdGVyL2FqYXgKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAg
        ICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFy
        YW0ge1N0cmluZ30gc2luY2VUb2tlbgogICAgQHJldHVybnMgUHJvbWlzZQog
        ICovCiAgZmluZEFsbDogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHNpbmNlVG9r
        ZW4pIHsKICAgIHZhciBxdWVyeTsKCiAgICBpZiAoc2luY2VUb2tlbikgewog
        ICAgICBxdWVyeSA9IHsgc2luY2U6IHNpbmNlVG9rZW4gfTsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVpbGRVUkwodHlwZS50eXBlS2V5
        KSwgJ0dFVCcsIHsgZGF0YTogcXVlcnkgfSk7CiAgfSwKCiAgLyoqCiAgICBD
        YWxsZWQgYnkgdGhlIHN0b3JlIGluIG9yZGVyIHRvIGZldGNoIGEgSlNPTiBh
        cnJheSBmb3IKICAgIHRoZSByZWNvcmRzIHRoYXQgbWF0Y2ggYSBwYXJ0aWN1
        bGFyIHF1ZXJ5LgoKICAgIFRoZSBgZmluZFF1ZXJ5YCBtZXRob2QgbWFrZXMg
        YW4gQWpheCAoSFRUUCBHRVQpIHJlcXVlc3QgdG8gYSBVUkwgY29tcHV0ZWQg
        YnkgYGJ1aWxkVVJMYCwgYW5kIHJldHVybnMgYQogICAgcHJvbWlzZSBmb3Ig
        dGhlIHJlc3VsdGluZyBwYXlsb2FkLgoKICAgIFRoZSBgcXVlcnlgIGFyZ3Vt
        ZW50IGlzIGEgc2ltcGxlIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgd2lsbCBi
        ZSBwYXNzZWQgZGlyZWN0bHkKICAgIHRvIHRoZSBzZXJ2ZXIgYXMgcGFyYW1l
        dGVycy4KCiAgICBAbWV0aG9kIGZpbmRRdWVyeQogICAgQHNlZSBSRVNUQWRh
        cHRlci9idWlsZFVSTAogICAgQHNlZSBSRVNUQWRhcHRlci9hamF4CiAgICBA
        cGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBv
        ZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHF1ZXJ5CiAg
        ICBAcmV0dXJucyBQcm9taXNlCiAgKi8KICBmaW5kUXVlcnk6IGZ1bmN0aW9u
        KHN0b3JlLCB0eXBlLCBxdWVyeSkgewogICAgcmV0dXJuIHRoaXMuYWpheCh0
        aGlzLmJ1aWxkVVJMKHR5cGUudHlwZUtleSksICdHRVQnLCB7IGRhdGE6IHF1
        ZXJ5IH0pOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSBp
        biBvcmRlciB0byBmZXRjaCBhIEpTT04gYXJyYXkgZm9yCiAgICB0aGUgdW5s
        b2FkZWQgcmVjb3JkcyBpbiBhIGhhcy1tYW55IHJlbGF0aW9uc2hpcCB0aGF0
        IHdlcmUgb3JpZ2luYWxseQogICAgc3BlY2lmaWVkIGFzIElEcy4KCiAgICBG
        b3IgZXhhbXBsZSwgaWYgdGhlIG9yaWdpbmFsIHBheWxvYWQgbG9va3MgbGlr
        ZToKCiAgICBgYGBqcwogICAgewogICAgICAiaWQiOiAxLAogICAgICAidGl0
        bGUiOiAiUmFpbHMgaXMgb21ha2FzZSIsCiAgICAgICJjb21tZW50cyI6IFsg
        MSwgMiwgMyBdCiAgICB9CiAgICBgYGAKCiAgICBUaGUgSURzIHdpbGwgYmUg
        cGFzc2VkIGFzIGEgVVJMLWVuY29kZWQgQXJyYXkgb2YgSURzLCBpbiB0aGlz
        IGZvcm06CgogICAgYGBgCiAgICBpZHNbXT0xJmlkc1tdPTImaWRzW109Mwog
        ICAgYGBgCgogICAgTWFueSBzZXJ2ZXJzLCBzdWNoIGFzIFJhaWxzIGFuZCBQ
        SFAsIHdpbGwgYXV0b21hdGljYWxseSBjb252ZXJ0IHRoaXMgVVJMLWVuY29k
        ZWQgYXJyYXkKICAgIGludG8gYW4gQXJyYXkgZm9yIHlvdSBvbiB0aGUgc2Vy
        dmVyLXNpZGUuIElmIHlvdSB3YW50IHRvIGVuY29kZSB0aGUKICAgIElEcywg
        ZGlmZmVyZW50bHksIGp1c3Qgb3ZlcnJpZGUgdGhpcyAob25lLWxpbmUpIG1l
        dGhvZC4KCiAgICBUaGUgYGZpbmRNYW55YCBtZXRob2QgbWFrZXMgYW4gQWph
        eCAoSFRUUCBHRVQpIHJlcXVlc3QgdG8gYSBVUkwgY29tcHV0ZWQgYnkgYGJ1
        aWxkVVJMYCwgYW5kIHJldHVybnMgYQogICAgcHJvbWlzZSBmb3IgdGhlIHJl
        c3VsdGluZyBwYXlsb2FkLgoKICAgIEBtZXRob2QgZmluZE1hbnkKICAgIEBz
        ZWUgUkVTVEFkYXB0ZXIvYnVpbGRVUkwKICAgIEBzZWUgUkVTVEFkYXB0ZXIv
        YWpheAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7QXJyYXk8
        U3RyaW5nPn0gaWRzCiAgICBAcmV0dXJucyBQcm9taXNlCiAgKi8KICBmaW5k
        TWFueTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIGlkcywgb3duZXIpIHsKICAg
        IHJldHVybiB0aGlzLmFqYXgodGhpcy5idWlsZFVSTCh0eXBlLnR5cGVLZXkp
        LCAnR0VUJywgeyBkYXRhOiB7IGlkczogaWRzIH0gfSk7CiAgfSwKCiAgLyoq
        CiAgICBDYWxsZWQgYnkgdGhlIHN0b3JlIGluIG9yZGVyIHRvIGZldGNoIGEg
        SlNPTiBhcnJheSBmb3IKICAgIHRoZSB1bmxvYWRlZCByZWNvcmRzIGluIGEg
        aGFzLW1hbnkgcmVsYXRpb25zaGlwIHRoYXQgd2VyZSBvcmlnaW5hbGx5CiAg
        ICBzcGVjaWZpZWQgYXMgYSBVUkwgKGluc2lkZSBvZiBgbGlua3NgKS4KCiAg
        ICBGb3IgZXhhbXBsZSwgaWYgeW91ciBvcmlnaW5hbCBwYXlsb2FkIGxvb2tz
        IGxpa2UgdGhpczoKCiAgICBgYGBqcwogICAgewogICAgICAicG9zdCI6IHsK
        ICAgICAgICAiaWQiOiAxLAogICAgICAgICJ0aXRsZSI6ICJSYWlscyBpcyBv
        bWFrYXNlIiwKICAgICAgICAibGlua3MiOiB7ICJjb21tZW50cyI6ICIvcG9z
        dHMvMS9jb21tZW50cyIgfQogICAgICB9CiAgICB9CiAgICBgYGAKCiAgICBU
        aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBwYXJlbnQgcmVj
        b3JkIGFuZCBgL3Bvc3RzLzEvY29tbWVudHNgLgoKICAgIFRoZSBgZmluZEhh
        c01hbnlgIG1ldGhvZCB3aWxsIG1ha2UgYW4gQWpheCAoSFRUUCBHRVQpIHJl
        cXVlc3QgdG8gdGhlIG9yaWdpbmFsbHkgc3BlY2lmaWVkIFVSTC4KICAgIElm
        IHRoZSBVUkwgaXMgaG9zdC1yZWxhdGl2ZSAoc3RhcnRpbmcgd2l0aCBhIHNp
        bmdsZSBzbGFzaCksIHRoZQogICAgcmVxdWVzdCB3aWxsIHVzZSB0aGUgaG9z
        dCBzcGVjaWZpZWQgb24gdGhlIGFkYXB0ZXIgKGlmIGFueSkuCgogICAgQG1l
        dGhvZCBmaW5kSGFzTWFueQogICAgQHNlZSBSRVNUQWRhcHRlci9idWlsZFVS
        TAogICAgQHNlZSBSRVNUQWRhcHRlci9hamF4CiAgICBAcGFyYW0ge0RTLlN0
        b3JlfSBzdG9yZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cGFyYW0ge1N0cmluZ30gdXJsCiAgICBAcmV0dXJucyBQcm9taXNlCiAgKi8K
        ICBmaW5kSGFzTWFueTogZnVuY3Rpb24oc3RvcmUsIHJlY29yZCwgdXJsKSB7
        CiAgICB2YXIgaG9zdCA9IGdldCh0aGlzLCAnaG9zdCcpLAogICAgICAgIGlk
        ICAgPSBnZXQocmVjb3JkLCAnaWQnKSwKICAgICAgICB0eXBlID0gcmVjb3Jk
        LmNvbnN0cnVjdG9yLnR5cGVLZXk7CgogICAgaWYgKGhvc3QgJiYgdXJsLmNo
        YXJBdCgwKSA9PT0gJy8nICYmIHVybC5jaGFyQXQoMSkgIT09ICcvJykgewog
        ICAgICB1cmwgPSBob3N0ICsgdXJsOwogICAgfQoKICAgIHJldHVybiB0aGlz
        LmFqYXgodGhpcy51cmxQcmVmaXgodXJsLCB0aGlzLmJ1aWxkVVJMKHR5cGUs
        IGlkKSksICdHRVQnKTsKICB9LAoKICAvKioKICAgIENhbGxlZCBieSB0aGUg
        c3RvcmUgaW4gb3JkZXIgdG8gZmV0Y2ggYSBKU09OIGFycmF5IGZvcgogICAg
        dGhlIHVubG9hZGVkIHJlY29yZHMgaW4gYSBiZWxvbmdzLXRvIHJlbGF0aW9u
        c2hpcCB0aGF0IHdlcmUgb3JpZ2luYWxseQogICAgc3BlY2lmaWVkIGFzIGEg
        VVJMIChpbnNpZGUgb2YgYGxpbmtzYCkuCgogICAgRm9yIGV4YW1wbGUsIGlm
        IHlvdXIgb3JpZ2luYWwgcGF5bG9hZCBsb29rcyBsaWtlIHRoaXM6CgogICAg
        YGBganMKICAgIHsKICAgICAgInBlcnNvbiI6IHsKICAgICAgICAiaWQiOiAx
        LAogICAgICAgICJuYW1lIjogIlRvbSBEYWxlIiwKICAgICAgICAibGlua3Mi
        OiB7ICJncm91cCI6ICIvcGVvcGxlLzEvZ3JvdXAiIH0KICAgICAgfQogICAg
        fQogICAgYGBgCgogICAgVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgd2l0
        aCB0aGUgcGFyZW50IHJlY29yZCBhbmQgYC9wZW9wbGUvMS9ncm91cGAuCgog
        ICAgVGhlIGBmaW5kQmVsb25nc1RvYCBtZXRob2Qgd2lsbCBtYWtlIGFuIEFq
        YXggKEhUVFAgR0VUKSByZXF1ZXN0IHRvIHRoZSBvcmlnaW5hbGx5IHNwZWNp
        ZmllZCBVUkwuCgogICAgQG1ldGhvZCBmaW5kQmVsb25nc1RvCiAgICBAc2Vl
        IFJFU1RBZGFwdGVyL2J1aWxkVVJMCiAgICBAc2VlIFJFU1RBZGFwdGVyL2Fq
        YXgKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0ge0RT
        Lk1vZGVsfSByZWNvcmQKICAgIEBwYXJhbSB7U3RyaW5nfSB1cmwKICAgIEBy
        ZXR1cm5zIFByb21pc2UKICAqLwogIGZpbmRCZWxvbmdzVG86IGZ1bmN0aW9u
        KHN0b3JlLCByZWNvcmQsIHVybCkgewogICAgdmFyIGlkICAgPSBnZXQocmVj
        b3JkLCAnaWQnKSwKICAgICAgICB0eXBlID0gcmVjb3JkLmNvbnN0cnVjdG9y
        LnR5cGVLZXk7CgogICAgcmV0dXJuIHRoaXMuYWpheCh0aGlzLnVybFByZWZp
        eCh1cmwsIHRoaXMuYnVpbGRVUkwodHlwZSwgaWQpKSwgJ0dFVCcpOwogIH0s
        CgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSB3aGVuIGEgbmV3bHkg
        Y3JlYXRlZCByZWNvcmQgaXMKICAgIHNhdmVkIHZpYSB0aGUgYHNhdmVgIG1l
        dGhvZCBvbiBhIG1vZGVsIHJlY29yZCBpbnN0YW5jZS4KCiAgICBUaGUgYGNy
        ZWF0ZVJlY29yZGAgbWV0aG9kIHNlcmlhbGl6ZXMgdGhlIHJlY29yZCBhbmQg
        bWFrZXMgYW4gQWpheCAoSFRUUCBQT1NUKSByZXF1ZXN0IAogICAgdG8gYSBV
        UkwgY29tcHV0ZWQgYnkgYGJ1aWxkVVJMYC4KCiAgICBTZWUgYHNlcmlhbGl6
        ZWAgZm9yIGluZm9ybWF0aW9uIG9uIGhvdyB0byBjdXN0b21pemUgdGhlIHNl
        cmlhbGl6ZWQgZm9ybQogICAgb2YgYSByZWNvcmQuCgogICAgQG1ldGhvZCBj
        cmVhdGVSZWNvcmQKICAgIEBzZWUgUkVTVEFkYXB0ZXIvYnVpbGRVUkwKICAg
        IEBzZWUgUkVTVEFkYXB0ZXIvYWpheAogICAgQHNlZSBSRVNUQWRhcHRlci9z
        ZXJpYWxpemUKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFy
        YW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge0RT
        Lk1vZGVsfSByZWNvcmQKICAgIEByZXR1cm5zIFByb21pc2UKICAqLwogIGNy
        ZWF0ZVJlY29yZDogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHJlY29yZCkgewog
        ICAgdmFyIGRhdGEgPSB7fTsKICAgIHZhciBzZXJpYWxpemVyID0gc3RvcmUu
        c2VyaWFsaXplckZvcih0eXBlLnR5cGVLZXkpOwoKICAgIHNlcmlhbGl6ZXIu
        c2VyaWFsaXplSW50b0hhc2goZGF0YSwgdHlwZSwgcmVjb3JkLCB7IGluY2x1
        ZGVJZDogdHJ1ZSB9KTsKCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVp
        bGRVUkwodHlwZS50eXBlS2V5KSwgIlBPU1QiLCB7IGRhdGE6IGRhdGEgfSk7
        CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgYnkgdGhlIHN0b3JlIHdoZW4gYW4g
        ZXhpc3RpbmcgcmVjb3JkIGlzIHNhdmVkIAogICAgdmlhIHRoZSBgc2F2ZWAg
        bWV0aG9kIG9uIGEgbW9kZWwgcmVjb3JkIGluc3RhbmNlLgogICAgCiAgICBU
        aGUgYHVwZGF0ZVJlY29yZGAgbWV0aG9kIHNlcmlhbGl6ZXMgdGhlIHJlY29y
        ZCBhbmQgbWFrZXMgYW4gQWpheCAoSFRUUCBQVVQpIHJlcXVlc3QgCiAgICB0
        byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLgoKICAgIFNlZSBgc2Vy
        aWFsaXplYCBmb3IgaW5mb3JtYXRpb24gb24gaG93IHRvIGN1c3RvbWl6ZSB0
        aGUgc2VyaWFsaXplZCBmb3JtCiAgICBvZiBhIHJlY29yZC4KCiAgICBAbWV0
        aG9kIHVwZGF0ZVJlY29yZAogICAgQHNlZSBSRVNUQWRhcHRlci9idWlsZFVS
        TAogICAgQHNlZSBSRVNUQWRhcHRlci9hamF4CiAgICBAc2VlIFJFU1RBZGFw
        dGVyL3NlcmlhbGl6ZQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHJldHVybnMgUHJvbWlzZQogICov
        CiAgdXBkYXRlUmVjb3JkOiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcmVjb3Jk
        KSB7CiAgICB2YXIgZGF0YSA9IHt9OwogICAgdmFyIHNlcmlhbGl6ZXIgPSBz
        dG9yZS5zZXJpYWxpemVyRm9yKHR5cGUudHlwZUtleSk7CgogICAgc2VyaWFs
        aXplci5zZXJpYWxpemVJbnRvSGFzaChkYXRhLCB0eXBlLCByZWNvcmQpOwoK
        ICAgIHZhciBpZCA9IGdldChyZWNvcmQsICdpZCcpOwoKICAgIHJldHVybiB0
        aGlzLmFqYXgodGhpcy5idWlsZFVSTCh0eXBlLnR5cGVLZXksIGlkKSwgIlBV
        VCIsIHsgZGF0YTogZGF0YSB9KTsKICB9LAoKICAvKioKICAgIENhbGxlZCBi
        eSB0aGUgc3RvcmUgd2hlbiBhIHJlY29yZCBpcyBkZWxldGVkLgoKICAgIFRo
        ZSBgZGVsZXRlUmVjb3JkYCBtZXRob2QgIG1ha2VzIGFuIEFqYXggKEhUVFAg
        REVMRVRFKSByZXF1ZXN0IHRvIGEgVVJMIGNvbXB1dGVkIGJ5IGBidWlsZFVS
        TGAuCgogICAgQG1ldGhvZCBkZWxldGVSZWNvcmQKICAgIEBzZWUgUkVTVEFk
        YXB0ZXIvYnVpbGRVUkwKICAgIEBzZWUgUkVTVEFkYXB0ZXIvYWpheAogICAg
        QHNlZSBSRVNUQWRhcHRlci9zZXJpYWxpemUKICAgIEBwYXJhbSB7RFMuU3Rv
        cmV9IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0
        eXBlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAgIEByZXR1cm5z
        IFByb21pc2UKICAqLwogIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24oc3RvcmUs
        IHR5cGUsIHJlY29yZCkgewogICAgdmFyIGlkID0gZ2V0KHJlY29yZCwgJ2lk
        Jyk7CgogICAgcmV0dXJuIHRoaXMuYWpheCh0aGlzLmJ1aWxkVVJMKHR5cGUu
        dHlwZUtleSwgaWQpLCAiREVMRVRFIik7CiAgfSwKCiAgLyoqCiAgICBCdWls
        ZHMgYSBVUkwgZm9yIGEgZ2l2ZW4gdHlwZSBhbmQgb3B0aW9uYWwgSUQuCgog
        ICAgQnkgZGVmYXVsdCwgaXQgcGx1cmFsaXplcyB0aGUgdHlwZSdzIG5hbWUg
        KGZvciBleGFtcGxlLAogICAgJ3Bvc3QnIGJlY29tZXMgJ3Bvc3RzJyBhbmQg
        J3BlcnNvbicgYmVjb21lcyAncGVvcGxlJykuCgogICAgSWYgYW4gSUQgaXMg
        c3BlY2lmaWVkLCBpdCBhZGRzIHRoZSBJRCB0byB0aGUgcGF0aCBnZW5lcmF0
        ZWQKICAgIGZvciB0aGUgdHlwZSwgc2VwYXJhdGVkIGJ5IGEgYC9gLgoKICAg
        IEBtZXRob2QgYnVpbGRVUkwKICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAg
        ICBAcGFyYW0ge1N0cmluZ30gaWQKICAgIEByZXR1cm5zIFN0cmluZwogICov
        CiAgYnVpbGRVUkw6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAgICB2YXIgdXJs
        ID0gW10sCiAgICAgICAgaG9zdCA9IGdldCh0aGlzLCAnaG9zdCcpLAogICAg
        ICAgIHByZWZpeCA9IHRoaXMudXJsUHJlZml4KCk7CgogICAgaWYgKHR5cGUp
        IHsgdXJsLnB1c2godGhpcy5wYXRoRm9yVHlwZSh0eXBlKSk7IH0KICAgIGlm
        IChpZCkgeyB1cmwucHVzaChpZCk7IH0KCiAgICBpZiAocHJlZml4KSB7IHVy
        bC51bnNoaWZ0KHByZWZpeCk7IH0KCiAgICB1cmwgPSB1cmwuam9pbignLycp
        OwogICAgaWYgKCFob3N0ICYmIHVybCkgeyB1cmwgPSAnLycgKyB1cmw7IH0K
        CiAgICByZXR1cm4gdXJsOwogIH0sCgogIHVybFByZWZpeDogZnVuY3Rpb24o
        cGF0aCwgcGFyZW50VVJMKSB7CiAgICB2YXIgaG9zdCA9IGdldCh0aGlzLCAn
        aG9zdCcpLAogICAgICAgIG5hbWVzcGFjZSA9IGdldCh0aGlzLCAnbmFtZXNw
        YWNlJyksCiAgICAgICAgdXJsID0gW107CgogICAgaWYgKHBhdGgpIHsKICAg
        ICAgLy8gQWJzb2x1dGUgcGF0aAogICAgICBpZiAocGF0aC5jaGFyQXQoMCkg
        PT09ICcvJykgewogICAgICAgIGlmIChob3N0KSB7CiAgICAgICAgICBwYXRo
        ID0gcGF0aC5zbGljZSgxKTsKICAgICAgICAgIHVybC5wdXNoKGhvc3QpOwog
        ICAgICAgIH0KICAgICAgLy8gUmVsYXRpdmUgcGF0aAogICAgICB9IGVsc2Ug
        aWYgKCEvXmh0dHAocyk/OlwvXC8vLnRlc3QocGF0aCkpIHsKICAgICAgICB1
        cmwucHVzaChwYXJlbnRVUkwpOwogICAgICB9CiAgICB9IGVsc2UgewogICAg
        ICBpZiAoaG9zdCkgeyB1cmwucHVzaChob3N0KTsgfQogICAgICBpZiAobmFt
        ZXNwYWNlKSB7IHVybC5wdXNoKG5hbWVzcGFjZSk7IH0KICAgIH0KCiAgICBp
        ZiAocGF0aCkgewogICAgICB1cmwucHVzaChwYXRoKTsKICAgIH0KCiAgICBy
        ZXR1cm4gdXJsLmpvaW4oJy8nKTsKICB9LAoKICAvKioKICAgIERldGVybWlu
        ZXMgdGhlIHBhdGhuYW1lIGZvciBhIGdpdmVuIHR5cGUuCgogICAgQnkgZGVm
        YXVsdCwgaXQgcGx1cmFsaXplcyB0aGUgdHlwZSdzIG5hbWUgKGZvciBleGFt
        cGxlLAogICAgJ3Bvc3QnIGJlY29tZXMgJ3Bvc3RzJyBhbmQgJ3BlcnNvbicg
        YmVjb21lcyAncGVvcGxlJykuCgogICAgIyMjIFBhdGhuYW1lIGN1c3RvbWl6
        YXRpb24KCiAgICBGb3IgZXhhbXBsZSBpZiB5b3UgaGF2ZSBhbiBvYmplY3Qg
        TGluZUl0ZW0gd2l0aCBhbgogICAgZW5kcG9pbnQgb2YgIi9saW5lX2l0ZW1z
        LyIuCgogICAgYGBganMKICAgIERTLlJFU1RBZGFwdGVyLnJlb3Blbih7CiAg
        ICAgIHBhdGhGb3JUeXBlOiBmdW5jdGlvbih0eXBlKSB7CiAgICAgICAgdmFy
        IGRlY2FtZWxpemVkID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxpemUodHlwZSk7
        CiAgICAgICAgcmV0dXJuIEVtYmVyLlN0cmluZy5wbHVyYWxpemUoZGVjYW1l
        bGl6ZWQpOwogICAgICB9OwogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IHBhdGhGb3JUeXBlCiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHJl
        dHVybnMgU3RyaW5nCiAgKiovCiAgcGF0aEZvclR5cGU6IGZ1bmN0aW9uKHR5
        cGUpIHsKICAgIHJldHVybiBFbWJlci5TdHJpbmcucGx1cmFsaXplKHR5cGUp
        OwogIH0sCgogIC8qKgogICAgVGFrZXMgYW4gYWpheCByZXNwb25zZSwgYW5k
        IHJldHVybnMgYSByZWxhdmFudCBlcnJvci4KCiAgICBCeSBkZWZhdWx0LCB0
        aGUgYGFqYXhFcnJvcmAgbWV0aG9kIGhhcyB0aGUgZm9sbG93aW5nIGJlaGF2
        aW9yOgoKICAgICogSXQgc2ltcGx5IHJldHVybnMgdGhlIGFqYXggcmVzcG9u
        c2UgKGpxWEhSKS4KCiAgICBAbWV0aG9kIGFqYXhFcnJvcgogICAgQHBhcmFt
        ICBqcVhIUgogICovCiAgYWpheEVycm9yOiBmdW5jdGlvbihqcVhIUikgewog
        ICAgaWYgKGpxWEhSKSB7CiAgICAgIGpxWEhSLnRoZW4gPSBudWxsOwogICAg
        fQoKICAgIHJldHVybiBqcVhIUjsKICB9LAoKICAvKioKICAgIFRha2VzIGEg
        VVJMLCBhbiBIVFRQIG1ldGhvZCBhbmQgYSBoYXNoIG9mIGRhdGEsIGFuZCBt
        YWtlcyBhbgogICAgSFRUUCByZXF1ZXN0LgoKICAgIFdoZW4gdGhlIHNlcnZl
        ciByZXNwb25kcyB3aXRoIGEgcGF5bG9hZCwgRW1iZXIgRGF0YSB3aWxsIGNh
        bGwgaW50byBgZXh0cmFjdFNpbmdsZWAKICAgIG9yIGBleHRyYWN0QXJyYXlg
        IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgb3JpZ2luYWwgcXVlcnkgd2Fz
        IGZvciBvbmUgcmVjb3JkIG9yCiAgICBtYW55IHJlY29yZHMpLgoKICAgIEJ5
        IGRlZmF1bHQsIGBhamF4YCBtZXRob2QgaGFzIHRoZSBmb2xsb3dpbmcgYmVo
        YXZpb3I6CgogICAgKiBJdCBzZXRzIHRoZSByZXNwb25zZSBgZGF0YVR5cGVg
        IHRvIGAianNvbiJgCiAgICAqIElmIHRoZSBIVFRQIG1ldGhvZCBpcyBub3Qg
        YCJHRVQiYCwgaXQgc2V0cyB0aGUgYENvbnRlbnQtVHlwZWAgdG8gYmUKICAg
        ICAgYGFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThgCiAgICAqIElm
        IHRoZSBIVFRQIG1ldGhvZCBpcyBub3QgYCJHRVQiYCwgaXQgc3RyaW5naWZp
        ZXMgdGhlIGRhdGEgcGFzc2VkIGluLiBUaGUKICAgICAgZGF0YSBpcyB0aGUg
        c2VyaWFsaXplZCByZWNvcmQgaW4gdGhlIGNhc2Ugb2YgYSBzYXZlLgogICAg
        KiBSZWdpc3RlcnMgc3VjY2VzcyBhbmQgZmFpbHVyZSBoYW5kbGVycy4KCiAg
        ICBAbWV0aG9kIGFqYXgKICAgIEBwcml2YXRlCiAgICBAcGFyYW0gIHVybAog
        ICAgQHBhcmFtICB0eXBlCiAgICBAcGFyYW0gIGhhc2gKICAqLwogIGFqYXg6
        IGZ1bmN0aW9uKHVybCwgdHlwZSwgaGFzaCkgewogICAgdmFyIGFkYXB0ZXIg
        PSB0aGlzOwoKICAgIHJldHVybiBuZXcgRW1iZXIuUlNWUC5Qcm9taXNlKGZ1
        bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICBoYXNoID0gYWRhcHRl
        ci5hamF4T3B0aW9ucyh1cmwsIHR5cGUsIGhhc2gpOwoKICAgICAgaGFzaC5z
        dWNjZXNzID0gZnVuY3Rpb24oanNvbikgewogICAgICAgIEVtYmVyLnJ1bihu
        dWxsLCByZXNvbHZlLCBqc29uKTsKICAgICAgfTsKCiAgICAgIGhhc2guZXJy
        b3IgPSBmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24p
        IHsKICAgICAgICBFbWJlci5ydW4obnVsbCwgcmVqZWN0LCBhZGFwdGVyLmFq
        YXhFcnJvcihqcVhIUikpOwogICAgICB9OwoKICAgICAgRW1iZXIuJC5hamF4
        KGhhc2gpOwogICAgfSk7CiAgfSwKCiAgYWpheE9wdGlvbnM6IGZ1bmN0aW9u
        KHVybCwgdHlwZSwgaGFzaCkgewogICAgaGFzaCA9IGhhc2ggfHwge307CiAg
        ICBoYXNoLnVybCA9IHVybDsKICAgIGhhc2gudHlwZSA9IHR5cGU7CiAgICBo
        YXNoLmRhdGFUeXBlID0gJ2pzb24nOwogICAgaGFzaC5jb250ZXh0ID0gdGhp
        czsKCiAgICBpZiAoaGFzaC5kYXRhICYmIHR5cGUgIT09ICdHRVQnKSB7CiAg
        ICAgIGhhc2guY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbjsgY2hh
        cnNldD11dGYtOCc7CiAgICAgIGhhc2guZGF0YSA9IEpTT04uc3RyaW5naWZ5
        KGhhc2guZGF0YSk7CiAgICB9CgogICAgaWYgKHRoaXMuaGVhZGVycyAhPT0g
        dW5kZWZpbmVkKSB7CiAgICAgIHZhciBoZWFkZXJzID0gdGhpcy5oZWFkZXJz
        OwogICAgICBoYXNoLmJlZm9yZVNlbmQgPSBmdW5jdGlvbiAoeGhyKSB7CiAg
        ICAgICAgZm9yRWFjaC5jYWxsKEVtYmVyLmtleXMoaGVhZGVycyksIGZ1bmN0
        aW9uKGtleSkgewogICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5
        LCBoZWFkZXJzW2tleV0pOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQoK
        CiAgICByZXR1cm4gaGFzaDsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7CkRTLk1vZGVsLnJlb3Blbih7CgogIC8qKgogICAgUHJv
        dmlkZXMgaW5mbyBhYm91dCB0aGUgbW9kZWwgZm9yIGRlYnVnZ2luZyBwdXJw
        b3NlcwogICAgYnkgZ3JvdXBpbmcgdGhlIHByb3BlcnRpZXMgaW50byBtb3Jl
        IHNlbWFudGljIGdyb3Vwcy4KCiAgICBNZWFudCB0byBiZSB1c2VkIGJ5IGRl
        YnVnZ2luZyB0b29scyBzdWNoIGFzIHRoZSBDaHJvbWUgRW1iZXIgRXh0ZW5z
        aW9uLgoKICAgIC0gR3JvdXBzIGFsbCBhdHRyaWJ1dGVzIGluICJBdHRyaWJ1
        dGVzIiBncm91cC4KICAgIC0gR3JvdXBzIGFsbCBiZWxvbmdzVG8gcmVsYXRp
        b25zaGlwcyBpbiAiQmVsb25ncyBUbyIgZ3JvdXAuCiAgICAtIEdyb3VwcyBh
        bGwgaGFzTWFueSByZWxhdGlvbnNoaXBzIGluICJIYXMgTWFueSIgZ3JvdXAu
        CiAgICAtIEdyb3VwcyBhbGwgZmxhZ3MgaW4gIkZsYWdzIiBncm91cC4KICAg
        IC0gRmxhZ3MgcmVsYXRpb25zaGlwIENQcyBhcyBleHBlbnNpdmUgcHJvcGVy
        dGllcy4KCiAgICBAbWV0aG9kIF9kZWJ1Z0luZm8KICAgIEBmb3IgRFMuTW9k
        ZWwKICAgIEBwcml2YXRlCiAgKi8KICBfZGVidWdJbmZvOiBmdW5jdGlvbigp
        IHsKICAgIHZhciBhdHRyaWJ1dGVzID0gWydpZCddLAogICAgICAgIHJlbGF0
        aW9uc2hpcHMgPSB7IGJlbG9uZ3NUbzogW10sIGhhc01hbnk6IFtdIH0sCiAg
        ICAgICAgZXhwZW5zaXZlUHJvcGVydGllcyA9IFtdOwoKICAgIHRoaXMuZWFj
        aEF0dHJpYnV0ZShmdW5jdGlvbihuYW1lLCBtZXRhKSB7CiAgICAgIGF0dHJp
        YnV0ZXMucHVzaChuYW1lKTsKICAgIH0sIHRoaXMpOwoKICAgIHRoaXMuZWFj
        aFJlbGF0aW9uc2hpcChmdW5jdGlvbihuYW1lLCByZWxhdGlvbnNoaXApIHsK
        ICAgICAgcmVsYXRpb25zaGlwc1tyZWxhdGlvbnNoaXAua2luZF0ucHVzaChu
        YW1lKTsKICAgICAgZXhwZW5zaXZlUHJvcGVydGllcy5wdXNoKG5hbWUpOwog
        ICAgfSk7CgogICAgdmFyIGdyb3VwcyA9IFsKICAgICAgewogICAgICAgIG5h
        bWU6ICdBdHRyaWJ1dGVzJywKICAgICAgICBwcm9wZXJ0aWVzOiBhdHRyaWJ1
        dGVzLAogICAgICAgIGV4cGFuZDogdHJ1ZQogICAgICB9LAogICAgICB7CiAg
        ICAgICAgbmFtZTogJ0JlbG9uZ3MgVG8nLAogICAgICAgIHByb3BlcnRpZXM6
        IHJlbGF0aW9uc2hpcHMuYmVsb25nc1RvLAogICAgICAgIGV4cGFuZDogdHJ1
        ZQogICAgICB9LAogICAgICB7CiAgICAgICAgbmFtZTogJ0hhcyBNYW55JywK
        ICAgICAgICBwcm9wZXJ0aWVzOiByZWxhdGlvbnNoaXBzLmhhc01hbnksCiAg
        ICAgICAgZXhwYW5kOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBu
        YW1lOiAnRmxhZ3MnLAogICAgICAgIHByb3BlcnRpZXM6IFsnaXNMb2FkZWQn
        LCAnaXNEaXJ0eScsICdpc1NhdmluZycsICdpc0RlbGV0ZWQnLCAnaXNFcnJv
        cicsICdpc05ldycsICdpc1ZhbGlkJ10KICAgICAgfQogICAgXTsKCiAgICBy
        ZXR1cm4gewogICAgICBwcm9wZXJ0eUluZm86IHsKICAgICAgICAvLyBpbmNs
        dWRlIGFsbCBvdGhlciBtaXhpbnMgLyBwcm9wZXJ0aWVzIChub3QganVzdCB0
        aGUgZ3JvdXBlZCBvbmVzKQogICAgICAgIGluY2x1ZGVPdGhlclByb3BlcnRp
        ZXM6IHRydWUsCiAgICAgICAgZ3JvdXBzOiBncm91cHMsCiAgICAgICAgLy8g
        ZG9uJ3QgcHJlLWNhbGN1bGF0ZSB1bmxlc3MgY2FjaGVkCiAgICAgICAgZXhw
        ZW5zaXZlUHJvcGVydGllczogZXhwZW5zaXZlUHJvcGVydGllcwogICAgICB9
        CiAgICB9OwogIH0KCn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        ICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLyoqCiAgRW1iZXIgRGF0YQoKICBAbW9kdWxlIGVtYmVyLWRhdGEKICBA
        bWFpbiBlbWJlci1kYXRhCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewpFbWJl
        ci5TdHJpbmcucGx1cmFsaXplID0gZnVuY3Rpb24od29yZCkgewogIHJldHVy
        biBFbWJlci5JbmZsZWN0b3IuaW5mbGVjdG9yLnBsdXJhbGl6ZSh3b3JkKTsK
        fTsKCkVtYmVyLlN0cmluZy5zaW5ndWxhcml6ZSA9IGZ1bmN0aW9uKHdvcmQp
        IHsKICByZXR1cm4gRW1iZXIuSW5mbGVjdG9yLmluZmxlY3Rvci5zaW5ndWxh
        cml6ZSh3b3JkKTsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIEJM
        QU5LX1JFR0VYID0gL15ccyokLzsKCmZ1bmN0aW9uIGxvYWRVbmNvdW50YWJs
        ZShydWxlcywgdW5jb3VudGFibGUpIHsKICBmb3IgKHZhciBpID0gMCwgbGVu
        Z3RoID0gdW5jb3VudGFibGUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsK
        ICAgIHJ1bGVzLnVuY291bnRhYmxlW3VuY291bnRhYmxlW2ldXSA9IHRydWU7
        CiAgfQp9CgpmdW5jdGlvbiBsb2FkSXJyZWd1bGFyKHJ1bGVzLCBpcnJlZ3Vs
        YXJQYWlycykgewogIHZhciBwYWlyOwoKICBmb3IgKHZhciBpID0gMCwgbGVu
        Z3RoID0gaXJyZWd1bGFyUGFpcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKysp
        IHsKICAgIHBhaXIgPSBpcnJlZ3VsYXJQYWlyc1tpXTsKCiAgICBydWxlcy5p
        cnJlZ3VsYXJbcGFpclswXV0gPSBwYWlyWzFdOwogICAgcnVsZXMuaXJyZWd1
        bGFySW52ZXJzZVtwYWlyWzFdXSA9IHBhaXJbMF07CiAgfQp9CgovKioKICBJ
        bmZsZWN0b3IuRW1iZXIgcHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIHN1cHBs
        eWluZyBpbmZsZWN0aW9uIHJ1bGVzIGZvciB5b3VyCiAgYXBwbGljYXRpb24u
        IEVtYmVyIGluY2x1ZGVzIGEgZGVmYXVsdCBzZXQgb2YgaW5mbGVjdGlvbiBy
        dWxlcywgYW5kIHByb3ZpZGVzIGFuCiAgQVBJIGZvciBwcm92aWRpbmcgYWRk
        aXRpb25hbCBydWxlcy4KCiAgRXhhbXBsZXM6CgogIENyZWF0aW5nIGFuIGlu
        ZmxlY3RvciB3aXRoIG5vIHJ1bGVzLgoKICBgYGBqcwogIHZhciBpbmZsZWN0
        b3IgPSBuZXcgRW1iZXIuSW5mbGVjdG9yKCk7CiAgYGBgCgogIENyZWF0aW5n
        IGFuIGluZmxlY3RvciB3aXRoIHRoZSBkZWZhdWx0IGVtYmVyIHJ1bGVzZXQu
        CgogIGBgYGpzCiAgdmFyIGluZmxlY3RvciA9IG5ldyBFbWJlci5JbmZsZWN0
        b3IoRW1iZXIuSW5mbGVjdG9yLmRlZmF1bHRSdWxlcyk7CgogIGluZmxlY3Rv
        ci5wbHVyYWxpemUoJ2NvdycpIC8vPT4gJ2tpbmUnCiAgaW5mbGVjdG9yLnNp
        bmd1bGFyaXplKCdraW5lJykgLy89PiAnY293JwogIGBgYAoKICBDcmVhdGlu
        ZyBhbiBpbmZsZWN0b3IgYW5kIGFkZGluZyBydWxlcyBsYXRlci4KCiAgYGBg
        amF2YXNjcmlwdAogIHZhciBpbmZsZWN0b3IgPSBFbWJlci5JbmZsZWN0b3Iu
        aW5mbGVjdG9yOwoKICBpbmZsZWN0b3IucGx1cmFsaXplKCdhZHZpY2UnKSAv
        LyA9PiAnYWR2aWNlcycKICBpbmZsZWN0b3IudW5jb3VudGFibGUoJ2Fkdmlj
        ZScpOwogIGluZmxlY3Rvci5wbHVyYWxpemUoJ2FkdmljZScpIC8vID0+ICdh
        ZHZpY2UnCgogIGluZmxlY3Rvci5wbHVyYWxpemUoJ2Zvcm11bGEnKSAvLyA9
        PiAnZm9ybXVsYXMnCiAgaW5mbGVjdG9yLmlycmVndWxhcignZm9ybXVsYScs
        ICdmb3JtdWxhZScpOwogIGluZmxlY3Rvci5wbHVyYWxpemUoJ2Zvcm11bGEn
        KSAvLyA9PiAnZm9ybXVsYWUnCgogIC8vIHlvdSB3b3VsZCBub3QgbmVlZCB0
        byBhZGQgdGhlc2UgYXMgdGhleSBhcmUgdGhlIGRlZmF1bHQgcnVsZXMKICBp
        bmZsZWN0b3IucGx1cmFsKC8kLywgJ3MnKTsKICBpbmZsZWN0b3Iuc2luZ3Vs
        YXIoL3MkL2ksICcnKTsKICBgYGAKCiAgQ3JlYXRpbmcgYW4gaW5mbGVjdG9y
        IHdpdGggYSBub25kZWZhdWx0IHJ1bGVzZXQuCgogIGBgYGphdmFzY3JpcHQK
        ICB2YXIgcnVsZXMgPSB7CiAgICBwbHVyYWxzOiAgWyAvJC8sICdzJyBdLAog
        ICAgc2luZ3VsYXI6IFsgL1xzJC8sICcnIF0sCiAgICBpcnJlZ3VsYXJQYWly
        czogWwogICAgICBbICdjb3cnLCAna2luZScgXQogICAgXSwKICAgIHVuY291
        bnRhYmxlOiBbICdmaXNoJyBdCiAgfTsKCiAgdmFyIGluZmxlY3RvciA9IG5l
        dyBFbWJlci5JbmZsZWN0b3IocnVsZXMpOwogIGBgYAoKICBAY2xhc3MgSW5m
        bGVjdG9yCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpmdW5jdGlvbiBJbmZsZWN0
        b3IocnVsZVNldCkgewogIHJ1bGVTZXQgPSBydWxlU2V0IHx8IHt9OwogIHJ1
        bGVTZXQudW5jb3VudGFibGUgPSBydWxlU2V0LnVuY291bnRhYmxlIHx8IHt9
        OwogIHJ1bGVTZXQuaXJyZWd1bGFyUGFpcnM9IHJ1bGVTZXQuaXJyZWd1bGFy
        UGFpcnN8fCB7fTsKCiAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlcyA9IHsKICAg
        IHBsdXJhbHM6ICBydWxlU2V0LnBsdXJhbHMgfHwgW10sCiAgICBzaW5ndWxh
        cjogcnVsZVNldC5zaW5ndWxhciB8fCBbXSwKICAgIGlycmVndWxhcjoge30s
        CiAgICBpcnJlZ3VsYXJJbnZlcnNlOiB7fSwKICAgIHVuY291bnRhYmxlOiB7
        fQogIH07CgogIGxvYWRVbmNvdW50YWJsZShydWxlcywgcnVsZVNldC51bmNv
        dW50YWJsZSk7CiAgbG9hZElycmVndWxhcihydWxlcywgcnVsZVNldC5pcnJl
        Z3VsYXJQYWlycyk7Cn0KCkluZmxlY3Rvci5wcm90b3R5cGUgPSB7CiAgLyoq
        CiAgICBAbWV0aG9kIHBsdXJhbAogICAgQHBhcmFtIHtSZWdFeHB9IHJlZ2V4
        CiAgICBAcGFyYW0ge1N0cmluZ30gc3RyaW5nCiAgKi8KICBwbHVyYWw6IGZ1
        bmN0aW9uKHJlZ2V4LCBzdHJpbmcpIHsKICAgIHRoaXMucnVsZXMucGx1cmFs
        cy5wdXNoKFtyZWdleCwgc3RyaW5nXSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0
        aG9kIHNpbmd1bGFyCiAgICBAcGFyYW0ge1JlZ0V4cH0gcmVnZXgKICAgIEBw
        YXJhbSB7U3RyaW5nfSBzdHJpbmcKICAqLwogIHNpbmd1bGFyOiBmdW5jdGlv
        bihyZWdleCwgc3RyaW5nKSB7CiAgICB0aGlzLnJ1bGVzLnNpbmd1bGFyLnB1
        c2goW3JlZ2V4LCBzdHJpbmddKTsKICB9LAoKICAvKioKICAgIEBtZXRob2Qg
        dW5jb3VudGFibGUKICAgIEBwYXJhbSB7U3RyaW5nfSByZWdleAogICovCiAg
        dW5jb3VudGFibGU6IGZ1bmN0aW9uKHN0cmluZykgewogICAgbG9hZFVuY291
        bnRhYmxlKHRoaXMucnVsZXMsIFtzdHJpbmddKTsKICB9LAoKICAvKioKICAg
        IEBtZXRob2QgaXJyZWd1bGFyCiAgICBAcGFyYW0ge1N0cmluZ30gc2luZ3Vs
        YXIKICAgIEBwYXJhbSB7U3RyaW5nfSBwbHVyYWwKICAqLwogIGlycmVndWxh
        cjogZnVuY3Rpb24gKHNpbmd1bGFyLCBwbHVyYWwpIHsKICAgIGxvYWRJcnJl
        Z3VsYXIodGhpcy5ydWxlcywgW1tzaW5ndWxhciwgcGx1cmFsXV0pOwogIH0s
        CgogIC8qKgogICAgQG1ldGhvZCBwbHVyYWxpemUKICAgIEBwYXJhbSB7U3Ry
        aW5nfSB3b3JkCiAgKi8KICBwbHVyYWxpemU6IGZ1bmN0aW9uKHdvcmQpIHsK
        ICAgIHJldHVybiB0aGlzLmluZmxlY3Qod29yZCwgdGhpcy5ydWxlcy5wbHVy
        YWxzLCB0aGlzLnJ1bGVzLmlycmVndWxhcik7CiAgfSwKCiAgLyoqCiAgICBA
        bWV0aG9kIHNpbmd1bGFyaXplCiAgICBAcGFyYW0ge1N0cmluZ30gd29yZAog
        ICovCiAgc2luZ3VsYXJpemU6IGZ1bmN0aW9uKHdvcmQpIHsKICAgIHJldHVy
        biB0aGlzLmluZmxlY3Qod29yZCwgdGhpcy5ydWxlcy5zaW5ndWxhciwgIHRo
        aXMucnVsZXMuaXJyZWd1bGFySW52ZXJzZSk7CiAgfSwKCiAgLyoqCiAgICBA
        cHJvdGVjdGVkCgogICAgQG1ldGhvZCBpbmZsZWN0CiAgICBAcGFyYW0ge1N0
        cmluZ30gd29yZAogICAgQHBhcmFtIHtPYmplY3R9IHR5cGVSdWxlcwogICAg
        QHBhcmFtIHtPYmplY3R9IGlycmVndWxhcgogICovCiAgaW5mbGVjdDogZnVu
        Y3Rpb24od29yZCwgdHlwZVJ1bGVzLCBpcnJlZ3VsYXIpIHsKICAgIHZhciBp
        bmZsZWN0aW9uLCBzdWJzdGl0dXRpb24sIHJlc3VsdCwgbG93ZXJjYXNlLCBp
        c0JsYW5rLAogICAgaXNVbmNvdW50YWJsZSwgaXNJcnJlZ3VsYXIsIGlzSXJy
        ZWd1bGFySW52ZXJzZSwgcnVsZTsKCiAgICBpc0JsYW5rID0gQkxBTktfUkVH
        RVgudGVzdCh3b3JkKTsKCiAgICBpZiAoaXNCbGFuaykgewogICAgICByZXR1
        cm4gd29yZDsKICAgIH0KCiAgICBsb3dlcmNhc2UgPSB3b3JkLnRvTG93ZXJD
        YXNlKCk7CgogICAgaXNVbmNvdW50YWJsZSA9IHRoaXMucnVsZXMudW5jb3Vu
        dGFibGVbbG93ZXJjYXNlXTsKCiAgICBpZiAoaXNVbmNvdW50YWJsZSkgewog
        ICAgICByZXR1cm4gd29yZDsKICAgIH0KCiAgICBpc0lycmVndWxhciA9IGly
        cmVndWxhciAmJiBpcnJlZ3VsYXJbbG93ZXJjYXNlXTsKCiAgICBpZiAoaXNJ
        cnJlZ3VsYXIpIHsKICAgICAgcmV0dXJuIGlzSXJyZWd1bGFyOwogICAgfQoK
        ICAgIGZvciAodmFyIGkgPSB0eXBlUnVsZXMubGVuZ3RoLCBtaW4gPSAwOyBp
        ID4gbWluOyBpLS0pIHsKICAgICAgIGluZmxlY3Rpb24gPSB0eXBlUnVsZXNb
        aS0xXTsKICAgICAgIHJ1bGUgPSBpbmZsZWN0aW9uWzBdOwoKICAgICAgaWYg
        KHJ1bGUudGVzdCh3b3JkKSkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAg
        ICB9CgogICAgaW5mbGVjdGlvbiA9IGluZmxlY3Rpb24gfHwgW107CgogICAg
        cnVsZSA9IGluZmxlY3Rpb25bMF07CiAgICBzdWJzdGl0dXRpb24gPSBpbmZs
        ZWN0aW9uWzFdOwoKICAgIHJlc3VsdCA9IHdvcmQucmVwbGFjZShydWxlLCBz
        dWJzdGl0dXRpb24pOwoKICAgIHJldHVybiByZXN1bHQ7CiAgfQp9OwoKRW1i
        ZXIuSW5mbGVjdG9yID0gSW5mbGVjdG9yOwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewpFbWJlci5JbmZsZWN0b3IuZGVmYXVsdFJ1bGVzID0gewogIHBsdXJh
        bHM6IFsKICAgIFsvJC8sICdzJ10sCiAgICBbL3MkL2ksICdzJ10sCiAgICBb
        L14oYXh8dGVzdClpcyQvaSwgJyQxZXMnXSwKICAgIFsvKG9jdG9wfHZpcil1
        cyQvaSwgJyQxaSddLAogICAgWy8ob2N0b3B8dmlyKWkkL2ksICckMWknXSwK
        ICAgIFsvKGFsaWFzfHN0YXR1cykkL2ksICckMWVzJ10sCiAgICBbLyhidSlz
        JC9pLCAnJDFzZXMnXSwKICAgIFsvKGJ1ZmZhbHx0b21hdClvJC9pLCAnJDFv
        ZXMnXSwKICAgIFsvKFt0aV0pdW0kL2ksICckMWEnXSwKICAgIFsvKFt0aV0p
        YSQvaSwgJyQxYSddLAogICAgWy9zaXMkL2ksICdzZXMnXSwKICAgIFsvKD86
        KFteZl0pZmV8KFtscl0pZikkL2ksICckMSQydmVzJ10sCiAgICBbLyhoaXZl
        KSQvaSwgJyQxcyddLAogICAgWy8oW15hZWlvdXldfHF1KXkkL2ksICckMWll
        cyddLAogICAgWy8oeHxjaHxzc3xzaCkkL2ksICckMWVzJ10sCiAgICBbLyht
        YXRyfHZlcnR8aW5kKSg/Oml4fGV4KSQvaSwgJyQxaWNlcyddLAogICAgWy9e
        KG18bClvdXNlJC9pLCAnJDFpY2UnXSwKICAgIFsvXihtfGwpaWNlJC9pLCAn
        JDFpY2UnXSwKICAgIFsvXihveCkkL2ksICckMWVuJ10sCiAgICBbL14ob3hl
        bikkL2ksICckMSddLAogICAgWy8ocXVpeikkL2ksICckMXplcyddCiAgXSwK
        CiAgc2luZ3VsYXI6IFsKICAgIFsvcyQvaSwgJyddLAogICAgWy8oc3MpJC9p
        LCAnJDEnXSwKICAgIFsvKG4pZXdzJC9pLCAnJDFld3MnXSwKICAgIFsvKFt0
        aV0pYSQvaSwgJyQxdW0nXSwKICAgIFsvKChhKW5hbHl8KGIpYXwoZClpYWdu
        b3wocClhcmVudGhlfChwKXJvZ25vfChzKXlub3B8KHQpaGUpKHNpc3xzZXMp
        JC9pLCAnJDFzaXMnXSwKICAgIFsvKF5hbmFseSkoc2lzfHNlcykkL2ksICck
        MXNpcyddLAogICAgWy8oW15mXSl2ZXMkL2ksICckMWZlJ10sCiAgICBbLyho
        aXZlKXMkL2ksICckMSddLAogICAgWy8odGl2ZSlzJC9pLCAnJDEnXSwKICAg
        IFsvKFtscl0pdmVzJC9pLCAnJDFmJ10sCiAgICBbLyhbXmFlaW91eV18cXUp
        aWVzJC9pLCAnJDF5J10sCiAgICBbLyhzKWVyaWVzJC9pLCAnJDFlcmllcydd
        LAogICAgWy8obSlvdmllcyQvaSwgJyQxb3ZpZSddLAogICAgWy8oeHxjaHxz
        c3xzaCllcyQvaSwgJyQxJ10sCiAgICBbL14obXxsKWljZSQvaSwgJyQxb3Vz
        ZSddLAogICAgWy8oYnVzKShlcyk/JC9pLCAnJDEnXSwKICAgIFsvKG8pZXMk
        L2ksICckMSddLAogICAgWy8oc2hvZSlzJC9pLCAnJDEnXSwKICAgIFsvKGNy
        aXN8dGVzdCkoaXN8ZXMpJC9pLCAnJDFpcyddLAogICAgWy9eKGEpeFtpZV1z
        JC9pLCAnJDF4aXMnXSwKICAgIFsvKG9jdG9wfHZpcikodXN8aSkkL2ksICck
        MXVzJ10sCiAgICBbLyhhbGlhc3xzdGF0dXMpKGVzKT8kL2ksICckMSddLAog
        ICAgWy9eKG94KWVuL2ksICckMSddLAogICAgWy8odmVydHxpbmQpaWNlcyQv
        aSwgJyQxZXgnXSwKICAgIFsvKG1hdHIpaWNlcyQvaSwgJyQxaXgnXSwKICAg
        IFsvKHF1aXopemVzJC9pLCAnJDEnXSwKICAgIFsvKGRhdGFiYXNlKXMkL2ks
        ICckMSddCiAgXSwKCiAgaXJyZWd1bGFyUGFpcnM6IFsKICAgIFsncGVyc29u
        JywgJ3Blb3BsZSddLAogICAgWydtYW4nLCAnbWVuJ10sCiAgICBbJ2NoaWxk
        JywgJ2NoaWxkcmVuJ10sCiAgICBbJ3NleCcsICdzZXhlcyddLAogICAgWydt
        b3ZlJywgJ21vdmVzJ10sCiAgICBbJ2NvdycsICdraW5lJ10sCiAgICBbJ3pv
        bWJpZScsICd6b21iaWVzJ10KICBdLAoKICB1bmNvdW50YWJsZTogWwogICAg
        J2VxdWlwbWVudCcsCiAgICAnaW5mb3JtYXRpb24nLAogICAgJ3JpY2UnLAog
        ICAgJ21vbmV5JywKICAgICdzcGVjaWVzJywKICAgICdzZXJpZXMnLAogICAg
        J2Zpc2gnLAogICAgJ3NoZWVwJywKICAgICdqZWFucycsCiAgICAncG9saWNl
        JwogIF0KfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKaWYgKEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVYVEVORF9QUk9U
        T1RZUEVTLlN0cmluZykgew0KICAvKioNCiAgICBTZWUge3sjY3Jvc3NMaW5r
        ICJFbWJlci5TdHJpbmcvcGx1cmFsaXplIn19e3svY3Jvc3NMaW5rfX0NCg0K
        ICAgIEBtZXRob2QgcGx1cmFsaXplDQogICAgQGZvciBTdHJpbmcNCiAgKi8N
        CiAgU3RyaW5nLnByb3RvdHlwZS5wbHVyYWxpemUgPSBmdW5jdGlvbigpIHsN
        CiAgICByZXR1cm4gRW1iZXIuU3RyaW5nLnBsdXJhbGl6ZSh0aGlzKTsNCiAg
        fTsNCg0KICAvKioNCiAgICBTZWUge3sjY3Jvc3NMaW5rICJFbWJlci5TdHJp
        bmcvc2luZ3VsYXJpemUifX17ey9jcm9zc0xpbmt9fQ0KDQogICAgQG1ldGhv
        ZCBzaW5ndWxhcml6ZQ0KICAgIEBmb3IgU3RyaW5nDQogICovDQogIFN0cmlu
        Zy5wcm90b3R5cGUuc2luZ3VsYXJpemUgPSBmdW5jdGlvbigpIHsNCiAgICBy
        ZXR1cm4gRW1iZXIuU3RyaW5nLnNpbmd1bGFyaXplKHRoaXMpOw0KICB9Ow0K
        fQ0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKRW1iZXIuSW5mbGVjdG9yLmlu
        ZmxlY3RvciA9IG5ldyBFbWJlci5JbmZsZWN0b3IoRW1iZXIuSW5mbGVjdG9y
        LmRlZmF1bHRSdWxlcyk7DQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSko
        KTsKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0Owp2YXIgZm9yRWFjaCA9IEVtYmVyLkVu
        dW1lcmFibGVVdGlscy5mb3JFYWNoOwoKRFMuQWN0aXZlTW9kZWxTZXJpYWxp
        emVyID0gRFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAvLyBTRVJJQUxJ
        WkUKCiAgLyoqCiAgICBDb252ZXJ0cyBjYW1lbGNhc2VkIGF0dHJpYnV0ZXMg
        dG8gdW5kZXJzY29yZWQgd2hlbiBzZXJpYWxpemluZy4KCiAgICBAbWV0aG9k
        IGtleUZvckF0dHJpYnV0ZQogICAgQHBhcmFtIHtTdHJpbmd9IGF0dHJpYnV0
        ZQogICAgQHJldHVybnMgU3RyaW5nCiAgKi8KICBrZXlGb3JBdHRyaWJ1dGU6
        IGZ1bmN0aW9uKGF0dHIpIHsKICAgIHJldHVybiBFbWJlci5TdHJpbmcuZGVj
        YW1lbGl6ZShhdHRyKTsKICB9LAoKICAvKioKICAgIFVuZGVyc2NvcmVzIHJl
        bGF0aW9uc2hpcCBuYW1lcyBhbmQgYXBwZW5kcyAiX2lkIiBvciAiX2lkcyIg
        d2hlbiBzZXJpYWxpemluZwogICAgcmVsYXRpb25zaGlwIGtleXMuCgogICAg
        QG1ldGhvZCBrZXlGb3JSZWxhdGlvbnNoaXAKICAgIEBwYXJhbSB7U3RyaW5n
        fSBrZXkKICAgIEBwYXJhbSB7U3RyaW5nfSBraW5kCiAgICBAcmV0dXJucyBT
        dHJpbmcKICAqLwogIGtleUZvclJlbGF0aW9uc2hpcDogZnVuY3Rpb24oa2V5
        LCBraW5kKSB7CiAgICBrZXkgPSBFbWJlci5TdHJpbmcuZGVjYW1lbGl6ZShr
        ZXkpOwogICAgaWYgKGtpbmQgPT09ICJiZWxvbmdzVG8iKSB7CiAgICAgIHJl
        dHVybiBrZXkgKyAiX2lkIjsKICAgIH0gZWxzZSBpZiAoa2luZCA9PT0gImhh
        c01hbnkiKSB7CiAgICAgIHJldHVybiBFbWJlci5TdHJpbmcuc2luZ3VsYXJp
        emUoa2V5KSArICJfaWRzIjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBr
        ZXk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBTZXJpYWxpemUgaGFzLW1heSBy
        ZWxhdGlvbnNoaXAgd2hlbiBpdCBpcyBjb25maWd1cmVkIGFzIGVtYmVkZGVk
        IG9iamVjdHMuCgogICAgQG1ldGhvZCBzZXJpYWxpemVIYXNNYW55CiAgKi8K
        ICBzZXJpYWxpemVIYXNNYW55OiBmdW5jdGlvbihyZWNvcmQsIGpzb24sIHJl
        bGF0aW9uc2hpcCkgewogICAgdmFyIGtleSAgID0gcmVsYXRpb25zaGlwLmtl
        eSwKICAgICAgICBhdHRycyA9IGdldCh0aGlzLCAnYXR0cnMnKSwKICAgICAg
        ICBlbWJlZCA9IGF0dHJzICYmIGF0dHJzW2tleV0gJiYgYXR0cnNba2V5XS5l
        bWJlZGRlZCA9PT0gJ2Fsd2F5cyc7CgogICAgaWYgKGVtYmVkKSB7CiAgICAg
        IGpzb25bdGhpcy5rZXlGb3JBdHRyaWJ1dGUoa2V5KV0gPSBnZXQocmVjb3Jk
        LCBrZXkpLm1hcChmdW5jdGlvbihyZWxhdGlvbikgewogICAgICAgIHZhciBk
        YXRhID0gcmVsYXRpb24uc2VyaWFsaXplKCksCiAgICAgICAgICAgIHByaW1h
        cnlLZXkgPSBnZXQodGhpcywgJ3ByaW1hcnlLZXknKTsKCiAgICAgICAgZGF0
        YVtwcmltYXJ5S2V5XSA9IGdldChyZWxhdGlvbiwgcHJpbWFyeUtleSk7Cgog
        ICAgICAgIHJldHVybiBkYXRhOwogICAgICB9LCB0aGlzKTsKICAgIH0KICB9
        LAoKICAvKioKICAgIFVuZGVyc2NvcmVzIHRoZSBKU09OIHJvb3Qga2V5cyB3
        aGVuIHNlcmlhbGl6aW5nLgoKICAgIEBtZXRob2Qgc2VyaWFsaXplSW50b0hh
        c2gKICAgIEBwYXJhbSB7T2JqZWN0fSBoYXNoCiAgICBAcGFyYW0ge3N1YmNs
        YXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSBy
        ZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAgKi8KICBzZXJp
        YWxpemVJbnRvSGFzaDogZnVuY3Rpb24oZGF0YSwgdHlwZSwgcmVjb3JkLCBv
        cHRpb25zKSB7CiAgICB2YXIgcm9vdCA9IEVtYmVyLlN0cmluZy5kZWNhbWVs
        aXplKHR5cGUudHlwZUtleSk7CiAgICBkYXRhW3Jvb3RdID0gdGhpcy5zZXJp
        YWxpemUocmVjb3JkLCBvcHRpb25zKTsKICB9LAoKICAvKioKICAgIFNlcmlh
        bGl6ZXMgYSBwb2x5bW9ycGhpYyB0eXBlIGFzIGEgZnVsbHkgY2FwaXRhbGl6
        ZWQgbW9kZWwgbmFtZS4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZVBvbHltb3Jw
        aGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFy
        YW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHJlbGF0aW9uc2hpcAogICov
        CiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5jdGlvbihyZWNvcmQs
        IGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9IHJlbGF0aW9u
        c2hpcC5rZXksCiAgICAgICAgYmVsb25nc1RvID0gZ2V0KHJlY29yZCwga2V5
        KTsKICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKGtleSk7CiAgICBq
        c29uW2tleSArICJfdHlwZSJdID0gRW1iZXIuU3RyaW5nLmNhcGl0YWxpemUo
        YmVsb25nc1RvLmNvbnN0cnVjdG9yLnR5cGVLZXkpOwogIH0sCgogIC8vIEVY
        VFJBQ1QKCiAgLyoqCiAgICBFeHRyYWN0cyB0aGUgbW9kZWwgdHlwZUtleSBm
        cm9tIHVuZGVyc2NvcmVkIHJvb3Qgb2JqZWN0cy4KCiAgICBAbWV0aG9kIHR5
        cGVGb3JSb290CiAgICBAcGFyYW0ge1N0cmluZ30gcm9vdAogICAgQHJldHVy
        bnMgU3RyaW5nIHRoZSBtb2RlbCdzIHR5cGVLZXkKICAqLwogIHR5cGVGb3JS
        b290OiBmdW5jdGlvbihyb290KSB7CiAgICB2YXIgY2FtZWxpemVkID0gRW1i
        ZXIuU3RyaW5nLmNhbWVsaXplKHJvb3QpOwogICAgcmV0dXJuIEVtYmVyLlN0
        cmluZy5zaW5ndWxhcml6ZShjYW1lbGl6ZWQpOwogIH0sCgogIC8qKgogICAg
        Tm9ybWFsaXplIHRoZSBwb2x5bW9ycGhpYyB0eXBlIGZyb20gdGhlIEpTT04u
        CgogICAgTm9ybWFsaXplOgogICAgYGBganMKICAgICAgewogICAgICAgIGlk
        OiAiMSIKICAgICAgICBtaW5pb246IHsgdHlwZTogImV2aWxfbWluaW9uIiwg
        aWQ6ICIxMiJ9CiAgICAgIH0KICAgIGBgYAoKICAgIFRvOgogICAgYGBganMK
        ICAgICAgewogICAgICAgIGlkOiAiMSIKICAgICAgICBtaW5pb246IHsgdHlw
        ZTogImV2aWxNaW5pb24iLCBpZDogIjEyIn0KICAgICAgfQogICAgYGBgCgog
        ICAgQG1ldGhvZCBub3JtYWxpemVSZWxhdGlvbnNoaXBzCiAgICBAcHJpdmF0
        ZQogICovCiAgbm9ybWFsaXplUmVsYXRpb25zaGlwczogZnVuY3Rpb24odHlw
        ZSwgaGFzaCkgewogICAgdmFyIHBheWxvYWRLZXksIHBheWxvYWQ7CgogICAg
        aWYgKHRoaXMua2V5Rm9yUmVsYXRpb25zaGlwKSB7CiAgICAgIHR5cGUuZWFj
        aFJlbGF0aW9uc2hpcChmdW5jdGlvbihrZXksIHJlbGF0aW9uc2hpcCkgewog
        ICAgICAgIGlmIChyZWxhdGlvbnNoaXAub3B0aW9ucy5wb2x5bW9ycGhpYykg
        ewogICAgICAgICAgcGF5bG9hZEtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRl
        KGtleSk7CiAgICAgICAgICBwYXlsb2FkID0gaGFzaFtwYXlsb2FkS2V5XTsK
        ICAgICAgICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQudHlwZSkgewogICAg
        ICAgICAgICBwYXlsb2FkLnR5cGUgPSB0aGlzLnR5cGVGb3JSb290KHBheWxv
        YWQudHlwZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHBheWxvYWQgJiYgcmVs
        YXRpb25zaGlwLmtpbmQgPT09ICJoYXNNYW55IikgewogICAgICAgICAgICB2
        YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgIGZvckVhY2gocGF5bG9hZCwg
        ZnVuY3Rpb24oc2luZ2xlKSB7CiAgICAgICAgICAgICAgc2luZ2xlLnR5cGUg
        PSBzZWxmLnR5cGVGb3JSb290KHNpbmdsZS50eXBlKTsKICAgICAgICAgICAg
        fSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBh
        eWxvYWRLZXkgPSB0aGlzLmtleUZvclJlbGF0aW9uc2hpcChrZXksIHJlbGF0
        aW9uc2hpcC5raW5kKTsKICAgICAgICAgIHBheWxvYWQgPSBoYXNoW3BheWxv
        YWRLZXldOwogICAgICAgIH0KCiAgICAgICAgaGFzaFtrZXldID0gcGF5bG9h
        ZDsKCiAgICAgICAgaWYgKGtleSAhPT0gcGF5bG9hZEtleSkgewogICAgICAg
        ICAgZGVsZXRlIGhhc2hbcGF5bG9hZEtleV07CiAgICAgICAgfQogICAgICB9
        LCB0aGlzKTsKICAgIH0KICB9LAoKICBleHRyYWN0U2luZ2xlOiBmdW5jdGlv
        bihzdG9yZSwgcHJpbWFyeVR5cGUsIHBheWxvYWQsIHJlY29yZElkLCByZXF1
        ZXN0VHlwZSkgewogICAgdmFyIHJvb3QgPSB0aGlzLmtleUZvckF0dHJpYnV0
        ZShwcmltYXJ5VHlwZS50eXBlS2V5KSwKICAgICAgICBwYXJ0aWFsID0gcGF5
        bG9hZFtyb290XTsKCiAgICB1cGRhdGVQYXlsb2FkV2l0aEVtYmVkZGVkKHN0
        b3JlLCB0aGlzLCBwcmltYXJ5VHlwZSwgcGFydGlhbCwgcGF5bG9hZCk7Cgog
        ICAgcmV0dXJuIHRoaXMuX3N1cGVyKHN0b3JlLCBwcmltYXJ5VHlwZSwgcGF5
        bG9hZCwgcmVjb3JkSWQsIHJlcXVlc3RUeXBlKTsKICB9LAoKICBleHRyYWN0
        QXJyYXk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBwYXlsb2FkKSB7CiAgICB2
        YXIgcm9vdCA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKHR5cGUudHlwZUtleSks
        CiAgICAgICAgcGFydGlhbHMgPSBwYXlsb2FkW0VtYmVyLlN0cmluZy5wbHVy
        YWxpemUocm9vdCldOwoKICAgIGZvckVhY2gocGFydGlhbHMsIGZ1bmN0aW9u
        KHBhcnRpYWwpIHsKICAgICAgdXBkYXRlUGF5bG9hZFdpdGhFbWJlZGRlZChz
        dG9yZSwgdGhpcywgdHlwZSwgcGFydGlhbCwgcGF5bG9hZCk7CiAgICB9LCB0
        aGlzKTsKCiAgICByZXR1cm4gdGhpcy5fc3VwZXIoc3RvcmUsIHR5cGUsIHBh
        eWxvYWQpOwogIH0KfSk7CgpmdW5jdGlvbiB1cGRhdGVQYXlsb2FkV2l0aEVt
        YmVkZGVkKHN0b3JlLCBzZXJpYWxpemVyLCB0eXBlLCBwYXJ0aWFsLCBwYXls
        b2FkKSB7CiAgdmFyIGF0dHJzID0gZ2V0KHNlcmlhbGl6ZXIsICdhdHRycycp
        OwoKICBpZiAoIWF0dHJzKSB7CiAgICByZXR1cm47CiAgfQoKICB0eXBlLmVh
        Y2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24oa2V5LCByZWxhdGlvbnNoaXApIHsK
        ICAgIHZhciBleHBhbmRlZEtleSwgZW1iZWRkZWRUeXBlS2V5LCBhdHRyaWJ1
        dGUsIGlkcywKICAgICAgICBjb25maWcgPSBhdHRyc1trZXldLAogICAgICAg
        IHNlcmlhbGl6ZXIgPSBzdG9yZS5zZXJpYWxpemVyRm9yKHJlbGF0aW9uc2hp
        cC50eXBlLnR5cGVLZXkpLAogICAgICAgIHByaW1hcnlLZXkgPSBnZXQoc2Vy
        aWFsaXplciwgInByaW1hcnlLZXkiKTsKCiAgICBpZiAocmVsYXRpb25zaGlw
        LmtpbmQgIT09ICJoYXNNYW55IikgewogICAgICByZXR1cm47CiAgICB9Cgog
        ICAgaWYgKGNvbmZpZyAmJiAoY29uZmlnLmVtYmVkZGVkID09PSAnYWx3YXlz
        JyB8fCBjb25maWcuZW1iZWRkZWQgPT09ICdsb2FkJykpIHsKICAgICAgLy8g
        dW5kZXJzY29yZSBmb3JjZXMgdGhlIGVtYmVkZGVkIHJlY29yZHMgdG8gYmUg
        c2lkZSBsb2FkZWQuCiAgICAgIC8vIGl0IGlzIG5lZWRlZCB3aGVuIG1haW4g
        dHlwZSA9PT0gcmVsYXRpb25zaGlwLnR5cGUKICAgICAgZW1iZWRkZWRUeXBl
        S2V5ID0gJ18nICsgRW1iZXIuU3RyaW5nLnBsdXJhbGl6ZShyZWxhdGlvbnNo
        aXAudHlwZS50eXBlS2V5KTsKICAgICAgZXhwYW5kZWRLZXkgPSB0aGlzLmtl
        eUZvclJlbGF0aW9uc2hpcChrZXksIHJlbGF0aW9uc2hpcC5raW5kKTsKICAg
        ICAgYXR0cmlidXRlICA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKGtleSk7CiAg
        ICAgIGlkcyA9IFtdOwoKICAgICAgaWYgKCFwYXJ0aWFsW2F0dHJpYnV0ZV0p
        IHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHBheWxvYWRbZW1i
        ZWRkZWRUeXBlS2V5XSA9IHBheWxvYWRbZW1iZWRkZWRUeXBlS2V5XSB8fCBb
        XTsKCiAgICAgIGZvckVhY2gocGFydGlhbFthdHRyaWJ1dGVdLCBmdW5jdGlv
        bihkYXRhKSB7CiAgICAgICAgdmFyIGVtYmVkZGVkVHlwZSA9IHN0b3JlLm1v
        ZGVsRm9yKHJlbGF0aW9uc2hpcC50eXBlLnR5cGVLZXkpOwogICAgICAgIHVw
        ZGF0ZVBheWxvYWRXaXRoRW1iZWRkZWQoc3RvcmUsIHNlcmlhbGl6ZXIsIGVt
        YmVkZGVkVHlwZSwgZGF0YSwgcGF5bG9hZCk7CiAgICAgICAgaWRzLnB1c2go
        ZGF0YVtwcmltYXJ5S2V5XSk7CiAgICAgICAgcGF5bG9hZFtlbWJlZGRlZFR5
        cGVLZXldLnB1c2goZGF0YSk7CiAgICAgIH0pOwoKICAgICAgcGFydGlhbFtl
        eHBhbmRlZEtleV0gPSBpZHM7CiAgICAgIGRlbGV0ZSBwYXJ0aWFsW2F0dHJp
        YnV0ZV07CiAgICB9CiAgfSwgc2VyaWFsaXplcik7Cn0KCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIg
        Zm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoOwoKLyoq
        CiAgVGhlIEFjdGl2ZU1vZGVsQWRhcHRlciBpcyBhIHN1YmNsYXNzIG9mIHRo
        ZSBSRVNUQWRhcHRlciBkZXNpZ25lZCB0byBpbnRlZ3JhdGUKICB3aXRoIGEg
        SlNPTiBBUEkgdGhhdCB1c2VzIGFuIHVuZGVyc2NvcmVkIG5hbWluZyBjb252
        ZW50aW9uIGluc3RlYWQgb2YgY2FtZWxjYXNpbmcuCiAgSXQgaGFzIGJlZW4g
        ZGVzaWduZWQgdG8gd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIHRoZQogIFth
        Y3RpdmVfbW9kZWxfc2VyaWFsaXplcnNdKGh0dHA6Ly9naXRodWIuY29tL3Jh
        aWxzLWFwaS9hY3RpdmVfbW9kZWxfc2VyaWFsaXplcnMpCiAgUnVieSBnZW0u
        CgogIFRoaXMgYWRhcHRlciBleHRlbmRzIHRoZSBEUy5SRVNUQWRhcHRlciBi
        eSBtYWtpbmcgY29uc2lzdGVudCB1c2Ugb2YgdGhlIGNhbWVsaXphdGlvbiwg
        CiAgZGVjYW1lbGl6YXRpb24gYW5kIHBsdXJhbGl6YXRpb24gbWV0aG9kcyB0
        byBub3JtYWxpemUgdGhlIHNlcmlhbGl6ZWQgSlNPTiBpbnRvIGEgCiAgZm9y
        bWF0IHRoYXQgaXMgY29tcGF0aWJsZSB3aXRoIGEgY29udmVudGlvbmFsIFJh
        aWxzIGJhY2tlbmQgYW5kIEVtYmVyIERhdGEuIAoKICAjIyBKU09OIFN0cnVj
        dHVyZQoKICBUaGUgQWN0aXZlTW9kZWxBZGFwdGVyIGV4cGVjdHMgdGhlIEpT
        T04gcmV0dXJuZWQgZnJvbSB5b3VyIHNlcnZlciB0byBmb2xsb3cKICB0aGUg
        UkVTVCBhZGFwdGVyIGNvbnZlbnRpb25zIHN1YnN0aXR1dGluZyB1bmRlcnNj
        b3JlZCBrZXlzIGZvciBjYW1lbGNhc2VkIG9uZXMuCgogICMjIyBDb252ZW50
        aW9uYWwgTmFtZXMKCiAgQXR0cmlidXRlIG5hbWVzIGluIHlvdXIgSlNPTiBw
        YXlsb2FkIHNob3VsZCBiZSB0aGUgdW5kZXJzY29yZWQgdmVyc2lvbnMgb2YK
        ICB0aGUgYXR0cmlidXRlcyBpbiB5b3VyIEVtYmVyLmpzIG1vZGVscy4KCiAg
        Rm9yIGV4YW1wbGUsIGlmIHlvdSBoYXZlIGEgYFBlcnNvbmAgbW9kZWw6Cgog
        IGBgYGpzCiAgQXBwLkZhbW91c1BlcnNvbiA9IERTLk1vZGVsLmV4dGVuZCh7
        CiAgICBmaXJzdE5hbWU6IERTLmF0dHIoJ3N0cmluZycpLAogICAgbGFzdE5h
        bWU6IERTLmF0dHIoJ3N0cmluZycpLAogICAgb2NjdXBhdGlvbjogRFMuYXR0
        cignc3RyaW5nJykKICB9KTsKICBgYGAKCiAgVGhlIEpTT04gcmV0dXJuZWQg
        c2hvdWxkIGxvb2sgbGlrZSB0aGlzOgoKICBgYGBqcwogIHsKICAgICJmYW1v
        dXNfcGVyc29uIjogewogICAgICAiZmlyc3RfbmFtZSI6ICJCYXJhY2siLAog
        ICAgICAibGFzdF9uYW1lIjogIk9iYW1hIiwKICAgICAgIm9jY3VwYXRpb24i
        OiAiUHJlc2lkZW50IgogICAgfQogIH0KICBgYGAKCiAgQGNsYXNzIEFjdGl2
        ZU1vZGVsQWRhcHRlcgogIEBjb25zdHJ1Y3RvcgogIEBuYW1lc3BhY2UgRFMK
        ICBAZXh0ZW5kcyBEUy5BZGFwdGVyCioqLwoKRFMuQWN0aXZlTW9kZWxBZGFw
        dGVyID0gRFMuUkVTVEFkYXB0ZXIuZXh0ZW5kKHsKICBkZWZhdWx0U2VyaWFs
        aXplcjogJ19hbXMnLAogIC8qKgogICAgVGhlIEFjdGl2ZU1vZGVsQWRhcHRl
        ciBvdmVycmlkZXMgdGhlIGBwYXRoRm9yVHlwZWAgbWV0aG9kIHRvIGJ1aWxk
        IAogICAgdW5kZXJzY29yZWQgVVJMcyBieSBkZWNhbWVsaXppbmcgYW5kIHBs
        dXJhbGl6aW5nIHRoZSBvYmplY3QgdHlwZSBuYW1lLgoKICAgIGBgYGpzCiAg
        ICAgIHRoaXMucGF0aEZvclR5cGUoImZhbW91c1BlcnNvbiIpOwogICAgICAv
        Lz0+ICJmYW1vdXNfcGVvcGxlIgogICAgYGBgCgogICAgQG1ldGhvZCBwYXRo
        Rm9yVHlwZQogICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEByZXR1cm5z
        IFN0cmluZwogICovCiAgcGF0aEZvclR5cGU6IGZ1bmN0aW9uKHR5cGUpIHsK
        ICAgIHZhciBkZWNhbWVsaXplZCA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXpl
        KHR5cGUpOwogICAgcmV0dXJuIEVtYmVyLlN0cmluZy5wbHVyYWxpemUoZGVj
        YW1lbGl6ZWQpOwogIH0sCgogIC8qKgogICAgVGhlIEFjdGl2ZU1vZGVsQWRh
        cHRlciBvdmVycmlkZXMgdGhlIGBhamF4RXJyb3JgIG1ldGhvZAogICAgdG8g
        cmV0dXJuIGEgRFMuSW52YWxpZEVycm9yIGZvciBhbGwgNDIyIFVucHJvY2Vz
        c2FibGUgRW50aXR5CiAgICByZXNwb25zZXMuCiAgICAKICAgIEEgNDIyIEhU
        VFAgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIGdlbmVyYWxseSBpbXBsaWVz
        IHRoYXQgdGhlIHJlcXVlc3QKICAgIHdhcyB3ZWxsIGZvcm1lZCBidXQgdGhl
        IEFQSSB3YXMgdW5hYmxlIHRvIHByb2Nlc3MgaXQgYmVjYXVzZSB0aGUgCiAg
        ICBjb250ZW50IHdhcyBub3Qgc2VtYW50aWNhbGx5IGNvcnJlY3Qgb3IgbWVh
        bmluZ2Z1bCBwZXIgdGhlIEFQSS4KICAgIAogICAgRm9yIG1vcmUgaW5mb3Jt
        YXRpb24gb24gNDIyIEhUVFAgRXJyb3IgY29kZSBzZWUgMTEuMiBXZWJEQVYg
        UkZDIDQ5MTgKICAgIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM0
        OTE4I3NlY3Rpb24tMTEuMiAKCiAgICBAbWV0aG9kIGFqYXhFcnJvcgogICAg
        QHBhcmFtIGpxWEhSCiAgICBAcmV0dXJucyBlcnJvcgogICovCiAgYWpheEVy
        cm9yOiBmdW5jdGlvbihqcVhIUikgewogICAgdmFyIGVycm9yID0gdGhpcy5f
        c3VwZXIoanFYSFIpOwoKICAgIGlmIChqcVhIUiAmJiBqcVhIUi5zdGF0dXMg
        PT09IDQyMikgewogICAgICB2YXIganNvbkVycm9ycyA9IEVtYmVyLiQucGFy
        c2VKU09OKGpxWEhSLnJlc3BvbnNlVGV4dClbImVycm9ycyJdLAogICAgICAg
        ICAgZXJyb3JzID0ge307CgogICAgICBmb3JFYWNoKEVtYmVyLmtleXMoanNv
        bkVycm9ycyksIGZ1bmN0aW9uKGtleSkgewogICAgICAgIGVycm9yc1tFbWJl
        ci5TdHJpbmcuY2FtZWxpemUoa2V5KV0gPSBqc29uRXJyb3JzW2tleV07CiAg
        ICAgIH0pOwoKICAgICAgcmV0dXJuIG5ldyBEUy5JbnZhbGlkRXJyb3IoZXJy
        b3JzKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBlcnJvcjsKICAgIH0K
        ICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewpFbWJlci5vbkxvYWQoJ0VtYmVyLkFwcGxpY2F0aW9uJywg
        ZnVuY3Rpb24oQXBwbGljYXRpb24pIHsKICBBcHBsaWNhdGlvbi5pbml0aWFs
        aXplcih7CiAgICBuYW1lOiAiYWN0aXZlTW9kZWxBZGFwdGVyIiwKCiAgICBp
        bml0aWFsaXplOiBmdW5jdGlvbihjb250YWluZXIsIGFwcGxpY2F0aW9uKSB7
        CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCdzZXJpYWxpemVyOl9hbXMn
        LCBEUy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXIpOwogICAgICBhcHBsaWNhdGlv
        bi5yZWdpc3RlcignYWRhcHRlcjpfYW1zJywgRFMuQWN0aXZlTW9kZWxBZGFw
        dGVyKTsKICAgIH0KICB9KTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Cgp9KSgpOwoKCn0pKCk7Cg==
    http_version: 
  recorded_at: Thu, 31 Oct 2013 20:28:06 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/canary/ember-data.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - ! '*/*'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - /oSf8G+yC0Duhfy+L+Auyt1jC33+mfV0xuYUKulyc0koV8evvdy11BbpE9YYHhSH
      X-Amz-Request-Id:
      - 35EB4F89C13C1A09
      Date:
      - Thu, 31 Oct 2013 20:28:09 GMT
      Last-Modified:
      - Tue, 22 Oct 2013 16:41:40 GMT
      Etag:
      - ! '"67646f0116401b899a5c0f12ec8c5f6e"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '61650'
      Server:
      - AmazonS3
    body:
      encoding: US-ASCII
      string: ! "// ==========================================================================\n//
        Project:   Ember Data\n// Copyright: Copyright 2011-2013 Tilde Inc. and contributors.\n//
        \           Portions Copyright 2011 LivingSocial Inc.\n// License:   Licensed
        under MIT license (see license.js)\n// ==========================================================================\n\n\n\n
        // Version: 1.0.0-beta.4+canary.c15b8f80\n\n// Copyright: Copyright 2011-2013
        Tilde Inc. and contributors.\n//            Portions Copyright 2011 LivingSocial
        Inc.\n!function(){var e,t;!function(){var r={},n={};e=function(e,t,n){r[e]={deps:t,callback:n}},t=function(e){if(n[e])return
        n[e];n[e]={};var i,a,o,s,c;if(i=r[e],!i)throw new Error(\"Module '\"+e+\"'
        not found.\");a=i.deps,o=i.callback,s=[];for(var u=0,d=a.length;d>u;u++)\"exports\"===a[u]?s.push(c={}):s.push(t(a[u]));var
        l=o.apply(this,s);return n[e]=c||l}}(),function(){var e;\"undefined\"==typeof
        e&&(e=Ember.Namespace.create({VERSION:\"1.0.0-beta.4+canary.c15b8f80\"}),\"undefined\"!=typeof
        window&&(window.DS=e),Ember.libraries&&Ember.libraries.registerCoreLibrary(\"Ember
        Data\",e.VERSION))}(),function(){function e(e){return function(){return this[e].apply(this,arguments)}}var
        t=Ember.get,r=(Ember.set,Ember.isNone);DS.JSONSerializer=Ember.Object.extend({primaryKey:\"id\",applyTransforms:function(e,t){return
        e.eachTransformedAttribute(function(e,r){var n=this.transformFor(r);t[e]=n.deserialize(t[e])},this),t},normalize:function(e,t){return
        t?(this.applyTransforms(e,t),t):t},serialize:function(e,r){var n={};if(r&&r.includeId){var
        i=t(e,\"id\");i&&(n[t(this,\"primaryKey\")]=t(e,\"id\"))}return e.eachAttribute(function(t,r){this.serializeAttribute(e,n,t,r)},this),e.eachRelationship(function(t,r){\"belongsTo\"===r.kind?this.serializeBelongsTo(e,n,r):\"hasMany\"===r.kind&&this.serializeHasMany(e,n,r)},this),n},serializeAttribute:function(e,r,n,i){var
        a=t(this,\"attrs\"),o=t(e,n),s=i.type;if(s){var c=this.transformFor(s);o=c.serialize(o)}n=a&&a[n]||(this.keyForAttribute?this.keyForAttribute(n):n),r[n]=o},serializeBelongsTo:function(e,n,i){var
        a=i.key,o=t(e,a);a=this.keyForRelationship?this.keyForRelationship(a,\"belongsTo\"):a,n[a]=r(o)?o:t(o,\"id\"),i.options.polymorphic&&this.serializePolymorphicType(e,n,i)},serializeHasMany:function(e,r,n){var
        i=n.key,a=DS.RelationshipChange.determineRelationshipType(e.constructor,n);(\"manyToNone\"===a||\"manyToMany\"===a)&&(r[i]=t(e,i).mapBy(\"id\"))},serializePolymorphicType:Ember.K,extract:function(e,t,r,n,i){this.extractMeta(e,t,r);var
        a=\"extract\"+i.charAt(0).toUpperCase()+i.substr(1);return this[a](e,t,r,n,i)},extractFindAll:e(\"extractArray\"),extractFindQuery:e(\"extractArray\"),extractFindMany:e(\"extractArray\"),extractFindHasMany:e(\"extractArray\"),extractCreateRecord:e(\"extractSave\"),extractUpdateRecord:e(\"extractSave\"),extractDeleteRecord:e(\"extractSave\"),extractFind:e(\"extractSingle\"),extractFindBelongsTo:e(\"extractSingle\"),extractSave:e(\"extractSingle\"),extractSingle:function(e,t,r){return
        this.normalize(t,r)},extractArray:function(e,t,r){return this.normalize(t,r)},extractMeta:function(e,t,r){r&&r.meta&&(e.metaForType(t,r.meta),delete
        r.meta)},transformFor:function(e){var t=this.container.lookup(\"transform:\"+e);return
        t}})}(),function(){var e=Ember.get,t=Ember.String.capitalize,r=Ember.String.underscore,n=window.DS;n.DebugAdapter=Ember.DataAdapter.extend({getFilters:function(){return[{name:\"isNew\",desc:\"New\"},{name:\"isModified\",desc:\"Modified\"},{name:\"isClean\",desc:\"Clean\"}]},detect:function(e){return
        e!==n.Model&&n.Model.detect(e)},columnsForType:function(n){var i=[{name:\"id\",desc:\"Id\"}],a=0,o=this;return
        e(n,\"attributes\").forEach(function(e){if(a++>o.attributeLimit)return!1;var
        n=t(r(e).replace(\"_\",\" \"));i.push({name:e,desc:n})}),i},getRecords:function(e){return
        this.get(\"store\").all(e)},getRecordColumnValues:function(t){var r=this,n=0,i={id:e(t,\"id\")};return
        t.eachAttribute(function(a){if(n++>r.attributeLimit)return!1;var o=e(t,a);i[a]=o}),i},getRecordKeywords:function(t){var
        r=[],n=Ember.A([\"id\"]);return t.eachAttribute(function(e){n.push(e)}),n.forEach(function(n){r.push(e(t,n))}),r},getRecordFilterValues:function(e){return{isNew:e.get(\"isNew\"),isModified:e.get(\"isDirty\")&&!e.get(\"isNew\"),isClean:!e.get(\"isDirty\")}},getRecordColor:function(e){var
        t=\"black\";return e.get(\"isNew\")?t=\"green\":e.get(\"isDirty\")&&(t=\"blue\"),t},observeRecord:function(e,t){var
        r=Ember.A(),n=this,i=Ember.A([\"id\",\"isNew\",\"isDirty\"]);e.eachAttribute(function(e){i.push(e)}),i.forEach(function(i){var
        a=function(){t(n.wrapRecord(e))};Ember.addObserver(e,i,a),r.push(function(){Ember.removeObserver(e,i,a)})});var
        a=function(){r.forEach(function(e){e()})};return a}})}(),function(){DS.Transform=Ember.Object.extend({serialize:Ember.required(),deserialize:Ember.required()})}(),function(){DS.BooleanTransform=DS.Transform.extend({deserialize:function(e){var
        t=typeof e;return\"boolean\"===t?e:\"string\"===t?null!==e.match(/^true$|^t$|^1$/i):\"number\"===t?1===e:!1},serialize:function(e){return
        Boolean(e)}})}(),function(){DS.DateTransform=DS.Transform.extend({deserialize:function(e){var
        t=typeof e;return\"string\"===t?new Date(Ember.Date.parse(e)):\"number\"===t?new
        Date(e):null===e||void 0===e?e:null},serialize:function(e){if(e instanceof
        Date){var t=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],r=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],n=function(e){return
        10>e?\"0\"+e:\"\"+e},i=e.getUTCFullYear(),a=e.getUTCMonth(),o=e.getUTCDate(),s=e.getUTCDay(),c=e.getUTCHours(),u=e.getUTCMinutes(),d=e.getUTCSeconds(),l=t[s],h=n(o),f=r[a];return
        l+\", \"+h+\" \"+f+\" \"+i+\" \"+n(c)+\":\"+n(u)+\":\"+n(d)+\" GMT\"}return
        null}})}(),function(){var e=Ember.isEmpty;DS.NumberTransform=DS.Transform.extend({deserialize:function(t){return
        e(t)?null:Number(t)},serialize:function(t){return e(t)?null:Number(t)}})}(),function(){var
        e=Ember.isNone;DS.StringTransform=DS.Transform.extend({deserialize:function(t){return
        e(t)?null:String(t)},serialize:function(t){return e(t)?null:String(t)}})}(),function(){Ember.set,Ember.onLoad(\"Ember.Application\",function(e){e.initializer({name:\"store\",initialize:function(e,t){t.register(\"store:main\",t.Store||DS.Store),t.register(\"serializer:_default\",DS.JSONSerializer),t.register(\"serializer:_rest\",DS.RESTSerializer),t.register(\"adapter:_rest\",DS.RESTAdapter),e.lookup(\"store:main\")}}),e.initializer({name:\"transforms\",initialize:function(e,t){t.register(\"transform:boolean\",DS.BooleanTransform),t.register(\"transform:date\",DS.DateTransform),t.register(\"transform:number\",DS.NumberTransform),t.register(\"transform:string\",DS.StringTransform)}}),e.initializer({name:\"dataAdapter\",initialize:function(e,t){t.register(\"dataAdapter:main\",DS.DebugAdapter)}}),e.initializer({name:\"injectStore\",initialize:function(e,t){t.inject(\"controller\",\"store\",\"store:main\"),t.inject(\"route\",\"store\",\"store:main\"),t.inject(\"serializer\",\"store\",\"store:main\"),t.inject(\"dataAdapter\",\"store\",\"store:main\")}})})}(),function(){Ember.Date=Ember.Date||{};var
        e=Date.parse,t=[1,4,5,6,7,10,11];Ember.Date.parse=function(r){var n,i,a=0;if(i=/^(\\d{4}|[+\\-]\\d{6})(?:-(\\d{2})(?:-(\\d{2}))?)?(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:(Z)|([+\\-])(\\d{2})(?::(\\d{2}))?)?)?$/.exec(r)){for(var
        o,s=0;o=t[s];++s)i[o]=+i[o]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,\"Z\"!==i[8]&&void
        0!==i[9]&&(a=60*i[10]+i[11],\"+\"===i[9]&&(a=0-a)),n=Date.UTC(i[1],i[2],i[3],i[4],i[5]+a,i[6],i[7])}else
        n=e?e(r):0/0;return n},(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Date)&&(Date.parse=Ember.Date.parse)}(),function(){var
        e=Ember.get;Ember.set,DS.RecordArray=Ember.ArrayProxy.extend(Ember.Evented,{type:null,content:null,isLoaded:!1,isUpdating:!1,store:null,objectAtContent:function(t){var
        r=e(this,\"content\");return r.objectAt(t)},update:function(){if(!e(this,\"isUpdating\")){var
        t=e(this,\"store\"),r=e(this,\"type\");t.fetchAll(r,this)}},addRecord:function(t){e(this,\"content\").addObject(t)},removeRecord:function(t){e(this,\"content\").removeObject(t)},save:function(){var
        e=Ember.RSVP.all(this.invoke(\"save\")).then(function(e){return Ember.A(e)});return
        DS.PromiseArray.create({promise:e})}})}(),function(){var e=Ember.get;DS.FilteredRecordArray=DS.RecordArray.extend({filterFunction:null,isLoaded:!0,replace:function(){var
        t=e(this,\"type\").toString();throw new Error(\"The result of a client-side
        filter (on \"+t+\") is immutable.\")},updateFilter:Ember.observer(function(){var
        t=e(this,\"manager\");t.updateFilter(this,e(this,\"type\"),e(this,\"filterFunction\"))},\"filterFunction\")})}(),function(){var
        e=Ember.get;Ember.set,DS.AdapterPopulatedRecordArray=DS.RecordArray.extend({query:null,replace:function(){var
        t=e(this,\"type\").toString();throw new Error(\"The result of a server query
        (on \"+t+\") is immutable.\")},load:function(t){var r=e(this,\"store\"),n=e(this,\"type\"),i=r.pushMany(n,t),a=r.metadataFor(n);this.setProperties({content:Ember.A(i),isLoaded:!0,meta:a}),Ember.run.once(this,\"trigger\",\"didLoad\")}})}(),function(){var
        e=Ember.get,t=Ember.set,r=Ember.EnumerableUtils.map;DS.ManyArray=DS.RecordArray.extend({init:function(){this._super.apply(this,arguments),this._changesToSync=Ember.OrderedSet.create()},owner:null,isPolymorphic:!1,isLoaded:!1,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--,0===this.loadingRecordsCount&&(t(this,\"isLoaded\",!0),this.trigger(\"didLoad\"))},fetch:function(){var
        t=e(this,\"content\"),r=e(this,\"store\"),n=e(this,\"owner\"),i=Ember.RSVP.defer(),a=t.filterProperty(\"isEmpty\",!0);r.fetchMany(a,n,i)},replaceContent:function(e,t,n){n=r(n,function(e){return
        e},this),this._super(e,t,n)},arrangedContentDidChange:function(){Ember.run.once(this,\"fetch\")},arrayContentWillChange:function(t,r){var
        n=e(this,\"owner\"),i=e(this,\"name\");if(!n._suspendedRelationships)for(var
        a=t;t+r>a;a++){var o=e(this,\"content\").objectAt(a),s=DS.RelationshipChange.createChange(n,o,e(this,\"store\"),{parentType:n.constructor,changeType:\"remove\",kind:\"hasMany\",key:i});this._changesToSync.add(s)}return
        this._super.apply(this,arguments)},arrayContentDidChange:function(t,r,n){this._super.apply(this,arguments);var
        i=e(this,\"owner\"),a=e(this,\"name\"),o=e(this,\"store\");if(!i._suspendedRelationships){for(var
        s=t;t+n>s;s++){var c=e(this,\"content\").objectAt(s),u=DS.RelationshipChange.createChange(i,c,o,{parentType:i.constructor,changeType:\"add\",kind:\"hasMany\",key:a});u.hasManyName=a,this._changesToSync.add(u)}this._changesToSync.forEach(function(e){e.sync()}),this._changesToSync.clear()}},createRecord:function(t){var
        r,n=e(this,\"owner\"),i=e(n,\"store\"),a=e(this,\"type\");return r=i.createRecord.call(i,a,t),this.pushObject(r),r}})}(),function(){function
        e(e){var t=Ember.meta(e,!0),r=\"DS.Mappable\",n=t[r];return n||(t[r]={}),t.hasOwnProperty(r)||(t[r]=Ember.create(t[r])),t[r]}Ember.get;var
        t=Ember.ArrayPolyfills.forEach,r=function(e){return e},n=function(e){return
        e},i=function(e,t){return t};DS._Mappable=Ember.Mixin.create({createInstanceMapFor:function(t){var
        r=e(this);if(r.values=r.values||{},r.values[t])return r.values[t];for(var
        n=r.values[t]=new Ember.Map,i=this.constructor;i&&i!==DS.Store;)this._copyMap(t,i,n),i=i.superclass;return
        r.values[t]=n,n},_copyMap:function(a,o,s){function c(e,t){var a=(o.transformMapKey||n)(e,t),c=(o.transformMapValue||i)(e,t),u=s.get(a),d=c;u&&(d=(this.constructor.resolveMapConflict||r)(u,d)),s.set(a,d)}var
        u=e(o),d=u[a];d&&t.call(d,c,this)}}),DS._Mappable.generateMapFunctionFor=function(t,r){return
        function(n,i){var a=e(this),o=a[t]||Ember.MapWithDefault.create({defaultValue:function(){return{}}});r.call(this,n,i,o),a[t]=o}}}(),function(){function
        e(e,r,a,o){return r.eachRelationship(function(r,s){if(a.links&&a.links[r])return
        o&&s.options.async&&(o._relationships[r]=null),void 0;var c=s.kind,u=a[r];null!=u&&(\"belongsTo\"===c?t(e,a,r,s,u):\"hasMany\"===c&&(n(e,a,r,s,u),i(o,r,u)))}),a}function
        t(e,t,n,i,a){if(!(v(a)||a instanceof DS.Model)){var o;\"number\"==typeof a||\"string\"==typeof
        a?(o=r(i,n,t),t[n]=e.recordForId(o,a)):\"object\"==typeof a&&(t[n]=e.recordForId(a.type,a.id))}}function
        r(e,t,r){return e.options.polymorphic?r[t+\"Type\"]:e.type}function n(e,r,n,i,a){for(var
        o=0,s=a.length;s>o;o++)t(e,a,o,i,a[o])}function i(e,t,r){e&&r.pushObjects(e.get(t).filterBy(\"isNew\"))}function
        a(e){return DS.PromiseObject.create({promise:e})}function o(e){return DS.PromiseArray.create({promise:e})}function
        s(e,t,r){return e.lookup(\"serializer:\"+t)||e.lookup(\"serializer:application\")||e.lookup(\"serializer:\"+r)||e.lookup(\"serializer:_default\")}function
        c(e,t){var r=e.serializer,n=e.defaultSerializer,i=e.container;return i&&void
        0===r&&(r=s(i,t.typeKey,n)),(null===r||void 0===r)&&(r={extract:function(e,t,r){return
        r}}),r}function u(e,t,r,n,i){var a=e.find(t,r,n),o=c(e,r);return T(a).then(function(e){return
        e=o.extract(t,r,e,n,\"find\"),t.push(r,e)},function(e){var i=t.getById(r,n);throw
        i.notFound(),e}).then(i.resolve,i.reject)}function d(e,t,r,n,i,a){var o=e.findMany(t,r,n,i),s=c(e,r);return
        T(o).then(function(e){e=s.extract(t,r,e,null,\"findMany\"),t.pushMany(r,e)}).then(a.resolve,a.reject)}function
        l(e,t,r,n,i,a){var o=e.findHasMany(t,r,n,i),s=c(e,i.type);return T(o).then(function(e){e=s.extract(t,i.type,e,null,\"findHasMany\");var
        n=t.pushMany(i.type,e);r.updateHasMany(i.key,n)}).then(a.resolve,a.reject)}function
        h(e,t,r,n,i,a){var o=e.findBelongsTo(t,r,n,i),s=c(e,i.type);return T(o).then(function(e){e=s.extract(t,i.type,e,null,\"findBelongsTo\");var
        r=t.push(i.type,e);return r.updateBelongsTo(i.key,r),r}).then(a.resolve,a.reject)}function
        f(e,t,r,n,i){var a=e.findAll(t,r,n),o=c(e,r);return T(a).then(function(e){return
        e=o.extract(t,r,e,null,\"findAll\"),t.pushMany(r,e),t.didUpdateAll(r),t.all(r)}).then(i.resolve,i.reject)}function
        p(e,t,r,n,i,a){var o=e.findQuery(t,r,n,i),s=c(e,r);return T(o).then(function(e){return
        e=s.extract(t,r,e,null,\"findAll\"),i.load(e),i}).then(a.resolve,a.reject)}function
        m(e,t,r,n,i){var a=n.constructor,o=e[r](t,a,n),s=c(e,a);return o.then(function(e){return
        e&&(e=s.extract(t,a,e,y(n,\"id\"),r)),t.didSaveRecord(n,e),n},function(e){throw
        e instanceof DS.InvalidError?t.recordWasInvalid(n,e.errors):t.recordWasError(n,e),e}).then(i.resolve,i.reject)}var
        y=Ember.get,g=Ember.set,b=Ember.run.once,v=Ember.isNone,R=Ember.EnumerableUtils.forEach,E=Ember.EnumerableUtils.indexOf,S=Ember.EnumerableUtils.map,T=Ember.RSVP.resolve,D=function(e){return
        null==e?null:e+\"\"};DS.Store=Ember.Object.extend(DS._Mappable,{init:function(){this.typeMaps={},this.recordArrayManager=DS.RecordArrayManager.create({store:this}),this._relationshipChanges={},this._pendingSave=[]},adapter:\"_rest\",serialize:function(e,t){return
        this.serializerFor(e.constructor.typeKey).serialize(e,t)},defaultAdapter:Ember.computed(function(){var
        e=y(this,\"adapter\");return\"string\"==typeof e&&(e=this.container.lookup(\"adapter:\"+e)||this.container.lookup(\"adapter:application\")||this.container.lookup(\"adapter:_rest\")),DS.Adapter.detect(e)&&(e=e.create({container:this.container})),e}).property(\"adapter\"),createRecord:function(e,t){e=this.modelFor(e),t=t||{},v(t.id)&&(t.id=this._generateId(e)),t.id=D(t.id);var
        r=this.buildRecord(e,t.id);return r.loadedData(),r.setProperties(t),r},_generateId:function(e){var
        t=this.adapterFor(e);return t&&t.generateIdForRecord?t.generateIdForRecord(this):null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t){return
        void 0===t?this.findAll(e):\"object\"===Ember.typeOf(t)?this.findQuery(e,t):this.findById(e,D(t))},findById:function(e,t){e=this.modelFor(e);var
        r=this.recordForId(e,t),n=this.fetchRecord(r)||T(r);return a(n)},findByIds:function(e,t){var
        r=this;return o(Ember.RSVP.all(S(t,function(t){return r.findById(e,t)})).then(function(e){return
        Ember.A(e)}))},fetchRecord:function(e){if(v(e))return null;if(e._loadingPromise)return
        e._loadingPromise;if(!y(e,\"isEmpty\"))return null;var t=e.constructor,r=y(e,\"id\"),n=Ember.RSVP.defer();e.loadingData(n.promise);var
        i=this.adapterFor(t);return u(i,this,t,r,n),n.promise},getById:function(e,t){return
        e=this.modelFor(e),this.hasRecordForId(e,t)?this.recordForId(e,t):null},reloadRecord:function(e,t){var
        r=e.constructor,n=this.adapterFor(r),i=y(e,\"id\");return u(n,this,r,i,t)},fetchMany:function(e,t,r){if(e.length){var
        n=Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}});R(e,function(e){n.get(e.constructor).push(e)}),R(n,function(e,n){var
        i=n.mapProperty(\"id\"),a=this.adapterFor(e);d(a,this,e,i,t,r)},this)}},hasRecordForId:function(e,t){return
        t=D(t),!!this.typeMapFor(e).idToRecord[t]},recordForId:function(e,t){e=this.modelFor(e),t=D(t);var
        r=this.typeMapFor(e).idToRecord[t];return r||(r=this.buildRecord(e,t)),r},findMany:function(e,t,r,n){r=this.modelFor(r),t=Ember.A(t);var
        i=t.filterProperty(\"isEmpty\",!0),a=this.recordArrayManager.createManyArray(r,t);return
        R(i,function(e){e.loadingData()}),a.loadingRecordsCount=i.length,i.length?(R(i,function(e){this.recordArrayManager.registerWaitingRecordArray(e,a)},this),this.fetchMany(i,e,n)):(n&&n.resolve(),a.set(\"isLoaded\",!0),Ember.run.once(a,\"trigger\",\"didLoad\")),a},findHasMany:function(e,t,r,n){var
        i=this.adapterFor(e.constructor),a=this.recordArrayManager.createManyArray(r.type,Ember.A([]));return
        l(i,this,e,t,r,n),a},findBelongsTo:function(e,t,r,n){var i=this.adapterFor(e.constructor);h(i,this,e,t,r,n)},findQuery:function(e,t){e=this.modelFor(e);var
        r=DS.AdapterPopulatedRecordArray.create({type:e,query:t,content:Ember.A(),store:this}),n=this.adapterFor(e),i=Ember.RSVP.defer();return
        p(n,this,e,t,r,i),o(i.promise)},findAll:function(e){return e=this.modelFor(e),this.fetchAll(e,this.all(e))},fetchAll:function(e,t){var
        r=this.adapterFor(e),n=this.typeMapFor(e).metadata.since,i=Ember.RSVP.defer();return
        g(t,\"isUpdating\",!0),f(r,this,e,n,i),o(i.promise)},didUpdateAll:function(e){var
        t=this.typeMapFor(e).findAllCache;g(t,\"isUpdating\",!1)},all:function(e){e=this.modelFor(e);var
        t=this.typeMapFor(e),r=t.findAllCache;if(r)return r;var n=DS.RecordArray.create({type:e,content:Ember.A(),store:this,isLoaded:!0});return
        this.recordArrayManager.registerFilteredRecordArray(n,e),t.findAllCache=n,n},unloadAll:function(e){e=this.modelFor(e);for(var
        t,r=this.typeMapFor(e),n=r.records;t=n.pop();)t.unloadRecord()},filter:function(e,t,r){var
        n;3===arguments.length?n=this.findQuery(e,t):2===arguments.length&&(r=t),e=this.modelFor(e);var
        i=DS.FilteredRecordArray.create({type:e,content:Ember.A(),store:this,manager:this.recordArrayManager,filterFunction:r});return
        this.recordArrayManager.registerFilteredRecordArray(i,e,r),n?n.then(function(){return
        i}):i},recordIsLoaded:function(e,t){return this.hasRecordForId(e,t)?!y(this.recordForId(e,t),\"isEmpty\"):!1},metadataFor:function(e){return
        e=this.modelFor(e),this.typeMapFor(e).metadata},dataWasUpdated:function(e,t){y(t,\"isDeleted\")||y(t,\"isLoaded\")&&this.recordArrayManager.recordDidChange(t)},scheduleSave:function(e,t){e.adapterWillCommit(),this._pendingSave.push([e,t]),b(this,\"flushPendingSave\")},flushPendingSave:function(){var
        e=this._pendingSave.slice();this._pendingSave=[],R(e,function(e){var t,r=e[0],n=e[1],i=this.adapterFor(r.constructor);t=y(r,\"isNew\")?\"createRecord\":y(r,\"isDeleted\")?\"deleteRecord\":\"updateRecord\",m(i,this,t,r,n)},this)},didSaveRecord:function(t,r){r&&(r=e(this,t.constructor,r,t),this.updateId(t,r)),t.adapterDidCommit(r)},recordWasInvalid:function(e,t){e.adapterDidInvalidate(t)},recordWasError:function(e){e.adapterDidError()},updateId:function(e,t){var
        r=(y(e,\"id\"),D(t.id));this.typeMapFor(e.constructor).idToRecord[r]=e,g(e,\"id\",r)},typeMapFor:function(e){var
        t,r=y(this,\"typeMaps\"),n=Ember.guidFor(e);return(t=r[n])?t:(t={idToRecord:{},records:[],metadata:{}},r[n]=t,t)},_load:function(e,t,r){var
        n=D(t.id),i=this.recordForId(e,n);return i.setupData(t,r),this.recordArrayManager.recordDidChange(i),i},modelFor:function(e){var
        t;return\"string\"==typeof e?(t=this.container.lookupFactory(\"model:\"+e),t.typeKey=e):t=e,t.store=this,t},push:function(t,r,n){return
        t=this.modelFor(t),r=e(this,t,r),this._load(t,r,n),this.recordForId(t,r.id)},pushPayload:function(e,t){var
        r=this.serializerFor(e);r.pushPayload(this,t)},update:function(e,t){return
        this.push(e,t,!0)},pushMany:function(e,t){return S(t,function(t){return this.push(e,t)},this)},metaForType:function(e,t){e=this.modelFor(e),Ember.merge(this.typeMapFor(e).metadata,t)},buildRecord:function(e,t,r){var
        n=this.typeMapFor(e),i=n.idToRecord,a=e._create({id:t,store:this,container:this.container});return
        r&&a.setupData(r),t&&(i[t]=a),n.records.push(a),a},dematerializeRecord:function(e){var
        t=e.constructor,r=this.typeMapFor(t),n=y(e,\"id\");e.updateRecordArrays(),n&&delete
        r.idToRecord[n];var i=E(r.records,e);r.records.splice(i,1)},addRelationshipChangeFor:function(e,t,r,n,i){var
        a=e.clientId,o=r?r:r,s=t+n,c=this._relationshipChanges;a in c||(c[a]={}),o
        in c[a]||(c[a][o]={}),s in c[a][o]||(c[a][o][s]={}),c[a][o][s][i.changeType]=i},removeRelationshipChangeFor:function(e,t,r,n,i){var
        a=e.clientId,o=r?r.clientId:r,s=this._relationshipChanges,c=t+n;a in s&&o
        in s[a]&&c in s[a][o]&&delete s[a][o][c][i]},relationshipChangePairsFor:function(e){var
        t=[];if(!e)return t;var r=this._relationshipChanges[e.clientId];for(var n
        in r)if(r.hasOwnProperty(n))for(var i in r[n])r[n].hasOwnProperty(i)&&t.push(r[n][i]);return
        t},adapterFor:function(e){var t,r=this.container;return r&&(t=r.lookup(\"adapter:\"+e.typeKey)||r.lookup(\"adapter:application\")),t||y(this,\"defaultAdapter\")},serializerFor:function(e){e=this.modelFor(e);var
        t=this.adapterFor(e);return s(this.container,e.typeKey,t&&t.defaultSerializer)}}),DS.PromiseArray=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin),DS.PromiseObject=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin)}(),function(){function
        e(t){var r,n={};for(var i in t)r=t[i],n[i]=r&&\"object\"==typeof r?e(r):r;return
        n}function t(e,t){for(var r in t)e[r]=t[r];return e}function r(r){var n=e(c);return
        t(n,r)}function n(e,r,i){e=t(r?Ember.create(r):{},e),e.parentState=r,e.stateName=i;for(var
        a in e)e.hasOwnProperty(a)&&\"parentState\"!==a&&\"stateName\"!==a&&\"object\"==typeof
        e[a]&&(e[a]=n(e[a],e,i+\".\"+a));return e}var i=Ember.get,a=Ember.set,o=function(e){var
        t,r,n,i=Ember.keys(e);for(t=0,r=i.length;r>t;t++)if(n=i[t],e.hasOwnProperty(n)&&e[n])return!0;return!1},s=function(e,t){t.value===t.originalValue?(delete
        e._attributes[t.name],e.send(\"propertyWasReset\",t.name)):t.value!==t.oldValue&&e.send(\"becomeDirty\"),e.updateRecordArraysLater()},c={initialState:\"uncommitted\",isDirty:!0,uncommitted:{didSetProperty:s,propertyWasReset:function(e){var
        t=!1;for(var r in e._attributes){t=!0;break}t||e.send(\"rolledBack\")},pushedData:Ember.K,becomeDirty:Ember.K,willCommit:function(e){e.transitionTo(\"inFlight\")},reloadRecord:function(e,t){i(e,\"store\").reloadRecord(e,t)},rolledBack:function(e){e.transitionTo(\"loaded.saved\")},becameInvalid:function(e){e.transitionTo(\"invalid\")},rollback:function(e){e.rollback()}},inFlight:{isSaving:!0,didSetProperty:s,becomeDirty:Ember.K,pushedData:Ember.K,willCommit:Ember.K,didCommit:function(e){var
        t=i(this,\"dirtyType\");e.transitionTo(\"saved\"),e.send(\"invokeLifecycleCallbacks\",t)},becameInvalid:function(e,t){a(e,\"errors\",t),e.transitionTo(\"invalid\"),e.send(\"invokeLifecycleCallbacks\")},becameError:function(e){e.transitionTo(\"uncommitted\"),e.triggerLater(\"becameError\",e)}},invalid:{isValid:!1,deleteRecord:function(e){e.transitionTo(\"deleted.uncommitted\"),e.clearRelationships()},didSetProperty:function(e,t){var
        r=i(e,\"errors\"),n=t.name;a(r,n,null),o(r)||e.send(\"becameValid\"),s(e,t)},becomeDirty:Ember.K,rollback:function(e){e.send(\"becameValid\"),e.send(\"rollback\")},becameValid:function(e){e.transitionTo(\"uncommitted\")},invokeLifecycleCallbacks:function(e){e.triggerLater(\"becameInvalid\",e)}}},u=r({dirtyType:\"created\",isNew:!0});u.uncommitted.rolledBack=function(e){e.transitionTo(\"deleted.saved\")};var
        d=r({dirtyType:\"updated\"});u.uncommitted.deleteRecord=function(e){e.clearRelationships(),e.transitionTo(\"deleted.saved\")},u.uncommitted.rollback=function(e){c.uncommitted.rollback.apply(this,arguments),e.transitionTo(\"deleted.saved\")},d.uncommitted.deleteRecord=function(e){e.transitionTo(\"deleted.uncommitted\"),e.clearRelationships()};var
        l={isEmpty:!1,isLoading:!1,isLoaded:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isNew:!1,isValid:!0,rolledBack:Ember.K,propertyWasReset:Ember.K,empty:{isEmpty:!0,loadingData:function(e,t){e._loadingPromise=t,e.transitionTo(\"loading\")},loadedData:function(e){e.transitionTo(\"loaded.created.uncommitted\"),e.suspendRelationshipObservers(function(){e.notifyPropertyChange(\"data\")})},pushedData:function(e){e.transitionTo(\"loaded.saved\"),e.triggerLater(\"didLoad\")}},loading:{isLoading:!0,exit:function(e){e._loadingPromise=null},pushedData:function(e){e.transitionTo(\"loaded.saved\"),e.triggerLater(\"didLoad\"),a(e,\"isError\",!1)},becameError:function(e){e.triggerLater(\"becameError\",e)},notFound:function(e){e.transitionTo(\"empty\")}},loaded:{initialState:\"saved\",isLoaded:!0,saved:{setup:function(e){var
        t=e._attributes,r=!1;for(var n in t)if(t.hasOwnProperty(n)){r=!0;break}r&&e.adapterDidDirty()},didSetProperty:s,pushedData:Ember.K,becomeDirty:function(e){e.transitionTo(\"updated.uncommitted\")},willCommit:function(e){e.transitionTo(\"updated.inFlight\")},reloadRecord:function(e,t){i(e,\"store\").reloadRecord(e,t)},deleteRecord:function(e){e.transitionTo(\"deleted.uncommitted\"),e.clearRelationships()},unloadRecord:function(e){e.clearRelationships(),e.transitionTo(\"deleted.saved\")},didCommit:function(e){e.send(\"invokeLifecycleCallbacks\",i(e,\"lastDirtyType\"))}},created:u,updated:d},deleted:{initialState:\"uncommitted\",dirtyType:\"deleted\",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(e){var
        t=i(e,\"store\");t.recordArrayManager.remove(e)},uncommitted:{willCommit:function(e){e.transitionTo(\"inFlight\")},rollback:function(e){e.rollback()},becomeDirty:Ember.K,deleteRecord:Ember.K,rolledBack:function(e){e.transitionTo(\"loaded.saved\")}},inFlight:{isSaving:!0,willCommit:Ember.K,didCommit:function(e){e.transitionTo(\"saved\"),e.send(\"invokeLifecycleCallbacks\")},becameError:function(e){e.transitionTo(\"uncommitted\"),e.triggerLater(\"becameError\",e)}},saved:{isDirty:!1,setup:function(e){var
        t=i(e,\"store\");t.dematerializeRecord(e)},invokeLifecycleCallbacks:function(e){e.triggerLater(\"didDelete\",e),e.triggerLater(\"didCommit\",e)}}},invokeLifecycleCallbacks:function(e,t){\"created\"===t?e.triggerLater(\"didCreate\",e):e.triggerLater(\"didUpdate\",e),e.triggerLater(\"didCommit\",e)}};l=n(l,null,\"root\"),DS.RootState=l}(),function(){var
        e=Ember.get,t=Ember.set,r=Ember.merge,n=Ember.run.once,i=Ember.computed(function(t){return
        e(e(this,\"currentState\"),t)}).property(\"currentState\").readOnly();DS.Model=Ember.Object.extend(Ember.Evented,{isEmpty:i,isLoading:i,isLoaded:i,isDirty:i,isSaving:i,isDeleted:i,isNew:i,isValid:i,dirtyType:i,isError:!1,isReloading:!1,clientId:null,id:null,transaction:null,currentState:null,errors:null,serialize:function(t){var
        r=e(this,\"store\");return r.serialize(this,t)},toJSON:function(e){var t=DS.JSONSerializer.create({container:this.container});return
        t.serialize(this,e)},didLoad:Ember.K,didReload:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,data:Ember.computed(function(){return
        this._data=this._data||{},this._data}).property(),_data:null,init:function(){t(this,\"currentState\",DS.RootState.empty),this._super(),this._setup()},_setup:function(){this._changesToSync={},this._deferredTriggers=[],this._data={},this._attributes={},this._inFlightAttributes={},this._relationships={}},send:function(t,r){var
        n=e(this,\"currentState\");return n[t]||this._unhandledEvent(n,t,r),n[t](this,r)},transitionTo:function(r){var
        n=r.split(\".\",1),i=e(this,\"currentState\"),a=i;do a.exit&&a.exit(this),a=a.parentState;while(!a.hasOwnProperty(n));var
        o,s,c=r.split(\".\"),u=[],d=[];for(o=0,s=c.length;s>o;o++)a=a[c[o]],a.enter&&d.push(a),a.setup&&u.push(a);for(o=0,s=d.length;s>o;o++)d[o].enter(this);for(t(this,\"currentState\",a),o=0,s=u.length;s>o;o++)u[o].setup(this);this.updateRecordArraysLater()},_unhandledEvent:function(e,t,r){var
        n=\"Attempted to handle event `\"+t+\"` \";throw n+=\"on \"+String(this)+\"
        while in state \",n+=e.stateName+\". \",void 0!==r&&(n+=\"Called with \"+Ember.inspect(r)+\".\"),new
        Ember.Error(n)},withTransaction:function(t){var r=e(this,\"transaction\");r&&t(r)},loadingData:function(e){this.send(\"loadingData\",e)},loadedData:function(){this.send(\"loadedData\")},notFound:function(){this.send(\"notFound\")},pushedData:function(){this.send(\"pushedData\")},deleteRecord:function(){this.send(\"deleteRecord\")},destroyRecord:function(){return
        this.deleteRecord(),this.save()},unloadRecord:function(){this.send(\"unloadRecord\")},clearRelationships:function(){this.eachRelationship(function(e,r){if(\"belongsTo\"===r.kind)t(this,e,null);else
        if(\"hasMany\"===r.kind){var n=this._relationships[r.name];n&&n.clear()}},this)},updateRecordArrays:function(){var
        t=e(this,\"store\");t&&t.dataWasUpdated(this.constructor,this)},changedAttributes:function(){var
        t,r=e(this,\"_data\"),n=e(this,\"_attributes\"),i={};for(t in n)i[t]=[r[t],n[t]];return
        i},adapterWillCommit:function(){this.send(\"willCommit\")},adapterDidCommit:function(e){t(this,\"isError\",!1),e?this._data=e:Ember.mixin(this._data,this._inFlightAttributes),this._inFlightAttributes={},this.send(\"didCommit\"),this.updateRecordArraysLater(),e&&this.suspendRelationshipObservers(function(){this.notifyPropertyChange(\"data\")})},adapterDidDirty:function(){this.send(\"becomeDirty\"),this.updateRecordArraysLater()},dataDidChange:Ember.observer(function(){this.reloadHasManys()},\"data\"),reloadHasManys:function(){var
        t=e(this.constructor,\"relationshipsByName\");this.updateRecordArraysLater(),t.forEach(function(e,t){this._data.links&&this._data.links[e]||\"hasMany\"===t.kind&&this.hasManyDidChange(t.key)},this)},hasManyDidChange:function(e){var
        r=this._relationships[e];if(r){var n=this._data[e]||[];t(r,\"content\",Ember.A(n)),t(r,\"isLoaded\",!0),r.trigger(\"didLoad\")}},updateRecordArraysLater:function(){Ember.run.once(this,this.updateRecordArrays)},setupData:function(e,t){t?Ember.merge(this._data,e):this._data=e;var
        r=this._relationships;this.eachRelationship(function(t,n){e.links&&e.links[t]||n.options.async&&(r[t]=null)}),e&&this.pushedData(),this.suspendRelationshipObservers(function(){this.notifyPropertyChange(\"data\")})},materializeId:function(e){t(this,\"id\",e)},materializeAttributes:function(e){r(this._data,e)},materializeAttribute:function(e,t){this._data[e]=t},updateHasMany:function(e,t){this._data[e]=t,this.hasManyDidChange(e)},updateBelongsTo:function(e,t){this._data[e]=t},rollback:function(){this._attributes={},e(this,\"isError\")&&(this._inFlightAttributes={},t(this,\"isError\",!1)),this.send(\"rolledBack\"),this.suspendRelationshipObservers(function(){this.notifyPropertyChange(\"data\")})},toStringExtension:function(){return
        e(this,\"id\")},suspendRelationshipObservers:function(t,r){var n=e(this.constructor,\"relationshipNames\").belongsTo,i=this;try{this._suspendedRelationships=!0,Ember._suspendObservers(i,n,null,\"belongsToDidChange\",function(){Ember._suspendBeforeObservers(i,n,null,\"belongsToWillChange\",function(){t.call(r||i)})})}finally{this._suspendedRelationships=!1}},save:function(){var
        e=Ember.RSVP.defer();return this.get(\"store\").scheduleSave(this,e),this._inFlightAttributes=this._attributes,this._attributes={},DS.PromiseObject.create({promise:e.promise})},reload:function(){t(this,\"isReloading\",!0);var
        e=Ember.RSVP.defer(),r=this;return e.promise=e.promise.then(function(){return
        r.set(\"isReloading\",!1),r.set(\"isError\",!1),r},function(e){throw r.set(\"isError\",!0),e}),this.send(\"reloadRecord\",e),DS.PromiseObject.create({promise:e.promise})},adapterDidUpdateAttribute:function(e,t){void
        0!==t?(this._data[e]=t,this.notifyPropertyChange(e)):this._data[e]=this._inFlightAttributes[e],this.updateRecordArraysLater()},adapterDidInvalidate:function(e){this.send(\"becameInvalid\",e)},adapterDidError:function(){this.send(\"becameError\"),t(this,\"isError\",!0)},trigger:function(e){Ember.tryInvoke(this,e,[].slice.call(arguments,1)),this._super.apply(this,arguments)},triggerLater:function(){this._deferredTriggers.push(arguments),n(this,\"_triggerDeferredTriggers\")},_triggerDeferredTriggers:function(){for(var
        e=0,t=this._deferredTriggers.length;t>e;e++)this.trigger.apply(this,this._deferredTriggers[e]);this._deferredTriggers=[]}}),DS.Model.reopenClass({_create:DS.Model.create,create:function(){throw
        new Ember.Error(\"You should not call `create` on a model. Instead, call `store.createRecord`
        with the attributes you would like to set.\")}})}(),function(){function e(e,t){return\"function\"==typeof
        t.defaultValue?t.defaultValue():t.defaultValue}function t(e,t){return e._attributes.hasOwnProperty(t)||e._inFlightAttributes.hasOwnProperty(t)||e._data.hasOwnProperty(t)}function
        r(e,t){return e._attributes.hasOwnProperty(t)?e._attributes[t]:e._inFlightAttributes.hasOwnProperty(t)?e._inFlightAttributes[t]:e._data[t]}var
        n=Ember.get;DS.Model.reopenClass({attributes:Ember.computed(function(){var
        e=Ember.Map.create();return this.eachComputedProperty(function(t,r){r.isAttribute&&(r.name=t,e.set(t,r))}),e}),transformedAttributes:Ember.computed(function(){var
        e=Ember.Map.create();return this.eachAttribute(function(t,r){r.type&&e.set(t,r.type)}),e}),eachAttribute:function(e,t){n(this,\"attributes\").forEach(function(r,n){e.call(t,r,n)},t)},eachTransformedAttribute:function(e,t){n(this,\"transformedAttributes\").forEach(function(r,n){e.call(t,r,n)\n})}}),DS.Model.reopen({eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}}),DS.attr=function(n,i){i=i||{};var
        a={type:n,isAttribute:!0,options:i};return Ember.computed(function(n,a){if(arguments.length>1){var
        o=this._attributes[n]||this._inFlightAttributes[n]||this._data[n];return this.send(\"didSetProperty\",{name:n,oldValue:o,originalValue:this._data[n],value:a}),this._attributes[n]=a,a}return
        t(this,n)?r(this,n):e(this,i,n)}).property(\"data\").meta(a)}}(),function(){var
        e=DS.AttributeChange=function(e){this.record=e.record,this.store=e.store,this.name=e.name,this.value=e.value,this.oldValue=e.oldValue};e.createChange=function(t){return
        new e(t)},e.prototype={sync:function(){this.value!==this.oldValue&&(this.record.send(\"becomeDirty\"),this.record.updateRecordArraysLater()),this.destroy()},destroy:function(){delete
        this.record._changesToSync[this.name]}}}(),function(){function e(e){return\"object\"==typeof
        e&&(!e.then||\"function\"!=typeof e.then)}var t=Ember.get,r=Ember.set,n=Ember.EnumerableUtils.forEach;DS.RelationshipChange=function(e){this.parentRecord=e.parentRecord,this.childRecord=e.childRecord,this.firstRecord=e.firstRecord,this.firstRecordKind=e.firstRecordKind,this.firstRecordName=e.firstRecordName,this.secondRecord=e.secondRecord,this.secondRecordKind=e.secondRecordKind,this.secondRecordName=e.secondRecordName,this.changeType=e.changeType,this.store=e.store,this.committed={}},DS.RelationshipChangeAdd=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChangeRemove=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChange.create=function(e){return
        new DS.RelationshipChange(e)},DS.RelationshipChangeAdd.create=function(e){return
        new DS.RelationshipChangeAdd(e)},DS.RelationshipChangeRemove.create=function(e){return
        new DS.RelationshipChangeRemove(e)},DS.OneToManyChange={},DS.OneToNoneChange={},DS.ManyToNoneChange={},DS.OneToOneChange={},DS.ManyToManyChange={},DS.RelationshipChange._createChange=function(e){return\"add\"===e.changeType?DS.RelationshipChangeAdd.create(e):\"remove\"===e.changeType?DS.RelationshipChangeRemove.create(e):void
        0},DS.RelationshipChange.determineRelationshipType=function(e,t){var r,n,i=t.key,a=t.kind,o=e.inverseFor(i);return
        o&&(r=o.name,n=o.kind),o?\"belongsTo\"===n?\"belongsTo\"===a?\"oneToOne\":\"manyToOne\":\"belongsTo\"===a?\"oneToMany\":\"manyToMany\":\"belongsTo\"===a?\"oneToNone\":\"manyToNone\"},DS.RelationshipChange.createChange=function(e,t,r,n){var
        i,a=e.constructor;return i=DS.RelationshipChange.determineRelationshipType(a,n),\"oneToMany\"===i?DS.OneToManyChange.createChange(e,t,r,n):\"manyToOne\"===i?DS.OneToManyChange.createChange(t,e,r,n):\"oneToNone\"===i?DS.OneToNoneChange.createChange(e,t,r,n):\"manyToNone\"===i?DS.ManyToNoneChange.createChange(e,t,r,n):\"oneToOne\"===i?DS.OneToOneChange.createChange(e,t,r,n):\"manyToMany\"===i?DS.ManyToManyChange.createChange(e,t,r,n):void
        0},DS.OneToNoneChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,store:r,changeType:n.changeType,firstRecordName:i,firstRecordKind:\"belongsTo\"});return
        r.addRelationshipChangeFor(e,i,t,null,a),a},DS.ManyToNoneChange.createChange=function(e,t,r,n){var
        i=n.key,a=DS.RelationshipChange._createChange({parentRecord:e,childRecord:t,secondRecord:e,store:r,changeType:n.changeType,secondRecordName:n.key,secondRecordKind:\"hasMany\"});return
        r.addRelationshipChangeFor(e,i,t,null,a),a},DS.ManyToManyChange.createChange=function(e,t,r,n){var
        i=n.key,a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:\"hasMany\",secondRecordKind:\"hasMany\",store:r,changeType:n.changeType,firstRecordName:i});return
        r.addRelationshipChangeFor(e,i,t,null,a),a},DS.OneToOneChange.createChange=function(e,t,r,n){var
        i;n.parentType?i=n.parentType.inverseFor(n.key).name:n.key&&(i=n.key);var
        a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:\"belongsTo\",secondRecordKind:\"belongsTo\",store:r,changeType:n.changeType,firstRecordName:i});return
        r.addRelationshipChangeFor(e,i,t,null,a),a},DS.OneToOneChange.maintainInvariant=function(e,r,n,i){if(\"add\"===e.changeType&&r.recordIsMaterialized(n)){var
        a=t(n,i);if(a){var o=DS.OneToOneChange.createChange(n,a,r,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:\"remove\",key:e.key});r.addRelationshipChangeFor(n,i,e.parentRecord,null,o),o.sync()}}},DS.OneToManyChange.createChange=function(e,t,r,n){var
        i;n.parentType?(i=n.parentType.inverseFor(n.key).name,DS.OneToManyChange.maintainInvariant(n,r,e,i)):n.key&&(i=n.key);var
        a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:\"belongsTo\",secondRecordKind:\"hasMany\",store:r,changeType:n.changeType,firstRecordName:i});return
        r.addRelationshipChangeFor(e,i,t,a.getSecondRecordName(),a),a},DS.OneToManyChange.maintainInvariant=function(e,r,n,i){if(\"add\"===e.changeType&&n){var
        a=t(n,i);if(a){var o=DS.OneToManyChange.createChange(n,a,r,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:\"remove\",key:e.key});r.addRelationshipChangeFor(n,i,e.parentRecord,o.getSecondRecordName(),o),o.sync()}}},DS.RelationshipChange.prototype={getSecondRecordName:function(){var
        e,t=this.secondRecordName;if(!t){if(e=this.secondRecord,!e)return;var r=this.firstRecord.constructor,n=r.inverseFor(this.firstRecordName);this.secondRecordName=n.name}return
        this.secondRecordName},getFirstRecordName:function(){var e=this.firstRecordName;return
        e},destroy:function(){var e=this.childRecord,t=this.getFirstRecordName(),r=this.getSecondRecordName(),n=this.store;n.removeRelationshipChangeFor(e,t,this.parentRecord,r,this.changeType)},getSecondRecord:function(){return
        this.secondRecord},getFirstRecord:function(){return this.firstRecord},coalesce:function(){var
        e=this.store.relationshipChangePairsFor(this.firstRecord);n(e,function(e){var
        t=e.add,r=e.remove;t&&r&&(t.destroy(),r.destroy())})}},DS.RelationshipChangeAdd.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeRemove.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeAdd.prototype.changeType=\"add\",DS.RelationshipChangeAdd.prototype.sync=function(){var
        n=this.getSecondRecordName(),i=this.getFirstRecordName(),a=this.getFirstRecord(),o=this.getSecondRecord();o
        instanceof DS.Model&&a instanceof DS.Model&&(\"belongsTo\"===this.secondRecordKind?o.suspendRelationshipObservers(function(){r(o,n,a)}):\"hasMany\"===this.secondRecordKind&&o.suspendRelationshipObservers(function(){var
        r=t(o,n);e(r)&&r.addObject(a)})),a instanceof DS.Model&&o instanceof DS.Model&&t(a,i)!==o&&(\"belongsTo\"===this.firstRecordKind?a.suspendRelationshipObservers(function(){r(a,i,o)}):\"hasMany\"===this.firstRecordKind&&a.suspendRelationshipObservers(function(){var
        r=t(a,i);e(r)&&r.addObject(o)})),this.coalesce()},DS.RelationshipChangeRemove.prototype.changeType=\"remove\",DS.RelationshipChangeRemove.prototype.sync=function(){var
        n=this.getSecondRecordName(),i=this.getFirstRecordName(),a=this.getFirstRecord(),o=this.getSecondRecord();o
        instanceof DS.Model&&a instanceof DS.Model&&(\"belongsTo\"===this.secondRecordKind?o.suspendRelationshipObservers(function(){r(o,n,null)}):\"hasMany\"===this.secondRecordKind&&o.suspendRelationshipObservers(function(){var
        r=t(o,n);e(r)&&r.removeObject(a)})),a instanceof DS.Model&&t(a,i)&&(\"belongsTo\"===this.firstRecordKind?a.suspendRelationshipObservers(function(){r(a,i,null)}):\"hasMany\"===this.firstRecordKind&&a.suspendRelationshipObservers(function(){var
        r=t(a,i);e(r)&&r.removeObject(o)})),this.coalesce()}}(),function(){function
        e(e,n,i){return Ember.computed(function(e,n){var a=t(this,\"data\"),o=t(this,\"store\");if(2===arguments.length)return
        void 0===n?null:DS.PromiseObject.create({promise:Ember.RSVP.resolve(n)});var
        s=a.links&&a.links[e],c=a[e];if(r(c)){if(s){var u=Ember.RSVP.defer();return
        o.findBelongsTo(this,s,i,u),DS.PromiseObject.create({promise:u.promise})}return
        null}var d=o.fetchRecord(c)||Ember.RSVP.resolve(c);return DS.PromiseObject.create({promise:d})}).property(\"data\").meta(i)}var
        t=Ember.get,r=(Ember.set,Ember.isNone);DS.belongsTo=function(n,i){\"object\"==typeof
        n&&(i=n,n=void 0),i=i||{};var a={type:n,isRelationship:!0,options:i,kind:\"belongsTo\"};return
        i.async?e(n,i,a):Ember.computed(function(e,i){var a,o,s=t(this,\"data\"),c=t(this,\"store\");return
        o=\"string\"==typeof n?c.modelFor(n):n,2===arguments.length?void 0===i?null:i:(a=s[e],r(a)?null:(c.fetchRecord(a),a))}).property(\"data\").meta(a)},DS.Model.reopen({belongsToWillChange:Ember.beforeObserver(function(e,r){if(t(e,\"isLoaded\")){var
        n=t(e,r);if(n){var i=t(e,\"store\"),a=DS.RelationshipChange.createChange(e,n,i,{key:r,kind:\"belongsTo\",changeType:\"remove\"});a.sync(),this._changesToSync[r]=a}}}),belongsToDidChange:Ember.immediateObserver(function(e,r){if(t(e,\"isLoaded\")){var
        n=t(e,r);if(n){var i=t(e,\"store\"),a=DS.RelationshipChange.createChange(e,n,i,{key:r,kind:\"belongsTo\",changeType:\"add\"});a.sync()}}delete
        this._changesToSync[r]})})}(),function(){function e(e,r,n){return Ember.computed(function(e){if(this._relationships[e])return
        this._relationships[e];var i=Ember.RSVP.defer(),a=t(this,e,r,function(t,r){var
        a=r.links&&r.links[e];return a?t.findHasMany(this,a,n,i):t.findMany(this,r[e],n.type,i)}),o=i.promise.then(function(){return
        a});return DS.PromiseArray.create({promise:o})}).property(\"data\").meta(n)}function
        t(e,t,r,a){var o=e._relationships;if(o[t])return o[t];var s=n(e,\"data\"),c=n(e,\"store\"),u=o[t]=a.call(e,c,s);return
        i(u,{owner:e,name:t,isPolymorphic:r.polymorphic})}function r(r,n){n=n||{};var
        i={type:r,isRelationship:!0,options:n,kind:\"hasMany\"};return n.async?e(r,n,i):Ember.computed(function(e){return
        t(this,e,n,function(t,r){return r[e],t.findMany(this,r[e],i.type)})}).property(\"data\").meta(i)}var
        n=Ember.get,i=(Ember.set,Ember.setProperties);DS.hasMany=function(e,t){return\"object\"==typeof
        e&&(t=e,e=void 0),r(e,t)}}(),function(){var e=Ember.get;Ember.set,DS.Model.reopen({didDefineProperty:function(e,t,r){if(r
        instanceof Ember.Descriptor){var n=r.meta();n.isRelationship&&\"belongsTo\"===n.kind&&(Ember.addObserver(e,t,null,\"belongsToDidChange\"),Ember.addBeforeObserver(e,t,null,\"belongsToWillChange\")),n.parentType=e.constructor}}}),DS.Model.reopenClass({typeForRelationship:function(t){var
        r=e(this,\"relationshipsByName\").get(t);return r&&r.type},inverseFor:function(t){function
        r(t,n,i){i=i||[];var a=e(n,\"relationships\");if(a){var o=a.get(t);return
        o&&i.push.apply(i,a.get(t)),t.superclass&&r(t.superclass,n,i),i}}var n=this.typeForRelationship(t);if(!n)return
        null;var i=this.metaForProperty(t).options;if(null===i.inverse)return null;var
        a,o;if(i.inverse)a=i.inverse,o=Ember.get(n,\"relationshipsByName\").get(a).kind;else{var
        s=r(this,n);if(0===s.length)return null;a=s[0].name,o=s[0].kind}return{type:n,name:a,kind:o}},relationships:Ember.computed(function(){var
        e=new Ember.MapWithDefault({defaultValue:function(){return[]}});return this.eachComputedProperty(function(t,r){if(r.isRelationship){\"string\"==typeof
        r.type&&(r.type=this.store.modelFor(r.type));var n=e.get(r.type);n.push({name:t,kind:r.kind})}}),e}),relationshipNames:Ember.computed(function(){var
        e={hasMany:[],belongsTo:[]};return this.eachComputedProperty(function(t,r){r.isRelationship&&e[r.kind].push(t)}),e}),relatedTypes:Ember.computed(function(){var
        t,r=Ember.A();return this.eachComputedProperty(function(n,i){i.isRelationship&&(t=i.type,\"string\"==typeof
        t&&(t=e(this,t,!1)||this.store.modelFor(t)),r.contains(t)||r.push(t))}),r}),relationshipsByName:Ember.computed(function(){var
        e,t=Ember.Map.create();return this.eachComputedProperty(function(r,n){n.isRelationship&&(n.key=r,e=n.type,e||\"hasMany\"!==n.kind?e||(e=r):e=Ember.String.singularize(r),\"string\"==typeof
        e&&(n.type=this.store.modelFor(e)),t.set(r,n))}),t}),fields:Ember.computed(function(){var
        e=Ember.Map.create();return this.eachComputedProperty(function(t,r){r.isRelationship?e.set(t,r.kind):r.isAttribute&&e.set(t,\"attribute\")}),e}),eachRelationship:function(t,r){e(this,\"relationshipsByName\").forEach(function(e,n){t.call(r,e,n)})},eachRelatedType:function(t,r){e(this,\"relatedTypes\").forEach(function(e){t.call(r,e)})}}),DS.Model.reopen({eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)}})}(),function(){var
        e=Ember.get;Ember.set;var t=Ember.run.once,r=Ember.EnumerableUtils.forEach;DS.RecordArrayManager=Ember.Object.extend({init:function(){this.filteredRecordArrays=Ember.MapWithDefault.create({defaultValue:function(){return[]}}),this.changedRecords=[]},recordDidChange:function(e){this.changedRecords.push(e),t(this,this.updateRecordArrays)},recordArraysForRecord:function(e){return
        e._recordArrays=e._recordArrays||Ember.OrderedSet.create(),e._recordArrays},updateRecordArrays:function(){r(this.changedRecords,function(t){var
        n,i=t.constructor,a=this.filteredRecordArrays.get(i);r(a,function(r){n=e(r,\"filterFunction\"),this.updateRecordArray(r,n,i,t)},this);var
        o=t._loadingRecordArrays;if(o){for(var s=0,c=o.length;c>s;s++)o[s].loadedRecord();t._loadingRecordArrays=[]}},this),this.changedRecords=[]},updateRecordArray:function(e,t,r,n){var
        i;i=t?t(n):!0;var a=this.recordArraysForRecord(n);i?(a.add(e),e.addRecord(n)):i||(a.remove(e),e.removeRecord(n))},remove:function(e){var
        t=e._recordArrays;t&&r(t,function(t){t.removeRecord(e)})},updateFilter:function(t,r,n){for(var
        i,a=this.store.typeMapFor(r),o=a.records,s=0,c=o.length;c>s;s++)i=o[s],e(i,\"isDeleted\")||e(i,\"isEmpty\")||this.updateRecordArray(t,n,r,i)},createManyArray:function(e,t){var
        n=DS.ManyArray.create({type:e,content:t,store:this.store});return r(t,function(e){var
        t=this.recordArraysForRecord(e);t.add(n)},this),n},registerFilteredRecordArray:function(e,t,r){var
        n=this.filteredRecordArrays.get(t);n.push(e),this.updateFilter(e,t,r)},registerWaitingRecordArray:function(e,t){var
        r=e._loadingRecordArrays||[];r.push(t),e._loadingRecordArrays=r}})}(),function(){var
        e=Ember.get;Ember.set;var t=Ember.ArrayPolyfills.map,r=[\"description\",\"fileName\",\"lineNumber\",\"message\",\"name\",\"number\",\"stack\"];DS.InvalidError=function(e){var
        t=Error.prototype.constructor.call(this,\"The backend rejected the commit
        because it was invalid: \"+Ember.inspect(e));this.errors=e;for(var n=0,i=r.length;i>n;n++)this[r[n]]=t[r[n]]},DS.InvalidError.prototype=Ember.create(Error.prototype),DS.Adapter=Ember.Object.extend(DS._Mappable,{find:Ember.required(Function),findAll:null,findQuery:null,generateIdForRecord:null,serialize:function(t,r){return
        e(t,\"store\").serializerFor(t.constructor.typeKey).serialize(t,r)},createRecord:Ember.required(Function),updateRecord:Ember.required(Function),deleteRecord:Ember.required(Function),findMany:function(e,r,n){var
        i=t.call(n,function(t){return this.find(e,r,t)},this);return Ember.RSVP.all(i)}})}(),function(){var
        e=Ember.get,t=Ember.String.fmt,r=Ember.EnumerableUtils.indexOf,n=0;DS.FixtureAdapter=DS.Adapter.extend({serializer:null,simulateRemoteResponse:!0,latency:50,fixturesForType:function(e){if(e.FIXTURES){var
        r=Ember.A(e.FIXTURES);return r.map(function(e){var r=typeof e.id;if(\"number\"!==r&&\"string\"!==r)throw
        new Error(t(\"the id property must be defined as a number or string for fixture
        %@\",[e]));return e.id=e.id+\"\",e})}return null},queryFixtures:function(){},updateFixtures:function(e,t){e.FIXTURES||(e.FIXTURES=[]);var
        r=e.FIXTURES;this.deleteLoadedFixture(e,t),r.push(t)},mockJSON:function(e,t,r){return
        e.serializerFor(t).serialize(r,{includeId:!0})},generateIdForRecord:function(){return\"fixture-\"+n++},find:function(e,t,r){var
        n,i=this.fixturesForType(t);return i&&(n=Ember.A(i).findProperty(\"id\",r)),n?this.simulateRemoteCall(function(){return
        n},this):void 0},findMany:function(e,t,n){var i=this.fixturesForType(t);return
        i&&(i=i.filter(function(e){return-1!==r(n,e.id)})),i?this.simulateRemoteCall(function(){return
        i},this):void 0},findAll:function(e,t){var r=this.fixturesForType(t);return
        this.simulateRemoteCall(function(){return r},this)},findQuery:function(e,t,r){var
        n=this.fixturesForType(t);return n=this.queryFixtures(n,r,t),n?this.simulateRemoteCall(function(){return
        n},this):void 0},createRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return
        this.updateFixtures(t,n),this.simulateRemoteCall(function(){return n},this)},updateRecord:function(e,t,r){var
        n=this.mockJSON(e,t,r);return this.updateFixtures(t,n),this.simulateRemoteCall(function(){return
        n},this)},deleteRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.deleteLoadedFixture(t,n),this.simulateRemoteCall(function(){return
        null})},deleteLoadedFixture:function(e,t){var n=this.findExistingFixture(e,t);if(n){var
        i=r(e.FIXTURES,n);return e.FIXTURES.splice(i,1),!0}},findExistingFixture:function(t,r){var
        n=this.fixturesForType(t),i=e(r,\"id\");return this.findFixtureById(n,i)},findFixtureById:function(t,r){return
        Ember.A(t).find(function(t){return\"\"+e(t,\"id\")==\"\"+r?!0:!1})},simulateRemoteCall:function(t,r){var
        n=this;return new Ember.RSVP.Promise(function(i){e(n,\"simulateRemoteResponse\")?Ember.run.later(function(){i(t.call(r))},e(n,\"latency\")):Ember.run.once(function(){i(t.call(r))})})}})}(),function(){function
        e(e){return null==e?null:e+\"\"}var t=Ember.get;Ember.set;var r=Ember.ArrayPolyfills.forEach,n=Ember.ArrayPolyfills.map;DS.RESTSerializer=DS.JSONSerializer.extend({normalize:function(e,t,r){return
        this.normalizeId(t),this.normalizeUsingDeclaredMapping(e,t),this.normalizeAttributes(e,t),this.normalizeRelationships(e,t),this.normalizeHash&&this.normalizeHash[r]?this.normalizeHash[r](t):this._super(e,t,r)},normalizePayload:function(e,t){return
        t},normalizeId:function(e){var r=t(this,\"primaryKey\");\"id\"!==r&&(e.id=e[r],delete
        e[r])},normalizeUsingDeclaredMapping:function(e,r){var n,i,a=t(this,\"attrs\");if(a)for(i
        in a)n=a[i],r[i]=r[n],delete r[n]},normalizeAttributes:function(e,t){var r;this.keyForAttribute&&e.eachAttribute(function(e){r=this.keyForAttribute(e),e!==r&&(t[e]=t[r],delete
        t[r])},this)},normalizeRelationships:function(e,t){var r;this.keyForRelationship&&e.eachRelationship(function(e,n){r=this.keyForRelationship(e,n.kind),e!==r&&(t[e]=t[r],delete
        t[r])},this)},extractSingle:function(t,n,i,a){i=this.normalizePayload(n,i);var
        o,s=n.typeKey;for(var c in i){var u=this.typeForRoot(c),d=u===s;d&&\"array\"!==Ember.typeOf(i[c])?o=this.normalize(n,i[c],c):(t.modelFor(u),r.call(i[c],function(r){var
        n=this.typeForRoot(c),i=t.modelFor(n),s=t.serializerFor(i);r=s.normalize(i,r,c);var
        u=d&&!a&&!o,l=d&&e(r.id)===a;u||l?o=r:t.push(n,r)},this))}return o},extractArray:function(e,t,r){r=this.normalizePayload(t,r);var
        i,a=t.typeKey;for(var o in r){var s=o,c=!1;\"_\"===o.charAt(0)&&(c=!0,s=o.substr(1));var
        u=this.typeForRoot(s),d=e.modelFor(u),l=e.serializerFor(d),h=!c&&u===a,f=n.call(r[o],function(e){return
        l.normalize(d,e,o)},this);h?i=f:e.pushMany(u,f)}return i},pushPayload:function(e,t){t=this.normalizePayload(null,t);for(var
        r in t){var i=this.typeForRoot(r),a=e.modelFor(i),o=n.call(t[r],function(e){return
        this.normalize(a,e,r)},this);e.pushMany(i,o)}},typeForRoot:function(e){return
        Ember.String.singularize(e)},serialize:function(){return this._super.apply(this,arguments)},serializeIntoHash:function(e,t,r,n){e[t.typeKey]=this.serialize(r,n)},serializePolymorphicType:function(e,r,n){var
        i=n.key,a=t(e,i);i=this.keyForAttribute?this.keyForAttribute(i):i,r[i+\"Type\"]=a.constructor.typeKey}})}(),function(){var
        e=Ember.get;Ember.set;var t=Ember.ArrayPolyfills.forEach;DS.RESTAdapter=DS.Adapter.extend({defaultSerializer:\"_rest\",find:function(e,t,r){return
        this.ajax(this.buildURL(t.typeKey,r),\"GET\")},findAll:function(e,t,r){var
        n;return r&&(n={since:r}),this.ajax(this.buildURL(t.typeKey),\"GET\",{data:n})},findQuery:function(e,t,r){return
        this.ajax(this.buildURL(t.typeKey),\"GET\",{data:r})},findMany:function(e,t,r){return
        this.ajax(this.buildURL(t.typeKey),\"GET\",{data:{ids:r}})},findHasMany:function(t,r,n){var
        i=e(this,\"host\"),a=e(r,\"id\"),o=r.constructor.typeKey;return i&&\"/\"===n.charAt(0)&&\"/\"!==n.charAt(1)&&(n=i+n),this.ajax(this.urlPrefix(n,this.buildURL(o,a)),\"GET\")},findBelongsTo:function(t,r,n){var
        i=e(r,\"id\"),a=r.constructor.typeKey;return this.ajax(this.urlPrefix(n,this.buildURL(a,i)),\"GET\")},createRecord:function(e,t,r){var
        n={},i=e.serializerFor(t.typeKey);return i.serializeIntoHash(n,t,r,{includeId:!0}),this.ajax(this.buildURL(t.typeKey),\"POST\",{data:n})},updateRecord:function(t,r,n){var
        i={},a=t.serializerFor(r.typeKey);a.serializeIntoHash(i,r,n);var o=e(n,\"id\");return
        this.ajax(this.buildURL(r.typeKey,o),\"PUT\",{data:i})},deleteRecord:function(t,r,n){var
        i=e(n,\"id\");return this.ajax(this.buildURL(r.typeKey,i),\"DELETE\")},buildURL:function(t,r){var
        n=[],i=e(this,\"host\"),a=this.urlPrefix();return t&&n.push(this.pathForType(t)),r&&n.push(r),a&&n.unshift(a),n=n.join(\"/\"),!i&&n&&(n=\"/\"+n),n},urlPrefix:function(t,r){var
        n=e(this,\"host\"),i=e(this,\"namespace\"),a=[];return t?\"/\"===t.charAt(0)?n&&(t=t.slice(1),a.push(n)):/^http(s)?:\\/\\//.test(t)||a.push(r):(n&&a.push(n),i&&a.push(i)),t&&a.push(t),a.join(\"/\")},pathForType:function(e){return
        Ember.String.pluralize(e)},ajaxError:function(e){return e&&(e.then=null),e},ajax:function(e,t,r){var
        n=this;return new Ember.RSVP.Promise(function(i,a){r=n.ajaxOptions(e,t,r),r.success=function(e){Ember.run(null,i,e)},r.error=function(e){Ember.run(null,a,n.ajaxError(e))},Ember.$.ajax(r)})},ajaxOptions:function(e,r,n){if(n=n||{},n.url=e,n.type=r,n.dataType=\"json\",n.context=this,n.data&&\"GET\"!==r&&(n.contentType=\"application/json;
        charset=utf-8\",n.data=JSON.stringify(n.data)),void 0!==this.headers){var
        i=this.headers;n.beforeSend=function(e){t.call(Ember.keys(i),function(t){e.setRequestHeader(t,i[t])})}}return
        n}})}(),function(){DS.Model.reopen({_debugInfo:function(){var e=[\"id\"],t={belongsTo:[],hasMany:[]},r=[];this.eachAttribute(function(t){e.push(t)},this),this.eachRelationship(function(e,n){t[n.kind].push(e),r.push(e)});var
        n=[{name:\"Attributes\",properties:e,expand:!0},{name:\"Belongs To\",properties:t.belongsTo,expand:!0},{name:\"Has
        Many\",properties:t.hasMany,expand:!0},{name:\"Flags\",properties:[\"isLoaded\",\"isDirty\",\"isSaving\",\"isDeleted\",\"isError\",\"isNew\",\"isValid\"]}];return{propertyInfo:{includeOtherProperties:!0,groups:n,expensiveProperties:r}}}})}(),function(){Ember.String.pluralize=function(e){return
        Ember.Inflector.inflector.pluralize(e)},Ember.String.singularize=function(e){return
        Ember.Inflector.inflector.singularize(e)}}(),function(){function e(e,t){for(var
        r=0,n=t.length;n>r;r++)e.uncountable[t[r]]=!0}function t(e,t){for(var r,n=0,i=t.length;i>n;n++)r=t[n],e.irregular[r[0]]=r[1],e.irregularInverse[r[1]]=r[0]}function
        r(r){r=r||{},r.uncountable=r.uncountable||{},r.irregularPairs=r.irregularPairs||{};var
        n=this.rules={plurals:r.plurals||[],singular:r.singular||[],irregular:{},irregularInverse:{},uncountable:{}};e(n,r.uncountable),t(n,r.irregularPairs)}var
        n=/^\\s*$/;r.prototype={plural:function(e,t){this.rules.plurals.push([e,t])},singular:function(e,t){this.rules.singular.push([e,t])},uncountable:function(t){e(this.rules,[t])},irregular:function(e,r){t(this.rules,[[e,r]])},pluralize:function(e){return
        this.inflect(e,this.rules.plurals,this.rules.irregular)},singularize:function(e){return
        this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,t,r){var
        i,a,o,s,c,u,d,l;if(c=n.test(e))return e;if(s=e.toLowerCase(),u=this.rules.uncountable[s])return
        e;if(d=r&&r[s])return d;for(var h=t.length,f=0;h>f&&(i=t[h-1],l=i[0],!l.test(e));h--);return
        i=i||[],l=i[0],a=i[1],o=e.replace(l,a)}},Ember.Inflector=r}(),function(){Ember.Inflector.defaultRules={plurals:[[/$/,\"s\"],[/s$/i,\"s\"],[/^(ax|test)is$/i,\"$1es\"],[/(octop|vir)us$/i,\"$1i\"],[/(octop|vir)i$/i,\"$1i\"],[/(alias|status)$/i,\"$1es\"],[/(bu)s$/i,\"$1ses\"],[/(buffal|tomat)o$/i,\"$1oes\"],[/([ti])um$/i,\"$1a\"],[/([ti])a$/i,\"$1a\"],[/sis$/i,\"ses\"],[/(?:([^f])fe|([lr])f)$/i,\"$1$2ves\"],[/(hive)$/i,\"$1s\"],[/([^aeiouy]|qu)y$/i,\"$1ies\"],[/(x|ch|ss|sh)$/i,\"$1es\"],[/(matr|vert|ind)(?:ix|ex)$/i,\"$1ices\"],[/^(m|l)ouse$/i,\"$1ice\"],[/^(m|l)ice$/i,\"$1ice\"],[/^(ox)$/i,\"$1en\"],[/^(oxen)$/i,\"$1\"],[/(quiz)$/i,\"$1zes\"]],singular:[[/s$/i,\"\"],[/(ss)$/i,\"$1\"],[/(n)ews$/i,\"$1ews\"],[/([ti])a$/i,\"$1um\"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,\"$1sis\"],[/(^analy)(sis|ses)$/i,\"$1sis\"],[/([^f])ves$/i,\"$1fe\"],[/(hive)s$/i,\"$1\"],[/(tive)s$/i,\"$1\"],[/([lr])ves$/i,\"$1f\"],[/([^aeiouy]|qu)ies$/i,\"$1y\"],[/(s)eries$/i,\"$1eries\"],[/(m)ovies$/i,\"$1ovie\"],[/(x|ch|ss|sh)es$/i,\"$1\"],[/^(m|l)ice$/i,\"$1ouse\"],[/(bus)(es)?$/i,\"$1\"],[/(o)es$/i,\"$1\"],[/(shoe)s$/i,\"$1\"],[/(cris|test)(is|es)$/i,\"$1is\"],[/^(a)x[ie]s$/i,\"$1xis\"],[/(octop|vir)(us|i)$/i,\"$1us\"],[/(alias|status)(es)?$/i,\"$1\"],[/^(ox)en/i,\"$1\"],[/(vert|ind)ices$/i,\"$1ex\"],[/(matr)ices$/i,\"$1ix\"],[/(quiz)zes$/i,\"$1\"],[/(database)s$/i,\"$1\"]],irregularPairs:[[\"person\",\"people\"],[\"man\",\"men\"],[\"child\",\"children\"],[\"sex\",\"sexes\"],[\"move\",\"moves\"],[\"cow\",\"kine\"],[\"zombie\",\"zombies\"]],uncountable:[\"equipment\",\"information\",\"rice\",\"money\",\"species\",\"series\",\"fish\",\"sheep\",\"jeans\",\"police\"]}}(),function(){(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.pluralize=function(){return
        Ember.String.pluralize(this)},String.prototype.singularize=function(){return
        Ember.String.singularize(this)})}(),function(){Ember.Inflector.inflector=new
        Ember.Inflector(Ember.Inflector.defaultRules)}(),function(){function e(n,i,a,o,s){var
        c=t(i,\"attrs\");c&&a.eachRelationship(function(i,a){var u,d,l,h,f=c[i],p=n.serializerFor(a.type.typeKey),m=t(p,\"primaryKey\");if(\"hasMany\"===a.kind&&f&&(\"always\"===f.embedded||\"load\"===f.embedded)){if(d=\"_\"+Ember.String.pluralize(a.type.typeKey),u=this.keyForRelationship(i,a.kind),l=this.keyForAttribute(i),h=[],!o[l])return;s[d]=s[d]||[],r(o[l],function(t){var
        r=n.modelFor(a.type.typeKey);e(n,p,r,t,s),h.push(t[m]),s[d].push(t)}),o[u]=h,delete
        o[l]}},i)}var t=Ember.get,r=Ember.EnumerableUtils.forEach;DS.ActiveModelSerializer=DS.RESTSerializer.extend({keyForAttribute:function(e){return
        Ember.String.decamelize(e)},keyForRelationship:function(e,t){return e=Ember.String.decamelize(e),\"belongsTo\"===t?e+\"_id\":\"hasMany\"===t?Ember.String.singularize(e)+\"_ids\":e},serializeHasMany:function(e,r,n){var
        i=n.key,a=t(this,\"attrs\"),o=a&&a[i]&&\"always\"===a[i].embedded;o&&(r[this.keyForAttribute(i)]=t(e,i).map(function(e){var
        r=e.serialize(),n=t(this,\"primaryKey\");return r[n]=t(e,n),r},this))},serializeIntoHash:function(e,t,r,n){var
        i=Ember.String.decamelize(t.typeKey);e[i]=this.serialize(r,n)},serializePolymorphicType:function(e,r,n){var
        i=n.key,a=t(e,i);i=this.keyForAttribute(i),r[i+\"_type\"]=Ember.String.capitalize(a.constructor.typeKey)},typeForRoot:function(e){var
        t=Ember.String.camelize(e);return Ember.String.singularize(t)},normalizeRelationships:function(e,t){var
        n,i;this.keyForRelationship&&e.eachRelationship(function(e,a){if(a.options.polymorphic){if(n=this.keyForAttribute(e),i=t[n],i&&i.type)i.type=this.typeForRoot(i.type);else
        if(i&&\"hasMany\"===a.kind){var o=this;r(i,function(e){e.type=o.typeForRoot(e.type)})}}else
        n=this.keyForRelationship(e,a.kind),i=t[n];t[e]=i,e!==n&&delete t[n]},this)},extractSingle:function(t,r,n,i,a){var
        o=this.keyForAttribute(r.typeKey),s=n[o];return e(t,this,r,s,n),this._super(t,r,n,i,a)},extractArray:function(t,n,i){var
        a=this.keyForAttribute(n.typeKey),o=i[Ember.String.pluralize(a)];return r(o,function(r){e(t,this,n,r,i)},this),this._super(t,n,i)}})}(),function(){var
        e=Ember.EnumerableUtils.forEach;DS.ActiveModelAdapter=DS.RESTAdapter.extend({defaultSerializer:\"_ams\",pathForType:function(e){var
        t=Ember.String.decamelize(e);return Ember.String.pluralize(t)},ajaxError:function(t){var
        r=this._super(t);if(t&&422===t.status){var n=Ember.$.parseJSON(t.responseText).errors,i={};return
        e(Ember.keys(n),function(e){i[Ember.String.camelize(e)]=n[e]}),new DS.InvalidError(i)}return
        r}})}(),function(){Ember.onLoad(\"Ember.Application\",function(e){e.initializer({name:\"activeModelAdapter\",initialize:function(e,t){t.register(\"serializer:_ams\",DS.ActiveModelSerializer),t.register(\"adapter:_ams\",DS.ActiveModelAdapter)}})})}()}(),\"undefined\"==typeof
        location||\"localhost\"!==location.hostname&&\"127.0.0.1\"!==location.hostname||Ember.Logger.warn(\"You
        are running a production build of Ember on localhost and won't receive detailed
        error messages. If you want full error messages please use the non-minified
        build provided on the Ember website.\");"
    http_version: 
  recorded_at: Thu, 31 Oct 2013 20:28:10 GMT
recorded_with: VCR 2.6.0
